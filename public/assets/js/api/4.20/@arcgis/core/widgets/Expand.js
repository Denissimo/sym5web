/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.20/esri/copyright.txt for details.
*/
import{_ as e}from"../chunks/tslib.es6.js";import{aliasOf as s}from"../core/accessorSupport/decorators/aliasOf.js";import"../core/lang.js";import"../chunks/ensureType.js";import"../chunks/Logger.js";import{property as t}from"../core/accessorSupport/decorators/property.js";import{subclass as o}from"../core/accessorSupport/decorators/subclass.js";import n from"./Widget.js";import r from"./Expand/ExpandViewModel.js";import{isWidget as i,hasDomNode as a}from"./support/widget.js";import{t as d}from"../chunks/jsxFactory.js";import{m as p}from"../chunks/messageBundle.js";import{a as l}from"../chunks/accessibleHandler.js";import"../config.js";import"../chunks/object.js";import"../chunks/string.js";import"../chunks/metadata.js";import"../chunks/handleUtils.js";import"../chunks/Message.js";import"../intl.js";import"../chunks/number.js";import"../chunks/jsonMap.js";import"../chunks/locale.js";import"../core/Error.js";import"../core/promiseUtils.js";import"../request.js";import"../kernel.js";import"../core/urlUtils.js";import"../chunks/assets.js";import"../chunks/deprecate.js";import"../chunks/domUtils.js";import"../chunks/Evented.js";import"../core/Accessor.js";import"../chunks/ArrayPool.js";import"../chunks/arrayUtils.js";import"../core/scheduling.js";import"../core/Handles.js";import"../core/Collection.js";import"../chunks/Promise.js";import"../chunks/uuid.js";import"../core/watchUtils.js";import"../core/accessorSupport/decorators/cast.js";import"../chunks/projector.js";import"../chunks/widgetUtils.js";import"../chunks/jsxWidgetSupport.js";import"../chunks/vmEvent.js";const c="esri-expand esri-widget",u="esri-expand--auto",h="esri-expand--drawer",m="esri-expand--floating",x="esri-expand__container",g="esri-expand__container--expanded",j="esri-expand__panel",_="esri-widget--button",v="esri-icon-font-fallback-text",k="esri-collapse__icon",y="esri-expand__icon--expanded",C="esri-expand__icon-number",b="esri-expand__icon-number--expanded",w="esri-icon-expand",f="esri-icon-collapse",T="esri-expand__content",E="esri-expand__content--expanded",I="esri-expand__mask",M="esri-expand__mask--expanded";let N=class extends n{constructor(e,s){super(e,s),this.autoCollapse=null,this.closeOnEsc=!0,this.collapseTooltip="",this.content="",this.expanded=null,this.expandTooltip="",this.group=null,this.iconNumber=0,this.label=void 0,this.messages=null,this.messagesCommon=null,this.mode="auto",this.view=null,this.viewModel=new r,this._handleKeyDown=e=>{const{closeOnEsc:s,_toggleButtonEl:t,expanded:o}=this;if(!o||!s||e.target===t||"Escape"!==e.key)return;("function"==typeof s?s(e):s)&&(this.expanded=!1,null==t||t.focus())}}get contentId(){return`${this.id}_controls_content`}get expandTitle(){const{expanded:e,messagesCommon:s,collapseTooltip:t,expandTooltip:o}=this;return e?t||s.collapse:o||s.expand}get collapseIconClass(){return f}set collapseIconClass(e){e?this._override("collapseIconClass",e):this._clearOverride("collapseIconClass")}get expandIconClass(){return i(this.content)?this.content.iconClass:w}set expandIconClass(e){e?this._override("expandIconClass",e):this._clearOverride("expandIconClass")}expand(){this.viewModel.expanded=!0}collapse(){this.viewModel.expanded=!1}toggle(){this.viewModel.expanded=!this.viewModel.expanded}render(){const{mode:e}=this,s={[u]:"auto"===e,[h]:"drawer"===e,[m]:"floating"===e};return d("div",{class:this.classes(c,s),onkeydown:this._handleKeyDown},this.renderMask(),this.renderContainer())}renderContainer(){const{expanded:e}=this,s={[g]:e};return d("div",{class:this.classes(x,s)},this.renderPanel(),this.renderContent())}renderMask(){const{expanded:e}=this,s={[M]:e};return d("div",{bind:this,onclick:this._toggle,class:this.classes(I,s)})}renderBadgeNumber(){const{expanded:e,iconNumber:s}=this;return s&&!e?d("span",{key:"expand__icon-number",class:C},s):null}renderPanelNumber(){const{iconNumber:e,expanded:s}=this;return e&&s?d("span",{key:"expand__expand-icon-number",class:this.classes(C,b)},e):null}renderIcon(){const{collapseIconClass:e,expandIconClass:s,expanded:t}=this,o={[y]:t,[e]:t,[s]:!t};return e===s&&(o[e]=!0),d("span",{"aria-hidden":"true",class:this.classes(k,o)})}renderTitle(){return d("span",{class:v},this.expandTitle)}renderExpandButton(){const{expanded:e,expandTitle:s,contentId:t}=this;return d("div",{afterCreate:this._storeToggleButtonEl,"aria-controls":t,"aria-expanded":e?"true":"false",bind:this,class:_,onclick:this._toggle,onkeydown:this._toggle,role:"button",tabindex:"0",title:s},this.renderBadgeNumber(),this.renderIcon(),this.renderTitle())}renderPanel(){return d("div",{class:j},this.renderExpandButton(),this.renderPanelNumber())}renderContent(){const{expanded:e,contentId:s}=this,t={[E]:e};return d("div",{id:s,role:"region",class:this.classes(T,t)},this.renderContentContainer())}renderContentContainer(){const e=this.content;return"string"==typeof e?d("div",{innerHTML:e}):i(e)?e.render():e instanceof HTMLElement?d("div",{bind:e,afterCreate:this._attachToNode}):a(e)?d("div",{bind:e.domNode,afterCreate:this._attachToNode}):null}_toggle(){this.toggle()}_attachToNode(e){e.appendChild(this)}_storeToggleButtonEl(e){this._toggleButtonEl=e}};e([t({readOnly:!0})],N.prototype,"contentId",null),e([t({readOnly:!0})],N.prototype,"expandTitle",null),e([s("viewModel.autoCollapse")],N.prototype,"autoCollapse",void 0),e([t()],N.prototype,"closeOnEsc",void 0),e([t()],N.prototype,"collapseIconClass",null),e([t()],N.prototype,"collapseTooltip",void 0),e([t()],N.prototype,"content",void 0),e([s("viewModel.expanded")],N.prototype,"expanded",void 0),e([t()],N.prototype,"expandIconClass",null),e([t()],N.prototype,"expandTooltip",void 0),e([s("viewModel.group")],N.prototype,"group",void 0),e([t()],N.prototype,"iconNumber",void 0),e([t({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],N.prototype,"label",void 0),e([t(),p("esri/widgets/Expand/t9n/Expand")],N.prototype,"messages",void 0),e([t(),p("esri/t9n/common")],N.prototype,"messagesCommon",void 0),e([t()],N.prototype,"mode",void 0),e([s("viewModel.view")],N.prototype,"view",void 0),e([t({type:r})],N.prototype,"viewModel",void 0),e([l()],N.prototype,"_toggle",null),N=e([o("esri.widgets.Expand")],N);var B=N;export default B;
