/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.20/esri/copyright.txt for details.
*/
import{_ as e}from"./tslib.es6.js";import t from"../Color.js";import{k as i}from"./arrayUtils.js";import{E as s}from"./Evented.js";import{h as o}from"./handleUtils.js";import{b as r,i as a,f as l}from"../core/lang.js";import{g as n}from"./uuid.js";import{property as p}from"../core/accessorSupport/decorators/property.js";import"./ensureType.js";import"./Logger.js";import{subclass as u}from"../core/accessorSupport/decorators/subclass.js";import{e as c,r as d}from"../core/Accessor.js";import m from"../geometry/Point.js";import{b as v}from"./vec4f64.js";import{a as h,d as f,c as g}from"./unitUtils.js";function y(e){let t,i,s=[],o=!1;return function(...r){return o&&t===this&&function(e,t){if(e.length!==t.length)return!1;for(let i=0;i<e.length;++i)if(e[i]!==t[i])return!1;return!0}(r,s)||(i=e.apply(this,r),t=this,s=r,o=!0),i}}var b;!function(e){e.Disabled="disabled",e.Ready="ready",e.Creating="creating",e.Created="created",e.Selecting="selecting",e.Selected="selected"}(b||(b={}));const S=-5e5,x={noDataValue:-5e5,demResolution:"auto",maximumAutoTileRequests:150,ignoreInvisibleLayers:!0},E=100,P=500,j=.1,w=3e3,_=1e4,z=300,R=1e5,C=1,U=400,N=" â€• ",M={width:3,outlineSize:0,falloff:0,outlineColor:v([1,1,1,0]),renderOccluded:16},O={size:14,borderStyle:"solid",borderWidth:3,borderColor:"#ffffff",boxShadow:"0px 0px 0px 5px rgba(255,255,255,0.2)"},k=10,D={progress:1,hasZ:!1,samples:[],statistics:null,spatialReference:null};function L(e,t,i){return null==e?null:g(e*t,"meters",i)}function F(e,t,i){return null==e?null:g(e*t,"meters",i)}let Z=class extends s.EventedAccessor{constructor(e){super(e),this.type=null,this.id=n(),this.title=null,this.color=new t("#000000"),this.visible=!0,this._getSamplesMemoized=y(((e,t)=>function(e,t){if(r(e)||r(t))return null;const{samples:i,spatialReference:s}=e,{distance:o,elevation:a}=t,l=h(s),n=f(s),p=i.length,u=new Array(p);for(let e=0;e<p;++e){const t=i[e],s=t.sampledZ,r=t.coordinate;u[e]={x:r[0],y:r[1],z:s,distance:L(t.distance,l,o),elevation:F(s,n,a)}}return u}(e,t))),this._getStatisticsMemoized=y(((e,t)=>function(e,t){if(r(e)||r(t)||r(e.statistics)||r(e.spatialReference))return null;const{distance:i,elevation:s}=t,{statistics:o,spatialReference:a}=e,l=h(a),n=f(a);return{maxDistance:L(o.maxDistance,l,i),minElevation:F(o.minElevation,n,s),maxElevation:F(o.maxElevation,n,s),avgElevation:F(o.avgElevation,n,s),elevationGain:F(o.elevationGain,n,s),elevationLoss:F(o.elevationLoss,n,s),maxPositiveSlope:o.maxPositiveSlope,maxNegativeSlope:o.maxNegativeSlope,avgPositiveSlope:o.avgPositiveSlope,avgNegativeSlope:o.avgNegativeSlope}}(e,t))),this.viewVisualizationEnabled=!0,this.result=null,this.effectiveUnits=null,this.numSamplesForPreview=30,this.numSamplesPerChunk=200,this.chartFillEnabled=!0,this.chartStrokeWidth=1.5,this.chartStrokeOffsetY=0}get progress(){return a(this.result)&&this.visible?this.result.progress:0}get samples(){return this._getSamplesMemoized(this.result,this.effectiveUnits)}get statistics(){return this._getStatisticsMemoized(this.result,this.effectiveUnits)}get hoveredPoint(){return l(this._viewModel.hoveredChartPosition,(e=>this._getPoint(e)))}get available(){return!0}get hasZ(){const e=this.result;return a(e)&&e.hasZ}get minDemResolution(){return.1}queryElevation(){throw new Error("not implemented")}attach(e){return this._viewModel=e,o([c((()=>e.effectiveUnits),(e=>{this.effectiveUnits=e})),d((()=>[e.input]),(()=>this._onChange()))])}toggleVisibility(e){this.visible=void 0===e?!this.visible:e}_onChange(){this.emit("change")}_getPoint(e){const{samples:t,result:s}=this;if(r(t)||r(s))return null;const o=t.length;if(0===o)return null;const a=e*t[o-1].distance,{x:l,y:n,z:p}=i(t,a,(e=>e.distance));return r(p)?null:new m({x:l,y:n,z:p,spatialReference:s.spatialReference})}};e([p({nonNullable:!0})],Z.prototype,"id",void 0),e([p({nonNullable:!0})],Z.prototype,"title",void 0),e([p({type:t,nonNullable:!0})],Z.prototype,"color",void 0),e([p({nonNullable:!0})],Z.prototype,"visible",void 0),e([p({readOnly:!0})],Z.prototype,"progress",null),e([p({readOnly:!0})],Z.prototype,"samples",null),e([p({readOnly:!0})],Z.prototype,"statistics",null),e([p()],Z.prototype,"hoveredPoint",null),e([p()],Z.prototype,"viewVisualizationEnabled",void 0),e([p()],Z.prototype,"available",null),e([p()],Z.prototype,"result",void 0),e([p()],Z.prototype,"effectiveUnits",void 0),e([p()],Z.prototype,"numSamplesForPreview",void 0),e([p()],Z.prototype,"numSamplesPerChunk",void 0),e([p()],Z.prototype,"chartFillEnabled",void 0),e([p()],Z.prototype,"chartStrokeWidth",void 0),e([p()],Z.prototype,"chartStrokeOffsetY",void 0),e([p({readOnly:!0})],Z.prototype,"hasZ",null),e([p({readOnly:!0})],Z.prototype,"minDemResolution",null),e([p()],Z.prototype,"_viewModel",void 0),Z=e([u("esri.widgets.ElevationProfile.ElevationProfileLine")],Z);var A=Z;export{P as D,b as E,C as F,O as H,_ as L,z as M,N,U as P,k as S,E as U,S as a,x as b,D as c,w as d,R as e,j as f,A as g,Z as h,M as i,y as m};
