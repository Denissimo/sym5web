/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.20/esri/copyright.txt for details.
*/
import{i as e}from"../core/lang.js";import{I as t}from"./mat4f64.js";import{b as o}from"./mathUtils.js";import{projectPointToVector as r}from"../geometry/projection.js";import{v as n}from"./aaBoundingBox.js";import{b as a,a as s}from"../geometry/Polygon.js";import{m as i}from"./dehydratedFeatures.js";import{a as l,d as c}from"./RibbonLineMaterial.js";import{c as m}from"./ColorMaterial.js";import{O as p}from"./Object3D.js";const f=o();function u(o,a,s,i,l,m,u,d,g,h){const j=s?s.length:0,y=o.clippingExtent;if(r(a,f,o.elevationProvider.spatialReference),e(y)&&!n(y,f))return null;const v=o.renderCoordsHelper.spatialReference;r(a,f,v);const b=o.localOriginFactory.getOrigin(f),R=new p({castShadow:!1,metadata:{layerUid:d,graphicUid:g,usesVerticalDistanceToGround:!0}});for(let e=0;e<j;e++){const o=l?l[e]:t;R.addGeometry(s[e],i[e],o,m,b,h)}return{object:R,sampledElevation:c(R,a,o.elevationProvider,o.renderCoordsHelper,u)}}function d(e,t,o){const n=e.elevationContext,a=o.spatialReference;r(t,f,a),n.centerPointInElevationSR=i(f[0],f[1],t.hasZ?f[2]:0,a)}function g(e){switch(e.type){case"point":return e;case"polygon":case"extent":return m(e);case"polyline":{const t=e.paths[0];if(!t||0===t.length)return null;const o=a(t,s(t)/2);return i(o[0],o[1],o[2],e.spatialReference)}case"mesh":return e.origin}return null}function h(e,t,o,r,n){const a=new Float64Array(3*e.length),s=new Float64Array(a.length);e.forEach(((e,t)=>{a[3*t+0]=e[0],a[3*t+1]=e[1],a[3*t+2]=e.length>2?e[2]:0}));const i=l(a,t,0,s,0,a,0,a.length/3,o,r,n),c=null!=i;return{numVertices:e.length,position:a,mapPosition:s,projectionSuccess:c,sampledElevation:i}}export{u as c,d as e,h as g,g as p};
