/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.20/esri/copyright.txt for details.
*/
import{_ as e}from"./tslib.es6.js";import{s as r}from"./jsonMap.js";import{a as t}from"./JSONSupport.js";import{property as o}from"../core/accessorSupport/decorators/property.js";import"../core/lang.js";import{cast as a}from"../core/accessorSupport/decorators/cast.js";import"./Logger.js";import{e as s}from"./enumeration.js";import{r as p}from"./reader.js";import{subclass as i,d as l}from"../core/accessorSupport/decorators/subclass.js";import{I as n,e as y,a as c}from"./ensureType.js";import u from"../layers/support/Field.js";import"../geometry.js";import d from"../geometry/SpatialReference.js";import{f as S}from"./typeUtils.js";var b;let m=b=class extends t{constructor(e){super(e),this.type="map-layer"}clone(){const{mapLayerId:e,gdbVersion:r}=this;return new b({mapLayerId:e,gdbVersion:r})}};var j;e([s({mapLayer:"map-layer"})],m.prototype,"type",void 0),e([o({type:n,json:{write:!0}})],m.prototype,"mapLayerId",void 0),e([o({type:String,json:{write:!0}})],m.prototype,"gdbVersion",void 0),m=b=e([i("esri.layers.support.source.MapLayerSource")],m);let f=j=class extends t{constructor(e){super(e),this.type="query-table"}clone(){var e;const{workspaceId:r,query:t,oidFields:o,spatialReference:a,geometryType:s}=this,p={workspaceId:r,query:t,oidFields:o,spatialReference:null!=(e=null==a?void 0:a.clone())?e:void 0,geometryType:s};return new j(p)}};var v;e([s({queryTable:"query-table"})],f.prototype,"type",void 0),e([o({type:String,json:{write:!0}})],f.prototype,"workspaceId",void 0),e([o({type:String,json:{write:!0}})],f.prototype,"query",void 0),e([o({type:String,json:{write:!0}})],f.prototype,"oidFields",void 0),e([o({type:d,json:{write:!0}})],f.prototype,"spatialReference",void 0),e([s(S)],f.prototype,"geometryType",void 0),f=j=e([i("esri.layers.support.source.QueryTableDataSource")],f);let g=v=class extends t{constructor(e){super(e),this.type="raster"}clone(){const{workspaceId:e,dataSourceName:r}=this;return new v({workspaceId:e,dataSourceName:r})}};var T;e([s({raster:"raster"})],g.prototype,"type",void 0),e([o({type:String,json:{write:!0}})],g.prototype,"dataSourceName",void 0),e([o({type:String,json:{write:!0}})],g.prototype,"workspaceId",void 0),g=v=e([i("esri.layers.support.source.RasterDataSource")],g);let w=T=class extends t{constructor(e){super(e),this.type="table"}clone(){const{workspaceId:e,gdbVersion:r,dataSourceName:t}=this;return new T({workspaceId:e,gdbVersion:r,dataSourceName:t})}};var h,I;e([s({table:"table"})],w.prototype,"type",void 0),e([o({type:String,json:{write:!0}})],w.prototype,"workspaceId",void 0),e([o({type:String,json:{write:!0}})],w.prototype,"gdbVersion",void 0),e([o({type:String,json:{write:!0}})],w.prototype,"dataSourceName",void 0),w=T=e([i("esri.layers.support.source.TableDataSource")],w);const L=r()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let k=h=class extends t{constructor(e){super(e),this.type="join-table"}readLeftTableSource(e,r,t){return q()(e,r,t)}castLeftTableSource(e){return c(N(),e)}readRightTableSource(e,r,t){return q()(e,r,t)}castRightTableSource(e){return c(N(),e)}clone(){var e,r;const{leftTableKey:t,rightTableKey:o,leftTableSource:a,rightTableSource:s,joinType:p}=this,i={leftTableKey:t,rightTableKey:o,leftTableSource:null!=(e=null==a?void 0:a.clone())?e:void 0,rightTableSource:null!=(r=null==s?void 0:s.clone())?r:void 0,joinType:p};return new h(i)}};e([s({joinTable:"join-table"})],k.prototype,"type",void 0),e([o({type:String,json:{write:!0}})],k.prototype,"leftTableKey",void 0),e([o({type:String,json:{write:!0}})],k.prototype,"rightTableKey",void 0),e([o({json:{write:!0}})],k.prototype,"leftTableSource",void 0),e([p("leftTableSource")],k.prototype,"readLeftTableSource",null),e([a("leftTableSource")],k.prototype,"castLeftTableSource",null),e([o({json:{write:!0}})],k.prototype,"rightTableSource",void 0),e([p("rightTableSource")],k.prototype,"readRightTableSource",null),e([a("rightTableSource")],k.prototype,"castRightTableSource",null),e([s(L)],k.prototype,"joinType",void 0),k=h=e([i("esri.layers.support.source.JoinTableDataSource")],k);let R=null;function q(){return R||(R=l({types:N()})),R}let x=null;function N(){return x||(x={key:"type",base:null,typeMap:{"data-layer":K,"map-layer":m}}),x}const D={key:"type",base:null,typeMap:{"join-table":k,"query-table":f,raster:g,table:w}};let K=I=class extends t{constructor(e){super(e),this.type="data-layer"}clone(){const{fields:e,dataSource:r}=this;return new I({fields:e,dataSource:r})}};e([s({dataLayer:"data-layer"})],K.prototype,"type",void 0),e([o({type:[u],json:{write:!0}})],K.prototype,"fields",void 0),e([o({types:D,json:{write:!0}})],K.prototype,"dataSource",void 0),K=I=e([i("esri.layers.support.source.DataLayerSource")],K),K.from=y(K);export{K as D,m as M};
