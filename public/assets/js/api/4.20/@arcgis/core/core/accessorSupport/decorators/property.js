/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.20/esri/copyright.txt for details.
*/
import{L as t}from"../../../chunks/Logger.js";import{b as e,a as r,i as n,c as s,d as o,f as i,g as a,h as c,j as u,e as f}from"../../../chunks/ensureType.js";import{p as l,g as p,i as g,a as d,m}from"../../../chunks/metadata.js";import"../../lang.js";import"../../../config.js";import"../../../chunks/object.js";import"../../../chunks/string.js";import"../../../chunks/handleUtils.js";function y(t,e){const r="?"===t[t.length-1]?t.slice(0,-1):t;if(null!=e.getItemAt||Array.isArray(e)){const t=parseInt(r,10);if(!isNaN(t))return Array.isArray(e)?e[t]:e.getItemAt(t)}const n=p(e);return g(n,r)?n.get(r):e[r]}function h(t,e,r){if(null==t)return t;const n=y(e[r],t);return!n&&r<e.length-1?void 0:r===e.length-1?n:h(n,e,r+1)}function j(t,e,r=0){return"string"==typeof e&&-1===e.indexOf(".")?y(e,t):h(t,l(e),r)}function v(t,e){return j(t,e)}function A(t,e){return void 0!==j(e,t)}function O(t,e,r){if(t&&e)if("object"==typeof e)for(const r of Object.getOwnPropertyNames(e))O(t,r,e[r]);else{if(-1!==e.indexOf(".")){const n=e.split("."),s=n.splice(n.length-1,1)[0];return void O(v(t,n),s,r)}t[e]=r}}t.getLogger("esri.core.accessorSupport.set");const b=t.getLogger("esri.core.accessorSupport.decorators.property");function k(t={}){return(l,p,g)=>{if(l===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${l.name}.${p}. Accessor does not support static properties.`);const y=d(l,p);g&&(g.get||g.set?(y.get=g.get||y.get,y.set=g.set||y.set):"value"in g&&("value"in t&&b.warn(`@property() will redefine the value of "${p}" on "${l.constructor.name}" already defined in the metadata`,t),y.value=t.value=g.value)),null!=t.readOnly&&(y.readOnly=t.readOnly);const h=t.aliasOf;if(h){const t="string"==typeof h?h:h.source,e="string"==typeof h?null:!0===h.overridable;let r;y.dependsOn=[t],y.get=function(){let e=v(this,t);if("function"==typeof e){r||(r=t.split(".").slice(0,-1).join("."));const n=v(this,r);n&&(e=e.bind(n))}return e},y.readOnly||(y.set=e?function(t){void 0!==t?this._override(p,t):this._clearOverride(p)}:function(e){O(this,t,e)})}const j=t.type,A=t.types;y.cast||(j?y.cast=function(t){let e=0,r=t;if(n(t))return s(t);for(;Array.isArray(r)&&1===r.length&&"string"!=typeof r[0]&&"number"!=typeof r[0];)r=r[0],e++;const l=r;if(o(l))return 0===e?i(l):a(i(l),e);if(1===e)return c(l);if(e>1)return u(l,e);const p=t;if(p.from)return p.from;return f(p)}(j):A&&(Array.isArray(A)?y.cast=e(r(A[0])):y.cast=r(A))),t.range&&(y.cast=w(y.cast,t.range)),m(y,t)}}function x(t,e,r){const n=d(t,r);n.json||(n.json={});let s=n.json;return void 0!==e&&(s.origins||(s.origins={}),s.origins[e]||(s.origins[e]={}),s=s.origins[e]),s}function w(t,e){return r=>{let n=+t(r);return null!=e.step&&(n=Math.round(n/e.step)*e.step),null!=e.min&&(n=Math.max(e.min,n)),null!=e.max&&(n=Math.min(e.max,n)),n}}export{A as e,w as ensureRange,v as g,k as property,x as propertyJSONMeta,O as s,j as v};
