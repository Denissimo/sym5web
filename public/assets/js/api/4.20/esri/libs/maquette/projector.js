// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.20/esri/copyright.txt for details.
//>>built
define(["exports","./dom"],function(r,p){let t;t=Array.prototype.find?(h,g)=>h.find(g):(h,g)=>h.filter(g)[0];let w=(h,g)=>{let e=h;g.forEach(k=>{e=e&&e.children?t(e.children,f=>f.domNode===k):void 0});return e},x=(h,g,e)=>{let k=function(f){e("domEvent",f);var c=g();{var d=f.currentTarget;var m=c.domNode;let n=[];for(;d&&d!==m;)n.push(d),d=d.parentNode;d=n}d.reverse();c=w(c.getLastRender(),d);h.scheduleRender();let l;c&&(l=c.properties[`on${f.type}`].apply(c.properties.bind||this,arguments));e("domEventProcessed",
f);return l};return(f,c,d,m)=>k};r.createProjector=h=>{let g,e=p.applyDefaultProjectionOptions(h),k=e.performanceLogger,f=!0,c,d=!1,m=[],l=[],n=(b,a,u)=>{let q;e.eventHandlerInterceptor=x(g,()=>q,k);q=b(a,u(),e);m.push(q);l.push(u)},v=()=>{c=void 0;if(f){f=!1;k("renderStart",void 0);for(let b=0;b<m.length;b++){let a=l[b]();k("rendered",void 0);m[b].update(a);k("patched",void 0)}k("renderDone",void 0);f=!0}};return g={renderNow:v,scheduleRender:()=>{c||d||(c=requestAnimationFrame(v))},stop:()=>{c&&
(cancelAnimationFrame(c),c=void 0);d=!0},resume:()=>{d=!1;f=!0;g.scheduleRender()},append:(b,a)=>{n(p.dom.append,b,a)},insertBefore:(b,a)=>{n(p.dom.insertBefore,b,a)},merge:(b,a)=>{n(p.dom.merge,b,a)},replace:(b,a)=>{n(p.dom.replace,b,a)},detach:b=>{for(let a=0;a<l.length;a++)if(l[a]===b)return l.splice(a,1),m.splice(a,1)[0];throw Error("renderFunction was not found");}}};Object.defineProperty(r,"__esModule",{value:!0})});