// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.20/esri/copyright.txt for details.
//>>built
define("exports ./aaBoundingRect ./boundsUtils ./intersectsBase ./jsonUtils ./normalizeUtilsCommon ./spatialReferenceUtils".split(" "),function(x,B,C,y,r,m,D){function E(a,c){const d=m.getGeometryParts(a);for(const b of d)for(const e of b)e[0]+=c;return a}function F(a,c){if(!c)return a;const d=G(a,c).map(b=>b.extent);return 2>d.length?d[0]||a:2<d.length?(a.xmin=c.valid[0],a.xmax=c.valid[1],a):{rings:d.map(b=>[[b.xmin,b.ymin],[b.xmin,b.ymax],[b.xmax,b.ymax],[b.xmax,b.ymin],[b.xmin,b.ymin]])}}function z(a,
c,d){if(Array.isArray(a)){var b=a[0];b>c?(d=m.offsetMagnitude(b,c),a[0]=b+-2*d*c):b<d&&(c=m.offsetMagnitude(b,d),a[0]=b+-2*c*d)}else b=a.x,b>c?(d=m.offsetMagnitude(b,c),a.x+=-2*d*c):b<d&&(c=m.offsetMagnitude(b,d),a.x+=-2*c*d);return a}function G(a,c){const d=[],{ymin:b,ymax:e}=a;var g=a.xmax-a.xmin,k=a.xmin,h=a.xmax;const [f,p]=c.valid;var l=A(a.xmin,c);var n=l.x;const q=l.frameId;l=A(a.xmax,c);a=l.x;l=l.frameId;c=n===a&&0<g;if(g>2*p){g={xmin:k<h?n:a,ymin:b,xmax:p,ymax:e};k={xmin:f,ymin:b,xmax:k<
h?a:n,ymax:e};h={xmin:0,ymin:b,xmax:p,ymax:e};n={xmin:f,ymin:b,xmax:0,ymax:e};a=[];c=[];u(g,h)&&a.push(q);u(g,n)&&c.push(q);u(k,h)&&a.push(l);u(k,n)&&c.push(l);for(let v=q+1;v<l;v++)a.push(v),c.push(v);d.push({extent:g,frameIds:[q]},{extent:k,frameIds:[l]},{extent:h,frameIds:a},{extent:n,frameIds:c})}else n>a||c?d.push({extent:{xmin:n,ymin:b,xmax:p,ymax:e},frameIds:[q]},{extent:{xmin:f,ymin:b,xmax:a,ymax:e},frameIds:[l]}):d.push({extent:{xmin:n,ymin:b,xmax:a,ymax:e},frameIds:[q]});return d}function A(a,
c){const [d,b]=c.valid;c=2*b;var e=0;a>b?(e=Math.ceil(Math.abs(a-b)/c),a-=e*c):a<d&&(e=Math.ceil(Math.abs(a-d)/c),a+=e*c,e=-e);return{x:a,frameId:e}}function u(a,c){const {xmin:d,ymin:b,xmax:e,ymax:g}=c;return w(a,d,b)&&w(a,d,g)&&w(a,e,g)&&w(a,e,b)}function w(a,c,d){return c>=a.xmin&&c<=a.xmax&&d>=a.ymin&&d<=a.ymax?!0:!1}let H=function(){function a(){}a.prototype.cut=function(c,d){let b;if(c.rings)this.closed=!0,b=c.rings,this.minPts=4;else if(c.paths)this.closed=!1,b=c.paths,this.minPts=2;else return null;
const e=b.length;d*=-2;for(let g=0;g<e;g++){const k=b[g];if(k&&k.length>=this.minPts){const h=[];for(const f of k)h.push([f[0]+d,f[1]]);b.push(h)}}this.closed?c.rings=b:c.paths=b;return c};return a}();const t=B.create();x.normalizeCentralMeridianSync=function(a){if(!a)return null;if("mesh"===a.type)return a.toJSON();let c=null;var d=a.spatialReference,b=D.getInfo(d);if(!b)return a.toJSON();var e=d.isWebMercator?102100:4326;const g=m.cutParams[e].maxX,k=m.cutParams[e].minX;d=m.cutParams[e].plus180Line;
e=m.cutParams[e].minus180Line;let h;var f=a.toJSON();r.isPoint(f)?h=z(f,g,k):r.isMultipoint(f)?(f.points=f.points.map(p=>z(p,g,k)),h=f):r.isExtent(f)?h=F(f,b):r.isPolygon(f)||r.isPolyline(f)?(C.getBoundsXY(t,f),a={xmin:t[0],ymin:t[1],xmax:t[2],ymax:t[3]},b=2*m.offsetMagnitude(a.xmin,k)*g,f=0===b?f:E(f,b),a.xmin+=b,a.xmax+=b,y.extentIntersectsPolyline(a,d)&&a.xmax!==g?c=f:y.extentIntersectsPolyline(a,e)&&a.xmin!==k?c=f:h=f):h=a.toJSON();return null!==c?(new H).cut(c,g):h};Object.defineProperty(x,"__esModule",
{value:!0})});