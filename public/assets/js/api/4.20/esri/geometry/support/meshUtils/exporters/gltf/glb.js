// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.20/esri/copyright.txt for details.
//>>built
define(["exports","../../../../../core/has"],function(k,l){let f=function(){function d(b,a){if(!b)throw Error("GLB requires a JSON gltf chunk");this.length=d.HEADER_SIZE;this.length+=d.CHUNK_HEADER_SIZE;b=this.textToArrayBuffer(b);this.length+=this.alignTo(b.byteLength,4);if(a&&(this.length+=d.CHUNK_HEADER_SIZE,this.length+=a.byteLength,a.byteLength%4))throw Error("Expected BIN chunk length to be divisible by 4 at this point");this.buffer=new ArrayBuffer(this.length);this.outView=new DataView(this.buffer);
this.writeHeader();b=this.writeChunk(b,12,1313821514,32);a&&this.writeChunk(a,b,5130562)}var e=d.prototype;e.writeHeader=function(){this.outView.setUint32(0,d.MAGIC,!0);this.outView.setUint32(4,d.VERSION,!0);this.outView.setUint32(8,this.length,!0)};e.writeChunk=function(b,a,c,g=0){const h=this.alignTo(b.byteLength,4);this.outView.setUint32(a,h,!0);this.outView.setUint32(a+=4,c,!0);this.writeArrayBuffer(this.outView.buffer,b,a+=4,0,b.byteLength);for(a+=b.byteLength;a%4;)g&&this.outView.setUint8(a,
g),a++;return a};e.writeArrayBuffer=function(b,a,c,g,h){(new Uint8Array(b,c,h)).set(new Uint8Array(a,g,h),0)};e.textToArrayBuffer=function(b){if(l("esri-text-encoder"))return(new TextEncoder).encode(b).buffer;const a=new Uint8Array(b.length);for(let c=0;c<a.length;++c)a[c]=b.charCodeAt(c);return a.buffer};e.alignTo=function(b,a){return a*Math.ceil(b/a)};return d}();f.HEADER_SIZE=12;f.CHUNK_HEADER_SIZE=8;f.MAGIC=1179937895;f.VERSION=2;k.GLB=f;Object.defineProperty(k,"__esModule",{value:!0})});