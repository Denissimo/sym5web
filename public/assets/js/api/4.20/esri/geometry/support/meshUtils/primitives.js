// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.20/esri/copyright.txt for details.
//>>built
define("exports ../../../core/maybe ../../../chunks/mat3f64 ../../../chunks/vec3 ../../../chunks/vec3f64 ../MeshComponent ../MeshVertexAttributes ./georeference".split(" "),function(w,E,F,z,G,A,H,I){var B=[-.5,-.5,0,.5,-.5,0,.5,.5,0,-.5,.5,0],C=[0,0,1,0,0,1,0,0,1,0,0,1],J=[0,1,1,1,1,0,0,0],K=[0,1,2,0,2,3],L={east:[3,1,2],west:[-3,-1,2],north:[-1,3,2],south:[1,-3,2],up:[1,2,3],down:[1,-2,-3]};const M={faceDescriptions:[{axis:[0,-1,0],uvOrigin:[0,.625],corners:[[-1,-1],[1,-1],[1,1],[-1,1]]},{axis:[1,
0,0],uvOrigin:[.25,.625],corners:[[-1,-1],[1,-1],[1,1],[-1,1]]},{axis:[0,1,0],uvOrigin:[.5,.625],corners:[[1,-1],[-1,-1],[-1,1],[1,1]]},{axis:[-1,0,0],uvOrigin:[.75,.625],corners:[[1,-1],[-1,-1],[-1,1],[1,1]]},{axis:[0,0,1],uvOrigin:[0,.375],corners:[[-1,-1],[1,-1],[1,1],[-1,1]]},{axis:[0,0,-1],uvOrigin:[0,.875],corners:[[-1,1],[1,1],[1,-1],[-1,-1]]}],uvScales:[[0,0],[1,0],[1,1],[0,1]],faceVertexOffsets:[0,1,2,0,2,3]},D={south:0,east:1,north:2,west:3,up:4,down:5},m=G.create(),x=F.create();w.boxFaceOrder=
D;w.convertUnitGeometry=function(b,d,g){for(var a=0;a<b.position.length;a+=3)b.position[a+2]+=.5;a=g&&g.size;if(null!=a){a="number"===typeof a?[a,a,a]:[null!=a.width?a.width:1,null!=a.depth?a.depth:1,null!=a.height?a.height:1];x[0]=a[0];x[4]=a[1];x[8]=a[2];for(var c=0;c<b.position.length;c+=3){for(var e=0;3>e;e++)m[e]=b.position[c+e];z.transformMat3(m,m,x);for(e=0;3>e;e++)b.position[c+e]=m[e]}if(a[0]!==a[1]||a[1]!==a[2])for(x[0]=1/a[0],x[4]=1/a[1],x[8]=1/a[2],a=0;a<b.normal.length;a+=3){for(c=0;3>
c;c++)m[c]=b.normal[a+c];z.transformMat3(m,m,x);z.normalize(m,m);for(c=0;3>c;c++)b.normal[a+c]=m[c]}}const {vertexAttributes:n,transform:k}=I.georeferenceByTransform(b,d,g);return{vertexAttributes:new H["default"]({...n,uv:b.uv}),transform:k,components:[new A({faces:b.faces,material:g&&g.material||null})],spatialReference:d.spatialReference}};w.createUnitSizeBox=function(){const {faceDescriptions:b,faceVertexOffsets:d,uvScales:g}=M;var a=4*b.length;const c=new Float64Array(3*a),e=new Float32Array(3*
a);a=new Float32Array(2*a);const n=new Uint32Array(6*b.length);let k=0,l=0,h=0,q=0;for(let p=0;p<b.length;p++){const t=b[p];var f=k/3;for(const r of d)n[q++]=f+r;f=t.corners;for(let r=0;4>r;r++){const u=f[r];let y=0;a[h++]=.25*g[r][0]+t.uvOrigin[0];a[h++]=t.uvOrigin[1]-.25*g[r][1];for(let v=0;3>v;v++)0!==t.axis[v]?(c[k++]=.5*t.axis[v],e[l++]=t.axis[v]):(c[k++]=.5*u[y++],e[l++]=0)}}return{position:c,normal:e,uv:a,faces:n}};w.createUnitSizeCylinder=function(b=0){b=Math.round(16*2**b);var d=4*(b+1)+
2*b;const g=new Float64Array(3*d),a=new Float32Array(3*d);d=new Float32Array(2*d);const c=new Uint32Array(12*b);let e=0,n=0,k=0,l=0,h=0;for(let f=0;5>=f;f++){const p=0===f||5===f,t=1>=f||4<=f,r=2===f||4===f,u=p?b-1:b;for(let y=0;y<=u;y++){var q=y/u*2*Math.PI;const v=p?0:.5;m[0]=v*Math.sin(q);m[1]=v*-Math.cos(q);m[2]=2>=f?.5:-.5;for(q=0;3>q;q++)g[e++]=m[q],t?a[n++]=2===q?1>=f?1:-1:0:a[n++]=2===q?0:m[q]/v;d[k++]=(y+(p?.5:0))/b;1>=f?d[k++]=1*f/3:3>=f?d[k++]=(f-2)/3+1/3:d[k++]=(f-4)/3+2/3;r||0===f||y===
b||(5!==f&&(c[l++]=h,c[l++]=h+1,c[l++]=h-b),1!==f&&(c[l++]=h,c[l++]=h-b,c[l++]=h-b-1));h++}}return{position:g,normal:a,uv:d,faces:c}};w.createUnitSizePlane=function(b){b=L[b];const d=new Float64Array(B.length),g=new Float32Array(C.length);let a=0;for(let e=0;4>e;e++){const n=a;for(let k=0;3>k;k++){var c=b[k];const l=Math.abs(c)-1;c=0<=c?1:-1;d[a]=B[n+l]*c;g[a]=C[n+l]*c;a++}}return{position:d,normal:g,uv:new Float32Array(J),faces:new Uint32Array(K)}};w.createUnitSizeSphere=function(b=0){b=Math.round(8*
2**b);const d=2*b;var g=(b-1)*(d+1)+2*d;const a=new Float64Array(3*g),c=new Float32Array(3*g);g=new Float32Array(2*g);const e=new Uint32Array((b-1)*d*6);let n=0,k=0,l=0,h=0;for(let p=0;p<=b;p++){var q=p/b*Math.PI+.5*Math.PI;const t=Math.cos(q);m[2]=Math.sin(q);const r=(q=0===p||p===b)?d-1:d;for(let u=0;u<=r;u++){var f=u/r*2*Math.PI;m[0]=-Math.sin(f)*t;m[1]=Math.cos(f)*t;for(f=0;3>f;f++)a[n]=.5*m[f],c[n]=m[f],++n;g[k++]=(u+(q?.5:0))/d;g[k++]=p/b;0!==p&&u!==d&&(p!==b&&(e[l++]=h,e[l++]=h+1,e[l++]=h-
d),1!==p&&(e[l++]=h,e[l++]=h-d,e[l++]=h-d-1));h++}}return{position:a,normal:c,uv:g,faces:e}};w.extractSingleFaceOfBox=function(b,d){const g=b.components[0];var a=g.faces,c=D[d],e=6*c;d=new Uint32Array(6);const n=new Uint32Array(a.length-6);var k=0;let l=0;for(let h=0;h<a.length;h++)h>=e&&h<e+6?d[k++]=a[h]:n[l++]=a[h];if(E.isSome(b.vertexAttributes.uv)){a=new Float32Array(b.vertexAttributes.uv);c*=8;e=[0,1,1,1,1,0,0,0];for(k=0;k<e.length;k++)a[c+k]=e[k];b.vertexAttributes.uv=a}b.components=[new A({faces:d,
material:g.material}),new A({faces:n})];return b};Object.defineProperty(w,"__esModule",{value:!0})});