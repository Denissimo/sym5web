// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.20/esri/copyright.txt for details.
//>>built
define("exports ../../../core/Logger ../../../core/maybe ../../../chunks/vec3f64 ../../projection ./geographicUtils ./georeference".split(" "),function(g,p,q,h,k,r,l){const f=p.getLogger("esri.geometry.support.meshUtils.centerAt"),m=h.create(),e=h.create();g.centerAt=function(a,c,b){var n;if(a.vertexAttributes&&a.vertexAttributes.position){var d=null!=(n=null==b?void 0:b.origin)?n:a.origin;if(q.isSome(a.transform))null!=(null==b?void 0:b.geographic)&&b.geographic!==a.transform.geographic&&f.warn(`Specifying the 'geographic' parameter (${b.geographic}) different from the Mesh transform setting (${a.transform.geographic}) is not supported`),
a=a.transform,b=a.origin,a.origin=[b[0]+(c.x-d.x),b[1]+(c.y-d.y),b[2]+(c.hasZ&&d.hasZ?c.z-d.z:0)];else if(r.isGeographicMesh(a.spatialReference,b)){{d=l.ungeoreference(a.vertexAttributes,d,{geographic:!0});const {position:t,normal:u,tangent:v}=l.georeference(d,c,{geographic:!0});a.vertexAttributes.position=t;a.vertexAttributes.normal=u;a.vertexAttributes.tangent=v;a.vertexAttributesChanged()}}else if(k.projectPointToVector(c,m,a.spatialReference)){k.projectPointToVector(d,e,a.spatialReference)||(c=
a.origin,e[0]=c.x,e[1]=c.y,e[2]=c.z,f.error(`Failed to project specified origin (wkid:${d.spatialReference.wkid}) to mesh spatial reference (wkid:${a.spatialReference.wkid}).`));if(c=a.vertexAttributes.position)for(d=0;d<c.length;d+=3)for(b=0;3>b;b++)c[d+b]+=m[b]-e[b];a.vertexAttributesChanged()}else f.error(`Failed to project centerAt location (wkid:${c.spatialReference.wkid}) to mesh spatial reference (wkid:${a.spatialReference.wkid})`)}};Object.defineProperty(g,"__esModule",{value:!0})});