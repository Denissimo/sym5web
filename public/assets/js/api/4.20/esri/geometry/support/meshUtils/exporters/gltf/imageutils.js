// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.20/esri/copyright.txt for details.
//>>built
define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","../../../../../core/has","../../../../../core/Error","../../../../../core/maybe"],function(d,l,r,g,m){function h(){h=l._asyncToGenerator(function*(a){const b=n(a);if(m.isNone(b))throw new g("imageToArrayBuffer","Unsupported image type");const c=function(){var k=l._asyncToGenerator(function*(e){if(!e)throw new g("imageToArrayBuffer","Unable to convert image to PNG");const f=new FileReader,q=new Promise(p=>{f.addEventListener("loadend",
()=>{p(f.result)})});f.readAsArrayBuffer(e);return q});return function(e){return k.apply(this,arguments)}}();if(b.toBlob)return new Promise((k,e)=>{b.toBlob(f=>{c(f).then(k,e)},"image/png")});if("msToBlob"in b)return c(b.msToBlob());throw new g("imageToArrayBuffer","Could not convert canvas to blob");});return h.apply(this,arguments)}function n(a){if(a instanceof HTMLCanvasElement)return a;if(a instanceof HTMLVideoElement)return null;const b=document.createElement("canvas");b.width=a.width;b.height=
a.height;const c=b.getContext("2d");a instanceof HTMLImageElement?c.drawImage(a,0,0,a.width,a.height):a instanceof ImageData&&c.putImageData(a,a.width,a.height);return b}d.encodeBase64DataUri=function(a){const b=[];a=new Uint8Array(a);for(let c=0;c<a.length;c++)b.push(String.fromCharCode(a[c]));return"data:application/octet-stream;base64,"+btoa(b.join(""))};d.imageToArrayBuffer=function(a){return h.apply(this,arguments)};d.imageToDataURI=function(a){a=n(a);return m.isSome(a)?a.toDataURL():""};d.isArrayBufferPNG=
function(a){if(8>a.byteLength)return!1;a=new Uint8Array(a);return 137===a[0]&&80===a[1]&&78===a[2]&&71===a[3]&&13===a[4]&&10===a[5]&&26===a[6]&&10===a[7]};Object.defineProperty(d,"__esModule",{value:!0})});