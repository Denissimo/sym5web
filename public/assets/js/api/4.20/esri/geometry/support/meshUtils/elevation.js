// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.20/esri/copyright.txt for details.
//>>built
define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../geometry ../../../Ground ../../../core/maybe ../../../core/promiseUtils ../../../core/unitUtils ../../Mesh ../MeshComponent ../MeshVertexAttributes ../../Point".split(" "),function(x,y,M,C,D,E,F,G,H,I,J){function r(){r=y._asyncToGenerator(function*(a,b,k){{a=z(a)||a instanceof C?yield(yield K(a)).createElevationSampler(b,{demResolution:k&&k.demResolution||"finest-contiguous"}):a;var d=F.getMetersPerUnitForSR(b.spatialReference),c=
a.demResolution.min/d;d=Math.round(b.width/c);c=Math.round(b.height/c);const g=d+1,t=c+1,n=new Float64Array(g*t*3),u=new Float32Array(g*t*2);let v=0,A=0;const e=new Uint32Array(d*c*6);let f=0,h=0;p.spatialReference=b.spatialReference;for(let l=0;l<t;l++){const B=b.ymin+l/c*b.height;for(let m=0;m<g;m++){var q=b.xmin+m/d*b.width;p.x=q;p.y=B;n[v++]=q;n[v++]=B;n[v++]=D.unwrapOr(a.elevationAt(p),0);q=m/d;const L=l/c;u[A++]=q;u[A++]=L;l!==c&&m!==d&&(e[h++]=f+1,e[h++]=f+g+1,e[h++]=f+g,e[h++]=f,e[h++]=f+
1,e[h++]=f+g);f++}}b=new G({vertexAttributes:new I["default"]({position:n,uv:u}),components:[new H({faces:e,shading:"smooth",material:k&&k.material||null})],spatialReference:b.spatialReference})}return b});return r.apply(this,arguments)}function K(a){return w.apply(this,arguments)}function w(){w=y._asyncToGenerator(function*(a){if(z(a))return a.load();yield a.load();yield E.eachAlways(a.layers.map(b=>b.load()));return a});return w.apply(this,arguments)}function z(a){return"type"in a&&("elevation"===
a.type||"base-elevation"===a.type)}const p=new J;x.create=function(a,b,k){return r.apply(this,arguments)};Object.defineProperty(x,"__esModule",{value:!0})});