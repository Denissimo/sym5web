// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.20/esri/copyright.txt for details.
//>>built
define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/maybe ../core/string ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/jsonMap ../core/accessorSupport/decorators/subclass ./Geometry ./Point ./SpatialReference ./support/contains ./support/intersectsBase ./support/spatialReferenceUtils ./support/webMercatorUtils".split(" "),function(E,l,G,H,m,k,M,N,O,I,J,K,B,F,L,C,u){function w(y,v,g){return null==v?g:null==g?v:
y(v,g)}var r;k=r=function(y){function v(...a){a=y.call(this,...a)||this;a.type="extent";a.xmin=0;a.ymin=0;a.mmin=void 0;a.zmin=void 0;a.xmax=0;a.ymax=0;a.mmax=void 0;a.zmax=void 0;return a}E._inheritsLoose(v,y);var g=v.prototype;g.normalizeCtorArgs=function(a,b,c,f,e){return!a||"esri.geometry.SpatialReference"!==a.declaredClass&&null==a.wkid?"object"===typeof a?(a.spatialReference=null==a.spatialReference?B.WGS84:a.spatialReference,a):{xmin:a,ymin:b,xmax:c,ymax:f,spatialReference:null==e?B.WGS84:
e}:{spatialReference:a,xmin:0,ymin:0,xmax:0,ymax:0}};v.fromBounds=function(a,b){return new r({xmin:a[0],ymin:a[1],xmax:a[2],ymax:a[3],spatialReference:b})};g.centerAt=function(a){const b=this.center;return null!=a.z&&this.hasZ?this.offset(a.x-b.x,a.y-b.y,a.z-b.z):this.offset(a.x-b.x,a.y-b.y)};g.clone=function(){const a=new r;a.xmin=this.xmin;a.ymin=this.ymin;a.xmax=this.xmax;a.ymax=this.ymax;a.spatialReference=this.spatialReference;null!=this.zmin&&(a.zmin=this.zmin,a.zmax=this.zmax);null!=this.mmin&&
(a.mmin=this.mmin,a.mmax=this.mmax);return a};g.contains=function(a){if(!a)return!1;const b=this.spatialReference,c=a.spatialReference;b&&c&&!b.equals(c)&&u.canProject(b,c)&&(a=b.isWebMercator?u.geographicToWebMercator(a):u.webMercatorToGeographic(a,!0));return"point"===a.type?F.extentContainsPoint(this,a):"extent"===a.type?F.extentContainsExtent(this,a):!1};g.equals=function(a){if(!a)return!1;const b=this.spatialReference,c=a.spatialReference;b&&c&&!b.equals(c)&&u.canProject(b,c)&&(a=b.isWebMercator?
u.geographicToWebMercator(a):u.webMercatorToGeographic(a,!0));return this.xmin===a.xmin&&this.ymin===a.ymin&&this.zmin===a.zmin&&this.mmin===a.mmin&&this.xmax===a.xmax&&this.ymax===a.ymax&&this.zmax===a.zmax&&this.mmax===a.mmax};g.expand=function(a){a=.5*(1-a);var b=this.width*a;const c=this.height*a;this.xmin+=b;this.ymin+=c;this.xmax-=b;this.ymax-=c;this.hasZ&&(b=(this.zmax-this.zmin)*a,this.zmin+=b,this.zmax-=b);this.hasM&&(a*=this.mmax-this.mmin,this.mmin+=a,this.mmax-=a);return this};g.intersects=
function(a){if(G.isNone(a))return!1;"mesh"===a.type&&(a=a.extent);const b=this.spatialReference,c=a.spatialReference;b&&c&&!b.equals(c)&&u.canProject(b,c)&&(a=b.isWebMercator?u.geographicToWebMercator(a):u.webMercatorToGeographic(a,!0));return L.getFeatureExtentIntersector(a.type)(this,a)};g.normalize=function(){const a=this._normalize(!1,!0);return Array.isArray(a)?a:[a]};g.offset=function(a,b,c){this.xmin+=a;this.ymin+=b;this.xmax+=a;this.ymax+=b;null!=c&&(this.zmin+=c,this.zmax+=c);return this};
g.shiftCentralMeridian=function(){return this._normalize(!0)};g.union=function(a){this.xmin=Math.min(this.xmin,a.xmin);this.ymin=Math.min(this.ymin,a.ymin);this.xmax=Math.max(this.xmax,a.xmax);this.ymax=Math.max(this.ymax,a.ymax);if(this.hasZ||a.hasZ)this.zmin=w(Math.min,this.zmin,a.zmin),this.zmax=w(Math.max,this.zmax,a.zmax);if(this.hasM||a.hasM)this.mmin=w(Math.min,this.mmin,a.mmin),this.mmax=w(Math.max,this.mmax,a.mmax);return this};g.intersection=function(a){if(!this.intersects(a))return null;
this.xmin=Math.max(this.xmin,a.xmin);this.ymin=Math.max(this.ymin,a.ymin);this.xmax=Math.min(this.xmax,a.xmax);this.ymax=Math.min(this.ymax,a.ymax);if(this.hasZ||a.hasZ)this.zmin=w(Math.max,this.zmin,a.zmin),this.zmax=w(Math.min,this.zmax,a.zmax);if(this.hasM||a.hasM)this.mmin=w(Math.max,this.mmin,a.mmin),this.mmax=w(Math.min,this.mmax,a.mmax);return this};g.toJSON=function(a){return this.write(null,a)};g._shiftCM=function(a=C.getInfo(this.spatialReference)){if(!a||!this.spatialReference)return this;
const b=this.spatialReference,c=this._getCM(a);if(c){const f=b.isWebMercator?u.webMercatorToGeographic(c):c;this.xmin-=c.x;this.xmax-=c.x;b.isWebMercator||(f.x=this._normalizeX(f.x,a).x);this.spatialReference=new B(H.replace(b.isWGS84?a.altTemplate:a.wkTemplate,{Central_Meridian:f.x}))}return this};g._getCM=function(a){let b=null;const [c,f]=a.valid;a=this.xmin;const e=this.xmax;a>=c&&a<=f&&e>=c&&e<=f||(b=this.center);return b};g._normalize=function(a,b,c){const f=this.spatialReference;if(!f)return this;
c=c||C.getInfo(f);if(!c)return this;const e=this._getParts(c).map(d=>d.extent);if(2>e.length)return e[0]||this;if(2<e.length)return a?this._shiftCM(c):this.set({xmin:c.valid[0],xmax:c.valid[1]});if(a)return this._shiftCM(c);if(b)return e;let h=!0,n=!0;e.forEach(d=>{d.hasZ||(h=!1);d.hasM||(n=!1)});return{rings:e.map(d=>{const q=[[d.xmin,d.ymin],[d.xmin,d.ymax],[d.xmax,d.ymax],[d.xmax,d.ymin],[d.xmin,d.ymin]];if(h){var p=(d.zmax-d.zmin)/2;for(let t=0;t<q.length;t++)q[t].push(p)}if(n)for(d=(d.mmax-d.mmin)/
2,p=0;p<q.length;p++)q[p].push(d);return q}),hasZ:h,hasM:n,spatialReference:f}};g._getParts=function(a){let b=this.cache._parts;if(!b){b=[];const {ymin:p,ymax:t,spatialReference:x}=this;var c=this.width,f=this.xmin,e=this.xmax;a=a||C.getInfo(x);const [D,z]=a.valid;var h=this._normalizeX(this.xmin,a);var n=h.x,d=h.frameId;h=this._normalizeX(this.xmax,a);a=h.x;h=h.frameId;var q=n===a&&0<c;if(c>2*z){c=new r(f<e?n:a,p,z,t,x);f=new r(D,p,f<e?a:n,t,x);e=new r(0,p,z,t,x);n=new r(D,p,0,t,x);a=[];q=[];c.contains(e)&&
a.push(d);c.contains(n)&&q.push(d);f.contains(e)&&a.push(h);f.contains(n)&&q.push(h);for(let A=d+1;A<h;A++)a.push(A),q.push(A);b.push({extent:c,frameIds:[d]},{extent:f,frameIds:[h]},{extent:e,frameIds:a},{extent:n,frameIds:q})}else n>a||q?b.push({extent:new r(n,p,z,t,x),frameIds:[d]},{extent:new r(D,p,a,t,x),frameIds:[h]}):b.push({extent:new r(n,p,a,t,x),frameIds:[d]});this.cache._parts=b}h=this.hasZ;c=this.hasM;if(h||c)for(d={},h&&(d.zmin=this.zmin,d.zmax=this.zmax),c&&(d.mmin=this.mmin,d.mmax=this.mmax),
h=0;h<b.length;h++)b[h].extent.set(d);return b};g._normalizeX=function(a,b){const [c,f]=b.valid;b=2*f;var e=0;a>f?(e=Math.ceil(Math.abs(a-f)/b),a-=e*b):a<c&&(e=Math.ceil(Math.abs(a-c)/b),a+=e*b,e=-e);return{x:a,frameId:e}};E._createClass(v,[{key:"cache",get:function(){this.commitProperty("xmin");this.commitProperty("ymin");this.commitProperty("zmin");this.commitProperty("mmin");this.commitProperty("xmax");this.commitProperty("ymax");this.commitProperty("zmax");this.commitProperty("mmax");this.commitProperty("spatialReference");
return{}}},{key:"center",get:function(){const a=new K({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});this.hasZ&&(a.z=.5*(this.zmin+this.zmax));this.hasM&&(a.m=.5*(this.mmin+this.mmax));return a}},{key:"extent",get:function(){return this.clone()}},{key:"hasM",get:function(){return null!=this.mmin&&null!=this.mmax}},{key:"hasZ",get:function(){return null!=this.zmin&&null!=this.zmax}},{key:"height",get:function(){return Math.abs(this.ymax-this.ymin)}},
{key:"width",get:function(){return Math.abs(this.xmax-this.xmin)}}]);return v}(J);l.__decorate([m.property({readOnly:!0})],k.prototype,"cache",null);l.__decorate([m.property({readOnly:!0})],k.prototype,"center",null);l.__decorate([m.property({readOnly:!0})],k.prototype,"extent",null);l.__decorate([m.property({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],k.prototype,"hasM",null);l.__decorate([m.property({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],k.prototype,"hasZ",
null);l.__decorate([m.property({readOnly:!0})],k.prototype,"height",null);l.__decorate([m.property({readOnly:!0})],k.prototype,"width",null);l.__decorate([m.property({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],k.prototype,"xmin",void 0);l.__decorate([m.property({type:Number,json:{write:!0}})],k.prototype,"ymin",void 0);l.__decorate([m.property({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],k.prototype,"mmin",
void 0);l.__decorate([m.property({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],k.prototype,"zmin",void 0);l.__decorate([m.property({type:Number,json:{write:!0}})],k.prototype,"xmax",void 0);l.__decorate([m.property({type:Number,json:{write:!0}})],k.prototype,"ymax",void 0);l.__decorate([m.property({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],k.prototype,"mmax",void 0);l.__decorate([m.property({type:Number,
json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],k.prototype,"zmax",void 0);k=r=l.__decorate([I.subclass("esri.geometry.Extent")],k);k.prototype.toJSON.isDefaultToJSON=!0;return k});