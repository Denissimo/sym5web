// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.20/esri/copyright.txt for details.
//>>built
define("exports ../../../geometry ../../../core/Error ../../../geometry/support/webMercatorUtils ../../../rest/support/ProjectParameters ../../../geometry/Point ../../../geometry/SpatialReference".split(" "),function(h,z,p,v,w,r,x){function t(a,d){d=u(d);return[a[0].toFixed(d),a[1].toFixed(d)]}function u(a){return 500<=a?6:500>a&&50<=a?7:50>a&&5<=a?8:9}function m(a){return"number"===typeof a&&isFinite(a)}function q(a){return a&&m(a.x)&&m(a.y)}function n(a,d){if(a.spatialReference.isGeographic&&d){const [b,
g]=t([a.x,a.y],d);return`${b}, ${g}`}return`${a.x.toFixed(3)}, ${a.y.toFixed(3)}`}const y={utm:{conversionMode:"utmDefault",addSpaces:!0},usng:{numOfDigits:5,rounding:!1,addSpaces:!1},mgrs:{rounding:!1}},l=Array(3);h.clipLonLat=t;h.fromGeoCoordinateString=function(a){const {geometryServicePromise:d,coordinate:b,spatialReference:g,formatName:c}=a;return d.then(k=>k.fromGeoCoordinateString({strings:[b],sr:g,conversionType:c}).then(e=>{const f=new r({x:e[0][0],y:e[0][1],spatialReference:g});if(!q(f))throw e;
return f}).catch(e=>{throw new p("coordinate-conversion:from-geo-coordinate-string-failed","Failed to convert coordinate notation",{notationResult:e});}))};h.fromXY=function(a,d){const b=0<=a.indexOf(",")?",":" ",[g,c,k]=a.split(b).map(e=>(e=e.trim())?Number(e):null);if(!m(g)||!m(c))return null;a=new r({x:g,y:c,spatialReference:d||x.WGS84});k&&(a.z=k,a.hasZ=!0);return a};h.getDegreePrecision=u;h.isSupportedNotation=function(a){return"dd"===a||"dms"===a||"ddm"===a||"mgrs"===a||"usng"===a||"utm"===
a};h.isValidPoint=q;h.pointToCoordinate=n;h.project=function(a,d){const {spatialReference:b,geometryServicePromise:g,location:c,scale:k}=a;if(!b||c.spatialReference.wkid===b.wkid)return Promise.resolve({location:c,coordinate:n(c,k)});if((c.spatialReference.isWGS84||c.spatialReference.isWebMercator)&&(b.isWGS84||b.isWebMercator))return Promise.resolve({location:v.project(c,b),coordinate:n(c,k)});if(l[0]===c&&l[1]===b.wkid)return l[2];l[0]=c;l[1]=b.wkid;a=g.then(e=>e.project(new w({geometries:[c],outSpatialReference:b}),
{signal:d}).then(f=>{if(!q(f[0]))throw f[0];return{location:f[0],coordinate:n(f[0],k)}}).catch(f=>{throw new p("coordinate-conversion:projection-failed","Failed to project point",{projectionResult:f});}));return l[2]=a};h.toGeoCoordinateString=function(a){const {formatName:d,location:b,geometryServicePromise:g}=a,c={coordinates:[[b.x,b.y]],sr:b.spatialReference,conversionType:d,...y[d]||{}};return g.then(k=>k.toGeoCoordinateString(c).then(e=>{const f=e[0];if(!f)throw e;return f}).catch(e=>{throw new p("coordinate-conversion:to-geo-coordinate-string-failed",
"Failed to convert coordinate notation",{notationResult:e});}))};Object.defineProperty(h,"__esModule",{value:!0})});