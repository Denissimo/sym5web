// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.20/esri/copyright.txt for details.
//>>built
require({cache:{"esri/views/interactive/snapping/SnappingOptions":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/Collection ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/Logger ../../../core/jsonMap ../../../core/accessorSupport/decorators/subclass ./FeatureSnappingLayerSource ./Settings".split(" "),function(d,m,v,B,C,A,q,g,r,u,x,y){v=function(t){function l(n){n=
t.call(this,n)||this;n.enabled=!1;n.enabledToggled=!1;n.selfEnabled=!0;n.featureEnabled=!0;n.featureSources=new B;n.distance=y.defaults.distance;n.touchSensitivityMultiplier=y.defaults.touchSensitivityMultiplier;return n}d._inheritsLoose(l,t);d._createClass(l,[{key:"effectiveEnabled",get:function(){return this.enabledToggled?!this.enabled:this.enabled}},{key:"effectiveSelfEnabled",get:function(){return this.effectiveEnabled&&this.selfEnabled}},{key:"effectiveFeatureEnabled",get:function(){return this.effectiveEnabled&&
this.featureEnabled}}]);return l}(v);m.__decorate([C.property()],v.prototype,"enabled",void 0);m.__decorate([C.property()],v.prototype,"enabledToggled",void 0);m.__decorate([C.property()],v.prototype,"selfEnabled",void 0);m.__decorate([C.property()],v.prototype,"featureEnabled",void 0);m.__decorate([C.property({type:B.ofType(x)})],v.prototype,"featureSources",void 0);m.__decorate([C.property()],v.prototype,"distance",void 0);m.__decorate([C.property()],v.prototype,"touchSensitivityMultiplier",void 0);
m.__decorate([C.property({readOnly:!0})],v.prototype,"effectiveEnabled",null);m.__decorate([C.property({readOnly:!0})],v.prototype,"effectiveSelfEnabled",null);m.__decorate([C.property({readOnly:!0})],v.prototype,"effectiveFeatureEnabled",null);return v=m.__decorate([u.subclass("esri.views.interactive.snapping.SnappingOptions")],v)})},"esri/views/interactive/snapping/FeatureSnappingLayerSource":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/Logger ../../../core/jsonMap ../../../core/accessorSupport/decorators/subclass".split(" "),
function(d,m,v,B,C,A,q,g,r){v=function(u){function x(y){y=u.call(this,y)||this;y.layer=null;y.enabled=!0;y.updating=!1;y.availability=1;return y}d._inheritsLoose(x,u);return x}(v);m.__decorate([B.property({constructOnly:!0})],v.prototype,"layer",void 0);m.__decorate([B.property()],v.prototype,"enabled",void 0);m.__decorate([B.property()],v.prototype,"updating",void 0);m.__decorate([B.property()],v.prototype,"availability",void 0);return v=m.__decorate([r.subclass("esri.views.interactive.snapping.SnappingLayerSource")],
v)})},"esri/views/interactive/snapping/Settings":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../Color ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/decorators/subclass".split(" "),function(d,m,v,B,C,A,q){let g=function(r){function u(){var x=r.apply(this,arguments)||this;x.enabled=!0;return x}m._inheritsLoose(u,r);return u}(C.JSONSupport);v.__decorate([A.property({type:Boolean})],g.prototype,
"enabled",void 0);g=v.__decorate([q.subclass("esri.views.interactive.snapping.Settings.DefaultSnappingAlgorithm")],g);C=function(r){function u(x){x=r.call(this,x)||this;x.lineSnapper=new g;x.parallelLineSnapper=new g;x.rightAngleSnapper=new g;x.rightAngleTriangleSnapper=new g;x.shortLineThreshold=15;x.distance=5;x.pointThreshold=1E-6;x.intersectionParallelLineThreshold=1E-6;x.parallelLineThreshold=1E-6;x.touchSensitivityMultiplier=1.5;x.pointOnLineThreshold=1E-6;x.orange=new B([255,127,0]);x.lineHintWidthReference=
3;x.lineHintWidthTarget=3;x.lineHintFadedExtensions=.3;x.parallelLineHintWidth=2;x.parallelLineHintLength=24;x.parallelLineHintOffset=1.5;x.rightAngleHintSize=24;x.rightAngleHintOutlineSize=1.5;return x}m._inheritsLoose(u,r);return u}(C.JSONSupport);v.__decorate([A.property({type:g,constructOnly:!0,nonNullable:!0,json:{write:!0}})],C.prototype,"lineSnapper",void 0);v.__decorate([A.property({type:g,constructOnly:!0,nonNullable:!0,json:{write:!0}})],C.prototype,"parallelLineSnapper",void 0);v.__decorate([A.property({type:g,
constructOnly:!0,nonNullable:!0,json:{write:!0}})],C.prototype,"rightAngleSnapper",void 0);v.__decorate([A.property({type:g,constructOnly:!0,nonNullable:!0,json:{write:!0}})],C.prototype,"rightAngleTriangleSnapper",void 0);v.__decorate([A.property({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],C.prototype,"shortLineThreshold",void 0);v.__decorate([A.property({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],C.prototype,"distance",void 0);v.__decorate([A.property({type:Number,
nonNullable:!0,range:{min:0,max:1E-5},json:{write:!0}})],C.prototype,"pointThreshold",void 0);v.__decorate([A.property({type:Number,nonNullable:!0,range:{min:0,max:1E-5},json:{write:!0}})],C.prototype,"intersectionParallelLineThreshold",void 0);v.__decorate([A.property({type:Number,nonNullable:!0,range:{min:0,max:1E-5},json:{write:!0}})],C.prototype,"parallelLineThreshold",void 0);v.__decorate([A.property({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],C.prototype,"touchSensitivityMultiplier",
void 0);v.__decorate([A.property({type:Number,nonNullable:!0,range:{min:0,max:1E-5},json:{write:!0}})],C.prototype,"pointOnLineThreshold",void 0);v.__decorate([A.property({type:B,nonNullable:!0})],C.prototype,"orange",void 0);v.__decorate([A.property({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],C.prototype,"lineHintWidthReference",void 0);v.__decorate([A.property({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],C.prototype,"lineHintWidthTarget",void 0);v.__decorate([A.property({type:Number,
nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],C.prototype,"lineHintFadedExtensions",void 0);v.__decorate([A.property({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],C.prototype,"parallelLineHintWidth",void 0);v.__decorate([A.property({type:Number,nonNullable:!0,range:{min:0,max:50},json:{write:!0}})],C.prototype,"parallelLineHintLength",void 0);v.__decorate([A.property({type:Number,nonNullable:!0,range:{min:0,max:5},json:{write:!0}})],C.prototype,"parallelLineHintOffset",
void 0);v.__decorate([A.property({type:Number,nonNullable:!0,range:{min:0,max:46},json:{write:!0}})],C.prototype,"rightAngleHintSize",void 0);v.__decorate([A.property({type:Number,nonNullable:!0,range:{min:0,max:6},json:{write:!0}})],C.prototype,"rightAngleHintOutlineSize",void 0);C=v.__decorate([q.subclass("esri.views.interactive.snapping.Settings.Defaults")],C);v=new C;d.defaults=v;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/widgets/Sketch/SketchViewModel":function(){define("require ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../Graphic ../../symbols ../../core/Collection ../../core/has ../../core/Error ../../core/Evented ../../core/Handles ../../core/Logger ../../core/maybe ../../core/promiseUtils ../../core/screenUtils ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../geometry/projectionEllipsoid ../../geometry/support/coordsUtils ../../layers/GraphicsLayer ../../views/DOMContainer ../../views/3d/interactive/editingTools/isSupportedGraphicUtils ../../views/3d/interactive/editingTools/moveGraphic/isSupportedGraphic ../../views/3d/interactive/editingTools/reshapeGraphic/isSupportedGraphic ../../views/3d/interactive/editingTools/transformGraphic/isSupportedGraphic ../../views/draw/Draw ../../views/draw/DrawAction ../../views/draw/support/createUtilsAsync ../../views/draw/support/layerUtils ../../views/input/InputManager ../../views/interactive/keybindings ../../views/interactive/snapping/SnappingManager ../../views/interactive/snapping/SnappingOptions ../../views/support/screenUtils ./support/OperationHandle ../../geometry/Point ../../symbols/SimpleMarkerSymbol ../../symbols/SimpleFillSymbol ../../symbols/CIMSymbol ../../symbols/SimpleLineSymbol".split(" "),
function(d,m,v,B,C,A,q,g,r,u,x,y,t,l,n,c,a,b,k,e,h,w,D,p,z,f,E,F,L,W,M,P,V,H,R,Z,N,S,O,J,K,Q,da){function ma(ba){return Object.freeze({__proto__:null,"default":ba})}function wa(ba,ia){xa("undo",ba.history.undo,ba.history.redo,ia)}function ya(ba,ia){xa("redo",ba.history.redo,ba.history.undo,ia)}function xa(ba,ia,ea,T){const U=ia.pop().updates,X=[];T.forEach((Y,fa)=>{fa=U[fa];null!=fa&&("geometry"in fa&&t.isSome(fa.geometry)&&(X.push({geometry:Y.geometry}),Y.geometry=fa.geometry),"symbol"in fa&&t.isSome(fa.symbol)&&
(X.push({symbol:Y.symbol}),Y.symbol=fa.symbol),"undo"in fa&&(X.push(fa),fa[ba](Y)))});ea.push({updates:X})}function G(ba){return{updates:ba.map(ia=>({geometry:ia.geometry}))}}function I(ba){return"requireError"in ba&&"aborted"===ba.requireError}const aa=y.getLogger("esri.widgets.Sketch.SketchViewModel"),ca={defaultZ:0},ha={reshapeOptions:{edgeOperation:"split",shapeOperation:"move",vertexOperation:"move"},enableMoveAllGraphics:!0,enableRotation:!0,enableScaling:!0,multipleSelectionEnabled:!0,preserveAspectRatio:!1,
toggleToolOnClick:!0,enableZ:!0,tool:"transform"};B=function(ba){function ia(T){T=ba.call(this,T)||this;T._activeFillGraphic=null;T._activeLineGraphic=null;T._centerIndicatorGraphic=null;T._centerSymbol=new J({style:"cross",size:6,color:[255,255,255]});T._defaultSegmentOffset=48;T._numUpdating=0;T._handles=new x;T._internalGraphicsLayer=new D({listMode:"hide",internal:!0,title:"SVM Internal"});T._lineGraphic=null;T._operationHandle=null;T._vertexGraphics=[];T._viewHandles=new x;T._doUnnormalization=
!1;T.activeFillSymbol=new K({style:"solid",color:[150,150,150,.2],outline:{color:[50,50,50],width:0}});T.activeLineSymbol=new Q({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",effects:[{type:"CIMGeometricEffectDashes",dashTemplate:[3.75,3.75],lineDashEnding:"HalfPattern",controlPointEnding:"NoConstraint"}],enable:!0,capStyle:"Butt",joinStyle:"Round",miterLimit:10,width:1.6,color:[255,255,255,255]},{type:"CIMSolidStroke",enable:!0,capStyle:"Butt",
joinStyle:"Round",miterLimit:10,width:2,color:[0,0,0,255]}]}}});T.activeVertexSymbol=new J({style:"circle",size:6,color:[255,127,0,1],outline:{color:[50,50,50],width:1}});T.allowDeleteKey=!0;T.layer=null;T.pointSymbol=new J({style:"circle",size:6,color:[255,255,255],outline:{color:[50,50,50],width:1}});T.polygonSymbol=new K({color:[150,150,150,.2],outline:{color:[50,50,50],width:2}});T.polylineSymbol=new da({color:[130,130,130,1],width:2});T._snappingManager=null;T.updateGraphics=new q;T.updateOnGraphicClick=
!0;T.updatePointSymbol=new J({size:10,color:[0,200,255,.5],outline:{color:"black",width:1}});T.updatePolygonSymbol=new K({color:[12,207,255,.2],outline:{join:"round",color:[12,207,255],width:2}});T.updatePolylineSymbol=new da({color:[12,207,255],width:2});T.vertexSymbol=new J({style:"circle",size:6,color:[255,255,255],outline:{color:[50,50,50],width:1}});T._moduleLoaderAbortController=null;T._viewReadyAbortController=null;T._originalAutoOpenEnabled=null;T.defaultCreateOptions=ca;T.defaultUpdateOptions=
ha;T.snappingOptions=new Z;return T}m._inheritsLoose(ia,ba);var ea=ia.prototype;ea.initialize=function(){this._handles.add([c.watch(this,"layer",()=>{this.cancel();this._internalGraphicsLayer.elevationInfo=t.isSome(this.layer)?this.layer.elevationInfo:null}),c.on(this,"view.map.layers","change",T=>{T.removed.includes(this.layer)&&this.cancel()}),c.on(this,"layer.graphics","change",T=>{if(t.isSome(this._operationHandle))for(const U of T.removed)this.updateGraphics.includes(U)&&(1<this.updateGraphics.length?
this._operationHandle.removeFromSelection(U):this._operationHandle.cancel())}),c.init(this,"layer.elevationInfo",()=>{this.cancel();this._internalGraphicsLayer.elevationInfo=t.isSome(this.layer)?this.layer.elevationInfo:null},!0),c.init(this,"view",T=>{t.destroyMaybe(this._snappingManager);T&&(this._snappingManager=new R.SnappingManager({view:T,options:this.snappingOptions}),"3d"===T.type&&(new Promise(function(U,X){d(["../../views/3d/interactive/editingTools"],U,X)}),new Promise(function(U,X){d(["../../views/3d/layers/GraphicsLayerView3D"],
function(Y){U(ma(Y))},X)})))},!0)])};ea.destroy=function(){this.cancel();this._handles=t.destroyMaybe(this._handles);this._viewHandles=t.destroyMaybe(this._viewHandles);this._removeDefaultLayer();t.destroyMaybe(this._draw);t.destroyMaybe(this._snappingManager);this._set("view",null);this.emit("destroy")};ea.cancel=function(){this._moduleLoaderAbortController=t.abortMaybe(this._moduleLoaderAbortController);this._viewReadyAbortController=t.abortMaybe(this._viewReadyAbortController);this._operationHandle&&
this._operationHandle.cancel()};ea.complete=function(){this._operationHandle&&this._operationHandle.complete()};ea.delete=function(){const {state:T,updateGraphics:U}=this;if("active"===T&&U.length){const {activeTool:X,layer:Y}=this,fa=U.toArray();Y.removeMany(fa);this.cancel();this._emitDeleteEvent({graphics:fa,tool:X})}};ea.create=function(){var T=m._asyncToGenerator(function*(U,X){yield this._waitViewReady();if("disabled"===this.state)throw this.layer||this._logError("sketch:missing-property","Property 'layer' is missing on SketchViewModel."),
this.view||this._logError("sketch:missing-property","Property 'view' is missing on SketchViewModel."),l.createAbortError();this.cancel();this.view.activeTool=null;if(U){var Y=yield this._setupCreateOperation(U,X);t.isNone(Y)||this.destroyed||(X=null,"2d"===this.view.type&&(X=this.view.map.layers.findIndex(fa=>fa.id===W.SNAPPING_GRAPHICS_LAYER_ID),X=-1<X?X:null),P.addUniqueLayer(this.view,this._internalGraphicsLayer,X),Y.on("complete",()=>{if(Y===this._operationHandle){const fa=this.createGraphic,
ja=this._operationHandle.cancelled;this._operationHandle.destroy();this._operationHandle=null;this._set("createGraphic",null);this.view&&this.view.map&&this.view.map.remove(this._internalGraphicsLayer);Y.cancelled||null==fa||this.layer.add(fa);this.emit("create",{graphic:fa,state:ja?"cancel":"complete",tool:U,toolEventInfo:null,type:"create"})}}),this._operationHandle=Y,this.view.ready&&p.isDOMContainer(this.view)&&this.view.focus())}else this._logError("sketch:missing-parameter","Missing parameter 'tool'.")});
return function(U,X){return T.apply(this,arguments)}}();ea.update=function(){var T=m._asyncToGenerator(function*(U,X){yield this._waitViewReady();const {layer:Y,view:fa,state:ja}=this;if("disabled"===ja)throw fa||this._logError("sketch:missing-property","Property 'view' is missing on SketchViewModel."),Y||this._logError("sketch:missing-property","Property 'layer' is missing on SketchViewModel."),l.createAbortError();this.cancel();this.view.activeTool=null;const ta=Array.isArray(U)?U:[U];null!=U&&
ta&&ta.length?ta.some(la=>la.layer!==Y?(this._logError("sketch:invalid-parameter","Parameter 'graphics' contains one or more graphics missing from the supplied GraphicsLayer."),!0):t.isNone(la.geometry)?(this._logError("sketch:invalid-parameter","Parameter 'graphics' contains one or more graphics with an unsupported geometry."),!0):"2d"!==fa.type||fa.spatialReference.equals(la.geometry.spatialReference)?!1:(this._logError("sketch:invalid-parameter","Parameter 'graphics' contains one or more graphics with a spatial reference different from the supplied IMapView."),
!0))||(U=yield this._setupUpdateOperation(ta,X),this.destroyed||t.isNone(U)||I(U)||(P.addUniqueLayer(this.view,this._internalGraphicsLayer),this._setUpdateOperationHandle(U,X),this.emit("update",{graphics:ta,state:"start",aborted:!1,tool:U.tool,toolEventInfo:null,type:"update"}))):this._logError("sketch:missing-parameter","Missing parameter 'graphics'.")});return function(U,X){return T.apply(this,arguments)}}();ea.undo=function(){this.canUndo()&&this._operationHandle.undo()};ea.redo=function(){this.canRedo()&&
this._operationHandle.redo()};ea.canUndo=function(){return!(!this._operationHandle||!this._operationHandle.canUndo())};ea.canRedo=function(){return!(!this._operationHandle||!this._operationHandle.canRedo())};ea.toggleUpdateTool=function(){this._operationHandle&&this._operationHandle.toggleTool&&this._operationHandle.toggleTool()};ea._getFirstHit=function(){var T=m._asyncToGenerator(function*(U){const X=[];switch(this.view.type){case "2d":var Y=yield this.view.hitTest(U);if(0<Y.results.length&&(Y=
Y.results[0],Y.graphic)){var fa,ja;const ta=Y.graphic;"vector-tile"!==(null==(fa=ta.layer)?void 0:fa.type)&&"imagery"!==(null==(ja=ta.layer)?void 0:ja.type)&&X.push(Y)}break;case "3d":{const ta=[this.view.map.ground];this.view.map.allLayers.forEach(la=>{"integrated-mesh"===la.type&&ta.push(la)});fa=yield this.view.hitTest(U,{exclude:ta});0<fa.results.length&&(ja=fa.results[0],(!fa.ground.mapPoint||1>this.view.map.ground.opacity||fa.ground.distance-ja.distance>-Math.min(3*fa.ground.distance,"global"===
this.view.viewingMode?h.getReferenceEllipsoid(this.view.renderCoordsHelper.spatialReference).radius/this.view.renderCoordsHelper.unitInMeters:Number.POSITIVE_INFINITY))&&X.push(ja))}}return{screenPoint:U,results:X}});return function(U){return T.apply(this,arguments)}}();ea._generateViewHandles=function(T){var U=this;return[T.on("immediate-click",function(){var X=m._asyncToGenerator(function*(Y){var fa="active"===U.state&&"create"===U._operationHandle.type;if("disabled"!==U.state&&!fa&&U.updateOnGraphicClick){U._beginAsyncOperation();
var ja=(yield Y.async(()=>U._getFirstHit(N.createScreenPointFromEvent(Y)))).results;fa=null;if(ja.length)for(const ta of ja){if(ta.graphic){ja=ta.graphic;if(U.updateGraphics.includes(ja)||ja.layer===U.layer){Y.stopPropagation();fa=ja;break}"2d"!==T.type||U._isComponentGraphic(ja)||"active"!==U.state||U.cancel()}}else"active"===U.state&&U.cancel();t.isSome(fa)&&!U.updateGraphics.includes(fa)&&(yield U.update([fa],{...U.defaultUpdateOptions,reshapeOptions:{...U.defaultUpdateOptions.reshapeOptions}}));
U._endAsyncOperation()}});return function(Y){return X.apply(this,arguments)}}(),V.ViewEventPriorities.WIDGET)]};ea._setupCreateOperation=function(){var T=m._asyncToGenerator(function*(U,X){if(!U)return null;X={hasZ:"3d"===this.view.type,...this.defaultCreateOptions,...X};let Y;if("2d"===this.view.type)switch(U){case "point":Y=this._setupCreatePointOperation(U,X);break;case "multipoint":Y=yield this._setupCreateMultipointOperation(U,X);break;case "polygon":Y=yield this._setupCreatePolyOperation(U,
X);break;case "polyline":Y=yield this._setupCreatePolyOperation(U,X);break;case "rectangle":Y=yield this._setupCreateRectangleOperation(U,X);break;case "circle":Y=yield this._setupCreateCircleOperation(U,X)}else{U=yield this._setupCreate3DOperation(U,this.view,X);if(t.isNone(U)||I(U))return null;Y=U}return Y});return function(U,X){return T.apply(this,arguments)}}();ea._setupCreate3DOperation=function(){var T=m._asyncToGenerator(function*(U,X,Y){if("multipoint"===U)return null;this._removeCreateOperationGraphics();
const fa="rectangle"!==U,ja="rectangle"!==U;this.snappingOptions.enabledToggled=!1;const ta=yield this._requireModule(new Promise(function(na,va){d(["../../views/3d/interactive/editingTools"],na,va)}));if(I(ta))return ta;if(this.destroyed)return null;const la=new ta.module.DrawGraphicTool({view:X,mode:"rectangle"===U||"circle"===U?"hybrid":"click",...Y,elevationInfo:this.layer.elevationInfo,geometryType:U,createGraphicSymbol:this._getGraphicSymbolFromTool(U),snapToScene:t.isSome(this.layer.elevationInfo)?
"absolute-height"===this.layer.elevationInfo.mode:!0,snappingManager:this._snappingManager,forceUniformSize:ja,centered:fa});this.view.tools.add(la);let qa=null;this.view.activeTool=la;const sa=[this.view.on("key-down",na=>{if(na.key===H.SKETCH_KEYS.pan)na.stopPropagation(),na.repeat||(la.enabled=!1);else if(na.key===H.SKETCH_KEYS.complete)na.stopPropagation(),la.completeCreateOperation();else if(na.key!==H.SKETCH_KEYS.vertexAdd||na.repeat)na.key===H.SKETCH_KEYS.undo?(na.stopPropagation(),ra.undo()):
na.key===H.SKETCH_KEYS.redo?(na.stopPropagation(),ra.redo()):na.key!==H.SKETCH_KEYS.snappingToggle||"rectangle"===U||"circle"===U||na.repeat?na.key!==H.SKETCH_KEYS.constraint||"rectangle"!==U&&"circle"!==U||na.repeat?na.key!==H.SKETCH_KEYS.center||na.repeat||(la.centered=!fa,na.stopPropagation()):(la.forceUniformSize=!ja,na.stopPropagation()):(this.snappingOptions.enabledToggled=!0,na.stopPropagation());else{const va=la.drawOperation.geometryType;if("polyline"===va||"polygon"===va)na.stopPropagation(),
la.drawOperation.commitStagedVertex()}},V.ViewEventPriorities.WIDGET),this.view.on("key-up",na=>{na.key===H.SKETCH_KEYS.pan?la.enabled=!0:na.key===H.SKETCH_KEYS.snappingToggle&&"rectangle"!==U&&"circle"!==U?(this.snappingOptions.enabledToggled=!1,na.stopPropagation()):na.key!==H.SKETCH_KEYS.constraint||"rectangle"!==U&&"circle"!==U?na.key===H.SKETCH_KEYS.center&&(la.centered=fa,na.stopPropagation()):(la.forceUniformSize=ja,na.stopPropagation())},V.ViewEventPriorities.WIDGET),la.on("vertex-add",na=>
{qa=t.isNone(qa)?"start":"active";switch(na.operation){case "apply":this.emit("create",{graphic:t.unwrap(la.createGraphic),state:qa,tool:this.activeTool,toolEventInfo:na,type:"create"});break;case "undo":this._emitUndoEvent({graphics:[t.unwrap(la.createGraphic)],tool:U});break;case "redo":this._emitRedoEvent({graphics:[t.unwrap(la.createGraphic)],tool:U})}}),la.on("cursor-update",na=>{0<la.drawOperation.numCommittedVertices&&this.emit("create",{graphic:t.unwrap(la.createGraphic),state:"active",tool:this.activeTool,
toolEventInfo:{coordinates:na.vertices[0].coordinates,type:"cursor-update"},type:"create"})}),la.on("vertex-remove",na=>{switch(na.operation){case "apply":this.emit("create",{graphic:t.unwrap(la.createGraphic),state:"active",tool:this.activeTool,toolEventInfo:na,type:"create"});break;case "undo":this._emitUndoEvent({graphics:[t.unwrap(la.createGraphic)],tool:U});break;case "redo":this._emitRedoEvent({graphics:[t.unwrap(la.createGraphic)],tool:U})}}),la.on("complete",na=>{this._removeCreateOperationGraphics();
this._set("createGraphic",t.unwrap(na.graphic));qa="complete";na.aborted?ra&&ra.cancel():ra&&ra.complete()})],ra=new S.OperationHandle({activeComponent:la,tool:U,type:"update",onEnd:()=>{var na;sa.forEach(va=>va.remove());sa.length=0;null==(na=this.view.tools)?void 0:na.remove(la);la.destroy()},undo:()=>{la.canUndo&&la.undo()},redo:()=>{la.canRedo&&la.redo()},canUndo:()=>la.canUndo,canRedo:()=>la.canRedo});return ra});return function(U,X,Y){return T.apply(this,arguments)}}();ea._getGraphicSymbolFromTool=
function(T){switch(T){case "point":return this.pointSymbol;case "polyline":return this.polylineSymbol;case "circle":case "rectangle":case "polygon":return this.polygonSymbol;default:return null}};ea._setupCreatePointOperation=function(T,U){U=this._draw.create(T,{elevationInfo:this.layer.elevationInfo,hasZ:U.hasZ,defaultZ:U.defaultZ,snappingManager:this._snappingManager,interactiveUndoDisabled:!0});const X=[U.on("cursor-update",ja=>{t.isSome(ja.vertexIndex)?this._displayCrosshairCursor():this._displayDefaultCursor()}),
U.on("draw-complete",ja=>{ja=this.createPointFromVertex(ja.vertices[0]);ja=new C(ja,this.pointSymbol);this._set("createGraphic",ja);fa&&fa.complete()})],Y=[this.view.on("key-down",ja=>{ja.key===H.SKETCH_KEYS.cancel&&(fa&&fa.cancel(),ja.stopPropagation())},V.ViewEventPriorities.WIDGET)],fa=this._operationHandleForCreateAction(U,[...X,...Y],T);return fa};ea._setupCreateMultipointOperation=function(){var T=m._asyncToGenerator(function*(U,X){const Y=yield M.loadCreateUtils();X=this._draw.create(U,{...X,
elevationInfo:this.layer.elevationInfo,snappingManager:this._snappingManager,interactiveUndoDisabled:!0});let fa=null;const ja=[],ta=this._operationHandleForCreateAction(X,ja,U);ja.push(X.on("vertex-add",la=>{const {type:qa,vertexIndex:sa,vertices:ra}=la,na=ra[sa];fa=la;this._drawMultipointGraphic(Y,ra,!0);this.emit("create",{graphic:this.createGraphic,state:1===ra.length?"start":"active",tool:U,toolEventInfo:{added:na,vertices:[{coordinates:na,componentIndex:0,vertexIndex:sa}],type:qa},type:"create"})}),
X.on("vertex-remove",la=>{const {type:qa,vertexIndex:sa,vertices:ra}=la,na=ra[sa];fa=la;this._drawMultipointGraphic(Y,ra,!0);this.emit("create",{graphic:this.createGraphic,state:"active",tool:U,toolEventInfo:{removed:na,vertices:[{coordinates:na,componentIndex:0,vertexIndex:sa}],type:qa},type:"create"})}),X.on("vertex-update",la=>{const {type:qa,vertexIndex:sa,vertices:ra}=la,na=ra[sa];fa=la;this._drawMultipointGraphic(Y,ra,!0);this.emit("create",{graphic:this.createGraphic,state:"active",tool:U,
toolEventInfo:{type:qa,updated:na,vertices:[{coordinates:na,componentIndex:0,vertexIndex:sa}]},type:"create"})}),X.on("cursor-update",la=>{fa=la}),X.on("draw-complete",la=>{la=la.vertices.slice(0);(la=Y.createMultipoint(la,this.view.spatialReference))&&this.createGraphic&&(this.createGraphic.geometry=la);ta&&ta.complete()}),X.on("undo",la=>{la=la.vertices;const qa=fa&&"cursor-update"!==fa.type;this._resetCreateOperationGraphics();la.length&&this._drawMultipointGraphic(Y,la,qa)}),X.on("redo",la=>{la=
la.vertices;const qa=fa&&"cursor-update"!==fa.type;this._resetCreateOperationGraphics();la.length&&this._drawMultipointGraphic(Y,la,qa)}));ja.push(this.view.on("pointer-move",()=>this._displayCrosshairCursor(),V.ViewEventPriorities.WIDGET),this.view.on("key-down",la=>this._getCommonUpdateOperationKeyDownHandlers(ta,la),V.ViewEventPriorities.WIDGET));return ta});return function(U,X){return T.apply(this,arguments)}}();ea._setupCreatePolyOperation=function(){var T=m._asyncToGenerator(function*(U,X){const Y=
yield M.loadCreateUtils();X={...X,elevationInfo:this.layer.elevationInfo,snappingManager:this._snappingManager,interactiveUndoDisabled:!0};let fa=null;"polyline"===U?fa=this._draw.create(U,X):"polygon"===U&&(fa=this._draw.create(U,X));let ja=null;X=[fa.on("vertex-add",qa=>{const {type:sa,vertexIndex:ra,vertices:na}=qa,va=na[ra];this._snapLastPolygonVertexToFirst(U,na);ja=qa;this._drawVertexGraphics(Y,U,na,{userClicked:!0});this.emit("create",{graphic:this.createGraphic,state:1===na.length?"start":
"active",tool:U,toolEventInfo:{added:va,vertices:[{coordinates:va,componentIndex:0,vertexIndex:ra}],type:sa},type:"create"})}),fa.on("vertex-remove",qa=>{const {type:sa,vertexIndex:ra,vertices:na}=qa,va=na[ra];this._snapLastPolygonVertexToFirst(U,na);ja=qa;this._drawVertexGraphics(Y,U,na,{userClicked:!0});this.emit("create",{graphic:this.createGraphic,state:"active",tool:U,toolEventInfo:{removed:va,vertices:[{coordinates:va,componentIndex:0,vertexIndex:ra}],type:sa},type:"create"})}),fa.on("vertex-update",
qa=>{const {type:sa,vertexIndex:ra,vertices:na}=qa,va=na[ra];this._snapLastPolygonVertexToFirst(U,na);ja=qa;this._drawVertexGraphics(Y,U,na,{userClicked:!0});this.emit("create",{graphic:this.createGraphic,state:"active",tool:U,toolEventInfo:{type:sa,updated:va,vertices:[{coordinates:va,componentIndex:0,vertexIndex:ra}]},type:"create"})}),fa.on("cursor-update",qa=>{const {type:sa,vertices:ra}=qa;qa.mapPoint&&(this._snapLastPolygonVertexToFirst(U,ra),ja=qa,this._drawVertexGraphics(Y,U,ra,{userClicked:!1}),
1<ra.length&&this.emit("create",{graphic:this.createGraphic,state:"active",tool:U,toolEventInfo:{coordinates:ra[ra.length-1],type:sa},type:"create"}))}),fa.on("draw-complete",qa=>{qa=qa.vertices.slice(0);let sa=null;"polyline"===U?sa=Y.createPolyline([qa],this.view.spatialReference,this._doUnnormalization):"polygon"===U&&(sa=Y.createPolygon([qa],this.view.spatialReference,this._doUnnormalization,!0));sa&&(this.createGraphic.geometry=sa);la&&la.complete()}),fa.on("undo",qa=>{qa=qa.vertices;const sa=
ja&&"cursor-update"!==ja.type;this._resetCreateOperationGraphics();this._snapLastPolygonVertexToFirst(U,qa);qa.length&&this._drawVertexGraphics(Y,U,qa,{userClicked:sa})}),fa.on("redo",qa=>{qa=qa.vertices;const sa=ja&&"cursor-update"!==ja.type;this._resetCreateOperationGraphics();this._snapLastPolygonVertexToFirst(U,qa);qa.length&&this._drawVertexGraphics(Y,U,qa,{userClicked:sa})})];const ta=[this.view.on("pointer-move",qa=>{t.isSome(fa.getCoordsFromScreenPoint(n.createScreenPoint(qa.x,qa.y)))?this._displayCrosshairCursor():
this._displayDefaultCursor()},V.ViewEventPriorities.WIDGET),this.view.on("key-down",qa=>{qa.key!==H.SKETCH_KEYS.snappingToggle||qa.repeat?qa.key===H.SKETCH_KEYS.undo&&la&&la.canUndo()?(qa.stopPropagation(),la.undo()):qa.key===H.SKETCH_KEYS.redo&&la&&la.canRedo()?(qa.stopPropagation(),la.redo()):qa.key===H.SKETCH_KEYS.cancel&&la&&la.cancel():(this.snappingOptions.enabledToggled=!0,qa.stopPropagation())},V.ViewEventPriorities.WIDGET),this.view.on("key-up",qa=>{qa.key===H.SKETCH_KEYS.snappingToggle&&
(this.snappingOptions.enabledToggled=!1,qa.stopPropagation())},V.ViewEventPriorities.WIDGET)];if("polygon"===U){const qa=(na,va,za)=>{if(!na||!na.layer||!na.visible)return!1;na=this.view.toScreen(na.geometry);return this._isWithinScreenDistance(na,va,za)},sa=na=>{if(!(2>=this._vertexGraphics.length))return qa(this._vertexGraphics[0],na,this._getVertexIntersectDistance())};let ra=!1;ta.push(this.view.on("pointer-move",()=>{ra=!1},V.ViewEventPriorities.WIDGET),this.view.on("pointer-down",na=>{sa(na)?
(ra=!0,na.stopPropagation()):this._vertexGraphics.some(va=>qa(va,na,this._getVertexIntersectDistance()))&&na.stopPropagation()},V.ViewEventPriorities.WIDGET),this.view.on("pointer-up",na=>{ra&&(na.stopPropagation(),fa.complete())}))}const la=this._operationHandleForCreateAction(fa,[...X,...ta],U);return la});return function(U,X){return T.apply(this,arguments)}}();ea._setupCreateCircleOperation=function(){var T=m._asyncToGenerator(function*(U,X){const Y=yield M.loadCreateUtils(),fa=this._draw.create(U,
{...X,elevationInfo:this.layer.elevationInfo,snappingManager:this._snappingManager,interactiveUndoDisabled:!0});let ja=!1,ta=!0;X=[fa.on("vertex-add",sa=>{const {type:ra,vertexIndex:na,vertices:va}=sa;sa=va[na];this._drawSegmentGraphic(Y,U,va,{centered:ta,constrainToggle:ja},fa.viewAlignedCoordinateSystem);this.emit("create",{graphic:this.createGraphic,state:1===va.length?"start":"active",tool:U,toolEventInfo:{added:sa,vertices:[{coordinates:sa,componentIndex:0,vertexIndex:na}],type:ra},type:"create"})}),
fa.on("cursor-update",sa=>{const {type:ra,vertices:na}=sa;this._drawSegmentGraphic(Y,U,na,{centered:ta,constrainToggle:ja},fa.viewAlignedCoordinateSystem);2===na.length&&this.emit("create",{graphic:this.createGraphic,state:"active",tool:U,toolEventInfo:{coordinates:na[na.length-1],type:ra},type:"create"})}),fa.on("draw-complete",sa=>{sa=sa.vertices.slice(0);1===sa.length?(sa.push(fa.viewAlignedCoordinateSystem.makeMapPoint(sa[0][0]+this._defaultSegmentOffset*this.view.resolution,sa[0][1])),sa=Y.createCircle(sa,
fa.viewAlignedCoordinateSystem,!0,this.view.resolution)):sa=ja?Y.createEllipse(sa,fa.viewAlignedCoordinateSystem,ta):Y.createCircle(sa,fa.viewAlignedCoordinateSystem,ta,this.view.resolution);this.createGraphic?this.createGraphic.geometry=sa:(this._removeCreateGraphic(),this._set("createGraphic",new C(sa,this.polygonSymbol)));qa&&qa.complete()})];const la=[this.view.on("pointer-move",sa=>{t.isSome(fa.getCoordsFromScreenPoint(n.createScreenPoint(sa.x,sa.y)))?this._displayCrosshairCursor():this._displayDefaultCursor()},
V.ViewEventPriorities.WIDGET),this.view.on("key-down",sa=>{sa.key===H.SKETCH_KEYS.constraint?ja||(ja=!0,this._drawSegmentGraphic(Y,U,fa.vertices,{centered:ta,constrainToggle:ja},fa.viewAlignedCoordinateSystem)):sa.key===H.SKETCH_KEYS.center?ta&&(ta=!1,this._drawSegmentGraphic(Y,U,fa.vertices,{centered:ta,constrainToggle:ja},fa.viewAlignedCoordinateSystem)):sa.key===H.SKETCH_KEYS.cancel&&qa&&qa.cancel()},V.ViewEventPriorities.WIDGET),this.view.on("key-up",sa=>{sa.key===H.SKETCH_KEYS.constraint?(ja=
!1,this._drawSegmentGraphic(Y,U,fa.vertices,{centered:ta,constrainToggle:ja},fa.viewAlignedCoordinateSystem)):sa.key===H.SKETCH_KEYS.center&&(ta=!0,this._drawSegmentGraphic(Y,U,fa.vertices,{centered:ta,constrainToggle:ja},fa.viewAlignedCoordinateSystem))},V.ViewEventPriorities.WIDGET)],qa=this._operationHandleForCreateAction(fa,[...X,...la],U);return qa});return function(U,X){return T.apply(this,arguments)}}();ea._setupCreateRectangleOperation=function(){var T=m._asyncToGenerator(function*(U,X){const Y=
yield M.loadCreateUtils(),fa=this._draw.create(U,{...X,elevationInfo:this.layer.elevationInfo,snappingManager:this._snappingManager,interactiveUndoDisabled:!0});let ja=!1,ta=!1;X=[fa.on("vertex-add",sa=>{const {type:ra,vertexIndex:na,vertices:va}=sa;sa=va[na];this._drawSegmentGraphic(Y,U,va,{centered:ta,constrainToggle:ja},fa.viewAlignedCoordinateSystem);this.emit("create",{graphic:this.createGraphic,state:1===va.length?"start":"active",tool:U,toolEventInfo:{added:sa,vertices:[{coordinates:sa,componentIndex:0,
vertexIndex:na}],type:ra},type:"create"})}),fa.on("cursor-update",sa=>{const {type:ra,vertices:na}=sa;this._drawSegmentGraphic(Y,U,na,{centered:ta,constrainToggle:ja},fa.viewAlignedCoordinateSystem);2===na.length&&this.emit("create",{graphic:this.createGraphic,state:"active",tool:U,toolEventInfo:{coordinates:na[na.length-1],type:ra},type:"create"})}),fa.on("draw-complete",sa=>{sa=sa.vertices.slice(0);let ra=null;1===sa.length&&(ta=ja=!1);ra=ja?Y.createSquare(sa,fa.viewAlignedCoordinateSystem,ta):
Y.createRectangle(sa,fa.viewAlignedCoordinateSystem,ta);this.createGraphic?this.createGraphic.geometry=ra:(this._removeCreateGraphic(),this._set("createGraphic",new C(ra,this.polygonSymbol)));qa&&qa.complete()})];const la=[this.view.on("pointer-move",sa=>{t.isSome(fa.getCoordsFromScreenPoint(n.createScreenPoint(sa.x,sa.y)))?this._displayCrosshairCursor():this._displayDefaultCursor()},V.ViewEventPriorities.WIDGET),this.view.on("key-down",sa=>{sa.key===H.SKETCH_KEYS.constraint?ja||(ja=!0,this._drawSegmentGraphic(Y,
U,fa.vertices,{centered:ta,constrainToggle:ja},fa.viewAlignedCoordinateSystem)):sa.key===H.SKETCH_KEYS.center?ta||(ta=!0,this._drawSegmentGraphic(Y,U,fa.vertices,{centered:ta,constrainToggle:ja},fa.viewAlignedCoordinateSystem)):sa.key===H.SKETCH_KEYS.cancel&&qa&&qa.cancel()},V.ViewEventPriorities.WIDGET),this.view.on("key-up",sa=>{sa.key===H.SKETCH_KEYS.constraint?(ja=!1,this._drawSegmentGraphic(Y,U,fa.vertices,{centered:ta,constrainToggle:ja},fa.viewAlignedCoordinateSystem)):sa.key===H.SKETCH_KEYS.center&&
(ta=!1,this._drawSegmentGraphic(Y,U,fa.vertices,{centered:ta,constrainToggle:ja},fa.viewAlignedCoordinateSystem))},V.ViewEventPriorities.WIDGET)],qa=this._operationHandleForCreateAction(fa,[...X,...la],U);return qa});return function(U,X){return T.apply(this,arguments)}}();ea._setupUpdateOperation=function(){var T=m._asyncToGenerator(function*(U,X){const {layer:Y,view:fa}=this;X={tool:this._defaultUpdateTool,...this.defaultUpdateOptions,...X,reshapeOptions:{...this.defaultUpdateOptions.reshapeOptions,
...null==X?void 0:X.reshapeOptions}};var ja=X.tool;for(var ta of U)Y.remove(ta),Y.add(ta);if("3d"===fa.type){if(0===U.length)return null;switch(ja){case "move":return this._setupMove3DOperation(U,X,fa,ja);case "reshape":if(1<U.length)return this._logError("sketch:reshape-multiple","Reshape operation does not support multiple graphics."),null;ja=E.isSupportedGraphic(U[0]);if(0===ja)return this._setupReshape3DOperation(U[0],X,fa);this._logError("sketch:reshape",`Reshape operation not supported for provided graphic(s) (${z.isSupportedGraphicResultMessage(ja)}).`);
return null;case "transform":return this._setupGraphicTransform3DOperation(U,X,fa)}}switch(ja){case "move":return this._setupMoveOperation(U,X,fa);case "reshape":if(1<U.length)return this._logError("sketch:reshape-multiple","Reshape operation does not support multiple graphics."),null;ta=E.isSupportedGraphic(U[0]);if(0===ta)return this._setupTransformOrReshapeOperation(U,ja,X,fa);this._logError("sketch:reshape",`Reshape operation not supported for provided graphic(s) (${z.isSupportedGraphicResultMessage(ta)}).`);
return null;case "transform":return this._setupTransformOrReshapeOperation(U,1===U.length&&"point"===t.get(U[0].geometry,"type")?"reshape":ja,X,fa)}});return function(U,X){return T.apply(this,arguments)}}();ea._setupMove3DOperation=function(){var T=m._asyncToGenerator(function*(U,X,Y,fa,ja=!1){var ta=this;for(var la of U){const na=f.isSupportedGraphic(la);if(0!==na)return this._logError("sketch:move",`Move operation not supported for provided graphic(s) (${z.isSupportedGraphicResultMessage(na)}).`),
null}la=yield this._requireModule(new Promise(function(na,va){d(["../../views/3d/interactive/editingTools"],na,va)}));if(I(la))return la;const qa=new la.module.GraphicMoveTool({view:Y,enableZ:X.enableZ,snappingManager:this._snappingManager});this.view.tools.add(qa);qa.graphics.addMany(U);ja||this.updateGraphics.addMany(U);const sa=[],ra=new S.OperationHandle({activeComponent:qa,tool:fa,type:"update",onEnd:()=>{var na;sa.forEach(va=>va.remove());sa.length=0;null==(na=this.view.tools)?void 0:na.remove(qa);
qa.destroyed||qa.destroy()},undo:()=>{wa(ra,this.updateGraphics.toArray());this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:fa})},redo:()=>{ya(ra,this.updateGraphics.toArray());this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:fa})},addToSelection:na=>{this.updateGraphics.push(na);qa.graphics.push(na);this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[na],removed:[],type:"selection-change"},
type:"update"})},removeFromSelection:na=>{const va=this.updateGraphics.indexOf(na);ra.history.undo.forEach(za=>za.updates.splice(va,1));ra.history.redo.forEach(za=>za.updates.splice(va,1));this.updateGraphics.remove(na);this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[na],type:"selection-change"},type:"update"});0===this.updateGraphics.length?ra.complete():qa.graphics.remove(na)},toggleTool:function(){var na=
m._asyncToGenerator(function*(){if(1===ta.updateGraphics.length&&!1!==X.toggleToolOnClick&&"transform"===fa){var va=ta.updateGraphics.getItemAt(0);0===E.isSupportedGraphic(va)&&(va=yield ta._setupReshape3DOperation(va,X,Y,!0),I(va)||(ra.onEnd(),ra.destroy(),ta._setUpdateOperationHandle(va,X)))}});return function(){return na.apply(this,arguments)}}()});sa.push(...this._getHandlesForComponent(ra,X),this.view.on("immediate-click",na=>this._getCommonUpdateOperationClickHandlers(ra,na,X),V.ViewEventPriorities.WIDGET),
Y.on("key-down",na=>{this._getCommonUpdateOperationKeyDownHandlers(ra,na);na.key===H.SKETCH_KEYS.snappingToggle&&(this.snappingOptions.enabledToggled=!0,na.stopPropagation())},V.ViewEventPriorities.WIDGET),Y.on("key-up",na=>{na.key===H.SKETCH_KEYS.snappingToggle&&(this.snappingOptions.enabledToggled=!1,na.stopPropagation())},V.ViewEventPriorities.WIDGET));return ra});return function(U,X,Y,fa){return T.apply(this,arguments)}}();ea._setupGraphicTransform3DOperation=function(T,U,X,Y=!1){if(1===T.length&&
0===F.isSupportedGraphic(T[0])){const fa=T[0],ja=fa.geometry;if(t.isSome(ja)&&("point"===ja.type||"mesh"===ja.type))return this._setupPointTransform3DOperation(fa,U,X);if(t.isSome(ja)&&("polygon"===ja.type||"polyline"===ja.type))return this._setupPolyTransform3DOperation(fa,U,X,Y)}return this._setupMove3DOperation(T,U,X,"transform",Y)};ea._setupPointTransform3DOperation=function(){var T=m._asyncToGenerator(function*(U,X,Y){var fa=this;const {enableRotation:ja,enableScaling:ta,enableZ:la}=X,qa=yield this._requireModule(new Promise(function(va,
za){d(["../../views/3d/interactive/editingTools"],va,za)}));if(I(qa))return qa;const sa=new qa.module.GraphicTransformTool({graphic:U,view:Y,enableRotation:ja,enableScaling:ta,enableZ:la,snappingManager:this._snappingManager});this.view.tools.add(sa);this.updateGraphics.add(U);const ra=[],na=new S.OperationHandle({activeComponent:sa,tool:"transform",type:"update",onEnd:()=>{var va;ra.forEach(za=>za.remove());ra.length=0;null==(va=this.view.tools)?void 0:va.remove(sa);sa.destroyed||sa.destroy()},undo:()=>
{wa(na,this.updateGraphics.toArray());this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:"transform"})},redo:()=>{ya(na,this.updateGraphics.toArray());this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:"transform"})},addToSelection:function(){var va=m._asyncToGenerator(function*(za){fa.updateGraphics.add(za);fa.emit("update",{graphics:fa.updateGraphics.toArray(),state:"active",aborted:!1,tool:fa.activeTool,toolEventInfo:{added:[za],removed:[],type:"selection-change"},type:"update"});
za=yield fa._setupMove3DOperation(fa.updateGraphics.toArray(),X,Y,"transform",!0);I(za)||(na.onEnd(),na.destroy(),fa._setUpdateOperationHandle(za,X))});return function(za){return va.apply(this,arguments)}}(),removeFromSelection:va=>{this.updateGraphics.remove(va);this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[va],type:"selection-change"},type:"update"});na.complete()},toggleTool:()=>{}});ra.push(...this._getHandlesForComponent(na,
X),this.view.on("immediate-click",va=>this._getCommonUpdateOperationClickHandlers(na,va,X),V.ViewEventPriorities.WIDGET),Y.on("key-down",va=>{this._getCommonUpdateOperationKeyDownHandlers(na,va);va.key===H.SKETCH_KEYS.snappingToggle&&(this.snappingOptions.enabledToggled=!0,va.stopPropagation())},V.ViewEventPriorities.WIDGET),Y.on("key-up",va=>{va.key===H.SKETCH_KEYS.snappingToggle&&(this.snappingOptions.enabledToggled=!1,va.stopPropagation())},V.ViewEventPriorities.WIDGET));return na});return function(U,
X,Y){return T.apply(this,arguments)}}();ea._setupPolyTransform3DOperation=function(){var T=m._asyncToGenerator(function*(U,X,Y,fa=!1){var ja=this;const {enableRotation:ta,enableScaling:la,enableZ:qa,preserveAspectRatio:sa}=X,ra=yield this._requireModule(new Promise(function(Ca,Da){d(["../../views/3d/interactive/editingTools"],Ca,Da)}));if(I(ra))return ra;const na=new ra.module.ExtentTransformTool({graphic:U,view:Y,enableRotation:ta,enableScaling:la,enableZ:qa,preserveAspectRatio:sa});this.view.tools.add(na);
fa||this.updateGraphics.add(U);const va=[],za=new S.OperationHandle({activeComponent:na,tool:"transform",type:"update",onEnd:()=>{var Ca;va.forEach(Da=>Da.remove());va.length=0;null==(Ca=this.view.tools)?void 0:Ca.remove(na);na.destroyed||na.destroy()},canUndo:()=>na.canUndo,undo:()=>{na.undo();this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:"transform"})},canRedo:()=>na.canRedo,redo:()=>{na.redo();this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:"transform"})},addToSelection:function(){var Ca=
m._asyncToGenerator(function*(Da){ja.updateGraphics.add(Da);ja.emit("update",{graphics:ja.updateGraphics.toArray(),state:"active",aborted:!1,tool:ja.activeTool,toolEventInfo:{added:[Da],removed:[],type:"selection-change"},type:"update"});Da=yield ja._setupMove3DOperation(ja.updateGraphics.toArray(),X,Y,"transform",!0);I(Da)||(za.onEnd(),za.destroy(),ja._setUpdateOperationHandle(Da,X))});return function(Da){return Ca.apply(this,arguments)}}(),removeFromSelection:Ca=>{this.updateGraphics.remove(Ca);
this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[Ca],type:"selection-change"},type:"update"});za.complete()},toggleTool:function(){var Ca=m._asyncToGenerator(function*(){if(1===ja.updateGraphics.length&&!1!==X.toggleToolOnClick){var Da=ja.updateGraphics.getItemAt(0);0===E.isSupportedGraphic(Da)&&(Da=yield ja._setupReshape3DOperation(Da,X,Y,!0),I(Da)||(za.onEnd(),za.destroy(),ja._setUpdateOperationHandle(Da,X)))}});
return function(){return Ca.apply(this,arguments)}}()});va.push(...this._getHandlesForComponent(za,X),this.view.on("immediate-click",Ca=>this._getCommonUpdateOperationClickHandlers(za,Ca,X),V.ViewEventPriorities.WIDGET),this.view.on("key-down",Ca=>this._getCommonUpdateOperationKeyDownHandlers(za,Ca),V.ViewEventPriorities.WIDGET),this.view.on("key-down",Ca=>{Ca.key!==H.SKETCH_KEYS.constraint||Ca.repeat||(na.preserveAspectRatio=!na.preserveAspectRatio,Ca.stopPropagation())},V.ViewEventPriorities.WIDGET),
this.view.on("key-up",Ca=>{Ca.key===H.SKETCH_KEYS.constraint&&(na.preserveAspectRatio=!na.preserveAspectRatio,Ca.stopPropagation())},V.ViewEventPriorities.WIDGET));return za});return function(U,X,Y){return T.apply(this,arguments)}}();ea._setupMoveOperation=function(){var T=m._asyncToGenerator(function*(U,X,Y){this.updateGraphics.addMany(U);const fa=yield this._getGraphicMover(U,X,Y);if(I(fa))return fa;const ja=new S.OperationHandle({activeComponent:fa,tool:"move",type:"update",onEnd:()=>{var sa;this._displayDefaultCursor();
qa.forEach(ra=>ra.remove());la.forEach(ra=>ra.remove());qa=[];la=[];fa.destroy();null==(sa=this._internalGraphicsLayer)?void 0:sa.removeMany([...this.updateGraphics.toArray()])},undo:()=>{const sa=this.updateGraphics.toArray();wa(ja,sa);ja.refreshComponent();this._emitUndoEvent({graphics:sa,tool:"move"})},redo:()=>{const sa=this.updateGraphics.toArray();ya(ja,sa);ja.refreshComponent();this._emitRedoEvent({graphics:sa,tool:"move"})},addToSelection:sa=>{this.updateGraphics.push(sa);fa.graphics=this.updateGraphics.toArray();
this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[sa],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:sa=>{const ra=this.updateGraphics.indexOf(sa);ja.history.undo.forEach(va=>va.updates.splice(ra,1));ja.history.redo.forEach(va=>va.updates.splice(ra,1));this.updateGraphics.remove(sa);const na=this.updateGraphics.toArray();this.emit("update",{graphics:na,state:"active",aborted:!1,tool:this.activeTool,
toolEventInfo:{added:[],removed:[sa],type:"selection-change"},type:"update"});0===this.updateGraphics.length?ja.complete():fa.graphics=na}});let ta=!1,la=[Y.on("immediate-click",sa=>this._getCommonUpdateOperationClickHandlers(ja,sa,X),V.ViewEventPriorities.WIDGET),Y.on("key-down",sa=>{this._getCommonUpdateOperationKeyDownHandlers(ja,sa);sa.key!==H.SKETCH_KEYS.constraint||sa.repeat||(ta=!0,fa.enableMoveAllGraphics=!fa.enableMoveAllGraphics)},V.ViewEventPriorities.WIDGET),Y.on("key-up",sa=>{sa.key===
H.SKETCH_KEYS.constraint&&ta&&(ta=!1,fa.enableMoveAllGraphics=!fa.enableMoveAllGraphics)},V.ViewEventPriorities.WIDGET)],qa=this._getHandlesForComponent(ja,X);return ja});return function(U,X,Y){return T.apply(this,arguments)}}();ea._setupReshape3DOperation=function(){var T=m._asyncToGenerator(function*(U,X,Y,fa=!1){var ja=this;const ta=yield this._requireModule(new Promise(function(ra,na){d(["../../views/3d/interactive/editingTools"],ra,na)}));if(I(ta))return ta;this.snappingOptions.enabledToggled=
!1;const la=new ta.module.GraphicReshapeTool({view:Y,graphic:U,enableZVertex:X.enableZ&&"move"===X.reshapeOptions.vertexOperation,enableZShape:X.enableZ&&"move"===X.reshapeOptions.shapeOperation,enableMoveGraphic:"move"===X.reshapeOptions.shapeOperation||"move-xy"===X.reshapeOptions.shapeOperation,enableMidpoints:"split"===X.reshapeOptions.edgeOperation,enableEdgeOffset:"offset"===X.reshapeOptions.edgeOperation,snappingManager:this._snappingManager});Y.tools.add(la);fa||this.updateGraphics.add(U);
const qa=[],sa=new S.OperationHandle({activeComponent:la,tool:"reshape",type:"update",onEnd:()=>{var ra;qa.forEach(na=>na.remove());qa.length=0;null==(ra=this.view.tools)?void 0:ra.remove(la);la.destroyed||la.destroy()},canUndo:()=>la.canUndo,undo:()=>{la.undo();this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:"reshape"})},canRedo:()=>la.canRedo,redo:()=>{la.redo();this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:"reshape"})},addToSelection:function(){var ra=m._asyncToGenerator(function*(na){ja.updateGraphics.add(na);
ja.emit("update",{graphics:ja.updateGraphics.toArray(),state:"active",aborted:!1,tool:ja.activeTool,toolEventInfo:{added:[na],removed:[],type:"selection-change"},type:"update"});na=yield ja._setupMove3DOperation(ja.updateGraphics.toArray(),X,Y,"transform",!0);I(na)||(sa.onEnd(),sa.destroy(),ja._setUpdateOperationHandle(na,X))});return function(na){return ra.apply(this,arguments)}}(),removeFromSelection:ra=>{this.updateGraphics.remove(ra);this.emit("update",{graphics:this.updateGraphics.toArray(),
state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[ra],type:"selection-change"},type:"update"});sa.complete()},toggleTool:function(){var ra=m._asyncToGenerator(function*(){if(!1!==X.toggleToolOnClick){var na=yield ja._setupGraphicTransform3DOperation(ja.updateGraphics.toArray(),X,Y,!0);I(na)||(sa.onEnd(),sa.destroy(),ja._setUpdateOperationHandle(na,X))}});return function(){return ra.apply(this,arguments)}}()});qa.push(...this._getHandlesForComponent(sa,X),Y.on("immediate-click",
ra=>this._getCommonUpdateOperationClickHandlers(sa,ra,X),V.ViewEventPriorities.WIDGET),Y.on("key-down",ra=>{this._getCommonUpdateOperationKeyDownHandlers(sa,ra);ra.key===H.SKETCH_KEYS.snappingToggle&&(this.snappingOptions.enabledToggled=!0,ra.stopPropagation())},V.ViewEventPriorities.WIDGET),Y.on("key-up",ra=>{ra.key===H.SKETCH_KEYS.snappingToggle&&(this.snappingOptions.enabledToggled=!1,ra.stopPropagation())},V.ViewEventPriorities.WIDGET));return sa});return function(U,X,Y){return T.apply(this,arguments)}}();
ea._setupTransformOrReshapeOperation=function(){var T=m._asyncToGenerator(function*(U,X,Y,fa){var ja=this;const {multipleSelectionEnabled:ta}=Y;this.updateGraphics.addMany(U);U="transform"===X?yield this._getBox(U,Y,fa):yield this._getReshape(U,Y,fa);if(I(U))return U;const la=new S.OperationHandle({activeComponent:U,type:"update",onEnd:()=>{sa.forEach(ra=>ra.remove());qa.forEach(ra=>ra.remove());sa=[];qa=[];la.activeComponent&&!la.activeComponent.destroyed&&la.activeComponent.destroy();this._internalGraphicsLayer.removeMany(this.updateGraphics.toArray())},
undo:()=>{wa(la,this.updateGraphics.toArray());la.refreshComponent();this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:la.tool})},redo:()=>{ya(la,this.updateGraphics.toArray());la.refreshComponent();this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:la.tool})},addToSelection:function(){var ra=m._asyncToGenerator(function*(na){var va=la.activeComponent;if("reshape"===va.type){va=[...ja.updateGraphics,na];ja.updateGraphics.removeAll();va=yield ja._setupMoveOperation(va,
Y,fa);if(I(va))return;la.onEnd();la.destroy();ja._setUpdateOperationHandle(va,Y)}else ja.updateGraphics.add(na),va.graphics=ja.updateGraphics.toArray(),va.refresh(),la.resetHistory();ja.emit("update",{graphics:ja.updateGraphics.toArray(),state:"active",aborted:!1,tool:ja.activeTool,toolEventInfo:{added:[na],removed:[],type:"selection-change"},type:"update"})});return function(na){return ra.apply(this,arguments)}}(),removeFromSelection:function(){var ra=m._asyncToGenerator(function*(na){const va=ja.updateGraphics.indexOf(na);
la.history.undo.forEach(Ca=>Ca.updates.splice(va,1));la.history.redo.forEach(Ca=>Ca.updates.splice(va,1));ja.updateGraphics.remove(na);const za=ja.updateGraphics.toArray();0===za.length?la.complete():1===za.length&&t.isSome(za[0].geometry)&&"point"===za[0].geometry.type?la.toggleTool():la.activeComponent.graphics=za;ja.emit("update",{graphics:za,state:"active",aborted:!1,tool:ja.activeTool,toolEventInfo:{added:[],removed:[na],type:"selection-change"},type:"update"})});return function(na){return ra.apply(this,
arguments)}}(),toggleTool:function(){var ra=m._asyncToGenerator(function*(){if(!(1<ja.updateGraphics.length)){var na=ja.updateGraphics.getItemAt(0);if(!t.isSome(na.geometry)||!("transform"===la.tool&&"extent"===na.geometry.type||"reshape"===la.tool&&"point"===na.geometry.type)){var va=null;"transform"===la.tool?va=yield ja._getReshape([na],Y,fa):"reshape"===la.tool&&(va=yield ja._getBox([na],Y,fa));I(va)||(la.activeComponent.destroy(),la.activeComponent=va,la.activeComponent&&(sa.forEach(za=>za.remove()),
sa=ja._getHandlesForComponent(la,Y)))}}});return function(){return ra.apply(this,arguments)}}()});let qa=[fa.on("immediate-click",function(){var ra=m._asyncToGenerator(function*(na){var va;const za=yield na.async(()=>ja._getFirstHit(N.createScreenPointFromEvent(na)));null!=(va=za.results)&&va.length?za.results.some(Ca=>{if(Ca.graphic){var Da;Ca=Ca.graphic;if(null!=(Da=na.native)&&Da.shiftKey&&ta)return na.stopPropagation(),la.addToSelection(Ca),!0;if(Ca.layer===ja.layer)return la.complete(),!0}return!1}):
la.complete()});return function(na){return ra.apply(this,arguments)}}(),V.ViewEventPriorities.WIDGET),fa.on("key-down",ra=>{this._getCommonUpdateOperationKeyDownHandlers(la,ra);ra.key!==H.SKETCH_KEYS.snappingToggle||ra.repeat||(this.snappingOptions.enabledToggled=!0,ra.stopPropagation());ra.key===H.SKETCH_KEYS.constraint&&!ra.repeat&&la&&(ra=la.activeComponent)&&"box"===ra.type&&(ra.preserveAspectRatio=!ra.preserveAspectRatio)},V.ViewEventPriorities.WIDGET),fa.on("key-up",ra=>{var na;ra.key===H.SKETCH_KEYS.snappingToggle&&
"reshape"===(null==la?void 0:null==(na=la.activeComponent)?void 0:na.type)&&(this.snappingOptions.enabledToggled=!1,ra.stopPropagation());ra.key===H.SKETCH_KEYS.constraint&&la&&(ra=la.activeComponent)&&"box"===ra.type&&(ra.preserveAspectRatio=!ra.preserveAspectRatio)},V.ViewEventPriorities.WIDGET)],sa=this._getHandlesForComponent(la,Y);return la});return function(U,X,Y,fa){return T.apply(this,arguments)}}();ea._getGraphicMover=function(){var T=m._asyncToGenerator(function*(U,X,Y){({enableMoveAllGraphics:X}=
X);const fa=yield this._requireModule(new Promise(function(ja,ta){d(["../../views/draw/support/GraphicMover"],function(la){ja(ma(la))},ta)}));return I(fa)?fa:new fa.module.default({enableMoveAllGraphics:X,graphics:U,view:Y,callbacks:{onGraphicMoveStart:({dx:ja,dy:ta,graphic:la})=>{this._displayGrabbingCursor();this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:ja,dy:ta,mover:la,type:"move-start"},type:"update"})},onGraphicMove:({dx:ja,
dy:ta,graphic:la})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:ja,dy:ta,mover:la,type:"move"},type:"update"}),onGraphicMoveStop:({dx:ja,dy:ta,graphic:la})=>{this._displayPointerCursor();this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:ja,dy:ta,mover:la,type:"move-stop"},type:"update"})},onGraphicPointerOver:()=>this._displayPointerCursor(),onGraphicPointerOut:()=>
this._displayDefaultCursor()}})});return function(U,X,Y){return T.apply(this,arguments)}}();ea._getBox=function(){var T=m._asyncToGenerator(function*(U,X,Y){const {enableRotation:fa,enableScaling:ja,preserveAspectRatio:ta}=X;X=yield this._requireModule(new Promise(function(la,qa){d(["../../views/draw/support/Box"],function(sa){la(ma(sa))},qa)}));return I(X)?X:new X.module.default({graphics:U,enableRotation:fa,enableScaling:ja,preserveAspectRatio:ta,layer:this._internalGraphicsLayer,view:Y,callbacks:{onMoveStart:la=>
this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...la},type:"update"}),onMove:la=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...la},type:"update"}),onMoveStop:la=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...la},type:"update"}),onScaleStart:la=>this.emit("update",{graphics:this.updateGraphics.toArray(),
state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...la},type:"update"}),onScale:la=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...la},type:"update"}),onScaleStop:la=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...la},type:"update"}),onRotateStart:la=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,
tool:this.activeTool,toolEventInfo:{...la},type:"update"}),onRotate:la=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...la},type:"update"}),onRotateStop:la=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...la},type:"update"})}})});return function(U,X,Y){return T.apply(this,arguments)}}();ea._getReshape=function(){var T=m._asyncToGenerator(function*(U,
X,Y){var fa,ja;const ta="split"===(null==(fa=X.reshapeOptions)?void 0:fa.edgeOperation);X="move"===(null==(ja=X.reshapeOptions)?void 0:ja.shapeOperation);ja=yield this._requireModule(new Promise(function(la,qa){d(["../../views/draw/support/Reshape"],function(sa){la(ma(sa))},qa)}));return I(ja)?ja:new ja.module.default({enableMidpoints:ta,enableMovement:X,graphic:U[0],layer:this._internalGraphicsLayer,snappingManager:this._snappingManager,view:Y,callbacks:{onReshapeStart:la=>this.emit("update",{graphics:this.updateGraphics.toArray(),
state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...la},type:"update"}),onReshape:la=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...la},type:"update"}),onReshapeStop:({mover:la,type:qa})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:la,type:qa},type:"update"}),onMoveStart:({dx:la,dy:qa,mover:sa,type:ra})=>this.emit("update",{graphics:this.updateGraphics.toArray(),
state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:la,dy:qa,mover:sa,type:ra},type:"update"}),onMove:({dx:la,dy:qa,mover:sa,type:ra})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:la,dy:qa,mover:sa,type:ra},type:"update"}),onMoveStop:({dx:la,dy:qa,mover:sa,type:ra})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:la,dy:qa,mover:sa,
type:ra},type:"update"}),onVertexAdd:({added:la,type:qa,vertices:sa})=>{la=la.map(ra=>w.geometryToCoordinates(ra.geometry));this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:la,vertices:sa,type:qa},type:"update"})},onVertexRemove:({removed:la,type:qa,vertices:sa})=>{la=la.map(ra=>w.geometryToCoordinates(ra.geometry));this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,
toolEventInfo:{removed:la,vertices:sa,type:qa},type:"update"})}}})});return function(U,X,Y){return T.apply(this,arguments)}}();ea._getHandlesForComponent=function(T,U){const X=T.activeComponent;switch(X.type){case "graphic-mover":return[X.on("graphic-click",({graphic:Y,viewEvent:fa})=>{var ja;null!=(ja=fa.native)&&ja.shiftKey&&(fa.stopPropagation(),T.removeFromSelection(Y))}),X.on("graphic-move-start",Y=>T.addToHistory(G(Y.allGraphics)))];case "box":return[X.on("graphic-click",Y=>this._onTransformOrReshape2DGraphicClick(T,
U,Y)),X.on("move-start",Y=>T.addToHistory(G(Y.graphics))),X.on("rotate-start",Y=>T.addToHistory(G(Y.graphics))),X.on("scale-start",Y=>T.addToHistory(G(Y.graphics)))];case "reshape":return[X.on("graphic-click",Y=>this._onTransformOrReshape2DGraphicClick(T,U,Y)),X.on("move-start",Y=>T.addToHistory(G([Y.mover]))),X.on("reshape-start",Y=>T.addToHistory(G([Y.graphic]))),X.on("vertex-add",Y=>T.addToHistory(G([Y.oldGraphic]))),X.on("vertex-remove",Y=>T.addToHistory(G([Y.oldGraphic])))];case "move-3d":return[X.on("graphic-move-start",
Y=>{T.addToHistory(G(Y.allGraphics));this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:0,dy:0,mover:0<Y.allGraphics.length?Y.allGraphics[0]:null,type:"move-start"},type:"update"})}),X.on("graphic-move",Y=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:Y.dx,dy:Y.dy,mover:0<Y.allGraphics.length?Y.allGraphics[0]:null,type:"move"},type:"update"})}),X.on("graphic-move-stop",
Y=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:0,dy:0,mover:0<Y.allGraphics.length?Y.allGraphics[0]:null,type:"move-stop"},type:"update"})}),X.on("immediate-click",Y=>{Y.shiftKey?this._toggleSelection([Y.graphic],T,U):T.toggleTool()})];case "transform-3d":return[X.on("record-undo",({record:Y})=>{T.addToHistory({updates:[Y]})}),X.on("graphic-translate-start",Y=>{this.emit("update",{graphics:this.updateGraphics.toArray(),
state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:Y.graphic,dx:Y.dxScreen,dy:Y.dyScreen,type:"move-start"},type:"update"})}),X.on("graphic-translate-stop",Y=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:Y.graphic,dx:Y.dxScreen,dy:Y.dyScreen,type:"move-stop"},type:"update"})}),X.on("graphic-rotate-start",Y=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,
toolEventInfo:{mover:Y.graphic,angle:Y.angle,type:"rotate-start"},type:"update"})}),X.on("graphic-rotate-stop",Y=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:Y.graphic,angle:Y.angle,type:"rotate-stop"},type:"update"})}),X.on("graphic-scale-start",Y=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:Y.graphic,xScale:Y.xScale,yScale:Y.yScale,
type:"scale-start"},type:"update"})}),X.on("graphic-scale-stop",Y=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:Y.graphic,xScale:Y.xScale,yScale:Y.yScale,type:"scale-stop"},type:"update"})}),X.on("graphic-translate",Y=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:Y.graphic,dx:Y.dxScreen,dy:Y.dyScreen,type:"move"},type:"update"})}),X.on("graphic-rotate",
Y=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:Y.graphic,angle:Y.angle,type:"rotate"},type:"update"})}),X.on("graphic-scale",Y=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:Y.graphic,xScale:Y.xScale,yScale:Y.yScale,type:"scale"},type:"update"})}),X.on("immediate-click",Y=>{Y.shiftKey?this._toggleSelection([Y.graphic],T,U):T.toggleTool()})];
case "reshape-3d":return[X.on("reshape",Y=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:Y,type:"update"})}),X.on("move",Y=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:Y,type:"update"})}),X.on("vertex-add",Y=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:Y,type:"update"})}),
X.on("vertex-remove",Y=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:Y,type:"update"})}),X.on("immediate-click",Y=>{Y.shiftKey?this._toggleSelection([Y.graphic],T,U):T.toggleTool()})];case "draw":case "draw-3d":return null}};ea._onTransformOrReshape2DGraphicClick=function(T,U,X){var Y;const {graphic:fa,viewEvent:ja}=X;if(null!=(Y=ja.native)&&Y.shiftKey)return ja.stopPropagation(),T.removeFromSelection(fa);if(U.toggleToolOnClick)return ja.stopPropagation(),
T.toggleTool()};ea._setUpdateOperationHandle=function(T,U){this._operationHandle=T;const X=this.view.map;this._disablePopup(U);T.on("complete",()=>{if(T===this._operationHandle){const Y=this.updateGraphics.toArray(),fa=this._operationHandle.tool;this._operationHandle.destroy();this._operationHandle=null;this._internalGraphicsLayer.removeMany(this.updateGraphics.toArray());this.updateGraphics.removeAll();X&&X.remove(this._internalGraphicsLayer);this._restorePopup(U);this.emit("update",{graphics:Y,
state:"complete",aborted:T.cancelled,tool:fa,toolEventInfo:null,type:"update"})}})};ea._getCommonUpdateOperationClickHandlers=function(){var T=m._asyncToGenerator(function*(U,X,Y){const fa=N.createScreenPointFromEvent(X),ja=(yield X.async(()=>this._getFirstHit(fa))).results;ja.length?X.native.shiftKey&&this._toggleSelection(ja.map(ta=>ta.graphic),U,Y)?X.stopPropagation():ja.some(ta=>ta.graphic&&this.updateGraphics.includes(ta.graphic))?X.stopPropagation():U.complete():U.complete()});return function(U,
X,Y){return T.apply(this,arguments)}}();ea._toggleSelection=function(T,U,X){const Y=!!X.multipleSelectionEnabled;return T.some(fa=>null==fa?!1:Y&&fa.layer===this.layer?(this.updateGraphics.includes(fa)?U.removeFromSelection(fa):U.addToSelection(fa),!0):!1)};ea._getCommonUpdateOperationKeyDownHandlers=function(T,U){if(T){var X=U.key;X===H.SKETCH_KEYS.undo&&T.canUndo()?(U.stopPropagation(),T.undo()):X===H.SKETCH_KEYS.redo&&T.canRedo()?(U.stopPropagation(),T.redo()):X===H.SKETCH_KEYS.cancel?(U.stopPropagation(),
T.cancel()):this.allowDeleteKey&&H.SKETCH_KEYS.delete.includes(X)&&this._onDeleteKey(U)}};ea._onDeleteKey=function(T){if(this._operationHandle&&"update"===this._operationHandle.type){var U=this.activeComponent,X=this.updateGraphics.toArray();t.isNone(U)||"reshape-3d"===U.type||"reshape"===U.type&&(1!==X.length||"point"!==t.get(X[0].geometry,"type"))||(T.stopPropagation(),this.delete())}};ea._drawMultipointGraphic=function(T,U,X){var Y=null;!X&&1<U.length?(Y=U.slice(0),Y.pop(),Y=T.createMultipoint(Y,
this.view.spatialReference)):Y=T.createMultipoint(U,this.view.spatialReference);this.createGraphic?this.createGraphic.geometry=Y:this._set("createGraphic",new C(Y,this.pointSymbol));X&&1===U.length&&this._internalGraphicsLayer.add(this.createGraphic)};ea._drawVertexGraphics=function(T,U,X,Y){if(X.length){var {_doUnnormalization:fa,activeLineSymbol:ja,activeVertexSymbol:ta,polygonSymbol:la,polylineSymbol:qa,vertexSymbol:sa,view:{spatialReference:ra}}=this,na=!(!Y||!Y.userClicked),va="polygon"===U;
Y=va?la:qa;if(1===X.length){this._removeLineGraphic();this._removeActiveLineGraphic();var za=this.createPointFromVertex(X[0]);X=va?T.createPolygon([X],ra,fa,!0):T.createPolyline([X],ra,fa);this._vertexGraphics.length?this._vertexGraphics[0].geometry=za:this._vertexGraphics.push(new C(za,ta));this.createGraphic?this.createGraphic.set({geometry:X,symbol:Y}):this._set("createGraphic",new C(X,Y));na&&this._internalGraphicsLayer.add(this._vertexGraphics[0])}else if(2===X.length){var Ca=this.createPointFromVertex(X[1]);
za=T.createPolyline([X],ra,fa);T=va?T.createPolygon([X],ra,fa,!0):T.createPolyline([X],ra,fa);this._vertexGraphics.length||(X=this.createPointFromVertex(X[0]),X=new C(X,sa),this._vertexGraphics.push(X));1===this._vertexGraphics.length?(X=this._vertexGraphics[0],Ca=new C(Ca,sa),this._removeLineGraphic(),this._removeActiveFillGraphic(),this._vertexGraphics.push(Ca),this._internalGraphicsLayer.remove(X),this._internalGraphicsLayer.add(X)):this._vertexGraphics[1].geometry=Ca;this._showActiveLineGraphic(za);
X=this._vertexGraphics[0];na&&(this._activeLineGraphic.symbol=qa,X.symbol=sa,this._internalGraphicsLayer.add(this._vertexGraphics[1]));this.createGraphic?this.createGraphic.set({geometry:T,symbol:Y}):this._set("createGraphic",new C(T,Y));this._internalGraphicsLayer.remove(X);this._internalGraphicsLayer.add(X)}else if(2<X.length){Ca=va?T.createPolygon([X],ra,fa,!0):T.createPolyline([X],ra,fa);"polygon"===U&&this._showFillGraphic(Ca);va=X.map(Ia=>Ia.slice());U=va.pop();const Da=[va[va.length-1],U];
U=T.createPolyline([va],ra,fa);T=T.createPolyline([Da],ra,fa);this._showLineGraphic(U);this._showActiveLineGraphic(T);for(T=0;T<va.length;T++)(U=this._vertexGraphics[T])?U.symbol=na||T!==this._vertexGraphics.length-1?sa:ta:(U=this.createPointFromVertex(X[T]),this._showVertexGraphic(U));na?(this._activeLineGraphic.symbol=qa,na=this.createPointFromVertex(X[X.length-1]),this._showVertexGraphic(na)):this._activeLineGraphic.symbol=ja;this.createGraphic?this.createGraphic.set({geometry:Ca,symbol:Y}):(this._removeCreateGraphic(),
this._set("createGraphic",new C(Ca,Y)));for(za of this._vertexGraphics)this._internalGraphicsLayer.remove(za),this._internalGraphicsLayer.add(za)}}};ea._drawSegmentGraphic=function(T,U,X,Y,fa){if(X.length){var ja=!(null==Y||!Y.centered);Y=!(null==Y||!Y.constrainToggle);var ta;1===X.length?this._removeCenterIndicatorGraphic():("rectangle"===U?ta=Y?T.createSquare(X,fa,ja):T.createRectangle(X,fa,ja):"circle"===U&&(ta=Y?T.createEllipse(X,fa,ja):T.createCircle(X,fa,ja,this.view.resolution)),t.isSome(ta)&&
ta.extent&&ta.extent.center&&this._showCenterIndicatorGraphic(ta.extent.center));ta?this.createGraphic?this.createGraphic.geometry=ta:(this._removeCreateGraphic(),this._set("createGraphic",new C(ta,this.polygonSymbol)),this._internalGraphicsLayer.add(this.createGraphic)):this._removeCreateGraphic()}};ea._showCenterIndicatorGraphic=function(T){this._centerIndicatorGraphic?this._centerIndicatorGraphic.geometry=T:(this._centerIndicatorGraphic=new C(T,this._centerSymbol),this._internalGraphicsLayer.add(this._centerIndicatorGraphic))};
ea._removeCenterIndicatorGraphic=function(){this._centerIndicatorGraphic&&(this._internalGraphicsLayer.remove(this._centerIndicatorGraphic),this._centerIndicatorGraphic.destroy(),this._centerIndicatorGraphic=null)};ea._showActiveLineGraphic=function(T){this._activeLineGraphic?(this._activeLineGraphic.set({geometry:T,symbol:this.activeLineSymbol}),this._internalGraphicsLayer.remove(this._activeLineGraphic)):this._activeLineGraphic=new C(T,this.activeLineSymbol);this._internalGraphicsLayer.add(this._activeLineGraphic)};
ea._showFillGraphic=function(T){this._activeFillGraphic?(this._activeFillGraphic.set({geometry:T,symbol:this.activeFillSymbol}),this._internalGraphicsLayer.remove(this._activeFillGraphic)):this._activeFillGraphic=new C(T,this.activeFillSymbol);this._internalGraphicsLayer.add(this._activeFillGraphic)};ea._showLineGraphic=function(T){this._lineGraphic?(this._lineGraphic.set({geometry:T,symbol:this.polylineSymbol}),this._internalGraphicsLayer.remove(this._lineGraphic)):this._lineGraphic=new C(T,this.polylineSymbol);
this._internalGraphicsLayer.add(this._lineGraphic)};ea._showVertexGraphic=function(T,U){T=new C(T,U?this.activeVertexSymbol:this.vertexSymbol);this._vertexGraphics.push(T);this._internalGraphicsLayer.add(T)};ea._resetCreateOperationGraphics=function(){this._removeActiveFillGraphic();this._removeLineGraphic();this._removeActiveLineGraphic();this._removeVertexGraphics()};ea._removeCreateGraphic=function(){this.createGraphic&&(this._internalGraphicsLayer.remove(this.createGraphic),this._set("createGraphic",
null))};ea._removeCreateOperationGraphics=function(){this._removeCenterIndicatorGraphic();this._removeActiveLineGraphic();this._removeActiveFillGraphic();this._removeLineGraphic();this._removeVertexGraphics()};ea._removeActiveLineGraphic=function(){this._activeLineGraphic&&(this._internalGraphicsLayer.remove(this._activeLineGraphic),this._activeLineGraphic.destroy(),this._activeLineGraphic=null)};ea._removeActiveFillGraphic=function(){this._activeFillGraphic&&(this._internalGraphicsLayer.remove(this._activeFillGraphic),
this._activeFillGraphic.destroy(),this._activeFillGraphic=null)};ea._removeLineGraphic=function(){this._lineGraphic&&(this._internalGraphicsLayer.remove(this._lineGraphic),this._lineGraphic.destroy(),this._lineGraphic=null)};ea._removeVertexGraphics=function(){this._vertexGraphics.length&&(this._internalGraphicsLayer.removeMany(this._vertexGraphics),this._vertexGraphics.forEach(T=>T.destroy()),this._vertexGraphics=[])};ea._removeDefaultLayer=function(){this._internalGraphicsLayer&&(this.view&&this.view.map&&
this.view.map.remove(this._internalGraphicsLayer),this._internalGraphicsLayer.destroy(),this._internalGraphicsLayer=null)};ea._operationHandleForCreateAction=function(T,U,X){return new S.OperationHandle({activeComponent:this._draw,tool:X,type:"create",onEnd:()=>{U.forEach(Y=>Y.remove());U.length=0;this._removeCreateOperationGraphics();this._internalGraphicsLayer&&this._internalGraphicsLayer.remove(this.createGraphic);this._displayDefaultCursor()},undo:()=>{T.undo();this._emitUndoEvent({graphics:[this.createGraphic],
tool:X})},redo:()=>{T.redo();this._emitRedoEvent({graphics:[this.createGraphic],tool:X})},canUndo:()=>T&&T.canUndo(),canRedo:()=>T&&T.canRedo()})};ea._isComponentGraphic=function(T){const {activeComponent:U}=this;return!T||t.isNone(U)?!1:T.attributes&&T.attributes.esriSketchTool?!0:("box"===U.type||"reshape"===U.type)&&U.isUIGraphic(T)};ea._snapLastPolygonVertexToFirst=function(T,U){if(!("polygon"!==T&&2>=U.length)){T=U[0];U=U[U.length-1];var X=this.view.toScreen(new O(T[0],T[1],this.view.spatialReference)),
Y=this.view.toScreen(new O(U[0],U[1],this.view.spatialReference));this._isWithinScreenDistance(X,Y,this._getVertexIntersectDistance())&&(U[0]=T[0],U[1]=T[1])}};ea._getVertexIntersectDistance=function(){return this.vertexSymbol&&"simple-marker"===this.vertexSymbol.type?n.pt2px(this.vertexSymbol.size)/2+3:3};ea._isWithinScreenDistance=function(T,U,X){const Y=T.x-U.x;T=T.y-U.y;return Math.sqrt(Y*Y+T*T)<=X};ea._displayPointerCursor=function(){this.view&&this.view.container&&"pointer"!==this.view.cursor&&
(this.view.cursor="pointer")};ea._displayGrabbingCursor=function(){this.view&&this.view.container&&"grabbing"!==this.view.cursor&&(this.view.cursor="grabbing")};ea._displayCrosshairCursor=function(){this.view&&this.view.container&&"crosshair"!==this.view.cursor&&(this.view.cursor="crosshair")};ea._displayDefaultCursor=function(){this.view&&this.view.container&&null!==this.view.cursor&&(this.view.cursor=null)};ea._logError=function(T,U,X){aa.error(new r(T,U,X))};ea._requireModule=function(){var T=
m._asyncToGenerator(function*(U){const X=new AbortController;this._moduleLoaderAbortController=X;U=yield U;return this._moduleLoaderAbortController!==X||X.signal.aborted?{requireError:"aborted"}:{module:U}});return function(U){return T.apply(this,arguments)}}();ea._emitUndoEvent=function(T){this.emit("undo",{...T,type:"undo"})};ea._emitRedoEvent=function(T){this.emit("redo",{...T,type:"redo"})};ea._emitDeleteEvent=function(T){this.emit("delete",{...T,type:"delete"})};ea.createPointFromVertex=function(T){return 2<
T.length?new O(T[0],T[1],T[2],this.view.spatialReference):new O(T[0],T[1],this.view.spatialReference)};ea.test=function(){return{operationHandle:this._operationHandle,defaultUpdateOptions:ha}};ea.wait=function(){return c.whenNotOnce(this,"updating")};ea._beginAsyncOperation=function(){this._numUpdating+=1;this.notifyChange("updating")};ea._endAsyncOperation=function(){--this._numUpdating;this.notifyChange("updating")};ea._disablePopupEnabled=function(T){var U;return"3d"!==(null==(U=this.view)?void 0:
U.type)||this.updateOnGraphicClick||t.isSome(T)&&T.toggleToolOnClick};ea._disablePopup=function(T){this._disablePopupEnabled(T)&&(T=this.view.popup)&&t.isNone(this._originalAutoOpenEnabled)&&(this._originalAutoOpenEnabled=T.autoOpenEnabled,T.autoOpenEnabled=!1)};ea._restorePopup=function(T){this._disablePopupEnabled(T)&&(T=this.view.popup)&&t.isSome(this._originalAutoOpenEnabled)&&(T.autoOpenEnabled=this._originalAutoOpenEnabled,this._originalAutoOpenEnabled=null)};ea._waitViewReady=function(){var T=
m._asyncToGenerator(function*(){this.view&&(t.abortMaybe(this._viewReadyAbortController),this._viewReadyAbortController=l.createAbortController(),yield l.whenOrAbort(c.whenOnce(this.view,"ready"),this._viewReadyAbortController.signal))});return function(){return T.apply(this,arguments)}}();m._createClass(ia,[{key:"_defaultUpdateTool",get:function(){return"3d"===this.view.type?"move":"transform"}},{key:"_draw",get:function(){return"ready"===this.state||"active"===this.state?new L({view:this.view}):
null}},{key:"updating",get:function(){return 0<this._numUpdating}},{key:"activeTool",get:function(){return this._operationHandle&&this._operationHandle.tool?this._operationHandle.tool:null}},{key:"activeComponent",get:function(){return this._operationHandle?this._operationHandle.activeComponent:null}},{key:"createGraphic",get:function(){return this.view&&"3d"===this.view.type&&t.isSome(this.activeComponent)&&"draw-3d"===this.activeComponent.type?t.unwrap(this.activeComponent.createGraphic):this._get("createGraphic")}},
{key:"defaultCreateOptions",set:function(T){this._set("defaultCreateOptions",{...ca,...T})}},{key:"defaultUpdateOptions",set:function(T){this._set("defaultUpdateOptions",{...ha,...T,reshapeOptions:{...ha.reshapeOptions,...null==T?void 0:T.reshapeOptions}})}},{key:"snappingOptions",set:function(T){t.isSome(this._snappingManager)&&(this._snappingManager.options=T);this._set("snappingOptions",T)}},{key:"state",get:function(){var T;const U=!(null==(T=this.view)||!T.ready||!this.layer);T=this._operationHandle;
return U&&T?"active":U?"ready":"disabled"}},{key:"view",get:function(){return this._get("view")},set:function(T){const U=this._get("view");if(U){const {container:X,map:Y}=U;X&&(U.cursor=null);Y&&Y.remove(this._internalGraphicsLayer);this._viewHandles.removeAll();this.cancel()}this._doUnnormalization=null!=T&&"3d"===T.type&&"global"===T.viewingMode;this._handles.remove("view-ready");T&&this._handles.add(c.when(T,"ready",X=>{this._viewHandles.removeAll();X&&this._viewHandles.add(this._generateViewHandles(T))},
!0),"view-ready");this._set("view",T)}}]);return ia}(u.EventedAccessor);v.__decorate([a.property({readOnly:!0})],B.prototype,"_draw",null);v.__decorate([a.property()],B.prototype,"updating",null);v.__decorate([a.property()],B.prototype,"_operationHandle",void 0);v.__decorate([a.property({readOnly:!0})],B.prototype,"activeTool",null);v.__decorate([a.property()],B.prototype,"activeFillSymbol",void 0);v.__decorate([a.property()],B.prototype,"activeLineSymbol",void 0);v.__decorate([a.property()],B.prototype,
"activeVertexSymbol",void 0);v.__decorate([a.property()],B.prototype,"allowDeleteKey",void 0);v.__decorate([a.property({readOnly:!0})],B.prototype,"createGraphic",null);v.__decorate([a.property()],B.prototype,"defaultCreateOptions",null);v.__decorate([a.property()],B.prototype,"defaultUpdateOptions",null);v.__decorate([a.property()],B.prototype,"layer",void 0);v.__decorate([a.property({types:A.symbolTypes})],B.prototype,"pointSymbol",void 0);v.__decorate([a.property({types:A.symbolTypes})],B.prototype,
"polygonSymbol",void 0);v.__decorate([a.property({types:A.symbolTypes})],B.prototype,"polylineSymbol",void 0);v.__decorate([a.property({type:Z,nonNullable:!0})],B.prototype,"snappingOptions",null);v.__decorate([a.property()],B.prototype,"_snappingManager",void 0);v.__decorate([a.property({readOnly:!0})],B.prototype,"state",null);v.__decorate([a.property({readOnly:!0})],B.prototype,"updateGraphics",void 0);v.__decorate([a.property()],B.prototype,"updateOnGraphicClick",void 0);v.__decorate([a.property({types:A.symbolTypes})],
B.prototype,"updatePointSymbol",void 0);v.__decorate([a.property({types:A.symbolTypes})],B.prototype,"updatePolygonSymbol",void 0);v.__decorate([a.property({types:A.symbolTypes})],B.prototype,"updatePolylineSymbol",void 0);v.__decorate([a.property({types:A.symbolTypes})],B.prototype,"vertexSymbol",void 0);v.__decorate([a.property({value:null})],B.prototype,"view",null);v.__decorate([a.property()],B.prototype,"cancel",null);v.__decorate([a.property()],B.prototype,"complete",null);v.__decorate([a.property()],
B.prototype,"delete",null);v.__decorate([a.property()],B.prototype,"create",null);v.__decorate([a.property()],B.prototype,"update",null);v.__decorate([a.property()],B.prototype,"undo",null);v.__decorate([a.property()],B.prototype,"redo",null);v.__decorate([a.property()],B.prototype,"canUndo",null);v.__decorate([a.property()],B.prototype,"canRedo",null);v.__decorate([a.property()],B.prototype,"toggleUpdateTool",null);return B=v.__decorate([e.subclass("esri.widgets.Sketch.SketchViewModel")],B)})},"esri/layers/GraphicsLayer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/jsonMap ../core/accessorSupport/decorators/subclass ./Layer ./mixins/BlendLayer ./mixins/ScaleRangeLayer ../support/GraphicsCollection ../symbols/support/ElevationInfo".split(" "),
function(d,m,v,B,C,A,q,g,r,u,x,y,t){B=function(l){function n(a){a=l.call(this,a)||this;a.elevationInfo=null;a.graphics=new y["default"];a.screenSizePerspectiveEnabled=!0;a.type="graphics";a.internal=!1;return a}d._inheritsLoose(n,l);var c=n.prototype;c.destroy=function(){this.removeAll();this.graphics.destroy()};c.add=function(a){this.graphics.add(a);return this};c.addMany=function(a){this.graphics.addMany(a);return this};c.removeAll=function(){this.graphics.removeAll();return this};c.remove=function(a){this.graphics.remove(a)};
c.removeMany=function(a){this.graphics.removeMany(a)};c.on=function(a,b){return l.prototype.on.call(this,a,b)};c.graphicChanged=function(a){this.emit("graphic-update",a)};return n}(u.BlendLayer(x.ScaleRangeLayer(r)));m.__decorate([v.property({type:t})],B.prototype,"elevationInfo",void 0);m.__decorate([v.property(y.graphicsCollectionProperty())],B.prototype,"graphics",void 0);m.__decorate([v.property({type:["show","hide"]})],B.prototype,"listMode",void 0);m.__decorate([v.property()],B.prototype,"screenSizePerspectiveEnabled",
void 0);m.__decorate([v.property({readOnly:!0})],B.prototype,"type",void 0);m.__decorate([v.property({constructOnly:!0})],B.prototype,"internal",void 0);return B=m.__decorate([g.subclass("esri.layers.GraphicsLayer")],B)})},"esri/views/3d/interactive/editingTools/isSupportedGraphicUtils":function(){define(["exports","../../../../core/has"],function(d,m){d.isSupportedGraphicResultMessage=function(v){switch(v){case 1:return"not owned by a graphics layer";case 2:return"no geometry";case 3:return"the geometry type is not supported";
case 4:return"the elevation mode is not supported";case 5:return"the symbol type is not supported"}return""};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/3d/interactive/editingTools/moveGraphic/isSupportedGraphic":function(){define(["exports","../../../../../core/has","../../../../../core/maybe","../../../../../support/elevationInfoUtils"],function(d,m,v,B){d.isSupportedGraphic=function(C){var A;if("graphics"!==(null==(A=C.layer)?void 0:A.type))return 1;if(v.isNone(C.geometry))return 2;
switch(C.geometry.type){case "polygon":case "point":case "polyline":case "mesh":break;case "multipoint":case "extent":return 3;default:return 3}return"on-the-ground"!==B.getGraphicEffectiveElevationMode(C)&&B.hasGraphicFeatureExpressionInfo(C)?4:0};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/support/elevationInfoUtils":function(){define(["exports","../core/maybe","../symbols/support/unitConversionUtils"],function(d,m,v){function B(u,x){return m.isNone(x)||!x.mode?u?"absolute-height":
"on-the-ground":x.mode}function C(u,x){return B(m.isSome(u)?u.hasZ:!1,x)}function A(u){const x=q(u);return C(u.geometry,x)}function q(u){return u.layer&&"elevationInfo"in u.layer?u.layer.elevationInfo:null}function g(u,x,y,t,l,n,c=null){if(!m.isNone(n)){var a=m.isSome(c)?c.mode:"absolute-height";if("on-the-ground"===a)return 0;a:{n=r(x,y,t,l,u,n);c=m.isSome(c)&&m.isSome(c.offset)?c.offset:0;switch(a){case "absolute-height":u=n-c;break a;case "relative-to-ground":u=n-(m.unwrapOr(u.elevationProvider.getElevation(x,
y,t,l,"ground"),0)+c);break a;case "relative-to-scene":u=n-(m.unwrapOr(u.elevationProvider.getElevation(x,y,t,l,"scene"),0)+c);break a}u=void 0}return u}}function r(u,x,y,t,l,n){const c=m.isSome(n.offset)?n.offset:0;switch(n.mode){case "absolute-height":return y+c;case "on-the-ground":return m.unwrapOr(l.elevationProvider.getElevation(u,x,0,t,"ground"),0);case "relative-to-ground":return y+m.unwrapOr(l.elevationProvider.getElevation(u,x,y,t,"ground"),0)+c;case "relative-to-scene":return y+m.unwrapOr(l.elevationProvider.getElevation(u,
x,y,t,"scene"),0)+c}}d.getConvertedElevation=function(u,x,y,t=null){return g(u,x.x,x.y,x.hasZ?x.z:0,x.spatialReference,y,t)};d.getConvertedElevationFromVector=function(u,x,y,t,l=null){return g(u,x[0],x[1],2<x.length?x[2]:0,y,t,l)};d.getEffectiveElevationMode=B;d.getGeometryEffectiveElevationMode=C;d.getGraphicEffectiveElevationInfo=function(u){var x=q(u);u=C(u.geometry,x);x=m.isSome(x)&&"on-the-ground"!==u?m.unwrapOr(x.offset,0)*v.getMetersPerUnit(m.unwrapOr(x.unit,"meters")):0;return{mode:u,offset:x}};
d.getGraphicEffectiveElevationMode=A;d.getZForElevationMode=function(u,x,y){if(!m.isNone(y)&&y.mode){var t=u.hasZ?u.z:0,l=m.isSome(y.offset)?y.offset:0;switch(y.mode){case "absolute-height":return t-l;case "on-the-ground":return 0;case "relative-to-ground":return u=m.unwrapOr(x.elevationProvider.getElevation(u.x,u.y,u.z,u.spatialReference,"ground"),0)+l,t-u;case "relative-to-scene":return u=m.unwrapOr(x.elevationProvider.getElevation(u.x,u.y,u.z,u.spatialReference,"scene"),0)+l,t-u}}};d.hasGraphicFeatureExpressionInfo=
function(u){if("on-the-ground"===A(u))return!1;u=q(u);u=m.isSome(u)&&u.featureExpressionInfo?u.featureExpressionInfo.expression:null;return!(!u||"0"===u)};d.zValueInAbsoluteHeightMode=r;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/3d/interactive/editingTools/reshapeGraphic/isSupportedGraphic":function(){define(["exports","../../../../../core/maybe","../../../../../geometry/Circle","../../../../../support/elevationInfoUtils"],function(d,m,v,B){function C(A){var q;return"graphics"!==
(null==(q=A.layer)?void 0:q.type)?{result:1,geometry:null}:m.isNone(A.geometry)?{result:2,geometry:null}:"on-the-ground"!==B.getGraphicEffectiveElevationMode(A)&&B.hasGraphicFeatureExpressionInfo(A)?{result:4,geometry:null}:"point"!==A.geometry.type&&"polyline"!==A.geometry.type&&("polygon"!==A.geometry.type||A.geometry instanceof v)?{result:3,geometry:null}:{result:0,geometry:A.geometry}}d.geometryOfSupportedGraphic=function(A){return C(A).geometry};d.isSupportedGraphic=function(A){return C(A).result};
Object.defineProperty(d,"__esModule",{value:!0})})},"esri/geometry/Circle":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/unitUtils ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/jsonMap ../core/accessorSupport/decorators/subclass ./Point ./Polygon ./projectionEllipsoid ./support/geodesicUtils ./support/webMercatorUtils ./support/WKIDUnitConversion".split(" "),function(d,m,v,B,C,A,q,g,r,u,x,y,t,
l,n){var c;C=c=function(a){function b(...e){e=a.call(this,...e)||this;e.center=null;e.geodesic=!1;e.numberOfPoints=60;e.radius=1E3;e.radiusUnit="meters";return e}d._inheritsLoose(b,a);var k=b.prototype;k.normalizeCtorArgs=function(e,h){if(!e||!e.center){if(e&&e.rings)return a.prototype.normalizeCtorArgs.call(this,e,h);e={center:e}}return{...a.prototype.normalizeCtorArgs.call(this),...e,...h}};k.initialize=function(){var e=this.center;const h=this.numberOfPoints;this.hasZ=e&&e.hasZ;if(0===this.rings.length&&
e){var w=v.convertUnit(this.radius,this.radiusUnit,"meters"),D=e.spatialReference,p="geographic";if(D.isWebMercator)p="webMercator";else if(null!=n[D.wkid]||D.wkt&&0===D.wkt.indexOf("PROJCS"))p="projected";if(this.geodesic){let z;switch(p){case "webMercator":z=l.webMercatorToGeographic(e);break;case "projected":console.error("Creating a geodesic circle requires the center to be specified in web mercator or geographic coordinate system");break;case "geographic":z=e}e=this._createGeodesicCircle(z,w,
h);"webMercator"===p&&(e=l.geographicToWebMercator(e))}else{let z;"webMercator"===p||"projected"===p?z=w/this._convert2Meters(1,e.spatialReference):"geographic"===p&&(z=v.lengthToDegrees(w,"meters",y.getReferenceEllipsoid(e.spatialReference).radius));e=this._createPlanarCircle(e,z,h)}this.spatialReference=e.spatialReference;this.addRing(e.rings[0])}};k.clone=function(){const {center:e,numberOfPoints:h,radius:w,radiusUnit:D,geodesic:p}=this;return new c({center:e.clone(),numberOfPoints:h,radius:w,
radiusUnit:D,geodesic:p})};k._createGeodesicCircle=function(e,h,w){let D=0;const p=[];for(;360>D;){const z=[0,0];t.directGeodeticSolver(z,[e.x,e.y],D,h);this.hasZ&&z.push(e.z);p.push(z);D+=360/w}p.push(p[0]);return new x(p)};k._createPlanarCircle=function(e,h,w){const D=[],p=2*Math.PI/w;for(let f=0;f<w;++f){var z=p*f;z=[e.x+Math.cos(-z)*h,e.y+Math.sin(-z)*h];this.hasZ&&z.push(e.z);D.push(z)}D.push(D[0]);return new x({spatialReference:e.spatialReference,rings:[D]})};k._convert2Meters=function(e,h){if(null!=
n[h.wkid])h=n.values[n[h.wkid]];else{h=h.wkt;const w=h.lastIndexOf(",")+1,D=h.lastIndexOf("]]");h=parseFloat(h.substring(w,D))}return e*h};return b}(x);m.__decorate([B.property({type:u})],C.prototype,"center",void 0);m.__decorate([B.property()],C.prototype,"geodesic",void 0);m.__decorate([B.property()],C.prototype,"numberOfPoints",void 0);m.__decorate([B.property()],C.prototype,"radius",void 0);m.__decorate([B.property()],C.prototype,"radiusUnit",void 0);return C=c=m.__decorate([r.subclass("esri.geometry.Circle")],
C)})},"esri/geometry/support/geodesicUtils":function(){define("exports ../../geometry ../../core/Error ../../core/unitUtils ./geodesicConstants ../Polyline ../Polygon ../Point ../SpatialReference".split(" "),function(d,m,v,B,C,A,q,g,r){function u(a){if(!a)return null;if(a.isGeographic&&a.wkid){var b=C.spheroids[a.wkid];if(b)return b}return a.wkt&&((a=C.WKT_SPHEROID_REGEX.exec(a.wkt))&&2===a.length?(b=a[1].split(","),!b||3>b.length?a=null:(a=parseFloat(b[1]),b=parseFloat(b[2]),a=isNaN(a)||isNaN(b)?
null:{a,f:0===b?0:1/b})):a=null,a)?a:null}function x(a){a=u(a||r.WGS84);if("b"in a&&"eSq"in a&&"radius"in a)return a;const b=a.a*(1-a.f);return Object.assign(a,{b,eSq:1-(b/a.a)**2,radius:(2*a.a+b)/3,densificationRatio:1E4/((2*a.a+b)/3)})}function y(a,b,k){const {a:e,eSq:h}=x(k);k=Math.sqrt(h);const w=Math.sin(b[1]*C.toRadians);b=e*b[0]*C.toRadians;k=0<h?e*(1-h)*(w/(1-h*w*w)-1/(2*k)*Math.log((1-k*w)/(1+k*w)))*.5:e*w;a[0]=b;a[1]=k;return a}function t(a){return null!==u(a)}function l(a,b){if("polyline"!==
a.type&&"polygon"!==a.type)throw new v("geodesic-densify:invalid-geometry","the input geometry is neither polyline nor polygon");const {spatialReference:k}=a;if(!t(k))throw new v("geodesic-densify:invalid-spatial-reference","the input geometry spatial reference is not supported");var e="polyline"===a.type?a.paths:a.rings;const h=[],w=[0,0],D={distance:null};for(const f of e){e=[];h.push(e);e.push([f[0][0],f[0][1]]);var p=f[0][0],z=f[0][1];let E,F;for(let L=0;L<f.length-1;L++){E=f[L+1][0];F=f[L+1][1];
if(p===E&&z===F)continue;const W=[p,z];c(D,[p,z],[E,F],k);const {azimuth:M,distance:P}=D;p=P/b;if(1<p){for(z=1;z<=p-1;z++)n(w,W,M,z*b,k),e.push(w.slice(0));n(w,W,M,(P+Math.floor(p-1)*b)/2,k);e.push(w.slice(0))}n(w,W,M,P,k);e.push(w.slice(0));p=w[0];z=w[1]}}return"polyline"===a.type?new A({paths:h,spatialReference:k}):new q({rings:h,spatialReference:k})}function n(a,b,k,e,h){const w=b[0]*C.toRadians;b=b[1]*C.toRadians;k*=C.toRadians;const {a:D,b:p,f:z}=x(h);h=Math.sin(k);k=Math.cos(k);var f=(1-z)*
Math.tan(b);b=1/Math.sqrt(1+f*f);const E=f*b,F=Math.atan2(f,k);f=b*h;const L=f*f;var W=1-L,M=W*(D*D-p*p)/(p*p);const P=1+M/16384*(4096+M*(-768+M*(320-175*M))),V=M/1024*(256+M*(-128+M*(74-47*M)));M=e/(p*P);let H=2*Math.PI,R,Z,N,S;for(;1E-12<Math.abs(M-H);)N=Math.cos(2*F+M),R=Math.sin(M),Z=Math.cos(M),S=V*R*(N+V/4*(Z*(-1+2*N*N)-V/6*N*(-3+4*R*R)*(-3+4*N*N))),H=M,M=e/(p*P)+S;e=E*R-b*Z*k;W=z/16*W*(4+z*(4-3*W));e=Math.atan2(E*Z+b*R*k,(1-z)*Math.sqrt(L+e*e))/C.toRadians;a[0]=(w+(Math.atan2(R*h,b*Z-E*R*k)-
(1-W)*z*f*(M+W*R*(N+W*Z*(-1+2*N*N)))))/C.toRadians;a[1]=e;return a}function c(a,b,k,e){var h=b[0]*C.toRadians;b=b[1]*C.toRadians;var w=k[0]*C.toRadians;k=k[1]*C.toRadians;const {a:D,b:p,f:z,radius:f}=x(e),E=w-h;var F=Math.atan((1-z)*Math.tan(b)),L=Math.atan((1-z)*Math.tan(k));e=Math.sin(F);F=Math.cos(F);const W=Math.sin(L);L=Math.cos(L);let M=1E3,P=E,V,H,R;let Z,N,S;do{var O=Math.sin(P);var J=Math.cos(P);R=Math.sqrt(L*O*L*O+(F*W-e*L*J)*(F*W-e*L*J));if(0===R)return a.distance=0,a.azimuth=void 0,a.reverseAzimuth=
void 0,a;J=e*W+F*L*J;Z=Math.atan2(R,J);N=F*L*O/R;H=1-N*N;O=J-2*e*W/H;isNaN(O)&&(O=0);S=z/16*H*(4+z*(4-3*H));V=P;P=E+(1-S)*z*N*(Z+S*R*(O+S*J*(-1+2*O*O)))}while(1E-12<Math.abs(P-V)&&0<--M);if(0===M)return e=Math.acos(Math.sin(b)*Math.sin(k)+Math.cos(b)*Math.cos(k)*Math.cos(w-h))*f,h=w-h,a.azimuth=Math.atan2(Math.sin(h)*Math.cos(k),Math.cos(b)*Math.sin(k)-Math.sin(b)*Math.cos(k)*Math.cos(h))/C.toRadians,a.distance=e,a.reverseAzimuth=void 0,a;h=H*(D*D-p*p)/(p*p);b=h/1024*(256+h*(-128+h*(74-47*h)));w=
Math.atan2(F*Math.sin(P),F*W*Math.cos(P)-e*L);a.azimuth=Math.atan2(L*Math.sin(P),F*W-e*L*Math.cos(P))/C.toRadians;a.distance=p*(1+h/16384*(4096+h*(-768+h*(320-175*h))))*(Z-b*R*(O+b/4*(J*(-1+2*O*O)-b/6*O*(-3+4*R*R)*(-3+4*O*O))));a.reverseAzimuth=w/C.toRadians;return a}d.directGeodeticSolver=n;d.geodesicAreas=function(a,b="square-meters"){if(a.some(w=>!t(w.spatialReference)))throw new v("geodesic-areas:invalid-spatial-reference","the input geometries spatial reference is not supported");const k=[];
for(var e=0;e<a.length;e++){var h=a[e];const {radius:w,densificationRatio:D}=x(h.spatialReference);k.push(l(h,w*D))}a=[];e=[0,0];h=[0,0];for(let w=0;w<k.length;w++){const {rings:D,spatialReference:p}=k[w];let z=0;for(let f=0;f<D.length;f++){const E=D[f];y(e,E[0],p);y(h,E[E.length-1],p);let F=h[0]*e[1]-e[0]*h[1];for(let L=0;L<E.length-1;L++)y(e,E[L+1],p),y(h,E[L],p),F+=h[0]*e[1]-e[0]*h[1];z+=F}z=B.convertUnit(z,"square-meters",b);a.push(z/-2)}return a};d.geodesicDensify=l;d.geodesicDistance=function(a,
b,k="meters"){if(!a||!b)throw new v("geodesic-distance:missing-parameters","one or both input parameters are missing");if(!a.spatialReference||!b.spatialReference)throw new v("geodesic-distance:invalid-parameters","one or both input points do not have a spatial reference");if(!a.spatialReference.equals(b.spatialReference))throw new v("geodesic-distance:invalid-parameters","spatial references of input parameters do not match");const {spatialReference:e}=a;if(!t(e))throw new v("geodesic-distance:not-supported",
"input geometry spatial reference is not supported");if(a.equals(b))return{distance:0,azimuth:0,reverseAzimuth:0};const h={distance:null};c(h,[a.x,a.y],[b.x,b.y],e);h.distance=B.convertUnit(h.distance,"meters",k);return h};d.geodesicLengths=function(a,b="meters"){if(!a)throw new v("geodesic-lengths:invalid-geometries","the input geometries type is not supported");if(a.some(h=>!t(h.spatialReference)))throw new v("geodesic-lengths:invalid-spatial-reference","the input geometries spatial reference is not supported");
const k=[];for(let h=0;h<a.length;h++){var e=a[h];const {spatialReference:w}=e;e="polyline"===e.type?e.paths:e.rings;let D=0;for(let p=0;p<e.length;p++){const z=e[p];let f=0;for(let E=1;E<z.length;E++){const F=z[E-1][0],L=z[E][0],W=z[E-1][1],M=z[E][1];if(W!==M||F!==L){const P={distance:null};c(P,[F,W],[L,M],w);f+=P.distance}}D+=f}D=B.convertUnit(D,"meters",b);k.push(D)}return k};d.inverseGeodeticSolver=c;d.isSupported=t;d.pointFromDistance=function(a,b,k){if(!a||null==b||null==k)throw new v("point-from-distance:missing-parameters",
"one or more input parameters are missing or undefined");if(0>k||360<k)throw new v("point-from-distance:-of-bounds","azimuth is restricted to angles between, and including, 0\u00b0 to 360\u00b0 degrees");if(!a.spatialReference)throw new v("point-from-distance:missing-spatial-reference","the input point must have a spatial reference");const {spatialReference:e}=a;if(!t(e))throw new v("geodesic-distance:not-supported","input geometry spatial reference is not supported");const h=[0,0];n(h,[a.x,a.y],
k,b,e);return new g({x:h[0],y:h[1],spatialReference:e})};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/geometry/support/geodesicConstants":function(){define(["exports","./Ellipsoid"],function(d,m){const v=Math.PI/180;var B=m.earth.radius;const C=m.earth.eccentricitySquared;B={a1:B*C,a2:B*C*B*C,a3:B*C*C/2,a4:B*C*B*C*2.5,a5:B*C+B*C*C/2,a6:1-C};m={4267:{a:6378206.4,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:m.earth.radius,f:m.earth.flattening},104900:{a:2439700,f:0},104901:{a:6051E3,
f:0},104902:{a:6051800,f:0},104903:{a:m.moon.radius,f:m.moon.flattening},104904:{a:3393400,f:.005207166853303471},104905:{a:m.mars.radius,f:m.mars.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492E3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1E4,f:0},104912:{a:2409300,f:0},104913:{a:15E3,f:0},104914:{a:4E4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85E3,f:0},104918:{a:1821460,f:0},104919:{a:5E3,f:0},104920:{a:12E3,f:0},104921:{a:3E4,
f:3},104922:{a:18E3,f:0},104923:{a:14E3,f:0},104924:{a:49300,f:0},104925:{a:60268E3,f:.09796243445941462},104926:{a:16E3,f:0},104927:{a:9500,f:0},104928:{a:56E4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16E3,f:0},104932:{a:133E3,f:0},104933:{a:718E3,f:0},104934:{a:888E3,f:0},104935:{a:1986300,f:0},104936:{a:1E4,f:0},104937:{a:41900,f:0},104938:{a:11E4,f:0},104939:{a:50100,f:0},104940:{a:764E3,f:0},104941:{a:11E3,f:0},104942:{a:529800,f:0},104943:{a:2575E3,f:0},104944:{a:25559E3,f:.022927344575296365},
104945:{a:578900,f:0},104946:{a:33E3,f:0},104947:{a:21E3,f:0},104948:{a:13E3,f:0},104949:{a:31E3,f:0},104950:{a:27E3,f:0},104951:{a:42E3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15E3,f:0},104955:{a:54E3,f:0},104956:{a:77E3,f:0},104957:{a:27E3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764E3,f:.01708124697141011},104961:{a:74E3,f:0},104962:{a:79E3,f:0},104963:{a:104E3,f:.14423076923076922},104964:{a:29E3,f:0},104965:{a:17E4,f:0},104966:{a:208E3,f:0},104967:{a:4E4,
f:0},104968:{a:1352600,f:0},104969:{a:1195E3,f:0},104970:{a:593E3,f:0},104971:{a:m.mars.radius,f:0},104972:{a:47E4,f:0},104973:{a:255E3,f:0},104974:{a:2439400,f:0}};d.WKT_SPHEROID_REGEX=/SPHEROID\[([^\]]+)]/i;d.earthEllipsoidConstants=B;d.spheroids=m;d.toRadians=v;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/3d/interactive/editingTools/transformGraphic/isSupportedGraphic":function(){define(["exports","../../../../../core/has","../../../../../core/maybe","../../../../../support/elevationInfoUtils"],
function(d,m,v,B){d.isSupportedGraphic=function(C){var A;if("graphics"!==(null==(A=C.layer)?void 0:A.type))return 1;if(v.isNone(C.geometry))return 2;switch(C.geometry.type){case "point":break;case "polygon":case "polyline":case "multipoint":case "extent":case "mesh":return 0;default:return 3}return(A=v.isSome(C.symbol)&&"point-3d"===C.symbol.type&&C.symbol.symbolLayers)&&0<A.length&&A.some(q=>"object"===q.type)?"on-the-ground"!==B.getGraphicEffectiveElevationMode(C)&&B.hasGraphicFeatureExpressionInfo(C)?
4:0:5};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/draw/Draw":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/has ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../chunks/MultipointDrawAction ./PointDrawAction ./PolygonDrawAction ./PolylineDrawAction ./SegmentDrawAction".split(" "),function(d,
m,v,B,C,A,q,g,r,u,x,y,t,l){v=function(n){function c(){var b=n.apply(this,arguments)||this;b.activeAction=null;b.type="draw";b.view=null;return b}d._inheritsLoose(c,n);var a=c.prototype;a.destroy=function(){this.activeAction&&(this.activeAction.destroy(),this.activeAction=null)};a.create=function(b,k){this.reset();k={view:this.view,...k};switch(b){case "point":k.editGeometryType="point";this.activeAction=new x.PointDrawAction(k);break;case "polyline":k.editGeometryType="polyline";this.activeAction=
new t.PolylineDrawAction(k);break;case "multipoint":k.editGeometryType="polygon";this.activeAction=new u.MultipointDrawAction(k);break;case "polygon":k.editGeometryType="polygon";this.activeAction=new y.PolygonDrawAction(k);break;case "rectangle":case "circle":case "ellipse":case "triangle":k.editGeometryType="polygon",this.activeAction=new l.SegmentDrawAction(k)}return this.activeAction};a.complete=function(){this.activeAction&&this.activeAction.complete();this.activeAction=null};a.reset=function(){this.activeAction&&
this.activeAction.destroy();this.activeAction=null};return c}(v);m.__decorate([C.property()],v.prototype,"activeAction",void 0);m.__decorate([C.property({readOnly:!0})],v.prototype,"type",void 0);m.__decorate([C.property()],v.prototype,"view",void 0);return v=m.__decorate([r.subclass("esri.views.draw.Draw")],v)})},"esri/chunks/MultipointDrawAction":function(){define("exports ./_rollupPluginBabelHelpers ./tslib.es6 ../geometry ../core/Handles ../core/maybe ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/jsonMap ../core/accessorSupport/decorators/subclass ../views/draw/DrawAction ../views/draw/input/DrawEvents ../views/input/InputManager ../views/interactive/keybindings ../views/support/screenUtils ../geometry/Point".split(" "),
function(d,m,v,B,C,A,q,g,r,u,x,y,t,l,n,c,a,b){d.MultipointDrawAction=function(k){function e(w){w=k.call(this,w)||this;w._popVertexOnPointerMove=!1;w._addVertexOnPointerUp=!1;w._activePointerId=null;w._viewHandles=new C;w._undoRedoHandles=new C;return w}m._inheritsLoose(e,k);var h=e.prototype;h.initialize=function(){this._addViewHandles();this._addUndoRedoHandles()};h.destroy=function(){this._removeViewHandles();this._viewHandles.destroy();this._removeUndoRedoHandles();this._undoRedoHandles.destroy();
this.emit("destroy")};h.undo=function(){k.prototype.undo.call(this);this.notifyChange("vertices")};h.redo=function(){k.prototype.redo.call(this);this.notifyChange("vertices")};h.complete=function(){this._completeDrawing()};h._addViewHandles=function(){this._removeViewHandles();this._viewHandles.add([this.view.on("click",w=>{w.stopPropagation()},n.ViewEventPriorities.TOOL),this.view.on("pointer-down",w=>{this._shouldHandlePointerEvent(w)&&(this._snappingTask=A.abortMaybe(this._snappingTask),this._activePointerId=
w.pointerId,this._addVertexOnPointerUp=!0,this._cursorScreenPoint=a.createScreenPointFromEvent(w),"touch"===w.pointerType&&this._updateCursor(w.native))},n.ViewEventPriorities.TOOL),this.view.on("pointer-move",w=>{this._popVertexOnPointerMove&&(this.undo(),this._popVertexOnPointerMove=!1);this._snappingTask=A.abortMaybe(this._snappingTask);this._cursorScreenPoint=a.createScreenPointFromEvent(w);"touch"!==w.pointerType&&this._updateCursor(w.native)},n.ViewEventPriorities.TOOL),this.view.on("pointer-drag",
w=>{this._shouldHandlePointerEvent(w)&&(this._snappingTask=A.abortMaybe(this._snappingTask),this._addVertexOnPointerUp=!1)},n.ViewEventPriorities.TOOL),this.view.on("pointer-up",w=>{this._shouldHandlePointerEvent(w)&&(this._snappingTask=A.abortMaybe(this._snappingTask),this._activePointerId=null,this._addVertexOnPointerUp?this._vertexAddHandler(w):this._updateCursor(w.native,"touch"===w.pointerType))},n.ViewEventPriorities.TOOL),this.view.on("drag",["Shift"],w=>{w.stopPropagation()},n.ViewEventPriorities.TOOL),
this.view.on("double-click",w=>{w.stopPropagation();this._drawCompleteHandler(w)},n.ViewEventPriorities.TOOL),this.view.on("double-click",["Control"],w=>{w.stopPropagation();this._drawCompleteHandler(w)},n.ViewEventPriorities.TOOL),this.view.on("key-down",w=>{const {key:D,repeat:p}=w;D===c.SKETCH_KEYS.vertexAdd&&!p&&this._cursorScreenPoint?(w.stopPropagation(),this._snappingTask=A.abortMaybe(this._snappingTask),this._vertexAddHandler(w)):D===c.SKETCH_KEYS.complete&&!p&&this._cursorScreenPoint&&2<
this.vertices.length?(w.stopPropagation(),this._snappingTask=A.abortMaybe(this._snappingTask),this._vertexAddHandler(w),this._drawCompleteHandler(w)):D!==c.SKETCH_KEYS.undo||this.interactiveUndoDisabled||p?D!==c.SKETCH_KEYS.redo||this.interactiveUndoDisabled||p?D!==c.SKETCH_KEYS.pan||p||w.stopPropagation():(w.stopPropagation(),this.redo()):(w.stopPropagation(),this.undo())},n.ViewEventPriorities.TOOL),this.view.on("key-up",w=>{w.key===c.SKETCH_KEYS.pan&&w.stopPropagation()},n.ViewEventPriorities.TOOL)])};
h._addUndoRedoHandles=function(){this._removeUndoRedoHandles();this._undoRedoHandles.add([this._editGeometry.on("vertex-remove",w=>{this.notifyChange("vertices");if("undo"===w.operation){const D=this._nativeEventHistory.undoStack.pop();this._nativeEventHistory.redoStack.push(D);const p=[...this._committedVertices];A.isSome(this._stagedVertex)&&p.push(this._coordinateHelper.pointToArray(this._stagedVertex));this.emit("undo",new l.VertexRemoveEvent(this.view,D,w.vertices[0].index,p))}}),this._editGeometry.on("vertex-add",
w=>{this.notifyChange("vertices");if("apply"===w.operation)w=new l.VertexAddEvent(this.view,this._nativeEventHistory.undoStack[this._nativeEventHistory.undoStack.length],this._committedVertices.length-1,this.vertices),this.emit("vertex-add",w),w.defaultPrevented&&(this._popVertexOnPointerMove=!0);else if("redo"===w.operation){const D=this._nativeEventHistory.redoStack.pop();this._nativeEventHistory.undoStack.push(D);const p=[...this._committedVertices];A.isSome(this._stagedVertex)&&p.push(this._coordinateHelper.pointToArray(this._stagedVertex));
this.emit("redo",new l.VertexAddEvent(this.view,D,w.vertices[0].index,p))}})])};h._removeViewHandles=function(){this._viewHandles.removeAll()};h._removeUndoRedoHandles=function(){this._undoRedoHandles.removeAll()};h._addVertex=function(w,D){w=this._coordinateHelper.fromArray(w);this._isDuplicateOfLastVertex(w)||(this._lastVertexUnsnapped=this._stagedVertexUnsnapped,this._popCursorVertex(),this._editGeometry.appendVertex(w),D=D||new Event("placeholder"),this._nativeEventHistory.undoStack.push(D))};
h._updateCursor=function(w,D=!1){this._popCursorVertex();if(this._cursorScreenPoint){var p=this.getCoordsAndPointFromScreenPoint(this._cursorScreenPoint);if(A.isSome(p)&&!D){this._pushCursorVertex(p.vertex);const z=()=>new l.CursorUpdateEvent(this.view,w,this._activeComponent.vertices.length,this.vertices,A.isSome(this._stagedVertex)?new b(this._stagedVertex):null);this.emit("cursor-update",z());A.isSome(this._snappingTask)&&this._snappingTask.promise.then(f=>{f.valid&&this.emit("cursor-update",z())},
()=>{})}}};h._completeDrawing=function(w){this._activePointerId=null;this._popCursorVertex();this._snappingTask=A.abortMaybe(this._snappingTask);A.isSome(this._snappingManager)&&this._snappingManager.doneSnapping();2>this.vertices.length||(w=new l.DrawCompleteEvent(w,this.vertices),this.emit("draw-complete",w),w.defaultPrevented||this._removeViewHandles())};h._shouldHandlePointerEvent=function(w){return("mouse"!==w.pointerType||0===w.button)&&(A.isNone(this._activePointerId)||this._activePointerId===
w.pointerId)};return e}(t);d.MultipointDrawAction=v.__decorate([y.subclass("esri.views.draw.MultipointDrawAction")],d.MultipointDrawAction);v=Object.freeze({__proto__:null,get MultipointDrawAction(){return d.MultipointDrawAction}});d.MultipointDrawAction$1=v})},"esri/views/draw/DrawAction":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Evented ../../core/maybe ../../core/promiseUtils ../../core/screenUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../layers/GraphicsLayer ../../layers/graphics/dehydratedFeatures ../2d/interactive/SnappingVisualizer2D ../interactive/coordinateHelper ../interactive/editGeometry/EditGeometry ../interactive/editGeometry/EditGeometryHelper ../interactive/snapping/SnappingContext".split(" "),
function(d,m,v,B,C,A,q,g,r,u,x,y,t,l,n,c,a,b,k){var e;v=e=function(D){function p(f){var E;var F=D.call(this,f)||this;F._hasZ=null;F._cursorScreenPoint=null;F._snappingTask=null;F._stagedVertex=null;F._stagedVertexUnsnapped=null;F._lastVertexUnsnapped=null;F._nativeEventHistory={undoStack:[],redoStack:[]};F.interactiveUndoDisabled=!1;F.history=[];F.redoHistory=[];F.snapToScene=!1;F.view=null;F.elevationInfo=null;F.defaultZ=0;F._coordinateHelper=c.createCoordinateHelper(f.hasZ,!1,f.view.spatialReference,
"local");F._snappingManager=f.snappingManager;F._editGeometry=new b.EditGeometryHelper(new a.EditGeometry(F._coordinateHelper),null!=(E=f.editGeometryType)?E:"polygon");F._snappingGraphicsLayer=new t({id:e.SNAPPING_GRAPHICS_LAYER_ID,listMode:"hide",internal:!0});F._snappingContext=new k.SnappingContext({geometry:F._editGeometry,elevationInfo:{mode:"on-the-ground",offset:0},pointer:"mouse",visualizer:new n.SnappingVisualizer2D(F._snappingGraphicsLayer)});F._activeComponent=new a.Component(F._editGeometry.editGeometry);
F._editGeometry.editGeometry.components.push(F._activeComponent);return F}d._inheritsLoose(p,D);var z=p.prototype;z.initialize=function(){"2d"===this.view.type&&this.view.map.layers.add(this._snappingGraphicsLayer)};z.destroy=function(){this._snappingTask=B.abortMaybe(this._snappingTask);this.view.map.layers.remove(this._snappingGraphicsLayer);this._snappingGraphicsLayer.destroy();B.isSome(this._snappingManager)&&this._snappingManager.doneSnapping();this._editGeometry.destroy()};z.canUndo=function(){return this._editGeometry.editGeometry.canUndo};
z.canRedo=function(){return this._editGeometry.editGeometry.canRedo};z.undo=function(){this.canUndo()&&this._editGeometry.undo()};z.redo=function(){this.canRedo()&&this._editGeometry.redo()};z.getCoordsFromScreenPoint=function(f){f=this.screenToMap(f);return B.isSome(f)?f.hasZ?[f.x,f.y,f.z]:[f.x,f.y]:null};z.getCoordsAndPointFromScreenPoint=function(f){f=this.screenToMap(f);return B.isSome(f)?f.hasZ?{vertex:[f.x,f.y,f.z],mapPoint:f}:{vertex:[f.x,f.y],mapPoint:f}:null};z._pushCursorVertex=function(f){var E=
this;const F=l.makeDehydratedPoint(f[0],f[1],null,this.view.spatialReference);this._stagedVertexUnsnapped=F;B.isNone(this._snappingManager)?this._stagedVertex=F:(this._stagedVertex=this._snappingManager.update(F,this._snappingContext),this._snappingTask=C.createTask(function(){var L=d._asyncToGenerator(function*(W){return B.isSome(E._snappingManager)?(W=yield E._snappingManager.snap(F,E._snappingContext,W),W.valid&&(E._stagedVertex=W.apply(),E.notifyChange("vertices")),W):null});return function(W){return L.apply(this,
arguments)}}()))};z._popCursorVertex=function(){this._stagedVertexUnsnapped=this._stagedVertex=null;this.notifyChange("vertices")};z.getGeometryZValue=function(){return this.defaultZ};z.screenToMap=function(f){var E=null;"3d"===this.view.type?this.hasZ?(E=B.unwrapOr(this.elevationInfo,h),E=this.view.sceneIntersectionHelper.intersectElevationFromScreen(A.createScreenPointArray(f.x,f.y),E,this.getGeometryZValue())):(E=B.unwrapOr(this.elevationInfo,w),E=this.view.sceneIntersectionHelper.intersectElevationFromScreen(A.createScreenPointArray(f.x,
f.y),E,0),B.isSome(E)&&(E.z=void 0)):(E=this.view.toMap(f),B.isSome(E)&&(E.z=this.hasZ?this.getGeometryZValue():void 0));return E};z._isDuplicateOfLastVertex=function(f){const E=this._editGeometry.editGeometry.components[0].getLastVertex();if(B.isSome(E)&&f[0]===E[0]&&f[1]===E[1])return!0;const {x:F,y:L}=this._coordinateHelper.createDehydratedPoint(f);return B.isSome(this._lastVertexUnsnapped)&&F===this._lastVertexUnsnapped.x&&L===this._lastVertexUnsnapped.y?!0:!1};z._vertexAddHandler=function(f){const E=
B.isSome(this._stagedVertex)?this._coordinateHelper.pointToArray(this._stagedVertex):this.getCoordsFromScreenPoint(this._cursorScreenPoint);B.isSome(E)&&this._addVertex(E,f.native)};z._drawCompleteHandler=function(f){this._completeDrawing(f.native)};d._createClass(p,[{key:"_committedVertices",get:function(){return this._editGeometry.editGeometry.components[0].vertices.map(f=>f.pos)}},{key:"vertices",get:function(){return B.isSome(this._stagedVertex)?[...this._committedVertices,this._coordinateHelper.pointToArray(this._stagedVertex)]:
this._committedVertices}},{key:"hasZ",get:function(){return B.isSome(this._hasZ)?this._hasZ:"3d"===this.view.type},set:function(f){this._hasZ=f;this.notifyChange("hasZ")}}]);return p}(v.EventedAccessor);v.SNAPPING_GRAPHICS_LAYER_ID="DrawAction-snapping-graphics-layer";m.__decorate([q.property({readOnly:!0})],v.prototype,"vertices",null);m.__decorate([q.property({type:Boolean,nonNullable:!0})],v.prototype,"interactiveUndoDisabled",void 0);m.__decorate([q.property({readOnly:!0})],v.prototype,"history",
void 0);m.__decorate([q.property({readOnly:!0})],v.prototype,"redoHistory",void 0);m.__decorate([q.property()],v.prototype,"snapToScene",void 0);m.__decorate([q.property()],v.prototype,"view",void 0);m.__decorate([q.property()],v.prototype,"elevationInfo",void 0);m.__decorate([q.property({nonNullable:!0})],v.prototype,"defaultZ",void 0);m.__decorate([q.property()],v.prototype,"hasZ",null);v=e=m.__decorate([y.subclass("esri.views.draw.DrawAction")],v);const h={mode:"absolute-height",offset:0},w={mode:"on-the-ground",
offset:0};return v})},"esri/layers/graphics/dehydratedFeatures":function(){define("exports ../../core/byteSizeEstimations ../../core/has ../../core/maybe ../../core/typedArrayUtil ../../core/uid ../../geometry/SpatialReference ../../geometry/support/aaBoundingBox ../../geometry/support/aaBoundingRect ../../geometry/support/quantizationUtils ../../geometry/support/typeUtils ../support/Field ./dehydratedFeatureComparison".split(" "),function(d,m,v,B,C,A,q,g,r,u,x,y,t){function l(e,h,w){if(!e)return null;
switch(h){case "point":return{x:e.x,y:e.y,z:e.z,m:e.m,hasZ:null!=e.z,hasM:null!=e.m,type:"point",spatialReference:w};case "polyline":return{paths:e.paths,hasZ:!!e.hasZ,hasM:!!e.hasM,type:"polyline",spatialReference:w};case "polygon":return{rings:e.rings,hasZ:!!e.hasZ,hasM:!!e.hasM,type:"polygon",spatialReference:w};case "multipoint":return{points:e.points,hasZ:!!e.hasZ,hasM:!!e.hasM,type:"multipoint",spatialReference:w}}}function n(e){if(B.isNone(e))return 0;let h=32;switch(e.type){case "point":h+=
42;break;case "polyline":case "polygon":{var w=0;const D=2+(e.hasZ?1:0)+(e.hasM?1:0);e="polyline"===e.type?e.paths:e.rings;for(const p of e)w+=p.length;h+=8*w*D+64;h+=128*w;h=h+34+32*(e.length+1);break}case "multipoint":w=e.points.length;h+=8*w*(2+(e.hasZ?1:0)+(e.hasM?1:0))+64;h+=128*w;h=h+34+32;break;case "extent":h+=98;e.hasM&&(h+=32);e.hasZ&&(h+=32);break;case "mesh":h+=C.estimateSize(e.vertexAttributes.position),h+=C.estimateSize(e.vertexAttributes.normal),h+=C.estimateSize(e.vertexAttributes.uv),
h+=C.estimateSize(e.vertexAttributes.tangent)}return h}function c(e,h){g.empty(h);"mesh"===e.type&&(e=e.extent);switch(e.type){case "point":h[0]=h[3]=e.x;h[1]=h[4]=e.y;e.hasZ&&(h[2]=h[5]=e.z);break;case "polyline":for(var w=0;w<e.paths.length;w++)g.expandWithNestedArray(h,e.paths[w],e.hasZ);break;case "polygon":for(w=0;w<e.rings.length;w++)g.expandWithNestedArray(h,e.rings[w],e.hasZ);break;case "multipoint":g.expandWithNestedArray(h,e.points,e.hasZ);break;case "extent":h[0]=e.xmin,h[1]=e.ymin,h[3]=
e.xmax,h[4]=e.ymax,null!=e.zmin&&(h[2]=e.zmin),null!=e.zmax&&(h[5]=e.zmax)}}function a(e,h){r.empty(h);"mesh"===e.type&&(e=e.extent);switch(e.type){case "point":h[0]=h[2]=e.x;h[1]=h[3]=e.y;break;case "polyline":for(var w=0;w<e.paths.length;w++)r.expandWithNestedArray(h,e.paths[w]);break;case "polygon":for(w=0;w<e.rings.length;w++)r.expandWithNestedArray(h,e.rings[w]);break;case "multipoint":r.expandWithNestedArray(h,e.points);break;case "extent":h[0]=e.xmin,h[1]=e.ymin,h[2]=e.xmax,h[3]=e.ymax}}const b=
g.create(),k=r.create();d.equals=t.equals;d.DehydratedFeatureClass=function(e,h,w){this.uid=e;this.geometry=h;this.attributes=w;this.visible=!0;this.centroid=this.objectId=null};d.DehydratedFeatureSetClass=function(){this.exceededTransferLimit=!1;this.features=[];this.fields=[];this.hasZ=this.hasM=!1;this.transform=this.spatialReference=this.geohashFieldName=this.geometryProperties=this.globalIdFieldName=this.objectIdFieldName=this.geometryType=null};d.computeAABB=c;d.computeAABR=a;d.estimateGeometryObjectSize=
n;d.estimateSize=function(e){let h;h=32+m.estimateAttributesObjectSize(e.attributes);return h=h+3+(8+n(e.geometry))};d.expandAABB=function(e,h){c(e,b);g.expandWithAABB(h,b)};d.expandAABR=function(e,h){a(e,k);r.expand(h,k)};d.fromFeatureSetJSON=function(e){const h=x.featureGeometryTypeKebabDictionary.fromJSON(e.geometryType),w=q.fromJSON(e.spatialReference),D=e.transform,p=e.features.map(z=>{var f=e.objectIdFieldName;z={uid:A.generateUID(),objectId:f&&z.attributes?z.attributes[f]:null,attributes:z.attributes,
geometry:l(z.geometry,h,w),visible:!0};f=z.geometry;if(B.isSome(f)&&D)switch(f.type){case "point":z.geometry=u.unquantizePoint(D,f,f,f.hasZ,f.hasM);break;case "multipoint":z.geometry=u.unquantizeMultipoint(D,f,f,f.hasZ,f.hasM);break;case "polygon":z.geometry=u.unquantizePolygon(D,f,f,f.hasZ,f.hasM);break;case "polyline":z.geometry=u.unquantizePolyline(D,f,f,f.hasZ,f.hasM);break;case "extent":z.geometry=f;break;case "mesh":z.geometry=f}return z});return{geometryType:h,features:p,spatialReference:w,
fields:e.fields?e.fields.map(z=>y.fromJSON(z)):null,objectIdFieldName:e.objectIdFieldName,globalIdFieldName:e.globalIdFieldName,geohashFieldName:e.geohashFieldName,geometryProperties:e.geometryProperties,hasZ:e.hasZ,hasM:e.hasM,exceededTransferLimit:e.exceededTransferLimit,transform:null}};d.fromJSONGeometry=l;d.getObjectId=function(e,h){return null!=e.objectId?e.objectId:e.attributes&&h?e.attributes[h]:null};d.hasGeometry=function(e){return B.isSome(e.geometry)};d.hasVertices=function(e){if(B.isNone(e))return!1;
switch(e.type){case "extent":case "point":return!0;case "polyline":for(const h of e.paths)if(0<h.length)return!0;return!1;case "polygon":for(const h of e.rings)if(0<h.length)return!0;return!1;case "multipoint":return 0<e.points.length;case "mesh":return!e.loaded||0<e.vertexAttributes.position.length}};d.isFeatureGeometry=function(e){return x.isFeatureGeometryType(e.type)};d.makeDehydratedPoint=function(e,h,w,D){return{x:e,y:h,z:w,hasZ:null!=w,hasM:!1,spatialReference:D,type:"point"}};d.numVertices=
function(e){if(B.isNone(e))return 0;switch(e.type){case "point":return 1;case "polyline":var h=0;for(var w of e.paths)h+=w.length;return h;case "polygon":w=0;for(h of e.rings)w+=h.length;return w;case "multipoint":return e.points.length;case "extent":return 2;case "mesh":return(e=e.vertexAttributes&&e.vertexAttributes.position)?e.length/3:0}};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/core/byteSizeEstimations":function(){define(["exports"],function(d){function m(v){return 32+v.length}
d.estimateAttributesObjectSize=function(v){if(!v)return 0;let B=32;for(const C in v)if(v.hasOwnProperty(C)){const A=v[C];switch(typeof A){case "string":B+=m(A);break;case "number":B+=16;break;case "boolean":B+=4}}return B};d.estimateFixedArraySize=function(v,B){return 32+v.length*B};d.estimateNumberByteSize=function(){return 16};d.estimateStringByteSize=m;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/geometry/support/aaBoundingBox":function(){define(["exports","../../core/maybe","../Extent",
"./aaBoundingRect"],function(d,m,v,B){function C(c=l){return[c[0],c[1],c[2],c[3],c[4],c[5]]}function A(c,a,b,k,e,h,w=C()){w[0]=c;w[1]=a;w[2]=b;w[3]=k;w[4]=e;w[5]=h;return w}function q(c){return c[0]>=c[3]?0:c[3]-c[0]}function g(c){return c[1]>=c[4]?0:c[4]-c[1]}function r(c){return c[2]>=c[5]?0:c[5]-c[2]}function u(c,a){return Math.max(a[0],c[0])<=Math.min(a[3],c[3])&&Math.max(a[1],c[1])<=Math.min(a[4],c[4])&&Math.max(a[2],c[2])<=Math.min(a[5],c[5])}function x(c,a){c[0]=a[0];c[1]=a[1];c[2]=a[2];c[3]=
a[3];c[4]=a[4];c[5]=a[5];return c}function y(c){return 6===c.length}const t=[Infinity,Infinity,Infinity,-Infinity,-Infinity,-Infinity],l=[0,0,0,0,0,0],n=C();d.NEGATIVE_INFINITY=t;d.POSITIVE_INFINITY=[-Infinity,-Infinity,-Infinity,Infinity,Infinity,Infinity];d.ZERO=l;d.allFinite=function(c){for(let a=0;6>a;a++)if(!isFinite(c[a]))return!1;return!0};d.center=function(c,a=[0,0,0]){a[0]=c[0]+q(c)/2;a[1]=c[1]+g(c)/2;a[2]=c[2]+r(c)/2;return a};d.contains=function(c,a){return a[0]>=c[0]&&a[1]>=c[1]&&a[2]>=
c[2]&&a[3]<=c[3]&&a[4]<=c[4]&&a[5]<=c[5]};d.containsPoint=function(c,a){return a[0]>=c[0]&&a[1]>=c[1]&&a[2]>=c[2]&&a[0]<=c[3]&&a[1]<=c[4]&&a[2]<=c[5]};d.containsPointWithMargin=function(c,a,b){return a[0]>=c[0]-b&&a[1]>=c[1]-b&&a[2]>=c[2]-b&&a[0]<=c[3]+b&&a[1]<=c[4]+b&&a[2]<=c[5]+b};d.create=C;d.depth=g;d.diameter=function(c){const a=q(c),b=r(c);c=g(c);return Math.sqrt(a*a+b*b+c*c)};d.empty=function(c){return c?x(c,t):C(t)};d.equals=function(c,a,b){if(m.isNone(c)||m.isNone(a))return c===a;if(!y(c)||
!y(a))return!1;if(b)for(let k=0;k<c.length;k++){if(!b(c[k],a[k]))return!1}else for(b=0;b<c.length;b++)if(c[b]!==a[b])return!1;return!0};d.expandWithAABB=function(c,a){c[0]=Math.min(c[0],a[0]);c[1]=Math.min(c[1],a[1]);c[2]=Math.min(c[2],a[2]);c[3]=Math.max(c[3],a[3]);c[4]=Math.max(c[4],a[4]);c[5]=Math.max(c[5],a[5])};d.expandWithBuffer=function(c,a,b=0,k=a.length/3){let e=c[0],h=c[1],w=c[2],D=c[3],p=c[4],z=c[5];for(let f=0;f<k;f++)e=Math.min(e,a[b+3*f]),h=Math.min(h,a[b+3*f+1]),w=Math.min(w,a[b+3*
f+2]),D=Math.max(D,a[b+3*f]),p=Math.max(p,a[b+3*f+1]),z=Math.max(z,a[b+3*f+2]);c[0]=e;c[1]=h;c[2]=w;c[3]=D;c[4]=p;c[5]=z};d.expandWithNestedArray=function(c,a,b){const k=a.length;let e=c[0],h=c[1],w=c[2],D=c[3],p=c[4],z=c[5];if(b)for(b=0;b<k;b++){var f=a[b];e=Math.min(e,f[0]);h=Math.min(h,f[1]);w=Math.min(w,f[2]);D=Math.max(D,f[0]);p=Math.max(p,f[1]);z=Math.max(z,f[2])}else for(b=0;b<k;b++)f=a[b],e=Math.min(e,f[0]),h=Math.min(h,f[1]),D=Math.max(D,f[0]),p=Math.max(p,f[1]);c[0]=e;c[1]=h;c[2]=w;c[3]=
D;c[4]=p;c[5]=z};d.expandWithOffset=function(c,a,b,k){c[0]=Math.min(c[0],c[0]+a);c[3]=Math.max(c[3],c[3]+a);c[1]=Math.min(c[1],c[1]+b);c[4]=Math.max(c[4],c[4]+b);c[2]=Math.min(c[2],c[2]+k);c[5]=Math.max(c[5],c[5]+k)};d.expandWithRect=function(c,a){c[0]=Math.min(c[0],a[0]);c[1]=Math.min(c[1],a[1]);c[3]=Math.max(c[3],a[2]);c[4]=Math.max(c[4],a[3])};d.expandWithVec3=function(c,a){c[0]=Math.min(c[0],a[0]);c[1]=Math.min(c[1],a[1]);c[2]=Math.min(c[2],a[2]);c[3]=Math.max(c[3],a[0]);c[4]=Math.max(c[4],a[1]);
c[5]=Math.max(c[5],a[2])};d.fromExtent=function(c,a=C()){a[0]=c.xmin;a[1]=c.ymin;a[2]=c.zmin;a[3]=c.xmax;a[4]=c.ymax;a[5]=c.zmax;return a};d.fromMinMax=function(c,a,b=C()){b[0]=c[0];b[1]=c[1];b[2]=c[2];b[3]=a[0];b[4]=a[1];b[5]=a[2];return b};d.fromRect=function(c,a){c[0]=a[0];c[1]=a[1];c[2]=Number.NEGATIVE_INFINITY;c[3]=a[2];c[4]=a[3];c[5]=Number.POSITIVE_INFINITY;return c};d.fromValues=A;d.getMax=function(c,a){a[0]=c[3];a[1]=c[4];a[2]=c[5];return a};d.getMin=function(c,a){a[0]=c[0];a[1]=c[1];a[2]=
c[2];return a};d.height=r;d.intersects=u;d.intersectsClippingArea=function(c,a){return m.isNone(a)?!0:u(c,a)};d.is=y;d.isPoint=function(c){return 0===q(c)&&0===g(c)&&0===r(c)};d.maximumDimension=function(c){return Math.max(q(c),r(c),g(c))};d.offset=function(c,a,b,k,e=c){e[0]=c[0]+a;e[1]=c[1]+b;e[2]=c[2]+k;e[3]=c[3]+a;e[4]=c[4]+b;e[5]=c[5]+k;return e};d.scale=function(c,a,b=c){const k=c[0]+q(c)/2,e=c[1]+g(c)/2,h=c[2]+r(c)/2;b[0]=k+(c[0]-k)*a;b[1]=e+(c[1]-e)*a;b[2]=h+(c[2]-h)*a;b[3]=k+(c[3]-k)*a;b[4]=
e+(c[4]-e)*a;b[5]=h+(c[5]-h)*a;return b};d.set=x;d.setMax=function(c,a,b=c){b[3]=a[0];b[4]=a[1];b[5]=a[2];b!==c&&(b[0]=c[0],b[1]=c[1],b[2]=c[2]);return c};d.setMin=function(c,a,b=c){b[0]=a[0];b[1]=a[1];b[2]=a[2];b!==c&&(b[3]=c[3],b[4]=c[4],b[5]=c[5]);return b};d.size=function(c,a=[0,0,0]){a[0]=q(c);a[1]=g(c);a[2]=r(c);return a};d.toExtent=function(c,a){return isFinite(c[2])||isFinite(c[5])?new v({xmin:c[0],xmax:c[3],ymin:c[1],ymax:c[4],zmin:c[2],zmax:c[5],spatialReference:a}):new v({xmin:c[0],xmax:c[3],
ymin:c[1],ymax:c[4],spatialReference:a})};d.toRect=function(c,a){a||(a=B.create());a[0]=c[0];a[1]=c[1];a[2]=c[3];a[3]=c[4];return a};d.width=q;d.wrap=function(c,a,b,k,e,h){return A(c,a,b,k,e,h,n)};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/geometry/support/aaBoundingRect":function(){define(["exports","../../core/has","../../core/maybe","../Extent"],function(d,m,v,B){function C(l=t){return[l[0],l[1],l[2],l[3]]}function A(l){return l[0]>=l[2]?0:l[2]-l[0]}function q(l){return l[1]>=l[3]?
0:l[3]-l[1]}function g(l,n,c){return n>=l[0]&&c>=l[1]&&n<=l[2]&&c<=l[3]}function r(l,n){l[0]=n[0];l[1]=n[1];l[2]=n[2];l[3]=n[3];return l}function u(l){return 4===l.length}function x(l,n,c){return l<n?n:l>c?c:l}const y=[Infinity,Infinity,-Infinity,-Infinity],t=[0,0,0,0];d.NEGATIVE_INFINITY=y;d.POSITIVE_INFINITY=[-Infinity,-Infinity,Infinity,Infinity];d.UNIT=[0,0,1,1];d.ZERO=t;d.allFinite=function(l){for(let n=0;4>n;n++)if(!isFinite(l[n]))return!1;return!0};d.area=function(l){return A(l)*q(l)};d.center=
function(l,n=[0,0]){n[0]=(l[0]+l[2])/2;n[1]=(l[1]+l[3])/2;return n};d.clone=function(l){return[l[0],l[1],l[2],l[3]]};d.contains=function(l,n){return n[0]>=l[0]&&n[2]<=l[2]&&n[1]>=l[1]&&n[3]<=l[3]};d.containsPoint=function(l,n){return g(l,n[0],n[1])};d.containsPointObject=function(l,n){return g(l,n.x,n.y)};d.containsPointWithMargin=function(l,n,c){return n[0]>=l[0]-c&&n[1]>=l[1]-c&&n[0]<=l[2]+c&&n[1]<=l[3]+c};d.containsXY=g;d.create=C;d.diameter=function(l){const n=A(l);l=q(l);return Math.sqrt(n*n+
l*l)};d.distance=function(l,n){const c=(l[1]+l[3])/2,a=Math.max(Math.abs(n[0]-(l[0]+l[2])/2)-A(l)/2,0);l=Math.max(Math.abs(n[1]-c)-q(l)/2,0);return Math.sqrt(a*a+l*l)};d.empty=function(l){return l?r(l,y):C(y)};d.equals=function(l,n,c){if(v.isNone(l)||v.isNone(n))return l===n;if(!u(l)||!u(n))return!1;if(c)for(let a=0;a<l.length;a++){if(!c(l[a],n[a]))return!1}else for(c=0;c<l.length;c++)if(l[c]!==n[c])return!1;return!0};d.expand=function(l,n,c=l){if("length"in n)if(u(n))c[0]=Math.min(l[0],n[0]),c[1]=
Math.min(l[1],n[1]),c[2]=Math.max(l[2],n[2]),c[3]=Math.max(l[3],n[3]);else{if(2===n.length||3===n.length)c[0]=Math.min(l[0],n[0]),c[1]=Math.min(l[1],n[1]),c[2]=Math.max(l[2],n[0]),c[3]=Math.max(l[3],n[1])}else switch(n.type){case "extent":c[0]=Math.min(l[0],n.xmin);c[1]=Math.min(l[1],n.ymin);c[2]=Math.max(l[2],n.xmax);c[3]=Math.max(l[3],n.ymax);break;case "point":c[0]=Math.min(l[0],n.x),c[1]=Math.min(l[1],n.y),c[2]=Math.max(l[2],n.x),c[3]=Math.max(l[3],n.y)}return c};d.expandPointInPlace=function(l,
n){n[0]<l[0]&&(l[0]=n[0]);n[0]>l[2]&&(l[2]=n[0]);n[1]<l[1]&&(l[1]=n[1]);n[1]>l[3]&&(l[3]=n[1])};d.expandWithNestedArray=function(l,n,c=l){const a=n.length;let b=l[0],k=l[1],e=l[2];l=l[3];for(let h=0;h<a;h++){const w=n[h];b=Math.min(b,w[0]);k=Math.min(k,w[1]);e=Math.max(e,w[0]);l=Math.max(l,w[1])}c[0]=b;c[1]=k;c[2]=e;c[3]=l;return c};d.fromExtent=function(l,n=C()){n[0]=l.xmin;n[1]=l.ymin;n[2]=l.xmax;n[3]=l.ymax;return n};d.fromValues=function(l,n,c,a,b=C()){b[0]=l;b[1]=n;b[2]=c;b[3]=a;return b};d.height=
q;d.intersection=function(l,n,c=l){const a=n[0],b=n[1],k=n[2];n=n[3];c[0]=x(l[0],a,k);c[1]=x(l[1],b,n);c[2]=x(l[2],a,k);c[3]=x(l[3],b,n);return c};d.intersects=function(l,n){return Math.max(n[0],l[0])<=Math.min(n[2],l[2])&&Math.max(n[1],l[1])<=Math.min(n[3],l[3])};d.is=u;d.isPoint=function(l){return(0===A(l)||!isFinite(l[0]))&&(0===q(l)||!isFinite(l[1]))};d.offset=function(l,n,c,a=l){a[0]=l[0]+n;a[1]=l[1]+c;a[2]=l[2]+n;a[3]=l[3]+c;return a};d.pad=function(l,n,c=l){c[0]=l[0]-n;c[1]=l[1]-n;c[2]=l[2]+
n;c[3]=l[3]+n;return c};d.set=r;d.setMax=function(l,n,c=l){c[2]=n[0];c[3]=n[1];c!==l&&(c[0]=l[0],c[1]=l[1]);return l};d.setMin=function(l,n,c=l){c[0]=n[0];c[1]=n[1];c!==l&&(c[2]=l[2],c[3]=l[3]);return c};d.size=function(l,n){n[0]=l[2]-l[0];n[1]=l[3]-l[1]};d.toExtent=function(l,n){return new B({xmin:l[0],ymin:l[1],xmax:l[2],ymax:l[3],spatialReference:n})};d.width=A;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/geometry/support/quantizationUtils":function(){define(["exports","./jsonUtils"],
function(d,m){function v({scale:f,translate:E},F){return Math.round((F-E[0])/f[0])}function B({scale:f,translate:E},F){return Math.round((E[1]-F)/f[1])}function C(f,E,F){const L=[];let W,M,P,V;for(let H=0;H<F.length;H++){const R=F[H];if(0<H){if(P=v(f,R[0]),V=B(f,R[1]),P!==W||V!==M)L.push(E(R,P-W,V-M)),W=P,M=V}else W=v(f,R[0]),M=B(f,R[1]),L.push(E(R,W,M))}return 0<L.length?L:null}function A(f,E,F,L){return C(f,F?L?z:p:L?p:D,E)}function q(f,E,F,L){const W=[];F=F?L?z:p:L?p:D;for(L=0;L<E.length;L++){const M=
C(f,F,E[L]);M&&3<=M.length&&W.push(M)}return W.length?W:null}function g(f,E,F,L){const W=[];F=F?L?z:p:L?p:D;for(L=0;L<E.length;L++){const M=C(f,F,E[L]);M&&2<=M.length&&W.push(M)}return W.length?W:null}function r({scale:f,translate:E},F){return F*f[0]+E[0]}function u({scale:f,translate:E},F){return E[1]-F*f[1]}function x(f,E,F){const L=Array(F.length);if(!F.length)return L;const [W,M]=f.scale;let P=r(f,F[0][0]);f=u(f,F[0][1]);L[0]=E(F[0],P,f);for(let V=1;V<F.length;V++){const H=F[V];P+=H[0]*W;f-=H[1]*
M;L[V]=E(H,P,f)}return L}function y(f,E,F){const L=Array(F.length);for(let W=0;W<F.length;W++)L[W]=x(f,E,F[W]);return L}function t(f,E,F,L){return x(f,F?L?z:p:L?p:D,E)}function l(f,E,F,L){return y(f,F?L?z:p:L?p:D,E)}function n(f,E,F,L){return y(f,F?L?z:p:L?p:D,E)}function c(f,E,F){let [L,W]=F[0],M=Math.min(L,E[0]),P=Math.min(W,E[1]),V=Math.max(L,E[2]);E=Math.max(W,E[3]);for(let H=1;H<F.length;H++){const [R,Z]=F[H];L+=R;W+=Z;0>R&&(M=Math.min(M,L));0<R&&(V=Math.max(V,L));0>Z?P=Math.min(P,W):0<Z&&(E=
Math.max(E,W))}f[0]=M;f[1]=P;f[2]=V;f[3]=E;return f}function a(f,E){if(!E.length)return null;f[0]=f[1]=Number.POSITIVE_INFINITY;f[2]=f[3]=Number.NEGATIVE_INFINITY;for(let F=0;F<E.length;F++)c(f,f,E[F]);return f}function b(f,E,F,L,W){E.xmin=v(f,F.xmin);E.ymin=B(f,F.ymin);E.xmax=v(f,F.xmax);E.ymax=B(f,F.ymax);E!==F&&(L&&(E.zmin=F.zmin,E.zmax=F.zmax),W&&(E.mmin=F.mmin,E.mmax=F.mmax));return E}function k(f,E,F,L,W){E.points=A(f,F.points,L,W);return E}function e(f,E,F,L,W){E.x=v(f,F.x);E.y=B(f,F.y);E!==
F&&(L&&(E.z=F.z),W&&(E.m=F.m));return E}function h(f,E,F,L,W){f=q(f,F.rings,L,W);if(!f)return null;E.rings=f;return E}function w(f,E,F,L,W){f=g(f,F.paths,L,W);if(!f)return null;E.paths=f;return E}const D=(f,E,F)=>[E,F],p=(f,E,F)=>[E,F,f[2]],z=(f,E,F)=>[E,F,f[2],f[3]];d.equals=function(f,E){if(f===E||null==f&&null==E)return!0;if(null==f||null==E)return!1;let F,L,W,M;f&&"upperLeft"===f.originPosition?(F=f.translate[0],L=f.translate[1],f=f.scale[0]):(F=f.extent.xmin,L=f.extent.ymax,f=f.tolerance);E&&
"upperLeft"===E.originPosition?(W=E.translate[0],M=E.translate[1],E=E.scale[0]):(W=E.extent.xmin,M=E.extent.ymax,E=E.tolerance);return F===W&&L===M&&f===E};d.getQuantizedBoundsCoordsArray=c;d.getQuantizedBoundsCoordsArrayArray=a;d.getQuantizedBoundsPaths=function(f){return a([0,0,0,0],f)};d.getQuantizedBoundsPoints=function(f){const E=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return c(E,E,f)};d.getQuantizedBoundsRings=function(f){return a([0,
0,0,0],f)};d.quantizeBounds=function(f,E,F){E[0]=v(f,F[0]);E[3]=B(f,F[1]);E[2]=v(f,F[2]);E[1]=B(f,F[3]);return E};d.quantizeExtent=b;d.quantizeGeometry=function(f,E){return f&&E?m.isPoint(E)?e(f,{},E,!1,!1):m.isPolyline(E)?w(f,{},E,!1,!1):m.isPolygon(E)?h(f,{},E,!1,!1):m.isMultipoint(E)?k(f,{},E,!1,!1):m.isExtent(E)?b(f,{},E,!1,!1):null:null};d.quantizeMultipoint=k;d.quantizePaths=g;d.quantizePoint=e;d.quantizePoints=A;d.quantizePolygon=h;d.quantizePolyline=w;d.quantizeRings=q;d.quantizeX=v;d.quantizeY=
B;d.toQuantizationTransform=function(f){return f?{originPosition:"upper-left"===f.originPosition?"upperLeft":"lower-left"===f.originPosition?"lowerLeft":f.originPosition,scale:f.tolerance?[f.tolerance,f.tolerance]:[1,1],translate:f.extent?[f.extent.xmin,f.extent.ymax]:[0,0]}:null};d.unquantizeBounds=function(f,E,F){return F?(E[0]=r(f,F[0]),E[1]=u(f,F[3]),E[2]=r(f,F[2]),E[3]=u(f,F[1]),E):[r(f,E[0]),u(f,E[3]),r(f,E[2]),u(f,E[1])]};d.unquantizeCoordsArray=x;d.unquantizeCoordsArrayArray=y;d.unquantizeExtent=
function(f,E,F,L,W){E.xmin=r(f,F.xmin);E.ymin=u(f,F.ymin);E.xmax=r(f,F.xmax);E.ymax=u(f,F.ymax);E!==F&&(L&&(E.zmin=F.zmin,E.zmax=F.zmax),W&&(E.mmin=F.mmin,E.mmax=F.mmax));return E};d.unquantizeMultipoint=function(f,E,F,L,W){E.points=t(f,F.points,L,W);return E};d.unquantizePaths=l;d.unquantizePoint=function(f,E,F,L,W){E.x=r(f,F.x);E.y=u(f,F.y);E!==F&&(L&&(E.z=F.z),W&&(E.m=F.m));return E};d.unquantizePoints=t;d.unquantizePolygon=function(f,E,F,L,W){E.rings=n(f,F.rings,L,W);return E};d.unquantizePolyline=
function(f,E,F,L,W){E.paths=l(f,F.paths,L,W);return E};d.unquantizeRings=n;d.unquantizeX=r;d.unquantizeY=u;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/layers/graphics/dehydratedFeatureComparison":function(){define(["exports","../../core/has","../../core/maybe"],function(d,m,v){function B(u,x){if(u===x)return!0;if(null==u||null==x||u.length!==x.length)return!1;for(let y=0;y<u.length;y++){const t=u[y],l=x[y];if(t.length!==l.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==l[n])return!1}return!0}
function C(u,x){if(u===x)return!0;if(null==u||null==x||u.length!==x.length)return!1;for(let y=0;y<u.length;y++)if(!B(u[y],x[y]))return!1;return!0}function A(u,x){return q(u.spatialReference,x.spatialReference)?u.x===x.x&&u.y===x.y&&u.z===x.z&&u.m===x.m:!1}function q(u,x){return u===x||u&&x&&u.equals(x)}function g(u,x){if(u===x)return!0;if(v.isNone(u)||v.isNone(x)||u.type!==x.type)return!1;switch(u.type){case "point":return A(u,x);case "extent":return u=u.hasZ!==x.hasZ||u.hasM!==x.hasM?!1:q(u.spatialReference,
x.spatialReference)?u.xmin===x.xmin&&u.ymin===x.ymin&&u.zmin===x.zmin&&u.xmax===x.xmax&&u.ymax===x.ymax&&u.zmax===x.zmax:!1,u;case "polyline":return u=u.hasZ!==x.hasZ||u.hasM!==x.hasM?!1:q(u.spatialReference,x.spatialReference)?C(u.paths,x.paths):!1,u;case "polygon":return u=u.hasZ!==x.hasZ||u.hasM!==x.hasM?!1:q(u.spatialReference,x.spatialReference)?C(u.rings,x.rings):!1,u;case "multipoint":return u=u.hasZ!==x.hasZ||u.hasM!==x.hasM?!1:q(u.spatialReference,x.spatialReference)?B(u.points,x.points):
!1,u;case "mesh":return!1}}function r(u,x){if(u===x)return!0;if(!u||!x)return!1;const y=Object.keys(u),t=Object.keys(x);if(y.length!==t.length)return!1;for(const l of y)if(u[l]!==x[l])return!1;return!0}d.equals=function(u,x){return u===x?!0:null!=u&&null!=x&&u.objectId===x.objectId&&g(u.geometry,x.geometry)&&r(u.attributes,x.attributes)?!0:!1};d.pointEquals=A;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/2d/interactive/SnappingVisualizer2D":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../geometry ../../../Graphic ../../../symbols ../../../core/handleUtils ../../../core/screenUtils ../../../chunks/vec2 ../../../chunks/vec2f64 ../../../chunks/vec3f64 ../../draw/support/settings ../../interactive/snapping/Settings ../../interactive/snapping/SnappingVisualizer ../../../geometry/Point ../../../geometry/Polyline ../../../symbols/SimpleMarkerSymbol ../../../symbols/SimpleLineSymbol ../../../symbols/CIMSymbol".split(" "),
function(d,m,v,B,C,A,q,g,r,u,x,y,t,l,n,c,a,b){v=function(F){function L(M){var P=F.call(this)||this;P.graphicsLayer=M;return P}m._inheritsLoose(L,F);var W=L.prototype;W.visualizeIntersectionPoint=function(M,P){return this._visualizeSnappingIndicator(new l({x:M.intersectionPoint[0],y:M.intersectionPoint[1],spatialReference:P.coordinateHelper.spatialReference}),h)};W.visualizePoint=function(M,P){return this._visualizeSnappingIndicator(new l({x:M.point[0],y:M.point[1],spatialReference:P.coordinateHelper.spatialReference}),
w)};W.visualizeLine=function(M,P){return this._visualizeSnappingIndicator(new n({paths:[[M.lineStart,M.lineEnd]],spatialReference:P.coordinateHelper.spatialReference}),D)};W.visualizeParallelSign=function(M,P){return this._visualizeSnappingIndicator(new n({paths:[[M.lineStart,M.lineEnd]],spatialReference:P.coordinateHelper.spatialReference}),p)};W.visualizeRightAngleQuad=function(M,P){return this._visualizeSnappingIndicator(new n({paths:[[M.previousVertex,M.centerVertex,M.nextVertex]],spatialReference:P.coordinateHelper.spatialReference}),
E(M))};W._visualizeSnappingIndicator=function(M,P){const V=new B({geometry:M,symbol:P});this.graphicsLayer.add(V);return A.makeHandle(()=>{this.graphicsLayer.remove(V)})};return L}(t.SnappingVisualizer);const k=x.colors.main.toArray(),e=[...x.colors.main.toRgb(),100],h=new c({outline:new a({width:1.5,color:k}),size:15,color:[0,0,0,0]}),w=new c({outline:{width:.5,color:[0,0,0,1]},size:10,color:k}),D=new b({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",
enable:!0,capStyle:"Butt",joinStyle:"Round",miterLimit:10,width:q.px2pt(y.defaults.lineHintWidthTarget),color:k}]}}}),p=new b({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,anchorPoint:{x:0,y:-1,z:0},anchorPointUnits:"Relative",size:5,markerPlacement:{type:"CIMMarkerPlacementOnLine",placePerPart:!0,angleToLine:!0,relativeTo:"LineMiddle"},frame:{xmin:-5,ymin:-1.5,xmax:5,ymax:1.5},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{rings:[[[7,
0],[-7,0],[-7,1.5],[7,1.5]]]},symbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:k}]}}],scaleSymbolsProportionally:!0,respectFrame:!0},{type:"CIMVectorMarker",enable:!0,anchorPoint:{x:0,y:1,z:0},anchorPointUnits:"Relative",size:5,markerPlacement:{type:"CIMMarkerPlacementOnLine",placePerPart:!0,angleToLine:!0,relativeTo:"LineMiddle"},frame:{xmin:-5,ymin:-1.5,xmax:5,ymax:1.5},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{rings:[[[7,0],[-7,0],[-7,-1.5],[7,-1.5]]]},
symbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:k}]}}],scaleSymbolsProportionally:!0,respectFrame:!0}]}}});x=F=>new b({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,anchorPoint:{x:.5,y:.5,z:0},anchorPointUnits:"Relative",size:q.px2pt(y.defaults.rightAngleHintSize),rotation:F,markerPlacement:{type:"CIMMarkerPlacementOnVertices",placePerPart:!0,angleToLine:!0,placeOnEndPoints:!1},frame:{xmin:-5,ymin:-5,
xmax:5,ymax:5},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{paths:[[[5,-5],[-5,-5],[-5,5],[5,5],[5,-5]]]},symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",enable:!0,capStyle:"Butt",joinStyle:"Round",miterLimit:10,width:q.px2pt(y.defaults.rightAngleHintOutlineSize),color:k},{type:"CIMSolidFill",enable:!0,color:e}]}}],scaleSymbolsProportionally:!0,respectFrame:!0}]}}});const z=x(45),f=x(225),E=(()=>{const F=r.create(),L=r.create(),W=u.create();return M=>{g.subtract(F,M.centerVertex,
M.previousVertex);g.subtract(L,M.nextVertex,M.previousVertex);g.cross(W,F,L);return 0>W[2]?z:f}})();d.SnappingVisualizer2D=v;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/chunks/vec2":function(){define(["exports","./common"],function(d,m){function v(N,S){N[0]=S[0];N[1]=S[1];return N}function B(N,S,O){N[0]=S;N[1]=O;return N}function C(N,S,O){N[0]=S[0]+O[0];N[1]=S[1]+O[1];return N}function A(N,S,O){N[0]=S[0]-O[0];N[1]=S[1]-O[1];return N}function q(N,S,O){N[0]=S[0]*O[0];N[1]=S[1]*O[1];return N}
function g(N,S,O){N[0]=S[0]/O[0];N[1]=S[1]/O[1];return N}function r(N,S){N[0]=Math.ceil(S[0]);N[1]=Math.ceil(S[1]);return N}function u(N,S){N[0]=Math.floor(S[0]);N[1]=Math.floor(S[1]);return N}function x(N,S,O){N[0]=Math.min(S[0],O[0]);N[1]=Math.min(S[1],O[1]);return N}function y(N,S,O){N[0]=Math.max(S[0],O[0]);N[1]=Math.max(S[1],O[1]);return N}function t(N,S){N[0]=Math.round(S[0]);N[1]=Math.round(S[1]);return N}function l(N,S,O){N[0]=S[0]*O;N[1]=S[1]*O;return N}function n(N,S,O,J){N[0]=S[0]+O[0]*
J;N[1]=S[1]+O[1]*J;return N}function c(N,S){const O=S[0]-N[0];N=S[1]-N[1];return Math.sqrt(O*O+N*N)}function a(N,S){const O=S[0]-N[0];N=S[1]-N[1];return O*O+N*N}function b(N){const S=N[0];N=N[1];return Math.sqrt(S*S+N*N)}function k(N){const S=N[0];N=N[1];return S*S+N*N}function e(N,S){N[0]=-S[0];N[1]=-S[1];return N}function h(N,S){N[0]=1/S[0];N[1]=1/S[1];return N}function w(N,S){var O=S[0];const J=S[1];O=O*O+J*J;0<O&&(O=1/Math.sqrt(O),N[0]=S[0]*O,N[1]=S[1]*O);return N}function D(N,S){return N[0]*
S[0]+N[1]*S[1]}function p(N,S,O){S=S[0]*O[1]-S[1]*O[0];N[0]=N[1]=0;N[2]=S;return N}function z(N,S,O,J){const K=S[0];S=S[1];N[0]=K+J*(O[0]-K);N[1]=S+J*(O[1]-S);return N}function f(N,S){S=S||1;const O=2*m.RANDOM()*Math.PI;N[0]=Math.cos(O)*S;N[1]=Math.sin(O)*S;return N}function E(N,S,O){const J=S[0];S=S[1];N[0]=O[0]*J+O[2]*S;N[1]=O[1]*J+O[3]*S;return N}function F(N,S,O){const J=S[0];S=S[1];N[0]=O[0]*J+O[2]*S+O[4];N[1]=O[1]*J+O[3]*S+O[5];return N}function L(N,S,O){const J=S[0];S=S[1];N[0]=O[0]*J+O[3]*
S+O[6];N[1]=O[1]*J+O[4]*S+O[7];return N}function W(N,S,O){const J=S[0];S=S[1];N[0]=O[0]*J+O[4]*S+O[12];N[1]=O[1]*J+O[5]*S+O[13];return N}function M(N,S,O,J){const K=S[0]-O[0];S=S[1]-O[1];const Q=Math.sin(J);J=Math.cos(J);N[0]=K*J-S*Q+O[0];N[1]=K*Q+S*J+O[1];return N}function P(N,S){var O=N[0];N=N[1];const J=S[0];S=S[1];let K=O*O+N*N;0<K&&(K=1/Math.sqrt(K));let Q=J*J+S*S;0<Q&&(Q=1/Math.sqrt(Q));O=(O*J+N*S)*K*Q;return 1<O?0:-1>O?Math.PI:Math.acos(O)}function V(N){return"vec2("+N[0]+", "+N[1]+")"}function H(N,
S){return N[0]===S[0]&&N[1]===S[1]}function R(N,S){const O=N[0];N=N[1];const J=S[0];S=S[1];return Math.abs(O-J)<=m.EPSILON*Math.max(1,Math.abs(O),Math.abs(J))&&Math.abs(N-S)<=m.EPSILON*Math.max(1,Math.abs(N),Math.abs(S))}var Z=Object.freeze({__proto__:null,copy:v,set:B,add:C,subtract:A,multiply:q,divide:g,ceil:r,floor:u,min:x,max:y,round:t,scale:l,scaleAndAdd:n,distance:c,squaredDistance:a,length:b,squaredLength:k,negate:e,inverse:h,normalize:w,dot:D,cross:p,lerp:z,random:f,transformMat2:E,transformMat2d:F,
transformMat3:L,transformMat4:W,rotate:M,angle:P,str:V,exactEquals:H,equals:R,len:b,sub:A,mul:q,div:g,dist:c,sqrDist:a,sqrLen:k});d.add=C;d.angle=P;d.ceil=r;d.copy=v;d.cross=p;d.dist=c;d.distance=c;d.div=g;d.divide=g;d.dot=D;d.equals=R;d.exactEquals=H;d.floor=u;d.inverse=h;d.len=b;d.length=b;d.lerp=z;d.max=y;d.min=x;d.mul=q;d.multiply=q;d.negate=e;d.normalize=w;d.random=f;d.rotate=M;d.round=t;d.scale=l;d.scaleAndAdd=n;d.set=B;d.sqrDist=a;d.sqrLen=k;d.squaredDistance=a;d.squaredLength=k;d.str=V;d.sub=
A;d.subtract=A;d.transformMat2=E;d.transformMat2d=F;d.transformMat3=L;d.transformMat4=W;d.vec2=Z})},"esri/chunks/vec2f64":function(){define(["exports"],function(d){function m(){return[0,0]}function v(c){return[c[0],c[1]]}function B(c,a){return[c,a]}function C(c){const a=[0,0],b=Math.min(2,c.length);for(let k=0;k<b;++k)a[k]=c[k];return a}function A(c,a){return new Float64Array(c,a,2)}function q(){return[0,0]}function g(){return[1,1]}function r(){return[1,0]}function u(){return[0,1]}const x=[0,0],y=
[1,1],t=[1,0],l=[0,1];var n=Object.freeze({__proto__:null,create:m,clone:v,fromValues:B,fromArray:C,createView:A,zeros:q,ones:g,unitX:r,unitY:u,ZEROS:x,ONES:y,UNIT_X:t,UNIT_Y:l});d.ONES=y;d.UNIT_X=t;d.UNIT_Y=l;d.ZEROS=x;d.clone=v;d.create=m;d.createView=A;d.fromArray=C;d.fromValues=B;d.ones=g;d.unitX=r;d.unitY=u;d.vec2f64=n;d.zeros=q})},"esri/views/draw/support/settings":function(){define(["exports","../../../Color"],function(d,m){function v(u,x){if(x)for(const y in x)u[y]=x[y]}const B={main:new m([255,
127,0]),selected:new m([255,255,255]),outline:new m([0,0,0,.5]),selectedOutline:new m([255,255,255]),hoverOutline:new m([255,255,255]),secondary:new m([255,255,255]),secondaryOutline:new m([100,100,100]),transparent:new m([0,0,0,0])};let C=function(u){this.size=8;this.hoverSize=10;this.hoverColor=this.color=B.main;this.outlineColor=B.outline;this.hoverOutlineColor=B.hoverOutline;v(this,u)},A=function(u){this.color=B.secondary;this.hoverColor=B.main;v(this,u)},q=function(u){this.hoverColor=this.color=
B.transparent;this.hoverOutlineColor=this.outlineColor=B.main;this.stagedColor=B.transparent;this.stagedOutlineColor=B.secondary;v(this,u)},g=function(u){this.vertex=new C;this.midpoint=new C({color:B.secondary,outlineColor:B.secondaryOutline,size:6});this.selected=new C({color:B.selected,hoverColor:B.selected,hoverOutlineColor:B.hoverOutline});v(this,u)},r=function(u){this.center=new C({color:B.secondaryOutline});this.fill=new q;this.line=new A;this.vertex=new C({color:B.selected,outlineColor:B.main,
hoverColor:B.selected,hoverOutlineColor:B.secondaryOutline});v(this,u)};m=new function(u){this.reshapeGraphics=new g;this.transformGraphics=new r;v(this,u)};d.colors=B;d.settings=m;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/interactive/snapping/SnappingVisualizer":function(){define("exports ../../../core/handleUtils ./hints/IntersectionSnappingHint ./hints/LineSnappingHint ./hints/ParallelSnappingHint ./hints/PointSnappingHint ./hints/RightAngleSnappingHint".split(" "),function(d,
m,v,B,C,A,q){let g=function(){function r(){}var u=r.prototype;u.draw=function(x,y){x=this.getUniqueHints(x);const t=[];for(const l of x)l instanceof v.IntersectionSnappingHint&&t.push(this.visualizeIntersectionPoint(l,y)),l instanceof B.LineSnappingHint&&t.push(this.visualizeLine(l,y)),l instanceof C.ParallelSnappingHint&&t.push(this.visualizeParallelSign(l,y)),l instanceof q.RightAngleSnappingHint&&t.push(this.visualizeRightAngleQuad(l,y)),l instanceof A.PointSnappingHint&&t.push(this.visualizePoint(l,
y));return m.handlesGroup(t)};u.getUniqueHints=function(x){const y=[];for(const t of x){x=!0;for(const l of y)if(t.equals(l)){x=!1;break}x&&y.push(t)}return y};return r}();d.SnappingVisualizer=g;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/interactive/snapping/hints/IntersectionSnappingHint":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../snappingUtils","./SnappingHint"],function(d,m,v,B){B=function(C){function A(q){var g=C.call(this)||this;g.intersectionPoint=
q;return g}m._inheritsLoose(A,C);A.prototype.equals=function(q){return q instanceof A?v.objectEqual(this.intersectionPoint,q.intersectionPoint):!1};return A}(B.SnappingHint);d.IntersectionSnappingHint=B;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/interactive/snapping/snappingUtils":function(){define("exports ../../../core/screenUtils ../../../chunks/vec2 ../../../chunks/vec3f64 ../../../geometry/Point ../../../support/elevationInfoUtils".split(" "),function(d,m,v,B,C,A){function q(x,
y,t,l,n=B.create()){x=y.toXYZ(x);x[2]=A.getConvertedElevationFromVector(l,x,y.spatialReference,t)||0;l.renderCoordsHelper.toRenderCoords(x,y.spatialReference,n);return n}const g=B.create(),r=m.createScreenPointArray(),u=new C;d.anyMapPointToRender=q;d.anyMapPointToScreenPoint=function(x,y,t,l){if("2d"===l.type)return l.toScreen(y.toPoint(x,u));q(x,y,t,l,g);l.state.camera.projectToScreen(g,r);return m.createScreenPoint(r[0],r[1])};d.anyMapPointsToRenderWithEqualZ=function(x,y,t,l,n,c,a){x=t.toXYZ(x);
y=t.toXYZ(y);const b=A.getConvertedElevationFromVector(n,x,t.spatialReference,l);l=A.getConvertedElevationFromVector(n,y,t.spatialReference,l);l=(null==b?l:null==l?b:Math.min(b,l))||0;x[2]=l;y[2]=l;n.renderCoordsHelper.toRenderCoords(x,t.spatialReference,c);n.renderCoordsHelper.toRenderCoords(y,t.spatialReference,a)};d.objectEqual=function(x,y){const t=x.length===y.length&&x[0]===y[0]&&x[1]===y[1];switch(x.length){case 2:return t;case 3:return t&&x[2]===y[2];case 4:return t&&x[3]===y[3]}return!1};
d.sortCandidatesInPlace=function(x,y){y.sort((t,l)=>{t=v.squaredDistance(t.targetPoint,x);l=v.squaredDistance(l.targetPoint,x);return t-l})};d.squareDistance=function(x,y){const t=x.x-y.x;x=x.y-y.y;return t*t+x*x};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/interactive/snapping/hints/SnappingHint":function(){define(["exports"],function(d){d.SnappingHint=function(){};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/interactive/snapping/hints/LineSnappingHint":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/has ../../../../core/Logger ../snappingUtils ./SnappingHint".split(" "),
function(d,m,v,B,C,A){B.getLogger("esri.views.interactive.snapping.hints.LineSnappingHint");v=function(q){function g(r,u,x,y=!0,t=!0){var l=q.call(this)||this;l.type=r;l.lineStart=u;l.lineEnd=x;l.fadeLeft=y;l.fadeRight=t;return l}m._inheritsLoose(g,q);g.prototype.equals=function(r){return r instanceof g?this.type===r.type&&C.objectEqual(this.lineStart,r.lineStart)&&C.objectEqual(this.lineEnd,r.lineEnd)&&this.fadeLeft===r.fadeLeft&&this.fadeRight===r.fadeRight:!1};return g}(A.SnappingHint);d.LineSnappingHint=
v;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/interactive/snapping/hints/ParallelSnappingHint":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/has ../../../../core/Logger ../snappingUtils ./SnappingHint".split(" "),function(d,m,v,B,C,A){B.getLogger("esri.views.interactive.snapping.hints.ParallelSnappingHint");v=function(q){function g(r,u){var x=q.call(this)||this;x.lineStart=r;x.lineEnd=u;return x}m._inheritsLoose(g,q);g.prototype.equals=
function(r){return r instanceof g?C.objectEqual(this.lineStart,r.lineStart)&&C.objectEqual(this.lineEnd,r.lineEnd):!1};return g}(A.SnappingHint);d.ParallelSnappingHint=v;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/interactive/snapping/hints/PointSnappingHint":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../snappingUtils","./SnappingHint"],function(d,m,v,B){B=function(C){function A(q){var g=C.call(this)||this;g.point=q;return g}m._inheritsLoose(A,
C);A.prototype.equals=function(q){return q instanceof A?v.objectEqual(this.point,q.point):!1};return A}(B.SnappingHint);d.PointSnappingHint=B;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/interactive/snapping/hints/RightAngleSnappingHint":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/has ../../../../core/Logger ../snappingUtils ./SnappingHint".split(" "),function(d,m,v,B,C,A){B.getLogger("esri.views.interactive.snapping.hints.RightAngleSnappingHint");
v=function(q){function g(r,u,x){var y=q.call(this)||this;y.previousVertex=r;y.centerVertex=u;y.nextVertex=x;return y}m._inheritsLoose(g,q);g.prototype.equals=function(r){return r instanceof g?C.objectEqual(this.previousVertex,r.previousVertex)&&C.objectEqual(this.centerVertex,r.centerVertex)&&C.objectEqual(this.nextVertex,r.nextVertex):!1};return g}(A.SnappingHint);d.RightAngleSnappingHint=v;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/interactive/coordinateHelper":function(){define("exports ../../chunks/vec2 ../../chunks/vec2f64 ../../chunks/vec3 ../../chunks/vec3f64 ../../chunks/vec4 ../../chunks/vec4f64 ../../geometry/Point ../../geometry/support/spatialReferenceUtils".split(" "),
function(d,m,v,B,C,A,q,g,r){function u(c,a){if(a.supported){var b=Infinity,k=-Infinity,e=a.upperBoundX-a.lowerBoundX;c.forEach(w=>{let D=w.pos[0];for(;D<a.lowerBoundX;)D+=e;for(;D>a.upperBoundX;)D-=e;b=Math.min(b,D);k=Math.max(k,D);w.pos[0]=D});var h=k-b;e-h<h&&c.forEach(w=>{0>w.pos[0]&&(w.pos[0]+=e)})}}function x(c,a){c=r.getInfo(c);return"global"===a&&c?{supported:!0,lowerBoundX:c.valid[0],upperBoundX:c.valid[1]}:{supported:!1,lowerBoundX:null,upperBoundX:null}}const y=v.create();let t=function(){function c(b,
k){this.spatialReference=b;this.viewingMode=k;this._unnormalizationInfo=x(b,k)}var a=c.prototype;a.tag=function(b){return b};a.createNew=function(){return this.tag(v.create())};a.fromPoint=function(b){return this.tag(v.fromValues(b.x,b.y))};a.fromArray=function(b){return this.tag(v.fromValues(b[0],b[1]))};a.toArray=function(b){return[b[0],b[1]]};a.clone=function(b){return this.tag(v.fromArray(b))};a.copy=function(b,k){return m.copy(k,b)};a.toPoint=function(b,k){k.x=b[0];k.y=b[1];k.hasZ=!1;k.hasM=
!1;k.spatialReference=this.spatialReference;return k};a.createPoint=function(b){return new g({x:b[0],y:b[1],z:void 0,m:void 0,spatialReference:this.spatialReference})};a.createPointFromArray=function(b){return new g({x:b[0],y:b[1],z:void 0,m:void 0,spatialReference:this.spatialReference})};a.createDehydratedPoint=function(b){return{x:b[0],y:b[1],z:void 0,m:void 0,hasZ:!1,hasM:!1,spatialReference:this.spatialReference,type:"point"}};a.lerp=function(b,k,e,h){return m.lerp(h,b,k,e)};a.addDelta=function(b,
k,e){b[0]+=k;b[1]+=e};a.scale=function(b,k,e,h){k=m.subtract(y,b,k);e=m.scale(y,e,m.dot(e,k));m.scaleAndAdd(b,b,e,h-1)};a.rotate=function(b,k,e){m.rotate(b,b,k,e)};a.pointToArray=function(b){return[b.x,b.y]};a.getZ=function(b,k){return k};a.hasZ=function(){return!1};a.getM=function(b,k){return k};a.hasM=function(){return!1};a.unnormalize=function(b){u(b,this._unnormalizationInfo)};a.fromXYZ=function(b){return this.tag(v.fromValues(b[0],b[1]))};a.toXYZ=function(b,k=0){return C.fromValues(b[0],b[1],
k)};a.distance=function(b,k){return m.distance(b,k)};return c}(),l=function(){function c(b,k,e){this.valueType=b;this.spatialReference=k;this._unnormalizationInfo=x(k,e)}var a=c.prototype;a.distance=function(b,k){return 0===this.valueType?B.distance(b,k):m.distance(b,k)};a.tag=function(b){return b};a.createNew=function(){return this.tag(C.create())};a.fromPoint=function(b){return this.tag(C.fromValues(b.x,b.y,0===this.valueType?b.z:b.m))};a.fromArray=function(b){return this.tag(C.fromValues(b[0],
b[1],b[2]||0))};a.toArray=function(b){return[b[0],b[1],b[2]]};a.clone=function(b){return this.tag(C.fromArray(b))};a.copy=function(b,k){return B.copy(k,b)};a.toPoint=function(b,k){k.x=b[0];k.y=b[1];0===this.valueType?(k.z=b[2],k.hasZ=!0,k.hasM=!1):(k.m=b[2],k.hasZ=!1,k.hasM=!0);k.spatialReference=this.spatialReference;return k};a.createPoint=function(b){return new g({x:b[0],y:b[1],z:0===this.valueType?b[2]:void 0,m:1===this.valueType?b[2]:void 0,spatialReference:this.spatialReference})};a.createPointFromArray=
function(b){return new g({x:b[0],y:b[1],z:0===this.valueType?b[2]:void 0,m:1===this.valueType?b[2]:void 0,spatialReference:this.spatialReference})};a.createDehydratedPoint=function(b){const k=0===this.valueType,e=1===this.valueType;return{x:b[0],y:b[1],z:k?b[2]:void 0,m:e?b[2]:void 0,hasZ:k,hasM:e,spatialReference:this.spatialReference,type:"point"}};a.lerp=function(b,k,e,h){return B.lerp(h,b,k,e)};a.addDelta=function(b,k,e,h){b[0]+=k;b[1]+=e;0===this.valueType&&(b[2]+=h)};a.scale=function(b,k,e,
h){k=m.subtract(y,b,k);e=m.scale(y,e,m.dot(e,k));m.scaleAndAdd(b,b,e,h-1)};a.rotate=function(b,k,e){m.rotate(b,b,k,e)};a.pointToArray=function(b){return 0===this.valueType?[b.x,b.y,b.z]:[b.x,b.y,b.m]};a.getZ=function(b,k){return 0===this.valueType?b[2]:k};a.hasZ=function(){return 0===this.valueType};a.getM=function(b,k){return 1===this.valueType?b[2]:k};a.hasM=function(){return 1===this.valueType};a.unnormalize=function(b){u(b,this._unnormalizationInfo)};a.fromXYZ=function(b,k=0,e=0){return this.tag(C.fromValues(b[0],
b[1],0===this.valueType?2<b.length?b[2]:k:e))};a.toXYZ=function(b,k=0){return this.tag(C.fromValues(b[0],b[1],0===this.valueType?b[2]:k))};return c}(),n=function(){function c(b,k){this.spatialReference=b;this._unnormalizationInfo=x(b,k)}var a=c.prototype;a.distance=function(b,k){return B.distance(b,k)};a.tag=function(b){return b};a.createNew=function(){return this.tag(q.create())};a.fromPoint=function(b){return this.tag(q.fromValues(b.x,b.y,b.z,b.m))};a.fromArray=function(b){return this.tag(q.fromValues(b[0],
b[1],b[2]||0,b[3]||0))};a.toArray=function(b){return[b[0],b[1],b[2],b[3]]};a.clone=function(b){return this.tag(q.fromArray(b))};a.copy=function(b,k){return A.copy(k,b)};a.toPoint=function(b,k){k.x=b[0];k.y=b[1];k.z=b[2];k.m=b[3];k.hasZ=!0;k.hasM=!0;k.spatialReference=this.spatialReference;return k};a.createPoint=function(b){return new g({x:b[0],y:b[1],z:b[2],m:b[3],spatialReference:this.spatialReference})};a.createPointFromArray=function(b){return new g({x:b[0],y:b[1],z:b[2],m:b[3],spatialReference:this.spatialReference})};
a.createDehydratedPoint=function(b){return{x:b[0],y:b[1],z:b[2],m:b[3],hasZ:!0,hasM:!0,spatialReference:this.spatialReference,type:"point"}};a.lerp=function(b,k,e,h){return A.lerp(h,b,k,e)};a.addDelta=function(b,k,e,h){b[0]+=k;b[1]+=e;b[2]+=h};a.scale=function(b,k,e,h){k=m.subtract(y,b,k);e=m.scale(y,e,m.dot(e,k));m.scaleAndAdd(b,b,e,h-1)};a.rotate=function(b,k,e){m.rotate(b,b,k,e)};a.pointToArray=function(b){return[b.x,b.y,b.z,b.m]};a.getZ=function(b){return b[2]};a.hasZ=function(){return!0};a.getM=
function(b){return b[3]};a.hasM=function(){return!0};a.unnormalize=function(b){u(b,this._unnormalizationInfo)};a.fromXYZ=function(b,k=0,e=0){return this.tag(q.fromValues(b[0],b[1],2<b.length?b[2]:k,e))};a.toXYZ=function(b){return C.fromValues(b[0],b[1],b[2])};return c}();d.CoordinateHelper2D=t;d.CoordinateHelper3D=l;d.CoordinateHelper4D=n;d.createCoordinateHelper=function(c,a,b,k){return c&&a?new n(b,k):a?new l(1,b,k):c?new l(0,b,k):new t(b,k)};Object.defineProperty(d,"__esModule",{value:!0})})},
"esri/chunks/vec4":function(){define(["exports","./common"],function(d,m){function v(P,V){P[0]=V[0];P[1]=V[1];P[2]=V[2];P[3]=V[3];return P}function B(P,V,H,R,Z){P[0]=V;P[1]=H;P[2]=R;P[3]=Z;return P}function C(P,V,H){P[0]=V[0]+H[0];P[1]=V[1]+H[1];P[2]=V[2]+H[2];P[3]=V[3]+H[3];return P}function A(P,V,H){P[0]=V[0]-H[0];P[1]=V[1]-H[1];P[2]=V[2]-H[2];P[3]=V[3]-H[3];return P}function q(P,V,H){P[0]=V[0]*H[0];P[1]=V[1]*H[1];P[2]=V[2]*H[2];P[3]=V[3]*H[3];return P}function g(P,V,H){P[0]=V[0]/H[0];P[1]=V[1]/
H[1];P[2]=V[2]/H[2];P[3]=V[3]/H[3];return P}function r(P,V){P[0]=Math.ceil(V[0]);P[1]=Math.ceil(V[1]);P[2]=Math.ceil(V[2]);P[3]=Math.ceil(V[3]);return P}function u(P,V){P[0]=Math.floor(V[0]);P[1]=Math.floor(V[1]);P[2]=Math.floor(V[2]);P[3]=Math.floor(V[3]);return P}function x(P,V,H){P[0]=Math.min(V[0],H[0]);P[1]=Math.min(V[1],H[1]);P[2]=Math.min(V[2],H[2]);P[3]=Math.min(V[3],H[3]);return P}function y(P,V,H){P[0]=Math.max(V[0],H[0]);P[1]=Math.max(V[1],H[1]);P[2]=Math.max(V[2],H[2]);P[3]=Math.max(V[3],
H[3]);return P}function t(P,V){P[0]=Math.round(V[0]);P[1]=Math.round(V[1]);P[2]=Math.round(V[2]);P[3]=Math.round(V[3]);return P}function l(P,V,H){P[0]=V[0]*H;P[1]=V[1]*H;P[2]=V[2]*H;P[3]=V[3]*H;return P}function n(P,V,H,R){P[0]=V[0]+H[0]*R;P[1]=V[1]+H[1]*R;P[2]=V[2]+H[2]*R;P[3]=V[3]+H[3]*R;return P}function c(P,V){const H=V[0]-P[0],R=V[1]-P[1],Z=V[2]-P[2];P=V[3]-P[3];return Math.sqrt(H*H+R*R+Z*Z+P*P)}function a(P,V){const H=V[0]-P[0],R=V[1]-P[1],Z=V[2]-P[2];P=V[3]-P[3];return H*H+R*R+Z*Z+P*P}function b(P){const V=
P[0],H=P[1],R=P[2];P=P[3];return Math.sqrt(V*V+H*H+R*R+P*P)}function k(P){const V=P[0],H=P[1],R=P[2];P=P[3];return V*V+H*H+R*R+P*P}function e(P,V){P[0]=-V[0];P[1]=-V[1];P[2]=-V[2];P[3]=-V[3];return P}function h(P,V){P[0]=1/V[0];P[1]=1/V[1];P[2]=1/V[2];P[3]=1/V[3];return P}function w(P,V){const H=V[0],R=V[1],Z=V[2];V=V[3];let N=H*H+R*R+Z*Z+V*V;0<N&&(N=1/Math.sqrt(N),P[0]=H*N,P[1]=R*N,P[2]=Z*N,P[3]=V*N);return P}function D(P,V){return P[0]*V[0]+P[1]*V[1]+P[2]*V[2]+P[3]*V[3]}function p(P,V,H,R){const Z=
V[0],N=V[1],S=V[2];V=V[3];P[0]=Z+R*(H[0]-Z);P[1]=N+R*(H[1]-N);P[2]=S+R*(H[2]-S);P[3]=V+R*(H[3]-V);return P}function z(P,V){V=V||1;let H,R,Z,N;let S;do{H=2*m.RANDOM()-1;R=2*m.RANDOM()-1;var O=H*H+R*R}while(1<=O);do Z=2*m.RANDOM()-1,N=2*m.RANDOM()-1,S=Z*Z+N*N;while(1<=S);O=Math.sqrt((1-O)/S);P[0]=V*H;P[1]=V*R;P[2]=V*Z*O;P[3]=V*N*O;return P}function f(P,V,H){const R=V[0],Z=V[1],N=V[2];V=V[3];P[0]=H[0]*R+H[4]*Z+H[8]*N+H[12]*V;P[1]=H[1]*R+H[5]*Z+H[9]*N+H[13]*V;P[2]=H[2]*R+H[6]*Z+H[10]*N+H[14]*V;P[3]=H[3]*
R+H[7]*Z+H[11]*N+H[15]*V;return P}function E(P,V,H){var R=V[0];const Z=V[1],N=V[2],S=H[0],O=H[1],J=H[2];H=H[3];const K=H*R+O*N-J*Z,Q=H*Z+J*R-S*N,da=H*N+S*Z-O*R;R=-S*R-O*Z-J*N;P[0]=K*H+R*-S+Q*-J-da*-O;P[1]=Q*H+R*-O+da*-S-K*-J;P[2]=da*H+R*-J+K*-O-Q*-S;P[3]=V[3];return P}function F(P){return"vec4("+P[0]+", "+P[1]+", "+P[2]+", "+P[3]+")"}function L(P,V){return P[0]===V[0]&&P[1]===V[1]&&P[2]===V[2]&&P[3]===V[3]}function W(P,V){const H=P[0],R=P[1],Z=P[2];P=P[3];const N=V[0],S=V[1],O=V[2];V=V[3];return Math.abs(H-
N)<=m.EPSILON*Math.max(1,Math.abs(H),Math.abs(N))&&Math.abs(R-S)<=m.EPSILON*Math.max(1,Math.abs(R),Math.abs(S))&&Math.abs(Z-O)<=m.EPSILON*Math.max(1,Math.abs(Z),Math.abs(O))&&Math.abs(P-V)<=m.EPSILON*Math.max(1,Math.abs(P),Math.abs(V))}var M=Object.freeze({__proto__:null,copy:v,set:B,add:C,subtract:A,multiply:q,divide:g,ceil:r,floor:u,min:x,max:y,round:t,scale:l,scaleAndAdd:n,distance:c,squaredDistance:a,length:b,squaredLength:k,negate:e,inverse:h,normalize:w,dot:D,lerp:p,random:z,transformMat4:f,
transformQuat:E,str:F,exactEquals:L,equals:W,sub:A,mul:q,div:g,dist:c,sqrDist:a,len:b,sqrLen:k});d.add=C;d.ceil=r;d.copy=v;d.dist=c;d.distance=c;d.div=g;d.divide=g;d.dot=D;d.equals=W;d.exactEquals=L;d.floor=u;d.inverse=h;d.len=b;d.length=b;d.lerp=p;d.max=y;d.min=x;d.mul=q;d.multiply=q;d.negate=e;d.normalize=w;d.random=z;d.round=t;d.scale=l;d.scaleAndAdd=n;d.set=B;d.sqrDist=a;d.sqrLen=k;d.squaredDistance=a;d.squaredLength=k;d.str=F;d.sub=A;d.subtract=A;d.transformMat4=f;d.transformQuat=E;d.vec4=M})},
"esri/chunks/vec4f64":function(){define(["exports"],function(d){function m(){return[0,0,0,0]}function v(e){return[e[0],e[1],e[2],e[3]]}function B(e,h,w,D){return[e,h,w,D]}function C(e){const h=m(),w=Math.min(4,e.length);for(let D=0;D<w;++D)h[D]=e[D];return h}function A(e,h){return new Float64Array(e,h,4)}function q(){return m()}function g(){return[1,1,1,1]}function r(){return[1,0,0,0]}function u(){return[0,1,0,0]}function x(){return[0,0,1,0]}function y(){return[0,0,0,1]}const t=m(),l=g(),n=r(),c=
u(),a=x(),b=y();var k=Object.freeze({__proto__:null,create:m,clone:v,fromValues:B,fromArray:C,createView:A,zeros:q,ones:g,unitX:r,unitY:u,unitZ:x,unitW:y,ZEROS:t,ONES:l,UNIT_X:n,UNIT_Y:c,UNIT_Z:a,UNIT_W:b});d.ONES=l;d.UNIT_W=b;d.UNIT_X=n;d.UNIT_Y=c;d.UNIT_Z=a;d.ZEROS=t;d.clone=v;d.create=m;d.createView=A;d.fromArray=C;d.fromValues=B;d.ones=g;d.unitW=y;d.unitX=r;d.unitY=u;d.unitZ=x;d.vec4f64=k;d.zeros=q})},"esri/views/interactive/editGeometry/EditGeometry":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/arrayUtils ../../../core/Evented ../../../core/maybe ../../../geometry/Polygon ../../../geometry/Polyline ../coordinateHelper".split(" "),
function(d,m,v,B,C,A,q,g){let r=function(){function y(t){this.right=this.left=null;this.type="vertex";this.index=null;this.component=t}m._createClass(y,[{key:"pos",get:function(){return this._pos},set:function(t){this._pos=t;this.component.unnormalizeVertexPositions()}}]);return y}(),u=function(y,t,l){this.type="edge";this.component=y;this.left=t;this.right=l;t.right=this;l.left=this},x=function(){function y(l){this.vertices=[];this.edges=[];this.data=l}var t=y.prototype;t.unnormalizeVertexPositions=
function(){1>=this.vertices.length||this.data.coordinateHelper.unnormalize(this.vertices)};t.updateVertexIndex=function(l,n){if(0!==this.vertices.length){var c=this.vertices[0],a=null;do a=l,a.index=n++,l=a.right?a.right.right:null;while(null!=l&&l!==c);a.left&&a!==this.vertices[this.vertices.length-1]&&this.swapVertices(this.vertices.indexOf(a),this.vertices.length-1)}};t.getFirstVertex=function(){return 0===this.vertices.length?null:this.vertices[0]};t.getLastVertex=function(){return 0===this.vertices.length?
null:this.vertices[this.vertices.length-1]};t.isClosed=function(){return 2<this.vertices.length&&null!==this.vertices[0].left};t.swapVertices=function(l,n){const c=this.vertices[l];this.vertices[l]=this.vertices[n];this.vertices[n]=c};t.iterateVertices=function(l){if(0!==this.vertices.length){var n=this.vertices[0],c=n;do l(c,c.index),c=C.isSome(c.right)?c.right.right:null;while(c!==n&&null!=c)}};return y}();B=function(y){function t(n){var c=y.call(this)||this;c.coordinateHelper=n;c.undoStack=[];
c.redoStack=[];c.components=[];return c}m._inheritsLoose(t,y);var l=t.prototype;l.apply=function(n,c=1){if(0===c||C.isNone(this.lastOperation)||!this.lastOperation.accumulate(n))n.apply(),this.undoStack.push(n),this.redoStack=[];return n};l.undo=function(){if(0<this.undoStack.length){const n=this.undoStack.pop();n.undo();this.redoStack.push(n);return n}return null};l.redo=function(){if(0<this.redoStack.length){const n=this.redoStack.pop();n.apply();this.undoStack.push(n);return n}return null};l.toPoint=
function(){return 0===this.components.length||0===this.components[0].vertices.length?null:this.coordinateHelper.createPoint(this.components[0].vertices[0].pos)};l.toPolyline=function(){const n=[],c=this.coordinateHelper.toArray;this.components.forEach((a,b)=>{b=[];const k=a=a.vertices.find(e=>null==e.left);do b.push(c(a.pos)),a=a.right?a.right.right:null;while(a&&a!==k);n.push(b)});return new q({paths:n,spatialReference:this.coordinateHelper.spatialReference,hasZ:this.coordinateHelper.hasZ(),hasM:this.coordinateHelper.hasM()})};
l.toPolygon=function(){const n=[],c=this.coordinateHelper.toArray;this.components.forEach((a,b)=>{b=[];const k=a.vertices[0];let e=k;const h=e;do b.push(c(e.pos)),e=C.isSome(e.right)?e.right.right:null;while(e&&e!==h);a.isClosed()&&b.push(c(k.pos));n.push(b)});return new A({rings:n,spatialReference:this.coordinateHelper.spatialReference,hasZ:this.coordinateHelper.hasZ(),hasM:this.coordinateHelper.hasM()})};t.fromGeometry=function(n,c){var a=g.createCoordinateHelper(n.hasZ,n.hasM,n.spatialReference,
c);c=new t(a);switch(n.type){case "polygon":var b=n.rings;for(n=0;n<b.length;++n){var k=b[n],e=new x(c),h=2<k.length&&v.equals(k[0],k[k.length-1]),w=h?k.length-1:k.length;for(var D=0;D<w;++D){const p=a.fromArray(k[D]),z=new r(e);e.vertices.push(z);z.pos=p;z.index=D}k=e.vertices.length-1;for(w=0;w<k;++w)D=new u(e,e.vertices[w],e.vertices[w+1]),e.edges.push(D);h&&(h=new u(e,e.vertices[e.vertices.length-1],e.vertices[0]),e.edges.push(h));c.components.push(e)}break;case "polyline":for(b of n.paths){n=
new x(c);e=b.length;for(h=0;h<e;++h)k=a.fromArray(b[h]),w=new r(n),n.vertices.push(w),w.pos=k,w.index=h;e=n.vertices.length-1;for(h=0;h<e;++h)k=new u(n,n.vertices[h],n.vertices[h+1]),n.edges.push(k);c.components.push(n)}break;case "point":a=new x(c),b=new r(a),b.index=0,b.pos=c.coordinateHelper.fromPoint(n),a.vertices.push(b),c.components.push(a)}return c};m._createClass(t,[{key:"canUndo",get:function(){return 0<this.undoStack.length}},{key:"lastOperation",get:function(){return 0<this.undoStack.length?
this.undoStack[this.undoStack.length-1]:null}},{key:"canRedo",get:function(){return 0<this.redoStack.length}}]);return t}(B);d.Component=x;d.Edge=u;d.EditGeometry=B;d.Vertex=r;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/interactive/editGeometry/EditGeometryHelper":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Evented ./EditGeometry ./operations/AppendVertex ./operations/UpdateVertices ./operations/RemoveVertices ./operations/SplitEdge ./operations/SetVertexPosition ./operations/CloseComponent ./operations/MoveVertex ./operations/OffsetEdgeVertex ./operations/RotateVertex ./operations/ScaleVertex ./operations/UndoGroup".split(" "),
function(d,m,v,B,C,A,q,g,r,u,x,y,t,l,n){v=function(c){function a(k,e){var h=c.call(this)||this;h.editGeometry=k;h.type=e;h._geometry=null;h._dirty=!0;h._listener=h.editGeometry.on("change",w=>{h._dirty=!0;w.addedVertices&&h.emit("vertex-add",{type:"vertex-add",vertices:w.addedVertices,operation:w.operation});w.removedVertices&&h.emit("vertex-remove",{type:"vertex-remove",vertices:w.removedVertices,operation:w.operation});w.updatedVertices&&h.emit("vertex-update",{type:"vertex-update",vertices:w.updatedVertices,
operation:w.operation})});return h}m._inheritsLoose(a,c);var b=a.prototype;b.destroy=function(){this._listener.remove()};b.splitEdge=function(k,e){return this.editGeometry.apply(new g.SplitEdge(this.editGeometry,k,e))};b.updateVertices=function(k,e,h=1){return this.editGeometry.apply(new A.UpdateVertices(this.editGeometry,k,e),h)};b.moveVertices=function(k,e,h,w,D=1){return this.updateVertices(k,new x.MoveVertex(this.editGeometry.coordinateHelper,e,h,w),D)};b.scaleVertices=function(k,e,h,w,D,p=1,
z=0){return this.updateVertices(k,new l.ScaleVertex(this.editGeometry.coordinateHelper,e,h,w,D,z),p)};b.rotateVertices=function(k,e,h,w=1,D=0){return this.updateVertices(k,new t.RotateVertex(this.editGeometry.coordinateHelper,e,h,D),w)};b.removeVertices=function(k){return this.editGeometry.apply(new q.RemoveVertices(this.editGeometry,k,this._minNumVerticesPerType))};b.appendVertex=function(k){return 0===this.editGeometry.components.length?null:this.editGeometry.apply(new C.AppendVertex(this.editGeometry,
this.editGeometry.components[0],k))};b.offsetEdge=function(k,e,h,w=1){return this.updateVertices([e.left,e.right],new y.OffsetEdgeVertex(this.editGeometry.coordinateHelper,k,e,h),w)};b.canRemoveVertex=function(){return this.editGeometry.components[0].vertices.length>this._minNumVerticesPerType};b.createUndoGroup=function(){const k=new n.UndoGroup;this.editGeometry.apply(k);return{remove(){return k.close()}}};b.undo=function(){return this.editGeometry.undo()};b.redo=function(){return this.editGeometry.redo()};
a.fromGeometry=function(k,e){return new a(B.EditGeometry.fromGeometry(k,e),k.type)};m._createClass(a,[{key:"canUndo",get:function(){return this.editGeometry.canUndo}},{key:"canRedo",get:function(){return this.editGeometry.canRedo}},{key:"geometry",get:function(){if(this._dirty){switch(this.type){case "point":this._geometry=this.editGeometry.toPoint();break;case "polyline":this._geometry=this.editGeometry.toPolyline();break;case "polygon":this._geometry=this.editGeometry.toPolygon()}this._dirty=!1}return this._geometry}},
{key:"_minNumVerticesPerType",get:function(){switch(this.type){case "point":return 1;case "polyline":return 2;case "polygon":return 3;default:return 0}}}]);return a}(v);d.Component=B.Component;d.Edge=B.Edge;d.EditGeometry=B.EditGeometry;d.Vertex=B.Vertex;d.EditGeometryHelper=v;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/interactive/editGeometry/operations/AppendVertex":function(){define(["exports","../../../../core/maybe","../EditGeometry"],function(d,m,v){let B=function(){function C(q,
g,r){this.editGeometry=q;this.component=g;this.pos=r;this.right=this.left=this.originalEdge=this.addedVertex=null}var A=C.prototype;A.apply=function(){let q="redo";m.isNone(this.addedVertex)&&(q="apply",this.addedVertex=new v.Vertex(this.component));const g=this.component.getLastVertex();if(m.isNone(g))this.component.vertices.push(this.addedVertex),this.addedVertex.pos=this.pos,this.addedVertex.index=0;else{let r=null;g.right&&(this.originalEdge=g.right,r=this.originalEdge.right,this.component.edges.splice(this.component.edges.indexOf(this.originalEdge),
1));this.component.vertices.push(this.addedVertex);this.addedVertex.pos=this.pos;m.isNone(this.left)&&(this.left=new v.Edge(this.component,g,this.addedVertex));this.component.edges.push(this.left);g.right=this.left;m.isSome(this.originalEdge)&&m.isSome(r)&&(m.isNone(this.right)&&(this.right=new v.Edge(this.component,this.addedVertex,r)),this.component.edges.push(this.right),r.left=this.right);this.component.updateVertexIndex(this.addedVertex,g.index+1)}this.editGeometry.emit("change",{addedVertices:[this.addedVertex],
operation:q})};A.undo=function(){if(m.isNone(this.addedVertex))return null;this.component.vertices.splice(this.component.vertices.indexOf(this.addedVertex),1);m.isSome(this.left)&&(this.component.edges.splice(this.component.edges.indexOf(this.left),1),this.left.left.right=null);m.isSome(this.right)&&(this.component.edges.splice(this.component.edges.indexOf(this.right),1),this.right.right.left=null);m.isSome(this.originalEdge)&&(this.component.edges.push(this.originalEdge),this.originalEdge.left.right=
this.originalEdge,this.originalEdge.right.left=this.originalEdge);m.isSome(this.left)?this.component.updateVertexIndex(this.left.left,this.left.left.index):this.component.updateVertexIndex(this.addedVertex,0);this.editGeometry.emit("change",{removedVertices:[this.addedVertex],operation:"undo"})};A.accumulate=function(){return!1};return C}();d.AppendVertex=B;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/interactive/editGeometry/operations/UpdateVertices":function(){define(["exports"],
function(d){let m=function(){function v(C,A,q){this.editGeometry=C;this.vertices=A;this.operation=q;this.undone=!1}var B=v.prototype;B.apply=function(){this.vertices.forEach(C=>this.operation.apply(C));this.editGeometry.components.forEach(C=>C.unnormalizeVertexPositions());this.editGeometry.emit("change",{updatedVertices:this.vertices,operation:this.undone?"redo":"apply"})};B.undo=function(){this.vertices.forEach(C=>this.operation.undo(C));this.editGeometry.emit("change",{updatedVertices:this.vertices,
operation:"undo"});this.undone=!0};B.canAccumulate=function(C){if(this.undone||C.vertices.length!==this.vertices.length)return!1;for(let A=0;A<C.vertices.length;++A)if(C.vertices[A]!==this.vertices[A])return!1;return this.operation.canAccumulate(C.operation)};B.accumulate=function(C){return C instanceof v&&this.canAccumulate(C)?(this.vertices.forEach(A=>this.operation.accumulate(A,C.operation)),this.operation.accumulateParams(C.operation),this.editGeometry.components.forEach(A=>A.unnormalizeVertexPositions()),
this.editGeometry.emit("change",{updatedVertices:this.vertices,operation:"apply"}),!0):!1};return v}();d.PerVertexOperation=function(v){this.helper=v};d.UpdateVertices=m;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/interactive/editGeometry/operations/RemoveVertices":function(){define(["exports","../../../../core/maybe","../EditGeometry"],function(d,m,v){let B=function(){function C(q,g,r=0){this.editGeometry=q;this.vertices=g;this.minNumberOfVertices=r;this.removedVertices=null}
var A=C.prototype;A.apply=function(){let q="redo";null==this.removedVertices?(this.removedVertices=[],this.vertices.forEach(g=>{g=this._removeVertex(g);m.isSome(g)&&this.removedVertices.push(g)}),q="apply"):this.removedVertices.forEach(g=>{this._removeVertex(g.removedVertex)});this.editGeometry.emit("change",{removedVertices:this.vertices,operation:q})};A.undo=function(){this.removedVertices.forEach(q=>{this._undoRemoveVertex(q)});this.editGeometry.emit("change",{addedVertices:this.vertices,operation:"undo"})};
A.accumulate=function(){return!1};A._removeVertex=function(q){const g=q.component;if(g.vertices.length<=this.minNumberOfVertices)return null;const r={removedVertex:q,createdEdge:null},u=q.left,x=q.right;g.vertices.splice(g.vertices.indexOf(q),1);u&&(g.edges.splice(g.edges.indexOf(u),1),u.left.right=null);x&&(g.edges.splice(g.edges.indexOf(x),1),x.right.left=null);0===q.index&&x&&0<this.vertices.length&&g.swapVertices(g.vertices.indexOf(x.right),0);u&&x&&(r.createdEdge=new v.Edge(g,u.left,x.right),
g.edges.push(r.createdEdge));x&&g.updateVertexIndex(x.right,x.right.index-1);return r};A._undoRemoveVertex=function(q){const g=q.removedVertex,r=q.removedVertex.component,u=g.left,x=g.right;q.createdEdge&&r.edges.splice(r.edges.indexOf(q.createdEdge),1);r.vertices.push(g);u&&(r.edges.push(u),u.left.right=u);x&&(r.edges.push(x),x.right.left=x);r.updateVertexIndex(g,g.index)};return C}();d.RemoveVertices=B;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/interactive/editGeometry/operations/SplitEdge":function(){define(["exports",
"../../../../core/maybe","../EditGeometry"],function(d,m,v){let B=function(){function C(q,g,r){this.editGeometry=q;this.edge=g;this.t=r;this.right=this.left=this.createdVertex=null}var A=C.prototype;A.apply=function(){let q="redo";const g=this.edge,r=g.component,u=g.component.data,x=g.left,y=g.right;r.edges.splice(r.edges.indexOf(g),1);m.isNone(this.createdVertex)&&(q="apply",this.createdVertex=new v.Vertex(g.component));r.vertices.push(this.createdVertex);this.createdVertex.pos=u.coordinateHelper.lerp(g.left.pos,
g.right.pos,this.t,u.coordinateHelper.createNew());m.isNone(this.left)&&(this.left=new v.Edge(r,x,this.createdVertex));this.left.left.left?r.edges.push(this.left):r.edges.unshift(this.left);x.right=this.left;m.isNone(this.right)&&(this.right=new v.Edge(r,this.createdVertex,y));r.edges.push(this.right);y.left=this.right;r.updateVertexIndex(this.createdVertex,x.index+1);this.editGeometry.emit("change",{addedVertices:[this.createdVertex],operation:q})};A.undo=function(){if(m.isNone(this.createdVertex)||
m.isNone(this.left)||m.isNone(this.right))return null;const q=this.edge,g=q.component,r=this.createdVertex.left.left,u=this.createdVertex.right.right;g.vertices.splice(g.vertices.indexOf(this.createdVertex),1);g.edges.splice(g.edges.indexOf(this.left),1);g.edges.splice(g.edges.indexOf(this.right),1);this.edge.left.left?g.edges.push(this.edge):g.edges.unshift(this.edge);r.right=q;u.left=q;g.updateVertexIndex(r,r.index);this.editGeometry.emit("change",{removedVertices:[this.createdVertex],operation:"undo"})};
A.accumulate=function(){return!1};return C}();d.SplitEdge=B;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/interactive/editGeometry/operations/SetVertexPosition":function(){define(["exports","../../../../core/maybe"],function(d,m){let v=function(){function B(A,q,g){this.editGeometry=A;this.vertex=q;this.pos=g}var C=B.prototype;C.apply=function(){const A=m.isNone(this.originalPosition);A&&(this.originalPosition=this.vertex.pos);this._apply(A?"apply":"redo")};C.undo=function(){this.vertex.pos=
m.unwrap(this.originalPosition);this.editGeometry.emit("change",{updatedVertices:[this.vertex],operation:"undo"})};C.accumulate=function(A){return A instanceof B&&A.vertex===this.vertex?(this.pos=A.pos,this._apply("apply"),!0):!1};C._apply=function(A){this.vertex.pos=this.pos;this.editGeometry.components.forEach(q=>q.unnormalizeVertexPositions());this.editGeometry.emit("change",{updatedVertices:[this.vertex],operation:A})};return B}();d.SetVertexPosition=v;Object.defineProperty(d,"__esModule",{value:!0})})},
"esri/views/interactive/editGeometry/operations/CloseComponent":function(){define(["exports","../../../../core/maybe","../EditGeometry"],function(d,m,v){let B=function(){function C(q,g){this.editGeometry=q;this.component=g;this.createdEdge=null}var A=C.prototype;A.apply=function(){let q="redo";if(m.isNone(this.createdEdge)){q="apply";const g=this.component.getFirstVertex(),r=this.component.getLastVertex();if(this.component.isClosed()||3>this.component.vertices.length||m.isNone(g)||m.isNone(r))return;
this.createdEdge=new v.Edge(this.component,r,g)}this.createdEdge.left.right=this.createdEdge;this.createdEdge.right.left=this.createdEdge;this.component.edges.push(this.createdEdge);this.editGeometry.emit("change",{operation:q})};A.undo=function(){m.isNone(this.createdEdge)||(this.component.edges.splice(this.component.edges.indexOf(this.createdEdge),1),this.createdEdge.left.right=null,this.createdEdge.right.left=null,this.editGeometry.emit("change",{operation:"undo"}))};A.accumulate=function(){return!1};
return C}();d.CloseComponent=B;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/interactive/editGeometry/operations/MoveVertex":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","./UpdateVertices"],function(d,m,v){v=function(B){function C(q,g,r,u){q=B.call(this,q)||this;q.dx=g;q.dy=r;q.dz=u;return q}m._inheritsLoose(C,B);var A=C.prototype;A.move=function(q,g,r,u){this.helper.addDelta(q.pos,g,r,u)};A.apply=function(q){this.move(q,this.dx,this.dy,this.dz)};A.undo=
function(q){this.move(q,-this.dx,-this.dy,-this.dz)};A.canAccumulate=function(q){return q instanceof C};A.accumulate=function(q,g){this.move(q,g.dx,g.dy,g.dz)};A.accumulateParams=function(q){this.dx+=q.dx;this.dy+=q.dy;this.dz+=q.dz};return C}(v.PerVertexOperation);d.MoveVertex=v;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/interactive/editGeometry/operations/OffsetEdgeVertex":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/mathUtils ../../../../core/maybe ../../../../chunks/vec2 ../../../../chunks/vec2f64 ../../../../chunks/vec3 ../../../../chunks/vec3f64 ../../../../geometry/support/plane ../../../../geometry/support/vector ./UpdateVertices ../../../support/geometry2dUtils".split(" "),
function(d,m,v,B,C,A,q,g,r,u,x,y){x=function(l){function n(a,b,k,e=0,h=0){a=l.call(this,a)||this;a.planeType=b;a.edge=k;a.distance=e;a._plane=r.create();a._offsetPlane=r.create();a._minDistance=-Infinity;a._maxDistance=Infinity;0===h&&a._initialize();return a}m._inheritsLoose(n,l);var c=n.prototype;c._initialize=function(){this._initializeNeighbors();this._initializePlane();this._initializeDistanceConstraints()};c._initializeNeighbors=function(){var a,b,k,e;const h=this._toXYZ(this.edge.left.pos),
w=this._toXYZ(null==(a=this.edge.left.left)?void 0:null==(b=a.left)?void 0:b.pos);a=this._toXYZ(this.edge.right.pos);b=this._toXYZ(null==(k=this.edge.right.right)?void 0:null==(e=k.right)?void 0:e.pos);this._edgeDirection=q.direction(g.create(),h,a);this._left=this._computeNeighbor(h,w,this._edgeDirection);this._right=this._computeNeighbor(a,b,this._edgeDirection)};c._toXYZ=function(a){return B.isSome(a)?this.helper.toXYZ(a):null};c._computeNeighbor=function(a,b,k){if(B.isNone(b))return{start:a,end:b,
direction:g.fromValues(-k[1],k[0],0),isOriginalDirection:!0};const e=q.direction(g.create(),a,b),h=!this._passesBisectingAngleThreshold(e,k);return{start:a,end:b,direction:h?this._bisectVectorsPerpendicular(k,e):e,isOriginalDirection:!h}};c._passesBisectingAngleThreshold=function(a,b){a=Math.abs(u.angle(b,a));return a>=t&&a<=Math.PI-t};c._bisectVectorsPerpendicular=function(a,b){a=0>q.dot(a,b)?a:q.negate(g.create(),a);const k=Math.abs(q.dot(a,b));if(!(.001>k||.999<k))return this._bisectDirection(a,
b);b=q.cross(g.create(),a,[0,0,1]);return q.normalize(b,b)};c._bisectDirection=function(a,b){a=q.add(g.create(),a,b);return q.normalize(a,a)};c._initializePlane=function(){const a=this._computeNormalDirection(this._left),b=this._computeNormalDirection(this._right);0>q.dot(a,b)&&q.negate(b,b);r.fromPositionAndNormal(this._left.start,this._bisectDirection(a,b),this._plane)};c._computeNormalDirection=function(a){a=q.cross(g.create(),a.direction,this._edgeDirection);q.normalize(a,a);a=q.cross(g.create(),
this._edgeDirection,a);1===this.planeType&&(a[2]=0);return q.normalize(a,a)};c._initializeDistanceConstraints=function(){B.isSome(this._left.end)&&!this.requiresSplitEdgeLeft&&this._updateDistanceConstraint(r.signedDistance(this._plane,this._left.end));B.isSome(this._right.end)&&!this.requiresSplitEdgeRight&&this._updateDistanceConstraint(r.signedDistance(this._plane,this._right.end));this._updateIntersectDistanceConstraint(this._plane)};c._updateDistanceConstraint=function(a){0>=a&&(this._minDistance=
Math.max(this._minDistance,a));0<=a&&(this._maxDistance=Math.min(this._maxDistance,a))};c._updateIntersectDistanceConstraint=function(a){var b=r.normal(a);const k=this._edgeDirection;var e=q.add(g.create(),this._left.start,this._left.direction);const h=q.add(g.create(),this._right.start,this._right.direction);var w=this._pointInBasis2D(A.create(),b,k,this._left.start),D=this._pointInBasis2D(A.create(),b,k,e),p=this._pointInBasis2D(A.create(),b,k,this._right.start);b=this._pointInBasis2D(A.create(),
b,k,h);[p]=y.intersectLineAndRay({start:D,end:w,type:1},{start:b,end:p,type:1});p&&(w=C.subtract(A.create(),w,D),C.normalize(w,w),D=C.subtract(A.create(),p,D),D=C.dot(w,D),e=q.add(g.create(),e,q.scale(g.create(),this._left.direction,-D)),a=r.signedDistance(a,e),this._updateDistanceConstraint(a))};c._pointInBasis2D=function(a,b,k,e){a[0]=u.projectPointSignedLength(b,e);a[1]=u.projectPointSignedLength(k,e);return a};c._offset=function(a,b){Number.isFinite(this._minDistance)&&(b=Math.max(this._minDistance,
b));Number.isFinite(this._maxDistance)&&(b=Math.min(this._maxDistance,b));r.copy(this._plane,this._offsetPlane);this._offsetPlane[3]-=b;b=(e,h,w)=>B.isSome(h)&&r.intersectLine(this._offsetPlane,e,q.add(g.create(),e,h),w);const k=g.create();(a===this.edge.left?b(this._left.start,this._left.direction,k):b(this._right.start,this._right.direction,k))&&this.helper.copy(this.helper.fromXYZ(k,void 0,this.helper.getM(a.pos)),a.pos)};c.signedDistanceToPoint=function(a){return r.signedDistance(this.plane,this.helper.toXYZ(this.helper.fromPoint(a)))};
c.apply=function(a){this._offset(a,this.distance)};c.undo=function(a){this._offset(a,0)};c.canAccumulate=function(a){return a instanceof n&&this.edge.left.index===a.edge.left.index&&this.edge.right.index===a.edge.right.index&&this.edge.component===a.edge.component&&this._maybeEqualsVec3(this._left.direction,a._left.direction)&&this._maybeEqualsVec3(this._right.direction,a._right.direction)&&q.equals(r.normal(this._plane),r.normal(a._plane))};c.accumulate=function(a,b){this._offset(a,this._plane[3]-
b._plane[3]+b.distance)};c.accumulateParams=function(a){this.distance=a.distance-a._plane[3]+this._plane[3]};c.clone=function(){const a=new n(this.helper,this.planeType,this.edge,this.distance,1);r.copy(this._plane,a._plane);r.copy(this._offsetPlane,a._offsetPlane);a._maxDistance=this._maxDistance;a._minDistance=this._minDistance;a._left=this._cloneNeighbor(this._left);a._right=this._cloneNeighbor(this._right);a._edgeDirection=q.copy(g.create(),this._edgeDirection);return a};c._maybeEqualsVec3=function(a,
b){return B.isNone(a)&&B.isNone(b)||B.isSome(a)&&B.isSome(b)&&q.equals(a,b)};c._cloneNeighbor=function({start:a,end:b,direction:k,isOriginalDirection:e}){return{start:q.copy(g.create(),a),end:B.isSome(b)?q.copy(g.create(),b):null,direction:q.copy(g.create(),k),isOriginalDirection:e}};m._createClass(n,[{key:"plane",get:function(){return this._plane}},{key:"requiresSplitEdgeLeft",get:function(){return!this._left.isOriginalDirection}},{key:"requiresSplitEdgeRight",get:function(){return!this._right.isOriginalDirection}},
{key:"edgeDirection",get:function(){return this._edgeDirection}}]);return n}(x.PerVertexOperation);const t=v.deg2rad(15);d.OffsetEdgeVertex=x;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/geometry/support/plane":function(){define("exports ../../core/mathUtils ../../core/maybe ../../chunks/vec3 ../../chunks/vec3f64 ../../chunks/sphere ./vectorStacks".split(" "),function(d,m,v,B,C,A,q){function g(z=p){return[z[0],z[1],z[2],z[3]]}function r(z,f=g()){return u(z[0],z[1],z[2],z[3],f)}function u(z,
f,E,F,L=g()){L[0]=z;L[1]=f;L[2]=E;L[3]=F;return L}function x(z,f,E){B.copy(E,f);f=B.dot(f,f);1E-5<Math.abs(f-1)&&1E-12<f&&B.scale(E,E,1/Math.sqrt(f));return l(E,z,E)}function y(z,f,E,F=g()){return n(B.subtract(q.sv3d.get(),z,f),B.subtract(q.sv3d.get(),E,f),z,F)}function t(z,f,E,F,L){if(3>z.count)return!1;z.getVec(E,k);let W=F,M=!1;for(;W<z.count-1&&!M;)z.getVec(W,e),W++,M=!B.exactEquals(k,e);if(!M)return!1;W=Math.max(W,L);for(M=!1;W<z.count&&!M;)z.getVec(W,h),W++,B.subtract(w,k,e),B.normalize(w,w),
B.subtract(D,e,h),B.normalize(D,D),M=!B.exactEquals(k,h)&&!B.exactEquals(e,h)&&.99619469809>Math.abs(B.dot(w,D));if(!M)return 0===E&&1===F&&2===L?!1:t(z,f,0,1,2);y(k,e,h,f);return!0}function l(z,f,E){z!==E&&r(z,E);E[3]=-B.dot(E,f);return E}function n(z,f,E,F){z=B.cross(h,f,z);return x(E,z,F)}function c(z,f,E){z=B.scale(q.sv3d.get(),z,B.dot(z,f));B.subtract(E,f,z);return E}function a(z,f){return B.dot(z,f)+z[3]}function b(z,f,E,F,L){const W=B.dot(z,E);if(0===W)return!1;z=-(B.dot(z,f)+z[3])/W;F&1&&
(z=m.clamp(z,0,1));if(!(F&4)&&0>z||!(F&8)&&1<z)return!1;B.add(L,f,B.scale(L,E,z));return!0}const k=C.create(),e=C.create(),h=C.create(),w=C.create(),D=C.create(),p=[0,0,1,0];d.UP=p;d.clip=function(z,f){const E=B.dot(z,f.ray.direction);z=-a(z,f.ray.origin);if(0>z&&0<=E)return!1;if(-1E-6<E&&1E-6>E)return 0<z;if((0>z||0>E)&&!(0>z&&0>E))return!0;z/=E;0<E?z<f.c1&&(f.c1=z):z>f.c0&&(f.c0=z);return f.c0<=f.c1};d.clipInfinite=function(z,f){const E=B.dot(z,f.ray.direction);z=-a(z,f.ray.origin);if(-1E-6<E&&
1E-6>E)return 0<z;z/=E;0<E?z<f.c1&&(f.c1=z):z>f.c0&&(f.c0=z);return f.c0<=f.c1};d.copy=r;d.create=g;d.distance=function(z,f){return Math.abs(a(z,f))};d.fromManyPoints=function(z,f){return t(z,f,0,1,2)};d.fromManyPointsSampleAt=t;d.fromNormalAndOffset=function(z,f,E){B.copy(E,z);E[3]=f;return E};d.fromPoints=y;d.fromPositionAndNormal=x;d.fromValues=u;d.fromVectorsAndPoint=n;d.intersectLine=function(z,f,E,F){E=B.subtract(q.sv3d.get(),E,f);return b(z,f,E,12,F)};d.intersectLineSegment=function(z,f,E){return b(z,
f.origin,f.vector,0,E)};d.intersectLineSegmentClamp=function(z,f,E){return b(z,f.origin,f.vector,1,E)};d.intersectRay=function(z,f,E){return v.isSome(f)?b(z,f.origin,f.direction,8,E):!1};d.isAABBFullyInside=function(z,f){const E=f[0],F=f[1],L=f[2],W=f[3],M=f[4];f=f[5];return 0<=z[0]*(0<z[0]?E:W)+z[1]*(0<z[1]?F:M)+z[2]*(0<z[2]?L:f)+z[3]};d.isPointInside=function(z,f){return 0<=a(z,f)};d.isPointOutside=function(z,f){return 0>a(z,f)};d.isSphereFullyInside=function(z,f){return 0<=a(z,A.getCenter(f))-
f[3]};d.isSphereFullyOutside=function(z,f){return 0>a(z,A.getCenter(f))+f[3]};d.negate=function(z,f){f[0]=-z[0];f[1]=-z[1];f[2]=-z[2];f[3]=-z[3];return f};d.normal=function(z){return z};d.projectPoint=function(z,f,E){const F=B.scale(q.sv3d.get(),z,-z[3]);f=B.subtract(q.sv3d.get(),f,F);z=c(z,f,q.sv3d.get());B.add(E,z,F);return E};d.projectVector=c;d.setOffsetFromPoint=l;d.signedDistance=a;d.wrap=function(z,f,E,F){return u(z,f,E,F,q.sv4d.get())};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/chunks/sphere":function(){define("exports ../core/has ../core/Logger ../core/mathUtils ../core/maybe ./mat4 ./vec3 ./vec3f64 ./vec4 ./vec4f64 ../geometry/support/ray ../geometry/support/vector ../geometry/support/vectorStacks".split(" "),
function(d,m,v,B,C,A,q,g,r,u,x,y,t){function l(){return u.create()}function n(J,K=l()){return r.copy(K,J)}function c(J,K){return u.fromValues(J[0],J[1],J[2],K)}function a(J){return J}function b(J){J[0]=J[1]=J[2]=J[3]=0}function k(J){return J}function e(J){return Array.isArray(J)?J[3]:J}function h(J){return Array.isArray(J)?J:S}function w(J,K,Q,da){return u.fromValues(J,K,Q,da)}function D(J,K,Q){J!==Q&&q.copy(Q,J);Q[3]=J[3]+K;return Q}function p(J,K,Q){Z.error("sphere.setExtent is not yet supported");
return J===Q?Q:n(J,Q)}function z(J,K,Q){if(C.isNone(K))return!1;var da=q.subtract(t.sv3d.get(),K.origin,h(J)),ma=q.dot(K.direction,K.direction);const wa=2*q.dot(K.direction,da);J=q.dot(da,da)-J[3]*J[3];J=wa*wa-4*ma*J;if(0>J)return!1;da=Math.sqrt(J);J=(-wa-da)/(2*ma);ma=(-wa+da)/(2*ma);if(0>J||ma<J&&0<ma)J=ma;if(0>J)return!1;Q&&q.add(Q,K.origin,q.scale(t.sv3d.get(),K.direction,J));return!0}function f(J,K){return z(J,K,null)}function E(J,K,Q){if(z(J,K,Q))return Q;J=F(J,K,t.sv3d.get());q.add(Q,K.origin,
q.scale(t.sv3d.get(),K.direction,q.distance(K.origin,J)/q.length(K.direction)));return Q}function F(J,K,Q){const da=t.sv3d.get(),ma=t.sm4d.get();q.cross(da,K.origin,K.direction);const wa=e(J);q.cross(Q,da,K.origin);q.scale(Q,Q,1/q.length(Q)*wa);J=P(J,K.origin);K=y.angle(K.origin,Q);A.identity(ma);A.rotate(ma,ma,K+J,da);q.transformMat4(Q,Q,ma);return Q}function L(J,K,Q){if(z(J,K,Q))return Q;x.closestPoint(K,h(J),Q);return W(J,Q,Q)}function W(J,K,Q){K=q.subtract(t.sv3d.get(),K,h(J));K=q.scale(t.sv3d.get(),
K,J[3]/q.length(K));return q.add(Q,K,h(J))}function M(J,K){K=q.subtract(t.sv3d.get(),K,h(J));K=q.squaredLength(K);return Math.sqrt(Math.abs(K-J[3]*J[3]))}function P(J,K){K=q.subtract(t.sv3d.get(),K,h(J));K=q.length(K);J=e(J);return B.acosClamped(J/(J+Math.abs(J-K)))}function V(J,K,Q,da){J=q.subtract(N,K,h(J));switch(Q){case 0:return Q=B.cartesianToSpherical(J,N)[2],q.set(da,-Math.sin(Q),Math.cos(Q),0);case 1:return J=B.cartesianToSpherical(J,N),Q=J[1],J=J[2],K=Math.sin(Q),q.set(da,-K*Math.cos(J),
-K*Math.sin(J),Math.cos(Q));case 2:return q.normalize(da,J)}}function H(J,K){K=q.subtract(O,K,h(J));return q.length(K)-J[3]}function R(J,K,Q,da){const ma=H(J,K);J=V(J,K,2,O);Q=q.scale(O,J,Q-ma);return q.add(da,K,Q)}const Z=v.getLogger("esri.geometry.support.sphere"),N=g.create(),S=g.create(),O=g.create();m=Object.freeze({__proto__:null,create:l,copy:n,fromCenterAndRadius:c,wrap:a,clear:b,fromRadius:k,getRadius:e,getCenter:h,fromValues:w,elevate:D,setExtent:p,intersectRay:z,intersectsRay:f,intersectRayClosestSilhouette:E,
closestPointOnSilhouette:F,closestPoint:L,projectPoint:W,distanceToSilhouette:M,angleToSilhouette:P,axisAt:V,altitudeAt:H,setAltitudeAt:R});d.altitudeAt=H;d.angleToSilhouette=P;d.axisAt=V;d.clear=b;d.closestPoint=L;d.closestPointOnSilhouette=F;d.copy=n;d.create=l;d.distanceToSilhouette=M;d.elevate=D;d.fromCenterAndRadius=c;d.fromRadius=k;d.fromValues=w;d.getCenter=h;d.getRadius=e;d.intersectRay=z;d.intersectRayClosestSilhouette=E;d.intersectsRay=f;d.projectPoint=W;d.setAltitudeAt=R;d.setExtent=p;
d.sphere=m;d.wrap=a})},"esri/chunks/mat4":function(){define(["exports","./vec3f64","./common"],function(d,m,v){function B(G,I){G[0]=I[0];G[1]=I[1];G[2]=I[2];G[3]=I[3];G[4]=I[4];G[5]=I[5];G[6]=I[6];G[7]=I[7];G[8]=I[8];G[9]=I[9];G[10]=I[10];G[11]=I[11];G[12]=I[12];G[13]=I[13];G[14]=I[14];G[15]=I[15];return G}function C(G,I,aa,ca,ha,ba,ia,ea,T,U,X,Y,fa,ja,ta,la,qa){G[0]=I;G[1]=aa;G[2]=ca;G[3]=ha;G[4]=ba;G[5]=ia;G[6]=ea;G[7]=T;G[8]=U;G[9]=X;G[10]=Y;G[11]=fa;G[12]=ja;G[13]=ta;G[14]=la;G[15]=qa;return G}
function A(G){G[0]=1;G[1]=0;G[2]=0;G[3]=0;G[4]=0;G[5]=1;G[6]=0;G[7]=0;G[8]=0;G[9]=0;G[10]=1;G[11]=0;G[12]=0;G[13]=0;G[14]=0;G[15]=1;return G}function q(G,I){if(G===I){const aa=I[1],ca=I[2],ha=I[3],ba=I[6],ia=I[7],ea=I[11];G[1]=I[4];G[2]=I[8];G[3]=I[12];G[4]=aa;G[6]=I[9];G[7]=I[13];G[8]=ca;G[9]=ba;G[11]=I[14];G[12]=ha;G[13]=ia;G[14]=ea}else G[0]=I[0],G[1]=I[4],G[2]=I[8],G[3]=I[12],G[4]=I[1],G[5]=I[5],G[6]=I[9],G[7]=I[13],G[8]=I[2],G[9]=I[6],G[10]=I[10],G[11]=I[14],G[12]=I[3],G[13]=I[7],G[14]=I[11],
G[15]=I[15];return G}function g(G,I){const aa=I[0],ca=I[1],ha=I[2],ba=I[3],ia=I[4],ea=I[5],T=I[6],U=I[7],X=I[8],Y=I[9],fa=I[10],ja=I[11],ta=I[12],la=I[13],qa=I[14];I=I[15];const sa=aa*ea-ca*ia,ra=aa*T-ha*ia,na=aa*U-ba*ia,va=ca*T-ha*ea,za=ca*U-ba*ea,Ca=ha*U-ba*T,Da=X*la-Y*ta,Ia=X*qa-fa*ta,Pa=X*I-ja*ta,Oa=Y*qa-fa*la,Qa=Y*I-ja*la,Ka=fa*I-ja*qa;let Ja=sa*Ka-ra*Qa+na*Oa+va*Pa-za*Ia+Ca*Da;if(!Ja)return null;Ja=1/Ja;G[0]=(ea*Ka-T*Qa+U*Oa)*Ja;G[1]=(ha*Qa-ca*Ka-ba*Oa)*Ja;G[2]=(la*Ca-qa*za+I*va)*Ja;G[3]=(fa*
za-Y*Ca-ja*va)*Ja;G[4]=(T*Pa-ia*Ka-U*Ia)*Ja;G[5]=(aa*Ka-ha*Pa+ba*Ia)*Ja;G[6]=(qa*na-ta*Ca-I*ra)*Ja;G[7]=(X*Ca-fa*na+ja*ra)*Ja;G[8]=(ia*Qa-ea*Pa+U*Da)*Ja;G[9]=(ca*Pa-aa*Qa-ba*Da)*Ja;G[10]=(ta*za-la*na+I*sa)*Ja;G[11]=(Y*na-X*za-ja*sa)*Ja;G[12]=(ea*Ia-ia*Oa-T*Da)*Ja;G[13]=(aa*Oa-ca*Ia+ha*Da)*Ja;G[14]=(la*ra-ta*va-qa*sa)*Ja;G[15]=(X*va-Y*ra+fa*sa)*Ja;return G}function r(G,I){const aa=I[0],ca=I[1],ha=I[2],ba=I[3],ia=I[4],ea=I[5],T=I[6],U=I[7],X=I[8],Y=I[9],fa=I[10],ja=I[11],ta=I[12],la=I[13],qa=I[14];
I=I[15];G[0]=ea*(fa*I-ja*qa)-Y*(T*I-U*qa)+la*(T*ja-U*fa);G[1]=-(ca*(fa*I-ja*qa)-Y*(ha*I-ba*qa)+la*(ha*ja-ba*fa));G[2]=ca*(T*I-U*qa)-ea*(ha*I-ba*qa)+la*(ha*U-ba*T);G[3]=-(ca*(T*ja-U*fa)-ea*(ha*ja-ba*fa)+Y*(ha*U-ba*T));G[4]=-(ia*(fa*I-ja*qa)-X*(T*I-U*qa)+ta*(T*ja-U*fa));G[5]=aa*(fa*I-ja*qa)-X*(ha*I-ba*qa)+ta*(ha*ja-ba*fa);G[6]=-(aa*(T*I-U*qa)-ia*(ha*I-ba*qa)+ta*(ha*U-ba*T));G[7]=aa*(T*ja-U*fa)-ia*(ha*ja-ba*fa)+X*(ha*U-ba*T);G[8]=ia*(Y*I-ja*la)-X*(ea*I-U*la)+ta*(ea*ja-U*Y);G[9]=-(aa*(Y*I-ja*la)-X*(ca*
I-ba*la)+ta*(ca*ja-ba*Y));G[10]=aa*(ea*I-U*la)-ia*(ca*I-ba*la)+ta*(ca*U-ba*ea);G[11]=-(aa*(ea*ja-U*Y)-ia*(ca*ja-ba*Y)+X*(ca*U-ba*ea));G[12]=-(ia*(Y*qa-fa*la)-X*(ea*qa-T*la)+ta*(ea*fa-T*Y));G[13]=aa*(Y*qa-fa*la)-X*(ca*qa-ha*la)+ta*(ca*fa-ha*Y);G[14]=-(aa*(ea*qa-T*la)-ia*(ca*qa-ha*la)+ta*(ca*T-ha*ea));G[15]=aa*(ea*fa-T*Y)-ia*(ca*fa-ha*Y)+X*(ca*T-ha*ea);return G}function u(G){const I=G[0],aa=G[1],ca=G[2],ha=G[3],ba=G[4],ia=G[5],ea=G[6],T=G[7],U=G[8],X=G[9],Y=G[10],fa=G[11],ja=G[12],ta=G[13],la=G[14];
G=G[15];return(I*ia-aa*ba)*(Y*G-fa*la)-(I*ea-ca*ba)*(X*G-fa*ta)+(I*T-ha*ba)*(X*la-Y*ta)+(aa*ea-ca*ia)*(U*G-fa*ja)-(aa*T-ha*ia)*(U*la-Y*ja)+(ca*T-ha*ea)*(U*ta-X*ja)}function x(G,I,aa){const ca=I[0],ha=I[1],ba=I[2],ia=I[3],ea=I[4],T=I[5],U=I[6],X=I[7],Y=I[8],fa=I[9],ja=I[10],ta=I[11],la=I[12],qa=I[13],sa=I[14];I=I[15];let ra=aa[0],na=aa[1],va=aa[2],za=aa[3];G[0]=ra*ca+na*ea+va*Y+za*la;G[1]=ra*ha+na*T+va*fa+za*qa;G[2]=ra*ba+na*U+va*ja+za*sa;G[3]=ra*ia+na*X+va*ta+za*I;ra=aa[4];na=aa[5];va=aa[6];za=aa[7];
G[4]=ra*ca+na*ea+va*Y+za*la;G[5]=ra*ha+na*T+va*fa+za*qa;G[6]=ra*ba+na*U+va*ja+za*sa;G[7]=ra*ia+na*X+va*ta+za*I;ra=aa[8];na=aa[9];va=aa[10];za=aa[11];G[8]=ra*ca+na*ea+va*Y+za*la;G[9]=ra*ha+na*T+va*fa+za*qa;G[10]=ra*ba+na*U+va*ja+za*sa;G[11]=ra*ia+na*X+va*ta+za*I;ra=aa[12];na=aa[13];va=aa[14];za=aa[15];G[12]=ra*ca+na*ea+va*Y+za*la;G[13]=ra*ha+na*T+va*fa+za*qa;G[14]=ra*ba+na*U+va*ja+za*sa;G[15]=ra*ia+na*X+va*ta+za*I;return G}function y(G,I,aa){const ca=aa[0],ha=aa[1];aa=aa[2];let ba=void 0,ia=void 0,
ea=void 0,T=void 0,U=void 0,X=void 0,Y=void 0,fa=void 0,ja=void 0,ta=void 0,la=void 0,qa=void 0;I===G?(G[12]=I[0]*ca+I[4]*ha+I[8]*aa+I[12],G[13]=I[1]*ca+I[5]*ha+I[9]*aa+I[13],G[14]=I[2]*ca+I[6]*ha+I[10]*aa+I[14],G[15]=I[3]*ca+I[7]*ha+I[11]*aa+I[15]):(ba=I[0],ia=I[1],ea=I[2],T=I[3],U=I[4],X=I[5],Y=I[6],fa=I[7],ja=I[8],ta=I[9],la=I[10],qa=I[11],G[0]=ba,G[1]=ia,G[2]=ea,G[3]=T,G[4]=U,G[5]=X,G[6]=Y,G[7]=fa,G[8]=ja,G[9]=ta,G[10]=la,G[11]=qa,G[12]=ba*ca+U*ha+ja*aa+I[12],G[13]=ia*ca+X*ha+ta*aa+I[13],G[14]=
ea*ca+Y*ha+la*aa+I[14],G[15]=T*ca+fa*ha+qa*aa+I[15]);return G}function t(G,I,aa){const ca=aa[0],ha=aa[1];aa=aa[2];G[0]=I[0]*ca;G[1]=I[1]*ca;G[2]=I[2]*ca;G[3]=I[3]*ca;G[4]=I[4]*ha;G[5]=I[5]*ha;G[6]=I[6]*ha;G[7]=I[7]*ha;G[8]=I[8]*aa;G[9]=I[9]*aa;G[10]=I[10]*aa;G[11]=I[11]*aa;G[12]=I[12];G[13]=I[13];G[14]=I[14];G[15]=I[15];return G}function l(G,I,aa,ca){let ha=ca[0],ba=ca[1];ca=ca[2];let ia=Math.sqrt(ha*ha+ba*ba+ca*ca);var ea=void 0,T=void 0;let U=void 0,X=void 0,Y=void 0,fa=void 0,ja=void 0,ta=void 0,
la=void 0,qa=void 0,sa=void 0,ra=void 0,na=void 0,va=void 0,za=void 0,Ca=void 0,Da=void 0,Ia=void 0,Pa=void 0,Oa=void 0,Qa=void 0,Ka=void 0;T=ea=void 0;if(ia<v.EPSILON)return null;ia=1/ia;ha*=ia;ba*=ia;ca*=ia;ea=Math.sin(aa);T=Math.cos(aa);U=1-T;X=I[0];Y=I[1];fa=I[2];ja=I[3];ta=I[4];la=I[5];qa=I[6];sa=I[7];ra=I[8];na=I[9];va=I[10];za=I[11];Ca=ha*ha*U+T;Da=ba*ha*U+ca*ea;Ia=ca*ha*U-ba*ea;Pa=ha*ba*U-ca*ea;Oa=ba*ba*U+T;Qa=ca*ba*U+ha*ea;Ka=ha*ca*U+ba*ea;ea=ba*ca*U-ha*ea;T=ca*ca*U+T;G[0]=X*Ca+ta*Da+ra*
Ia;G[1]=Y*Ca+la*Da+na*Ia;G[2]=fa*Ca+qa*Da+va*Ia;G[3]=ja*Ca+sa*Da+za*Ia;G[4]=X*Pa+ta*Oa+ra*Qa;G[5]=Y*Pa+la*Oa+na*Qa;G[6]=fa*Pa+qa*Oa+va*Qa;G[7]=ja*Pa+sa*Oa+za*Qa;G[8]=X*Ka+ta*ea+ra*T;G[9]=Y*Ka+la*ea+na*T;G[10]=fa*Ka+qa*ea+va*T;G[11]=ja*Ka+sa*ea+za*T;I!==G&&(G[12]=I[12],G[13]=I[13],G[14]=I[14],G[15]=I[15]);return G}function n(G,I,aa){const ca=Math.sin(aa);aa=Math.cos(aa);const ha=I[4],ba=I[5],ia=I[6],ea=I[7],T=I[8],U=I[9],X=I[10],Y=I[11];I!==G&&(G[0]=I[0],G[1]=I[1],G[2]=I[2],G[3]=I[3],G[12]=I[12],G[13]=
I[13],G[14]=I[14],G[15]=I[15]);G[4]=ha*aa+T*ca;G[5]=ba*aa+U*ca;G[6]=ia*aa+X*ca;G[7]=ea*aa+Y*ca;G[8]=T*aa-ha*ca;G[9]=U*aa-ba*ca;G[10]=X*aa-ia*ca;G[11]=Y*aa-ea*ca;return G}function c(G,I,aa){const ca=Math.sin(aa);aa=Math.cos(aa);const ha=I[0],ba=I[1],ia=I[2],ea=I[3],T=I[8],U=I[9],X=I[10],Y=I[11];I!==G&&(G[4]=I[4],G[5]=I[5],G[6]=I[6],G[7]=I[7],G[12]=I[12],G[13]=I[13],G[14]=I[14],G[15]=I[15]);G[0]=ha*aa-T*ca;G[1]=ba*aa-U*ca;G[2]=ia*aa-X*ca;G[3]=ea*aa-Y*ca;G[8]=ha*ca+T*aa;G[9]=ba*ca+U*aa;G[10]=ia*ca+X*
aa;G[11]=ea*ca+Y*aa;return G}function a(G,I,aa){const ca=Math.sin(aa);aa=Math.cos(aa);const ha=I[0],ba=I[1],ia=I[2],ea=I[3],T=I[4],U=I[5],X=I[6],Y=I[7];I!==G&&(G[8]=I[8],G[9]=I[9],G[10]=I[10],G[11]=I[11],G[12]=I[12],G[13]=I[13],G[14]=I[14],G[15]=I[15]);G[0]=ha*aa+T*ca;G[1]=ba*aa+U*ca;G[2]=ia*aa+X*ca;G[3]=ea*aa+Y*ca;G[4]=T*aa-ha*ca;G[5]=U*aa-ba*ca;G[6]=X*aa-ia*ca;G[7]=Y*aa-ea*ca;return G}function b(G,I){G[0]=1;G[1]=0;G[2]=0;G[3]=0;G[4]=0;G[5]=1;G[6]=0;G[7]=0;G[8]=0;G[9]=0;G[10]=1;G[11]=0;G[12]=I[0];
G[13]=I[1];G[14]=I[2];G[15]=1;return G}function k(G,I){G[0]=I[0];G[1]=0;G[2]=0;G[3]=0;G[4]=0;G[5]=I[1];G[6]=0;G[7]=0;G[8]=0;G[9]=0;G[10]=I[2];G[11]=0;G[12]=0;G[13]=0;G[14]=0;G[15]=1;return G}function e(G,I,aa){let ca=aa[0],ha=aa[1];aa=aa[2];let ba=Math.sqrt(ca*ca+ha*ha+aa*aa),ia=void 0,ea=void 0,T=void 0;if(ba<v.EPSILON)return null;ba=1/ba;ca*=ba;ha*=ba;aa*=ba;ia=Math.sin(I);ea=Math.cos(I);T=1-ea;G[0]=ca*ca*T+ea;G[1]=ha*ca*T+aa*ia;G[2]=aa*ca*T-ha*ia;G[3]=0;G[4]=ca*ha*T-aa*ia;G[5]=ha*ha*T+ea;G[6]=
aa*ha*T+ca*ia;G[7]=0;G[8]=ca*aa*T+ha*ia;G[9]=ha*aa*T-ca*ia;G[10]=aa*aa*T+ea;G[11]=0;G[12]=0;G[13]=0;G[14]=0;G[15]=1;return G}function h(G,I){const aa=Math.sin(I);I=Math.cos(I);G[0]=1;G[1]=0;G[2]=0;G[3]=0;G[4]=0;G[5]=I;G[6]=aa;G[7]=0;G[8]=0;G[9]=-aa;G[10]=I;G[11]=0;G[12]=0;G[13]=0;G[14]=0;G[15]=1;return G}function w(G,I){const aa=Math.sin(I);I=Math.cos(I);G[0]=I;G[1]=0;G[2]=-aa;G[3]=0;G[4]=0;G[5]=1;G[6]=0;G[7]=0;G[8]=aa;G[9]=0;G[10]=I;G[11]=0;G[12]=0;G[13]=0;G[14]=0;G[15]=1;return G}function D(G,I){const aa=
Math.sin(I);I=Math.cos(I);G[0]=I;G[1]=aa;G[2]=0;G[3]=0;G[4]=-aa;G[5]=I;G[6]=0;G[7]=0;G[8]=0;G[9]=0;G[10]=1;G[11]=0;G[12]=0;G[13]=0;G[14]=0;G[15]=1;return G}function p(G,I,aa){var ca=I[0],ha=I[1],ba=I[2],ia=I[3],ea=ca+ca,T=ha+ha;const U=ba+ba;I=ca*ea;const X=ca*T;ca*=U;const Y=ha*T;ha*=U;ba*=U;ea*=ia;T*=ia;ia*=U;G[0]=1-(Y+ba);G[1]=X+ia;G[2]=ca-T;G[3]=0;G[4]=X-ia;G[5]=1-(I+ba);G[6]=ha+ea;G[7]=0;G[8]=ca+T;G[9]=ha-ea;G[10]=1-(I+Y);G[11]=0;G[12]=aa[0];G[13]=aa[1];G[14]=aa[2];G[15]=1;return G}function z(G,
I){const aa=xa,ca=-I[0],ha=-I[1],ba=-I[2],ia=I[3],ea=I[4],T=I[5],U=I[6],X=I[7],Y=ca*ca+ha*ha+ba*ba+ia*ia;0<Y?(aa[0]=2*(ea*ia+X*ca+T*ba-U*ha)/Y,aa[1]=2*(T*ia+X*ha+U*ca-ea*ba)/Y,aa[2]=2*(U*ia+X*ba+ea*ha-T*ca)/Y):(aa[0]=2*(ea*ia+X*ca+T*ba-U*ha),aa[1]=2*(T*ia+X*ha+U*ca-ea*ba),aa[2]=2*(U*ia+X*ba+ea*ha-T*ca));p(G,I,aa);return G}function f(G,I){G[0]=I[12];G[1]=I[13];G[2]=I[14];return G}function E(G,I){const aa=I[0],ca=I[1],ha=I[2],ba=I[4],ia=I[5],ea=I[6],T=I[8],U=I[9];I=I[10];G[0]=Math.sqrt(aa*aa+ca*ca+
ha*ha);G[1]=Math.sqrt(ba*ba+ia*ia+ea*ea);G[2]=Math.sqrt(T*T+U*U+I*I);return G}function F(G,I){const aa=I[0]+I[5]+I[10];let ca=0;0<aa?(ca=2*Math.sqrt(aa+1),G[3]=.25*ca,G[0]=(I[6]-I[9])/ca,G[1]=(I[8]-I[2])/ca,G[2]=(I[1]-I[4])/ca):I[0]>I[5]&&I[0]>I[10]?(ca=2*Math.sqrt(1+I[0]-I[5]-I[10]),G[3]=(I[6]-I[9])/ca,G[0]=.25*ca,G[1]=(I[1]+I[4])/ca,G[2]=(I[8]+I[2])/ca):I[5]>I[10]?(ca=2*Math.sqrt(1+I[5]-I[0]-I[10]),G[3]=(I[8]-I[2])/ca,G[0]=(I[1]+I[4])/ca,G[1]=.25*ca,G[2]=(I[6]+I[9])/ca):(ca=2*Math.sqrt(1+I[10]-
I[0]-I[5]),G[3]=(I[1]-I[4])/ca,G[0]=(I[8]+I[2])/ca,G[1]=(I[6]+I[9])/ca,G[2]=.25*ca);return G}function L(G,I,aa,ca){var ha=I[0],ba=I[1],ia=I[2],ea=I[3],T=ha+ha,U=ba+ba,X=ia+ia;I=ha*T;const Y=ha*U;ha*=X;const fa=ba*U;ba*=X;ia*=X;T*=ea;U*=ea;ea*=X;X=ca[0];const ja=ca[1];ca=ca[2];G[0]=(1-(fa+ia))*X;G[1]=(Y+ea)*X;G[2]=(ha-U)*X;G[3]=0;G[4]=(Y-ea)*ja;G[5]=(1-(I+ia))*ja;G[6]=(ba+T)*ja;G[7]=0;G[8]=(ha+U)*ca;G[9]=(ba-T)*ca;G[10]=(1-(I+fa))*ca;G[11]=0;G[12]=aa[0];G[13]=aa[1];G[14]=aa[2];G[15]=1;return G}function W(G,
I,aa,ca,ha){var ba=I[0],ia=I[1],ea=I[2],T=I[3],U=ba+ba,X=ia+ia,Y=ea+ea;I=ba*U;var fa=ba*X,ja=ba*Y;ba=ia*X;ia*=Y;var ta=ea*Y;ea=T*U;X*=T;const la=T*Y;var qa=ca[0],sa=ca[1];Y=ca[2];ca=ha[0];T=ha[1];ha=ha[2];U=(1-(ba+ta))*qa;const ra=(fa+la)*qa;qa*=ja-X;fa=(fa-la)*sa;ta=(1-(I+ta))*sa;sa*=ia+ea;ja=(ja+X)*Y;ia=(ia-ea)*Y;I=(1-(I+ba))*Y;G[0]=U;G[1]=ra;G[2]=qa;G[3]=0;G[4]=fa;G[5]=ta;G[6]=sa;G[7]=0;G[8]=ja;G[9]=ia;G[10]=I;G[11]=0;G[12]=aa[0]+ca-(U*ca+fa*T+ja*ha);G[13]=aa[1]+T-(ra*ca+ta*T+ia*ha);G[14]=aa[2]+
ha-(qa*ca+sa*T+I*ha);G[15]=1;return G}function M(G,I){var aa=I[0],ca=I[1],ha=I[2];I=I[3];var ba=aa+aa,ia=ca+ca;const ea=ha+ha;aa*=ba;const T=ca*ba;ca*=ia;const U=ha*ba,X=ha*ia;ha*=ea;ba*=I;ia*=I;I*=ea;G[0]=1-ca-ha;G[1]=T+I;G[2]=U-ia;G[3]=0;G[4]=T-I;G[5]=1-aa-ha;G[6]=X+ba;G[7]=0;G[8]=U+ia;G[9]=X-ba;G[10]=1-aa-ca;G[11]=0;G[12]=0;G[13]=0;G[14]=0;G[15]=1;return G}function P(G,I,aa,ca,ha,ba,ia){const ea=1/(aa-I),T=1/(ha-ca),U=1/(ba-ia);G[0]=2*ba*ea;G[1]=0;G[2]=0;G[3]=0;G[4]=0;G[5]=2*ba*T;G[6]=0;G[7]=0;
G[8]=(aa+I)*ea;G[9]=(ha+ca)*T;G[10]=(ia+ba)*U;G[11]=-1;G[12]=0;G[13]=0;G[14]=ia*ba*2*U;G[15]=0;return G}function V(G,I,aa,ca,ha){I=1/Math.tan(I/2);let ba=void 0;G[0]=I/aa;G[1]=0;G[2]=0;G[3]=0;G[4]=0;G[5]=I;G[6]=0;G[7]=0;G[8]=0;G[9]=0;G[11]=-1;G[12]=0;G[13]=0;G[15]=0;null!=ha&&Infinity!==ha?(ba=1/(ca-ha),G[10]=(ha+ca)*ba,G[14]=2*ha*ca*ba):(G[10]=-1,G[14]=-2*ca);return G}function H(G,I,aa,ca){const ha=Math.tan(I.upDegrees*Math.PI/180),ba=Math.tan(I.downDegrees*Math.PI/180),ia=Math.tan(I.leftDegrees*
Math.PI/180);I=Math.tan(I.rightDegrees*Math.PI/180);const ea=2/(ia+I),T=2/(ha+ba);G[0]=ea;G[1]=0;G[2]=0;G[3]=0;G[4]=0;G[5]=T;G[6]=0;G[7]=0;G[8]=-((ia-I)*ea*.5);G[9]=(ha-ba)*T*.5;G[10]=ca/(aa-ca);G[11]=-1;G[12]=0;G[13]=0;G[14]=ca*aa/(aa-ca);G[15]=0;return G}function R(G,I,aa,ca,ha,ba,ia){const ea=1/(I-aa),T=1/(ca-ha),U=1/(ba-ia);G[0]=-2*ea;G[1]=0;G[2]=0;G[3]=0;G[4]=0;G[5]=-2*T;G[6]=0;G[7]=0;G[8]=0;G[9]=0;G[10]=2*U;G[11]=0;G[12]=(I+aa)*ea;G[13]=(ha+ca)*T;G[14]=(ia+ba)*U;G[15]=1;return G}function Z(G,
I,aa,ca){let ha=void 0,ba=void 0;var ia=void 0,ea=void 0;let T=void 0,U=void 0;var X=void 0,Y=void 0;let fa=void 0,ja=void 0;const ta=I[0],la=I[1];I=I[2];ia=ca[0];ea=ca[1];ca=ca[2];X=aa[0];Y=aa[1];aa=aa[2];if(Math.abs(ta-X)<v.EPSILON&&Math.abs(la-Y)<v.EPSILON&&Math.abs(I-aa)<v.EPSILON)return A(G);X=ta-X;Y=la-Y;fa=I-aa;ja=1/Math.sqrt(X*X+Y*Y+fa*fa);X*=ja;Y*=ja;fa*=ja;ha=ea*fa-ca*Y;ba=ca*X-ia*fa;ia=ia*Y-ea*X;(ja=Math.sqrt(ha*ha+ba*ba+ia*ia))?(ja=1/ja,ha*=ja,ba*=ja,ia*=ja):ia=ba=ha=0;ea=Y*ia-fa*ba;T=
fa*ha-X*ia;U=X*ba-Y*ha;(ja=Math.sqrt(ea*ea+T*T+U*U))?(ja=1/ja,ea*=ja,T*=ja,U*=ja):U=T=ea=0;G[0]=ha;G[1]=ea;G[2]=X;G[3]=0;G[4]=ba;G[5]=T;G[6]=Y;G[7]=0;G[8]=ia;G[9]=U;G[10]=fa;G[11]=0;G[12]=-(ha*ta+ba*la+ia*I);G[13]=-(ea*ta+T*la+U*I);G[14]=-(X*ta+Y*la+fa*I);G[15]=1;return G}function N(G,I,aa,ca){const ha=I[0],ba=I[1];I=I[2];var ia=ca[0];const ea=ca[1];var T=ca[2];ca=ha-aa[0];let U=ba-aa[1];aa=I-aa[2];let X=ca*ca+U*U+aa*aa;0<X&&(X=1/Math.sqrt(X),ca*=X,U*=X,aa*=X);let Y=ea*aa-T*U;T=T*ca-ia*aa;ia=ia*U-
ea*ca;X=Y*Y+T*T+ia*ia;0<X&&(X=1/Math.sqrt(X),Y*=X,T*=X,ia*=X);G[0]=Y;G[1]=T;G[2]=ia;G[3]=0;G[4]=U*ia-aa*T;G[5]=aa*Y-ca*ia;G[6]=ca*T-U*Y;G[7]=0;G[8]=ca;G[9]=U;G[10]=aa;G[11]=0;G[12]=ha;G[13]=ba;G[14]=I;G[15]=1;return G}function S(G){return"mat4("+G[0]+", "+G[1]+", "+G[2]+", "+G[3]+", "+G[4]+", "+G[5]+", "+G[6]+", "+G[7]+", "+G[8]+", "+G[9]+", "+G[10]+", "+G[11]+", "+G[12]+", "+G[13]+", "+G[14]+", "+G[15]+")"}function O(G){return Math.sqrt(G[0]**2+G[1]**2+G[2]**2+G[3]**2+G[4]**2+G[5]**2+G[6]**2+G[7]**
2+G[8]**2+G[9]**2+G[10]**2+G[11]**2+G[12]**2+G[13]**2+G[14]**2+G[15]**2)}function J(G,I,aa){G[0]=I[0]+aa[0];G[1]=I[1]+aa[1];G[2]=I[2]+aa[2];G[3]=I[3]+aa[3];G[4]=I[4]+aa[4];G[5]=I[5]+aa[5];G[6]=I[6]+aa[6];G[7]=I[7]+aa[7];G[8]=I[8]+aa[8];G[9]=I[9]+aa[9];G[10]=I[10]+aa[10];G[11]=I[11]+aa[11];G[12]=I[12]+aa[12];G[13]=I[13]+aa[13];G[14]=I[14]+aa[14];G[15]=I[15]+aa[15];return G}function K(G,I,aa){G[0]=I[0]-aa[0];G[1]=I[1]-aa[1];G[2]=I[2]-aa[2];G[3]=I[3]-aa[3];G[4]=I[4]-aa[4];G[5]=I[5]-aa[5];G[6]=I[6]-aa[6];
G[7]=I[7]-aa[7];G[8]=I[8]-aa[8];G[9]=I[9]-aa[9];G[10]=I[10]-aa[10];G[11]=I[11]-aa[11];G[12]=I[12]-aa[12];G[13]=I[13]-aa[13];G[14]=I[14]-aa[14];G[15]=I[15]-aa[15];return G}function Q(G,I,aa){G[0]=I[0]*aa;G[1]=I[1]*aa;G[2]=I[2]*aa;G[3]=I[3]*aa;G[4]=I[4]*aa;G[5]=I[5]*aa;G[6]=I[6]*aa;G[7]=I[7]*aa;G[8]=I[8]*aa;G[9]=I[9]*aa;G[10]=I[10]*aa;G[11]=I[11]*aa;G[12]=I[12]*aa;G[13]=I[13]*aa;G[14]=I[14]*aa;G[15]=I[15]*aa;return G}function da(G,I,aa,ca){G[0]=I[0]+aa[0]*ca;G[1]=I[1]+aa[1]*ca;G[2]=I[2]+aa[2]*ca;G[3]=
I[3]+aa[3]*ca;G[4]=I[4]+aa[4]*ca;G[5]=I[5]+aa[5]*ca;G[6]=I[6]+aa[6]*ca;G[7]=I[7]+aa[7]*ca;G[8]=I[8]+aa[8]*ca;G[9]=I[9]+aa[9]*ca;G[10]=I[10]+aa[10]*ca;G[11]=I[11]+aa[11]*ca;G[12]=I[12]+aa[12]*ca;G[13]=I[13]+aa[13]*ca;G[14]=I[14]+aa[14]*ca;G[15]=I[15]+aa[15]*ca;return G}function ma(G,I){return G[0]===I[0]&&G[1]===I[1]&&G[2]===I[2]&&G[3]===I[3]&&G[4]===I[4]&&G[5]===I[5]&&G[6]===I[6]&&G[7]===I[7]&&G[8]===I[8]&&G[9]===I[9]&&G[10]===I[10]&&G[11]===I[11]&&G[12]===I[12]&&G[13]===I[13]&&G[14]===I[14]&&G[15]===
I[15]}function wa(G,I){const aa=G[0],ca=G[1],ha=G[2],ba=G[3],ia=G[4],ea=G[5],T=G[6],U=G[7],X=G[8],Y=G[9],fa=G[10],ja=G[11],ta=G[12],la=G[13],qa=G[14];G=G[15];const sa=I[0],ra=I[1],na=I[2],va=I[3],za=I[4],Ca=I[5],Da=I[6],Ia=I[7],Pa=I[8],Oa=I[9],Qa=I[10],Ka=I[11],Ja=I[12],Ha=I[13],Sa=I[14];I=I[15];return Math.abs(aa-sa)<=v.EPSILON*Math.max(1,Math.abs(aa),Math.abs(sa))&&Math.abs(ca-ra)<=v.EPSILON*Math.max(1,Math.abs(ca),Math.abs(ra))&&Math.abs(ha-na)<=v.EPSILON*Math.max(1,Math.abs(ha),Math.abs(na))&&
Math.abs(ba-va)<=v.EPSILON*Math.max(1,Math.abs(ba),Math.abs(va))&&Math.abs(ia-za)<=v.EPSILON*Math.max(1,Math.abs(ia),Math.abs(za))&&Math.abs(ea-Ca)<=v.EPSILON*Math.max(1,Math.abs(ea),Math.abs(Ca))&&Math.abs(T-Da)<=v.EPSILON*Math.max(1,Math.abs(T),Math.abs(Da))&&Math.abs(U-Ia)<=v.EPSILON*Math.max(1,Math.abs(U),Math.abs(Ia))&&Math.abs(X-Pa)<=v.EPSILON*Math.max(1,Math.abs(X),Math.abs(Pa))&&Math.abs(Y-Oa)<=v.EPSILON*Math.max(1,Math.abs(Y),Math.abs(Oa))&&Math.abs(fa-Qa)<=v.EPSILON*Math.max(1,Math.abs(fa),
Math.abs(Qa))&&Math.abs(ja-Ka)<=v.EPSILON*Math.max(1,Math.abs(ja),Math.abs(Ka))&&Math.abs(ta-Ja)<=v.EPSILON*Math.max(1,Math.abs(ta),Math.abs(Ja))&&Math.abs(la-Ha)<=v.EPSILON*Math.max(1,Math.abs(la),Math.abs(Ha))&&Math.abs(qa-Sa)<=v.EPSILON*Math.max(1,Math.abs(qa),Math.abs(Sa))&&Math.abs(G-I)<=v.EPSILON*Math.max(1,Math.abs(G),Math.abs(I))}function ya(G){const I=v.EPSILON,aa=G[0],ca=G[1],ha=G[2],ba=G[4],ia=G[5],ea=G[6],T=G[8],U=G[9];G=G[10];return Math.abs(1-(aa*aa+ba*ba+T*T))<=I&&Math.abs(1-(ca*ca+
ia*ia+U*U))<=I&&Math.abs(1-(ha*ha+ea*ea+G*G))<=I}const xa=m.create();m=Object.freeze({__proto__:null,copy:B,set:C,identity:A,transpose:q,invert:g,adjoint:r,determinant:u,multiply:x,translate:y,scale:t,rotate:l,rotateX:n,rotateY:c,rotateZ:a,fromTranslation:b,fromScaling:k,fromRotation:e,fromXRotation:h,fromYRotation:w,fromZRotation:D,fromRotationTranslation:p,fromQuat2:z,getTranslation:f,getScaling:E,getRotation:F,fromRotationTranslationScale:L,fromRotationTranslationScaleOrigin:W,fromQuat:M,frustum:P,
perspective:V,perspectiveFromFieldOfView:H,ortho:R,lookAt:Z,targetTo:N,str:S,frob:O,add:J,subtract:K,multiplyScalar:Q,multiplyScalarAndAdd:da,exactEquals:ma,equals:wa,isOrthoNormal:ya,mul:x,sub:K});d.add=J;d.adjoint=r;d.copy=B;d.determinant=u;d.equals=wa;d.exactEquals=ma;d.frob=O;d.fromQuat=M;d.fromQuat2=z;d.fromRotation=e;d.fromRotationTranslation=p;d.fromRotationTranslationScale=L;d.fromRotationTranslationScaleOrigin=W;d.fromScaling=k;d.fromTranslation=b;d.fromXRotation=h;d.fromYRotation=w;d.fromZRotation=
D;d.frustum=P;d.getRotation=F;d.getScaling=E;d.getTranslation=f;d.identity=A;d.invert=g;d.isOrthoNormal=ya;d.lookAt=Z;d.mat4=m;d.mul=x;d.multiply=x;d.multiplyScalar=Q;d.multiplyScalarAndAdd=da;d.ortho=R;d.perspective=V;d.perspectiveFromFieldOfView=H;d.rotate=l;d.rotateX=n;d.rotateY=c;d.rotateZ=a;d.scale=t;d.set=C;d.str=S;d.sub=K;d.subtract=K;d.targetTo=N;d.translate=y;d.transpose=q})},"esri/geometry/support/ray":function(){define(["exports","../../core/ObjectStack","../../chunks/vec3","../../chunks/vec3f64",
"./vectorStacks"],function(d,m,v,B,C){function A(u){return u?{origin:B.clone(u.origin),direction:B.clone(u.direction)}:{origin:B.create(),direction:B.create()}}function q(u,x,y=A()){v.copy(y.origin,u);v.copy(y.direction,x);return y}function g(u,x){u=v.cross(C.sv3d.get(),v.normalize(C.sv3d.get(),u.direction),v.subtract(C.sv3d.get(),x,u.origin));return v.dot(u,u)}const r=new m.ObjectStack(function(){return{origin:null,direction:null}});d.closestPoint=function(u,x,y){x=v.dot(u.direction,v.subtract(y,
x,u.origin));v.add(y,u.origin,v.scale(y,u.direction,x));return y};d.copy=function(u,x=A()){return q(u.origin,u.direction,x)};d.create=A;d.distance=function(u,x){return Math.sqrt(g(u,x))};d.distance2=g;d.fromPoints=function(u,x,y=A()){v.copy(y.origin,u);v.subtract(y.direction,x,u);return y};d.fromValues=q;d.wrap=function(u,x){const y=r.get();y.origin=u;y.direction=x;return y};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/core/ObjectStack":function(){define(["exports","./maybe","./nextTick"],
function(d,m,v){let B=function(){function C(q){this.allocator=q;this.items=[];this.itemsPtr=0;this.tickHandle=v.before(()=>this.reset());this.grow()}var A=C.prototype;A.destroy=function(){this.tickHandle&&(this.tickHandle.remove(),this.tickHandle=m.nullifyNonnullableForDispose(this.tickHandle));this.items=m.nullifyNonnullableForDispose(this.items)};A.get=function(){0===this.itemsPtr&&v(()=>{});this.itemsPtr===this.items.length&&this.grow();return this.items[this.itemsPtr++]};A.reset=function(){this.items.length=
Math.min(Math.min(3*Math.max(8,this.itemsPtr),this.itemsPtr+3072),this.items.length);this.itemsPtr=0};A.grow=function(){for(let q=0;q<Math.max(8,Math.min(this.items.length,1024));q++)this.items.push(this.allocator())};return C}();d.ObjectStack=B;d.default=B;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/geometry/support/vectorStacks":function(){define(["exports","../../core/VectorStack"],function(d,m){const v=m.VectorStack.createVec2f64(),B=m.VectorStack.createVec3f64(),C=m.VectorStack.createVec4f64(),
A=m.VectorStack.createMat3f64(),q=m.VectorStack.createMat4f64();m=m.VectorStack.createQuatf64();d.sm3d=A;d.sm4d=q;d.sq4d=m;d.sv2d=v;d.sv3d=B;d.sv4d=C;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/core/VectorStack":function(){define("exports ../chunks/_rollupPluginBabelHelpers ./maybe ./nextTick ../chunks/mat3f64 ../chunks/mat4f64 ../chunks/quatf64 ../chunks/vec2f64 ../chunks/vec3f64 ../chunks/vec4f64".split(" "),function(d,m,v,B,C,A,q,g,r,u){let x=function(){function y(l,n,c){this.itemByteSize=
l;this.itemCreate=n;this.buffers=[];this.items=[];this.itemsPtr=this.itemsPerBuffer=0;this.itemsPerBuffer=Math.ceil(c/this.itemByteSize);this.tickHandle=B.before(()=>this.reset())}var t=y.prototype;t.destroy=function(){this.tickHandle&&(this.tickHandle.remove(),this.tickHandle=v.nullifyNonnullableForDispose(this.tickHandle));this.itemsPtr=0;this.items=v.nullifyNonnullableForDispose(this.items);this.buffers=v.nullifyNonnullableForDispose(this.buffers)};t.get=function(){0===this.itemsPtr&&B(()=>{});
const l=Math.floor(this.itemsPtr/this.itemsPerBuffer);for(;this.buffers.length<=l;){const n=new ArrayBuffer(this.itemsPerBuffer*this.itemByteSize);for(let c=0;c<this.itemsPerBuffer;++c)this.items.push(this.itemCreate(n,c*this.itemByteSize));this.buffers.push(n)}return this.items[this.itemsPtr++]};t.reset=function(){const l=2*(Math.floor(this.itemsPtr/this.itemsPerBuffer)+1);for(;this.buffers.length>l;)this.buffers.pop(),this.items.length=this.buffers.length*this.itemsPerBuffer;this.itemsPtr=0};y.createVec2f64=
function(l=4096){return new y(16,g.createView,l)};y.createVec3f64=function(l=4096){return new y(24,r.createView,l)};y.createVec4f64=function(l=4096){return new y(32,u.createView,l)};y.createMat3f64=function(l=4096){return new y(72,C.createView,l)};y.createMat4f64=function(l=4096){return new y(128,A.createView,l)};y.createQuatf64=function(l=4096){return new y(32,q.createView,l)};m._createClass(y,[{key:"test",get:function(){return{size:this.buffers.length*this.itemsPerBuffer*this.itemByteSize}}}]);
return y}();d.VectorStack=x;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/chunks/mat3f64":function(){define(["exports"],function(d){function m(){return[1,0,0,0,1,0,0,0,1]}function v(q){return[q[0],q[1],q[2],q[3],q[4],q[5],q[6],q[7],q[8]]}function B(q,g,r,u,x,y,t,l,n){return[q,g,r,u,x,y,t,l,n]}function C(q,g){return new Float64Array(q,g,9)}var A=Object.freeze({__proto__:null,create:m,clone:v,fromValues:B,createView:C});d.clone=v;d.create=m;d.createView=C;d.fromValues=B;d.mat3f64=A})},"esri/chunks/mat4f64":function(){define(["exports"],
function(d){function m(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function v(g){return[g[0],g[1],g[2],g[3],g[4],g[5],g[6],g[7],g[8],g[9],g[10],g[11],g[12],g[13],g[14],g[15]]}function B(g,r,u,x,y,t,l,n,c,a,b,k,e,h,w,D){return[g,r,u,x,y,t,l,n,c,a,b,k,e,h,w,D]}function C(g,r){return new Float64Array(g,r,16)}const A=m();var q=Object.freeze({__proto__:null,create:m,clone:v,fromValues:B,createView:C,IDENTITY:A});d.IDENTITY=A;d.clone=v;d.create=m;d.createView=C;d.fromValues=B;d.mat4f64=q})},"esri/chunks/quatf64":function(){define(["exports"],
function(d){function m(){return[0,0,0,1]}function v(g){return[g[0],g[1],g[2],g[3]]}function B(g,r,u,x){return[g,r,u,x]}function C(g,r){return new Float64Array(g,r,4)}const A=m();var q=Object.freeze({__proto__:null,create:m,clone:v,fromValues:B,createView:C,IDENTITY:A});d.IDENTITY=A;d.clone=v;d.create=m;d.createView=C;d.fromValues=B;d.quatf64=q})},"esri/geometry/support/vector":function(){define(["exports","../../core/mathUtils","../../chunks/vec3","../../chunks/vec3f64"],function(d,m,v,B){const C=
B.create(),A=B.create();d.angle=function(q,g){q=v.dot(q,g)/(v.length(q)*v.length(g));return-m.acosClamped(q)};d.angleAroundAxis=function(q,g,r){v.normalize(C,q);v.normalize(A,g);q=v.dot(C,A);q=m.acosClamped(q);g=v.cross(C,C,A);return 0>v.dot(g,r)?2*Math.PI-q:q};d.projectPoint=function(q,g,r){g=v.dot(q,g)/v.dot(q,q);return v.scale(r,q,g)};d.projectPointSignedLength=function(q,g){return v.dot(q,g)/v.length(q)};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/support/geometry2dUtils":function(){define(["exports",
"../../core/mathUtils","../../chunks/vec2","../../chunks/vec2f64"],function(d,m,v,B){function C(t,l){return t[0]*l[1]-t[1]*l[0]}function A(t,l,n){l=v.dot(n,l)/v.squaredLength(n);return v.scale(t,n,l)}function q(t,l,n,c,a=n){v.subtract(r,c,n);v.subtract(x,l,a);A(y,x,r);return v.add(t,a,y)}function g(t,l,n,c){v.subtract(r,l,n);l=c/v.length(r);return v.scaleAndAdd(t,n,r,l)}const r=B.create(),u=B.create(),x=B.create(),y=B.create();d.cross=C;d.intersectCircleAndPoint=function(t,l,n){g(x,n,t,l);return m.floatEqualAbsolute(x[0],
n[0])&&m.floatEqualAbsolute(x[1],n[1])?[B.clone(n)]:[]};d.intersectLineAndPoint=function(t,l){q(x,l,t.start,t.end);return m.floatEqualAbsolute(x[0],l[0])&&m.floatEqualAbsolute(x[1],l[1])?[B.clone(l)]:[]};d.intersectLineAndRay=function(t,l){const n=t.start;var c=l.start,a=l.end;const b=v.subtract(r,t.end,n);var k=v.subtract(u,a,c);a=C(b,k);if(1E-6>=Math.abs(a))return[];c=v.subtract(x,n,c);k=C(k,c)/a;a=C(b,c)/a;if(0<=k){if(0<=a||1===l.type)return[v.scaleAndAdd(y,n,b,k)]}else if(1===t.type&&(0<=a||1===
l.type))return[v.scaleAndAdd(y,n,b,k)];return[]};d.intersectLineLikeAndCircle=function(t,l,n){const c=[],a=v.subtract(r,t.end,t.start);var b=v.subtract(u,t.start,l);l=v.squaredLength(a);const k=2*v.dot(a,b);n=v.squaredLength(b)-n*n;n=k*k-4*l*n;0===n?(l=-k/(2*l),(1===t.type||0<=l)&&c.push(v.scaleAndAdd(y,t.start,a,l))):0<n&&(n=Math.sqrt(n),b=(-k+n)/(2*l),(1===t.type||0<=b)&&c.push(v.scaleAndAdd(y,t.start,a,b)),l=(-k-n)/(2*l),(1===t.type||0<=l)&&c.push(v.scaleAndAdd(x,t.start,a,l)));return c};d.pointToLineDistance=
function(t,l,n){return Math.abs((l[0]-t[0])*(n[1]-t[1])-(l[1]-t[1])*(n[0]-t[0]))/v.distance(l,n)};d.projectPoint=A;d.projectPointToCircle=g;d.projectPointToLine=q;d.projectPointToRay=function(t,l,n,c){v.subtract(r,c,n);v.subtract(x,l,n);l=v.dot(r,x)/v.squaredLength(r);return 0<l?v.scaleAndAdd(t,n,r,l):v.copy(t,n)};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/interactive/editGeometry/operations/RotateVertex":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers",
"../../../../core/arrayUtils","./UpdateVertices"],function(d,m,v,B){B=function(C){function A(g,r,u,x=0){g=C.call(this,g)||this;g.origin=r;g.angle=u;g.accumulationType=x;return g}m._inheritsLoose(A,C);var q=A.prototype;q.rotate=function(g,r){this.helper.rotate(g.pos,this.origin,r)};q.apply=function(g){this.rotate(g,this.angle)};q.undo=function(g){this.rotate(g,-this.angle)};q.canAccumulate=function(g){return g instanceof A&&v.equals(this.origin,g.origin)};q.accumulate=function(g,r){this.rotate(g,1===
r.accumulationType?r.angle-this.angle:r.angle)};q.accumulateParams=function(g){this.angle=1===g.accumulationType?g.angle:this.angle+g.angle};return A}(B.PerVertexOperation);d.RotateVertex=B;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/interactive/editGeometry/operations/ScaleVertex":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/arrayUtils ../../../../chunks/vec2 ../../../../chunks/vec2f64 ./UpdateVertices".split(" "),function(d,m,v,B,C,
A){A=function(q){function g(u,x,y,t,l,n=0){u=q.call(this,u)||this;u.origin=x;u.axis1=y;u.factor1=t;u.factor2=l;u.accumulationType=n;u.axis2=B.set(C.create(),y[1],-y[0]);return u}m._inheritsLoose(g,q);var r=g.prototype;r.scale=function(u,x,y){this.helper.scale(u.pos,this.origin,this.axis1,x);this.helper.scale(u.pos,this.origin,this.axis2,y)};r.apply=function(u){this.scale(u,this.factor1,this.factor2)};r.undo=function(u){this.scale(u,1/this.factor1,1/this.factor2)};r.canAccumulate=function(u){return u instanceof
g&&v.equals(this.origin,u.origin)&&v.equals(this.axis1,u.axis1)};r.accumulate=function(u,x){1===x.accumulationType?this.scale(u,x.factor1/this.factor1,x.factor2/this.factor2):this.scale(u,x.factor1,x.factor2)};r.accumulateParams=function(u){const x=1===u.accumulationType;this.factor1=x?u.factor1:this.factor1*u.factor1;this.factor2=x?u.factor2:this.factor2*u.factor2};return g}(A.PerVertexOperation);d.ScaleVertex=A;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/interactive/editGeometry/operations/UndoGroup":function(){define(["exports"],
function(d){let m=function(){function v(){this.operations=[];this.closed=!1}var B=v.prototype;B.close=function(){this.closed=!0};B.apply=function(){for(const C of this.operations)C.apply()};B.undo=function(){for(let C=this.operations.length-1;0<=C;C--)this.operations[C].undo()};B.accumulate=function(C){if(this.closed)return!1;const A=this.operations.length?this.operations[this.operations.length-1]:null;A&&A.accumulate(C)||(this.operations.push(C),C.apply());return!0};return v}();d.UndoGroup=m;Object.defineProperty(d,
"__esModule",{value:!0})})},"esri/views/interactive/snapping/SnappingContext":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers"],function(d,m){let v=function(){function B(C){this.visualizer=this.excludeFeature=this.vertexHandle=null;this.geometry=C.geometry;this.elevationInfo=C.elevationInfo;this.pointer=C.pointer;this.vertexHandle=C.vertexHandle;this.excludeFeature=C.excludeFeature;this.visualizer=C.visualizer}m._createClass(B,[{key:"coordinateHelper",get:function(){return this.geometry.editGeometry.coordinateHelper}}]);
return B}();d.SnappingContext=v;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/draw/input/DrawEvents":function(){define(["exports"],function(d){let m=function(){function q(g,r,u,x){this.view=g;this.native=r;this.vertexIndex=u;this.vertices=x;this.defaultPrevented=!1;this.type="vertex-add"}q.prototype.preventDefault=function(){this.defaultPrevented=!0};return q}(),v=function(){function q(g,r,u,x){this.view=g;this.native=r;this.vertexIndex=u;this.vertices=x;this.defaultPrevented=!1;
this.type="vertex-update"}q.prototype.preventDefault=function(){this.defaultPrevented=!0};return q}(),B=function(){function q(g,r,u,x){this.view=g;this.native=r;this.vertexIndex=u;this.vertices=x;this.defaultPrevented=!1;this.type="vertex-remove"}q.prototype.preventDefault=function(){this.defaultPrevented=!0};return q}(),C=function(){function q(g,r,u,x,y=null){this.view=g;this.native=r;this.vertexIndex=u;this.vertices=x;this.mapPoint=y;this.coordinates=null;this.defaultPrevented=!1;this.type="cursor-update";
this.coordinates=1===x.length?x[0]:null}q.prototype.preventDefault=function(){this.defaultPrevented=!0};return q}(),A=function(){function q(g,r){this.native=g;this.vertices=r;this.coordinates=null;this.defaultPrevented=!1;this.type="draw-complete";this.coordinates=1===r.length?r[0]:null}q.prototype.preventDefault=function(){this.defaultPrevented=!0};return q}();d.CursorUpdateEvent=C;d.DrawCompleteEvent=A;d.VertexAddEvent=m;d.VertexRemoveEvent=B;d.VertexUpdateEvent=v;Object.defineProperty(d,"__esModule",
{value:!0})})},"esri/views/interactive/keybindings":function(){define(["exports"],function(d){d.SKETCH_KEYS={redo:"r",undo:"z",center:"Alt",constraint:"Shift",snappingToggle:"Control",cancel:"Escape",delete:["Backspace","Delete"],complete:"Enter",vertexAdd:"f",pan:" "};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/draw/PointDrawAction":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/deprecate ../../core/Handles ../../core/Logger ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../3d/interactive/editingTools/draw/DrawTool ./DrawAction ./input/DrawEvents ../input/InputManager ../interactive/keybindings ../support/screenUtils ../../geometry/Point".split(" "),
function(d,m,v,B,C,A,q,g,r,u,x,y,t,l,n,c,a,b,k,e){d.PointDrawAction=function(h){function w(p){p=h.call(this,p)||this;p._addVertexOnPointerUp=!1;p._activePointerId=null;p._viewHandles=new A;return p}m._inheritsLoose(w,h);var D=w.prototype;D.initialize=function(){"2d"===this.view.type?this._addViewHandles():this._addDrawTool(this.view)};D.destroy=function(){"2d"===this.view.type?(this._removeViewHandles(),this._viewHandles.destroy()):this._removeDrawTool();this.emit("destroy")};D.complete=function(){"2d"===
this.view.type?this._cursorScreenPoint&&this._completeDrawing():this._drawTool.completeCreateOperation()};D._addViewHandles=function(){this._removeViewHandles();this._viewHandles.add([this.view.on("pointer-down",p=>{this._shouldHandlePointerEvent(p)&&(this._snappingTask=g.abortMaybe(this._snappingTask),this._activePointerId=p.pointerId,this._addVertexOnPointerUp=!0,this._cursorScreenPoint=k.createScreenPointFromEvent(p),"touch"===p.pointerType&&this._updateCursor(p.native))},a.ViewEventPriorities.TOOL),
this.view.on("pointer-move",p=>{this._snappingTask=g.abortMaybe(this._snappingTask);this._cursorScreenPoint=k.createScreenPointFromEvent(p);"touch"!==p.pointerType&&this._updateCursor(p.native)},a.ViewEventPriorities.TOOL),this.view.on("pointer-drag",p=>{this._shouldHandlePointerEvent(p)&&(this._snappingTask=g.abortMaybe(this._snappingTask),this._addVertexOnPointerUp=!1)},a.ViewEventPriorities.TOOL),this.view.on("pointer-up",p=>{this._shouldHandlePointerEvent(p)&&(this._snappingTask=g.abortMaybe(this._snappingTask),
this._activePointerId=null,this._addVertexOnPointerUp?(p.stopPropagation(),this._vertexAddHandler(p)):this._updateCursor(p.native,"touch"===p.pointerType))},a.ViewEventPriorities.TOOL),this.view.on("drag",["Shift"],p=>{p.stopPropagation()},a.ViewEventPriorities.TOOL),this.view.on("key-down",p=>{p.key===b.SKETCH_KEYS.complete&&this._cursorScreenPoint&&(this._snappingTask=g.abortMaybe(this._snappingTask),this._vertexAddHandler(p))},a.ViewEventPriorities.TOOL)])};D._removeViewHandles=function(){this._viewHandles.removeAll()};
D._addDrawTool=function(p){this._drawTool=new l.DrawTool({view:p,elevationInfo:this.elevationInfo,hasZ:this.hasZ,geometryType:"point",mode:"click"});this.view.toolViewManager.tools.push(this._drawTool);this.view.activeTool=this._drawTool;this._drawTool.on("cursor-update",z=>{1===z.vertices.length&&this.emit("cursor-update",new c.CursorUpdateEvent(this.view,null,z.vertices[0].vertexIndex,this._drawTool.getVertexCoords()))});this._drawTool.on("complete",z=>{this.emit("draw-complete",new c.DrawCompleteEvent(null,
this._drawTool.getVertexCoords()));this._removeDrawTool()})};D._removeDrawTool=function(){g.isSome(this._drawTool)&&(this.view.tools.remove(this._drawTool),this._drawTool.destroy(),this._drawTool=null)};D._addVertex=function(p){p=this._coordinateHelper.fromArray(p);this._isDuplicateOfLastVertex(p)||(this._lastVertexUnsnapped=this._stagedVertexUnsnapped,this._popCursorVertex(),this._editGeometry.appendVertex(p),this.notifyChange("vertices"),this._completeDrawing())};D._updateCursor=function(p,z=!1){this._popCursorVertex();
if(this._cursorScreenPoint){var f=this.getCoordsAndPointFromScreenPoint(this._cursorScreenPoint);if(g.isSome(f)&&!z){this._pushCursorVertex(f.vertex);const E=()=>new c.CursorUpdateEvent(this.view,p,this._activeComponent.vertices.length,this.vertices,g.isSome(this._stagedVertex)?new e(this._stagedVertex):null);this.emit("cursor-update",E());g.isSome(this._snappingTask)&&this._snappingTask.promise.then(F=>{F.valid&&this.emit("cursor-update",E())},()=>{})}}};D._completeDrawing=function(p){this._activePointerId=
null;this._popCursorVertex();this._snappingTask=g.abortMaybe(this._snappingTask);g.isSome(this._snappingManager)&&this._snappingManager.doneSnapping();p=new c.DrawCompleteEvent(p,this.vertices);this.emit("draw-complete",p);p.defaultPrevented||this._removeViewHandles()};D._shouldHandlePointerEvent=function(p){return("mouse"!==p.pointerType||0===p.button)&&(g.isNone(this._activePointerId)||this._activePointerId===p.pointerId)};m._createClass(w,[{key:"coordinates",get:function(){C.deprecatedProperty(q.getLogger("esri.views.draw.PointDrawAction"),
"coordinates",{replacement:"vertices",version:"4.19"});return this.vertices[0]}}]);return w}(n);v.__decorate([r.property({readOnly:!0})],d.PointDrawAction.prototype,"coordinates",null);d.PointDrawAction=v.__decorate([t.subclass("esri.views.draw.PointDrawAction")],d.PointDrawAction);Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/3d/interactive/editingTools/draw/DrawTool":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/tslib.es6 ../../../../../core/Evented ../../../../../core/maybe ../../../../../core/accessorSupport/decorators/property ../../../../../core/has ../../../../../core/accessorSupport/ensureType ../../../../../core/Logger ../../../../../core/jsonMap ../../../../../core/accessorSupport/decorators/subclass ./DrawOperation ./drawSurfaces ../../../../interactive/InteractiveToolBase".split(" "),
function(d,m,v,B,C,A,q,g,r,u,x,y,t,l){d.DrawTool=function(n){function c(b){b=n.call(this,b)||this;b.drawOperation=null;b.hasZ=!0;b.defaultZ=0;b.elevationInfo=null;b.snapToScene=null;b.mode=null;b.geometryType=null;b.type="draw-3d";return b}m._inheritsLoose(c,n);var a=c.prototype;a.initialize=function(){const b=C.unwrapOr(this.elevationInfo,{mode:this.hasZ?"absolute-height":"on-the-ground",offset:0});this.drawOperation=new y.DrawOperation({view:this.view,manipulators:this.manipulators,geometryType:this.geometryType,
drawingMode:this.mode,hasZ:this.hasZ,defaultZ:this.defaultZ,snapToSceneEnabled:this.snapToScene,sceneDrawSurface:new t.SceneDrawSurface(this.view,b),elevationDrawSurface:new t.ElevationDrawSurface(b,this.defaultZ,this.view),hasM:!1,elevationInfo:b});this.drawOperation.on("vertex-add",k=>this.onVertexAdd(k));this.drawOperation.on("vertex-remove",k=>this.onVertexRemove(k));this.drawOperation.on("vertex-update",k=>this.onVertexUpdate(k));this.drawOperation.on("cursor-update",k=>this.onCursorUpdate(k));
this.drawOperation.on("complete",k=>this.onComplete(k));this.complete()};a.destroy=function(){this.drawOperation.destroy();this.drawOperation=null;this._set("view",null)};a.onInputEvent=function(b){this.drawOperation.onInputEvent(b)};a.reset=function(){};a.redo=function(){this.drawOperation.redo()};a.undo=function(){this.drawOperation.undo()};a.completeCreateOperation=function(){this.drawOperation.complete()};a.activate=function(){};a.deactivate=function(){this.drawOperation.isCompleted||this.drawOperation.cancel()};
a.getVertexCoords=function(){return this.drawOperation.vertices};a.onVertexAdd=function(b){this.emit("vertex-add",b)};a.onVertexRemove=function(b){this.emit("vertex-remove",b)};a.onVertexUpdate=function(b){this.emit("vertex-update",b)};a.onCursorUpdate=function(b){this.emit("cursor-update",b)};a.onComplete=function(b){this.emit("complete",b)};m._createClass(c,[{key:"updating",get:function(){var b,k;return null!=(b=null==(k=this.drawOperation)?void 0:k.updating)?b:!1}},{key:"enabled",set:function(b){this.drawOperation.interactive=
b;this._set("enabled",b)}},{key:"canRedo",get:function(){return this.drawOperation.canRedo}},{key:"canUndo",get:function(){return this.drawOperation.canUndo}}]);return c}(B.EventedMixin(l.InteractiveToolBase));v.__decorate([A.property()],d.DrawTool.prototype,"drawOperation",void 0);v.__decorate([A.property({readOnly:!0})],d.DrawTool.prototype,"updating",null);v.__decorate([A.property({constructOnly:!0,nonNullable:!0})],d.DrawTool.prototype,"view",void 0);v.__decorate([A.property({value:!0})],d.DrawTool.prototype,
"enabled",null);v.__decorate([A.property({constructOnly:!0})],d.DrawTool.prototype,"hasZ",void 0);v.__decorate([A.property({constructOnly:!0,nonNullable:!0})],d.DrawTool.prototype,"defaultZ",void 0);v.__decorate([A.property({constructOnly:!0})],d.DrawTool.prototype,"elevationInfo",void 0);v.__decorate([A.property()],d.DrawTool.prototype,"snapToScene",void 0);v.__decorate([A.property({constructOnly:!0})],d.DrawTool.prototype,"mode",void 0);v.__decorate([A.property({constructOnly:!0})],d.DrawTool.prototype,
"geometryType",void 0);v.__decorate([A.property({readOnly:!0})],d.DrawTool.prototype,"type",void 0);d.DrawTool=v.__decorate([x.subclass("esri.views.3d.interactive.editingTools.draw.DrawTool")],d.DrawTool);Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/3d/interactive/editingTools/draw/DrawOperation":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/tslib.es6 ../../../../../geometry ../../../../../core/Evented ../../../../../core/HandleOwner ../../../../../core/Handles ../../../../../core/lang ../../../../../core/maybe ../../../../../core/promiseUtils ../../../../../core/screenUtils ../../../../../core/accessorSupport/decorators/property ../../../../../core/accessorSupport/ensureType ../../../../../core/has ../../../../../core/Logger ../../../../../core/jsonMap ../../../../../core/accessorSupport/decorators/subclass ../../../../../layers/graphics/dehydratedFeatureComparison ../../SnappingDragPipelineStep ../../SnappingVisualizer3D ./DrawManipulator ../../../../draw/DrawingMode ../../../../interactive/coordinateHelper ../../../../interactive/dragEventPipeline ../../../../interactive/editGeometry/EditGeometryHelper ../../../../interactive/snapping/SnappingContext ../../../../support/Scheduler ../../../../interactive/editGeometry/EditGeometry ../../../../../geometry/Point".split(" "),
function(d,m,v,B,C,A,q,g,r,u,x,y,t,l,n,c,a,b,k,e,h,w,D,p,z,f,E,F,L){d.DrawOperation=function(M){function P(H){H=M.call(this,H)||this;H._manipulator=null;H._stagedVertex=null;H.elevationInfo=null;H.snapToSceneEnabled=null;H._handles=new q;H._snappingPipeline=new k.SnappingPipeline;H._createOperationCompleted=!1;H._pointerDownStates=new Set;H._snappingTask=null;return H}m._inheritsLoose(P,M);var V=P.prototype;V.initialize=function(){var H,R;this.coordinateHelper=D.createCoordinateHelper(this.hasZ,this.hasM,
this.view.spatialReference,this.view.viewingMode);var Z=null==(H=this.view)?void 0:null==(R=H.resourceController)?void 0:R.scheduler;this._frameTask=Z?Z.registerTask(E.TaskPriority.SNAPPING):E.ImmediateTask;this._editGeometry=new z.EditGeometryHelper(new F.EditGeometry(this.coordinateHelper),"segment"===this.geometryType?"polyline":this.geometryType);this._activeComponent=new F.Component(this._editGeometry.editGeometry);this._editGeometry.editGeometry.components.push(this._activeComponent);this._editGeometry.on(["vertex-add",
"vertex-update","vertex-remove"],N=>{const S=N.vertices.map(J=>({componentIndex:0,vertexIndex:J.index,coordinates:this.coordinateHelper.toArray(J.pos)})),O=S.map(J=>J.coordinates);switch(N.type){case "vertex-add":this.emit(N.type,{...N,added:O,vertices:S});break;case "vertex-update":this.emit(N.type,{...N,updated:O,vertices:S});break;case "vertex-remove":this.emit(N.type,{...N,removed:O,vertices:S})}});this._manipulator=new h.DrawManipulator({grabbableForEvent:N=>"click"!==this.drawingMode?!0:"touch"===
N.pointerType&&this._snappingEnabled&&1===this._pointerDownStates.size});this.manipulators.add(this._manipulator);this._manipulator.grabbable="point"!==this.geometryType;H=this.createManipulatorDragPipeline(this._manipulator);R=this._manipulator.events.on("immediate-double-click",N=>{this._manipulator.dragging||"point"===this.geometryType||(this.complete(),N.stopPropagation())});Z=this._manipulator.events.on("immediate-click",N=>{if(!this._manipulator.dragging){var S=this._activeComponent,O=this._closeOnClickVertexIndex(N.screenPoint);
if(r.isSome(O))this.discardStagedVertex(),this.complete();else if(O=this._screenToMap(N.screenPoint),r.isSome(O))switch(this.drawingMode){case "freehand":"point"===this.geometryType&&(this.hasStagedVertex?this.commitStagedVertex():this._editGeometry.appendVertex(this.coordinateHelper.fromPoint(O)),this.complete());break;case "click":case "hybrid":this._snappingTask=r.abortMaybe(this._snappingTask),this.hasStagedVertex?this.commitStagedVertex():this._editGeometry.appendVertex(this.coordinateHelper.fromPoint(O)),
("point"===this.geometryType||"segment"===this.geometryType&&2===S.vertices.length||"segment"===this.geometryType&&"hybrid"===this.drawingMode&&1===S.vertices.length)&&this.complete()}N.stopPropagation()}});this._handles.add([H,Z,R])};V.createManipulatorDragPipeline=function(H){switch(this.drawingMode){case "click":return this.createManipulatorDragPipelineClick(H);case "freehand":return this.createManipulatorDragPipelineFreehand(H);case "hybrid":return this.createManipulatorDragPipelineHybrid(H)}};
V.createManipulatorDragPipelineClick=function(H){return p.createManipulatorDragEventPipeline(H,(R,Z,N,S)=>{const O="touch"===S&&this._snappingEnabled;!this.isCompleted&&O&&(Z.next(this._screenToMapDragEventStep()).next(J=>{"start"===J.action&&(this.stagedVertex=J.mapStart,("segment"===this.geometryType||O&&0===this.numVertices)&&this.commitStagedVertex());return J}).next(this._snappingPipeline.createSnapDragEventPipelineStep({predicate:()=>O,cancel:N,snappingManager:this.snappingManager,snappingContext:new f.SnappingContext({geometry:this._editGeometry,
elevationInfo:this.elevationInfo,pointer:S,visualizer:new e.SnappingVisualizer3D}),updatingHandles:this.updatingHandles}),this._snappingPipeline.next).next(J=>{O&&(this.stagedVertex=J.mapEnd,"end"===J.action&&this.commitStagedVertex());return J}).next(J=>{"end"!==J.action||"segment"!==this.geometryType&&"point"!==this.geometryType||this.complete();return J}),N.next(()=>{O&&r.isSome(this.snappingManager)&&this.snappingManager.doneSnapping()}))})};V.createManipulatorDragPipelineFreehand=function(H){return p.createManipulatorDragEventPipeline(H,
(R,Z)=>{this.isCompleted||Z.next(this._screenToMapDragEventStep()).next(N=>{"start"===N.action&&(this.stagedVertex=N.mapStart,"segment"===this.geometryType&&this.commitStagedVertex());return N}).next(N=>{switch(N.action){case "start":case "update":this.stagedVertex=N.mapEnd;"polygon"!==this.geometryType&&"polyline"!==this.geometryType||this.commitStagedVertex();break;case "end":this.complete()}return N})})};V.createManipulatorDragPipelineHybrid=function(H){return p.createManipulatorDragEventPipeline(H,
(R,Z)=>{this.isCompleted||Z.next(this._screenToMapDragEventStep()).next(N=>{"start"===N.action&&(this.stagedVertex=N.mapStart,this.commitStagedVertex());return N}).next(N=>{switch(N.action){case "start":case "update":this.stagedVertex=N.mapEnd;"polygon"!==this.geometryType&&"polyline"!==this.geometryType||this.commitStagedVertex();break;case "end":"segment"!==this.geometryType&&"point"!==this.geometryType||this.complete()}return N})})};V.destroy=function(){this._handles.destroy();this._handles=null;
this._editGeometry.destroy();this._frameTask.remove()};V.onInputEvent=function(H){switch(H.type){case "pointer-down":this._pointerDownStates.add(H.pointerId);break;case "pointer-up":this._pointerDownStates.delete(H.pointerId)}switch(H.type){case "pointer-move":return this._onPointerMove(H);case "hold":return this._onHold(H)}};V.redo=function(){this._editGeometry.redo()};V.undo=function(){r.isSome(this.snappingManager)&&this.snappingManager.doneSnapping();this._editGeometry.undo()};V.complete=function(H=
!1){r.abortMaybe(this._snappingTask);r.isSome(this.snappingManager)&&this.snappingManager.doneSnapping();"polyline"===this.geometryType||"polygon"===this.geometryType?this.discardStagedVertex():this.commitStagedVertex();this._createOperationCompleted=!("polyline"===this.geometryType&&2>this.numVertices||"polygon"===this.geometryType&&3>this.numVertices);(this.isCompleted||H)&&this.emit("complete",{vertices:this.vertices.map((R,Z)=>({componentIndex:0,vertexIndex:Z,coordinates:R})),aborted:H,type:"complete"})};
V.cancel=function(){this.complete(!0)};V.commitStagedVertex=function(){this._snappingTask=r.abortMaybe(this._snappingTask);if(r.isSome(this._stagedVertex)){const H=this._stagedVertex;this._stagedVertex=null;this._editGeometry.appendVertex(this.coordinateHelper.fromPoint(H))}};V.discardStagedVertex=function(){this._stagedVertex=null};V._onPointerMove=function(H){var R=this;r.abortMaybe(this._snappingTask);if(!(this._manipulator.dragging||this._pointerDownStates.has(H.pointerId)||this._manipulator.grabbing)&&
this._manipulator.interactive){var Z=x.createScreenPoint(H.x,H.y),N=this._closeOnClickVertexIndex(Z);if(r.isSome(N))this.discardStagedVertex(),Z={componentIndex:0,vertexIndex:N,coordinates:this.coordinateHelper.toArray(this._activeComponent.vertices[N].pos)},this.emit("cursor-update",{updated:null,vertices:[Z],operation:"apply",type:"vertex-update"});else{const S=this._screenToMap(Z);this._manipulator.cursor=r.isSome(S)?"crosshair":null;if(r.isSome(S))if(r.isSome(this.snappingManager)){const O=this.snappingManager,
J=new f.SnappingContext({geometry:this._editGeometry,elevationInfo:this.elevationInfo,pointer:H.pointerType,visualizer:new e.SnappingVisualizer3D});this.stagedVertex=O.update(S,J);this._snappingTask=u.createTask(function(){var K=m._asyncToGenerator(function*(Q){const da=yield R._frameTask.schedule(()=>O.snap(S,J,Q),Q);da.valid&&(yield R._frameTask.schedule(()=>{R.stagedVertex=da.apply()},Q))});return function(Q){return K.apply(this,arguments)}}());this.updatingHandles.addPromise(this._snappingTask.promise)}else this.stagedVertex=
S}H.stopPropagation()}};V._onHold=function(H){r.abortMaybe(this._snappingTask);"click"===this.drawingMode&&"touch"===H.pointerType&&this._snappingEnabled&&(this.stagedVertex=H.mapPoint);H.stopPropagation()};V._screenToMapDragEventStep=function(){let H=null;return R=>{"start"===R.action&&(H=this._screenToMap(R.screenStart));if(r.isNone(H))return null;const Z=this._screenToMap(R.screenEnd);return r.isSome(Z)?{...R,mapStart:H,mapEnd:Z}:null}};V._screenToMap=function(H){return this._getDrawSurface().screenToMap(H)};
V._mapToScreen=function(H){return this._getDrawSurface().mapToScreen(H)};V._getDrawSurface=function(){if(!this.coordinateHelper.hasZ)return this.elevationDrawSurface.defaultZ=null,this.elevationDrawSurface;let H=this.defaultZ,R=!1;r.isSome(this.elevationInfo)&&"absolute-height"===this.elevationInfo.mode&&(R=!0);r.isSome(this.snapToSceneEnabled)&&(R=this.snapToSceneEnabled);r.isSome(this.elevationInfo)&&"on-the-ground"===this.elevationInfo.mode&&(R=!1);const Z=this._activeComponent.vertices.length;
("segment"===this.geometryType||"polygon"===this.geometryType)&&0<Z&&(H=this.coordinateHelper.getZ(this._activeComponent.vertices[0].pos),R=!1);if(R)return this.sceneDrawSurface;this.elevationDrawSurface.defaultZ=H;return this.elevationDrawSurface};V._vertexWithinPointerDistance=function(H,R){const Z=this._mapToScreen(H);r.isSome(Z)?(H=Z.x-R.x,R=Z.y-R.y,R=25>=H*H+R*R):R=!1;return R};V._closeOnClickVertexIndex=function(H){const R=this._activeComponent;if("polygon"===this.geometryType&&2<R.vertices.length){if(this._vertexWithinPointerDistance(this.coordinateHelper.toPoint(R.vertices[0].pos,
W),H))return 0;if(this._vertexWithinPointerDistance(this.coordinateHelper.toPoint(R.vertices[R.vertices.length-1].pos,W),H))return R.vertices.length-1}return null};m._createClass(P,[{key:"drawingMode",set:function(H){this._set("drawingMode",null!=H?H:w.defaultDrawingMode)}},{key:"updating",get:function(){return this.updatingHandles.updating}},{key:"isCompleted",get:function(){return this._createOperationCompleted}},{key:"_snappingEnabled",get:function(){return r.isSome(this.snappingManager)&&this.snappingManager.options.effectiveEnabled}},
{key:"canRedo",get:function(){return this._editGeometry.canRedo}},{key:"canUndo",get:function(){return this._editGeometry.canUndo}},{key:"interactive",get:function(){return this._manipulator.interactive},set:function(H){this._manipulator.interactive=H}},{key:"numVertices",get:function(){return r.isSome(this._stagedVertex)?this._activeComponent.vertices.length+1:this._activeComponent.vertices.length}},{key:"numCommittedVertices",get:function(){return this._activeComponent.vertices.length}},{key:"vertices",
get:function(){const H=this.committedVertices;r.isSome(this._stagedVertex)&&H.push(this.coordinateHelper.pointToArray(this._stagedVertex));return H}},{key:"committedVertices",get:function(){return this._activeComponent.vertices.map(H=>this.coordinateHelper.toArray(H.pos))}},{key:"spatialReference",get:function(){return this.view.spatialReference}},{key:"hasStagedVertex",get:function(){return r.isSome(this._stagedVertex)}},{key:"stagedVertex",get:function(){return this._stagedVertex},set:function(H){if(r.isNone(H))this.discardStagedVertex();
else{if(r.isNone(this._stagedVertex))this._stagedVertex=g.clone(H);else{if(b.pointEquals(this._stagedVertex,H))return;this._stagedVertex.x=H.x;this._stagedVertex.y=H.y;this._stagedVertex.z=H.z;this._stagedVertex.m=H.m;this._stagedVertex.hasZ=H.hasZ;this._stagedVertex.hasM=H.hasM;this._stagedVertex.spatialReference=H.spatialReference}this.emit("cursor-update",{updated:null,vertices:[{componentIndex:0,vertexIndex:this._activeComponent.vertices.length,coordinates:this.coordinateHelper.pointToArray(H)}],
operation:"apply",type:"vertex-update"})}}}]);return P}(C.EventedMixin(A.HandleOwner));v.__decorate([y.property({constructOnly:!0})],d.DrawOperation.prototype,"view",void 0);v.__decorate([y.property({value:w.defaultDrawingMode})],d.DrawOperation.prototype,"drawingMode",null);v.__decorate([y.property({constructOnly:!0})],d.DrawOperation.prototype,"geometryType",void 0);v.__decorate([y.property({constructOnly:!0})],d.DrawOperation.prototype,"elevationInfo",void 0);v.__decorate([y.property()],d.DrawOperation.prototype,
"snapToSceneEnabled",void 0);v.__decorate([y.property({constructOnly:!0})],d.DrawOperation.prototype,"manipulators",void 0);v.__decorate([y.property({constructOnly:!0})],d.DrawOperation.prototype,"hasZ",void 0);v.__decorate([y.property({constructOnly:!0})],d.DrawOperation.prototype,"hasM",void 0);v.__decorate([y.property()],d.DrawOperation.prototype,"defaultZ",void 0);v.__decorate([y.property({constructOnly:!0})],d.DrawOperation.prototype,"sceneDrawSurface",void 0);v.__decorate([y.property({constructOnly:!0})],
d.DrawOperation.prototype,"elevationDrawSurface",void 0);v.__decorate([y.property({constructOnly:!0})],d.DrawOperation.prototype,"snappingManager",void 0);v.__decorate([y.property({readOnly:!0})],d.DrawOperation.prototype,"updating",null);d.DrawOperation=v.__decorate([a.subclass("esri.views.3d.interactive.editingTools.draw3D.DrawOperation")],d.DrawOperation);const W=new L({x:0,y:0,z:0});Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/3d/interactive/SnappingDragPipelineStep":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../core/promiseUtils ../../../layers/graphics/dehydratedFeatureComparison ../../interactive/dragEventPipeline ../../interactive/snapping/SnappingContext ../../support/Scheduler".split(" "),
function(d,m,v,B,C,A,q,g){let r=function(){function u(){this.next=new A.EventPipeline}u.prototype.createSnapDragEventPipelineStep=function({predicate:x=()=>!0,cancel:y,snappingManager:t,snappingContext:l,updatingHandles:n}){var c=this;if(v.isNone(t))return e=>e;let a=null,b=null;const k=()=>{a=v.abortMaybe(a);t.doneSnapping();v.isSome(b)&&b.frameTask.remove();b=null};y.next(e=>{k();return e});this.next=new A.EventPipeline;return e=>{if(!x(e))return e;a=v.abortMaybe(a);if("start"===e.action){const h=
"3d"===t.view.type?t.view.resourceController.scheduler.registerTask(g.TaskPriority.SNAPPING):g.ImmediateTask;b={context:new q.SnappingContext({geometry:l.geometry,elevationInfo:l.elevationInfo,pointer:l.pointer,vertexHandle:v.isSome(e.info)?e.info.handle:null,excludeFeature:l.excludeFeature,visualizer:l.visualizer}),originalPos:v.isSome(e.snapOrigin)?l.coordinateHelper.createDehydratedPoint(e.snapOrigin):e.mapStart,frameTask:h}}if(v.isSome(b)){const h=b.context.coordinateHelper.createDehydratedPoint(b.context.coordinateHelper.fromArray([b.originalPos.x,
b.originalPos.y,b.originalPos.z]));h.x+=e.mapEnd.x-e.mapStart.x;h.y+=e.mapEnd.y-e.mapStart.y;const w=e.mapStart.x-b.originalPos.x,D=e.mapStart.y-b.originalPos.y,p={...e,action:"udpate"},z=b.context,f=t.update(h,b.context);e.mapEnd.x=f.x+w;e.mapEnd.y=f.y+D;if("end"!==e.action){const E=b.frameTask;a=B.createTask(function(){var F=m._asyncToGenerator(function*(L){const W=yield E.schedule(()=>t.snap(h,z,L),L);if(W.valid){const M=yield E.schedule(()=>W.apply(),L);C.pointEquals(M,f)||(p.mapEnd.x=M.x+w,p.mapEnd.y=
M.y+D,c.next.execute(p))}});return function(L){return F.apply(this,arguments)}}());n.addPromise(a.promise)}}"end"===e.action&&k();return e}};return u}();d.SnappingPipeline=r;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/interactive/dragEventPipeline":function(){define("exports ../../core/handleUtils ../../core/lang ../../core/mathUtils ../../core/maybe ../../core/screenUtils ../../chunks/vec3f64 ../../geometry/projection ../draw/support/drawUtils".split(" "),function(d,m,v,B,C,A,
q,g,r){function u(h,w){let D=null,p=null;return z=>{if("cancel"===z.action)C.isSome(p)&&(p.execute({action:"cancel"}),p=D=null);else{var f={action:z.action,screenStart:z.start,screenEnd:z.screenPoint};"start"===z.action&&C.isNone(D)&&(D=new e,p=new e,w(h,D,p,z.pointerType,f));C.isSome(D)&&D.execute(f);"end"===z.action&&C.isSome(D)&&(p=D=null)}}}function x(h,w){return h.events.on("drag",u(h,w))}function y(h,w){let D=null;return p=>{"start"===p.action&&(D=l(h,p.mapStart.spatialReference,w));if(C.isNone(D))return null;
const z=p.mapEnd.x-p.mapStart.x,f=p.mapEnd.y-p.mapStart.y,E=p.mapEnd.z-p.mapStart.z;D.move(z,f,E);return{...p,translationX:z,translationY:f,translationZ:E}}}function t(h,w){return C.isNone(h)?null:h.spatialReference.equals(w)?h.clone():g.project(h,w)}function l(h,w,D){const p=h.geometry;if(C.isNone(p))return null;if("mesh"===p.type)return n(h,p,w,D);const z=t(p,w),f=p.spatialReference;return C.isNone(z)?null:{move:(E,F,L)=>{E=r.move(z.clone(),E,F,L);E.spatialReference.equals(f)?h.geometry=E:h.geometry=
g.project(E,f)}}}function n(h,w,D,p){if(C.isSome(w.transform))return c(h,w,w.transform,D);if(!w.spatialReference.equals(D))return null;let z=0,f=0,E=0;return{move:(F,L,W)=>{var M=F-z;const P=L-f,V=W-E;if(M||P||V)M=w.origin.clone().offset(M,P,V),w.centerAt(M,{geographic:1===p}),h.notifyGeometryChanged(),z=F,f=L,E=W}}}function c(h,w,D,p){const z=D.getOriginPoint(w.spatialReference),f=t(z,p),E=w.spatialReference;return C.isNone(f)?null:{move:(F,L,W)=>{F=r.move(f.clone(),F,L,W);F.spatialReference.equals(E)?
D.origin=q.fromValues(F.x,F.y,F.z):(F=g.project(F,E),C.isSome(F)&&(D.origin=q.fromValues(F.x,F.y,F.z)));h.notifyGeometryChanged()}}}function a(h,w){const D=new Map;for(const p of w)D.set(p,v.clone(h[p]));return p=>{D.forEach((z,f)=>{h[f]=z});return p}}function b(h){return C.isSome(h.geometry)&&"mesh"===h.geometry.type?k(h,h.geometry):a(h,["geometry"])}function k(h,w){const D=C.isSome(w.transform)?w.transform.clone():null,p=w.vertexAttributes.clonePositional();return z=>{w.transform=D;w.vertexAttributes=
p;h.notifyGeometryChanged();return z}}let e=function(){function h(){this.execute=()=>{}}h.prototype.next=function(w,D=new h){C.isSome(w)&&(this.execute=p=>{p=w(p);C.isSome(p)&&D.execute(p)});return D};return h}();d.EventPipeline=e;d.addMapDelta=function(){let h=0,w=0,D=0;return p=>{"start"===p.action&&(h=p.mapStart.x,w=p.mapStart.y,D=p.mapStart.z);const z=p.mapEnd.x-h,f=p.mapEnd.y-w,E=p.mapEnd.z-D;h=p.mapEnd.x;w=p.mapEnd.y;D=p.mapEnd.z;return{...p,mapDeltaX:z,mapDeltaY:f,mapDeltaZ:E,mapDeltaSpatialReference:p.mapStart.spatialReference}}};
d.addScreenDelta=function(){let h=0,w=0;return D=>{"start"===D.action&&(h=D.screenStart.x,w=D.screenStart.y);const p=D.screenEnd.x-h,z=D.screenEnd.y-w;h=D.screenEnd.x;w=D.screenEnd.y;return{...D,screenDeltaX:p,screenDeltaY:z}}};d.constrainToMapAxis=function(h,w){const D=[h.x,h.y,h.z],p=[Math.cos(w),Math.sin(w)];h=Math.sqrt(p[0]*p[0]+p[1]*p[1]);if(0===h)return null;p[0]/=h;p[1]/=h;const z=f=>{const E=(f.x-D[0])*p[0]+(f.y-D[1])*p[1];f.x=D[0]+E*p[0];f.y=D[1]+E*p[1]};return f=>{z(f.mapStart);z(f.mapEnd);
return f}};d.createDragEventPipelineCallback=u;d.createManipulatorDragEventPipeline=x;d.createManipulatorDragEventPipelineMany=function(h,w){const D=[];for(const p of h)D.push(x(p,w));return m.handlesGroup(D)};d.dragAtLocation=function(h,w){let D=null,p=0,z=0;return f=>{"start"===f.action&&(D=h.toScreen(w),0>D.x||D.x>h.width||0>D.y||D.y>h.height?D=null:(p=f.screenStart.x-D.x,z=f.screenStart.y-D.y));if(null==D)return null;var E=B.clamp(f.screenEnd.x-p,0,h.width);const F=B.clamp(f.screenEnd.y-z,0,h.height);
E=A.createScreenPoint(E,F);f.screenStart=D;f.screenEnd=E;return f}};d.dragGraphic=y;d.dragGraphicMany=function(h,w){const D=h.map(p=>C.unwrap(y(p,w))).filter(p=>C.isSome(p));return p=>{const z=p.mapEnd.x-p.mapStart.x,f=p.mapEnd.y-p.mapStart.y,E=p.mapEnd.z-p.mapStart.z;D.forEach(F=>F(p));return{...p,translationX:z,translationY:f,translationZ:E}}};d.resetGraphic=b;d.resetGraphicMany=function(h){const w=h.map(D=>C.unwrap(b(D))).filter(D=>C.isSome(D));return D=>{w.forEach(p=>p(D));return D}};d.resetProperties=
a;d.resetSymbol=function(h){return a(h,["symbol"])};d.screenToMap=function(h,w=null,D){let p=null;const z=C.isSome(w)&&!h.spatialReference.equals(w)?E=>C.isSome(E)?g.project(E,w):E:E=>E,f={exclude:[],...D};return E=>{"start"===E.action&&(p=z(h.toMap(E.screenStart,f)));if(C.isNone(p))return null;const F=z(h.toMap(E.screenEnd,f));return C.isSome(F)?{...E,mapStart:p,mapEnd:F}:null}};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/geometry/projection":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../core/Error ../core/mathUtils ../core/maybe ../core/promiseUtils ../core/unitUtils ../chunks/mat4 ../chunks/vec3 ../chunks/vec3f64 ./Extent ./Multipoint ../chunks/pe ./Point ./Polygon ./Polyline ./projectionEllipsoid ./support/aaBoundingRect ./support/Ellipsoid ./support/geodesicConstants ./support/GeographicTransformation ./support/spatialReferenceUtils".split(" "),
function(d,m,v,B,C,A,q,g,r,u,x,y,t,l,n,c,a,b,k,e,h,w,D){function p(){return!!ra&&l.isLoaded()}function z(ka){A.isNone(va)&&(va=Promise.all([l.load(),(new Promise(function(pa,oa){d(["../chunks/geometryEngineBase"],pa,oa)})).then(function(pa){return pa.geometryEngineBase}),new Promise(function(pa,oa){d(["./geometryAdapters/hydrated"],pa,oa)})]));return va.then(([,pa,{hydratedAdapter:oa}])=>{q.throwIfAborted(ka);na=oa;ra=pa.default;ra._enableProjection(l.pe)})}function f(ka,pa,oa,ua,Aa=null){if(A.isNone(oa)||
A.isNone(ua))return pa;if(F(oa,ua,Aa))return pa.map(Ba=>W(Ba,oa,ua));if(A.isNone(Aa)){const Ba=w.cacheKey(oa,ua);void 0!==za[Ba]?Aa=za[Ba]:(Aa=E(oa,ua,null),A.isNone(Aa)&&(Aa=new w),za[Ba]=Aa)}if(A.isNone(ra))throw new Ca;return ra._project(ka,pa,oa,ua,Aa)}function E(ka,pa,oa=null){if(A.isNone(ra))throw new Ca;if(A.isNone(ka)||A.isNone(pa))return null;ka=ra._getTransformation(na,ka,pa,oa,null==oa?void 0:oa.spatialReference);return null!==ka?w.fromGE(ka):null}function F(ka,pa,oa){return oa?!1:D.equals(ka,
pa)?!0:D.isValid(ka)&&D.isValid(pa)&&!!la(ka,pa,Oa)}function L(){L=v._asyncToGenerator(function*(ka,pa,oa,ua){if(!p())if(Array.isArray(ka))for(const {source:Aa,dest:Ba,geographicTransformation:Ea}of ka){if(!F(Aa,Ba,Ea))return z(ua)}else if(!F(ka,pa,oa))return z(ua)});return L.apply(this,arguments)}function W(ka,pa,oa){if(!ka)return ka;if("x"in ka){var ua=new n;return M(ka,pa,ua,oa)?ua:null}return"xmin"in ka?(ua=new y,R(ka,pa,ua,oa)?ua:null):"rings"in ka?(ua=new c,H(ka,pa,ua,oa)?ua:null):"paths"in
ka?(ua=new a,V(ka,pa,ua,oa)?ua:null):"points"in ka?(ua=new t,P(ka,pa,ua,oa)?ua:null):null}function M(ka,pa,oa,ua,Aa=0){Ga[0]=ka.x;Ga[1]=ka.y;const Ba=ka.z;Ga[2]=void 0!==Ba?Ba:Aa;if(!O(Ga,pa,0,Ga,ua,0,1))return!1;oa.x=Ga[0];oa.y=Ga[1];oa.spatialReference=ua;void 0===Ba?(oa.z=void 0,oa.hasZ=!1):(oa.z=Ga[2],oa.hasZ=!0);void 0===ka.m?(oa.m=void 0,oa.hasM=!1):(oa.m=ka.m,oa.hasM=!0);return!0}function P(ka,pa,oa,ua,Aa=0){const {points:Ba,hasZ:Ea,hasM:Fa}=ka;ka=[];const Na=Ba.length,Ma=[];for(var La of Ba)Ma.push(La[0],
La[1],Ea?La[2]:Aa);if(!O(Ma,pa,0,Ma,ua,0,Na))return!1;for(pa=0;pa<Na;++pa){Aa=3*pa;La=Ma[Aa];const Ra=Ma[Aa+1];Ea&&Fa?ka.push([La,Ra,Ma[Aa+2],Ba[pa][3]]):Ea?ka.push([La,Ra,Ma[Aa+2]]):Fa?ka.push([La,Ra,Ba[pa][2]]):ka.push([La,Ra])}oa.points=ka;oa.spatialReference=ua;oa.hasZ=Ea;oa.hasM=Fa;return!0}function V(ka,pa,oa,ua,Aa=0){const {paths:Ba,hasZ:Ea,hasM:Fa}=ka;ka=[];if(!J(Ba,Ea,Fa,pa,ka,ua,Aa))return!1;oa.paths=ka;oa.spatialReference=ua;oa.hasZ=Ea;oa.hasM=Fa;return!0}function H(ka,pa,oa,ua,Aa=0){const {rings:Ba,
hasZ:Ea,hasM:Fa}=ka;ka=[];if(!J(Ba,Ea,Fa,pa,ka,ua,Aa))return!1;oa.rings=ka;oa.spatialReference=ua;oa.hasZ=Ea;oa.hasM=Fa;return!0}function R(ka,pa,oa,ua,Aa=0){const {xmin:Ba,ymin:Ea,xmax:Fa,ymax:Na,hasZ:Ma,hasM:La}=ka;if(!Z(Ba,Ea,Ma?ka.zmin:Aa,pa,Ga,ua))return!1;oa.xmin=Ga[0];oa.ymin=Ga[1];Ma&&(oa.zmin=Ga[2]);if(!Z(Fa,Na,Ma?ka.zmax:Aa,pa,Ga,ua))return!1;oa.xmax=Ga[0];oa.ymax=Ga[1];Ma&&(oa.zmax=Ga[2]);La&&(oa.mmin=ka.mmin,oa.mmax=ka.mmax);oa.spatialReference=ua;return!0}function Z(ka,pa,oa,ua,Aa,Ba){Ha[0]=
ka;Ha[1]=pa;Ha[2]=oa;return O(Ha,ua,0,Aa,Ba,0,1)}function N(ka,pa,oa,ua){if(A.isNone(pa)||A.isNone(ua)||2>ka.length)return!1;2===ka.length&&(Ha[0]=ka[0],Ha[1]=ka[1],Ha[2]=0,ka=Ha);return O(ka,pa,0,oa,ua,0,1)}function S(ka,pa,oa){if(A.isNone(pa))return!1;pa=Q(pa,Ia);pa=Da[pa][6];if(A.isNone(pa))return!1;pa(ka,0,Ha,0);oa!==Ha&&(oa[0]=Ha[0],oa[1]=Ha[1],2<oa.length&&(oa[2]=Ha[2]));return!0}function O(ka,pa,oa,ua,Aa,Ba,Ea=1){pa=la(pa,Aa,Oa);if(A.isNone(pa))return!1;if(pa===da){if(ka===ua&&oa===Ba)return!0;
Ea=oa+3*Ea;for(let Fa=oa,Na=Ba;Fa<Ea;Fa++,Na++)ua[Na]=ka[Fa];return!0}Ea=oa+3*Ea;for(let Fa=oa,Na=Ba;Fa<Ea;Fa+=3,Na+=3)pa(ka,Fa,ua,Na);return!0}function J(ka,pa,oa,ua,Aa,Ba,Ea=0){const Fa=[];for(const Na of ka)for(const Ma of Na)Fa.push(Ma[0],Ma[1],pa?Ma[2]:Ea);if(!O(Fa,ua,0,Fa,Ba,0,Fa.length/3))return!1;ua=0;Aa.length=0;for(const Na of ka){ka=[];for(const Ma of Na)pa&&oa?ka.push([Fa[ua++],Fa[ua++],Fa[ua++],Ma[3]]):pa?ka.push([Fa[ua++],Fa[ua++],Fa[ua++]]):(oa?ka.push([Fa[ua++],Fa[ua++],Ma[2]]):ka.push([Fa[ua++],
Fa[ua++]]),ua++);Aa.push(ka)}return!0}function K(ka,pa,oa){const ua=Math.sin(pa);pa=Math.cos(pa);const Aa=Math.sin(ka);ka=Math.cos(ka);oa[0]=-ua;oa[4]=-Aa*pa;oa[8]=ka*pa;oa[12]=0;oa[1]=pa;oa[5]=-Aa*ua;oa[9]=ka*ua;oa[13]=0;oa[2]=0;oa[6]=ka;oa[10]=Aa;oa[14]=0;oa[3]=0;oa[7]=0;oa[11]=0;oa[15]=1;return oa}function Q(ka,pa){if(pa.spatialReference===ka)return pa.spatialReferenceId;pa.spatialReference=ka;"metersPerUnit"in pa&&(pa.metersPerUnit=g.getMetersPerUnitForSR(ka,1));return ka.wkt===b.SphericalECEFSpatialReference.wkt?
pa.spatialReferenceId=1:D.isWGS84(ka)?pa.spatialReferenceId=2:D.isWebMercator(ka)?pa.spatialReferenceId=3:ka.wkt===b.WGS84ECEFSpatialReference.wkt?pa.spatialReferenceId=4:4490===ka.wkid?pa.spatialReferenceId=5:ka.wkt===b.SphericalPCPFMars.wkt?pa.spatialReferenceId=7:ka.wkt===b.SphericalPCPFMoon.wkt?pa.spatialReferenceId=9:D.isMars(ka)?pa.spatialReferenceId=8:D.isMoon(ka)?pa.spatialReferenceId=10:pa.spatialReferenceId=0}function da(ka,pa,oa,ua){ka!==oa&&(oa[ua++]=ka[pa++],oa[ua++]=ka[pa++],oa[ua]=
ka[pa])}function ma(ka,pa,oa,ua){oa[ua++]=Ja*(ka[pa++]/e.earth.radius);oa[ua++]=Ja*(Math.PI/2-2*Math.atan(Math.exp(-1*ka[pa++]/e.earth.radius)));oa[ua]=ka[pa]}function wa(ka,pa,oa,ua){ma(ka,pa,oa,ua);ha(oa,ua,oa,ua)}function ya(ka,pa,oa,ua){ma(ka,pa,oa,ua);Y(oa,ua,oa,ua)}function xa(ka,pa,oa,ua,Aa){var Ba=.4999999*Math.PI;Ba=C.clamp(Ka*ka[pa+1],-Ba,Ba);Ba=Math.sin(Ba);oa[ua++]=Ka*ka[pa]*Aa.radius;oa[ua++]=Aa.halfSemiMajorAxis*Math.log((1+Ba)/(1-Ba));oa[ua]=ka[pa+2]}function G(ka,pa,oa,ua){xa(ka,pa,
oa,ua,e.earth)}function I(ka,pa,oa,ua,Aa){Aa+=ka[pa+2];const Ba=Ka*ka[pa+1];ka=Ka*ka[pa];pa=Math.cos(Ba);oa[ua++]=Math.cos(ka)*pa*Aa;oa[ua++]=Math.sin(ka)*pa*Aa;oa[ua]=Math.sin(Ba)*Aa}function aa(ka,pa,oa,ua){I(ka,pa,oa,ua,e.moon.radius)}function ca(ka,pa,oa,ua){I(ka,pa,oa,ua,e.mars.radius)}function ha(ka,pa,oa,ua){I(ka,pa,oa,ua,e.earth.radius)}function ba(ka,pa,oa,ua,Aa){var Ba=ka[pa];const Ea=ka[pa+1];pa=ka[pa+2];ka=Math.sqrt(Ba*Ba+Ea*Ea+pa*pa);pa=C.asinClamped(pa/(0===ka?1:ka));Ba=Math.atan2(Ea,
Ba);oa[ua++]=Ja*Ba;oa[ua++]=Ja*pa;oa[ua]=ka-Aa}function ia(ka,pa,oa,ua){ba(ka,pa,oa,ua,e.moon.radius)}function ea(ka,pa,oa,ua){ba(ka,pa,oa,ua,e.mars.radius)}function T(ka,pa,oa,ua){ba(ka,pa,oa,ua,e.earth.radius)}function U(ka,pa,oa,ua){T(ka,pa,oa,ua);G(oa,ua,oa,ua)}function X(ka,pa,oa,ua){T(ka,pa,oa,ua);Y(oa,ua,oa,ua)}function Y(ka,pa,oa,ua){{var Aa=e.earth;const Ea=Ka*ka[pa];var Ba=Ka*ka[pa+1];ka=ka[pa+2];pa=Math.sin(Ba);Ba=Math.cos(Ba);const Fa=Aa.radius/Math.sqrt(1-Aa.eccentricitySquared*pa*pa);
oa[ua++]=(Fa+ka)*Ba*Math.cos(Ea);oa[ua++]=(Fa+ka)*Ba*Math.sin(Ea);oa[ua++]=(Fa*(1-Aa.eccentricitySquared)+ka)*pa}}function fa(ka,pa,oa,ua){var Aa=h.earthEllipsoidConstants,Ba=ka[pa],Ea=ka[pa+1];ka=ka[pa+2];let Fa;pa=Math.abs(ka);var Na=Ba*Ba+Ea*Ea;var Ma=Math.sqrt(Na);var La=Na+ka*ka;var Ra=Math.sqrt(La);Ba=Math.atan2(Ea,Ba);var Ta=ka*ka/La;La=Na/La;Ea=Aa.a2/Ra;Na=Aa.a3-Aa.a4/Ra;.3<La?(Ta=pa/Ra*(1+La*(Aa.a1+Ea+Ta*Na)/Ra),Ra=Math.asin(Ta),Ea=Ta*Ta,La=Math.sqrt(1-Ea)):(La=Ma/Ra*(1-Ta*(Aa.a5-Ea-La*Na)/
Ra),Ra=Math.acos(La),Ea=1-La*La,Ta=Math.sqrt(Ea));Fa=1-e.earth.eccentricitySquared*Ea;Ea=e.earth.radius/Math.sqrt(Fa);Aa=Aa.a6*Ea;Ea=Ma-Ea*La;Na=pa-Aa*Ta;pa=La*Ea+Ta*Na;Ma=La*Na-Ta*Ea;Aa=Ma/(Aa/Fa+pa);Ra+=Aa;0>ka&&(Ra=-Ra);oa[ua++]=Ja*Ba;oa[ua++]=Ja*Ra;oa[ua]=pa+Ma*Aa/2}function ja(ka,pa,oa,ua){fa(ka,pa,oa,ua);ha(oa,ua,oa,ua)}function ta(ka,pa,oa,ua){fa(ka,pa,oa,ua);G(oa,ua,oa,ua)}function la(ka,pa,oa=sa()){return A.isNone(ka)||A.isNone(pa)?null:qa(ka,pa,oa).projector}function qa(ka,pa,oa){if(A.isNone(ka)||
A.isNone(pa)||oa.source.spatialReference===ka&&oa.dest.spatialReference===pa)return oa;const ua=Q(ka,oa.source),Aa=Q(pa,oa.dest);0===ua&&0===Aa?D.equals(ka,pa)?oa.projector=da:oa.projector=null:oa.projector=Da[ua][Aa];return oa}function sa(){return{source:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},projector:da}}let ra=null,na=null,va=null,za={},Ca=function(ka){function pa(){return ka.call(this,"projection:not-loaded",
"projection engine not fully loaded yet, please call load()")||this}v._inheritsLoose(pa,ka);return pa}(B);const Da={[2]:{[5]:null,[8]:null,[10]:null,[11]:da,[6]:da,[1]:ha,[7]:null,[9]:null,[0]:null,[3]:G,[2]:da,[4]:Y},[5]:{[5]:da,[8]:null,[10]:null,[11]:da,[6]:da,[1]:ha,[7]:null,[9]:null,[0]:null,[3]:null,[2]:null,[4]:Y},[8]:{[5]:null,[8]:da,[10]:null,[11]:da,[6]:null,[1]:null,[7]:ca,[9]:null,[0]:null,[3]:null,[2]:null,[4]:null},[10]:{[5]:null,[8]:null,[10]:da,[11]:da,[6]:null,[1]:null,[7]:null,[9]:aa,
[0]:null,[3]:null,[2]:null,[4]:null},[3]:{[5]:null,[8]:null,[10]:null,[11]:ma,[6]:ma,[1]:wa,[7]:null,[9]:null,[0]:null,[3]:da,[2]:ma,[4]:ya},[4]:{[5]:fa,[8]:null,[10]:null,[11]:fa,[6]:fa,[1]:ja,[7]:null,[9]:null,[0]:null,[3]:ta,[2]:fa,[4]:da},[1]:{[5]:T,[8]:null,[10]:null,[11]:T,[6]:T,[1]:da,[7]:null,[9]:null,[0]:null,[3]:U,[2]:T,[4]:X},[7]:{[5]:null,[8]:ea,[10]:null,[11]:ea,[6]:null,[1]:null,[7]:da,[9]:null,[0]:null,[3]:null,[2]:null,[4]:null},[9]:{[5]:null,[8]:null,[10]:ia,[11]:ia,[6]:null,[1]:null,
[7]:null,[9]:da,[0]:null,[3]:null,[2]:null,[4]:null},[0]:{[5]:null,[8]:null,[10]:null,[11]:null,[6]:null,[1]:null,[7]:null,[9]:null,[0]:da,[3]:null,[2]:null,[4]:null},[11]:{[5]:da,[8]:da,[10]:da,[11]:da,[6]:da,[1]:ha,[7]:ca,[9]:aa,[0]:null,[3]:G,[2]:da,[4]:Y},[6]:{[5]:null,[8]:null,[10]:null,[11]:da,[6]:da,[1]:ha,[7]:null,[9]:null,[0]:null,[3]:null,[2]:da,[4]:Y}},Ia={spatialReference:null,spatialReferenceId:0},Pa={spatialReference:null,spatialReferenceId:0},Oa=sa(),Qa=sa(),Ka=C.deg2rad(1),Ja=C.rad2deg(1),
Ha=x.create(),Sa=x.create(),Ua=x.create(),Ga=x.create(),Va=x.create();m.canProjectToWGS84ComparableLonLat=function(ka){if(A.isNone(ka))return!1;ka=Q(ka,Ia);return!!Da[ka][6]};m.canProjectWithoutEngine=F;m.computeLatLonToENURotation=K;m.computeLinearTransformation=function(ka,pa,oa,ua){if(A.isNone(ka)||A.isNone(ua))return!1;var Aa=Q(ka,Ia),Ba=Q(ua,Pa);if(Aa===Ba&&1!==Ba&&7!==Ba&&9!==Ba&&(0!==Aa||D.equals(ka,ua)))return r.identity(oa),r.translate(oa,oa,pa),!0;if(1===Ba||7===Ba||9===Ba){ua=ka=0;Aa=Da[Aa][11];
Ba=Da[11][Ba];if(A.isNone(Aa)||A.isNone(Ba))return!1;Aa(pa,0,Sa,0);Ba(Sa,0,Ua,0);ka=Ka*Sa[0];ua=Ka*Sa[1];K(ua,ka,oa);oa[12]=Ua[0];oa[13]=Ua[1];oa[14]=Ua[2];return!0}if(3===Ba&&(2===Aa||1===Aa)){Ba=Da[Aa][11];if(A.isNone(Ba))return!1;Ba(pa,0,Sa,0);pa=Ka*Sa[1];G(Sa,0,Ua,0);r.identity(oa);r.translate(oa,oa,Ua);pa=1/Math.cos(pa);r.scale(oa,oa,[pa,pa,1]);return!0}return!1};m.getProjectorName=function(ka,pa){switch(la(ka,pa,Oa)){case da:return"copy3";case ha:return"wgs84ToSphericalECEF";case G:return"wgs84ToWebMercator";
case Y:return"wgs84ToWGS84ECEF";case ma:return"webMercatorToWGS84";case wa:return"webMercatorToSphericalECEF";case ya:return"webMercatorToWGS84ECEF";case fa:return"wgs84ECEFToWGS84";case ja:return"wgs84ECEFToSphericalECEF";case ta:return"wgs84ECEFToWebMercator";case T:return"sphericalECEFToWGS84";case U:return"sphericalECEFToWebMercator";case ea:return"sphericalMarsPCPFToMars2000";case ia:return"sphericalMoonPCPFToMoon2000";case X:return"sphericalECEFToWGS84ECEF";case ca:return"mars2000ToSphericalPCPF";
case aa:return"moon2000ToSphericalPCPF";default:return null}};m.getTransformation=E;m.getTransformations=function(ka,pa,oa=null){if(A.isNone(ra))throw new Ca;ka=ra._getTransformationBySuitability(na,ka,pa,oa,null==oa?void 0:oa.spatialReference);if(null!==ka){pa=[];for(const ua of ka)pa.push(w.fromGE(ua));return pa}return[]};m.initializeProjection=function(ka,pa,oa,ua){return L.apply(this,arguments)};m.isLoaded=p;m.isSupported=function(){return!0};m.load=z;m.localLinearScaleFactors=function(ka,pa,
oa,ua){if(A.isNone(pa)||A.isNone(ua))return!1;const Aa=Q(pa,Ia);var Ba=Q(ua,Pa);if(Aa===Ba&&0!==Aa||D.equals(pa,ua))return oa[0]=1,oa[1]=1,oa[2]=1,!0;if(1===Aa){pa=u.length(ka);ka=pa/Math.sqrt(ka[0]*ka[0]+ka[1]*ka[1]);pa/=e.earth.radius;if(3===Ba)return oa[0]=ka*pa,oa[1]=ka*pa,oa[2]=1,!0;if(2===Ba||5===Ba)return Ba=180/(e.earth.radius*Math.PI),oa[0]=Ba*ka*pa,oa[1]=Ba*pa,oa[2]=1,!0}return!1};m.lonLatToSphericalPCPF=function(ka,pa,oa,ua,Aa=0){ua+=Aa;Aa=Math.cos(oa);ka[0]=Math.cos(pa)*Aa*ua;ka[1]=Math.sin(pa)*
Aa*ua;ka[2]=Math.sin(oa)*ua};m.lonLatToWebMercatorComparable=xa;m.project=function(ka,pa,oa=null){return Array.isArray(ka)?0===ka.length?[]:f(na,ka,ka[0].spatialReference,pa,oa):f(na,[ka],ka.spatialReference,pa,oa)[0]};m.projectBoundingRect=function(ka,pa,oa,ua){if(null==ka)return!1;if(D.equals(pa,ua))return k.set(oa,ka),!0;Ha[0]=ka[0];Ha[1]=ka[1];Ha[2]=0;if(!O(Ha,pa,0,Ha,ua,0,1))return!1;oa[0]=Ha[0];oa[1]=Ha[1];Ha[0]=ka[2];Ha[1]=ka[3];Ha[2]=0;if(!O(Ha,pa,0,Ha,ua,0,1))return!1;oa[2]=Ha[0];oa[3]=Ha[1];
return!0};m.projectBoundingSphere=function(ka,pa,oa,ua){if(A.isNone(pa)||A.isNone(ua))return!1;pa=qa(pa,ua,Qa);if(pa.projector===da)return oa[0]=ka[0],oa[1]=ka[1],oa[2]=ka[2],oa[3]=ka[3],!0;if(A.isNone(pa.projector))return!1;const {source:Aa,dest:Ba}=pa;if(3===Ba.spatialReferenceId){pa=Da[Aa.spatialReferenceId][2];if(A.isNone(pa))return!1;pa(ka,0,Sa,0);pa=Math.abs(Ka*Sa[1])+Math.asin(ka[3]/(e.earth.radius+ka[2]));G(Sa,0,oa,0);oa[3]=pa>.9999*Math.PI?Number.MAX_VALUE:1/Math.cos(pa)*ka[3];return!0}pa.projector(ka,
0,oa,0);oa[3]=ka[3]*Aa.metersPerUnit/Ba.metersPerUnit;return!0};m.projectBuffer=O;m.projectDirection=function(ka,pa,oa,ua,Aa){u.copy(Ga,ka);u.add(Va,ka,pa);N(Ga,oa,Ga,Aa);N(Va,oa,Va,Aa);u.subtract(ua,Va,Ga);u.normalize(ua,ua)};m.projectExtent=function(ka,pa,oa=pa.spatialReference,ua=0){return A.isNone(oa)?!1:R(ka,ka.spatialReference,pa,oa,ua)};m.projectMany=f;m.projectMultipoint=function(ka,pa,oa=pa.spatialReference,ua=0){return A.isNone(oa)?!1:P(ka,ka.spatialReference,pa,oa,ua)};m.projectPoint=function(ka,
pa,oa=pa.spatialReference,ua=0){return A.isNone(oa)?!1:M(ka,ka.spatialReference,pa,oa,ua)};m.projectPointToVector=function(ka,pa,oa,ua=0){Ga[0]=ka.x;Ga[1]=ka.y;const Aa=ka.z;Ga[2]=void 0!==Aa?Aa:ua;return O(Ga,ka.spatialReference,0,pa,oa,0,1)};m.projectPointToWGS84ComparableLonLat=function(ka,pa){Ga[0]=ka.x;Ga[1]=ka.y;const oa=ka.z;Ga[2]=void 0!==oa?oa:0;return S(Ga,ka.spatialReference,pa)};m.projectPolygon=function(ka,pa,oa=pa.spatialReference,ua=0){return A.isNone(oa)?!1:H(ka,ka.spatialReference,
pa,oa,ua)};m.projectPolyline=function(ka,pa,oa=pa.spatialReference,ua=0){return A.isNone(oa)?!1:V(ka,ka.spatialReference,pa,oa,ua)};m.projectVectorToDehydratedPoint=function(ka,pa,oa){return O(ka,pa,0,Ga,oa.spatialReference,0,1)?(oa.x=Ga[0],oa.y=Ga[1],oa.z=Ga[2],oa):null};m.projectVectorToPoint=function(ka,pa,oa){if(A.isNone(pa)||A.isNone(oa))return null;const ua=new n({spatialReference:oa});return O(ka,pa,0,Ga,oa,0,1)?(ua.x=Ga[0],ua.y=Ga[1],ua.z=Ga[2],ua):null};m.projectVectorToVector=N;m.projectVectorToWGS84ComparableLonLat=
function(ka,pa,oa){return S(ka,pa,oa)};m.projectXYZToVector=Z;m.sphericalPCPFtoLonLatElevation=ba;m.unload=function(){va=na=ra=null;za={}};Object.defineProperty(m,"__esModule",{value:!0})})},"esri/chunks/pe":function(){define(["require","exports","./_rollupPluginBabelHelpers","../assets","../core/has"],function(d,m,v,B,C){function A(){return!!m._pe}function q(){return!!C("esri-wasm")}function g(){return l?l:l=(new Promise(function(c,a){d(["./pe-wasm"],c,a)})).then(function(c){return c.peWasm}).then(({default:c})=>
c({locateFile:a=>B.getAssetUrl(`esri/geometry/support/${a}`)})).then(c=>{r(c)})}function r(c){function a(e,h,w){e[h]=w(e[h])}m._pe=c;m.PeDefs.init();m.PeGTlistExtended.init();m.PeNotationMgrs.init();m.PeNotationUtm.init();m.PePCSInfo.init();m.PeGCSExtent=function(e){function h(){return e.apply(this,arguments)||this}v._inheritsLoose(h,e);h.prototype.destroy=function(){m._pe.destroy(this)};return h}(m._pe.PeGCSExtent);c=[m._pe.PeDatum,m._pe.PeGeogcs,m._pe.PeGeogtran,m._pe.PeObject,m._pe.PeParameter,
m._pe.PePrimem,m._pe.PeProjcs,m._pe.PeSpheroid,m._pe.PeUnit];for(var b of c)a(b.prototype,"getName",e=>function(){return e.call(this,Array(m.PeDefs.PE_NAME_MAX))});for(const e of[m._pe.PeGeogtran,m._pe.PeProjcs])a(e.prototype,"getParameters",h=>function(){const w=Array(m.PeDefs.PE_PARM_MAX);let D=h.call(this);for(let p=0;p<w.length;p++){const z=m._pe.getValue(D,"*");w[p]=z?m._pe.wrapPointer(z,m._pe.PeParameter):null;D+=Int32Array.BYTES_PER_ELEMENT}return w});a(m._pe.PeHorizon.prototype,"getCoord",
e=>function(){const h=this.getSize();if(!h)return null;const w=[],D=e.call(this);t(w,h,D);return w});a(m._pe.PeGTlistExtendedEntry.prototype,"getEntries",e=>{const h=m._pe._pe_getPeGTlistExtendedGTsSize();return function(){let w=null;var D=e.call(this);if(!m._pe.compare(D,m._pe.NULL)){w=[D];const p=this.getSteps();if(1<p){D=m._pe.getPointer(D);for(let z=1;z<p;z++)w.push(m._pe.wrapPointer(D+h*z,m._pe.PeGTlistExtendedGTs))}}return w}});const k=m._pe._pe_getPeHorizonSize();b=e=>function(){let h=this._cache;
h||(this._cache=h=new Map);if(h.has(e))return h.get(e);let w=null;var D=e.call(this);if(!m._pe.compare(D,m._pe.NULL)){w=[D];const p=D.getNump();if(1<p){D=m._pe.getPointer(D);for(let z=1;z<p;z++)w.push(m._pe.wrapPointer(D+k*z,m._pe.PeHorizon))}}h.set(e,w);return w};a(m._pe.PeProjcs.prototype,"horizonGcsGenerate",b);a(m._pe.PeProjcs.prototype,"horizonPcsGenerate",b);m._pe.PeObject.prototype.toString=function(e=m.PeDefs.PE_STR_OPTS_NONE){m._pe.ensureCache.prepare();const h=m._pe.getPointer(this),w=m._pe.ensureInt8(Array(m.PeDefs.PE_BUFFER_MAX));
return m._pe.UTF8ToString(m._pe._pe_object_to_string_ext(h,e,w))}}function u(c){if(c){var a=m._pe.getClass(c);a&&(a=m._pe.getCache(a))&&(c=m._pe.getPointer(c))&&delete a[c]}}function x(c,a){const b=[];a=Array(a);for(let k=0;k<c;k++)b.push(m._pe.ensureInt8(a));return b}function y(c){let a;Array.isArray(c[0])?(a=[],c.forEach(b=>{a.push(b[0],b[1])})):a=c;return a}function t(c,a,b,k=!1){if(k)for(k=0;k<2*a;k++)c[k]=m._pe.getValue(b+k*Float64Array.BYTES_PER_ELEMENT,"double");else{k=0===c.length;for(let e=
0;e<a;e++)k&&(c[e]=Array(2)),c[e][0]=m._pe.getValue(b,"double"),c[e][1]=m._pe.getValue(b+Float64Array.BYTES_PER_ELEMENT,"double"),b+=2*Float64Array.BYTES_PER_ELEMENT}}let l;m._pe=null;m.PeCSTransformations=void 0;(function(c){function a(e,h,w){m._pe.ensureCache.prepare();var D=y(w);const p=w===D;D=m._pe.ensureFloat64(D);(e=m._pe._pe_geog_to_proj(m._pe.getPointer(e),h,D))&&t(w,h,D,p);return e}function b(e,h,w){return k(e,h,w,0)}function k(e,h,w,D){m._pe.ensureCache.prepare();var p=y(w);const z=w===
p;p=m._pe.ensureFloat64(p);(e=m._pe._pe_proj_to_geog_center(m._pe.getPointer(e),h,p,D))&&t(w,h,p,z);return e}c.geogToProj=a;c.projGeog=function(e,h,w,D){switch(D){case m.PeDefs.PE_TRANSFORM_P_TO_G:return b(e,h,w);case m.PeDefs.PE_TRANSFORM_G_TO_P:return a(e,h,w)}return 0};c.projToGeog=b;c.projToGeogCenter=k})(m.PeCSTransformations||(m.PeCSTransformations={}));m.PeDefs=void 0;(function(c){c.init=function(){c.PE_BUFFER_MAX=m._pe.PeDefs.prototype.PE_BUFFER_MAX;c.PE_NAME_MAX=m._pe.PeDefs.prototype.PE_NAME_MAX;
c.PE_MGRS_MAX=m._pe.PeDefs.prototype.PE_MGRS_MAX;c.PE_USNG_MAX=m._pe.PeDefs.prototype.PE_USNG_MAX;c.PE_DD_MAX=m._pe.PeDefs.prototype.PE_DD_MAX;c.PE_DDM_MAX=m._pe.PeDefs.prototype.PE_DDM_MAX;c.PE_DMS_MAX=m._pe.PeDefs.prototype.PE_DMS_MAX;c.PE_UTM_MAX=m._pe.PeDefs.prototype.PE_UTM_MAX;c.PE_PARM_MAX=m._pe.PeDefs.prototype.PE_PARM_MAX;c.PE_TYPE_NONE=m._pe.PeDefs.prototype.PE_TYPE_NONE;c.PE_TYPE_GEOGCS=m._pe.PeDefs.prototype.PE_TYPE_GEOGCS;c.PE_TYPE_PROJCS=m._pe.PeDefs.prototype.PE_TYPE_PROJCS;c.PE_TYPE_GEOGTRAN=
m._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN;c.PE_TYPE_COORDSYS=m._pe.PeDefs.prototype.PE_TYPE_COORDSYS;c.PE_TYPE_UNIT=m._pe.PeDefs.prototype.PE_TYPE_UNIT;c.PE_TYPE_LINUNIT=m._pe.PeDefs.prototype.PE_TYPE_LINUNIT;c.PE_STR_OPTS_NONE=m._pe.PeDefs.prototype.PE_STR_OPTS_NONE;c.PE_STR_AUTH_NONE=m._pe.PeDefs.prototype.PE_STR_AUTH_NONE;c.PE_STR_AUTH_TOP=m._pe.PeDefs.prototype.PE_STR_AUTH_TOP;c.PE_STR_NAME_CANON=m._pe.PeDefs.prototype.PE_STR_NAME_CANON;c.PE_PARM_X0=m._pe.PeDefs.prototype.PE_PARM_X0;c.PE_PARM_ND=
m._pe.PeDefs.prototype.PE_PARM_ND;c.PE_TRANSFORM_1_TO_2=m._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2;c.PE_TRANSFORM_2_TO_1=m._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1;c.PE_TRANSFORM_P_TO_G=m._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G;c.PE_TRANSFORM_G_TO_P=m._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P;c.PE_HORIZON_RECT=m._pe.PeDefs.prototype.PE_HORIZON_RECT;c.PE_HORIZON_POLY=m._pe.PeDefs.prototype.PE_HORIZON_POLY;c.PE_HORIZON_LINE=m._pe.PeDefs.prototype.PE_HORIZON_LINE;c.PE_HORIZON_DELTA=m._pe.PeDefs.prototype.PE_HORIZON_DELTA}})(m.PeDefs||
(m.PeDefs={}));m.PeFactory=void 0;(function(c){function a(h,w){let D=null,p=b[h];p||(p={},b[h]=p);p.hasOwnProperty(String(w))?D=p[w]:(h=m._pe.PeFactory.prototype.factoryByType(h,w),m._pe.compare(h,m._pe.NULL)||(D=h,p[w]=D));return D=e(D)}const b={},k={},e=h=>{if(h){const w=h.getType();switch(w){case m.PeDefs.PE_TYPE_GEOGCS:h=m._pe.castObject(h,m._pe.PeGeogcs);break;case m.PeDefs.PE_TYPE_PROJCS:h=m._pe.castObject(h,m._pe.PeProjcs);break;case m.PeDefs.PE_TYPE_GEOGTRAN:h=m._pe.castObject(h,m._pe.PeGeogtran);
break;default:w&m.PeDefs.PE_TYPE_UNIT&&(h=m._pe.castObject(h,m._pe.PeUnit))}}return h};c.initialize=function(){m._pe.PeFactory.prototype.initialize(null)};c.coordsys=function(h){return a(m.PeDefs.PE_TYPE_COORDSYS,h)};c.factoryByType=a;c.fromString=function(h,w){let D=null,p=k[h];p||(p={},k[h]=p);p.hasOwnProperty(w)?D=p[w]:(h=m._pe.PeFactory.prototype.fromString(h,w),m._pe.compare(h,m._pe.NULL)||(D=h,p[w]=D));return D=e(D)};c.geogcs=function(h){return a(m.PeDefs.PE_TYPE_GEOGCS,h)};c.geogtran=function(h){return a(m.PeDefs.PE_TYPE_GEOGTRAN,
h)};c.getCode=function(h){return m._pe.PeFactory.prototype.getCode(h)};c.projcs=function(h){return a(m.PeDefs.PE_TYPE_PROJCS,h)};c.unit=function(h){return a(m.PeDefs.PE_TYPE_UNIT,h)}})(m.PeFactory||(m.PeFactory={}));m.PeGCSExtent=null;m.PeGTlistExtended=void 0;(function(c){let a;c.init=function(){c.PE_GTLIST_OPTS_COMMON=m._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON;a=m._pe._pe_getPeGTlistExtendedEntrySize()};c.getGTlist=function(b,k,e,h,w,D){let p=null;const z=new m._pe.PeInteger(D);try{const f=
m._pe.PeGTlistExtended.prototype.getGTlist(b,k,e,h,w,z);if(D=z.val)if(p=[f],1<D){const E=m._pe.getPointer(f);for(b=1;b<D;b++)p.push(m._pe.wrapPointer(E+a*b,m._pe.PeGTlistExtendedEntry))}}finally{m._pe.destroy(z)}return p}})(m.PeGTlistExtended||(m.PeGTlistExtended={}));m.PeGTlistExtendedEntry=void 0;(function(c){c.destroy=function(a){if(a&&a.length){for(const b of a)u(b),b.getEntries().forEach(k=>{u(k);k=k.getGeogtran();u(k);k.getParameters().forEach(u);[k.getGeogcs1(),k.getGeogcs2()].forEach(e=>{u(e);
const h=e.getDatum();u(h);u(h.getSpheroid());u(e.getPrimem());u(e.getUnit())})});m._pe.PeGTlistExtendedEntry.prototype.Delete(a[0])}}})(m.PeGTlistExtendedEntry||(m.PeGTlistExtendedEntry={}));m.PeGTTransformations=void 0;(function(c){c.geogToGeog=function(a,b,k,e,h){m._pe.ensureCache.prepare();var w=y(k);const D=k===w;w=m._pe.ensureFloat64(w);let p=0;e&&(p=m._pe.ensureFloat64(e));(a=m._pe._pe_geog_to_geog(m._pe.getPointer(a),b,w,p,h))&&t(k,b,w,D);return a}})(m.PeGTTransformations||(m.PeGTTransformations=
{}));m.PeNotationDms=void 0;(function(c){const a=(k,e,h,w,D,p)=>{m._pe.ensureCache.prepare();switch(k){case "dd":var z=m._pe._pe_geog_to_dd;var f=m.PeDefs.PE_DD_MAX;break;case "ddm":z=m._pe._pe_geog_to_ddm;f=m.PeDefs.PE_DDM_MAX;break;case "dms":z=m._pe._pe_geog_to_dms,f=m.PeDefs.PE_DMS_MAX}k=0;e&&(k=m._pe.getPointer(e));e=y(w);e=m._pe.ensureFloat64(e);f=x(h,f);w=m._pe.ensureInt32(f);if(D=z(k,h,e,D,w))for(z=0;z<h;z++)p[z]=m._pe.UTF8ToString(f[z]);return D},b=(k,e,h,w,D)=>{m._pe.ensureCache.prepare();
switch(k){case "dd":var p=m._pe._pe_dd_to_geog;break;case "ddm":p=m._pe._pe_ddm_to_geog;break;case "dms":p=m._pe._pe_dms_to_geog}k=0;e&&(k=m._pe.getPointer(e));e=w.map(z=>m._pe.ensureString(z));w=m._pe.ensureInt32(e);e=m._pe.ensureFloat64(Array(2*h));(p=p(k,h,w,e))&&t(D,h,e);return p};c.geog_to_dms=function(k,e,h,w,D){return a("dms",k,e,h,w,D)};c.dms_to_geog=function(k,e,h,w){return b("dms",k,e,h,w)};c.geog_to_ddm=function(k,e,h,w,D){return a("ddm",k,e,h,w,D)};c.ddm_to_geog=function(k,e,h,w){return b("ddm",
k,e,h,w)};c.geog_to_dd=function(k,e,h,w,D){return a("dd",k,e,h,w,D)};c.dd_to_geog=function(k,e,h,w){return b("dd",k,e,h,w)}})(m.PeNotationDms||(m.PeNotationDms={}));m.PeNotationMgrs=void 0;(function(c){c.init=function(){c.PE_MGRS_STYLE_NEW=m._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW;c.PE_MGRS_STYLE_OLD=m._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD;c.PE_MGRS_STYLE_AUTO=m._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO;c.PE_MGRS_180_ZONE_1_PLUS=m._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS;
c.PE_MGRS_ADD_SPACES=m._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES};c.geog_to_mgrs_extended=function(a,b,k,e,h,w,D){m._pe.ensureCache.prepare();let p=0;a&&(p=m._pe.getPointer(a));a=y(k);k=m._pe.ensureFloat64(a);a=x(b,m.PeDefs.PE_MGRS_MAX);const z=m._pe.ensureInt32(a);if(e=m._pe._pe_geog_to_mgrs_extended(p,b,k,e,h,w,z))for(h=0;h<b;h++)D[h]=m._pe.UTF8ToString(a[h]);return e};c.mgrs_to_geog_extended=function(a,b,k,e,h){m._pe.ensureCache.prepare();let w=0;a&&(w=m._pe.getPointer(a));a=k.map(D=>m._pe.ensureString(D));
k=m._pe.ensureInt32(a);a=m._pe.ensureFloat64(Array(2*b));(e=m._pe._pe_mgrs_to_geog_extended(w,b,k,e,a))&&t(h,b,a);return e}})(m.PeNotationMgrs||(m.PeNotationMgrs={}));m.PeNotationUsng=void 0;(function(c){c.geog_to_usng=function(a,b,k,e,h,w,D){m._pe.ensureCache.prepare();let p=0;a&&(p=m._pe.getPointer(a));a=y(k);k=m._pe.ensureFloat64(a);a=x(b,m.PeDefs.PE_MGRS_MAX);const z=m._pe.ensureInt32(a);if(e=m._pe._pe_geog_to_usng(p,b,k,e,h,w,z))for(h=0;h<b;h++)D[h]=m._pe.UTF8ToString(a[h]);return e};c.usng_to_geog=
function(a,b,k,e){m._pe.ensureCache.prepare();var h=0;a&&(h=m._pe.getPointer(a));a=k.map(w=>m._pe.ensureString(w));k=m._pe.ensureInt32(a);a=m._pe.ensureFloat64(Array(2*b));(h=m._pe._pe_usng_to_geog(h,b,k,a))&&t(e,b,a);return h}})(m.PeNotationUsng||(m.PeNotationUsng={}));m.PeNotationUtm=void 0;(function(c){c.init=function(){c.PE_UTM_OPTS_NONE=m._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE;c.PE_UTM_OPTS_ADD_SPACES=m._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES;c.PE_UTM_OPTS_NS=m._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS};
c.geog_to_utm=function(a,b,k,e,h){m._pe.ensureCache.prepare();var w=0;a&&(w=m._pe.getPointer(a));a=y(k);k=m._pe.ensureFloat64(a);a=x(b,m.PeDefs.PE_UTM_MAX);const D=m._pe.ensureInt32(a);if(e=m._pe._pe_geog_to_utm(w,b,k,e,D))for(w=0;w<b;w++)h[w]=m._pe.UTF8ToString(a[w]);return e};c.utm_to_geog=function(a,b,k,e,h){m._pe.ensureCache.prepare();let w=0;a&&(w=m._pe.getPointer(a));a=k.map(D=>m._pe.ensureString(D));k=m._pe.ensureInt32(a);a=m._pe.ensureFloat64(Array(2*b));(e=m._pe._pe_utm_to_geog(w,b,k,e,a))&&
t(h,b,a);return e}})(m.PeNotationUtm||(m.PeNotationUtm={}));m.PePCSInfo=void 0;(function(c){const a=new Map;c.init=function(){c.PE_PCSINFO_OPTION_NONE=m._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE;c.PE_PCSINFO_OPTION_DOMAIN=m._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN;c.PE_POLE_OUTSIDE_BOUNDARY=m._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY;c.PE_POLE_POINT=m._pe.PePCSInfo.prototype.PE_POLE_POINT};c.generate=function(b,k=c.PE_PCSINFO_OPTION_DOMAIN){let e,h;a.has(b)&&(h=a.get(b),h[k]&&
(e=h[k]));e||(e=m._pe.PePCSInfo.prototype.generate(b,k),h||(h=[],a.set(b,h)),h[k]=e);return e}})(m.PePCSInfo||(m.PePCSInfo={}));m.PeVersion=void 0;(function(c){c.version_string=function(){return m._pe.PeVersion.prototype.version_string()}})(m.PeVersion||(m.PeVersion={}));var n=Object.freeze({__proto__:null,get _pe(){return m._pe},isLoaded:A,isSupported:q,load:g,get PeCSTransformations(){return m.PeCSTransformations},get PeDefs(){return m.PeDefs},get PeFactory(){return m.PeFactory},get PeGCSExtent(){return m.PeGCSExtent},
get PeGTlistExtended(){return m.PeGTlistExtended},get PeGTlistExtendedEntry(){return m.PeGTlistExtendedEntry},get PeGTTransformations(){return m.PeGTTransformations},get PeNotationDms(){return m.PeNotationDms},get PeNotationMgrs(){return m.PeNotationMgrs},get PeNotationUsng(){return m.PeNotationUsng},get PeNotationUtm(){return m.PeNotationUtm},get PePCSInfo(){return m.PePCSInfo},get PeVersion(){return m.PeVersion},_init:r});m._init=r;m.isLoaded=A;m.isSupported=q;m.load=g;m.pe=n})},"esri/geometry/support/GeographicTransformation":function(){define(["./GeographicTransformationStep"],
function(d){return function(){function m(B){this.steps=[];this._cached_projection={};this._chain="";this._gtlistentry=null;if(B&&B.steps)for(const C of B.steps)C instanceof d?this.steps.push(C):this.steps.push(new d({wkid:C.wkid,wkt:C.wkt,isInverse:C.isInverse}))}m.cacheKey=function(B,C){return[void 0!==B.wkid&&null!==B.wkid?B.wkid.toString():"-1",void 0!==B.wkt&&null!==B.wkt?B.wkt.toString():"",void 0!==C.wkid&&null!==C.wkid?C.wkid.toString():"-1",void 0!==C.wkt&&null!==C.wkt?C.wkt.toString():""].join()};
m.fromGE=function(B){const C=new m;let A="";for(const q of B.steps)B=d.fromGE(q),C.steps.push(B),A+=B.uid.toString()+",";C._cached_projection={};C._gtlistentry=null;C._chain=A;return C};var v=m.prototype;v.getInverse=function(){const B=new m;B.steps=[];for(let C=this.steps.length-1;0<=C;C--)B.steps.push(this.steps[C].getInverse());return B};v.getGTListEntry=function(){let B="";for(const C of this.steps)B+=C.uid.toString()+",";B!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=
B);return this._gtlistentry};v.assignCachedGe=function(B,C,A){this._cached_projection[m.cacheKey(B,C)]=A};v.getCachedGeTransformation=function(B,C){let A="";for(const q of this.steps)A+=q.uid.toString()+",";A!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=A);B=this._cached_projection[m.cacheKey(B,C)];return void 0===B?null:B};return m}()})},"esri/geometry/support/GeographicTransformationStep":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(d){let m=
0;return function(){function v(B=null){this.uid=m++;B?(this._wkt=void 0!==B.wkt?B.wkt:null,this._wkid=void 0!==B.wkid?B.wkid:-1,this._isInverse=void 0!==B.isInverse?!0===B.isInverse:!1):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}v.fromGE=function(B){const C=new v;C._wkt=B.wkt;C._wkid=B.wkid;C._isInverse=B.isInverse;return C};v.prototype.getInverse=function(){const B=new v;B._wkt=this.wkt;B._wkid=this._wkid;B._isInverse=!this.isInverse;return B};d._createClass(v,[{key:"wkt",get:function(){return this._wkt},
set:function(B){this._wkt=B;this.uid=m++}},{key:"wkid",get:function(){return this._wkid},set:function(B){this._wkid=B;this.uid=m++}},{key:"isInverse",get:function(){return this._isInverse},set:function(B){this._isInverse=B;this.uid=m++}}]);return v}()})},"esri/views/draw/support/drawUtils":function(){define(["exports","../../../geometry/support/aaBoundingRect","../../../geometry/support/boundsUtils","../../../geometry/support/coordsUtils"],function(d,m,v,B){function C(g,r,u,x){null==x||g.hasZ||(x=
void 0);if("point"===g.type)return g.x+=r,g.y+=u,g.hasZ&&null!=x&&(g.z+=x),g;if("multipoint"===g.type){var y=g.points;for(var t=0;t<y.length;t++)y[t]=A(y[t],r,u,x);return g}if("extent"===g.type)return g.xmin+=r,g.xmax+=r,g.ymin+=u,g.ymax+=u,null!=x&&(g.zmin+=x,g.zmax+=x),g;y=B.geometryToCoordinates(g);t="polyline"===g.type?g.paths:g.rings;for(let l=0;l<y.length;l++){const n=y[l];for(let c=0;c<n.length;c++)n[c]=A(n[c],r,u,x)}"paths"in g?g.paths=t:g.rings=t;return g}function A(g,r,u,x){return q(g,g[0]+
r,g[1]+u,null!=g[2]&&null!=x?g[2]+x:void 0)}function q(g,r,u,x){r=[r,u];2<g.length&&r.push(null!=x?x:g[2]);3<g.length&&r.push(g[3]);return r}d.cloneMove=function(g,r,u,x,y){g=g.clone();var t=x.resolution;if("point"===g.type)return y?C(g,r*t,-u*t):(y=x.state.transform,x=x.state.inverseTransform,t=y[0]*g.x+y[2]*g.y+y[4],y=y[1]*g.x+y[3]*g.y+y[5],g.x=x[0]*(t+r)+x[2]*(y+u)+x[4],g.y=x[1]*(t+r)+x[3]*(y+u)+x[5]),g;if("multipoint"===g.type){if(y)C(g,r*t,-u*t);else{y=g.points;t=x.state.transform;x=x.state.inverseTransform;
for(var l=0;l<y.length;l++){var n=y[l],c=t[0]*n[0]+t[2]*n[1]+t[4],a=t[1]*n[0]+t[3]*n[1]+t[5];y[l]=q(n,x[0]*(c+r)+x[2]*(a+u)+x[4],x[1]*(c+r)+x[3]*(a+u)+x[5],void 0)}}return g}if("extent"===g.type)return y?C(g,r*t,-u*t):(y=x.state.transform,x=x.state.inverseTransform,t=y[0]*g.xmin+y[2]*g.ymin+y[4],l=y[1]*g.xmin+y[3]*g.ymin+y[5],n=y[0]*g.xmax+y[2]*g.ymax+y[4],y=y[1]*g.xmax+y[3]*g.ymax+y[5],g.xmin=x[0]*(t+r)+x[2]*(l+u)+x[4],g.ymin=x[1]*(t+r)+x[3]*(l+u)+x[5],g.xmax=x[0]*(n+r)+x[2]*(y+u)+x[4],g.ymax=x[1]*
(n+r)+x[3]*(y+u)+x[5]),g;if(y)C(g,r*t,-u*t);else{y=B.geometryToCoordinates(g);t="polyline"===g.type?g.paths:g.rings;l=x.state.transform;x=x.state.inverseTransform;for(n=0;n<y.length;n++)for(c=y[n],a=0;a<c.length;a++){const b=c[a],k=l[0]*b[0]+l[2]*b[1]+l[4],e=l[1]*b[0]+l[3]*b[1]+l[5];c[a]=q(b,x[0]*(k+r)+x[2]*(e+u)+x[4],x[1]*(k+r)+x[3]*(e+u)+x[5],void 0)}"paths"in g?g.paths=t:g.rings=t}return g};d.getRotationAngle=function(g,r,u,x,y,t){return 180*Math.atan2(r-t,g-y)/Math.PI-180*Math.atan2(r-x,g-u)/
Math.PI};d.getScaleRatio=function(g,r,u,x,y,t){return Math.sqrt((y-g)*(y-g)+(t-r)*(t-r))/Math.sqrt((u-g)*(u-g)+(x-r)*(x-r))};d.move=C;d.scale=function(g,r,u,x){if("point"===g.type){const {x:e,y:h}=g;var y=x?x[0]:e,t=x?x[1]:h;g=g.clone();u=(h-t)*u+t;g.x=(e-y)*r+y;g.y=u;return g}if("multipoint"===g.type){y=B.geometryToCoordinates(g);t=m.create();const [e,h,w,D]=v.getRingsOrPathsBounds(t,[y]);y=x?x[0]:(e+w)/2;t=x?x[1]:(D+h)/2;g=g.clone();x=g.points;for(var l=0;l<x.length;l++){var n=x[l];const [p,z]=
n;x[l]=q(n,(p-y)*r+y,(z-t)*u+t,void 0)}return g}if("extent"===g.type){const {xmin:e,xmax:h,ymin:w,ymax:D}=g;y=x?x[0]:(e+h)/2;t=x?x[1]:(D+w)/2;g=g.clone();g.xmin=(e-y)*r+y;g.ymax=(D-t)*u+t;g.xmax=(h-y)*r+y;g.ymin=(w-t)*u+t;g.xmin>g.xmax&&(r=g.xmin,g.xmin=g.xmax,g.xmax=r);g.ymin>g.ymax&&(r=g.ymin,g.ymin=g.ymax,g.ymax=r);return g}y=B.geometryToCoordinates(g);t=m.create();const [c,a,b,k]=v.getRingsOrPathsBounds(t,y);t=x?x[0]:(c+b)/2;x=x?x[1]:(k+a)/2;g=g.clone();l="polyline"===g.type?g.paths:g.rings;for(n=
0;n<y.length;n++){const e=y[n];for(let h=0;h<e.length;h++){const w=e[h],[D,p]=w;l[n][h]=q(w,(D-t)*r+t,(p-x)*u+x,void 0)}}"paths"in g?g.paths=l:g.rings=l;return g};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/support/Scheduler":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Logger ../../core/maybe ../../core/PerformanceSampler ../../core/PooledArray ../../core/promiseUtils ../../core/time ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../layers/support/PromiseQueue ./debugFlags".split(" "),
function(d,m,v,B,C,A,q,g,r,u,x,y,t,l,n,c,a,b){function k(M){return h.has(M)?h.get(M):"number"===typeof M?M:1}const e=C.getLogger("esri.views.support.Scheduler");d.TaskPriority=void 0;(function(M){M.RESOURCE_CONTROLLER="schedule";M.SLIDE="slide";M.STREAM_DATA_LOADER="stream loader";M.ELEVATION_QUERY="elevation query";M.TERRAIN_SURFACE="terrain";M.SURFACE_GEOMETRY_UPDATES="surface geometry updates";M.GRAPHICS_CORE="Graphics3D";M.I3S_CONTROLLER="I3S";M.POINT_CLOUD_LAYER="point cloud";M.FEATURE_TILE_FETCHER=
"feature fetcher";M.STAGE="stage";M.GRAPHICS_DECONFLICTOR="graphics deconflictor";M.FILTER_VISIBILITY="Graphics3D filter visibility";M.SCALE_VISIBILITY="Graphics3D scale visibility";M.FRUSTUM_VISIBILITY="Graphics3D frustum visibility";M.POINT_OF_INTEREST_FREQUENT="POI frequent";M.POINT_OF_INTEREST_INFREQUENT="POI infrequent";M.LABELER="labeler";M.FEATURE_QUERY_ENGINE="feature query";M.FEATURE_TILE_TREE="feature tile tree";M.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree";M.ELEVATION_ALIGNMENT="elevation alignment";
M.TEXT_TEXTURE_ATLAS="text texture atlas";M.TEXTURE_UNLOAD="texture unload";M.OVERLAY_MANAGER="overlay manager";M.LINE_OF_SIGHT_TOOL="line of sight tool";M.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool";M.ELEVATION_PROFILE="elevation profile";M.SNAPPING="snapping";M.SHADOW_ACCUMULATOR="shadow accumulator";M[M.TEST_PRIO=1]="TEST_PRIO"})(d.TaskPriority||(d.TaskPriority={}));const h=new Map([[d.TaskPriority.RESOURCE_CONTROLLER,0],[d.TaskPriority.SLIDE,0],[d.TaskPriority.STREAM_DATA_LOADER,
0],[d.TaskPriority.ELEVATION_QUERY,0],[d.TaskPriority.TERRAIN_SURFACE,1],[d.TaskPriority.SURFACE_GEOMETRY_UPDATES,1],[d.TaskPriority.GRAPHICS_CORE,2],[d.TaskPriority.I3S_CONTROLLER,2],[d.TaskPriority.POINT_CLOUD_LAYER,2],[d.TaskPriority.FEATURE_TILE_FETCHER,2],[d.TaskPriority.STAGE,4],[d.TaskPriority.GRAPHICS_DECONFLICTOR,4],[d.TaskPriority.FILTER_VISIBILITY,4],[d.TaskPriority.SCALE_VISIBILITY,4],[d.TaskPriority.FRUSTUM_VISIBILITY,4],[d.TaskPriority.POINT_OF_INTEREST_FREQUENT,6],[d.TaskPriority.POINT_OF_INTEREST_INFREQUENT,
30],[d.TaskPriority.LABELER,8],[d.TaskPriority.FEATURE_QUERY_ENGINE,8],[d.TaskPriority.FEATURE_TILE_TREE,16],[d.TaskPriority.FEATURE_TILE_TREE_ACTIVE,0],[d.TaskPriority.ELEVATION_ALIGNMENT,12],[d.TaskPriority.TEXT_TEXTURE_ATLAS,12],[d.TaskPriority.TEXTURE_UNLOAD,12],[d.TaskPriority.OVERLAY_MANAGER,12],[d.TaskPriority.LINE_OF_SIGHT_TOOL,16],[d.TaskPriority.LINE_OF_SIGHT_TOOL_INTERACTIVE,0],[d.TaskPriority.SNAPPING,0],[d.TaskPriority.SHADOW_ACCUMULATOR,30]]),w=u.Milliseconds(6.5),D=u.Milliseconds(1),
p=u.Milliseconds(30),z=u.Milliseconds(1E3/30),f=u.Milliseconds(100);var E;(function(M){let P=function(R){function Z(S){var O=R.call(this,S)||this;O.updating=!0;O.performanceInfo={total:new q("total"),tasks:new Map};O._frameTaskTimes=new Map;O._budget=null;O._state=1;O._tasks=new g;O._runQueue=new g;O._load=0;O._idleStateCallbacks=new g;O._idleUpdatesStartFired=!1;O._maxReschedule=W;O._forceTask=!1;O._debug=!1;O._debugHandle=x.init(b,"SCHEDULER_LOG_SLOW_TASKS",Q=>O._debug=Q);O._budget=new H(S.nowFunc);
for(const Q of Object.keys(d.TaskPriority))O.performanceInfo.tasks.set(d.TaskPriority[Q],new q(d.TaskPriority[Q]));let J;const K=m._assertThisInitialized(O);O._test={get state(){return A.isNone(J)?K._state:J},set state(Q){J=Q},FRAME_SAFETY_BUDGET:w,INTERACTING_BUDGET:z,IDLE_BUDGET:f,get budget(){return K._budget.budget},usedBudget:0,updateTask:Q=>O._updateTask(Q),getState:Q=>O._getState(Q),getRuntime:Q=>O._getRuntime(Q),resetRuntimes:()=>O._resetRuntimes(),getRunning:()=>O._getRunning()};return O}
m._inheritsLoose(Z,R);var N=Z.prototype;N.destroy=function(){this._debugHandle&&this._debugHandle.remove()};N.registerTask=function(S,O){const J=k(S);O=new V(this,S,O,J);this._tasks.push(O);this.performanceInfo.tasks.has(S)||this.performanceInfo.tasks.set(S,new q(S));return O};N.registerIdleStateCallbacks=function(S,O){const J={idleBegin:S,idleEnd:O};this._idleStateCallbacks.push(J);2===this.state&&this._idleUpdatesStartFired&&J.idleBegin();const K=this;return{remove:()=>this._removeIdleStateCallbacks(J),
set idleBegin(Q){K._idleUpdatesStartFired&&(J.idleEnd(),2===K._state&&Q());J.idleBegin=Q},set idleEnd(Q){J.idleEnd=Q}}};N.updateBudget=function(S){this._test.usedBudget=0;let O=w,J=S.frameDuration,K=D;switch(this.state){case 2:O=u.Milliseconds(0);J=u.Milliseconds(Math.max(f,S.frameDuration));K=p;break;case 1:J=u.Milliseconds(Math.max(z,S.frameDuration))}J=u.Milliseconds(J-S.elapsedFrameTime-O);if(2!==this.state&&J<D&&!this._forceTask)return this._forceTask=!0,!1;J=u.Milliseconds(Math.max(J,K));this._budget.reset(J,
this.state);this._maxReschedule=W;this._updateLoad();return this._schedule()};N.frame=function(){this._forceTask=!1;switch(this.state){case 2:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(S=>S.idleBegin()));this._runIdle();break;case 1:this._runInteracting();break;default:this._runAnimating()}this._test.usedBudget=this._budget.elapsed};N.stopFrame=function(){this._budget.reset(u.Milliseconds(0),this._state);this._budget.madeProgress()};N._removeIdleStateCallbacks=
function(S){this._idleUpdatesStartFired&&S.idleEnd();this._idleStateCallbacks.removeUnordered(S)};N.removeTask=function(S){this._tasks.removeUnordered(S);this._runQueue.removeUnordered(S)};N._updateTask=function(S){this._tasks.forAll(O=>{O.name===S&&O.setPriority(S)})};N._getState=function(S){if(this._runQueue.some(J=>J.name===S))return d.TaskState.SCHEDULED;let O=d.TaskState.IDLE;this._tasks.forAll(J=>{J.name===S&&J.needsUpdate&&(1>=J.schedulePriority?O=d.TaskState.READY:O!==d.TaskState.READY&&(O=
d.TaskState.WAITING))});return O};N._getRuntime=function(S){let O=0;this._tasks.forAll(J=>{J.name===S&&(O+=J.runtime)});return O};N._resetRuntimes=function(){this._tasks.forAll(S=>S.runtime=0)};N._getRunning=function(){const S=new Map;this._tasks.forAll(J=>{J.needsUpdate&&S.set(J.name,(S.get(J.name)||0)+1)});if(0===S.size)return null;let O="";S.forEach((J,K)=>{O=1<J?O+` ${J}x ${K}`:O+` ${K}`});return O};N._runIdle=function(){this._run()};N._runInteracting=function(){this._run()};N._runAnimating=function(){this._run()};
N._updateLoad=function(){const S=this._tasks.reduce((O,J)=>J.needsUpdate?++O:O,0);this._load=.9*this._load+S*(1-.9)};N._schedule=function(){if(0>=this._maxReschedule)return!1;this._runQueue.filterInPlace(S=>{if(S.needsUpdate)return!0;S.schedulePriority=S.basePriority;return!1});for(this._tasks.forAll(S=>{0===S.basePriority&&S.needsUpdate&&!this._runQueue.some(O=>O===S)&&this._runQueue.unshift(S)});0===this._runQueue.length;){let S=!1,O=0;this._tasks.forAll(J=>{if(J.needsUpdate&&0!==J.schedulePriority&&
0!==J.basePriority)switch(S=!0,O=Math.max(O,J.basePriority),J.schedulePriority){case 1:J.schedulePriority=0;this._runQueue.push(J);break;default:--J.schedulePriority}});if(!S)return this.updating=!1;this._maxReschedule===W&&(this._maxReschedule=O);--this._maxReschedule}return this.updating=!0};N._run=function(){const S=this._budget.now();this._startFrameTaskTimes();do for(;0<this._runQueue.length;){var O=this._budget.now();const J=this._runQueue.pop();this._budget.resetProgress();try{J.task.runTask(this._budget)}catch(K){e.error(`Exception in task "${J.name}"`,
K)}J.schedulePriority=J.basePriority;O=this._budget.now()-O;J.runtime+=O;this._frameTaskTimes.set(J.priority,this._frameTaskTimes.get(J.priority)+O);this._debug&&this._budget.elapsed>2*this._budget.budget&&console.log("Task",J.name,"used",this._budget.elapsed,"of max",this._budget.budget,"ms");if(0>=this._budget.remaining){this._recordFrameTaskTimes(this._budget.now()-S);return}}while(this._schedule());this._recordFrameTaskTimes(this._budget.now()-S)};N._startFrameTaskTimes=function(){for(const S of Object.keys(d.TaskPriority))this._frameTaskTimes.set(d.TaskPriority[S],
0)};N._recordFrameTaskTimes=function(S){this._frameTaskTimes.forEach((O,J)=>this.performanceInfo.tasks.get(J).record(O));this.performanceInfo.total.record(S)};m._createClass(Z,[{key:"now",get:function(){return this.nowFunc()}},{key:"load",get:function(){return this._load}},{key:"state",get:function(){return A.isNone(this._test.state)?this._state:this._test.state},set:function(S){this._state!==S&&(this._state=S,2!==this.state&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(O=>
O.idleEnd())))}},{key:"test",get:function(){return this._test}}]);return Z}(B);v.__decorate([y.property()],P.prototype,"updating",void 0);v.__decorate([y.property()],P.prototype,"nowFunc",void 0);P=v.__decorate([c.subclass("esri.views.support.Scheduler")],P);M.Scheduler=P;let V=function(R){function Z(S,O,J,K){var Q=R.call(this,{})||this;Q._scheduler=S;Q.name=O;Q._basePriority=K;Q.runtime=0;Q._queue=new a;Q.updating=!1;Q.schedulePriority=Q._basePriority;Q.task=A.isSome(J)?J:{running:!1,runTask:da=>
Q.processQueue(da)};return Q}m._inheritsLoose(Z,R);var N=Z.prototype;N.normalizeCtorArgs=function(){return{}};N.remove=function(){this.processQueue(F);this._scheduler.removeTask(this);this.schedule=L.schedule;this.reschedule=L.reschedule};N.setPriority=function(S){this.name=S;S=k(S);if(0===this._basePriority||0!==this.schedulePriority)this.schedulePriority=S;this._basePriority=S};N.schedule=function(S,O,J){this.updating=!0;return this._queue.push(S,O,J)};N.reschedule=function(S,O,J){this.updating=
!0;return this._queue.unshift(S,O,J)};N.processQueue=function(S){for(;!S.done&&this._queue.process();)S.madeProgress();this.updating=0<this._queue.length};m._createClass(Z,[{key:"basePriority",get:function(){return this._basePriority}},{key:"priority",get:function(){return this.name},set:function(S){this.setPriority(S)}},{key:"needsUpdate",get:function(){return this.updating||this.task.running}}]);return Z}(B);v.__decorate([y.property()],V.prototype,"updating",void 0);V=v.__decorate([c.subclass("esri.views.support.SchedulerTask")],
V);let H=function(){function R(N){this.now=N;this._budget=this._begin=0;this._state=2;this._didWork=!1;this._enabled=!0}var Z=R.prototype;Z.run=function(N){if(this.done)return!1;!0===N()&&(this._didWork=!0);return!0};Z.madeProgress=function(){this._didWork=!0};Z.reset=function(N,S){this._begin=this.now();this._budget=N;this._state=S;this._didWork=!1};Z.resetProgress=function(){this._didWork=!1};m._createClass(R,[{key:"done",get:function(){return this._didWork&&this.elapsed>=this._budget&&this._enabled}},
{key:"budget",get:function(){return this._budget}},{key:"state",get:function(){return this._state}},{key:"enabled",get:function(){return this._enabled},set:function(N){this._enabled=N}},{key:"remaining",get:function(){return Math.max(this._budget-this.elapsed,0)}},{key:"elapsed",get:function(){return this.now()-this._begin}},{key:"hasProgressed",get:function(){return this._didWork}}]);return R}();M.Budget=H})(E||(E={}));d.TaskState=void 0;(function(M){M.SCHEDULED="s";M.READY="r";M.WAITING="w";M.IDLE=
"i"})(d.TaskState||(d.TaskState={}));const F=(()=>{const M=new E.Budget(()=>performance.now());M.enabled=!1;return M})(),L=new (function(){function M(){}var P=M.prototype;P.remove=function(){};P.processQueue=function(){};P.schedule=function(V,H,R){try{if(r.isAborted(H)){const Z=r.createAbortError();return R?Promise.resolve(R(Z)):Promise.reject(Z)}return r.when(V())}catch(Z){return Promise.reject(Z)}};P.reschedule=function(V,H,R){return this.schedule(V,H,R)};return M}()),W=Number.MAX_SAFE_INTEGER;
d.ImmediateTask=L;d.getTaskPriority=k;d.newScheduler=function(M){return new E.Scheduler({nowFunc:M})};d.noBudget=F;d.taskPriorities=h;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/layers/support/PromiseQueue":function(){define(["../../chunks/_rollupPluginBabelHelpers","../../core/promiseUtils"],function(d,m){let v=function(B,C,A,q,g){this.resolve=B;this.reject=C;this.callback=A;this.signal=q;this.abortCallback=g};return function(){function B(){this._tasks=[]}var C=B.prototype;C.push=function(A,
q,g){return new Promise((r,u)=>this._tasks.push(new v(r,u,A,q,g)))};C.unshift=function(A,q,g){return new Promise((r,u)=>this._tasks.unshift(new v(r,u,A,q,g)))};C.process=function(){if(0===this._tasks.length)return!1;const A=this._tasks.shift();try{const q=m.isAborted(A.signal);if(q&&!A.abortCallback)A.reject(m.createAbortError());else{const g=q?A.abortCallback(m.createAbortError()):A.callback();m.isPromise(g)?g.then(A.resolve,A.reject):A.resolve(g)}}catch(q){A.reject(q)}return!0};C.cancelAll=function(){const A=
m.createAbortError();for(const q of this._tasks)if(q.abortCallback){const g=q.abortCallback(A);q.resolve(g)}else q.reject(A);this._tasks.length=0};d._createClass(B,[{key:"length",get:function(){return this._tasks.length}}]);return B}()})},"esri/views/support/debugFlags":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass".split(" "),
function(d,m,v,B,C,A,q,g,r){v=function(u){function x(){var y=u.apply(this,arguments)||this;y.SCHEDULER_LOG_SLOW_TASKS=!1;y.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1;return y}d._inheritsLoose(x,u);return x}(v);m.__decorate([B.property()],v.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0);m.__decorate([B.property()],v.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0);v=m.__decorate([r.subclass("esri.views.support.DebugFlags")],v);return new v})},"esri/views/3d/interactive/SnappingVisualizer3D":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../Color ../../../core/has ../../../core/handleUtils ../../../chunks/vec3 ../../../chunks/vec3f64 ./visualElements/ExtendedLineVisualElement ./visualElements/ParallelLineVisualElement ./visualElements/PointVisualElement ./visualElements/RightAngleQuadVisualElement ../../interactive/snapping/Settings ../../interactive/snapping/snappingUtils ../../interactive/snapping/SnappingVisualizer".split(" "),
function(d,m,v,B,C,A,q,g,r,u,x,y,t,l){B=function(n){function c(){return n.apply(this,arguments)||this}m._inheritsLoose(c,n);var a=c.prototype;a.visualizeIntersectionPoint=function(b,k){const {coordinateHelper:e,elevationInfo:h,view:w}=k;return C.destroyHandle(new u.PointVisualElement({view:w,primitive:"circle",geometry:e.createPoint(b.intersectionPoint),elevationInfo:h,size:20,outlineSize:2,color:[0,0,0,0],outlineColor:v.toUnitRGBA(y.defaults.orange),pixelSnappingEnabled:!1}))};a.visualizePoint=function(b,
k){const {coordinateHelper:e,elevationInfo:h,view:w}=k;return C.destroyHandle(new u.PointVisualElement({view:w,primitive:"circle",geometry:e.createPoint(b.point),elevationInfo:h,size:20,outlineSize:2,color:[0,0,0,0],outlineColor:v.toUnitRGBA(y.defaults.orange),pixelSnappingEnabled:!1}))};a.visualizeLine=function(b,k){const {coordinateHelper:e,elevationInfo:h,view:w}=k;return C.destroyHandle(this.createLineSegmentHintFromMap(b.type,b.lineStart,b.lineEnd,e,h,w,b.fadeLeft,b.fadeRight))};a.visualizeParallelSign=
function(b,k){const {coordinateHelper:e,elevationInfo:h,view:w}=k,D=t.anyMapPointToRender(b.lineStart,e,h,k.view);b=t.anyMapPointToRender(b.lineEnd,e,h,k.view);b=A.lerp(b,D,b,.5);k=new r.ParallelLineVisualElement({view:w,attached:!1,offset:y.defaults.parallelLineHintOffset,length:y.defaults.parallelLineHintLength,width:y.defaults.parallelLineHintWidth,color:v.toUnitRGBA(y.defaults.orange),location:b,renderOccluded:16});k.setDirectionFromPoints(D,b);k.attached=!0;return C.destroyHandle(k)};a.visualizeRightAngleQuad=
function(b,k){const {coordinateHelper:e,elevationInfo:h,view:w}=k;return C.destroyHandle(new x.RightAngleQuadVisualElement({view:w,attached:!0,color:v.toUnitRGBA(y.defaults.orange),renderOccluded:2,outlineRenderOccluded:16,outlineColor:v.toUnitRGBA(y.defaults.orange),outlineSize:y.defaults.rightAngleHintOutlineSize,size:y.defaults.rightAngleHintSize,geometry:{previous:t.anyMapPointToRender(b.previousVertex,e,h,w),center:t.anyMapPointToRender(b.centerVertex,e,h,w),next:t.anyMapPointToRender(b.nextVertex,
e,h,w)}}))};a.createLineSegmentHintFromMap=function(b,k,e,h,w,D,p=!0,z=!0){const f=q.create(),E=q.create();t.anyMapPointsToRenderWithEqualZ(k,e,h,w,D,f,E);return this.createLineSegmentHint(b,D,f,E,p,z)};a.createLineSegmentHint=function(b,k,e,h,w=!0,D=!0){k=new g.ExtendedLineVisualElement({view:k,extensionType:3,start:e,end:h,color:v.toUnitRGBA(y.defaults.orange),renderOccluded:16});switch(b){case 0:k.width=y.defaults.lineHintWidthTarget;k.fadedExtensions={start:0,end:y.defaults.lineHintFadedExtensions};
break;case 2:k.width=y.defaults.lineHintWidthReference;k.fadedExtensions={start:0,end:0};break;case 1:k.width=y.defaults.lineHintWidthReference,k.fadedExtensions={start:w?y.defaults.lineHintFadedExtensions:0,end:D?y.defaults.lineHintFadedExtensions:0}}k.attached=!0;return k};return c}(l.SnappingVisualizer);d.SnappingVisualizer3D=B;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/3d/interactive/visualElements/ExtendedLineVisualElement":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/has ../../../../core/Handles ../../../../core/maybe ../../../../chunks/vec3 ../../../../chunks/vec3f64 ../../../../chunks/vec4 ../../../../chunks/vec4f32 ../../../../geometry/support/clipRay ../../../../geometry/support/frustum ../../../../geometry/support/lineSegment ../../../../geometry/support/ray ./LaserlineVisualElement ./Object3DVisualElement ../../webgl-engine/lib/GeometryUtil ../../webgl-engine/materials/RibbonLineMaterial".split(" "),
function(d,m,v,B,C,A,q,g,r,u,x,y,t,l,n,c,a){v=function(D){function p(f){var E=D.call(this,f)||this;E._ray=t.create();E._externalResources=null;E._handles=new B;E._isWorldDown=!1;E._start=q.create();E._end=q.fromValues(1,0,0);E._width=1;E._color=r.fromValues(1,0,1,1);E._polygonOffset=!1;E._writeDepthEnabled=!0;E._innerWidth=0;E._innerColor=r.fromValues(1,1,1,1);E._stippleIntegerRepeats=!0;E._stipplePattern=null;E._stippleOffColor=null;E._falloff=0;E._extensionType=0;E._laserlineStyle=null;E._laserlineEnabled=
!1;E._renderOccluded=4;E._fadedExtensions=w;E.applyProps(f);return E}m._inheritsLoose(p,D);var z=p.prototype;z.createExternalResources=function(){const f=new a.RibbonLineMaterial(this.materialParameters);this._handles.add(this.view.state.watch("camera",()=>{this.updateGeometry()}));const E=new l.LaserlineVisualElement({view:this.view,attached:this._laserlineEnabled});this._externalResources={material:f,laserline:E}};z.destroyExternalResources=function(){C.isSome(this._externalResources)&&this._externalResources.laserline.destroy();
this._externalResources=null;this._handles.removeAll()};z.forEachExternalMaterial=function(f){C.isSome(this._externalResources)&&f(this._externalResources.material)};z.createGeometries=function(f){var E=[q.create(),q.create()],F=3===this.extensionType;F&&E.push(q.create(),q.create());F=F?new Float32Array([1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,0]):null;E=c.createPolylineGeometry(E,null,F);f.addGeometry(E,C.unwrap(this._externalResources).material);this.updateVertices(E)};z.updateVisibility=function(f){D.prototype.updateVisibility.call(this,
f);C.isSome(this._externalResources)&&(this._externalResources.laserline.visible=f)};z.setStartEndFromWorldDownAtLocation=function(f){this._isWorldDown=!0;A.copy(this._start,f);this.view.renderCoordsHelper.worldUpAtPosition(f,this._end);A.subtract(this._end,f,this._end);t.fromPoints(this._start,this._end,this._ray);this.updateGeometry()};z.updateMaterial=function(){C.isNone(this._externalResources)||this._externalResources.material.setParameterValues(this.materialParameters)};z.updateGeometry=function(){C.isSome(this.object)&&
this.updateVertices(this.object.geometries[0])};z.updateVertices=function(f){const E=3===this._extensionType?this.updateLineSegmentFinite(h):this.updateLineSegmentInfinite(this._extensionType,h);this.updateVertexAttributes(f,E);C.isSome(this._externalResources)&&(this._externalResources.laserline.intersectsLine=E)};z.updateLineSegmentFinite=function(f){return y.fromPoints(this._start,this._end,f)};z.updateLineSegmentInfinite=function(f,E){var F=this.view.state.camera;u.fromRay(this._ray,b);switch(f){case 0:b.c0=
-Number.MAX_VALUE;break;case 1:case 2:var L=this._ray.origin;f=C.unwrapOr(this.view.elevationProvider.getElevation(L[0],L[1],L[2],this.view.renderCoordsHelper.spatialReference,"ground"),0);L=this.view.renderCoordsHelper.getAltitude(L);this._isWorldDown&&L<f&&A.negate(b.ray.direction,b.ray.direction);2===this._extensionType&&null!=f&&(b.c1=Math.abs(L-f))}if(!x.intersectClipRay(F.frustum,b))return y.fromPoints(this._start,this._end,E);F=u.getStart(b,k);f=u.getEnd(b,e);return y.fromPoints(F,f,E)};z.updateVertexAttributes=
function(f,E){f=f.getMutableAttribute("position").data;if(3===this.extensionType){var F=y.pointAt(E,-this.fadedExtensions.start,k);f[0]=F[0];f[1]=F[1];f[2]=F[2];F=y.pointAt(E,0,k);f[3]=F[0];f[4]=F[1];f[5]=F[2];F=y.pointAt(E,1,k);f[6]=F[0];f[7]=F[1];f[8]=F[2];E=y.pointAt(E,1+this.fadedExtensions.end,k);f[9]=E[0];f[10]=E[1];f[11]=E[2]}else F=y.pointAt(E,0,k),f[0]=F[0],f[1]=F[1],f[2]=F[2],E=y.pointAt(E,1,k),f[3]=E[0],f[4]=E[1],f[5]=E[2];C.isSome(this.object)&&this.object.geometryVertexAttrsUpdated(0)};
m._createClass(p,[{key:"start",get:function(){return this._start},set:function(f){this._isWorldDown=!1;A.exactEquals(this._start,f)||(A.copy(this._start,f),t.fromPoints(this._start,this._end,this._ray),this.updateGeometry())}},{key:"end",get:function(){return this._end},set:function(f){this._isWorldDown=!1;A.exactEquals(this._end,f)||(A.copy(this._end,f),t.fromPoints(this._start,this._end,this._ray),this.updateGeometry())}},{key:"width",get:function(){return this._width},set:function(f){f!==this._width&&
(this._width=f,this.updateMaterial())}},{key:"color",get:function(){return this._color},set:function(f){g.exactEquals(f,this._color)||(g.copy(this._color,f),this.updateMaterial())}},{key:"polygonOffset",get:function(){return this._polygonOffset},set:function(f){f!==this._polygonOffset&&(this._polygonOffset=f,this.updateMaterial())}},{key:"writeDepthEnabled",get:function(){return this._writeDepthEnabled},set:function(f){this._writeDepthEnabled!==f&&(this._writeDepthEnabled=f,this.updateMaterial())}},
{key:"innerWidth",get:function(){return this._innerWidth},set:function(f){f!==this._innerWidth&&(this._innerWidth=f,this.updateMaterial())}},{key:"innerColor",get:function(){return this._innerColor},set:function(f){g.exactEquals(f,this._innerColor)||(g.copy(this._innerColor,f),this.updateMaterial())}},{key:"stippleIntegerRepeats",get:function(){return this._stippleIntegerRepeats},set:function(f){f!==this._stippleIntegerRepeats&&(this._stippleIntegerRepeats=f,this.updateMaterial())}},{key:"stipplePattern",
get:function(){return this._stipplePattern},set:function(f){const E=C.isSome(f)!==C.isSome(this._stipplePattern);this._stipplePattern=f;E?this.recreate():this.updateMaterial()}},{key:"stippleOffColor",get:function(){return this._stippleOffColor},set:function(f){if(C.isNone(f)||C.isNone(this._stippleOffColor)||!g.exactEquals(f,this._stippleOffColor))this._stippleOffColor=C.isSome(f)?r.clone(f):null,this.updateMaterial()}},{key:"falloff",get:function(){return this._falloff},set:function(f){f!==this._falloff&&
(this._falloff=f,this.updateMaterial())}},{key:"extensionType",get:function(){return this._extensionType},set:function(f){f!==this._extensionType&&(this._extensionType=f,this.updateGeometry())}},{key:"_laserlineAttached",get:function(){return this._laserlineEnabled&&C.isSome(this._laserlineStyle)}},{key:"laserlineStyle",get:function(){return this._laserlineStyle},set:function(f){this._laserlineStyle=f;C.isSome(this._externalResources)&&(this._externalResources.laserline.attached=this._laserlineAttached,
C.isSome(f)&&(this._externalResources.laserline.style=f))}},{key:"laserlineEnabled",get:function(){return this._laserlineEnabled},set:function(f){this._laserlineEnabled!==f&&(this._laserlineEnabled=f,C.isSome(this._externalResources)&&(this._externalResources.laserline.attached=this._laserlineAttached))}},{key:"renderOccluded",get:function(){return this._renderOccluded},set:function(f){f!==this._renderOccluded&&(this._renderOccluded=f,this.updateMaterial())}},{key:"fadedExtensions",get:function(){return this._fadedExtensions},
set:function(f){this._fadedExtensions=C.unwrapOr(f,w);this.recreateGeometry()}},{key:"materialParameters",get:function(){return{width:this._width,color:this._color,stippleOffColor:this._stippleOffColor,stipplePattern:this._stipplePattern,stippleIntegerRepeats:this._stippleIntegerRepeats,innerWidth:this._innerWidth,innerColor:this._innerColor,falloff:this._falloff,polygonOffset:this._polygonOffset,renderOccluded:this._renderOccluded,writeDepth:this._writeDepthEnabled}}}]);return p}(n.Object3DVisualElement);
const b=u.create(),k=q.create(),e=q.create(),h=y.create();n=1/3;const w={start:n,end:n};d.ExtendedLineVisualElement=v;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/chunks/vec4f32":function(){define(["exports"],function(d){function m(){return new Float32Array(4)}function v(k){const e=new Float32Array(4);e[0]=k[0];e[1]=k[1];e[2]=k[2];e[3]=k[3];return e}function B(k,e,h,w){const D=new Float32Array(4);D[0]=k;D[1]=e;D[2]=h;D[3]=w;return D}function C(k,e){return new Float32Array(k,e,4)}function A(){return m()}
function q(){return B(1,1,1,1)}function g(){return B(1,0,0,0)}function r(){return B(0,1,0,0)}function u(){return B(0,0,1,0)}function x(){return B(0,0,0,1)}const y=m(),t=q(),l=g(),n=r(),c=u(),a=x();var b=Object.freeze({__proto__:null,create:m,clone:v,fromValues:B,createView:C,zeros:A,ones:q,unitX:g,unitY:r,unitZ:u,unitW:x,ZEROS:y,ONES:t,UNIT_X:l,UNIT_Y:n,UNIT_Z:c,UNIT_W:a});d.ONES=t;d.UNIT_W=a;d.UNIT_X=l;d.UNIT_Y=n;d.UNIT_Z=c;d.ZEROS=y;d.clone=v;d.create=m;d.createView=C;d.fromValues=B;d.ones=q;d.unitW=
x;d.unitX=g;d.unitY=r;d.unitZ=u;d.vec4f32=b;d.zeros=A})},"esri/geometry/support/clipRay":function(){define(["exports","../../core/ObjectStack","../../chunks/vec3","./ray","./vectorStacks"],function(d,m,v,B,C){function A(x){return x?{ray:B.create(x.ray),c0:x.c0,c1:x.c1}:{ray:B.create(),c0:0,c1:Number.MAX_VALUE}}function q(x,y,t,l=A()){B.copy(x,l.ray);l.c0=y;l.c1=t;return l}function g(x,y,t=A()){const l=v.length(x.vector);B.fromValues(x.origin,y,t.ray);t.c0=0;t.c1=l;return t}function r(x,y,t){return v.add(t,
x.ray.origin,v.scale(t,x.ray.direction,y))}const u=new m.ObjectStack(()=>({c0:0,c1:0,ray:null}));d.copy=function(x,y=A()){return q(x.ray,x.c0,x.c1,y)};d.create=A;d.fromLineSegment=function(x,y=A()){const t=v.normalize(C.sv3d.get(),x.vector);return g(x,t,y)};d.fromLineSegmentAndDirection=g;d.fromRay=function(x,y=A()){B.copy(x,y.ray);y.c0=0;y.c1=Number.MAX_VALUE;return y};d.fromValues=q;d.getAt=r;d.getEnd=function(x,y){return r(x,x.c1,y)};d.getStart=function(x,y){return r(x,x.c0,y)};d.wrap=function(x,
y,t){const l=u.get();l.ray=x;l.c0=y;l.c1=t;return l};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/geometry/support/frustum":function(){define("exports ../../core/ObjectStack ../../chunks/mat4 ../../chunks/vec3 ../../chunks/vec3f64 ../../chunks/vec4 ../../chunks/vec4f64 ./clipRay ./plane ./vectorStacks".split(" "),function(d,m,v,B,C,A,q,g,r,u){function x(b){return b?[r.create(b[0]),r.create(b[1]),r.create(b[2]),r.create(b[3]),r.create(b[4]),r.create(b[5])]:[r.create(),r.create(),r.create(),
r.create(),r.create(),r.create()]}function y(){return[C.create(),C.create(),C.create(),C.create(),C.create(),C.create(),C.create(),C.create()]}function t(b,k){r.fromPoints(k[4],k[0],k[3],b[0]);r.fromPoints(k[1],k[5],k[6],b[1]);r.fromPoints(k[4],k[5],k[1],b[2]);r.fromPoints(k[3],k[2],k[6],b[3]);r.fromPoints(k[0],k[1],k[2],b[4]);r.fromPoints(k[5],k[4],k[7],b[5])}function l(b,k){for(let e=0;6>e;e++)if(!r.clip(b[e],k))return!1;return!0}const n=[q.fromValues(-1,-1,-1,1),q.fromValues(1,-1,-1,1),q.fromValues(1,
1,-1,1),q.fromValues(-1,1,-1,1),q.fromValues(-1,-1,1,1),q.fromValues(1,-1,1,1),q.fromValues(1,1,1,1),q.fromValues(-1,1,1,1)],c=new m.ObjectStack(g.create),a=y();d.computePlanes=t;d.copy=function(b,k=x()){for(let e=0;6>e;e++)r.copy(b[e],k[e])};d.create=x;d.createPoints=y;d.fromMatrix=function(b,k,e,h=a){b=v.multiply(u.sm4d.get(),k,b);v.invert(b,b);for(k=0;8>k;++k){const w=A.transformMat4(u.sv4d.get(),n[k],b);B.set(h[k],w[0]/w[3],w[1]/w[3],w[2]/w[3])}t(e,h)};d.intersectClipRay=function(b,k){for(let e=
0;6>e;e++)if(!r.clipInfinite(b[e],k))return!1;return!0};d.intersectsAABB=function(b,k){for(let e=0;6>e;e++)if(r.isAABBFullyInside(b[e],k))return!1;return!0};d.intersectsLineSegment=function(b,k,e){return l(b,g.fromLineSegmentAndDirection(k,e,c.get()))};d.intersectsPoint=function(b,k){for(let e=0;6>e;e++)if(0<r.signedDistance(b[e],k))return!1;return!0};d.intersectsRay=function(b,k){return l(b,g.fromRay(k,c.get()))};d.intersectsSphere=function(b,k){for(let e=0;6>e;e++)if(r.isSphereFullyInside(b[e],
k))return!1;return!0};d.planePointIndices={bottom:[5,1,0,4],near:[0,1,2,3],far:[5,4,7,6],right:[1,5,6,2],left:[4,0,3,7],top:[7,3,2,6]};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/geometry/support/lineSegment":function(){define("exports ../../core/mathUtils ../../core/ObjectStack ../../chunks/vec3 ../../chunks/vec3f64 ./vectorStacks".split(" "),function(d,m,v,B,C,A){function q(n){return n?{origin:C.clone(n.origin),vector:C.clone(n.vector)}:{origin:C.create(),vector:C.create()}}function g(n,
c){const a=l.get();a.origin=n;a.vector=c;return a}function r(n,c,a=q()){B.copy(a.origin,n);B.copy(a.vector,c);return a}function u(n,c){c=B.subtract(A.sv3d.get(),c,n.origin);var a=B.dot(n.vector,c);const b=B.dot(n.vector,n.vector);a=m.clamp(a/b,0,1);n=B.subtract(A.sv3d.get(),B.scale(A.sv3d.get(),n.vector,a),c);return B.dot(n,n)}function x(n,c,a,b,k){const {vector:e,origin:h}=n;c=B.subtract(A.sv3d.get(),c,h);c=B.dot(e,c)/B.squaredLength(e);B.scale(k,e,m.clamp(c,a,b));return B.add(k,k,n.origin)}function y(n,
c,a,b){const k=n.origin;var e=B.add(A.sv3d.get(),k,n.vector);n=c.origin;var h=B.add(A.sv3d.get(),n,c.vector),w=A.sv3d.get();c=A.sv3d.get();w[0]=k[0]-n[0];w[1]=k[1]-n[1];w[2]=k[2]-n[2];c[0]=h[0]-n[0];c[1]=h[1]-n[1];c[2]=h[2]-n[2];if(1E-6>Math.abs(c[0])&&1E-6>Math.abs(c[1])&&1E-6>Math.abs(c[2]))return!1;h=A.sv3d.get();h[0]=e[0]-k[0];h[1]=e[1]-k[1];h[2]=e[2]-k[2];if(1E-6>Math.abs(h[0])&&1E-6>Math.abs(h[1])&&1E-6>Math.abs(h[2]))return!1;e=w[0]*c[0]+w[1]*c[1]+w[2]*c[2];var D=c[0]*h[0]+c[1]*h[1]+c[2]*h[2];
const p=c[0]*c[0]+c[1]*c[1]+c[2]*c[2],z=(h[0]*h[0]+h[1]*h[1]+h[2]*h[2])*p-D*D;if(1E-6>Math.abs(z))return!1;w=(e*D-(w[0]*h[0]+w[1]*h[1]+w[2]*h[2])*p)/z;e=(e+D*w)/p;a&&(w=m.clamp(w,0,1),e=m.clamp(e,0,1));a=A.sv3d.get();D=A.sv3d.get();a[0]=k[0]+w*h[0];a[1]=k[1]+w*h[1];a[2]=k[2]+w*h[2];D[0]=n[0]+e*c[0];D[1]=n[1]+e*c[1];D[2]=n[2]+e*c[2];b.tA=w;b.tB=e;b.pA=a;b.pB=D;b.distance2=B.squaredDistance(a,D);return!0}const t={tA:0,tB:0,pA:C.create(),pB:C.create(),distance2:0},l=new v.ObjectStack(()=>({origin:null,
vector:null}));d.closestLineSegmentDistance2=function(n,c){return y(n,c,!0,t)?t.distance2:null};d.closestLineSegmentPoint=function(n,c,a){return y(n,c,!0,t)?(B.copy(a,t.pA),!0):!1};d.closestRayDistance2=function(n,c){if(y(n,g(c.origin,c.direction),!1,t)){const {tA:a,pB:b,distance2:k}=t;if(0<=a&&1>=a)return k;if(0>a)return B.squaredDistance(n.origin,b);if(1<a)return B.squaredDistance(B.add(A.sv3d.get(),n.origin,n.vector),b)}return null};d.copy=function(n,c=q()){return r(n.origin,n.vector,c)};d.create=
q;d.distance=function(n,c){return Math.sqrt(u(n,c))};d.distance2=u;d.fromPoints=function(n,c,a=q()){B.copy(a.origin,n);B.subtract(a.vector,c,n);return a};d.fromValues=r;d.pointAt=function(n,c,a){return B.add(a,n.origin,B.scale(a,n.vector,c))};d.projectPoint=function(n,c,a){return x(n,c,0,1,a)};d.projectPointClamp=x;d.wrap=g;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/3d/interactive/visualElements/LaserlineVisualElement":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../chunks/vec3 ../../../../chunks/vec3f64 ../../../../geometry/support/lineSegment ./VisualElement ../../support/LaserLineRenderer ../../../../chunks/Laserlines.glsl".split(" "),
function(d,m,v,B,C,A,q,g,r){q=function(x){function y(l){var n=x.call(this,l.view)||this;n._angleCutoff=r.defaultAngleCutoff;n._style={};n._heightManifoldTarget=C.create();n._heightManifoldEnabled=!1;n._intersectsLine=A.create();n._intersectsLineEnabled=!1;n._intersectsLineInfinite=!1;n._lineVerticalPlaneSegment=null;n._pathVerticalPlaneBuffers=null;n._pointDistanceLine=null;n.applyProps(l);return n}m._inheritsLoose(y,x);var t=y.prototype;t.createResources=function(){this.ensureRenderer()};t.destroyResources=
function(){this.disposeRenderer()};t.updateVisibility=function(){this.syncHeightManifold();this.syncIntersectsLine();this.syncPathVerticalPlane();this.syncLineVerticalPlane();this.syncPointDistance()};t.syncRenderer=function(){this.attached&&(this._intersectsLineEnabled||this._heightManifoldEnabled||v.isSome(this._pointDistanceLine)||v.isSome(this._pathVerticalPlaneBuffers))?this.ensureRenderer():this.disposeRenderer()};t.ensureRenderer=function(){v.isSome(this.renderer)||(this.renderer=new g.LaserLineRenderer(this.view.renderCoordsHelper,
void 0,{contrastControlEnabled:!0}),this.syncStyle(),this.syncHeightManifold(),this.syncIntersectsLine(),this.syncIntersectsLineInfinite(),this.syncPathVerticalPlane(),this.syncLineVerticalPlane(),this.syncPointDistance(),this.syncAngleCutoff(),this.view._stage&&this.view._stage.addRenderPlugin(this.renderer.renderSlots,this.renderer))};t.syncStyle=function(){v.isNone(this.renderer)||(this.renderer.setParameterValues(this._style),null!=this._style.intersectsLineRadius&&(this.renderer.intersectsLineRadius=
this._style.intersectsLineRadius))};t.syncAngleCutoff=function(){v.isNone(this.renderer)||this.renderer.setParameterValues({angleCutoff:this._angleCutoff})};t.syncHeightManifold=function(){v.isNone(this.renderer)||(this.renderer.heightManifoldEnabled=this._heightManifoldEnabled&&this.visible,this._heightManifoldEnabled&&(this.renderer.heightManifoldTarget=this._heightManifoldTarget))};t.syncIntersectsLine=function(){v.isNone(this.renderer)||(this.renderer.intersectsLineEnabled=this._intersectsLineEnabled&&
this.visible,this._intersectsLineEnabled&&(this.renderer.intersectsLineSegment=this._intersectsLine))};t.syncIntersectsLineInfinite=function(){v.isNone(this.renderer)||(this.renderer.intersectsLineInfinite=this._intersectsLineInfinite)};t.syncPathVerticalPlane=function(){v.isNone(this.renderer)||(this.renderer.pathVerticalPlaneEnabled=v.isSome(this._pathVerticalPlaneBuffers)&&this.visible,v.isSome(this._pathVerticalPlaneBuffers)&&(this.renderer.pathVerticalPlaneBuffers=this._pathVerticalPlaneBuffers))};
t.syncLineVerticalPlane=function(){v.isNone(this.renderer)||(this.renderer.lineVerticalPlaneEnabled=v.isSome(this._lineVerticalPlaneSegment)&&this.visible,v.isSome(this._lineVerticalPlaneSegment)&&(this.renderer.lineVerticalPlaneSegment=this._lineVerticalPlaneSegment))};t.syncPointDistance=function(){v.isNone(this.renderer)||(this.renderer.pointDistanceEnabled=v.isSome(this._pointDistanceLine)&&this.visible,v.isSome(this._pointDistanceLine)&&(this.renderer.pointDistanceOrigin=this._pointDistanceLine.origin,
this.renderer.pointDistanceTarget=this._pointDistanceLine.target))};t.disposeRenderer=function(){v.isSome(this.renderer)&&this.view._stage&&(this.view._stage.removeRenderPlugin(this.renderer),this.renderer=null)};m._createClass(y,[{key:"testData",get:function(){return this.renderer}},{key:"angleCutoff",get:function(){return this._angleCutoff},set:function(l){this._angleCutoff!==l&&(this._angleCutoff=l,this.syncAngleCutoff())}},{key:"style",get:function(){return this._style},set:function(l){this._style=
l;this.syncStyle()}},{key:"heightManifoldTarget",get:function(){return this._heightManifoldEnabled?this._heightManifoldTarget:null},set:function(l){v.isSome(l)?(B.copy(this._heightManifoldTarget,l),this._heightManifoldEnabled=!0):this._heightManifoldEnabled=!1;this.syncRenderer();this.syncHeightManifold()}},{key:"intersectsWorldUpAtLocation",set:function(l){if(v.isNone(l))this.intersectsLine=null;else{var n=this.view.renderCoordsHelper.worldUpAtPosition(l,u);this.intersectsLine=A.fromValues(l,n);
this.intersectsLineInfinite=!0}}},{key:"intersectsLine",get:function(){return this._intersectsLineEnabled?this._intersectsLine:null},set:function(l){v.isSome(l)?(A.copy(l,this._intersectsLine),this._intersectsLineEnabled=!0):this._intersectsLineEnabled=!1;this.syncIntersectsLine();this.syncRenderer()}},{key:"intersectsLineInfinite",get:function(){return this._intersectsLineInfinite},set:function(l){this._intersectsLineInfinite=l;this.syncIntersectsLineInfinite()}},{key:"lineVerticalPlaneSegment",
get:function(){return this._lineVerticalPlaneSegment},set:function(l){this._lineVerticalPlaneSegment=v.isSome(l)?A.copy(l):null;this.syncLineVerticalPlane();this.syncRenderer()}},{key:"pathVerticalPlane",get:function(){return this._pathVerticalPlaneBuffers},set:function(l){this._pathVerticalPlaneBuffers=l;this.syncPathVerticalPlane();this.syncLineVerticalPlane();this.syncPointDistance();this.syncRenderer()}},{key:"pointDistanceLine",get:function(){return this._pointDistanceLine},set:function(l){this._pointDistanceLine=
v.isSome(l)?{origin:C.clone(l.origin),target:C.clone(l.target)}:null;this.syncPointDistance();this.syncRenderer()}}]);return y}(q.VisualElement);const u=C.create();d.LaserlineVisualElement=q;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/3d/interactive/visualElements/VisualElement":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers"],function(d,m){let v=function(){function B(A){this._resourcesCreated=this._attached=!1;this._visible=!0;this.view=A;this.view.watch("ready",
q=>{this._resourcesCreated&&(q?this._createResources():this._destroyResources())})}var C=B.prototype;C.applyProps=function(A){let q=!1;for(const g in A)g in this?"attached"===g?q=A[g]:this[g]=A[g]:console.error("Cannot set unknown property",g);this.attached=q};C.destroy=function(){this.attached=!1};C._createResources=function(){this.createResources();this._resourcesCreated=!0;this.visible||this.updateVisibility(!1)};C._destroyResources=function(){this.destroyResources();this._resourcesCreated=!1};
m._createClass(B,[{key:"attached",get:function(){return this._attached},set:function(A){A!==this._attached&&this.view._stage&&((this._attached=A)&&!this._resourcesCreated?this._createResources():!this._attached&&this._resourcesCreated&&this._destroyResources())}},{key:"visible",get:function(){return this._visible},set:function(A){A!==this._visible&&(this._visible=A,this.attached&&this.updateVisibility(A))}}]);return B}();d.VisualElement=v;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/3d/support/LaserLineRenderer":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/mathUtils ../../../core/maybe ../../../chunks/vec2f64 ../../../chunks/vec3 ../../../chunks/vec3f64 ../../../chunks/vec4 ../../../chunks/vec4f64 ../../../geometry/support/clipRay ../../../geometry/support/frustum ../../../geometry/support/lineSegment ../../../geometry/support/plane ../../../geometry/support/ray ../../../chunks/sphere ./LaserlinePathData ../webgl-engine/lib/glUtil3D ../webgl-engine/lib/Util ../webgl-engine/materials/internal/MaterialUtil ../webgl-engine/shaders/LaserlinePathTechnique ../webgl-engine/shaders/LaserlineTechnique".split(" "),
function(d,m,v,B,C,A,q,g,r,u,x,y,t,l,n,c,a,b,k,e,h){function w(L,W,M,P){const V=D,H=p;A.transformMat4(V,W,P);A.copy(H,M);H[3]=0;g.transformMat4(H,H,P);t.fromPositionAndNormal(V,H,L)}const D=q.create(),p=r.create(),z={glowColor:[1,.5,0],glowWidth:8,glowFalloff:8,innerColor:[1,1,1],innerWidth:1,globalAlpha:.75,angleCutoff:v.deg2rad(6),globalAlphaContrastBoost:2};v=function(){function L(M,P={},V={contrastControlEnabled:!1}){this._renderCoordsHelper=M;this._config=V;this._technique=null;this._projInfo=
r.create();this._zScale=C.create();this._heightManifoldEnabled=!1;this._heightManifoldTarget=q.create();this._pointDistanceEnabled=!1;this._pointDistanceOrigin=q.create();this._pointDistanceTarget=q.create();this._lineVerticalPlaneEnabled=!1;this._lineVerticalPlaneSegment=y.create();this._intersectsLineEnabled=!1;this._intersectsLineSegment=y.create();this._intersectsLineRadius=3;this._pathVerticalPlaneEnabled=this._intersectsLineInfinite=!1;this._pathTechnique=this._pathVerticalPlaneData=null;this.canRender=
!0;this._tempNormal=q.create();this._tempDir=q.create();this._tempUp=q.create();this._tempVec3A=q.create();this._tempVec3B=q.create();this._tempVec4=r.create();this._tempPlane=t.create();this._tempSphere=n.create();this._params=k.copyParameters(P,z)}var W=L.prototype;W.setParameterValues=function(M){k.updateParameters(this._params,M)&&this._requestRender()};W.initializeRenderContext=function(M){this._context=M;this._quadVAO=a.createQuadVAO(M.renderContext.rctx);this._techniqueRepository=M.shaderTechniqueRep;
this._techniqueConfig=new h.LaserlineTechniqueConfiguration;M=new e.LaserlinePathTechniqueConfiguration;M.contrastControlEnabled=this._config.contrastControlEnabled;this._pathTechnique=this._techniqueRepository.acquire(e.LaserlinePathTechnique,M)};W.uninitializeRenderContext=function(){this._quadVAO=B.disposeMaybe(this._quadVAO);this._technique=B.releaseMaybe(this._technique);this._pathVerticalPlaneData=B.disposeMaybe(this._pathVerticalPlaneData);this._pathTechnique=B.releaseMaybe(this._pathTechnique)};
W.render=function(M){const P=this.heightManifoldEnabled||this.pointDistanceEnabled||this.lineVerticalPlaneSegment||this.intersectsLineEnabled,V=this.pathVerticalPlaneEnabled;if(!P&&!V)return!0;const H=M.camera;b.inverseProjectionInfo(H.projectionMatrix,H.fullWidth,H.fullHeight,this._projInfo,this._zScale);P&&this.renderUnified(M);V&&this.renderPath(M);return!0};W.renderUnified=function(M){const P=M.rctx,V=this._selectTechnique(),H=V.program;P.useProgram(H);V.bindPipelineState(P);this._bindGlobalUniforms(M,
H);this.bindHeightManifoldUniforms(M,H);this.bindPointDistanceUniforms(M,H);this.bindLineVerticalPlaneUniforms(M,H);this.bindIntersectsLineUniforms(M,H);V.bind(this._params,M.camera);P.bindVAO(this._quadVAO);P.drawArrays(5,0,4)};W.renderPath=function(M){if(!B.isNone(this._pathVerticalPlaneData)&&!B.isNone(this._pathTechnique)){var P=M.rctx,V=this._pathTechnique,H=V.program;P.useProgram(H);V.bindPipelineState(P);this._bindGlobalUniforms(M,H);V.bind(this._params,this._pathVerticalPlaneData.origin,M.camera);
this._pathVerticalPlaneData.draw(M.rctx)}};W.bindHeightManifoldUniforms=function(M,P){if(this.heightManifoldEnabled){var V=this._tempVec3A,H=this._tempPlane;this._renderCoordsHelper.worldUpAtPosition(this._heightManifoldTarget,V);w(H,this._heightManifoldTarget,V,M.camera.viewMatrix);P.setUniform4fv("heightPlane",H)}};W.bindPointDistanceUniforms=function(M,P){if(this._pointDistanceEnabled){M=M.camera;var V=this._tempSphere;A.copy(V,this._pointDistanceOrigin);A.transformMat4(V,V,M.viewMatrix);V[3]=
A.distance(this._pointDistanceOrigin,this._pointDistanceTarget);P.setUniform4f("pointDistanceSphere",V[0],V[1],V[2],V[3])}};W.bindLineVerticalPlaneUniforms=function(M,P){if(this._lineVerticalPlaneEnabled){var V=this._renderCoordsHelper;M=M.camera;var H=this._tempPlane,R=this._tempVec3A,Z=this._tempUp,N=this._tempDir,S=this._tempNormal;y.pointAt(this._lineVerticalPlaneSegment,.5,R);V.worldUpAtPosition(R,Z);A.normalize(N,this._lineVerticalPlaneSegment.vector);A.cross(S,Z,N);A.normalize(S,S);w(H,this._lineVerticalPlaneSegment.origin,
S,M.viewMatrix);P.setUniform4fv("lineVerticalPlane",H);H=this._tempVec3A;A.copy(H,this._lineVerticalPlaneSegment.origin);V.setAltitude(H,0);A.transformMat4(H,H,M.viewMatrix);P.setUniform3fv("lineVerticalStart",H);H=this._tempVec3B;A.add(H,this._lineVerticalPlaneSegment.origin,this._lineVerticalPlaneSegment.vector);V.setAltitude(H,0);A.transformMat4(H,H,M.viewMatrix);P.setUniform3fv("lineVerticalEnd",H)}};W.bindIntersectsLineUniforms=function(M,P){if(this._intersectsLineEnabled){var V=E,H=F;if(this._intersectsLineInfinite){var R=
M.camera;u.fromRay(l.wrap(this._intersectsLineSegment.origin,this._intersectsLineSegment.vector),f);f.c0=-Number.MAX_VALUE;if(!x.intersectClipRay(R.frustum,f))return;u.getStart(f,V);u.getEnd(f,H)}else A.copy(V,this._intersectsLineSegment.origin),A.add(H,this._intersectsLineSegment.origin,this._intersectsLineSegment.vector);R=this._tempVec3A;A.transformMat4(R,V,M.camera.viewMatrix);P.setUniform3fv("intersectsLineStart",R);V=this._tempVec4;A.copy(V,this._intersectsLineSegment.vector);this._tempVec4[3]=
0;g.transformMat4(this._tempVec4,this._tempVec4,M.camera.viewMatrix);A.transformMat4(H,H,M.camera.viewMatrix);P.setUniform3fv("intersectsLineEnd",H);A.normalize(V,V);P.setUniform3f("intersectsLineDirection",V[0],V[1],V[2]);P.setUniform1f("intersectsLineRadius",this._intersectsLineRadius)}};W._bindGlobalUniforms=function(M,P){const V=M.camera;P.setUniform4fv("projInfo",this._projInfo);P.setUniform2fv("zScale",this._zScale);P.setUniform2f("nearFar",V.near,V.far);this._heightManifoldEnabled?P.setUniform1f("maxPixelDistance",
2*V.computeScreenPixelSizeAt(this._heightManifoldTarget)):this._pointDistanceEnabled?P.setUniform1f("maxPixelDistance",2*V.computeScreenPixelSizeAt(this._pointDistanceTarget)):this._lineVerticalPlaneEnabled&&P.setUniform1f("maxPixelDistance",2*V.computeScreenPixelSizeAt(this._lineVerticalPlaneSegment.origin));P.bindTexture(M.offscreenRenderingHelper.linearDepthTexture,"depthMap");P.bindTexture(M.offscreenRenderingHelper.mainColorTexture,"frameColor")};W._requestRender=function(){this._context&&this._context.requestRender()};
W._selectTechnique=function(){this._techniqueConfig.heightManifoldEnabled=this.heightManifoldEnabled;this._techniqueConfig.lineVerticalPlaneEnabled=this.lineVerticalPlaneEnabled;this._techniqueConfig.pointDistanceEnabled=this.pointDistanceEnabled;this._techniqueConfig.intersectsLineEnabled=this.intersectsLineEnabled;this._techniqueConfig.contrastControlEnabled=this._config.contrastControlEnabled;return this._technique=this._techniqueRepository.releaseAndAcquire(h.LaserlineTechnique,this._techniqueConfig,
this._technique)};m._createClass(L,[{key:"renderSlots",get:function(){return[this._config.contrastControlEnabled?17:16]}},{key:"needsLinearDepth",get:function(){return!0}},{key:"heightManifoldEnabled",get:function(){return this._heightManifoldEnabled},set:function(M){this._heightManifoldEnabled!==M&&(this._heightManifoldEnabled=M,this._requestRender())}},{key:"heightManifoldTarget",get:function(){return this._heightManifoldTarget},set:function(M){A.copy(this._heightManifoldTarget,M);this._requestRender()}},
{key:"pointDistanceEnabled",get:function(){return this._pointDistanceEnabled},set:function(M){M!==this._pointDistanceEnabled&&(this._pointDistanceEnabled=M,this._requestRender())}},{key:"pointDistanceTarget",get:function(){return this._pointDistanceTarget},set:function(M){A.copy(this._pointDistanceTarget,M);this._requestRender()}},{key:"pointDistanceOrigin",get:function(){return this._pointDistanceOrigin},set:function(M){A.copy(this._pointDistanceOrigin,M);this._requestRender()}},{key:"lineVerticalPlaneEnabled",
get:function(){return this._lineVerticalPlaneEnabled},set:function(M){M!==this._lineVerticalPlaneEnabled&&(this._lineVerticalPlaneEnabled=M,this._requestRender())}},{key:"lineVerticalPlaneSegment",get:function(){return this._lineVerticalPlaneSegment},set:function(M){y.copy(M,this._lineVerticalPlaneSegment);this._requestRender()}},{key:"intersectsLineEnabled",get:function(){return this._intersectsLineEnabled},set:function(M){M!==this._intersectsLineEnabled&&(this._intersectsLineEnabled=M,this._requestRender())}},
{key:"intersectsLineSegment",get:function(){return this._intersectsLineSegment},set:function(M){y.copy(M,this._intersectsLineSegment);this._requestRender()}},{key:"intersectsLineRadius",get:function(){return this._intersectsLineRadius},set:function(M){M!==this._intersectsLineRadius&&(this._intersectsLineRadius=M,this._requestRender())}},{key:"intersectsLineInfinite",get:function(){return this._intersectsLineInfinite},set:function(M){M!==this._intersectsLineInfinite&&(this._intersectsLineInfinite=
M,this._requestRender())}},{key:"pathVerticalPlaneEnabled",get:function(){return this._pathVerticalPlaneEnabled},set:function(M){M!==this._pathVerticalPlaneEnabled&&(this._pathVerticalPlaneEnabled=M,B.isSome(this._pathVerticalPlaneData)&&this._requestRender())}},{key:"pathVerticalPlaneVertices",set:function(M){B.isNone(this._pathVerticalPlaneData)&&(this._pathVerticalPlaneData=new c.LaserlinePathData(this._renderCoordsHelper));this._pathVerticalPlaneData.vertices=M;this.pathVerticalPlaneEnabled&&
this._requestRender()}},{key:"pathVerticalPlaneBuffers",set:function(M){B.isNone(this._pathVerticalPlaneData)&&(this._pathVerticalPlaneData=new c.LaserlinePathData(this._renderCoordsHelper));this._pathVerticalPlaneData.buffers=M;this.pathVerticalPlaneEnabled&&this._requestRender()}}]);return L}();const f=u.create(),E=q.create(),F=q.create();d.LaserLineRenderer=v;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/3d/support/LaserlinePathData":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../chunks/vec3 ../../../chunks/vec3f64 ./buffer/glUtil ./buffer/InterleavedLayout ../webgl-engine/shaders/LaserlinePathTechnique ../../webgl/BufferObject ../../webgl/VertexArrayObject".split(" "),
function(d,m,v,B,C,A,q,g,r,u){let x=function(){function n(a){this._renderCoordsHelper=a;this._buffers=null;this._origin=C.create();this._dirty=!1;this._count=0;this._vao=null}var c=n.prototype;c.draw=function(a){const b=this.ensureVAO(a);v.isSome(b)&&(a.bindVAO(b),a.drawArrays(4,0,this._count))};c.dispose=function(){v.isSome(this._vao)&&this._vao.dispose()};c.ensureVAO=function(a){if(v.isNone(this._buffers))return null;v.isNone(this._vao)&&(this._vao=this.createVAO(a,this._buffers));this.ensureVertexData(this._vao,
this._buffers);return this._vao};c.createVAO=function(a,b){b=this.createDataBuffer(b);this._dirty=!1;return new u(a,g.LaserlinePathTechnique.attributeLocations,{data:A.glLayout(l)},{data:r.createVertex(a,35044,b)})};c.ensureVertexData=function(a,b){this._dirty&&(b=this.createDataBuffer(b),a.vertexBuffers.data.setData(b),this._dirty=!1)};c.numberOfRenderVertices=function(a){return 6*(a.length/3-1)};c.createDataBuffer=function(a){var b=a.reduce((p,z)=>p+this.numberOfRenderVertices(z),0);this._count=
b;b=l.createBuffer(b);const k=this._origin;let e=0,h=0;for(const p of a){for(a=0;a<p.length;a+=3){var w=B.set(t,p[a+0],p[a+1],p[a+2]);0===a?h=this._renderCoordsHelper.getAltitude(w):this._renderCoordsHelper.setAltitude(w,h);var D=this._renderCoordsHelper.worldUpAtPosition(w,y);const z=e+2*a;w=B.subtract(t,w,k);if(a<p.length-3){b.up.setVec(z,D);b.up.setVec(z+3,D);b.up.setVec(z+5,D);for(let f=0;6>f;f++)b.start.setVec(z+f,w);b.extrude.setValues(z+0,0,-1);b.extrude.setValues(z+1,1,-1);b.extrude.setValues(z+
2,1,1);b.extrude.setValues(z+3,0,-1);b.extrude.setValues(z+4,1,1);b.extrude.setValues(z+5,0,1)}if(0<a)for(b.up.setVec(z-2,D),b.up.setVec(z-4,D),b.up.setVec(z-5,D),D=-6;0>D;D++)b.end.setVec(z+D,w)}e+=this.numberOfRenderVertices(p)}return b.buffer};m._createClass(n,[{key:"vertices",set:function(a){const b=new Float64Array(3*a.length);let k=0;for(const e of a)b[k++]=e[0],b[k++]=e[1],b[k++]=e[2];this.buffers=[b]}},{key:"buffers",set:function(a){this._buffers=a;if(0<this._buffers.length){a=this._buffers[0];
const b=3*Math.floor(a.length/3/2);B.set(this._origin,a[b+0],a[b+1],a[b+2])}else B.set(this._origin,0,0,0);this._dirty=!0}},{key:"origin",get:function(){return this._origin}}]);return n}();const y=C.create(),t=C.create(),l=q.newLayout().vec3f("start").vec3f("end").vec3f("up").vec2f("extrude");d.LaserlinePathData=x;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/3d/support/buffer/glUtil":function(){define(["exports"],function(d){const m={u8:5121,u16:5123,u32:5125,i8:5120,i16:5122,i32:5124,
f32:5126};d.glLayout=function(v,B=0){const C=v.stride;return v.fieldNames.filter(A=>{A=v.fields.get(A).optional;return!(A&&A.glPadding)}).map(A=>{const q=v.fields.get(A),g=q.constructor.ElementCount;var r=m[q.constructor.ElementType];if(!r)throw Error("BufferType not supported in WebGL");return{name:A,stride:C,count:g,type:r,offset:q.offset,normalized:!(!q.optional||!q.optional.glNormalized),divisor:B}})};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/3d/support/buffer/InterleavedLayout":function(){define(["exports",
"../../../../chunks/_rollupPluginBabelHelpers","../../../../geometry/support/buffer/BufferView","../../../../geometry/support/buffer/types"],function(d,m,v,B){let C=function(){function q(r,u){this.layout=r;this.buffer="number"===typeof u?new ArrayBuffer(u*r.stride):u;for(const x of r.fieldNames)u=r.fields.get(x),this[x]=new u.constructor(this.buffer,u.offset,this.stride)}var g=q.prototype;g.getField=function(r,u){return(r=this[r])&&r.elementCount===u.ElementCount&&r.elementType===u.ElementType?r:
null};g.slice=function(r,u){return new q(this.layout,this.buffer.slice(r*this.stride,u*this.stride))};g.copyFrom=function(r,u,x,y){const t=this.stride;0===t%4?(r=new Uint32Array(r.buffer,u*t,y*t/4),(new Uint32Array(this.buffer,x*t,y*t/4)).set(r)):(r=new Uint8Array(r.buffer,u*t,y*t),(new Uint8Array(this.buffer,x*t,y*t)).set(r))};m._createClass(q,[{key:"stride",get:function(){return this.layout.stride}},{key:"count",get:function(){return this.buffer.byteLength/this.stride}},{key:"byteLength",get:function(){return this.buffer.byteLength}}]);
return q}(),A=function(){function q(){this.stride=0;this.fields=new Map;this.fieldNames=[]}var g=q.prototype;g.vec2f=function(r,u){this.appendField(r,v.BufferViewVec2f,u);return this};g.vec2f64=function(r,u){this.appendField(r,v.BufferViewVec2f64,u);return this};g.vec3f=function(r,u){this.appendField(r,v.BufferViewVec3f,u);return this};g.vec3f64=function(r,u){this.appendField(r,v.BufferViewVec3f64,u);return this};g.vec4f=function(r,u){this.appendField(r,v.BufferViewVec4f,u);return this};g.vec4f64=
function(r,u){this.appendField(r,v.BufferViewVec4f64,u);return this};g.mat3f=function(r,u){this.appendField(r,v.BufferViewMat3f,u);return this};g.mat3f64=function(r,u){this.appendField(r,v.BufferViewMat3f64,u);return this};g.mat4f=function(r,u){this.appendField(r,v.BufferViewMat4f,u);return this};g.mat4f64=function(r,u){this.appendField(r,v.BufferViewMat4f64,u);return this};g.vec4u8=function(r,u){this.appendField(r,v.BufferViewVec4u8,u);return this};g.f32=function(r,u){this.appendField(r,v.BufferViewFloat,
u);return this};g.f64=function(r,u){this.appendField(r,v.BufferViewFloat64,u);return this};g.u8=function(r,u){this.appendField(r,v.BufferViewUint8,u);return this};g.u16=function(r,u){this.appendField(r,v.BufferViewUint16,u);return this};g.i8=function(r,u){this.appendField(r,v.BufferViewInt8,u);return this};g.vec2i8=function(r,u){this.appendField(r,v.BufferViewVec2i8,u);return this};g.vec2i16=function(r,u){this.appendField(r,v.BufferViewVec2i16,u);return this};g.vec2u8=function(r,u){this.appendField(r,
v.BufferViewVec2u8,u);return this};g.vec4u16=function(r,u){this.appendField(r,v.BufferViewVec4u16,u);return this};g.u32=function(r,u){this.appendField(r,v.BufferViewUint32,u);return this};g.appendField=function(r,u,x){const y=u.ElementCount*B.elementTypeSize(u.ElementType);this.fields.set(r,{size:y,constructor:u,offset:this.stride,optional:x});this.stride+=y;this.fieldNames.push(r)};g.alignTo=function(r){this.stride=Math.floor((this.stride+r-1)/r)*r;return this};g.hasField=function(r){return 0<=this.fieldNames.indexOf(r)};
g.createBuffer=function(r){return new C(this,r)};g.createView=function(r){return new C(this,r)};g.clone=function(){const r=new q;r.stride=this.stride;r.fields=new Map;this.fields.forEach((u,x)=>r.fields.set(x,u));r.fieldNames=this.fieldNames.slice();r.BufferType=this.BufferType;return r};return q}();d.InterleavedBuffer=C;d.InterleavedLayout=A;d.newLayout=function(){return new A};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/geometry/support/buffer/BufferView":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ./internals/Mat3 ./internals/Mat4 ./internals/Scalar ./internals/Vec2 ./internals/Vec3 ./internals/Vec4".split(" "),
function(d,m,v,B,C,A,q,g){let r=function(O){function J(K,Q=0,da,ma){K=O.call(this,Float32Array,K,Q,da,ma)||this;K.elementType="f32";return K}m._inheritsLoose(J,O);J.fromTypedArray=function(K,Q){return new J(K.buffer,K.byteOffset,Q,K.byteOffset+K.byteLength)};return J}(C.BufferViewScalarImpl);r.ElementType="f32";let u=function(O){function J(K,Q=0,da,ma){K=O.call(this,Float32Array,K,Q,da,ma)||this;K.elementType="f32";return K}m._inheritsLoose(J,O);J.prototype.slice=function(K,Q){return this.sliceBuffer(J,
K,Q)};J.fromTypedArray=function(K,Q){return new J(K.buffer,K.byteOffset,Q,K.byteOffset+K.byteLength)};return J}(A.BufferViewVec2Impl);u.ElementType="f32";let x=function(O){function J(K,Q=0,da,ma){K=O.call(this,Float32Array,K,Q,da,ma)||this;K.elementType="f32";return K}m._inheritsLoose(J,O);J.prototype.slice=function(K,Q){return this.sliceBuffer(J,K,Q)};J.fromTypedArray=function(K,Q){return new J(K.buffer,K.byteOffset,Q,K.byteOffset+K.byteLength)};return J}(q.BufferViewVec3Impl);x.ElementType="f32";
let y=function(O){function J(K,Q=0,da,ma){K=O.call(this,Float32Array,K,Q,da,ma)||this;K.elementType="f32";return K}m._inheritsLoose(J,O);J.prototype.slice=function(K,Q){return this.sliceBuffer(J,K,Q)};J.fromTypedArray=function(K,Q){return new J(K.buffer,K.byteOffset,Q,K.byteOffset+K.byteLength)};return J}(g.BufferViewVec4Impl);y.ElementType="f32";let t=function(O){function J(K,Q=0,da,ma){K=O.call(this,Float32Array,K,Q,da,ma)||this;K.elementType="f32";return K}m._inheritsLoose(J,O);J.prototype.slice=
function(K,Q){return this.sliceBuffer(J,K,Q)};J.fromTypedArray=function(K,Q){return new J(K.buffer,K.byteOffset,Q,K.byteOffset+K.byteLength)};return J}(v.BufferViewMat3Impl);t.ElementType="f32";v=function(O){function J(K,Q=0,da,ma){K=O.call(this,Float64Array,K,Q,da,ma)||this;K.elementType="f64";return K}m._inheritsLoose(J,O);J.prototype.slice=function(K,Q){return this.sliceBuffer(J,K,Q)};J.fromTypedArray=function(K,Q){return new J(K.buffer,K.byteOffset,Q,K.byteOffset+K.byteLength)};return J}(v.BufferViewMat3Impl);
v.ElementType="f64";let l=function(O){function J(K,Q=0,da,ma){K=O.call(this,Float32Array,K,Q,da,ma)||this;K.elementType="f32";return K}m._inheritsLoose(J,O);J.prototype.slice=function(K,Q){return this.sliceBuffer(J,K,Q)};J.fromTypedArray=function(K,Q){return new J(K.buffer,K.byteOffset,Q,K.byteOffset+K.byteLength)};return J}(B.BufferViewMat4Impl);l.ElementType="f32";B=function(O){function J(K,Q=0,da,ma){K=O.call(this,Float64Array,K,Q,da,ma)||this;K.elementType="f64";return K}m._inheritsLoose(J,O);
J.prototype.slice=function(K,Q){return this.sliceBuffer(J,K,Q)};J.fromTypedArray=function(K,Q){return new J(K.buffer,K.byteOffset,Q,K.byteOffset+K.byteLength)};return J}(B.BufferViewMat4Impl);B.ElementType="f64";let n=function(O){function J(K,Q=0,da,ma){K=O.call(this,Float64Array,K,Q,da,ma)||this;K.elementType="f64";return K}m._inheritsLoose(J,O);J.prototype.slice=function(K,Q){return this.sliceBuffer(J,K,Q)};J.fromTypedArray=function(K,Q){return new J(K.buffer,K.byteOffset,Q,K.byteOffset+K.byteLength)};
return J}(C.BufferViewScalarImpl);n.ElementType="f64";let c=function(O){function J(K,Q=0,da,ma){K=O.call(this,Float64Array,K,Q,da,ma)||this;K.elementType="f64";return K}m._inheritsLoose(J,O);J.prototype.slice=function(K,Q){return this.sliceBuffer(J,K,Q)};J.fromTypedArray=function(K,Q){return new J(K.buffer,K.byteOffset,Q,K.byteOffset+K.byteLength)};return J}(A.BufferViewVec2Impl);c.ElementType="f64";let a=function(O){function J(K,Q=0,da,ma){K=O.call(this,Float64Array,K,Q,da,ma)||this;K.elementType=
"f64";return K}m._inheritsLoose(J,O);J.prototype.slice=function(K,Q){return this.sliceBuffer(J,K,Q)};J.fromTypedArray=function(K,Q){return new J(K.buffer,K.byteOffset,Q,K.byteOffset+K.byteLength)};return J}(q.BufferViewVec3Impl);a.ElementType="f64";let b=function(O){function J(K,Q=0,da,ma){K=O.call(this,Float64Array,K,Q,da,ma)||this;K.elementType="f64";return K}m._inheritsLoose(J,O);J.prototype.slice=function(K,Q){return this.sliceBuffer(J,K,Q)};J.fromTypedArray=function(K,Q){return new J(K.buffer,
K.byteOffset,Q,K.byteOffset+K.byteLength)};return J}(g.BufferViewVec4Impl);b.ElementType="f64";let k=function(O){function J(K,Q=0,da,ma){K=O.call(this,Uint8Array,K,Q,da,ma)||this;K.elementType="u8";return K}m._inheritsLoose(J,O);J.prototype.slice=function(K,Q){return this.sliceBuffer(J,K,Q)};J.fromTypedArray=function(K,Q){return new J(K.buffer,K.byteOffset,Q,K.byteOffset+K.byteLength)};return J}(C.BufferViewScalarImpl);k.ElementType="u8";let e=function(O){function J(K,Q=0,da,ma){K=O.call(this,Uint8Array,
K,Q,da,ma)||this;K.elementType="u8";return K}m._inheritsLoose(J,O);J.prototype.slice=function(K,Q){return this.sliceBuffer(J,K,Q)};J.fromTypedArray=function(K,Q){return new J(K.buffer,K.byteOffset,Q,K.byteOffset+K.byteLength)};return J}(A.BufferViewVec2Impl);e.ElementType="u8";let h=function(O){function J(K,Q=0,da,ma){K=O.call(this,Uint8Array,K,Q,da,ma)||this;K.elementType="u8";return K}m._inheritsLoose(J,O);J.prototype.slice=function(K,Q){return this.sliceBuffer(J,K,Q)};J.fromTypedArray=function(K,
Q){return new J(K.buffer,K.byteOffset,Q,K.byteOffset+K.byteLength)};return J}(q.BufferViewVec3Impl);h.ElementType="u8";let w=function(O){function J(K,Q=0,da,ma){K=O.call(this,Uint8Array,K,Q,da,ma)||this;K.elementType="u8";return K}m._inheritsLoose(J,O);J.prototype.slice=function(K,Q){return this.sliceBuffer(J,K,Q)};J.fromTypedArray=function(K,Q){return new J(K.buffer,K.byteOffset,Q,K.byteOffset+K.byteLength)};return J}(g.BufferViewVec4Impl);w.ElementType="u8";let D=function(O){function J(K,Q=0,da,
ma){K=O.call(this,Uint16Array,K,Q,da,ma)||this;K.elementType="u16";return K}m._inheritsLoose(J,O);J.prototype.slice=function(K,Q){return this.sliceBuffer(J,K,Q)};J.fromTypedArray=function(K,Q){return new J(K.buffer,K.byteOffset,Q,K.byteOffset+K.byteLength)};return J}(C.BufferViewScalarImpl);D.ElementType="u16";let p=function(O){function J(K,Q=0,da,ma){K=O.call(this,Uint16Array,K,Q,da,ma)||this;K.elementType="u16";return K}m._inheritsLoose(J,O);J.prototype.slice=function(K,Q){return this.sliceBuffer(J,
K,Q)};J.fromTypedArray=function(K,Q){return new J(K.buffer,K.byteOffset,Q,K.byteOffset+K.byteLength)};return J}(A.BufferViewVec2Impl);p.ElementType="u16";let z=function(O){function J(K,Q=0,da,ma){K=O.call(this,Uint16Array,K,Q,da,ma)||this;K.elementType="u16";return K}m._inheritsLoose(J,O);J.prototype.slice=function(K,Q){return this.sliceBuffer(J,K,Q)};J.fromTypedArray=function(K,Q){return new J(K.buffer,K.byteOffset,Q,K.byteOffset+K.byteLength)};return J}(q.BufferViewVec3Impl);z.ElementType="u16";
let f=function(O){function J(K,Q=0,da,ma){K=O.call(this,Uint16Array,K,Q,da,ma)||this;K.elementType="u16";return K}m._inheritsLoose(J,O);J.prototype.slice=function(K,Q){return this.sliceBuffer(J,K,Q)};J.fromTypedArray=function(K,Q){return new J(K.buffer,K.byteOffset,Q,K.byteOffset+K.byteLength)};return J}(g.BufferViewVec4Impl);f.ElementType="u16";let E=function(O){function J(K,Q=0,da,ma){K=O.call(this,Uint32Array,K,Q,da,ma)||this;K.elementType="u32";return K}m._inheritsLoose(J,O);J.prototype.slice=
function(K,Q){return this.sliceBuffer(J,K,Q)};J.fromTypedArray=function(K,Q){return new J(K.buffer,K.byteOffset,Q,K.byteOffset+K.byteLength)};return J}(C.BufferViewScalarImpl);E.ElementType="u32";let F=function(O){function J(K,Q=0,da,ma){K=O.call(this,Uint32Array,K,Q,da,ma)||this;K.elementType="u32";return K}m._inheritsLoose(J,O);J.prototype.slice=function(K,Q){return this.sliceBuffer(J,K,Q)};J.fromTypedArray=function(K,Q){return new J(K.buffer,K.byteOffset,Q,K.byteOffset+K.byteLength)};return J}(A.BufferViewVec2Impl);
F.ElementType="u32";let L=function(O){function J(K,Q=0,da,ma){K=O.call(this,Uint32Array,K,Q,da,ma)||this;K.elementType="u32";return K}m._inheritsLoose(J,O);J.prototype.slice=function(K,Q){return this.sliceBuffer(J,K,Q)};J.fromTypedArray=function(K,Q){return new J(K.buffer,K.byteOffset,Q,K.byteOffset+K.byteLength)};return J}(q.BufferViewVec3Impl);L.ElementType="u32";let W=function(O){function J(K,Q=0,da,ma){K=O.call(this,Uint32Array,K,Q,da,ma)||this;K.elementType="u32";return K}m._inheritsLoose(J,
O);J.prototype.slice=function(K,Q){return this.sliceBuffer(J,K,Q)};J.fromTypedArray=function(K,Q){return new J(K.buffer,K.byteOffset,Q,K.byteOffset+K.byteLength)};return J}(g.BufferViewVec4Impl);W.ElementType="u32";let M=function(O){function J(K,Q=0,da,ma){K=O.call(this,Int8Array,K,Q,da,ma)||this;K.elementType="i8";return K}m._inheritsLoose(J,O);J.prototype.slice=function(K,Q){return this.sliceBuffer(J,K,Q)};J.fromTypedArray=function(K,Q){return new J(K.buffer,K.byteOffset,Q,K.byteOffset+K.byteLength)};
return J}(C.BufferViewScalarImpl);M.ElementType="i8";let P=function(O){function J(K,Q=0,da,ma){K=O.call(this,Int8Array,K,Q,da,ma)||this;K.elementType="i8";return K}m._inheritsLoose(J,O);J.prototype.slice=function(K,Q){return this.sliceBuffer(J,K,Q)};J.fromTypedArray=function(K,Q){return new J(K.buffer,K.byteOffset,Q,K.byteOffset+K.byteLength)};return J}(A.BufferViewVec2Impl);P.ElementType="i8";let V=function(O){function J(K,Q=0,da,ma){K=O.call(this,Int8Array,K,Q,da,ma)||this;K.elementType="i8";return K}
m._inheritsLoose(J,O);J.prototype.slice=function(K,Q){return this.sliceBuffer(J,K,Q)};J.fromTypedArray=function(K,Q){return new J(K.buffer,K.byteOffset,Q,K.byteOffset+K.byteLength)};return J}(q.BufferViewVec3Impl);V.ElementType="i8";let H=function(O){function J(K,Q=0,da,ma){K=O.call(this,Int8Array,K,Q,da,ma)||this;K.elementType="i8";return K}m._inheritsLoose(J,O);J.prototype.slice=function(K,Q){return this.sliceBuffer(J,K,Q)};J.fromTypedArray=function(K,Q){return new J(K.buffer,K.byteOffset,Q,K.byteOffset+
K.byteLength)};return J}(g.BufferViewVec4Impl);H.ElementType="i8";let R=function(O){function J(K,Q=0,da,ma){K=O.call(this,Int16Array,K,Q,da,ma)||this;K.elementType="i16";return K}m._inheritsLoose(J,O);J.prototype.slice=function(K,Q){return this.sliceBuffer(J,K,Q)};J.fromTypedArray=function(K,Q){return new J(K.buffer,K.byteOffset,Q,K.byteOffset+K.byteLength)};return J}(C.BufferViewScalarImpl);R.ElementType="i16";let Z=function(O){function J(K,Q=0,da,ma){K=O.call(this,Int16Array,K,Q,da,ma)||this;K.elementType=
"i16";return K}m._inheritsLoose(J,O);J.prototype.slice=function(K,Q){return this.sliceBuffer(J,K,Q)};J.fromTypedArray=function(K,Q){return new J(K.buffer,K.byteOffset,Q,K.byteOffset+K.byteLength)};return J}(A.BufferViewVec2Impl);Z.ElementType="i16";let N=function(O){function J(K,Q=0,da,ma){K=O.call(this,Int16Array,K,Q,da,ma)||this;K.elementType="i16";return K}m._inheritsLoose(J,O);J.prototype.slice=function(K,Q){return this.sliceBuffer(J,K,Q)};J.fromTypedArray=function(K,Q){return new J(K.buffer,
K.byteOffset,Q,K.byteOffset+K.byteLength)};return J}(q.BufferViewVec3Impl);N.ElementType="i16";let S=function(O){function J(K,Q=0,da,ma){K=O.call(this,Int16Array,K,Q,da,ma)||this;K.elementType="i16";return K}m._inheritsLoose(J,O);J.prototype.slice=function(K,Q){return this.sliceBuffer(J,K,Q)};J.fromTypedArray=function(K,Q){return new J(K.buffer,K.byteOffset,Q,K.byteOffset+K.byteLength)};return J}(g.BufferViewVec4Impl);S.ElementType="i16";C=function(O){function J(K,Q=0,da,ma){K=O.call(this,Int32Array,
K,Q,da,ma)||this;K.elementType="i32";return K}m._inheritsLoose(J,O);J.prototype.slice=function(K,Q){return this.sliceBuffer(J,K,Q)};J.fromTypedArray=function(K,Q){return new J(K.buffer,K.byteOffset,Q,K.byteOffset+K.byteLength)};return J}(C.BufferViewScalarImpl);C.ElementType="i32";A=function(O){function J(K,Q=0,da,ma){K=O.call(this,Int32Array,K,Q,da,ma)||this;K.elementType="i32";return K}m._inheritsLoose(J,O);J.prototype.slice=function(K,Q){return this.sliceBuffer(J,K,Q)};J.fromTypedArray=function(K,
Q){return new J(K.buffer,K.byteOffset,Q,K.byteOffset+K.byteLength)};return J}(A.BufferViewVec2Impl);A.ElementType="i32";q=function(O){function J(K,Q=0,da,ma){K=O.call(this,Int32Array,K,Q,da,ma)||this;K.elementType="i32";return K}m._inheritsLoose(J,O);J.prototype.slice=function(K,Q){return this.sliceBuffer(J,K,Q)};J.fromTypedArray=function(K,Q){return new J(K.buffer,K.byteOffset,Q,K.byteOffset+K.byteLength)};return J}(q.BufferViewVec3Impl);q.ElementType="i32";g=function(O){function J(K,Q=0,da,ma){K=
O.call(this,Int32Array,K,Q,da,ma)||this;K.elementType="i32";return K}m._inheritsLoose(J,O);J.prototype.slice=function(K,Q){return this.sliceBuffer(J,K,Q)};J.fromTypedArray=function(K,Q){return new J(K.buffer,K.byteOffset,Q,K.byteOffset+K.byteLength)};return J}(g.BufferViewVec4Impl);g.ElementType="i32";d.BufferViewFloat=r;d.BufferViewFloat64=n;d.BufferViewInt16=R;d.BufferViewInt32=C;d.BufferViewInt8=M;d.BufferViewMat3f=t;d.BufferViewMat3f64=v;d.BufferViewMat4f=l;d.BufferViewMat4f64=B;d.BufferViewUint16=
D;d.BufferViewUint32=E;d.BufferViewUint8=k;d.BufferViewVec2f=u;d.BufferViewVec2f64=c;d.BufferViewVec2i16=Z;d.BufferViewVec2i32=A;d.BufferViewVec2i8=P;d.BufferViewVec2u16=p;d.BufferViewVec2u32=F;d.BufferViewVec2u8=e;d.BufferViewVec3f=x;d.BufferViewVec3f64=a;d.BufferViewVec3i16=N;d.BufferViewVec3i32=q;d.BufferViewVec3i8=V;d.BufferViewVec3u16=z;d.BufferViewVec3u32=L;d.BufferViewVec3u8=h;d.BufferViewVec4f=y;d.BufferViewVec4f64=b;d.BufferViewVec4i16=S;d.BufferViewVec4i32=g;d.BufferViewVec4i8=H;d.BufferViewVec4u16=
f;d.BufferViewVec4u32=W;d.BufferViewVec4u8=w;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/geometry/support/buffer/internals/Mat3":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers"],function(d,m){let v=function(){function B(A,q,g=0,r,u){this.TypedArrayConstructor=A;this.elementCount=9;A=this.TypedArrayConstructor;void 0===r&&(r=9*A.BYTES_PER_ELEMENT);const x=0===q.byteLength?0:g;this.typedBuffer=null==u?new A(q,x):new A(q,x,(u-g)/A.BYTES_PER_ELEMENT);this.typedBufferStride=
r/A.BYTES_PER_ELEMENT;this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride);this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}var C=B.prototype;C.sliceBuffer=function(A,q,g=this.count-q){q=this.typedBuffer.byteOffset+q*this.stride;return new A(this.buffer,q,this.stride,q+g*this.stride)};C.getMat=function(A,q){A*=this.typedBufferStride;for(let g=0;9>g;g++)q[g]=this.typedBuffer[A++];return q};C.setMat=function(A,q){A*=this.typedBufferStride;for(let g=0;9>
g;g++)this.typedBuffer[A++]=q[g]};C.get=function(A,q){return this.typedBuffer[A*this.typedBufferStride+q]};C.set=function(A,q,g){this.typedBuffer[A*this.typedBufferStride+q]=g};C.copyFrom=function(A,q,g){const r=this.typedBuffer,u=q.typedBuffer;A*=this.typedBufferStride;q=g*q.typedBufferStride;for(g=0;9>g;++g)r[A++]=u[q++]};m._createClass(B,[{key:"buffer",get:function(){return this.typedBuffer.buffer}}]);return B}();v.ElementCount=9;d.BufferViewMat3Impl=v;Object.defineProperty(d,"__esModule",{value:!0})})},
"esri/geometry/support/buffer/internals/Mat4":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers"],function(d,m){let v=function(){function B(A,q,g=0,r,u){this.TypedArrayConstructor=A;this.elementCount=16;A=this.TypedArrayConstructor;void 0===r&&(r=16*A.BYTES_PER_ELEMENT);const x=0===q.byteLength?0:g;this.typedBuffer=null==u?new A(q,x):new A(q,x,(u-g)/A.BYTES_PER_ELEMENT);this.typedBufferStride=r/A.BYTES_PER_ELEMENT;this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride);
this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}var C=B.prototype;C.sliceBuffer=function(A,q,g=this.count-q){q=this.typedBuffer.byteOffset+q*this.stride;return new A(this.buffer,q,this.stride,q+g*this.stride)};C.getMat=function(A,q){A*=this.typedBufferStride;for(let g=0;16>g;g++)q[g]=this.typedBuffer[A++];return q};C.setMat=function(A,q){A*=this.typedBufferStride;for(let g=0;16>g;g++)this.typedBuffer[A++]=q[g]};C.get=function(A,q){return this.typedBuffer[A*this.typedBufferStride+
q]};C.set=function(A,q,g){this.typedBuffer[A*this.typedBufferStride+q]=g};C.copyFrom=function(A,q,g){const r=this.typedBuffer,u=q.typedBuffer;A*=this.typedBufferStride;q=g*q.typedBufferStride;for(g=0;16>g;++g)r[A++]=u[q++]};m._createClass(B,[{key:"buffer",get:function(){return this.typedBuffer.buffer}}]);return B}();v.ElementCount=16;d.BufferViewMat4Impl=v;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/geometry/support/buffer/internals/Scalar":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers"],
function(d,m){let v=function(){function B(A,q,g=0,r,u){this.TypedArrayConstructor=A;this.elementCount=1;A=this.TypedArrayConstructor;void 0===r&&(r=A.BYTES_PER_ELEMENT);const x=0===q.byteLength?0:g;this.typedBuffer=null==u?new A(q,x):new A(q,x,(u-g)/A.BYTES_PER_ELEMENT);this.typedBufferStride=r/A.BYTES_PER_ELEMENT;this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride);this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}var C=B.prototype;C.sliceBuffer=function(A,
q,g=this.count-q){q=this.typedBuffer.byteOffset+q*this.stride;return new A(this.buffer,q,this.stride,q+g*this.stride)};C.get=function(A){return this.typedBuffer[A*this.typedBufferStride]};C.set=function(A,q){this.typedBuffer[A*this.typedBufferStride]=q};m._createClass(B,[{key:"buffer",get:function(){return this.typedBuffer.buffer}}]);return B}();v.ElementCount=1;d.BufferViewScalarImpl=v;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/geometry/support/buffer/internals/Vec2":function(){define(["exports",
"../../../../chunks/_rollupPluginBabelHelpers","../../../../chunks/vec2"],function(d,m,v){let B=function(){function C(q,g,r=0,u,x){this.TypedArrayConstructor=q;this.elementCount=2;q=this.TypedArrayConstructor;void 0===u&&(u=2*q.BYTES_PER_ELEMENT);const y=0===g.byteLength?0:r;this.typedBuffer=null==x?new q(g,y):new q(g,y,(x-r)/q.BYTES_PER_ELEMENT);this.typedBufferStride=u/q.BYTES_PER_ELEMENT;this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride);this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}
var A=C.prototype;A.sliceBuffer=function(q,g,r=this.count-g){g=this.typedBuffer.byteOffset+g*this.stride;return new q(this.buffer,g,this.stride,g+r*this.stride)};A.getVec=function(q,g){q*=this.typedBufferStride;return v.set(g,this.typedBuffer[q],this.typedBuffer[q+1])};A.setVec=function(q,g){q*=this.typedBufferStride;this.typedBuffer[q++]=g[0];this.typedBuffer[q]=g[1]};A.get=function(q,g){return this.typedBuffer[q*this.typedBufferStride+g]};A.set=function(q,g,r){this.typedBuffer[q*this.typedBufferStride+
g]=r};A.setValues=function(q,g,r){q*=this.typedBufferStride;this.typedBuffer[q++]=g;this.typedBuffer[q]=r};A.copyFrom=function(q,g,r){const u=this.typedBuffer,x=g.typedBuffer;q*=this.typedBufferStride;g=r*g.typedBufferStride;u[q++]=x[g++];u[q]=x[g]};m._createClass(C,[{key:"buffer",get:function(){return this.typedBuffer.buffer}}]);return C}();B.ElementCount=2;d.BufferViewVec2Impl=B;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/geometry/support/buffer/internals/Vec3":function(){define(["exports",
"../../../../chunks/_rollupPluginBabelHelpers","../../../../chunks/vec3"],function(d,m,v){let B=function(){function C(q,g,r=0,u,x){this.TypedArrayConstructor=q;this.elementCount=3;q=this.TypedArrayConstructor;void 0===u&&(u=3*q.BYTES_PER_ELEMENT);const y=0===g.byteLength?0:r;this.typedBuffer=null==x?new q(g,y):new q(g,y,(x-r)/q.BYTES_PER_ELEMENT);this.typedBufferStride=u/q.BYTES_PER_ELEMENT;this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride);this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}
var A=C.prototype;A.sliceBuffer=function(q,g,r=this.count-g){g=this.typedBuffer.byteOffset+g*this.stride;return new q(this.buffer,g,this.stride,g+r*this.stride)};A.getVec=function(q,g){q*=this.typedBufferStride;return v.set(g,this.typedBuffer[q],this.typedBuffer[q+1],this.typedBuffer[q+2])};A.setVec=function(q,g){q*=this.typedBufferStride;this.typedBuffer[q++]=g[0];this.typedBuffer[q++]=g[1];this.typedBuffer[q]=g[2]};A.get=function(q,g){return this.typedBuffer[q*this.typedBufferStride+g]};A.set=function(q,
g,r){this.typedBuffer[q*this.typedBufferStride+g]=r};A.setValues=function(q,g,r,u){q*=this.typedBufferStride;this.typedBuffer[q++]=g;this.typedBuffer[q++]=r;this.typedBuffer[q]=u};A.copyFrom=function(q,g,r){const u=this.typedBuffer,x=g.typedBuffer;q*=this.typedBufferStride;g=r*g.typedBufferStride;u[q++]=x[g++];u[q++]=x[g++];u[q]=x[g]};m._createClass(C,[{key:"buffer",get:function(){return this.typedBuffer.buffer}}]);return C}();B.ElementCount=3;d.BufferViewVec3Impl=B;Object.defineProperty(d,"__esModule",
{value:!0})})},"esri/geometry/support/buffer/internals/Vec4":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../chunks/vec4"],function(d,m,v){let B=function(){function C(q,g,r=0,u,x){this.TypedArrayConstructor=q;this.elementCount=4;q=this.TypedArrayConstructor;void 0===u&&(u=4*q.BYTES_PER_ELEMENT);const y=0===g.byteLength?0:r;this.typedBuffer=null==x?new q(g,y):new q(g,y,(x-r)/q.BYTES_PER_ELEMENT);this.typedBufferStride=u/q.BYTES_PER_ELEMENT;this.count=Math.ceil(this.typedBuffer.length/
this.typedBufferStride);this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}var A=C.prototype;A.sliceBuffer=function(q,g,r=this.count-g){g=this.typedBuffer.byteOffset+g*this.stride;return new q(this.buffer,g,this.stride,g+r*this.stride)};A.getVec=function(q,g){q*=this.typedBufferStride;return v.set(g,this.typedBuffer[q++],this.typedBuffer[q++],this.typedBuffer[q++],this.typedBuffer[q])};A.setVec=function(q,g){q*=this.typedBufferStride;this.typedBuffer[q++]=g[0];this.typedBuffer[q++]=
g[1];this.typedBuffer[q++]=g[2];this.typedBuffer[q]=g[3]};A.get=function(q,g){return this.typedBuffer[q*this.typedBufferStride+g]};A.set=function(q,g,r){this.typedBuffer[q*this.typedBufferStride+g]=r};A.setValues=function(q,g,r,u,x){q*=this.typedBufferStride;this.typedBuffer[q++]=g;this.typedBuffer[q++]=r;this.typedBuffer[q++]=u;this.typedBuffer[q]=x};A.copyFrom=function(q,g,r){const u=this.typedBuffer,x=g.typedBuffer;q*=this.typedBufferStride;g=r*g.typedBufferStride;u[q++]=x[g++];u[q++]=x[g++];u[q++]=
x[g++];u[q]=x[g]};m._createClass(C,[{key:"buffer",get:function(){return this.typedBuffer.buffer}}]);return C}();B.ElementCount=4;d.BufferViewVec4Impl=B;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/geometry/support/buffer/types":function(){define(["exports","../../../core/has"],function(d,m){d.elementTypeSize=function(v){switch(v){case "u8":return 1;case "u16":return 2;case "u32":return 4;case "i8":return 1;case "i16":return 2;case "i32":return 4;case "f32":return 4;case "f64":return 8}};
d.isInteger=function(v){switch(v){case "u8":case "u16":case "u32":case "i8":case "i16":case "i32":return!0;case "f32":case "f64":return!1}};d.isSigned=function(v){switch(v){case "u8":case "u16":case "u32":return!1;case "i8":case "i16":case "i32":case "f32":case "f64":return!0}};d.maximumValue=function(v){switch(v){case "u8":return 255;case "u16":return 65535;case "u32":return 4294967295;case "i8":return 127;case "i16":return 32767;case "i32":return 2147483647;case "f32":return 3.402823E38;case "f64":return 1.79769E308}};
Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/shaders/LaserlinePathTechnique":function(){define("require exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../chunks/mat4 ../../../../chunks/mat4f64 ../core/shaderTechnique/ReloadableShaderModule ../core/shaderTechnique/ShaderTechnique ../core/shaderTechnique/ShaderTechniqueConfiguration ../lib/Program ../../../../chunks/LaserlinePath.glsl ../../../webgl/renderState".split(" "),
function(d,m,v,B,C,A,q,g,r,u,x,y){g=function(l){function n(){return l.apply(this,arguments)||this}v._inheritsLoose(n,l);var c=n.prototype;c.initializeProgram=function(a){const b=n.shader.get().build(this.configuration);return new u.Program(a.rctx,b,n.attributeLocations)};c.bind=function(a,b,k){this.program.setUniform3fv("innerColor",a.innerColor);this.program.setUniform1f("innerWidth",a.innerWidth*k.pixelRatio);this.program.setUniform3fv("glowColor",a.glowColor);this.program.setUniform1f("glowWidth",
a.glowWidth*k.pixelRatio);this.program.setUniform1f("glowFalloff",a.glowFalloff);this.program.setUniform1f("globalAlpha",a.globalAlpha);this.program.setUniform1f("perScreenPixelRatio",k.perScreenPixelRatio);this.program.setUniform2f("pixelToNDC",2/k.fullWidth,2/k.fullHeight);this.program.setUniformMatrix4fv("uProjectionMatrix",k.projectionMatrix);C.translate(t,k.viewMatrix,b);this.program.setUniformMatrix4fv("uModelViewMatrix",t);this.configuration.contrastControlEnabled&&this.program.setUniform1f("globalAlphaContrastBoost",
null!=a.globalAlphaContrastBoost?a.globalAlphaContrastBoost:1)};c.initializePipeline=function(){return y.makePipelineState({blending:y.simpleBlendingParams(1,771),colorWrite:y.defaultColorWriteParams})};c.bindPipelineState=function(a){a.setPipelineState(this.pipeline)};return n}(g.ShaderTechnique);g.shader=new q.ReloadableShaderModule(x.LaserlinePathShader,()=>new Promise(function(l,n){d(["./LaserlinePath.glsl"],l,n)}));g.attributeLocations=new Map([["start",0],["end",1],["up",2],["extrude",3]]);
q=function(l){function n(){var c=l.apply(this,arguments)||this;c.contrastControlEnabled=!1;return c}v._inheritsLoose(n,l);return n}(r.ShaderTechniqueConfiguration);B.__decorate([r.parameter()],q.prototype,"contrastControlEnabled",void 0);const t=A.create();m.LaserlinePathTechnique=g;m.LaserlinePathTechniqueConfiguration=q;Object.defineProperty(m,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/core/shaderTechnique/ReloadableShaderModule":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers"],
function(d,m){let v=function(){function B(A,q){this._module=A;this._loadModule=q}var C=B.prototype;C.get=function(){return this._module};C.reload=function(){var A=m._asyncToGenerator(function*(){return this._module=yield this._loadModule()});return function(){return A.apply(this,arguments)}}();return B}();d.ReloadableShaderModule=v;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/core/shaderTechnique/ShaderTechnique":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers",
"../../../../../core/maybe"],function(d,m,v){let B=function(){function C(q,g,r=()=>this.dispose()){this.release=r;g&&(this._config=g.snapshot());this._program=this.initializeProgram(q);this._pipeline=this.initializePipeline(q)}var A=C.prototype;A.dispose=function(){this._program=v.disposeMaybe(this._program);this._pipeline=this._config=null};A.reload=function(q){v.disposeMaybe(this._program);this._program=this.initializeProgram(q)};A.bindPass=function(q,g){};A.bindMaterial=function(q,g){};A.bindDraw=
function(q,g,r){};A.bindPipelineState=function(q){q.setPipelineState(this.pipeline)};A.ensureAttributeLocations=function(q){this.program.assertCompatibleVertexAttributeLocations(q)};m._createClass(C,[{key:"program",get:function(){return this._program}},{key:"pipeline",get:function(){return this._pipeline}},{key:"key",get:function(){return this._config.key}},{key:"configuration",get:function(){return this._config}},{key:"primitiveType",get:function(){return 4}}]);return C}();d.ShaderTechnique=B;Object.defineProperty(d,
"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/core/shaderTechnique/ShaderTechniqueConfiguration":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","../../../../../core/mathUtils"],function(d,m,v){let B=function(){function C(){this._key="";this._keyDirty=!1;this._parameterBits=this._parameterBits.map(()=>0)}C.prototype.snapshot=function(){const A=this._parameterNames,q={key:this.key};for(const g of A)q[g]=this[g];return q};m._createClass(C,[{key:"key",get:function(){this._keyDirty&&
(this._keyDirty=!1,this._key=String.fromCharCode.apply(String,this._parameterBits));return this._key}}]);return C}();d.ShaderTechniqueConfiguration=B;d.parameter=function(C={}){return(A,q)=>{var g,r;A._parameterNames=null!=(g=A._parameterNames)?g:[];A._parameterNames.push(q);const u=A._parameterNames.length-1;g=Math.ceil(v.log2(C.count||2));const x=null!=(r=A._parameterBits)?r:[0];let y=0;for(;16<x[y]+g;)y++,y>=x.length&&x.push(0);A._parameterBits=x;const t=x[y],l=(1<<g)-1<<t;x[y]+=g;Object.defineProperty(A,
q,{get(){return this[u]},set(n){if(this[u]!==n&&(this[u]=n,this._keyDirty=!0,this._parameterBits[y]=this._parameterBits[y]&~l|+n<<t&l,"number"!==typeof n&&"boolean"!==typeof n))throw"Configuration value for "+q+" must be boolean or number, got "+typeof n;}})}};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/Program":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../core/PooledArray ../../../webgl/Program ../../../webgl/RenderingContext".split(" "),
function(d,m,v,B,C,A){C=function(q){function g(u,x,y){u=q.call(this,u,x.generateSource("vertex"),x.generateSource("fragment"),y)||this;u._textures=new Map;u._freeTextureUnits=new B({deallocator:null});u._fragmentUniforms=A.webglDebugEnabled()?x.fragmentUniforms.entries:null;return u}m._inheritsLoose(g,q);var r=g.prototype;r.stop=function(){this._textures.clear();this._freeTextureUnits.clear()};r.bindTexture=function(u,x){if(v.isNone(u)||null==u.glName){if(u=this._textures.get(x))this._context.bindTexture(null,
u.unit),this._freeTextureUnit(u),this._textures.delete(x);return null}let y=this._textures.get(x);null==y?(y=this._allocTextureUnit(u),this._textures.set(x,y)):y.texture=u;this._context.useProgram(this);this.setUniform1i(x,y.unit);this._context.bindTexture(u,y.unit);return y.unit};r.rebindTextures=function(){this._context.useProgram(this);this._textures.forEach((u,x)=>{this._context.bindTexture(u.texture,u.unit);this.setUniform1i(x,u.unit)});v.isSome(this._fragmentUniforms)&&this._fragmentUniforms.forEach(u=>
{if(("sampler2D"===u.type||"samplerCube"===u.type)&&!this._textures.has(u.name))throw Error(`Texture sampler ${u.name} has no bound texture`);})};r._allocTextureUnit=function(u){return{texture:u,unit:0===this._freeTextureUnits.length?this._textures.size:this._freeTextureUnits.pop()}};r._freeTextureUnit=function(u){this._freeTextureUnits.push(u.unit)};return g}(C.Program);d.Program=C;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/webgl/Program":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/has ../../core/maybe ./enums ./RenderingContext ./ShaderTranspiler".split(" "),
function(d,m,v,B,C,A,q){function g(y,t){if(B.isNone(y)||y.length!==t.length)return!0;for(let l=0;l<y.length;++l)if(y[l]!==t[l])return!0;return!1}function r(y,t,l){const n="webgl2"===y.webglVersion?q.transpileShader(l,t):l,c=y.gl,a=c.createShader(t);c.shaderSource(a,n);c.compileShader(a);A.webglValidateShadersEnabled()&&!c.getShaderParameter(a,c.COMPILE_STATUS)&&(console.error("Compile error in ".concat(35633===t?"vertex":"fragment"," shader")),console.error(c.getShaderInfoLog(a)),console.error(u(n)),
"webgl2"===y.webglVersion&&(console.log("Shader source before transpilation:"),console.log(l)));return a}function u(y){let t=2;return y.replace(/\n/g,()=>{var l=t++;l=1E3<=l?l.toString():("  "+l).slice(-3);return"\n"+l+":"})}function x(y,t){for(let l=0;l<y.length;++l)t[l]=y[l]}v=function(){function y(l,n,c,a){this._context=l;this._locations=a;this._fShader=this._vShader=null;this._nameToUniformLocation={};this._nameToUniform1={};this._nameToUniform1v={};this._nameToUniform2={};this._nameToUniform3=
{};this._nameToUniform4={};this._nameToUniformMatrix3={};this._nameToUniformMatrix4={};l||console.error("RenderingContext isn't initialized!");0===n.length&&console.error("Shaders source should not be empty!");this._vShader=r(this._context,35633,n);this._fShader=r(this._context,35632,c);this._vShader&&this._fShader||console.error("Error loading shaders!");const b=this._context.gl,k=b.createProgram();b.attachShader(k,this._vShader);b.attachShader(k,this._fShader);a.forEach((e,h)=>b.bindAttribLocation(k,
e,h));b.linkProgram(k);A.webglValidateShadersEnabled()&&!b.getProgramParameter(k,b.LINK_STATUS)&&console.error("Could not initialize shader\nVALIDATE_STATUS: "+b.getProgramParameter(k,b.VALIDATE_STATUS)+", gl error ["+b.getError()+"]infoLog: "+b.getProgramInfoLog(k));this._glName=k;this._context.instanceCounter.increment(C.ResourceType.Program,this)}var t=y.prototype;t.dispose=function(){const l=this._context.gl;this._vShader&&(l.deleteShader(this._vShader),this._vShader=null);this._fShader&&(l.deleteShader(this._fShader),
this._fShader=null);this._glName&&(l.deleteProgram(this._glName),this._glName=null,this._context.instanceCounter.decrement(C.ResourceType.Program,this))};t._getUniformLocation=function(l){void 0===this._nameToUniformLocation[l]&&(this._nameToUniformLocation[l]=this._context.gl.getUniformLocation(this._glName,l));return this._nameToUniformLocation[l]};t.hasUniform=function(l){return null!==this._getUniformLocation(l)};t.setUniform1i=function(l,n){const c=this._nameToUniform1[l];if(void 0===c||n!==
c)this._context.useProgram(this),this._context.gl.uniform1i(this._getUniformLocation(l),n),this._nameToUniform1[l]=n};t.setUniform1iv=function(l,n){const c=this._nameToUniform1v[l];g(c,n)&&(this._context.useProgram(this),this._context.gl.uniform1iv(this._getUniformLocation(l),n),void 0===c?this._nameToUniform1v[l]=Array.from(n):x(n,c))};t.setUniform2iv=function(l,n){const c=this._nameToUniform2[l];g(c,n)&&(this._context.useProgram(this),this._context.gl.uniform2iv(this._getUniformLocation(l),n),void 0===
c?this._nameToUniform2[l]=Array.from(n):x(n,c))};t.setUniform3iv=function(l,n){const c=this._nameToUniform3[l];g(c,n)&&(this._context.useProgram(this),this._context.gl.uniform3iv(this._getUniformLocation(l),n),void 0===c?this._nameToUniform3[l]=Array.from(n):x(n,c))};t.setUniform4iv=function(l,n){const c=this._nameToUniform4[l];g(c,n)&&(this._context.useProgram(this),this._context.gl.uniform4iv(this._getUniformLocation(l),n),void 0===c?this._nameToUniform4[l]=Array.from(n):x(n,c))};t.setUniform1f=
function(l,n){const c=this._nameToUniform1[l];if(void 0===c||n!==c)this._context.useProgram(this),this._context.gl.uniform1f(this._getUniformLocation(l),n),this._nameToUniform1[l]=n};t.setUniform1fv=function(l,n){const c=this._nameToUniform1v[l];g(c,n)&&(this._context.useProgram(this),this._context.gl.uniform1fv(this._getUniformLocation(l),n),void 0===c?this._nameToUniform1v[l]=Array.from(n):x(n,c))};t.setUniform2f=function(l,n,c){const a=this._nameToUniform2[l];if(void 0===a||n!==a[0]||c!==a[1])this._context.useProgram(this),
this._context.gl.uniform2f(this._getUniformLocation(l),n,c),void 0===a?this._nameToUniform2[l]=[n,c]:(a[0]=n,a[1]=c)};t.setUniform2fv=function(l,n){const c=this._nameToUniform2[l];g(c,n)&&(this._context.useProgram(this),this._context.gl.uniform2fv(this._getUniformLocation(l),n),void 0===c?this._nameToUniform2[l]=Array.from(n):x(n,c))};t.setUniform3f=function(l,n,c,a){const b=this._nameToUniform3[l];if(void 0===b||n!==b[0]||c!==b[1]||a!==b[2])this._context.useProgram(this),this._context.gl.uniform3f(this._getUniformLocation(l),
n,c,a),void 0===b?this._nameToUniform3[l]=[n,c,a]:(b[0]=n,b[1]=c,b[2]=a)};t.setUniform3fv=function(l,n){const c=this._nameToUniform3[l];g(c,n)&&(this._context.useProgram(this),this._context.gl.uniform3fv(this._getUniformLocation(l),n),void 0===c?this._nameToUniform3[l]=Array.from(n):x(n,c))};t.setUniform4f=function(l,n,c,a,b){const k=this._nameToUniform4[l];if(void 0===k||n!==k[0]||c!==k[1]||a!==k[2]||b!==k[3])this._context.useProgram(this),this._context.gl.uniform4f(this._getUniformLocation(l),n,
c,a,b),void 0===k?this._nameToUniform4[l]=[n,c,a,b]:(k[0]=n,k[1]=c,k[2]=a,k[3]=b)};t.setUniform4fv=function(l,n){const c=this._nameToUniform4[l];g(c,n)&&(this._context.useProgram(this),this._context.gl.uniform4fv(this._getUniformLocation(l),n),void 0===c?this._nameToUniform4[l]=Array.from(n):x(n,c))};t.setUniformMatrix3fv=function(l,n,c=!1){const a=this._nameToUniformMatrix3[l];var b=B.isNone(a)?!0:9!==a.length?g(a,n):9!==a.length||a[0]!==n[0]||a[1]!==n[1]||a[2]!==n[2]||a[3]!==n[3]||a[4]!==n[4]||
a[5]!==n[5]||a[6]!==n[6]||a[7]!==n[7]||a[8]!==n[8];b&&(this._context.useProgram(this),this._context.gl.uniformMatrix3fv(this._getUniformLocation(l),c,n),void 0===a?this._nameToUniformMatrix3[l]=Array.from(n):x(n,a))};t.setUniformMatrix4fv=function(l,n,c=!1){const a=this._nameToUniformMatrix4[l];var b=B.isNone(a)?!0:16!==a.length?g(a,n):16!==a.length||a[0]!==n[0]||a[1]!==n[1]||a[2]!==n[2]||a[3]!==n[3]||a[4]!==n[4]||a[5]!==n[5]||a[6]!==n[6]||a[7]!==n[7]||a[8]!==n[8]||a[9]!==n[9]||a[10]!==n[10]||a[11]!==
n[11]||a[12]!==n[12]||a[13]!==n[13]||a[14]!==n[14]||a[15]!==n[15];b&&(this._context.useProgram(this),this._context.gl.uniformMatrix4fv(this._getUniformLocation(l),c,n),void 0===a?this._nameToUniformMatrix4[l]=Array.from(n):x(n,a))};t.assertCompatibleVertexAttributeLocations=function(l){l.locations!==this._locations&&console.error("VertexAttributeLocations are incompatible")};t.stop=function(){};m._createClass(y,[{key:"glName",get:function(){return this._glName}}]);return y}();d.Program=v;Object.defineProperty(d,
"__esModule",{value:!0})})},"esri/views/webgl/enums":function(){define(["exports"],function(d){d.ResourceType=void 0;var m=d.ResourceType||(d.ResourceType={});m[m.Texture=0]="Texture";m[m.Buffer=1]="Buffer";m[m.VAO=2]="VAO";m[m.Program=3]="Program";m[m.Framebuffer=4]="Framebuffer";m[m.Renderbuffer=5]="Renderbuffer";m[m.COUNT=6]="COUNT";d.BASE_TEXTURE_UNIT=33984;d.DepthStencilAttachment=33306;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/webgl/RenderingContext":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/has ../../core/maybe ./enums ./InstanceCounter ./renderState ./Texture ./capabilities/isWebGL2Context ./capabilities/load".split(" "),
function(d,m,v,B,C,A,q,g,r,u){function x(n,c,a,b){c?b!==c&&n.bindBuffer(a,c.glName):n.bindBuffer(a,null);return c}function y(n,c){switch(n){case 0:return 2*c;case 4:return c/3;case 5:return c-2;case 6:return c-2;default:return 0}}let t=function(){function n(a,b={}){this.gl=a;this.instanceCounter=new A.InstanceCounter;this._blendEnabled=!1;this._blendColorState={r:0,g:0,b:0,a:0};this._blendFunctionState={srcRGB:1,dstRGB:0,srcAlpha:1,dstAlpha:0};this._blendEquationState={mode:32774,modeAlpha:32774};
this._colorMaskState={r:!0,g:!0,b:!0,a:!0};this._polygonCullingEnabled=!1;this._cullFace=1029;this._frontFace=2305;this._scissorTestEnabled=!1;this._scissorRect={x:0,y:0,width:0,height:0};this._depthTestEnabled=!1;this._depthFunction=513;this._clearDepth=1;this._depthWriteEnabled=!0;this._depthRange={zNear:0,zFar:1};this._viewport=null;this._polygonOffsetFillEnabled=this._stencilTestEnabled=!1;this._polygonOffset=[0,0];this._stencilFunction={face:1032,func:519,ref:0,mask:1};this._clearStencil=0;this._stencilWriteMask=
1;this._stencilOperation={face:1032,fail:7680,zFail:7680,zPass:7680};this._clearColor={r:0,g:0,b:0,a:0};this._activeRenderbuffer=this._activeFramebuffer=this._activeIndexBuffer=this._activeVertexBuffer=this._activeShaderProgram=null;this._activeTextureUnit=0;this._textureUnitMap=[];this._numOfTriangles=this._numOfDrawCalls=0;this.webglVersion=r(a)?"webgl2":"webgl";a instanceof WebGLRenderingContext&&this.gl.getExtension("OES_element_index_uint");this._capabilities=u.loadCapabilities(a,b);this._parameters=
this._loadParameters(b);a=this.gl.getParameter(this.gl.VIEWPORT);this._viewport={x:a[0],y:a[1],width:a[2],height:a[3]};this._stateTracker=new q.StateTracker({setBlending:k=>{k?(this.setBlendingEnabled(!0),this.setBlendEquationSeparate(k.opRgb,k.opAlpha),this.setBlendFunctionSeparate(k.srcRgb,k.dstRgb,k.srcAlpha,k.dstAlpha),k=k.color,this.setBlendColor(k.r,k.g,k.b,k.a)):this.setBlendingEnabled(!1)},setCulling:k=>{k?(this.setFaceCullingEnabled(!0),this.setCullFace(k.face),this.setFrontFace(k.mode)):
this.setFaceCullingEnabled(!1)},setPolygonOffset:k=>{k?(this.setPolygonOffsetFillEnabled(!0),this.setPolygonOffset(k.factor,k.units)):this.setPolygonOffsetFillEnabled(!1)},setDepthTest:k=>{k?(this.setDepthTestEnabled(!0),this.setDepthFunction(k.func)):this.setDepthTestEnabled(!1)},setStencilTest:k=>{if(k){this.setStencilTestEnabled(!0);const e=k.function;this.setStencilFunction(e.func,e.ref,e.mask);k=k.operation;this.setStencilOp(k.fail,k.zFail,k.zPass)}else this.setStencilTestEnabled(!1)},setDepthWrite:k=>
{k?(this.setDepthWriteEnabled(!0),this.setDepthRange(k.zNear,k.zFar)):this.setDepthWriteEnabled(!1)},setColorWrite:k=>{k?this.setColorMask(k.r,k.g,k.b,k.a):this.setColorMask(!1,!1,!1,!1)},setStencilWrite:k=>{k?this.setStencilWriteMask(k.mask):this.setStencilWriteMask(0)}});this.enforceState()}var c=n.prototype;c.dispose=function(){this.bindVAO(null);this.unbindBuffer(34962);this.unbindBuffer(34963);this._textureUnitMap.length=0;l&&this.instanceCounter.printResourceCount()};c.setPipelineState=function(a){this._stateTracker.setPipeline(a)};
c.setBlendingEnabled=function(a){this._blendEnabled!==a&&(!0===a?this.gl.enable(this.gl.BLEND):this.gl.disable(this.gl.BLEND),this._blendEnabled=a,this._stateTracker.invalidateBlending())};c.externalTextureUnitUpdate=function(a,b){for(let k=0;k<a.length;++k)this._textureUnitMap[a[k]]=null;0<=b&&(this._activeTextureUnit=b)};c.externalVertexArrayObjectUpdate=function(){const a=this.capabilities.vao;a&&(a.bindVertexArray(null),this._activeVertexArrayObject=null);this._activeIndexBuffer=this._activeVertexBuffer=
null};c.externalVertexBufferUpdate=function(){this._activeVertexBuffer=null};c.externalIndexBufferUpdate=function(){this._activeIndexBuffer=null};c.setBlendColor=function(a,b,k,e){if(a!==this._blendColorState.r||b!==this._blendColorState.g||k!==this._blendColorState.b||e!==this._blendColorState.a)this.gl.blendColor(a,b,k,e),this._blendColorState.r=a,this._blendColorState.g=b,this._blendColorState.b=k,this._blendColorState.a=e,this._stateTracker.invalidateBlending()};c.setBlendFunction=function(a,
b){if(a!==this._blendFunctionState.srcRGB||b!==this._blendFunctionState.dstRGB)this.gl.blendFunc(a,b),this._blendFunctionState.srcRGB=a,this._blendFunctionState.srcAlpha=a,this._blendFunctionState.dstRGB=b,this._blendFunctionState.dstAlpha=b,this._stateTracker.invalidateBlending()};c.setBlendFunctionSeparate=function(a,b,k,e){if(this._blendFunctionState.srcRGB!==a||this._blendFunctionState.srcAlpha!==k||this._blendFunctionState.dstRGB!==b||this._blendFunctionState.dstAlpha!==e)this.gl.blendFuncSeparate(a,
b,k,e),this._blendFunctionState.srcRGB=a,this._blendFunctionState.srcAlpha=k,this._blendFunctionState.dstRGB=b,this._blendFunctionState.dstAlpha=e,this._stateTracker.invalidateBlending()};c.setBlendEquation=function(a){this._blendEquationState.mode!==a&&(this.gl.blendEquation(a),this._blendEquationState.mode=a,this._blendEquationState.modeAlpha=a,this._stateTracker.invalidateBlending())};c.setBlendEquationSeparate=function(a,b){if(this._blendEquationState.mode!==a||this._blendEquationState.modeAlpha!==
b)this.gl.blendEquationSeparate(a,b),this._blendEquationState.mode=a,this._blendEquationState.modeAlpha=b,this._stateTracker.invalidateBlending()};c.setColorMask=function(a,b,k,e){if(this._colorMaskState.r!==a||this._colorMaskState.g!==b||this._colorMaskState.b!==k||this._colorMaskState.a!==e)this.gl.colorMask(a,b,k,e),this._colorMaskState.r=a,this._colorMaskState.g=b,this._colorMaskState.b=k,this._colorMaskState.a=e,this._stateTracker.invalidateColorWrite()};c.setClearColor=function(a,b,k,e){if(this._clearColor.r!==
a||this._clearColor.g!==b||this._clearColor.b!==k||this._clearColor.a!==e)this.gl.clearColor(a,b,k,e),this._clearColor.r=a,this._clearColor.g=b,this._clearColor.b=k,this._clearColor.a=e};c.setFaceCullingEnabled=function(a){this._polygonCullingEnabled!==a&&(!0===a?this.gl.enable(this.gl.CULL_FACE):this.gl.disable(this.gl.CULL_FACE),this._polygonCullingEnabled=a,this._stateTracker.invalidateCulling())};c.setPolygonOffsetFillEnabled=function(a){this._polygonOffsetFillEnabled!==a&&(!0===a?this.gl.enable(this.gl.POLYGON_OFFSET_FILL):
this.gl.disable(this.gl.POLYGON_OFFSET_FILL),this._polygonOffsetFillEnabled=a,this._stateTracker.invalidatePolygonOffset())};c.setPolygonOffset=function(a,b){if(this._polygonOffset[0]!==a||this._polygonOffset[1]!==b)this._polygonOffset[0]=a,this._polygonOffset[1]=b,this.gl.polygonOffset(a,b),this._stateTracker.invalidatePolygonOffset()};c.setCullFace=function(a){this._cullFace!==a&&(this.gl.cullFace(a),this._cullFace=a,this._stateTracker.invalidateCulling())};c.setFrontFace=function(a){this._frontFace!==
a&&(this.gl.frontFace(a),this._frontFace=a,this._stateTracker.invalidateCulling())};c.setScissorTestEnabled=function(a){this._scissorTestEnabled!==a&&(!0===a?this.gl.enable(this.gl.SCISSOR_TEST):this.gl.disable(this.gl.SCISSOR_TEST),this._scissorTestEnabled=a)};c.setScissorRect=function(a,b,k,e){if(this._scissorRect.x!==a||this._scissorRect.y!==b||this._scissorRect.width!==k||this._scissorRect.height!==e)this.gl.scissor(a,b,k,e),this._scissorRect.x=a,this._scissorRect.y=b,this._scissorRect.width=
k,this._scissorRect.height=e};c.setDepthTestEnabled=function(a){this._depthTestEnabled!==a&&(!0===a?this.gl.enable(this.gl.DEPTH_TEST):this.gl.disable(this.gl.DEPTH_TEST),this._depthTestEnabled=a,this._stateTracker.invalidateDepthTest())};c.setClearDepth=function(a){this._clearDepth!==a&&(this.gl.clearDepth(a),this._clearDepth=a)};c.setDepthFunction=function(a){this._depthFunction!==a&&(this.gl.depthFunc(a),this._depthFunction=a,this._stateTracker.invalidateDepthTest())};c.setDepthWriteEnabled=function(a){this._depthWriteEnabled!==
a&&(this.gl.depthMask(a),this._depthWriteEnabled=a,this._stateTracker.invalidateDepthWrite())};c.setDepthRange=function(a,b){if(this._depthRange.zNear!==a||this._depthRange.zFar!==b)this.gl.depthRange(a,b),this._depthRange.zNear=a,this._depthRange.zFar=b,this._stateTracker.invalidateDepthWrite()};c.setStencilTestEnabled=function(a){this._stencilTestEnabled!==a&&(!0===a?this.gl.enable(this.gl.STENCIL_TEST):this.gl.disable(this.gl.STENCIL_TEST),this._stencilTestEnabled=a,this._stateTracker.invalidateStencilTest())};
c.setClearStencil=function(a){a!==this._clearStencil&&(this.gl.clearStencil(a),this._clearStencil=a)};c.setStencilFunction=function(a,b,k){if(this._stencilFunction.func!==a||this._stencilFunction.ref!==b||this._stencilFunction.mask!==k)this.gl.stencilFunc(a,b,k),this._stencilFunction.face=1032,this._stencilFunction.func=a,this._stencilFunction.ref=b,this._stencilFunction.mask=k,this._stateTracker.invalidateStencilTest()};c.setStencilFunctionSeparate=function(a,b,k,e){if(this._stencilFunction.face!==
a||this._stencilFunction.func!==b||this._stencilFunction.ref!==k||this._stencilFunction.mask!==e)this.gl.stencilFuncSeparate(a,b,k,e),this._stencilFunction.face=a,this._stencilFunction.func=b,this._stencilFunction.ref=k,this._stencilFunction.mask=e,this._stateTracker.invalidateStencilTest()};c.setStencilWriteMask=function(a){this._stencilWriteMask!==a&&(this.gl.stencilMask(a),this._stencilWriteMask=a,this._stateTracker.invalidateStencilWrite())};c.setStencilOp=function(a,b,k){if(this._stencilOperation.fail!==
a||this._stencilOperation.zFail!==b||this._stencilOperation.zPass!==k)this.gl.stencilOp(a,b,k),this._stencilOperation.face=1032,this._stencilOperation.fail=a,this._stencilOperation.zFail=b,this._stencilOperation.zPass=k,this._stateTracker.invalidateStencilTest()};c.setStencilOpSeparate=function(a,b,k,e){if(this._stencilOperation.face!==a||this._stencilOperation.fail!==b||this._stencilOperation.zFail!==k||this._stencilOperation.zPass!==e)this.gl.stencilOpSeparate(a,b,k,e),this._stencilOperation.face=
a,this._stencilOperation.face=a,this._stencilOperation.fail=b,this._stencilOperation.zFail=k,this._stencilOperation.zPass=e,this._stateTracker.invalidateStencilTest()};c.setActiveTexture=function(a,b=!1){const k=this._activeTextureUnit;0<=a&&(b||a!==this._activeTextureUnit)&&(this.gl.activeTexture(C.BASE_TEXTURE_UNIT+a),this._activeTextureUnit=a);return k};c.clear=function(a){a&&this.gl.clear(a)};c.clearSafe=function(a,b=255){a&&(a&16384&&this.setColorMask(!0,!0,!0,!0),a&256&&this.setDepthWriteEnabled(!0),
a&1024&&this.setStencilWriteMask(b),this.gl.clear(a))};c.drawArrays=function(a,b,k){l&&(this._numOfDrawCalls++,this._numOfTriangles+=y(a,k));this.gl.drawArrays(a,b,k)};c.drawElements=function(a,b,k,e){l&&(this._numOfDrawCalls++,this._numOfTriangles+=y(a,b));this.gl.drawElements(a,b,k,e)};c.logIno=function(){l&&console.log(`DrawCalls: ${this._numOfDrawCalls}, Triangles: ${this._numOfTriangles}`)};c.setViewport=function(a,b,k,e){k=Math.max(Math.round(k),1);e=Math.max(Math.round(e),1);const h=this._viewport;
if(h.x!==a||h.y!==b||h.width!==k||h.height!==e)h.x=a,h.y=b,h.width=k,h.height=e,this.gl.viewport(a,b,k,e)};c.getViewport=function(){return{x:this._viewport.x,y:this._viewport.y,width:this._viewport.width,height:this._viewport.height}};c.useProgram=function(a){var b;if(a)this._activeShaderProgram!==a&&(null==(b=this._activeShaderProgram)?void 0:b.stop(),this._activeShaderProgram=a,this.gl.useProgram(a.glName));else{var k;null==(k=this._activeShaderProgram)?void 0:k.stop();this._activeShaderProgram=
null;this.gl.useProgram(null)}};c.bindTexture=function(a,b,k=!1){(b>=this.parameters.maxTextureImageUnits||0>b)&&console.error("Input texture unit is out of range of available units!");const e=this._textureUnitMap[b];this.setActiveTexture(b,k);if(B.isNone(a)||null==a.glName)return B.isSome(e)&&this.gl.bindTexture(e.descriptor.target,null),this._textureUnitMap[b]=null,e;if(!k&&e===a)return a.applyChanges(),e;this.gl.bindTexture(a.descriptor.target,a.glName);a.applyChanges();this._textureUnitMap[b]=
a;return e};c.unbindTextureAllUnits=function(a){for(let b=0;b<this.parameters.maxTextureImageUnits;b++)this._textureUnitMap[b]===a&&(this.bindTexture(null,b),this._textureUnitMap[b]=null)};c.bindFramebuffer=function(a,b=!1){if(B.isNone(a))this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),this._activeFramebuffer=null;else if(b||this._activeFramebuffer!==a)a.initializeAndBind(),this._activeFramebuffer=a};c.bindBuffer=function(a){a&&(34962===a.bufferType?this._activeVertexBuffer=x(this.gl,a,a.bufferType,
this._activeVertexBuffer):this._activeIndexBuffer=x(this.gl,a,a.bufferType,this._activeIndexBuffer))};c.bindRenderbuffer=function(a){const b=this.gl;a||(b.bindRenderbuffer(b.RENDERBUFFER,null),this._activeRenderbuffer=null);this._activeRenderbuffer!==a&&(b.bindRenderbuffer(b.RENDERBUFFER,a.glName),this._activeRenderbuffer=a)};c.unbindBuffer=function(a){34962===a?this._activeVertexBuffer=x(this.gl,null,a,this._activeVertexBuffer):this._activeIndexBuffer=x(this.gl,null,a,this._activeIndexBuffer)};c.bindVAO=
function(a=null){B.isNone(a)?this._activeVertexArrayObject&&(this._activeVertexArrayObject.unbind(),this._activeVertexArrayObject=null):this._activeVertexArrayObject!==a&&(a.bind(),this._activeVertexArrayObject=a)};c.getBoundFramebufferObject=function(){return this._activeFramebuffer};c.getBoundVAO=function(){return this._activeVertexArrayObject};c.resetState=function(){this.useProgram(null);this.bindVAO(null);this.bindFramebuffer(null);this.unbindBuffer(34962);this.unbindBuffer(34963);for(let a=
0;a<this.parameters.maxTextureImageUnits;++a)this.bindTexture(null,a);this.setBlendingEnabled(!1);this.setBlendFunction(1,0);this.setBlendEquation(32774);this.setBlendColor(0,0,0,0);this.setFaceCullingEnabled(!1);this.setCullFace(1029);this.setFrontFace(2305);this.setPolygonOffsetFillEnabled(!1);this.setPolygonOffset(0,0);this.setScissorTestEnabled(!1);this.setScissorRect(0,0,this.gl.canvas.width,this.gl.canvas.height);this.setDepthTestEnabled(!1);this.setDepthFunction(513);this.setDepthRange(0,1);
this.setStencilTestEnabled(!1);this.setStencilFunction(519,0,0);this.setStencilOp(7680,7680,7680);this.setClearColor(0,0,0,0);this.setClearDepth(1);this.setClearStencil(0);this.setColorMask(!0,!0,!0,!0);this.setStencilWriteMask(4294967295);this.setDepthWriteEnabled(!0);this.setViewport(0,0,this.gl.canvas.width,this.gl.canvas.height)};c.enforceState=function(){const a=this.gl;var b=this.capabilities.vao;b&&b.bindVertexArray(null);for(var k=0;k<this.parameters.maxVertexAttributes;k++)a.disableVertexAttribArray(k);
this._activeVertexBuffer?a.bindBuffer(this._activeVertexBuffer.bufferType,this._activeVertexBuffer.glName):a.bindBuffer(34962,null);this._activeIndexBuffer?a.bindBuffer(this._activeIndexBuffer.bufferType,this._activeIndexBuffer.glName):a.bindBuffer(34963,null);if(b&&this._activeVertexArrayObject){if(b=this._activeVertexArrayObject)this._activeVertexArrayObject.unbind(),this._activeVertexArrayObject=null;this.bindVAO(b)}a.bindFramebuffer(a.FRAMEBUFFER,this._activeFramebuffer?this._activeFramebuffer.glName:
null);a.useProgram(this._activeShaderProgram?this._activeShaderProgram.glName:null);a.blendColor(this._blendColorState.r,this._blendColorState.g,this._blendColorState.b,this._blendColorState.a);a.bindRenderbuffer(a.RENDERBUFFER,this._activeRenderbuffer?this._activeRenderbuffer.glName:null);!0===this._blendEnabled?a.enable(this.gl.BLEND):a.disable(this.gl.BLEND);a.blendEquationSeparate(this._blendEquationState.mode,this._blendEquationState.modeAlpha);a.blendFuncSeparate(this._blendFunctionState.srcRGB,
this._blendFunctionState.dstRGB,this._blendFunctionState.srcAlpha,this._blendFunctionState.dstAlpha);a.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearColor.a);a.clearDepth(this._clearDepth);a.clearStencil(this._clearStencil);a.colorMask(this._colorMaskState.r,this._colorMaskState.g,this._colorMaskState.b,this._colorMaskState.a);a.cullFace(this._cullFace);a.depthFunc(this._depthFunction);a.depthRange(this._depthRange.zNear,this._depthRange.zFar);!0===this._depthTestEnabled?
a.enable(a.DEPTH_TEST):a.disable(a.DEPTH_TEST);a.depthMask(this._depthWriteEnabled);a.frontFace(this._frontFace);a.lineWidth(1);!0===this._polygonCullingEnabled?a.enable(a.CULL_FACE):a.disable(a.CULL_FACE);a.polygonOffset(this._polygonOffset[0],this._polygonOffset[1]);!0===this._polygonOffsetFillEnabled?a.enable(a.POLYGON_OFFSET_FILL):a.disable(a.POLYGON_OFFSET_FILL);a.scissor(this._scissorRect.x,this._scissorRect.y,this._scissorRect.width,this._scissorRect.height);!0===this._scissorTestEnabled?a.enable(a.SCISSOR_TEST):
a.disable(a.SCISSOR_TEST);a.stencilFunc(this._stencilFunction.func,this._stencilFunction.ref,this._stencilFunction.mask);a.stencilOpSeparate(this._stencilOperation.face,this._stencilOperation.fail,this._stencilOperation.zFail,this._stencilOperation.zPass);!0===this._stencilTestEnabled?a.enable(a.STENCIL_TEST):a.disable(a.STENCIL_TEST);a.stencilMask(this._stencilWriteMask);for(b=0;b<this.parameters.maxTextureImageUnits;b++)a.activeTexture(C.BASE_TEXTURE_UNIT+b),a.bindTexture(3553,null),r(a)&&a.bindTexture(32879,
null),k=this._textureUnitMap[b],B.isSome(k)&&a.bindTexture(k.descriptor.target,k.glName);a.activeTexture(C.BASE_TEXTURE_UNIT+this._activeTextureUnit);a.viewport(this._viewport.x,this._viewport.y,this._viewport.width,this._viewport.height);l&&(this._numOfTriangles=this._numOfDrawCalls=0)};c._loadParameters=function(a){var b;const k=this.capabilities.textureFilterAnisotropic;a=null!=(b=a.maxAnisotropy)?b:Infinity;b={versionString:this.gl.getParameter(this.gl.VERSION),maxVertexTextureImageUnits:this.gl.getParameter(this.gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS),
maxVertexAttributes:this.gl.getParameter(this.gl.MAX_VERTEX_ATTRIBS),maxMaxAnisotropy:k?Math.min(this.gl.getParameter(k.MAX_TEXTURE_MAX_ANISOTROPY),a):1,maxTextureImageUnits:this.gl.getParameter(this.gl.MAX_TEXTURE_IMAGE_UNITS),maxTextureSize:this.gl.getParameter(this.gl.MAX_TEXTURE_SIZE)};g.TEXTURE_UNIT_FOR_UPDATES=b.maxTextureImageUnits-1;return b};m._createClass(n,[{key:"contextAttributes",get:function(){return this.gl.getContextAttributes()}},{key:"parameters",get:function(){return this._parameters}},
{key:"capabilities",get:function(){return this._capabilities}}]);return n}();const l=!!v("enable-feature:webgl-debug");d.default=t;d.webglDebugEnabled=function(){return l};d.webglValidateShadersEnabled=function(){return l};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/webgl/InstanceCounter":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","./enums"],function(d,m,v){let B=function(){function C(){this._current=[];this._max=[];for(this._allocations=new Map;this._current.length<
v.ResourceType.COUNT;)this._current.push(0),this._max.push(0)}var A=C.prototype;A.resetMax=function(){for(this._max.length=0;this._max.length<this._current.length;)this._max.push(0)};A.increment=function(q,g){g=++this._current[q];this._max[q]=Math.max(g,this._max[q])};A.decrement=function(q,g){--this._current[q]};A.printResourceCount=function(){if(0<this.total){console.log("Live objects:");for(let q=0;q<v.ResourceType.COUNT;++q){const g=this._current[q];0<g&&console.log(`${v.ResourceType[q]}: ${g}`)}}if(0<
this._allocations.size){console.log(`${this._allocations.size} live object allocations:`);const q=new Map;this._allocations.forEach(g=>{var r;q.set(g,(null!=(r=q.get(g))?r:0)+1)});q.forEach((g,r)=>console.log(g," : ",r))}};m._createClass(C,[{key:"max",get:function(){return this._max}},{key:"current",get:function(){return this._current}},{key:"total",get:function(){return this.current.reduce((q,g)=>q+g,0)}}]);return C}();d.InstanceCounter=B;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/webgl/renderState":function(){define(["exports"],
function(d){function m(M){return w.intern(M)}function v(M){return D.intern(M)}function B(M){return p.intern(M)}function C(M){return z.intern(M)}function A(M){return f.intern(M)}function q(M){return E.intern(M)}function g(M){return F.intern(M)}function r(M){return L.intern(M)}function u(M){return"["+M.join(",")+"]"}function x(M){return M?u([M.srcRgb,M.srcAlpha,M.dstRgb,M.dstAlpha,M.opRgb,M.opAlpha,M.color.r,M.color.g,M.color.b,M.color.a]):null}function y(M){return M?u([M.face,M.mode]):null}function t(M){return M?
u([M.factor,M.units]):null}function l(M){return M?u([M.func]):null}function n(M){return M?u([M.function.func,M.function.ref,M.function.mask,M.operation.fail,M.operation.zFail,M.operation.zPass]):null}function c(M){return M?u([M.zNear,M.zFar]):null}function a(M){return M?u([M.r,M.g,M.b,M.a]):null}function b(M){return M?u([M.mask]):null}const k={face:1029,mode:2305},e={face:1028,mode:2305};var h=function(){function M(P,V){this.makeKey=P;this.makeRef=V;this.interns=new Map}M.prototype.intern=function(P){if(!P)return null;
const V=this.makeKey(P),H=this.interns;H.has(V)||H.set(V,this.makeRef(P));return H.get(V)};return M}();const w=new h(x,M=>({__tag:"Blending",...M})),D=new h(y,M=>({__tag:"Culling",...M})),p=new h(t,M=>({__tag:"PolygonOffset",...M})),z=new h(l,M=>({__tag:"DepthTest",...M})),f=new h(n,M=>({__tag:"StencilTest",...M})),E=new h(c,M=>({__tag:"DepthWrite",...M})),F=new h(a,M=>({__tag:"ColorWrite",...M})),L=new h(b,M=>({__tag:"StencilWrite",...M})),W=new h(function(M){return M?u([x(M.blending),y(M.culling),
t(M.polygonOffset),l(M.depthTest),n(M.stencilTest),c(M.depthWrite),a(M.colorWrite),b(M.stencilWrite)]):null},M=>({blending:m(M.blending),culling:v(M.culling),polygonOffset:B(M.polygonOffset),depthTest:C(M.depthTest),stencilTest:A(M.stencilTest),depthWrite:q(M.depthWrite),colorWrite:g(M.colorWrite),stencilWrite:r(M.stencilWrite)}));h=function(){function M(V){this._stencilWriteInvalid=this._colorWriteInvalid=this._depthWriteInvalid=this._stencilTestInvalid=this._depthTestInvalid=this._polygonOffsetInvalid=
this._cullingInvalid=this._blendingInvalid=this._pipelineInvalid=!0;this._stateSetters=V}var P=M.prototype;P.setPipeline=function(V){if(this._pipelineInvalid||V!==this._pipeline)this.setBlending(V.blending),this.setCulling(V.culling),this.setPolygonOffset(V.polygonOffset),this.setDepthTest(V.depthTest),this.setStencilTest(V.stencilTest),this.setDepthWrite(V.depthWrite),this.setColorWrite(V.colorWrite),this.setStencilWrite(V.stencilWrite),this._pipeline=V;this._pipelineInvalid=!1};P.invalidateBlending=
function(){this._pipelineInvalid=this._blendingInvalid=!0};P.invalidateCulling=function(){this._pipelineInvalid=this._cullingInvalid=!0};P.invalidatePolygonOffset=function(){this._pipelineInvalid=this._polygonOffsetInvalid=!0};P.invalidateDepthTest=function(){this._pipelineInvalid=this._depthTestInvalid=!0};P.invalidateStencilTest=function(){this._pipelineInvalid=this._stencilTestInvalid=!0};P.invalidateDepthWrite=function(){this._pipelineInvalid=this._depthWriteInvalid=!0};P.invalidateColorWrite=
function(){this._pipelineInvalid=this._colorWriteInvalid=!0};P.invalidateStencilWrite=function(){this._pipelineInvalid=this._stencilTestInvalid=!0};P.setBlending=function(V){this._blending=this.setSubState(V,this._blending,this._blendingInvalid,this._stateSetters.setBlending);this._blendingInvalid=!1};P.setCulling=function(V){this._culling=this.setSubState(V,this._culling,this._cullingInvalid,this._stateSetters.setCulling);this._cullingInvalid=!1};P.setPolygonOffset=function(V){this._polygonOffset=
this.setSubState(V,this._polygonOffset,this._polygonOffsetInvalid,this._stateSetters.setPolygonOffset);this._polygonOffsetInvalid=!1};P.setDepthTest=function(V){this._depthTest=this.setSubState(V,this._depthTest,this._depthTestInvalid,this._stateSetters.setDepthTest);this._depthTestInvalid=!1};P.setStencilTest=function(V){this._stencilTest=this.setSubState(V,this._stencilTest,this._stencilTestInvalid,this._stateSetters.setStencilTest);this._stencilTestInvalid=!1};P.setDepthWrite=function(V){this._depthWrite=
this.setSubState(V,this._depthWrite,this._depthWriteInvalid,this._stateSetters.setDepthWrite);this._depthWriteInvalid=!1};P.setColorWrite=function(V){this._colorWrite=this.setSubState(V,this._colorWrite,this._colorWriteInvalid,this._stateSetters.setColorWrite);this._colorWriteInvalid=!1};P.setStencilWrite=function(V){this._stencilWrite=this.setSubState(V,this._stencilWrite,this._stencilWriteInvalid,this._stateSetters.setStencilWrite);this._stencilTestInvalid=!1};P.setSubState=function(V,H,R,Z){if(R||
V!==H)Z(V),this._pipelineInvalid=!0;return V};return M}();d.StateTracker=h;d.backFaceCullingParams=k;d.cullingParams=M=>2===M?k:1===M?e:null;d.defaultColorWriteParams={r:!0,g:!0,b:!0,a:!0};d.defaultDepthWriteParams={zNear:0,zFar:1};d.frontFaceCullingParams=e;d.makeBlending=m;d.makeColorWrite=g;d.makeCulling=v;d.makeDepthTest=C;d.makeDepthWrite=q;d.makePipelineState=function(M){return W.intern(M)};d.makePolygonOffset=B;d.makeStencilTest=A;d.makeStencilWrite=r;d.separateBlendingParams=function(M,P,
V,H,R=32774,Z=32774,N=[0,0,0,0]){return{srcRgb:M,srcAlpha:P,dstRgb:V,dstAlpha:H,opRgb:R,opAlpha:Z,color:{r:N[0],g:N[1],b:N[2],a:N[3]}}};d.simpleBlendingParams=function(M,P,V=32774,H=[0,0,0,0]){return{srcRgb:M,srcAlpha:M,dstRgb:P,dstAlpha:P,opRgb:V,opAlpha:V,color:{r:H[0],g:H[1],b:H[2],a:H[3]}}};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/webgl/Texture":function(){define(["../../chunks/_rollupPluginBabelHelpers","../../core/mathUtils","../../core/maybe","./enums","./capabilities/isWebGL2Context"],
function(d,m,v,B,C){let A=function(){function q(r,u,x=null){this._context=r;this.type="texture";this._glName=null;this._descriptor=void 0;this._wrapModeDirty=this._samplingModeDirty=!1;r.instanceCounter.increment(B.ResourceType.Texture,this);this._descriptor={target:3553,samplingMode:9729,wrapMode:10497,flipped:!1,hasMipmap:!1,isOpaque:!1,unpackAlignment:4,preMultiplyAlpha:!1,...u};this.setData(x)}var g=q.prototype;g.dispose=function(){this._context.gl&&this._glName&&(this._context.unbindTextureAllUnits(this),
this._context.gl.deleteTexture(this._glName),this._glName=null,this._context.instanceCounter.decrement(B.ResourceType.Texture,this))};g.release=function(){this.dispose()};g.resize=function(r,u){const x=this._descriptor;if(x.width!==r||x.height!==u)x.width=r,x.height=u,this.setData(null)};g.setData=function(r){if(this._context&&this._context.gl){var u=this._context.gl;this._glName||(this._glName=u.createTexture());void 0===r&&(r=null);null===r&&(this._descriptor.width=this._descriptor.width||4,this._descriptor.height=
this._descriptor.height||4);var x=this._context.bindTexture(this,q.TEXTURE_UNIT_FOR_UPDATES),y=this._descriptor;q._validateTexture(this._context,y);u.pixelStorei(u.UNPACK_ALIGNMENT,y.unpackAlignment);u.pixelStorei(u.UNPACK_FLIP_Y_WEBGL,y.flipped?1:0);u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,y.preMultiplyAlpha?1:0);var t=y.pixelFormat,l=y.internalFormat?y.internalFormat:t;if(r instanceof ImageData||r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement){var n=
r.width,c=r.height;r instanceof HTMLVideoElement&&(n=r.videoWidth,c=r.videoHeight);u.texImage2D(u.TEXTURE_2D,0,l,t,y.dataType,r);y.hasMipmap&&this.generateMipmap();void 0===y.width&&(y.width=n);void 0===y.height&&(y.height=c)}else{null!=y.width&&null!=y.height||console.error("Width and height must be specified!");u.DEPTH24_STENCIL8&&l===u.DEPTH_STENCIL&&(l=u.DEPTH24_STENCIL8);n=y.width;c=y.height;var a=r;if(v.isSome(a)&&"type"in a&&"compressed"===a.type)for(t=Math.round(Math.log(Math.max(n,c))/Math.LN2)+
1,y.hasMipmap=y.hasMipmap&&t===r.levels.length,t=0;;++t){u.compressedTexImage2D(u.TEXTURE_2D,t,l,n,c,0,r.levels[Math.min(t,r.levels.length-1)]);if(1===n&&1===c||!y.hasMipmap)break;n=Math.max(1,n>>1);c=Math.max(1,c>>1)}else if(v.isSome(r))u.texImage2D(u.TEXTURE_2D,0,l,n,c,0,t,y.dataType,r),y.hasMipmap&&this.generateMipmap();else for(r=0;;++r){u.texImage2D(u.TEXTURE_2D,r,l,n,c,0,t,y.dataType,null);if(1===n&&1===c||!y.hasMipmap)break;n=Math.max(1,n>>1);c=Math.max(1,c>>1)}}q._applySamplingMode(u,this._descriptor);
q._applyWrapMode(u,this._descriptor);q._applyAnisotropicFilteringParameters(this._context,this._descriptor);this._context.bindTexture(x,q.TEXTURE_UNIT_FOR_UPDATES)}};g.updateData=function(r,u,x,y,t,l){l||console.error("An attempt to use uninitialized data!");this._glName||console.error("An attempt to update uninitialized texture!");const n=this._context.gl,c=this._descriptor,a=this._context.bindTexture(this,q.TEXTURE_UNIT_FOR_UPDATES);(0>u||0>x||y>c.width||t>c.height||u+y>c.width||x+t>c.height)&&
console.error("An attempt to update out of bounds of the texture!");n.pixelStorei(n.UNPACK_ALIGNMENT,c.unpackAlignment);n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,c.flipped?1:0);n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,c.preMultiplyAlpha?1:0);l instanceof ImageData||l instanceof HTMLImageElement||l instanceof HTMLCanvasElement||l instanceof HTMLVideoElement?n.texSubImage2D(n.TEXTURE_2D,r,u,x,c.pixelFormat,c.dataType,l):n.texSubImage2D(n.TEXTURE_2D,r,u,x,y,t,c.pixelFormat,c.dataType,l);this._context.bindTexture(a,
q.TEXTURE_UNIT_FOR_UPDATES)};g.generateMipmap=function(){var r=this._descriptor;r.hasMipmap||(this._samplingModeDirty=r.hasMipmap=!0,q._validateTexture(this._context,r));9729===r.samplingMode?(this._samplingModeDirty=!0,r.samplingMode=9985):9728===r.samplingMode&&(this._samplingModeDirty=!0,r.samplingMode=9984);r=this._context.bindTexture(this,q.TEXTURE_UNIT_FOR_UPDATES);const u=this._context.gl;u.generateMipmap(u.TEXTURE_2D);this._context.bindTexture(r,q.TEXTURE_UNIT_FOR_UPDATES)};g.setSamplingMode=
function(r){r!==this._descriptor.samplingMode&&(this._descriptor.samplingMode=r,this._samplingModeDirty=!0)};g.setWrapMode=function(r){r!==this._descriptor.wrapMode&&(this._descriptor.wrapMode=r,q._validateTexture(this._context,this._descriptor),this._wrapModeDirty=!0)};g.applyChanges=function(){const r=this._context.gl,u=this._descriptor;this._samplingModeDirty&&(q._applySamplingMode(r,u),this._samplingModeDirty=!1);this._wrapModeDirty&&(q._applyWrapMode(r,u),this._wrapModeDirty=!1)};q._validateTexture=
function(r,u){(0>u.width||0>u.height)&&console.error("Negative dimension parameters are not allowed!");const x=m.isPowerOfTwo(u.width)&&m.isPowerOfTwo(u.height);C(r.gl)||x||("number"===typeof u.wrapMode?33071!==u.wrapMode&&console.error("Non-power-of-two textures must have a wrap mode of CLAMP_TO_EDGE!"):(33071!==u.wrapMode.s||33071!==u.wrapMode.t)&&console.error("Non-power-of-two textures must have a wrap mode of CLAMP_TO_EDGE!"),u.hasMipmap&&console.error("Mipmapping requires power-of-two textures!"))};
q._applySamplingMode=function(r,u){let x=u.samplingMode,y=u.samplingMode;if(9985===x||9987===x)x=9729,u.hasMipmap||(y=9729);else if(9984===x||9986===x)x=9728,u.hasMipmap||(y=9728);r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,x);r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,y)};q._applyWrapMode=function(r,u){"number"===typeof u.wrapMode?(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,u.wrapMode),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,u.wrapMode)):(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,
u.wrapMode.s),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,u.wrapMode.t))};q._applyAnisotropicFilteringParameters=function(r,u){var x;const y=r.capabilities.textureFilterAnisotropic;y&&(r=r.gl,r.texParameterf(r.TEXTURE_2D,y.TEXTURE_MAX_ANISOTROPY,null!=(x=u.maxAnisotropy)?x:1))};d._createClass(q,[{key:"glName",get:function(){return this._glName}},{key:"descriptor",get:function(){return this._descriptor}}]);return q}();A.TEXTURE_UNIT_FOR_UPDATES=0;return A})},"esri/views/webgl/capabilities/isWebGL2Context":function(){define(function(){return function(d){return window.WebGL2RenderingContext&&
d instanceof window.WebGL2RenderingContext}})},"esri/views/webgl/capabilities/load":function(){define("exports ./DisjointTimerQuery ./DrawBuffers ./Instancing ./isWebGL2Context ./LoseContext ./VertexArrayObjects".split(" "),function(d,m,v,B,C,A,q){function g(r,u,x,y,t){if(y&&C(r))return!0;if(u[x])return!1;for(const l of t)if(r.getExtension(l))return!0;return!1}d.loadCapabilities=function(r,u){const x=u.disabledExtensions||{},y=u.debugWebGLExtensions||{};let t,l,n,c,a,b,k,e,h,w,D,p=null,z=null,f=null,
E=null;return{get drawBuffers(){D||(D=v.load(r,x));return D},get instancing(){t||(t=B.load(r));return t},get vao(){l||(l=q.load(r,x));return l},get compressedTextureETC(){if(!n)if(x.compressedTextureETC)n=null;else{var F=r.getExtension("WEBGL_compressed_texture_etc");n=F?{COMPRESSED_R11_EAC:F.COMPRESSED_R11_EAC,COMPRESSED_SIGNED_R11_EAC:F.COMPRESSED_SIGNED_R11_EAC,COMPRESSED_RG11_EAC:F.COMPRESSED_RG11_EAC,COMPRESSED_SIGNED_RG11_EAC:F.COMPRESSED_SIGNED_RG11_EAC,COMPRESSED_RGB8_ETC2:F.COMPRESSED_RGB8_ETC2,
COMPRESSED_SRGB8_ETC2:F.COMPRESSED_SRGB8_ETC2,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:F.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:F.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2,COMPRESSED_RGBA8_ETC2_EAC:F.COMPRESSED_RGBA8_ETC2_EAC,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:F.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC}:null}return n},get compressedTextureS3TC(){if(!c)if(x.compressedTextureS3TC)c=null;else{var F=r.getExtension("WEBGL_compressed_texture_s3tc");c=F?{COMPRESSED_RGB_S3TC_DXT1:F.COMPRESSED_RGB_S3TC_DXT1_EXT,
COMPRESSED_RGBA_S3TC_DXT1:F.COMPRESSED_RGBA_S3TC_DXT1_EXT,COMPRESSED_RGBA_S3TC_DXT3:F.COMPRESSED_RGBA_S3TC_DXT3_EXT,COMPRESSED_RGBA_S3TC_DXT5:F.COMPRESSED_RGBA_S3TC_DXT5_EXT}:null}return c},get textureFilterAnisotropic(){if(!a)if(x.textureFilterAnisotropic)a=null;else{var F=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic");a=F?{MAX_TEXTURE_MAX_ANISOTROPY:F.MAX_TEXTURE_MAX_ANISOTROPY_EXT,TEXTURE_MAX_ANISOTROPY:F.TEXTURE_MAX_ANISOTROPY_EXT}:
null}return a},get disjointTimerQuery(){b||(b=m.createDisjointTimerQuery(r,x));return b},get textureFloat(){if(!k)if(C(r))k={textureFloat:!0,textureFloatLinear:!x.textureFloatLinear&&!!r.getExtension("OES_texture_float_linear"),textureHalfFloat:!0,textureHalfFloatLinear:!x.textureHalfFloatLinear&&!!r.getExtension("OES_texture_half_float_linear"),HALF_FLOAT:r.HALF_FLOAT};else if(r instanceof WebGLRenderingContext){const F=!x.textureHalfFloat&&r.getExtension("OES_texture_half_float");k={textureFloat:!x.textureFloat&&
!!r.getExtension("OES_texture_float"),textureFloatLinear:!x.textureFloatLinear&&!!r.getExtension("OES_texture_float_linear"),textureHalfFloat:!!F,textureHalfFloatLinear:!x.textureHalfFloatLinear&&!!r.getExtension("OES_texture_half_float_linear"),HALF_FLOAT:F?F.HALF_FLOAT_OES:void 0}}else k=null;return k},get colorBufferFloat(){if(!e)if(C(r)){var F=!x.colorBufferFloat&&r.getExtension("EXT_color_buffer_half_float"),L=!x.colorBufferFloat&&r.getExtension("EXT_color_buffer_float"),W=!x.colorBufferFloat&&
r.getExtension("EXT_float_blend");e=F||L||W?{textureFloat:!!L,textureHalfFloat:!!F,R16F:r.R16F,RG16F:r.RG16F,RGBA16F:r.RGBA16F,R32F:r.R32F,RG32F:r.RG32F,RGBA32F:r.RGBA32F,R11F_G11F_B10F:r.R11F_G11F_B10F,RGB16F:r.RGB16F}:null}else r instanceof WebGLRenderingContext?(F=!x.colorBufferFloat&&r.getExtension("EXT_color_buffer_half_float"),L=!x.colorBufferFloat&&r.getExtension("WEBGL_color_buffer_float"),W=!x.colorBufferFloat&&r.getExtension("EXT_float_blend"),e=F||L||W?{textureFloat:!!L,textureHalfFloat:!!F,
RGBA16F:F?F.RGBA16F_EXT:void 0,RGB16F:F?F.RGB16F_EXT:void 0,RGBA32F:L?L.RGBA32F_EXT:void 0}:null):e=null;return e},get blendMinMax(){if(!h)if(C(r))h={MIN:r.MIN,MAX:r.MAX};else if(x.blendMinMax)h=null;else{{const F=r.getExtension("EXT_blend_minmax");h=F?{MIN:F.MIN_EXT,MAX:F.MAX_EXT}:null}}return h},get depthTexture(){null===p&&(p=g(r,x,"depthTexture",!0,["WEBGL_depth_texture","MOZ_WEBGL_depth_texture","WEBKIT_WEBGL_depth_texture"]));return p},get standardDerivatives(){null===z&&(z=g(r,x,"standardDerivatives",
!0,["OES_standard_derivatives"]));return z},get shaderTextureLOD(){null===f&&(f=g(r,x,"shaderTextureLOD",!0,["EXT_shader_texture_lod"]));return f},get fragDepth(){null===E&&(E=g(r,x,"fragDepth",!0,["EXT_frag_depth"]));return E},get loseContext(){w||(w=A.load(r,y));return w},enable(F){return this[F]}}};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/webgl/capabilities/DisjointTimerQuery":function(){define(["exports","./isWebGL2Context"],function(d,m){let v=function(B,C,A,q,g,r,u,x){this.createQuery=
B;this.resultAvailable=C;this.getResult=A;this.disjoint=q;this.beginTimeElapsed=g;this.endTimeElapsed=r;this.createTimestamp=u;this.timestampBits=x};d.DisjointTimerQuery=v;d.createDisjointTimerQuery=function(B,C){if(C.disjointTimerQuery)return null;let A=B.getExtension("EXT_disjoint_timer_query_webgl2");return A&&m(B)?new v(()=>B.createQuery(),q=>B.getQueryParameter(q,B.QUERY_RESULT_AVAILABLE),q=>B.getQueryParameter(q,B.QUERY_RESULT),()=>B.getParameter(A.GPU_DISJOINT_EXT),q=>B.beginQuery(A.TIME_ELAPSED_EXT,
q),()=>B.endQuery(A.TIME_ELAPSED_EXT),q=>A.queryCounterEXT(q,A.TIMESTAMP_EXT),()=>B.getQuery(A.TIMESTAMP_EXT,A.QUERY_COUNTER_BITS_EXT)):(A=B.getExtension("EXT_disjoint_timer_query"))?new v(()=>A.createQueryEXT(),q=>A.getQueryObjectEXT(q,A.QUERY_RESULT_AVAILABLE_EXT),q=>A.getQueryObjectEXT(q,A.QUERY_RESULT_EXT),()=>B.getParameter(A.GPU_DISJOINT_EXT),q=>A.beginQueryEXT(A.TIME_ELAPSED_EXT,q),()=>A.endQueryEXT(A.TIME_ELAPSED_EXT),q=>A.queryCounterEXT(q,A.TIMESTAMP_EXT),()=>A.getQueryEXT(A.TIMESTAMP_EXT,
A.QUERY_COUNTER_BITS_EXT)):null};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/webgl/capabilities/DrawBuffers":function(){define(["exports","./isWebGL2Context"],function(d,m){d.load=function(v,B){return B.disjointTimerQuery?null:m(v)?{drawBuffers:v.drawBuffers.bind(v),MAX_DRAW_BUFFERS:v.MAX_DRAW_BUFFERS,MAX_COLOR_ATTACHMENTS:v.MAX_COLOR_ATTACHMENTS}:B.drawBuffers?null:(v=v.getExtension("WEBGL_draw_buffers"))?{drawBuffers:v.drawBuffersWEBGL.bind(v),MAX_DRAW_BUFFERS:v.MAX_DRAW_BUFFERS_WEBGL,
MAX_COLOR_ATTACHMENTS:v.MAX_COLOR_ATTACHMENTS_WEBGL}:null};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/webgl/capabilities/Instancing":function(){define(["exports","./isWebGL2Context"],function(d,m){d.load=function(v){return m(v)?{drawArraysInstanced:v.drawArraysInstanced.bind(v),drawElementsInstanced:v.drawElementsInstanced.bind(v),vertexAttribDivisor:v.vertexAttribDivisor.bind(v)}:(v=v.getExtension("ANGLE_instanced_arrays"))?{drawArraysInstanced:v.drawArraysInstancedANGLE.bind(v),
drawElementsInstanced:v.drawElementsInstancedANGLE.bind(v),vertexAttribDivisor:v.vertexAttribDivisorANGLE.bind(v)}:null};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/webgl/capabilities/LoseContext":function(){define(["exports"],function(d){d.load=function(m,v){const B=v.loseContext&&m.getExtension("WEBGL_lose_context");return B?{loseRenderingContext:()=>B.loseContext()}:null};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/webgl/capabilities/VertexArrayObjects":function(){define(["exports",
"./isWebGL2Context"],function(d,m){d.load=function(v,B){return m(v)?{createVertexArray:v.createVertexArray.bind(v),deleteVertexArray:v.deleteVertexArray.bind(v),bindVertexArray:v.bindVertexArray.bind(v)}:B.vao?null:(v=v.getExtension("OES_vertex_array_object")||v.getExtension("MOZ_OES_vertex_array_object")||v.getExtension("WEBKIT_OES_vertex_array_object"))?{createVertexArray:v.createVertexArrayOES.bind(v),deleteVertexArray:v.deleteVertexArrayOES.bind(v),bindVertexArray:v.bindVertexArrayOES.bind(v)}:
null};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/webgl/ShaderTranspiler":function(){define(["exports","./reservedWordsGLSL3"],function(d,m){function v(){function c(N){N.length&&L.push({type:l[z],data:N,position:P,line:W,column:M})}function a(){F=F.length?[]:F;if("/"===E&&"*"===f)return P=p+D-1,z=0,E=f,D+1;if("/"===E&&"/"===f)return P=p+D-1,z=1,E=f,D+1;if("#"===f)return z=2,P=p+D,D;if(/\s/.test(f))return z=9,P=p+D,D;V=/\d/.test(f);H=/[^\w_]/.test(f);P=p+D;z=V?4:H?3:9999;return D}
function b(){if(("\r"===f||"\n"===f)&&"\\"!==E)return c(F.join("")),z=999,D;F.push(f);E=f;return D+1}function k(){if("."===E&&/\d/.test(f))return z=5,D;if("/"===E&&"*"===f)return z=0,D;if("/"===E&&"/"===f)return z=1,D;if("."===f&&F.length){for(;e(F););z=5;return D}if(";"===f||")"===f||"("===f){if(F.length)for(;e(F););c(f);z=999;return D+1}var N=2===F.length&&"\x3d"!==f;if(/[\w_\d\s]/.test(f)||N){for(;e(F););z=999;return D}F.push(f);E=f;return D+1}function e(N){var S=0;do{var O=y.indexOf(N.slice(0,
N.length+S).join(""));var J=y[O];if(-1===O){if(0<S--+N.length)continue;J=N.slice(0,1).join("")}c(J);P+=J.length;F=F.slice(J.length);return F.length}while(1)}function h(){if("."===f||/[eE]/.test(f))return F.push(f),z=5,E=f,D+1;if("x"===f&&1===F.length&&"0"===F[0])return z=11,F.push(f),E=f,D+1;if(/[^\d]/.test(f))return c(F.join("")),z=999,D;F.push(f);E=f;return D+1}function w(){"f"===f&&(F.push(f),E=f,D+=1);if(/[eE]/.test(f)||"-"===f&&/[eE]/.test(E))return F.push(f),E=f,D+1;if(/[^\d]/.test(f))return c(F.join("")),
z=999,D;F.push(f);E=f;return D+1}var D=0,p=0,z=999,f,E,F=[],L=[],W=1,M=0,P=0,V=!1,H=!1,R="",Z;return function(N){L=[];if(null!==N){N=N.replace?N.replace(/\r\n/g,"\n"):N;D=0;R+=N;for(Z=R.length;f=R[D],D<Z;){N=D;switch(z){case 0:"/"===f&&"*"===E?(F.push(f),c(F.join("")),z=999):(F.push(f),E=f);D+=1;break;case 1:D=b();break;case 2:D=b();break;case 3:D=k();break;case 4:D=h();break;case 11:/[^a-fA-F0-9]/.test(f)?(c(F.join("")),z=999):(F.push(f),E=f,D+=1);break;case 5:D=w();break;case 9999:if(/[^\d\w_]/.test(f)){var S=
F.join("");z=-1<x.indexOf(S)?8:-1<t.indexOf(S)?7:6;c(F.join(""));z=999}else F.push(f),E=f,D+=1;break;case 9:/[^\s]/g.test(f)?(c(F.join("")),z=999):(F.push(f),E=f,D+=1);break;case 999:D=a()}if(N!==D)switch(R[N]){case "\n":M=0;++W;break;default:++M}}p+=D;R=R.slice(D);return L}F.length&&c(F.join(""));z=10;c("(eof)");return L}}function B(c){return c.map(a=>"eof"!==a.type?a.data:"").join("")}function C(c,a="100",b="300 es"){const k=/^\s*#version\s+([0-9]+(\s+[a-zA-Z]+)?)\s*/;for(const e of c)if("preprocessor"===
e.type){const h=k.exec(e.data);if(h){c=h[1].replace(/\s\s+/g," ");if(c===b)return c;if(c===a)return e.data="#version "+b,a;throw Error("unknown glsl version: "+c);}}c.splice(0,0,{type:"preprocessor",data:"#version "+b},{type:"whitespace",data:"\n"});return null}function A(c,a,b,k){k=k||b;for(const e of c)if("ident"===e.type&&e.data===b)return k in a?a[k]++:a[k]=0,A(c,a,k+"_"+a[k],k);return b}function q(c,a,b="afterVersion"){const k={data:"\n",type:"whitespace"},e=w=>w<c.length?/[^\r\n]$/.test(c[w].data):
!1;let h=function(w){let D=-1,p=0,z=-1;for(let E=0;E<w.length;E++){var f=w[E];"preprocessor"===f.type&&(f.data.match(/#(if|ifdef|ifndef)\s+.+/)?++p:f.data.match(/#endif\s*.*/)&&--p);("afterVersion"===b||"afterPrecision"===b)&&"preprocessor"===f.type&&/^#version/.test(f.data)&&(z=Math.max(z,E));if("afterPrecision"===b&&"keyword"===f.type&&"precision"===f.data){a:{for(f=E;f<w.length;f++){const F=w[f];if("operator"===F.type&&";"===F.data)break a}f=null}if(null===f)throw Error("precision statement not followed by any semicolons!");
z=Math.max(z,f)}D<z&&0===p&&(D=E)}return D+1}(c);e(h-1)&&c.splice(h++,0,k);for(const w of a)c.splice(h++,0,w);e(h-1)&&e(h)&&c.splice(h,0,k)}function g(c,a,b,k="lowp"){q(c,[{type:"keyword",data:"out"},{type:"whitespace",data:" "},{type:"keyword",data:k},{type:"whitespace",data:" "},{type:"keyword",data:b},{type:"whitespace",data:" "},{type:"ident",data:a},{type:"operator",data:";"}],"afterPrecision")}function r(c,a,b,k,e="lowp"){q(c,[{type:"keyword",data:"layout"},{type:"operator",data:"("},{type:"keyword",
data:"location"},{type:"whitespace",data:" "},{type:"operator",data:"\x3d"},{type:"whitespace",data:" "},{type:"integer",data:k.toString()},{type:"operator",data:")"},{type:"whitespace",data:" "},{type:"keyword",data:"out"},{type:"whitespace",data:" "},{type:"keyword",data:e},{type:"whitespace",data:" "},{type:"keyword",data:b},{type:"whitespace",data:" "},{type:"ident",data:a},{type:"operator",data:";"}],"afterPrecision")}var u={exports:{}};(function(c){(function(a){a=a();void 0!==a&&(c.exports=
a)})(function(){return"precision highp mediump lowp attribute const uniform varying break continue do for while if else in out inout float int void bool true false discard return mat2 mat3 mat4 vec2 vec3 vec4 ivec2 ivec3 ivec4 bvec2 bvec3 bvec4 sampler1D sampler2D sampler3D samplerCube sampler1DShadow sampler2DShadow struct asm class union enum typedef template this packed goto switch default inline noinline volatile public static extern external interface long short double half fixed unsigned input output hvec2 hvec3 hvec4 dvec2 dvec3 dvec4 fvec2 fvec3 fvec4 sampler2DRect sampler3DRect sampler2DRectShadow sizeof cast namespace using".split(" ")})})(u);
var x=u.exports;u={exports:{}};(function(c){(function(a){a=a();void 0!==a&&(c.exports=a)})(function(){"use strict;";return"\x3c\x3c\x3d \x3e\x3e\x3d ++ -- \x3c\x3c \x3e\x3e \x3c\x3d \x3e\x3d \x3d\x3d !\x3d \x26\x26 || +\x3d -\x3d *\x3d /\x3d %\x3d \x26\x3d ^^ ^\x3d |\x3d ( ) [ ] . ! ~ * / % + - \x3c \x3e \x26 ^ | ? : \x3d , ; { }".split(" ")})})(u);var y=u.exports;u={exports:{}};(function(c){(function(a){a=a();void 0!==a&&(c.exports=a)})(function(){return"abs acos all any asin atan ceil clamp cos cross dFdx dFdy degrees distance dot equal exp exp2 faceforward floor fract gl_BackColor gl_BackLightModelProduct gl_BackLightProduct gl_BackMaterial gl_BackSecondaryColor gl_ClipPlane gl_ClipVertex gl_Color gl_DepthRange gl_DepthRangeParameters gl_EyePlaneQ gl_EyePlaneR gl_EyePlaneS gl_EyePlaneT gl_Fog gl_FogCoord gl_FogFragCoord gl_FogParameters gl_FragColor gl_FragCoord gl_FragData gl_FragDepth gl_FragDepthEXT gl_FrontColor gl_FrontFacing gl_FrontLightModelProduct gl_FrontLightProduct gl_FrontMaterial gl_FrontSecondaryColor gl_LightModel gl_LightModelParameters gl_LightModelProducts gl_LightProducts gl_LightSource gl_LightSourceParameters gl_MaterialParameters gl_MaxClipPlanes gl_MaxCombinedTextureImageUnits gl_MaxDrawBuffers gl_MaxFragmentUniformComponents gl_MaxLights gl_MaxTextureCoords gl_MaxTextureImageUnits gl_MaxTextureUnits gl_MaxVaryingFloats gl_MaxVertexAttribs gl_MaxVertexTextureImageUnits gl_MaxVertexUniformComponents gl_ModelViewMatrix gl_ModelViewMatrixInverse gl_ModelViewMatrixInverseTranspose gl_ModelViewMatrixTranspose gl_ModelViewProjectionMatrix gl_ModelViewProjectionMatrixInverse gl_ModelViewProjectionMatrixInverseTranspose gl_ModelViewProjectionMatrixTranspose gl_MultiTexCoord0 gl_MultiTexCoord1 gl_MultiTexCoord2 gl_MultiTexCoord3 gl_MultiTexCoord4 gl_MultiTexCoord5 gl_MultiTexCoord6 gl_MultiTexCoord7 gl_Normal gl_NormalMatrix gl_NormalScale gl_ObjectPlaneQ gl_ObjectPlaneR gl_ObjectPlaneS gl_ObjectPlaneT gl_Point gl_PointCoord gl_PointParameters gl_PointSize gl_Position gl_ProjectionMatrix gl_ProjectionMatrixInverse gl_ProjectionMatrixInverseTranspose gl_ProjectionMatrixTranspose gl_SecondaryColor gl_TexCoord gl_TextureEnvColor gl_TextureMatrix gl_TextureMatrixInverse gl_TextureMatrixInverseTranspose gl_TextureMatrixTranspose gl_Vertex greaterThan greaterThanEqual inversesqrt length lessThan lessThanEqual log log2 matrixCompMult max min mix mod normalize not notEqual pow radians reflect refract sign sin smoothstep sqrt step tan texture2D texture2DLod texture2DProj texture2DProjLod textureCube textureCubeLod texture2DLodEXT texture2DProjLodEXT textureCubeLodEXT texture2DGradEXT texture2DProjGradEXT textureCubeGradEXT".split(" ")})})(u);
var t=u.exports,l="block-comment line-comment preprocessor operator integer float ident builtin keyword whitespace eof integer".split(" ");const n=["GL_OES_standard_derivatives","GL_EXT_frag_depth","GL_EXT_draw_buffers","GL_EXT_shader_texture_lod"];d.transpileShader=function(c,a){var b=v(),k=[];k=k.concat(b(c));c=k=k.concat(b(null));if("300 es"===C(c,"100","300 es"))throw Error("shader is already glsl 300 es");k=b=null;const e={},h={};for(let z=0;z<c.length;++z){const f=c[z];switch(f.type){case "keyword":35633===
a&&"attribute"===f.data?f.data="in":"varying"===f.data&&(f.data=35633===a?"out":"in");break;case "builtin":/^texture(2D|Cube)(Proj)?(Lod|Grad)?(EXT)?$/.test(f.data.trim())&&(f.data=f.data.replace(/(2D|Cube|EXT)/g,""));35632===a&&"gl_FragColor"===f.data&&(b||(b=A(c,e,"fragColor"),g(c,b,"vec4")),f.data=b);if(35632===a&&"gl_FragData"===f.data){{var w=void 0;let E=void 0;var D=c;var p=z+1;let F=-1;for(;p<D.length;p++){const L=D[p];if("operator"===L.type&&("["===L.data&&(E=p),"]"===L.data)){w=p;break}"integer"===
L.type&&(F=parseInt(L.data,10))}E&&w&&D.splice(E,w-E+1);D=F}w=A(c,e,"fragData");r(c,w,"vec4",D,"mediump");f.data=w}else 35632===a&&"gl_FragDepthEXT"===f.data&&(k||(k=A(c,e,"gl_FragDepth")),f.data=k);break;case "ident":if(0<=m.indexOf(f.data)){if(D=35633===a)a:{for(D=z-1;0<=D;D--)if(w=c[D],"whitespace"!==w.type&&"block-comment"!==w.type)if("keyword"===w.type){if("attribute"===w.data||"in"===w.data){D=!0;break a}}else break;D=!1}if(D)throw Error("attribute in vertex shader uses a name that is a reserved word in glsl 300 es");
f.data in h||(h[f.data]=A(c,e,f.data));f.data=h[f.data]}}}for(a=c.length-1;0<=a;--a)b=c[a],"preprocessor"===b.type&&((k=b.data.match(/#extension\s+(.*):/))&&k[1]&&0<=n.indexOf(k[1].trim())&&(k=c[a+1],c.splice(a,k&&"whitespace"===k.type?2:1)),(k=b.data.match(/#ifdef\s+(.*)/))&&k[1]&&0<=n.indexOf(k[1].trim())&&(b.data="#if 1"),(k=b.data.match(/#ifndef\s+(.*)/))&&k[1]&&0<=n.indexOf(k[1].trim())&&(b.data="#if 0"));return B(c)};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/webgl/reservedWordsGLSL3":function(){define(function(){return"layout centroid smooth case mat2x2 mat2x3 mat2x4 mat3x2 mat3x3 mat3x4 mat4x2 mat4x3 mat4x4 uint uvec2 uvec3 uvec4 samplerCubeShadow sampler2DArray sampler2DArrayShadow isampler2D isampler3D isamplerCube isampler2DArray usampler2D usampler3D usamplerCube usampler2DArray coherent restrict readonly writeonly resource atomic_uint noperspective patch sample subroutine common partition active filter image1D image2D image3D imageCube iimage1D iimage2D iimage3D iimageCube uimage1D uimage2D uimage3D uimageCube image1DArray image2DArray iimage1DArray iimage2DArray uimage1DArray uimage2DArray image1DShadow image2DShadow image1DArrayShadow image2DArrayShadow imageBuffer iimageBuffer uimageBuffer sampler1DArray sampler1DArrayShadow isampler1D isampler1DArray usampler1D usampler1DArray isampler2DRect usampler2DRect samplerBuffer isamplerBuffer usamplerBuffer sampler2DMS isampler2DMS usampler2DMS sampler2DMSArray isampler2DMSArray usampler2DMSArray trunc round roundEven isnan isinf floatBitsToInt floatBitsToUint intBitsToFloat uintBitsToFloat packSnorm2x16 unpackSnorm2x16 packUnorm2x16 unpackUnorm2x16 packHalf2x16 unpackHalf2x16 outerProduct transpose determinant inverse texture textureSize textureProj textureLod textureOffset texelFetch texelFetchOffset textureProjOffset textureLodOffset textureProjLod textureProjLodOffset textureGrad textureGradOffset textureProjGrad textureProjGradOffset".split(" ")})},
"esri/chunks/LaserlinePath.glsl":function(){define(["exports","../views/3d/webgl-engine/core/shaderLibrary/Laserline.glsl","../views/3d/webgl-engine/core/shaderModules/interfaces","../views/3d/webgl-engine/core/shaderModules/ShaderBuilder"],function(d,m,v,B){function C(q){const g=new B.ShaderBuilder;g.include(m.Laserline,q);g.vertex.uniforms.add("uModelViewMatrix","mat4");g.vertex.uniforms.add("uProjectionMatrix","mat4");g.attributes.add("start","vec3");g.attributes.add("end","vec3");g.attributes.add("up",
"vec3");g.attributes.add("extrude","vec2");g.varyings.add("uv","vec2");g.varyings.add("vViewStart","vec3");g.varyings.add("vViewEnd","vec3");g.varyings.add("vViewPlane","vec4");g.vertex.uniforms.add("glowWidth","float");g.vertex.uniforms.add("pixelToNDC","vec2");g.vertex.code.add(v.glsl`void main() {
vec3 pos = mix(start, end, extrude.x);
vec4 viewPos = uModelViewMatrix * vec4(pos, 1);
vec4 projPos = uProjectionMatrix * viewPos;
vec2 ndcPos = projPos.xy / projPos.w;
vec3 viewUp = (uModelViewMatrix * vec4(extrude.y * up, 0)).xyz;
vec4 projPosUp = uProjectionMatrix * vec4(viewPos.xyz + viewUp, 1);
vec2 projExtrudeDir = normalize(projPosUp.xy / projPosUp.w - ndcPos);
vec2 lxy = abs(sign(projExtrudeDir) - ndcPos);
ndcPos += length(lxy) * projExtrudeDir;
vec3 worldPlaneNormal = normalize(cross(up, normalize(end - start)));
vec3 viewPlaneNormal = (uModelViewMatrix * vec4(worldPlaneNormal, 0)).xyz;
vViewStart = (uModelViewMatrix * vec4(start, 1)).xyz;
vViewEnd = (uModelViewMatrix * vec4(end, 1)).xyz;
vViewPlane = vec4(viewPlaneNormal, -dot(viewPlaneNormal, vViewStart));
float xPaddingPixels = sign(dot(viewPlaneNormal, viewPos.xyz)) * (extrude.x * 2.0 - 1.0) * glowWidth;
ndcPos.x += xPaddingPixels * pixelToNDC.x;
uv = ndcPos * 0.5 + 0.5;
gl_Position = vec4(ndcPos, 0, 1);
}`);g.fragment.uniforms.add("globalAlpha","float");g.fragment.uniforms.add("perScreenPixelRatio","float");g.fragment.code.add(v.glsl`float planeDistancePixels(vec4 plane, vec3 pos, vec3 start, vec3 end) {
vec3 origin = mix(start, end, 0.5);
vec3 basis = end - origin;
vec3 posAtOrigin = pos - origin;
float x = dot(normalize(basis), posAtOrigin);
float y = dot(plane.xyz, posAtOrigin);
float dx = max(abs(x) - length(basis), 0.0);
float dy = y;
float dist = length(vec2(dx, dy));
float width = fwidth(y);
float maxPixelDistance = length(pos) * perScreenPixelRatio * 2.0;
float pixelDist = dist / min(width, maxPixelDistance);
return abs(pixelDist);
}
void main() {
vec3 pos;
vec3 normal;
float depthDiscontinuityAlpha;
if (!laserlineReconstructFromDepth(pos, normal, depthDiscontinuityAlpha)) {
discard;
}
float distance = planeDistancePixels(vViewPlane, pos, vViewStart, vViewEnd);
vec4 color = laserlineProfile(distance);
float alpha = 1.0 - smoothstep(0.995, 0.999, abs(dot(normal, vViewPlane.xyz)));
gl_FragColor = laserlineOutput(color * alpha * depthDiscontinuityAlpha);
}`);return g}var A=Object.freeze({__proto__:null,build:C});d.LaserlinePathShader=A;d.build=C})},"esri/views/3d/webgl-engine/core/shaderLibrary/Laserline.glsl":function(){define(["exports","./output/ReadLinearDepth.glsl","./util/CameraSpace.glsl","../shaderModules/interfaces"],function(d,m,v,B){d.Laserline=function(C,A){C.extensions.add("GL_OES_standard_derivatives");C.fragment.include(m.ReadLinearDepth);C.include(v.CameraSpace);C.fragment.uniforms.add("glowColor","vec3");C.fragment.uniforms.add("glowWidth",
"float");C.fragment.uniforms.add("glowFalloff","float");C.fragment.uniforms.add("innerColor","vec3");C.fragment.uniforms.add("innerWidth","float");C.fragment.uniforms.add("depthMap","sampler2D");C.fragment.uniforms.add("nearFar","vec2");C.fragment.uniforms.add("frameColor","sampler2D");A.contrastControlEnabled&&C.fragment.uniforms.add("globalAlphaContrastBoost","float");C.fragment.code.add(B.glsl`vec4 blendPremultiplied(vec4 source, vec4 dest) {
float oneMinusSourceAlpha = 1.0 - source.a;
return vec4(
source.rgb + dest.rgb * oneMinusSourceAlpha,
source.a + dest.a * oneMinusSourceAlpha
);
}`);C.fragment.code.add(B.glsl`vec4 premultipliedColor(vec3 rgb, float alpha) {
return vec4(rgb * alpha, alpha);
}`);C.fragment.code.add(B.glsl`vec4 laserlineProfile(float dist) {
if (dist > glowWidth) {
return vec4(0.0);
}
float innerAlpha = (1.0 - smoothstep(0.0, innerWidth, dist));
float glowAlpha = pow(max(0.0, 1.0 - dist / glowWidth), glowFalloff);
return blendPremultiplied(
premultipliedColor(innerColor, innerAlpha),
premultipliedColor(glowColor, glowAlpha)
);
}`);C.fragment.code.add(B.glsl`bool laserlineReconstructFromDepth(out vec3 pos, out vec3 normal, out float depthDiscontinuityAlpha) {
float depth = linearDepthFromTexture(depthMap, uv, nearFar);
if (-depth == nearFar[0]) {
return false;
}
pos = reconstructPosition(gl_FragCoord.xy, depth);
normal = normalize(cross(dFdx(pos), dFdy(pos)));
float ddepth = fwidth(depth);
depthDiscontinuityAlpha = 1.0 - smoothstep(0.0, 0.01, -ddepth / depth);
return true;
}`);A.contrastControlEnabled?C.fragment.code.add(B.glsl`float rgbToLuminance(vec3 color) {
return dot(vec3(0.2126, 0.7152, 0.0722), color);
}
vec4 laserlineOutput(vec4 color) {
float backgroundLuminance = rgbToLuminance(texture2D(frameColor, uv).rgb);
float alpha = clamp(globalAlpha * max(backgroundLuminance * globalAlphaContrastBoost, 1.0), 0.0, 1.0);
return color * alpha;
}`):C.fragment.code.add(B.glsl`vec4 laserlineOutput(vec4 color) {
return color * globalAlpha;
}`)};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/core/shaderLibrary/output/ReadLinearDepth.glsl":function(){define(["exports","../util/RgbaFloatEncoding.glsl","../../shaderModules/interfaces"],function(d,m,v){d.ReadLinearDepth=function(B){B.include(m.RgbaFloatEncoding);B.code.add(v.glsl`float linearDepthFromFloat(float depth, vec2 nearFar) {
return -(depth * (nearFar[1] - nearFar[0]) + nearFar[0]);
}
float linearDepthFromTexture(sampler2D depthTex, vec2 uv, vec2 nearFar) {
return linearDepthFromFloat(rgba2float(texture2D(depthTex, uv)), nearFar);
}`)};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/core/shaderLibrary/util/RgbaFloatEncoding.glsl":function(){define(["exports","../../shaderModules/interfaces"],function(d,m){d.RgbaFloatEncoding=function(v){v.code.add(m.glsl`const float MAX_RGBA_FLOAT =
255.0 / 256.0 +
255.0 / 256.0 / 256.0 +
255.0 / 256.0 / 256.0 / 256.0 +
255.0 / 256.0 / 256.0 / 256.0 / 256.0;
const vec4 FIXED_POINT_FACTORS = vec4(1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0);
vec4 float2rgba(const float value) {
float valueInValidDomain = clamp(value, 0.0, MAX_RGBA_FLOAT);
vec4 fixedPointU8 = floor(fract(valueInValidDomain * FIXED_POINT_FACTORS) * 256.0);
const float toU8AsFloat = 1.0 / 255.0;
return fixedPointU8 * toU8AsFloat;
}
const vec4 RGBA_2_FLOAT_FACTORS = vec4(
255.0 / (256.0),
255.0 / (256.0 * 256.0),
255.0 / (256.0 * 256.0 * 256.0),
255.0 / (256.0 * 256.0 * 256.0 * 256.0)
);
float rgba2float(vec4 rgba) {
return dot(rgba, RGBA_2_FLOAT_FACTORS);
}`)};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/core/shaderModules/interfaces":function(){define(["exports"],function(d){function m(v,...B){let C="";for(let A=0;A<B.length;A++)C+=v[A]+B[A];return C+=v[v.length-1]}(function(v){v.int=function(B){return Math.round(B).toString()};v.float=function(B){return B.toPrecision(8)}})(m||(m={}));d.glsl=m;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/core/shaderLibrary/util/CameraSpace.glsl":function(){define(["exports",
"../../shaderModules/interfaces"],function(d,m){d.CameraSpace=function(v){v.fragment.uniforms.add("projInfo","vec4");v.fragment.uniforms.add("zScale","vec2");v.fragment.code.add(m.glsl`vec3 reconstructPosition(vec2 fragCoord, float depth) {
return vec3((fragCoord * projInfo.xy + projInfo.zw) * (zScale.x * depth + zScale.y), depth);
}`)};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/core/shaderModules/ShaderBuilder":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","../../../../../core/Logger"],function(d,m,v){const B=v.getLogger("esri.views.3d.webgl-engine.core.shaderModules.shaderBuilder");v=function(){function t(){this.includedModules=new Map}t.prototype.include=function(l,n){this.includedModules.has(l)?this.includedModules.get(l)!==n&&B.error("Trying to include shader module multiple times with different sets of options."):
(this.includedModules.set(l,n),l(this.builder,n))};return t}();let C=function(t){function l(){var n=t.apply(this,arguments)||this;n.vertex=new g;n.fragment=new g;n.attributes=new r;n.varyings=new u;n.extensions=new x;n.constants=new y;return n}m._inheritsLoose(l,t);l.prototype.generateSource=function(n){const c=this.extensions.generateSource(n),a=this.attributes.generateSource(n),b=this.varyings.generateSource();var k="vertex"===n?this.vertex:this.fragment;const e=k.uniforms.generateSource(),h=k.code.generateSource();
n="vertex"===n?"precision highp float;\nprecision highp sampler2D;":"#ifdef GL_FRAGMENT_PRECISION_HIGH\n  precision highp float;\n  precision highp sampler2D;\n#else\n  precision mediump float;\n  precision mediump sampler2D;\n#endif";k=this.constants.generateSource().concat(k.constants.generateSource());return`
${c.join("\n")}

${n}

${k.join("\n")}

${e.join("\n")}

${a.join("\n")}

${b.join("\n")}

${h.join("\n")}`};m._createClass(l,[{key:"fragmentUniforms",get:function(){return this.fragment.uniforms}},{key:"builder",get:function(){return this}}]);return l}(v),A=function(){function t(){this._entries=new Map}var l=t.prototype;l.add=function(n,c,a){this._entries.set(`${n}_${c}_${a}`,{name:n,type:c,arraySize:a});return this};l.generateSource=function(){return Array.from(this._entries.values()).map(n=>{var c=n.arraySize;return`uniform ${n.type} ${n.name}${c?`[${c}]`:""};`})};m._createClass(t,[{key:"entries",
get:function(){return Array.from(this._entries.values())}}]);return t}(),q=function(){function t(){this._entries=[]}var l=t.prototype;l.add=function(n){this._entries.push(n)};l.generateSource=function(){return this._entries};return t}(),g=function(t){function l(){var n=t.apply(this,arguments)||this;n.uniforms=new A;n.code=new q;n.constants=new y;return n}m._inheritsLoose(l,t);m._createClass(l,[{key:"builder",get:function(){return this}}]);return l}(v),r=function(){function t(){this._entries=[]}var l=
t.prototype;l.add=function(n,c){this._entries.push([n,c])};l.generateSource=function(n){return"fragment"===n?[]:this._entries.map(c=>`attribute ${c[1]} ${c[0]};`)};return t}(),u=function(){function t(){this._entries=[]}var l=t.prototype;l.add=function(n,c){this._entries.push([n,c])};l.generateSource=function(){return this._entries.map(n=>`varying ${n[1]} ${n[0]};`)};return t}(),x=function(){function t(){this._entries=new Set}var l=t.prototype;l.add=function(n){this._entries.add(n)};l.generateSource=
function(n){const c="vertex"===n?t.ALLOWLIST_VERTEX:t.ALLOWLIST_FRAGMENT;return Array.from(this._entries).filter(a=>c.includes(a)).map(a=>`#extension ${a} : enable`)};return t}();x.ALLOWLIST_FRAGMENT=["GL_EXT_shader_texture_lod","GL_OES_standard_derivatives"];x.ALLOWLIST_VERTEX=[];let y=function(){function t(){this._entries=[]}var l=t.prototype;l.add=function(n,c,a){let b="ERROR_CONSTRUCTOR_STRING";switch(c){case "float":b=t.numberToFloatStr(a);break;case "int":b=t.numberToIntStr(a);break;case "bool":b=
a.toString();break;case "vec2":b=`vec2(${t.numberToFloatStr(a[0])},\
                            ${t.numberToFloatStr(a[1])})`;break;case "vec3":b=`vec3(${t.numberToFloatStr(a[0])},\
                            ${t.numberToFloatStr(a[1])},\
                            ${t.numberToFloatStr(a[2])})`;break;case "vec4":b=`vec4(${t.numberToFloatStr(a[0])},\
                            ${t.numberToFloatStr(a[1])},\
                            ${t.numberToFloatStr(a[2])},\
                            ${t.numberToFloatStr(a[3])})`;break;case "ivec2":b=`ivec2(${t.numberToIntStr(a[0])},\
                             ${t.numberToIntStr(a[1])})`;break;case "ivec3":b=`ivec3(${t.numberToIntStr(a[0])},\
                             ${t.numberToIntStr(a[1])},\
                             ${t.numberToIntStr(a[2])})`;break;case "ivec4":b=`ivec4(${t.numberToIntStr(a[0])},\
                             ${t.numberToIntStr(a[1])},\
                             ${t.numberToIntStr(a[2])},\
                             ${t.numberToIntStr(a[3])})`;break;case "mat2":case "mat3":case "mat4":b=`${c}(${Array.prototype.map.call(a,k=>t.numberToFloatStr(k)).join(", ")})`}this._entries.push(`const ${c} ${n} = ${b};`);return this};t.numberToIntStr=function(n){return n.toFixed(0)};t.numberToFloatStr=function(n){return Number.isInteger(n)?n.toFixed(1):n.toString()};l.generateSource=function(){return Array.from(this._entries)};return t}();d.Code=q;d.Includes=v;d.ShaderBuilder=C;d.Stage=g;Object.defineProperty(d,
"__esModule",{value:!0})})},"esri/views/webgl/BufferObject":function(){define(["../../chunks/_rollupPluginBabelHelpers","../../core/Logger","../../core/typedArrayUtil","./checkWebGLError","./enums"],function(d,m,v,B,C){const A=m.getLogger("esri.views.webgl.BufferObject");return function(){function q(r,u,x,y,t){this._context=r;this.bufferType=u;this.usage=x;this._glName=null;this._size=-1;this._indexType=void 0;r.instanceCounter.increment(C.ResourceType.Buffer,this);this._glName=this._context.gl.createBuffer();
B.checkWebGLError(this._context.gl);y&&this.setData(y,t)}q.createIndex=function(r,u,x,y){return new q(r,34963,u,x,y)};q.createVertex=function(r,u,x){return new q(r,34962,u,x)};var g=q.prototype;g.dispose=function(){var r;null!=(r=this._context)&&r.gl?(this._glName&&(this._context.gl.deleteBuffer(this._glName),this._glName=null),this._context.instanceCounter.decrement(C.ResourceType.Buffer,this),this._context=null):this._glName&&A.warn("Leaked WebGL buffer object")};g.setData=function(r,u){if(r){if("number"===
typeof r){if(0>r&&A.error("Buffer size cannot be negative!"),34963===this.bufferType&&u)switch(this._indexType=u,this._size=r,u){case 5123:r*=2;break;case 5125:r*=4}}else u=r.byteLength,v.isUint16Array(r)&&(u/=2,this._indexType=5123),v.isUint32Array(r)&&(u/=4,this._indexType=5125),this._size=u;u=this._context.getBoundVAO();this._context.bindVAO(null);this._context.bindBuffer(this);var x=this._context.gl;x.bufferData(this.bufferType,r,this.usage);B.checkWebGLError(x);this._context.bindVAO(u)}};g.setSubData=
function(r,u=0,x=0,y=r.byteLength){if(r){(0>u||u>=this._size)&&A.error("offset is out of range!");var t=u,l=x,n=y,c=r.byteLength;v.isUint16Array(r)&&(c/=2,t*=2,l*=2,n*=2);v.isUint32Array(r)&&(c/=4,t*=4,l*=4,n*=4);void 0===y&&(y=c-1);x>=y&&A.error("end must be bigger than start!");u+x-y>this._size&&A.error("An attempt to write beyond the end of the buffer!");u=this._context.getBoundVAO();this._context.bindVAO(null);this._context.bindBuffer(this);x=this._context.gl;y=ArrayBuffer.isView(r)?r.buffer:
r;r=0===l&&n===r.byteLength?y:y.slice(l,n);x.bufferSubData(this.bufferType,t,r);B.checkWebGLError(x);this._context.bindVAO(u)}};d._createClass(q,[{key:"glName",get:function(){return this._glName}},{key:"size",get:function(){return this._size}},{key:"indexType",get:function(){return this._indexType}},{key:"byteSize",get:function(){return 34962===this.bufferType?this._size:5125===this._indexType?4*this._size:2*this._size}}]);return q}()})},"esri/views/webgl/checkWebGLError":function(){define(["exports",
"../../core/Error","../../core/Logger","./RenderingContext"],function(d,m,v,B){function C(q,g){switch(g){case q.INVALID_ENUM:return"Invalid Enum. An unacceptable value has been specified for an enumerated argument.";case q.INVALID_VALUE:return"Invalid Value. A numeric argument is out of range.";case q.INVALID_OPERATION:return"Invalid Operation. The specified command is not allowed for the current state.";case q.INVALID_FRAMEBUFFER_OPERATION:return"Invalid Framebuffer operation. The currently bound framebuffer is not framebuffer complete when trying to render to or to read from it.";
case q.OUT_OF_MEMORY:return"Out of memory. Not enough memory is left to execute the command.";case q.CONTEXT_LOST_WEBGL:return"WebGL context has been lost";default:return"Unknown error"}}const A=v.getLogger("esri/views/webgl");d.checkWebGLError=function(q){if(B.webglDebugEnabled()){const g=q.getError();g&&(q=C(q,g),A.error(new m("webgl-error","WebGL error occured",{message:q,stack:Error().stack})))}};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/webgl/VertexArrayObject":function(){define(["../../chunks/_rollupPluginBabelHelpers",
"../../core/Logger","../../core/maybe","./enums","./Util"],function(d,m,v,B,C){const A=m.getLogger("esri.views.webgl.VertexArrayObject");return function(){function q(r,u,x,y,t=null){this._context=r;this._locations=u;this._layout=x;this._buffers=y;this._indexBuffer=t;this._glName=null;this._initialized=!1;r.instanceCounter.increment(B.ResourceType.VAO,this)}var g=q.prototype;g.dispose=function(r=!0){if(this._context){if(this._glName){var u,x;const y=null==(u=this._context)?void 0:null==(x=u.capabilities)?
void 0:x.vao;y?(y.deleteVertexArray(this._glName),this._glName=null):A.warn("Leaked WebGL VAO")}this._context.getBoundVAO()===this&&this._context.bindVAO(null);if(r){for(const y in this._buffers)this._buffers[y].dispose(),delete this._buffers[y];this._indexBuffer=v.disposeMaybe(this._indexBuffer)}this._context.instanceCounter.decrement(B.ResourceType.VAO,this);this._context=null}else(this._glName||r&&0<Object.getOwnPropertyNames(this._buffers).length)&&A.warn("Leaked WebGL VAO")};g.initialize=function(){if(!this._initialized){var r=
this._context.capabilities.vao;if(r){const u=r.createVertexArray();r.bindVertexArray(u);this._bindLayout();r.bindVertexArray(null);this._glName=u}this._initialized=!0}};g.bind=function(){this.initialize();const r=this._context.capabilities.vao;r?r.bindVertexArray(this.glName):(this._context.bindVAO(null),this._bindLayout())};g._bindLayout=function(){const {_buffers:r,_layout:u,_indexBuffer:x}=this;r||A.error("Vertex buffer dictionary is empty!");const y=this._context.gl;for(const t in r){const l=
r[t];l||A.error("Vertex buffer is uninitialized!");const n=u[t];n||A.error("Vertex element descriptor is empty!");C.bindVertexBufferLayout(this._context,this._locations,l,n)}v.isSome(x)&&(this._context.capabilities.vao?y.bindBuffer(y.ELEMENT_ARRAY_BUFFER,x.glName):this._context.bindBuffer(x))};g.unbind=function(){this.initialize();const r=this._context.capabilities.vao;r?r.bindVertexArray(null):this._unbindLayout()};g._unbindLayout=function(){const {_buffers:r,_layout:u}=this;r||A.error("Vertex buffer dictionary is empty!");
for(const x in r){const y=r[x];y||A.error("Vertex buffer is uninitialized!");C.unbindVertexBufferLayout(this._context,this._locations,y,u[x])}v.isSome(this._indexBuffer)&&this._context.unbindBuffer(this._indexBuffer.bufferType)};d._createClass(q,[{key:"glName",get:function(){return this._glName}},{key:"vertexBuffers",get:function(){return this._buffers}},{key:"indexBuffer",get:function(){return this._indexBuffer}},{key:"size",get:function(){return Object.keys(this._buffers).reduce((r,u)=>r+this._buffers[u].size,
v.isSome(this._indexBuffer)?this._indexBuffer.size:0)}},{key:"layout",get:function(){return this._layout}},{key:"locations",get:function(){return this._locations}}]);return q}()})},"esri/views/webgl/Util":function(){define(["exports","../../core/has","../../core/maybe"],function(d,m,v){function B(q){return q[0].stride}function C(q){switch(q){case 6406:case 6409:case 36168:return 1;case 6410:case 32854:case 33325:case 32854:case 33189:return 2;case 6407:case 6402:return 3;case 6408:case 34041:case 33326:case 35898:case 33327:case 34041:return 4;
case 33328:case 34842:return 8;case 34836:return 16;case 33776:case 33777:return.5;case 33778:case 33779:return 1;case 37488:case 37489:case 37492:case 37493:case 37494:case 37495:return.5;case 37490:case 37491:case 37496:case 37497:return 1}return 0}function A(q){if(v.isNone(q))return 0;if("descriptor"in q)return q.glName?A(q.descriptor):0;const g=q.internalFormat||"pixelFormat"in q&&q.pixelFormat;if(!g)return 0;const r="hasMipmap"in q&&q.hasMipmap?1.3:1;q=q.width*q.height;return C(g)*q*r}d.bindVertexBufferLayout=
function(q,g,r,u,x){const y=q.gl,t=q.capabilities.instancing;q.bindBuffer(r);for(const l of u)if(q=g.get(l.name),void 0===q&&console.error(`There is no location for vertex attribute '${l.name}' defined.`),l.baseInstance&&!l.divisor&&console.error(`Vertex attribute '${l.name}' uses baseInstanceOffset without divisor.`),r=(x?x:0+l.baseInstance?l.baseInstance:0)*l.stride,4>=l.count)y.vertexAttribPointer(q,l.count,l.type,l.normalized,l.stride,l.offset+r),y.enableVertexAttribArray(q),0<l.divisor&&t&&t.vertexAttribDivisor(q,
l.divisor);else if(9===l.count)for(u=0;3>u;u++)y.vertexAttribPointer(q+u,3,l.type,l.normalized,l.stride,l.offset+12*u+r),y.enableVertexAttribArray(q+u),0<l.divisor&&t&&t.vertexAttribDivisor(q+u,l.divisor);else if(16===l.count)for(u=0;4>u;u++)y.vertexAttribPointer(q+u,4,l.type,l.normalized,l.stride,l.offset+16*u+r),y.enableVertexAttribArray(q+u),0<l.divisor&&t&&t.vertexAttribDivisor(q+u,l.divisor);else console.error("Unsupported vertex attribute element count: "+l.count)};d.getBytesPerElementFormat=
C;d.getGpuMemoryUsage=A;d.getStride=B;d.unbindVertexBufferLayout=function(q,g,r,u){const x=q.gl,y=q.capabilities.instancing;q.bindBuffer(r);for(const t of u)if(r=g.get(t.name),4>=t.count)x.disableVertexAttribArray(r),t.divisor&&0<t.divisor&&y&&y.vertexAttribDivisor(r,0);else if(9===t.count)for(u=0;3>u;u++)x.disableVertexAttribArray(r+u),t.divisor&&0<t.divisor&&y&&y.vertexAttribDivisor(r+u,0);else if(16===t.count)for(u=0;4>u;u++)x.disableVertexAttribArray(r+u),t.divisor&&0<t.divisor&&y&&y.vertexAttribDivisor(r+
u,0);else console.error("Unsupported vertex attribute element count: "+t.count);q.unbindBuffer(34962)};d.vertexCount=function(q,g){return q.vertexBuffers[g].size/B(q.layout[g])};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/glUtil3D":function(){define("exports ./DefaultVertexAttributeLocations ./DefaultVertexBufferLayouts ../../../webgl/BufferObject ../../../webgl/Texture ../../../webgl/VertexArrayObject".split(" "),function(d,m,v,B,C,A){d.createColorTexture=
function(q,g,r=4){const u=new Uint8Array(r*r*4);for(let x=0;x<u.length;x+=4)u[x+0]=255*g[0],u[x+1]=255*g[1],u[x+2]=255*g[2],u[x+3]=255*g[3];return new C(q,{target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728,width:r,height:r},u)};d.createEmptyDepthTexture=function(q){return new C(q,{target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728,width:1,height:1},new Uint8Array([255,255,255,255]))};d.createEmptyTexture=function(q,g=4){return new C(q,{target:3553,pixelFormat:6408,dataType:5121,
samplingMode:9728,width:g,height:g})};d.createQuadVAO=function(q,g=v.Pos2,r=m.Default3D,u=-1,x=1){let y=null;switch(g){case v.Pos2Tex:y=new Float32Array([u,u,0,0,x,u,1,0,u,x,0,1,x,x,1,1]);break;default:y=new Float32Array([u,u,x,u,u,x,x,x])}return new A(q,r,{geometry:g},{geometry:B.createVertex(q,35044,y)})};d.createScreenSizeTriangleVAO=function(q,g=v.Pos2,r=m.Default3D){const u=new Float32Array([-1,-1,3,-1,-1,3]);return new A(q,r,{geometry:g},{geometry:B.createVertex(q,35044,u)})};Object.defineProperty(d,
"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/DefaultVertexAttributeLocations":function(){define(["exports"],function(d){const m=new Map([["position",0],["normal",1],["uv0",2],["color",3],["size",4],["tangent",4],["auxpos1",5],["symbolColor",5],["auxpos2",6],["featureAttribute",6],["instanceFeatureAttribute",6],["instanceColor",7],["model",8],["modelNormal",12],["modelOriginHi",11],["modelOriginLo",15]]);d.Default3D=m;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/DefaultVertexBufferLayouts":function(){define(["exports"],
function(d){d.Pos2=[{name:"position",count:2,type:5126,offset:0,stride:8,normalized:!1}];d.Pos2Tex=[{name:"position",count:2,type:5126,offset:0,stride:16,normalized:!1},{name:"uv0",count:2,type:5126,offset:8,stride:16,normalized:!1}];d.Pos3=[{name:"position",count:3,type:5126,offset:0,stride:12,normalized:!1}];d.Pos3Col=[{name:"position",count:3,type:5126,offset:0,stride:16,normalized:!1},{name:"color",count:4,type:5121,offset:12,stride:16,normalized:!1}];d.Pos3NormalTex=[{name:"position",count:3,
type:5126,offset:0,stride:32,normalized:!1},{name:"normal",count:3,type:5126,offset:12,stride:32,normalized:!1},{name:"uv0",count:2,type:5126,offset:24,stride:32,normalized:!1}];d.Pos3Tex=[{name:"position",count:3,type:5126,offset:0,stride:20,normalized:!1},{name:"uv0",count:2,type:5126,offset:12,stride:20,normalized:!1}];Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/Util":function(){define("exports ../../../../core/mathUtils ../../../../chunks/mat4 ../../../../chunks/vec2 ../../../../chunks/vec2f64 ../../../../chunks/vec3f64 ../../../../chunks/vec4 ../../../../chunks/vec4f64".split(" "),
function(d,m,v,B,C,A,q,g){function r(b,k){if(!b)throw k=k||"assert",b=Error(k),b.stack&&console.log(b.stack),new l(k);}function u(b,k){b[12]=k[0];b[13]=k[1];b[14]=k[2]}function x(b,k=0){let e=0;for(let h=0;4>h;h++)e+=b[k+h]*c[h];return e}function y(b){return b-Math.floor(b)}const t=g.create();let l=function(){function b(k){this.message=k}b.prototype.toString=function(){return`AssertException: ${this.message}`};return b}();const n=[1,256,65536,16777216],c=[1/256,1/65536,1/16777216,1/4294967296],a=
x(new Uint8ClampedArray([255,255,255,255]));d.AssertException=l;d.assert=r;d.createTranslationMatrix=function(b,k){b=v.identity(b);u(b,k);return b};d.dec2hex=function(b){b=b.toString(16);return"00000000".substr(0,8-b.length)+b};d.encodeInt16=function(b){return m.clamp(Math.round(32767*b),-32767,32767)};d.encodeNormal=function(b,k){const e=Math.abs(b[0]),h=Math.abs(b[1]),w=1/(e+h+Math.abs(b[2])),D=Math.min(b[2]*w,0);k[0]=(0>b[0]?-1:1)*(e*w-D);k[1]=(0>b[1]?-1:1)*(h*w-D)};d.fallbackIfUndefined=function(b,
k){return void 0===b?k:b};d.fovd2fovx=function(b,k,e){return 2*Math.atan(k*Math.tan(.5*b)/Math.sqrt(k*k+e*e))};d.fovd2fovy=function(b,k,e){return 2*Math.atan(e*Math.tan(.5*b)/Math.sqrt(k*k+e*e))};d.fovx2fovd=function(b,k,e){return 2*Math.atan(Math.sqrt(k*k+e*e)*Math.tan(.5*b)/k)};d.fovx2fovy=function(b,k,e){return 2*Math.atan(e*Math.tan(.5*b)/k)};d.fovy2fovd=function(b,k,e){return 2*Math.atan(Math.sqrt(k*k+e*e)*Math.tan(.5*b)/e)};d.fovy2fovx=function(b,k,e){return 2*Math.atan(k*Math.tan(.5*b)/e)};
d.getFirstObjectKey=function(b){for(const k in b)return k};d.getMatrixTranslation=function(b,k=A.create()){k[0]=b[12];k[1]=b[13];k[2]=b[14];return k};d.hex2rgb=function(b){b=Math.floor(b);return[(b>>16&255)/255,(b>>8&255)/255,(b&255)/255]};d.inverseProjectionInfo=function(b,k,e,h,w){0===b[11]?(h[0]=2/(k*b[0]),h[1]=2/(e*b[5]),h[2]=(1+b[12])/b[0],h[3]=(1+b[13])/b[5],B.set(w,0,1)):(h[0]=-2/(k*b[0]),h[1]=-2/(e*b[5]),h[2]=(1-b[8])/b[0],h[3]=(1-b[9])/b[5],B.set(w,1,0))};d.isTranslationMatrix=function(b){return 1===
b[0]&&0===b[1]&&0===b[2]&&0===b[3]&&0===b[4]&&1===b[5]&&0===b[6]&&0===b[7]&&0===b[8]&&0===b[9]&&1===b[10]&&0===b[11]&&1===b[15]};d.logWithBase=function(b,k){return Math.log(b)/Math.log(k)};d.objectEmpty=function(b){for(const k in b)return!1;return!0};d.packFloatRGBA=function(b,k,e=0){b=m.clamp(b,0,a);for(let h=0;4>h;h++)k[e+h]=Math.floor(256*y(b*n[h]))};d.project=function(b,k,e,h,w){w||(w=b);t[0]=b[0];t[1]=b[1];t[2]=b[2];t[3]=1;q.transformMat4(t,t,k);2<w.length&&(w[2]=-t[2]);q.transformMat4(t,t,e);
r(0!==t[3]);w[0]=t[0]/t[3];w[1]=t[1]/t[3];w[2]=t[2]/t[3];w[0]=(.5*w[0]+.5)*h[2]+h[0];w[1]=(.5*w[1]+.5)*h[3]+h[1]};d.rayBoxTest=function(b,k,e,h){let w,D=(e[0]-b[0])/k[0],p=(h[0]-b[0])/k[0];D>p&&(w=D,D=p,p=w);let z=(e[1]-b[1])/k[1],f=(h[1]-b[1])/k[1];z>f&&(w=z,z=f,f=w);if(D>f||z>p)return!1;z>D&&(D=z);f<p&&(p=f);e=(e[2]-b[2])/k[2];b=(h[2]-b[2])/k[2];e>b&&(w=e,e=b,b=w);if(D>b||e>p)return!1;b<p&&(p=b);return 0>p?!1:!0};d.rayRay2D=function(b,k,e,h,w,D=C.create()){const p=(h[w]-e[w])*(k[0]-b[0])-(h[0]-
e[0])*(k[w]-b[w]);if(0===p)return!1;e=((h[0]-e[0])*(b[w]-e[w])-(h[w]-e[w])*(b[0]-e[0]))/p;D[0]=b[0]+e*(k[0]-b[0]);D[1]=b[w]+e*(k[w]-b[w]);return!0};d.rayTriangle3D=function(b,k,e,h,w,D,p,z,f=A.create()){var E=h[p]-e[D];const F=h[p+1]-e[D+1],L=h[p+2]-e[D+2];h=w[z]-e[D];p=w[z+1]-e[D+1];w=w[z+2]-e[D+2];const W=k[1]*w-p*k[2],M=k[2]*h-w*k[0],P=k[0]*p-h*k[1];z=E*W+F*M+L*P;if(-1E-5<z&&1E-5>z)return!1;z=1/z;const V=b[0]-e[D],H=b[1]-e[D+1];b=b[2]-e[D+2];f[1]=z*(V*W+H*M+b*P);if(0>f[1]||1<f[1])return!1;e=H*
L-F*b;b=b*E-L*V;E=V*F-E*H;f[2]=z*(k[0]*e+k[1]*b+k[2]*E);if(0>f[2]||1<f[1]+f[2])return!1;f[0]=z*(h*e+p*b+w*E);return!0};d.rgb2hex=function(b){const k=m.clamp(Math.round(255*b[0]),0,255),e=m.clamp(Math.round(255*b[1]),0,255);b=m.clamp(Math.round(255*b[2]),0,255);return"0x"+((k<<16)+(e<<8)+b).toString(16)};d.setMatrixTranslation=u;d.setMatrixTranslation3=function(b,k,e,h){b[12]=k;b[13]=e;b[14]=h};d.unpackFloatRGBA=x;d.verify=function(b,k){b||console.warn("Verify failed: "+(k||"")+"\n"+Error("verify").stack)};
Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/materials/internal/MaterialUtil":function(){define("exports ../../../../../core/mathUtils ../../../../../core/maybe ../../../../../chunks/vec3 ../../../../../chunks/vec3f64 ../../../../../geometry/support/aaBoundingBox ../../lib/screenSizePerspectiveUtils ../../lib/Util ../renderers/utils".split(" "),function(d,m,v,B,C,A,q,g,r){function u(D,p,z,f,E,F){if(!v.isNone(D)){var L=t(p,z,k);A.setMin(b,D.getBBMin());A.setMax(b,
D.getBBMax());v.isSome(E)&&E.applyToAabb(b);if(l(b,p,L,f)){const {primitiveIndices:W,indices:M,position:P}=D;L=W?W.length:M.length/3;if(1E3<L&&(D=D.getChildren(),void 0!==D)){for(L=0;8>L;++L)void 0!==D[L]&&u(D[L],p,z,f,E,F);return}x(p,z,0,L,M,P,W,E,F)}}}function x(D,p,z,f,E,F,L,W,M){if(L){var P=F.data;F=F.stride||F.size;var V=D[0],H=D[1];D=D[2];var R=p[0]-V,Z=p[1]-H;for(p=p[2]-D;z<f;++z){var N=L[z],S=3*N,O=F*E[S++],J=P[O++],K=P[O++],Q=P[O];O=F*E[S++];var da=P[O++],ma=P[O++],wa=P[O];O=F*E[S];S=P[O++];
var ya=P[O++];O=P[O];v.isSome(W)&&([J,K,Q]=W.applyToVertex(J,K,Q,z),[da,ma,wa]=W.applyToVertex(da,ma,wa,z),[S,ya,O]=W.applyToVertex(S,ya,O,z));da-=J;ma-=K;wa-=Q;S-=J;ya-=K;O-=Q;var xa=Z*O-ya*p,G=p*S-O*R;const aa=R*ya-S*Z;var I=da*xa+ma*G+wa*aa;if(!(Math.abs(I)<=Number.EPSILON)){J=V-J;K=H-K;Q=D-Q;xa=J*xa+K*G+Q*aa;if(0<I){if(0>xa||xa>I)continue}else if(0<xa||xa<I)continue;G=K*wa-ma*Q;Q=Q*da-wa*J;K=J*ma-da*K;J=R*G+Z*Q+p*K;if(0<I){if(0>J||xa+J>I)continue}else if(0<J||xa+J<I)continue;Q=(S*G+ya*Q+O*K)/
I;0<=Q&&(da=y(da,ma,wa,S,ya,O,e),M(Q,da,N))}}}else{L=F.data;P=F.stride||F.size;F=D[0];V=D[1];H=D[2];D=p[0]-F;R=p[1]-V;Z=p[2]-H;for(let aa=z,ca=3*z;aa<f;++aa)if(S=P*E[ca++],K=L[S++],Q=L[S++],wa=L[S],S=P*E[ca++],p=L[S++],z=L[S++],N=L[S],S=P*E[ca++],da=L[S++],ma=L[S++],S=L[S],v.isSome(W)&&([K,Q,wa]=W.applyToVertex(K,Q,wa,aa),[p,z,N]=W.applyToVertex(p,z,N,aa),[da,ma,S]=W.applyToVertex(da,ma,S,aa)),p-=K,z-=Q,N-=wa,da-=K,ma-=Q,S-=wa,O=R*S-ma*Z,J=Z*da-S*D,I=D*ma-da*R,ya=p*O+z*J+N*I,!(Math.abs(ya)<=Number.EPSILON)){K=
F-K;Q=V-Q;wa=H-wa;O=K*O+Q*J+wa*I;if(0<ya){if(0>O||O>ya)continue}else if(0<O||O<ya)continue;J=Q*N-z*wa;wa=wa*p-N*K;Q=K*z-p*Q;K=D*J+R*wa+Z*Q;if(0<ya){if(0>K||O+K>ya)continue}else if(0<K||O+K<ya)continue;wa=(da*J+ma*wa+S*Q)/ya;0<=wa&&(p=y(p,z,N,da,ma,S,e),M(wa,p,aa))}}}function y(D,p,z,f,E,F,L){B.set(h,D,p,z);B.set(w,f,E,F);B.cross(L,h,w);B.normalize(L,L);return L}function t(D,p,z){return B.set(z,1/(p[0]-D[0]),1/(p[1]-D[1]),1/(p[2]-D[2]))}function l(D,p,z,f){return n(D,p,z,f,Infinity)}function n(D,p,
z,f,E){var F=(D[0]-f-p[0])*z[0],L=(D[3]+f-p[0])*z[0];let W=Math.min(F,L);F=Math.max(F,L);L=(D[1]-f-p[1])*z[1];const M=(D[4]+f-p[1])*z[1];F=Math.min(F,Math.max(L,M));if(0>F)return!1;W=Math.max(W,Math.min(L,M));if(W>F)return!1;L=(D[2]-f-p[2])*z[2];D=(D[5]+f-p[2])*z[2];F=Math.min(F,Math.max(L,D));if(0>F)return!1;W=Math.max(W,Math.min(L,D));return W>F?!1:W<E}function c(D,p){p=p?c(p):{};for(const z in D){let f=D[z];f&&f.forEach&&(f=a(f));null==f&&z in p||(p[z]=f)}return p}function a(D){const p=[];D.forEach(z=>
p.push(z));return p}const b=A.create(),k=C.create(),e=C.create(),h=C.create(),w=C.create();d.bindScreenSizePerspective=function(D,p,z){if(D){var f=D.parameters;p.setUniform4f(z,f.divisor,f.offset,f.minPixelSize,D.paddingPixelsOverride)}};d.colorMixModes={multiply:1,ignore:2,replace:3,tint:4};d.computeInvDir=t;d.computeNormal=y;d.copyParameters=c;d.intersectAabbInvDir=l;d.intersectAabbInvDirBefore=n;d.intersectDrapedRenderLineGeometry=function(D,p,z,f,E){if(p.options.selectionMode){p=D.vertexAttributes.get("position").data;
var F=D.vertexAttributes.get("size"),L=z[0];z=z[1];D=(((F&&F.data[0])+f)/2+4)*D.screenToWorldRatio;f=Number.MAX_VALUE;for(F=0;F<p.length-5;F+=3){var W=p[F],M=p[F+1],P=L-W,V=z-M;W=p[F+3]-W;M=p[F+4]-M;const H=m.clamp((W*P+M*V)/(W*W+M*M),0,1);P=W*H-P;V=M*H-V;V=P*P+V*V;V<f&&(f=V)}f<D*D&&E()}};d.intersectTriangleGeometry=function(D,p,z,f,E,F,L){r.isInstanceHidden(p)||(D.boundingInfo?(g.assert(0===D.primitiveType),u(D.boundingInfo,f,E,z.tolerance,F,L)):(p=D.indices.get("position"),D=D.vertexAttributes.get("position"),
x(f,E,0,p.length/3,p,D,void 0,F,L)))};d.intersectTriangles=x;d.updateParameters=function(D,p){let z=!1;for(const f in p){const E=p[f];void 0!==E&&(z=!0,Array.isArray(E)?D[f]=E.slice():D[f]=E)}return z};d.verticalOffsetAtDistance=function(D,p,z,f,E){let F=(z.screenLength||0)*D.pixelRatio;E&&(F=q.scale(F,f,p,E));return m.clamp(F*Math.tan(.5*D.fovY)/(.5*D.fullHeight)*p,z.minWorldLength||0,null!=z.maxWorldLength?z.maxWorldLength:Infinity)};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/screenSizePerspectiveUtils":function(){define(["exports",
"../../../../chunks/_rollupPluginBabelHelpers","../../../../core/mathUtils"],function(d,m,v){function B(x,y,t){const l=t.parameters;t=t.paddingPixelsOverride;r.scale=Math.min(l.divisor/(y-l.offset),1);r.factor=Math.abs(x*x*x);r.minPixelSize=l.minPixelSize;r.paddingPixels=t;return r}function C(x,y){return 0===x?y.minPixelSize:y.minPixelSize*(1+2*y.paddingPixels/x)}function A(x,y){return Math.max(v.lerp(x*y.scale,x,y.factor),C(x,y))}let q=function(){function x(t,l,n,c={camera:{distance:0,fovY:0},divisor:0,
offset:0,minPixelSize:0,paddingPixels:0},a){this.viewingMode=t;this.description=l;this.ellipsoidRadius=n;this.parameters=c;this._paddingPixelsOverride=a;2===this.viewingMode?(this.coverageCompensation=this.surfaceCoverageCompensationLocal,this.calculateCurvatureDependentParameters=this.calculateCurvatureDependentParametersLocal):(this.coverageCompensation=this.surfaceCoverageCompensationGlobal,this.calculateCurvatureDependentParameters=this.calculateCurvatureDependentParametersGlobal)}var y=x.prototype;
y.update=function(t){if(this.parameters&&this.parameters.camera.fovY===t.fovY&&this.parameters.camera.distance===t.distance)return!1;this.calculateParameters(t,this.ellipsoidRadius,this.parameters);return!0};y.overridePadding=function(t){return t!==this.paddingPixelsOverride?new x(this.viewingMode,this.description,this.ellipsoidRadius,this.parameters,t):this};y.calculateParameters=function(t,l,n){const {scaleStart:c,scaleFallOffRange:a,minPixelSize:b}=this.description,{fovY:k,distance:e}=t;var h=
this.calculateCurvatureDependentParameters(t,l);l=this.coverageCompensation(t,l,h);const {tiltAngle:w,scaleFallOffFactor:D}=h,p=Math.sin(w)*e,z=.5*Math.PI-w-k*(.5-c*l);h=p/Math.cos(z);l=(h-p/Math.cos(z+k*a*l)*D)/(1-D);n.camera.fovY=t.fovY;n.camera.distance=t.distance;n.offset=l;n.divisor=h-l;n.minPixelSize=b;return n};y.calculateCurvatureDependentParametersLocal=function(t,l,n=u){n.tiltAngle=this.description.curvatureDependent.min.tiltAngle;n.scaleFallOffFactor=this.description.curvatureDependent.min.scaleFallOffFactor;
return n};y.calculateCurvatureDependentParametersGlobal=function(t,l,n=u){const c=this.description.curvatureDependent;t=1+t.distance/l;t=Math.sqrt(t*t-1);const [a,b]=[c.min.curvature,c.max.curvature];t=v.clamp((t-a)/(b-a),0,1);const [k,e]=[c.min,c.max];n.tiltAngle=v.lerp(k.tiltAngle,e.tiltAngle,t);n.scaleFallOffFactor=v.lerp(k.scaleFallOffFactor,e.scaleFallOffFactor,t);return n};y.surfaceCoverageCompensationLocal=function(t,l,n){return(t.fovY-n.tiltAngle)/t.fovY};y.surfaceCoverageCompensationGlobal=
function(t,l,n){const c=l*l;n=n.tiltAngle+.5*Math.PI;const {fovY:a,distance:b}=t;t=b*b+c-2*Math.cos(n)*b*l;const k=Math.sqrt(t);return(Math.acos(Math.sqrt(t-c)/k)-Math.asin(l/(k/Math.sin(n)))+.5*a)/a};m._createClass(x,[{key:"paddingPixelsOverride",get:function(){return this._paddingPixelsOverride||this.parameters.paddingPixels}}]);return x}();const g={curvatureDependent:{min:{curvature:v.deg2rad(10),tiltAngle:v.deg2rad(12),scaleFallOffFactor:.5},max:{curvature:v.deg2rad(70),tiltAngle:v.deg2rad(40),
scaleFallOffFactor:.8}},scaleStart:.3,scaleFallOffRange:.65,minPixelSize:0},r={scale:0,factor:0,minPixelSize:0,paddingPixels:0},u={tiltAngle:0,scaleFallOffFactor:0};d.applyPrecomputedScaleFactor=function(x,y,t=[0,0]){y=Math.min(Math.max(y.scale,C(x[1],y)/x[1]),1);t[0]=x[0]*y;t[1]=x[1]*y;return t};d.applyScaleFactor=A;d.applyScaleFactorVec2=function(x,y,t=[0,0]){const l=Math.min(Math.max(y.scale,C(x[1],y)/x[1]),1);t[0]=v.lerp(x[0]*l,x[0],y.factor);t[1]=v.lerp(x[1]*l,x[1],y.factor);return t};d.getLabelSettings=
function(x,y){const {curvatureDependent:t,scaleStart:l,scaleFallOffRange:n}=g;return new q(x,{curvatureDependent:{min:{curvature:t.min.curvature,tiltAngle:t.min.tiltAngle,scaleFallOffFactor:.7},max:{curvature:t.max.curvature,tiltAngle:t.max.tiltAngle,scaleFallOffFactor:.95}},scaleStart:l,scaleFallOffRange:n,minPixelSize:14},y)};d.getSettings=function(x,y){return new q(x,g,y)};d.precomputeScaleFactor=function(x,y,t,l){x=B(x,y,t);x.minPixelSize=0;x.paddingPixels=0;x=A(1,x);l.scale=x;l.factor=0;l.minPixelSize=
t.parameters.minPixelSize;l.paddingPixels=t.paddingPixelsOverride};d.scale=function(x,y,t,l){return A(x,B(y,t,l))};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/materials/renderers/utils":function(){define("exports ../../../../../core/maybe ../../../../../chunks/mat4 ../../../../../chunks/mat4f64 ../../lib/doublePrecisionUtils ../../lib/Util".split(" "),function(d,m,v,B,C,A){const q=new Float64Array(3),g=new Float32Array(6),r=B.create();d.acquireMaterials=function(u,
x){const y=new Map;y.set(0,x.acquire(u,0));y.set(1,x.acquire(u,7));y.set(4,x.acquire(u,3));y.set(3,x.acquire(u,2));y.set(2,x.acquire(u,1));y.set(5,x.acquire(u,4));y.set(7,x.acquire(u,3));y.set(6,x.acquire(u,3));return y};d.addObject3DStateID=function(u,x){m.isNone(u)&&(u=[]);u.push(x);return u};d.calculateTransformRelativeToOrigin=function(u,x,y){const t=u.origin.vec3;A.setMatrixTranslation3(r,-t[0],-t[1],-t[2]);m.isSome(u.transformation)?v.multiply(x,r,u.transformation):v.copy(x,r);y&&(v.invert(y,
x),v.transpose(y,y))};d.encodeDoubleVec3=function(u,x,y,t,l){q[0]=u.get(x,0);q[1]=u.get(x,1);q[2]=u.get(x,2);C.encodeDoubleArray(q,g,3);y.set(l,0,g[0]);t.set(l,0,g[1]);y.set(l,1,g[2]);t.set(l,1,g[3]);y.set(l,2,g[4]);t.set(l,2,g[5])};d.isInstanceHidden=function(u){return m.isSome(u)?!u.visible:!1};d.releaseMaterials=function(u,x){x.release(u,0);x.release(u,7);x.release(u,3);x.release(u,2);x.release(u,1);x.release(u,4)};d.removeObject3DStateID=function(u,x){if(m.isNone(u))return u;u=u.filter(y=>y!==
x);return 0===u.length?null:u};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/doublePrecisionUtils":function(){define(["exports"],function(d){function m(C,A,q){for(let g=0;g<q;++g)A[2*g]=C[g],A[2*g+1]=C[g]-A[2*g]}const v=new Float64Array(1),B=new Float32Array(2);d.decodeDoubleArray=function(C,A,q){for(let g=0;g<q;++g)A[g]=C[2*g]+C[2*g+1]};d.encodeDouble=function(C,A){B[0]=C;B[1]=C-B[0];A[0]=B[0];A[1]=B[1]};d.encodeDoubleArray=m;d.encodeDoubleArraySplit=function(C,
A,q,g){for(let r=0;r<g;++r)v[0]=C[r],m(v,B,1),A[r]=B[0],q[r]=B[1]};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/shaders/LaserlineTechnique":function(){define("require exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../core/mathUtils ../core/shaderTechnique/ReloadableShaderModule ../core/shaderTechnique/ShaderTechnique ../core/shaderTechnique/ShaderTechniqueConfiguration ../lib/DefaultVertexAttributeLocations ../lib/Program ../../../../chunks/Laserlines.glsl ../../../webgl/renderState".split(" "),
function(d,m,v,B,C,A,q,g,r,u,x,y){q=function(t){function l(){return t.apply(this,arguments)||this}v._inheritsLoose(l,t);var n=l.prototype;n.initializeProgram=function(c){const a=l.shader.get().build(this.configuration);return new u.Program(c.rctx,a,r.Default3D)};n.bind=function(c,a){this.program.setUniform3fv("innerColor",c.innerColor);this.program.setUniform1f("innerWidth",c.innerWidth*a.pixelRatio);this.program.setUniform3fv("glowColor",c.glowColor);this.program.setUniform1f("glowWidth",c.glowWidth*
a.pixelRatio);this.program.setUniform1f("glowFalloff",c.glowFalloff);this.program.setUniform1f("globalAlpha",c.globalAlpha);this.configuration.contrastControlEnabled&&this.program.setUniform1f("globalAlphaContrastBoost",null!=c.globalAlphaContrastBoost?c.globalAlphaContrastBoost:1);c=null!=c.angleCutoff?c.angleCutoff:x.defaultAngleCutoff;this.program.setUniform2f("angleCutoff",Math.cos(c),Math.cos(Math.max(0,c-C.deg2rad(2))));this.configuration.intersectsLineEnabled&&this.program.setUniform1f("perScreenPixelRatio",
a.perScreenPixelRatio)};n.initializePipeline=function(){return y.makePipelineState({blending:y.simpleBlendingParams(1,771),colorWrite:y.defaultColorWriteParams})};return l}(q.ShaderTechnique);q.shader=new A.ReloadableShaderModule(x.LaserlinesShader,()=>new Promise(function(t,l){d(["./Laserlines.glsl"],t,l)}));A=function(t){function l(){var n=t.apply(this,arguments)||this;n.heightManifoldEnabled=!1;n.pointDistanceEnabled=!1;n.lineVerticalPlaneEnabled=!1;n.intersectsLineEnabled=!1;n.contrastControlEnabled=
!1;return n}v._inheritsLoose(l,t);return l}(g.ShaderTechniqueConfiguration);B.__decorate([g.parameter()],A.prototype,"heightManifoldEnabled",void 0);B.__decorate([g.parameter()],A.prototype,"pointDistanceEnabled",void 0);B.__decorate([g.parameter()],A.prototype,"lineVerticalPlaneEnabled",void 0);B.__decorate([g.parameter()],A.prototype,"intersectsLineEnabled",void 0);B.__decorate([g.parameter()],A.prototype,"contrastControlEnabled",void 0);m.LaserlineTechnique=q;m.LaserlineTechniqueConfiguration=
A;Object.defineProperty(m,"__esModule",{value:!0})})},"esri/chunks/Laserlines.glsl":function(){define("exports ../core/mathUtils ../views/3d/webgl-engine/core/shaderLibrary/Laserline.glsl ../views/3d/webgl-engine/core/shaderLibrary/ScreenSpacePass ../views/3d/webgl-engine/core/shaderModules/interfaces ../views/3d/webgl-engine/core/shaderModules/ShaderBuilder".split(" "),function(d,m,v,B,C,A){function q(r){const u=new A.ShaderBuilder;u.extensions.add("GL_OES_standard_derivatives");u.include(B.ScreenSpacePass);
u.include(v.Laserline,r);u.fragment.uniforms.add("angleCutoff","vec2");u.fragment.uniforms.add("globalAlpha","float");r.heightManifoldEnabled&&u.fragment.uniforms.add("heightPlane","vec4");r.pointDistanceEnabled&&u.fragment.uniforms.add("pointDistanceSphere","vec4");r.lineVerticalPlaneEnabled&&u.fragment.uniforms.add("lineVerticalPlane","vec4").add("lineVerticalStart","vec3").add("lineVerticalEnd","vec3");(r.heightManifoldEnabled||r.pointDistanceEnabled||r.lineVerticalPlaneEnabled)&&u.fragment.uniforms.add("maxPixelDistance",
"float");r.intersectsLineEnabled&&u.fragment.uniforms.add("intersectsLineStart","vec3").add("intersectsLineEnd","vec3").add("intersectsLineDirection","vec3").add("intersectsLineRadius","float").add("perScreenPixelRatio","float");(r.lineVerticalPlaneEnabled||r.heightManifoldEnabled)&&u.fragment.code.add(C.glsl`float planeDistancePixels(vec4 plane, vec3 pos) {
float dist = dot(plane.xyz, pos) + plane.w;
float width = fwidth(dist);
dist /= min(width, maxPixelDistance);
return abs(dist);
}`);r.pointDistanceEnabled&&u.fragment.code.add(C.glsl`float sphereDistancePixels(vec4 sphere, vec3 pos) {
float dist = distance(sphere.xyz, pos) - sphere.w;
float width = fwidth(dist);
dist /= min(width, maxPixelDistance);
return abs(dist);
}`);r.intersectsLineEnabled&&u.fragment.code.add(C.glsl`float lineDistancePixels(vec3 start, vec3 dir, float radius, vec3 pos) {
float dist = length(cross(dir, pos - start)) / (length(pos) * perScreenPixelRatio);
return abs(dist) - radius;
}`);(r.lineVerticalPlaneEnabled||r.intersectsLineEnabled)&&u.fragment.code.add(C.glsl`bool pointIsWithinLine(vec3 pos, vec3 start, vec3 end) {
vec3 dir = end - start;
float t2 = dot(dir, pos - start);
float l2 = dot(dir, dir);
return t2 >= 0.0 && t2 <= l2;
}`);u.fragment.code.add(C.glsl`void main() {
vec3 pos;
vec3 normal;
float depthDiscontinuityAlpha;
if (!laserlineReconstructFromDepth(pos, normal, depthDiscontinuityAlpha)) {
discard;
}
vec4 color = vec4(0, 0, 0, 0);`);r.heightManifoldEnabled&&u.fragment.code.add(C.glsl`{
float heightManifoldAlpha = 1.0 - smoothstep(angleCutoff.x, angleCutoff.y, abs(dot(normal, heightPlane.xyz)));
vec4 heightManifoldColor = laserlineProfile(planeDistancePixels(heightPlane, pos));
color = max(color, heightManifoldColor * heightManifoldAlpha);
}`);r.pointDistanceEnabled&&u.fragment.code.add(C.glsl`{
float pointDistanceSphereDistance = sphereDistancePixels(pointDistanceSphere, pos);
vec4 pointDistanceSphereColor = laserlineProfile(pointDistanceSphereDistance);
float pointDistanceSphereAlpha = 1.0 - smoothstep(angleCutoff.x, angleCutoff.y, abs(dot(normal, normalize(pos - pointDistanceSphere.xyz))));
color = max(color, pointDistanceSphereColor * pointDistanceSphereAlpha);
}`);r.lineVerticalPlaneEnabled&&u.fragment.code.add(C.glsl`{
if (pointIsWithinLine(pos, lineVerticalStart, lineVerticalEnd)) {
float lineVerticalDistance = planeDistancePixels(lineVerticalPlane, pos);
vec4 lineVerticalColor = laserlineProfile(lineVerticalDistance);
float lineVerticalAlpha = 1.0 - smoothstep(angleCutoff.x, angleCutoff.y, abs(dot(normal, lineVerticalPlane.xyz)));
color = max(color, lineVerticalColor * lineVerticalAlpha);
}
}`);r.intersectsLineEnabled&&u.fragment.code.add(C.glsl`{
if (pointIsWithinLine(pos, intersectsLineStart, intersectsLineEnd)) {
float intersectsLineDistance = lineDistancePixels(intersectsLineStart, intersectsLineDirection, intersectsLineRadius, pos);
vec4 intersectsLineColor = laserlineProfile(intersectsLineDistance);
float intersectsLineAlpha = 1.0 - smoothstep(angleCutoff.x, angleCutoff.y, 1.0 - abs(dot(normal, intersectsLineDirection)));
color = max(color, intersectsLineColor * intersectsLineAlpha);
}
}`);u.fragment.code.add(C.glsl`gl_FragColor = laserlineOutput(color * depthDiscontinuityAlpha);
}`);return u}m=m.deg2rad(6);var g=Object.freeze({__proto__:null,defaultAngleCutoff:m,build:q});d.LaserlinesShader=g;d.build=q;d.defaultAngleCutoff=m})},"esri/views/3d/webgl-engine/core/shaderLibrary/ScreenSpacePass":function(){define(["exports","../shaderModules/interfaces"],function(d,m){d.ScreenSpacePass=function(v){v.attributes.add("position","vec2");v.varyings.add("uv","vec2");v.vertex.code.add(m.glsl`
    void main(void) {
      gl_Position = vec4(position, 0.0, 1.0);
      uv = position * 0.5 + vec2(0.5);
    }
  `)};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/3d/interactive/visualElements/Object3DVisualElement":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../chunks/mat4 ../../../../chunks/mat4f64 ./VisualElement ../../webgl-engine/lib/Object3D ../../webgl-engine/lib/WebGLLayer".split(" "),function(d,m,v,B,C,A,q,g){A=function(r){function u(y){y=r.call(this,y.view)||this;y._resources=null;y._transform=C.create();return y}m._inheritsLoose(u,
r);var x=u.prototype;x.recreate=function(){this.attached&&this.createResources()};x.recreateGeometry=function(){if(!v.isNone(this._resources)){var y=this._resources.object,t=this.view._stage;t.removeMany(y.geometries);y.removeAllGeometries();this.createGeometries(y);this.visible||y.setVisible(this.visible);t.addMany(y.geometries)}};x.createResources=function(){this.destroyResources();const y=this.view._stage;if(y){var t=new g.WebGLLayer({isPickable:!1,updatePolicy:1});y.add(t);var l=new q.Object3D({castShadow:!1});
l.transformation=this._transform;this.createExternalResources();this.createGeometries(l);y.addMany(l.geometries);this.forEachExternalMaterial(n=>y.add(n));y.add(l);t.add(l);this.visible||l.setVisible(!1);this._resources={layer:t,object:l}}};x.destroyResources=function(){const y=this.view._stage;!v.isNone(this._resources)&&y&&(y.remove(this._resources.object),y.remove(this._resources.layer),this.forEachExternalMaterial(t=>{y.remove(t);t.dispose()}),y.removeMany(this._resources.object.geometries),this._resources.object.dispose(),
this.destroyExternalResources(),this._resources=null)};x.updateVisibility=function(y){v.isNone(this._resources)||this._resources.object.setVisible(y)};m._createClass(u,[{key:"object",get:function(){return v.isSome(this._resources)?this._resources.object:null}},{key:"transform",get:function(){return this._transform},set:function(y){B.copy(this._transform,y);v.isSome(this._resources)&&(this._resources.object.transformation=this._transform)}}]);return u}(A.VisualElement);d.Object3DVisualElement=A;Object.defineProperty(d,
"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/Object3D":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../chunks/mat4 ../../../../chunks/mat4f64 ../../../../chunks/vec3 ../../../../chunks/vec3f64 ../../../../chunks/sphere ../../support/mathUtils ./ContentObject ./GeometryRecord ./Object3DStateID ./Util ../materials/renderers/utils".split(" "),function(d,m,v,B,C,A,q,g,r,u,x,y,t,l){u=function(a){function b(e={}){var h=a.call(this)||
this;h.type=1;h._geometryRecords=[];h._geometries=[];h._objectTransformation=C.create();h._bvObjectSpace=new c;h._bvWorldSpace=new c;h._bvDirty=!0;h._hasVolatileTransformation=!1;h._visible=!0;h.castShadow=null!=e.castShadow?e.castShadow:!0;h.metadata=e.metadata;h.metadata&&h.metadata.isElevationSource&&(h.metadata.lastValidElevationBB=new n);h.transformation=C.create();const {geometries:w,materials:D,transformations:p,origins:z}=e;if(!Array.isArray(w))return m._assertThisInitialized(h);t.assert(D.length===
w.length,"Object3D: materials don't match geometries");t.assert(p.length===w.length,"Object3D: transformations don't match geometries");h._geometryRecords.length=w.length;h._geometries.length=w.length;for(e=0;e<w.length;e++)h._geometries[e]=w[e],h._geometryRecords[e]=x.GeometryRecord.pool.acquire(w[e],D[e],C.clone(p[e]),{highlights:null,occludees:null,visible:!0},z&&z[e]);return h}m._inheritsLoose(b,a);var k=b.prototype;k.dispose=function(){this._geometryRecords.length=0;this._geometries.length=0};
k.getNumGeometryRecords=function(){return this._geometryRecords.length};k.getGeometryRecord=function(e){t.assert(0<=e&&e<this._geometryRecords.length,"Object3d.getGeometryDataByIndex: index out of range");return this._geometryRecords[e]};k.addGeometry=function(e,h,w,D,p,z){w=w?w:C.IDENTITY;this._geometries.push(e);e=x.GeometryRecord.pool.acquire(e,h,w,D||{highlights:null,occludees:null,visible:!0},p,z);this._geometryRecords.push(e);this._hasVolatileTransformation=this._hasVolatileTransformation||
v.isSome(e.shaderTransformation);this._emit("objectGeometryAdded",{object:this,record:e});this._invalidateBoundingVolume();return e};k.removeGeometry=function(e){const h=this._geometryRecords.splice(e,1)[0];this._hasVolatileTransformation=v.isSome(h.shaderTransformation)?this._geometryRecords.some(w=>v.isSome(w.shaderTransformation)):this._hasVolatileTransformation;h.dispose();this._geometries.splice(e,1);this._emit("objectGeometryRemoved",{object:this,record:h});this._invalidateBoundingVolume();
return h};k.removeAllGeometries=function(){for(;0<this.getNumGeometryRecords();)this.removeGeometry(0)};k.geometryVertexAttrsUpdated=function(e){this._emit("vertexAttrsUpdated",{object:this,record:this._geometryRecords[e]});this._invalidateBoundingVolume()};k.setVisible=function(e){this._visible=e;for(const h of this._geometryRecords)h.instanceParameters.visible=this._visible;this._emit("visibilityChanged",this)};k.maskOccludee=function(){const e=new y.Object3DStateID(1);for(const h of this._geometryRecords)h.instanceParameters.occludees=
l.addObject3DStateID(h.instanceParameters.occludees,e);this._emit("occlusionChanged",this);return e};k.removeOcclude=function(e){for(const h of this._geometryRecords)h.instanceParameters.occludees=l.removeObject3DStateID(h.instanceParameters.occludees,e);this._emit("occlusionChanged",this)};k.highlight=function(){const e=new y.Object3DStateID(0);for(const h of this._geometryRecords)h.instanceParameters.highlights=l.addObject3DStateID(h.instanceParameters.highlights,e);this._emit("highlightChanged",
this);return e};k.removeHighlight=function(e){for(const h of this._geometryRecords)h.instanceParameters.highlights=l.removeObject3DStateID(h.instanceParameters.highlights,e);this._emit("highlightChanged",this)};k.getCombinedStaticTransformation=function(e,h){return B.multiply(v.unwrapOr(h,C.create()),this.transformation,e.getStaticTransformation())};k.getCombinedShaderTransformation=function(e,h){h=h||C.create();B.multiply(h,this.transformation,e.getShaderTransformation());return h};k.hasVolativeTransformation=
function(){return this._hasVolatileTransformation};k._validateBoundingVolume=function(){if(this._bvDirty||this._hasVolatileTransformation){this._bvObjectSpace.init();this._bvWorldSpace.init();for(var e=0;e<this._geometryRecords.length;++e){var h=this._geometryRecords[e],w=this._geometries[e].boundingInfo;v.isSome(w)&&(this._calculateTransformedBoundingVolume(w,this._bvObjectSpace,h.getShaderTransformation()),this._calculateTransformedBoundingVolume(w,this._bvWorldSpace,this.getCombinedShaderTransformation(h)))}A.lerp(this._bvObjectSpace.bounds,
this._bvObjectSpace.min,this._bvObjectSpace.max,.5);A.lerp(this._bvWorldSpace.bounds,this._bvWorldSpace.min,this._bvWorldSpace.max,.5);e=q.create();h=q.create();w=r.maxScale(this.transformation);for(let f=0;f<this._geometryRecords.length;++f){var D=this._geometries[f].boundingInfo;if(!v.isNone(D)){var p=this._geometryRecords[f].getShaderTransformation(),z=r.maxScale(p);A.transformMat4(e,D.getCenter(),p);p=A.distance(e,this._bvObjectSpace.bounds);D=D.getBSRadius()*z;this._bvObjectSpace.bounds[3]=Math.max(this._bvObjectSpace.bounds[3],
p+D);A.transformMat4(h,e,this.transformation);z=A.distance(h,this._bvWorldSpace.bounds);this._bvWorldSpace.bounds[3]=Math.max(this._bvWorldSpace.bounds[3],z+D*w)}}this._bvDirty=!1}};k._calculateTransformedBoundingVolume=function(e,h,w){const D=e.getBBMin();e=e.getBBMax();const p=q.clone(D),z=q.clone(e);A.transformMat4(p,p,w);A.transformMat4(z,z,w);for(var f=0;3>f;++f)h.min[f]=Math.min(h.min[f],p[f],z[f]),h.max[f]=Math.max(h.max[f],p[f],z[f]);for(f=0;3>f;++f){A.copy(p,D);A.copy(z,e);p[f]=e[f];z[f]=
D[f];A.transformMat4(p,p,w);A.transformMat4(z,z,w);for(let E=0;3>E;++E)h.min[E]=Math.min(h.min[E],p[E],z[E]),h.max[E]=Math.max(h.max[E],p[E],z[E])}};k._invalidateBoundingVolume=function(){this._bvDirty=!0;v.isSome(this._parentLayer)&&this._parentLayer.notifyObjectBBChanged(this,this._bvWorldSpace.bounds)};k._emit=function(e,h){v.isSome(this._parentLayer)&&this._parentLayer.events.emit(e,h)};m._createClass(b,[{key:"geometryRecords",get:function(){return this._geometryRecords}},{key:"geometries",get:function(){return this._geometries}},
{key:"transformation",get:function(){return this._objectTransformation},set:function(e){B.copy(this._objectTransformation,e);this._invalidateBoundingVolume();this._emit("objectTransformation",this)}},{key:"parentLayer",get:function(){return this._parentLayer},set:function(e){t.assert(null==this._parentLayer||null==e,"Object3D can only be added to a single Layer");this._parentLayer=e}},{key:"isVisible",get:function(){return this._visible}},{key:"boundingVolumeWorldSpace",get:function(){this._validateBoundingVolume();
return this._bvWorldSpace}},{key:"boundingVolumeObjectSpace",get:function(){this._validateBoundingVolume();return this._bvObjectSpace}},{key:"test",get:function(){const e=this;return{hasGeometry:h=>-1<e._geometries.indexOf(h),getGeometryIndex:h=>e._geometries.indexOf(h)}}}]);return b}(u.ContentObject);let n=function(){function a(){this.min=q.fromValues(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE);this.max=q.fromValues(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE)}a.prototype.isEmpty=
function(){return this.max[0]<this.min[0]&&this.max[1]<this.min[1]&&this.max[2]<this.min[2]};return a}(),c=function(a){function b(){var k=a.apply(this,arguments)||this;k.bounds=g.create();return k}m._inheritsLoose(b,a);b.prototype.init=function(){A.set(this.min,Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE);A.set(this.max,-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);g.clear(this.bounds)};return b}(n);d.Object3D=u;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/ContentObject":function(){define(["exports",
"../../../../core/uid"],function(d,m){let v=function(){function B(){this.id=m.generateUID()}B.prototype.unload=function(){};return B}();d.ContentObject=v;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/GeometryRecord":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../core/ObjectPool ../../../../core/uid ../../../../chunks/vec3".split(" "),function(d,m,v,B,C,A){let q=function(){function g(){this._disposed=
!1}var r=g.prototype;r.acquire=function(u,x,y,t,l,n){this.id=C.generateUID();this.geometry=u;this.material=x;this.transformation=y;this.instanceParameters=t;this.origin=l;this._shaderTransformation=n;this._disposed=!1};r.release=function(){this._disposed=!1};r.dispose=function(){this._disposed=!0};r.getStaticTransformation=function(){return this.transformation};r.getShaderTransformation=function(){return v.isSome(this._shaderTransformation)?this._shaderTransformation(this.transformation):this.transformation};
r.computeAttachmentOrigin=function(u){return(this.material.computeAttachmentOrigin?this.material.computeAttachmentOrigin(this.geometry,u):this.geometry.computeAttachmentOrigin(u))?(A.transformMat4(u,u,this.getStaticTransformation()),!0):!1};m._createClass(g,[{key:"disposed",get:function(){return this._disposed}},{key:"shaderTransformation",get:function(){return this._shaderTransformation}}]);return g}();q.pool=new B(q);d.GeometryRecord=q;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/Object3DStateID":function(){define(["exports",
"../../../../core/uid"],function(d,m){d.Object3DStateID=function(v){this.channel=v;this.id=m.generateUID()};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/WebGLLayer":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/Evented ../../../../core/Handles ../../../../core/maybe ../../../../core/PooledArray ./ContentObject ./DirtyEvents ./Octree".split(" "),function(d,m,v,B,C,A,q,g,r){q=function(u){function x(t,l=""){var n,c,a;var b=
u.call(this)||this;b.apiLayerUid=l;b.type=0;b.events=new v;b.isSliceable=!1;b._objects=new A;b._stageHandles=new B;b.apiLayerUid=l;b.isVisible=null!=(n=null==t?void 0:t.isVisible)?n:!0;b.isPickable=null!=(c=null==t?void 0:t.isPickable)?c:!0;b.updatePolicy=null!=(a=null==t?void 0:t.updatePolicy)?a:0;return b}m._inheritsLoose(x,u);var y=x.prototype;y.destroy=function(){this.detachStage();this._stage=null};y.attachStage=function(t){this.detachStage();this._stage=t;for(const l of g.DirtyEventNames)this._stageHandles.add(this.events.on(l,
n=>t.handleEvent(l,n)))};y.detachStage=function(){this._stageHandles.removeAll();this.invalidateSpatialQueryAccelerator()};y.add=function(t){this._objects.push(t);t.parentLayer=this;this.events.emit("layerObjectAdded",{layer:this,object:t});C.isSome(this._octree)&&this._octree.add([t])};y.remove=function(t){this._objects.removeUnordered(t)&&(t.parentLayer=null,this.events.emit("layerObjectRemoved",{layer:this,object:t}),C.isSome(this._octree)&&this._octree.remove([t]))};y.addMany=function(t){this._objects.pushArray(t);
for(const l of t)l.parentLayer=this;this.events.emit("layerObjectsAdded",{layer:this,objects:t});C.isSome(this._octree)&&this._octree.add(t)};y.removeMany=function(t){const l=[];this._objects.removeUnorderedMany(t,t.length,l);if(0!==l.length){for(const n of l)n.parentLayer=null;this.events.emit("layerObjectsRemoved",{layer:this,objects:l});C.isSome(this._octree)&&this._octree.remove(l)}};y.sync=function(){C.isSome(this._stage)&&1!==this.updatePolicy&&this._stage.syncLayer(this.id)};y.notifyObjectBBChanged=
function(t,l){C.isSome(this._octree)&&this._octree.update(t,l)};y.getSpatialQueryAccelerator=function(){C.isNone(this._octree)&&50<this._objects.length&&this._createOctree();return this._octree};y.shaderTransformationChanged=function(){this.invalidateSpatialQueryAccelerator();this.events.emit("shaderTransformationChanged",this)};y.invalidateSpatialQueryAccelerator=function(){this._octree=C.destroyMaybe(this._octree)};y._createOctree=function(){this._octree=new r(t=>t.boundingVolumeWorldSpace.bounds);
this._octree.add(this._objects.data,this._objects.length)};m._createClass(x,[{key:"objects",get:function(){return this._objects}}]);return x}(q.ContentObject);d.WebGLLayer=q;d.isWebGLLayer=function(u){return C.isSome(u)&&0===u.type};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/DirtyEvents":function(){define(["exports"],function(d){d.DirtyEventNames="layerObjectAdded layerObjectRemoved layerObjectsAdded layerObjectsRemoved shaderTransformationChanged objectTransformation visibilityChanged occlusionChanged highlightChanged objectGeometryAdded objectGeometryRemoved vertexAttrsUpdated".split(" ");
Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/Octree":function(){define("../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../core/ObjectPool ../../../../core/PooledArray ../../../../chunks/vec3 ../../../../chunks/vec3f64 ../../../../geometry/support/frustum ../../../../geometry/support/ray ../../../../chunks/sphere ./Util".split(" "),function(d,m,v,B,C,A,q,g,r,u){function x(R,Z,N){N[0]=R[0]+Z;N[1]=R[1]+Z;N[2]=R[2]+Z}function y(R,Z,
N,S){if(1===Z)R=N(R[0]),r.copy(R,S);else{z[0]=Infinity;z[1]=Infinity;z[2]=Infinity;f[0]=-Infinity;f[1]=-Infinity;f[2]=-Infinity;for(let Q=0;Q<Z;Q++){var O=N(R[Q]);if(c(O[3])){var J=z,K=O;J[0]=Math.min(J[0],K[0]-K[3]);J[1]=Math.min(J[1],K[1]-K[3]);J[2]=Math.min(J[2],K[2]-K[3]);J=f;J[0]=Math.max(J[0],O[0]+O[3]);J[1]=Math.max(J[1],O[1]+O[3]);J[2]=Math.max(J[2],O[2]+O[3])}}C.lerp(S,z,f,.5);S[3]=Math.max(f[0]-z[0],f[1]-z[1],f[2]-z[2])/2}}function t(R,Z,N){if(!V.length)for(var S=0;8>S;++S)V.push({index:0,
distance:0});for(S=0;8>S;++S){const O=k[S];V.data[S].index=S;V.data[S].distance=n(R,Z,O)}V.sort((O,J)=>O.distance-J.distance);for(R=0;8>R;++R)N[R]=V.data[R].index}function l(R,Z){let N=Infinity,S=null;for(let O=0;8>O;++O){const J=n(R,Z,e[O]);J<N&&(N=J,S=e[O])}return S}function n(R,Z,N){return Z*(R[0]*N[0]+R[1]*N[1]+R[2]*N[2])}function c(R){return!isNaN(R)&&-Infinity!==R&&Infinity!==R&&0<R}let a=function(){function R(N,S){this._objectToBoundingSphere=N;this._maximumObjectsPerNode=10;this._maximumDepth=
20;this._degenerateObjects=new Set;this._root=new b;this._objectCount=0;S&&(void 0!==S.maximumObjectsPerNode&&(this._maximumObjectsPerNode=S.maximumObjectsPerNode),void 0!==S.maximumDepth&&(this._maximumDepth=S.maximumDepth))}var Z=R.prototype;Z.destroy=function(){this._degenerateObjects.clear();b.clearPool();w[0]=null;E.prune();V.prune()};Z.add=function(N,S=N.length){this._objectCount+=S;this._grow(N,S);const O=b.acquire();for(let J=0;J<S;J++){const K=N[J];this._isDegenerate(K)?this._degenerateObjects.add(K):
(O.init(this._root),this._add(K,O))}b.release(O)};Z.remove=function(N,S=null){this._objectCount-=N.length;const O=b.acquire();for(const J of N)N=m.isSome(S)?S:r.copy(this._objectToBoundingSphere(J),F),c(N[3])?(O.init(this._root),this._remove(J,N,O)):this._degenerateObjects.delete(J);b.release(O);this._shrink()};Z.update=function(N,S){if(c(S[3])||!this._isDegenerate(N))w[0]=N,N=w,this.remove(N,S),this.add(N)};Z.forEachAlongRay=function(N,S,O){const J=g.wrap(N,S);this._forEachNode(this._root,K=>{if(!this._intersectsNode(J,
K))return!1;K=K.node;K.terminals.forAll(Q=>{this._intersectsObject(J,Q)&&O(Q)});null!==K.residents&&K.residents.forAll(Q=>{this._intersectsObject(J,Q)&&O(Q)});return!0})};Z.forEachAlongRayWithVerticalOffset=function(N,S,O,J){const K=g.wrap(N,S);this._forEachNode(this._root,Q=>{if(!this._intersectsNodeWithOffset(K,Q,J))return!1;Q=Q.node;Q.terminals.forAll(da=>{this._intersectsObjectWithOffset(K,da,J)&&O(da)});null!==Q.residents&&Q.residents.forAll(da=>{this._intersectsObjectWithOffset(K,da,J)&&O(da)});
return!0})};Z.forEach=function(N){this._forEachNode(this._root,S=>{S=S.node;S.terminals.forAll(N);null!==S.residents&&S.residents.forAll(N);return!0});this._degenerateObjects.forEach(N)};Z.forEachDegenerateObject=function(N){this._degenerateObjects.forEach(N)};Z.findClosest=function(N,S,O,J=()=>!0,K=Infinity){let Q=Infinity,da=Infinity,ma=null;const wa=l(N,S),ya=xa=>{--K;if(J(xa)){var G=this._objectToBoundingSphere(xa);if(q.intersectsSphere(O,G)){var I=n(N,S,r.getCenter(G)),aa=I-G[3];G=I+G[3];aa<
Q&&(Q=aa,da=G,ma=xa)}}};this._forEachNodeDepthOrdered(this._root,xa=>{if(0>=K||!q.intersectsSphere(O,xa.bounds))return!1;C.scale(p,wa,xa.halfSize);C.add(p,p,xa.bounds);if(n(N,S,p)>da)return!1;xa=xa.node;xa.terminals.forAll(G=>ya(G));null!==xa.residents&&xa.residents.forAll(G=>ya(G));return!0},N,S);return ma};Z.forEachInDepthRange=function(N,S,O,J,K,Q,da){let ma=-Infinity,wa=Infinity;const ya={setRange:ca=>{1===O?(ma=Math.max(ma,ca.near),wa=Math.min(wa,ca.far)):(ma=Math.max(ma,-ca.far),wa=Math.min(wa,
-ca.near))}};ya.setRange(J);const xa=n(S,O,N),G=l(S,O),I=l(S,-1*O),aa=ca=>{if(da(ca)){var ha=this._objectToBoundingSphere(ca),ba=r.getCenter(ha);ba=n(S,O,ba)-xa;var ia=ba+ha[3];ba-ha[3]>wa||ia<ma||!q.intersectsSphere(Q,ha)||K(ca,ya)}};this._forEachNodeDepthOrdered(this._root,ca=>{if(!q.intersectsSphere(Q,ca.bounds))return!1;C.scale(p,G,ca.halfSize);C.add(p,p,ca.bounds);if(n(S,O,p)-xa>wa)return!1;C.scale(p,I,ca.halfSize);C.add(p,p,ca.bounds);if(n(S,O,p)-xa<ma)return!1;ca=ca.node;ca.terminals.forAll(ha=>
aa(ha));null!==ca.residents&&ca.residents.forAll(ha=>aa(ha));return!0},S,O)};Z.forEachNode=function(N){this._forEachNode(this._root,S=>N(S.node,S.bounds,S.halfSize))};Z._intersectsNode=function(N,S){x(S.bounds,2*-S.halfSize,z);x(S.bounds,2*S.halfSize,f);return u.rayBoxTest(N.origin,N.direction,z,f)};Z._intersectsNodeWithOffset=function(N,S,O){x(S.bounds,2*-S.halfSize,z);x(S.bounds,2*S.halfSize,f);O.applyToMinMax(z,f);return u.rayBoxTest(N.origin,N.direction,z,f)};Z._intersectsObject=function(N,S){S=
this._objectToBoundingSphere(S);return 0<S[3]?r.intersectsRay(S,N):!0};Z._intersectsObjectWithOffset=function(N,S,O){S=this._objectToBoundingSphere(S);return 0<S[3]?r.intersectsRay(O.applyToBoundingSphere(S),N):!0};Z._forEachNode=function(N,S){N=b.acquire().init(N);const O=[N];for(;0!==O.length;){N=O.pop();if(S(N)&&!N.isLeaf())for(let J=0;J<N.node.children.length;J++)N.node.children[J]&&O.push(b.acquire().init(N).advance(J));b.release(N)}};Z._forEachNodeDepthOrdered=function(N,S,O,J=1){N=b.acquire().init(N);
const K=[N];for(t(O,J,H);0!==K.length;){N=K.pop();if(S(N)&&!N.isLeaf())for(O=7;0<=O;--O)J=H[O],N.node.children[J]&&K.push(b.acquire().init(N).advance(J));b.release(N)}};Z._remove=function(N,S,O){E.clear();S=O.advanceTo(S,(J,K)=>{E.push(J.node);E.push(K)})?O.node.terminals:O.node.residents;S.removeUnordered(N);if(0===S.length)for(N=E.length-2;0<=N&&this._purge(E.data[N],E.data[N+1]);N-=2);};Z._nodeIsEmpty=function(N){if(0!==N.terminals.length)return!1;if(null!==N.residents)return 0===N.residents.length;
for(let S=0;S<N.children.length;S++)if(N.children[S])return!1;return!0};Z._purge=function(N,S){0<=S&&(N.children[S]=null);return this._nodeIsEmpty(N)?(null===N.residents&&(N.residents=new B({shrink:!0})),!0):!1};Z._add=function(N,S){S.advanceTo(this._objectToBoundingSphere(N))?S.node.terminals.push(N):(S.node.residents.push(N),S.node.residents.length>this._maximumObjectsPerNode&&S.depth<this._maximumDepth&&this._split(S))};Z._split=function(N){const S=N.node.residents;N.node.residents=null;for(let O=
0;O<S.length;O++){const J=b.acquire().init(N);this._add(S.getItemAt(O),J);b.release(J)}};Z._grow=function(N,S){0!==S&&(y(N,S,O=>this._objectToBoundingSphere(O),L),c(L[3])&&!this._fitsInsideTree(L)&&(this._nodeIsEmpty(this._root.node)?(r.copy(L,this._root.bounds),this._root.halfSize=1.25*L[3]):(N=this._rootBoundsForRootAsSubNode(L),this._placingRootViolatesMaxDepth(N)?this._rebuildTree(L,N):this._growRootAsSubNode(N),b.release(N))))};Z._rebuildTree=function(N,S){C.copy(W,S.bounds);W[3]=S.halfSize;
y([N,W],2,O=>O,M);N=b.acquire().init(this._root);this._root.initFrom(null,M,1.25*M[3]);this._forEachNode(N,O=>{this.add(O.node.terminals.data,O.node.terminals.length);null!==O.node.residents&&this.add(O.node.residents.data,O.node.residents.length);return!0});b.release(N)};Z._placingRootViolatesMaxDepth=function(N){const S=Math.log(N.halfSize/this._root.halfSize)*Math.LOG2E;let O=0;this._forEachNode(this._root,J=>{O=Math.max(O,J.depth);return O+S<=this._maximumDepth});return O+S>this._maximumDepth};
Z._rootBoundsForRootAsSubNode=function(N){var S=N[3];let O=-Infinity;const J=this._root.bounds,K=this._root.halfSize;for(var Q=0;3>Q;Q++){var da=Math.max(0,Math.ceil((J[Q]-K-(N[Q]-S))/(2*K)));const ma=Math.max(0,Math.ceil((N[Q]+S-(J[Q]+K))/(2*K)))+1;O=Math.max(O,2**Math.ceil(Math.log(da+ma)*Math.LOG2E));P[Q].min=da;P[Q].max=ma}for(N=0;3>N;N++)S=P[N].min,Q=P[N].max,da=(O-(S+Q))/2,S+=Math.ceil(da),Q+=Math.floor(da),D[N]=J[N]-K-S*K*2+(Q+S)*K;D[3]=O*K*h;return b.acquire().initFrom(null,D,O*K,0)};Z._growRootAsSubNode=
function(N){const S=this._root.node;C.copy(L,this._root.bounds);L[3]=this._root.halfSize;this._root.init(N);N.advanceTo(L,null,!0);N.node.children=S.children;N.node.residents=S.residents;N.node.terminals=S.terminals};Z._shrink=function(){for(;;){const N=this._findShrinkIndex();if(-1===N)break;this._root.advance(N);this._root.depth=0}};Z._findShrinkIndex=function(){if(0!==this._root.node.terminals.length||this._root.isLeaf())return-1;let N=null;const S=this._root.node.children;let O=0,J=0;for(;J<S.length&&
null==N;)O=J++,N=S[O];for(;J<S.length;)if(S[J++])return-1;return O};Z._isDegenerate=function(N){N=this._objectToBoundingSphere(N)[3];return!c(N)};Z._fitsInsideTree=function(N){const S=this._root.bounds,O=this._root.halfSize;return N[3]<=O&&N[0]>=S[0]-O&&N[0]<=S[0]+O&&N[1]>=S[1]-O&&N[1]<=S[1]+O&&N[2]>=S[2]-O&&N[2]<=S[2]+O};d._createClass(R,[{key:"bounds",get:function(){return this._root.bounds}},{key:"halfSize",get:function(){return this._root.halfSize}},{key:"root",get:function(){return this._root.node}},
{key:"maximumObjectsPerNode",get:function(){return this._maximumObjectsPerNode}},{key:"maximumDepth",get:function(){return this._maximumDepth}},{key:"objectCount",get:function(){return this._objectCount}}]);return R}(),b=function(){function R(){this.bounds=r.create();this.halfSize=0;this.initFrom(null,null,0,0)}var Z=R.prototype;Z.init=function(N){return this.initFrom(N.node,N.bounds,N.halfSize,N.depth)};Z.initFrom=function(N,S,O,J=this.depth){this.node=m.isSome(N)?N:R.createEmptyNode();m.isSome(S)&&
r.copy(S,this.bounds);this.halfSize=O;this.depth=J;return this};Z.advance=function(N){let S=this.node.children[N];S||(S=R.createEmptyNode(),this.node.children[N]=S);this.node=S;this.halfSize/=2;this.depth++;N=k[N];this.bounds[0]+=N[0]*this.halfSize;this.bounds[1]+=N[1]*this.halfSize;this.bounds[2]+=N[2]*this.halfSize;this.bounds[3]=this.halfSize*h;return this};Z.advanceTo=function(N,S,O=!1){for(;;){if(this.isTerminalFor(N))return S&&S(this,-1),!0;if(this.isLeaf()){if(!O)return S&&S(this,-1),!1;this.node.residents=
null}const J=this._childIndex(N);S&&S(this,J);this.advance(J)}};Z.isLeaf=function(){return null!=this.node.residents};Z.isTerminalFor=function(N){return N[3]>this.halfSize/2};Z._childIndex=function(N){const S=this.bounds;return(S[0]<N[0]?1:0)+(S[1]<N[1]?2:0)+(S[2]<N[2]?4:0)};R.createEmptyNode=function(){return{children:[null,null,null,null,null,null,null,null],terminals:new B({shrink:!0}),residents:new B({shrink:!0})}};R.acquire=function(){return R._pool.acquire()};R.release=function(N){R._pool.release(N)};
R.clearPool=function(){R._pool.prune()};return R}();b._pool=new v(b);const k=[A.fromValues(-1,-1,-1),A.fromValues(1,-1,-1),A.fromValues(-1,1,-1),A.fromValues(1,1,-1),A.fromValues(-1,-1,1),A.fromValues(1,-1,1),A.fromValues(-1,1,1),A.fromValues(1,1,1)],e=[A.fromValues(-1,-1,-1),A.fromValues(-1,-1,1),A.fromValues(-1,1,-1),A.fromValues(-1,1,1),A.fromValues(1,-1,-1),A.fromValues(1,-1,1),A.fromValues(1,1,-1),A.fromValues(1,1,1)],h=Math.sqrt(3),w=[null],D=r.create(),p=A.create(),z=A.create(),f=A.create(),
E=new B,F=r.create(),L=r.create(),W=r.create(),M=r.create(),P=[{min:0,max:0},{min:0,max:0},{min:0,max:0}],V=new B,H=[0,0,0,0,0,0,0,0];return a})},"esri/views/3d/webgl-engine/lib/GeometryUtil":function(){define("../../../../chunks/vec3 ../../../../chunks/vec3f32 ../../../../chunks/vec3f64 ../../../../geometry/support/plane ../../../../geometry/support/ray ./BufferVectorMath ./Geometry ./geometryDataUtils ./Util".split(" "),function(d,m,v,B,C,A,q,g,r){const u=A.Vec3Compact;var x;(function(c){const a=
[[-.5,-.5,.5],[.5,-.5,.5],[.5,.5,.5],[-.5,.5,.5],[-.5,-.5,-.5],[.5,-.5,-.5],[.5,.5,-.5],[-.5,.5,-.5]],b=[0,0,1,-1,0,0,1,0,0,0,-1,0,0,1,0,0,0,-1],k=[0,0,1,0,1,1,0,1],e=new Uint16Array([0,1,2,2,3,0,4,0,3,3,7,4,1,5,6,6,2,1,1,0,4,4,5,1,3,2,6,6,7,3,5,4,7,7,6,5]),h=new Uint16Array(36);for(var w=0;6>w;w++)for(let p=0;6>p;p++)h[6*w+p]=w;const D=new Uint16Array(36);for(w=0;6>w;w++)D[6*w]=0,D[6*w+1]=1,D[6*w+2]=2,D[6*w+3]=2,D[6*w+4]=3,D[6*w+5]=0;c.createGeometry=function(p){Array.isArray(p)||(p=[p,p,p]);const z=
Array(24);for(let f=0;8>f;f++)z[3*f]=a[f][0]*p[0],z[3*f+1]=a[f][1]*p[1],z[3*f+2]=a[f][2]*p[2];return new q.Geometry([["position",{size:3,data:z,exclusive:!0}],["normal",{size:3,data:b}],["uv0",{size:2,data:k}]],[["position",e],["normal",h],["uv0",D]])}})(x||(x={}));var y;(function(c){const a=[[-.5,0,-.5],[.5,0,-.5],[.5,0,.5],[-.5,0,.5],[0,-.5,0],[0,.5,0]],b=[0,1,-1,1,1,0,0,1,1,-1,1,0,0,-1,-1,1,-1,0,0,-1,1,-1,-1,0],k=new Uint16Array([5,1,0,5,2,1,5,3,2,5,0,3,4,0,1,4,1,2,4,2,3,4,3,0]),e=new Uint16Array([0,
0,0,1,1,1,2,2,2,3,3,3,4,4,4,5,5,5,6,6,6,7,7,7]);c.createGeometry=function(h){Array.isArray(h)||(h=[h,h,h]);const w=Array(18);for(let D=0;6>D;D++)w[3*D]=a[D][0]*h[0],w[3*D+1]=a[D][1]*h[1],w[3*D+2]=a[D][2]*h[2];return new q.Geometry([["position",{size:3,data:w,exclusive:!0}],["normal",{size:3,data:b}]],[["position",k],["normal",e]])}})(y||(y={}));var t;(function(c){const a=m.fromValues(-.5,0,-.5),b=m.fromValues(.5,0,-.5),k=m.fromValues(0,0,.5),e=m.fromValues(0,.5,0),h=m.create(),w=m.create(),D=m.create(),
p=m.create(),z=m.create();d.subtract(h,a,e);d.subtract(w,a,b);d.cross(D,h,w);d.normalize(D,D);d.subtract(h,b,e);d.subtract(w,b,k);d.cross(p,h,w);d.normalize(p,p);d.subtract(h,k,e);d.subtract(w,k,a);d.cross(z,h,w);d.normalize(z,z);const f=[a,b,k,e],E=[0,-1,0,D[0],D[1],D[2],p[0],p[1],p[2],z[0],z[1],z[2]],F=[0,1,2,3,1,0,3,2,1,3,0,2],L=[0,0,0,1,1,1,2,2,2,3,3,3];c.createGeometry=function(W){Array.isArray(W)||(W=[W,W,W]);const M=Array(12);for(let P=0;4>P;P++)M[3*P]=f[P][0]*W[0],M[3*P+1]=f[P][1]*W[1],M[3*
P+2]=f[P][2]*W[2];return new q.Geometry([["position",{size:3,data:M,exclusive:!0}],["normal",{size:3,data:E}]],[["position",new Uint16Array(F)],["normal",new Uint16Array(L)]])}})(t||(t={}));var l;(function(c){function a(e,h,w,D,p){if(Math.abs(d.dot(h,e))>p)return!1;d.cross(w,e,h);d.normalize(w,w);d.cross(D,w,e);d.normalize(D,D);return!0}function b(e,h,w,D,p,z,f){return a(e,h,p,z,f)||a(e,w,p,z,f)||a(e,D,p,z,f)}c.createBoxGeometry=x.createGeometry;c.createDiamondGeometry=y.createGeometry;c.createTetrahedronGeometry=
t.createGeometry;c.createSphereGeometry=function(e,h,w,D={uv:!0}){var p=-Math.PI,z=2*Math.PI,f=-Math.PI/2,E=Math.PI;h=Math.max(3,Math.floor(h));const F=Math.max(2,Math.floor(w));var L=(h+1)*(F+1);w=new Float32Array(3*L);const W=new Float32Array(3*L);L=new Float32Array(2*L);const M=[];let P=0;for(var V=0;V<=F;V++){var H=[];const Z=V/F,N=f+Z*E,S=Math.cos(N);for(let O=0;O<=h;O++){const J=O/h;var R=p+J*z;const K=Math.cos(R)*S,Q=Math.sin(N);R=-Math.sin(R)*S;w[3*P]=K*e;w[3*P+1]=Q*e;w[3*P+2]=R*e;W[3*P]=
K;W[3*P+1]=Q;W[3*P+2]=R;L[2*P]=J;L[2*P+1]=Z;H.push(P);++P}M.push(H)}e=new Uint32Array(2*h*(F-1)*3);P=0;for(p=0;p<F;p++)for(z=0;z<h;z++)f=M[p][z],E=M[p][z+1],V=M[p+1][z+1],H=M[p+1][z],0===p?(e[P++]=f,e[P++]=V,e[P++]=H):p===F-1?(e[P++]=f,e[P++]=E,e[P++]=V):(e[P++]=f,e[P++]=E,e[P++]=V,e[P++]=V,e[P++]=H,e[P++]=f);h=[["position",e],["normal",e]];w=[["position",{size:3,data:w,exclusive:!0}],["normal",{size:3,data:W,exclusive:!0}]];D.uv&&(w.push(["uv0",{size:2,data:L,exclusive:!0}]),h.push(["uv0",e]));D.offset&&
(h[0][0]="offset",w[0][0]="offset",h.push(["position",new Uint32Array(e.length)]),w.push(["position",{size:3,data:Float64Array.from(D.offset),exclusive:!0}]));return new q.Geometry(w,h)};c.createPolySphereGeometry=function(e,h,w){function D(E,F){E>F&&([E,F]=[F,E]);const L=E.toString()+"."+F.toString();if(f[L])return f[L];let W=p.length;p.length+=3;u.add(p,3*E,p,3*F,p,W);u.scale(p,W,e/u.length(p,W));W/=3;return f[L]=W}let p;w?(p=[0,-1,0,1,0,0,0,0,1,-1,0,0,0,0,-1,0,1,0],w=new Uint32Array([0,1,2,0,2,
3,0,3,4,0,4,1,1,5,2,2,5,3,3,5,4,4,5,1])):(w=e*(1+Math.sqrt(5))/2,p=[-e,w,0,e,w,0,-e,-w,0,e,-w,0,0,-e,w,0,e,w,0,-e,-w,0,e,-w,w,0,-e,w,0,e,-w,0,-e,-w,0,e],w=new Uint32Array([0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1]));for(var z=0;z<p.length;z+=3)u.scale(p,z,e/u.length(p,z));let f={};for(z=0;z<h;z++){const E=w.length,F=new Uint32Array(4*E);for(let L=0;L<E;L+=3){const W=w[L],M=w[L+1],P=w[L+2],V=D(W,M),H=D(M,P),R=
D(P,W),Z=4*L;F[Z]=W;F[Z+1]=V;F[Z+2]=R;F[Z+3]=M;F[Z+4]=H;F[Z+5]=V;F[Z+6]=P;F[Z+7]=R;F[Z+8]=H;F[Z+9]=V;F[Z+10]=H;F[Z+11]=R}w=F;f={}}h=new Float32Array(p);for(z=0;z<h.length;z+=3)u.normalize(h,z);w=[["position",w],["normal",w]];h=[["position",{size:3,data:new Float32Array(p),exclusive:!0}],["normal",{size:3,data:h,exclusive:!0}]];return new q.Geometry(h,w)};c.createPointGeometry=function(e,h,w,D,p,z,f){h=h?[h[0],h[1],h[2]]:[0,0,0];e=e?[e[0],e[1],e[2]]:[0,0,1];z=z||[0,0];w=[["position",{size:3,data:h,
exclusive:!0}],["normal",{size:3,data:e,exclusive:!0}],["uv0",{size:z.length,data:z}],["color",{size:4,data:w?[255*w[0],255*w[1],255*w[2],3<w.length?255*w[3]:255]:[255,255,255,255],exclusive:!0}],["size",{size:2,data:null!=D&&2===D.length?D:[1,1]}]];null!=p&&(p=new Float32Array([p[0],p[1],p[2],p[3]]),w.push(["auxpos1",{size:4,data:p}]));null!=f&&(f=new Float32Array([f[0],f[1],f[2],f[3]]),w.push(["auxpos2",{size:4,data:f}]));return new q.Geometry(w,null,1)};c.updatePointGeometry=function(e,h,w,D,p,
z,f,E){if(null!=e){const {data:F}=E.getMutableAttribute("normal");F[0]=e[0];F[1]=e[1];F[2]=e[2]}null!=h&&({data:e}=E.getMutableAttribute("position"),e[0]=h[0],e[1]=h[1],e[2]=h[2]);null!=w&&({data:h}=E.getMutableAttribute("color"),h[0]=w[0],h[1]=w[1],h[2]=w[2],h[3]=w[3]);null!=D&&({data:w}=E.getMutableAttribute("size"),w[0]=D[0],w[1]=D[1]);null!=p&&({data:D}=E.getMutableAttribute("auxpos1"),D[0]=p[0],D[1]=p[1],D[2]=p[2],D[3]=p[3]);null!=z&&({data:p}=E.getMutableAttribute("uv0"),p[0]=z[0],p[1]=z[1]);
null!=f&&({data:z}=E.getMutableAttribute("auxpos2"),z[0]=f[0],z[1]=f[1],z[2]=f[2],z[3]=f[3])};c.createPointArrayGeometry=function(e,h){const w=new Float32Array(3*e.length),D=new Float32Array(h?3*e.length:3),p=new Uint32Array(e.length),z=new Uint32Array(e.length);for(let f=0;f<e.length;f++)w[3*f]=e[f][0],w[3*f+1]=e[f][1],w[3*f+2]=e[f][2],h&&(D[3*f]=h[f][0],D[3*f+1]=h[f][1],D[3*f+2]=h[f][2]),p[f]=f,z[f]=0;h||(D[0]=0,D[1]=1,D[2]=0);return new q.Geometry([["position",{size:3,data:w,exclusive:!0}],["normal",
{size:3,data:D,exclusive:!0}],["uv0",{size:2,data:[0,0],exclusive:!0}]],[["position",p],["normal",h?p:z],["uv0",z]],1)};c.createTriangleGeometry=function(){const e=new Uint16Array([0,1,2]),h=new Uint16Array([0,0,0]),w=new Uint16Array([0,0,0]);return new q.Geometry([["position",{size:3,data:[0,0,0,0,0,100,100,0,0],exclusive:!0}],["normal",{size:3,data:[0,1,0],exclusive:!0}],["uv0",{size:2,data:[0,0],exclusive:!0}]],[["position",e],["normal",h],["uv0",w]])};const k=[[-1,-1,0],[1,-1,0],[1,1,0],[-1,1,
0]];c.createSquareGeometry=function(e=k){const h=Array(12);for(var w=0;4>w;w++)for(let D=0;3>D;D++)h[3*w+D]=e[w][D];e=new Uint32Array([0,1,2,2,3,0]);w=new Uint32Array([0,0,0,0,0,0]);return new q.Geometry([["position",{size:3,data:h,exclusive:!0}],["normal",{size:3,data:[0,0,1],exclusive:!0}],["uv0",{size:2,data:[0,0,1,0,1,1,0,1],exclusive:!0}],["color",{size:4,data:[255,255,255,255],exclusive:!0}]],[["position",e],["normal",w],["uv0",e],["color",w]])};c.createConeGeometry=function(e,h,w,D,p=!0,z=
!0){var f=0,E=m.fromValues(0,f,0),F=m.fromValues(0,f+e,0),L=m.fromValues(0,-1,0),W=m.fromValues(0,1,0);D&&(f=e,F=m.fromValues(0,0,0),E=m.fromValues(0,f,0),L=m.fromValues(0,1,0),W=m.fromValues(0,-1,0));E=[F,E];L=[L,W];W=w+2;F=Math.sqrt(e*e+h*h);if(D)for(D=w-1;0<=D;D--){var M=2*Math.PI/w*D,P=m.fromValues(Math.cos(M)*h,f,Math.sin(M)*h);E.push(P);M=m.fromValues(e*Math.cos(M)/F,-h/F,e*Math.sin(M)/F);L.push(M)}else for(D=0;D<w;D++)M=2*Math.PI/w*D,P=m.fromValues(Math.cos(M)*h,f,Math.sin(M)*h),E.push(P),
M=m.fromValues(e*Math.cos(M)/F,h/F,e*Math.sin(M)/F),L.push(M);e=new Uint32Array(6*(w+2));w=new Uint32Array(6*(w+2));f=h=0;if(p){for(p=3;p<E.length;p++)e[h++]=1,e[h++]=p-1,e[h++]=p,w[f++]=0,w[f++]=0,w[f++]=0;e[h++]=E.length-1;e[h++]=2;e[h++]=1;w[f++]=0;w[f++]=0;w[f++]=0}if(z){for(z=3;z<E.length;z++)e[h++]=z,e[h++]=z-1,e[h++]=0,w[f++]=z,w[f++]=z-1,w[f++]=1;e[h++]=0;e[h++]=2;e[h++]=E.length-1;w[f++]=1;w[f++]=2;w[f++]=L.length-1}z=new Float32Array(3*W);for(p=0;p<W;p++)z[3*p]=E[p][0],z[3*p+1]=E[p][1],
z[3*p+2]=E[p][2];E=new Float32Array(3*W);for(p=0;p<W;p++)E[3*p]=L[p][0],E[3*p+1]=L[p][1],E[3*p+2]=L[p][2];return new q.Geometry([["position",{size:3,data:z,exclusive:!0}],["normal",{size:3,data:E,exclusive:!0}]],[["position",e],["normal",w]])};c.createCylinderGeometry=function(e,h,w,D,p,z){D=D?m.clone(D):m.fromValues(1,0,0);p=p?m.clone(p):m.fromValues(0,0,0);z=null==z?!0:z;var f=m.create();d.normalize(f,D);const E=m.create();d.scale(E,f,Math.abs(e));const F=m.create();d.scale(F,E,-.5);d.add(F,F,p);
const L=m.fromValues(0,1,0);.2>Math.abs(1-d.dot(f,L))&&d.set(L,0,0,1);const W=m.create();d.cross(W,f,L);d.normalize(W,W);d.cross(L,W,f);e=2*w+(z?2:0);p=w+(z?2:0);D=new Float32Array(3*e);const M=new Float32Array(3*p),P=new Float32Array(2*e),V=new Uint32Array(3*w*(z?4:2)),H=new Uint32Array(3*w*(z?4:2));z&&(D[3*(e-2)]=F[0],D[3*(e-2)+1]=F[1],D[3*(e-2)+2]=F[2],P[2*(e-2)]=0,P[2*(e-2)+1]=0,D[3*(e-1)]=D[3*(e-2)]+E[0],D[3*(e-1)+1]=D[3*(e-2)+1]+E[1],D[3*(e-1)+2]=D[3*(e-2)+2]+E[2],P[2*(e-1)]=1,P[2*(e-1)+1]=
1,M[3*(p-2)]=-f[0],M[3*(p-2)+1]=-f[1],M[3*(p-2)+2]=-f[2],M[3*(p-1)]=f[0],M[3*(p-1)+1]=f[1],M[3*(p-1)+2]=f[2]);f=function(O,J,K){V[O]=J;H[O]=K};let R=0;const Z=m.create(),N=m.create();for(let O=0;O<w;O++){var S=2*Math.PI/w*O;d.scale(Z,L,Math.sin(S));d.scale(N,W,Math.cos(S));d.add(Z,Z,N);M[3*O]=Z[0];M[3*O+1]=Z[1];M[3*O+2]=Z[2];d.scale(Z,Z,h);d.add(Z,Z,F);D[3*O]=Z[0];D[3*O+1]=Z[1];D[3*O+2]=Z[2];P[2*O]=O/w;P[2*O+1]=0;D[3*(O+w)]=D[3*O]+E[0];D[3*(O+w)+1]=D[3*O+1]+E[1];D[3*(O+w)+2]=D[3*O+2]+E[2];P[2*(O+
w)]=O/w;P[2*O+1]=1;S=(O+1)%w;f(R++,O,O);f(R++,O+w,O);f(R++,S,S);f(R++,S,S);f(R++,O+w,O);f(R++,S+w,S)}if(z){for(h=0;h<w;h++)z=(h+1)%w,f(R++,e-2,p-2),f(R++,h,p-2),f(R++,z,p-2);for(h=0;h<w;h++)z=(h+1)%w,f(R++,h+w,p-1),f(R++,e-1,p-1),f(R++,z+w,p-1)}return new q.Geometry([["position",{size:3,data:D,exclusive:!0}],["normal",{size:3,data:M,exclusive:!0}],["uv0",{size:2,data:P,exclusive:!0}]],[["position",V],["normal",H],["uv0",V]])};c.createTubeGeometry=function(e,h,w,D,p){w=w||10;D=null!=D?D:!0;r.assert(1<
e.length);const z=[],f=[];for(let E=0;E<w;E++){z.push([0,-E-1,-((E+1)%w)-1]);const F=E/w*2*Math.PI;f.push([Math.cos(F)*h,Math.sin(F)*h])}return c.createPathExtrusionGeometry(f,e,[[0,0,0]],z,D,p)};c.createPathExtrusionGeometry=function(e,h,w,D,p,z=m.fromValues(0,0,0)){var f=e.length;const E=new Float32Array(h.length*f*3+(6*w.length||0)),F=new Float32Array(h.length*f*3+(w?6:0));var L=(h.length-1)*f*6+6*D.length;const W=new Uint32Array(L);L=new Uint32Array(L);let M=0;var P=0;let V=0,H=0;const R=m.create(),
Z=m.create(),N=m.create(),S=m.create(),O=m.create(),J=m.create(),K=m.create(),Q=v.create(),da=m.create(),ma=m.create(),wa=m.create(),ya=m.create(),xa=m.create(),G=B.create();d.set(da,0,1,0);d.subtract(Z,h[1],h[0]);d.normalize(Z,Z);p?(d.add(Q,h[0],z),d.normalize(N,Q)):d.set(N,0,0,1);b(Z,N,da,da,O,N,.99619469809);d.copy(S,N);d.copy(ya,O);for(var I=0;I<w.length;I++)d.scale(J,O,w[I][0]),d.scale(Q,N,w[I][2]),d.add(J,J,Q),d.add(J,J,h[0]),E[M++]=J[0],E[M++]=J[1],E[M++]=J[2];F[P++]=-Z[0];F[P++]=-Z[1];F[P++]=
-Z[2];for(I=0;I<D.length;I++)W[V++]=0<D[I][0]?D[I][0]:-D[I][0]-1+w.length,W[V++]=0<D[I][1]?D[I][1]:-D[I][1]-1+w.length,W[V++]=0<D[I][2]?D[I][2]:-D[I][2]-1+w.length,L[H++]=0,L[H++]=0,L[H++]=0;I=w.length;const aa=w.length-1;for(let ha=0;ha<h.length;ha++){let ba=!1;0<ha&&(d.copy(R,Z),ha<h.length-1?(d.subtract(Z,h[ha+1],h[ha]),d.normalize(Z,Z)):ba=!0,d.add(ma,R,Z),d.normalize(ma,ma),d.add(wa,h[ha-1],S),B.fromPositionAndNormal(h[ha],ma,G),B.intersectRay(G,C.wrap(wa,R),Q)?(d.subtract(Q,Q,h[ha]),d.normalize(N,
Q),d.cross(O,ma,N),d.normalize(O,O)):b(ma,S,ya,da,O,N,.99619469809),d.copy(S,N),d.copy(ya,O));p&&(d.add(Q,h[ha],z),d.normalize(xa,Q));for(let ia=0;ia<f;ia++)if(d.scale(J,O,e[ia][0]),d.scale(Q,N,e[ia][1]),d.add(J,J,Q),d.normalize(K,J),F[P++]=K[0],F[P++]=K[1],F[P++]=K[2],d.add(J,J,h[ha]),E[M++]=J[0],E[M++]=J[1],E[M++]=J[2],!ba){var ca=(ia+1)%f;W[V++]=I+ia;W[V++]=I+f+ia;W[V++]=I+ca;W[V++]=I+ca;W[V++]=I+f+ia;W[V++]=I+f+ca;for(ca=0;6>ca;ca++)L[H++]=W[V-6+ca]-aa}I+=f}e=h[h.length-1];for(h=0;h<w.length;h++)d.scale(J,
O,w[h][0]),d.scale(Q,N,w[h][1]),d.add(J,J,Q),d.add(J,J,e),E[M++]=J[0],E[M++]=J[1],E[M++]=J[2];w=P/3;F[P++]=Z[0];F[P++]=Z[1];F[P++]=Z[2];f=I-f;for(P=0;P<D.length;P++)W[V++]=0<=D[P][0]?I+D[P][0]:-D[P][0]-1+f,W[V++]=0<=D[P][2]?I+D[P][2]:-D[P][2]-1+f,W[V++]=0<=D[P][1]?I+D[P][1]:-D[P][1]-1+f,L[H++]=w,L[H++]=w,L[H++]=w;return new q.Geometry([["position",{size:3,data:E,exclusive:!0}],["normal",{size:3,data:F,exclusive:!0}]],[["position",W],["normal",L]])};c.createPolylineGeometry=function(e,h,w){r.assert(1<
e.length,"createPolylineGeometry(): polyline needs at least 2 points");r.assert(3===e[0].length,"createPolylineGeometry(): malformed vertex");r.assert(null==h||h.length===e.length,"createPolylineGeometry: need same number of points and normals");r.assert(null==h||3===h[0].length,"createPolylineGeometry(): malformed normal");var D=new Float64Array(3*e.length);const p=new Uint32Array(2*(e.length-1));var z=0,f=0;for(var E=0;E<e.length;E++){for(var F=0;3>F;F++)D[z++]=e[E][F];0<E&&(p[f++]=E-1,p[f++]=E)}z=
[];f=[];z.push(["position",p]);f.push(["position",{size:3,data:D,exclusive:!0}]);if(h){D=new Float32Array(3*h.length);E=0;for(F=0;F<e.length;F++)for(let L=0;3>L;L++)D[E++]=h[F][L];z.push(["normal",p]);f.push(["normal",{size:3,data:D,exclusive:!0}])}w&&(f.push(["color",{size:4,data:w}]),z.push(["color",g.generateDefaultIndexArray(w.length/4)]));return new q.Geometry(f,z,2)};c.createExtrudedTriangle=function(e,h,w,D,p=0){const z=Array(18);e=[[-h,p,D/2],[w,p,D/2],[0,e+p,D/2],[-h,p,-D/2],[w,p,-D/2],[0,
e+p,-D/2]];h=new Uint16Array([0,1,2,3,0,2,2,5,3,1,4,5,5,2,1,1,0,3,3,4,1,4,3,5]);for(w=0;6>w;w++)z[3*w]=e[w][0],z[3*w+1]=e[w][1],z[3*w+2]=e[w][2];return new q.Geometry([["position",{size:3,data:z,exclusive:!0}]],[["position",h]])};c.transformInPlace=function(e,h){e=e.getMutableAttribute("position").data;for(let w=0;w<e.length;w+=3)d.set(n,e[w],e[w+1],e[w+2]),d.transformMat4(n,n,h),e[w]=n[0],e[w+1]=n[1],e[w+2]=n[2]};c.cgToGIS=function(e,h=e){var w=e.vertexAttributes;e=w.get("position").data;if(w=w.get("normal").data){var D=
h.getMutableAttribute("normal").data;for(var p=0;p<w.length;p+=3){const z=w[p+1];D[p+1]=-w[p+2];D[p+2]=z}}if(e)for(w=h.getMutableAttribute("position").data,D=0;D<e.length;D+=3)p=e[D+1],w[D+1]=-e[D+2],w[D+2]=p;return h};c.makeOrthoBasisDirUp=a;c.makeOrthoBasisDirUpFallback=b})(l||(l={}));const n=m.create();return l})},"esri/chunks/vec3f32":function(){define(["exports"],function(d){function m(){return new Float32Array(3)}function v(a){const b=new Float32Array(3);b[0]=a[0];b[1]=a[1];b[2]=a[2];return b}
function B(a,b,k){const e=new Float32Array(3);e[0]=a;e[1]=b;e[2]=k;return e}function C(a,b){return new Float32Array(a,b,3)}function A(){return m()}function q(){return B(1,1,1)}function g(){return B(1,0,0)}function r(){return B(0,1,0)}function u(){return B(0,0,1)}const x=m(),y=q(),t=g(),l=r(),n=u();var c=Object.freeze({__proto__:null,create:m,clone:v,fromValues:B,createView:C,zeros:A,ones:q,unitX:g,unitY:r,unitZ:u,ZEROS:x,ONES:y,UNIT_X:t,UNIT_Y:l,UNIT_Z:n});d.ONES=y;d.UNIT_X=t;d.UNIT_Y=l;d.UNIT_Z=
n;d.ZEROS=x;d.clone=v;d.create=m;d.createView=C;d.fromValues=B;d.ones=q;d.unitX=g;d.unitY=r;d.unitZ=u;d.vec3f32=c;d.zeros=A})},"esri/views/3d/webgl-engine/lib/BufferVectorMath":function(){define(["exports"],function(d){d.Vec3Compact=void 0;(function(m){m.length=function(v,B){const C=v[B],A=v[B+1];v=v[B+2];return Math.sqrt(C*C+A*A+v*v)};m.normalize=function(v,B){var C=v[B];const A=v[B+1],q=v[B+2];C=1/Math.sqrt(C*C+A*A+q*q);v[B]*=C;v[B+1]*=C;v[B+2]*=C};m.scale=function(v,B,C){v[B]*=C;v[B+1]*=C;v[B+
2]*=C};m.add=function(v,B,C,A,q,g=B){q=q||v;q[g]=v[B]+C[A];q[g+1]=v[B+1]+C[A+1];q[g+2]=v[B+2]+C[A+2]};m.subtract=function(v,B,C,A,q,g=B){q=q||v;q[g]=v[B]-C[A];q[g+1]=v[B+1]-C[A+1];q[g+2]=v[B+2]-C[A+2]}})(d.Vec3Compact||(d.Vec3Compact={}));Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/Geometry":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ./BoundingInfo ./ContentObject ./geometryDataUtils ./Util".split(" "),function(d,
m,v,B,C,A,q){function g(r){if(r.BYTES_PER_ELEMENT===Uint16Array.BYTES_PER_ELEMENT)return r;for(const u of r)if(65536<=u)return r;return new Uint16Array(r)}C=function(r){function u(y,t=[],l=0,n=-1){var c=r.call(this)||this;c._primitiveType=l;c.edgeIndicesLength=n;c.type=2;c._vertexAttributes=new Map;c._indices=new Map;c._boundingInfo=null;for(const [a,b]of y)b&&c._vertexAttributes.set(a,{...b});if(null==t||0===t.length){y=c._vertexAttributes.values().next().value;y=null==y?0:y.data.length/y.size;t=
A.generateDefaultIndexArray(y);c.edgeIndicesLength=0>c.edgeIndicesLength?y:c.edgeIndicesLength;for(const a of c._vertexAttributes.keys())c._indices.set(a,t)}else for(const [a,b]of t)b&&(c._indices.set(a,g(b)),"position"===a&&(c.edgeIndicesLength=0>c.edgeIndicesLength?c._indices.get(a).length:c.edgeIndicesLength));return c}m._inheritsLoose(u,r);var x=u.prototype;x.getMutableAttribute=function(y){(y=this._vertexAttributes.get(y))&&!y.exclusive&&(y.data=Array.from(y.data),y.exclusive=!0);return y};x.computeAttachmentOrigin=
function(y){return 0===this.primitiveType?this.computeAttachmentOriginTriangles(y):this.computeAttachmentOriginPoints(y)};x.computeAttachmentOriginTriangles=function(y){const t=this.indices.get("position"),l=this.vertexAttributes.get("position");return A.computeAttachmentOriginTriangles(l,t,y)};x.computeAttachmentOriginPoints=function(y){const t=this.indices.get("position"),l=this.vertexAttributes.get("position");return A.computeAttachmentOriginPoints(l,t,y)};x.invalidateBoundingInfo=function(){this._boundingInfo=
null};x._calculateBoundingInfo=function(){const y=this.indices.get("position");if(0===y.length)return null;const t=0===this.primitiveType?3:1;q.assert(0===y.length%t,"Indexing error: "+y.length+" not divisible by "+t);const l=A.generateDefaultIndexArray(y.length/t),n=this.vertexAttributes.get("position");return new B.BoundingInfo(l,t,y,n)};m._createClass(u,[{key:"vertexAttributes",get:function(){return this._vertexAttributes}},{key:"indices",get:function(){return this._indices}},{key:"indexCount",
get:function(){const y=this._indices.values().next().value;return y?y.length:0}},{key:"primitiveType",get:function(){return this._primitiveType}},{key:"faceCount",get:function(){return this.indexCount/3}},{key:"boundingInfo",get:function(){v.isNone(this._boundingInfo)&&(this._boundingInfo=this._calculateBoundingInfo());return this._boundingInfo}}]);return u}(C.ContentObject);d.Geometry=C;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/BoundingInfo":function(){define(["exports",
"../../../../core/PooledArray","../../../../chunks/vec3","../../../../chunks/vec3f64","./Util"],function(d,m,v,B,C){let A=function(){function g(u,x,y,t){this.primitiveIndices=u;this._numIndexPerPrimitive=x;this.indices=y;this.position=t;this.center=B.create();C.assert(1<=u.length);C.assert(0===y.length%this._numIndexPerPrimitive);C.assert(y.length>=u.length*this._numIndexPerPrimitive);C.assert(3===t.size||4===t.size);const {data:l,size:n}=t;t=u.length;x=n*y[this._numIndexPerPrimitive*u[0]];q.clear();
q.push(x);this.bbMin=B.fromValues(l[x],l[x+1],l[x+2]);this.bbMax=B.clone(this.bbMin);for(var c=0;c<t;++c){var a=this._numIndexPerPrimitive*u[c];for(var b=0;b<this._numIndexPerPrimitive;++b){x=n*y[a+b];q.push(x);let k=l[x];this.bbMin[0]=Math.min(k,this.bbMin[0]);this.bbMax[0]=Math.max(k,this.bbMax[0]);k=l[x+1];this.bbMin[1]=Math.min(k,this.bbMin[1]);this.bbMax[1]=Math.max(k,this.bbMax[1]);k=l[x+2];this.bbMin[2]=Math.min(k,this.bbMin[2]);this.bbMax[2]=Math.max(k,this.bbMax[2])}}v.lerp(this.center,this.bbMin,
this.bbMax,.5);this.radius=.5*Math.max(Math.max(this.bbMax[0]-this.bbMin[0],this.bbMax[1]-this.bbMin[1]),this.bbMax[2]-this.bbMin[2]);u=this.radius*this.radius;for(y=0;y<q.length;++y)x=q.getItemAt(y),t=l[x]-this.center[0],c=l[x+1]-this.center[1],x=l[x+2]-this.center[2],a=t*t+c*c+x*x,a<=u||(a=Math.sqrt(a),b=.5*(a-this.radius),this.radius+=b,u=this.radius*this.radius,a=b/a,this.center[0]+=t*a,this.center[1]+=c*a,this.center[2]+=x*a);q.clear()}var r=g.prototype;r.getCenter=function(){return this.center};
r.getBSRadius=function(){return this.radius};r.getBBMin=function(){return this.bbMin};r.getBBMax=function(){return this.bbMax};r.getChildren=function(){if(this._children)return this._children;if(1<v.squaredDistance(this.bbMin,this.bbMax)){var u=v.lerp(B.create(),this.bbMin,this.bbMax,.5),x=this.primitiveIndices.length;const n=new Uint8Array(x),c=Array(8);for(var y=0;8>y;++y)c[y]=0;const {data:a,size:b}=this.position;for(y=0;y<x;++y){var t=0;const k=this._numIndexPerPrimitive*this.primitiveIndices[y];
var l=b*this.indices[k];let e=a[l],h=a[l+1],w=a[l+2];for(let D=1;D<this._numIndexPerPrimitive;++D){l=b*this.indices[k+D];const p=a[l],z=a[l+1];l=a[l+2];p<e&&(e=p);z<h&&(h=z);l<w&&(w=l)}e<u[0]&&(t|=1);h<u[1]&&(t|=2);w<u[2]&&(t|=4);n[y]=t;++c[t]}u=0;for(y=0;8>y;++y)0<c[y]&&++u;if(2>u)return;u=Array(8);for(y=0;8>y;++y)u[y]=0<c[y]?new Uint32Array(c[y]):void 0;for(y=0;8>y;++y)c[y]=0;for(y=0;y<x;++y)t=n[y],u[t][c[t]++]=this.primitiveIndices[y];this._children=Array(8);for(x=0;8>x;++x)void 0!==u[x]&&(this._children[x]=
new g(u[x],this._numIndexPerPrimitive,this.indices,this.position))}return this._children};g.prune=function(){q.prune()};return g}();const q=new m({deallocator:null});d.BoundingInfo=A;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/geometryDataUtils":function(){define(["exports","../../../../chunks/vec3","../../../../chunks/vec3f64","../../../../geometry/support/triangle"],function(d,m,v,B){let C=(()=>{const y=new Uint32Array(131072);for(let t=0;t<y.length;++t)y[t]=
t;return y})();const A=new Uint16Array([0]),q=(()=>{const y=new Uint16Array(65536);for(let t=0;t<y.length;++t)y[t]=t;return y})(),g=v.create(),r=v.create(),u=v.create(),x=v.create();d.computeAttachmentOriginLines=function(y,t,l,n){if(!y)return!1;const {size:c,data:a}=y;m.set(n,0,0,0);m.set(x,0,0,0);let b=y=0;const k=t?t.length-1:a.length/c-1;l=k+(l?2:0);for(let w=0;w<l;w+=2){var e=w<k?w:k,h=w<k?w+1:0;e=(t?t[e]:e)*c;h=(t?t[h]:h)*c;g[0]=a[e+0];g[1]=a[e+1];g[2]=a[e+2];r[0]=a[h+0];r[1]=a[h+1];r[2]=a[h+
2];m.scale(g,m.add(g,g,r),.5);h=m.dist(g,r);0<h?(m.add(n,n,m.scale(g,g,h)),y+=h):(m.add(x,x,g),b++)}return 0!==y?(m.scale(n,n,1/y),!0):0!==b?(m.scale(n,x,1/b),!0):!1};d.computeAttachmentOriginPoints=function(y,t,l){if(!y||!t)return!1;const {size:n,data:c}=y;m.set(l,0,0,0);y=-1;let a=0;for(let b=0;b<t.length;b++){const k=t[b]*n;y!==k&&(l[0]+=c[k+0],l[1]+=c[k+1],l[2]+=c[k+2],a++);y=k}1<a&&m.scale(l,l,1/a);return 0<a};d.computeAttachmentOriginTriangles=function(y,t,l){if(!y)return!1;const {size:n,data:c}=
y;m.set(l,0,0,0);m.set(x,0,0,0);let a=y=0;for(let k=0;k<t.length-2;k+=3){var b=t[k+0]*n;const e=t[k+1]*n,h=t[k+2]*n;m.set(g,c[b+0],c[b+1],c[b+2]);m.set(r,c[e+0],c[e+1],c[e+2]);m.set(u,c[h+0],c[h+1],c[h+2]);(b=B.areaPoints3d(g,r,u))?(m.add(g,g,r),m.add(g,g,u),m.scale(g,g,1/3*b),m.add(l,l,g),y+=b):(m.add(x,x,g),m.add(x,x,r),m.add(x,x,u),a+=3)}return 0===a&&0===y?!1:0!==y?(m.scale(l,l,1/y),!0):0!==a?(m.scale(l,x,1/a),!0):!1};d.generateDefaultIndexArray=function(y){if(1===y)return A;if(y<q.length)return new Uint16Array(q.buffer,
0,y);if(y>C.length){C=new Uint32Array(Math.max(2*C.length,y));for(let t=0;t<C.length;t++)C[t]=t}return new Uint32Array(C.buffer,0,y)};d.generateIndexArray=function(y){if(1===y)return new Uint16Array(A);if(y<q.length)return new Uint16Array(q.slice(0,y));if(y>C.length){y=new Uint32Array(y);for(let t=0;t<y.length;t++)y[t]=t;return y}return new Uint32Array(C.slice(0,y))};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/geometry/support/triangle":function(){define("exports ../../core/ObjectStack ../../chunks/vec2 ../../chunks/vec3 ../../chunks/vec3f64 ./lineSegment ./vectorStacks".split(" "),
function(d,m,v,B,C,A,q){function g(n){return n?{p0:C.clone(n.p0),p1:C.clone(n.p1),p2:C.clone(n.p2)}:{p0:C.create(),p1:C.create(),p2:C.create()}}function r(n,c,a,b=g()){B.copy(b.p0,n);B.copy(b.p1,c);B.copy(b.p2,a);return b}function u(n,c,a){var b=v.distance(n,c);c=v.distance(c,a);n=v.distance(a,n);a=(b+c+n)/2;b=a*(a-b)*(a-c)*(a-n);return 0>=b?0:Math.sqrt(b)}const x=new m.ObjectStack(A.create),y=new m.ObjectStack(()=>({p0:null,p1:null,p2:null})),t=C.create(),l=C.create();d.area2d=function(n){return u(n.p0,
n.p1,n.p2)};d.areaPoints2d=u;d.areaPoints3d=function(n,c,a){B.subtract(t,c,n);B.subtract(l,a,n);return B.length(B.cross(t,t,l))/2};d.copy=function(n,c=g()){return r(n.p0,n.p1,n.p2,c)};d.create=g;d.distance2=function(n,c){var a=n.p0,b=n.p1;n=n.p2;const k=B.subtract(q.sv3d.get(),b,a),e=B.subtract(q.sv3d.get(),n,b),h=B.subtract(q.sv3d.get(),a,n),w=B.subtract(q.sv3d.get(),c,a);var D=B.subtract(q.sv3d.get(),c,b),p=B.subtract(q.sv3d.get(),c,n);const z=B.cross(k,k,h),f=B.dot(B.cross(q.sv3d.get(),k,z),w);
D=B.dot(B.cross(q.sv3d.get(),e,z),D);p=B.dot(B.cross(q.sv3d.get(),h,z),p);if(0<f&&0<D&&0<p)return c=B.dot(z,w),c*c/B.dot(z,z);a=A.distance2(A.fromValues(a,k,x.get()),c);b=A.distance2(A.fromValues(b,e,x.get()),c);c=A.distance2(A.fromValues(n,h,x.get()),c);return Math.min(a,b,c)};d.fromValues=r;d.intersectRay=function(n,c,a){const {direction:b,origin:k}=c,{p0:e,p1:h,p2:w}=n;var D=h[0]-e[0],p=h[1]-e[1],z=h[2]-e[2];n=w[0]-e[0];c=w[1]-e[1];const f=w[2]-e[2];var E=b[1]*f-c*b[2],F=b[2]*n-f*b[0];const L=
b[0]*c-n*b[1];var W=D*E+p*F+z*L;if(-1E-5<W&&1E-5>W)return!1;W=1/W;const M=k[0]-e[0],P=k[1]-e[1],V=k[2]-e[2];E=W*(M*E+P*F+V*L);if(0>E||1<E)return!1;F=P*z-p*V;z=V*D-z*M;D=M*p-D*P;p=W*(b[0]*F+b[1]*z+b[2]*D);if(0>p||1<E+p)return!1;a&&(B.scale(a,b,W*(n*F+c*z+f*D)),B.add(a,k,a));return!0};d.wrap=function(n,c,a){const b=y.get();b.p0=n;b.p1=c;b.p2=a;return b};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/materials/RibbonLineMaterial":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/Logger ../../../../core/mathUtils ../../../../core/maybe ../../../../core/screenUtils ../../../../chunks/vec2 ../../../../chunks/vec3 ../../../../chunks/vec3f64 ../../../../geometry/support/lineSegment ../../../../geometry/support/plane ../../support/buffer/InterleavedLayout ../lib/geometryDataUtils ../lib/GLMaterial ../lib/Material ../lib/Util ./VisualVariableMaterialParameters ./renderers/utils ../shaders/RibbonLineTechnique".split(" "),
function(d,m,v,B,C,A,q,g,r,u,x,y,t,l,n,c,a,b,k){function e(ya,xa,G,I,aa){for(let ca=0;ca<aa;ca++)G[I++]=ya[xa++];return I}function h(ya,xa,G){xa=xa.get("position").data;G=G?G.get("position"):null;return ya.isClosed?G?2<G.length:6<xa.length:!1}const w=v.getLogger("esri.views.3d.webgl-engine.materials.RibbonLineMaterial");v=function(ya){function xa(I){I=ya.call(this,I,p)||this;I._vertexAttributeLocations=k.ribbonVertexAttributeLocations;I.techniqueConfig=new k.RibbonLineTechniqueConfiguration;I.layout=
I.createLayout();return I}m._inheritsLoose(xa,ya);var G=xa.prototype;G.isClosed=function(I,aa){return this.params.isClosed?aa?2<aa.length:6<I.length:!1};G.dispose=function(){};G.getPassParameters=function(){return this.params};G.getTechniqueConfig=function(I,aa){this.techniqueConfig.output=I;I=C.isSome(this.params.stipplePattern);this.techniqueConfig.stippleEnabled=I;this.techniqueConfig.stippleIntegerRepeatsEnabled=I&&this.params.stippleIntegerRepeats;this.techniqueConfig.stippleOffColorEnabled=
I&&C.isSome(this.params.stippleOffColor);this.techniqueConfig.slicePlaneEnabled=this.params.slicePlaneEnabled;this.techniqueConfig.sceneHasOcludees=this.params.sceneHasOcludees;this.techniqueConfig.roundJoins="round"===this.params.join;this.techniqueConfig.roundCaps="round"===this.params.cap;this.techniqueConfig.transparent=this.params.transparent;this.techniqueConfig.polygonOffset=this.params.polygonOffset;this.techniqueConfig.writeDepth=this.params.writeDepth;this.techniqueConfig.vvColor=this.params.vvColorEnabled;
this.techniqueConfig.vvOpacity=this.params.vvOpacityEnabled;this.techniqueConfig.vvSize=this.params.vvSizeEnabled;this.techniqueConfig.innerColorEnabled=0<this.params.innerWidth&&C.isSome(this.params.innerColor);this.techniqueConfig.falloffEnabled=0<this.params.falloff;this.techniqueConfig.occluder=8===this.params.renderOccluded;this.techniqueConfig.transparencyPassType=aa?aa.transparencyPassType:3;this.techniqueConfig.multipassTerrainEnabled=aa?aa.multipassTerrainEnabled:!1;this.techniqueConfig.cullAboveGround=
aa?aa.cullAboveGround:!1;return this.techniqueConfig};G.intersect=function(I,aa,ca,ha,ba,ia,ea,T,U){U?this.intersectDrapedLineGeometry(I,ha,ia,ea):this.intersectLineGeometry(I,aa,ca,ha,this.params.width,ea)};G.intersectDrapedLineGeometry=function(I,aa,ca,ha){if(aa.options.selectionMode){aa=I.vertexAttributes.get("position").data;var ba=I.vertexAttributes.get("size"),ia=this.params.width;this.params.vvSizeEnabled?(ba=I.vertexAttributes.get("sizeFeatureAttribute").data[0],ia*=B.clamp(this.params.vvSizeOffset[0]+
ba*this.params.vvSizeFactor[0],this.params.vvSizeMinSize[0],this.params.vvSizeMaxSize[0])):ba&&(ia*=ba.data[0]);ba=ca[0];ca=ca[1];I=(ia/2+4)*I.screenToWorldRatio;ia=Number.MAX_VALUE;for(let Y=0;Y<aa.length-5;Y+=3){var ea=aa[Y],T=aa[Y+1],U=ba-ea,X=ca-T;ea=aa[Y+3]-ea;T=aa[Y+4]-T;const fa=B.clamp((ea*U+T*X)/(ea*ea+T*T),0,1);U=ea*fa-U;X=T*fa-X;X=U*U+X*X;X<ia&&(ia=X)}ia<I*I&&ha()}};G.intersectLineGeometry=function(I,aa,ca,ha,ba,ia){if(ha.options.selectionMode&&!b.isInstanceHidden(aa))if(c.isTranslationMatrix(ca)){var ea=
I.vertexAttributes;aa=ea.get("position").data;if(this.params.vvSizeEnabled){var T=ea.get("sizeFeatureAttribute").data[0];ba*=B.clamp(this.params.vvSizeOffset[0]+T*this.params.vvSizeFactor[0],this.params.vvSizeMinSize[0],this.params.vvSizeMaxSize[0])}else ea.has("size")&&(ba*=ea.get("size").data[0]);T=ha.camera;var U=W;q.copy(U,ha.point);ba=ba*T.pixelRatio/2+4*T.pixelRatio;g.set(J[0],U[0]-ba,U[1]+ba,0);g.set(J[1],U[0]+ba,U[1]+ba,0);g.set(J[2],U[0]+ba,U[1]-ba,0);g.set(J[3],U[0]-ba,U[1]-ba,0);for(var X=
0;4>X;X++)if(!T.unprojectFromRenderScreen(J[X],K[X]))return;x.fromPoints(T.eye,K[0],K[1],Q);x.fromPoints(T.eye,K[1],K[2],da);x.fromPoints(T.eye,K[2],K[3],ma);x.fromPoints(T.eye,K[3],K[0],wa);X=Number.MAX_VALUE;I=h(this.params,ea,I.indices)?aa.length-2:aa.length-5;for(ea=0;ea<I;ea+=3){f[0]=aa[ea]+ca[12];f[1]=aa[ea+1]+ca[13];f[2]=aa[ea+2]+ca[14];var Y=(ea+3)%aa.length;E[0]=aa[Y]+ca[12];E[1]=aa[Y+1]+ca[13];E[2]=aa[Y+2]+ca[14];if(!(0>x.signedDistance(Q,f)&&0>x.signedDistance(Q,E)||0>x.signedDistance(da,
f)&&0>x.signedDistance(da,E)||0>x.signedDistance(ma,f)&&0>x.signedDistance(ma,E)||0>x.signedDistance(wa,f)&&0>x.signedDistance(wa,E))){T.projectToRenderScreen(f,M);T.projectToRenderScreen(E,P);if(0>M[2]&&0<P[2])g.subtract(F,f,E),Y=T.frustum,Y=-x.signedDistance(Y[4],f)/g.dot(F,x.normal(Y[4])),g.scale(F,F,Y),g.add(f,f,F),T.projectToRenderScreen(f,M);else if(0<M[2]&&0>P[2])g.subtract(F,E,f),Y=T.frustum,Y=-x.signedDistance(Y[4],E)/g.dot(F,x.normal(Y[4])),g.scale(F,F,Y),g.add(E,E,F),T.projectToRenderScreen(E,
P);else if(0>M[2]&&0>P[2])continue;M[2]=0;P[2]=0;Y=u.distance2(u.fromPoints(M,P,R),U);Y<X&&(X=Y,g.copy(V,f),g.copy(H,E))}}ca=ha.rayBeginPoint;ha=ha.rayEndPoint;X<ba*ba&&(aa=Number.MAX_VALUE,u.closestLineSegmentPoint(u.fromPoints(V,H,R),u.fromPoints(ca,ha,Z),L)&&(g.subtract(L,L,ca),aa=g.length(L),g.scale(L,L,1/aa),aa/=g.distance(ca,ha)),ia(aa,L))}else w.error("intersection assumes a translation-only matrix")};G.computeAttachmentOrigin=function(I,aa){const ca=I.vertexAttributes;if(!ca)return null;I=
I.indices;const ha=ca.get("position");return t.computeAttachmentOriginLines(ha,I?I.get("position"):null,I&&h(this.params,ca,I),aa)};G.createLayout=function(){const I=y.newLayout().vec3f("position").f32("subdivisionFactor").vec2f("uv0").vec3f("auxpos1").vec3f("auxpos2");this.params.vvSizeEnabled?I.f32("sizeFeatureAttribute"):I.f32("size");this.params.vvColorEnabled?I.f32("colorFeatureAttribute"):I.vec4f("color");this.params.vvOpacityEnabled&&I.f32("opacityFeatureAttribute");return I};G.createBufferWriter=
function(){return new z(this.layout,this.params)};G.getGLMaterial=function(I){return 0===I.output||7===I.output||4===I.output||1===I.output?new D(I):void 0};G.validateParameterValues=function(I){"miter"!==I.join&&(I.miterLimit=0);this.requiresTransparent(I)&&(I.transparent=!0)};G.requiresTransparent=function(I){return!!(1>(I.color&&I.color[3])||0<I.innerWidth&&this.colorRequiresTransparent(I.innerColor)||I.stipplePattern&&this.colorRequiresTransparent(I.stippleOffColor)||0<I.falloff)};G.colorRequiresTransparent=
function(I){return C.isSome(I)&&1>I[3]&&0<I[3]};return xa}(n.Material);let D=function(ya){function xa(I){I=ya.call(this,I)||this;I.updateParameters();return I}m._inheritsLoose(xa,ya);var G=xa.prototype;G.updateParameters=function(I){this._technique=this._techniqueRep.releaseAndAcquire(k.RibbonLineTechnique,this._material.getTechniqueConfig(this._output,I),this._technique)};G.beginSlot=function(I){return this._technique.configuration.occluder?3===I||10===I||11===I:0===this._output||7===this._output?
(this.targetSlot=this._technique.configuration.writeDepth?5:8,I===this.targetSlot):3===I};G._updateOccludeeState=function(I){I.hasOccludees!==this._material.params.sceneHasOcludees&&this._material.setParameterValues({sceneHasOcludees:I.hasOccludees})};G.ensureParameters=function(I){0!==this._output&&7!==this._output||this._updateOccludeeState(I);this.updateParameters(I)};G.bind=function(I){this._technique.bindPass(this._material.getPassParameters(),I)};G.getPipelineState=function(I,aa){return this._technique.getPipelineState(I,
aa)};return xa}(l);const p={width:0,color:[1,1,1,1],join:"miter",cap:"butt",miterLimit:5,writeDepth:!0,polygonOffset:!1,stipplePattern:null,stippleIntegerRepeats:!1,stippleOffColor:null,slicePlaneEnabled:!1,vvFastUpdate:!1,transparent:!1,isClosed:!1,falloff:0,innerWidth:0,innerColor:null,sceneHasOcludees:!1,...n.materialParametersDefaults,...a.Default};let z=function(){function ya(G,I){this.params=I;this.numJoinSubdivisions=0;this.vertexBufferLayout=G;switch(this.params.join){case "miter":case "bevel":this.numJoinSubdivisions=
I.stipplePattern?1:0;break;case "round":this.numJoinSubdivisions=1}}var xa=ya.prototype;xa.isClosed=function(G){return h(this.params,G.vertexAttributes,G.indices)};xa.numCapSubdivisions=function(G){if(this.isClosed(G))return 0;switch(this.params.cap){case "butt":return 0;case "square":return 1;case "round":return 3}};xa.allocate=function(G){return this.vertexBufferLayout.createBuffer(G)};xa.elementCount=function(G){var I=2*this.numCapSubdivisions(G)+2,aa=G.indices.get("position").length/2+1;const ca=
this.isClosed(G);I=ca?2:2*I;var ha=ca?0:1;aa=ca?aa:aa-1;if(G.vertexAttributes.has("subdivisions"))for(G=G.vertexAttributes.get("subdivisions").data;ha<aa;++ha)I+=4+2*G[ha];else I+=(aa-ha)*(2*this.numJoinSubdivisions+4);return I+2};xa.write=function(G,I,aa,ca){const ha=N,ba=S,ia=O;var ea=I.vertexAttributes.get("position").data,T=I.indices&&I.indices.get("position");const U=this.numCapSubdivisions(I);T&&T.length!==2*(ea.length/3-1)&&console.warn("RibbonLineMaterial does not support indices");T=null;
I.vertexAttributes.has("subdivisions")&&(T=I.vertexAttributes.get("subdivisions").data);let X=1,Y=0;this.params.vvSizeEnabled?Y=I.vertexAttributes.get("sizeFeatureAttribute").data[0]:I.vertexAttributes.has("size")&&(X=I.vertexAttributes.get("size").data[0]);let fa=[1,1,1,1],ja=0;this.params.vvColorEnabled?ja=I.vertexAttributes.get("colorFeatureAttribute").data[0]:I.vertexAttributes.has("color")&&(fa=I.vertexAttributes.get("color").data);let ta=0;this.params.vvOpacityEnabled&&(ta=I.vertexAttributes.get("opacityFeatureAttribute").data[0]);
const la=ea.length/3;G=G.transformation;const qa=new Float32Array(aa.buffer);aa=this.vertexBufferLayout.stride/4;let sa=ca*aa;ca=sa;const ra=(Ca,Da,Ia,Pa,Oa,Qa,Ka)=>{qa[sa++]=Da[0];qa[sa++]=Da[1];qa[sa++]=Da[2];qa[sa++]=Pa;qa[sa++]=Oa;qa[sa++]=Qa;qa[sa++]=Ca[0];qa[sa++]=Ca[1];qa[sa++]=Ca[2];qa[sa++]=Ia[0];qa[sa++]=Ia[1];qa[sa++]=Ia[2];this.params.vvSizeEnabled?qa[sa++]=Y:qa[sa++]=X;this.params.vvColorEnabled?qa[sa++]=ja:(Ca=Math.min(4*Ka,fa.length-4),qa[sa++]=fa[Ca+0],qa[sa++]=fa[Ca+1],qa[sa++]=fa[Ca+
2],qa[sa++]=fa[Ca+3]);this.params.vvOpacityEnabled&&(qa[sa++]=ta)};sa+=aa;g.set(ba,ea[0],ea[1],ea[2]);G&&g.transformMat4(ba,ba,G);if(I=this.isClosed(I)){var na=ea.length-3;g.set(ha,ea[na],ea[na+1],ea[na+2]);G&&g.transformMat4(ha,ha,G)}else{g.copy(ha,ba);g.set(ia,ea[3],ea[4],ea[5]);G&&g.transformMat4(ia,ia,G);for(na=0;na<U;++na){var va=1-na/U;ra(ha,ba,ia,va,1,-4,0);ra(ha,ba,ia,va,1,4,0)}ra(ha,ba,ia,0,0,-4,0);ra(ha,ba,ia,0,0,4,0);g.copy(ha,ba);g.copy(ba,ia)}va=I?0:1;for(na=I?la:la-1;va<na;va++){var za=
(va+1)%la*3;g.set(ia,ea[za+0],ea[za+1],ea[za+2]);G&&g.transformMat4(ia,ia,G);ra(ha,ba,ia,0,1,-1,va);ra(ha,ba,ia,0,1,1,va);za=T?T[va]:this.numJoinSubdivisions;for(let Ca=0;Ca<za;++Ca){const Da=(Ca+1)/(za+1);ra(ha,ba,ia,Da,1,-2,va);ra(ha,ba,ia,Da,1,2,va)}ra(ha,ba,ia,1,0,-2,va);ra(ha,ba,ia,1,0,2,va);g.copy(ha,ba);g.copy(ba,ia)}if(I)sa=e(qa,ca+aa,qa,sa,2*aa);else for(ra(ha,ba,ia,0,1,-5,na),ra(ha,ba,ia,0,1,5,na),ea=0;ea<U;++ea)T=(ea+1)/U,ra(ha,ba,ia,T,1,-5,na),ra(ha,ba,ia,T,1,5,na);e(qa,ca+aa,qa,ca,aa);
sa=e(qa,sa-aa,qa,sa,aa)};return ya}();const f=r.create(),E=r.create(),F=r.create(),L=r.create(),W=r.create(),M=A.createRenderScreenPointArray3(),P=A.createRenderScreenPointArray3(),V=r.create(),H=r.create(),R=u.create(),Z=u.create(),N=r.create(),S=r.create(),O=r.create(),J=[A.createRenderScreenPointArray3(),A.createRenderScreenPointArray3(),A.createRenderScreenPointArray3(),A.createRenderScreenPointArray3()],K=[r.create(),r.create(),r.create(),r.create()],Q=x.create(),da=x.create(),ma=x.create(),
wa=x.create();d.RibbonLineMaterial=v;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/GLMaterial":function(){define(["../../../../chunks/_rollupPluginBabelHelpers","./AutoDisposable"],function(d,m){return function(v){function B(A){var q=v.call(this)||this;q._material=A.material;q._techniqueRep=A.techniqueRep;q._output=A.output;return q}d._inheritsLoose(B,v);var C=B.prototype;C.getPipelineState=function(A,q){return this.technique.pipeline};C.ensureResources=function(A){return 2};
C.ensureParameters=function(A){};d._createClass(B,[{key:"technique",get:function(){return this._technique}}]);return B}(m.AutoDisposable)})},"esri/views/3d/webgl-engine/lib/AutoDisposable":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers"],function(d,m){const v=C=>function(A){function q(){var g=A.apply(this,arguments)||this;g._isDisposed=!1;return g}m._inheritsLoose(q,A);q.prototype.dispose=function(){for(const r of null!=(g=this._managedDisposables)?g:[]){var g;g=this[r];
this[r]=null;g&&"function"===typeof g.dispose&&g.dispose()}this._isDisposed=!0};m._createClass(q,[{key:"isDisposed",get:function(){return this._isDisposed}}]);return q}(C);let B=function(C){function A(){return C.apply(this,arguments)||this}m._inheritsLoose(A,C);return A}(v(function(){return function(){}}()));d.AutoDisposable=B;d.AutoDisposableMixin=v;d.autoDispose=function(){return(C,A)=>{if(!C.hasOwnProperty("_managedDisposables")){var q,g;C._managedDisposables=null!=(q=null==(g=C._managedDisposables)?
void 0:g.slice())?q:[]}C._managedDisposables.unshift(A)}};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/Material":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ./ContentObject ./DefaultVertexAttributeLocations ../materials/internal/MaterialUtil".split(" "),function(d,m,v,B,C,A){B=function(q){function g(u,x){var y=q.call(this)||this;y.type=3;y.supportsEdges=!1;y._visible=!0;y._renderPriority=0;y._insertOrder=0;y._vertexAttributeLocations=
C.Default3D;y._params=A.copyParameters(u,x);y.validateParameterValues(y._params);return y}m._inheritsLoose(g,q);var r=g.prototype;r.dispose=function(){};r.update=function(u){return!1};r.setParameterValues=function(u){A.updateParameters(this._params,u)&&(this.validateParameterValues(this._params),this.parametersChanged())};r.validateParameterValues=function(u){};r.isVisibleInPass=function(u){return!0};r.isVisible=function(){return this._visible};r.parametersChanged=function(){v.isSome(this.materialRepository)&&
this.materialRepository.materialChanged(this)};m._createClass(g,[{key:"params",get:function(){return this._params}},{key:"visible",get:function(){return this._visible},set:function(u){u!==this._visible&&(this._visible=u,this.parametersChanged())}},{key:"renderOccluded",get:function(){return this.params.renderOccluded}},{key:"renderPriority",get:function(){return this._renderPriority},set:function(u){u!==this._renderPriority&&(this._renderPriority=u,this.parametersChanged())}},{key:"insertOrder",get:function(){return this._insertOrder},
set:function(u){u!==this._insertOrder&&(this._insertOrder=u,this.parametersChanged())}},{key:"vertexAttributeLocations",get:function(){return this._vertexAttributeLocations}}]);return g}(B.ContentObject);d.Material=B;d.materialParametersDefaults={renderOccluded:1};d.materialPredicate=function(q,g){return q.isVisible()&&q.isVisibleInPass(g.pass)&&0!==(q.renderOccluded&g.renderOccludedMask)};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/materials/VisualVariableMaterialParameters":function(){define(["../../../../chunks/mat3f64",
"../../../../chunks/vec3f32"],function(d,m){var v;(v||(v={})).Default={vvSizeEnabled:!1,vvSizeMinSize:m.fromValues(1,1,1),vvSizeMaxSize:m.fromValues(100,100,100),vvSizeOffset:m.fromValues(0,0,0),vvSizeFactor:m.fromValues(1,1,1),vvSizeValue:m.fromValues(1,1,1),vvColorEnabled:!1,vvColorValues:[0,0,0,0,0,0,0,0],vvColorColors:[1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0],vvOpacityEnabled:!1,vvOpacityValues:[0,0,0,0,0,0,0,0],vvOpacityOpacities:[1,1,1,1,1,1,1,1],vvSymbolAnchor:[0,0,
0],vvSymbolRotationMatrix:d.create()};return v})},"esri/views/3d/webgl-engine/shaders/RibbonLineTechnique":function(){define("require exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../core/maybe ../core/shaderLibrary/Slice.glsl ../core/shaderLibrary/output/OutputHighlight.glsl ../core/shaderLibrary/shading/MultipassTerrainTest.glsl ../core/shaderLibrary/shading/VisualVariables.glsl ../core/shaderLibrary/util/View.glsl ../core/shaderTechnique/ReloadableShaderModule ../core/shaderTechnique/ShaderTechnique ../core/shaderTechnique/ShaderTechniqueConfiguration ../lib/OrderIndependentTransparency ../lib/Program ../lib/StencilUtils ../../../../chunks/RibbonLine.glsl ../../../webgl/renderState".split(" "),
function(d,m,v,B,C,A,q,g,r,u,x,y,t,l,n,c,a,b){const k=new Map([["position",0],["subdivisionFactor",1],["uv0",2],["auxpos1",3],["auxpos2",4],["size",6],["sizeFeatureAttribute",6],["color",5],["colorFeatureAttribute",5],["opacityFeatureAttribute",7]]);y=function(h){function w(p,z,f){z=h.call(this,p,z,f)||this;z.stippleTextureRepository=p.stippleTextureRepository;return z}v._inheritsLoose(w,h);var D=w.prototype;D.initializeProgram=function(p){var z=w.shader.get();const f=this.configuration;z=z.build({OITEnabled:0===
f.transparencyPassType,output:f.output,slicePlaneEnabled:f.slicePlaneEnabled,sliceHighlightDisabled:!1,sliceEnabledForVertexPrograms:!1,stippleEnabled:f.stippleEnabled,stippleOffColorEnabled:f.stippleOffColorEnabled,stippleUVMaxEnabled:f.stippleIntegerRepeatsEnabled,stippleIntegerRepeatsEnabled:f.stippleIntegerRepeatsEnabled,roundCaps:f.roundCaps,roundJoins:f.roundJoins,vvColor:f.vvColor,vvSize:f.vvSize,vvInstancingEnabled:!0,vvOpacity:f.vvOpacity,falloffEnabled:f.falloffEnabled,innerColorEnabled:f.innerColorEnabled,
multipassTerrainEnabled:f.multipassTerrainEnabled,cullAboveGround:f.cullAboveGround});return new n.Program(p.rctx,z,k)};D.dispose=function(){h.prototype.dispose.call(this);this.stippleTextureRepository.release(this.stipplePattern);this.stippleTextureBind=this.stipplePattern=null};D.bindPass=function(p,z){u.bindProjectionMatrix(this.program,z.camera.projectionMatrix);4===this.configuration.output&&q.bindOutputHighlight(this.program,z);z.multipassTerrainEnabled&&(this.program.setUniform2fv("inverseViewport",
z.inverseViewport),g.bindMultipassTerrainTexture(this.program,z));this.program.setUniform1f("intrinsicWidth",p.width);this.program.setUniform4fv("intrinsicColor",p.color);this.program.setUniform1f("miterLimit","miter"!==p.join?0:p.miterLimit);this.program.setUniform2fv("cameraNearFar",z.camera.nearFar);this.program.setUniform1f("pixelRatio",z.camera.pixelRatio);this.program.setUniform2f("screenSize",z.camera.fullViewport[2],z.camera.fullViewport[3]);r.bindVisualVariablesUniformsWithOpacity(this.program,
p);if(this.stipplePattern!==p.stipplePattern){var f=p.stipplePattern;this.stippleTextureBind=this.stippleTextureRepository.swap(this.stipplePattern,f);this.stipplePattern=f}this.configuration.stippleEnabled&&(f=C.isSome(this.stippleTextureBind)?this.stippleTextureBind(this.program)*z.camera.pixelRatio:1,this.program.setUniform1f("stipplePatternPixelSizeInv",1/f),this.configuration.stippleOffColorEnabled&&(f=C.unwrap(p.stippleOffColor),this.program.setUniform4f("stippleOffColor",f[0],f[1],f[2],3<f.length?
f[3]:1)));this.configuration.falloffEnabled&&this.program.setUniform1f("falloff",p.falloff);this.configuration.innerColorEnabled&&(this.program.setUniform4fv("innerColor",C.unwrapOr(p.innerColor,p.color)),this.program.setUniform1f("innerWidth",p.innerWidth*z.camera.pixelRatio))};D.bindDraw=function(p){u.bindView(this.program,p);A.bindSliceUniformsWithOrigin(this.program,this.configuration,p);this.program.rebindTextures()};D.setPipelineState=function(p,z){const f=this.configuration,E=3===p,F=2===p;
return b.makePipelineState({blending:0===f.output||7===f.output?E?l.blendingDefault:l.OITBlending(p):null,depthTest:{func:l.OITDepthTest(p)},depthWrite:E?!f.transparent&&f.writeDepth&&b.defaultDepthWriteParams:l.OITDepthWrite(p),colorWrite:b.defaultColorWriteParams,stencilWrite:f.sceneHasOcludees?c.stencilWriteMaskOn:null,stencilTest:f.sceneHasOcludees?z?c.stencilToolMaskBaseParams:c.stencilBaseAllZerosParams:null,polygonOffset:E||F?f.polygonOffset&&e:l.OITPolygonOffset})};D.initializePipeline=function(){const p=
this.configuration,z=p.polygonOffset&&e;p.occluder&&(this._occluderPipelineTransparent=b.makePipelineState({blending:l.blendingDefault,polygonOffset:z,depthTest:c.depthCompareAlways,depthWrite:null,colorWrite:b.defaultColorWriteParams,stencilWrite:null,stencilTest:c.stencilToolTransparentOccluderParams}),this._occluderPipelineOpaque=b.makePipelineState({blending:l.blendingDefault,polygonOffset:z,depthTest:c.depthCompareAlways,depthWrite:null,colorWrite:b.defaultColorWriteParams,stencilWrite:c.stencilWriteMaskOff,
stencilTest:c.stencilToolMaskOccluderParams}),this._occluderPipelineMaskWrite=b.makePipelineState({blending:null,polygonOffset:z,depthTest:c.depthCompareLess,depthWrite:null,colorWrite:null,stencilWrite:c.stencilWriteMaskOn,stencilTest:c.stencilToolMaskBaseParams}));this._occludeePipelineState=this.setPipelineState(this.configuration.transparencyPassType,!0);return this.setPipelineState(this.configuration.transparencyPassType,!1)};D.getPipelineState=function(p,z){return z?this._occludeePipelineState:
this.configuration.occluder?11===p?this._occluderPipelineTransparent:10===p?this._occluderPipelineOpaque:this._occluderPipelineMaskWrite:this.pipeline};v._createClass(w,[{key:"primitiveType",get:function(){return 5}}]);return w}(y.ShaderTechnique);y.shader=new x.ReloadableShaderModule(a.RibbonLineShader,()=>new Promise(function(h,w){d(["./RibbonLine.glsl"],h,w)}));const e={factor:0,units:-4};x=function(h){function w(){var D=h.apply(this,arguments)||this;D.output=0;D.occluder=!1;D.slicePlaneEnabled=
!1;D.transparent=!1;D.polygonOffset=!1;D.writeDepth=!1;D.stippleEnabled=!1;D.stippleOffColorEnabled=!1;D.stippleIntegerRepeatsEnabled=!1;D.roundCaps=!1;D.roundJoins=!1;D.vvSize=!1;D.vvColor=!1;D.vvOpacity=!1;D.falloffEnabled=!1;D.innerColorEnabled=!1;D.sceneHasOcludees=!1;D.transparencyPassType=3;D.multipassTerrainEnabled=!1;D.cullAboveGround=!1;return D}v._inheritsLoose(w,h);return w}(t.ShaderTechniqueConfiguration);B.__decorate([t.parameter({count:8})],x.prototype,"output",void 0);B.__decorate([t.parameter()],
x.prototype,"occluder",void 0);B.__decorate([t.parameter()],x.prototype,"slicePlaneEnabled",void 0);B.__decorate([t.parameter()],x.prototype,"transparent",void 0);B.__decorate([t.parameter()],x.prototype,"polygonOffset",void 0);B.__decorate([t.parameter()],x.prototype,"writeDepth",void 0);B.__decorate([t.parameter()],x.prototype,"stippleEnabled",void 0);B.__decorate([t.parameter()],x.prototype,"stippleOffColorEnabled",void 0);B.__decorate([t.parameter()],x.prototype,"stippleIntegerRepeatsEnabled",
void 0);B.__decorate([t.parameter()],x.prototype,"roundCaps",void 0);B.__decorate([t.parameter()],x.prototype,"roundJoins",void 0);B.__decorate([t.parameter()],x.prototype,"vvSize",void 0);B.__decorate([t.parameter()],x.prototype,"vvColor",void 0);B.__decorate([t.parameter()],x.prototype,"vvOpacity",void 0);B.__decorate([t.parameter()],x.prototype,"falloffEnabled",void 0);B.__decorate([t.parameter()],x.prototype,"innerColorEnabled",void 0);B.__decorate([t.parameter()],x.prototype,"sceneHasOcludees",
void 0);B.__decorate([t.parameter({count:4})],x.prototype,"transparencyPassType",void 0);B.__decorate([t.parameter()],x.prototype,"multipassTerrainEnabled",void 0);B.__decorate([t.parameter()],x.prototype,"cullAboveGround",void 0);m.RibbonLineTechnique=y;m.RibbonLineTechniqueConfiguration=x;m.ribbonVertexAttributeLocations=k;Object.defineProperty(m,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/core/shaderLibrary/Slice.glsl":function(){define(["exports","../../../../../core/maybe","../../../../../chunks/vec3",
"../../../../../chunks/vec3f64","../shaderModules/interfaces"],function(d,m,v,B,C){function A(g,r,u,x){r.slicePlaneEnabled&&(m.isSome(u)?(x?(v.subtract(q,u.origin,x),g.setUniform3fv("slicePlaneOrigin",q)):g.setUniform3fv("slicePlaneOrigin",u.origin),g.setUniform3fv("slicePlaneBasis1",u.basis1),g.setUniform3fv("slicePlaneBasis2",u.basis2)):(g.setUniform3fv("slicePlaneBasis1",B.ZEROS),g.setUniform3fv("slicePlaneBasis2",B.ZEROS),g.setUniform3fv("slicePlaneOrigin",B.ZEROS)))}const q=B.create();d.Slice=
function(g,r){if(r.slicePlaneEnabled){g.extensions.add("GL_OES_standard_derivatives");r.sliceEnabledForVertexPrograms&&(g.vertex.uniforms.add("slicePlaneOrigin","vec3"),g.vertex.uniforms.add("slicePlaneBasis1","vec3"),g.vertex.uniforms.add("slicePlaneBasis2","vec3"));g.fragment.uniforms.add("slicePlaneOrigin","vec3");g.fragment.uniforms.add("slicePlaneBasis1","vec3");g.fragment.uniforms.add("slicePlaneBasis2","vec3");var u=C.glsl`struct SliceFactors {
float front;
float side0;
float side1;
float side2;
float side3;
};
SliceFactors calculateSliceFactors(vec3 pos) {
vec3 rel = pos - slicePlaneOrigin;
vec3 slicePlaneNormal = -cross(slicePlaneBasis1, slicePlaneBasis2);
float slicePlaneW = -dot(slicePlaneNormal, slicePlaneOrigin);
float basis1Len2 = dot(slicePlaneBasis1, slicePlaneBasis1);
float basis2Len2 = dot(slicePlaneBasis2, slicePlaneBasis2);
float basis1Dot = dot(slicePlaneBasis1, rel);
float basis2Dot = dot(slicePlaneBasis2, rel);
return SliceFactors(
dot(slicePlaneNormal, pos) + slicePlaneW,
-basis1Dot - basis1Len2,
basis1Dot - basis1Len2,
-basis2Dot - basis2Len2,
basis2Dot - basis2Len2
);
}
bool sliceByFactors(SliceFactors factors) {
return factors.front < 0.0
&& factors.side0 < 0.0
&& factors.side1 < 0.0
&& factors.side2 < 0.0
&& factors.side3 < 0.0;
}
bool sliceEnabled() {
return dot(slicePlaneBasis1, slicePlaneBasis1) != 0.0;
}
bool sliceByPlane(vec3 pos) {
return sliceEnabled() && sliceByFactors(calculateSliceFactors(pos));
}
#define rejectBySlice(_pos_) sliceByPlane(_pos_)
#define discardBySlice(_pos_) { if (sliceByPlane(_pos_)) discard; }`,x=C.glsl`vec4 applySliceHighlight(vec4 color, vec3 pos) {
SliceFactors factors = calculateSliceFactors(pos);
if (sliceByFactors(factors)) {
return color;
}
const float HIGHLIGHT_WIDTH = 1.0;
const vec4 HIGHLIGHT_COLOR = vec4(0.0, 0.0, 0.0, 0.3);
factors.front /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.front);
factors.side0 /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side0);
factors.side1 /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side1);
factors.side2 /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side2);
factors.side3 /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side3);
float highlightFactor = (1.0 - step(0.5, factors.front))
* (1.0 - step(0.5, factors.side0))
* (1.0 - step(0.5, factors.side1))
* (1.0 - step(0.5, factors.side2))
* (1.0 - step(0.5, factors.side3));
return mix(color, vec4(HIGHLIGHT_COLOR.rgb, color.a), highlightFactor * HIGHLIGHT_COLOR.a);
}`;x=r.sliceHighlightDisabled?C.glsl`#define highlightSlice(_color_, _pos_) (_color_)`:C.glsl`
        ${x}
        #define highlightSlice(_color_, _pos_) (sliceEnabled() ? applySliceHighlight(_color_, _pos_) : (_color_))
      `;r.sliceEnabledForVertexPrograms&&g.vertex.code.add(u);g.fragment.code.add(u);g.fragment.code.add(x)}else u=C.glsl`#define rejectBySlice(_pos_) false
#define discardBySlice(_pos_) {}
#define highlightSlice(_color_, _pos_) (_color_)`,r.sliceEnabledForVertexPrograms&&g.vertex.code.add(u),g.fragment.code.add(u)};d.bindSliceUniforms=A;d.bindSliceUniformsWithOrigin=function(g,r,u){A(g,r,u.slicePlane,u.origin)};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/core/shaderLibrary/output/OutputHighlight.glsl":function(){define(["exports","../../../../../../chunks/vec4f64","../../shaderModules/interfaces"],function(d,m,v){const B=m.fromValues(1,1,0,1),C=m.fromValues(1,
0,1,1);d.OutputHighlight=function(A){A.fragment.uniforms.add("depthTex","sampler2D");A.fragment.uniforms.add("highlightViewportPixelSz","vec4");A.fragment.constants.add("occludedHighlightFlag","vec4",B).add("unoccludedHighlightFlag","vec4",C);A.fragment.code.add(v.glsl`void outputHighlight() {
vec4 fragCoord = gl_FragCoord;
float sceneDepth = texture2D(depthTex, (fragCoord.xy - highlightViewportPixelSz.xy) * highlightViewportPixelSz.zw).r;
if (fragCoord.z > sceneDepth + 5e-7) {
gl_FragColor = occludedHighlightFlag;
}
else {
gl_FragColor = unoccludedHighlightFlag;
}
}`)};d.bindOutputHighlight=function(A,q){A.bindTexture(q.highlightDepthTexture,"depthTex");A.setUniform4f("highlightViewportPixelSz",0,0,q.inverseViewport[0],q.inverseViewport[1])};d.occludedHighlightFlag=B;d.unoccludedHighlightFlag=C;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/core/shaderLibrary/shading/MultipassTerrainTest.glsl":function(){define(["exports","../../shaderModules/interfaces"],function(d,m){d.bindMultipassTerrainTexture=function(v,B){B.multipassTerrainEnabled&&
B.terrainLinearDepthTexture&&v.bindTexture(B.terrainLinearDepthTexture,"terrainDepthTexture")};d.multipassTerrainTest=function(v,B){v.fragment.uniforms.add("terrainDepthTexture","sampler2D");v.fragment.uniforms.add("cameraNearFar","vec2");v.fragment.uniforms.add("inverseViewport","vec2");v.fragment.code.add(m.glsl`
    // Compare the linearized depths of fragment and terrain. Discard fragments on the wrong side of the terrain.
    void terrainDepthTest(vec4 fragCoord, float fragmentDepth){

      float terrainDepth = linearDepthFromTexture(terrainDepthTexture, fragCoord.xy * inverseViewport, cameraNearFar);
      if(fragmentDepth ${B.cullAboveGround?"\x3e":"\x3c\x3d"} terrainDepth){
        discard;
      }
    }
  `)};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/core/shaderLibrary/shading/VisualVariables.glsl":function(){define(["exports","../../shaderModules/interfaces"],function(d,m){function v(B,C){C.vvSizeEnabled&&(B.setUniform3fv("vvSizeMinSize",C.vvSizeMinSize),B.setUniform3fv("vvSizeMaxSize",C.vvSizeMaxSize),B.setUniform3fv("vvSizeOffset",C.vvSizeOffset),B.setUniform3fv("vvSizeFactor",C.vvSizeFactor));C.vvColorEnabled&&(B.setUniform1fv("vvColorValues",C.vvColorValues),
B.setUniform4fv("vvColorColors",C.vvColorColors))}d.VisualVariables=function(B,C){C.vvInstancingEnabled&&(C.vvSize||C.vvColor)&&B.attributes.add("instanceFeatureAttribute","vec4");C.vvSize?(B.vertex.uniforms.add("vvSizeMinSize","vec3"),B.vertex.uniforms.add("vvSizeMaxSize","vec3"),B.vertex.uniforms.add("vvSizeOffset","vec3"),B.vertex.uniforms.add("vvSizeFactor","vec3"),B.vertex.uniforms.add("vvSymbolRotationMatrix","mat3"),B.vertex.uniforms.add("vvSymbolAnchor","vec3"),B.vertex.code.add(m.glsl`vec3 vvScale(vec4 _featureAttribute) {
return clamp(vvSizeOffset + _featureAttribute.x * vvSizeFactor, vvSizeMinSize, vvSizeMaxSize);
}
vec4 vvTransformPosition(vec3 position, vec4 _featureAttribute) {
return vec4(vvSymbolRotationMatrix * ( vvScale(_featureAttribute) * (position + vvSymbolAnchor)), 1.0);
}`),B.vertex.code.add(m.glsl`
      const float eps = 1.192092896e-07;
      vec4 vvTransformNormal(vec3 _normal, vec4 _featureAttribute) {
        vec3 vvScale = clamp(vvSizeOffset + _featureAttribute.x * vvSizeFactor, vvSizeMinSize + eps, vvSizeMaxSize);
        return vec4(vvSymbolRotationMatrix * _normal / vvScale, 1.0);
      }

      ${C.vvInstancingEnabled?m.glsl`
      vec4 vvLocalNormal(vec3 _normal) {
        return vvTransformNormal(_normal, instanceFeatureAttribute);
      }

      vec4 localPosition() {
        return vvTransformPosition(position, instanceFeatureAttribute);
      }`:""}
    `)):B.vertex.code.add(m.glsl`vec4 localPosition() { return vec4(position, 1.0); }
vec4 vvLocalNormal(vec3 _normal) { return vec4(_normal, 1.0); }`);C.vvColor?(B.vertex.constants.add("vvColorNumber","int",8),B.vertex.code.add(m.glsl`
      uniform float vvColorValues[vvColorNumber];
      uniform vec4 vvColorColors[vvColorNumber];

      vec4 vvGetColor(vec4 featureAttribute, float values[vvColorNumber], vec4 colors[vvColorNumber]) {
        float value = featureAttribute.y;
        if (value <= values[0]) {
          return colors[0];
        }

        for (int i = 1; i < vvColorNumber; ++i) {
          if (values[i] >= value) {
            float f = (value - values[i-1]) / (values[i] - values[i-1]);
            return mix(colors[i-1], colors[i], f);
          }
        }
        return colors[vvColorNumber - 1];
      }

      ${C.vvInstancingEnabled?m.glsl`
      vec4 vvColor() {
        return vvGetColor(instanceFeatureAttribute, vvColorValues, vvColorColors);
      }`:""}
    `)):B.vertex.code.add(m.glsl`vec4 vvColor() { return vec4(1.0); }`)};d.bindVisualVariablesUniforms=v;d.bindVisualVariablesUniformsForSymbols=function(B,C){v(B,C);C.vvSizeEnabled&&(B.setUniform3fv("vvSymbolAnchor",C.vvSymbolAnchor),B.setUniformMatrix3fv("vvSymbolRotationMatrix",C.vvSymbolRotationMatrix))};d.bindVisualVariablesUniformsWithOpacity=function(B,C){v(B,C);C.vvOpacityEnabled&&(B.setUniform1fv("vvOpacityValues",C.vvOpacityValues),B.setUniform1fv("vvOpacityOpacities",C.vvOpacityOpacities))};
Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/core/shaderLibrary/util/View.glsl":function(){define(["exports","../../../../../../chunks/mat4","../../../../../../chunks/mat4f32"],function(d,m,v){function B(A,q,g){m.translate(C,g,q);A.setUniform3fv("localOrigin",q);A.setUniformMatrix4fv("view",C)}const C=v.create();d.bindCameraPosition=function(A,q,g){A.setUniform3f("camPos",g[3]-q[0],g[7]-q[1],g[11]-q[2])};d.bindNearFar=function(A,q){A.setUniform2fv("nearFar",q)};
d.bindProjectionMatrix=function(A,q){A.setUniformMatrix4fv("proj",q)};d.bindView=function(A,q){B(A,q.origin,q.camera.viewMatrix)};d.bindViewCustomOrigin=B;d.bindViewport=function(A,q){A.setUniform4fv("viewport",q.camera.fullViewport)};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/chunks/mat4f32":function(){define(["exports"],function(d){function m(){const g=new Float32Array(16);g[0]=1;g[5]=1;g[10]=1;g[15]=1;return g}function v(g){const r=new Float32Array(16);r[0]=g[0];r[1]=g[1];r[2]=g[2];
r[3]=g[3];r[4]=g[4];r[5]=g[5];r[6]=g[6];r[7]=g[7];r[8]=g[8];r[9]=g[9];r[10]=g[10];r[11]=g[11];r[12]=g[12];r[13]=g[13];r[14]=g[14];r[15]=g[15];return r}function B(g,r,u,x,y,t,l,n,c,a,b,k,e,h,w,D){const p=new Float32Array(16);p[0]=g;p[1]=r;p[2]=u;p[3]=x;p[4]=y;p[5]=t;p[6]=l;p[7]=n;p[8]=c;p[9]=a;p[10]=b;p[11]=k;p[12]=e;p[13]=h;p[14]=w;p[15]=D;return p}function C(g,r){return new Float32Array(g,r,16)}const A=m();var q=Object.freeze({__proto__:null,create:m,clone:v,fromValues:B,createView:C,IDENTITY:A});
d.IDENTITY=A;d.clone=v;d.create=m;d.createView=C;d.fromValues=B;d.mat4f32=q})},"esri/views/3d/webgl-engine/lib/OrderIndependentTransparency":function(){define(["exports","../../../webgl/renderState"],function(d,m){const v=m.separateBlendingParams(770,1,771,771),B=m.simpleBlendingParams(1,1),C=m.simpleBlendingParams(0,771),A={factor:-1,units:-2};d.OITBlending=function(q){return 2===q?null:1===q?C:B};d.OITDepthTest=function(q){return 3===q||2===q?513:515};d.OITDepthWrite=function(q){return 2===q?m.defaultDepthWriteParams:
null};d.OITPolygonOffset=A;d.OITPolygonOffsetLimit=5E5;d.blendingAlpha=C;d.blendingColor=B;d.blendingDefault=v;d.getOITPolygonOffset=function(q){return q?A:null};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/StencilUtils":function(){define(["exports"],function(d){d.depthCompareAlways={func:519};d.depthCompareLess={func:513};d.renderWhenBitIsNotSet=m=>({function:{func:517,ref:m,mask:m},operation:{fail:7680,zFail:7680,zPass:7680}});d.replaceBitWhenDepthTestPasses=
m=>({function:{func:519,ref:m,mask:m},operation:{fail:7680,zFail:7680,zPass:7681}});d.stencilBaseAllZerosParams={function:{func:519,ref:2,mask:2},operation:{fail:7680,zFail:7680,zPass:0}};d.stencilToolMaskBaseParams={function:{func:519,ref:2,mask:2},operation:{fail:7680,zFail:7680,zPass:7681}};d.stencilToolMaskOccluderParams={function:{func:514,ref:2,mask:2},operation:{fail:7680,zFail:7680,zPass:7680}};d.stencilToolTransparentOccluderParams={function:{func:517,ref:2,mask:2},operation:{fail:7680,zFail:7680,
zPass:7680}};d.stencilWriteMaskOff={mask:0};d.stencilWriteMaskOn={mask:255};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/chunks/RibbonLine.glsl":function(){define("exports ../views/3d/webgl-engine/core/shaderLibrary/Slice.glsl ../views/3d/webgl-engine/core/shaderLibrary/attributes/RibbonVertexPosition.glsl ../views/3d/webgl-engine/core/shaderLibrary/output/OutputDepth.glsl ../views/3d/webgl-engine/core/shaderLibrary/output/ReadLinearDepth.glsl ../views/3d/webgl-engine/core/shaderLibrary/shading/LineStipple.glsl ../views/3d/webgl-engine/core/shaderLibrary/shading/MultipassTerrainTest.glsl ../views/3d/webgl-engine/core/shaderLibrary/shading/PiUtils.glsl ../views/3d/webgl-engine/core/shaderLibrary/util/AlphaDiscard.glsl ../views/3d/webgl-engine/core/shaderLibrary/util/ColorConversion.glsl ../views/3d/webgl-engine/core/shaderModules/interfaces ../views/3d/webgl-engine/core/shaderModules/ShaderBuilder".split(" "),
function(d,m,v,B,C,A,q,g,r,u,x,y){function t(n){const c=new y.ShaderBuilder;c.extensions.add("GL_OES_standard_derivatives");c.include(g.PiUtils);c.include(v.RibbonVertexPosition,n);c.include(A.LineStipple,n);1===n.output&&c.include(B.OutputDepth,n);c.vertex.uniforms.add("proj","mat4").add("view","mat4").add("cameraNearFar","vec2").add("pixelRatio","float").add("miterLimit","float").add("screenSize","vec2");c.attributes.add("position","vec3");c.attributes.add("subdivisionFactor","float");c.attributes.add("uv0",
"vec2");c.attributes.add("auxpos1","vec3");c.attributes.add("auxpos2","vec3");c.varyings.add("vColor","vec4");c.varyings.add("vpos","vec3");c.varyings.add("linearDepth","float");n.multipassTerrainEnabled&&c.varyings.add("depth","float");const a=n.falloffEnabled,b=n.innerColorEnabled;b&&c.varyings.add("vLineDistance","float");a&&c.varyings.add("vLineDistanceNorm","float");n.falloffEnabled&&c.fragment.uniforms.add("falloff","float");n.innerColorEnabled&&(c.fragment.uniforms.add("innerColor","vec4"),
c.fragment.uniforms.add("innerWidth","float"));c.vertex.code.add(x.glsl`#define PERPENDICULAR(v) vec2(v.y, -v.x);
#define ISOUTSIDE (left.x * right.y - left.y * right.x)*uv0.y > 0.0
float interp(float ncp, vec4 a, vec4 b) {
return (-ncp - a.z) / (b.z - a.z);
}
vec2 rotate(vec2 v, float a) {
float s = sin(a);
float c = cos(a);
mat2 m = mat2(c, -s, s, c);
return m * v;
}`);c.vertex.code.add(x.glsl`vec4 projectAndScale(vec4 pos) {
vec4 posNdc = proj * pos;
posNdc.xy *= screenSize / posNdc.w;
return posNdc;
}`);c.vertex.code.add(x.glsl`
    void clipAndTransform(inout vec4 pos, inout vec4 prev, inout vec4 next, in bool isStartVertex) {
      float vnp = cameraNearFar[0] * 0.99;

      //current pos behind ncp --> we need to clip
      if(pos.z > -cameraNearFar[0]) {
        if (!isStartVertex) {
          //previous in front of ncp
          if(prev.z < -cameraNearFar[0]) {
            pos = mix(prev, pos, interp(vnp, prev, pos));
            next = pos;
          } else {
            pos = vec4(0.0, 0.0, 0.0, 1.0);
          }
        }
        //next in front of ncp
        if(isStartVertex) {
          if(next.z < -cameraNearFar[0]) {
            pos = mix(pos, next, interp(vnp, pos, next));
            prev = pos;
          } else {
            pos = vec4(0.0, 0.0, 0.0, 1.0);
          }
        }
      } else {
        //current position visible
        //previous behind ncp
        if (prev.z > -cameraNearFar[0]) {
          prev = mix(pos, prev, interp(vnp, pos, prev));
        }
        //next behind ncp
        if (next.z > -cameraNearFar[0]) {
          next = mix(next, pos, interp(vnp, next, pos));
        }
      }

      ${n.multipassTerrainEnabled?"depth \x3d pos.z;":""}
      linearDepth = (-pos.z - cameraNearFar[0]) / (cameraNearFar[1] - cameraNearFar[0]);

      pos = projectAndScale(pos);
      next = projectAndScale(next);
      prev = projectAndScale(prev);
    }
`);c.vertex.code.add(x.glsl`void main(void) {
float coverage = 1.0;
vpos = position;
if (uv0.y == 0.0) {
gl_Position = vec4(1e038, 1e038, 1e038, 1.0);
}
else {
bool isStartVertex = abs(abs(uv0.y)-3.0) == 1.0;
bool isJoin = abs(uv0.y)-3.0 < 0.0;
float lineWidth = getSize() * pixelRatio;
if (lineWidth < 1.0) {
coverage = lineWidth;
lineWidth = 1.0;
}else{
lineWidth = floor(lineWidth + 0.5);
}
vec4 pos  = view * vec4(position.xyz, 1.0);
vec4 prev = view * vec4(auxpos1.xyz, 1.0);
vec4 next = view * vec4(auxpos2.xyz, 1.0);
clipAndTransform(pos, prev, next, isStartVertex);
vec2 left = (pos.xy - prev.xy);
vec2 right = (next.xy - pos.xy);
float leftLen = length(left);
float rightLen = length(right);`);n.stippleEnabled&&c.vertex.code.add(x.glsl`vec4 stippleSegmentInfo = mix(vec4(pos.xy, right), vec4(prev.xy, left), uv0.x);
vec2 stippleSegmentOrigin = stippleSegmentInfo.xy;
vec2 stippleSegmentDirection = stippleSegmentInfo.zw;`);c.vertex.code.add(x.glsl`left = (leftLen > 0.001) ? left/leftLen : vec2(0.0, 0.0);
right = (rightLen > 0.001) ? right/rightLen : vec2(0.0, 0.0);
vec2 capDisplacementDir = vec2(0, 0);
vec2 joinDisplacementDir = vec2(0, 0);
float displacementLen = lineWidth;
if (isJoin) {
bool isOutside = ISOUTSIDE;
joinDisplacementDir = normalize(left + right);
joinDisplacementDir = PERPENDICULAR(joinDisplacementDir);
if (leftLen > 0.001 && rightLen > 0.001) {
float nDotSeg = dot(joinDisplacementDir, left);
displacementLen /= length(nDotSeg * left - joinDisplacementDir);
if (!isOutside) {
displacementLen = min(displacementLen, min(leftLen, rightLen)/abs(nDotSeg));
}
}
if (isOutside && (displacementLen > miterLimit * lineWidth)) {`);n.roundJoins?c.vertex.code.add(x.glsl`vec2 startDir;
vec2 endDir;
if (leftLen < 0.001) {
startDir = right;
}
else{
startDir = left;
}
startDir = normalize(startDir);
startDir = PERPENDICULAR(startDir);
if (rightLen < 0.001) {
endDir = left;
}
else{
endDir = right;
}
endDir = normalize(endDir);
endDir = PERPENDICULAR(endDir);
float rotationAngle = acos(clamp(dot(startDir, endDir), -1.0, 1.0));
joinDisplacementDir = rotate(startDir, -sign(uv0.y) * subdivisionFactor * rotationAngle);`):c.vertex.code.add(x.glsl`if (leftLen < 0.001) {
joinDisplacementDir = right;
}
else if (rightLen < 0.001) {
joinDisplacementDir = left;
}
else {
joinDisplacementDir = isStartVertex ? right : left;
}
joinDisplacementDir = normalize(joinDisplacementDir);
joinDisplacementDir = PERPENDICULAR(joinDisplacementDir);`);c.vertex.code.add(x.glsl`displacementLen = lineWidth;
}
} else {
if (leftLen < 0.001) {
joinDisplacementDir = right;
}
else if (rightLen < 0.001) {
joinDisplacementDir = left;
}
else {
joinDisplacementDir = isStartVertex ? right : left;
}
joinDisplacementDir = normalize(joinDisplacementDir);
joinDisplacementDir = PERPENDICULAR(joinDisplacementDir);
displacementLen = lineWidth;
capDisplacementDir = isStartVertex ? -right : left;`);n.roundCaps?c.vertex.code.add(x.glsl`float angle = subdivisionFactor*PI*0.5;
joinDisplacementDir *= cos(angle);
capDisplacementDir *= sin(angle);`):c.vertex.code.add(x.glsl`capDisplacementDir *= subdivisionFactor;`);c.vertex.code.add(x.glsl`
  }

  // Displacement (in pixels) caused by join/or cap
  vec2 dpos = joinDisplacementDir * sign(uv0.y) * displacementLen + capDisplacementDir * displacementLen;

  ${a||b?x.glsl`float lineDist = lineWidth * sign(uv0.y) * pos.w;`:""}

  ${b?x.glsl`vLineDistance = lineDist;`:""}
  ${a?x.glsl`vLineDistanceNorm = lineDist / lineWidth;`:""}

  pos.xy += dpos;
  `);n.stippleEnabled&&(c.vertex.code.add(x.glsl`{
vec2 posVec = pos.xy - stippleSegmentOrigin;
float stippleSegmentDirectionLength = length(stippleSegmentDirection);`),n.stippleIntegerRepeatsEnabled&&c.vertex.code.add(x.glsl`float numberOfPatternRepeats = stippleSegmentDirectionLength * 0.5 * stipplePatternPixelSizeInv;
float roundedNumberOfPatternRepeats = floor(numberOfPatternRepeats);
stipplePatternUvMax = roundedNumberOfPatternRepeats;`),c.vertex.code.add(x.glsl`
      if (stippleSegmentDirectionLength >= 0.001) {
        // Project the vertex position onto the line segment.
        float projectedLength = dot(stippleSegmentDirection, posVec) / stippleSegmentDirectionLength * 0.5;
     ${n.stippleIntegerRepeatsEnabled?"float wholeNumberOfRepeatsScale \x3d roundedNumberOfPatternRepeats / numberOfPatternRepeats;":"float wholeNumberOfRepeatsScale \x3d 1.0;"}
        stipplePatternUv = projectedLength * wholeNumberOfRepeatsScale * stipplePatternPixelSizeInv * pos.w;
        } else {
          stipplePatternUv = 1.0;
        }
      }
    `));c.vertex.code.add(x.glsl`pos.xy = pos.xy / screenSize * pos.w;
vColor = getColor();
vColor.a *= coverage;
gl_Position = pos;
}
}`);n.multipassTerrainEnabled&&(c.fragment.include(C.ReadLinearDepth),c.include(q.multipassTerrainTest,n));c.include(m.Slice,n);c.fragment.uniforms.add("intrinsicColor","vec4");c.fragment.include(u.ColorConversion);c.fragment.code.add(x.glsl`
  void main() {
    discardBySlice(vpos);
    ${n.multipassTerrainEnabled?"terrainDepthTest(gl_FragCoord, depth);":""}
    float stippleAlpha = getStippleAlpha();
    discardByStippleAlpha(stippleAlpha, stippleAlphaColorDiscard);

    vec4 color = intrinsicColor * vColor;
  `);n.innerColorEnabled&&(c.fragment.uniforms.add("pixelRatio","float"),c.fragment.code.add(x.glsl`float distToInner = abs(vLineDistance * gl_FragCoord.w) - innerWidth;
float innerAA = clamp(0.5 - distToInner, 0.0, 1.0);
float innerAlpha = innerColor.a + color.a * (1.0 - innerColor.a);
color = mix(color, vec4(innerColor.rgb, innerAlpha), innerAA);`));c.fragment.code.add(x.glsl`vec4 finalColor = blendStipple(color, stippleAlpha);`);n.falloffEnabled&&c.fragment.code.add(x.glsl`finalColor.a *= pow(max(0.0, 1.0 - abs(vLineDistanceNorm * gl_FragCoord.w)), falloff);`);c.fragment.code.add(x.glsl`
    if (finalColor.a < ${x.glsl.float(r.symbolAlphaCutoff)}) {
      discard;
    }

    ${7===n.output?x.glsl`gl_FragColor = vec4(finalColor.a);`:""}
    ${0===n.output?x.glsl`gl_FragColor = highlightSlice(finalColor, vpos);`:""}
    ${0===n.output&&n.OITEnabled?"gl_FragColor \x3d premultiplyAlpha(gl_FragColor);":""}
    ${4===n.output?x.glsl`gl_FragColor = vec4(1.0);`:""}
    ${1===n.output?x.glsl`outputDepth(linearDepth);`:""}
  }
  `);return c}var l=Object.freeze({__proto__:null,build:t});d.RibbonLineShader=l;d.build=t})},"esri/views/3d/webgl-engine/core/shaderLibrary/attributes/RibbonVertexPosition.glsl":function(){define(["exports","../../shaderModules/interfaces"],function(d,m){d.RibbonVertexPosition=function(v,B){v.vertex.uniforms.add("intrinsicWidth","float");B.vvSize?(v.attributes.add("sizeFeatureAttribute","float"),v.vertex.uniforms.add("vvSizeMinSize","vec3"),v.vertex.uniforms.add("vvSizeMaxSize","vec3"),v.vertex.uniforms.add("vvSizeOffset",
"vec3"),v.vertex.uniforms.add("vvSizeFactor","vec3"),v.vertex.code.add(m.glsl`float getSize() {
return intrinsicWidth * clamp(vvSizeOffset + sizeFeatureAttribute * vvSizeFactor, vvSizeMinSize, vvSizeMaxSize).x;
}`)):(v.attributes.add("size","float"),v.vertex.code.add(m.glsl`float getSize(){
return intrinsicWidth * size;
}`));B.vvOpacity?(v.attributes.add("opacityFeatureAttribute","float"),v.vertex.constants.add("vvOpacityNumber","int",8),v.vertex.code.add(m.glsl`uniform float vvOpacityValues[vvOpacityNumber];
uniform float vvOpacityOpacities[vvOpacityNumber];
float interpolateOpacity( float value ){
if (value <= vvOpacityValues[0]) {
return vvOpacityOpacities[0];
}
for (int i = 1; i < vvOpacityNumber; ++i) {
if (vvOpacityValues[i] >= value) {
float f = (value - vvOpacityValues[i-1]) / (vvOpacityValues[i] - vvOpacityValues[i-1]);
return mix(vvOpacityOpacities[i-1], vvOpacityOpacities[i], f);
}
}
return vvOpacityOpacities[vvOpacityNumber - 1];
}
vec4 applyOpacity( vec4 color ){
return vec4(color.xyz, interpolateOpacity(opacityFeatureAttribute));
}`)):v.vertex.code.add(m.glsl`vec4 applyOpacity( vec4 color ){
return color;
}`);B.vvColor?(v.attributes.add("colorFeatureAttribute","float"),v.vertex.constants.add("vvColorNumber","int",8),v.vertex.code.add(m.glsl`uniform float vvColorValues[vvColorNumber];
uniform vec4 vvColorColors[vvColorNumber];
vec4 interpolateColor( float value ) {
if (value <= vvColorValues[0]) {
return vvColorColors[0];
}
for (int i = 1; i < vvColorNumber; ++i) {
if (vvColorValues[i] >= value) {
float f = (value - vvColorValues[i-1]) / (vvColorValues[i] - vvColorValues[i-1]);
return mix(vvColorColors[i-1], vvColorColors[i], f);
}
}
return vvColorColors[vvColorNumber - 1];
}
vec4 getColor(){
return applyOpacity(interpolateColor(colorFeatureAttribute));
}`)):(v.attributes.add("color","vec4"),v.vertex.code.add(m.glsl`vec4 getColor(){
return applyOpacity(color);
}`))};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/core/shaderLibrary/output/OutputDepth.glsl":function(){define(["exports","../util/RgbaFloatEncoding.glsl","../../shaderModules/interfaces"],function(d,m,v){d.OutputDepth=function(B,C){B.fragment.include(m.RgbaFloatEncoding);3===C.output?(B.extensions.add("GL_OES_standard_derivatives"),B.fragment.code.add(v.glsl`float _calculateFragDepth(const in float depth) {
const float SLOPE_SCALE = 2.0;
const float BIAS = 2.0 * .000015259;
float m = max(abs(dFdx(depth)), abs(dFdy(depth)));
float result = depth + SLOPE_SCALE * m + BIAS;
return clamp(result, .0, .999999);
}
void outputDepth(float _linearDepth) {
gl_FragColor = float2rgba(_calculateFragDepth(_linearDepth));
}`)):1===C.output&&B.fragment.code.add(v.glsl`void outputDepth(float _linearDepth) {
gl_FragColor = float2rgba(_linearDepth);
}`)};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/core/shaderLibrary/shading/LineStipple.glsl":function(){define(["exports","../../shaderModules/interfaces"],function(d,m){d.LineStipple=function(v,B){v.constants.add("stippleAlphaColorDiscard","float",.001);v.constants.add("stippleAlphaHighlightDiscard","float",.5);B.stippleEnabled?(v.vertex.uniforms.add("stipplePatternPixelSizeInv","float"),B.stippleUVMaxEnabled&&v.varyings.add("stipplePatternUvMax","float"),v.varyings.add("stipplePatternUv",
"float"),v.fragment.uniforms.add("stipplePatternTexture","sampler2D"),B.stippleOffColorEnabled&&v.fragment.uniforms.add("stippleOffColor","vec4"),v.fragment.code.add(m.glsl`
  float getStippleAlpha() {
    float stipplePatternUvClamped = stipplePatternUv * gl_FragCoord.w;
    ${B.stippleUVMaxEnabled?"stipplePatternUvClamped \x3d clamp(stipplePatternUvClamped, 0.0, stipplePatternUvMax);":""}

    return texture2D(stipplePatternTexture, vec2(mod(stipplePatternUvClamped, 1.0), 0.5)).a;
  }`),B.stippleOffColorEnabled?v.fragment.code.add(m.glsl`#define discardByStippleAlpha(stippleAlpha, threshold) {}
#define blendStipple(color, stippleAlpha) mix(color, stippleOffColor, stippleAlpha)`):v.fragment.code.add(m.glsl`#define discardByStippleAlpha(stippleAlpha, threshold) if (stippleAlpha < threshold) { discard; }
#define blendStipple(color, stippleAlpha) vec4(color.rgb, color.a * stippleAlpha)`)):v.fragment.code.add(m.glsl`float getStippleAlpha() { return 1.0; }
#define discardByStippleAlpha(_stippleAlpha_, _threshold_) {}
#define blendStipple(color, _stippleAlpha_) color`)};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/core/shaderLibrary/shading/PiUtils.glsl":function(){define(["exports","../../shaderModules/interfaces"],function(d,m){d.PiUtils=function(v){v.vertex.code.add(m.glsl`const float PI = 3.141592653589793;`);v.fragment.code.add(m.glsl`const float PI = 3.141592653589793;
const float LIGHT_NORMALIZATION = 1.0 / PI;
const float INV_PI = 0.3183098861837907;
const float HALF_PI = 1.570796326794897;`)};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/core/shaderLibrary/util/AlphaDiscard.glsl":function(){define(["exports","../../shaderModules/interfaces"],function(d,m){d.DiscardOrAdjustAlpha=function(v,B){const C=v.fragment;switch(B.alphaDiscardMode){case 0:C.code.add(m.glsl`
        #define discardOrAdjustAlpha(color) { if (color.a < ${m.glsl.float(.001)}) { discard; } }
      `);break;case 1:C.code.add(m.glsl`void discardOrAdjustAlpha(inout vec4 color) {
color.a = 1.0;
}`);break;case 2:C.uniforms.add("textureAlphaCutoff","float");C.code.add(m.glsl`#define discardOrAdjustAlpha(color) { if (color.a < textureAlphaCutoff) { discard; } else { color.a = 1.0; } }`);break;case 3:v.fragment.uniforms.add("textureAlphaCutoff","float"),v.fragment.code.add(m.glsl`#define discardOrAdjustAlpha(color) { if (color.a < textureAlphaCutoff) { discard; } }`)}};d.defaultMaskAlphaCutoff=.1;d.symbolAlphaCutoff=.001;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/core/shaderLibrary/util/ColorConversion.glsl":function(){define(["exports",
"../../shaderModules/interfaces"],function(d,m){d.ColorConversion=function(v){v.code.add(m.glsl`vec4 premultiplyAlpha(vec4 v) {
return vec4(v.rgb * v.a, v.a);
}
vec3 rgb2hsv(vec3 c) {
vec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);
vec4 p = c.g < c.b ? vec4(c.bg, K.wz) : vec4(c.gb, K.xy);
vec4 q = c.r < p.x ? vec4(p.xyw, c.r) : vec4(c.r, p.yzx);
float d = q.x - min(q.w, q.y);
float e = 1.0e-10;
return vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), min(d / (q.x + e), 1.0), q.x);
}
vec3 hsv2rgb(vec3 c) {
vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);
vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);
return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);
}
float rgb2v(vec3 c) {
return max(c.x, max(c.y, c.z));
}`)};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/3d/interactive/visualElements/ParallelLineVisualElement":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/Handles ../../../../core/maybe ../../../../core/screenUtils ../../../../chunks/mat4f64 ../../../../chunks/vec2 ../../../../chunks/vec3 ../../../../chunks/vec3f64 ../../../../chunks/vec4 ../../../../chunks/vec4f32 ./Object3DVisualElement ../../webgl-engine/lib/GeometryUtil ../../webgl-engine/materials/RibbonLineMaterial".split(" "),
function(d,m,v,B,C,A,q,g,r,u,x,y,t,l){y=function(h){function w(p){var z=h.call(this,p)||this;z._handles=new v;z._location=r.create();z._direction=r.fromValues(1,0,0);z._width=1;z._offset=1;z._length=18;z._color=x.fromValues(1,0,1,1);z._renderOccluded=4;z.applyProps(p);return z}m._inheritsLoose(w,h);var D=w.prototype;D.setDirectionFromPoints=function(p,z){g.normalize(this._direction,g.subtract(this._direction,z,p));this.updateGeometry()};D.createExternalResources=function(){const p=new l.RibbonLineMaterial(this.materialParameters);
this._handles.add(this.view.state.watch("camera",()=>{this.updateGeometry()}));this._externalResources={material:p}};D.destroyExternalResources=function(){this._handles.removeAll();this._externalResources=null};D.createGeometries=function(p){const z=t.createPolylineGeometry([r.create(),r.create()]),f=t.createPolylineGeometry([r.create(),r.create()]),E=B.unwrap(this._externalResources).material;p.addGeometry(z,E,A.IDENTITY);p.addGeometry(f,E,A.IDENTITY);this.updateVertices(p)};D.forEachExternalMaterial=
function(p){B.isSome(this._externalResources)&&p(this._externalResources.material)};D.updateMaterial=function(){B.isNone(this._externalResources)||this._externalResources.material.setParameterValues(this.materialParameters)};D.updateGeometry=function(){const p=this.object;B.isNone(p)||this.updateVertices(p)};D.updateVertices=function(p){const z=this.view.state.camera;z.projectToScreen(this.location,c);g.add(n,this.location,this.direction);z.projectToScreen(n,a);q.normalize(a,q.subtract(a,a,c));this.updateVertexAttributes(z,
p,0,c,a,1);this.updateVertexAttributes(z,p,1,c,a,-1)};D.updateVertexAttributes=function(p,z,f,E,F,L){const W=z.geometryRecords[f].geometry.getMutableAttribute("position").data;L=q.scale(b,q.set(b,F[1]*L,F[0]*-L),this.offset+this.width/2);E=q.add(k,q.add(k,q.add(k,E,q.scale(k,F,this.length/2)),L),L);F=q.add(e,E,q.scale(e,F,-this.length));p.unprojectFromScreen(E,n);W[0]=n[0];W[1]=n[1];W[2]=n[2];p.unprojectFromScreen(F,n);W[3]=n[0];W[4]=n[1];W[5]=n[2];z.geometryVertexAttrsUpdated(f)};m._createClass(w,
[{key:"location",get:function(){return this._location},set:function(p){g.exactEquals(this._location,p)||(g.copy(this._location,p),this.updateGeometry())}},{key:"direction",get:function(){return this._direction},set:function(p){g.exactEquals(this._direction,p)||(g.copy(this._direction,p),this.updateGeometry())}},{key:"width",get:function(){return this._width},set:function(p){p!==this._width&&(this._width=p,this.updateMaterial())}},{key:"offset",get:function(){return this._offset},set:function(p){p!==
this._offset&&(this._offset=p,this.updateGeometry())}},{key:"length",get:function(){return this._length},set:function(p){p!==this._length&&(this._length=p,this.updateGeometry())}},{key:"color",get:function(){return this._color},set:function(p){u.exactEquals(p,this._color)||(u.copy(this._color,p),this.updateMaterial())}},{key:"renderOccluded",get:function(){return this._renderOccluded},set:function(p){p!==this._renderOccluded&&(this._renderOccluded=p,this.updateMaterial())}},{key:"materialParameters",
get:function(){return{width:this._width,color:this._color,renderOccluded:this._renderOccluded}}}]);return w}(y.Object3DVisualElement);const n=r.create(),c=C.createScreenPointArray(),a=C.createScreenPointArray(),b=C.createScreenPointArray(),k=C.createScreenPointArray(),e=C.createScreenPointArray();d.ParallelLineVisualElement=y;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/3d/interactive/visualElements/PointVisualElement":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/mathUtils ../../../../core/maybe ../../../../chunks/vec3 ../../../../chunks/vec3f64 ../../../../chunks/vec4 ../../../../chunks/vec4f64 ../../../../geometry/projection ../../../../geometry/support/aaBoundingBox ../../../../geometry/support/vectorStacks ./VisualElementResources ../../layers/graphics/elevationAlignmentUtils ../../layers/graphics/ElevationContext ../../layers/graphics/sdfPrimitives ../../webgl-engine/lib/GeometryUtil ../../webgl-engine/lib/Texture ../../webgl-engine/materials/HUDMaterial".split(" "),
function(d,m,v,B,C,A,q,g,r,u,x,y,t,l,n,c,a,b){let k=function(){function w(p){this._geometry=this.view=null;this._size=3;this._color=g.fromValues(1,0,1,1);this._pixelSnappingEnabled=!0;this._primitive="square";this._outlineSize=1;this._outlineColor=g.fromValues(1,1,1,1);this._elevationInfo=null;this.resources=new y.VisualElementResources({view:p.view,createResources:f=>this.createResources(f),recreateGeometry:(f,E)=>{f.geometry=this.recreateGeometry(E,f.material);return B.isSome(f.geometry)?[f.geometry]:
[]}});let z=!0;for(const f in p)f in this?"attached"===f?z=p[f]:this[f]=p[f]:console.error("Cannot set unknown property",f);this.attached=z}var D=w.prototype;D.destroy=function(){this.resources.destroy()};D.updateMaterial=function(){const p=this.resources.resources;B.isNone(p)||p.material.setParameterValues(this.materialParameters(p.texture.id))};D.updateSizeAttribute=function(){var p=this.resources.resources;const z=this.resources.object;if(!B.isNone(p)&&!B.isNone(z)&&(p=p.geometry,!B.isNone(p))){p=
p.getMutableAttribute("size").data;var f=this.geometrySize;p[0]=f;p[1]=f;z.geometryVertexAttrsUpdated(0)}};D.materialParameters=function(p){return{color:this._color,textureIsSignedDistanceField:!0,distanceFieldBoundingBox:e,occlusionTest:!1,outlineColor:this._outlineColor,outlineSize:this._outlineSize,textureId:p,polygonOffset:!1,shaderPolygonOffset:0,drawInSecondSlot:!0,depthEnabled:!1,pixelSnappingEnabled:this.pixelSnappingEnabled}};D.recreateGeometry=function(p,z){const f=this.createRenderGeometry();
B.isSome(f)&&p.addGeometry(f,z);return f};D.createResources=function(p){const z=this.createTexture(),f=new b.HUDMaterial(this.materialParameters(z.id));p=this.recreateGeometry(p,f);return{material:f,texture:z,geometry:p,forEach(E){E(z);E(f);B.isSome(this.geometry)&&E(this.geometry)}}};D.createTexture=function(){const p=this.preferredTextureSize;return new a.Texture(n.createType(this._primitive,p,.5*p),{mipmap:!1,wrap:{s:33071,t:33071},width:p,height:p,components:4,noUnpackFlip:!0})};D.calculateMapBounds=
function(p){if(B.isNone(this.resources.resources)||B.isNone(this.resources.resources.geometry))return!1;const z=this.resources.resources.geometry.vertexAttributes.get("position");r.projectVectorToVector(z.data,this.view.renderCoordsHelper.spatialReference,h,this.view.spatialReference);u.expandWithBuffer(p,h);return!0};D.createRenderGeometry=function(){var p=this.geometry;if(B.isNone(p))return null;const {renderCoordsHelper:z,elevationProvider:f}=this.view;var E=t.evaluateElevationAlignmentAtPoint(p,
f,l.ElevationContext.fromElevationInfo(this.elevationInfo),z);const F=C.set(x.sv3d.get(),p.x,p.y,E);E=x.sv3d.get();r.projectVectorToVector(F,p.spatialReference,E,z.spatialReference);p=this.geometrySize;return c.createPointGeometry(null,E,null,[p,p],[0,0,0,1])};m._createClass(w,[{key:"visible",get:function(){return this.resources.visible},set:function(p){this.resources.visible=p}},{key:"attached",get:function(){return this.resources.attached},set:function(p){this.resources.attached=p}},{key:"geometry",
get:function(){return this._geometry},set:function(p){this._geometry=p;this.resources.recreateGeometry()}},{key:"size",get:function(){return this._size},set:function(p){if(p!==this._size){const z=this.preferredTextureSize;this._size=p;z<this.preferredTextureSize?B.isSome(this.resources)&&this.resources.recreate():this.updateSizeAttribute()}}},{key:"color",get:function(){return this._color},set:function(p){q.exactEquals(p,this._color)||(q.copy(this._color,p),this.updateMaterial())}},{key:"pixelSnappingEnabled",
get:function(){return this._pixelSnappingEnabled},set:function(p){this._pixelSnappingEnabled!==p&&(this._pixelSnappingEnabled=p,this.updateMaterial())}},{key:"primitive",get:function(){return this._primitive},set:function(p){this._primitive!==p&&(this._primitive=p,B.isSome(this.resources)&&this.resources.recreate())}},{key:"outlineSize",get:function(){return this._outlineSize},set:function(p){p!==this._outlineSize&&(this._outlineSize=p,this.updateMaterial())}},{key:"outlineColor",get:function(){return this._outlineColor},
set:function(p){q.exactEquals(p,this._outlineColor)||(q.copy(this._outlineColor,p),this.updateMaterial())}},{key:"elevationInfo",get:function(){return this._elevationInfo},set:function(p){this._elevationInfo=p;this.resources&&this.resources.recreateGeometry()}},{key:"geometrySize",get:function(){return this._size/.5}},{key:"preferredTextureSize",get:function(){return v.clamp(v.nextHighestPowerOfTwo(2*this.geometrySize),16,128)}}]);return w}();const e=[.25,.25,.75,.75],h=A.create();d.PointVisualElement=
k;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/3d/interactive/visualElements/VisualElementResources":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../core/watchUtils ../../webgl-engine/lib/Object3D ../../webgl-engine/lib/WebGLLayer".split(" "),function(d,m,v,B,C,A){let q=function(){function g(u){this.resourceFactory=u;this._resources=null;this._visible=!0;this._attached=!1}var r=g.prototype;r.destroy=function(){this._destroyResources()};
r.recreate=function(){this.attached&&this._createResources()};r.recreateGeometry=function(){if(this.resourceFactory.recreateGeometry){var u=this.resourceFactory.view._stage;if(!v.isNone(this._resources)&&u){var x=this._resources.object;this._resources.external.forEach(y=>{2===y.type&&u.remove(y)});x.removeAllGeometries();x=this.resourceFactory.recreateGeometry(this._resources.external,x,this._resources.layer);u.addMany(x)}}else this.recreate()};r._createOrDestroyResources=function(){this._attached?
this._resources||this._createResources():this._destroyResources()};r._createResources=function(){this._destroyResources();const u=this.resourceFactory.view._stage;if(u){var x=new A.WebGLLayer({isPickable:!1,updatePolicy:1});u.add(x);var y=new C.Object3D({castShadow:!1}),t=this.resourceFactory.createResources(y,x);t.forEach(n=>u.add(n));u.add(y);x.add(y);this._syncVisible();var l=this.resourceFactory.cameraChanged?B.init(this.resourceFactory.view.state,"camera",n=>this.resourceFactory.cameraChanged(n)):
null;this._resources={layer:x,object:y,external:t,cameraHandle:l}}};r._destroyResources=function(){if(!v.isNone(this._resources)){var u=this.resourceFactory.view._stage;null==u?void 0:u.remove(this._resources.object);null==u?void 0:u.remove(this._resources.layer);this._resources.external.forEach(x=>{null==u?void 0:u.remove(x);"dispose"in x&&x.dispose()});this._resources.object.dispose();this._resources.cameraHandle&&this._resources.cameraHandle.remove();this._resources=null}};r._syncVisible=function(){v.isNone(this._resources)||
this._resources.object.setVisible(this._visible)};m._createClass(g,[{key:"object",get:function(){return v.isSome(this._resources)?this._resources.object:null}},{key:"resources",get:function(){return v.isSome(this._resources)?this._resources.external:null}},{key:"visible",get:function(){return this._visible},set:function(u){u!==this._visible&&(this._visible=u,this._syncVisible())}},{key:"attached",get:function(){return this._attached},set:function(u){u!==this._attached&&(this._attached=u,this._createOrDestroyResources())}}]);
return g}();d.VisualElementResources=q;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/3d/layers/graphics/elevationAlignmentUtils":function(){define("exports ../../../../core/compilerUtils ../../../../core/maybe ../../../../chunks/mat4 ../../../../chunks/mat4f64 ../../../../chunks/vec3f64 ../../../../geometry/projection ../../../../layers/graphics/dehydratedFeatureUtils ./graphicUtils ../../support/ElevationProvider".split(" "),function(d,m,v,B,C,A,q,g,r,u){function x(c,a,b,k,e){const h=
(g.isDehydratedPoint(c)?c.z:u.isSamplePosition(c)?c.array[c.offset+2]:c[2])||0;switch(b.mode){case "on-the-ground":return b=v.unwrapOr(u.getElevationAtPoint(a,c,"ground"),0),e&&(e.verticalDistanceToGround=0,e.sampledElevation=b),b;case "relative-to-ground":return c=v.unwrapOr(u.getElevationAtPoint(a,c,"ground"),0),b=b.geometryZWithOffset(h,k),e&&(e.verticalDistanceToGround=b,e.sampledElevation=c),b+c;case "relative-to-scene":return c=v.unwrapOr(u.getElevationAtPoint(a,c,"scene"),0),b=b.geometryZWithOffset(h,
k),e&&(e.verticalDistanceToGround=b,e.sampledElevation=c),b+c;case "absolute-height":return b=b.geometryZWithOffset(h,k),e&&(k=v.unwrapOr(u.getElevationAtPoint(a,c,"ground"),0),e.verticalDistanceToGround=b-k,e.sampledElevation=k),b;default:return m.neverReached(b.mode),0}}d.SymbolUpdateType=void 0;(function(c){c[c.NONE=0]="NONE";c[c.UPDATE=1]="UPDATE";c[c.RECREATE=2]="RECREATE"})(d.SymbolUpdateType||(d.SymbolUpdateType={}));const y={"absolute-height":{applyElevationAlignmentBuffer:function(c,a,b,
k,e,h,w,D){h=D.calculateOffsetRenderUnits(w);D=D.featureExpressionInfoContext;a*=3;k*=3;for(w=0;w<e;++w){const p=c[a+1],z=c[a+2];b[k+0]=c[a+0];b[k+1]=p;b[k+2]=null==D?z+h:h;a+=3;k+=3}return 0},requiresAlignment:function(c){const a=c.featureExpressionInfoContext;return 0!==c.meterUnitOffset||null!=a}},"on-the-ground":{applyElevationAlignmentBuffer:function(c,a,b,k,e,h){let w=0;const D=h.spatialReference;a*=3;k*=3;for(let p=0;p<e;++p){const z=c[a+0],f=c[a+1],E=v.unwrapOr(h.getElevation(z,f,c[a+2],D,
"ground"),0);w+=E;b[k+0]=z;b[k+1]=f;b[k+2]=E;a+=3;k+=3}return w/e},requiresAlignment:()=>!0},"relative-to-ground":{applyElevationAlignmentBuffer:function(c,a,b,k,e,h,w,D){let p=0;w=D.calculateOffsetRenderUnits(w);D=D.featureExpressionInfoContext;const z=h.spatialReference;a*=3;k*=3;for(let f=0;f<e;++f){const E=c[a+0],F=c[a+1],L=c[a+2],W=v.unwrapOr(h.getElevation(E,F,L,z,"ground"),0);p+=W;b[k+0]=E;b[k+1]=F;b[k+2]=null==D?L+W+w:W+w;a+=3;k+=3}return p/e},requiresAlignment:()=>!0},"relative-to-scene":{applyElevationAlignmentBuffer:function(c,
a,b,k,e,h,w,D){let p=0;w=D.calculateOffsetRenderUnits(w);D=D.featureExpressionInfoContext;const z=h.spatialReference;a*=3;k*=3;for(let f=0;f<e;++f){const E=c[a+0],F=c[a+1],L=c[a+2],W=v.unwrapOr(h.getElevation(E,F,L,z,"scene"),0);p+=W;b[k+0]=E;b[k+1]=F;b[k+2]=null==D?L+W+w:W+w;a+=3;k+=3}return p/e},requiresAlignment:()=>!0}},t=C.create(),l={verticalDistanceToGround:0,sampledElevation:0},n=A.create();d.applyElevationAlignmentForHUD=function(c,a,b,k,e){b=x(a,b,e,k,l);r.updateVertexAttributeAuxpos1w(c,
l.verticalDistanceToGround);e=l.sampledElevation;const h=B.copy(t,c.transformation);n[0]=a.x;n[1]=a.y;n[2]=b;q.computeLinearTransformation(a.spatialReference,n,h,k.spatialReference)?c.transformation=h:console.warn("Could not locate symbol object properly, it might be misplaced");return e};d.applyPerVertexElevationAlignment=function(c,a,b,k,e,h,w,D,p,z,f){const E=y[f.mode];let F=0;if(q.projectBuffer(c,a,b,k,p.spatialReference,e,D)&&(E.requiresAlignment(f)?(F=E.applyElevationAlignmentBuffer(k,e,h,w,
D,p,z,f),c=h,e=w):c=k,q.projectBuffer(c,p.spatialReference,e,h,z.spatialReference,w,D)))return F};d.elevationModeChangeUpdateType=function(c,a,b){return null==a||null==b?c.definedChanged:"on-the-ground"===a&&"on-the-ground"===b?c.staysOnTheGround:a===b||"on-the-ground"!==a&&"on-the-ground"!==b?d.SymbolUpdateType.UPDATE:c.onTheGroundChanged};d.evaluateElevationAlignmentAtPoint=x;d.needsElevationUpdates2D=function(c){return"relative-to-ground"===c||"relative-to-scene"===c};d.needsElevationUpdates3D=
function(c){return"absolute-height"!==c};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/layers/graphics/dehydratedFeatureUtils":function(){define(["exports"],function(d){d.isDehydratedPoint=function(m){return"point"===m.type};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/3d/layers/graphics/graphicUtils":function(){define("exports ../../../../core/mathUtils ../../../../core/maybe ../../../../chunks/mat4 ../../../../chunks/mat4f64 ../../../../chunks/vec2f64 ../../../../chunks/vec3f64 ../../../../chunks/vec4 ../../../../chunks/vec4f64 ../../../../geometry/projection ../../../../geometry/support/aaBoundingBox ../../../../geometry/support/aaBoundingRect ../../../../geometry/support/centroid ../../../../geometry/support/coordsUtils ../../../../layers/graphics/dehydratedFeatures ../../../../layers/graphics/hydratedFeatures".split(" "),
function(d,m,v,B,C,A,q,g,r,u,x,y,t,l,n,c){function a(e){var h=e.paths[0];if(!h||0===h.length)return null;h=l.getPointOnPath(h,l.getPathLength(h)/2);return n.makeDehydratedPoint(h[0],h[1],h[2],e.spatialReference)}function b(e,h,w){w=w?e:c.clonePoint(e);return h&&e?u.projectPoint(e,w,h)?w:null:w}function k(e){if(Array.isArray(e)){for(const h of e)if(!k(h))return!1;return!0}return null==e||0<=e}A={"bottom-left":A.fromValues(0,0),bottom:A.fromValues(.5,0),"bottom-right":A.fromValues(1,0),left:A.fromValues(0,
.5),center:A.fromValues(.5,.5),right:A.fromValues(1,.5),"top-left":A.fromValues(0,1),top:A.fromValues(.5,1),"top-right":A.fromValues(1,1)};d.computeCentroid=function(e,h){if("point"===e.type)return b(e,h,!1);if(c.isHydratedGeometry(e))switch(e.type){case "extent":return b(e.center,h,!1);case "polygon":return b(e.centroid,h,!1);case "polyline":return b(a(e),h,!0);case "mesh":return b(e.origin,h,!1)}else switch(e.type){case "extent":var w=m.isFinite(e.zmin);e=n.makeDehydratedPoint(.5*(e.xmax+e.xmin),
.5*(e.ymax+e.ymin),w?.5*(e.zmax+e.zmin):void 0,e.spatialReference);return b(e,h,!0);case "polygon":return(w=e.rings[0])&&0!==w.length?(w=t.ringsCentroid(e.rings,e.hasZ),e=n.makeDehydratedPoint(w[0],w[1],w[2],e.spatialReference)):e=null,b(e,h,!0);case "polyline":return b(a(e),h,!0)}};d.computeObjectRotation=function(e,h,w,D=C.create()){e=e||0;h=h||0;w=w||0;0!==e&&B.rotateZ(D,D,-e/180*Math.PI);0!==h&&B.rotateX(D,D,h/180*Math.PI);0!==w&&B.rotateY(D,D,w/180*Math.PI);return D};d.computeObjectScale=function(e=
q.ONES,h,w,D=1){const p=Array(3);if(v.isNone(h)||v.isNone(w))p[0]=1,p[1]=1,p[2]=1;else{let f=0;for(let E=2;0<=E;E--){const F=e[E];let L;const W=null!=F,M=0===E&&!z&&!W,P=w[E];"symbol-value"===F||M?L=0!==P?h[E]/P:1:W&&"proportional"!==F&&isFinite(F)&&(L=0!==P?F/P:1);if(null!=L){var z=p[E]=L;f=Math.max(f,Math.abs(L))}}for(e=2;0<=e;e--)null==p[e]?p[e]=z:0===p[e]&&(p[e]=.001*f)}for(z=2;0<=z;z--)p[z]/=D;return q.fromArray(p)};d.demResolutionForBoundingBox=function(e,h){return null!=h.minDemResolution?
h.minDemResolution:x.isPoint(e)?h.minDemResolutionForPoints:.01*x.maximumDimension(e)};d.enlargeExtent=function(e,h,w,D=0){if(e){h||(h=y.create());let p=.5*e.width*(w-1);w=.5*e.height*(w-1);e.width<1E-7*e.height?p+=w/20:e.height<1E-7*e.width&&(w+=p/20);g.set(h,e.xmin-p-D,e.ymin-w-D,e.xmax+p+D,e.ymax+w+D);return h}return null};d.isValidSize=k;d.mixinColorAndOpacity=function(e,h){const w=r.clone(r.ONES);v.isSome(e)&&(w[0]=e[0],w[1]=e[1],w[2]=e[2]);v.isSome(h)?w[3]=h:v.isSome(e)&&3<e.length&&(w[3]=e[3]);
return w};d.namedAnchorToHUDMaterialAnchorPos=A;d.overrideColor=function(e,h,w,D,p,z=[0,0,0,0]){for(let f=0;3>f;++f)v.isSome(e)&&null!=e[f]?z[f]=e[f]:v.isSome(w)&&null!=w[f]?z[f]=w[f]:z[f]=p[f];v.isSome(h)?z[3]=h:v.isSome(D)?z[3]=D:z[3]=p[3];return z};d.updateVertexAttributeAuxpos1w=function(e,h){for(let w=0;w<e.geometries.length;++w){const D=e.geometries[w].getMutableAttribute("auxpos1");D&&D.data[3]!==h&&(D.data[3]=h,e.geometryVertexAttrsUpdated(w))}};d.validateSymbolLayerSize=function(e){null!=
e.isPrimitive&&(e=[e.width,e.depth,e.height]);return k(e)?null:"Symbol sizes may not be negative values"};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/layers/graphics/hydratedFeatures":function(){define("exports ../../Graphic ../../core/has ../../core/lang ../../core/maybe ../../core/typedArrayUtil ../../geometry/support/jsonUtils ./dehydratedFeatures".split(" "),function(d,m,v,B,C,A,q,g){function r(b){return"declaredClass"in b}function u(b){return"declaredClass"in b}function x(b){return"declaredClass"in
b}function y(b){return C.isNone(b)?null:r(b)?b:q.fromJSON(t(b))}function t(b){const k=b.spatialReference.toJSON();switch(b.type){case "point":{const {x:e,y:h,z:w,m:D}=b;return{x:e,y:h,z:w,m:D,spatialReference:k}}case "polygon":{const {rings:e,hasZ:h,hasM:w}=b;return{rings:l(e),hasZ:h,hasM:w,spatialReference:k}}case "polyline":{const {paths:e,hasZ:h,hasM:w}=b;return{paths:l(e),hasZ:h,hasM:w,spatialReference:k}}case "extent":{const {xmin:e,xmax:h,ymin:w,ymax:D,zmin:p,zmax:z,mmin:f,mmax:E,hasZ:F,hasM:L}=
b;return{xmin:e,xmax:h,ymin:w,ymax:D,zmin:p,zmax:z,mmin:f,mmax:E,hasZ:F,hasM:L,spatialReference:k}}case "multipoint":{const {points:e,hasZ:h,hasM:w}=b;return{points:a(e)?n(e):e,hasZ:h,hasM:w,spatialReference:k}}}}function l(b){return c(b)?b.map(k=>n(k)):b}function n(b){return b.map(k=>A.toArray(k))}function c(b){for(const k of b)if(0!==k.length)return a(k);return!1}function a(b){return b.length&&(A.isFloat32Array(b[0])||A.isFloat64Array(b[0]))}d.clonePoint=function(b,k){if(!b)return null;if(u(b)){if(null==
k)return b.clone();if(u(k))return k.copy(b)}null!=k?(k.x=b.x,k.y=b.y,k.spatialReference=b.spatialReference,b.hasZ?(k.z=b.z,k.hasZ=b.hasZ):(k.z=null,k.hasZ=!1),b.hasM?(k.m=b.m,k.hasM=!0):(k.m=null,k.hasM=!1)):(k=g.makeDehydratedPoint(b.x,b.y,b.z,b.spatialReference),b.hasM&&(k.m=b.m,k.hasM=!0));return k};d.hydrateGeometry=y;d.hydrateGraphic=function(b,k){if(!b)return null;if(x(b))return b;k=new m({layer:k,sourceLayer:k});k.visible=b.visible;k.symbol=B.clone(b.symbol);k.attributes=B.clone(b.attributes);
k.geometry=y(b.geometry);return k};d.isHydratedGeometry=r;d.isHydratedGraphic=x;d.isHydratedPoint=u;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/3d/support/ElevationProvider":function(){define(["exports","../../../core/maybe","../../../layers/graphics/dehydratedFeatureUtils"],function(d,m,v){function B(C){return"array"in C}d.SamplePosition=function(C,A=null,q=0){this.array=C;this.spatialReference=A;this.offset=q};d.getElevationAtPoint=function(C,A,q="ground"){if(v.isDehydratedPoint(A))return C.getElevation(A.x,
A.y,A.z||0,A.spatialReference,q);if(B(A)){let g=A.offset;return C.getElevation(A.array[g++],A.array[g++],A.array[g]||0,m.unwrapOr(A.spatialReference,C.spatialReference),q)}return C.getElevation(A[0],A[1],A[2]||0,C.spatialReference,q)};d.isSamplePosition=B;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/3d/layers/graphics/ElevationContext":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../core/maybe","../../../../symbols/support/unitConversionUtils",
"./featureExpressionInfoUtils"],function(d,m,v,B,C){let A=function(){function q(){this._renderUnitOffset=this._meterUnitOffset=0;this._unit="meters";this._metersPerElevationInfoUnit=1;this.mode=this.centerPointInElevationSR=this._featureExpressionInfoContext=null}var g=q.prototype;g.reset=function(){this.mode=null;this._renderUnitOffset=this._meterUnitOffset=0;this._featureExpressionInfoContext=null;this.unit="meters"};g.addOffsetRenderUnits=function(r){this._renderUnitOffset+=r};g.geometryZWithOffset=
function(r,u){u=this.calculateOffsetRenderUnits(u);return null!=this.featureExpressionInfoContext?u:r+u};g.calculateOffsetRenderUnits=function(r){let u=this._meterUnitOffset;const x=this.featureExpressionInfoContext;null!=x&&(u+=C.execute(x)*this._metersPerElevationInfoUnit);return u/r.unitInMeters+this._renderUnitOffset};g.setFromElevationInfo=function(r){this.mode=r.mode;this.unit=B.supportsUnit(r.unit)?r.unit:"meters";this.offsetElevationInfoUnits=v.unwrapOr(r.offset,0)};g.updateFeatureExpressionInfoContext=
function(r,u,x){if(v.isNone(r))this._featureExpressionInfoContext=null;else{var y=r&&r.arcade;y&&v.isSome(u)&&v.isSome(x)?(this._featureExpressionInfoContext=C.clone(r),C.setContextFeature(this._featureExpressionInfoContext,C.createFeature(y.modules,u,x))):this._featureExpressionInfoContext=r}};q.fromElevationInfo=function(r){const u=new q;v.isSome(r)&&u.setFromElevationInfo(r);return u};m._createClass(q,[{key:"featureExpressionInfoContext",get:function(){return this._featureExpressionInfoContext}},
{key:"meterUnitOffset",get:function(){return this._meterUnitOffset}},{key:"unit",get:function(){return this._unit},set:function(r){this._unit=r;this._metersPerElevationInfoUnit=B.getMetersPerUnit(r)}},{key:"offsetMeters",set:function(r){this._meterUnitOffset=r;this._renderUnitOffset=0}},{key:"offsetElevationInfoUnits",set:function(r){this._meterUnitOffset=r*this._metersPerElevationInfoUnit;this._renderUnitOffset=0}}]);return q}();d.ElevationContext=A;Object.defineProperty(d,"__esModule",{value:!0})})},
"esri/views/3d/layers/graphics/featureExpressionInfoUtils":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../core/Logger","../../../../layers/graphics/hydratedFeatures","../../../../support/arcadeOnDemand"],function(d,m,v,B,C){function A(){A=m._asyncToGenerator(function*(g,r,u){g=g&&g.expression;if("string"!==typeof g)return null;var x="0"===g?0:null;if(null!=x)return{cachedResult:x};x=yield C.loadArcade();const y=x.arcadeUtils;g=y.createSyntaxTree(g);return y.dependsOnView(g)?
(null!=u&&u.error("Expressions containing '$view' are not supported on ElevationInfo"),{cachedResult:0}):{arcade:{func:y.createFunction(g),context:y.createExecContext(null,{sr:r}),modules:x}}});return A.apply(this,arguments)}const q=v.getLogger("esri.views.3d.layers.graphics.featureExpressionInfoUtils");d.clone=function(g){return{cachedResult:g.cachedResult,arcade:g.arcade?{func:g.arcade.func,context:g.arcade.modules.arcadeUtils.createExecContext(null,{sr:g.arcade.context.spatialReference}),modules:g.arcade.modules}:
null}};d.createContext=function(g,r,u){return A.apply(this,arguments)};d.createContextWithoutExpressionSupport=function(g){g=g&&g.expression;return"string"===typeof g&&(g="0"===g?0:null,null!=g)?{cachedResult:g}:null};d.createFeature=function(g,r,u){return g.arcadeUtils.createFeature(r.attributes,r.geometry,u)};d.execute=function(g){if(null!=g){if(null!=g.cachedResult)return g.cachedResult;var r=g.arcade;r=g.arcade.modules.arcadeUtils.executeFunction(r.func,r.context);"number"!==typeof r&&(r=g.cachedResult=
0);return r}return 0};d.extractExpressionInfo=function(g,r=!1){const u=(g=g&&g.featureExpressionInfo)&&g.expression;r||"0"===u||(g=null);return g};d.setContextFeature=function(g,r){null!=g&&null==g.cachedResult&&(r&&g.arcade?(r._geometry&&(r._geometry=B.hydrateGeometry(r._geometry)),g.arcade.modules.arcadeUtils.updateExecContext(g.arcade.context,r)):q.errorOncePerTick("Arcade support required but not provided"))};d.zeroContext={cachedResult:0};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/3d/layers/graphics/sdfPrimitives":function(){define(["exports",
"../../../../core/has","../../webgl-engine/lib/Util"],function(d,m,v){function B(y,t){const l=new Uint8Array(4*y*y),n=y/2-.5;t/=2;for(let a=0;a<y;a++)for(let b=0;b<y;b++){const k=b+y*a;var c=b-n;const e=a-n;c=Math.sqrt(c*c+e*e)-t;c=c/y+.5;v.packFloatRGBA(c,l,4*k)}return l}function C(y,t){return u(y,t,!1)}function A(y,t){return u(y,t,!0)}function q(y,t){return x(y,t,!1)}function g(y,t){return x(y,t,!0)}function r(y,t){const l=new Uint8Array(4*y*y),n=Math.sqrt(1.25),c=(y-t)/2;for(let a=0;a<y;a++)for(let b=
0;b<y;b++){const k=(b-c)/t,e=(a-c+.75)/t;v.packFloatRGBA(Math.max(-(1*k+-.5*e)/n,(k-1+-.5*-e)/n,-e)*t/y+.5,l,4*(a*y+b))}return l}function u(y,t,l){l&&(t/=Math.SQRT2);const n=new Uint8Array(4*y*y);for(let a=0;a<y;a++)for(let b=0;b<y;b++){var c=b-.5*y+.25;let k=-a+.5*y-.75;const e=a*y+b;if(l){const h=(c+k)/Math.SQRT2;k=(k-c)/Math.SQRT2;c=h}c=Math.max(Math.abs(c),Math.abs(k))-.5*t;c=c/y+.5;v.packFloatRGBA(c,n,4*e)}return n}function x(y,t,l){l&&(t*=Math.SQRT2);t*=.5;const n=new Uint8Array(4*y*y);for(let a=
0;a<y;a++)for(let b=0;b<y;b++){var c=b-.5*y;let k=-a+.5*y-1;const e=a*y+b;if(l){const h=(c+k)/Math.SQRT2;k=(k-c)/Math.SQRT2;c=h}c=Math.abs(c);k=Math.abs(k);c=c>k?c>t?Math.sqrt((c-t)*(c-t)+k*k):k:k>t?Math.sqrt(c*c+(k-t)*(k-t)):c;c=c/y+.5;v.packFloatRGBA(c,n,4*e)}return n}d.createCircle=B;d.createCross=q;d.createKite=A;d.createSquare=C;d.createTriangle=r;d.createType=function(y,t,l){switch(y){case "circle":return B(t,l);case "square":return C(t,l);case "cross":return q(t,l);case "x":return g(t,l);case "kite":return A(t,
l);case "triangle":return r(t,l);default:return B(t,l)}};d.createX=g;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/Texture":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/compilerUtils ../../../../core/Error ../../../../core/Evented ../../../../core/mathUtils ../../../../core/maybe ../../../../core/promiseUtils ../../../../core/typedArrayUtil ../../../../core/urlUtils ../../../../support/requestImageUtils ../../../../support/requestUtils ./BasisUtil ./ContentObject ./DDSUtil ./glUtil3D ./Util ../../../webgl/FramebufferObject ../../../webgl/Texture ../../../webgl/Util ../../../webgl/capabilities/isWebGL2Context".split(" "),
function(d,m,v,B,C,A,q,g,r,u,x,y,t,l,n,c,a,b,k,e,h){l=function(w){function D(z,f){var E=w.call(this)||this;E.data=z;E.type=4;E.glTexture=null;E.powerOfTwoStretchInfo=null;E.loadingPromise=null;E.loadingController=null;E.events=new C;E.params=f||{};E.params.mipmap=!1!==E.params.mipmap;E.params.noUnpackFlip=E.params.noUnpackFlip||!1;E.params.preMultiplyAlpha=E.params.preMultiplyAlpha||!1;E.params.wrap=E.params.wrap||{s:10497,t:10497};E.params.powerOfTwoResizeMode=E.params.powerOfTwoResizeMode||1;E.estimatedTexMemRequired=
D.estimateTexMemRequired(E.data,E.params);E.startPreload();return E}m._inheritsLoose(D,w);var p=D.prototype;p.startPreload=function(){const z=this.data;q.isNone(z)||(z instanceof HTMLVideoElement?this.startPreloadVideoElement(z):z instanceof HTMLImageElement&&this.startPreloadImageElement(z))};p.startPreloadVideoElement=function(z){u.isBlobProtocol(z.src)||"auto"===z.preload&&z.crossOrigin||(z.preload="auto",z.crossOrigin="anonymous",z.src=z.src)};p.startPreloadImageElement=function(z){u.isDataProtocol(z.src)||
u.isBlobProtocol(z.src)||z.crossOrigin||(z.crossOrigin="anonymous",z.src=z.src)};D.getDataDimensions=function(z){return z instanceof HTMLVideoElement?{width:z.videoWidth,height:z.videoHeight}:z};D.estimateTexMemRequired=function(z,f){if(q.isNone(z))return 0;if(r.isArrayBuffer(z)||r.isUint8Array(z))return f.encoding===D.KTX2_ENCODING?t.estimateMemoryKTX2(z,f.mipmap):f.encoding===D.BASIS_ENCODING?t.estimateMemoryBasis(z,f.mipmap):z.byteLength;const {width:E,height:F}=z instanceof Image||z instanceof
ImageData||z instanceof HTMLCanvasElement||z instanceof HTMLVideoElement?D.getDataDimensions(z):f;return(f.mipmap?4/3:1)*E*F*(f.components||4)||0};p.dispose=function(){this.data=void 0};p.createDescriptor=function(z){var f;return{target:3553,pixelFormat:6408,dataType:5121,wrapMode:this.params.wrap,flipped:!this.params.noUnpackFlip,samplingMode:this.params.mipmap?9987:9729,hasMipmap:this.params.mipmap,preMultiplyAlpha:this.params.preMultiplyAlpha,maxAnisotropy:null!=(f=this.params.maxAnisotropy)?f:
this.params.mipmap?z.parameters.maxMaxAnisotropy:1}};p.load=function(z,f){if(q.isSome(this.glTexture))return this.glTexture;if(q.isSome(this.loadingPromise))return this.loadingPromise;const E=this.data;return q.isNone(E)?this.glTexture=new k(z,this.createDescriptor(z),null):"string"===typeof E?this.loadFromURL(z,f,E):E instanceof Image?this.loadFromImageElement(z,f,E):E instanceof HTMLVideoElement?this.loadFromVideoElement(z,f,E):E instanceof ImageData||E instanceof HTMLCanvasElement?this.loadFromImage(z,
E,f):(r.isArrayBuffer(E)||r.isUint8Array(E))&&this.params.encoding===D.DDS_ENCODING?this.loadFromDDSData(z,E):(r.isArrayBuffer(E)||r.isUint8Array(E))&&this.params.encoding===D.KTX2_ENCODING?this.loadFromKTX2(z,E):(r.isArrayBuffer(E)||r.isUint8Array(E))&&this.params.encoding===D.BASIS_ENCODING?this.loadFromBasis(z,E):r.isUint8Array(E)?this.loadFromPixelData(z,E):r.isArrayBuffer(E)?this.loadFromPixelData(z,new Uint8Array(E)):null};p.frameUpdate=function(z,f,E){if(!(this.data instanceof HTMLVideoElement)||
q.isNone(this.glTexture)||2>this.data.readyState||E===this.data.currentTime)return E;if(q.isSome(this.powerOfTwoStretchInfo)){const {framebuffer:F,vao:L,sourceTexture:W}=this.powerOfTwoStretchInfo;W.setData(this.data);this.drawStretchedTexture(z,f,F,L,W,this.glTexture)}else{const {width:F,height:L}=this.data,{width:W,height:M}=this.glTexture.descriptor;F!==W||L!==M?this.glTexture.updateData(0,0,0,Math.min(F,W),Math.min(L,M),this.data):this.glTexture.setData(this.data)}this.glTexture.descriptor.hasMipmap&&
this.glTexture.generateMipmap();return this.data.currentTime};p.loadFromDDSData=function(z,f){return this.glTexture=n.createDDSTexture(z,this.createDescriptor(z),f)};p.loadFromKTX2=function(z,f){return this.loadAsync(()=>t.createTextureKTX2(z,this.createDescriptor(z),f).then(E=>this.glTexture=E))};p.loadFromBasis=function(z,f){return this.loadAsync(()=>t.createTextureBasis(z,this.createDescriptor(z),f).then(E=>this.glTexture=E))};p.loadFromPixelData=function(z,f){a.assert(0<this.params.width&&0<this.params.height);
const E=this.createDescriptor(z);E.pixelFormat=1===this.params.components?6409:3===this.params.components?6407:6408;E.width=this.params.width;E.height=this.params.height;return this.glTexture=new k(z,E,f)};p.loadAsync=function(z){const f=g.createAbortController();this.loadingController=f;const E=z(f.signal);this.loadingPromise=E;z=()=>{this.loadingController===f&&(this.loadingController=null);this.loadingPromise===E&&(this.loadingPromise=null)};E.then(z,z);return E};p.loadFromURL=function(z,f,E){var F=
this;return this.loadAsync(function(){var L=m._asyncToGenerator(function*(W){W=yield x.requestImage(E,{signal:W});return F.loadFromImage(z,W,f)});return function(W){return L.apply(this,arguments)}}())};p.loadFromImageElement=function(z,f,E){var F=this;return E.complete?this.loadFromImage(z,E,f):this.loadAsync(function(){var L=m._asyncToGenerator(function*(W){W=yield y.loadImageAsync(E,E.src,!1,W);return F.loadFromImage(z,W,f)});return function(W){return L.apply(this,arguments)}}())};p.loadFromVideoElement=
function(z,f,E){return 2<=E.readyState?this.loadFromImage(z,E,f):this.loadFromVideoElementAsync(z,f,E)};p.loadFromVideoElementAsync=function(z,f,E){return this.loadAsync(F=>new Promise((L,W)=>{const M=()=>{E.removeEventListener("loadeddata",P);E.removeEventListener("error",V);q.isSome(H)&&H.remove()},P=()=>{2<=E.readyState&&(M(),L(this.loadFromImage(z,E,f)))},V=R=>{M();W(R||new B("Failed to load video"))};E.addEventListener("loadeddata",P);E.addEventListener("error",V);const H=g.onAbort(F,()=>V(g.createAbortError()))}))};
p.loadFromImage=function(z,f,E){const F=D.getDataDimensions(f);this.params.width=F.width;this.params.height=F.height;const L=this.createDescriptor(z);L.pixelFormat=3===this.params.components?6407:6408;if(this.requiresPowerOfTwo(z,L)&&(!A.isPowerOfTwo(F.width)||!A.isPowerOfTwo(F.height)))return this.glTexture=this.makePowerOfTwoTexture(z,f,F,L,E);L.width=F.width;L.height=F.height;return this.glTexture=new k(z,L,f)};p.requiresPowerOfTwo=function(z,f){const E="number"===typeof f.wrapMode?33071===f.wrapMode:
33071===f.wrapMode.s&&33071===f.wrapMode.t;return!h(z.gl)&&(f.hasMipmap||!E)};p.makePowerOfTwoTexture=function(z,f,E,F,L){const {width:W,height:M}=E;E=A.nextHighestPowerOfTwo(W);const P=A.nextHighestPowerOfTwo(M);F.width=E;F.height=P;let V;switch(this.params.powerOfTwoResizeMode){case 2:F.textureCoordinateScaleFactor=[W/E,M/P];V=new k(z,F);V.updateData(0,0,0,W,M,f);break;case 1:case null:case void 0:V=this.stretchToPowerOfTwo(z,f,F,L);break;default:v.neverReached(this.params.powerOfTwoResizeMode)}F.hasMipmap&&
V.generateMipmap();return V};p.stretchToPowerOfTwo=function(z,f,E,F){const L=new k(z,E),W=new b(z,{colorTarget:0,depthStencilTarget:0},L);f=new k(z,{target:3553,pixelFormat:E.pixelFormat,dataType:5121,wrapMode:33071,samplingMode:9729,flipped:!!E.flipped,maxAnisotropy:8,preMultiplyAlpha:E.preMultiplyAlpha},f);E=c.createQuadVAO(z);this.drawStretchedTexture(z,F,W,E,f,L);this.requiresFrameUpdates?this.powerOfTwoStretchInfo={vao:E,sourceTexture:f,framebuffer:W}:(E.dispose(!0),f.dispose(),W.detachColorTexture(),
z.bindFramebuffer(null),W.dispose());return L};p.drawStretchedTexture=function(z,f,E,F,L,W){z.bindFramebuffer(E);E=z.getViewport();z.setViewport(0,0,W.descriptor.width,W.descriptor.height);W=f.program;z.useProgram(W);W.setUniform4f("color",1,1,1,1);W.bindTexture(L,"tex");z.bindVAO(F);z.setPipelineState(f.pipeline);z.drawArrays(5,0,e.vertexCount(F,"geometry"));z.bindFramebuffer(null);z.setViewport(E.x,E.y,E.width,E.height)};p.unload=function(){if(q.isSome(this.powerOfTwoStretchInfo)){const {framebuffer:z,
vao:f,sourceTexture:E}=this.powerOfTwoStretchInfo;f.dispose(!0);E.dispose();z.dispose();this.powerOfTwoStretchInfo=this.glTexture=null}q.isSome(this.glTexture)&&(this.glTexture.dispose(),this.glTexture=null);if(q.isSome(this.loadingController)){const z=this.loadingController;this.loadingPromise=this.loadingController=null;z.abort()}this.events.emit("unloaded")};m._createClass(D,[{key:"width",get:function(){return this.params.width}},{key:"height",get:function(){return this.params.height}},{key:"requiresFrameUpdates",
get:function(){return this.data instanceof HTMLVideoElement}}]);return D}(l.ContentObject);l.DDS_ENCODING="image/vnd-ms.dds";l.KTX2_ENCODING="image/ktx2";l.BASIS_ENCODING="image/x.basis";d.Texture=l;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/support/requestImageUtils":function(){define(["exports","../chunks/_rollupPluginBabelHelpers","../request"],function(d,m,v){function B(){B=m._asyncToGenerator(function*(C,A){({data:C}=yield v(C,{responseType:"image",...A}));return C});return B.apply(this,
arguments)}d.requestImage=function(C,A){return B.apply(this,arguments)};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/BasisUtil":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../libs/basisu/BasisU ../../../webgl/Texture ../../../webgl/Util".split(" "),function(d,m,v,B,C,A){function q(){return g.apply(this,arguments)}function g(){g=m._asyncToGenerator(function*(){v.isNone(c)&&(c=B.getBasisTranscoder(),n=
yield c);return c});return g.apply(this,arguments)}function r(a,b,k,e,h){b=A.getBytesPerElementFormat(b?37496:37492);return Math.ceil(k*e*b*(h&&1<a?(4**a-1)/(3*4**(a-1)):1))}function u(a){return 1<=a.getNumImages()&&!a.isUASTC()}function x(a){return 1<=a.getFaces()&&a.isETC1S()}function y(){y=m._asyncToGenerator(function*(a,b,k){v.isNone(n)&&(n=yield q());const e=new n.BasisFile(new Uint8Array(k));if(!u(e))return null;e.startTranscoding();a=l(a,b,e.getNumLevels(0),e.getHasAlpha(),e.getImageWidth(0,
0),e.getImageHeight(0,0),(h,w)=>e.getImageTranscodedSizeInBytes(0,h,w),(h,w,D)=>e.transcodeImage(D,0,h,w,0,0));e.close();e.delete();return a});return y.apply(this,arguments)}function t(){t=m._asyncToGenerator(function*(a,b,k){v.isNone(n)&&(n=yield q());const e=new n.KTX2File(new Uint8Array(k));if(!x(e))return null;e.startTranscoding();a=l(a,b,e.getLevels(),e.getHasAlpha(),e.getWidth(),e.getHeight(),(h,w)=>e.getImageTranscodedSizeInBytes(h,0,0,w),(h,w,D)=>e.transcodeImage(D,h,0,0,w,0,-1,-1));e.close();
e.delete();return a});return t.apply(this,arguments)}function l(a,b,k,e,h,w,D,p){const {compressedTextureETC:z,compressedTextureS3TC:f}=a.capabilities,[E,F]=z?e?[1,37496]:[0,37492]:f?e?[3,33779]:[2,33776]:[13,6408];e=b.hasMipmap?k:Math.min(1,k);k=[];for(let L=0;L<e;L++)k.push(new Uint8Array(D(L,E))),p(L,E,k[L]);D=1<k.length;return new C(a,{...b,samplingMode:D?9987:9729,hasMipmap:D,internalFormat:F,width:h,height:w},{type:"compressed",levels:k})}let n=null,c=null;d.createTextureBasis=function(a,b,
k){return y.apply(this,arguments)};d.createTextureKTX2=function(a,b,k){return t.apply(this,arguments)};d.estimateMemoryBasis=function(a,b){if(v.isNone(n))return a.byteLength;a=new n.BasisFile(new Uint8Array(a));b=u(a)?r(a.getNumLevels(0),a.getHasAlpha(),a.getImageWidth(0,0),a.getImageHeight(0,0),b):0;a.close();a.delete();return b};d.estimateMemoryKTX2=function(a,b){if(v.isNone(n))return a.byteLength;a=new n.KTX2File(new Uint8Array(a));b=x(a)?r(a.getLevels(),a.getHasAlpha(),a.getWidth(),a.getHeight(),
b):0;a.close();a.delete();return b};d.loadBasis=q;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/libs/basisu/BasisU":function(){define(["require","exports","../../assets","../../core/maybe"],function(d,m,v,B){let C;m.getBasisTranscoder=function(){if(B.isNone(C)){const A=q=>v.getAssetUrl(`esri/libs/basisu/${q}`);C=(new Promise(function(q,g){d(["../../chunks/basis_transcoder"],q,g)})).then(function(q){return q.basis_transcoder}).then(({default:q})=>q({locateFile:A}).then(g=>{g.initializeBasis();
delete g.then;return g}))}return C};Object.defineProperty(m,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/DDSUtil":function(){define(["exports","../../../../core/Logger","../../../../core/mathUtils","../../../webgl/Texture"],function(d,m,v,B){function C(x){return x.charCodeAt(0)+(x.charCodeAt(1)<<8)+(x.charCodeAt(2)<<16)+(x.charCodeAt(3)<<24)}function A(x,y){var t=new Int32Array(x,0,31);if(542327876!==t[0])return q.error("Invalid magic number in DDS header"),null;if(!(t[20]&4))return q.error("Unsupported format, must contain a FourCC code"),
null;var l=t[21];let n;switch(l){case g:l=8;n=33776;break;case r:l=16;n=33778;break;case u:l=16;n=33779;break;default:return q.error("Unsupported FourCC code:",String.fromCharCode(l&255,l>>8&255,l>>16&255,l>>24&255)),null}let c=1,a=t[4],b=t[3];if(0!==(a&3)||0!==(b&3))q.warn("Rounding up compressed texture size to nearest multiple of 4."),a=a+3&-4,b=b+3&-4;const k=a,e=b;t[2]&131072&&!1!==y&&(c=Math.max(1,t[7]));1===c||v.isPowerOfTwo(a)&&v.isPowerOfTwo(b)||(q.warn("Ignoring mipmaps of non power of two sized compressed texture."),
c=1);let h=t[1]+4;const w=[];for(let D=0;D<c;++D)t=(a+3>>2)*(b+3>>2)*l,y=new Uint8Array(x,h,t),w.push(y),h+=t,a=Math.max(1,a>>1),b=Math.max(1,b>>1);return{textureData:{type:"compressed",levels:w},internalFormat:n,width:k,height:e}}const q=m.getLogger("esri.views.3d.webgl-engine.lib.DDSUtil"),g=C("DXT1"),r=C("DXT3"),u=C("DXT5");d.createDDSTexture=function(x,y,t){const {textureData:l,internalFormat:n,width:c,height:a}=A(t,y.hasMipmap);y.samplingMode=1<l.levels.length?9987:9729;y.hasMipmap=1<l.levels.length;
y.internalFormat=n;y.width=c;y.height=a;return new B(x,y,l)};d.createDDSTextureData=A;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/webgl/FramebufferObject":function(){define("../../chunks/_rollupPluginBabelHelpers ../../core/Logger ./enums ./Renderbuffer ./RenderingContext ./Texture ./Util".split(" "),function(d,m,v,B,C,A,q){function g(x){return"type"in x&&"texture"===x.type}function r(x,y){void 0!==y.width&&0<=y.width&&void 0!==y.height&&0<=y.height?y.width===x.width&&y.height===
x.height||console.error("Renderbuffer dimensions must match the framebuffer's!"):(y.width=x.width,y.height=x.height)}const u=m.getLogger("esri.views.webgl.FrameBufferObject");m=function(){function x(t,l,n,c){this._context=t;this._stencilAttachment=this._depthAttachment=this._glName=null;this._colorAttachments=new Map;this._initialized=!1;this._desc={...l};t.instanceCounter.increment(v.ResourceType.Framebuffer,this);if(n)for(Array.isArray(n)||(n=[n]),l=0;l<n.length;++l){var a;const k=n[l];let e;g(k)?
(e=k.descriptor,this._colorAttachments.set(36064+l,k)):(e=k,this._colorAttachments.set(36064+l,new A(t,k)));0!==(null==(a=this._desc)?void 0:a.colorTarget)&&console.error("Framebuffer is initialized with a texture however the descriptor indicates using a renderbuffer color attachment!");this._validateColorAttachmentPoint(36064+l);this._validateTextureDimensions(e,this._desc)}if(c instanceof B){var b;t=null!=(b=this._desc.depthStencilTarget)?b:3;2===t?this._stencilAttachment=c:1===t||3===t?this._depthAttachment=
c:console.error('If a Renderbuffer is provided, "depthStencilTarget" must be one of STENCIL_RENDER_BUFFER, DEPTH_RENDER_BUFFER or DEPTH_STENCIL_RENDER_BUFFER');r(c.descriptor,this._desc)}else if(c){this._context.capabilities.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture as an attachment!");let k;g(c)?(this._depthStencilTexture=c,k=c.descriptor):this._depthStencilTexture=new A(this._context,c);this._validateTextureDimensions(k,
this._desc)}}var y=x.prototype;y.dispose=function(){if(this._desc){var t=this._context.getBoundFramebufferObject();this._disposeColorAttachments();this._disposeDepthStencilAttachments();this._glName&&(this._context.gl.deleteFramebuffer(this._glName),this._glName=null);this._context.bindFramebuffer(t);this._context.instanceCounter.decrement(v.ResourceType.Framebuffer,this);this._desc=null}};y.getColorTexture=function(t){return(t=this._colorAttachments.get(t))&&g(t)?t:null};y.attachColorTexture=function(t,
l=36064){if(t){this._validateColorAttachmentPoint(l);this._validateTextureDimensions(t.descriptor,this._desc);this._disposeColorAttachments();if(this._initialized){this._context.bindFramebuffer(this);const n=this._context.gl;n.framebufferTexture2D(n.FRAMEBUFFER,l,n.TEXTURE_2D,t.glName,0)}this._colorAttachments.set(l,t)}};y.detachColorTexture=function(t=36064){const l=this._colorAttachments.get(t);if(g(l)){if(this._initialized){this._context.bindFramebuffer(this);const n=this._context.gl;n.framebufferTexture2D(n.FRAMEBUFFER,
t,n.TEXTURE_2D,null,0)}this._colorAttachments.delete(t);return l}};y.attachDepthStencilTexture=function(t){if(t){var l=t.descriptor;34041!==l.pixelFormat&&console.error("Depth/Stencil texture must have a pixel type of DEPTH_STENCIL!");34042!==l.dataType&&console.error("Depth/Stencil texture must have data type of UNSIGNED_INT_24_8!");this._context.capabilities.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture!");
this._validateTextureDimensions(l,this._desc);this._desc.depthStencilTarget&&4!==this._desc.depthStencilTarget&&(this._desc.depthStencilTarget=4);this._disposeDepthStencilAttachments();this._initialized&&(this._context.bindFramebuffer(this),l=this._context.gl,l.framebufferTexture2D(l.FRAMEBUFFER,l.DEPTH_STENCIL_ATTACHMENT,l.TEXTURE_2D,t.glName,0));this._depthStencilTexture=t}};y.detachDepthStencilTexture=function(){const t=this._depthStencilTexture;if(t&&this._initialized){this._context.bindFramebuffer(this);
const l=this._context.gl;this._context.gl.framebufferTexture2D(l.FRAMEBUFFER,l.DEPTH_STENCIL_ATTACHMENT,l.TEXTURE_2D,null,0)}this._depthStencilTexture=null;return t};y.attachDepthStencilBuffer=function(t){if(t){var l=t.descriptor;34041!==l.internalFormat&&33189!==l.internalFormat&&console.error("Depth/Stencil buffer must have correct internalFormat");r(l,this._desc);this._disposeDepthStencilAttachments();this._desc.depthStencilTarget=34041===l.internalFormat?3:1;this._initialized&&(this._context.bindFramebuffer(this),
l=this._context.gl,l.framebufferRenderbuffer(l.FRAMEBUFFER,1===this._desc.depthStencilTarget?l.DEPTH_ATTACHMENT:l.DEPTH_STENCIL_ATTACHMENT,l.RENDERBUFFER,t.glName));this._depthAttachment=t}};y.detachDepthStencilBuffer=function(){const t=this._context.gl,l=this._depthAttachment;l&&this._initialized&&(this._context.bindFramebuffer(this),t.framebufferRenderbuffer(t.FRAMEBUFFER,1===this._desc.depthStencilTarget?t.DEPTH_ATTACHMENT:t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,null));this._depthAttachment=
null;return l};y.detachAll=function(){this.detachColorTexture();this.detachDepthStencilBuffer();this.detachDepthStencilTexture()};y.copyToTexture=function(t,l,n,c,a,b,k){(0>t||0>l||0>a||0>b)&&console.error("Offsets cannot be negative!");(0>=n||0>=c)&&console.error("Copy width and height must be greater than zero!");var e=this._desc;const h=k.descriptor;3553!==k.descriptor.target&&console.error("Texture target must be TEXTURE_2D!");(t+n>e.width||l+c>e.height||a+n>h.width||b+c>h.height)&&console.error("Bad dimensions, the current input values will attempt to read or copy out of bounds!");
e=this._context;k=e.bindTexture(k,A.TEXTURE_UNIT_FOR_UPDATES);e.bindFramebuffer(this);e.gl.copyTexSubImage2D(3553,0,a,b,t,l,n,c);e.bindTexture(k,A.TEXTURE_UNIT_FOR_UPDATES)};y.readPixels=function(t,l,n,c,a,b,k){(0>=n||0>=c)&&console.error("Copy width and height must be greater than zero!");k||console.error("Target memory is not initialized!");this._context.bindFramebuffer(this);this._context.gl.readPixels(t,l,n,c,a,b,k)};y.resize=function(t,l){const n=this._desc;if(n.width!==t||n.height!==l)if(this._initialized){n.width=
t;n.height=l;this._colorAttachments.forEach(c=>{c&&c.resize(t,l)});if(null!=this._depthStencilTexture)this._depthStencilTexture.resize(t,l);else if(this._depthAttachment||this._stencilAttachment)this._depthAttachment&&this._depthAttachment.resize(t,l),this._stencilAttachment&&this._stencilAttachment.resize(t,l);this._context.getBoundFramebufferObject()===this&&this._context.bindFramebuffer(null);this._initialized=!1}else n.width=t,n.height=l,this._colorAttachments.forEach(c=>{c&&c.resize(t,l)}),this._depthStencilTexture&&
this._depthStencilTexture.resize(t,l)};y.initializeAndBind=function(){var t,l,n,c;const a=this._context.gl;if(this._initialized)a.bindFramebuffer(a.FRAMEBUFFER,this.glName);else{this._glName&&a.deleteFramebuffer(this._glName);var b=this._context,k=a.createFramebuffer(),e=this._desc,h=null!=(t=e.colorTarget)?t:1;t=null!=(l=e.width)?l:1;l=null!=(n=e.height)?n:1;a.bindFramebuffer(a.FRAMEBUFFER,k);0===this._colorAttachments.size&&(0===h?this._colorAttachments.set(36064,new A(b,{target:3553,pixelFormat:6408,
dataType:5121,samplingMode:9728,wrapMode:33071,width:e.width,height:e.height})):(n=new B(b,{internalFormat:32854,width:t,height:l}),this._colorAttachments.set(36064,n)));this._colorAttachments.forEach((w,D)=>{w&&(g(w)?a.framebufferTexture2D(a.FRAMEBUFFER,D,a.TEXTURE_2D,w.glName,0):a.framebufferRenderbuffer(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.RENDERBUFFER,w.glName))});n=null!=(c=e.depthStencilTarget)?c:0;switch(n){case 1:case 3:this._depthAttachment||(this._depthAttachment=new B(b,{internalFormat:1===
e.depthStencilTarget?33189:34041,width:t,height:l}));a.framebufferRenderbuffer(a.FRAMEBUFFER,1===n?a.DEPTH_ATTACHMENT:a.DEPTH_STENCIL_ATTACHMENT,a.RENDERBUFFER,this._depthAttachment.glName);break;case 2:this._stencilAttachment||(this._stencilAttachment=new B(b,{internalFormat:36168,width:t,height:l}));a.framebufferRenderbuffer(a.FRAMEBUFFER,a.STENCIL_ATTACHMENT,a.RENDERBUFFER,this._stencilAttachment.glName);break;case 4:this._depthStencilTexture||(b.capabilities.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture as an attachment!"),
this._depthStencilTexture=new A(b,{target:3553,pixelFormat:34041,dataType:34042,samplingMode:9728,wrapMode:33071,width:t,height:l})),a.framebufferTexture2D(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.TEXTURE_2D,this._depthStencilTexture.glName,0)}C.webglValidateShadersEnabled()&&a.checkFramebufferStatus(a.FRAMEBUFFER)!==a.FRAMEBUFFER_COMPLETE&&console.error("Framebuffer is incomplete!");this._glName=k;this._initialized=!0}};y._disposeColorAttachments=function(){this._colorAttachments.forEach((t,l)=>
{if(g(t)){if(this._initialized){this._context.bindFramebuffer(this);var n=this._context.gl;n.framebufferTexture2D(n.FRAMEBUFFER,l,n.TEXTURE_2D,null,0)}t.dispose()}else t instanceof WebGLRenderbuffer&&(n=this._context.gl,this._initialized&&(this._context.bindFramebuffer(this),n.framebufferRenderbuffer(n.FRAMEBUFFER,l,n.RENDERBUFFER,null)),this._context.gl.deleteRenderbuffer(t))});this._colorAttachments.clear()};y._disposeDepthStencilAttachments=function(){const t=this._context.gl;this._depthAttachment&&
(this._initialized&&(this._context.bindFramebuffer(this),t.framebufferRenderbuffer(t.FRAMEBUFFER,1===this._desc.depthStencilTarget?t.DEPTH_ATTACHMENT:t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,null)),this._depthAttachment.dispose(),this._depthAttachment=null);this._stencilAttachment&&(this._initialized&&(this._context.bindFramebuffer(this),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.STENCIL_ATTACHMENT,t.RENDERBUFFER,null)),this._stencilAttachment.dispose(),this._stencilAttachment=null);this._depthStencilTexture&&
(this._initialized&&(this._context.bindFramebuffer(this),t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,null,0)),this._depthStencilTexture.dispose(),this._depthStencilTexture=null)};y._validateTextureDimensions=function(t,l){3553!==t.target&&console.error("Texture type must be TEXTURE_2D!");void 0!==l.width&&0<=l.width&&void 0!==l.height&&0<=l.height?l.width===t.width&&l.height===t.height||console.error("Color attachment texture must match the framebuffer's!"):(l.width=
t.width,l.height=t.height)};y._validateColorAttachmentPoint=function(t){if(-1===x._MAX_COLOR_ATTACHMENTS){const l=this._context.capabilities.drawBuffers;x._MAX_COLOR_ATTACHMENTS=l?this._context.gl.getParameter(l.MAX_COLOR_ATTACHMENTS):1}t-=36064;t+1>x._MAX_COLOR_ATTACHMENTS&&u.error("esri.FrameBufferObject",`illegal attachment point for color attachment: ${t+1}. Implementation supports up to ${x._MAX_COLOR_ATTACHMENTS} color attachments`)};d._createClass(x,[{key:"glName",get:function(){return this._glName}},
{key:"descriptor",get:function(){return this._desc}},{key:"colorTexture",get:function(){const t=this._colorAttachments.get(36064);return t&&g(t)?t:null}},{key:"colorAttachment",get:function(){return this._colorAttachments.get(36064)}},{key:"depthStencilAttachment",get:function(){return this._depthStencilTexture||this._depthAttachment||this._stencilAttachment}},{key:"depthStencilTexture",get:function(){return this._depthStencilTexture}},{key:"width",get:function(){return this._desc.width}},{key:"height",
get:function(){return this._desc.height}},{key:"gpuMemoryUsage",get:function(){return q.getGpuMemoryUsage(this.colorAttachment)+q.getGpuMemoryUsage(this.depthStencilAttachment)}}]);return x}();m._MAX_COLOR_ATTACHMENTS=-1;return m})},"esri/views/webgl/Renderbuffer":function(){define(["../../chunks/_rollupPluginBabelHelpers","./enums"],function(d,m){return function(){function v(C,A){this._context=C;this._desc=A;this._context.instanceCounter.increment(m.ResourceType.Renderbuffer,this);C=this._context.gl;
this.glName=C.createRenderbuffer();this._context.bindRenderbuffer(this);C.renderbufferStorage(C.RENDERBUFFER,A.internalFormat,A.width,A.height)}var B=v.prototype;B.resize=function(C,A){const q=this._desc;if(q.width!==C||q.height!==A)q.width=C,q.height=A,C=this._context.gl,this._context.bindRenderbuffer(this),C.renderbufferStorage(C.RENDERBUFFER,q.internalFormat,q.width,q.height)};B.dispose=function(){this._context&&(this._context.gl.deleteRenderbuffer(this.glName),this._context.instanceCounter.decrement(m.ResourceType.Renderbuffer,
this),this._context=null)};d._createClass(v,[{key:"descriptor",get:function(){return this._desc}}]);return v}()})},"esri/views/3d/webgl-engine/materials/HUDMaterial":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/mathUtils ../../../../core/maybe ../../../../core/screenUtils ../../../../chunks/mat3 ../../../../chunks/mat3f64 ../../../../chunks/mat4 ../../../../chunks/mat4f64 ../../../../chunks/vec2 ../../../../chunks/vec2f64 ../../../../chunks/vec3 ../../../../chunks/vec3f64 ../../../../core/libs/gl-matrix-2/types/mat4 ../../../../geometry/support/aaBoundingRect ../../support/buffer/InterleavedLayout ../lib/geometryDataUtils ../lib/GLMaterialTexture ../lib/Material ../lib/screenSizePerspectiveUtils ../lib/Util ./internal/bufferWriterUtils ./internal/MaterialUtil ./renderers/utils ../../../../chunks/HUDMaterial.glsl ../shaders/HUDMaterialTechnique".split(" "),
function(d,m,v,B,C,A,q,g,r,u,x,y,t,l,n,c,a,b,k,e,h,w,D,p,z,f){function E(aa,ca,ha,ba=V){u.copy(ba,aa.anchorPos);ba[0]*=-ca[0];ba[1]*=-ca[1];ba[0]+=aa.screenOffset[0]*ha;ba[1]+=aa.screenOffset[1]*ha;return ba}function F(aa,ca,ha,ba,ia,ea,T,U){ca=ca-ia-(0<U[0]?ba[0]*U[0]:0);let X=ca+ba[0]+2*ia;ha=ha-ia-(0<U[1]?ba[1]*U[1]:0);ia=ha+ba[1]+2*ia;T.textureIsSignedDistanceField&&(T=T.distanceFieldBoundingBox,ca+=ba[0]*T[0],ha+=ba[1]*T[1],X-=ba[0]*(1-T[2]),ia-=ba[1]*(1-T[3]),ca-=ea,X+=ea,ha-=ea,ia+=ea);return aa[0]>
ca&&aa[0]<X&&aa[1]>ha&&aa[1]<ia}let L=function(aa){function ca(ba){ba=aa.call(this,ba,xa)||this;ba.techniqueConfig=new f.HUDMaterialTechniqueConfiguration;return ba}m._inheritsLoose(ca,aa);var ha=ca.prototype;ha.getTechniqueConfig=function(ba,ia){this.techniqueConfig.output=ba;this.techniqueConfig.slicePlaneEnabled=this.params.slicePlaneEnabled;this.techniqueConfig.verticalOffset=!!this.params.verticalOffset;this.techniqueConfig.screenSizePerspective=!!this.params.screenSizePerspective;this.techniqueConfig.screenCenterOffsetUnitsEnabled=
"screen"===this.params.centerOffsetUnits?1:0;this.techniqueConfig.polygonOffsetEnabled=this.params.polygonOffset;this.techniqueConfig.isDraped=this.params.isDraped;this.techniqueConfig.occlusionTestEnabled=this.params.occlusionTest;this.techniqueConfig.pixelSnappingEnabled=this.params.pixelSnappingEnabled;this.techniqueConfig.sdf=this.params.textureIsSignedDistanceField;this.techniqueConfig.vvSize=!!this.params.vvSizeEnabled;this.techniqueConfig.vvColor=!!this.params.vvColorEnabled;0===ba&&(this.techniqueConfig.debugDrawBorder=
!!this.params.debugDrawBorder);4===ba&&(this.techniqueConfig.binaryHighlightOcclusion=this.params.binaryHighlightOcclusion);this.techniqueConfig.depthEnabled=this.params.depthEnabled;this.techniqueConfig.transparencyPassType=ia?ia.transparencyPassType:3;this.techniqueConfig.multipassGeometryEnabled=ia?ia.multipassGeometryEnabled:!1;this.techniqueConfig.multipassTerrainEnabled=ia?ia.multipassTerrainEnabled:!1;this.techniqueConfig.cullAboveGround=ia?ia.cullAboveGround:!1;return this.techniqueConfig};
ha.intersect=function(ba,ia,ea,T,U,X,Y,fa,ja){ja?this.intersectDrapedHudGeometry(ba,X,Y,fa):this.intersectHudGeometry(ba,ia,ea,T,Y,fa)};ha.intersectDrapedHudGeometry=function(ba,ia,ea,T){const U=ba.vertexAttributes.get("position"),X=ba.vertexAttributes.get("size"),Y=this.params,fa=z.calculateAnchorPosForRendering(Y);let ja=1;var ta=1;B.isSome(T)&&(ta=T(ma),ja=ta[0],ta=ta[5]);ja*=ba.screenToWorldRatio;ta*=ba.screenToWorldRatio;T=2*ba.screenToWorldRatio;for(let qa=0;qa<U.data.length/U.size;qa++){var la=
qa*U.size;const sa=U.data[la];la=U.data[la+1];const ra=qa*X.size;wa[0]=X.data[ra]*ja;wa[1]=X.data[ra+1]*ta;let na;Y.textureIsSignedDistanceField&&(na=Y.outlineSize*ba.screenToWorldRatio/2);F(ia,sa,la,wa,T,na,Y,fa)&&ea()}};ha.intersectHudGeometry=function(ba,ia,ea,T,U,X){if(T.options.selectionMode&&T.options.hud&&!p.isInstanceHidden(ia)){ia=this.params;var Y=1,fa=1;A.fromMat4(O,ea);if(B.isSome(X)){fa=X(ma);Y=fa[0];fa=fa[5];{X=O;var ja=X[0],ta=X[1],la=X[2],qa=X[3],sa=X[4],ra=X[5],na=X[6],va=X[7],za=
X[8],Ca=1/Math.sqrt(ja*ja+ta*ta+la*la);const Da=1/Math.sqrt(qa*qa+sa*sa+ra*ra),Ia=1/Math.sqrt(na*na+va*va+za*za);X[0]=ja*Ca;X[1]=ta*Ca;X[2]=la*Ca;X[3]=qa*Da;X[4]=sa*Da;X[5]=ra*Da;X[6]=na*Ia;X[7]=va*Ia;X[8]=za*Ia}}X=ba.vertexAttributes.get("position");ja=ba.vertexAttributes.get("size");ta=ba.vertexAttributes.get("normal");ba=ba.vertexAttributes.get("auxpos1");h.assert(3<=X.size);la=T.point;qa=T.camera;sa=z.calculateAnchorPosForRendering(ia);Y*=qa.pixelRatio;fa*=qa.pixelRatio;ra="screen"===this.params.centerOffsetUnits;
for(na=0;na<X.data.length/X.size;na++)if(va=na*X.size,y.set(H,X.data[va],X.data[va+1],X.data[va+2]),y.transformMat4(H,H,ea),va=na*ja.size,wa[0]=ja.data[va]*Y,wa[1]=ja.data[va+1]*fa,y.transformMat4(H,H,qa.viewMatrix),va=na*ba.size,y.set(Q,ba.data[va+0],ba.data[va+1],ba.data[va+2]),ra||(H[0]+=Q[0],H[1]+=Q[1],0!==Q[2]&&(va=Q[2],y.normalize(Q,H),y.subtract(H,H,y.scale(Q,Q,va)))),va=na*ta.size,y.set(R,ta.data[va],ta.data[va+1],ta.data[va+2]),this.normalAndViewAngle(R,O,qa,da),this.applyVerticalOffsetTransformationView(H,
da,qa,P),qa.applyProjection(H,Z),-1<Z[0]){va=Math.floor(Z[0])+this.params.screenOffset[0];za=Math.floor(Z[1])+this.params.screenOffset[1];ra&&(va+=Q[0],0!==Q[1]&&(za+=e.applyScaleFactor(Q[1],P.factorAlignment)));e.applyPrecomputedScaleFactor(wa,P.factor,wa);Ca=1*qa.pixelRatio;let Da;ia.textureIsSignedDistanceField&&(Da=ia.outlineSize*qa.pixelRatio/2);F(la,va,za,wa,Ca,Da,ia,sa)&&(za=T.ray,y.transformMat4(S,H,g.invert(K,qa.viewMatrix)),Z[0]=la[0],Z[1]=la[1],qa.unprojectFromRenderScreen(Z,H)&&(va=t.create(),
y.copy(va,za.direction),Ca=1/y.length(va),y.scale(va,va,Ca),za=y.distance(za.origin,H)*Ca,U(za,va,-1,1,!0,S)))}}};ha.computeAttachmentOrigin=function(ba,ia){var ea=ba.vertexAttributes;if(!ea)return!1;ea=ea.get("position");ba=ba.indices.get("position");return a.computeAttachmentOriginPoints(ea,ba,ia)};ha.createBufferWriter=function(){return new I(this)};ha.normalAndViewAngle=function(ba,ia,ea,T){l.isMat4(ia)&&(ia=A.fromMat4(J,ia));y.transformMat3(T.normal,ba,ia);y.transformMat4(T.normal,T.normal,ea.viewInverseTransposeMatrix);
T.cosAngle=y.dot(N,ya);return T};ha.updateScaleInfo=function(ba,ia,ea){const T=this.params;T.screenSizePerspective?e.precomputeScaleFactor(ea,ia,T.screenSizePerspective,ba.factor):(ba.factor.scale=1,ba.factor.factor=0,ba.factor.minPixelSize=0,ba.factor.paddingPixels=0);T.screenSizePerspectiveAlignment?e.precomputeScaleFactor(ea,ia,T.screenSizePerspectiveAlignment,ba.factorAlignment):(ba.factorAlignment.factor=ba.factor.factor,ba.factorAlignment.scale=ba.factor.scale,ba.factorAlignment.minPixelSize=
ba.factor.minPixelSize,ba.factorAlignment.paddingPixels=ba.factor.paddingPixels)};ha.applyShaderOffsetsView=function(ba,ia,ea,T,U,X,Y){ia=this.normalAndViewAngle(ia,ea,U,da);this.applyVerticalGroundOffsetView(ba,ia,U,Y);this.applyVerticalOffsetTransformationView(Y,ia,U,X);this.applyPolygonOffsetView(Y,ia,T[3],U,Y);this.applyCenterOffsetView(Y,T,Y);return Y};ha.applyShaderOffsetsNDC=function(ba,ia,ea,T,U){this.applyCenterOffsetNDC(ba,ia,ea,T);B.isSome(U)&&y.copy(U,T);this.applyPolygonOffsetNDC(T,ia,
ea,T);return T};ha.applyPolygonOffsetView=function(ba,ia,ea,T,U){var X=T.aboveGround?1:-1;ea=v.sign(ea);0===ea&&(ea=X);X*=ea;if(0>=this.params.shaderPolygonOffset)return y.copy(U,ba);ia=v.clamp(Math.abs(ia.cosAngle),.01,1);T=1-Math.sqrt(1-ia*ia)/ia/T.viewport[2];0<X?y.scale(U,ba,T):y.scale(U,ba,1/T);return U};ha.applyVerticalGroundOffsetView=function(ba,ia,ea,T){const U=y.length(ba),X=ea.aboveGround?1:-1;ea=.5*ea.computeRenderPixelSizeAtDist(U);ia=y.scale(H,ia.normal,X*ea);y.add(T,ba,ia);return T};
ha.applyVerticalOffsetTransformationView=function(ba,ia,ea,T){const U=this.params;if(!U.verticalOffset||!U.verticalOffset.screenLength){if(U.screenSizePerspective||U.screenSizePerspectiveAlignment){var X=y.length(ba);this.updateScaleInfo(T,X,ia.cosAngle)}else T.factor.scale=1,T.factorAlignment.scale=1;return ba}X=y.length(ba);ea=D.verticalOffsetAtDistance(ea,X,U.verticalOffset,ia.cosAngle,U.screenSizePerspectiveAlignment||U.screenSizePerspective);this.updateScaleInfo(T,X,ia.cosAngle);y.scale(ia.normal,
ia.normal,ea);return y.add(ba,ba,ia.normal)};ha.applyCenterOffsetView=function(ba,ia,ea){const T="screen"!==this.params.centerOffsetUnits;ea!==ba&&y.copy(ea,ba);T&&(ea[0]+=ia[0],ea[1]+=ia[1],ia[2]&&(y.normalize(R,ea),y.add(ea,ea,y.scale(R,R,ia[2]))));return ea};ha.applyCenterOffsetNDC=function(ba,ia,ea,T){const U="screen"!==this.params.centerOffsetUnits;T!==ba&&y.copy(T,ba);U||(T[0]+=ia[0]/ea.fullWidth*2,T[1]+=ia[1]/ea.fullHeight*2);return T};ha.applyPolygonOffsetNDC=function(ba,ia,ea,T){const U=
this.params.shaderPolygonOffset;ba!==T&&y.copy(T,ba);U&&(ba=ea.aboveGround?1:-1,ia=ba*v.sign(ia[3]),T[2]-=(ia||ba)*U);return T};ha.getGLMaterial=function(ba){if(0===ba.output||7===ba.output)return new W(ba);if(4===ba.output)return new M(ba)};ha.calculateRelativeScreenBounds=function(ba,ia,ea=n.create()){E(this.params,ba,ia,ea);ea[2]=ea[0]+ba[0];ea[3]=ea[1]+ba[1];return ea};return ca}(k.Material);b=function(aa){function ca(ba){ba=aa.call(this,{...ba,...ba.material.params})||this;ba.updateParameters();
return ba}m._inheritsLoose(ca,aa);var ha=ca.prototype;ha.beginSlot=function(ba){return ba===(this._material.params.drawInSecondSlot?19:18)};ha.updateParameters=function(ba){this.updateTexture(this._material.params.textureId);this.selectProgram(ba)};ha.selectProgram=function(ba){this._technique=this._techniqueRep.releaseAndAcquire(f.HUDMaterialTechnique,this._material.getTechniqueConfig(this._output,ba),this._technique)};ha.ensureParameters=function(ba){this.updateParameters(ba)};ha.bind=function(ba){this.bindTextures(this._technique.program);
this.bindTextureScale(this._technique.program);this._technique.bindPass(this._material.params,ba)};return ca}(b);let W=function(aa){function ca(ba){ba=aa.call(this,ba)||this;ba._isOcclusionSlot=!1;return ba}m._inheritsLoose(ca,aa);var ha=ca.prototype;ha.beginSlot=function(ba){const ia=this._material.params.drawInSecondSlot?19:18;if(this._material.params.occlusionTest)return this._isOcclusionSlot=12===ba,12===ba||ba===ia;this._isOcclusionSlot=!1;return ba===ia};ha.selectProgram=function(ba){this._technique=
this._techniqueRep.releaseAndAcquire(f.HUDMaterialTechnique,this._material.getTechniqueConfig(this._output,ba),this._technique);this._occlusionTechnique=this._techniqueRep.releaseAndAcquire(f.HUDMaterialTechnique,this._material.getTechniqueConfig(6,ba),this._occlusionTechnique)};ha.bind=function(ba){const ia=this.technique;this._isOcclusionSlot||(this.bindTextures(ia.program),this.bindTextureScale(ia.program));ia.bindPass(this._material.params,ba)};m._createClass(ca,[{key:"technique",get:function(){return this._isOcclusionSlot?
this._occlusionTechnique:this._technique}}]);return ca}(b),M=function(aa){function ca(ha){return aa.call(this,{...ha,output:4})||this}m._inheritsLoose(ca,aa);return ca}(b);const P={factor:{scale:0,factor:0,minPixelSize:0,paddingPixels:0},factorAlignment:{scale:0,factor:0,minPixelSize:0,paddingPixels:0}},V=x.create(),H=t.create(),R=t.create(),Z=C.createRenderScreenPointArray3(),N=t.create(),S=t.create(),O=q.create(),J=q.create(),K=r.create(),Q=t.create(),da={normal:N,cosAngle:0},ma=r.create(),wa=[0,
0],ya=t.fromValues(0,0,1),xa={texCoordScale:[1,1],occlusionTest:!0,binaryHighlightOcclusion:!0,drawInSecondSlot:!1,color:[1,1,1,1],outlineColor:[1,1,1,1],outlineSize:0,textureIsSignedDistanceField:!1,distanceFieldBoundingBox:null,vvSizeEnabled:!1,vvSizeMinSize:[1,1,1],vvSizeMaxSize:[100,100,100],vvSizeOffset:[0,0,0],vvSizeFactor:[1,1,1],vvColorEnabled:!1,vvColorValues:[0,0,0,0,0,0,0,0],vvColorColors:[1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0],screenOffset:[0,0],verticalOffset:null,
screenSizePerspective:null,screenSizePerspectiveAlignment:null,slicePlaneEnabled:!1,anchorPos:x.fromValues(.5,.5),shaderPolygonOffset:1E-5,polygonOffset:!1,textureId:null,centerOffsetUnits:"world",depthEnabled:!0,pixelSnappingEnabled:!0,debugDrawBorder:!1,isDraped:!1,...k.materialParametersDefaults},G=c.newLayout().vec3f("position").vec3f("normal").vec2f("uv0").vec4u8("color").vec2f("size").vec4f("auxpos1").vec4f("auxpos2");let I=function(){function aa(ha){this.material=ha;this.vertexBufferLayout=
G}var ca=aa.prototype;ca.allocate=function(ha){return this.vertexBufferLayout.createBuffer(ha)};ca.elementCount=function(ha){return 6*ha.indices.get("position").length};ca.write=function(ha,ba,ia,ea){w.writePosition(ba.indices.get("position"),ba.vertexAttributes.get("position").data,ha.transformation,ia.position,ea,6);w.writeNormal(ba.indices.get("normal"),ba.vertexAttributes.get("normal").data,ha.invTranspTransformation,ia.normal,ea,6);var T=ba.vertexAttributes.get("uv0").data;if(null==T||4>T.length){T=
this.material.params;var U=ha=0;var X=T.texCoordScale[0];T=T.texCoordScale[1]}else ha=T[0],U=T[1],X=T[2],T=T[3];X=Math.min(1.99999,X+1);T=Math.min(1.99999,T+1);var Y=ba.indices.get("position").length,fa=ia.uv0,ja=ea;for(var ta=0;ta<Y;++ta)fa.set(ja,0,ha),fa.set(ja,1,U),ja+=1,fa.set(ja,0,X),fa.set(ja,1,U),ja+=1,fa.set(ja,0,X),fa.set(ja,1,T),ja+=1,fa.set(ja,0,X),fa.set(ja,1,T),ja+=1,fa.set(ja,0,ha),fa.set(ja,1,T),ja+=1,fa.set(ja,0,ha),fa.set(ja,1,U),ja+=1;w.writeColor(ba.indices.get("color"),ba.vertexAttributes.get("color").data,
4,ia.color,ea,6);ha=ba.indices.get("size");U=ba.vertexAttributes.get("size").data;X=ha.length;T=ia.size;Y=ea;for(fa=0;fa<X;++fa){ja=U[2*ha[fa]];ta=U[2*ha[fa]+1];for(let la=0;6>la;++la)T.set(Y,0,ja),T.set(Y,1,ta),Y+=1}ba.indices.get("auxpos1")&&ba.vertexAttributes.get("auxpos1")&&w.writeBufferVec4(ba.indices.get("auxpos1"),ba.vertexAttributes.get("auxpos1").data,ia.auxpos1,ea,6);ba.indices.get("auxpos2")&&ba.vertexAttributes.get("auxpos2")&&w.writeBufferVec4(ba.indices.get("auxpos2"),ba.vertexAttributes.get("auxpos2").data,
ia.auxpos2,ea,6)};return aa}();d.HUDMaterial=L;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/chunks/mat3":function(){define(["exports","./common"],function(d,m){function v(H,R){H[0]=R[0];H[1]=R[1];H[2]=R[2];H[3]=R[4];H[4]=R[5];H[5]=R[6];H[6]=R[8];H[7]=R[9];H[8]=R[10];return H}function B(H,R){H[0]=R[0];H[1]=R[1];H[2]=R[2];H[3]=R[3];H[4]=R[4];H[5]=R[5];H[6]=R[6];H[7]=R[7];H[8]=R[8];return H}function C(H,R,Z,N,S,O,J,K,Q,da){H[0]=R;H[1]=Z;H[2]=N;H[3]=S;H[4]=O;H[5]=J;H[6]=K;H[7]=Q;H[8]=da;
return H}function A(H){H[0]=1;H[1]=0;H[2]=0;H[3]=0;H[4]=1;H[5]=0;H[6]=0;H[7]=0;H[8]=1;return H}function q(H,R){if(H===R){const Z=R[1],N=R[2],S=R[5];H[1]=R[3];H[2]=R[6];H[3]=Z;H[5]=R[7];H[6]=N;H[7]=S}else H[0]=R[0],H[1]=R[3],H[2]=R[6],H[3]=R[1],H[4]=R[4],H[5]=R[7],H[6]=R[2],H[7]=R[5],H[8]=R[8];return H}function g(H,R){const Z=R[0],N=R[1],S=R[2],O=R[3],J=R[4],K=R[5],Q=R[6],da=R[7];R=R[8];const ma=R*J-K*da,wa=-R*O+K*Q,ya=da*O-J*Q;let xa=Z*ma+N*wa+S*ya;if(!xa)return null;xa=1/xa;H[0]=ma*xa;H[1]=(-R*N+
S*da)*xa;H[2]=(K*N-S*J)*xa;H[3]=wa*xa;H[4]=(R*Z-S*Q)*xa;H[5]=(-K*Z+S*O)*xa;H[6]=ya*xa;H[7]=(-da*Z+N*Q)*xa;H[8]=(J*Z-N*O)*xa;return H}function r(H,R){const Z=R[0],N=R[1],S=R[2],O=R[3],J=R[4],K=R[5],Q=R[6],da=R[7];R=R[8];H[0]=J*R-K*da;H[1]=S*da-N*R;H[2]=N*K-S*J;H[3]=K*Q-O*R;H[4]=Z*R-S*Q;H[5]=S*O-Z*K;H[6]=O*da-J*Q;H[7]=N*Q-Z*da;H[8]=Z*J-N*O;return H}function u(H){const R=H[3],Z=H[4],N=H[5],S=H[6],O=H[7],J=H[8];return H[0]*(J*Z-N*O)+H[1]*(-J*R+N*S)+H[2]*(O*R-Z*S)}function x(H,R,Z){const N=R[0],S=R[1],
O=R[2],J=R[3],K=R[4],Q=R[5],da=R[6],ma=R[7];R=R[8];const wa=Z[0],ya=Z[1],xa=Z[2],G=Z[3],I=Z[4],aa=Z[5],ca=Z[6],ha=Z[7];Z=Z[8];H[0]=wa*N+ya*J+xa*da;H[1]=wa*S+ya*K+xa*ma;H[2]=wa*O+ya*Q+xa*R;H[3]=G*N+I*J+aa*da;H[4]=G*S+I*K+aa*ma;H[5]=G*O+I*Q+aa*R;H[6]=ca*N+ha*J+Z*da;H[7]=ca*S+ha*K+Z*ma;H[8]=ca*O+ha*Q+Z*R;return H}function y(H,R,Z){const N=R[0],S=R[1],O=R[2],J=R[3],K=R[4],Q=R[5],da=R[6],ma=R[7];R=R[8];const wa=Z[0];Z=Z[1];H[0]=N;H[1]=S;H[2]=O;H[3]=J;H[4]=K;H[5]=Q;H[6]=wa*N+Z*J+da;H[7]=wa*S+Z*K+ma;H[8]=
wa*O+Z*Q+R;return H}function t(H,R,Z){const N=R[0],S=R[1],O=R[2],J=R[3],K=R[4],Q=R[5],da=R[6],ma=R[7];R=R[8];const wa=Math.sin(Z);Z=Math.cos(Z);H[0]=Z*N+wa*J;H[1]=Z*S+wa*K;H[2]=Z*O+wa*Q;H[3]=Z*J-wa*N;H[4]=Z*K-wa*S;H[5]=Z*Q-wa*O;H[6]=da;H[7]=ma;H[8]=R;return H}function l(H,R,Z){const N=Z[0],S=Z[1];Z=Z[2];H[0]=N*R[0];H[1]=N*R[1];H[2]=N*R[2];H[3]=S*R[3];H[4]=S*R[4];H[5]=S*R[5];H[6]=Z*R[6];H[7]=Z*R[7];H[8]=Z*R[8];return H}function n(H,R,Z){const N=Z[0];Z=Z[1];H[0]=N*R[0];H[1]=N*R[1];H[2]=N*R[2];H[3]=
Z*R[3];H[4]=Z*R[4];H[5]=Z*R[5];return H}function c(H,R){H[0]=1;H[1]=0;H[2]=0;H[3]=0;H[4]=1;H[5]=0;H[6]=R[0];H[7]=R[1];H[8]=1;return H}function a(H,R){const Z=Math.sin(R);R=Math.cos(R);H[0]=R;H[1]=Z;H[2]=0;H[3]=-Z;H[4]=R;H[5]=0;H[6]=0;H[7]=0;H[8]=1;return H}function b(H,R){H[0]=R[0];H[1]=0;H[2]=0;H[3]=0;H[4]=R[1];H[5]=0;H[6]=0;H[7]=0;H[8]=1;return H}function k(H,R){H[0]=R[0];H[1]=R[1];H[2]=0;H[3]=R[2];H[4]=R[3];H[5]=0;H[6]=R[4];H[7]=R[5];H[8]=1;return H}function e(H,R){var Z=R[0],N=R[1],S=R[2];R=R[3];
var O=Z+Z,J=N+N;const K=S+S;Z*=O;const Q=N*O;N*=J;const da=S*O,ma=S*J;S*=K;O*=R;J*=R;R*=K;H[0]=1-N-S;H[3]=Q-R;H[6]=da+J;H[1]=Q+R;H[4]=1-Z-S;H[7]=ma-O;H[2]=da-J;H[5]=ma+O;H[8]=1-Z-N;return H}function h(H,R){const Z=R[0],N=R[1],S=R[2],O=R[4],J=R[5],K=R[6],Q=R[8],da=R[9];R=R[10];const ma=R*J-K*da,wa=-R*O+K*Q,ya=da*O-J*Q;var xa=Z*ma+N*wa+S*ya;if(!xa)return null;xa=1/xa;H[0]=ma*xa;H[1]=(-R*N+S*da)*xa;H[2]=(K*N-S*J)*xa;H[3]=wa*xa;H[4]=(R*Z-S*Q)*xa;H[5]=(-K*Z+S*O)*xa;H[6]=ya*xa;H[7]=(-da*Z+N*Q)*xa;H[8]=
(J*Z-N*O)*xa;return H}function w(H,R){const Z=R[0],N=R[1],S=R[2],O=R[3],J=R[4],K=R[5],Q=R[6],da=R[7];var ma=R[8],wa=R[9],ya=R[10],xa=R[11];const G=R[12],I=R[13],aa=R[14];R=R[15];const ca=Z*K-N*J,ha=Z*Q-S*J,ba=Z*da-O*J,ia=N*Q-S*K,ea=N*da-O*K,T=S*da-O*Q,U=ma*I-wa*G,X=ma*aa-ya*G;ma=ma*R-xa*G;const Y=wa*aa-ya*I;wa=wa*R-xa*I;ya=ya*R-xa*aa;xa=ca*ya-ha*wa+ba*Y+ia*ma-ea*X+T*U;if(!xa)return null;xa=1/xa;H[0]=(K*ya-Q*wa+da*Y)*xa;H[1]=(Q*ma-J*ya-da*X)*xa;H[2]=(J*wa-K*ma+da*U)*xa;H[3]=(S*wa-N*ya-O*Y)*xa;H[4]=
(Z*ya-S*ma+O*X)*xa;H[5]=(N*ma-Z*wa-O*U)*xa;H[6]=(I*T-aa*ea+R*ia)*xa;H[7]=(aa*ba-G*T-R*ha)*xa;H[8]=(G*ea-I*ba+R*ca)*xa;return H}function D(H,R,Z){H[0]=2/R;H[1]=0;H[2]=0;H[3]=0;H[4]=-2/Z;H[5]=0;H[6]=-1;H[7]=1;H[8]=1;return H}function p(H){return"mat3("+H[0]+", "+H[1]+", "+H[2]+", "+H[3]+", "+H[4]+", "+H[5]+", "+H[6]+", "+H[7]+", "+H[8]+")"}function z(H){return Math.sqrt(H[0]**2+H[1]**2+H[2]**2+H[3]**2+H[4]**2+H[5]**2+H[6]**2+H[7]**2+H[8]**2)}function f(H,R,Z){H[0]=R[0]+Z[0];H[1]=R[1]+Z[1];H[2]=R[2]+
Z[2];H[3]=R[3]+Z[3];H[4]=R[4]+Z[4];H[5]=R[5]+Z[5];H[6]=R[6]+Z[6];H[7]=R[7]+Z[7];H[8]=R[8]+Z[8];return H}function E(H,R,Z){H[0]=R[0]-Z[0];H[1]=R[1]-Z[1];H[2]=R[2]-Z[2];H[3]=R[3]-Z[3];H[4]=R[4]-Z[4];H[5]=R[5]-Z[5];H[6]=R[6]-Z[6];H[7]=R[7]-Z[7];H[8]=R[8]-Z[8];return H}function F(H,R,Z){H[0]=R[0]*Z;H[1]=R[1]*Z;H[2]=R[2]*Z;H[3]=R[3]*Z;H[4]=R[4]*Z;H[5]=R[5]*Z;H[6]=R[6]*Z;H[7]=R[7]*Z;H[8]=R[8]*Z;return H}function L(H,R,Z,N){H[0]=R[0]+Z[0]*N;H[1]=R[1]+Z[1]*N;H[2]=R[2]+Z[2]*N;H[3]=R[3]+Z[3]*N;H[4]=R[4]+Z[4]*
N;H[5]=R[5]+Z[5]*N;H[6]=R[6]+Z[6]*N;H[7]=R[7]+Z[7]*N;H[8]=R[8]+Z[8]*N;return H}function W(H,R){return H[0]===R[0]&&H[1]===R[1]&&H[2]===R[2]&&H[3]===R[3]&&H[4]===R[4]&&H[5]===R[5]&&H[6]===R[6]&&H[7]===R[7]&&H[8]===R[8]}function M(H,R){const Z=H[0],N=H[1],S=H[2],O=H[3],J=H[4],K=H[5],Q=H[6],da=H[7];H=H[8];const ma=R[0],wa=R[1],ya=R[2],xa=R[3],G=R[4],I=R[5],aa=R[6],ca=R[7];R=R[8];return Math.abs(Z-ma)<=m.EPSILON*Math.max(1,Math.abs(Z),Math.abs(ma))&&Math.abs(N-wa)<=m.EPSILON*Math.max(1,Math.abs(N),Math.abs(wa))&&
Math.abs(S-ya)<=m.EPSILON*Math.max(1,Math.abs(S),Math.abs(ya))&&Math.abs(O-xa)<=m.EPSILON*Math.max(1,Math.abs(O),Math.abs(xa))&&Math.abs(J-G)<=m.EPSILON*Math.max(1,Math.abs(J),Math.abs(G))&&Math.abs(K-I)<=m.EPSILON*Math.max(1,Math.abs(K),Math.abs(I))&&Math.abs(Q-aa)<=m.EPSILON*Math.max(1,Math.abs(Q),Math.abs(aa))&&Math.abs(da-ca)<=m.EPSILON*Math.max(1,Math.abs(da),Math.abs(ca))&&Math.abs(H-R)<=m.EPSILON*Math.max(1,Math.abs(H),Math.abs(R))}function P(H){const R=m.EPSILON,Z=H[0],N=H[1],S=H[2],O=H[3],
J=H[4],K=H[5],Q=H[6],da=H[7];H=H[8];return Math.abs(1-(Z*Z+O*O+Q*Q))<=R&&Math.abs(1-(N*N+J*J+da*da))<=R&&Math.abs(1-(S*S+K*K+H*H))<=R}var V=Object.freeze({__proto__:null,fromMat4:v,copy:B,set:C,identity:A,transpose:q,invert:g,adjoint:r,determinant:u,multiply:x,translate:y,rotate:t,scale:l,scaleByVec2:n,fromTranslation:c,fromRotation:a,fromScaling:b,fromMat2d:k,fromQuat:e,normalFromMat4Legacy:h,normalFromMat4:w,projection:D,str:p,frob:z,add:f,subtract:E,multiplyScalar:F,multiplyScalarAndAdd:L,exactEquals:W,
equals:M,isOrthoNormal:P,mul:x,sub:E});d.add=f;d.adjoint=r;d.copy=B;d.determinant=u;d.equals=M;d.exactEquals=W;d.frob=z;d.fromMat2d=k;d.fromMat4=v;d.fromQuat=e;d.fromRotation=a;d.fromScaling=b;d.fromTranslation=c;d.identity=A;d.invert=g;d.isOrthoNormal=P;d.mat3=V;d.mul=x;d.multiply=x;d.multiplyScalar=F;d.multiplyScalarAndAdd=L;d.normalFromMat4=w;d.normalFromMat4Legacy=h;d.projection=D;d.rotate=t;d.scale=l;d.scaleByVec2=n;d.set=C;d.str=p;d.sub=E;d.subtract=E;d.translate=y;d.transpose=q})},"esri/core/libs/gl-matrix-2/types/mat4":function(){define(["exports"],
function(d){function m(B){return B instanceof Float32Array&&16<=B.length}function v(B){return Array.isArray(B)&&16<=B.length}d.isMat4=function(B){return m(B)||v(B)};d.isMat4f32=m;d.isMat4f64=v;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/GLMaterialTexture":function(){define(["../../../../chunks/_rollupPluginBabelHelpers","../../../../core/maybe","./GLMaterial"],function(d,m,v){return function(B){function C(q){var g=B.call(this,q)||this;g._textureIDs=new Set;
g._textureRepository=q.textureRep;g._textureId=q.textureId;g._initTransparent=!!q.initTextureTransparent;g._texture=g._acquire(g._textureId);g._textureNormal=g._acquire(q.normalTextureId);g._textureEmissive=g._acquire(q.emissiveTextureId);g._textureOcclusion=g._acquire(q.occlusionTextureId);g._textureMetallicRoughness=g._acquire(q.metallicRoughnessTextureId);return g}d._inheritsLoose(C,B);var A=C.prototype;A.dispose=function(){this._textureIDs.forEach(q=>this._textureRepository.release(q));this._textureIDs.clear()};
A.updateTexture=function(q){q!==this._textureId&&(this._release(this._textureId),this._textureId=q,this._texture=this._acquire(this._textureId))};A.bindTextures=function(q){m.isSome(this._texture)&&q.bindTexture(this._texture.glTexture,"tex");m.isSome(this._textureNormal)&&q.bindTexture(this._textureNormal.glTexture,"normalTexture");m.isSome(this._textureEmissive)&&q.bindTexture(this._textureEmissive.glTexture,"texEmission");m.isSome(this._textureOcclusion)&&q.bindTexture(this._textureOcclusion.glTexture,
"texOcclusion");m.isSome(this._textureMetallicRoughness)&&q.bindTexture(this._textureMetallicRoughness.glTexture,"texMetallicRoughness")};A.bindTextureScale=function(q){const g=m.isSome(this._texture)&&this._texture.glTexture;g&&g.descriptor.textureCoordinateScaleFactor?q.setUniform2fv("textureCoordinateScaleFactor",g.descriptor.textureCoordinateScaleFactor):q.setUniform2f("textureCoordinateScaleFactor",1,1)};A._acquire=function(q){if(!m.isNone(q))return this._textureIDs.add(q),this._textureRepository.acquire(q,
this._initTransparent)};A._release=function(q){m.isNone(q)||(this._textureIDs.delete(q),this._textureRepository.release(q))};return C}(v)})},"esri/views/3d/webgl-engine/materials/internal/bufferWriterUtils":function(){define(["exports","../../../../../chunks/mat4","../../../../../geometry/support/buffer/BufferView","../../lib/Util"],function(d,m,v,B){function C(y,t,l,n){const c=l.typedBuffer;l=l.typedBufferStride;const a=y.length;n*=l;for(let b=0;b<a;++b){const k=2*y[b];c[n]=t[k];c[n+1]=t[k+1];n+=
l}}function A(y,t,l,n,c){const a=l.typedBuffer;l=l.typedBufferStride;const b=y.length;n*=l;if(null==c||1===c)for(c=0;c<b;++c){var k=3*y[c];a[n]=t[k];a[n+1]=t[k+1];a[n+2]=t[k+2];n+=l}else for(k=0;k<b;++k){const e=3*y[k];for(let h=0;h<c;++h)a[n]=t[e],a[n+1]=t[e+1],a[n+2]=t[e+2],n+=l}}function q(y,t,l,n,c=1){const a=l.typedBuffer;l=l.typedBufferStride;const b=y.length;n*=l;if(1===c)for(c=0;c<b;++c){var k=4*y[c];a[n]=t[k];a[n+1]=t[k+1];a[n+2]=t[k+2];a[n+3]=t[k+3];n+=l}else for(k=0;k<b;++k){const e=4*
y[k];for(let h=0;h<c;++h)a[n]=t[e],a[n+1]=t[e+1],a[n+2]=t[e+2],a[n+3]=t[e+3],n+=l}}function g(y,t,l,n,c,a=1){if(l){var b=n.typedBuffer;n=n.typedBufferStride;var k=y.length,e=l[0],h=l[1],w=l[2],D=l[4],p=l[5],z=l[6],f=l[8],E=l[9],F=l[10],L=l[12],W=l[13];l=l[14];c*=n;if(1===a)for(a=0;a<k;++a){var M=3*y[a],P=t[M],V=t[M+1];M=t[M+2];b[c]=e*P+D*V+f*M+L;b[c+1]=h*P+p*V+E*M+W;b[c+2]=w*P+z*V+F*M+l;c+=n}else for(P=0;P<k;++P){V=3*y[P];var H=t[V],R=t[V+1];const Z=t[V+2];V=e*H+D*R+f*Z+L;M=h*H+p*R+E*Z+W;H=w*H+z*
R+F*Z+l;for(R=0;R<a;++R)b[c]=V,b[c+1]=M,b[c+2]=H,c+=n}}else A(y,t,n,c,a)}function r(y,t,l,n,c,a=1){if(l){var b=n.typedBuffer;n=n.typedBufferStride;var k=y.length,e=l[0],h=l[1],w=l[2],D=l[4],p=l[5],z=l[6],f=l[8],E=l[9],F=l[10];l=!m.isOrthoNormal(l);c*=n;if(1===a)for(a=0;a<k;++a){var L=3*y[a],W=t[L],M=t[L+1],P=t[L+2];L=e*W+D*M+f*P;var V=h*W+p*M+E*P;W=w*W+z*M+F*P;l&&(M=L*L+V*V+W*W,.999999>M&&1E-6<M&&(M=1/Math.sqrt(M),L*=M,V*=M,W*=M));b[c+0]=L;b[c+1]=V;b[c+2]=W;c+=n}else for(L=0;L<k;++L){V=3*y[L];M=t[V];
P=t[V+1];const H=t[V+2];V=e*M+D*P+f*H;W=h*M+p*P+E*H;M=w*M+z*P+F*H;l&&(P=V*V+W*W+M*M,.999999>P&&1E-6<P&&(P=1/Math.sqrt(P),V*=P,W*=P,M*=P));for(P=0;P<a;++P)b[c+0]=V,b[c+1]=W,b[c+2]=M,c+=n}}else A(y,t,n,c,a)}function u(y,t,l,n,c,a=1){if(l){var b=n.typedBuffer;n=n.typedBufferStride;var k=y.length,e=l[0],h=l[1],w=l[2],D=l[4],p=l[5],z=l[6],f=l[8],E=l[9],F=l[10];l=!m.isOrthoNormal(l);c*=n;if(1===a)for(a=0;a<k;++a){var L=4*y[a],W=t[L],M=t[L+1],P=t[L+2];L=t[L+3];var V=e*W+D*M+f*P,H=h*W+p*M+E*P;W=w*W+z*M+F*
P;l&&(M=V*V+H*H+W*W,.999999>M&&1E-6<M&&(M=1/Math.sqrt(M),V*=M,H*=M,W*=M));b[c+0]=V;b[c+1]=H;b[c+2]=W;b[c+3]=L;c+=n}else for(L=0;L<k;++L){V=4*y[L];M=t[V];P=t[V+1];const R=t[V+2];V=t[V+3];H=e*M+D*P+f*R;W=h*M+p*P+E*R;M=w*M+z*P+F*R;l&&(P=H*H+W*W+M*M,.999999>P&&1E-6<P&&(P=1/Math.sqrt(P),H*=P,W*=P,M*=P));for(P=0;P<a;++P)b[c+0]=H,b[c+1]=W,b[c+2]=M,b[c+3]=V,c+=n}}else q(y,t,n,c,a)}function x(y,t,l,n,c,a=1){const b=n.typedBuffer;n=n.typedBufferStride;const k=y.length;c*=n;if(1===a)if(4===l)for(a=0;a<k;++a)l=
4*y[a],b[c]=t[l],b[c+1]=t[l+1],b[c+2]=t[l+2],b[c+3]=t[l+3],c+=n;else{if(3===l)for(a=0;a<k;++a)l=3*y[a],b[c]=t[l],b[c+1]=t[l+1],b[c+2]=t[l+2],b[c+3]=255,c+=n}else if(4===l)for(l=0;l<k;++l){var e=4*y[l];for(var h=0;h<a;++h)b[c]=t[e],b[c+1]=t[e+1],b[c+2]=t[e+2],b[c+3]=t[e+3],c+=n}else if(3===l)for(l=0;l<k;++l)for(e=3*y[l],h=0;h<a;++h)b[c]=t[e],b[c+1]=t[e+1],b[c+2]=t[e+2],b[c+3]=255,c+=n}d.writeBufferMat3f=function(y,t,l,n){const c=l.typedBuffer;l=l.typedBufferStride;const a=y.length;n*=l;for(let b=0;b<
a;++b){const k=9*y[b];for(let e=0;9>e;++e)c[n+e]=t[k+e];n+=l}};d.writeBufferMat4f=function(y,t,l,n){const c=l.typedBuffer;l=l.typedBufferStride;const a=y.length;n*=l;for(let b=0;b<a;++b){const k=16*y[b];for(let e=0;16>e;++e)c[n+e]=t[k+e];n+=l}};d.writeBufferVec2=C;d.writeBufferVec3=A;d.writeBufferVec4=q;d.writeColor=x;d.writeDefaultAttributes=function(y,t,l,n,c,a){for(const k of t.fieldNames){t=y.vertexAttributes.get(k);const e=y.indices.get(k);if(t&&e)switch(k){case "position":B.assert(3===t.size);
var b=c.getField(k,v.BufferViewVec3f);b&&g(e,t.data,l,b,a);break;case "normal":B.assert(3===t.size);(b=c.getField(k,v.BufferViewVec3f))&&r(e,t.data,n,b,a);break;case "uv0":B.assert(2===t.size);(b=c.getField(k,v.BufferViewVec2f))&&C(e,t.data,b,a);break;case "color":B.assert(3===t.size||4===t.size);(b=c.getField(k,v.BufferViewVec4u8))&&x(e,t.data,t.size,b,a);break;case "symbolColor":B.assert(3===t.size||4===t.size);(b=c.getField(k,v.BufferViewVec4u8))&&x(e,t.data,t.size,b,a);break;case "tangent":B.assert(4===
t.size),(b=c.getField(k,v.BufferViewVec4f))&&u(e,t.data,n,b,a)}}};d.writeNormal=r;d.writePosition=g;d.writeTangent=u;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/chunks/HUDMaterial.glsl":function(){define("exports ./vec2 ./vec2f64 ./vec4f64 ../views/3d/webgl-engine/core/shaderLibrary/Slice.glsl ../views/3d/webgl-engine/core/shaderLibrary/hud/AlignPixel.glsl ../views/3d/webgl-engine/core/shaderLibrary/hud/HUD.glsl ../views/3d/webgl-engine/core/shaderLibrary/hud/HUDOcclusionPass.glsl ../views/3d/webgl-engine/core/shaderLibrary/output/OutputHighlight.glsl ../views/3d/webgl-engine/core/shaderLibrary/shading/VisualVariables.glsl ../views/3d/webgl-engine/core/shaderLibrary/util/AlphaDiscard.glsl ../views/3d/webgl-engine/core/shaderLibrary/util/ColorConversion.glsl ../views/3d/webgl-engine/core/shaderLibrary/util/RgbaFloatEncoding.glsl ../views/3d/webgl-engine/core/shaderLibrary/util/ScreenSizePerspective.glsl ../views/3d/webgl-engine/core/shaderModules/interfaces ../views/3d/webgl-engine/core/shaderModules/ShaderBuilder".split(" "),
function(d,m,v,B,C,A,q,g,r,u,x,y,t,l,n,c){function a(h){const w=new c.ShaderBuilder;var D=h.signedDistanceFieldEnabled;w.include(A.AlignPixel);w.include(q.HUD,h);w.include(C.Slice,h);if(6===h.output)return w.include(g.HUDOcclusionPass,h),w;w.include(l.ScreenSizePerspective);w.fragment.include(t.RgbaFloatEncoding);w.fragment.include(y.ColorConversion);w.include(u.VisualVariables,h);w.varyings.add("vcolor","vec4");w.varyings.add("vtc","vec2");w.varyings.add("vsize","vec2");h.binaryHighlightOcclusionEnabled&&
w.varyings.add("voccluded","float");w.vertex.uniforms.add("screenOffset","vec2").add("anchorPos","vec2").add("textureCoordinateScaleFactor","vec2").add("materialColor","vec4");D&&w.vertex.uniforms.add("outlineColor","vec4");h.screenSizePerspectiveEnabled&&w.vertex.uniforms.add("screenSizePerspective","vec4");(h.debugDrawBorder||h.binaryHighlightOcclusionEnabled)&&w.varyings.add("debugBorderCoords","vec4");w.attributes.add("uv0","vec2");w.attributes.add("color","vec4");w.attributes.add("size","vec2");
w.attributes.add("auxpos2","vec4");w.vertex.code.add(n.glsl`
    void main(void) {
      ProjectHUDAux projectAux;
      vec4 posProj = projectPositionHUD(projectAux);

      if (rejectBySlice(projectAux.posModel)) {
        // Project outside of clip plane
        gl_Position = vec4(1e038, 1e038, 1e038, 1.0);
        return;
      }
      vec2 inputSize;
      ${h.screenSizePerspectiveEnabled?n.glsl`
      inputSize = screenSizePerspectiveScaleVec2(size, projectAux.absCosAngle, projectAux.distanceToCamera, screenSizePerspective);
      vec2 screenOffsetScaled = screenSizePerspectiveScaleVec2(screenOffset, projectAux.absCosAngle, projectAux.distanceToCamera, screenSizePerspectiveAlignment);
         `:n.glsl`
      inputSize = size;
      vec2 screenOffsetScaled = screenOffset;`}

      ${h.vvSize?"inputSize *\x3d vvScale(auxpos2).xx;":""}

      vec2 combinedSize = inputSize * pixelRatio;
      vec4 quadOffset = vec4(0.0);

      ${h.occlusionTestEnabled||h.binaryHighlightOcclusionEnabled?"bool visible \x3d testVisibilityHUD(posProj);":""}

      ${h.binaryHighlightOcclusionEnabled?"voccluded \x3d visible ? 0.0 : 1.0;":""}
    `);var p=n.glsl`vec2 uv01 = floor(uv0);
vec2 uv = uv0 - uv01;
quadOffset.xy = ((uv01 - anchorPos) * 2.0 * combinedSize + screenOffsetScaled) / viewport.zw * posProj.w;`;const z=h.pixelSnappingEnabled?D?n.glsl`posProj = alignToPixelOrigin(posProj, viewport.zw) + quadOffset;`:n.glsl`posProj += quadOffset;
if (inputSize.x == size.x) {
posProj = alignToPixelOrigin(posProj, viewport.zw);
}`:n.glsl`posProj += quadOffset;`;w.vertex.code.add(n.glsl`
      ${h.occlusionTestEnabled?"if (visible) {":""}
      ${p}
      ${h.vvColor?"vcolor \x3d vvGetColor(auxpos2, vvColorValues, vvColorColors) * materialColor;":"vcolor \x3d color / 255.0 * materialColor;"}

      bool alphaDiscard = vcolor.a < ${n.glsl.float(x.symbolAlphaCutoff)};
      ${D?`alphaDiscard = alphaDiscard && outlineColor.a < ${n.glsl.float(x.symbolAlphaCutoff)};`:""}
      if (alphaDiscard) {
        // "early discard" if both symbol color (= fill) and outline color (if applicable) are transparent
        gl_Position = vec4(1e38, 1e38, 1e38, 1.0);
        return;
      } else {
        ${z}
        gl_Position = posProj;
      }

      vtc = uv * textureCoordinateScaleFactor;

      ${h.debugDrawBorder?"debugBorderCoords \x3d vec4(uv01, 1.5 / combinedSize);":""}
      vsize = inputSize;
      ${h.occlusionTestEnabled?n.glsl`} else { vtc = vec2(0.0);
        ${h.debugDrawBorder?"debugBorderCoords \x3d vec4(0.5, 0.5, 1.5 / combinedSize);}":"}"}`:""}
    }
    `);w.fragment.uniforms.add("tex","sampler2D");D&&(w.fragment.uniforms.add("outlineColor","vec4"),w.fragment.uniforms.add("outlineSize","float"));p=h.debugDrawBorder?n.glsl`(isBorder > 0.0 ? 0.0 : ${n.glsl.float(x.defaultMaskAlphaCutoff)})`:n.glsl.float(x.defaultMaskAlphaCutoff);D=n.glsl`
    ${h.debugDrawBorder?n.glsl`
      float isBorder = float(any(lessThan(debugBorderCoords.xy, debugBorderCoords.zw)) || any(greaterThan(debugBorderCoords.xy, 1.0 - debugBorderCoords.zw)));`:""}

    ${D?n.glsl`
      vec4 fillPixelColor = vcolor;

      // Attempt to sample texel centers to avoid that thin cross outlines
      // disappear with large symbol sizes.
      // see: https://devtopia.esri.com/WebGIS/arcgis-js-api/issues/7058#issuecomment-603041
      const float txSize = 128.0;
      const float texelSize = 1.0 / txSize;
      // Calculate how much we have to add/subtract to/from each texel to reach the size of an onscreen pixel
      vec2 scaleFactor = (vsize - txSize) * texelSize;
      vec2 samplePos = vtc + (vec2(1.0, -1.0) * texelSize) * scaleFactor;

      // Get distance and map it into [-0.5, 0.5]
      float d = rgba2float(texture2D(tex, samplePos)) - 0.5;

      // Distance in output units (i.e. pixels)
      float dist = d * vsize.x;

      // Create smooth transition from the icon into its outline
      float fillAlphaFactor = clamp(0.5 - dist, 0.0, 1.0);
      fillPixelColor.a *= fillAlphaFactor;

      if (outlineSize > 0.25) {
        vec4 outlinePixelColor = outlineColor;
        float clampedOutlineSize = min(outlineSize, 0.5*vsize.x);

        // Create smooth transition around outline
        float outlineAlphaFactor = clamp(0.5 - (abs(dist) - 0.5*clampedOutlineSize), 0.0, 1.0);
        outlinePixelColor.a *= outlineAlphaFactor;

        if (
          outlineAlphaFactor + fillAlphaFactor < ${p} ||
          fillPixelColor.a + outlinePixelColor.a < ${n.glsl.float(x.symbolAlphaCutoff)}
        ) {
          discard;
        }

        // perform un-premultiplied over operator (see https://en.wikipedia.org/wiki/Alpha_compositing#Description)
        float compositeAlpha = outlinePixelColor.a + fillPixelColor.a * (1.0 - outlinePixelColor.a);
        vec3 compositeColor = vec3(outlinePixelColor) * outlinePixelColor.a +
          vec3(fillPixelColor) * fillPixelColor.a * (1.0 - outlinePixelColor.a);

        gl_FragColor = vec4(compositeColor, compositeAlpha);
      } else {
        if (fillAlphaFactor < ${p}) {
          discard;
        }

        gl_FragColor = premultiplyAlpha(fillPixelColor);
      }

      // visualize SDF:
      // gl_FragColor = vec4(clamp(-dist/vsize.x*2.0, 0.0, 1.0), clamp(dist/vsize.x*2.0, 0.0, 1.0), 0.0, 1.0);
      `:n.glsl`
          vec4 texColor = texture2D(tex, vtc, -0.5);
          if (texColor.a < ${p}) {
            discard;
          }
          gl_FragColor = texColor * premultiplyAlpha(vcolor);
          `}

    ${h.debugDrawBorder?n.glsl`gl_FragColor = mix(gl_FragColor, vec4(1.0, 0.0, 1.0, 1.0), isBorder);`:""}
  `;7===h.output&&w.fragment.code.add(n.glsl`
      void main() {
        ${D}
        gl_FragColor = vec4(gl_FragColor.a);
      }
      `);0===h.output&&w.fragment.code.add(n.glsl`
    void main() {
      ${D}
      ${h.FrontFacePass?"gl_FragColor.rgb /\x3d gl_FragColor.a;":""}
    }
    `);4===h.output&&(w.include(r.OutputHighlight),w.fragment.code.add(n.glsl`
    void main() {
      ${D}
      ${h.binaryHighlightOcclusionEnabled?n.glsl`
          if (voccluded == 1.0) {
            gl_FragColor = vec4(1.0, 1.0, 0.0, 1.0);
          } else {
            gl_FragColor = vec4(1.0, 0.0, 1.0, 1.0);
          }`:"outputHighlight();"}
    }
    `));return w}function b(h,w,D){h.setUniform4fv("materialColor",w.color);w.textureIsSignedDistanceField&&(0>=w.outlineColor[3]||0>=w.outlineSize?(h.setUniform4fv("outlineColor",B.ZEROS),h.setUniform1f("outlineSize",0)):(h.setUniform4fv("outlineColor",w.outlineColor),h.setUniform1f("outlineSize",w.outlineSize)));h.setUniform2f("screenOffset",2*w.screenOffset[0]*D,2*w.screenOffset[1]*D);h.setUniform2fv("anchorPos",k(w))}function k(h,w=e){if(h.textureIsSignedDistanceField){var D=h.anchorPos;h=h.distanceFieldBoundingBox;
w[0]=D[0]*(h[2]-h[0])+h[0];w[1]=D[1]*(h[3]-h[1])+h[1]}else m.copy(w,h.anchorPos);return w}const e=v.create();v=Object.freeze({__proto__:null,build:a,bindHUDMaterialUniforms:b,calculateAnchorPosForRendering:k});d.HUDMaterialShader=v;d.bindHUDMaterialUniforms=b;d.build=a;d.calculateAnchorPosForRendering=k})},"esri/views/3d/webgl-engine/core/shaderLibrary/hud/AlignPixel.glsl":function(){define(["exports","../../shaderModules/interfaces"],function(d,m){d.AlignPixel=function(v){const B=m.glsl`vec4 alignToPixelCenter(vec4 clipCoord, vec2 widthHeight) {
vec2 xy = vec2(0.500123) + 0.5 * clipCoord.xy / clipCoord.w;
vec2 pixelSz = vec2(1.0) / widthHeight;
vec2 ij = (floor(xy * widthHeight) + vec2(0.5)) * pixelSz;
vec2 result = (ij * 2.0 - vec2(1.0)) * clipCoord.w;
return vec4(result, clipCoord.zw);
}`,C=m.glsl`vec4 alignToPixelOrigin(vec4 clipCoord, vec2 widthHeight) {
vec2 xy = vec2(0.5) + 0.5 * clipCoord.xy / clipCoord.w;
vec2 pixelSz = vec2(1.0) / widthHeight;
vec2 ij = floor((xy + 0.5 * pixelSz) * widthHeight) * pixelSz;
vec2 result = (ij * 2.0 - vec2(1.0)) * clipCoord.w;
return vec4(result, clipCoord.zw);
}`;v.vertex.code.add(B);v.vertex.code.add(C);v.fragment.code.add(B);v.fragment.code.add(C)};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/core/shaderLibrary/hud/HUD.glsl":function(){define(["exports","../util/ScreenSizePerspective.glsl","../../shaderModules/interfaces"],function(d,m,v){d.HUD=function(B,C){B.include(m.ScreenSizePerspective);B.attributes.add("position","vec3");B.attributes.add("normal","vec3");B.attributes.add("auxpos1","vec4");B.vertex.uniforms.add("proj",
"mat4");B.vertex.uniforms.add("view","mat4");B.vertex.uniforms.add("viewNormal","mat4");B.vertex.uniforms.add("viewport","vec4");B.vertex.uniforms.add("camPos","vec3");B.vertex.uniforms.add("polygonOffset","float");B.vertex.uniforms.add("cameraGroundRelative","float");B.vertex.uniforms.add("pixelRatio","float");B.vertex.uniforms.add("perDistancePixelRatio","float");B.vertex.uniforms.add("uRenderTransparentlyOccludedHUD","float");C.verticalOffsetEnabled&&B.vertex.uniforms.add("verticalOffset","vec4");
C.screenSizePerspectiveEnabled&&B.vertex.uniforms.add("screenSizePerspectiveAlignment","vec4");B.vertex.uniforms.add("hudVisibilityTexture","sampler2D");B.vertex.constants.add("smallOffsetAngle","float",.984807753012208);B.vertex.code.add(v.glsl`struct ProjectHUDAux {
vec3 posModel;
vec3 posView;
vec3 vnormal;
float distanceToCamera;
float absCosAngle;
};`);B.vertex.code.add(v.glsl`float applyHUDViewDependentPolygonOffset(float pointGroundDistance, float absCosAngle, inout vec3 posView) {
float pointGroundSign = sign(pointGroundDistance);
if (pointGroundSign == 0.0) {
pointGroundSign = cameraGroundRelative;
}
float groundRelative = cameraGroundRelative * pointGroundSign;
if (polygonOffset > .0) {
float cosAlpha = clamp(absCosAngle, 0.01, 1.0);
float tanAlpha = sqrt(1.0 - cosAlpha * cosAlpha) / cosAlpha;
float factor = (1.0 - tanAlpha / viewport[2]);
if (groundRelative > 0.0) {
posView *= factor;
}
else {
posView /= factor;
}
}
return groundRelative;
}`);C.isDraped||B.vertex.code.add(v.glsl`void applyHUDVerticalGroundOffset(vec3 normalModel, inout vec3 posModel, inout vec3 posView) {
float distanceToCamera = length(posView);
float pixelOffset = distanceToCamera * perDistancePixelRatio * 0.5;
vec3 modelOffset = normalModel * cameraGroundRelative * pixelOffset;
vec3 viewOffset = (viewNormal * vec4(modelOffset, 1.0)).xyz;
posModel += modelOffset;
posView += viewOffset;
}`);B.vertex.code.add(v.glsl`
    vec4 projectPositionHUD(out ProjectHUDAux aux) {
      // centerOffset is in view space and is used to implement world size offsetting
      // of labels with respect to objects. It also pulls the label towards the viewer
      // so that the label is visible in front of the object.
      vec3 centerOffset = auxpos1.xyz;

      // The pointGroundDistance is the distance of the geometry to the ground and is
      // negative if the point is below the ground, or positive if the point is above
      // ground.
      float pointGroundDistance = auxpos1.w;

      aux.posModel = position;
      aux.posView = (view * vec4(aux.posModel, 1.0)).xyz;
      aux.vnormal = normal;
      ${C.isDraped?"":"applyHUDVerticalGroundOffset(aux.vnormal, aux.posModel, aux.posView);"}

      // Screen sized offset in world space, used for example for line callouts
      // Note: keep this implementation in sync with the CPU implementation, see
      //   - MaterialUtil.verticalOffsetAtDistance
      //   - HUDMaterial.applyVerticalOffsetTransformation

      aux.distanceToCamera = length(aux.posView);

      vec3 viewDirObjSpace = normalize(camPos - aux.posModel);
      float cosAngle = dot(aux.vnormal, viewDirObjSpace);

      aux.absCosAngle = abs(cosAngle);

      ${C.screenSizePerspectiveEnabled?C.verticalOffsetEnabled||1===C.screenCenterOffsetUnitsEnabled?"vec4 perspectiveFactor \x3d screenSizePerspectiveScaleFactor(aux.absCosAngle, aux.distanceToCamera, screenSizePerspectiveAlignment);":"":""}

      ${C.verticalOffsetEnabled?C.screenSizePerspectiveEnabled?"float verticalOffsetScreenHeight \x3d applyScreenSizePerspectiveScaleFactorFloat(verticalOffset.x, perspectiveFactor);":"float verticalOffsetScreenHeight \x3d verticalOffset.x;":""}

      ${C.verticalOffsetEnabled?v.glsl`
            float worldOffset = clamp(verticalOffsetScreenHeight * verticalOffset.y * aux.distanceToCamera, verticalOffset.z, verticalOffset.w);
            vec3 modelOffset = aux.vnormal * worldOffset;
            aux.posModel += modelOffset;
            vec3 viewOffset = (viewNormal * vec4(modelOffset, 1.0)).xyz;
            aux.posView += viewOffset;
            // Since we elevate the object, we need to take that into account
            // in the distance to ground
            pointGroundDistance += worldOffset;`:""}

      float groundRelative = applyHUDViewDependentPolygonOffset(pointGroundDistance, aux.absCosAngle, aux.posView);

      ${1!==C.screenCenterOffsetUnitsEnabled?v.glsl`
            // Apply x/y in view space, but z in screen space (i.e. along posView direction)
            aux.posView += vec3(centerOffset.x, centerOffset.y, 0.0);

            // Same material all have same z != 0.0 condition so should not lead to
            // branch fragmentation and will save a normalization if it's not needed
            if (centerOffset.z != 0.0) {
              aux.posView -= normalize(aux.posView) * centerOffset.z;
            }
          `:""}

      vec4 posProj = proj * vec4(aux.posView, 1.0);

      ${1===C.screenCenterOffsetUnitsEnabled?C.screenSizePerspectiveEnabled?"float centerOffsetY \x3d applyScreenSizePerspectiveScaleFactorFloat(centerOffset.y, perspectiveFactor);":"float centerOffsetY \x3d centerOffset.y;":""}

      ${1===C.screenCenterOffsetUnitsEnabled?"posProj.xy +\x3d vec2(centerOffset.x, centerOffsetY) * pixelRatio * 2.0 / viewport.zw * posProj.w;":""}

      // constant part of polygon offset emulation
      posProj.z -= groundRelative * polygonOffset * posProj.w;
      return posProj;
    }
  `);B.vertex.code.add(v.glsl`bool testVisibilityHUD(vec4 posProj) {
vec4 posProjCenter = alignToPixelCenter(posProj, viewport.zw);
vec4 occlusionPixel = texture2D(hudVisibilityTexture, .5 + .5 * posProjCenter.xy / posProjCenter.w);
if (uRenderTransparentlyOccludedHUD > 0.5) {
return occlusionPixel.r * occlusionPixel.g > 0.0 && occlusionPixel.g * uRenderTransparentlyOccludedHUD < 1.0;
}
return occlusionPixel.r * occlusionPixel.g > 0.0 && occlusionPixel.g == 1.0;
}`)};d.bindHUDUniforms=function(B,C){B.setUniform1f("uRenderTransparentlyOccludedHUD",0===C.renderTransparentlyOccludedHUD?1:1===C.renderTransparentlyOccludedHUD?0:.75)};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/core/shaderLibrary/util/ScreenSizePerspective.glsl":function(){define(["exports","../../shaderModules/interfaces","../../../materials/internal/MaterialUtil"],function(d,m,v){d.ScreenSizePerspective=function(B){B.vertex.code.add(m.glsl`float screenSizePerspectiveMinSize(float size, vec4 factor) {
float nonZeroSize = 1.0 - step(size, 0.0);
return (
factor.z * (
1.0 +
nonZeroSize *
2.0 * factor.w / (
size + (1.0 - nonZeroSize)
)
)
);
}`);B.vertex.code.add(m.glsl`float screenSizePerspectiveViewAngleDependentFactor(float absCosAngle) {
return absCosAngle * absCosAngle * absCosAngle;
}`);B.vertex.code.add(m.glsl`vec4 screenSizePerspectiveScaleFactor(float absCosAngle, float distanceToCamera, vec4 params) {
return vec4(
min(params.x / (distanceToCamera - params.y), 1.0),
screenSizePerspectiveViewAngleDependentFactor(absCosAngle),
params.z,
params.w
);
}`);B.vertex.code.add(m.glsl`float applyScreenSizePerspectiveScaleFactorFloat(float size, vec4 factor) {
return max(mix(size * factor.x, size, factor.y), screenSizePerspectiveMinSize(size, factor));
}`);B.vertex.code.add(m.glsl`float screenSizePerspectiveScaleFloat(float size, float absCosAngle, float distanceToCamera, vec4 params) {
return applyScreenSizePerspectiveScaleFactorFloat(
size,
screenSizePerspectiveScaleFactor(absCosAngle, distanceToCamera, params)
);
}`);B.vertex.code.add(m.glsl`vec2 applyScreenSizePerspectiveScaleFactorVec2(vec2 size, vec4 factor) {
return mix(size * clamp(factor.x, screenSizePerspectiveMinSize(size.y, factor) / size.y, 1.0), size, factor.y);
}`);B.vertex.code.add(m.glsl`vec2 screenSizePerspectiveScaleVec2(vec2 size, float absCosAngle, float distanceToCamera, vec4 params) {
return applyScreenSizePerspectiveScaleFactorVec2(size, screenSizePerspectiveScaleFactor(absCosAngle, distanceToCamera, params));
}`)};d.bindScreenSizePerspectiveUniforms=function(B,C){C.screenSizePerspective&&(v.bindScreenSizePerspective(C.screenSizePerspective,B,"screenSizePerspective"),v.bindScreenSizePerspective(C.screenSizePerspectiveAlignment||C.screenSizePerspective,B,"screenSizePerspectiveAlignment"))};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/core/shaderLibrary/hud/HUDOcclusionPass.glsl":function(){define(["exports","../output/ReadLinearDepth.glsl","../shading/MultipassGeometryTest.glsl",
"../util/RgbaFloatEncoding.glsl","../../shaderModules/interfaces"],function(d,m,v,B,C){d.HUDOcclusionPass=function(A,q){q.multipassGeometryEnabled&&A.vertex.include(v.multipassGeometryTest);q.multipassTerrainEnabled&&A.varyings.add("depth","float");A.vertex.code.add(C.glsl`
  void main(void) {
    vec4 posProjCenter;
    if (dot(position, position) > 0.0) {
      // Render single point to center of the pixel to avoid subpixel
      // filtering to affect the marker color
      ProjectHUDAux projectAux;
      vec4 posProj = projectPositionHUD(projectAux);
      posProjCenter = alignToPixelCenter(posProj, viewport.zw);

      ${q.multipassGeometryEnabled?C.glsl`
        // Don't draw vertices behind geometry
        if(geometryDepthTest(.5 + .5 * posProjCenter.xy / posProjCenter.w, projectAux.posView.z)){
          posProjCenter = vec4(1e038, 1e038, 1e038, 1.0);
        }`:""}

      ${q.multipassTerrainEnabled?"depth \x3d projectAux.posView.z;":""}
      vec3 vpos = projectAux.posModel;
      if (rejectBySlice(vpos)) {
        // Project out of clip space
        posProjCenter = vec4(1e038, 1e038, 1e038, 1.0);
      }

    } else {
      // Project out of clip space
      posProjCenter = vec4(1e038, 1e038, 1e038, 1.0);
    }

    gl_Position = posProjCenter;
    gl_PointSize = 1.0;
  }
  `);q.multipassTerrainEnabled&&A.fragment.include(m.ReadLinearDepth);A.fragment.uniforms.add("terrainDepthTexture","sampler2D");A.fragment.uniforms.add("cameraNearFar","vec2");A.fragment.uniforms.add("inverseViewport","vec2");A.fragment.include(B.RgbaFloatEncoding);A.fragment.code.add(C.glsl`
  void main() {
    gl_FragColor = vec4(1, 1, 1, 1);
    ${q.multipassTerrainEnabled?C.glsl`

          vec2 uv = gl_FragCoord.xy * inverseViewport;

          //Read the rgba data from the texture linear depth
          vec4 terrainDepthData = texture2D(terrainDepthTexture, uv);

          float terrainDepth = linearDepthFromFloat(rgba2float(terrainDepthData), cameraNearFar);

          //If HUD vertex is behind terrain and the terrain depth is not the initialize value (e.g. we are not looking at the sky)
          //Mark the HUD vertex as occluded by transparent terrain
          if(depth < terrainDepth && terrainDepthData != vec4(0,0,0,1)){
            gl_FragColor.g = 0.5;
          }`:""}
  }
  `)};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/core/shaderLibrary/shading/MultipassGeometryTest.glsl":function(){define(["exports","../output/ReadLinearDepth.glsl","../../shaderModules/interfaces"],function(d,m,v){d.bindMultipassGeometryTexture=function(B,C){C.multipassGeometryEnabled&&C.geometryLinearDepthTexture&&B.bindTexture(C.geometryLinearDepthTexture,"geometryDepthTexture")};d.multipassGeometryTest=function(B){B.include(m.ReadLinearDepth);B.uniforms.add("geometryDepthTexture",
"sampler2D");B.uniforms.add("cameraNearFar","vec2");B.code.add(v.glsl`bool geometryDepthTest(vec2 pos, float elementDepth) {
float geometryDepth = linearDepthFromTexture(geometryDepthTexture, pos, cameraNearFar);
return (elementDepth < (geometryDepth - 1.0));
}`)};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/shaders/HUDMaterialTechnique":function(){define("require exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../core/shaderLibrary/Slice.glsl ../core/shaderLibrary/attributes/VerticalOffset.glsl ../core/shaderLibrary/hud/HUD.glsl ../core/shaderLibrary/output/OutputHighlight.glsl ../core/shaderLibrary/shading/MultipassGeometryTest.glsl ../core/shaderLibrary/shading/MultipassTerrainTest.glsl ../core/shaderLibrary/shading/VisualVariables.glsl ../core/shaderLibrary/util/ScreenSizePerspective.glsl ../core/shaderLibrary/util/View.glsl ../core/shaderTechnique/ReloadableShaderModule ../core/shaderTechnique/ShaderTechnique ../core/shaderTechnique/ShaderTechniqueConfiguration ../lib/DefaultVertexAttributeLocations ../lib/OrderIndependentTransparency ../lib/Program ../../../../chunks/HUDMaterial.glsl ../../../webgl/renderState".split(" "),
function(d,m,v,B,C,A,q,g,r,u,x,y,t,l,n,c,a,b,k,e,h){n=function(p){function z(){return p.apply(this,arguments)||this}v._inheritsLoose(z,p);var f=z.prototype;f.initializeProgram=function(E){var F=z.shader.get();const L=this.configuration;F=F.build({output:L.output,FrontFacePass:2===L.transparencyPassType,viewingMode:E.viewingMode,occlusionTestEnabled:L.occlusionTestEnabled,signedDistanceFieldEnabled:L.sdf,slicePlaneEnabled:L.slicePlaneEnabled,sliceHighlightDisabled:!1,sliceEnabledForVertexPrograms:!0,
debugDrawBorder:L.debugDrawBorder,binaryHighlightOcclusionEnabled:L.binaryHighlightOcclusion,screenCenterOffsetUnitsEnabled:L.screenCenterOffsetUnitsEnabled,screenSizePerspectiveEnabled:L.screenSizePerspective,verticalOffsetEnabled:L.verticalOffset,pixelSnappingEnabled:L.pixelSnappingEnabled,vvSize:L.vvSize,vvColor:L.vvColor,vvInstancingEnabled:!1,isDraped:L.isDraped,multipassGeometryEnabled:L.multipassGeometryEnabled,multipassTerrainEnabled:L.multipassTerrainEnabled,cullAboveGround:L.cullAboveGround});
return new k.Program(E.rctx,F,a.Default3D)};f.bindPass=function(E,F){t.bindProjectionMatrix(this.program,F.camera.projectionMatrix);this.program.setUniform1f("cameraGroundRelative",F.camera.aboveGround?1:-1);this.program.setUniform1f("perDistancePixelRatio",Math.tan(F.camera.fovY/2)/(F.camera.fullViewport[2]/2));this.program.setUniformMatrix4fv("viewNormal",F.camera.viewInverseTransposeMatrix);this.program.setUniform1f("polygonOffset",E.shaderPolygonOffset);A.bindVerticalOffsetUniforms(this.program,
E,F);y.bindScreenSizePerspectiveUniforms(this.program,E);this.program.setUniform1f("pixelRatio",F.camera.pixelRatio||1);t.bindViewport(this.program,F);6===this.configuration.output?(this.program.setUniform2fv("cameraNearFar",F.camera.nearFar),this.program.setUniform2fv("inverseViewport",F.inverseViewport),r.bindMultipassGeometryTexture(this.program,F),u.bindMultipassTerrainTexture(this.program,F)):(q.bindHUDUniforms(this.program,F),e.bindHUDMaterialUniforms(this.program,E,F.camera.pixelRatio||1),
x.bindVisualVariablesUniforms(this.program,E),this.configuration.occlusionTestEnabled&&this.program.bindTexture(F.hudVisibilityTexture,"hudVisibilityTexture"));4===this.configuration.output&&g.bindOutputHighlight(this.program,F)};f.bindDraw=function(E){t.bindView(this.program,E);t.bindCameraPosition(this.program,E.origin,E.camera.viewInverseTransposeMatrix);C.bindSliceUniformsWithOrigin(this.program,this.configuration,E);this.program.rebindTextures()};f.setPipelineState=function(E){const F=this.configuration,
L=3===E,W=this.configuration.polygonOffsetEnabled&&w,M=!L&&2!==E||4===F.output?null:(F.depthEnabled||6===F.output)&&h.defaultDepthWriteParams;return h.makePipelineState({blending:0===F.output||7===F.output||4===F.output?L?D:b.OITBlending(E):null,depthTest:{func:515},depthWrite:M,colorWrite:h.defaultColorWriteParams,polygonOffset:W})};f.initializePipeline=function(){return this.setPipelineState(this.configuration.transparencyPassType)};v._createClass(z,[{key:"primitiveType",get:function(){return 6===
this.configuration.output?0:4}}]);return z}(n.ShaderTechnique);n.shader=new l.ReloadableShaderModule(e.HUDMaterialShader,()=>new Promise(function(p,z){d(["./HUDMaterial.glsl"],p,z)}));const w={factor:0,units:-4},D=h.simpleBlendingParams(1,771);l=function(p){function z(){var f=p.apply(this,arguments)||this;f.output=0;f.occlusionTestEnabled=!0;f.sdf=!1;f.vvSize=!1;f.vvColor=!1;f.verticalOffset=!1;f.screenSizePerspective=!1;f.screenCenterOffsetUnitsEnabled=0;f.debugDrawBorder=!0;f.binaryHighlightOcclusion=
!0;f.slicePlaneEnabled=!1;f.polygonOffsetEnabled=!1;f.depthEnabled=!0;f.transparencyPassType=3;f.pixelSnappingEnabled=!0;f.isDraped=!1;f.multipassGeometryEnabled=!1;f.multipassTerrainEnabled=!1;f.cullAboveGround=!1;return f}v._inheritsLoose(z,p);return z}(c.ShaderTechniqueConfiguration);B.__decorate([c.parameter({count:8})],l.prototype,"output",void 0);B.__decorate([c.parameter()],l.prototype,"occlusionTestEnabled",void 0);B.__decorate([c.parameter()],l.prototype,"sdf",void 0);B.__decorate([c.parameter()],
l.prototype,"vvSize",void 0);B.__decorate([c.parameter()],l.prototype,"vvColor",void 0);B.__decorate([c.parameter()],l.prototype,"verticalOffset",void 0);B.__decorate([c.parameter()],l.prototype,"screenSizePerspective",void 0);B.__decorate([c.parameter({count:2})],l.prototype,"screenCenterOffsetUnitsEnabled",void 0);B.__decorate([c.parameter()],l.prototype,"debugDrawBorder",void 0);B.__decorate([c.parameter()],l.prototype,"binaryHighlightOcclusion",void 0);B.__decorate([c.parameter()],l.prototype,
"slicePlaneEnabled",void 0);B.__decorate([c.parameter()],l.prototype,"polygonOffsetEnabled",void 0);B.__decorate([c.parameter()],l.prototype,"depthEnabled",void 0);B.__decorate([c.parameter({count:4})],l.prototype,"transparencyPassType",void 0);B.__decorate([c.parameter()],l.prototype,"pixelSnappingEnabled",void 0);B.__decorate([c.parameter()],l.prototype,"isDraped",void 0);B.__decorate([c.parameter()],l.prototype,"multipassGeometryEnabled",void 0);B.__decorate([c.parameter()],l.prototype,"multipassTerrainEnabled",
void 0);B.__decorate([c.parameter()],l.prototype,"cullAboveGround",void 0);m.HUDMaterialTechnique=n;m.HUDMaterialTechniqueConfiguration=l;Object.defineProperty(m,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/core/shaderLibrary/attributes/VerticalOffset.glsl":function(){define(["exports","../util/ScreenSizePerspective.glsl","../../shaderModules/interfaces"],function(d,m,v){function B(A,q,g,r=C){r.screenLength=A.screenLength;r.perDistance=Math.tan(.5*q)/(.5*g);r.minWorldLength=A.minWorldLength;
r.maxWorldLength=A.maxWorldLength;return r}const C={screenLength:0,perDistance:0,minWorldLength:0,maxWorldLength:0};d.VerticalOffset=function(A,q){const g=A.vertex.code;q.verticalOffsetEnabled?(A.vertex.uniforms.add("verticalOffset","vec4"),q.screenSizePerspectiveEnabled&&(A.include(m.ScreenSizePerspective),A.vertex.uniforms.add("screenSizePerspectiveAlignment","vec4")),g.add(v.glsl`
    vec3 calculateVerticalOffset(vec3 worldPos, vec3 localOrigin) {
      float viewDistance = length((view * vec4(worldPos, 1.0)).xyz);
      ${1===q.viewingMode?v.glsl`vec3 worldNormal = normalize(worldPos + localOrigin);`:v.glsl`vec3 worldNormal = vec3(0.0, 0.0, 1.0);`}
      ${q.screenSizePerspectiveEnabled?v.glsl`
          float cosAngle = dot(worldNormal, normalize(worldPos - camPos));
          float verticalOffsetScreenHeight = screenSizePerspectiveScaleFloat(verticalOffset.x, abs(cosAngle), viewDistance, screenSizePerspectiveAlignment);`:v.glsl`
          float verticalOffsetScreenHeight = verticalOffset.x;`}
      // Screen sized offset in world space, used for example for line callouts
      float worldOffset = clamp(verticalOffsetScreenHeight * verticalOffset.y * viewDistance, verticalOffset.z, verticalOffset.w);
      return worldNormal * worldOffset;
    }

    vec3 addVerticalOffset(vec3 worldPos, vec3 localOrigin) {
      return worldPos + calculateVerticalOffset(worldPos, localOrigin);
    }
    `)):g.add(v.glsl`vec3 addVerticalOffset(vec3 worldPos, vec3 localOrigin) { return worldPos; }`)};d.bindVerticalOffsetUniforms=function(A,q,g){q.verticalOffset&&(q=B(q.verticalOffset,g.camera.fovY,g.camera.fullViewport[3]),A.setUniform4f("verticalOffset",q.screenLength*(g.camera.pixelRatio||1),q.perDistance,q.minWorldLength,q.maxWorldLength))};d.calculateVerticalOffsetFactors=B;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/3d/interactive/visualElements/RightAngleQuadVisualElement":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/Handles ../../../../core/maybe ../../../../chunks/mat4 ../../../../chunks/mat4f64 ../../../../chunks/vec3 ../../../../chunks/vec3f64 ../../../../chunks/vec4 ../../../../chunks/vec4f32 ../../../../geometry/support/vectorStacks ./Object3DVisualElement ../../webgl-engine/lib/Geometry ../../webgl-engine/lib/GeometryUtil ../../webgl-engine/materials/ColorMaterial ../../webgl-engine/materials/RibbonLineMaterial".split(" "),
function(d,m,v,B,C,A,q,g,r,u,x,y,t,l,n,c){y=function(b){function k(h){var w=b.call(this,h)||this;w._handles=new v;w._quadMaterial=null;w._outlineMaterial=null;w._maxSize=0;w._position=g.create();w._up=g.create();w._right=g.create();w._renderOccluded=4;w._color=u.fromValues(1,0,0,1);w._outlineColor=u.fromValues(0,0,0,1);w._outlineSize=0;w._size=32;w._outlineRenderOccluded=16;w.applyProps(h);return w}m._inheritsLoose(k,b);var e=k.prototype;e.createExternalResources=function(){this._quadMaterial=new n.ColorMaterial(this.quadMaterialParameters);
this._outlineMaterial=new c.RibbonLineMaterial(this.outlineMaterialParameters);this._handles.add(this.view.state.watch("camera",()=>this._updateTransform()))};e.destroyExternalResources=function(){this._outlineMaterial=this._quadMaterial=null;this._handles.removeAll()};e.forEachExternalMaterial=function(h){h(this._quadMaterial);h(this._outlineMaterial)};e.createGeometries=function(h){this._createQuadGeometry(h);this._createOutlineGeometry(h);this._updateTransform(h)};e._createQuadGeometry=function(h){const w=
this._quadGeometryData(this._up,this._right);h.addGeometry(w,this._quadMaterial)};e._createOutlineGeometry=function(h){if(0!==this._outlineSize){var w=q.add(x.sv3d.get(),this._up,this._right);w=l.createPolylineGeometry([this._up,w,this._right]);h.addGeometry(w,this._outlineMaterial)}};e._updateTransform=function(h=this.object){var w=this._size*this.view.state.camera.computeScreenPixelSizeAt(this._position);w=Math.min(this._maxSize,w);C.identity(a);C.translate(a,a,this._position);C.scale(a,a,[w,w,
w]);B.isSome(h)&&(h.transformation=a)};e._quadGeometryData=function(h,w){const D=q.add(x.sv3d.get(),h,w);return new t.Geometry([["position",{size:3,data:[0,0,0,...w,...h,...D],exclusive:!0}]],[["position",new Uint16Array([0,1,2,1,2,3])]])};e._updateQuadMaterial=function(){this._quadMaterial&&this._quadMaterial.setParameterValues(this.quadMaterialParameters)};e._updateOutlineMaterial=function(){this._outlineMaterial&&this._outlineMaterial.setParameterValues(this.outlineMaterialParameters)};m._createClass(k,
[{key:"renderOccluded",get:function(){return this._renderOccluded},set:function(h){h!==this._renderOccluded&&(this._renderOccluded=h,this._updateQuadMaterial())}},{key:"color",get:function(){return this._color},set:function(h){r.copy(this._color,h);this._updateQuadMaterial()}},{key:"outlineColor",get:function(){return this._outlineColor},set:function(h){r.copy(this._outlineColor,h);this._updateOutlineMaterial()}},{key:"outlineSize",get:function(){return this._outlineSize},set:function(h){const w=
0===this._outlineSize!==(0===h);this._outlineSize=h;w?this.recreateGeometry():this._updateOutlineMaterial()}},{key:"size",get:function(){return this._size},set:function(h){h!==this._size&&(this._size=h,this._updateTransform())}},{key:"outlineRenderOccluded",get:function(){return this._outlineRenderOccluded},set:function(h){this._outlineRenderOccluded=h;this._updateOutlineMaterial()}},{key:"geometry",set:function({previous:h,center:w,next:D}){this._maxSize=Math.min(q.distance(w,h),q.distance(w,D))/
3;q.normalize(this._up,q.subtract(this._up,h,w));q.normalize(this._right,q.subtract(this._right,D,w));q.copy(this._position,w);this.recreateGeometry()}},{key:"quadMaterialParameters",get:function(){return{color:this._color,transparent:!0,writeDepth:!1,polygonOffset:!0,renderOccluded:this._renderOccluded}}},{key:"outlineMaterialParameters",get:function(){return{color:this._outlineColor,width:this._outlineSize,renderOccluded:this._outlineRenderOccluded}}}]);return k}(y.Object3DVisualElement);const a=
A.create();d.RightAngleQuadVisualElement=y;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/materials/ColorMaterial":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../lib/GLMaterial ../lib/Material ../lib/OrderIndependentTransparency ./internal/DefaultBufferWriter ./internal/MaterialUtil ../shaders/ColorMaterialTechnique".split(" "),function(d,m,v,B,C,A,q,g){let r=function(y){function t(n){n=y.call(this,n,x)||this;n.supportsEdges=!0;n.techniqueConfig=
new g.ColorMaterialTechniqueConfiguration;return n}m._inheritsLoose(t,y);var l=t.prototype;l.getTechniqueConfig=function(n,c){this.techniqueConfig.output=n;this.techniqueConfig.cullFace=this.params.cullFace;this.techniqueConfig.vertexColors=this.params.vertexColors;this.techniqueConfig.slicePlaneEnabled=this.params.slicePlaneEnabled;this.techniqueConfig.transparent=this.params.transparent;this.techniqueConfig.polygonOffset=this.params.polygonOffset;this.techniqueConfig.writeDepth=this.params.writeDepth;
this.techniqueConfig.sceneHasOcludees=this.params.sceneHasOcludees;this.techniqueConfig.transparencyPassType=c?c.transparencyPassType:3;this.techniqueConfig.enableOffset=c?c.camera.relativeElevation<C.OITPolygonOffsetLimit:!0;this.techniqueConfig.multipassTerrainEnabled=c?c.multipassTerrainEnabled:!1;this.techniqueConfig.cullAboveGround=c?c.cullAboveGround:!1;return this.techniqueConfig};l.getPassParameters=function(){return this.params};l.intersect=function(n,c,a,b,k,e,h){q.intersectTriangleGeometry(n,
c,b,k,e,void 0,h)};l.getGLMaterial=function(n){return 0===n.output||7===n.output||4===n.output||1===n.output&&this.params.writeLinearDepth?new u(n):void 0};l.createBufferWriter=function(){return new A.DefaultBufferWriter(A.PositionColorLayout)};return t}(B.Material),u=function(y){function t(n){n=y.call(this,n)||this;n.updateParameters();return n}m._inheritsLoose(t,y);var l=t.prototype;l.updateParameters=function(n){this._technique=this._techniqueRep.releaseAndAcquire(g.ColorMaterialTechnique,this._material.getTechniqueConfig(this._output,
n),this._technique)};l.beginSlot=function(n){return 4===this._output?3===n:n===(this._technique.configuration.transparent?this._technique.configuration.writeDepth?5:8:3)};l._updateOccludeeState=function(n){n.hasOccludees!==this._material.params.sceneHasOcludees&&this._material.setParameterValues({sceneHasOcludees:n.hasOccludees})};l.ensureParameters=function(n){0!==this._output&&7!==this._output||this._updateOccludeeState(n);this.updateParameters(n)};l.bind=function(n){this._technique.bindPass(this._material.getPassParameters(),
n)};l.getPipelineState=function(n,c){return this._technique.getPipelineState(c)};return t}(v);const x={color:[1,1,1,1],transparent:!1,writeDepth:!0,writeLinearDepth:!1,vertexColors:!1,polygonOffset:!1,slicePlaneEnabled:!1,cullFace:0,sceneHasOcludees:!1,...B.materialParametersDefaults};d.ColorMaterial=r;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/materials/internal/DefaultBufferWriter":function(){define(["exports","../../../support/buffer/InterleavedLayout","./bufferWriterUtils"],
function(d,m,v){const B=m.newLayout().vec3f("position"),C=m.newLayout().vec3f("position").vec2f("uv0");m=m.newLayout().vec3f("position").vec4u8("color");let A=function(){function q(r){this.vertexBufferLayout=r}var g=q.prototype;g.allocate=function(r){return this.vertexBufferLayout.createBuffer(r)};g.elementCount=function(r){return r.indices.get("position").length};g.write=function(r,u,x,y){v.writeDefaultAttributes(u,this.vertexBufferLayout,r.transformation,r.invTranspTransformation,x,y)};return q}();
d.DefaultBufferWriter=A;d.PositionColorLayout=m;d.PositionLayout=B;d.PositionUVLayout=C;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/shaders/ColorMaterialTechnique":function(){define("require exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../core/shaderLibrary/Slice.glsl ../core/shaderLibrary/output/OutputHighlight.glsl ../core/shaderLibrary/shading/MultipassTerrainTest.glsl ../core/shaderLibrary/util/View.glsl ../core/shaderTechnique/ReloadableShaderModule ../core/shaderTechnique/ShaderTechnique ../core/shaderTechnique/ShaderTechniqueConfiguration ../lib/DefaultVertexAttributeLocations ../lib/OrderIndependentTransparency ../lib/Program ../lib/StencilUtils ../../../../chunks/ColorMaterial.glsl ../../../webgl/renderState".split(" "),
function(d,m,v,B,C,A,q,g,r,u,x,y,t,l,n,c,a){u=function(k){function e(){return k.apply(this,arguments)||this}v._inheritsLoose(e,k);var h=e.prototype;h.initializeProgram=function(w){var D=e.shader.get();const p=this.configuration;D=D.build({output:p.output,OITEnabled:0===p.transparencyPassType,attributeColor:p.vertexColors,slicePlaneEnabled:p.slicePlaneEnabled,sliceHighlightDisabled:!1,sliceEnabledForVertexPrograms:!1,multipassTerrainEnabled:p.multipassTerrainEnabled,cullAboveGround:p.cullAboveGround});
return new l.Program(w.rctx,D,y.Default3D)};h.bindPass=function(w,D){g.bindProjectionMatrix(this.program,D.camera.projectionMatrix);this.program.setUniform4fv("eColor",w.color);4===this.configuration.output&&A.bindOutputHighlight(this.program,D);(1===this.configuration.output||D.multipassTerrainEnabled)&&this.program.setUniform2fv("cameraNearFar",D.camera.nearFar);D.multipassTerrainEnabled&&(this.program.setUniform2fv("inverseViewport",D.inverseViewport),q.bindMultipassTerrainTexture(this.program,
D))};h.bindDraw=function(w){g.bindView(this.program,w);this.program.rebindTextures();C.bindSliceUniformsWithOrigin(this.program,this.configuration,w)};h.setPipelineState=function(w,D){const p=this.configuration,z=3===w,f=2===w;return a.makePipelineState({blending:0!==p.output&&7!==p.output||!p.transparent?null:z?t.blendingDefault:t.OITBlending(w),culling:a.cullingParams(p.cullFace),depthTest:{func:t.OITDepthTest(w)},depthWrite:z||f?p.writeDepth&&a.defaultDepthWriteParams:null,colorWrite:a.defaultColorWriteParams,
stencilWrite:p.sceneHasOcludees?n.stencilWriteMaskOn:null,stencilTest:p.sceneHasOcludees?D?n.stencilToolMaskBaseParams:n.stencilBaseAllZerosParams:null,polygonOffset:z||f?p.polygonOffset&&b:t.getOITPolygonOffset(p.enableOffset)})};h.initializePipeline=function(){this._occludeePipelineState=this.setPipelineState(this.configuration.transparencyPassType,!0);return this.setPipelineState(this.configuration.transparencyPassType,!1)};h.getPipelineState=function(w){return w?this._occludeePipelineState:this.pipeline};
return e}(u.ShaderTechnique);u.shader=new r.ReloadableShaderModule(c.ColorMaterialShader,()=>new Promise(function(k,e){d(["./ColorMaterial.glsl"],k,e)}));const b={factor:1,units:1};r=function(k){function e(){var h=k.apply(this,arguments)||this;h.output=0;h.cullFace=0;h.slicePlaneEnabled=!1;h.vertexColors=!1;h.transparent=!1;h.polygonOffset=!1;h.enableOffset=!0;h.writeDepth=!0;h.sceneHasOcludees=!1;h.transparencyPassType=3;h.multipassTerrainEnabled=!1;h.cullAboveGround=!1;return h}v._inheritsLoose(e,
k);return e}(x.ShaderTechniqueConfiguration);B.__decorate([x.parameter({count:8})],r.prototype,"output",void 0);B.__decorate([x.parameter({count:3})],r.prototype,"cullFace",void 0);B.__decorate([x.parameter()],r.prototype,"slicePlaneEnabled",void 0);B.__decorate([x.parameter()],r.prototype,"vertexColors",void 0);B.__decorate([x.parameter()],r.prototype,"transparent",void 0);B.__decorate([x.parameter()],r.prototype,"polygonOffset",void 0);B.__decorate([x.parameter()],r.prototype,"enableOffset",void 0);
B.__decorate([x.parameter()],r.prototype,"writeDepth",void 0);B.__decorate([x.parameter()],r.prototype,"sceneHasOcludees",void 0);B.__decorate([x.parameter({count:4})],r.prototype,"transparencyPassType",void 0);B.__decorate([x.parameter()],r.prototype,"multipassTerrainEnabled",void 0);B.__decorate([x.parameter()],r.prototype,"cullAboveGround",void 0);m.ColorMaterialTechnique=u;m.ColorMaterialTechniqueConfiguration=r;Object.defineProperty(m,"__esModule",{value:!0})})},"esri/chunks/ColorMaterial.glsl":function(){define("exports ../views/3d/webgl-engine/core/shaderLibrary/Slice.glsl ../views/3d/webgl-engine/core/shaderLibrary/Transform.glsl ../views/3d/webgl-engine/core/shaderLibrary/attributes/VertexColor.glsl ../views/3d/webgl-engine/core/shaderLibrary/output/OutputDepth.glsl ../views/3d/webgl-engine/core/shaderLibrary/output/OutputHighlight.glsl ../views/3d/webgl-engine/core/shaderLibrary/output/ReadLinearDepth.glsl ../views/3d/webgl-engine/core/shaderLibrary/shading/MultipassTerrainTest.glsl ../views/3d/webgl-engine/core/shaderLibrary/util/AlphaDiscard.glsl ../views/3d/webgl-engine/core/shaderLibrary/util/ColorConversion.glsl ../views/3d/webgl-engine/core/shaderModules/interfaces ../views/3d/webgl-engine/core/shaderModules/ShaderBuilder".split(" "),
function(d,m,v,B,C,A,q,g,r,u,x,y){function t(n){const c=new y.ShaderBuilder,a=1===n.output;c.include(v.Transform,{linearDepth:a});c.include(B.VertexColor,n);c.vertex.uniforms.add("proj","mat4").add("view","mat4");c.attributes.add("position","vec3");c.varyings.add("vpos","vec3");n.multipassTerrainEnabled&&c.varyings.add("depth","float");a&&(c.include(C.OutputDepth,n),c.vertex.uniforms.add("cameraNearFar","vec2"),c.varyings.add("linearDepth","float"));c.vertex.code.add(x.glsl`
    void main(void) {
      vpos = position;
      forwardNormalizedVertexColor();
      ${n.multipassTerrainEnabled?"depth \x3d (view * vec4(vpos, 1.0)).z;":""}
      gl_Position = ${a?x.glsl`transformPositionWithDepth(proj, view, vpos, cameraNearFar, linearDepth);`:x.glsl`transformPosition(proj, view, vpos);`}
    }
  `);c.include(m.Slice,n);c.fragment.include(u.ColorConversion);n.multipassTerrainEnabled&&(c.fragment.include(q.ReadLinearDepth),c.include(g.multipassTerrainTest,n));c.fragment.uniforms.add("eColor","vec4");4===n.output&&c.include(A.OutputHighlight);c.fragment.code.add(x.glsl`
  void main() {
    discardBySlice(vpos);
    ${n.multipassTerrainEnabled?"terrainDepthTest(gl_FragCoord, depth);":""}
    vec4 color = ${n.attributeColor?"vColor * eColor;":"eColor;"}

    if (color.a < ${x.glsl.float(r.symbolAlphaCutoff)}) {
      discard;
    }

    ${7===n.output?x.glsl`gl_FragColor = vec4(color.a);`:""}

    ${0===n.output?x.glsl`gl_FragColor = highlightSlice(color, vpos); ${n.OITEnabled?"gl_FragColor \x3d premultiplyAlpha(gl_FragColor);":""}`:""}
    ${4===n.output?x.glsl`outputHighlight();`:""};
    ${1===n.output?x.glsl`outputDepth(linearDepth);`:""};
  }
  `);return c}var l=Object.freeze({__proto__:null,build:t});d.ColorMaterialShader=l;d.build=t})},"esri/views/3d/webgl-engine/core/shaderLibrary/Transform.glsl":function(){define(["exports","../shaderModules/interfaces"],function(d,m){d.Transform=function(v,B){B.linearDepth?v.vertex.code.add(m.glsl`vec4 transformPositionWithDepth(mat4 proj, mat4 view, vec3 pos, vec2 nearFar, out float depth) {
vec4 eye = view * vec4(pos, 1.0);
depth = (-eye.z - nearFar[0]) / (nearFar[1] - nearFar[0]) ;
return proj * eye;
}`):v.vertex.code.add(m.glsl`vec4 transformPosition(mat4 proj, mat4 view, vec3 pos) {
return proj * (view * vec4(pos, 1.0));
}`)};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/core/shaderLibrary/attributes/VertexColor.glsl":function(){define(["exports","../../shaderModules/interfaces"],function(d,m){d.VertexColor=function(v,B){B.attributeColor?(v.attributes.add("color","vec4"),v.varyings.add("vColor","vec4"),v.vertex.code.add(m.glsl`void forwardVertexColor() { vColor = color; }`),v.vertex.code.add(m.glsl`void forwardNormalizedVertexColor() { vColor = color * 0.003921568627451; }`)):v.vertex.code.add(m.glsl`void forwardVertexColor() {}
void forwardNormalizedVertexColor() {}`)};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/3d/interactive/editingTools/draw/DrawManipulator":function(){define(["exports","../../../../../core/Evented"],function(d,m){let v=function(){function B({grabbableForEvent:A}){this.events=new m;this.interactive=!0;this.selectable=!1;this.cursor=null;this.grabbable=!0;this.grabbableForEvent=A}var C=B.prototype;C.intersectionDistance=function(A,q){return 0};C.attach=function(){};C.detach=function(){};
return B}();d.DrawManipulator=v;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/draw/DrawingMode":function(){define(["exports"],function(d){d.defaultDrawingMode="click";d.drawingModes=["freehand","hybrid","click"];Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/3d/interactive/editingTools/draw/drawSurfaces":function(){define(["exports","../../../../../core/maybe","../../../../../core/screenUtils","../../../../../layers/graphics/dehydratedFeatures","../../../../../support/elevationInfoUtils"],
function(d,m,v,B,C){let A=function(){function g(u,x,y,t=null){this.elevationInfo=u;this.defaultZ=x;this.view=y;this.excludeGraphics=t}var r=g.prototype;r.screenToMap=function(u){if(m.isSome(this.defaultZ))return this.view.sceneIntersectionHelper.intersectElevationFromScreen(v.createScreenPointArray(u.x,u.y),this.elevationInfo,this.defaultZ,this.excludeGraphics);u=this.view.sceneIntersectionHelper.intersectElevationFromScreen(v.createScreenPointArray(u.x,u.y),this.elevationInfo,0,this.excludeGraphics);
m.isSome(u)&&(u.z=void 0);return u};r.mapToScreen=function(u){u=B.makeDehydratedPoint(u.x,u.y,C.getConvertedElevation(this.view,u,this.elevationInfo),u.spatialReference);return this.view.toScreen(u)};return g}(),q=function(){function g(u,x,y=[]){this.view=u;this.elevationInfo=x;this.exclude=y}var r=g.prototype;r.screenToMap=function(u){u=this.view.toMap(u,{exclude:this.exclude});m.isSome(u)&&(u.z=C.getZForElevationMode(u,this.view,this.elevationInfo));return u};r.mapToScreen=function(u){let x=u;m.isSome(this.elevationInfo)&&
(x=B.makeDehydratedPoint(u.x,u.y,C.getConvertedElevation(this.view,u,this.elevationInfo),u.spatialReference));return this.view.toScreen(x)};return g}();d.ElevationDrawSurface=A;d.SceneDrawSurface=q;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/interactive/InteractiveToolBase":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/promiseUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ./interactiveToolUtils ./ManipulatorCollection".split(" "),
function(d,m,v,B,C,A,q,g,r,u,x,y,t){d.InteractiveToolBase=function(l){function n(a){a=l.call(this,a)||this;a.toolState="pending";a.attached=!1;a.created=!1;a.completed=!1;a.manipulators=new t.ManipulatorCollection;a.updating=!1;a._editableFlags=[];a._creationStartedResolver=C.createResolver();a._creationFinishedResolver=C.createResolver();return a}m._inheritsLoose(n,l);var c=n.prototype;c.attach=function(){if(!this.attached&&this.isSupported){this.manipulators.attach();this.onAttach();if(this.visible)this.onShow();
this._set("attached",!0)}};c.detach=function(){this.attached&&(this.onHide(),this.onDetach(),this.manipulators.detach(),this._set("attached",!1))};c.handleInputEvent=function(a){if(this.attached)this.onInputEvent(a)};c.handleInputEventAfter=function(a){if(this.attached)this.onInputEventAfter(a)};c.destroy=function(){switch(this.toolState){case "creating":case "created":this.manipulators.destroy()}this.toolState="destroyed";this._set("view",null);this._set("created",!1);this._set("completed",!1)};
c.setEditableFlag=function(a,b){this._editableFlags[a]=b;this.manipulators.isToolEditable=this._editableFlags.every(k=>null==k||k);this._updateManipulatorAttachment();0===a&&this.notifyChange("editable");this.onEditableChange()};c.hasEditableFlag=function(a){a=this._editableFlags[a];return null==a?!0:a};c.whenCreationStarted=function(){return this._creationStartedResolver.promise};c.when=function(){return this._creationFinishedResolver.promise};c.rejectCreation=function(a){switch(this.toolState){case "pending":case "creating":this._creationStartedResolver.resolve(this)}this._creationFinishedResolver.reject(a)};
c.initialize=function(){};c.onAttach=function(){};c.onDetach=function(){};c.onShow=function(){};c.onHide=function(){};c.onEditableChange=function(){};c.onInputEvent=function(a){};c.onInputEventAfter=function(a){};c.startToolCreation=function(){switch(this.toolState){case "pending":this._creationStartedResolver.resolve(this);this.toolState="creating";break;default:throw Error(`unexpected tool state ${this.toolState}`);}};c.finishToolCreation=function(){switch(this.toolState){case "pending":this.startToolCreation();
case "creating":this.created||(this._set("created",!0),this._creationFinishedResolver.resolve(this));this.toolState="created";break;case "created":if(!this.created)throw Error(`expected this.created to match toolstate ${this.toolState}`);break;default:throw Error(`unexpected tool state ${this.toolState}`);}};c.complete=function(){this.finishToolCreation();this._set("completed",!0)};c._show=function(){this._updateManipulatorAttachment();this.onShow()};c._hide=function(){this._updateManipulatorAttachment();
this.onHide()};c._updateManipulatorAttachment=function(){this.attached&&this.visible?this.manipulators.attach():this.manipulators.detach()};m._createClass(n,[{key:"active",get:function(){return null!=this.view&&this.view.activeTool===this}},{key:"isSupported",get:function(){return!0}},{key:"visible",set:function(a){this._set("visible",a);a||y.setActive(this,!1);this.attached&&(a?this._show():this._hide())}},{key:"editable",get:function(){return this.hasEditableFlag(0)},set:function(a){this.setEditableFlag(0,
a)}},{key:"internallyEditable",get:function(){return this.hasEditableFlag(0)&&this.hasEditableFlag(1)}}]);return n}(B);v.__decorate([A.property()],d.InteractiveToolBase.prototype,"toolState",void 0);v.__decorate([A.property({constructOnly:!0})],d.InteractiveToolBase.prototype,"view",void 0);v.__decorate([A.property({readOnly:!0})],d.InteractiveToolBase.prototype,"active",null);v.__decorate([A.property({value:!0})],d.InteractiveToolBase.prototype,"visible",null);v.__decorate([A.property({value:!0})],
d.InteractiveToolBase.prototype,"editable",null);v.__decorate([A.property({readOnly:!0})],d.InteractiveToolBase.prototype,"attached",void 0);v.__decorate([A.property({readOnly:!0})],d.InteractiveToolBase.prototype,"created",void 0);v.__decorate([A.property({readOnly:!0})],d.InteractiveToolBase.prototype,"completed",void 0);v.__decorate([A.property({readOnly:!0})],d.InteractiveToolBase.prototype,"manipulators",void 0);v.__decorate([A.property({readOnly:!0})],d.InteractiveToolBase.prototype,"updating",
void 0);d.InteractiveToolBase=v.__decorate([x.subclass("esri.views.interactive.InteractiveToolBase")],d.InteractiveToolBase);Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/interactive/ManipulatorCollection":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../core/Collection","../../core/maybe"],function(d,m,v,B){let C=function(){function A(){this._isToolEditable=!0;this._manipulators=new v;this._nextManipulatorId=0;this._resourceContexts={manipulator3D:{}};
this._attached=!1}var q=A.prototype;q.add=function(g,r=0){return this.addMany([g],r)[0]};q.addMany=function(g,r=0){return g.map(u=>{const x=this._nextManipulatorId++;u={id:x,manipulator:u,visibilityPredicate:r,attached:!1};this._manipulators.add(u);this._attached&&this._updateManipulatorAttachment(u);return x})};q.remove=function(g){if("number"===typeof g){for(var r=0;r<this._manipulators.length;r++)if(this._manipulators.getItemAt(r).id===g)return g=this._manipulators.splice(r,1)[0],this._detachManipulator(g),
g.id;return null}for(r=0;r<this._manipulators.length;r++)if(this._manipulators.getItemAt(r).manipulator===g)return g=this._manipulators.splice(r,1)[0],this._detachManipulator(g),g.id;return null};q.removeAll=function(){this._manipulators.forEach(g=>{this._detachManipulator(g)});this._manipulators.removeAll()};q.attach=function(){this._manipulators.forEach(g=>{this._updateManipulatorAttachment(g)});this._attached=!0};q.detach=function(){this._manipulators.forEach(g=>{this._detachManipulator(g)});this._attached=
!1};q.destroy=function(){this._manipulators.forEach(({manipulator:g})=>{g.destroy&&g.destroy()});this._manipulators.destroy();this._resourceContexts=null};q.on=function(g,r){return this._manipulators.on(g,u=>{r(u)})};q.forEach=function(g){for(const r of this._manipulators.items)g(r)};q.some=function(g){return this._manipulators.items.some(g)};q.toArray=function(){const g=[];this.forEach(r=>g.push(r.manipulator));return g};q.intersect=function(g,r){let u=null,x=Number.MAX_VALUE;this._manipulators.forEach(({id:y,
manipulator:t,attached:l})=>{l&&t.interactive&&(l=t.intersectionDistance(g,r),B.isSome(l)&&l<x&&(x=l,u={id:y,manipulator:t}))});return u};q.findById=function(g){if(B.isNone(g))return null;for(const r of this._manipulators.items)if(g===r.id)return r.manipulator;return null};q._updateManipulatorAttachment=function(g){this._isManipulatorItemVisible(g)?this._attachManipulator(g):this._detachManipulator(g)};q._attachManipulator=function(g){g.attached||(g.manipulator.attach&&g.manipulator.attach(this._resourceContexts),
g.attached=!0)};q._detachManipulator=function(g){if(g.attached){var r=g.manipulator;r.grabbing=!1;r.dragging=!1;r.hovering=!1;r.selected=!1;r.detach&&r.detach(this._resourceContexts);g.attached=!1}};q._isManipulatorItemVisible=function(g){return 2===g.visibilityPredicate?!0:this._isToolEditable?0===g.visibilityPredicate:1===g.visibilityPredicate};m._createClass(A,[{key:"isToolEditable",set:function(g){this._isToolEditable=g}},{key:"length",get:function(){return this._manipulators.length}}]);return A}();
d.ManipulatorCollection=C;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/draw/PolygonDrawAction":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/Handles ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../3d/interactive/editingTools/draw/DrawTool ./DrawingMode ./DrawAction ./input/DrawEvents ../input/InputManager ../interactive/keybindings ../support/screenUtils ../../geometry/Point".split(" "),
function(d,m,v,B,C,A,q,g,r,u,x,y,t,l,n,c,a,b,k,e){d.PolygonDrawAction=function(h){function w(p){p=h.call(this,p)||this;p._panEnabled=!1;p._popVertexOnPointerMove=!1;p._addVertexOnPointerUp=!1;p._activePointerId=null;p._viewHandles=new C;p._undoRedoHandles=new C;p.mode=l.defaultDrawingMode;return p}m._inheritsLoose(w,h);var D=w.prototype;D.initialize=function(){"2d"===this.view.type?(this._addViewHandles(),this._addUndoRedoHandles()):this._addDrawTool(this.view)};D.destroy=function(){"2d"===this.view.type?
(this._removeViewHandles(),this._viewHandles.destroy(),this._removeUndoRedoHandles(),this._undoRedoHandles.destroy()):this._removeDrawTool();this.emit("destroy")};D.undo=function(){h.prototype.undo.call(this);this.notifyChange("vertices")};D.redo=function(){h.prototype.redo.call(this);this.notifyChange("vertices")};D.complete=function(){"2d"===this.view.type?this._completeDrawing():this._drawTool.completeCreateOperation()};D.getGeometryZValue=function(){return 0<this.vertices.length&&2<this.vertices[0].length?
this.vertices[0][2]:this._get("defaultZ")};D._addViewHandles=function(){this._removeViewHandles();this._viewHandles.add([this.view.on("click",p=>{p.stopPropagation()},a.ViewEventPriorities.TOOL),this.view.on("pointer-down",p=>{this._shouldHandlePointerEvent(p)&&(this._snappingTask=A.abortMaybe(this._snappingTask),this._activePointerId=p.pointerId,this._addVertexOnPointerUp=!0,this._cursorScreenPoint=k.createScreenPointFromEvent(p),"touch"===p.pointerType&&this._updateCursor(p.native))},a.ViewEventPriorities.TOOL),
this.view.on("pointer-move",p=>{this._snappingTask=A.abortMaybe(this._snappingTask);this._popVertexOnPointerMove&&(this.undo(),this._popVertexOnPointerMove=!1);this._cursorScreenPoint=k.createScreenPointFromEvent(p);"touch"!==p.pointerType&&this._updateCursor(p.native)},a.ViewEventPriorities.TOOL),this.view.on("pointer-drag",p=>{this._shouldHandlePointerEvent(p)&&(this._snappingTask=A.abortMaybe(this._snappingTask),this._cursorScreenPoint=k.createScreenPointFromEvent(p),this._dragEnabled&&!this._panEnabled?
this._vertexAddHandler(p):this._addVertexOnPointerUp=!1)},a.ViewEventPriorities.TOOL),this.view.on("pointer-up",p=>{this._shouldHandlePointerEvent(p)&&(this._snappingTask=A.abortMaybe(this._snappingTask),this._activePointerId=null,this._addVertexOnPointerUp?this._clickEnabled?this._vertexAddHandler(p):(1===this.vertices.length&&this.vertices.pop(),this._drawCompleteHandler(p)):this._updateCursor(p.native,"touch"===p.pointerType))},a.ViewEventPriorities.TOOL),this.view.on("drag",p=>{this._dragEnabled&&
A.isSome(this._activePointerId)&&!this._panEnabled&&p.stopPropagation()},a.ViewEventPriorities.TOOL),this.view.on("drag",["Shift"],p=>{p.stopPropagation()},a.ViewEventPriorities.TOOL),this.view.on("double-click",p=>{p.stopPropagation();this._drawCompleteHandler(p)},a.ViewEventPriorities.TOOL),this.view.on("double-click",["Control"],p=>{p.stopPropagation();this._drawCompleteHandler(p)},a.ViewEventPriorities.TOOL),this.view.on("key-down",p=>{const {key:z,repeat:f}=p;z===b.SKETCH_KEYS.vertexAdd&&!f&&
this._cursorScreenPoint?(p.stopPropagation(),this._snappingTask=A.abortMaybe(this._snappingTask),this._vertexAddHandler(p)):z!==b.SKETCH_KEYS.complete||f?z!==b.SKETCH_KEYS.undo||this.interactiveUndoDisabled||f?z!==b.SKETCH_KEYS.redo||this.interactiveUndoDisabled||f?z!==b.SKETCH_KEYS.pan||f||(p.stopPropagation(),this._panEnabled=!0):(p.stopPropagation(),this.redo()):(p.stopPropagation(),this.undo()):(p.stopPropagation(),this._drawCompleteHandler(p))},a.ViewEventPriorities.TOOL),this.view.on("key-up",
p=>{p.key===b.SKETCH_KEYS.pan&&(p.stopPropagation(),this._panEnabled=!1)},a.ViewEventPriorities.TOOL)])};D._addUndoRedoHandles=function(){this._removeUndoRedoHandles();this._undoRedoHandles.add([this._editGeometry.on("vertex-remove",p=>{this.notifyChange("vertices");if("undo"===p.operation){const z=this._nativeEventHistory.undoStack.pop();this._nativeEventHistory.redoStack.push(z);const f=[...this._committedVertices];A.isSome(this._stagedVertex)&&f.push(this._coordinateHelper.pointToArray(this._stagedVertex));
this.emit("undo",new c.VertexRemoveEvent(this.view,z,p.vertices[0].index,f))}}),this._editGeometry.on("vertex-add",p=>{this.notifyChange("vertices");if("apply"===p.operation)p=new c.VertexAddEvent(this.view,this._nativeEventHistory.undoStack[this._nativeEventHistory.undoStack.length],this._committedVertices.length-1,this.vertices),this.emit("vertex-add",p),p.defaultPrevented&&(this._popVertexOnPointerMove=!0);else if("redo"===p.operation){const z=this._nativeEventHistory.redoStack.pop();this._nativeEventHistory.undoStack.push(z);
const f=[...this._committedVertices];A.isSome(this._stagedVertex)&&f.push(this._coordinateHelper.pointToArray(this._stagedVertex));this.emit("redo",new c.VertexAddEvent(this.view,z,p.vertices[0].index,f))}})])};D._removeViewHandles=function(){this._viewHandles.removeAll()};D._removeUndoRedoHandles=function(){this._undoRedoHandles.removeAll()};D._addDrawTool=function(p){this._drawTool=new t.DrawTool({view:p,elevationInfo:this.elevationInfo,hasZ:this.hasZ,geometryType:"polygon",mode:this.mode});this.view.toolViewManager.tools.push(this._drawTool);
this.view.activeTool=this._drawTool;this._drawTool.on("vertex-add",z=>{1===z.vertices.length&&this.emit("vertex-add",new c.VertexAddEvent(this.view,null,z.vertices[0].vertexIndex,this._drawTool.getVertexCoords()))});this._drawTool.on("cursor-update",z=>{1===z.vertices.length&&this.emit("cursor-update",new c.CursorUpdateEvent(this.view,null,z.vertices[0].vertexIndex,this._drawTool.getVertexCoords()))});this._drawTool.on("complete",z=>{this.emit("draw-complete",new c.DrawCompleteEvent(null,this._drawTool.getVertexCoords()));
this._removeDrawTool()})};D._removeDrawTool=function(){A.isSome(this._drawTool)&&(this.view.tools.remove(this._drawTool),this._drawTool.destroy(),this._drawTool=null)};D._addVertex=function(p,z){p=this._coordinateHelper.fromArray(p);this._isDuplicateOfLastVertex(p)||(this._lastVertexUnsnapped=this._stagedVertexUnsnapped,this._popCursorVertex(),this._editGeometry.appendVertex(p),z=z||new Event("placeholder"),this._nativeEventHistory.undoStack.push(z))};D._updateCursor=function(p,z=!1){this._popCursorVertex();
if(this._cursorScreenPoint){var f=this.getCoordsAndPointFromScreenPoint(this._cursorScreenPoint);if(A.isSome(f)&&!z){this._pushCursorVertex(f.vertex);const E=()=>new c.CursorUpdateEvent(this.view,p,this._activeComponent.vertices.length,this.vertices,A.isSome(this._stagedVertex)?new e(this._stagedVertex):null);this.emit("cursor-update",E());A.isSome(this._snappingTask)&&this._snappingTask.promise.then(F=>{F.valid&&this.emit("cursor-update",E())},()=>{})}}};D._completeDrawing=function(p){this._activePointerId=
null;this._popCursorVertex();3>this._committedVertices.length||(this._snappingTask=A.abortMaybe(this._snappingTask),A.isSome(this._snappingManager)&&this._snappingManager.doneSnapping(),p=new c.DrawCompleteEvent(p,this.vertices),this.emit("draw-complete",p),p.defaultPrevented||this._removeViewHandles())};D._shouldHandlePointerEvent=function(p){return("mouse"!==p.pointerType||0===p.button)&&(A.isNone(this._activePointerId)||this._activePointerId===p.pointerId)};m._createClass(w,[{key:"_dragEnabled",
get:function(){return"freehand"===this.mode||"hybrid"===this.mode}},{key:"_clickEnabled",get:function(){return"click"===this.mode||"hybrid"===this.mode}}]);return w}(n);v.__decorate([q.property()],d.PolygonDrawAction.prototype,"_dragEnabled",null);v.__decorate([q.property()],d.PolygonDrawAction.prototype,"_clickEnabled",null);v.__decorate([q.property({type:l.drawingModes})],d.PolygonDrawAction.prototype,"mode",void 0);d.PolygonDrawAction=v.__decorate([y.subclass("esri.views.draw.PolygonDrawAction")],
d.PolygonDrawAction);Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/draw/PolylineDrawAction":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/Handles ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../3d/interactive/editingTools/draw/DrawTool ./DrawingMode ./DrawAction ./input/DrawEvents ../input/InputManager ../interactive/keybindings ../support/screenUtils ../../geometry/Point".split(" "),
function(d,m,v,B,C,A,q,g,r,u,x,y,t,l,n,c,a,b,k,e){d.PolylineDrawAction=function(h){function w(p){p=h.call(this,p)||this;p._panEnabled=!1;p._popVertexOnPointerMove=!1;p._addVertexOnPointerUp=!1;p._activePointerId=null;p._viewHandles=new C;p._undoRedoHandles=new C;p.mode=l.defaultDrawingMode;return p}m._inheritsLoose(w,h);var D=w.prototype;D.initialize=function(){"2d"===this.view.type?(this._addViewHandles(),this._addUndoRedoHandles()):this._addDrawTool(this.view)};D.destroy=function(){"2d"===this.view.type?
(this._removeViewHandles(),this._viewHandles.destroy(),this._removeUndoRedoHandles(),this._undoRedoHandles.destroy()):this._removeDrawTool();this.emit("destroy")};D.undo=function(){h.prototype.undo.call(this);this.notifyChange("vertices")};D.redo=function(){h.prototype.redo.call(this);this.notifyChange("vertices")};D.complete=function(){"2d"===this.view.type?this._completeDrawing():this._drawTool.completeCreateOperation()};D._addViewHandles=function(){this._removeViewHandles();this._viewHandles.add([this.view.on("click",
p=>{p.stopPropagation()},a.ViewEventPriorities.TOOL),this.view.on("pointer-down",p=>{this._shouldHandlePointerEvent(p)&&!this._panEnabled&&(this._snappingTask=A.abortMaybe(this._snappingTask),this._activePointerId=p.pointerId,this._addVertexOnPointerUp=!0,this._cursorScreenPoint=k.createScreenPointFromEvent(p),"touch"===p.pointerType&&this._updateCursor(p.native))},a.ViewEventPriorities.TOOL),this.view.on("pointer-move",p=>{this._popVertexOnPointerMove&&(this.undo(),this._popVertexOnPointerMove=!1);
this._snappingTask=A.abortMaybe(this._snappingTask);this._cursorScreenPoint=k.createScreenPointFromEvent(p);"touch"!==p.pointerType&&this._updateCursor(p.native)},a.ViewEventPriorities.TOOL),this.view.on("pointer-drag",p=>{this._shouldHandlePointerEvent(p)&&(this._snappingTask=A.abortMaybe(this._snappingTask),this._cursorScreenPoint=k.createScreenPointFromEvent(p),this._dragEnabled&&!this._panEnabled?this._vertexAddHandler(p):this._addVertexOnPointerUp=!1)},a.ViewEventPriorities.TOOL),this.view.on("pointer-up",
p=>{this._shouldHandlePointerEvent(p)&&(this._snappingTask=A.abortMaybe(this._snappingTask),this._activePointerId=null,this._addVertexOnPointerUp?this._clickEnabled?this._vertexAddHandler(p):(1===this.vertices.length&&this.vertices.pop(),this._drawCompleteHandler(p)):this._updateCursor(p.native,"touch"===p.pointerType))},a.ViewEventPriorities.TOOL),this.view.on("drag",p=>{this._dragEnabled&&A.isSome(this._activePointerId)&&!this._panEnabled&&p.stopPropagation()},a.ViewEventPriorities.TOOL),this.view.on("drag",
["Shift"],p=>{p.stopPropagation()},a.ViewEventPriorities.TOOL),this.view.on("double-click",p=>{p.stopPropagation();this._drawCompleteHandler(p)},a.ViewEventPriorities.TOOL),this.view.on("double-click",["Control"],p=>{p.stopPropagation();this._drawCompleteHandler(p)},a.ViewEventPriorities.TOOL),this.view.on("key-down",p=>{const {key:z,repeat:f}=p;z===b.SKETCH_KEYS.vertexAdd&&!f&&this._cursorScreenPoint?(p.stopPropagation(),this._snappingTask=A.abortMaybe(this._snappingTask),this._vertexAddHandler(p)):
z!==b.SKETCH_KEYS.complete||f?z!==b.SKETCH_KEYS.undo||this.interactiveUndoDisabled||f?z!==b.SKETCH_KEYS.redo||this.interactiveUndoDisabled||f?z!==b.SKETCH_KEYS.pan||f||(p.stopPropagation(),this._panEnabled=!0):(p.stopPropagation(),this.redo()):(p.stopPropagation(),this.undo()):(p.stopPropagation(),this._drawCompleteHandler(p))},a.ViewEventPriorities.TOOL),this.view.on("key-up",p=>{p.key===b.SKETCH_KEYS.pan&&(p.stopPropagation(),this._panEnabled=!1)},a.ViewEventPriorities.TOOL)])};D._addUndoRedoHandles=
function(){this._removeUndoRedoHandles();this._undoRedoHandles.add([this._editGeometry.on("vertex-remove",p=>{this.notifyChange("vertices");if("undo"===p.operation){const z=this._nativeEventHistory.undoStack.pop();this._nativeEventHistory.redoStack.push(z);const f=[...this._committedVertices];A.isSome(this._stagedVertex)&&f.push(this._coordinateHelper.pointToArray(this._stagedVertex));this.emit("undo",new c.VertexRemoveEvent(this.view,z,p.vertices[0].index,f))}}),this._editGeometry.on("vertex-add",
p=>{this.notifyChange("vertices");if("apply"===p.operation)p=new c.VertexAddEvent(this.view,this._nativeEventHistory.undoStack[this._nativeEventHistory.undoStack.length],this._committedVertices.length-1,this.vertices),this.emit("vertex-add",p),p.defaultPrevented&&(this._popVertexOnPointerMove=!0);else if("redo"===p.operation){const z=this._nativeEventHistory.redoStack.pop();this._nativeEventHistory.undoStack.push(z);const f=[...this._committedVertices];A.isSome(this._stagedVertex)&&f.push(this._coordinateHelper.pointToArray(this._stagedVertex));
this.emit("redo",new c.VertexAddEvent(this.view,z,p.vertices[0].index,f))}})])};D._removeViewHandles=function(){this._viewHandles.removeAll()};D._removeUndoRedoHandles=function(){this._undoRedoHandles.removeAll()};D._addDrawTool=function(p){this._drawTool=new t.DrawTool({view:p,elevationInfo:this.elevationInfo,hasZ:this.hasZ,geometryType:"polyline",mode:this.mode});this.view.toolViewManager.tools.push(this._drawTool);this.view.activeTool=this._drawTool;this._drawTool.on("vertex-add",z=>{1===z.vertices.length&&
this.emit("vertex-add",new c.VertexAddEvent(this.view,null,z.vertices[0].vertexIndex,this._drawTool.getVertexCoords()))});this._drawTool.on("cursor-update",z=>{1===z.vertices.length&&this.emit("cursor-update",new c.CursorUpdateEvent(this.view,null,z.vertices[0].vertexIndex,this._drawTool.getVertexCoords()))});this._drawTool.on("complete",z=>{this.emit("draw-complete",new c.DrawCompleteEvent(null,this._drawTool.getVertexCoords()));this._removeDrawTool()})};D._removeDrawTool=function(){A.isSome(this._drawTool)&&
(this.view.tools.remove(this._drawTool),this._drawTool=A.destroyMaybe(this._drawTool))};D._addVertex=function(p,z){p=this._coordinateHelper.fromArray(p);this._isDuplicateOfLastVertex(p)||(this._lastVertexUnsnapped=this._stagedVertexUnsnapped,this._popCursorVertex(),this._editGeometry.appendVertex(p),z=z||new Event("placeholder"),this._nativeEventHistory.undoStack.push(z))};D._updateCursor=function(p,z=!1){this._popCursorVertex();if(this._cursorScreenPoint){var f=this.getCoordsAndPointFromScreenPoint(this._cursorScreenPoint);
if(A.isSome(f)&&!z){this._pushCursorVertex(f.vertex);const E=()=>new c.CursorUpdateEvent(this.view,p,this._activeComponent.vertices.length,this.vertices,A.isSome(this._stagedVertex)?new e(this._stagedVertex):null);this.emit("cursor-update",E());A.isSome(this._snappingTask)&&this._snappingTask.promise.then(F=>{F.valid&&this.emit("cursor-update",E())},()=>{})}}};D._completeDrawing=function(p){this._activePointerId=null;this._popCursorVertex();2>this._committedVertices.length||(this._snappingTask=A.abortMaybe(this._snappingTask),
A.isSome(this._snappingManager)&&this._snappingManager.doneSnapping(),p=new c.DrawCompleteEvent(p,this.vertices),this.emit("draw-complete",p),p.defaultPrevented||this._removeViewHandles())};D._shouldHandlePointerEvent=function(p){return("mouse"!==p.pointerType||0===p.button)&&(A.isNone(this._activePointerId)||this._activePointerId===p.pointerId)};m._createClass(w,[{key:"_clickEnabled",get:function(){return"click"===this.mode||"hybrid"===this.mode}},{key:"_dragEnabled",get:function(){return"freehand"===
this.mode||"hybrid"===this.mode}}]);return w}(n);v.__decorate([q.property()],d.PolylineDrawAction.prototype,"_clickEnabled",null);v.__decorate([q.property()],d.PolylineDrawAction.prototype,"_dragEnabled",null);v.__decorate([q.property({type:l.drawingModes})],d.PolylineDrawAction.prototype,"mode",void 0);d.PolylineDrawAction=v.__decorate([y.subclass("esri.views.draw.PolylineDrawAction")],d.PolylineDrawAction);Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/draw/SegmentDrawAction":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/Handles ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../3d/interactive/editingTools/draw/DrawTool ./DrawAction ./input/DrawEvents ./support/surfaceCoordinateSystems ../input/InputManager ../interactive/keybindings ../interactive/editGeometry/EditGeometry ../interactive/editGeometry/EditGeometryHelper ../support/screenUtils ../../geometry/Point".split(" "),
function(d,m,v,B,C,A,q,g,r,u,x,y,t,l,n,c,a,b,k,e,h,w){d.SegmentDrawAction=function(D){function p(f){f=D.call(this,f)||this;f._isDragging=!1;f._panEnabled=!1;f._viewHandles=new C;f._activePointerId=null;f._addVertexOnPointerUp=!1;f.viewAlignedCoordinateSystem=null;f.mode="freehand";return f}m._inheritsLoose(p,D);var z=p.prototype;z.initialize=function(){"2d"===this.view.type?this._addViewHandles():this._addDrawTool(this.view)};z.destroy=function(){"2d"===this.view.type?(this._removeViewHandles(),this._viewHandles.destroy()):
this._removeDrawTool();this.emit("destroy")};z.complete=function(){"2d"===this.view.type?this._completeDrawing():this._drawTool.completeCreateOperation()};z.getGeometryZValue=function(){return 0<this.vertices.length&&2<this.vertices[0].length?this.vertices[0][2]:this._get("defaultZ")};z._addViewHandles=function(){this._removeViewHandles();"click"===this.mode?this._viewHandles.add(this._getClickModeViewHandles()):this._viewHandles.add(this._getDragModeViewHandles())};z._getDragModeViewHandles=function(){return[this.view.on("immediate-click",
f=>{f.stopPropagation();if(f.mapPoint&&!this._panEnabled){const E=this.getCoordsFromScreenPoint(h.createScreenPointFromEvent(f));A.isSome(E)&&(this._vertexAddHandler(f),this._drawCompleteHandler(f))}},a.ViewEventPriorities.TOOL),this.view.on("pointer-down",f=>{this._shouldHandlePointerEvent(f)&&(this._snappingTask=A.abortMaybe(this._snappingTask),this._panEnabled||(this._resetGeometry(),this._addVertexOnPointerUp=!0,this._cursorScreenPoint=h.createScreenPointFromEvent(f),this._activePointerId=f.pointerId,
this._vertexAddHandler(f),this._isDragging=!1,"touch"===f.pointerType&&this._updateCursor(f.native)))},a.ViewEventPriorities.TOOL),this.view.on("pointer-move",f=>{this._snappingTask=A.abortMaybe(this._snappingTask);A.isNone(this._activePointerId)&&"touch"!==f.pointerType&&(this._cursorScreenPoint=h.createScreenPointFromEvent(f),this._updateCursor(f.native))},a.ViewEventPriorities.TOOL),this.view.on("pointer-drag",f=>{this._shouldHandlePointerEvent(f)&&(this._snappingTask=A.abortMaybe(this._snappingTask),
this._isDragging=!0,this._cursorScreenPoint=h.createScreenPointFromEvent(f),this._updateCursor(f.native))},a.ViewEventPriorities.TOOL),this.view.on("pointer-up",f=>{this._shouldHandlePointerEvent(f)&&this._addVertexOnPointerUp&&(this._snappingTask=A.abortMaybe(this._snappingTask),this._activePointerId=null,this._isDragging&&this._vertexAddHandler(f),2===this._committedVertices.length&&this._drawCompleteHandler(f),this._isDragging=!1)},a.ViewEventPriorities.TOOL),this.view.on("key-down",f=>{f.key===
b.SKETCH_KEYS.complete&&this._cursorScreenPoint?(this._snappingTask=A.abortMaybe(this._snappingTask),this._vertexAddHandler(f),this._drawCompleteHandler(f)):f.key===b.SKETCH_KEYS.pan&&(this._panEnabled=!0)},a.ViewEventPriorities.TOOL),this.view.on("key-up",f=>{f.key===b.SKETCH_KEYS.pan&&(this._panEnabled=!1)},a.ViewEventPriorities.TOOL),this.view.on("drag",f=>{A.isSome(this._activePointerId)&&f.stopPropagation()},a.ViewEventPriorities.TOOL),this.view.on("drag",["Shift"],f=>{f.stopPropagation()},a.ViewEventPriorities.TOOL)]};
z._getClickModeViewHandles=function(){return[this.view.on("pointer-down",f=>{this._snappingTask=A.abortMaybe(this._snappingTask);this._cursorScreenPoint=h.createScreenPointFromEvent(f);this._activePointerId=f.pointerId;this._isDragging=!1;"touch"===f.pointerType&&this._updateCursor(f.native)},a.ViewEventPriorities.TOOL),this.view.on("pointer-move",f=>{this._snappingTask=A.abortMaybe(this._snappingTask);this._cursorScreenPoint=h.createScreenPointFromEvent(f);A.isNone(this._activePointerId)&&"touch"!==
f.pointerType&&this._updateCursor(f.native)},a.ViewEventPriorities.TOOL),this.view.on("pointer-drag",f=>{this._shouldHandlePointerEvent(f)&&(this._snappingTask=A.abortMaybe(this._snappingTask),this._isDragging=!0)},a.ViewEventPriorities.TOOL),this.view.on("pointer-up",f=>{this._shouldHandlePointerEvent(f)&&(this._snappingTask=A.abortMaybe(this._snappingTask),this._activePointerId=null,f.stopPropagation(),this._isDragging||this._vertexAddHandler(f),2!==this.vertices.length||this._isDragging||this._drawCompleteHandler(f),
this._isDragging=!1)},a.ViewEventPriorities.TOOL),this.view.on("key-down",f=>{f.key===b.SKETCH_KEYS.vertexAdd&&this._cursorScreenPoint&&(this._vertexAddHandler(f),2===this.vertices.length&&this._drawCompleteHandler(f));f.key===b.SKETCH_KEYS.complete&&this._cursorScreenPoint&&2===this.vertices.length&&(this._vertexAddHandler(f),this._drawCompleteHandler(f))},a.ViewEventPriorities.TOOL)]};z._removeViewHandles=function(){this._viewHandles.removeAll()};z._addDrawTool=function(f){this._drawTool=new t.DrawTool({view:f,
elevationInfo:this.elevationInfo,hasZ:this.hasZ,geometryType:"segment",mode:this.mode});this.view.toolViewManager.tools.push(this._drawTool);this.view.activeTool=this._drawTool;this._drawTool.on("vertex-add",E=>{1===E.vertices.length&&this.emit("vertex-add",new n.VertexAddEvent(this.view,null,E.vertices[0].vertexIndex,this._drawTool.getVertexCoords()))});this._drawTool.on("cursor-update",E=>{1===E.vertices.length&&this.emit("cursor-update",new n.CursorUpdateEvent(this.view,null,E.vertices[0].vertexIndex,
this._drawTool.getVertexCoords()))});this._drawTool.on("complete",E=>{this.emit("draw-complete",new n.DrawCompleteEvent(null,this._drawTool.getVertexCoords()));this._removeDrawTool()})};z._removeDrawTool=function(){A.isSome(this._drawTool)&&(this.view.tools.remove(this._drawTool),this._drawTool.destroy(),this._drawTool=null)};z._addVertex=function(f,E){f=this._coordinateHelper.fromArray(f);this._isDuplicateOfLastVertex(f)||(this._lastVertexUnsnapped=this._stagedVertexUnsnapped,this._popCursorVertex(),
this._editGeometry.appendVertex(f),1===this._committedVertices.length&&(this.viewAlignedCoordinateSystem=c.createViewAlignedCoordinateSystem(this.view,this._committedVertices[0])),E=new n.VertexAddEvent(this.view,E,this._committedVertices.length-1,this.vertices),this.emit("vertex-add",E))};z._updateCursor=function(f){this._popCursorVertex();if(this._cursorScreenPoint){var E=this.getCoordsAndPointFromScreenPoint(this._cursorScreenPoint);if(A.isSome(E)){this._pushCursorVertex(E.vertex);const F=()=>
new n.CursorUpdateEvent(this.view,f,this._activeComponent.vertices.length,this.vertices,A.isSome(this._stagedVertex)?new w(this._stagedVertex):null);this.emit("cursor-update",F());A.isSome(this._snappingTask)&&this._snappingTask.promise.then(L=>{L.valid&&this.emit("cursor-update",F())},()=>{})}}};z._completeDrawing=function(f){this._activePointerId=null;this._popCursorVertex();this._cursorScreenPoint=null;this._isDragging=!1;this._snappingTask=A.abortMaybe(this._snappingTask);A.isSome(this._snappingManager)&&
this._snappingManager.doneSnapping();1>this.vertices.length||(f=new n.DrawCompleteEvent(f,this.vertices),this.emit("draw-complete",f),f.defaultPrevented||this._removeViewHandles())};z._resetGeometry=function(){this._editGeometry.destroy();this._editGeometry=new e.EditGeometryHelper(new k.EditGeometry(this._coordinateHelper),"polygon");this._activeComponent=new k.Component(this._editGeometry.editGeometry);this._editGeometry.editGeometry.components.push(this._activeComponent)};z._shouldHandlePointerEvent=
function(f){return("mouse"!==f.pointerType||0===f.button)&&(A.isNone(this._activePointerId)||this._activePointerId===f.pointerId)};return p}(l);v.__decorate([q.property({type:["freehand","click"]})],d.SegmentDrawAction.prototype,"mode",void 0);d.SegmentDrawAction=v.__decorate([y.subclass("esri/views/2d/engine/markup/SegmentDrawAction")],d.SegmentDrawAction);Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/draw/support/surfaceCoordinateSystems":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../geometry ../../../core/maybe ../../../chunks/mat2d ../../../chunks/mat2df64 ../../../chunks/quat ../../../chunks/quatf64 ../../../chunks/vec3 ../../../chunks/vec3f64 ../../../geometry/Point".split(" "),
function(d,m,v,B,C,A,q,g,r,u,x){function y(c,a,b=null){return B.isSome(b)?[c,a,b]:[c,a]}function t(c,a,b=null){return B.isSome(b)?{x:c,y:a,z:b}:{x:c,y:a}}v=function(){function c(a){this.spatialReference=a}c.prototype.mapToLocalMultiple=function(a){return B.filterNones(a.map(b=>this.mapToLocal(b)))};m._createClass(c,[{key:"doUnnormalization",get:function(){return!1}}]);return c}();let l=function(c){function a(k,e,h=null){e=c.call(this,e)||this;e.defaultZ=h;e.transform=A.create();e.transformInv=A.create();
e.transform=A.clone(k);C.invert(e.transformInv,e.transform);return e}m._inheritsLoose(a,c);var b=a.prototype;b.makeMapPoint=function(k,e){return y(k,e,this.defaultZ)};b.mapToLocal=function(k){return t(this.transform[0]*k[0]+this.transform[2]*k[1]+this.transform[4],this.transform[1]*k[0]+this.transform[3]*k[1]+this.transform[5])};b.localToMap=function(k){return y(this.transformInv[0]*k.x+this.transformInv[2]*k.y+this.transformInv[4],this.transformInv[1]*k.x+this.transformInv[3]*k.y+this.transformInv[5],
this.defaultZ)};return a}(v),n=function(c){function a(k,e){var h=c.call(this,k.spatialReference)||this;h.view=k;h.defaultZ=null;h.pWS=u.create();h.tangentFrameUpWS=u.create();h.tangentFrameRightWS=u.create();h.tangentFrameForwardWS=u.create();h.localFrameRightWS=u.create();h.localFrameUpWS=u.create();h.worldToLocalTransform=g.create();h.localToWorldTransform=g.create();h.scale=1;h.scale=k.resolution;h.referenceMapPoint=e;h.defaultZ=e.hasZ?e.z:null;k=k.state.camera.viewRight;h.view.renderCoordsHelper.toRenderCoords(h.referenceMapPoint,
h.pWS);h.view.renderCoordsHelper.worldBasisAtPosition(h.pWS,0,h.tangentFrameRightWS);h.view.renderCoordsHelper.worldBasisAtPosition(h.pWS,1,h.tangentFrameUpWS);h.view.renderCoordsHelper.worldBasisAtPosition(h.pWS,2,h.tangentFrameForwardWS);e=u.create();r.scale(e,h.tangentFrameForwardWS,r.dot(k,h.tangentFrameForwardWS));r.subtract(h.localFrameRightWS,k,e);r.normalize(h.localFrameRightWS,h.localFrameRightWS);r.cross(h.localFrameUpWS,h.tangentFrameForwardWS,h.localFrameRightWS);q.rotationTo(h.worldToLocalTransform,
h.localFrameRightWS,h.tangentFrameRightWS);q.invert(h.localToWorldTransform,h.worldToLocalTransform);return h}m._inheritsLoose(a,c);var b=a.prototype;b.makeMapPoint=function(k,e){return y(k,e,this.defaultZ)};b.mapToLocal=function(k){const e=u.create();this.view.renderCoordsHelper.toRenderCoords(new x({x:k[0],y:k[1],spatialReference:this.spatialReference}),e);r.transformQuat(e,e,this.worldToLocalTransform);k=this.view.renderCoordsHelper.fromRenderCoords(e,this.view.spatialReference);return B.isSome(k)?
t(k.x/this.scale,k.y/this.scale):null};b.localToMap=function(k){const e=u.create();this.view.renderCoordsHelper.toRenderCoords(new x({x:k.x*this.scale,y:k.y*this.scale,spatialReference:this.spatialReference}),e);r.transformQuat(e,e,this.localToWorldTransform);k=this.view.renderCoordsHelper.fromRenderCoords(e,this.view.spatialReference);return B.isSome(k)?y(k.x,k.y,this.defaultZ):null};m._createClass(a,[{key:"doUnnormalization",get:function(){return"global"===this.view.viewingMode}}]);return a}(v);
d.AffineCoordinateSystem=l;d.SceneViewCoordinateSystem=n;d.SurfaceCoordinateSystem=v;d.createViewAlignedCoordinateSystem=function(c,a){return"2d"===c.type?new l(c.state.transform,c.spatialReference,2<a.length?a[2]:null):"3d"===c.type?(a=2<a.length?new x({x:a[0],y:a[1],z:a[2],spatialReference:c.spatialReference}):new x({x:a[0],y:a[1],spatialReference:c.spatialReference}),new n(c,a)):null};d.makeMapPoint=y;d.makeSurfacePoint=t;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/chunks/mat2d":function(){define(["exports",
"./common"],function(d,m){function v(p,z){p[0]=z[0];p[1]=z[1];p[2]=z[2];p[3]=z[3];p[4]=z[4];p[5]=z[5];return p}function B(p){p[0]=1;p[1]=0;p[2]=0;p[3]=1;p[4]=0;p[5]=0;return p}function C(p,z,f,E,F,L,W){p[0]=z;p[1]=f;p[2]=E;p[3]=F;p[4]=L;p[5]=W;return p}function A(p,z){const f=z[0],E=z[1],F=z[2],L=z[3],W=z[4];z=z[5];let M=f*L-E*F;if(!M)return null;M=1/M;p[0]=L*M;p[1]=-E*M;p[2]=-F*M;p[3]=f*M;p[4]=(F*z-L*W)*M;p[5]=(E*W-f*z)*M;return p}function q(p){return p[0]*p[3]-p[1]*p[2]}function g(p,z,f){const E=
z[0],F=z[1],L=z[2],W=z[3],M=z[4];z=z[5];const P=f[0],V=f[1],H=f[2],R=f[3],Z=f[4];f=f[5];p[0]=E*P+L*V;p[1]=F*P+W*V;p[2]=E*H+L*R;p[3]=F*H+W*R;p[4]=E*Z+L*f+M;p[5]=F*Z+W*f+z;return p}function r(p,z,f){const E=z[0],F=z[1],L=z[2],W=z[3],M=z[4];z=z[5];const P=Math.sin(f);f=Math.cos(f);p[0]=E*f+L*P;p[1]=F*f+W*P;p[2]=E*-P+L*f;p[3]=F*-P+W*f;p[4]=M;p[5]=z;return p}function u(p,z,f){const E=z[1],F=z[2],L=z[3],W=z[4],M=z[5],P=f[0];f=f[1];p[0]=z[0]*P;p[1]=E*P;p[2]=F*f;p[3]=L*f;p[4]=W;p[5]=M;return p}function x(p,
z,f){const E=z[0],F=z[1],L=z[2],W=z[3],M=z[4];z=z[5];const P=f[0];f=f[1];p[0]=E;p[1]=F;p[2]=L;p[3]=W;p[4]=E*P+L*f+M;p[5]=F*P+W*f+z;return p}function y(p,z){const f=Math.sin(z);z=Math.cos(z);p[0]=z;p[1]=f;p[2]=-f;p[3]=z;p[4]=0;p[5]=0;return p}function t(p,z){p[0]=z[0];p[1]=0;p[2]=0;p[3]=z[1];p[4]=0;p[5]=0;return p}function l(p,z){p[0]=1;p[1]=0;p[2]=0;p[3]=1;p[4]=z[0];p[5]=z[1];return p}function n(p){return"mat2d("+p[0]+", "+p[1]+", "+p[2]+", "+p[3]+", "+p[4]+", "+p[5]+")"}function c(p){return Math.sqrt(p[0]**
2+p[1]**2+p[2]**2+p[3]**2+p[4]**2+p[5]**2+1)}function a(p,z,f){p[0]=z[0]+f[0];p[1]=z[1]+f[1];p[2]=z[2]+f[2];p[3]=z[3]+f[3];p[4]=z[4]+f[4];p[5]=z[5]+f[5];return p}function b(p,z,f){p[0]=z[0]-f[0];p[1]=z[1]-f[1];p[2]=z[2]-f[2];p[3]=z[3]-f[3];p[4]=z[4]-f[4];p[5]=z[5]-f[5];return p}function k(p,z,f){p[0]=z[0]*f;p[1]=z[1]*f;p[2]=z[2]*f;p[3]=z[3]*f;p[4]=z[4]*f;p[5]=z[5]*f;return p}function e(p,z,f,E){p[0]=z[0]+f[0]*E;p[1]=z[1]+f[1]*E;p[2]=z[2]+f[2]*E;p[3]=z[3]+f[3]*E;p[4]=z[4]+f[4]*E;p[5]=z[5]+f[5]*E;return p}
function h(p,z){return p[0]===z[0]&&p[1]===z[1]&&p[2]===z[2]&&p[3]===z[3]&&p[4]===z[4]&&p[5]===z[5]}function w(p,z){const f=p[0],E=p[1],F=p[2],L=p[3],W=p[4];p=p[5];const M=z[0],P=z[1],V=z[2],H=z[3],R=z[4];z=z[5];return Math.abs(f-M)<=m.EPSILON*Math.max(1,Math.abs(f),Math.abs(M))&&Math.abs(E-P)<=m.EPSILON*Math.max(1,Math.abs(E),Math.abs(P))&&Math.abs(F-V)<=m.EPSILON*Math.max(1,Math.abs(F),Math.abs(V))&&Math.abs(L-H)<=m.EPSILON*Math.max(1,Math.abs(L),Math.abs(H))&&Math.abs(W-R)<=m.EPSILON*Math.max(1,
Math.abs(W),Math.abs(R))&&Math.abs(p-z)<=m.EPSILON*Math.max(1,Math.abs(p),Math.abs(z))}var D=Object.freeze({__proto__:null,copy:v,identity:B,set:C,invert:A,determinant:q,multiply:g,rotate:r,scale:u,translate:x,fromRotation:y,fromScaling:t,fromTranslation:l,str:n,frob:c,add:a,subtract:b,multiplyScalar:k,multiplyScalarAndAdd:e,exactEquals:h,equals:w,mul:g,sub:b});d.add=a;d.copy=v;d.determinant=q;d.equals=w;d.exactEquals=h;d.frob=c;d.fromRotation=y;d.fromScaling=t;d.fromTranslation=l;d.identity=B;d.invert=
A;d.mat2d=D;d.mul=g;d.multiply=g;d.multiplyScalar=k;d.multiplyScalarAndAdd=e;d.rotate=r;d.scale=u;d.set=C;d.str=n;d.sub=b;d.subtract=b;d.translate=x})},"esri/chunks/mat2df64":function(){define(["exports"],function(d){function m(){return[1,0,0,1,0,0]}function v(q){return[q[0],q[1],q[2],q[3],q[4],q[5]]}function B(q,g,r,u,x,y){return[q,g,r,u,x,y]}function C(q,g){return new Float64Array(q,g,6)}var A=Object.freeze({__proto__:null,create:m,clone:v,fromValues:B,createView:C});d.clone=v;d.create=m;d.createView=
C;d.fromValues=B;d.mat2df64=A})},"esri/chunks/quat":function(){define("exports ./mat3f64 ./quatf64 ./vec3f64 ./common ./vec3 ./vec4".split(" "),function(d,m,v,B,C,A,q){function g(Q){Q[0]=0;Q[1]=0;Q[2]=0;Q[3]=1;return Q}function r(Q,da,ma){ma*=.5;const wa=Math.sin(ma);Q[0]=wa*da[0];Q[1]=wa*da[1];Q[2]=wa*da[2];Q[3]=Math.cos(ma);return Q}function u(Q,da){const ma=2*Math.acos(da[3]),wa=Math.sin(ma/2);wa>C.EPSILON?(Q[0]=da[0]/wa,Q[1]=da[1]/wa,Q[2]=da[2]/wa):(Q[0]=1,Q[1]=0,Q[2]=0);return ma}function x(Q,
da,ma){const wa=da[0],ya=da[1],xa=da[2];da=da[3];const G=ma[0],I=ma[1],aa=ma[2];ma=ma[3];Q[0]=wa*ma+da*G+ya*aa-xa*I;Q[1]=ya*ma+da*I+xa*G-wa*aa;Q[2]=xa*ma+da*aa+wa*I-ya*G;Q[3]=da*ma-wa*G-ya*I-xa*aa;return Q}function y(Q,da,ma){ma*=.5;const wa=da[0],ya=da[1],xa=da[2];da=da[3];const G=Math.sin(ma);ma=Math.cos(ma);Q[0]=wa*ma+da*G;Q[1]=ya*ma+xa*G;Q[2]=xa*ma-ya*G;Q[3]=da*ma-wa*G;return Q}function t(Q,da,ma){ma*=.5;const wa=da[0],ya=da[1],xa=da[2];da=da[3];const G=Math.sin(ma);ma=Math.cos(ma);Q[0]=wa*ma-
xa*G;Q[1]=ya*ma+da*G;Q[2]=xa*ma+wa*G;Q[3]=da*ma-ya*G;return Q}function l(Q,da,ma){ma*=.5;const wa=da[0],ya=da[1],xa=da[2];da=da[3];const G=Math.sin(ma);ma=Math.cos(ma);Q[0]=wa*ma+ya*G;Q[1]=ya*ma-wa*G;Q[2]=xa*ma+da*G;Q[3]=da*ma-xa*G;return Q}function n(Q,da){const ma=da[0],wa=da[1];da=da[2];Q[0]=ma;Q[1]=wa;Q[2]=da;Q[3]=Math.sqrt(Math.abs(1-ma*ma-wa*wa-da*da));return Q}function c(Q,da,ma,wa){const ya=da[0],xa=da[1],G=da[2];da=da[3];let I=ma[0],aa=ma[1],ca=ma[2];ma=ma[3];let ha;let ba;var ia=ya*I+xa*
aa+G*ca+da*ma;0>ia&&(ia=-ia,I=-I,aa=-aa,ca=-ca,ma=-ma);1-ia>C.EPSILON?(ha=Math.acos(ia),ba=Math.sin(ha),ia=Math.sin((1-wa)*ha)/ba,wa=Math.sin(wa*ha)/ba):ia=1-wa;Q[0]=ia*ya+wa*I;Q[1]=ia*xa+wa*aa;Q[2]=ia*G+wa*ca;Q[3]=ia*da+wa*ma;return Q}function a(Q){var da=C.RANDOM();const ma=C.RANDOM(),wa=C.RANDOM(),ya=Math.sqrt(1-da);da=Math.sqrt(da);Q[0]=ya*Math.sin(2*Math.PI*ma);Q[1]=ya*Math.cos(2*Math.PI*ma);Q[2]=da*Math.sin(2*Math.PI*wa);Q[3]=da*Math.cos(2*Math.PI*wa);return Q}function b(Q,da){const ma=da[0],
wa=da[1],ya=da[2];da=da[3];var xa=ma*ma+wa*wa+ya*ya+da*da;xa=xa?1/xa:0;Q[0]=-ma*xa;Q[1]=-wa*xa;Q[2]=-ya*xa;Q[3]=da*xa;return Q}function k(Q,da){Q[0]=-da[0];Q[1]=-da[1];Q[2]=-da[2];Q[3]=da[3];return Q}function e(Q,da){var ma=da[0]+da[4]+da[8];if(0<ma)ma=Math.sqrt(ma+1),Q[3]=.5*ma,ma=.5/ma,Q[0]=(da[5]-da[7])*ma,Q[1]=(da[6]-da[2])*ma,Q[2]=(da[1]-da[3])*ma;else{let wa=0;da[4]>da[0]&&(wa=1);da[8]>da[3*wa+wa]&&(wa=2);const ya=(wa+1)%3,xa=(wa+2)%3;ma=Math.sqrt(da[3*wa+wa]-da[3*ya+ya]-da[3*xa+xa]+1);Q[wa]=
.5*ma;ma=.5/ma;Q[3]=(da[3*ya+xa]-da[3*xa+ya])*ma;Q[ya]=(da[3*ya+wa]+da[3*wa+ya])*ma;Q[xa]=(da[3*xa+wa]+da[3*wa+xa])*ma}return Q}function h(Q,da,ma,wa){var ya=.5*Math.PI/180;da*=ya;ma*=ya;wa*=ya;ya=Math.sin(da);da=Math.cos(da);const xa=Math.sin(ma);ma=Math.cos(ma);const G=Math.sin(wa);wa=Math.cos(wa);Q[0]=ya*ma*wa-da*xa*G;Q[1]=da*xa*wa+ya*ma*G;Q[2]=da*ma*G-ya*xa*wa;Q[3]=da*ma*wa+ya*xa*G;return Q}function w(Q){return"quat("+Q[0]+", "+Q[1]+", "+Q[2]+", "+Q[3]+")"}function D(Q,da,ma){const wa=A.dot(da,
ma);if(-.999999>wa)return A.cross(Z,N,da),1E-6>A.len(Z)&&A.cross(Z,S,da),A.normalize(Z,Z),r(Q,Z,Math.PI),Q;if(.999999<wa)return Q[0]=0,Q[1]=0,Q[2]=0,Q[3]=1,Q;A.cross(Z,da,ma);Q[0]=Z[0];Q[1]=Z[1];Q[2]=Z[2];Q[3]=1+wa;return H(Q,Q)}function p(Q,da,ma,wa,ya,xa){c(O,da,ya,xa);c(J,ma,wa,xa);c(Q,O,J,2*xa*(1-xa));return Q}function z(Q,da,ma,wa){const ya=K;ya[0]=ma[0];ya[3]=ma[1];ya[6]=ma[2];ya[1]=wa[0];ya[4]=wa[1];ya[7]=wa[2];ya[2]=-da[0];ya[5]=-da[1];ya[8]=-da[2];return H(Q,e(Q,ya))}const f=q.copy,E=q.set,
F=q.add,L=q.scale,W=q.dot,M=q.lerp,P=q.length,V=q.squaredLength,H=q.normalize,R=q.exactEquals;q=q.equals;const Z=B.create(),N=B.fromValues(1,0,0),S=B.fromValues(0,1,0),O=v.create(),J=v.create(),K=m.create();m=Object.freeze({__proto__:null,identity:g,setAxisAngle:r,getAxisAngle:u,multiply:x,rotateX:y,rotateY:t,rotateZ:l,calculateW:n,slerp:c,random:a,invert:b,conjugate:k,fromMat3:e,fromEuler:h,str:w,copy:f,set:E,add:F,mul:x,scale:L,dot:W,lerp:M,length:P,len:P,squaredLength:V,sqrLen:V,normalize:H,exactEquals:R,
equals:q,rotationTo:D,sqlerp:p,setAxes:z});d.add=F;d.calculateW=n;d.conjugate=k;d.copy=f;d.dot=W;d.equals=q;d.exactEquals=R;d.fromEuler=h;d.fromMat3=e;d.getAxisAngle=u;d.identity=g;d.invert=b;d.len=P;d.length=P;d.lerp=M;d.mul=x;d.multiply=x;d.normalize=H;d.quat=m;d.random=a;d.rotateX=y;d.rotateY=t;d.rotateZ=l;d.rotationTo=D;d.scale=L;d.set=E;d.setAxes=z;d.setAxisAngle=r;d.slerp=c;d.sqlerp=p;d.sqrLen=V;d.squaredLength=V;d.str=w})},"esri/views/draw/support/createUtilsAsync":function(){define(["require",
"exports","../../../chunks/_rollupPluginBabelHelpers"],function(d,m,v){function B(){B=v._asyncToGenerator(function*(){C||(C=yield new Promise(function(A,q){d(["./createUtils"],A,q)}));return C});return B.apply(this,arguments)}let C=null;m.loadCreateUtils=function(){return B.apply(this,arguments)};Object.defineProperty(m,"__esModule",{value:!0})})},"esri/views/draw/support/layerUtils":function(){define(["exports"],function(d){d.addUniqueLayer=function(m,v,B){if(v&&m&&m.map){({map:m}=m);var C=m.layers.find(A=>
A===v);C||m.add(v,B);void 0!==B&&null!==B&&m.layers.reorder(C,B)}};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/interactive/snapping/SnappingManager":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Evented ../../../core/HandleOwner ../../../core/maybe ../../../core/promiseUtils ../../../core/watchUtils ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/Logger ../../../core/jsonMap ../../../core/accessorSupport/decorators/subclass ../../../core/accessorSupport/trackingUtils ../../../chunks/vec2 ../../../geometry/SpatialReference ./FeatureSnappingEngine ./SelfSnappingEngine ./SnappingOptions ./snappingUtils ./candidates/IntersectionSnappingCandidate".split(" "),
function(d,m,v,B,C,A,q,g,r,u,x,y,t,l,n,c,a,b,k,e,h,w){d.SnappingManager=function(D){function p(f){f=D.call(this,f)||this;f.options=new e;f.engines=[];f._currentMainCandidate=null;f._currentOtherActiveCandidates=[];return f}m._inheritsLoose(p,D);var z=p.prototype;z.initialize=function(){this.handles.add([n.reaction(()=>{const {effectiveFeatureEnabled:f,effectiveSelfEnabled:E,touchSensitivityMultiplier:F,distance:L}=this.options;return{effectiveFeatureEnabled:f,effectiveSelfEnabled:E,touchSensitivityMultiplier:F,
distance:L}},()=>{this.doneSnapping();this.emit("changed")}),this.watch("options",f=>{for(const E of this.engines)E.options=f},!0),g.init(this.view,"ready",f=>this.onViewReady(f),!0)])};z.destroy=function(){this.destroyEngines()};z.onViewReady=function(f){this.destroyEngines();if(f){var E,F;this.engines=[new k.SelfSnappingEngine({view:this.view,options:this.options}),new b.FeatureSnappingEngine({view:this.view,spatialReference:null!=(E=null==(F=this.view)?void 0:F.spatialReference)?E:a.WGS84,options:this.options})]}};
z.destroyEngines=function(){for(const f of this.engines)f.destroy();this.engines.length=0};z.snap=function(){var f=m._asyncToGenerator(function*(E,F,L){const W=F.coordinateHelper.fromPoint(E),M=yield this.fetchCandidates(W,F,L);return{get valid(){return!q.isAborted(L)},apply:()=>{const {snappedPoint:P,hints:V}=this.processCandidates(W,M,F);this.removeVisualization();A.isSome(F.visualizer)&&this.handles.add(F.visualizer.draw(V,{coordinateHelper:F.coordinateHelper,elevationInfo:F.elevationInfo,view:this.view}),
"visualization-handle");return P}}});return function(E,F,L){return f.apply(this,arguments)}}();z.update=function(f,E){this.removeVisualization();let F=f;const L=[];if(A.isSome(this._currentMainCandidate)){const W=E.coordinateHelper;f=W.fromPoint(f);const M=this._currentMainCandidate.constraint.closestTo(f);if(h.squareDistance(h.anyMapPointToScreenPoint(f,W,E.elevationInfo,this.view),h.anyMapPointToScreenPoint(M,W,E.elevationInfo,this.view))<this.squaredPointProximityThreshold(E.pointer)){F=W.createDehydratedPoint(M);
this._currentMainCandidate.targetPoint=M;L.push(...this._currentMainCandidate.hints);for(const P of this._currentOtherActiveCandidates)P.targetPoint=M,L.push(...P.hints)}else this._currentMainCandidate=null,this._currentOtherActiveCandidates=[]}A.isSome(E.visualizer)&&this.handles.add(E.visualizer.draw(L,{coordinateHelper:E.coordinateHelper,elevationInfo:E.elevationInfo,view:this.view}),"visualization-handle");return F};z.doneSnapping=function(){this.removeVisualization();this._currentMainCandidate=
null;this._currentOtherActiveCandidates=[]};z.removeVisualization=function(){this.handles.remove("visualization-handle")};z.fetchCandidates=function(){var f=m._asyncToGenerator(function*(E,F,L){return(yield Promise.all(this.engines.map(W=>W.fetchCandidates(E,F,L)))).flat()});return function(E,F,L){return f.apply(this,arguments)}}();z.processCandidates=function(f,E,F){if(1>E.length)return this.doneSnapping(),{snappedPoint:F.coordinateHelper.createDehydratedPoint(f),hints:[]};h.sortCandidatesInPlace(f,
E);const L=this._currentMainCandidate;if(A.isSome(L)){const W=this.findOldConstraintInNewCandidates(L,E);if(0<=W)if(E[W]instanceof w.IntersectionSnappingCandidate){if(c.squaredDistance(f,L.targetPoint)<this.squaredPointProximityThreshold(F.pointer))return this.updateSnappingCandidate(L,E,F)}else return this.intersectWithOtherCandidates(W,E,f,F)}return this.intersectWithOtherCandidates(0,E,f,F)};z.findOldConstraintInNewCandidates=function(f,E){return f instanceof w.IntersectionSnappingCandidate?0<=
this.findOldCandidateIndex(E,f.first)&&0<=this.findOldCandidateIndex(E,f.second)?0:-1:this.findOldCandidateIndex(E,f)};z.intersectWithOtherCandidates=function(f,E,F,L){const W=E[f],M=[],P=L.coordinateHelper;for(let V=0;V<E.length;++V){if(V===f)continue;const H=E[V];for(const R of W.constraint.intersect(H.constraint)){const Z=P.fromXYZ(R.intersection,W.targetPoint[2]);M.push([new w.IntersectionSnappingCandidate(P,Z,W,H),h.squareDistance(h.anyMapPointToScreenPoint(F,L.coordinateHelper,L.elevationInfo,
this.view),h.anyMapPointToScreenPoint(Z,L.coordinateHelper,L.elevationInfo,this.view))])}}return 0<M.length&&(M.sort((V,H)=>V[1]-H[1]),M[0][1]<this.squaredPointProximityThreshold(L.pointer))?this.updateSnappingCandidate(M[0][0],E,L):this.updateSnappingCandidate(W,E,L)};z.updateSnappingCandidate=function(f,E,F){this.doneSnapping();this._currentMainCandidate=f;const L=this._currentMainCandidate.targetPoint,W=[];W.push(...f.hints);for(const M of E){if(f instanceof w.IntersectionSnappingCandidate){if(M.constraint.objectEqual(f.first.constraint)||
M.constraint.objectEqual(f.second.constraint))continue}else if(M.constraint.objectEqual(f.constraint))continue;M.constraint.check(L)&&(M.targetPoint=L,this._currentOtherActiveCandidates.push(M),W.push(...M.hints))}return{snappedPoint:F.coordinateHelper.createDehydratedPoint(L),hints:W}};z.squaredPointProximityThreshold=function(f){return"touch"===f?this.squaredTouchProximityThreshold:this.squaredMouseProximityTreshold};z.findOldCandidateIndex=function(f,E){let F=-1;for(let L=0;L<f.length;++L)if(E.constraint.objectEqual(f[L].constraint)){F=
L;break}return F};m._createClass(p,[{key:"updating",get:function(){return this.engines.some(f=>f.updating)}},{key:"squaredMouseProximityTreshold",get:function(){return this.options.distance*this.options.distance}},{key:"squaredTouchProximityThreshold",get:function(){const {distance:f,touchSensitivityMultiplier:E}=this.options,F=f*E;return F*F}},{key:"test",get:function(){return{visualizationsActive:this.handles.has("visualization-handle"),engines:this.engines}}}]);return p}(B.EventedMixin(C.HandleOwner));
v.__decorate([r.property({constructOnly:!0})],d.SnappingManager.prototype,"view",void 0);v.__decorate([r.property()],d.SnappingManager.prototype,"options",void 0);v.__decorate([r.property({readOnly:!0})],d.SnappingManager.prototype,"updating",null);v.__decorate([r.property()],d.SnappingManager.prototype,"engines",void 0);v.__decorate([r.property()],d.SnappingManager.prototype,"squaredMouseProximityTreshold",null);v.__decorate([r.property()],d.SnappingManager.prototype,"squaredTouchProximityThreshold",
null);d.SnappingManager=v.__decorate([l.subclass("esri.views.interactive.snapping.SnappingManager")],d.SnappingManager);Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/interactive/snapping/FeatureSnappingEngine":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/HandleOwner ../../../core/Handles ../../../core/MapUtils ../../../core/maybe ../../../core/promiseUtils ../../../core/watchUtils ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/Logger ../../../core/jsonMap ../../../core/accessorSupport/decorators/subclass ../../../chunks/vec3f64 ./SnappingConstraint ./snappingUtils ./candidates/EdgeSnappingCandidate ./candidates/FeatureSnappingCandidate ./candidates/RightAngleSnappingCandidate".split(" "),
function(d,m,v,B,C,A,q,g,r,u,x,y,t,l,n,c,a,b,k,e,h,w){m.FeatureSnappingEngine=function(z){function f(F){F=z.call(this,F)||this;F.sourceModules={featureService:{module:null,loader:null},featureCollection:{module:null,loader:null},graphics:{module:null,loader:null}};return F}v._inheritsLoose(f,z);var E=f.prototype;E.initialize=function(){this.updatingHandles.add(this,"snappingSources",()=>{this.notifyChange("updating")},1);if(g.isSome(this.view)){var F;this.handles.add([null==(F=this.view.refreshManager)?
void 0:F.on("refresh",L=>{"interval"===L.trigger&&this.refreshSourceOfLayer(L.layerView.layer)}),this.view.on("layerview-create",L=>this.updateLayerView(L.layer,L.layerView)),this.view.on("layerview-destroy",L=>this.updateLayerView(L.layer,null))])}};E.refreshSourceOfLayer=function(F){for(const [,{snappingSource:L}]of this.snappingSources)L.layerSource.layer===F&&L.refresh()};E.updateLayerView=function(F,L){for(const [,W]of this.snappingSources)W.snappingSource.layerSource.layer===F&&(W.layerView=
L)};E.destroy=function(){this._set("options",null);for(const [,F]of this.snappingSources)F.destroy()};E.fetchCandidates=function(){var F=v._asyncToGenerator(function*(L,W,M){if(!this.options.effectiveFeatureEnabled)return[];var P=[];const V=this.computeScreeenSizeDistanceParameters(L,W),H={distance:V,point:L,coordinateHelper:W.coordinateHelper,types:this.types,filter:null};for(const [,{snappingSource:R,layerView:Z}]of this.snappingSources)!R.layerSource.enabled||g.isSome(Z)&&Z.suspended||P.push(R.fetchCandidates(H,
M).then(N=>N.filter(S=>!this.candidateIsExcluded(R,S,W.excludeFeature))));P=(yield r.eachAlwaysValues(P)).flat();this.addRightAngleCandidates(P,L,V,W);r.throwIfAborted(M);k.sortCandidatesInPlace(L,P);return P});return function(L,W,M){return F.apply(this,arguments)}}();E.addRightAngleCandidates=function(F,L,W,M){var P,V,H,R,Z,N,S,O;const J=g.isSome(M.vertexHandle)?null==(P=M.vertexHandle.right)?void 0:null==(V=P.right)?void 0:V.pos:g.isSome(M.geometry)&&"polygon"===M.geometry.type?null==(H=g.unwrap(null==
(R=M.geometry.editGeometry.components[0])?void 0:R.getFirstVertex()))?void 0:H.pos:null;P=g.isSome(M.vertexHandle)?null==(Z=M.vertexHandle.left)?void 0:null==(N=Z.left)?void 0:N.pos:g.isSome(M.geometry)?null==(S=g.unwrap(null==(O=M.geometry.editGeometry.components[0])?void 0:O.getLastVertex()))?void 0:S.pos:null;Z=F.length;for(N=0;N<Z;N++)this.addRightAngleCandidate(F[N],P,L,W,M,F),this.addRightAngleCandidate(F[N],J,L,W,M,F)};E.addRightAngleCandidate=function(F,L,W,M,P,V){if(!g.isNone(L)&&F instanceof
e.EdgeSnappingCandidate){var H=F.constraint.closestTo(L),R=(H[0]-W[0])/M.x;W=(H[1]-W[1])/M.y;1>=R*R+W*W&&(P=P.coordinateHelper,V.push(new w.RightAngleSnappingCandidate({coordinateHelper:P,targetPoint:H,otherVertex:L,otherVertexType:0,previousVertex:F.constraint.start,constraint:new b.RayConstraint(P,L,H),objectId:F.objectId})))}};E.computeScreeenSizeDistanceParameters=function(F,L){const W=this.options.distance*("touch"===L.pointer?this.options.touchSensitivityMultiplier:1);return g.isNone(this.view)?
{x:W,y:W}:"2d"===this.view.type?{x:W*this.view.resolution,y:W*this.view.resolution}:this.computeScreeenSizeDistanceParameters3D(F,W,this.view,L)};E.computeScreeenSizeDistanceParameters3D=function(F,L,W,M){const {coordinateHelper:P,elevationInfo:V}=M,H=W.state.camera.computeScreenPixelSizeAt(k.anyMapPointToRender(F,P,V,W,p))*W.renderCoordsHelper.unitInMeters/W.mapCoordsHelper.unitInMeters;L*=H;const R=this.computeScreenMagnitudeOfMapOffset(F,H,0,W,M);F=this.computeScreenMagnitudeOfMapOffset(F,0,H,
W,M);return{x:L/R,y:L/F}};E.computeScreenMagnitudeOfMapOffset=function(F,L,W,M,{coordinateHelper:P,elevationInfo:V}){const H=P.clone(F);H[0]+=L;H[1]+=W;F=k.anyMapPointToScreenPoint(F,P,V,M);P=k.anyMapPointToScreenPoint(H,P,V,M);M=P.x-F.x;P=P.y-F.y;return Math.sqrt(M*M+P*P)};E.candidateIsExcluded=function(F,L,W){if(g.isNone(W))return!1;L=this.getCandidateObjectId(L);if(g.isNone(L))return!1;F=F.layerSource.layer;return"graphics"===F.type?W.uid===L:W.sourceLayer===F&&W.attributes&&"objectIdField"in F?
W.attributes[F.objectIdField]===L:!1};E.getCandidateObjectId=function(F){return F instanceof h.FeatureSnappingCandidate?F.objectId:null};E.createSourceInfo=function(F){const L=this.createFeatureSnappingSourceType(F);if(g.isNone(L))return null;if("loading"in L)return this.updatingHandles.addPromise(L.loading.then(()=>{this.destroyed||this.notifyChange("snappingSources")})),null;const W=g.isSome(this.view)?this.view.allLayerViews.find(M=>M.layer===F.layer):null;return new D(L.source,W)};E.createFeatureSnappingSourceType=
function(F){switch(F.layer.type){case "feature":case "geojson":case "csv":case "wfs":return this.createFeatureSnappingSourceFeatureLayer(F);case "graphics":return this.createFeatureSnappingSourceGraphicsLayer(F)}return null};E.createFeatureSnappingSourceFeatureLayer=function(F){switch(F.layer.source.type){case "feature-layer":var L=this.getSourceModule("featureService");return g.isSome(L.module)?{source:new L.module.FeatureServiceSnappingSource({spatialReference:this.spatialReference,view:this.view,
layerSource:F})}:{loading:L.loader};case "memory":case "csv":case "geojson":case "wfs":if("mesh"!==F.layer.geometryType)return L=this.getSourceModule("featureCollection"),g.isSome(L.module)?{source:new L.module.FeatureCollectionSnappingSource({layerSource:F})}:{loading:L.loader}}return null};E.createFeatureSnappingSourceGraphicsLayer=function(F){const L=this.getSourceModule("graphics");return g.isSome(L.module)?{source:new L.module.GraphicsSnappingSource({spatialReference:this.spatialReference,view:this.view,
layerSource:F})}:{loading:L.loader}};E.getSourceModule=function(F){const L=this.sourceModules[F];return g.isNone(L.loader)?(F=this.loadSourceModule(F).then(W=>{L.module=W}),L.loader=F,{module:L.module,loader:F}):{module:L.module,loader:L.loader}};E.loadSourceModule=function(F){switch(F){case "featureService":return this.updatingHandles.addPromise(new Promise(function(L,W){d(["./featureSources/FeatureServiceSnappingSource"],L,W)}));case "featureCollection":return this.updatingHandles.addPromise(new Promise(function(L,
W){d(["./featureSources/FeatureCollectionSnappingSource"],L,W)}));case "graphics":return this.updatingHandles.addPromise(new Promise(function(L,W){d(["./featureSources/GraphicsSnappingSource"],L,W)}))}return null};v._createClass(f,[{key:"updating",get:function(){return q.someMap(this.snappingSources,({snappingSource:F})=>F.updating)||this.updatingHandles.updating}},{key:"snappingSources",get:function(){var F;const L=this._get("snappingSources")||new Map,W=new Map;if(null!=(F=this.options)&&F.featureSources)for(const P of this.options.featureSources.items){F=
P.layer.uid;var M=L.get(F);M?(L.delete(F),W.set(F,M)):P.layer.loaded?(M=this.createSourceInfo(P),g.isSome(M)&&W.set(F,M)):this.updatingHandles.addPromise(P.layer.load())}for(const [,P]of L)P.destroy();return W}},{key:"types",get:function(){return 3}}]);return f}(C.HandleOwner);B.__decorate([x.property({constructOnly:!0})],m.FeatureSnappingEngine.prototype,"spatialReference",void 0);B.__decorate([x.property({constructOnly:!0})],m.FeatureSnappingEngine.prototype,"view",void 0);B.__decorate([x.property()],
m.FeatureSnappingEngine.prototype,"options",void 0);B.__decorate([x.property({readOnly:!0})],m.FeatureSnappingEngine.prototype,"updating",null);B.__decorate([x.property({readOnly:!0})],m.FeatureSnappingEngine.prototype,"snappingSources",null);m.FeatureSnappingEngine=B.__decorate([c.subclass("esri.views.interactive.snapping.FeatureSnappingEngine")],m.FeatureSnappingEngine);let D=function(){function z(f,E){this.snappingSource=f;this.layerView=E;this.handles=new A;E=this.snappingSource.layerSource.layer;
"refresh"in E&&this.handles.add(E.on("refresh",()=>f.refresh()));this.handles.add([u.init(f,"updating",F=>f.layerSource.updating=F,!0),u.init(f,"availability",F=>f.layerSource.availability=F,!0)])}z.prototype.destroy=function(){this.snappingSource.destroy();this.handles.destroy()};return z}();const p=a.create();Object.defineProperty(m,"__esModule",{value:!0})})},"esri/views/interactive/snapping/SnappingConstraint":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/vec2 ../../../chunks/vec2f64 ./Settings ./snappingUtils ../../support/geometry2dUtils".split(" "),
function(d,m,v,B,C,A,q){let g=function(n){this.coordinateHelper=n},r=function(n){function c(b,k){b=n.call(this,b)||this;b.point=k;return b}m._inheritsLoose(c,n);var a=c.prototype;a.objectEqual=function(b){return b instanceof c?A.objectEqual(this.point,b.point):!1};a.check=function(b){return v.squaredDistance(b,this.point)<C.defaults.pointThreshold};a.closestTo=function(){return this.coordinateHelper.clone(this.point)};a.intersect=function(b){const k=[];b instanceof u?k.push(...q.intersectLineAndPoint({start:b.start,
end:b.end,type:b instanceof y?1:0},this.point)):b instanceof l&&k.push(...q.intersectCircleAndPoint(b.center,b.radius,this.point));return k.map(e=>new t(this.coordinateHelper,e,this,b))};return c}(g),u=function(n){function c(b,k,e){b=n.call(this,b)||this;b.start=k;b.end=e;return b}m._inheritsLoose(c,n);var a=c.prototype;a.objectEqual=function(b){return b instanceof c?A.objectEqual(this.start,b.start)&&A.objectEqual(this.end,b.end):!1};a.intersect=function(b){const k=[];b instanceof r?k.push(...q.intersectLineAndPoint({start:this.start,
end:this.end,type:this instanceof y?1:0},b.point)):b instanceof c?k.push(...q.intersectLineAndRay({start:this.start,end:this.end,type:this instanceof y?1:0},{start:b.start,end:b.end,type:b instanceof y?1:0})):b instanceof l&&k.push(...q.intersectLineLikeAndCircle({start:this.start,end:this.end,type:this instanceof y?1:0},b.center,b.radius));return k.map(e=>new t(this.coordinateHelper,e,this,b))};return c}(g),x=function(n){function c(b,k,e){b=n.call(this,b,k,e)||this;b.dir=B.create();b.p=B.create();
return b}m._inheritsLoose(c,n);var a=c.prototype;a.objectEqual=function(b){return b instanceof c?n.prototype.objectEqual.call(this,b):!1};a.check=function(b){v.subtract(this.dir,this.end,this.start);v.subtract(this.p,b,this.start);return 0<=v.dot(this.dir,this.p)?q.pointToLineDistance(b,this.start,this.end)<C.defaults.pointOnLineThreshold:!1};a.closestTo=function(b){const k=this.coordinateHelper.clone(b);q.projectPointToRay(k,b,this.start,this.end);return k};return c}(u),y=function(n){function c(b,
k,e){return n.call(this,b,k,e)||this}m._inheritsLoose(c,n);var a=c.prototype;a.objectEqual=function(b){return b instanceof c?n.prototype.objectEqual.call(this,b):!1};a.check=function(b){return q.pointToLineDistance(b,this.start,this.end)<C.defaults.pointOnLineThreshold};a.closestTo=function(b){const k=this.coordinateHelper.clone(b);q.projectPointToLine(k,b,this.start,this.end);return k};return c}(u),t=function(n){function c(b,k,e,h){b=n.call(this,b)||this;b.intersection=k;b.first=e;b.second=h;return b}
m._inheritsLoose(c,n);var a=c.prototype;a.objectEqual=function(b){return b instanceof c?this.first.objectEqual(b.first)&&this.second.objectEqual(b.second):!1};a.check=function(){return!1};a.closestTo=function(b){b=this.coordinateHelper.clone(b);v.copy(b,this.intersection);return b};a.intersect=function(){return[]};return c}(g),l=function(n){function c(b,k,e){b=n.call(this,b)||this;b.center=k;b.radius=e;return b}m._inheritsLoose(c,n);var a=c.prototype;a.objectEqual=function(b){return b instanceof c?
this.center[0]===b.center[0]&&this.center[1]===b.center[1]&&this.radius===b.radius:!1};a.check=function(){return!1};a.closestTo=function(b){const k=this.coordinateHelper.clone(b);q.projectPointToCircle(k,b,this.center,this.radius);return k};a.intersect=function(b){const k=[];b instanceof u?k.push(...q.intersectLineLikeAndCircle({start:b.start,end:b.end,type:b instanceof y?1:0},this.center,this.radius)):b instanceof r&&k.push(...q.intersectCircleAndPoint(this.center,this.radius,b.point));return k.map(e=>
new t(this.coordinateHelper,e,this,b))};return c}(g);d.IntersectionConstraint=t;d.LineConstraint=y;d.LineLikeConstraint=u;d.PlanarCircleConstraint=l;d.PointConstraint=r;d.RayConstraint=x;d.SnappingConstraint=g;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/interactive/snapping/candidates/EdgeSnappingCandidate":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../SnappingConstraint","./FeatureSnappingCandidate","../hints/LineSnappingHint"],function(d,m,v,
B,C){B=function(A){function q(g){return A.call(this,{...g,constraint:new v.LineConstraint(g.coordinateHelper,g.edgeStart,g.edgeEnd)})||this}m._inheritsLoose(q,A);m._createClass(q,[{key:"hints",get:function(){return[new C.LineSnappingHint(1,this.constraint.start,this.constraint.end)]}}]);return q}(B.FeatureSnappingCandidate);d.EdgeSnappingCandidate=B;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/interactive/snapping/candidates/FeatureSnappingCandidate":function(){define(["exports",
"../../../../chunks/_rollupPluginBabelHelpers","./SnappingCandidate"],function(d,m,v){v=function(B){function C({coordinateHelper:A,targetPoint:q,objectId:g,constraint:r}){A=B.call(this,A,q,r)||this;A.objectId=g;return A}m._inheritsLoose(C,B);return C}(v.SnappingCandidate);d.FeatureSnappingCandidate=v;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/interactive/snapping/candidates/SnappingCandidate":function(){define(["exports"],function(d){d.SnappingCandidate=function(m,v,B){this.coordinateHelper=
m;this.targetPoint=v;this.constraint=B};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/interactive/snapping/candidates/RightAngleSnappingCandidate":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","./SnappingCandidate","../hints/LineSnappingHint","../hints/RightAngleSnappingHint"],function(d,m,v,B,C){v=function(A){function q({coordinateHelper:g,targetPoint:r,constraint:u,previousVertex:x,otherVertex:y,otherVertexType:t,objectId:l}){g=A.call(this,g,r,u)||
this;g.previousVertex=x;g.otherVertex=y;g.otherVertexType=t;g.objectId=l;return g}m._inheritsLoose(q,A);m._createClass(q,[{key:"hints",get:function(){const g=this.previousVertex,r=1===this.otherVertexType?this.otherVertex:this.targetPoint,u=1===this.otherVertexType?this.targetPoint:this.otherVertex;return[new B.LineSnappingHint(0,r,u),new B.LineSnappingHint(1,g,r),new C.RightAngleSnappingHint(this.previousVertex,r,u)]}}]);return q}(v.SnappingCandidate);d.RightAngleSnappingCandidate=v;Object.defineProperty(d,
"__esModule",{value:!0})})},"esri/views/interactive/snapping/SelfSnappingEngine":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/Collection ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/Logger ../../../core/jsonMap ../../../core/accessorSupport/decorators/subclass ./LineSnapper ./ParallelLineSnapper ./RightAngleSnapper ./RightAngleTriangleSnapper ./snappingUtils".split(" "),
function(d,m,v,B,C,A,q,g,r,u,x,y,t,l,n,c){d.SelfSnappingEngine=function(a){function b(e){e=a.call(this,e)||this;e.updating=!1;e._snappers=new C;return e}m._inheritsLoose(b,a);var k=b.prototype;k.initialize=function(){this._snappers.push(new t.ParallelLineSnapper(this.view,this.options),new y.LineSnapper(this.view,this.options),new l.RightAngleSnapper(this.view,this.options),new n.RightAngleTriangleSnapper(this.view,this.options))};k.fetchCandidates=function(){var e=m._asyncToGenerator(function*(h,
w){if(!this.options.effectiveSelfEnabled)return[];const D=[];for(const p of this._snappers.items)D.push(...p.snap(h,w));c.sortCandidatesInPlace(h,D);return D});return function(h,w){return e.apply(this,arguments)}}();m._createClass(b,[{key:"options",set:function(e){this._set("options",e);for(const h of this._snappers)h.options=e}}]);return b}(B);v.__decorate([A.property({readOnly:!0})],d.SelfSnappingEngine.prototype,"updating",void 0);v.__decorate([A.property({constructOnly:!0})],d.SelfSnappingEngine.prototype,
"view",void 0);v.__decorate([A.property()],d.SelfSnappingEngine.prototype,"options",null);d.SelfSnappingEngine=v.__decorate([x.subclass("esri.views.interactive.snapping.SelfSnappingEngine")],d.SelfSnappingEngine);Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/interactive/snapping/LineSnapper":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../chunks/vec2f64 ./SnappingAlgorithm ./snappingUtils ./candidates/LineSnappingCandidate ../../support/geometry2dUtils".split(" "),
function(d,m,v,B,C,A,q,g){C=function(r){function u(){return r.apply(this,arguments)||this}m._inheritsLoose(u,r);var x=u.prototype;x.snapNewVertex=function(y,t){var l=t.geometry.editGeometry.components[0],n=l.edges.length;const c=[];if(1>n)return c;const a=A.anyMapPointToScreenPoint(y,t.coordinateHelper,t.elevationInfo,this.view);n=l=l.edges[n-1];do this.edgeExceedsShortLineThreshold(n,t)&&this._processCandidateProposal(n.left.pos,n.right.pos,y,a,t,c),n=n.left.left;while(n&&n!==l);return c};x.snapExistingVertex=
function(y,t){const l=[],n=v.unwrap(t.vertexHandle);var c=n.component;if(2>c.edges.length)return l;const a=A.anyMapPointToScreenPoint(y,t.coordinateHelper,t.elevationInfo,this.view);var b=n.left;const k=n.right;b&&k&&this.edgeExceedsShortLineThreshold(b,t)&&this.edgeExceedsShortLineThreshold(k,t)&&this._processCandidateProposal(b.left.pos,k.right.pos,y,a,t,l);b=c=c.edges[0];do b!==n.left&&b!==n.right&&this.edgeExceedsShortLineThreshold(b,t)&&this._processCandidateProposal(b.left.pos,b.right.pos,y,
a,t,l),b=b.right.right;while(b&&b!==c);return l};x._processCandidateProposal=function(y,t,l,n,c,a){const b=g.projectPointToLine(B.create(),l,y,t),k=c.coordinateHelper;l=k.fromXYZ(b,k.getZ(l,0));A.squareDistance(n,A.anyMapPointToScreenPoint(l,k,c.elevationInfo,this.view))<this.squaredProximityTreshold(c.pointer)&&a.push(new q.LineSnappingCandidate({coordinateHelper:c.coordinateHelper,lineStart:y,lineEnd:t,targetPoint:l}))};return u}(C.SnappingAlgorithm);d.LineSnapper=C;Object.defineProperty(d,"__esModule",
{value:!0})})},"esri/views/interactive/snapping/SnappingAlgorithm":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../../../core/maybe","./Settings","./snappingUtils"],function(d,m,v,B,C){let A=function(){function q(r,u){this.view=r;this.options=u;this.squaredShortLineThreshold=B.defaults.shortLineThreshold*B.defaults.shortLineThreshold}var g=q.prototype;g.snap=function(r,u){return v.isSome(u.vertexHandle)?"vertex"!==u.vertexHandle.type?[]:this.snapExistingVertex(r,u):this.snapNewVertex(r,
u)};g.edgeExceedsShortLineThreshold=function(r,u){return this.exceedsShortLineThreshold(r.left.pos,r.right.pos,u)};g.exceedsShortLineThreshold=function(r,u,{elevationInfo:x,geometry:y}){y=y.editGeometry.coordinateHelper;return 0===this.squaredShortLineThreshold||C.squareDistance(C.anyMapPointToScreenPoint(u,y,x,this.view),C.anyMapPointToScreenPoint(r,y,x,this.view))>this.squaredShortLineThreshold};g.squaredProximityTreshold=function(r){return"touch"===r?this.squaredTouchProximityThreshold:this.squaredMouseProximityTreshold};
m._createClass(q,[{key:"squaredMouseProximityTreshold",get:function(){return this.options.distance*this.options.distance}},{key:"squaredTouchProximityThreshold",get:function(){const {distance:r,touchSensitivityMultiplier:u}=this.options,x=r*u;return x*x}}]);return q}();d.SnappingAlgorithm=A;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/interactive/snapping/candidates/LineSnappingCandidate":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/mathUtils ../../../../chunks/vec2 ../../../../chunks/vec2f64 ../SnappingConstraint ./SnappingCandidate ../hints/LineSnappingHint".split(" "),
function(d,m,v,B,C,A,q,g){q=function(x){function y({coordinateHelper:t,lineStart:l,lineEnd:n,targetPoint:c}){t=x.call(this,t,c,new A.LineConstraint(t,l,n))||this;t.referenceLineHint=new g.LineSnappingHint(2,l,n);return t}m._inheritsLoose(y,x);y.prototype.lineEndClosestToTarget=function(){const t=this.constraint.start,l=this.constraint.end;return 0<v.sign(B.dot(B.subtract(u,l,t),B.subtract(r,this.targetPoint,t)))?l:t};m._createClass(y,[{key:"hints",get:function(){return[this.referenceLineHint,new g.LineSnappingHint(0,
this.lineEndClosestToTarget(),this.targetPoint)]}}]);return y}(q.SnappingCandidate);const r=C.create(),u=C.create();d.LineSnappingCandidate=q;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/interactive/snapping/ParallelLineSnapper":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../chunks/vec2 ../../../chunks/vec2f64 ./Settings ./SnappingAlgorithm ./snappingUtils ./candidates/ParallelLineSnappingCandidate ../../support/geometry2dUtils".split(" "),
function(d,m,v,B,C,A,q,g,r,u){q=function(x){function y(){var l=x.apply(this,arguments)||this;l._tmpProjection=C.create();return l}m._inheritsLoose(y,x);var t=y.prototype;t.snapNewVertex=function(l,n){var c=n.geometry.editGeometry.components[0],a=c.edges.length,b=c.vertices.length;const k=[];if(2>a)return k;const e=g.anyMapPointToScreenPoint(l,n.coordinateHelper,n.elevationInfo,this.view);b=c.vertices[b-1];const h=c.vertices[0];a=c=c.edges[a-1];do this.edgeExceedsShortLineThreshold(a,n)&&(this._checkEdgeForParalleLines(a,
b.pos,l,e,n,k),this._checkEdgeForParalleLines(a,h.pos,l,e,n,k)),a=a.left.left;while(a&&a!==c);return k};t.snapExistingVertex=function(l,n){const c=[],a=v.unwrap(n.vertexHandle);var b=a.component;if(3>b.edges.length)return c;const k=g.anyMapPointToScreenPoint(l,n.coordinateHelper,n.elevationInfo,this.view),e=a.left,h=a.right,w=b.vertices[0],D=b.vertices[b.vertices.length-1];let p=b=b.edges[0];do p!==e&&p!==h&&this.edgeExceedsShortLineThreshold(p,n)&&(e&&this._checkEdgeForParalleLines(p,e.left.pos,
l,k,n,c),h&&this._checkEdgeForParalleLines(p,h.right.pos,l,k,n,c),a===w?this._checkEdgeForParalleLines(p,D.pos,l,k,n,c):a===D&&this._checkEdgeForParalleLines(p,w.pos,l,k,n,c)),p=p.right.right;while(p&&p!==b);return c};t._checkEdgeForParalleLines=function(l,n,c,a,b,k){var e=l.left.pos;const h=l.right.pos;u.projectPointToLine(this._tmpProjection,n,e,h);B.squaredDistance(this._tmpProjection,n)<A.defaults.parallelLineThreshold||(u.projectPointToLine(this._tmpProjection,c,e,h,n),e=b.coordinateHelper,c=
e.fromXYZ(this._tmpProjection,e.getZ(c,0)),g.squareDistance(a,g.anyMapPointToScreenPoint(c,e,b.elevationInfo,this.view))<this.squaredProximityTreshold(b.pointer)&&!this.parallelToPreviousCandidate(l,k)&&k.push(new r.ParallelLineSnappingCandidate({coordinateHelper:e,referenceLine:l,lineStart:n,targetPoint:c})))};t.parallelToPreviousCandidate=function(l,n){const c=l.left.pos,a=l.right.pos;for(const b of n)if(u.projectPointToLine(this._tmpProjection,a,b.constraint.start,b.constraint.end,c),B.squaredDistance(this._tmpProjection,
a)<A.defaults.parallelLineThreshold)return b.addReferenceLine(l),!0;return!1};return y}(q.SnappingAlgorithm);d.ParallelLineSnapper=q;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/interactive/snapping/candidates/ParallelLineSnappingCandidate":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/vec2 ../SnappingConstraint ./SnappingCandidate ../hints/LineSnappingHint ../hints/ParallelSnappingHint".split(" "),function(d,m,v,B,C,A,q){C=function(g){function r({coordinateHelper:u,
referenceLine:x,lineStart:y,targetPoint:t}){const l=u.clone(y);v.subtract(l,v.add(l,l,x.right.pos),x.left.pos);u=g.call(this,u,t,new B.LineConstraint(u,y,l))||this;u._referenceLines=[{edge:x,fadeLeft:!0,fadeRight:!0}];return u}m._inheritsLoose(r,g);r.prototype.addReferenceLine=function(u){const x={edge:u,fadeLeft:!0,fadeRight:!0};this._referenceLines.forEach(y=>{u.right.right===y.edge&&(y.fadeLeft=!1,x.fadeRight=!1);u.left.left===y.edge&&(y.fadeRight=!1,x.fadeLeft=!1)});this._referenceLines.push(x)};
m._createClass(r,[{key:"hints",get:function(){return[new A.LineSnappingHint(0,this.constraint.start,this.targetPoint),new q.ParallelSnappingHint(this.constraint.start,this.targetPoint),...this._referenceLines.map(u=>new A.LineSnappingHint(1,u.edge.left.pos,u.edge.right.pos,u.fadeLeft,u.fadeRight))]}}]);return r}(C.SnappingCandidate);d.ParallelLineSnappingCandidate=C;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/interactive/snapping/RightAngleSnapper":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/mathUtils ../../../core/maybe ../../../chunks/vec2 ../../../chunks/vec2f64 ./SnappingAlgorithm ./SnappingConstraint ./snappingUtils ./candidates/RightAngleSnappingCandidate".split(" "),
function(d,m,v,B,C,A,q,g,r,u){q=function(x){function y(){var l=x.apply(this,arguments)||this;l._tmp=A.create();return l}m._inheritsLoose(y,x);var t=y.prototype;t.snapNewVertex=function(l,n){var c=n.geometry.editGeometry.components[0],a=c.vertices.length;const b=[];if(2>a)return b;const k=r.anyMapPointToScreenPoint(l,n.coordinateHelper,n.elevationInfo,this.view);a=c.vertices[a-1];this._checkForSnappingCandidate(b,a.left,a.pos,l,a.left.left.pos,a.pos,n,l,k);c=c.vertices[0];this._checkForSnappingCandidate(b,
c.right,c.pos,l,c.right.right.pos,c.pos,n,l,k);return b};t.snapExistingVertex=function(l,n){const c=[];var a=B.unwrap(n.vertexHandle),b=a.component;const k=b.vertices.length;if(3>k)return c;const e=r.anyMapPointToScreenPoint(l,n.coordinateHelper,n.elevationInfo,this.view);var h=a.left;a=a.right;const w=b.vertices[0];b=b.vertices[k-1];if(!h)return this._checkForSnappingCandidate(c,w.right.right.right,w.right.right.pos,l,w.right.right.right.right.pos,w.right.right.pos,n,l,e),c;if(!a)return this._checkForSnappingCandidate(c,
b.left.left.left,b.left.left.pos,l,b.left.left.left.left.pos,b.left.left.pos,n,l,e),c;h&&h.left.left&&(b=h.left.left,this._checkForSnappingCandidate(c,b,h.left.pos,l,b.left.pos,h.left.pos,n,l,e));a&&a.right.right&&(h=a.right.right,this._checkForSnappingCandidate(c,h,a.right.pos,l,h.right.pos,a.right.pos,n,l,e));return c};t._checkForSnappingCandidate=function(l,n,c,a,b,k,e,h,w){this.edgeExceedsShortLineThreshold(n,e)&&(C.subtract(this._tmp,n.right.pos,n.left.pos),n=A.fromValues(this._tmp[1],-this._tmp[0]),
c=C.dot(n,C.subtract(this._tmp,a,c))/C.squaredLength(n),a=e.coordinateHelper,h=a.fromXYZ(C.scaleAndAdd(A.create(),k,n,c),a.getZ(h,0)),r.squareDistance(w,r.anyMapPointToScreenPoint(h,a,e.elevationInfo,this.view))<this.squaredProximityTreshold(e.pointer)&&l.push(new u.RightAngleSnappingCandidate({coordinateHelper:a,targetPoint:h,constraint:new g.RayConstraint(a,k,C.scaleAndAdd(a.createNew(),k,n,v.sign(c))),previousVertex:b,otherVertex:k,otherVertexType:1})))};return y}(q.SnappingAlgorithm);d.RightAngleSnapper=
q;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/interactive/snapping/RightAngleTriangleSnapper":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../chunks/vec2 ../../../chunks/vec2f64 ./SnappingAlgorithm ./snappingUtils ./candidates/RightAngleTriangleSnappingCandidate ../../support/geometry2dUtils".split(" "),function(d,m,v,B,C,A,q,g,r){A=function(u){function x(){return u.apply(this,arguments)||this}m._inheritsLoose(x,u);var y=x.prototype;
y.snapNewVertex=function(t,l){const n=l.geometry.editGeometry.components[0],c=[],a=n.vertices.length;if("polygon"!==l.geometry.type||2>a)return c;this._processCandidateProposal(n.vertices[0].pos,n.vertices[a-1].pos,t,l,c);return c};y.snapExistingVertex=function(t,l){const n=[],c=v.unwrap(l.vertexHandle),a=c.component;if(2>a.edges.length||"polyline"===l.geometry.type&&(0===c.index||c.index===a.vertices.length-1))return n;this._processCandidateProposal(c.left.left.pos,c.right.right.pos,t,l,n);return n};
y._processCandidateProposal=function(t,l,n,c,a){if(this.exceedsShortLineThreshold(t,l,c)){var b=B.lerp(C.create(),t,l,.5),k=.5*B.distance(t,l);k=r.projectPointToCircle(C.create(),n,b,k);b=c.coordinateHelper;k=b.fromXYZ(k,b.getZ(n,0));n=q.anyMapPointToScreenPoint(n,b,c.elevationInfo,this.view);q.squareDistance(n,q.anyMapPointToScreenPoint(k,b,c.elevationInfo,this.view))<this.squaredProximityTreshold(c.pointer)&&a.push(new g.RightAngleTriangleSnappingCandidate({coordinateHelper:b,targetPoint:k,point1:t,
point2:l}))}};return x}(A.SnappingAlgorithm);d.RightAngleTriangleSnapper=A;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/interactive/snapping/candidates/RightAngleTriangleSnappingCandidate":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/vec2 ../../../../chunks/vec2f64 ../SnappingConstraint ./SnappingCandidate ../hints/LineSnappingHint ../hints/RightAngleSnappingHint".split(" "),function(d,m,v,B,C,A,q,g){A=function(u){function x({coordinateHelper:y,
targetPoint:t,point1:l,point2:n}){y=u.call(this,y,t,new C.PlanarCircleConstraint(y,v.lerp(r,l,n,.5),.5*v.distance(l,n)))||this;y.p1=l;y.p2=n;return y}m._inheritsLoose(x,u);m._createClass(x,[{key:"hints",get:function(){return[new q.LineSnappingHint(1,this.targetPoint,this.p1),new q.LineSnappingHint(1,this.targetPoint,this.p2),new g.RightAngleSnappingHint(this.p1,this.targetPoint,this.p2)]}}]);return x}(A.SnappingCandidate);const r=B.create();d.RightAngleTriangleSnappingCandidate=A;Object.defineProperty(d,
"__esModule",{value:!0})})},"esri/views/interactive/snapping/candidates/IntersectionSnappingCandidate":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../SnappingConstraint","./SnappingCandidate","../hints/IntersectionSnappingHint"],function(d,m,v,B,C){B=function(A){function q(g,r,u,x){g=A.call(this,g,r,new v.IntersectionConstraint(g,r,u.constraint,x.constraint))||this;g.first=u;g.second=x;return g}m._inheritsLoose(q,A);m._createClass(q,[{key:"hints",get:function(){this.first.targetPoint=
this.targetPoint;this.second.targetPoint=this.targetPoint;return[...this.first.hints,...this.second.hints,new C.IntersectionSnappingHint(this.targetPoint)]}}]);return q}(B.SnappingCandidate);d.IntersectionSnappingCandidate=B;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/widgets/Sketch/support/OperationHandle":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/compilerUtils ../../../core/Evented ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/Logger ../../../core/jsonMap ../../../core/accessorSupport/decorators/subclass".split(" "),
function(d,m,v,B,C,A,q,g,r,u,x){d.OperationHandle=function(y){function t(n){n=y.call(this,n)||this;n.cancelled=!1;n.history={undo:[],redo:[]};n.type=null;return n}m._inheritsLoose(t,y);var l=t.prototype;l.addToHistory=function(n){this.history.redo=[];this.history.undo.push(n)};l.resetHistory=function(){this.history.redo=[];this.history.undo=[]};l.canUndo=function(){return 0<this.history.undo.length};l.canRedo=function(){return 0<this.history.redo.length};l.complete=function(){this.reset();this.onEnd();
this.emit("complete")};l.cancel=function(){this.cancelled=!0;this.complete()};l.reset=function(){this.activeComponent.reset()};l.refreshComponent=function(){const n=this.activeComponent;n&&("box"!==n.type&&"reshape"!==n.type&&"graphic-mover"!==n.type||n.refresh())};m._createClass(t,[{key:"tool",get:function(){if(!this.activeComponent)return null;switch(this.activeComponent.type){case "graphic-mover":case "move-3d":return"move";case "box":case "transform-3d":return"transform";case "reshape":case "reshape-3d":return"reshape";
case "draw":case "draw-3d":break;default:B.neverReached(this.activeComponent)}return null}},{key:"undo",set:function(n){this._set("undo",()=>{this.canUndo()&&n()})}},{key:"redo",set:function(n){this._set("redo",()=>{this.canRedo()&&n()})}}]);return t}(C.EventedAccessor);v.__decorate([A.property()],d.OperationHandle.prototype,"activeComponent",void 0);v.__decorate([A.property()],d.OperationHandle.prototype,"cancelled",void 0);v.__decorate([A.property()],d.OperationHandle.prototype,"history",void 0);
v.__decorate([A.property()],d.OperationHandle.prototype,"tool",null);v.__decorate([A.property()],d.OperationHandle.prototype,"type",void 0);v.__decorate([A.property()],d.OperationHandle.prototype,"canUndo",null);v.__decorate([A.property()],d.OperationHandle.prototype,"canRedo",null);v.__decorate([A.property()],d.OperationHandle.prototype,"onEnd",void 0);v.__decorate([A.property()],d.OperationHandle.prototype,"undo",null);v.__decorate([A.property()],d.OperationHandle.prototype,"redo",null);v.__decorate([A.property()],
d.OperationHandle.prototype,"toggleTool",void 0);v.__decorate([A.property()],d.OperationHandle.prototype,"addToSelection",void 0);v.__decorate([A.property()],d.OperationHandle.prototype,"removeFromSelection",void 0);d.OperationHandle=v.__decorate([x.subclass("esri.widgets.Sketch.support.OperationHandle")],d.OperationHandle);Object.defineProperty(d,"__esModule",{value:!0})})},"esri/widgets/support/Selector":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Collection ../../core/HandleOwner ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ./Selector/SelectionOperation ./Selector/selectorUtils".split(" "),
function(d,m,v,B,C,A,q,g,r,u,x,y,t){v=function(l){function n(a){a=l.call(this,a)||this;a._defaultSelectionOptions={intersects:!0,overlaps:!0,contains:!0};a.candidates=null;a.options=null;a.view=null;return a}d._inheritsLoose(n,l);var c=n.prototype;c.draw=function(a){const {_defaultSelectionOptions:b,candidates:k,options:e,view:h}=this;return new y({candidates:k,options:{...a,selectionOptions:{...b,...e,...null==a?void 0:a.selectionOptions}},view:h})};c.selectionFrom=function(){var a=d._asyncToGenerator(function*(b,
k){const {_defaultSelectionOptions:e,candidates:h,options:w,view:D}=this,p=new B;yield t.updateSelection({selector:b,candidates:h,currentSelection:p,options:{...e,...w,...k},view:D});return p.toArray()});return function(b,k){return a.apply(this,arguments)}}();return n}(C.HandleOwnerMixin(v));m.__decorate([A.property()],v.prototype,"candidates",void 0);m.__decorate([A.property()],v.prototype,"options",void 0);m.__decorate([A.property({value:null})],v.prototype,"view",void 0);return v=m.__decorate([x.subclass("esri.widgets.support.Selector")],
v)})},"esri/widgets/support/Selector/SelectionOperation":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../symbols ../../../core/Collection ../../../core/Evented ../../../core/Handles ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/Logger ../../../core/jsonMap ../../../core/accessorSupport/decorators/subclass ../../../layers/GraphicsLayer ../../Sketch/SketchViewModel ./selectorUtils ../../../symbols/SimpleFillSymbol ../../../symbols/SimpleLineSymbol ../../../symbols/SimpleMarkerSymbol".split(" "),
function(d,m,v,B,C,A,q,g,r,u,x,y,t,l,n,c,a,b){v=function(k){function e({candidates:w,options:D,view:p}){var z=k.call(this)||this;z._activeOptions=null;z._dashedFillSymbol=new c({color:[0,0,0,0],outline:{style:"dash",color:[12,207,255],width:2}});z._dashedLineSymbol=new a({style:"dash",color:[12,207,255],width:2});z._defaultOptions={tool:"rectangle",createOptions:null,selectionOptions:{overlaps:!0,intersects:!0,contains:!1}};z._completed=!1;z._handles=new A;z._sketchViewModel=new l;z._sketchGraphicsLayer=
new t({listMode:"hide",internal:!0});z._transparentPointSymbol=new b({color:[0,0,0,0],outline:{style:"none",width:0}});z.candidates=null;z.geometry=null;z.options=null;z.selection=new B;z.view=null;z.candidates=w;z.options=D;z.view=p;const {_dashedFillSymbol:f,_dashedLineSymbol:E,_sketchViewModel:F,_sketchGraphicsLayer:L,_transparentPointSymbol:W}=d._assertThisInitialized(z);F.set({layer:L,view:z.view,activePointSymbol:W,activeLineSymbol:E,activeVertexSymbol:W,activeFillSymbol:f,pointSymbol:W,polygonSymbol:f,
polylineSymbol:E,vertexSymbol:W});z._handles.add([F.on("create",M=>z._onSketchEvent(M)),F.on(["undo","redo"],M=>z._onSketchEvent(M))]);return z}d._inheritsLoose(e,k);var h=e.prototype;h.initialize=function(){this._load()};h.destroy=function(){this._handles.destroy();this._handles=null};h.cancel=function(){this._sketchViewModel.cancel()};h._load=function(){var w=d._asyncToGenerator(function*(){yield this.view.whenReady();const {options:D}=this,{tool:p,createOptions:z}=this._activeOptions={...this._defaultOptions,
...D};this._sketchViewModel.create(p,z)});return function(){return w.apply(this,arguments)}}();h._onSketchEvent=function(w){const D="create"===w.type?w.graphic:w.graphics[0];this._processSelectionGeometry((null==D?void 0:D.geometry)||null,"create"===w.type&&"complete"===w.state,"create"===w.type&&"cancel"===w.state)};h._processSelectionGeometry=function(w,D,p){this._set("geometry",w);if(D||p)this._completed=!0;if(p)this._onComplete([],!0);else{var {_activeOptions:z,candidates:f,selection:E,view:F}=
this;n.updateSelection({selector:w,candidates:f,currentSelection:E,options:z.selectionOptions,view:F}).then(({added:L,removed:W})=>{D?this._onComplete(this.selection.toArray(),!1):(L.length||W.length)&&this.emit("selection-change",{added:L,removed:W,type:"selection-change"})})}};h._onComplete=function(w,D){this._handles.removeAll();this.notifyChange("state");this.emit("complete",{aborted:D,selection:w,type:"complete"})};d._createClass(e,[{key:"state",get:function(){const {_completed:w,_sketchViewModel:{state:D}}=
this;return w?"complete":"active"===D?"active":"disabled"}}]);return e}(C.EventedAccessor);m.__decorate([q.property()],v.prototype,"_completed",void 0);m.__decorate([q.property()],v.prototype,"candidates",void 0);m.__decorate([q.property({readOnly:!0})],v.prototype,"geometry",void 0);m.__decorate([q.property()],v.prototype,"options",void 0);m.__decorate([q.property({readOnly:!0})],v.prototype,"selection",void 0);m.__decorate([q.property({readOnly:!0})],v.prototype,"state",null);m.__decorate([q.property({value:null})],
v.prototype,"view",void 0);return v=m.__decorate([y.subclass("esri.widgets.support.Selector")],v)})},"esri/widgets/support/Selector/selectorUtils":function(){define(["require","exports","../../../chunks/_rollupPluginBabelHelpers"],function(d,m,v){function B(){return C.apply(this,arguments)}function C(){C=v._asyncToGenerator(function*(){return new Promise(function(r,u){d(["../../../geometry/geometryEngineJSON"],r,u)})});return C.apply(this,arguments)}function A(){return q.apply(this,arguments)}function q(){q=
v._asyncToGenerator(function*(){return B().then(({contains:r,intersects:u,overlaps:x,simplify:y})=>({contains:r,intersects:u,overlaps:x,simplify:y}))});return q.apply(this,arguments)}function g(){g=v._asyncToGenerator(function*(r){const {selector:u,candidates:x,currentSelection:y,options:t,view:l}=r;if(!(x&&x.length&&y&&l))return{added:[],removed:[]};const {overlaps:n,intersects:c,contains:a}=t,{spatialReference:b}=l;if(!u)return{added:[],removed:y.removeAll()};const k=yield A(),e=[],h=[];x.forEach(w=>
{var D=w.geometry;const p=n&&!!k.overlaps(b,u,D),z=c&&!!k.intersects(b,u,D);D=a&&!!k.contains(b,u,D);const f=y.includes(w);p||z||D?!f&&e.push(w):f&&h.push(w)});y.removeMany(h);y.addMany(e);return{added:e,removed:h}});return g.apply(this,arguments)}m.getGeometryEngineOperations=A;m.importGeometryEngine=B;m.updateSelection=function(r){return g.apply(this,arguments)};Object.defineProperty(m,"__esModule",{value:!0})})},"*noref":1}});
define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../intl ../core/Collection ../core/events ../core/handleUtils ../core/maybe ../core/accessorSupport/decorators/aliasOf ../core/has ../core/accessorSupport/decorators/cast ../core/Logger ../core/jsonMap ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ../views/interactive/snapping/SnappingOptions ./Widget ./Sketch/SketchViewModel ./support/Selector ./support/widgetUtils ./support/decorators/messageBundle ./support/decorators/vmEvent ./support/jsxFactory ../intl/substitute".split(" "),function(d,
m,v,B,C,A,q,g,r,u,x,y,t,l,n,c,a,b,k,e,h,w,D){const p={createTools:{point:!0,polyline:!0,polygon:!0,rectangle:!0,circle:!0},selectionTools:{"rectangle-selection":!0,"lasso-selection":!0},undoRedoMenu:!0,settingsMenu:!0};v=function(z){function f(F,L){L=z.call(this,F,L)||this;L._activeCreateOptions=null;L._activeSelectionInfo=null;L._defaultViewModel=null;L._viewModelHandlesGroup=null;L._menuOpen=!1;L._selector=new b;L.availableCreateTools=["point","polyline","polygon","rectangle","circle"];L.createGraphic=
null;L.creationMode="continuous";L.defaultCreateOptions=null;L.defaultUpdateOptions=null;L.iconClass="esri-icon-edit";L.label=void 0;L.layer=null;L.layout="horizontal";L.messages=null;L.snappingOptions=new n;L.updateGraphics=new B;L.view=null;L.visibleElements={...p};L._activateCreateTool=L._activateCreateTool.bind(d._assertThisInitialized(L));null!=F&&F.viewModel||(L._defaultViewModel=new a,L.viewModel=L._defaultViewModel);return L}d._inheritsLoose(f,z);var E=f.prototype;E.initialize=function(){this._selector.view=
this.view};E.destroy=function(){this._cleanupViewModel()};E.castVisibleElements=function(F){return{...p,...F,createTools:{...p.createTools,...null==F?void 0:F.createTools},selectionTools:{...p.selectionTools,...null==F?void 0:F.selectionTools}}};E.create=function(F,L){this._activeCreateOptions=L||null;this.viewModel.create(F,L)};E.update=function(F,L){return this.viewModel.update(F,L)};E.complete=function(){};E.cancel=function(){this._cancelSelectionOperation();this.viewModel.cancel()};E.undo=function(){var F;
this.viewModel.undo();null==(F=this.view)?void 0:F.focus()};E.redo=function(){var F;this.viewModel.redo();null==(F=this.view)?void 0:F.focus()};E.delete=function(){};E.render=function(){const {label:F,layout:L,viewModel:{state:W}}=this;return w.tsx("div",{"aria-label":F,class:this.classes("esri-sketch","esri-widget",{["esri-disabled"]:"disabled"===W,["esri-sketch--vertical"]:"vertical"===L})},w.tsx("div",{role:"toolbar",class:"esri-sketch__panel"},this.renderTopPanelContents()),w.tsx("div",{class:this.classes("esri-sketch__panel",
"esri-sketch__info-panel")},this.renderInfoPanelContents()))};E.renderTopPanelContents=function(){const F=this.classes("esri-sketch__section","esri-sketch__tool-section"),{availableCreateTools:L,visibleElements:W}=this;return[w.tsx("div",{role:"menu",key:"selection-button-container",class:F},this.renderSelectionTools()),L&&L.length?w.tsx("div",{role:"menu",class:F},this.renderDrawButtons()):null,W.undoRedoMenu?w.tsx("div",{role:"menu",key:"undo-redo-menu-button-container",class:F},this.renderUndoRedoMenuButtons()):
null,W.settingsMenu?w.tsx("div",{key:"settings-menu-button-container",class:"esri-sketch__section"},this.renderSettingsMenuButton()):null]};E.renderInfoPanelContents=function(){if(this._menuOpen)return this.renderSettingsMenu();if(this.updateGraphics.length)return[w.tsx("div",{class:this.classes("esri-sketch__section","esri-sketch__info-section","esri-sketch__info-count-section"),key:"feature-count-container"},this.renderFeatureCount()),w.tsx("div",{class:this.classes("esri-sketch__section","esri-sketch__info-section"),
key:"delete-button-container"},this.renderDeleteButton())]};E.renderSettingsMenu=function(){const {settings:F}=this.messages;return[w.tsx("div",{role:"menu",class:"esri-sketch__menu-container",key:"settings-menu-container"},w.tsx("header",{class:"esri-sketch__menu-header",key:"settings-menu-header"},w.tsx("span",{class:"esri-sketch__menu-title"},F)),w.tsx("div",{class:"esri-sketch__menu-content",key:"settings-menu-content","aria-label":F},w.tsx("div",{class:"esri-sketch__menu-item-wrapper"},this.renderSnappingToggleMenuItem())))]};
E.renderSnappingToggleMenuItem=function(){var F;return w.tsx("div",{class:"esri-sketch__menu-item","aria-label":null==(F=this.messages)?void 0:F.snappingEnabled,key:"sketch-snapping-action-toggle",role:"menuitem"},this.renderSnappingToggle())};E.renderSnappingToggle=function(){const {messages:{snappingEnabled:F},viewModel:{snappingOptions:{enabled:L}}}=this,W=this.classes("esri-sketch__action-toggle",{["esri-sketch__action-toggle--on"]:L});return w.tsx("div",{bind:this,role:"button",onclick:this._onSnappingToggleClick,
onkeydown:this._onSnappingToggleKeyDown,class:W,tabindex:"0",title:F,"aria-label":F},this.renderActionIcon(),w.tsx("span",{class:"esri-sketch__item-action-title"},F))};E._onSnappingToggleKeyDown=function(F){const L=C.eventKey(F);if("Enter"===L||" "===L)F.preventDefault(),this._toggleSnapping()};E._onSnappingToggleClick=function(F){F.stopPropagation();this._toggleSnapping()};E.renderActionIcon=function(){return w.tsx("span",{key:"action-icon","aria-hidden":"true",class:this.classes("esri-sketch__item-action-icon")})};
E.renderFeatureCount=function(){const {layout:F,messages:L,updateGraphics:{length:W}}=this,M=D.substitute(1===W?L.featureCount:L.featuresCount,{count:W});return w.tsx("div",{class:"esri-sketch__feature-count-badge","aria-label":M},w.tsx("span",{class:"esri-sketch__feature-count-number"},"vertical"===F?W:M))};E.renderDeleteButton=function(){const F=this.messages.deleteFeature;return w.tsx("button",{"aria-label":F,bind:this,class:this.classes("esri-sketch__button","esri-icon-trash"),onclick:this.delete,
title:F,type:"button"})};E.renderSelectionTools=function(){return[this.renderDefaultSelectionButton(),this.renderRectangleSelectionButton(),this.renderLassoSelectionButton()]};E.renderDefaultSelectionButton=function(){if(this.viewModel.updateOnGraphicClick){var F=this.messages.selectFeature;return w.tsx("button",{"aria-label":F,bind:this,class:this.classes("esri-sketch__button","esri-icon-cursor",{["esri-sketch__button--selected"]:"ready"===this.state}),onclick:this.cancel,role:"menuitemradio",title:F})}};
E.renderRectangleSelectionButton=function(){var F,L;if("2d"===(null==(F=this.view)?void 0:F.type)&&this.visibleElements.selectionTools["rectangle-selection"])return F=this.messages.selectRectangle,w.tsx("button",{"aria-label":F,bind:this,class:this.classes("esri-sketch__button","esri-icon-cursor-marquee",{["esri-sketch__button--selected"]:"rectangle-selection"===(null==(L=this._activeSelectionInfo)?void 0:L.tool)}),onclick:this._activateRectangleSelectTool,role:"menuitemradio",title:F})};E.renderLassoSelectionButton=
function(){var F,L;if("2d"===(null==(F=this.view)?void 0:F.type)&&this.visibleElements.selectionTools["lasso-selection"])return F=this.messages.selectLasso,w.tsx("button",{"aria-label":F,bind:this,class:this.classes("esri-sketch__button","esri-icon-lasso",{["esri-sketch__button--selected"]:"lasso-selection"===(null==(L=this._activeSelectionInfo)?void 0:L.tool)}),onclick:this._activateLassoSelectTool,role:"menuitemradio",title:F})};E.renderDrawButtons=function(){const F=this.visibleElements.createTools;
return this.availableCreateTools.map(L=>{if("point"===L&&F.point)return this.renderPointButton();if("polyline"===L&&F.polyline)return this.renderPolylineButton();if("polygon"===L&&F.polygon)return this.renderPolygonButton();if("rectangle"===L&&F.rectangle)return this.renderRectangleButton();if("circle"===L&&F.circle)return this.renderCircleButton()})};E.renderPointButton=function(){const F=this.messages.drawPoint,L=["esri-sketch__button","esri-icon-map-pin"];"point"===this.activeTool&&L.push("esri-sketch__button--selected");
return w.tsx("button",{"aria-label":F,bind:this,class:this.classes(L),"data-tool-name":"point",onclick:this._activateCreateTool,role:"menuitemradio",title:F,type:"button"})};E.renderPolygonButton=function(){const F=this.messages.drawPolygon,L=["esri-sketch__button","esri-icon-polygon"];"polygon"===this.activeTool&&L.push("esri-sketch__button--selected");return w.tsx("button",{"aria-label":F,bind:this,class:this.classes(L),"data-tool-name":"polygon",onclick:this._activateCreateTool,role:"menuitemradio",
title:F,type:"button"})};E.renderPolylineButton=function(){const F=this.messages.drawPolyline,L=["esri-sketch__button","esri-icon-polyline"];"polyline"===this.activeTool&&L.push("esri-sketch__button--selected");return w.tsx("button",{"aria-label":F,bind:this,class:this.classes(L),"data-tool-name":"polyline",onclick:this._activateCreateTool,role:"menuitemradio",title:F,type:"button"})};E.renderCircleButton=function(){const F=this.messages.drawCircle,L=["esri-sketch__button","esri-icon-radio-unchecked"];
"circle"===this.activeTool&&L.push("esri-sketch__button--selected");return w.tsx("button",{"aria-label":F,bind:this,class:this.classes(L),"data-tool-name":"circle",onclick:this._activateCreateTool,role:"menuitemradio",title:F,type:"button"})};E.renderRectangleButton=function(){const F=this.messages.drawRectangle,L=["esri-sketch__button","esri-icon-checkbox-unchecked"];"rectangle"===this.activeTool&&L.push("esri-sketch__button--selected");return w.tsx("button",{"aria-label":F,bind:this,class:this.classes(L),
"data-tool-name":"rectangle",onclick:this._activateCreateTool,role:"menuitemradio",title:F,type:"button"})};E.renderUndoRedoMenuButtons=function(){return[this.renderUndoButton(),this.renderRedoButton()]};E.renderUndoButton=function(){const F=this.messages.undo,L=!this.viewModel.canUndo(),W=k.isRTL()?"esri-icon-redo":"esri-icon-undo";return w.tsx("button",{"aria-label":F,bind:this,class:this.classes("esri-sketch__button",W),disabled:L,onclick:this.undo,title:F,type:"button"})};E.renderRedoButton=function(){const F=
this.messages.redo,L=!this.viewModel.canRedo(),W=k.isRTL()?"esri-icon-undo":"esri-icon-redo";return w.tsx("button",{"aria-label":F,bind:this,class:this.classes("esri-sketch__button",W),disabled:L,onclick:this.redo,title:F,type:"button"})};E.renderSettingsMenuButton=function(){const F=this.messages.settings,L=["esri-sketch__button","esri-icon-settings"];this._menuOpen&&L.push("esri-sketch__button--selected");return w.tsx("button",{"aria-label":F,bind:this,class:this.classes(L),onclick:this._toggleMenu,
title:F,type:"button"})};E._cancelSelectionOperation=function(){var F,L;null==(F=this._activeSelectionInfo)?void 0:null==(L=F.operation)?void 0:L.cancel();this._activeSelectionInfo=null;this._selector.candidates=null};E._activateCreateTool=function(F){F=F.target.getAttribute("data-tool-name");this.activeTool===F?this.cancel():(this._activeSelectionInfo&&this._cancelSelectionOperation(),this.create(F))};E._onCreateOperation=function(F){if("complete"===F.state){var {creationMode:L}=this,{type:W}=F;
if("create"===W){const {tool:M,graphic:P}=F;F=this._activeCreateOptions;this._activeCreateOptions=null;"continuous"===L?this.create(M,F):"update"===L&&this.update([P])}}};E._toggleMenu=function(){this._menuOpen=!this._menuOpen;this.scheduleRender()};E._toggleSnapping=function(){const {viewModel:{snappingOptions:F}}=this;this.viewModel.snappingOptions.enabled=!F.enabled;this.scheduleRender()};E._onSelectionOperationComplete=function(F){const {viewModel:{defaultUpdateOptions:L}}=this,{selection:W}=
F;this._activeSelectionInfo=null;!F.aborted&&W.length&&(F=L.tool,this.update(W,{...L,tool:1<W.length&&"reshape"===F?"transform":F}));this.notifyChange("state")};E._activateRectangleSelectTool=function(){if(this._activeSelectionInfo){var F=this._activeSelectionInfo.tool;this._cancelSelectionOperation();if("rectangle-selection"===F)return}else"active"===this.state&&this.cancel();this._selector.candidates=this._getSelectionCandidates();F=this._selector.draw({tool:"rectangle"});F.once("complete",L=>this._onSelectionOperationComplete(L));
this._activeSelectionInfo={tool:"rectangle-selection",operation:F}};E._activateLassoSelectTool=function(){if(this._activeSelectionInfo){var F=this._activeSelectionInfo.tool;this._cancelSelectionOperation();if("lasso-selection"===F)return}else"active"===this.state&&this.cancel();this._selector.candidates=this._getSelectionCandidates();F=this._selector.draw({tool:"polygon",createOptions:{mode:"freehand"}});F.once("complete",L=>this._onSelectionOperationComplete(L));this._activeSelectionInfo={tool:"lasso-selection",
operation:F}};E._getSelectionCandidates=function(){var F,L;return(null==(F=this.layer)?void 0:null==(L=F.graphics)?void 0:L.toArray())||[]};E._cleanupViewModel=function(){this._defaultViewModel=q.destroyMaybe(this._defaultViewModel);this._viewModelHandlesGroup=q.removeMaybe(this._viewModelHandlesGroup)};d._createClass(f,[{key:"activeTool",get:function(){var F;return(null==(F=this._activeSelectionInfo)?void 0:F.tool)||this.viewModel.activeTool}},{key:"state",get:function(){return this._activeSelectionInfo?
"active":this.viewModel.state}},{key:"viewModel",set:function(F){F!==this._get("viewModel")&&((q.isNone(this._defaultViewModel)||this._defaultViewModel!==F)&&this._cleanupViewModel(),this._set("viewModel",F),this.viewModel&&(this._viewModelHandlesGroup=A.handlesGroup([this.viewModel.on("create",L=>{this.scheduleRender();this._onCreateOperation(L)}),this.viewModel.on("update",()=>this.scheduleRender()),this.viewModel.on("delete",L=>this.emit("delete",L)),this.viewModel.on("undo",()=>this.scheduleRender()),
this.viewModel.on("redo",()=>this.scheduleRender()),this.viewModel.watch("view",L=>this._selector.set({view:L})),this.viewModel.watch("state",()=>this.notifyChange("state"))])))}}]);return f}(c);m.__decorate([t.property()],v.prototype,"_activeSelectionInfo",void 0);m.__decorate([t.property()],v.prototype,"activeTool",null);m.__decorate([t.property({cast:z=>{if(!z||!z.length)return null;const f=new Set(["point","polyline","polygon","rectangle","circle"]);return z.filter(E=>f.has(E))}})],v.prototype,
"availableCreateTools",void 0);m.__decorate([g.aliasOf("viewModel.createGraphic")],v.prototype,"createGraphic",void 0);m.__decorate([t.property()],v.prototype,"creationMode",void 0);m.__decorate([g.aliasOf("viewModel.defaultCreateOptions")],v.prototype,"defaultCreateOptions",void 0);m.__decorate([g.aliasOf("viewModel.defaultUpdateOptions")],v.prototype,"defaultUpdateOptions",void 0);m.__decorate([t.property()],v.prototype,"iconClass",void 0);m.__decorate([t.property({aliasOf:{source:"messages.widgetLabel",
overridable:!0}})],v.prototype,"label",void 0);m.__decorate([g.aliasOf("viewModel.layer")],v.prototype,"layer",void 0);m.__decorate([t.property({type:["horizontal","vertical"]})],v.prototype,"layout",void 0);m.__decorate([t.property(),e.messageBundle("esri/widgets/Sketch/t9n/Sketch")],v.prototype,"messages",void 0);m.__decorate([g.aliasOf("viewModel.snappingOptions")],v.prototype,"snappingOptions",void 0);m.__decorate([t.property()],v.prototype,"state",null);m.__decorate([g.aliasOf("viewModel.updateGraphics")],
v.prototype,"updateGraphics",void 0);m.__decorate([g.aliasOf("viewModel.view")],v.prototype,"view",void 0);m.__decorate([t.property(),h.vmEvent(["create","update","undo","redo"])],v.prototype,"viewModel",null);m.__decorate([t.property()],v.prototype,"visibleElements",void 0);m.__decorate([u.cast("visibleElements")],v.prototype,"castVisibleElements",null);m.__decorate([g.aliasOf("viewModel.complete")],v.prototype,"complete",null);m.__decorate([g.aliasOf("viewModel.delete")],v.prototype,"delete",null);
return v=m.__decorate([l.subclass("esri.widgets.Sketch")],v)});