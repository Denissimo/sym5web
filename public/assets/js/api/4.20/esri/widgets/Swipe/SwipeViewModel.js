// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.20/esri/copyright.txt for details.
//>>built
define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Collection ../../core/compilerUtils ../../core/Handles ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../layers/Layer ../../views/layers/support/ClipRect".split(" "),function(p,d,c,x,y,z,v,f,D,E,F,G,A,B,q){function C(r,g){g=10**g;return Math.round(r*
g)/g}const t=x.ofType(B),u={left:0,right:0,top:0,bottom:0};c=function(r){function g(a){a=r.call(this,a)||this;a._handles=new z;a._leadingClips=new Map;a._trailingClips=new Map;a.direction="horizontal";a.leadingLayers=new t;a.max=100;a.min=0;a.precision=4;a.step=.5;a.stepMultiplier=10;a.trailingLayers=new t;a.view=null;return a}p._inheritsLoose(g,r);var e=g.prototype;e.initialize=function(){this._handles.add([v.init(this,["view","view.ready","position","direction"],()=>this._clipLayers()),v.on(this,
"leadingLayers","change",()=>this._clipLeadingLayers()),v.on(this,"trailingLayers","change",()=>this._clipTrailingLayers())])};e.destroy=function(){this._removeExistingClips();this._handles.destroy();this._handles=null};e._clipLayers=function(){this._clipLeadingLayers();this._clipTrailingLayers()};e._clipLeadingLayers=function(){this._removeClips("leading");const {leadingLayers:a}=this;a.forEach(b=>this._clipLayer({layer:b,type:"leading"}))};e._clipTrailingLayers=function(){this._removeClips("trailing");
const {trailingLayers:a}=this;a.forEach(b=>this._clipLayer({layer:b,type:"trailing"}))};e._getLayerView=function(){var a=p._asyncToGenerator(function*(b){const {view:h}=this;if(!b||!h)return null;b=yield y.typeCast(h)().whenLayerView(b);return"clips"in b?b:null});return function(b){return a.apply(this,arguments)}}();e._getVerticalClipRect=function(a){const {position:b}=this;return"leading"===a?new q({...u,bottom:`${100-b}%`}):"trailing"===a?new q({...u,top:`${b}%`}):null};e._getHorizontalClipRect=
function(a){const {position:b}=this;return"leading"===a?new q({...u,right:`${100-b}%`}):"trailing"===a?new q({...u,left:`${b}%`}):null};e._getClipRect=function(a){const {direction:b}=this;return"vertical"===b?this._getVerticalClipRect(a):"horizontal"===b?this._getHorizontalClipRect(a):null};e._clipLayer=function(){var a=p._asyncToGenerator(function*(b){const {_leadingClips:h,_trailingClips:l}=this,{layer:m,type:w}=b;b="trailing"===w?l:"leading"===w?h:null;const k=yield this._getLayerView(m);if(k&&
"clips"in k&&b&&k.hasOwnProperty("clips")){var n=b.get(k);n&&k.clips.remove(n);if(n=this._getClipRect(w))b.set(k,n),k.clips.add(n)}});return function(b){return a.apply(this,arguments)}}();e._removeClips=function(a){const {_leadingClips:b,_trailingClips:h}=this;if(a="trailing"===a?h:"leading"===a?b:null)a.forEach((l,m)=>{m&&m.hasOwnProperty("clips")&&m.clips.remove(l)}),a.clear()};e._removeExistingClips=function(){this._removeClips("leading");this._removeClips("trailing")};p._createClass(g,[{key:"position",
get:function(){return 25},set:function(a){const {precision:b,min:h,max:l}=this;this._set("position",C(Math.max(Math.min(a,l),h),b))}},{key:"state",get:function(){const {view:a}=this;return a&&a.ready?"ready":"disabled"}}]);return g}(c);d.__decorate([f.property()],c.prototype,"direction",void 0);d.__decorate([f.property({type:t})],c.prototype,"leadingLayers",void 0);d.__decorate([f.property({readOnly:!0})],c.prototype,"max",void 0);d.__decorate([f.property({readOnly:!0})],c.prototype,"min",void 0);
d.__decorate([f.property()],c.prototype,"position",null);d.__decorate([f.property()],c.prototype,"precision",void 0);d.__decorate([f.property({readOnly:!0})],c.prototype,"state",null);d.__decorate([f.property()],c.prototype,"step",void 0);d.__decorate([f.property()],c.prototype,"stepMultiplier",void 0);d.__decorate([f.property({type:t})],c.prototype,"trailingLayers",void 0);d.__decorate([f.property()],c.prototype,"view",void 0);return c=d.__decorate([A.subclass("esri.widgets.Swipe.SwipeViewModel")],
c)});