// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.20/esri/copyright.txt for details.
//>>built
define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/arrayUtils ../../core/Collection ../../core/collectionUtils ../../core/Handles ../../core/maybe ../../core/promiseUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ./support/layerUtils ./support/validation".split(" "),function(k,c,b,p,l,q,r,m,t,d,w,x,y,z,u,v,g){b=
function(n){function h(a){a=n.call(this,a)||this;a.state="disabled";a._handles=new r;a._domainInfo=g.getDomainInfo([]);a._loadLayers=v.createLoadLayersFunction();a.layers=new l;return a}k._inheritsLoose(h,n);var e=h.prototype;e.initialize=function(){this._handles.add(this.layers.on("change",()=>this._onLayersChange()));this._onLayersChange()};e.destroy=function(){this._set("state","disabled");this._handles.destroy()};e.select=function(a){const f=g.getValidNumber(a,this);m.isSome(f)&&(this.enabled=
!0,this.value=a)};e.clear=function(){this.enabled=!1};e.next=function(){0!==this.allowedValues.length&&(this.enabled?this.hasNext&&(this.value=this.allowedValues[this._valueIndex+1]):(this.enabled=!0,this.value=this.allowedValues[0]))};e.previous=function(){0!==this.allowedValues.length&&(this.enabled?this.hasPrevious&&(this.value=this.allowedValues[this._valueIndex-1]):(this.enabled=!0,this.value=this.allowedValues[this.allowedValues.length-1]))};e.getValueLabel=function(a){var f;return 0===this.layers.length?
null:null!=(f=this._domainInfo.fieldValueMap.get(a))?f:null};e._onLayersChange=function(){var a=k._asyncToGenerator(function*(){this._set("state","loading");this._domainInfo=g.getDomainInfo([]);if(0!==this.layers.length)try{yield this._loadLayers(this.layers),this._setup(),this._set("state","ready")}catch(f){t.isAbortError(f)||this._set("state","failed")}});return function(){return a.apply(this,arguments)}}();k._createClass(h,[{key:"enabled",get:function(){return 0<this.allowedValues.length&&this._get("enabled")},
set:function(a){a!==this.enabled&&0<this.allowedValues.length&&this._set("enabled",a)}},{key:"value",set:function(a){a!==this.value&&(a=g.getValidNumber(a,this),m.isNone(a)||this._set("value",a))}},{key:"min",get:function(){return g.getMin(this.allowedValues)}},{key:"max",get:function(){return g.getMax(this.allowedValues)}},{key:"allowedValues",get:function(){return this._domainInfo.allowedValues}},{key:"hasNext",get:function(){if(!this.enabled)return!0;const a=this._valueIndex;return 0<=a&&a<this.allowedValues.length-
1}},{key:"hasPrevious",get:function(){return this.enabled?0<this._valueIndex:!0}},{key:"layers",set:function(a){const f=this._get("layers");this._set("layers",q.referenceSetter(a,f))}},{key:"filterExpressions",get:function(){return{solid:null,xRay:null}}},{key:"_valueIndex",get:function(){return p.binaryIndexOf(this.allowedValues,this.value)}}]);return h}(b);c.__decorate([d.property({value:!1,nonNullable:!0})],b.prototype,"enabled",null);c.__decorate([d.property({value:0,nonNullable:!0})],b.prototype,
"value",null);c.__decorate([d.property({readOnly:!0})],b.prototype,"min",null);c.__decorate([d.property({readOnly:!0})],b.prototype,"max",null);c.__decorate([d.property({readOnly:!0})],b.prototype,"allowedValues",null);c.__decorate([d.property({readOnly:!0})],b.prototype,"hasNext",null);c.__decorate([d.property({readOnly:!0})],b.prototype,"hasPrevious",null);c.__decorate([d.property({type:l,nonNullable:!0})],b.prototype,"layers",null);c.__decorate([d.property({nonNullable:!0})],b.prototype,"state",
void 0);c.__decorate([d.property({readOnly:!0})],b.prototype,"_valueIndex",null);c.__decorate([d.property()],b.prototype,"_domainInfo",void 0);return b=c.__decorate([u.subclass("esri.widgets.BuildingExplorer.BuildingNumericFilterViewModel")],b)});