// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.20/esri/copyright.txt for details.
//>>built
define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/events ../../../core/maybe ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/Logger ../../../core/jsonMap ../../../core/accessorSupport/decorators/subclass ../../Slider ./SliderWithDropdownViewModel ../../support/widgetUtils ../../support/jsxFactory".split(" "),function(p,e,m,n,f,c,v,w,x,q,r,t,y,g){c=function(h){function k(a,b){a=h.call(this,
a,b)||this;a.viewModel=new t.SliderWithDropdownViewModel;a.buttonTooltip="";a.showDropDown=!0;a.currentIndex=0;a._rootNode=null;return a}p._inheritsLoose(k,h);var d=k.prototype;d.renderThumbLabel=function(a){return g.tsx("div",{class:this.classes("esri-slider-with-dropdown__box","esri-slider__label",{["esri-slider-with-dropdown__box--drop-down-on"]:this.showDropDown,["esri-slider-with-dropdown__box--drop-down-off"]:!this.showDropDown})},h.prototype.renderThumbLabel.call(this,a),this.showDropDown?
g.tsx("div",{bind:this,afterCreate:this._onRootNodeCreate,class:"esri-slider-with-dropdown__dropdown-root"},g.tsx("button",{class:this.classes("esri-interactive"," esri-widget__anchor esri-slider-with-dropdown__anchor",this.isDropdownOpen?"esri-slider-with-dropdown__anchor--open":"esri-slider-with-dropdown__anchor--closed"),bind:this,onclick:this._onAnchorClick,onpointerdown:this._killEvent,"aria-label":this.buttonTooltip,title:this.buttonTooltip,"aria-expanded":this.isDropdownOpen.toString(),"aria-haspopup":"listbox",
type:"button"},this.currentItem?this.currentItem.name+" ":""),this.isDropdownOpen?g.tsx("ol",{class:this.classes("esri-slider-with-dropdown__list"),onpointerdown:this._killEvent,onblur:this._onDropdownBlur,bind:this,tabindex:"-1","aria-label":this.buttonTooltip,role:"listbox",onkeydown:this._onOlKeyDown,afterCreate:this._focusOnSelectedItem},this.items.map((b,l)=>g.tsx("li",{class:l===this.currentIndex?this.classes("esri-interactive","esri-slider-with-dropdown__list-item","esri-slider-with-dropdown__list-item--selected"):
this.classes("esri-interactive","esri-slider-with-dropdown__list-item"),bind:this,onclick:this._onDropdownItemClick,"data-result":l,"aria-label":b.label.join(" "),role:"option","aria-selected":(l===this.currentIndex).toString(),onkeydown:this._onLiKeyDown,onblur:this._onDropdownBlur,tabindex:"0"},b.label.map(u=>g.tsx("span",{bind:this},u))))):null):null)};d._onRootNodeCreate=function(a){this._rootNode=a};d._focusOnSelectedItem=function(a){var b;a=null!=(b=a.querySelector(".esri-slider-with-dropdown__list-item--selected"))?
b:a.firstChild;n.isSome(a)&&a instanceof HTMLElement&&(a.scrollIntoView(),a.focus())};d._onAnchorClick=function(){this.viewModel.toggle();return!0};d._onDropdownItemClick=function(a){this.viewModel.selectItem(a.currentTarget["data-result"])};d._onDropdownBlur=function(a){a=a.relatedTarget;null===a&&(a=document.activeElement);n.isSome(this._rootNode)&&!this._rootNode.contains(a)&&a!==this._rootNode.parentElement&&a!==this._rootNode.parentElement.parentElement&&(this.viewModel.isDropdownOpen=!1)};d._killEvent=
function(a){a.stopPropagation();return!0};d._onOlKeyDown=function(a){event.stopPropagation();"Escape"===m.eventKey(a)&&(this.viewModel.isDropdownOpen=!1)};d._onLiKeyDown=function(a){const b=event.target;switch(m.eventKey(a)){case "ArrowUp":b.previousElementSibling&&b.previousElementSibling.focus();break;case "ArrowDown":b.nextElementSibling&&b.nextElementSibling.focus();break;case "Enter":b.click()}};return k}(r);e.__decorate([f.property()],c.prototype,"viewModel",void 0);e.__decorate([f.property()],
c.prototype,"buttonTooltip",void 0);e.__decorate([f.property()],c.prototype,"showDropDown",void 0);e.__decorate([f.property({aliasOf:"viewModel.items"})],c.prototype,"items",void 0);e.__decorate([f.property({aliasOf:"viewModel.currentIndex"})],c.prototype,"currentIndex",void 0);e.__decorate([f.property({aliasOf:"viewModel.currentItem"})],c.prototype,"currentItem",void 0);e.__decorate([f.property({aliasOf:"viewModel.isDropdownOpen"})],c.prototype,"isDropdownOpen",void 0);return c=e.__decorate([q.subclass("esri.widgets.Daylight.SliderWithDropdown")],
c)});