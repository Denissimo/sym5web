// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.20/esri/copyright.txt for details.
//>>built
define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../chunks/utils ../../chunks/icon ../../chunks/label ../../chunks/switch ../../core/maybe ../../core/accessorSupport/decorators/aliasOf ../../core/has ../../core/accessorSupport/decorators/cast ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../Widget ./widgetUtils ./decorators/messageBundle ./jsxFactory ./SnappingControls/SnappingControlsViewModel".split(" "),
function(n,f,a,z,A,B,m,p,C,u,D,E,k,v,w,F,q,d,x){a.register({"calcite-action":a.CalciteAction,"calcite-loader":a.CalciteLoader,"calcite-icon":a.CalciteIcon,"calcite-action-group":a.CalciteActionGroup,"calcite-action-menu":a.CalciteActionMenu,"calcite-tooltip-manager":a.CalciteTooltipManager,"calcite-popover":a.CalcitePopover,"calcite-action-bar":a.CalciteActionBar,"calcite-action-pad":a.CalciteActionPad});a.register({"calcite-block":a.CalciteBlock,"calcite-scrim":a.CalciteScrim,"calcite-handle":a.CalciteHandle,
"calcite-icon":a.CalciteIcon,"calcite-loader":a.CalciteLoader,"calcite-block-section":a.CalciteBlockSection,"calcite-switch":a.CalciteSwitch});a.register({"calcite-panel":a.CalcitePanel,"calcite-action":a.CalciteAction,"calcite-action-menu":a.CalciteActionMenu,"calcite-scrim":a.CalciteScrim,"calcite-loader":a.CalciteLoader,"calcite-icon":a.CalciteIcon,"calcite-tooltip-manager":a.CalciteTooltipManager,"calcite-popover":a.CalcitePopover});a.register({"calcite-pick-list":a.CalcitePickList,"calcite-filter":a.CalciteFilter,
"calcite-scrim":a.CalciteScrim,"calcite-icon":a.CalciteIcon,"calcite-loader":a.CalciteLoader,"calcite-pick-list-group":a.CalcitePickListGroup,"calcite-pick-list-item":a.CalcitePickListItem,"calcite-action":a.CalciteAction});const r={header:!0};a=function(t){function l(b,c){c=t.call(this,(()=>{const {view:g,viewModel:h,snappingOptions:G,...y}=b;return y})(),c)||this;c.label=void 0;c.messages=null;c.messagesCommon=null;c.snappingOptions=null;c.view=null;c.visibleElements={...r};c._defaultViewModel=
null;null!=b&&b.viewModel?c.viewModel=b.viewModel:(c._defaultViewModel=new x({snappingOptions:b.snappingOptions,view:b.view}),c.viewModel=c._defaultViewModel);return c}n._inheritsLoose(l,t);var e=l.prototype;e.destroy=function(){this._defaultViewModel=m.destroyMaybe(this._defaultViewModel)};e.castVisibleElements=function(b){return{...r,...b}};e.render=function(){const {label:b,messagesCommon:{close:c},visibleElements:{header:g}}=this;var h=d.tsx("calcite-block",{class:"esri-snapping-controls__toggle-block",
open:!0},this.renderSnappingToggle());h=g?d.tsx("div",{class:"esri-snapping-controls__container"},d.tsx("calcite-panel",{heading:b,class:"esri-snapping-controls__panel"},d.tsx("calcite-action",{text:c,slot:"header-actions-end",icon:"x",appearance:"solid"}),h,this.renderLayerList())):d.tsx("div",{class:"esri-snapping-controls__container"},h,this.renderLayerList());return d.tsx("div",{"aria-label":b,class:this.classes("esri-snapping-controls","esri-widget")},h)};e.renderSnappingToggle=function(){const {messages:{enableSnapping:b},
viewModel:{snappingOptions:{featureEnabled:c,enabledToggled:g}}}=this;return d.tsx("calcite-label",{layout:"inline-space-between"},b,d.tsx("calcite-switch",{switched:c,disabled:g,bind:this,onCalciteSwitchChange:this._enableSnappingSwitchChange}))};e.renderLayerList=function(){const {messages:{snappingLayers:b,searchLayers:c}}=this;return d.tsx("calcite-block",{heading:b,open:!0,collapsible:!0},d.tsx("calcite-pick-list",{multiple:!0,bind:this,onCalciteListChange:this._layerListChange,filterEnabled:10<=
this.viewModel.layerListViewModel.operationalItems.length,"filter-placeholder":c},this.renderLayerListItemCollection(this.viewModel.layerListViewModel.operationalItems)))};e.renderLayerListItemCollection=function(b){return b.map(c=>0<c.children.length?this.renderLayerListItemGroup(c):this.renderLayerListItem(c)).toArray()};e.renderLayerListItem=function(b){var c,{messages:{untitledLayer:g}}=this;g=b.title||g;const h=0<(null==(c=b.children)?void 0:c.length);return d.tsx("calcite-pick-list-item",{slot:h?
"parent-item":null,key:`${this.id}-pick-list-item-${b.uid}`,label:g,value:b.layer.id,selected:b.enabled})};e.renderLayerListItemGroup=function(b){return d.tsx("calcite-pick-list-group",{"group-title":b.title||this.messages.untitledLayer},[...this.renderLayerListItemCollection(b.children)])};e._enableSnappingSwitchChange=function(b){this.snappingOptions.featureEnabled=b.detail.switched};e._layerListChange=function(b){this.viewModel.updateEnabledFeatureSources([...b.detail.keys()])};n._createClass(l,
[{key:"viewModel",set:function(b){if(b!==this._get("viewModel")){if(m.isNone(this._defaultViewModel)||this._defaultViewModel!==b)this._defaultViewModel=m.destroyMaybe(this._defaultViewModel);this._set("viewModel",b)}}}]);return l}(w);f.__decorate([k.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],a.prototype,"label",void 0);f.__decorate([k.property(),q.messageBundle("esri/widgets/support/SnappingMenu/t9n/SnappingMenu")],a.prototype,"messages",void 0);f.__decorate([k.property(),
q.messageBundle("esri/t9n/common")],a.prototype,"messagesCommon",void 0);f.__decorate([p.aliasOf("viewModel.snappingOptions")],a.prototype,"snappingOptions",void 0);f.__decorate([p.aliasOf("viewModel.view")],a.prototype,"view",void 0);f.__decorate([k.property()],a.prototype,"viewModel",null);f.__decorate([k.property()],a.prototype,"visibleElements",void 0);f.__decorate([u.cast("visibleElements")],a.prototype,"castVisibleElements",null);return a=f.__decorate([v.subclass("esri.widgets.support.SnappingControls")],
a)});