// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.20/esri/copyright.txt for details.
//>>built
define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Collection ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/Logger ../../../core/jsonMap ../../../core/accessorSupport/decorators/subclass ../../../views/interactive/snapping/FeatureSnappingLayerSource ../../LayerList/LayerListViewModel ./snappingLayerListUtils ./SnappingListItem".split(" "),function(d,g,f,n,h,w,x,y,z,p,q,r,k,t){d.SnappingLayerListViewModel=
function(e){function b(){var a=e.apply(this,arguments)||this;a.featureSnappingSources=new n;return a}g._inheritsLoose(b,e);var c=b.prototype;c._compileList=function(){var a=this.get("view.map.layers");a&&(a=a.filter(k.isValidSnappingLayer),this._watchLayersListMode(a),(a=this._getViewableLayers(a))&&a.length?(this._createNewItems(a),this._modifyOrRemoveItems(a),this._sortItems(a)):this._removeAllItems())};c._createListItem=function(a){const {view:u}=this,v=l(this.featureSnappingSources,a);a=new t.SnappingListItem({layer:a,
view:u,featureSource:v});for(const m of a.children)m.featureSource=l(this.featureSnappingSources,m.layer);this._watchItemProperties(a);return a};g._createClass(b,[{key:"operationalItemsFlat",get:function(){return this.operationalItems.flatten(a=>a.children)}}]);return b}(r);f.__decorate([h.property()],d.SnappingLayerListViewModel.prototype,"featureSnappingSources",void 0);f.__decorate([h.property()],d.SnappingLayerListViewModel.prototype,"operationalItems",void 0);d.SnappingLayerListViewModel=f.__decorate([p.subclass("esri.widgets.support.SnappingControls.SnappingLayerListViewModel")],
d.SnappingLayerListViewModel);const l=(e,b)=>{if(!k.isValidSnappingLayerSource(b))return null;let c=e.find(a=>a.layer===b);c||(c=new q({layer:b,enabled:!1}),e.add(c));return c};Object.defineProperty(d,"__esModule",{value:!0})});