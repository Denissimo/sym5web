// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.20/esri/copyright.txt for details.
//>>built
define("exports ../../../core/unitUtils ../../../geometry/support/spatialReferenceUtils ../../../layers/graphics/OptimizedFeature ../../../layers/graphics/OptimizedFeatureSet ../../../layers/graphics/OptimizedGeometry".split(" "),function(e,g,m,n,p,h){const k=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"];let q=function(){function l(a){this.options=a;this.geometryTypes=k;this._vertexDimension=this._coordinatePtr=0}var c=l.prototype;c.createFeatureResult=
function(){return new p};c.prepareFeatures=function(a){this._vertexDimension=2;a.hasZ&&this._vertexDimension++;a.hasM&&this._vertexDimension++};c.finishFeatureResult=function(a){if(a&&a.features&&a.hasZ&&this.options.sourceSpatialReference&&a.spatialReference&&!m.equals(a.spatialReference,this.options.sourceSpatialReference)&&!a.spatialReference.vcsWkid){var b=g.getMetersPerVerticalUnitForSR(this.options.sourceSpatialReference),d=g.getMetersPerVerticalUnitForSR(a.spatialReference);b/=d;if(1!==b)for(const f of a.features)if(f.geometry&&
f.geometry.coords)for(a=f.geometry.coords,d=2;d<a.length;d+=3)a[d]*=b}};c.addFeature=function(a,b){a.features.push(b)};c.createFeature=function(){return new n};c.createSpatialReference=function(){return{wkid:0}};c.createGeometry=function(){return new h};c.addField=function(a,b){a.fields.push(b)};c.allocateCoordinates=function(a){a.coords.length=a.lengths.reduce((b,d)=>b+d,0)*this._vertexDimension;this._coordinatePtr=0};c.addCoordinate=function(a,b){a.coords[this._coordinatePtr++]=b};c.addCoordinatePoint=
function(a,b){a.coords.push(b)};c.addLength=function(a,b){a.lengths.push(b)};c.addQueryGeometry=function(a,b){a.queryGeometry=b.queryGeometry;a.queryGeometryType=b.queryGeometryType};c.createPointGeometry=function(){return new h};return l}();e.OPTIMIZED_GEOMETRY_TYPES=k;e.OptimizedFeatureSetParserContext=q;Object.defineProperty(e,"__esModule",{value:!0})});