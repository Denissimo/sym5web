// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.20/esri/copyright.txt for details.
//>>built
define("exports ../../Graphic ../../core/maybe ../../geometry/Extent ../../geometry/Mesh ../../geometry/Point ../../geometry/support/axisAngleDegrees ../../geometry/support/MeshTransform ./FeatureSet".split(" "),function(h,m,k,n,l,p,q,r,t){function u(a){return({attributes:d})=>{if(!d)return{};if(!a)return d;for(const b in d)a.has(b)||delete d[b];return d}}function v(a,d,b){const {status:c,source:f}=w(a);if(0===c)return null;const e=x(a,d,b),g=n.fromJSON(a.geometry);g.spatialReference=d;a=y(a,b);return 1===
c?l.createIncomplete(e,{extent:g,transform:a}):l.createWithExternalSource(e,f,{extent:g,transform:a})}function x({attributes:a},d,{transformFieldRoles:b}){return new p({x:a[b.originX],y:a[b.originY],z:a[b.originZ],spatialReference:d})}function y({attributes:a,assetMappings:d},{transformFieldRoles:b}){var c;return new r({translation:[a[b.translationX],a[b.translationY],a[b.translationZ]],rotation:q.fromAxisAndAngle([a[b.rotationX],a[b.rotationY],a[b.rotationZ]],a[b.rotationDeg]),scale:[a[b.scaleX],
a[b.scaleY],a[b.scaleZ]],geographic:!(null!=(c=d.flags)&&c.includes("PROJECT_VERTICES"))})}function w(a){if(!a.assetMappings)return{status:0};const d=[],b=new Map;for(const f of a.assetMappings){a=f.seqNo;const e=f.assetName,g=f.assetURL;var c=f.conversionStatus;if("FAILED"===c)return{status:0};if("COMPLETED"!==c)return{status:1};null==a?d.push({name:e,source:g}):((c=b.get(e))?c=c.multipart:(c=[],d.push({name:e,source:{multipart:c}}),b.set(e,{multipart:c})),c[a]=g)}return{status:2,source:d}}h.meshFeatureSetFromJSON=
function(a,d,b){var c=b.features;b.features=[];delete b.geometryType;b=t.fromJSON(b);b.geometryType="mesh";const f=b.spatialReference;a=k.isNone(a.outFields)||!a.outFields.length?()=>({}):u(a.outFields.includes("*")?null:new Set(a.outFields));for(const e of c)c=v(e,f,d),k.isSome(c)&&b.features.push(new m({geometry:c,attributes:a(e)}));return b};Object.defineProperty(h,"__esModule",{value:!0})});