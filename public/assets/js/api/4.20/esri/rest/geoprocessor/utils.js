// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.20/esri/copyright.txt for details.
//>>built
define("exports ../../chunks/_rollupPluginBabelHelpers ../../request ../../core/has ../../geometry/support/normalizeUtils ../../layers/support/Field ../../layers/support/MapImage ../utils ../support/DataFile ../support/FeatureSet ../support/LinearUnit ../support/ParameterValue ../support/RasterData".split(" "),function(h,D,E,L,F,t,u,v,l,m,w,G,x){function n(){n=D._asyncToGenerator(function*(c,d,a,b,e){const f={},y={},z=[];A(b,z,f);return F.normalizeCentralMeridian(z).then(g=>{const {outSpatialReference:p,
processExtent:B,processSpatialReference:q,returnFeatureCollection:H,returnM:I,returnZ:J}=a,{path:K}=v.parseUrl(c);for(var k in f){const C=f[k];y[k]=g.slice(C[0],C[1])}g=p?p.wkid||p:null;k=q?q.wkid||q:null;g=r({...B?{context:{extent:B,outSR:g,processSR:k}}:{"env:outSR":g,"env:processSR":k},...b,..."execute"===d?{returnFeatureCollection:H||void 0,returnM:I||void 0,returnZ:J||void 0}:null,f:"json"},null,y);return E(`${K}/${d}`,{...e,query:g})})});return n.apply(this,arguments)}function A(c,d,a){for(const e in c){var b=
c[e];b&&"object"===typeof b&&b instanceof m&&({features:b}=b,a[e]=[d.length,d.length+b.length],b.forEach(f=>{d.push(f.geometry)}))}}function r(c,d,a){for(const b in c){const e=c[b];Array.isArray(e)?c[b]=JSON.stringify(e.map(f=>r({item:f},!0).item)):e instanceof Date&&(c[b]=e.getTime())}return v.encode(c,d,a)}h.collectGeometries=A;h.constructRequest=function(c,d,a,b,e){return n.apply(this,arguments)};h.decode=function(c){const d=c.dataType,a=G.fromJSON(c);switch(d){case "GPDate":a.value=new Date(a.value);
break;case "GPDataFile":a.value=l.fromJSON(a.value);break;case "GPLinearUnit":a.value=w.fromJSON(a.value);break;case "GPFeatureRecordSetLayer":case "GPRecordSet":a.value=c.value.url?l.fromJSON(a.value):m.fromJSON(a.value);break;case "GPRasterData":case "GPRasterDataLayer":c=c.value.mapImage;a.value=c?u.fromJSON(c):x.fromJSON(a.value);break;case "GPField":a.value=t.fromJSON(a.value);break;case "GPMultiValue:GPDate":a.value=a.value.map(b=>new Date(b));break;case "GPMultiValue:GPDataFile":a.value=a.value.map(b=>
l.fromJSON(b));break;case "GPMultiValue:GPLinearUnit":a.value=a.value.map(b=>w.fromJSON(b));break;case "GPMultiValue:GPFeatureRecordSetLayer":case "GPMultiValue:GPRecordSet":a.value=a.value.map(b=>m.fromJSON(b));break;case "GPMultiValue:GPRasterData":case "GPMultiValue:GPRasterDataLayer":a.value=a.value.map(b=>b?u.fromJSON(b):x.fromJSON(a.value));break;case "GPMultiValue:GPField":a.value=a.value.map(b=>t.fromJSON(b))}return a};h.gpEncode=r;Object.defineProperty(h,"__esModule",{value:!0})});