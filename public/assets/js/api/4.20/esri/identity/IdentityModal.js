// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.20/esri/copyright.txt for details.
//>>built
/*
 tabbable 5.2.0
 @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
 focus-trap 6.5.1
 @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/
define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/handleUtils ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/jsonMap ../core/accessorSupport/decorators/subclass ../widgets/Widget ../widgets/support/widget ../widgets/support/jsxFactory ../widgets/support/decorators/messageBundle".split(" "),function(W,z,X,B,I,pa,qa,ra,Y,p,Z,t,aa){function K(a,c){var d=Object.keys(a);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(a);
c&&(e=e.filter(function(f){return Object.getOwnPropertyDescriptor(a,f).enumerable}));d.push.apply(d,e)}return d}function ba(a){for(var c=1;c<arguments.length;c++){var d=null!=arguments[c]?arguments[c]:{};c%2?K(Object(d),!0).forEach(function(e){var f=d[e];e in a?Object.defineProperty(a,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):a[e]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(d)):K(Object(d)).forEach(function(e){Object.defineProperty(a,
e,Object.getOwnPropertyDescriptor(d,e))})}return a}I='input select textarea a[href] button [tabindex] audio[controls] video[controls] [contenteditable]:not([contenteditable\x3d"false"]) details\x3esummary:first-of-type details'.split(" ");var L=I.join(","),E="undefined"===typeof Element?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,ca=function(a,c,d){var e=Array.prototype.slice.apply(a.querySelectorAll(L));c&&E.call(a,L)&&e.unshift(a);
return e=e.filter(d)},M=function(a){var c=parseInt(a.getAttribute("tabindex"),10);return isNaN(c)?"true"===a.contentEditable||("AUDIO"===a.nodeName||"VIDEO"===a.nodeName||"DETAILS"===a.nodeName)&&null===a.getAttribute("tabindex")?0:a.tabIndex:c},da=function(a,c){return a.tabIndex===c.tabIndex?a.documentOrder-c.documentOrder:a.tabIndex-c.tabIndex},ea=function(a){return"DETAILS"===a.tagName&&Array.prototype.slice.apply(a.children).some(function(c){return"SUMMARY"===c.tagName})},fa=function(a,c){for(var d=
0;d<a.length;d++)if(a[d].checked&&a[d].form===c)return a[d]},ha=function(a){if(!a.name)return!0;var c=a.form||a.ownerDocument,d=function(f){return c.querySelectorAll('input[type\x3d"radio"][name\x3d"'+f+'"]')};if("undefined"!==typeof window&&"undefined"!==typeof window.CSS&&"function"===typeof window.CSS.escape)var e=d(window.CSS.escape(a.name));else try{e=d(a.name)}catch(f){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",
f.message),!1}d=fa(e,a.form);return!d||d===a},ia=function(a,c){if("hidden"===getComputedStyle(a).visibility)return!0;var d=E.call(a,"details\x3esummary:first-of-type")?a.parentElement:a;if(E.call(d,"details:not([open]) *"))return!0;if(!c||"full"===c)for(;a;){if("none"===getComputedStyle(a).display)return!0;a=a.parentElement}else if("non-zero-area"===c)return a=a.getBoundingClientRect(),c=a.height,0===a.width&&0===c;return!1},N=function(a,c){var d;(d=c.disabled)||(d="INPUT"===c.tagName&&"hidden"===
c.type);return d||ia(c,a.displayCheck)||ea(c)?!1:!0},ja=function(a,c){(a=!N(a,c))||(a="INPUT"===c.tagName&&"radio"===c.type&&!ha(c));return a||0>M(c)?!1:!0},ka=function(a,c){c=c||{};var d=[],e=[];ca(a,c.includeContainer,ja.bind(null,c)).forEach(function(f,h){var q=M(f);0===q?d.push(f):e.push({documentOrder:h,tabIndex:q,node:f})});return e.sort(da).map(function(f){return f.node}).concat(d)},la=I.concat("iframe").join(","),ma=function(a,c){c=c||{};if(!a)throw Error("No node provided");return!1===E.call(a,
la)?!1:N(c,a)},O,P=function(){var a=[];return{activateTrap:function(c){if(0<a.length){var d=a[a.length-1];d!==c&&d.pause()}d=a.indexOf(c);-1!==d&&a.splice(d,1);a.push(c)},deactivateTrap:function(c){c=a.indexOf(c);-1!==c&&a.splice(c,1);0<a.length&&a[a.length-1].unpause()}}}(),J=function(a,c){var d=-1;a.every(function(e,f){return c(e)?(d=f,!1):!0});return d},F=function(a){for(var c=arguments.length,d=Array(1<c?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];return"function"===typeof a?a.apply(void 0,d):a},oa=
function(a,c){var d=document,e=ba({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0},c),f=[],h=[],q=null,A=null,m=!1,u=!1,r=function(k,b,g){return k&&void 0!==k[b]?k[b]:e[g||b]},y=function(k){return f.some(function(b){return b.contains(k)})},v=function(k){var b=e[k];if(!b)return null;var g=b;if("string"===typeof b&&(g=d.querySelector(b),!g))throw Error("`".concat(k,"` refers to no known node"));if("function"===typeof b&&(g=b(),!g))throw Error("`".concat(k,"` did not return a node"));
return g},G=function(){var k=null!==v("initialFocus")?v("initialFocus"):y(d.activeElement)?d.activeElement:(k=h[0])&&k.firstTabbableNode||v("fallbackFocus");if(!k)throw Error("Your focus-trap needs to have at least one focusable element");return k},C=function(){h=f.map(function(k){var b=ka(k);if(0<b.length)return{container:k,firstTabbableNode:b[0],lastTabbableNode:b[b.length-1]}}).filter(function(k){return!!k});if(0>=h.length&&!v("fallbackFocus"))throw Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");
},D=function g(b){b!==d.activeElement&&(b&&b.focus?(b.focus({preventScroll:!!e.preventScroll}),A=b,b.tagName&&"input"===b.tagName.toLowerCase()&&"function"===typeof b.select&&b.select()):g(G()))},Q=function(b){var g=v("setReturnFocus");return g?g:b},H=function(b){y(b.target)||(F(e.clickOutsideDeactivates,b)?w.deactivate({returnFocus:e.returnFocusOnDeactivate&&!ma(b.target)}):F(e.allowOutsideClick,b)||b.preventDefault())},R=function(b){var g=y(b.target);g||b.target instanceof Document?g&&(A=b.target):
(b.stopImmediatePropagation(),D(A||G()))},na=function(b){C();var g=null;if(0<h.length){var n=J(h,function(x){return x.container.contains(b.target)});if(0>n)g=b.shiftKey?h[h.length-1].lastTabbableNode:h[0].firstTabbableNode;else if(b.shiftKey){var l=J(h,function(x){return b.target===x.firstTabbableNode});0>l&&h[n].container===b.target&&(l=n);0<=l&&(g=h[0===l?h.length-1:l-1].lastTabbableNode)}else l=J(h,function(x){return b.target===x.lastTabbableNode}),0>l&&h[n].container===b.target&&(l=n),0<=l&&(g=
h[l===h.length-1?0:l+1].firstTabbableNode)}else g=v("fallbackFocus");g&&(b.preventDefault(),D(g))},S=function(b){!1===e.escapeDeactivates||"Escape"!==b.key&&"Esc"!==b.key&&27!==b.keyCode?"Tab"!==b.key&&9!==b.keyCode||na(b):(b.preventDefault(),w.deactivate())},T=function(b){F(e.clickOutsideDeactivates,b)||y(b.target)||F(e.allowOutsideClick,b)||(b.preventDefault(),b.stopImmediatePropagation())},U=function(){if(m)return P.activateTrap(w),O=e.delayInitialFocus?setTimeout(function(){D(G())},0):D(G()),
d.addEventListener("focusin",R,!0),d.addEventListener("mousedown",H,{capture:!0,passive:!1}),d.addEventListener("touchstart",H,{capture:!0,passive:!1}),d.addEventListener("click",T,{capture:!0,passive:!1}),d.addEventListener("keydown",S,{capture:!0,passive:!1}),w},V=function(){if(m)return d.removeEventListener("focusin",R,!0),d.removeEventListener("mousedown",H,!0),d.removeEventListener("touchstart",H,!0),d.removeEventListener("click",T,!0),d.removeEventListener("keydown",S,!0),w};var w={activate:function(b){if(m)return this;
var g=r(b,"onActivate"),n=r(b,"onPostActivate"),l=r(b,"checkCanFocusTrap");l||C();m=!0;u=!1;q=d.activeElement;g&&g();b=function(){l&&C();U();n&&n()};if(l)return l(f.concat()).then(b,b),this;b();return this},deactivate:function(b){if(!m)return this;clearTimeout(O);V();u=m=!1;P.deactivateTrap(w);var g=r(b,"onDeactivate"),n=r(b,"onPostDeactivate"),l=r(b,"checkCanReturnFocus");g&&g();var x=r(b,"returnFocus","returnFocusOnDeactivate");b=function(){setTimeout(function(){x&&D(Q(q));n&&n()},0)};if(x&&l)return l(Q(q)).then(b,
b),this;b();return this},pause:function(){if(u||!m)return this;u=!0;V();return this},unpause:function(){if(!u||!m)return this;u=!1;C();U();return this},updateContainerElements:function(b){f=[].concat(b).filter(Boolean).map(function(g){return"string"===typeof g?d.querySelector(g):g});m&&C();return this}};w.updateContainerElements(a);return w};p=function(a){function c(e,f){var h=a.call(this,e,f)||this;h.container=document.createElement("div");h.content=null;h.open=!1;h._close=()=>{h.open=!1};document.body.appendChild(h.container);
h.own(h.watch("open",()=>h._toggleFocusTrap()));return h}W._inheritsLoose(c,a);var d=c.prototype;d.destroy=function(){this._destroyFocusTrap()};d.render=function(){var e=this.id;const {open:f,content:h,title:q,messages:A}=this;var m=f&&!!h;const u={["esri-identity-modal--open"]:m,["esri-identity-modal--closed"]:!m},r=t.tsx("button",{class:"esri-identity-modal__close-button","aria-label":A.close,title:A.close,bind:this,onclick:this._close},t.tsx("span",{"aria-hidden":"true",class:"esri-icon-close"})),
y=`${e}_title`;e=`${e}_content`;const v=q?t.tsx("h1",{id:y,class:"esri-identity-modal__title"},q):null;m=m?t.tsx("div",{bind:this,class:"esri-identity-modal__dialog",role:"dialog","aria-labelledby":y,"aria-describedby":e,afterCreate:this._createFocusTrap},r,v,this._renderContent(e)):null;return t.tsx("div",{tabIndex:-1,class:this.classes("esri-identity-modal",u)},m)};d._destroyFocusTrap=function(){var e;null==(e=this._focusTrap)?void 0:e.deactivate({onDeactivate:null});this._focusTrap=null};d._toggleFocusTrap=
function(){const {_focusTrap:e,open:f}=this;e&&(f?e.activate():e.deactivate())};d._createFocusTrap=function(e){this._destroyFocusTrap();const f=requestAnimationFrame(()=>{this._focusTrap=oa(e,{initialFocus:"input",onDeactivate:this._close});this._toggleFocusTrap()});this.own(X.makeHandle(()=>cancelAnimationFrame(f)))};d._renderContent=function(e){const f=this.content;return"string"===typeof f?t.tsx("div",{class:"esri-identity-modal__content",id:e,innerHTML:f}):Z.isWidget(f)?t.tsx("div",{class:"esri-identity-modal__content",
id:e},f.render()):f instanceof HTMLElement?t.tsx("div",{class:"esri-identity-modal__content",id:e,bind:f,afterCreate:this._attachToNode}):null};d._attachToNode=function(e){e.appendChild(this)};return c}(p);z.__decorate([B.property({readOnly:!0})],p.prototype,"container",void 0);z.__decorate([B.property()],p.prototype,"content",void 0);z.__decorate([B.property()],p.prototype,"open",void 0);z.__decorate([B.property(),aa.messageBundle("esri/t9n/common")],p.prototype,"messages",void 0);z.__decorate([B.property({aliasOf:"messages.auth.signIn"})],
p.prototype,"title",void 0);return p=z.__decorate([Y.subclass("esri.identity.IdentityModal")],p)});