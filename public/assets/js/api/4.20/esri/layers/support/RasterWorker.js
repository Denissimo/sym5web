// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.20/esri/copyright.txt for details.
//>>built
require({cache:{"esri/layers/support/PixelBlock":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Error ../../core/JSONSupport ../../core/lang ../../core/Logger ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/jsonMap ../../core/accessorSupport/decorators/subclass".split(" "),function(da,aa,Y,W,n,P,T,V,Q,X,D,M){var K;const a=T.getLogger("esri.layers.support.PixelBlock");Y=
K=function(k){function r(d){d=k.call(this,d)||this;d.width=null;d.height=null;d.pixelType="f32";d.validPixelCount=null;d.mask=null;d.maskIsAlpha=!1;d.pixels=null;d.statistics=null;return d}da._inheritsLoose(r,k);r.createEmptyBand=function(d,x){return new (K.getPixelArrayConstructor(d))(x)};r.getPixelArrayConstructor=function(d){let x;switch(d){case "u1":case "u2":case "u4":case "u8":x=Uint8Array;break;case "u16":x=Uint16Array;break;case "u32":x=Uint32Array;break;case "s8":x=Int8Array;break;case "s16":x=
Int16Array;break;case "s32":x=Int32Array;break;case "u32":x=Uint32Array;break;case "f32":x=Float32Array;break;case "f64":x=Float64Array;break;case "c64":case "c128":case "unknown":x=Float32Array}return x};var q=r.prototype;q.castPixelType=function(d){if(!d)return"f32";d=d.toLowerCase();-1<["u1","u2","u4"].indexOf(d)?d="u8":-1==="unknown u8 s8 u16 s16 u32 s32 f32 f64".split(" ").indexOf(d)&&(d="f32");return d};q.getPlaneCount=function(){return this.pixels&&this.pixels.length};q.addData=function(d){if(!d.pixels||
d.pixels.length!==this.width*this.height)throw new W("pixelblock:invalid-or-missing-pixels","add data requires valid pixels array that has same length defined by pixel block width * height");this.pixels||(this.pixels=[]);this.statistics||(this.statistics=[]);this.pixels.push(d.pixels);this.statistics.push(d.statistics||{minValue:null,maxValue:null})};q.getAsRGBA=function(){const d=new ArrayBuffer(this.width*this.height*4);switch(this.pixelType){case "s8":case "s16":case "u16":case "s32":case "u32":case "f32":case "f64":this._fillFromNon8Bit(d);
break;default:this._fillFrom8Bit(d)}return new Uint8ClampedArray(d)};q.getAsRGBAFloat=function(){const d=new Float32Array(this.width*this.height*4);this._fillFrom32Bit(d);return d};q.updateStatistics=function(){this.statistics=this.pixels.map(w=>this._calculateBandStatistics(w,this.mask));const d=this.mask;let x=0;if(d)for(let w=0;w<d.length;w++)d[w]&&x++;else x=this.width*this.height;this.validPixelCount=x};q.clamp=function(d){if(d&&"f64"!==d&&"f32"!==d){switch(d){case "u8":var x=[0,255];break;case "u16":x=
[0,65535];break;case "u32":x=[0,4294967295];break;case "s8":x=[-128,127];break;case "s16":x=[-32768,32767];break;case "s32":x=[-2147483648,2147483647];break;default:x=[-3.4*1E39,3.4*1E39]}var [w,u]=x;x=this.pixels;var l=this.width*this.height,f=x.length,c=[];for(let E=0;E<f;E++){var C=K.createEmptyBand(d,l);var p=x[E];for(let A=0;A<l;A++){var m=p[A];C[A]=m>u?u:m<w?w:m}c.push(C)}this.pixels=c;this.pixelType=d}};q.extractBands=function(d){if(V.isNone(d)||0===d.length||null==this.pixels||0===this.pixels.length)return this;
var x=this.pixels.length;const w=d.some(u=>u>=this.pixels.length);x=x===d.length&&!d.some((u,l)=>u!==l);return w||x?this:new K({pixelType:this.pixelType,width:this.width,height:this.height,mask:this.mask,validPixelCount:this.validPixelCount,maskIsAlpha:this.maskIsAlpha,pixels:d.map(u=>this.pixels[u]),statistics:this.statistics&&d.map(u=>this.statistics[u])})};q.clone=function(){const d=new K({width:this.width,height:this.height,pixelType:this.pixelType,maskIsAlpha:this.maskIsAlpha,validPixelCount:this.validPixelCount});
this.mask&&(d.mask=this.mask instanceof Uint8Array?new Uint8Array(this.mask):this.mask.slice(0));let x;const w=K.getPixelArrayConstructor(this.pixelType);if(this.pixels&&0<this.pixels.length){d.pixels=[];const u=this.pixels[0].slice;for(x=0;x<this.pixels.length;x++)d.pixels[x]=u?this.pixels[x].slice(0,this.pixels[x].length):new w(this.pixels[x])}if(this.statistics)for(d.statistics=[],x=0;x<this.statistics.length;x++)d.statistics[x]=P.clone(this.statistics[x]);return d};q._fillFrom8Bit=function(d){const {mask:x,
maskIsAlpha:w,pixels:u}=this;if(d&&u&&u.length){var l,f;var c=l=f=u[0];3<=u.length?(l=u[1],f=u[2]):2===u.length&&(l=u[1]);var C=new Uint32Array(d),p=this.width*this.height;if(c.length!==p)a.error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.");else if(x&&x.length===p)if(w)for(d=0;d<p;d++)x[d]&&(C[d]=x[d]<<24|f[d]<<16|l[d]<<8|c[d]);else for(d=0;d<p;d++)x[d]&&(C[d]=-16777216|f[d]<<16|l[d]<<8|c[d]);else for(d=0;d<p;d++)C[d]=-16777216|f[d]<<16|l[d]<<8|c[d]}else a.error("getAsRGBA()",
"Unable to convert to RGBA. The input pixel block is empty.")};q._fillFromNon8Bit=function(d){const {pixels:x,mask:w,statistics:u}=this;if(d&&x&&x.length){var l=this.pixelType,f=1,c=0;f=1;u&&0<u.length?(c=u.map(A=>A.minValue).reduce((A,F)=>Math.min(A,F)),f=u.map(A=>A.maxValue-A.minValue).reduce((A,F)=>Math.max(A,F)),f=255/f):(f=255,"s8"===l?(c=-128,f=127):"u16"===l?f=65535:"s16"===l?(c=-32768,f=32767):"u32"===l?f=4294967295:"s32"===l?(c=-2147483648,f=2147483647):"f32"===l?(c=-3.4*1E39,f=3.4*1E39):
"f64"===l&&(c=-Number.MAX_VALUE,f=Number.MAX_VALUE),f=255/(f-c));d=new Uint32Array(d);l=this.width*this.height;var C,p,m;var E=C=p=x[0];if(E.length!==l)return a.error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.");if(2<=x.length)if(C=x[1],3<=x.length&&(p=x[2]),w&&w.length===l)for(m=0;m<l;m++)w[m]&&(d[m]=-16777216|(p[m]-c)*f<<16|(C[m]-c)*f<<8|(E[m]-c)*f);else for(m=0;m<l;m++)d[m]=-16777216|(p[m]-c)*f<<16|(C[m]-c)*f<<8|(E[m]-c)*f;else if(w&&w.length===l)for(m=0;m<l;m++)C=(E[m]-
c)*f,w[m]&&(d[m]=-16777216|C<<16|C<<8|C);else for(m=0;m<l;m++)C=(E[m]-c)*f,d[m]=-16777216|C<<16|C<<8|C}else a.error("getAsRGBA()","Unable to convert to RGBA. The input pixel block is empty.")};q._fillFrom32Bit=function(d){const {pixels:x,mask:w}=this;if(!d||!x||!x.length)return a.error("getAsRGBAFloat()","Unable to convert to RGBA. The input pixel block is empty.");let u,l,f,c;u=l=f=x[0];3<=x.length?(l=x[1],f=x[2]):2===x.length&&(l=x[1]);const C=this.width*this.height;if(u.length!==C)return a.error("getAsRGBAFloat()",
"Unable to convert to RGBA. The pixelblock is invalid.");let p=0;if(w&&w.length===C)for(c=0;c<C;c++)d[p++]=u[c],d[p++]=l[c],d[p++]=f[c],d[p++]=w[c]&1;else for(c=0;c<C;c++)d[p++]=u[c],d[p++]=l[c],d[p++]=f[c],d[p++]=1};q._calculateBandStatistics=function(d,x){let w=Infinity,u=-Infinity;const l=d.length;let f,c=0;if(x)for(f=0;f<l;f++)x[f]&&(c=d[f],w=c<w?c:w,u=c>u?c:u);else for(f=0;f<l;f++)c=d[f],w=c<w?c:w,u=c>u?c:u;return{minValue:w,maxValue:u}};return r}(n.JSONSupport);aa.__decorate([Q.property({json:{write:!0}})],
Y.prototype,"width",void 0);aa.__decorate([Q.property({json:{write:!0}})],Y.prototype,"height",void 0);aa.__decorate([Q.property({json:{write:!0}})],Y.prototype,"pixelType",void 0);aa.__decorate([X.cast("pixelType")],Y.prototype,"castPixelType",null);aa.__decorate([Q.property({json:{write:!0}})],Y.prototype,"validPixelCount",void 0);aa.__decorate([Q.property({json:{write:!0}})],Y.prototype,"mask",void 0);aa.__decorate([Q.property({json:{write:!0}})],Y.prototype,"maskIsAlpha",void 0);aa.__decorate([Q.property({json:{write:!0}})],
Y.prototype,"pixels",void 0);aa.__decorate([Q.property({json:{write:!0}})],Y.prototype,"statistics",void 0);return Y=K=aa.__decorate([M.subclass("esri.layers.support.PixelBlock")],Y)})},"esri/layers/support/rasterFormats/RasterCodec":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../PixelBlock ./ImageCanvasDecoder ./JpgPlus ../../../chunks/TiffDecoder ../../../chunks/LercCodec ../../../chunks/Zlib ./Raw ./utils".split(" "),function(da,aa,Y,W,n,P,T,V,Q,X,D){function M(p,
m){if(!D.isPlatformLittleEndian)throw new Y("rasterCoded:decode","lerc decoder is not supported on big endian platform");const {width:E,height:A,pixelType:F}=m;var t=u(F);const h=t.pixelTypeCtor;m=null==m.noDataValue?t.noDataValue:m.noDataValue;t=0;let g,y=0,O;const e=p.byteLength-10;for(;y<e;){var b=V.decode(p,{inputOffset:y,encodedMaskData:g,returnMask:0===t?!0:!1,returnEncodedMask:0===t?!0:!1,returnFileInfo:!0,pixelType:h,noDataValue:m});if(E&&A&&(b.width!==E||b.height!==A))throw new Y("rasterCoded:decode",
"lerc decoded result has width or height different from specified in options");y=b.fileInfo.eofOffset;0===t&&(g=b.encodedMaskData,O=new W({width:b.width,height:b.height,pixels:[],pixelType:F,mask:b.maskData,statistics:[]}));t++;O.addData({pixels:b.pixelData,statistics:{minValue:b.minValue,maxValue:b.maxValue,noDataValue:b.noDataValue}});10<e-y&&(b=String.fromCharCode.apply(null,new Uint8Array(p,y,10)),y+=-1<b.indexOf("CntZ")?b.indexOf("CntZ"):0)}return O}function K(p,m){if(!D.isPlatformLittleEndian)throw new Y("rasterCoded:decode",
"lerc decoder is not supported on big endian platform");var E=0,A=m.offset||0,F=0;let t;let h;const g=m.eof||p.byteLength-10,y=[],{width:O,height:e}=m;for(m=0;A<g;){var b;var v=T.Lerc2Codec.decode(p,{inputOffset:A,maskData:t,returnFileInfo:!0});if(O&&e&&(v.width!==O||v.height!==e))throw new Y("rasterCoded:decode","lerc2 decoded result has width or height different from what's specified in options");A=v.fileInfo.eofOffset;t=v.maskData;0===E&&(F=v.fileInfo.numValidPixel,h=new W({width:v.width,height:v.height,
pixels:[],pixelType:v.fileInfo.pixelType,mask:t,statistics:[]}));v.fileInfo.mask&&0<v.fileInfo.mask.numBytes&&m++;t&&y.push(t);if(1<v.dimCount&&(null==(b=v.pixelData)?void 0:b.length)===v.width*v.height*v.dimCount){var B,z,I,L;v.pixelData=v.pixelData.slice(-v.width*v.height);const J=null==(B=v.dimStats)?void 0:null==(z=B.minValues)?void 0:z[v.dimCount-1],H=null==(I=v.dimStats)?void 0:null==(L=I.maxValues)?void 0:L[v.dimCount-1];null!=J&&null!=H&&(v.minValue=J,v.maxValue=H)}E++;h.addData({pixels:v.pixelData,
statistics:{minValue:v.minValue,maxValue:v.maxValue}});10<g-A&&(v=String.fromCharCode.apply(null,new Uint8Array(p,A,10)),A+=-1<v.indexOf("Lerc")?v.indexOf("Lerc"):0)}A=E=p=0;if(1<m){A=h.width*h.height;t=new Uint8Array(A);t.set(y[0]);for(p=1;p<y.length;p++)for(F=y[p],E=0;E<A;E++)t[E]&=F[E];for(E=F=0;E<A;E++)F+=t[E];h.mask=t}h.validPixelCount=F;return h}function a(p,m){p=T.decode(p,m.pyramidLevel||0);p=new W({width:p.width,height:p.height,pixels:p.pixels,pixelType:p.pixelType.toLowerCase(),mask:p.mask,
statistics:null});p.updateStatistics();return p}function k(p){p=P.decode(p);p=new W({width:p.width,height:p.height,pixels:p.pixels,pixelType:"U8",mask:p.mask,statistics:null});p.updateStatistics();return p}function r(p,m){p=new Uint8Array(p);p=new c(p);const {width:E,height:A}=m;m=E*A;p=p.decode();let F=0;var t=0;let h;t=new Uint8Array(m);for(F=0;F<m;F++)t[F]=p[4*F+3];const g=new W({width:E,height:A,pixels:[],pixelType:"U8",mask:t,statistics:[]});for(F=0;3>F;F++){h=new Uint8Array(m);for(t=0;t<m;t++)h[t]=
p[4*t+F];g.addData({pixels:h})}g.updateStatistics();return g}function q(p,m,E,A){return d.apply(this,arguments)}function d(){d=aa._asyncToGenerator(function*(p,m,E,A){p=yield(new n).decode(p,{applyJpegMask:!1,format:m,...E},A);p=new W(p);p.updateStatistics();return p});return d.apply(this,arguments)}function x(p){if(null==p)throw new Y("rasterCodec:decode","parameter encodeddata is required.");p=new Uint8Array(p,0,10);let m="";255===p[0]&&216===p[1]?m="jpg":137===p[0]&&80===p[1]&&78===p[2]&&71===
p[3]?m="png":67===p[0]&&110===p[1]&&116===p[2]&&90===p[3]&&73===p[4]&&109===p[5]&&97===p[6]&&103===p[7]&&101===p[8]&&32===p[9]?m="lerc":76===p[0]&&101===p[1]&&114===p[2]&&99===p[3]&&50===p[4]&&32===p[5]?m="lerc2":73===p[0]&&73===p[1]&&42===p[2]&&0===p[3]||77===p[0]&&77===p[1]&&0===p[2]&&42===p[3]||73===p[0]&&73===p[1]&&43===p[2]&&0===p[3]||77===p[0]&&77===p[1]&&0===p[2]&&43===p[3]?m="tiff":71===p[0]&&73===p[1]&&70===p[2]?m="gif":66===p[0]&&77===p[1]?m="bmp":-1<String.fromCharCode.apply(null,p).toLowerCase().indexOf("error")&&
(m="error");return m}function w(p){let m=null;switch(p){case "lerc":m=M;break;case "lerc2":m=K;break;case "jpg":m=k;break;case "png":m=r;break;case "bsq":case "bip":m=(E,A)=>{{const {pixelTypeCtor:F}=u(A.pixelType),t=X.decode;E=t(E,{width:A.width,height:A.height,pixelType:F,format:p});A=new W({width:A.width,height:A.height,pixels:E.pixels,pixelType:A.pixelType,mask:E.mask,statistics:null});A.updateStatistics()}return A};break;case "tiff":m=a;break;case "error":m=()=>{throw new Y("rasterCodec:decode",
"input data contains error");};break;default:m=()=>{throw new Y("rasterCodec:decode","unsupported raster format");}}return m}function u(p){let m=null,E=null;switch(p?p.toLowerCase():"f32"){case "u1":case "u2":case "u4":case "u8":E=255;m=Uint8Array;break;case "u16":E=E||65535;m=Uint16Array;break;case "u32":E=E||2**32-1;m=Uint32Array;break;case "s8":E=E||-128;m=Int8Array;break;case "s16":E=E||-32768;m=Int16Array;break;case "s32":E=E||-(2**31);m=Int32Array;break;default:m=Float32Array}return{pixelTypeCtor:m,
noDataValue:E}}function l(p,m=1){if(p){var {pixels:E,width:A,height:F,mask:t}=p;if(E&&0!==E.length){var h=E.length,g=A-1,y=F-1,O=[],e,b,v=W.getPixelArrayConstructor(p.pixelType);if(0===m){for(m=0;m<h;m++){var B=E[m];var z=new v(g*y);for(e=0;e<y;e++){var I=e*A;for(b=0;b<g;b++)z[e*g+b]=B[I+b]}O.push(z)}if(t){var L=new Uint8Array(g*y);for(e=0;e<y;e++)for(I=e*A,b=0;b<g;b++)L[e*g+b]=t[I+b]}}else{for(m=0;m<h;m++){B=E[m];z=new v(g*y);for(e=0;e<y;e++)for(I=e*A,b=0;b<g;b++)z[e*g+b]=(B[I+b]+B[I+b+1]+B[I+A+
b]+B[I+A+b+1])/4;O.push(z)}if(t)for(L=new Uint8Array(g*y),e=0;e<y;e++)for(I=e*A,b=0;b<g;b++)L[e*g+b]=Math.min.apply(null,[t[I+b],t[I+b+1],t[I+A+b],t[I+A+b+1]])}p.width=g;p.height=y;p.mask=L;p.pixels=O}}}function f(){f=aa._asyncToGenerator(function*(p,m={},E){if(null==p)throw new Y("rasterCodec:decode","missing encodeddata parameter.");let A=m.format&&m.format.toLowerCase();if(!("bsq"!==A&&"bip"!==A||null!=m.width&&null!=m.height))throw new Y("rasterCodec:decode","requires width and height in options parameter.");
if("tiff"===A&&m.customOptions)return m=T.decodeTileOrStrip(p,m.customOptions),m=new W({width:m.width,height:m.height,pixels:m.pixels,pixelType:m.pixelType.toLowerCase(),mask:m.mask,statistics:null}),m.updateStatistics(),m;if(!A||"bsq"!==A&&"bip"!==A)A=x(p);m.useCanvas&&C.has(A)?p=yield q(p,A,m,E):(E=w(A),m.isPoint&&(m={...m},m.width++,m.height++),p=E(p,m),m.isPoint&&l(p));return p});return f.apply(this,arguments)}var c=function(p){function m(t){var h,g;this.data=t;this.pos=8;this.palette=[];this.imgData=
[];this.transparency={};this.animation=null;this.text={};for(g=null;;){var y=this.readUInt32();var O=t=void 0;t=[];for(O=0;4>O;++O)t.push(String.fromCharCode(this.data[this.pos++]));t=t.join("");switch(t){case "IHDR":this.width=this.readUInt32();this.height=this.readUInt32();this.bits=this.data[this.pos++];this.colorType=this.data[this.pos++];this.compressionMethod=this.data[this.pos++];this.filterMethod=this.data[this.pos++];this.interlaceMethod=this.data[this.pos++];break;case "acTL":this.animation=
{numFrames:this.readUInt32(),numPlays:this.readUInt32()||Infinity,frames:[]};break;case "PLTE":this.palette=this.read(y);break;case "fcTL":g&&this.animation.frames.push(g);this.pos+=4;g={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()};t=this.readUInt16();y=this.readUInt16()||100;g.delay=1E3*t/y;g.disposeOp=this.data[this.pos++];g.blendOp=this.data[this.pos++];g.data=[];break;case "IDAT":case "fdAT":"fdAT"===t&&(this.pos+=4,y-=4);t=(null!=g?g.data:
void 0)||this.imgData;for(O=0;0<=y?O<y:O>y;0<=y?++O:--O)t.push(this.data[this.pos++]);break;case "tRNS":this.transparency={};switch(this.colorType){case 3:this.transparency.indexed=this.read(y);y=255-this.transparency.indexed.length;if(0<y)for(t=0;0<=y?t<y:t>y;0<=y?++t:--t)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(y)[0];break;case 2:this.transparency.rgb=this.read(y)}break;case "tEXt":O=this.read(y);y=O.indexOf(0);t=String.fromCharCode.apply(String,O.slice(0,
y));this.text[t]=String.fromCharCode.apply(String,O.slice(y+1));break;case "IEND":g&&this.animation.frames.push(g);a:{switch(this.colorType){case 0:case 3:case 4:g=1;break a;case 2:case 6:g=3;break a}g=void 0}this.colors=g;this.hasAlphaChannel=4===(h=this.colorType)||6===h;h=this.colors+(this.hasAlphaChannel?1:0);this.pixelBitlength=this.bits*h;a:{switch(this.colors){case 1:h="DeviceGray";break a;case 3:h="DeviceRGB";break a}h=void 0}this.colorSpace=h;this.imgData=new Uint8Array(this.imgData);return;
default:this.pos+=y}this.pos+=4;if(this.pos>this.data.length)throw Error("Incomplete or corrupt PNG file");}}var E;m.load=function(t,h,g){"function"===typeof h&&(g=h);var y=new XMLHttpRequest;y.open("GET",t,!0);y.responseType="arraybuffer";y.onload=function(){var O=new Uint8Array(y.response||y.mozResponseArrayBuffer);O=new m(O);"function"===typeof(null!=h?h.getContext:void 0)&&O.render(h);return"function"===typeof g?g(O):void 0};return y.send(null)};m.prototype.read=function(t){var h;var g=[];for(h=
0;0<=t?h<t:h>t;0<=t?++h:--h)g.push(this.data[this.pos++]);return g};m.prototype.readUInt32=function(){var t=this.data[this.pos++]<<24;var h=this.data[this.pos++]<<16;var g=this.data[this.pos++]<<8;var y=this.data[this.pos++];return t|h|g|y};m.prototype.readUInt16=function(){var t=this.data[this.pos++]<<8;var h=this.data[this.pos++];return t|h};m.prototype.decodePixels=function(t){var h,g,y,O,e,b,v,B;null==t&&(t=this.imgData);if(0===t.length)return new Uint8Array(0);t=new Q.Zlib(t);t=t.getBytes();
var z=this.pixelBitlength/8;var I=z*this.width;var L=new Uint8Array(I*this.height);var J=t.length;for(g=O=e=0;O<J;){switch(t[O++]){case 0:for(y=h=0;h<I;y=h+=1)L[g++]=t[O++];break;case 1:for(y=b=0;b<I;y=b+=1){h=t[O++];var H=y<z?0:L[g-z];L[g++]=(h+H)%256}break;case 2:for(y=H=0;H<I;y=H+=1){h=t[O++];var N=(y-y%z)/z;b=e&&L[(e-1)*I+N*z+y%z];L[g++]=(b+h)%256}break;case 3:for(y=B=0;B<I;y=B+=1)h=t[O++],N=(y-y%z)/z,H=y<z?0:L[g-z],b=e&&L[(e-1)*I+N*z+y%z],L[g++]=(h+Math.floor((H+b)/2))%256;break;case 4:for(y=
B=0;B<I;y=B+=1){h=t[O++];N=(y-y%z)/z;H=y<z?0:L[g-z];0===e?b=v=0:(b=L[(e-1)*I+N*z+y%z],v=N&&L[(e-1)*I+(N-1)*z+y%z]);var G=H+b-v;y=Math.abs(G-H);N=Math.abs(G-b);G=Math.abs(G-v);H=y<=N&&y<=G?H:N<=G?b:v;L[g++]=(h+H)%256}break;default:throw Error("Invalid filter algorithm: "+t[O-1]);}e++}return L};m.prototype.decodePalette=function(){var t,h,g,y;var O=this.palette;var e=this.transparency.indexed||[];var b=new Uint8Array((e.length||0)+O.length);var v=0;O.length;var B=h=t=0;for(g=O.length;h<g;B=h+=3)b[v++]=
O[B],b[v++]=O[B+1],b[v++]=O[B+2],b[v++]=null!=(y=e[t++])?y:255;return b};m.prototype.copyToImageData=function(t,h){var g,y;var O=this.colors;var e=null;var b=this.hasAlphaChannel;this.palette.length&&(e=null!=(g=this._decodedPalette)?g:this._decodedPalette=this.decodePalette(),O=4,b=!0);t=t.data||t;var v=t.length;var B=e||h;g=y=0;if(1===O)for(;g<v;)O=e?4*h[g/4]:y,y=B[O++],t[g++]=y,t[g++]=y,t[g++]=y,t[g++]=b?B[O++]:this.transparency.grayscale&&this.transparency.grayscale===y?0:255,y=O;else for(;g<
v;)O=e?4*h[g/4]:y,t[g++]=B[O++],t[g++]=B[O++],t[g++]=B[O++],t[g++]=b?B[O++]:this.transparency.rgb&&this.transparency.rgb[1]===B[O-3]&&this.transparency.rgb[3]===B[O-2]&&this.transparency.rgb[5]===B[O-1]?0:255,y=O};m.prototype.decode=function(){var t=new Uint8Array(this.width*this.height*4);this.copyToImageData(t,this.decodePixels());return t};var A=(E=p.document&&p.document.createElement("canvas"))&&E.getContext("2d");var F=function(t){A.width=t.width;A.height=t.height;A.clearRect(0,0,t.width,t.height);
A.putImageData(t,0,0);t=new Image;t.src=E.toDataURL();return t};m.prototype.decodeFrames=function(t){var h,g;if(this.animation){var y=this.animation.frames;var O=[];var e=h=0;for(g=y.length;h<g;e=++h){e=y[e];var b=t.createImageData(e.width,e.height);var v=this.decodePixels(new Uint8Array(e.data));this.copyToImageData(b,v);e.imageData=b;O.push(e.image=F(b))}return O}};m.prototype.renderFrame=function(t,h){var g=this.animation.frames;var y=g[h];g=g[h-1];0===h&&t.clearRect(0,0,this.width,this.height);
1===(null!=g?g.disposeOp:void 0)?t.clearRect(g.xOffset,g.yOffset,g.width,g.height):2===(null!=g?g.disposeOp:void 0)&&t.putImageData(g.imageData,g.xOffset,g.yOffset);0===y.blendOp&&t.clearRect(y.xOffset,y.yOffset,y.width,y.height);return t.drawImage(y.image,y.xOffset,y.yOffset)};m.prototype.animate=function(t){var h,g=this;var y=0;var O=this.animation;var e=O.numFrames;var b=O.frames;var v=O.numPlays;return(h=function(){var B=y++%e;var z=b[B];g.renderFrame(t,B);if(1<e&&y/e<v)return g.animation._timeout=
setTimeout(h,z.delay)})()};m.prototype.stopAnimation=function(){var t;return clearTimeout(null!=(t=this.animation)?t._timeout:void 0)};m.prototype.render=function(t){t._png&&t._png.stopAnimation();t._png=this;t.width=this.width;t.height=this.height;t=t.getContext("2d");if(this.animation)return this.decodeFrames(t),this.animate(t);var h=t.createImageData(this.width,this.height);this.copyToImageData(h,this.decodePixels());return t.putImageData(h,0,0)};return m}(self);const C=new Set(["jpg","png","bmp",
"gif"]);da.decode=function(p){return f.apply(this,arguments)};da.decodeLerc2=K;da.getFormat=function(p){p=x(p);"lerc2"===p?p="lerc":"error"===p&&(p="");return p};Object.defineProperty(da,"__esModule",{value:!0})})},"esri/layers/support/rasterFormats/ImageCanvasDecoder":function(){define(["../../../core/Error","../../../core/promiseUtils","../../../chunks/Zlib"],function(da,aa,Y){return function(){function W(n){n&&(this.canvas=n.canvas,this.ctx=n.ctx||n.canvas&&n.canvas.getContext("2d"))}W.prototype.decode=
function(n,P,T){if(!n||10>n.byteLength)throw new da("imagecanvasdecoder: decode","required a valid encoded data as input.");let {width:V,height:Q,format:X}=P;const {applyJpegMask:D}=P;if(D&&(!V||!Q))throw new da("imagecanvasdecoder: decode","image width and height are needed to apply jpeg mask directly to canvas");return new Promise((M,K)=>{let a=null;"jpg"===X&&D&&(a=W.getMask(n,{width:V,height:Q}));const k=new Blob([new Uint8Array(n)],{type:"jpg"==="image/"+X?"jpeg":X}),r=URL.createObjectURL(k),
q=new Image;let d;q.src=r;q.onload=()=>{URL.revokeObjectURL(r);if(aa.isAborted(T))K(aa.createAbortError());else{V=q.width;Q=q.height;if(this.canvas){if(this.canvas.width!==V||this.canvas.height!==Q)this.canvas.width=V,this.canvas.height=Q;this.ctx.clearRect(0,0,V,Q)}else this.canvas=document.createElement("canvas"),this.canvas.width=V,this.canvas.height=Q,this.ctx=this.canvas.getContext("2d");this.ctx.drawImage(q,0,0);var x=this.ctx.getImageData(0,0,V,Q);d=x.data;var w;if(P.renderOnCanvas){if(a)for(w=
0;w<a.length;w++)d[4*w+3]=a[w]?255:0;this.ctx.putImageData(x,0,0);M(null)}else{x=V*Q;var u=new Uint8Array(x),l=new Uint8Array(x),f=new Uint8Array(x);if(a)for(w=0;w<x;w++)u[w]=d[4*w],l[w]=d[4*w+1],f[w]=d[4*w+2];else for(a=new Uint8Array(x),w=0;w<x;w++)u[w]=d[4*w],l[w]=d[4*w+1],f[w]=d[4*w+2],a[w]=d[4*w+3];M({width:V,height:Q,pixels:[u,l,f],mask:a,pixelType:"u8"})}}};q.onerror=()=>{URL.revokeObjectURL(r);K("cannot load image")}})};W.getMask=function(n,P){let T=null;try{var V=new Uint8Array(n);n=0;var Q=
V.length-2;for(n=Math.ceil(V.length/2);n<Q&&(255!==V[n]||217!==V[n+1]);n++);n+=2;if(n<V.length-1){const X=(new Y.Zlib(V.subarray(n))).getBytes();T=new Uint8Array(P.width*P.height);P=0;for(V=0;V<X.length;V++)for(Q=7;0<=Q;Q--)T[P++]=X[V]>>Q&1}}catch(X){}return T};return W}()})},"esri/chunks/Zlib":function(){define(["exports"],function(da){var aa={exports:{}};(function(Y){(function(W){W=W();void 0!==W&&(Y.exports=W)})(function(){var W=function(){function n(){this.bufferLength=this.pos=0;this.eof=!1;
this.buffer=null}n.prototype={ensureBuffer:function(P){var T=this.buffer,V=T?T.byteLength:0;if(P<V)return T;for(var Q=512;Q<P;)Q<<=1;P=new Uint8Array(Q);for(Q=0;Q<V;++Q)P[Q]=T[Q];return this.buffer=P},getByte:function(){for(var P=this.pos;this.bufferLength<=P;){if(this.eof)return null;this.readBlock()}return this.buffer[this.pos++]},getBytes:function(P){var T=this.pos;if(P){this.ensureBuffer(T+P);for(P=T+P;!this.eof&&this.bufferLength<P;)this.readBlock();var V=this.bufferLength;P>V&&(P=V)}else{for(;!this.eof;)this.readBlock();
P=this.bufferLength}this.pos=P;return this.buffer.subarray(T,P)},lookChar:function(){for(var P=this.pos;this.bufferLength<=P;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos])},getChar:function(){for(var P=this.pos;this.bufferLength<=P;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos++])},makeSubStream:function(P,T,V){for(var Q=P+T;this.bufferLength<=Q&&!this.eof;)this.readBlock();return new Stream(this.buffer,P,T,
V)},skip:function(P){P||(P=1);this.pos+=P},reset:function(){this.pos=0}};return n}();return function(){function n(M){throw Error(M);}function P(M){var K=0,a=M[K++],k=M[K++];-1!=a&&-1!=k||n("Invalid header in flate stream");8!=(a&15)&&n("Unknown compression method in flate stream");0!=((a<<8)+k)%31&&n("Bad FCHECK in flate stream");k&32&&n("FDICT bit set in flate stream");this.bytes=M;this.bytesPos=K;this.codeBuf=this.codeSize=0;W.call(this)}if(!self||!self.Uint32Array)return null;var T=new Uint32Array([16,
17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),V=new Uint32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),Q=new Uint32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),X=[new Uint32Array([459008,524368,524304,524568,459024,524400,
524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59E4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,
524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,
524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,
524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,
524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,
524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,
524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,
524367,590079]),9],D=[new Uint32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5];P.prototype=Object.create(W.prototype);P.prototype.getBits=function(M){for(var K=this.codeSize,a=this.codeBuf,k=this.bytes,r=this.bytesPos,q;K<M;)"undefined"==typeof(q=k[r++])&&n("Bad encoding in flate stream"),a|=q<<K,K+=8;this.codeBuf=a>>M;this.codeSize=
K-=M;this.bytesPos=r;return a&(1<<M)-1};P.prototype.getCode=function(M){var K=M[0],a=M[1];M=this.codeSize;for(var k=this.codeBuf,r=this.bytes,q=this.bytesPos;M<a;){var d;"undefined"==typeof(d=r[q++])&&n("Bad encoding in flate stream");k|=d<<M;M+=8}a=K[k&(1<<a)-1];K=a>>16;a&=65535;(0==M||M<K||0==K)&&n("Bad encoding in flate stream");this.codeBuf=k>>K;this.codeSize=M-K;this.bytesPos=q;return a};P.prototype.generateHuffmanTable=function(M){for(var K=M.length,a=0,k=0;k<K;++k)M[k]>a&&(a=M[k]);for(var r=
1<<a,q=new Uint32Array(r),d=1,x=0,w=2;d<=a;++d,x<<=1,w<<=1)for(var u=0;u<K;++u)if(M[u]==d){var l=0,f=x;for(k=0;k<d;++k)l=l<<1|f&1,f>>=1;for(k=l;k<r;k+=w)q[k]=d<<16|u;++x}return[q,a]};P.prototype.readBlock=function(){function M(l,f,c,C,p){for(l=l.getBits(c)+C;0<l--;)f[x++]=p}var K=this.getBits(3);K&1&&(this.eof=!0);K>>=1;if(0==K){var a=this.bytes,k=this.bytesPos,r;"undefined"==typeof(r=a[k++])&&n("Bad block header in flate stream");var q=r;"undefined"==typeof(r=a[k++])&&n("Bad block header in flate stream");
q|=r<<8;"undefined"==typeof(r=a[k++])&&n("Bad block header in flate stream");K=r;"undefined"==typeof(r=a[k++])&&n("Bad block header in flate stream");(K|r<<8)!=(~q&65535)&&n("Bad uncompressed block length in flate stream");this.codeSize=this.codeBuf=0;r=this.bufferLength;K=this.ensureBuffer(r+q);this.bufferLength=q=r+q;for(var d=r;d<q;++d){if("undefined"==typeof(r=a[k++])){this.eof=!0;break}K[d]=r}this.bytesPos=k}else{if(1==K)k=X,r=D;else if(2==K){K=this.getBits(5)+257;r=this.getBits(5)+1;a=this.getBits(4)+
4;k=Array(T.length);for(var x=0;x<a;)k[T[x++]]=this.getBits(3);k=this.generateHuffmanTable(k);x=a=0;r=K+r;for(q=Array(r);x<r;)d=this.getCode(k),16==d?M(this,q,2,3,a):17==d?M(this,q,3,3,a=0):18==d?M(this,q,7,11,a=0):q[x++]=a=d;k=this.generateHuffmanTable(q.slice(0,K));r=this.generateHuffmanTable(q.slice(K,r))}else n("Unknown block type in flate stream");q=(K=this.buffer)?K.length:0;for(d=this.bufferLength;;){var w=this.getCode(k);if(256>w)d+1>=q&&(K=this.ensureBuffer(d+1),q=K.length),K[d++]=w;else{if(256==
w){this.bufferLength=d;break}w-=257;w=V[w];var u=w>>16;0<u&&(u=this.getBits(u));a=(w&65535)+u;w=this.getCode(r);w=Q[w];u=w>>16;0<u&&(u=this.getBits(u));w=(w&65535)+u;d+a>=q&&(K=this.ensureBuffer(d+a),q=K.length);for(u=0;u<a;++u,++d)K[d]=K[d-w]}}}};return P}()})})(aa);da.Zlib=aa.exports})},"esri/layers/support/rasterFormats/JpgPlus":function(){define(["../../../chunks/Jpg","../../../chunks/Zlib"],function(da,aa){return function(){function Y(){}Y.decode=function(W){var n=new Uint8Array(W);W=new da.JpegImage;
W.parse(n);const {width:P,height:T,numComponents:V,eof:Q}=W;W=W.getData(P,T,!0);let X;const D=P*T;let M=0;var K=0,a=0;if(Q<n.length-1)for(n=(new aa.Zlib(n.subarray(Q))).getBytes(),X=new Uint8Array(D),M=K=0;M<n.length;M++)for(a=7;0<=a;a--)X[K++]=n[M]>>a&1;n=null;if(1===V)n=[W,W,W];else{n=[];for(M=0;3>M;M++)a=new Uint8Array(D),n.push(a);for(K=a=0;K<D;K++)for(M=0;3>M;M++)n[M][K]=W[a++]}return{width:P,height:T,pixels:n,mask:X}};return Y}()})},"esri/chunks/Jpg":function(){define(["exports"],function(da){var aa=
{exports:{}};(function(Y){(function(W){W=W();void 0!==W&&(Y.exports=W)})(function(){var W=function(){function n(P){this.message="JPEG error: "+P}n.prototype=Error();n.prototype.name="JpegError";return n.constructor=n}();return function(){function n(){this.decodeTransform=null;this.colorTransform=-1}function P(D,M){for(var K=0,a=[],k,r,q=16;0<q&&!D[q-1];)q--;a.push({children:[],index:0});var d=a[0],x;for(k=0;k<q;k++){for(r=0;r<D[k];r++){d=a.pop();for(d.children[d.index]=M[K];0<d.index;)d=a.pop();d.index++;
for(a.push(d);a.length<=k;)a.push(x={children:[],index:0}),d.children[d.index]=x.children,d=x;K++}k+1<q&&(a.push(x={children:[],index:0}),d.children[d.index]=x.children,d=x)}return a[0].children}function T(D,M,K,a,k,r,q,d,x){function w(){if(0<h)return h--,t>>h&1;t=D[M++];if(255===t){var G=D[M++];if(G)throw new W("unexpected marker "+(t<<8|G).toString(16));}h=7;return t>>>7}function u(G){for(;;){G=G[w()];if("number"===typeof G)return G;if("object"!==typeof G)throw new W("invalid huffman sequence");
}}function l(G){for(var R=0;0<G;)R=R<<1|w(),G--;return R}function f(G){if(1===G)return 1===w()?1:-1;var R=l(G);return R>=1<<G-1?R:R+(-1<<G)+1}function c(G,R){var U=u(G.huffmanTableDC);U=0===U?0:f(U);G.blockData[R]=G.pred+=U;for(U=1;64>U;){var S=u(G.huffmanTableAC),Z=S&15;S>>=4;if(0===Z){if(15>S)break;U+=16}else U+=S,G.blockData[R+X[U]]=f(Z),U++}}function C(G,R){var U=u(G.huffmanTableDC);U=0===U?0:f(U)<<x;G.blockData[R]=G.pred+=U}function p(G,R){G.blockData[R]|=w()<<x}function m(G,R){if(0<g)g--;else for(var U=
r;U<=q;){var S=u(G.huffmanTableAC),Z=S&15;S>>=4;if(0===Z){if(15>S){g=l(S)+(1<<S)-1;break}U+=16}else U+=S,G.blockData[R+X[U]]=f(Z)*(1<<x),U++}}function E(G,R){for(var U=r,S=0,Z;U<=q;){Z=X[U];switch(y){case 0:S=u(G.huffmanTableAC);Z=S&15;S>>=4;if(0===Z)15>S?(g=l(S)+(1<<S),y=4):(S=16,y=1);else{if(1!==Z)throw new W("invalid ACn encoding");O=f(Z);y=S?2:3}continue;case 1:case 2:G.blockData[R+Z]?G.blockData[R+Z]+=w()<<x:(S--,0===S&&(y=2===y?3:0));break;case 3:G.blockData[R+Z]?G.blockData[R+Z]+=w()<<x:(G.blockData[R+
Z]=O<<x,y=0);break;case 4:G.blockData[R+Z]&&(G.blockData[R+Z]+=w()<<x)}U++}4===y&&(g--,0===g&&(y=0))}var A=K.mcusPerLine,F=M,t=0,h=0,g=0,y=0,O,e=a.length,b,v,B,z;d=K.progressive?0===r?0===d?C:p:0===d?m:E:c;var I=0;K=1===e?a[0].blocksPerLine*a[0].blocksPerColumn:A*K.mcusPerColumn;for(var L,J;I<K;){var H=k?Math.min(K-I,k):K;for(b=0;b<e;b++)a[b].pred=0;g=0;if(1===e){var N=a[0];for(z=0;z<H;z++)d(N,64*((N.blocksPerLine+1)*(I/N.blocksPerLine|0)+I%N.blocksPerLine)),I++}else for(z=0;z<H;z++){for(b=0;b<e;b++)for(N=
a[b],L=N.h,J=N.v,v=0;v<J;v++)for(B=0;B<L;B++)d(N,64*((N.blocksPerLine+1)*((I/A|0)*N.v+v)+(I%A*N.h+B)));I++}h=0;(N=Q(D,M))&&N.invalid&&(console.log("decodeScan - unexpected MCU data, next marker is: "+N.invalid),M=N.offset);N=N&&N.marker;if(!N||65280>=N)throw new W("marker was not found");if(65488<=N&&65495>=N)M+=2;else break}(N=Q(D,M))&&N.invalid&&(console.log("decodeScan - unexpected Scan data, next marker is: "+N.invalid),M=N.offset);return M-F}function V(D,M){D=M.blocksPerLine;for(var K=M.blocksPerColumn,
a=new Int16Array(64),k=0;k<K;k++)for(var r=0;r<D;r++){var q=void 0,d=void 0,x=void 0,w=void 0,u=void 0,l=void 0,f=void 0,c=void 0,C=u=l=w=d=q=void 0,p=void 0,m=void 0,E=void 0,A=64*((M.blocksPerLine+1)*k+r),F=a,t=M.quantizationTable,h=M.blockData;if(!t)throw new W("missing required Quantization Table.");for(var g=0;64>g;g+=8)q=h[A+g],c=h[A+g+1],f=h[A+g+2],l=h[A+g+3],u=h[A+g+4],w=h[A+g+5],x=h[A+g+6],d=h[A+g+7],q*=t[g],0===(c|f|l|u|w|x|d)?(q=5793*q+512>>10,F[g]=q,F[g+1]=q,F[g+2]=q,F[g+3]=q,F[g+4]=q,
F[g+5]=q,F[g+6]=q,F[g+7]=q):(c*=t[g+1],f*=t[g+2],l*=t[g+3],u*=t[g+4],w*=t[g+5],x*=t[g+6],d*=t[g+7],E=5793*q+128>>8,m=5793*u+128>>8,p=f,C=x,u=2896*(c-d)+128>>8,d=2896*(c+d)+128>>8,l<<=4,w<<=4,E=E+m+1>>1,m=E-m,q=3784*p+1567*C+128>>8,p=1567*p-3784*C+128>>8,C=q,u=u+w+1>>1,w=u-w,d=d+l+1>>1,l=d-l,E=E+C+1>>1,C=E-C,m=m+p+1>>1,p=m-p,q=2276*u+3406*d+2048>>12,u=3406*u-2276*d+2048>>12,d=q,q=799*l+4017*w+2048>>12,l=4017*l-799*w+2048>>12,w=q,F[g]=E+d,F[g+7]=E-d,F[g+1]=m+w,F[g+6]=m-w,F[g+2]=p+l,F[g+5]=p-l,F[g+3]=
C+u,F[g+4]=C-u);for(t=0;8>t;++t)q=F[t],c=F[t+8],f=F[t+16],l=F[t+24],u=F[t+32],w=F[t+40],x=F[t+48],d=F[t+56],0===(c|f|l|u|w|x|d)?(q=5793*q+8192>>14,q=-2040>q?0:2024<=q?255:q+2056>>4,h[A+t]=q,h[A+t+8]=q,h[A+t+16]=q,h[A+t+24]=q,h[A+t+32]=q,h[A+t+40]=q,h[A+t+48]=q,h[A+t+56]=q):(E=5793*q+2048>>12,m=5793*u+2048>>12,p=f,C=x,u=2896*(c-d)+2048>>12,d=2896*(c+d)+2048>>12,E=(E+m+1>>1)+4112,m=E-m,q=3784*p+1567*C+2048>>12,p=1567*p-3784*C+2048>>12,C=q,u=u+w+1>>1,w=u-w,d=d+l+1>>1,l=d-l,E=E+C+1>>1,C=E-C,m=m+p+1>>
1,p=m-p,q=2276*u+3406*d+2048>>12,u=3406*u-2276*d+2048>>12,d=q,q=799*l+4017*w+2048>>12,l=4017*l-799*w+2048>>12,w=q,q=E+d,d=E-d,c=m+w,x=m-w,f=p+l,w=p-l,l=C+u,u=C-u,q=16>q?0:4080<=q?255:q>>4,c=16>c?0:4080<=c?255:c>>4,f=16>f?0:4080<=f?255:f>>4,l=16>l?0:4080<=l?255:l>>4,u=16>u?0:4080<=u?255:u>>4,w=16>w?0:4080<=w?255:w>>4,x=16>x?0:4080<=x?255:x>>4,d=16>d?0:4080<=d?255:d>>4,h[A+t]=q,h[A+t+8]=c,h[A+t+16]=f,h[A+t+24]=l,h[A+t+32]=u,h[A+t+40]=w,h[A+t+48]=x,h[A+t+56]=d)}return M.blockData}function Q(D,M,K){var a=
D.length-1;K=K<M?K:M;if(M>=a)return null;var k=D[M]<<8|D[M+1];if(65472<=k&&65534>=k)return{invalid:null,marker:k,offset:M};for(M=D[K]<<8|D[K+1];!(65472<=M&&65534>=M);){if(++K>=a)return null;M=D[K]<<8|D[K+1]}return{invalid:k.toString(16),marker:M,offset:K}}if(!self||!self.Uint8ClampedArray)return null;var X=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,
63]);n.prototype={parse:function(D){function M(){var t=D[k]<<8|D[k+1];k+=2;return t}function K(){var t=M();t=k+t-2;var h=Q(D,t,k);h&&h.invalid&&(console.log("readDataBlock - incorrect length, next marker is: "+h.invalid),t=h.offset);t=D.subarray(k,t);k+=t.length;return t}function a(t){for(var h=Math.ceil(t.samplesPerLine/8/t.maxH),g=Math.ceil(t.scanLines/8/t.maxV),y=0;y<t.components.length;y++){F=t.components[y];var O=Math.ceil(Math.ceil(t.samplesPerLine/8)*F.h/t.maxH),e=Math.ceil(Math.ceil(t.scanLines/
8)*F.v/t.maxV);F.blockData=new Int16Array(64*g*F.v*(h*F.h+1));F.blocksPerLine=O;F.blocksPerColumn=e}t.mcusPerLine=h;t.mcusPerColumn=g}var k=0,r=null,q=null,d=[],x=[],w=[],u=M();if(65496!==u)throw new W("SOI not found");for(u=M();65497!==u;){switch(u){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var l=K();65504===u&&74===l[0]&&70===l[1]&&73===l[2]&&70===l[3]&&
0===l[4]&&(r={version:{major:l[5],minor:l[6]},densityUnits:l[7],xDensity:l[8]<<8|l[9],yDensity:l[10]<<8|l[11],thumbWidth:l[12],thumbHeight:l[13],thumbData:l.subarray(14,14+3*l[12]*l[13])});65518===u&&65===l[0]&&100===l[1]&&111===l[2]&&98===l[3]&&101===l[4]&&(q={version:l[5]<<8|l[6],flags0:l[7]<<8|l[8],flags1:l[9]<<8|l[10],transformCode:l[11]});break;case 65499:u=M()+k-2;for(var f;k<u;){var c=D[k++],C=new Uint16Array(64);if(0===c>>4)for(l=0;64>l;l++)f=X[l],C[f]=D[k++];else if(1===c>>4)for(l=0;64>l;l++)f=
X[l],C[f]=M();else throw new W("DQT - invalid table spec");d[c&15]=C}break;case 65472:case 65473:case 65474:if(p)throw new W("Only single frame JPEGs supported");M();var p={};p.extended=65473===u;p.progressive=65474===u;p.precision=D[k++];p.scanLines=M();p.samplesPerLine=M();p.components=[];p.componentIds={};l=D[k++];for(u=C=c=0;u<l;u++){f=D[k];var m=D[k+1]>>4;var E=D[k+1]&15;c<m&&(c=m);C<E&&(C=E);m=p.components.push({h:m,v:E,quantizationId:D[k+2],quantizationTable:null});p.componentIds[f]=m-1;k+=
3}p.maxH=c;p.maxV=C;a(p);break;case 65476:f=M();for(u=2;u<f;){c=D[k++];C=new Uint8Array(16);for(l=m=0;16>l;l++,k++)m+=C[l]=D[k];E=new Uint8Array(m);for(l=0;l<m;l++,k++)E[l]=D[k];u+=17+m;(0===c>>4?w:x)[c&15]=P(C,E)}break;case 65501:M();var A=M();break;case 65498:M();f=D[k++];l=[];for(u=0;u<f;u++){c=p.componentIds[D[k++]];var F=p.components[c];c=D[k++];F.huffmanTableDC=w[c>>4];F.huffmanTableAC=x[c&15];l.push(F)}u=D[k++];f=D[k++];c=D[k++];u=T(D,k,p,l,A,u,f,c>>4,c&15);k+=u;break;case 65535:255!==D[k]&&
k--;break;default:if(255===D[k-3]&&192<=D[k-2]&&254>=D[k-2])k-=3;else throw new W("unknown marker "+u.toString(16));}u=M()}this.width=p.samplesPerLine;this.height=p.scanLines;this.jfif=r;this.eof=k;this.adobe=q;this.components=[];for(u=0;u<p.components.length;u++){F=p.components[u];if(r=d[F.quantizationId])F.quantizationTable=r;this.components.push({output:V(p,F),scaleX:F.h/p.maxH,scaleY:F.v/p.maxV,blocksPerLine:F.blocksPerLine,blocksPerColumn:F.blocksPerColumn})}this.numComponents=this.components.length},
_getLinearizedBlockData:function(D,M){var K=this.width/D,a=this.height/M,k,r,q=0,d=this.components.length,x=D*M*d,w=new Uint8ClampedArray(x),u=new Uint32Array(D);for(r=0;r<d;r++){var l=this.components[r];var f=l.scaleX*K;var c=l.scaleY*a;q=r;var C=l.output;var p=l.blocksPerLine+1<<3;for(k=0;k<D;k++)l=0|k*f,u[k]=(l&4294967288)<<3|l&7;for(f=0;f<M;f++)for(l=0|f*c,l=p*(l&4294967288)|(l&7)<<3,k=0;k<D;k++)w[q]=C[l+u[k]],q+=d}if(M=this.decodeTransform)for(r=0;r<x;)for(D=l=0;l<d;l++,r++,D+=2)w[r]=(w[r]*M[D]>>
8)+M[D+1];return w},_isColorConversionNeeded:function(){return this.adobe?!!this.adobe.transformCode:3===this.numComponents?0===this.colorTransform?!1:!0:1===this.colorTransform?!0:!1},_convertYccToRgb:function(D){for(var M,K,a,k=0,r=D.length;k<r;k+=3)M=D[k],K=D[k+1],a=D[k+2],D[k]=M-179.456+1.402*a,D[k+1]=M+135.459-.344*K-.714*a,D[k+2]=M-226.816+1.772*K;return D},_convertYcckToRgb:function(D){for(var M,K,a,k,r=0,q=0,d=D.length;q<d;q+=4)M=D[q],K=D[q+1],a=D[q+2],k=D[q+3],D[r++]=-122.67195406894+K*(-6.60635669420364E-5*
K+4.37130475926232E-4*a-5.4080610064599E-5*M+4.8449797120281E-4*k-.154362151871126)+a*(-9.57964378445773E-4*a+8.17076911346625E-4*M-.00477271405408747*k+1.53380253221734)+M*(9.61250184130688E-4*M-.00266257332283933*k+.48357088451265)+k*(-3.36197177618394E-4*k+.484791561490776),D[r++]=107.268039397724+K*(2.19927104525741E-5*K-6.40992018297945E-4*a+6.59397001245577E-4*M+4.26105652938837E-4*k-.176491792462875)+a*(-7.78269941513683E-4*a+.00130872261408275*M+7.70482631801132E-4*k-.151051492775562)+M*(.00126935368114843*
M-.00265090189010898*k+.25802910206845)+k*(-3.18913117588328E-4*k-.213742400323665),D[r++]=-20.810012546947+K*(-5.70115196973677E-4*K-2.63409051004589E-5*a+.0020741088115012*M-.00288260236853442*k+.814272968359295)+a*(-1.53496057440975E-5*a-1.32689043961446E-4*M+5.60833691242812E-4*k-.195152027534049)+M*(.00174418132927582*M-.00255243321439347*k+.116935020465145)+k*(-3.43531996510555E-4*k+.24165260232407);return D},_convertYcckToCmyk:function(D){for(var M,K,a,k=0,r=D.length;k<r;k+=4)M=D[k],K=D[k+
1],a=D[k+2],D[k]=434.456-M-1.402*a,D[k+1]=119.541-M+.344*K+.714*a,D[k+2]=481.816-M-1.772*K;return D},_convertCmykToRgb:function(D){for(var M,K,a,k,r=0,q=1/255,d=0,x=D.length;d<x;d+=4)M=D[d]*q,K=D[d+1]*q,a=D[d+2]*q,k=D[d+3]*q,D[r++]=255+M*(-4.387332384609988*M+54.48615194189176*K+18.82290502165302*a+212.25662451639585*k-285.2331026137004)+K*(1.7149763477362134*K-5.6096736904047315*a-17.873870861415444*k-5.497006427196366)+a*(-2.5217340131683033*a-21.248923337353073*k+17.5119270841813)-k*(21.86122147463605*
k+189.48180835922747),D[r++]=255+M*(8.841041422036149*M+60.118027045597366*K+6.871425592049007*a+31.159100130055922*k-79.2970844816548)+K*(-15.310361306967817*K+17.575251261109482*a+131.35250912493976*k-190.9453302588951)+a*(4.444339102852739*a+9.8632861493405*k-24.86741582555878)-k*(20.737325471181034*k+187.80453709719578),D[r++]=255+M*(.8842522430003296*M+8.078677503112928*K+30.89978309703729*a-.23883238689178934*k-14.183576799673286)+K*(10.49593273432072*K+63.02378494754052*a+50.606957656360734*
k-112.23884253719248)+a*(.03296041114873217*a+115.60384449646641*k-193.58209356861505)-k*(22.33816807309886*k+180.12613974708367);return D},getData:function(D,M,K){if(4<this.numComponents)throw new W("Unsupported color mode");D=this._getLinearizedBlockData(D,M);if(1===this.numComponents&&K){K=D.length;M=new Uint8ClampedArray(3*K);for(var a=0,k=0;k<K;k++){var r=D[k];M[a++]=r;M[a++]=r;M[a++]=r}return M}if(3===this.numComponents&&this._isColorConversionNeeded())return this._convertYccToRgb(D);if(4===
this.numComponents){if(this._isColorConversionNeeded())return K?this._convertYcckToRgb(D):this._convertYcckToCmyk(D);if(K)return this._convertCmykToRgb(D)}return D}};return n}()})})(aa);da.JpegImage=aa.exports})},"esri/chunks/TiffDecoder":function(){define("exports ../layers/support/rasterDatasets/byteStreamUtils ./Jpg ../layers/support/rasterFormats/Lzw ../layers/support/rasterFormats/TiffTags ../layers/support/rasterFormats/utils ./Zlib".split(" "),function(da,aa,Y,W,n,P,T){function V(h,g){let y=
"unknown";3===h?y="f32":1===h?1===g?y="u1":2===g?y="u2":4===g?y="u4":8>=g?y="u8":16>=g?y="u16":32>=g&&(y="u32"):2===h&&(8>=g?y="s8":16>=g?y="s16":32>=g&&(y="s32"));return y}function Q(h){let g=null;switch(h?h.toLowerCase():"f32"){case "u1":case "u2":case "u4":case "u8":g=Uint8Array;break;case "u16":g=Uint16Array;break;case "u32":g=Uint32Array;break;case "s8":g=Int8Array;break;case "s16":g=Int16Array;break;case "s32":g=Int32Array;break;default:g=Float32Array}return g}function X(h,g){return{x:g[0]*
h.x+g[1]*h.y+g[2],y:g[3]*h.x+g[4]*h.y+g[5]}}function D(h,g){var y;return null==(y=h.get(g))?void 0:y.values}function M(h,g){var y;return null==(y=h.get(g))?void 0:y.values}function K(h,g){var y;return null==(y=h.get(g))?void 0:y.values[0]}function a(h,g){var y;return null==(y=h.get(g))?void 0:y.values[0]}function k(h,g,y,O=0,e=n.TIFF_TAGS,b=4){var v=8===b;const B=v?w(new DataView(h,y,8),0,g):(new DataView(h,y,2)).getUint16(0,g),z=4+2*b;var I=v?8:2;v=I+B*z;if(y+v>h.byteLength)return{success:!1,ifd:null,
nextIFD:null,requiredBufferSize:v};const L=y+v+4<=h.byteLength?u(new DataView(h,y+v,8===b?8:4),0,g,8===b):null;y+=I;I=new Map;let J,H,N,G,R;for(let S=0;S<B;S++){var U=new DataView(h,y+z*S,z);J=U.getUint16(0,g);N=U.getUint16(2,g);H=n.getTagName(J,e);const Z=[];2===b?(G=U.getUint16(4,g),R=U.getUint16(6,g)):4===b?(G=U.getUint32(4,g),R=U.getUint32(8,g)):8===b&&(G=u(U,4,g,!0),R=u(U,12,g,!0),Z.push(U.getUint32(12,g)),Z.push(U.getUint32(16,g)));U={id:J,type:N,valueCount:G,valueOffset:R,valueOffsets:Z,values:null};
r(h,g,U,O,!1,b);I.set(H,U)}return{success:!0,ifd:I,nextIFD:L,requiredBufferSize:v}}function r(h,g,y,O=0,e=!1,b=4){if(y.values)return!0;var v=y.type,B=y.valueCount,z=y.valueOffset;let I=[];var L=m[v],J=8*L,H=B*L,N=B*m[v]*8,G=8===b?64:32;b=y.valueOffsets;if(N>G&&H>(e?h.byteLength:h?h.byteLength-z+O:0))return y.offlineOffsetSize=[z,H],y.values=null,!1;if(N<=G)if(g||(32>=G?z>>>=32-N:(h=null!=b&&b.length?b[0]:z>>>0,g=null!=b&&b.length?b[1]:Math.round((z-h)/4294967296),32>=N?(z=h>>>32-N,b[0]=z):(z=h*2**
(32-N)+(g>>>32-N),b[0]=h,b[1]=g>>>32-N))),1===B&&J===G)I=[z];else if(64===G)for(h=null!=b&&b.length?b[0]:z>>>0,z=null!=b&&b.length?b[1]:Math.round((z-h)/4294967296),g=h,L=32,h=1;h<=B;h++)H=32-J*h%32,L<J?(H=g<<H>>>32-L,N=z<<32-L>>>32-L,g=z,I.push(H+N*2**(J-L)),L-=32-(J-L)):(I.push(g<<H>>>32-J),L-=J),0===L&&(L=32,g=z);else for(h=1;h<=B;h++)I.push(z<<32-J*h>>>32-J);else for(z-=O,e&&(z=0),B=z;B<z+H;B+=L){switch(v){case 1:J=(new DataView(h,B,1)).getUint8(0);break;case 2:J=(new DataView(h,B,1)).getUint8(0);
break;case 3:J=(new DataView(h,B,2)).getUint16(0,g);break;case 4:case 13:J=(new DataView(h,B,4)).getUint32(0,g);break;case 5:J=(new DataView(h,B,4)).getUint32(0,g)/(new DataView(h,B+4,4)).getUint32(0,g);break;case 6:J=(new DataView(h,B,1)).getInt8(0);break;case 7:J=(new DataView(h,B,1)).getUint8(0);break;case 8:J=(new DataView(h,B,2)).getInt16(0,g);break;case 9:J=(new DataView(h,B,4)).getInt32(0,g);break;case 10:J=(new DataView(h,B,4)).getInt32(0,g)/(new DataView(h,B+4,4)).getInt32(0,g);break;case 11:J=
(new DataView(h,B,4)).getFloat32(0,g);break;case 12:J=(new DataView(h,B,8)).getFloat64(0,g);break;case 16:case 18:J=w(new DataView(h,B,8),0,g);break;case 17:b=new DataView(h,B,8);N=(J=g)?b.getInt32(0,J):b.getUint32(0,J);b=J?b.getUint32(4,J):b.getInt32(4,J);G=0<=(J?N:b)?1:-1;J?N*=G:b*=G;J=G*(J?4294967296*b+N:4294967296*N+b);break;default:J=null}I.push(J)}if(2===v){v="";z=I;I=[];for(h=0;h<z.length;h++)0===z[h]&&""!==v?(I.push(v),v=""):v+=String.fromCharCode(z[h]);""===v&&0!==I.length||I.push(v)}y.values=
I;return!0}function q(h){var g,y,O=h[0];const e=a(O,"TILEWIDTH"),b=a(O,"TILELENGTH"),v=a(O,"IMAGEWIDTH"),B=a(O,"IMAGELENGTH");var z=a(O,"BITSPERSAMPLE");const I=a(O,"SAMPLESPERPIXEL");var L=null!=(g=a(O,"SAMPLEFORMAT"))?g:1;g=V(L,z);const J=d(O);var H=D(O,"GDAL_NODATA");let N;null!=H&&H.length&&(N=H.map(ja=>parseFloat(ja)),N.some(ja=>isNaN(ja))&&(N=null));var G=null!=(y=a(O,"COMPRESSION"))?y:1;switch(G){case 1:y="NONE";break;case 2:case 3:case 4:case 32771:y="CCITT";break;case 5:y="LZW";break;case 6:case 7:y=
"JPEG";break;case 32773:y="PACKBITS";break;case 8:case 32946:y="DEFLATE";break;case 34712:y="JPEG2000";break;case 34887:y="LERC";break;default:y=String(G)}H=!0;let R="";E.has(G)||(H=!1,R+="unsupported tag compression "+G);3<L&&(H=!1,R+="unsupported tag sampleFormat "+L);0!==z%8&&(H=!1,R+="unsupported tag bitsPerSample "+z);z=K(O,"GEOASCIIPARAMS");if(z){var U=(U=z.split("|").filter(ja=>-1<ja.indexOf("ESRI PE String \x3d "))[0])?U.replace("ESRI PE String \x3d ",""):"";U=U.startsWith("COMPD_CS")||U.startsWith("PROJCS")||
U.startsWith("GEOGCS")?{wkid:null,wkt:U}:null}L=M(O,"GEOTIEPOINTS");z=M(O,"GEOPIXELSCALE");G=M(O,"GEOTRANSMATRIX");var S=O.has("GEOKEYDIRECTORY")?O.get("GEOKEYDIRECTORY").data:null;O=!1;if(S){O=2===a(S,"GTRasterTypeGeoKey");var Z=a(S,"GTModelTypeGeoKey");2===Z?(S=a(S,"GeographicTypeGeoKey"),1024<=S&&32766>=S&&(U={wkid:S})):1===Z&&(S=a(S,"ProjectedCSTypeGeoKey"),1024<=S&&32766>=S&&(U={wkid:S}))}let ba;z&&L&&6<=L.length?(ba=[z[0],0,L[3]-L[0]*z[0],0,-Math.abs(z[1]),L[4]-L[1]*z[1]],O&&(ba[2]-=.5*ba[0]+
.5*ba[1],ba[5]-=.5*ba[3]+.5*ba[4])):G&&16===G.length&&(ba=O?[G[0],G[1],G[3]-.5*G[0],G[4],G[5],G[7]-.5*G[5]]:[G[0],G[1],G[3],G[4],G[5],G[7]]);if(ba){O=[{x:0,y:B},{x:0,y:0},{x:v,y:B},{x:v,y:0}];S=G=Number.POSITIVE_INFINITY;let ja=Z=Number.NEGATIVE_INFINITY;for(let ca=0;ca<O.length;ca++)L=X(O[ca],ba),G=L.x>G?G:L.x,Z=L.x<Z?Z:L.x,S=L.y>S?S:L.y,ja=L.y<ja?ja:L.y;U={xmin:G,xmax:Z,ymin:S,ymax:ja,spatialReference:U}}else U={xmin:-.5,ymin:.5-B,xmax:v-.5,ymax:.5,spatialReference:U};O=h.filter(ja=>1===K(ja,"NEWSUBFILETYPE"));
let fa,ka,ha;if(0<O.length){fa=Math.round(Math.log(v/a(O[0],"IMAGEWIDTH"))/Math.LN2);var ea=O[O.length-1];ka=Math.round(Math.log(v/a(ea,"IMAGEWIDTH"))/Math.LN2);ha=a(ea,"TILEWIDTH");ea=a(ea,"TILELENGTH")}ha=0<ka?ha||e:null;ea=0<ka?ea||b:null;let la;e&&(la=[{maxCol:Math.ceil(v/e)-1,maxRow:Math.ceil(B/b)-1,minRow:0,minCol:0}],O.forEach(ja=>{la.push({maxCol:Math.ceil(a(ja,"IMAGEWIDTH")/a(ja,"TILEWIDTH"))-1,maxRow:Math.ceil(a(ja,"IMAGELENGTH")/a(ja,"TILELENGTH"))-1,minRow:0,minCol:0})}));O=K(h[0],"GDAL_METADATA");
O=t(O);R+=" "+c({width:v,height:B,tileWidth:e,tileHeight:b,planes:I,ifds:h});return{width:v,height:B,tileWidth:e,tileHeight:b,planes:I,isBSQ:J,pixelType:g,compression:y,noData:N,isSupported:H,message:R,extent:U,affine:z?null:ba,firstPyramidLevel:fa,maximumPyramidLevel:ka,pyramidBlockWidth:ha,pyramidBlockHeight:ea,tileBoundary:la,metadata:O}}function d(h,g){return(h=D(h,"PLANARCONFIGURATION"))?2===h[0]:g?g.isBSQ:!1}function x(h){const {littleEndian:g,isBigTiff:y,firstIFD:O}=l(h);var e=O;const b=[];
do if(e=f(h,g,e,0,n.TIFF_TAGS,y?8:4),e.success)b.push(e.ifd),e=e.nextIFD;else break;while(0<e);return{...q(b),littleEndian:g,isBigTiff:y,ifds:b}}function w(h,g,y){const O=h.getUint32(g,y);h=h.getUint32(g+4,y);return y?4294967296*h+O:4294967296*O+h}function u(h,g,y,O){return O?w(h,g,y):h.getUint32(g,y)}function l(h){var g=new DataView(h,0,16),y=g.getUint16(0,!1);h=null;if(18761===y)h=!0;else if(19789===y)h=!1;else throw"unexpected endianess byte";var O=g.getUint16(2,h);if(42!==O&&43!==O)throw"unexpected tiff identifier";
y=4;if(O=43===O){const e=g.getUint16(y,h);y+=2;if(8!==e)throw"unsupported bigtiff version";if(0!==g.getUint16(y,h))throw"unsupported bigtiff version";y+=2}g=u(g,y,h,O);return{littleEndian:h,isBigTiff:O,firstIFD:g}}function f(h,g,y,O=0,e=n.TIFF_TAGS,b=4){y=k(h,g,y,O,e,b);let v;const B=y.ifd;B&&(n.ifdTags.forEach((z,I)=>{B.has(I)&&(v=B.get(I),v.data=k(h,g,v.valueOffset-O,O,z).ifd)}),B.has("GEOKEYDIRECTORY")&&(v=B.get("GEOKEYDIRECTORY"),(e=v.values)&&4<e.length&&(e=e[0]+"."+e[1]+"."+e[2],v.data=k(h,
g,v.valueOffset+6-O,O,n.GEO_KEYS,2).ifd,v.data&&v.data.set("GEOTIFFVersion",{id:0,type:2,valueCount:1,valueOffset:null,values:[e]}))),B.has("XMP")&&(v=B.get("XMP"),e=v.values,"number"===typeof e[0]&&7===v.type&&(v.values=[aa.bytesToUTF8(new Uint8Array(e))])));return y}function c(h){const {width:g,height:y,tileHeight:O,tileWidth:e}=h,b=h.planes,v=e?e*O:g*y;h=a(h.ifds[0],"BITSPERSAMPLE");let B="";v*b>2**30/(8<h?h/8:1)&&(B=e?"tiled tiff exceeding 1 gigabits per tile is not supported":"scanline tiff exceeding 1 gigabits is not supported");
return B}var C={exports:{}};(function(h){(function(g){g=g();void 0!==g&&(h.exports=g)})(function(){var g={unstuff:function(e,b,v,B,z,I,L,J){var H=(1<<v)-1,N=0,G,R=0;e[e.length-1]<<=8*(4*e.length-Math.ceil(v*B/8));if(z)for(G=0;G<B;G++){if(0===R){var U=e[N++];R=32}if(R>=v){var S=U>>>R-v&H;R-=v}else R=v-R,S=(U&H)<<R&H,U=e[N++],R=32-R,S+=U>>>R;b[G]=z[S]}else for(z=Math.ceil((J-I)/L),G=0;G<B;G++)0===R&&(U=e[N++],R=32),R>=v?(S=U>>>R-v&H,R-=v):(R=v-R,S=(U&H)<<R&H,U=e[N++],R=32-R,S+=U>>>R),b[G]=S<z?I+S*L:
J},unstuffLUT:function(e,b,v,B,z,I){var L=(1<<b)-1,J=0,H=0,N=0,G=N=0,R=[];e[e.length-1]<<=8*(4*e.length-Math.ceil(b*v/8));var U=Math.ceil((I-B)/z);for(H=0;H<v;H++){if(0===N){var S=e[J++];N=32}N>=b?(G=S>>>N-b&L,N-=b):(N=b-N,G=(S&L)<<N&L,S=e[J++],N=32-N,G+=S>>>N);R[H]=G<U?B+G*z:I}R.unshift(B);return R},unstuff2:function(e,b,v,B,z,I,L,J){var H=(1<<v)-1,N=0,G,R=0,U=0;if(z)for(G=0;G<B;G++){if(0===R){var S=e[N++];R=32;U=0}if(R>=v){var Z=S>>>U&H;R-=v;U+=v}else{var ba=v-R;Z=S>>>U&H;S=e[N++];R=32-ba;Z|=(S&
(1<<ba)-1)<<v-ba;U=ba}b[G]=z[Z]}else for(z=Math.ceil((J-I)/L),G=0;G<B;G++)0===R&&(S=e[N++],R=32,U=0),R>=v?(Z=S>>>U&H,R-=v,U+=v):(ba=v-R,Z=S>>>U&H,S=e[N++],R=32-ba,Z|=(S&(1<<ba)-1)<<v-ba,U=ba),b[G]=Z<z?I+Z*L:J;return b},unstuffLUT2:function(e,b,v,B,z,I){var L=(1<<b)-1,J=0,H=0,N=0,G=0,R=0,U=0,S=[],Z=Math.ceil((I-B)/z);for(H=0;H<v;H++){if(0===G){var ba=e[J++];G=32;U=0}G>=b?(R=ba>>>U&L,G-=b,U+=b):(N=b-G,R=ba>>>U&L,ba=e[J++],G=32-N,R|=(ba&(1<<N)-1)<<b-N,U=N);S[H]=R<Z?B+R*z:I}S.unshift(B);return S},originalUnstuff:function(e,
b,v,B){var z=(1<<v)-1,I=0,L,J=0;e[e.length-1]<<=8*(4*e.length-Math.ceil(v*B/8));for(L=0;L<B;L++){if(0===J){var H=e[I++];J=32}if(J>=v){var N=H>>>J-v&z;J-=v}else J=v-J,N=(H&z)<<J&z,H=e[I++],J=32-J,N+=H>>>J;b[L]=N}return b},originalUnstuff2:function(e,b,v,B){var z=(1<<v)-1,I=0,L,J=0,H=0;for(L=0;L<B;L++){if(0===J){var N=e[I++];J=32;H=0}if(J>=v){var G=N>>>H&z;J-=v;H+=v}else{var R=v-J;G=N>>>H&z;N=e[I++];J=32-R;G|=(N&(1<<R)-1)<<v-R;H=R}b[L]=G}return b}},y={HUFFMAN_LUT_BITS_MAX:12,computeChecksumFletcher32:function(e){for(var b=
65535,v=65535,B=e.length,z=Math.floor(B/2),I=0;z;){var L=359<=z?359:z;z-=L;do b+=e[I++]<<8,v+=b+=e[I++];while(--L);b=(b&65535)+(b>>>16);v=(v&65535)+(v>>>16)}B&1&&(v+=b+=e[I]<<8);return((v&65535)+(v>>>16)<<16|(b&65535)+(b>>>16))>>>0},readHeaderInfo:function(e,b){var v=b.ptr,B=new Uint8Array(e,v,6),z={};z.fileIdentifierString=String.fromCharCode.apply(null,B);if(0!==z.fileIdentifierString.lastIndexOf("Lerc2",0))throw"Unexpected file identifier string (expect Lerc2 ): "+z.fileIdentifierString;v+=6;B=
new DataView(e,v,8);var I=B.getInt32(0,!0);z.fileVersion=I;v+=4;3<=I&&(z.checksum=B.getUint32(4,!0),v+=4);B=new DataView(e,v,12);z.height=B.getUint32(0,!0);z.width=B.getUint32(4,!0);v+=8;4<=I?(z.numDims=B.getUint32(8,!0),v+=4):z.numDims=1;B=new DataView(e,v,40);z.numValidPixel=B.getUint32(0,!0);z.microBlockSize=B.getInt32(4,!0);z.blobSize=B.getInt32(8,!0);z.imageType=B.getInt32(12,!0);z.maxZError=B.getFloat64(16,!0);z.zMin=B.getFloat64(24,!0);z.zMax=B.getFloat64(32,!0);v+=40;b.headerInfo=z;b.ptr=
v;if(3<=I&&(e=this.computeChecksumFletcher32(new Uint8Array(e,v-(4<=I?52:48),z.blobSize-14)),e!==z.checksum))throw"Checksum failed.";return!0},checkMinMaxRanges:function(e,b){var v=b.headerInfo,B=this.getDataTypeArray(v.imageType),z=v.numDims*this.getDataTypeSize(v.imageType),I=this.readSubArray(e,b.ptr,B,z);e=this.readSubArray(e,b.ptr+z,B,z);b.ptr+=2*z;z=!0;for(b=0;b<v.numDims;b++)if(I[b]!==e[b]){z=!1;break}v.minValues=I;v.maxValues=e;return z},readSubArray:function(e,b,v,B){if(v===Uint8Array)e=
new Uint8Array(e,b,B);else{var z=new ArrayBuffer(B);(new Uint8Array(z)).set(new Uint8Array(e,b,B));e=new v(z)}return e},readMask:function(e,b){var v=b.ptr,B=b.headerInfo,z=B.width*B.height,I=B.numValidPixel,L=new DataView(e,v,4);B={};B.numBytes=L.getUint32(0,!0);v+=4;if((0===I||z===I)&&0!==B.numBytes)throw"invalid mask";if(0===I)I=new Uint8Array(Math.ceil(z/8)),B.bitset=I,L=new Uint8Array(z),b.pixels.resultMask=L,v+=B.numBytes;else if(0<B.numBytes){I=new Uint8Array(Math.ceil(z/8));L=new DataView(e,
v,B.numBytes);e=L.getInt16(0,!0);var J=2,H=0,N=0;do{if(0<e)for(;e--;)I[H++]=L.getUint8(J++);else for(N=L.getUint8(J++),e=-e;e--;)I[H++]=N;e=L.getInt16(J,!0);J+=2}while(J<B.numBytes);if(-32768!==e||H<I.length)throw"Unexpected end of mask RLE encoding";L=new Uint8Array(z);for(J=J=e=0;J<z;J++)J&7?(e=I[J>>3],e<<=J&7):e=I[J>>3],e&128&&(L[J]=1);b.pixels.resultMask=L;B.bitset=I;v+=B.numBytes}b.ptr=v;b.mask=B;return!0},readDataOneSweep:function(e,b,v,B){var z=b.ptr,I=b.headerInfo,L=I.numDims,J=I.width*I.height;
I=I.numValidPixel*y.getDataTypeSize(I.imageType)*L;var H=b.pixels.resultMask;if(v===Uint8Array)e=new Uint8Array(e,z,I);else{var N=new ArrayBuffer(I);(new Uint8Array(N)).set(new Uint8Array(e,z,I));e=new v(N)}if(e.length===J*L)b.pixels.resultPixels=B?y.swapDimensionOrder(e,J,L,v,!0):e;else{b.pixels.resultPixels=new v(J*L);var G=N=v=0,R=0;if(1<L)if(B)for(N=0;N<J;N++){if(H[N])for(R=N,G=0;G<L;G++,R+=J)b.pixels.resultPixels[R]=e[v++]}else for(N=0;N<J;N++){if(H[N])for(R=N*L,G=0;G<L;G++)b.pixels.resultPixels[R+
G]=e[v++]}else for(N=0;N<J;N++)H[N]&&(b.pixels.resultPixels[N]=e[v++])}b.ptr=z+I;return!0},readHuffmanTree:function(e,b){var v=this.HUFFMAN_LUT_BITS_MAX,B=new DataView(e,b.ptr,16);b.ptr+=16;if(2>B.getInt32(0,!0))throw"unsupported Huffman version";var z=B.getInt32(4,!0),I=B.getInt32(8,!0);B=B.getInt32(12,!0);if(I>=B)return!1;var L=new Uint32Array(B-I);y.decodeBits(e,b,L);var J=[],H;for(H=I;H<B;H++){var N=H-(H<z?0:z);J[N]={first:L[H-I],second:null}}H=e.byteLength-b.ptr;L=new ArrayBuffer(4*Math.ceil(H/
4));(new Uint8Array(L)).set(new Uint8Array(e,b.ptr,H));e=new Uint32Array(L);b=0;L=0;var G=e[0];for(H=I;H<B;H++){N=H-(H<z?0:z);var R=J[N].first;0<R&&(J[N].second=G<<b>>>32-R,32-b>=R?(b+=R,32===b&&(b=0,L++,G=e[L])):(b+=R-32,L++,G=e[L],J[N].second|=G>>>32-b))}var U=G=0,S=new O;for(H=0;H<J.length;H++)void 0!==J[H]&&(G=Math.max(G,J[H].first));U=G>=v?v:G;v=[];var Z;for(H=I;H<B;H++)if(N=H-(H<z?0:z),R=J[N].first,0<R)if(I=[R,N],R<=U){N=J[N].second<<U-R;var ba=1<<U-R;for(R=0;R<ba;R++)v[N|R]=I}else for(N=J[N].second,
ba=S,--R;0<=R;R--)(Z=N>>>R&1)?(ba.right||(ba.right=new O),ba=ba.right):(ba.left||(ba.left=new O),ba=ba.left),0!==R||ba.val||(ba.val=I[1]);return{decodeLut:v,numBitsLUTQick:U,numBitsLUT:G,tree:S,stuffedData:e,srcPtr:L,bitPos:b}},readHuffman:function(e,b,v,B){var z=b.headerInfo.numDims,I=b.headerInfo.height,L=b.headerInfo.width,J=L*I,H=this.readHuffmanTree(e,b);e=H.decodeLut;var N=H.tree,G=H.stuffedData,R=H.srcPtr,U=H.bitPos,S=H.numBitsLUTQick;H=H.numBitsLUT;var Z=0===b.headerInfo.imageType?128:0,ba=
b.pixels.resultMask,fa,ka,ha,ea,la,ja,ca=0;0<U&&(R++,U=0);var oa=G[R],na=1===b.encodeMode,ra=new v(J*z),pa=ra,qa;if(2>z||na)for(qa=0;qa<z;qa++)if(1<z&&(pa=new v(ra.buffer,J*qa,J),ca=0),b.headerInfo.numValidPixel===L*I)for(ha=la=0;ha<I;ha++)for(ea=0;ea<L;ea++,la++){var ma=0;var ia=fa=oa<<U>>>32-S;32-U<S&&(ia=fa|=G[R+1]>>>64-U-S);if(e[ia])ma=e[ia][1],U+=e[ia][0];else for(ia=fa=oa<<U>>>32-H,32-U<H&&(ia=fa|=G[R+1]>>>64-U-H),ia=N,ja=0;ja<H;ja++)if(ia=(ka=fa>>>H-ja-1&1)?ia.right:ia.left,!ia.left&&!ia.right){ma=
ia.val;U=U+ja+1;break}32<=U&&(U-=32,R++,oa=G[R]);ma-=Z;na?(ma=0<ea?ma+ca:0<ha?ma+pa[la-L]:ma+ca,ma&=255,ca=pa[la]=ma):pa[la]=ma}else for(ha=la=0;ha<I;ha++)for(ea=0;ea<L;ea++,la++){if(ba[la]){ma=0;ia=fa=oa<<U>>>32-S;32-U<S&&(ia=fa|=G[R+1]>>>64-U-S);if(e[ia])ma=e[ia][1],U+=e[ia][0];else for(ia=fa=oa<<U>>>32-H,32-U<H&&(ia=fa|=G[R+1]>>>64-U-H),ia=N,ja=0;ja<H;ja++)if(ia=(ka=fa>>>H-ja-1&1)?ia.right:ia.left,!ia.left&&!ia.right){ma=ia.val;U=U+ja+1;break}32<=U&&(U-=32,R++,oa=G[R]);ma-=Z;na?(ma=0<ea&&ba[la-
1]?ma+ca:0<ha&&ba[la-L]?ma+pa[la-L]:ma+ca,ma&=255,ca=pa[la]=ma):pa[la]=ma}}else for(ha=la=0;ha<I;ha++)for(ea=0;ea<L;ea++)if(la=ha*L+ea,!ba||ba[la])for(qa=0;qa<z;qa++,la+=J){ma=0;ia=fa=oa<<U>>>32-S;32-U<S&&(ia=fa|=G[R+1]>>>64-U-S);if(e[ia])ma=e[ia][1],U+=e[ia][0];else for(ia=fa=oa<<U>>>32-H,32-U<H&&(ia=fa|=G[R+1]>>>64-U-H),ia=N,ja=0;ja<H;ja++)if(ia=(ka=fa>>>H-ja-1&1)?ia.right:ia.left,!ia.left&&!ia.right){ma=ia.val;U=U+ja+1;break}32<=U&&(U-=32,R++,oa=G[R]);ma-=Z;pa[la]=ma}b.ptr=b.ptr+4*(R+1)+(0<U?4:
0);b.pixels.resultPixels=ra;1<z&&!B&&(b.pixels.resultPixels=y.swapDimensionOrder(ra,J,z,v))},decodeBits:function(e,b,v,B,z){var I=b.headerInfo,L=I.fileVersion,J=0,H=new DataView(e,b.ptr,5<=e.byteLength-b.ptr?5:e.byteLength-b.ptr),N=H.getUint8(0);J++;var G=N>>6,R=0===G?4:3-G,U=0<(N&32)?!0:!1;G=N&31;N=0;if(1===R)N=H.getUint8(J),J++;else if(2===R)N=H.getUint16(J,!0),J+=2;else if(4===R)N=H.getUint32(J,!0),J+=4;else throw"Invalid valid pixel count type";R=2*I.maxZError;z=1<I.numDims?I.maxValues[z]:I.zMax;
if(U){b.counter.lut++;U=H.getUint8(J);J++;I=Math.ceil((U-1)*G/8);var S=Math.ceil(I/4);S=new ArrayBuffer(4*S);var Z=new Uint8Array(S);b.ptr+=J;Z.set(new Uint8Array(e,b.ptr,I));J=new Uint32Array(S);b.ptr+=I;for(H=0;U-1>>>H;)H++;I=Math.ceil(N*H/8);S=Math.ceil(I/4);S=new ArrayBuffer(4*S);Z=new Uint8Array(S);Z.set(new Uint8Array(e,b.ptr,I));e=new Uint32Array(S);b.ptr+=I;b=3<=L?g.unstuffLUT2(J,G,U-1,B,R,z):g.unstuffLUT(J,G,U-1,B,R,z);3<=L?g.unstuff2(e,v,H,N,b):g.unstuff(e,v,H,N,b)}else b.counter.bitstuffer++,
H=G,b.ptr+=J,0<H&&(I=Math.ceil(N*H/8),S=Math.ceil(I/4),S=new ArrayBuffer(4*S),Z=new Uint8Array(S),Z.set(new Uint8Array(e,b.ptr,I)),e=new Uint32Array(S),b.ptr+=I,3<=L?null==B?g.originalUnstuff2(e,v,H,N):g.unstuff2(e,v,H,N,!1,B,R,z):null==B?g.originalUnstuff(e,v,H,N):g.unstuff(e,v,H,N,!1,B,R,z))},readTiles:function(e,b,v,B){var z=b.headerInfo,I=z.width,L=z.height,J=I*L,H=z.microBlockSize,N=z.imageType,G=y.getDataTypeSize(N),R=Math.ceil(I/H),U=Math.ceil(L/H);b.pixels.numBlocksY=U;b.pixels.numBlocksX=
R;var S=b.pixels.ptr=0,Z=0,ba=0,fa=0,ka=0,ha=0,ea=0,la=0,ja=S=0,ca=0,oa=0,na=ea=0;ea=ea=0;var ra=new v(H*H);L=L%H||H;var pa=I%H||H,qa=z.numDims,ma,ia=b.pixels.resultMask,sa=b.pixels.resultPixels,wa=5<=z.fileVersion?14:15,va=z.zMax;for(ba=0;ba<U;ba++)for(ka=ba!==U-1?H:L,fa=0;fa<R;fa++)for(ha=fa!==R-1?H:pa,ca=ba*I*H+fa*H,oa=I-ha,ma=0;ma<qa;ma++){1<qa?(na=sa,ca=ba*I*H+fa*H,sa=new v(b.pixels.resultPixels.buffer,J*ma*G,J),va=z.maxValues[ma]):na=null;ea=e.byteLength-b.ptr;Z=new DataView(e,b.ptr,Math.min(10,
ea));var ua={};ea=0;la=Z.getUint8(0);ea++;var ta=5<=z.fileVersion?la&4:0;S=la>>6&255;ja=la>>2&wa;if(ja!==(fa*H>>3&wa))throw"integrity issue";if(ta&&0===ma)throw"integrity issue";la&=3;if(3<la)throw b.ptr+=ea,"Invalid block encoding ("+la+")";if(2===la){if(ta)if(ia)for(S=0;S<ka;S++)for(Z=0;Z<ha;Z++)ia[ca]&&(sa[ca]=na[ca]),ca++;else for(S=0;S<ka;S++)for(Z=0;Z<ha;Z++)sa[ca]=na[ca],ca++;b.counter.constant++;b.ptr+=ea}else if(0===la){if(ta)throw"integrity issue";b.counter.uncompressed++;b.ptr+=ea;ea=ka*
ha*G;na=e.byteLength-b.ptr;ea=ea<na?ea:na;na=new ArrayBuffer(0===ea%G?ea:ea+G-ea%G);ta=new Uint8Array(na);ta.set(new Uint8Array(e,b.ptr,ea));na=new v(na);ea=0;if(ia)for(S=0;S<ka;S++){for(Z=0;Z<ha;Z++)ia[ca]&&(sa[ca]=na[ea++]),ca++;ca+=oa}else for(S=0;S<ka;S++){for(Z=0;Z<ha;Z++)sa[ca++]=na[ea++];ca+=oa}b.ptr+=ea*G}else if(S=y.getDataTypeUsed(ta&&6>N?4:N,S),ua=y.getOnePixel(ua,ea,S,Z),ea+=y.getDataTypeSize(S),3===la)if(b.ptr+=ea,b.counter.constantoffset++,ia)for(S=0;S<ka;S++){for(Z=0;Z<ha;Z++)ia[ca]&&
(sa[ca]=ta?Math.min(va,na[ca]+ua):ua),ca++;ca+=oa}else for(S=0;S<ka;S++){for(Z=0;Z<ha;Z++)sa[ca]=ta?Math.min(va,na[ca]+ua):ua,ca++;ca+=oa}else if(b.ptr+=ea,y.decodeBits(e,b,ra,ua,ma),ea=0,ta)if(ia)for(S=0;S<ka;S++){for(Z=0;Z<ha;Z++)ia[ca]&&(sa[ca]=ra[ea++]+na[ca]),ca++;ca+=oa}else for(S=0;S<ka;S++){for(Z=0;Z<ha;Z++)sa[ca]=ra[ea++]+na[ca],ca++;ca+=oa}else if(ia)for(S=0;S<ka;S++){for(Z=0;Z<ha;Z++)ia[ca]&&(sa[ca]=ra[ea++]),ca++;ca+=oa}else for(S=0;S<ka;S++){for(Z=0;Z<ha;Z++)sa[ca++]=ra[ea++];ca+=oa}}1<
qa&&!B&&(b.pixels.resultPixels=y.swapDimensionOrder(b.pixels.resultPixels,J,qa,v))},formatFileInfo:function(e){return{fileIdentifierString:e.headerInfo.fileIdentifierString,fileVersion:e.headerInfo.fileVersion,imageType:e.headerInfo.imageType,height:e.headerInfo.height,width:e.headerInfo.width,numValidPixel:e.headerInfo.numValidPixel,microBlockSize:e.headerInfo.microBlockSize,blobSize:e.headerInfo.blobSize,maxZError:e.headerInfo.maxZError,pixelType:y.getPixelType(e.headerInfo.imageType),eofOffset:e.eofOffset,
mask:e.mask?{numBytes:e.mask.numBytes}:null,pixels:{numBlocksX:e.pixels.numBlocksX,numBlocksY:e.pixels.numBlocksY,maxValue:e.headerInfo.zMax,minValue:e.headerInfo.zMin,noDataValue:e.noDataValue}}},constructConstantSurface:function(e,b){var v=e.headerInfo.zMax,B=e.headerInfo.zMin,z=e.headerInfo.maxValues,I=e.headerInfo.numDims,L=e.headerInfo.height*e.headerInfo.width,J=0,H=0,N=0,G=e.pixels.resultMask;e=e.pixels.resultPixels;if(G)if(1<I)if(b)for(J=0;J<I;J++)for(N=J*L,v=z[J],H=0;H<L;H++)G[H]&&(e[N+H]=
v);else for(H=0;H<L;H++){if(G[H])for(N=H*I,J=0;J<I;J++)e[N+I]=z[J]}else for(H=0;H<L;H++)G[H]&&(e[H]=v);else if(1<I&&B!==v)if(b)for(J=0;J<I;J++)for(N=J*L,v=z[J],H=0;H<L;H++)e[N+H]=v;else for(H=0;H<L;H++)for(N=H*I,J=0;J<I;J++)e[N+J]=z[J];else for(H=0;H<L*I;H++)e[H]=v},getDataTypeArray:function(e){switch(e){case 0:e=Int8Array;break;case 1:e=Uint8Array;break;case 2:e=Int16Array;break;case 3:e=Uint16Array;break;case 4:e=Int32Array;break;case 5:e=Uint32Array;break;case 6:e=Float32Array;break;case 7:e=Float64Array;
break;default:e=Float32Array}return e},getPixelType:function(e){switch(e){case 0:e="S8";break;case 1:e="U8";break;case 2:e="S16";break;case 3:e="U16";break;case 4:e="S32";break;case 5:e="U32";break;case 6:e="F32";break;case 7:e="F64";break;default:e="F32"}return e},isValidPixelValue:function(e,b){if(null==b)return!1;switch(e){case 0:e=-128<=b&&127>=b;break;case 1:e=0<=b&&255>=b;break;case 2:e=-32768<=b&&32767>=b;break;case 3:e=0<=b&&65536>=b;break;case 4:e=-2147483648<=b&&2147483647>=b;break;case 5:e=
0<=b&&4294967296>=b;break;case 6:e=-3.4027999387901484E38<=b&&3.4027999387901484E38>=b;break;case 7:e=4.9E-324<=b&&1.7976931348623157E308>=b;break;default:e=!1}return e},getDataTypeSize:function(e){var b=0;switch(e){case 0:case 1:b=1;break;case 2:case 3:b=2;break;case 4:case 5:case 6:b=4;break;case 7:b=8;break;default:b=e}return b},getDataTypeUsed:function(e,b){var v=e;switch(e){case 2:case 4:v=e-b;break;case 3:case 5:v=e-2*b;break;case 6:v=0===b?e:1===b?2:1;break;case 7:v=0===b?e:e-2*b+1;break;default:v=
e}return v},getOnePixel:function(e,b,v,B){e=0;switch(v){case 0:e=B.getInt8(b);break;case 1:e=B.getUint8(b);break;case 2:e=B.getInt16(b,!0);break;case 3:e=B.getUint16(b,!0);break;case 4:e=B.getInt32(b,!0);break;case 5:e=B.getUInt32(b,!0);break;case 6:e=B.getFloat32(b,!0);break;case 7:e=B.getFloat64(b,!0);break;default:throw"the decoder does not understand this pixel type";}return e},swapDimensionOrder:function(e,b,v,B,z){var I=0,L=0,J=0,H=0,N=e;if(1<v)if(N=new B(b*v),z)for(I=0;I<b;I++)for(H=I,J=0;J<
v;J++,H+=b)N[H]=e[L++];else for(I=0;I<b;I++)for(H=I,J=0;J<v;J++,H+=b)N[L++]=e[H];return N}},O=function(e,b,v){this.val=e;this.left=b;this.right=v};return{decode:function(e,b){b=b||{};var v=b.noDataValue,B=0,z={};z.ptr=b.inputOffset||0;z.pixels={};if(y.readHeaderInfo(e,z)){B=z.headerInfo;var I=B.fileVersion,L=y.getDataTypeArray(B.imageType);if(5<I)throw"unsupported lerc version 2."+I;y.readMask(e,z);B.numValidPixel===B.width*B.height||z.pixels.resultMask||(z.pixels.resultMask=b.maskData);var J=B.width*
B.height;z.pixels.resultPixels=new L(J*B.numDims);z.counter={onesweep:0,uncompressed:0,lut:0,bitstuffer:0,constant:0,constantoffset:0};var H=!b.returnPixelInterleavedDims;if(0!==B.numValidPixel)if(B.zMax===B.zMin)y.constructConstantSurface(z,H);else if(4<=I&&y.checkMinMaxRanges(e,z))y.constructConstantSurface(z,H);else{var N=new DataView(e,z.ptr,2),G=N.getUint8(0);z.ptr++;if(G)y.readDataOneSweep(e,z,L,H);else if(1<I&&1>=B.imageType&&1E-5>Math.abs(B.maxZError-.5)){N=N.getUint8(1);z.ptr++;z.encodeMode=
N;if(2<N||4>I&&1<N)throw"Invalid Huffman flag "+N;N?y.readHuffman(e,z,L,H):y.readTiles(e,z,L,H)}else y.readTiles(e,z,L,H)}z.eofOffset=z.ptr;b.inputOffset?(e=z.headerInfo.blobSize+b.inputOffset-z.ptr,1<=Math.abs(e)&&(z.eofOffset=b.inputOffset+z.headerInfo.blobSize)):(e=z.headerInfo.blobSize-z.ptr,1<=Math.abs(e)&&(z.eofOffset=z.headerInfo.blobSize));e={width:B.width,height:B.height,pixelData:z.pixels.resultPixels,minValue:B.zMin,maxValue:B.zMax,validPixelCount:B.numValidPixel,dimCount:B.numDims,dimStats:{minValues:B.minValues,
maxValues:B.maxValues},maskData:z.pixels.resultMask};if(z.pixels.resultMask&&y.isValidPixelValue(B.imageType,v)){I=z.pixels.resultMask;for(B=0;B<J;B++)I[B]||(e.pixelData[B]=v);e.noDataValue=v}z.noDataValue=v;b.returnFileInfo&&(e.fileInfo=y.formatFileInfo(z));return e}},getBandCount:function(e){for(var b=0,v=0,B={ptr:0,pixels:{}};v<e.byteLength-58;)y.readHeaderInfo(e,B),v+=B.headerInfo.blobSize,b++,B.ptr=v;return b}}})})(C);var p=C.exports;const m=[0,1,1,2,4,8,1,1,2,4,8,4,8,-1,-1,-1,8,8,8],E=new Set([1,
5,6,7,8,34712,34887]),A=function(h,g,y,O,e){var b,v,B=P.isPlatformLittleEndian===g,z=a(y,"BITSPERSAMPLE");const I=null!=(b=a(y,"SAMPLEFORMAT"))?b:1;b=V(I,z);z=null!=(v=a(y,"COMPRESSION"))?v:1;v=Q(b);if(34887===z)return p.decode(h,{inputOffset:O,returnFileInfo:!0}).pixelData;if(1===z){var L=h.slice(O,O+e);var J=new Uint8Array(L)}else if(8===z||32946===z)J=new Uint8Array(h,O,e),J=new T.Zlib(J),h=J.getBytes(),L=new ArrayBuffer(h.length),J=new Uint8Array(L),J.set(h);else if(6===z)J=new Uint8Array(h,O,
e),L=new Y.JpegImage,L.parse(J),h=L.getData(L.width,L.height,!0),L=new ArrayBuffer(h.length),J=new Uint8Array(L),J.set(h);else if(7===z){g=y.get("JPEGTABLES").values;L=g.length-2;J=new Uint8Array(L+e-2);for(y=0;y<L;y++)J[y]=g[y];h=new Uint8Array(h,O+2,e-2);for(O=0;O<h.length;O++)J[L+O]=h[O];L=new Y.JpegImage;L.parse(J);h=L.getData(L.width,L.height,!0);L=new ArrayBuffer(h.length);J=new Uint8Array(L);J.set(h)}else 5===z&&(J=W.decode(h,O,e,g),L=J.buffer);if("u8"!==b&&"s8"!==b&&!B)switch(L=new ArrayBuffer(J.length),
B=new Uint8Array(L),b){case "u16":case "s16":for(b=0;b<J.length;b+=2)B[b]=J[b+1],B[b+1]=J[b];break;case "u32":case "s32":case "f32":for(b=0;b<J.length;b+=4)B[b]=J[b+3],B[b+1]=J[b+2],B[b+2]=J[b+1],B[b+3]=J[b]}return new v(L)},F=function(h,g,y){if(!(h&&0<h.length&&g&&y))return null;let O,e,b;const v=h[0].length,B=h.length,z=new Uint8Array(v);for(let L=0;L<B;L++)if(O=h[L],e=g[L],b=y[L],0===L)for(var I=0;I<v;I++)z[I]=O[I]<e||O[I]>b?0:1;else for(I=0;I<v;I++)z[I]&&(z[I]=O[I]<e||O[I]>b?0:1);return z},t=
function(h){if(!h)return null;var g=h.match(/<Item(.*?)Item>/gi);if(!g||0===g.length)return null;h=new Map;var y;for(var O=0;O<g.length;O++){var e=g[O];var b=e.slice(6,e.indexOf("\x3e"));var v=e.indexOf("sample\x3d");-1<v&&(y=e.slice(v+8,e.indexOf('"',v+8)));v=e.indexOf("name\x3d");-1<v&&(b=e.slice(v+6,e.indexOf('"',v+6)));b&&(e=e.slice(e.indexOf("\x3e")+1,e.indexOf("\x3c/Item\x3e")).trim(),null!=y?h.has(b)?h.get(b)[y]=e:h.set(b,[e]):h.set(b,e));y=null}g=h.get("STATISTICS_MINIMUM");b=h.get("STATISTICS_MAXIMUM");
O=h.get("STATISTICS_MEAN");e=h.get("STATISTICS_STDDEV");y=null;if(g&&b)for(y=[],v=0;v<g.length;v++)y.push({min:parseFloat(g[v]),max:parseFloat(b[v]),avg:O&&parseFloat(O[v]),stddev:e&&parseFloat(e[v])});b=h.get("BandName");O=h.get("WavelengthMin");e=h.get("WavelengthMax");g=null;if(b)for(g=[],v=0;v<b.length;v++)g.push({BandName:b[v],WavelengthMin:O&&parseFloat(O[v]),WavelengthMax:e&&parseFloat(e[v])});b=h.get("DataType");return{statistics:y,bandProperties:g,dataType:b,rawMetadata:h}};da.Lerc2Codec=
p;da.decode=function(h,g=0,y){y=y||x(h);const {ifds:O,noData:e}=y;if(0===O.length)throw"no valid image file directory";var b=c(y);if(b)throw b;b=-1===g?O[O.length-1]:O[g];g=e?e[0]:null;if(y.tileWidth){var v=y,B,z=M(b,"TILEOFFSETS");if(void 0===z)b=null;else{y=M(b,"TILEBYTECOUNTS");var {width:I,height:L,pixelType:J,tileWidth:H,tileHeight:N}=q([b]),G=d(b,v),R=v.planes,U=I*L,S=a(b,"BITSPERSAMPLE"),Z=34887===(null!=(B=a(b,"COMPRESSION"))?B:1),ba=Q(J);B=[];for(var fa=0;fa<R;fa++)B.push(new ba(U));var ka,
ha;U=Math.ceil(I/H);if(0===S%8)if(Z&&G&&1<R)for(G=Math.round(z.length/R),S=0;S<G;S++){var ea=Math.floor(S/U)*N;var la=S%U*H;ba=ea*I+la;for(Z=0;Z<R;Z++){fa=S*R+Z;fa=A(h,v.littleEndian,b,z[fa],y[fa]);var ja=0;var ca=ba;var oa=Math.min(H,I-la);var na=Math.min(N,L-ea);var ra=B[Z];for(ka=0;ka<na;ka++)for(ca=ba+ka*I,ja=ka*H,ha=0;ha<oa;ha++,ca++,ja++)ra[ca]=fa[ja]}}else for(S=0;S<z.length;S++)for(ea=Math.floor(S/U)*N,la=S%U*H,ba=ea*I+la,fa=A(h,v.littleEndian,b,z[S],y[S]),ja=0,ca=ba,oa=Math.min(H,I-la),na=
Math.min(N,L-ea),ea=0;ea<R;ea++)if(ra=B[ea],G||Z)for(ka=0;ka<na;ka++)for(ca=ba+ka*I,ja=H*N*ea+ka*H,ha=0;ha<oa;ha++,ca++,ja++)ra[ca]=fa[ja];else for(ka=0;ka<na;ka++)for(ca=ba+ka*I,ja=ka*H*R+ea,ha=0;ha<oa;ha++,ca++,ja+=R)ra[ca]=fa[ja];b={width:I,height:L,pixelType:J,pixels:B}}}else if(U=y,ka=P.isPlatformLittleEndian===U.littleEndian,ha=M(b,"STRIPOFFSETS"),void 0===ha)b=null;else{var {width:pa,height:qa,pixelType:ma}=q([b]);y=U.planes;R=pa*qa;S=a(b,"BITSPERSAMPLE");z=Q(ma);B=new z(R*y);ba=M(b,"STRIPBYTECOUNTS");
fa=a(b,"ROWSPERSTRIP");ea=null!=(la=a(b,"COMPRESSION"))?la:1;ca=fa;if(0===S%8)for(b=0;b<ha.length;b++){la=b*fa*pa*y;ca=(b+1)*fa>qa?qa-b*fa:fa;if("u8"===ma||"s8"===ma||ka)8===ea||32946===ea?(G=new Uint8Array(h,ha[b],ba[b]),G=new T.Zlib(G),ja=G.getBytes(),Z=new ArrayBuffer(ja.length),G=new Uint8Array(Z),G.set(ja),G.length!==ca*pa*y*S/8&&console.log("strip byte counts is different than expected")):6===ea?(G=new Uint8Array(h,ha[b],ba[b]),Z=new Y.JpegImage,Z.parse(G),ca=Z.getData(Z.width,Z.height,!0),
Z=new ArrayBuffer(ca.length),G=new Uint8Array(Z),G.set(ca)):5===ea?(G=W.decode(h,ha[b],ba[b],U.littleEndian),Z=G.buffer):1===ea&&(ba[b]!==ca*pa*y*S/8&&console.log("strip byte counts is different than expected"),Z=h.slice(ha[b],ha[b]+ba[b]));else switch(6===ea||8===ea||32946===ea?(G=new Uint8Array(h,ha[b],ba[b]),G=new T.Zlib(G),G=G.getBytes(),Z=new ArrayBuffer(G.length),v=new Uint8Array(Z),G.length!==ca*pa*y*S/8&&console.log("strip byte counts is different than expected")):1===ea&&(ba[b]!==ca*pa*y*
S/8&&console.log("strip byte counts is different than expected"),Z=new ArrayBuffer(ba[b]),G=new Uint8Array(h,ha[b],ba[b]),v=new Uint8Array(Z)),ma){case "u16":case "s16":for(ca=0;ca<G.length;ca+=2)v[ca]=G[ca+1],v[ca+1]=G[ca];break;case "u32":case "s32":case "f32":for(ca=0;ca<G.length;ca+=4)v[ca]=G[ca+3],v[ca+1]=G[ca+2],v[ca+2]=G[ca+1],v[ca+3]=G[ca]}ca=new z(Z);B.set(ca,la)}G=[];if(1===y)G.push(B);else for(b=0;b<y;b++){v=new z(R);for(h=0;h<R;h++)v[h]=B[h*y+b];G.push(v)}b={width:pa,height:qa,pixelType:ma,
pixels:G}}if(null!==g){b.mask=new Uint8Array(b.width*b.height);if(1E24<Math.abs(g))for(h=0;h<b.width*b.height;h++)b.mask[h]=1E-6>Math.abs((b.pixels[0][h]-g)/g)?0:1;else for(h=0;h<b.width*b.height;h++)b.mask[h]=b.pixels[0][h]===g?0:1;b.noDataValue=g}return b};da.decodeTileOrStrip=function(h,g){var y;const {headerInfo:O,ifd:e,offsets:b,sizes:v}=g;var B=b.map((fa,ka)=>A(h,O.littleEndian,e,fa,v[ka]||h.byteLength)),z=d(e,O);const {pixelType:I,planes:L}=O;var J=Q(I);const H=a(e,"TILEWIDTH"),N=a(e,"TILELENGTH");
var G=null!=(y=a(e,"COMPRESSION"))?y:1;y=H*N;const R=[];let U=B[0];const S=34887===G;for(let fa=0;fa<L;fa++){G=new J(y);if(z&&S){U=B[fa];for(var Z=0;Z<y;Z++)G[Z]=U[fa][Z+fa]}else if(z||S&&!z)G=U.slice(y*fa,y*(fa+1));else for(Z=0;Z<y;Z++)G[Z]=U[Z*L+fa];R.push(G)}B=O.noData?O.noData[0]:null;z=(J=O.metadata?O.metadata.statistics:null)?J.map(fa=>fa.min):null;J=J?J.map(fa=>fa.max):null;let ba;if(null!=B)if(ba=new Uint8Array(y),1E24<Math.abs(B))for(g=0;g<y;g++)ba[g]=1E-6>Math.abs((R[0][g]-B)/B)?0:1;else for(g=
0;g<y;g++)ba[g]=R[0][g]===B?0:1;else z&&J&&g.applyMinMaxConstraint&&(ba=F(R,z,J));return{pixelType:I,width:H,height:N,pixels:R,mask:ba,noDataValue:B}};da.getImageInfo=q;da.isBSQConfig=d;da.parseFieldValues=r;da.parseHeader=x;da.parseIFD=f;da.parseSignature=l})},"esri/layers/support/rasterDatasets/byteStreamUtils":function(){define(["exports"],function(da){da.bytesToUTF8=function(aa,Y){let W=0,n="",P=0,T=0;const V=aa.length;for(;W<V;)if(T=aa[W++],P=T>>4,8>P?P=1:15===P?(P=4,T=(T&7)<<18|(aa[W++]&63)<<
12|(aa[W++]&63)<<6|aa[W++]&63):14===P?(P=3,T=(T&15)<<12|(aa[W++]&63)<<6|aa[W++]&63):(P=2,T=(T&31)<<6|aa[W++]&63),0!==T||Y)n+=String.fromCharCode(T);return n};Object.defineProperty(da,"__esModule",{value:!0})})},"esri/layers/support/rasterFormats/Lzw":function(){define(["exports"],function(da){function aa(P,T,V,Q=!0){if(0!==T%4||0!==V%4){var X=new ArrayBuffer(4*Math.ceil(V/4));X=new Uint8Array(X);P=new Uint8Array(P,T,V);if(Q)for(Q=0;Q<X.length;Q+=4)X[Q]=P[Q+3],X[Q+1]=P[Q+2],X[Q+2]=P[Q+1],X[Q+3]=P[Q];
else X.set(P);return new Uint32Array(X.buffer)}if(Q){Q=new Uint8Array(P,T,V);X=new Uint8Array(Q.length);for(P=0;P<X.length;P+=4)X[P]=Q[P+3],X[P+1]=Q[P+2],X[P+2]=Q[P+1],X[P+3]=Q[P];return new Uint32Array(X.buffer)}return new Uint32Array(P,T,V/4)}function Y(){const P=[];for(let T=0;257>=T;T++)P[T]=[T];return P}function W(P,T){for(let V=0;V<T.length;V++)P.push(T[V])}const n=new Set;n.add(511);n.add(1023);n.add(2047);n.add(4095);n.add(8191);da.decode=function(P,T,V,Q=!0){P=aa(P,T,V,Q);T=9;Q=Y();let X=
32,D=Q.length,M=[],K=1,a=P[0],k=0;const r=P.length;V=8*(4*r-V);const q=[];for(;null!=a;){if(X>=T)X-=T,k=a>>>32-T,a<<=T;else{k=a>>>32-X;a=P[K++];var d=T-X;X=32-d;k=(k<<d)+(a>>>X);a<<=d}if(257===k)break;if(256===k)T=9,Q=Y(),D=Q.length,M=[];else{d=Q[k];if(null==d){if(k>Q.length)throw"data integrity issue: code does not exist on code page";M.push(M[0]);Q[D++]=M.slice();W(q,M)}else W(q,d),M.push(d[0]),1<M.length&&(Q[D++]=M.slice()),M=d.slice();n.has(D)&&T++;0===X&&(a=P[K++],X=32);if(K>r||K===r&&X<=V)break}}return new Uint8Array(q)};
Object.defineProperty(da,"__esModule",{value:!0})})},"esri/layers/support/rasterFormats/TiffTags":function(){define(function(){const da=(()=>{const n=[];n[254]="NEWSUBFILETYPE";n[255]="SUBFILETYPE";n[256]="IMAGEWIDTH";n[257]="IMAGELENGTH";n[258]="BITSPERSAMPLE";n[259]="COMPRESSION";n[262]="PHOTOMETRICINTERPRETATION";n[263]="THRESHHOLDING";n[264]="CELLWIDTH";n[265]="CELLLENGTH";n[266]="FILLORDER";n[269]="DOCUMENTNAME";n[270]="IMAGEDESCRIPTION";n[271]="MAKE";n[272]="MODEL";n[273]="STRIPOFFSETS";n[274]=
"ORIENTATION";n[277]="SAMPLESPERPIXEL";n[278]="ROWSPERSTRIP";n[279]="STRIPBYTECOUNTS";n[280]="MINSAMPLEVALUE";n[281]="MAXSAMPLEVALUE";n[282]="XRESOLUTION";n[283]="YRESOLUTION";n[284]="PLANARCONFIGURATION";n[285]="PAGENAME";n[286]="XPOSITION";n[287]="YPOSITION";n[288]="FREEOFFSETS";n[289]="FREEBYTECOUNTS";n[290]="GRAYRESPONSEUNIT";n[291]="GRAYRESPONSECURVE";n[292]="T4OPTIONS";n[293]="T6OPTIONS";n[296]="RESOLUTIONUNIT";n[297]="PAGENUMBER";n[300]="COLORRESPONSEUNIT";n[301]="TRANSFERFUNCTION";n[305]=
"SOFTWARE";n[306]="DATETIME";n[315]="ARTIST";n[316]="HOSTCOMPUTER";n[317]="PREDICTOR";n[318]="WHITEPOINT";n[319]="PRIMARYCHROMATICITIES";n[320]="COLORMAP";n[321]="HALFTONEHINTS";n[322]="TILEWIDTH";n[323]="TILELENGTH";n[324]="TILEOFFSETS";n[325]="TILEBYTECOUNTS";n[326]="BADFAXLINES";n[327]="CLEANFAXDATA";n[328]="CONSECUTIVEBADFAXLINES";n[330]="SUBIFD";n[332]="INKSET";n[333]="INKNAMES";n[334]="NUMBEROFINKS";n[336]="DOTRANGE";n[337]="TARGETPRINTER";n[338]="EXTRASAMPLES";n[339]="SAMPLEFORMAT";n[340]=
"SMINSAMPLEVALUE";n[341]="SMAXSAMPLEVALUE";n[342]="TRANSFERRANGE";n[347]="JPEGTABLES";n[512]="JPEGPROC";n[513]="JPEGIFOFFSET";n[514]="JPEGIFBYTECOUNT";n[515]="JPEGRESTARTINTERVAL";n[517]="JPEGLOSSLESSPREDICTORS";n[518]="JPEGPOINTTRANSFORM";n[519]="JPEGQTABLES";n[520]="JPEGDCTABLES";n[521]="JPEGACTABLES";n[529]="YCBCRCOEFFICIENTS";n[530]="YCBCRSUBSAMPLING";n[531]="YCBCRPOSITIONING";n[532]="REFERENCEBLACKWHITE";n[700]="XMP";n[33550]="GEOPIXELSCALE";n[33922]="GEOTIEPOINTS";n[33432]="COPYRIGHT";n[42112]=
"GDAL_METADATA";n[42113]="GDAL_NODATA";n[50844]="RPCCOEFFICIENT";n[34264]="GEOTRANSMATRIX";n[34735]="GEOKEYDIRECTORY";n[34736]="GEODOUBLEPARAMS";n[34737]="GEOASCIIPARAMS";n[34665]="EXIFIFD";n[34853]="GPSIFD";n[40965]="INTEROPERABILITYIFD";return n})(),aa=(()=>{const n=[].concat(da);n[36864]="ExifVersion";n[40960]="FlashpixVersion";n[40961]="ColorSpace";n[42240]="Gamma";n[37121]="ComponentsConfiguration";n[37122]="CompressedBitsPerPixel";n[40962]="PixelXDimension";n[40963]="PixelYDimension";n[37500]=
"MakerNote";n[37510]="UserComment";n[40964]="RelatedSoundFile";n[36867]="DateTimeOriginal";n[36868]="DateTimeDigitized";n[36880]="OffsetTime";n[36881]="OffsetTimeOriginal";n[36882]="OffsetTimeDigitized";n[37520]="SubSecTime";n[37521]="SubSecTimeOriginal";n[37522]="SubSecTimeDigitized";n[37888]="Temperature";n[37889]="Humidity";n[37890]="Pressure";n[37891]="WaterDepth";n[37892]="Acceleration";n[37893]="CameraElevationAngle";n[42016]="ImageUniqueID";n[42032]="CameraOwnerName";n[42033]="BodySerialNumber";
n[42034]="LensSpecification";n[42035]="LensMake";n[42036]="LensModel";n[42037]="LensSerialNumber";n[33434]="ExposureTime";n[33437]="FNumber";n[34850]="ExposureProgram";n[34852]="SpectralSensitivity";n[34855]="PhotographicSensitivity";n[34856]="OECF";n[34864]="SensitivityType";n[34865]="StandardOutputSensitivity";n[34866]="RecommendedExposureIndex";n[34867]="ISOSpeed";n[34868]="ISOSpeedLatitudeyyy";n[34869]="ISOSpeedLatitudezzz";n[37377]="ShutterSpeedValue";n[37378]="ApertureValue";n[37379]="BrightnessValue";
n[37380]="ExposureBiasValue";n[37381]="MaxApertureValue";n[37382]="SubjectDistance";n[37383]="MeteringMode";n[37384]="LightSource";n[37385]="Flash";n[37386]="FocalLength";n[37396]="SubjectArea";n[41483]="FlashEnergy";n[41484]="SpatialFrequencyResponse";n[41486]="FocalPlaneXResolution";n[41487]="FocalPlaneYResolution";n[41488]="FocalPlaneResolutionUnit";n[41492]="SubjectLocation";n[41493]="ExposureIndex";n[41495]="SensingMethod";n[41728]="FileSource";n[41729]="SceneType";n[41730]="CFAPattern";n[41985]=
"CustomRendered";n[41986]="ExposureMode";n[41987]="WhiteBalance";n[41988]="DigitalZoomRatio";n[41989]="FocalLengthIn35mmFilm";n[41990]="SceneCaptureType";n[41991]="GainControl";n[41992]="Contrast";n[41993]="Saturation";n[41994]="Sharpness";n[41995]="DeviceSettingDescription";n[41996]="SubjectDistanceRange";return n})(),Y=(()=>{const n=[];n[1024]="GTModelTypeGeoKey";n[1025]="GTRasterTypeGeoKey";n[1026]="GTCitationGeoKey";n[2048]="GeographicTypeGeoKey";n[2049]="GeogCitationGeoKey";n[2050]="GeogGeodeticDatumGeoKey";
n[2051]="GeogPrimeMeridianGeoKey";n[2052]="GeogLinearUnitsGeoKey";n[2053]="GeogLinearUnitSizeGeoKey";n[2054]="GeogAngularUnitsGeoKey";n[2055]="GeogAngularUnitSizeGeoKey";n[2056]="GeogEllipsoidGeoKey";n[2057]="GeogSemiMajorAxisGeoKey";n[2058]="GeogSemiMinorAxisGeoKey";n[2059]="GeogInvFlatteningGeoKey";n[2061]="GeogPrimeMeridianLongGeoKey";n[2060]="GeogAzimuthUnitsGeoKey";n[3072]="ProjectedCSTypeGeoKey";n[3073]="PCSCitationGeoKey";n[3074]="ProjectionGeoKey";n[3075]="ProjCoordTransGeoKey";n[3076]="ProjLinearUnitsGeoKey";
n[3077]="ProjLinearUnitSizeGeoKey";n[3078]="ProjStdParallel1GeoKey";n[3079]="ProjStdParallel2GeoKey";n[3080]="ProjNatOriginLongGeoKey";n[3081]="ProjNatOriginLatGeoKey";n[3082]="ProjFalseEastingGeoKey";n[3083]="ProjFalseNorthingGeoKey";n[3084]="ProjFalseOriginLongGeoKey";n[3085]="ProjFalseOriginLatGeoKey";n[3086]="ProjFalseOriginEastingGeoKey";n[3087]="ProjFalseOriginNorthingGeoKey";n[3088]="ProjCenterLongGeoKey";n[3090]="ProjCenterEastingGeoKey";n[3091]="ProjCenterNorthingGeoKey";n[3092]="ProjScaleAtNatOriginGeoKey";
n[3093]="ProjScaleAtCenterGeoKey";n[3094]="ProjAzimuthAngleGeoKey";n[3095]="ProjStraightVertPoleLongGeoKey";n[4096]="VerticalCSTypeGeoKey";n[4097]="VerticalCitationGeoKey";n[4098]="VerticalDatumGeoKey";n[4099]="VerticalUnitsGeoKey";return n})(),W=new Map;W.set("EXIFIFD",aa);W.set("GPSIFD","GPSVersionID GPSLatitudeRef GPSLatitude GPSLongitudeRef GPSLongitude GPSAltitudeRef GPSAltitude GPSTimeStamp GPSSatellites GPSStatus GPSMeasureMode GPSDOP GPSSpeedRef GPSSpeed GPSTrackRef GPSTrack GPSImgDirectionRef GPSImgDirection GPSMapDatum GPSDestLatitudeRef GPSDestLatitude GPSDestLongitudeRef GPSDestLongitude GPSDestBearingRef GPSDestBearing GPSDestDistanceRef GPSDestDistance GPSProcessingMethod GPSAreaInformation GPSDateStamp GPSDifferential GPSHPositioningError".split(" "));
return{TIFF_TAGS:da,ifdTags:W,GEO_KEYS:Y,getTagName:function(n,P){P=(P||da)[n];void 0===P&&(P="unknown"+String(n));return P}}})},"esri/layers/support/rasterFormats/utils":function(){define(["exports"],function(da){{var aa=new ArrayBuffer(4);const Y=new Uint8Array(aa);(new Uint32Array(aa))[0]=1;aa=1===Y[0]}da.isPlatformLittleEndian=aa;Object.defineProperty(da,"__esModule",{value:!0})})},"esri/chunks/LercCodec":function(){define(["exports"],function(da){function aa(P){Y[0]=P;return Y[0]}const Y=new Float32Array(1),
W=aa(3.4028234663852886E38);var n=aa(Math.max(-W,Math.min(-Infinity,W)));da.decode=function(P,T){T=T||{};var V=T.inputOffset||0;var Q=T.encodedMaskData||null===T.encodedMaskData;var X=new Uint8Array(P,V,10);X=String.fromCharCode.apply(null,X);if("CntZImage"!=X.trim())throw"Unexpected file identifier string: "+X;V+=10;var D=new DataView(P,V,24);var M=D.getInt32(0,!0);var K=D.getInt32(4,!0);var a=D.getUint32(8,!0);var k=D.getUint32(12,!0);var r=D.getFloat64(16,!0);V+=24;if(!Q){D=new DataView(P,V,16);
var q={};q.numBlocksY=D.getUint32(0,!0);q.numBlocksX=D.getUint32(4,!0);q.numBytes=D.getUint32(8,!0);q.maxValue=D.getFloat32(12,!0);V+=16;if(0<q.numBytes){Q=new Uint8Array(Math.ceil(k*a/8));D=new DataView(P,V,q.numBytes);var d=D.getInt16(0,!0);var x=2;var w=0;do{if(0<d)for(;d--;)Q[w++]=D.getUint8(x++);else{var u=D.getUint8(x++);for(d=-d;d--;)Q[w++]=u}d=D.getInt16(x,!0);x+=2}while(x<q.numBytes);if(-32768!==d||w<Q.length)throw"Unexpected end of mask RLE encoding";q.bitset=Q;V+=q.numBytes}else 0===(q.numBytes|
q.numBlocksY|q.maxValue)&&(Q=new Uint8Array(Math.ceil(k*a/8)),q.bitset=Q)}D=new DataView(P,V,16);var l=Q=u=w=x=d=void 0;d=D.getUint32(0,!0);x=D.getUint32(4,!0);w=D.getUint32(8,!0);u=D.getFloat32(12,!0);V+=16;l=x;Q=d;l+=0<k%l?1:0;var f=Q+(0<a%Q?1:0);Q=Array(l*f);for(var c=1E9,C=0,p=0;p<f;p++)for(var m=0;m<l;m++){var E=0;D=new DataView(P,V,Math.min(10,P.byteLength-V));var A={};Q[C++]=A;var F=D.getUint8(0);E++;A.encoding=F&63;if(3<A.encoding)throw"Invalid block encoding ("+A.encoding+")";if(2===A.encoding)V++,
c=Math.min(c,0);else{if(0!==F&&2!==F){F>>=6;A.offsetType=F;if(2===F)A.offset=D.getInt8(1),E++;else if(1===F)A.offset=D.getInt16(1,!0),E+=2;else if(0===F)A.offset=D.getFloat32(1,!0),E+=4;else throw"Invalid block offset type";c=Math.min(A.offset,c);if(1===A.encoding)if(F=D.getUint8(E),E++,A.bitsPerPixel=F&63,F>>=6,A.numValidPixelsType=F,2===F)A.numValidPixels=D.getUint8(E),E++;else if(1===F)A.numValidPixels=D.getUint16(E,!0),E+=2;else if(0===F)A.numValidPixels=D.getUint32(E,!0),E+=4;else throw"Invalid valid pixel count type";
}V+=E;if(3!=A.encoding)if(0===A.encoding){D=(w-1)/4;if(D!==Math.floor(D))throw"uncompressed block has invalid length";E=new ArrayBuffer(4*D);F=new Uint8Array(E);F.set(new Uint8Array(P,V,4*D));E=new Float32Array(E);for(F=0;F<E.length;F++)c=Math.min(c,E[F]);A.rawData=E;V+=4*D}else 1===A.encoding&&(D=Math.ceil(A.numValidPixels*A.bitsPerPixel/8),E=new ArrayBuffer(4*Math.ceil(D/4)),F=new Uint8Array(E),F.set(new Uint8Array(P,V,D)),A.stuffedData=new Uint32Array(E),V+=D)}}l=c;P=V;V=null!=T.noDataValue?aa(Math.max(-W,
Math.min(T.noDataValue,W))):n;f=T.encodedMaskData;F=T.returnMask;c=0;C=x;p=d;m=Math.floor(k/C);A=Math.floor(a/p);E=2*r;f=f||(q?q.bitset:null);var t;D=new (T.pixelType||Float32Array)(k*a);F&&f&&(t=new Uint8Array(k*a));F=new Float32Array(m*A);for(var h,g,y=0;y<=p;y++){var O=y!==p?A:a%p;if(0!==O)for(var e=0;e<=C;e++){var b=e!==C?m:k%C;if(0!==b){var v=y*k*A+e*m,B=k-b,z=Q[c],I;if(2>z.encoding){if(0===z.encoding)var L=z.rawData;else{h=I=L=void 0;g=z.stuffedData;var J=z.bitsPerPixel,H=z.numValidPixels,N=
z.offset,G=E,R=F,U=u,S=(1<<J)-1,Z=0,ba=0,fa=Math.ceil((U-N)/G);g[g.length-1]<<=8*(4*g.length-Math.ceil(J*H/8));for(h=0;h<H;h++)0===ba&&(L=g[Z++],ba=32),ba>=J?(I=L>>>ba-J&S,ba-=J):(ba=J-ba,I=(L&S)<<ba&S,L=g[Z++],ba=32-ba,I+=L>>>ba),R[h]=I<fa?N+I*G:U;L=F}I=0}else var ka=2===z.encoding?0:z.offset;if(f)for(g=0;g<O;g++){if(v&7){var ha=f[v>>3];ha<<=v&7}for(h=0;h<b;h++)v&7||(ha=f[v>>3]),ha&128?(t&&(t[v]=1),D[v++]=2>z.encoding?L[I++]:ka):(t&&(t[v]=0),D[v++]=V),ha<<=1;v+=B}else if(2>z.encoding)for(g=0;g<O;g++){for(h=
0;h<b;h++)D[v++]=L[I++];v+=B}else for(g=0;g<O;g++)if(D.fill)D.fill(ka,v,v+b),v+=b+B;else{for(h=0;h<b;h++)D[v++]=ka;v+=B}if(1===z.encoding&&I!==z.numValidPixels)throw"Block and Mask do not match";c++}}}ka=t;t={width:k,height:a,pixelData:D,minValue:l,maxValue:u,noDataValue:V};ka&&(t.maskData=ka);T.returnEncodedMask&&q&&(t.encodedMaskData=q.bitset?q.bitset:null);if(T.returnFileInfo&&(t.fileInfo={fileIdentifierString:X,fileVersion:M,imageType:K,height:a,width:k,maxZError:r,eofOffset:P,mask:q?{numBlocksX:q.numBlocksX,
numBlocksY:q.numBlocksY,numBytes:q.numBytes,maxValue:q.maxValue}:null,pixels:{numBlocksX:x,numBlocksY:d,numBytes:w,maxValue:u,minValue:l,noDataValue:V}},T.computeUsedBitDepths)){T=t.fileInfo;q=x*d;X={};for(M=0;M<q;M++)K=Q[M],0===K.encoding?X.float32=!0:1===K.encoding?X[K.bitsPerPixel]=!0:X[0]=!0;q=Object.keys(X);T.bitDepths=q}return t}})},"esri/layers/support/rasterFormats/Raw":function(){define(function(){const da=function(aa){let Y=1;switch(aa){case Uint8Array:case Int8Array:Y=1;break;case Uint16Array:case Int16Array:Y=
2;break;case Uint32Array:case Int32Array:case Float32Array:Y=4;break;case Float64Array:Y=8}return Y};return function(){function aa(){}aa.decode=function(Y,W){var n=W.pixelType;const P=[],T=W.width*W.height;var V=Math.floor(Y.byteLength/(W.width*W.height*da(W.pixelType)));const {bandIds:Q,format:X}=W;W=Q&&Q.length||Math.floor(Y.byteLength/(W.width*W.height*da(W.pixelType)));var D=Y.byteLength-Y.byteLength%(T*da(n));const M=new n(Y,0,T*V);let K,a;let k,r;if("bip"===X)for(K=0;K<W;K++){k=new n(T);r=Q?
Q[K]:K;for(a=0;a<T;a++)k[a]=M[a*V+r];P.push(k)}else if("bsq"===X)for(K=0;K<W;K++)r=Q?Q[K]:K,P.push(M.subarray(r*T,(r+1)*T));if(D<Y.byteLength-1)if(Y=Y.slice(D),8*Y.byteLength<T)var q=null;else{Y=new Uint8Array(Y,0,Math.ceil(T/8));n=new Uint8Array(T);for(W=D=W=q=V=0;W<Y.length-1;W++)for(q=Y[W],D=7;0<=D;D--)n[V++]=q>>D&1;for(D=7;V<T-1;)q=Y[Y.length-1],n[V++]=q>>D&1,D--;q=n}return{pixels:P,mask:q}};return aa}()})},"esri/layers/support/rasterFunctions/pixelUtils":function(){define(["exports","../PixelBlock"],
function(da,aa){function Y(a,k){a=Math.min(Math.max(a,-100),100);k=Math.min(Math.max(k,-100),100);let r,q;const d=new Uint8Array(256);for(r=0;256>r;r++)0<a&&100>a?q=(200*r-25500+510*k)/(2*(100-a))+128:0>=a&&-100<a?q=(200*r-25500+510*k)*(100+a)/2E4+128:100===a?(q=200*r-25500+256*(100-a)+510*k,q=0<q?255:0):-100===a&&(q=128),d[r]=255<q?255:0>q?0:q;return d}function W(a,k,r,q,d,x,w,u){return{xmin:d<=r*a?0:d<r*a+a?d-r*a:a,ymin:x<=q*k?0:x<q*k+k?x-q*k:k,xmax:d+w<=r*a?0:d+w<r*a+a?d+w-r*a:a,ymax:x+u<=q*k?
0:x+u<q*k+k?x+u-q*k:k}}function n(a,k,r,q,d,x){const {width:w,height:u}=r.block,{x:l,y:f}=r.offset,{width:c,height:C}=r.mosaic;r=W(w,u,q,d,l,f,c,C);let p=0;var m=0;if(x){var E=x.hasGCSSShiftTransform?360:x.halfWorldWidth,A=w*x.resolutionX,F=x.startX+q*A;A=F+A;F<E&&A>E?m=x.rightPadding:F>=E&&(p=x.leftMargin-x.rightPadding,m=0)}r.xmax-=m;if("number"===typeof k)for(x=r.ymin;x<r.ymax;x++)for(m=(d*u+x-f)*c+(q*w-l)+p,E=r.xmin;E<r.xmax;E++)a[m+E]=k;else for(x=r.ymin;x<r.ymax;x++)for(m=(d*u+x-f)*c+(q*w-l)+
p,E=x*w,F=r.xmin;F<r.xmax;F++)a[m+F]=k[E+F]}function P(a,k,r,q,d){var x=a.filter(A=>K(A))[0];if(null==x)return null;const w=q?q.width:k.width,u=q?q.height:k.height;var l=x.width,f=x.height;const c=k.width/l,C=k.height/f;k={offset:r||{x:0,y:0},mosaic:q||k,block:{width:l,height:f}};r=x.pixelType;q=aa.getPixelArrayConstructor(r);l=x.pixels.length;x=[];for(var p=0;p<l;p++){f=new q(w*u);for(let A=0;A<C;A++)for(let F=0;F<c;F++){var m=a[A*c+F];K(m)&&(m=m.pixels[p],n(f,m,k,F,A,d))}x.push(f)}let E;if(a.some(A=>
null==A||A.mask&&0<A.mask.length))for(E=new Uint8Array(w*u),q=0;q<C;q++)for(l=0;l<c;l++)(p=(f=a[q*c+l])?f.mask:null)?n(E,p,k,l,q,d):f?n(E,1,k,l,q,d):n(E,0,k,l,q,d);a=new aa({width:w,height:u,pixels:x,pixelType:r,mask:E});a.updateStatistics();return a}function T(a){if(!K(a))return null;const k=a.clone(),{width:r,height:q,pixels:d,mask:x}=a;var w=d[0];a=k.pixels[0];for(let f=2;f<q-1;f++){const c=new Map;for(var u=f-2;u<f+2;u++)for(var l=0;4>l;l++){const C=u*r+l;X(c,w[C],x?x[C]:1)}a[f*r]=V(c);a[f*r+
1]=a[f*r+2]=a[f*r];for(u=3;u<r-1;u++)l=(f-2)*r+u+1,X(c,w[l],x?x[l]:1),l=(f-1)*r+u+1,X(c,w[l],x?x[l]:1),l=f*r+u+1,X(c,w[l],x?x[l]:1),l=(f+1)*r+u+1,X(c,w[l],x?x[l]:1),l=(f-2)*r+u-3,Q(c,w[l],x?x[l]:1),l=(f-1)*r+u-3,Q(c,w[l],x?x[l]:1),l=f*r+u-3,Q(c,w[l],x?x[l]:1),l=(f+1)*r+u-3,Q(c,w[l],x?x[l]:1),a[f*r+u]=V(c);a[f*r+u+1]=a[f*r+u]}for(w=0;w<r;w++)a[w]=a[r+w]=a[2*r+w],a[(q-1)*r+w]=a[(q-2)*r+w];k.updateStatistics();return k}function V(a){if(0===a.size)return 0;let k=0,r=-1,q=0;const d=a.keys();let x=d.next();
for(;!x.done;)q=a.get(x.value),q>k&&(r=x.value,k=q),x=d.next();return r}function Q(a,k,r){0!==r&&(r=a.get(k),1===r?a.delete(k):a.set(k,r-1))}function X(a,k,r){0!==r&&a.set(k,a.has(k)?a.get(k)+1:1)}function D(a,k,r){let {x:q,y:d}=k;const {width:x,height:w}=r;if(0===q&&0===d&&w===a.height&&x===a.width)return a;const {width:u,height:l}=a;k=Math.max(0,d);const f=Math.max(0,q),c=Math.min(q+x,u),C=Math.min(d+w,l);if(0>c||0>C||!K(a))return null;q=Math.max(0,-q);d=Math.max(0,-d);const {pixels:p,mask:m}=a;
var E=x*w,A=p.length;const F=[];for(var t=0;t<A;t++){var h=p[t],g=aa.createEmptyBand(a.pixelType,E);for(let y=k;y<C;y++){const O=y*u;let e=(y+d-k)*x+q;for(let b=f;b<c;b++)g[e++]=h[O+b]}F.push(g)}E=new Uint8Array(E);for(A=k;A<C;A++)for(t=A*u,h=(A+d-k)*x+q,g=f;g<c;g++)E[h++]=m?m[t+g]:1;a=new aa({width:r.width,height:r.height,pixelType:a.pixelType,pixels:F,mask:E});a.updateStatistics();return a}function M(a,k=!0){if(!K(a))return null;const {pixels:r,width:q,height:d,mask:x,pixelType:w}=a;a=[];const u=
Math.round(q/2),l=Math.round(d/2),f=d-1,c=q-1;for(var C=0;C<r.length;C++){var p=r[C],m=aa.createEmptyBand(w,u*l),E=0;for(var A=0;A<d;A+=2)for(var F=0;F<q;F+=2){var t=p[A*q+F];if(k){var h=F===c?t:p[A*q+F+1];const g=A===f?t:p[A*q+F+q],y=F===c?g:A===f?h:p[A*q+F+q+1];m[E++]=(t+h+g+y)/4}else m[E++]=t}a.push(m)}C=null;if(x)for(C=new Uint8Array(u*l),p=0,m=0;m<d;m+=2)for(E=0;E<q;E+=2)A=x[m*q+E],k?(F=E===c?A:x[m*q+E+1],t=m===f?A:x[m*q+E+q],h=E===c?t:m===f?F:x[m*q+E+q+1],C[p++]=A*F*t*h?1:0):C[p++]=A;return new aa({width:u,
height:l,pixelType:w,pixels:a,mask:C})}const K=function(a){return a&&"esri.layers.support.PixelBlock"===a.declaredClass&&a.pixels&&0<a.pixels.length};da.approximateTransform=function(a,k,r,q,d="nearest"){if(!K(a))return null;"majority"===d&&(a=T(a));const {pixels:x,mask:w,pixelType:u}=a,l=a.width;var f=a.height;a=aa.getPixelArrayConstructor(u);var c=x.length;const {width:C,height:p}=k;k=q.cols;var m=q.rows;const E=Math.ceil(C/k),A=Math.ceil(p/m);q=!1;for(var F=0;F<r.length;F+=3)-1===r[F]&&-1===r[F+
1]&&-1===r[F+2]&&(q=!0);let t,h,g,y,O,e;const b=new Float32Array(C*p),v=new Float32Array(C*p);F=0;let B,z;const I="majority"===d?0:.5;for(let H=0;H<A;H++)for(let N=0;N<E;N++){t=12*(H*E+N);d=r[t];h=r[t+1];g=r[t+2];y=r[t+3];O=r[t+4];e=r[t+5];for(var L=0;L<m;L++){F=(H*m+L)*C+N*k;z=(L+.5)/m;for(var J=0;J<L;J++)B=(J+.5)/k,b[F+J]=Math.round((d*B+h*z+g)*l-I),v[F+J]=Math.round((y*B+O*z+e)*f-I)}t+=6;d=r[t];h=r[t+1];g=r[t+2];y=r[t+3];O=r[t+4];e=r[t+5];for(L=0;L<m;L++)for(F=(H*m+L)*C+N*k,z=(L+.5)/m,J=L;J<k;J++)B=
(J+.5)/k,b[F+J]=Math.round((d*B+h*z+g)*l-I),v[F+J]=Math.round((y*B+O*z+e)*f-I)}r=(H,N)=>{for(let G=0;G<p;G++){t=G*C;for(let R=0;R<C;R++)H[t]=0>b[t]||0>v[t]?0:N[b[t]+v[t]*l],t++}};f=[];for(m=0;m<c;m++)k=new a(C*p),r(k,x[m]),f.push(k);a=new aa({width:C,height:p,pixelType:u,pixels:f});if(w)a.mask=new Uint8Array(C*p),r(a.mask,w);else if(q)for(a.mask=new Uint8Array(C*p),c=0;c<C*p;c++)a.mask[c]=0>b[c]||0>v[c]?0:1;a.updateStatistics();return a};da.clip=D;da.colorize=function(a,k){if(!K(a)||!k&&(k.indexedColormap||
k.indexed2DColormap))return a;const r=a.clone();var q=r.pixels;let d=r.mask;const x=r.width*r.height;if(1!==q.length)return a;const {indexedColormap:w,indexed2DColormap:u,offset:l,alphaSpecified:f}=k;k=w.length-1;a=0;q=q[0];const c=new Uint8Array(q.length),C=new Uint8Array(q.length),p=new Uint8Array(q.length);let m=0;if(w)if(d)for(a=0;a<x;a++)d[a]&&(m=4*(q[a]-l),m<l||m>k?d[a]=0:(c[a]=w[m],C[a]=w[m+1],p[a]=w[m+2],d[a]=w[m+3]));else{d=new Uint8Array(x);for(a=0;a<x;a++)m=4*(q[a]-l),m<l||m>k?d[a]=0:(c[a]=
w[m],C[a]=w[m+1],p[a]=w[m+2],d[a]=w[m+3]);r.mask=d}else if(d)for(a=0;a<x;a++)d[a]&&(k=u[q[a]],c[a]=k[0],C[a]=k[1],p[a]=k[2],d[a]=k[3]);else{d=new Uint8Array(x);for(a=0;a<x;a++)k=u[q[a]],c[a]=k[0],C[a]=k[1],p[a]=k[2],d[a]=k[3];r.mask=d}r.pixels=[c,C,p];r.statistics=null;r.pixelType="u8";r.maskIsAlpha=f;return r};da.createColormapLUT=function(a){if(a){var k=a.colormap;if(k&&0!==k.length){k=k.sort((f,c)=>f[0]-c[0]);var r=0;0>k[0][0]&&(r=k[0][0]);var q=Math.max(256,k[k.length-1][0]-r+1),d=new Uint8Array(4*
q),x=[],w=0,u=0,l=5===k[0].length;if(65536<q)return k.forEach(f=>{x[f[0]-r]=l?f.slice(1):f.slice(1).concat([255])}),{indexed2DColormap:x,offset:r,alphaSpecified:l};if(a.fillUnspecified)for(a=k[u],w=a[0]-r;w<q;w++)d[4*w]=a[1],d[4*w+1]=a[2],d[4*w+2]=a[3],d[4*w+3]=l?a[4]:255,w===a[0]-r&&(a=u===k.length-1?a:k[++u]);else for(w=0;w<k.length;w++)a=k[w],u=4*(a[0]-r),d[u]=a[1],d[u+1]=a[2],d[u+2]=a[3],d[u+3]=l?a[4]:255;return{indexedColormap:d,offset:r,alphaSpecified:l}}}};da.createContrastBrightnessLUT=Y;
da.createHistogramEqualizationLUT=function(a,k=256){k=Math.min(k,256);const {size:r,counts:q}=a;a=new Uint8Array(r);var d=q.reduce((f,c)=>f+c/k,0);let x=0;var w=0;let u=0,l=d;for(let f=0;f<r;f++)if(u+=q[f],!(f<r-1&&u+q[f+1]<l)){for(;x<k-1&&l<u;)x++,l+=d;for(;w<=f;w++)a[w]=x;w=f+1}for(d=w;d<r;d++)a[d]=k-1;return a};da.createStretchLUT=function(a){const {minCutOff:k,maxCutOff:r,gamma:q,pixelType:d}=a,x=a.outMin||0,w=a.outMax||255;if(-1===["u8","u16","s8","s16"].indexOf(d))return null;const u=k.length;
let l;let f=0;"s8"===d?f=-127:"s16"===d&&(f=-32767);let c=256;-1<["u16","s16"].indexOf(d)&&(c=65536);const C=[],p=w-x;for(l=0;l<u;l++)C[l]=r[l]-k[l];var m=q&&q.length>=u;const E=[];if(m)for(l=0;l<u;l++)E[l]=1<q[l]?2<q[l]?6.5+(q[l]-2)**2.5:6.5+100*(2-q[l])**4:1;let A;const F=[];let t,h,g;if(m)for(l=0;l<u;l++){g=[];for(m=0;m<c;m++)t=m+f,A=(t-k[l])/C[l],h=1,1<q[l]&&(h-=(1/p)**(A*E[l])),g[m]=t<r[l]&&t>k[l]?Math.floor(h*p*A**(1/q[l]))+x:t>=r[l]?w:x;F[l]=g}else for(l=0;l<u;l++){g=[];for(m=0;m<c;m++)t=m+
f,g[m]=t<=k[l]?x:t>=r[l]?w:Math.floor((t-k[l])/C[l]*p)+x;F[l]=g}if(null!=a.contrastOffset)for(a=Y(a.contrastOffset,a.brightnessOffset),l=0;l<u;l++)for(g=F[l],m=0;m<c;m++)g[m]=a[g[m]];return{lut:F,offset:f}};da.estimateStatisticsFromHistograms=function(a){const k=[];for(let x=0;x<a.length;x++){const {min:w,max:u,size:l,counts:f}=a[x];let c=0;var r=0;for(var q=0;q<l;q++)c+=f[q],r+=q*f[q];r/=c;q=0;for(var d=0;d<l;d++)q+=f[d]*(d-r)**2;d=(u-w)/l;k.push({min:w,max:u,avg:(r+.5)*d+w,stddev:Math.sqrt(q/(c-
1))*d})}return k};da.estimateStatisticsHistograms=function(a){if(!K(a))return null;a.statistics||a.updateStatistics();const {pixels:k,mask:r,pixelType:q,statistics:d}=a;a=a.width*a.height;const x=k.length;let w,u;let l;var f;const c=[],C=[];for(l=0;l<x;l++){var p=new Uint32Array(256);var m=k[l];if("u8"===q)if(w=-.5,u=255.5,r)for(f=0;f<a;f++)r[f]&&p[m[f]]++;else for(f=0;f<a;f++)p[m[f]]++;else{w=d[l].minValue;u=d[l].maxValue;var E=(u-w)/256;var A=new Uint32Array(257);if(r)for(f=0;f<a;f++)r[f]&&A[Math.floor((m[f]-
w)/E)]++;else for(f=0;f<a;f++)A[Math.floor((m[f]-w)/E)]++;for(f=0;255>f;f++)p[f]=A[f];p[255]=A[255]+A[256]}c.push({min:w,max:u,size:256,counts:p});for(f=m=A=E=0;256>f;f++)E+=p[f],A+=f*p[f];A/=E;for(f=0;256>f;f++)m+=p[f]*(f-A)**2;p=Math.sqrt(m/(E-1));E=(u-w)/256;f=(A+.5)*E+w;p*=E;C.push({min:w,max:u,avg:f,stddev:p})}return{statistics:C,histograms:c}};da.extractBands=function(a,k){if(null==k||!k.length||!K(a))return a;const r=a.pixels.length;return k&&k.some(q=>q>=r)||1===r&&1===k.length&&0===k[0]||
r===k.length&&!k.some((q,d)=>q!==d)?a:new aa({pixelType:a.pixelType,width:a.width,height:a.height,mask:a.mask,validPixelCount:a.validPixelCount,maskIsAlpha:a.maskIsAlpha,pixels:k.map(q=>a.pixels[q]),statistics:a.statistics&&k.map(q=>a.statistics[q])})};da.getClipBounds=W;da.lookupPixels=function(a,k){if(!K(a))return null;const {pixels:r,mask:q}=a,d=a.width*a.height,x=r.length;let w=k.lut;({offset:k}=k);let u,l;w&&1===w[0].length&&(w=r.map(()=>w));const f=[];let c,C,p;if(k)if(null==q)for(u=0;u<x;u++){c=
r[u];C=w[u];p=new Uint8Array(d);for(l=0;l<d;l++)p[l]=C[c[l]-k];f.push(p)}else for(u=0;u<x;u++){c=r[u];C=w[u];p=new Uint8Array(d);for(l=0;l<d;l++)q[l]&&(p[l]=C[c[l]-k]);f.push(p)}else if(null==q)for(u=0;u<x;u++){c=r[u];C=w[u];p=new Uint8Array(d);for(l=0;l<d;l++)p[l]=C[c[l]];f.push(p)}else for(u=0;u<x;u++){c=r[u];C=w[u];p=new Uint8Array(d);for(l=0;l<d;l++)q[l]&&(p[l]=C[c[l]]);f.push(p)}a=new aa({width:a.width,height:a.height,pixels:f,mask:q,pixelType:"u8"});a.updateStatistics();return a};da.mosaic=
P;da.mosaicPixelData=function(a,k){if(!a||0===a.length)return null;var r=a.filter(C=>C.pixelBlock)[0];if(!r)return null;var q=(r.extent.xmax-r.extent.xmin)/r.pixelBlock.width;const d=(r.extent.ymax-r.extent.ymin)/r.pixelBlock.height,x=.01*Math.min(q,d),w=a.sort((C,p)=>Math.abs(C.extent.ymax-p.extent.ymax)>x?p.extent.ymax-C.extent.ymax:Math.abs(C.extent.xmin-p.extent.xmin)>x?C.extent.xmin-p.extent.xmin:0);var u=Math.min.apply(null,w.map(C=>C.extent.xmin));const l=Math.min.apply(null,w.map(C=>C.extent.ymin)),
f=Math.max.apply(null,w.map(C=>C.extent.xmax)),c=Math.max.apply(null,w.map(C=>C.extent.ymax));a={x:Math.round((k.xmin-u)/q),y:Math.round((c-k.ymax)/d)};u={width:Math.round((f-u)/q),height:Math.round((c-l)/d)};q={width:Math.round((k.xmax-k.xmin)/q),height:Math.round((k.ymax-k.ymin)/d)};if(Math.round(u.width/r.pixelBlock.width)*Math.round(u.height/r.pixelBlock.height)!==w.length||0>a.x||0>a.y||u.width<q.width||u.height<q.height)return null;r=w.map(C=>C.pixelBlock);r=P(r,u,a,q);return{extent:k,pixelBlock:r}};
da.remapColor=function(a,k){if(!K(a))return null;a=a.clone();var {pixels:r}=a;const q=a.width*a.height,d=k.length,x=Math.floor(d/2),w=k[Math.floor(x)];r=r[0];let u,l,f,c,C,p,m=!1;const E=new Uint8Array(q),A=new Uint8Array(q),F=new Uint8Array(q);let t=a.mask;const h=4===k[0].mappedColor.length;t||(t=new Uint8Array(q),t.fill(h?255:1),a.mask=t);for(C=0;C<q;C++)if(t[C]){u=r[C];m=!1;p=x;l=w;f=0;for(c=d-1;1<c-f;){if(u===l.value){m=!0;break}u>l.value?f=p:c=p;p=Math.floor((f+c)/2);l=k[Math.floor(p)]}m||(u===
k[f].value?(l=k[f],m=!0):u===k[c].value?(l=k[c],m=!0):u<k[f].value?(m=!1,l=null):u>k[f].value&&(u<k[c].value?(l=k[f],m=!0):c===d-1?(m=!1,l=null):(l=k[c],m=!0)));m?(E[C]=l.mappedColor[0],A[C]=l.mappedColor[1],F[C]=l.mappedColor[2],t[C]=l.mappedColor[3]):E[C]=A[C]=F[C]=t[C]=0}a.pixels=[E,A,F];a.mask=t;a.pixelType="u8";a.maskIsAlpha=h;return a};da.resampleByMajority=T;da.setValidBoundary=function(a,k,r){if(!K(a))return null;const {width:q,height:d}=a,x=k.x;k=k.y;const w=r.width+x;r=r.height+k;if(0>x||
0>k||w>q||r>d||0===x&&0===k&&w===q&&r===d)return a;a.mask||(a.mask=new Uint8Array(q*d));const u=a.mask;for(let l=0;l<d;l++){const f=l*q;for(let c=0;c<q;c++)u[f+c]=l<k||l>=r||c<x||c>=w?0:1}a.updateStatistics();return a};da.split=function(a,k,r){if(!K(a))return null;const {width:q,height:d}=k;let {width:x,height:w}=a;const u=new Map,l={x:0,y:0};r=null==r?1:1+r;for(let f=0;f<r;f++){const c=Math.ceil(x/q),C=Math.ceil(w/d);for(let p=0;p<C;p++){l.y=p*d;for(let m=0;m<c;m++){l.x=m*q;const E=D(a,l,k);u.set(`${f}/${p}/${m}`,
E)}}f<r-1&&(a=M(a));x=Math.round(x/2);w=Math.round(w/2)}return u};da.stretch=function(a,k){if(!K(a))return null;a=a.clone();const {pixels:r,mask:q}=a,{minCutOff:d,maxCutOff:x,gamma:w}=k,u=k.outMin||0;k=k.outMax||255;const l=a.width*a.height,f=r.length;let c;let C,p,m;const E=k-u,A=[];for(c=0;c<f;c++)A[c]=x[c]-d[c];var F=w&&w.length>=f;const t=[];if(F)for(c=0;c<f;c++)t[c]=1<w[c]?2<w[c]?6.5+(w[c]-2)**2.5:6.5+100*(2-w[c])**4:1;if(F)if(null!=q)for(F=0;F<l;F++){if(q[F])for(c=0;c<f;c++)C=r[c][F],m=(C-d[c])/
A[c],p=1,1<w[c]&&(p-=(1/E)**(m*t[c])),r[c][F]=C<x[c]&&C>d[c]?Math.floor(p*E*m**(1/w[c]))+u:C>=x[c]?k:u}else for(F=0;F<l;F++)for(c=0;c<f;c++)C=r[c][F],m=(C-d[c])/A[c],p=1,1<w[c]&&(p-=(1/E)**(m*t[c])),r[c][F]=C<x[c]&&C>d[c]?Math.floor(p*E*m**(1/w[c]))+u:C>=x[c]?k:u;else if(null!=q)for(F=0;F<l;F++){if(q[F])for(c=0;c<f;c++)C=r[c][F],r[c][F]=C<x[c]&&C>d[c]?Math.floor((C-d[c])/A[c]*E)+u:C>=x[c]?k:u}else for(F=0;F<l;F++)for(c=0;c<f;c++)C=r[c][F],r[c][F]=C<x[c]&&C>d[c]?Math.floor((C-d[c])/A[c]*E)+u:C>=x[c]?
k:u;a.pixelType="u8";a.updateStatistics();return a};Object.defineProperty(da,"__esModule",{value:!0})})},"esri/renderers/support/RasterSymbolizer":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/colorUtils ../../core/JSONSupport ../../core/Logger ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../layers/support/RasterInfo ../../layers/support/rasterFunctions/pixelUtils ../../layers/support/rasterFunctions/surfaceUtils ./colorRampUtils".split(" "),
function(da,aa,Y,W,n,P,T,V,Q,X,D,M,K,a,k){function r(w,u){const {attributeTable:l,bandCount:f}=w;return!P.isSome(l)||1<f||u&&null==l.fields.find(c=>c.name.toLowerCase()===u.toLowerCase())?!1:!0}function q(w){const {bandCount:u,colormap:l}=w;return P.isSome(l)&&l.length&&1===u}const d=n.getLogger("esri.renderers.support.RasterSymbolizer"),x={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767],u32:[0,4294967295],s32:[-2147483648,2147483647],f32:[-3.4*1E39,3.4*1E39],
f64:[-Number.MAX_VALUE,Number.MAX_VALUE]};W=function(w){function u(f){return w.call(this,f)||this}da._inheritsLoose(u,w);var l=u.prototype;l.bind=function(){const {rendererJSON:f}=this;if(!f)return!1;this.lookup={rendererJSON:{}};let c;switch(f.type){case "uniqueValue":c=this._updateUVRenderer(f);break;case "rasterColormap":c=this._updateColormapRenderer(f);break;case "rasterStretch":c=this._updateStretchRenderer(f);break;case "classBreaks":c=this._updateClassBreaksRenderer(f);break;case "rasterShadedRelief":c=
this._updateShadedReliefRenderer(f)}return c};l.symbolize=function(f){let c=f&&f.pixelBlock;if(!this.isValidPixelBlock(c))return c;if(f.simpleStretchParams&&"rasterStretch"===this.rendererJSON.type)return this.simpleStretch(c,f.simpleStretchParams);try{3<c.pixels.length&&(c=K.extractBands(c,[0,1,2]));let C;switch(this.rendererJSON.type){case "uniqueValue":case "rasterColormap":C=this._symbolize_colormap(c);break;case "classBreaks":C=this._symbolize_classBreaks(c);break;case "rasterStretch":C=this._symbolize_stretch(c,
f.bandIds);break;case "rasterShadedRelief":({extent:f}=f),C=this._symbolize_shadedRelief(c,{isGCS:f.spatialReference.isGeographic,resolution:{x:(f.xmax-f.xmin)/c.width,y:(f.ymax-f.ymin)/c.height}})}return C}catch(C){return d.error("symbolize",C.message),c}};l.simpleStretch=function(f,c){if(!this.isValidPixelBlock(f))return f;try{return 3<f.pixels.length&&(f=K.extractBands(f,[0,1,2])),K.stretch(f,c)}catch(C){return d.error("symbolize",C.message),f}};l.generateWebGLParameters=function(f){if(-1<["uniqueValue",
"rasterColormap","classBreaks"].indexOf(this.rendererJSON.type)){var c;const {indexedColormap:A,offset:F}=(null==(c=this.lookup)?void 0:c.colormapLut)||{};return{colormap:A,colormapOffset:F,type:"lut"}}const {pixelBlock:C,isGCS:p,resolution:m,bandIds:E}=f;({rendererJSON:f}=this);return"rasterStretch"===f.type?this.generateStretchWebGLParams(C,f,E):"rasterShadedRelief"===f.type?this.generateShadedReliefWebGLParams(f,p,m):null};l._isLUTChanged=function(f){if(!this.lookup||!this.lookup.rendererJSON)return!0;
if("colorRamp"in this.rendererJSON){const c=this.rendererJSON.colorRamp;if(f)return JSON.stringify(c)!==JSON.stringify(this.lookup.rendererJSON.colorRamp);({...this.rendererJSON});({...this.lookup.rendererJSON})}return JSON.stringify(this.rendererJSON)!==JSON.stringify(this.lookup.rendererJSON)};l._symbolize_colormap=function(f){return this._isLUTChanged()&&!this.bind()?f:K.colorize(f,this.lookup.colormapLut)};l._symbolize_classBreaks=function(f){const c=-1<["u8","u16","s8","s16"].indexOf(this.rasterInfo.pixelType);
return this._isLUTChanged()&&!this.bind()?f:c?K.colorize(f,this.lookup.colormapLut):K.remapColor(f,this.lookup.remapLut)};l._symbolize_stretch=function(f,c){const {pixelType:C,bandCount:p}=this.rasterInfo,m=this.rendererJSON,E=-1<["u8","u16","s8","s16"].indexOf(C);let A;var {dra:F}=m;var t=m.useGamma?m.gamma:null;if("histogramEqualization"===m.stretchType){var h=F?null:this.lookup.histogramLut;c=this.getStretchCutoff(m,f,c,!h);t=K.stretch(f,{...c,gamma:t});t=K.lookupPixels(t,{lut:F?c.histogramLut:
h,offset:0})}else if(E){if(F)F=this.getStretchCutoff(m,f,c),A=K.createStretchLUT({pixelType:C,...F,gamma:t});else{if(this._isLUTChanged()&&!this.bind())return f;A=this.lookup?this.lookup.stretchLut:null}if(!A)return f;1<p&&(null==c?void 0:c.length)===f.pixels.length&&(null==(h=A)?void 0:h.lut.length)===p&&(A={lut:c.map(g=>A.lut[g]),offset:A.offset});t=K.lookupPixels(f,A)}else F=this.getStretchCutoff(m,f,c),t=K.stretch(f,{...F,gamma:t});if(m.colorRamp){if(this._isLUTChanged(!0)&&!this.bind())return f;
t=K.colorize(t,this.lookup.colormapLut)}return t};l._symbolize_shadedRelief=function(f,c){var C,p,m=this.rendererJSON;c=a.hillshade(f,{...m,...c});if(!m.colorRamp||this._isLUTChanged(!0)&&!this.bind())return c;m=this.lookup?this.lookup.hsvMap:null;if(!m)return c;const E=null!=(C=null==(p=P.unwrap(this.rasterInfo.statistics))?void 0:p[0])?C:{min:0,max:8E3};a.tintHillshade(c,f,m,E);return c};l._updateUVRenderer=function(f){const {bandCount:c,attributeTable:C,pixelType:p}=this.rasterInfo,m=f.field1;
if(!m)return!1;var E=1===c&&["u8","s8"].includes(p);if(!r(this.rasterInfo,m)&&!E)return!1;const A=[];if(C){const F=C.fields.filter(t=>"value"===t.name.toLowerCase())[0];if(!F)return!1;C.features.forEach(t=>{var h,g=f.uniqueValueInfos.filter(y=>String(y.value)===String(t.attributes[m]))[0];(g=null==g?void 0:null==(h=g.symbol)?void 0:h.color)&&A.push([t.attributes[F.name]].concat(g))})}else{if("value"!==m.toLowerCase())return!1;f.uniqueValueInfos.forEach(F=>{var t;const h=null==F?void 0:null==(t=F.symbol)?
void 0:t.color;h&&A.push([parseInt(""+F.value,10)].concat(h))})}if(0===A.length)return!1;E=K.createColormapLUT({colormap:A});this.lookup={rendererJSON:f,colormapLut:E};return this.canRenderInWebGL=!0};l._updateColormapRenderer=function(f){if(!q(this.rasterInfo))return!1;var c=f.colormapInfos.map(C=>[C.value].concat(C.color)).sort((C,p)=>C[0]-p[0]);if(!c||0===c.length)return!1;c=K.createColormapLUT({colormap:c});this.lookup={rendererJSON:f,colormapLut:c};return this.canRenderInWebGL=!0};l._updateShadedReliefRenderer=
function(f){if("elevation"!==this.rasterInfo.dataType)return!1;if(f.colorRamp){var c=k.convertColorRampToColormap(f.colorRamp,256,!0);c=K.createColormapLUT({colormap:c});const C=[],p=c.indexedColormap;for(let m=0;m<p.length;m+=4){const E=Y.toHSV({r:p[m],g:p[m+1],b:p[m+2]});C.push([E.h/60,E.s/100,255*E.v/100])}this.lookup={rendererJSON:f,colormapLut:c,hsvMap:C}}else this.lookup=null;return this.canRenderInWebGL=!0};l._updateClassBreaksRenderer=function(f){var c=-1<["u8","u16","s8","s16"].indexOf(this.rasterInfo.pixelType),
C=f.classBreakInfos;if(null==C||!C.length)return!1;C=C.sort((F,t)=>F.classMaxValue-t.classMaxValue);const p=C[C.length-1];var m=f.minValue;if(!c){c=[];for(var E=0;E<C.length;E++){var A;c.push({value:null!=(A=C[E].classMinValue)?A:m,mappedColor:C[E].symbol.color});m=C[E].classMaxValue}c.push({value:p.classMaxValue,mappedColor:p.symbol.color});this.lookup={rendererJSON:f,remapLut:c};this.canRenderInWebGL=!1;return!0}A=[];m=Math.floor(f.minValue);for(c=0;c<C.length;c++){for(E=C[c];m<E.classMaxValue;m++)A.push([m].concat(E.symbol.color));
m=Math.ceil(E.classMaxValue)}p.classMaxValue===m&&A.push([p.classMaxValue].concat(p.symbol.color));C=K.createColormapLUT({colormap:A,fillUnspecified:!1});this.lookup={rendererJSON:f,colormapLut:C};return this.canRenderInWebGL=!0};l._isHistogramRequired=function(f){return"percentClip"===f||"histogramEqualization"===f};l._isValidRasterStatistics=function(f){return P.isSome(f)&&0<f.length&&null!=f[0].min&&null!=f[0].max};l._updateStretchRenderer=function(f){var c;let {stretchType:C,dra:p}=f;if(!("none"===
C||null!=(c=f.statistics)&&c.length||this._isValidRasterStatistics(this.rasterInfo.statistics)||p))return!1;var m=P.unwrap(f.histograms||this.rasterInfo.histograms);!this._isHistogramRequired(f.stretchType)||null!=m&&m.length||p||(C="minMax");const {gamma:E,useGamma:A,colorRamp:F}=f;c=this.rasterInfo.pixelType;const t=!p&&-1<["u8","u16","s8","s16"].indexOf(c);"histogramEqualization"===C?(c=m.map(h=>K.createHistogramEqualizationLUT(h)),this.lookup={rendererJSON:f,histogramLut:c}):t&&(m=this.getStretchCutoff(f),
c=K.createStretchLUT({pixelType:c,...m,gamma:A?E:null}),this.lookup={rendererJSON:f,stretchLut:c});F&&(c=k.convertColorRampToColormap(F,256,!0),this.lookup||(this.lookup={rendererJSON:f}),this.lookup.colormapLut=K.createColormapLUT({colormap:c}),this.lookup.rendererJSON=f);return this.canRenderInWebGL=!0};l.getStretchCutoff=function(f,c,C,p){var m,E,A,F=f.stretchType;if(f.dra)if("minMax"===F&&c.statistics)c=c.statistics.map(B=>[B.minValue,B.maxValue,0,0]);else{var t=K.estimateStatisticsHistograms(c);
c=t.statistics;t=t.histograms}else{var h;c=0<(null==(h=f.statistics)?void 0:h.length)?f.statistics:P.unwrap(this.rasterInfo.statistics);t=f.histograms||P.unwrap(this.rasterInfo.histograms)}!this._isHistogramRequired(F)||null!=(m=t)&&m.length||(F="minMax");h=(null==(E=c)?void 0:E.length)||(null==(A=t)?void 0:A.length)||this.rasterInfo.bandCount;E=[];A=[];let g;let y,O,e;c&&!Array.isArray(c[0])&&(c=c.map(B=>[B.min,B.max,B.avg,B.stddev]));switch(F){case "none":c=x[this.rasterInfo.pixelType]||x.f32;for(m=
0;m<h;m++)E[m]=c[0],A[m]=c[1];break;case "minMax":for(m=0;m<h;m++)E[m]=c[m][0],A[m]=c[m][1];break;case "standardDeviation":for(m=0;m<h;m++)E[m]=c[m][2]-f.numberOfStandardDeviations*c[m][3],A[m]=c[m][2]+f.numberOfStandardDeviations*c[m][3],E[m]<c[m][0]&&(E[m]=c[m][0]),A[m]>c[m][1]&&(A[m]=c[m][1]);break;case "histogramEqualization":for(m=0;m<h;m++)E[m]=t[m].min,A[m]=t[m].max;break;case "percentClip":for(m=0;m<t.length;m++){c=t[m];y=new Uint32Array(c.size);var b=c.counts;g=0;h=(c.max-c.min)/c.size;O=
-.5===c.min&&1===h?.5:0;for(e=0;e<c.size;e++)g+=b[e],y[e]=g;b=f.minPercent*g/100;for(e=0;e<c.size;e++)if(y[e]>b){E[m]=c.min+h*(e+O);break}b=(1-f.maxPercent/100)*g;for(e=c.size-2;0<=e;e--)if(y[e]<b){A[m]=c.min+h*(e+2-O);break}}break;default:for(m=0;m<h;m++)E[m]=c[m][0],A[m]=c[m][1]}let v;"histogramEqualization"===F?(F=t[0].size||256,f=0,p&&(v=t.map(B=>K.createHistogramEqualizationLUT(B)))):(F=f.max||255,f=f.min||0);return this.getSelectedBandCutoffs({minCutOff:E,maxCutOff:A,outMax:F,outMin:f,histogramLut:v},
C)};l.getSelectedBandCutoffs=function(f,c){if(null==c||0===c.length)return f;const C=Math.max.apply(null,c),{minCutOff:p,maxCutOff:m,outMin:E,outMax:A,histogramLut:F}=f;return p.length===c.length||p.length<=C?f:{minCutOff:c.map(t=>p[t]),maxCutOff:c.map(t=>m[t]),histogramLut:F?c.map(t=>F[t]):null,outMin:E,outMax:A}};l.generateStretchWebGLParams=function(f,c,C){var p;let m=null,E=null;var A=this.lookup&&this.lookup.colormapLut;c.colorRamp&&A&&(m=A.indexedColormap,E=A.offset);"histogramEqualization"===
c.stretchType&&(c={...c,stretchType:"minMax"});({gamma:A}=c);const F=!!(c.useGamma&&A&&A.some(e=>1!==e)),{minCutOff:t,maxCutOff:h,outMin:g,outMax:y}=this.getStretchCutoff(c,f,C);c=null==(p=f)?void 0:p.getPlaneCount();2===c&&(f=f.clone(),f.statistics=[f.statistics[0]],f.pixels=[f.pixels[0]]);f=Math.min(3,(null==C?void 0:C.length)||c||this.rasterInfo.bandCount);C=new Float32Array(f);p=m||F?1:255;for(c=0;c<f;c++)C[c]=(y-g)/(h[c]-t[c])/p;const O=new Float32Array(f);if(F)for(c=0;c<f;c++)O[c]=1<A[c]?2<
A[c]?6.5+(A[c]-2)**2.5:6.5+100*(2-A[c])**4:1;return{bandCount:f,outMin:g/p,outMax:y/p,minCutOff:t,maxCutOff:h,factor:C,useGamma:F,gamma:F?A:[1,1,1],gammaCorrection:F?O:[1,1,1],colormap:m,colormapOffset:E,type:"stretch"}};l.generateShadedReliefWebGLParams=function(f,c,C){var p,m,E;let A=null,F=null;const t=this.lookup&&this.lookup.colormapLut;f.colorRamp&&t&&(A=t.indexedColormap,F=t.offset);c=a.calculateHillshadeParams({...f,isGCS:c,resolution:C});C=null==(p=P.unwrap(this.rasterInfo.statistics))?void 0:
p[0];return{...c,minValue:null!=(m=null==C?void 0:C.min)?m:0,maxValue:null!=(E=null==C?void 0:C.max)?E:8E3,hillshadeType:"traditional"===f.hillshadeType?0:1,type:"hillshade",colormap:A,colormapOffset:F}};l.isValidPixelBlock=function(f){return!!(f&&f.pixels&&0<f.pixels.length&&0!==f.validPixelCount)};return u}(W.JSONSupport);aa.__decorate([T.property({json:{write:!0}})],W.prototype,"rendererJSON",void 0);aa.__decorate([T.property({type:M,json:{write:!0}})],W.prototype,"rasterInfo",void 0);aa.__decorate([T.property({json:{write:!0}})],
W.prototype,"lookup",void 0);aa.__decorate([T.property()],W.prototype,"canRenderInWebGL",void 0);return W=aa.__decorate([D.subclass("esri.renderers.support.RasterSymbolizer")],W)})},"esri/layers/support/RasterInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../geometry/Extent ../../geometry/SpatialReference ./RasterStorageInfo".split(" "),
function(da,aa,Y,W,n,P,T,V,Q,X,D,M,K){Y=function(a){function k(r){r=a.call(this,r)||this;r.attributeTable=null;r.bandCount=null;r.colormap=null;r.extent=null;r.format=void 0;r.height=null;r.width=null;r.histograms=null;r.keyProperties={};r.multidimensionalInfo=null;r.noDataValue=null;r.pixelSize=null;r.pixelType=null;r.isPseudoSpatialReference=!1;r.spatialReference=null;r.statistics=null;r.storageInfo=null;r.transform=null;return r}da._inheritsLoose(k,a);da._createClass(k,[{key:"dataType",get:function(){var r,
q,d;const x=null!=(r=null==(q=this.keyProperties)?void 0:null==(d=q.DataType)?void 0:d.toLowerCase())?r:"generic";return"stdtime"===x?"standard-time":x}},{key:"nativeExtent",get:function(){return this._get("nativeExtent")||this.extent},set:function(r){r&&this._set("nativeExtent",r)}},{key:"nativePixelSize",get:function(){if(!W.isSome(this.transform)||!this.transform.affectsPixelSize)return this.pixelSize;const r=this.nativeExtent;return{x:r.width/this.width,y:r.height/this.height}}}]);return k}(Y.JSONSupport);
aa.__decorate([n.property({json:{write:!0}})],Y.prototype,"attributeTable",void 0);aa.__decorate([n.property({json:{write:!0}})],Y.prototype,"bandCount",void 0);aa.__decorate([n.property({json:{write:!0}})],Y.prototype,"colormap",void 0);aa.__decorate([n.property({type:String,readOnly:!0})],Y.prototype,"dataType",null);aa.__decorate([n.property({type:D,json:{write:!0}})],Y.prototype,"extent",void 0);aa.__decorate([n.property({type:D,json:{write:!0}})],Y.prototype,"nativeExtent",null);aa.__decorate([n.property({json:{write:!0}})],
Y.prototype,"nativePixelSize",null);aa.__decorate([n.property({json:{write:!0}})],Y.prototype,"format",void 0);aa.__decorate([n.property({json:{write:!0}})],Y.prototype,"height",void 0);aa.__decorate([n.property({json:{write:!0}})],Y.prototype,"width",void 0);aa.__decorate([n.property({json:{write:!0}})],Y.prototype,"histograms",void 0);aa.__decorate([n.property({json:{write:!0}})],Y.prototype,"keyProperties",void 0);aa.__decorate([n.property({json:{write:!0}})],Y.prototype,"multidimensionalInfo",
void 0);aa.__decorate([n.property()],Y.prototype,"noDataValue",void 0);aa.__decorate([n.property({json:{write:!0}})],Y.prototype,"pixelSize",void 0);aa.__decorate([n.property({json:{write:!0}})],Y.prototype,"pixelType",void 0);aa.__decorate([n.property()],Y.prototype,"isPseudoSpatialReference",void 0);aa.__decorate([n.property({type:M,json:{write:!0}})],Y.prototype,"spatialReference",void 0);aa.__decorate([n.property({json:{write:!0}})],Y.prototype,"statistics",void 0);aa.__decorate([n.property({type:K,
json:{write:!0}})],Y.prototype,"storageInfo",void 0);aa.__decorate([n.property({json:{write:!0}})],Y.prototype,"transform",void 0);return Y=aa.__decorate([X.subclass("esri.layers.support.RasterInfo")],Y)})},"esri/layers/support/RasterStorageInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../geometry/Point".split(" "),
function(da,aa,Y,W,n,P,T,V,Q,X){Y=function(D){function M(){var K=D.apply(this,arguments)||this;K.blockWidth=void 0;K.blockHeight=void 0;K.compression=null;K.origin=null;K.firstPyramidLevel=null;K.maximumPyramidLevel=null;K.pyramidScalingFactor=2;K.pyramidBlockWidth=null;K.pyramidBlockHeight=null;K.isVirtualTileInfo=!1;K.tileInfo=null;K.blockBoundary=null;return K}da._inheritsLoose(M,D);return M}(Y.JSONSupport);aa.__decorate([W.property({type:Number,json:{write:!0}})],Y.prototype,"blockWidth",void 0);
aa.__decorate([W.property({type:Number,json:{write:!0}})],Y.prototype,"blockHeight",void 0);aa.__decorate([W.property({type:String,json:{write:!0}})],Y.prototype,"compression",void 0);aa.__decorate([W.property({type:X,json:{write:!0}})],Y.prototype,"origin",void 0);aa.__decorate([W.property({type:Number,json:{write:!0}})],Y.prototype,"firstPyramidLevel",void 0);aa.__decorate([W.property({type:Number,json:{write:!0}})],Y.prototype,"maximumPyramidLevel",void 0);aa.__decorate([W.property({json:{write:!0}})],
Y.prototype,"pyramidResolutions",void 0);aa.__decorate([W.property({type:Number,json:{write:!0}})],Y.prototype,"pyramidScalingFactor",void 0);aa.__decorate([W.property({type:Number,json:{write:!0}})],Y.prototype,"pyramidBlockWidth",void 0);aa.__decorate([W.property({type:Number,json:{write:!0}})],Y.prototype,"pyramidBlockHeight",void 0);aa.__decorate([W.property({type:Boolean,json:{write:!0}})],Y.prototype,"isVirtualTileInfo",void 0);aa.__decorate([W.property({json:{write:!0}})],Y.prototype,"tileInfo",
void 0);aa.__decorate([W.property()],Y.prototype,"blockBoundary",void 0);return Y=aa.__decorate([Q.subclass("esri.layers.support.RasterStorageInfo")],Y)})},"esri/layers/support/rasterFunctions/surfaceUtils":function(){define(["exports","../PixelBlock"],function(da,aa){function Y(n){let {altitude:P,azimuth:T}=n;const {hillshadeType:V,pixelSizePower:Q,pixelSizeFactor:X,scalingType:D,isGCS:M,resolution:K}=n;var a="multi-directional"===V?2*n.zFactor:n.zFactor;const {x:k,y:r}=K;n=a/(8*k);var q=a/(8*r);
M&&.001<a&&(n/=111E3,q/=111E3);"adjusted"===D&&(M?(n=111E3*k,q=111E3*r,n=(a+n**Q*X)/(8*n),q=(a+q**Q*X)/(8*q)):(n=(a+k**Q*X)/(8*k),q=(a+r**Q*X)/(8*r)));var d=(90-P)*Math.PI/180;a=Math.cos(d);let x=(360-T+90)*Math.PI/180,w=Math.sin(d)*Math.cos(x);d=Math.sin(d)*Math.sin(x);const u=[315,270,225,360,180,0],l=[60,60,60,60,60,90];var f=new Float32Array([3,5,3,2,1,4]);const c=f.reduce((A,F)=>A+F);f=f.map(A=>A/c);const C="multi-directional"===V?u.length:1,p=new Float32Array(6),m=new Float32Array(6),E=new Float32Array(6);
if("multi-directional"===V)for(let A=0;A<C;A++)P=l[A],T=u[A],d=(90-P)*Math.PI/180,a=Math.cos(d),x=(360-T+90)*Math.PI/180,w=Math.sin(d)*Math.cos(x),d=Math.sin(d)*Math.sin(x),p[A]=a,m[A]=w,E[A]=d;else p.fill(a),m.fill(w),E.fill(d);return{resolution:K,factor:[n,q],sinZcosA:w,sinZsinA:d,cosZ:a,sinZcosAs:m,sinZsinAs:E,cosZs:p,weights:f,hillshadeType:["traditional","multi-directional"].indexOf(V)}}const W=function(n){return n&&"esri.layers.support.PixelBlock"===n.declaredClass&&n.pixels&&0<n.pixels.length};
da.calculateHillshadeParams=Y;da.hillshade=function(n,P){if(!W(n))return n;const {width:T,height:V,mask:Q}=n,X=new Uint8Array(T*V);Q&&X.set(Q);const {factor:D,sinZcosA:M,sinZsinA:K,cosZ:a,sinZcosAs:k,sinZsinAs:r,cosZs:q,weights:d}=Y(P),[x,w]=D;var {hillshadeType:u}=P;const l=n.pixels[0];P=new Uint8Array(T*V);let f;for(let t=1;t<V-1;t++){const h=t*T;for(let g=1;g<T-1;g++)if(Q&&!Q[h+g])P[h+g]=0;else{var c=8;if(Q&&(c=Q[h-T+g-1]+Q[h-T+g]+Q[h-T+g+1]+Q[h+g-1]+Q[h+g+1]+Q[h+T+g-1]+Q[h+T+g]+Q[h+T+g+1],7>c)){P[h+
g]=0;X[h+g]=0;continue}if(7===c){var C=Q[h-T+g-1]?l[h-T+g-1]:l[h+g];var p=Q[h-T+g]?l[h-T+g]:l[h+g];var m=Q[h-T+g+1]?l[h-T+g+1]:l[h+g];c=Q[h+g-1]?l[h+g-1]:l[h+g];f=Q[h+g+1]?l[h+g+1]:l[h+g];var E=Q[h+T+g-1]?l[h+T+g-1]:l[h+g];var A=Q[h+T+g]?l[h+T+g]:l[h+g];var F=Q[h+T+g+1]?l[h+T+g+1]:l[h+g]}else C=l[h-T+g-1],p=l[h-T+g],m=l[h-T+g+1],c=l[h+g-1],f=l[h+g+1],E=l[h+T+g-1],A=l[h+T+g],F=l[h+T+g+1];c=(m+f+f+F-(C+c+c+E))*x;C=(E+A+A+F-(C+p+p+m))*w;p=Math.sqrt(1+c*c+C*C);m=0;if("traditional"===u)c=255*(a+K*C-M*
c)/p,0>c&&(c=0),m=c;else for(E=r.length,A=0;A<E;A++)F=255*(q[A]+r[A]*C-k[A]*c)/p,0>F&&(F=0),m+=F*d[A];P[h+g]=m&255}}for(u=0;u<V;u++)P[u*T]=P[u*T+1],P[(u+1)*T-1]=P[(u+1)*T-2];for(u=1;u<T-1;u++)P[u]=P[u+T],P[u+(V-1)*T]=P[u+(V-2)*T];return new aa({width:T,height:V,pixels:[P],mask:Q?X:null,pixelType:"u8",validPixelCount:n.validPixelCount,statistics:[{minValue:0,maxValue:255}]})};da.tintHillshade=function(n,P,T,V){if(W(n)&&W(P)){var {min:Q,max:X}=V;V=n.pixels[0];var {pixels:D,mask:M}=P;P=D[0];var K=255.00001/
(X-Q),a=new Uint8ClampedArray(P.length),k=new Uint8ClampedArray(P.length),r=new Uint8ClampedArray(P.length),q=T.length-1;for(let w=0;w<P.length;w++){if(M&&0===M[w])continue;var d=Math.floor((P[w]-Q)*K);const [u,l]=T[0>d?0:d>q?q:d];var x=V[w];d=x*l;const f=d*(1-Math.abs(u%2-1));x-=d;switch(Math.floor(u)){case 0:a[w]=d+x;k[w]=f+x;r[w]=x;break;case 1:a[w]=f+x;k[w]=d+x;r[w]=x;break;case 2:a[w]=x;k[w]=d+x;r[w]=f+x;break;case 3:a[w]=x;k[w]=f+x;r[w]=d+x;break;case 4:a[w]=f+x;k[w]=x;r[w]=d+x;break;case 5:case 6:a[w]=
d+x,k[w]=x,r[w]=f+x}}n.pixels=[a,k,r];n.updateStatistics()}};Object.defineProperty(da,"__esModule",{value:!0})})},"esri/renderers/support/colorRampUtils":function(){define(["exports","../../Color","../../core/colorUtils"],function(da,aa,Y){function W(V,Q){if(!V||!Q||V.length!==Q.length)return!1;for(let X=0;X<V.length;X++)if(V[X]>Q[X]+2||V[X]<Q[X]-2)return!1;return!0}function n(V,Q){if(V){Q=Q?Q:P;var X=null,D;"algorithmic"===V.type?Q.some(M=>{if(W(V.fromColor.toRgb(),M.fromColor)&&W(V.toColor.toRgb(),
M.toColor))return X=M.id,!0}):"multipart"===V.type&&Q.some(M=>{if(V.colorRamps&&M.colorRamps&&V.colorRamps.length===M.colorRamps.length&&(D=V.colorRamps,!M.colorRamps.some((K,a)=>{if(!W(D[a].fromColor.toRgb(),(new aa(K.fromColor)).toRgb())||!W(D[a].toColor.toRgb(),(new aa(K.toColor)).toRgb()))return!0}))){if(X)return!0;X=M.id}});return X}}const P=[{id:"aspect_predefined",type:"multipart",colorRamps:[{fromColor:[190,190,190],toColor:[255,45,8]},{fromColor:[255,45,8],toColor:[255,181,61]},{fromColor:[255,
181,61],toColor:[255,254,52]},{fromColor:[255,254,52],toColor:[0,251,50]},{fromColor:[0,251,50],toColor:[255,254,52]},{fromColor:[0,253,255],toColor:[0,181,255]},{fromColor:[0,181,255],toColor:[26,35,253]},{fromColor:[26,35,253],toColor:[255,57,251]},{fromColor:[255,57,251],toColor:[255,45,8]}]},{id:"blackToWhite_predefined",fromColor:[0,0,0],toColor:[255,255,255]},{id:"blueBright_predefined",fromColor:[204,204,255],toColor:[0,0,224]},{id:"blueLightToDark_predefined",fromColor:[211,229,232],toColor:[46,
100,140]},{id:"blueGreenBright_predefined",fromColor:[203,245,234],toColor:[48,207,146]},{id:"blueGreenLightToDark_predefined",fromColor:[216,242,237],toColor:[21,79,74]},{id:"brownLightToDark_predefined",fromColor:[240,236,170],toColor:[102,72,48]},{id:"brownToBlueGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[156,85,31],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[33,130,145]}]},{id:"brownToBlueGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[110,
70,45],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[48,100,102]}]},{id:"coefficientBias_predefined",fromColor:[214,214,255],toColor:[0,57,148]},{id:"coldToHotDiverging_predefined",type:"multipart",colorRamps:[{fromColor:[69,117,181],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[214,47,39]}]},{id:"conditionNumber_predefined",type:"multipart",colorRamps:[{fromColor:[0,97,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,34,0]}]},{id:"cyanToPurple_predefined",type:"multipart",
colorRamps:[{fromColor:[0,245,245],toColor:[0,0,245]},{fromColor:[0,0,245],toColor:[245,0,245]}]},{id:"cyanLightToBlueDark_predefined",type:"multipart",colorRamps:[{fromColor:[182,237,240],toColor:[31,131,224]},{fromColor:[31,131,224],toColor:[9,9,145]}]},{id:"distance_predefined",fromColor:[255,200,0],toColor:[0,0,255]},{id:"elevation1_predefined",type:"multipart",colorRamps:[{fromColor:[175,240,233],toColor:[255,255,179]},{fromColor:[255,255,179],toColor:[0,128,64]},{fromColor:[0,128,64],toColor:[252,
186,3]},{fromColor:[252,186,3],toColor:[128,0,0]},{fromColor:[120,0,0],toColor:[105,48,13]},{fromColor:[105,48,13],toColor:[171,171,171]},{fromColor:[171,171,171],toColor:[255,252,255]}]},{id:"elevation2_predefined",type:"multipart",colorRamps:[{fromColor:[118,219,211],toColor:[255,255,199]},{fromColor:[255,255,199],toColor:[255,255,128]},{fromColor:[255,255,128],toColor:[217,194,121]},{fromColor:[217,194,121],toColor:[135,96,38]},{fromColor:[135,96,38],toColor:[150,150,181]},{fromColor:[150,150,
181],toColor:[181,150,181]},{fromColor:[181,150,181],toColor:[255,252,255]}]},{id:"errors_predefined",fromColor:[255,235,214],toColor:[196,10,10]},{id:"grayLightToDark_predefined",fromColor:[219,219,219],toColor:[69,69,69]},{id:"greenBright_predefined",fromColor:[204,255,204],toColor:[14,204,14]},{id:"greenLightToDark_predefined",fromColor:[220,245,233],toColor:[34,102,51]},{id:"greenToBlue_predefined",type:"multipart",colorRamps:[{fromColor:[32,204,16],toColor:[0,242,242]},{fromColor:[0,242,242],
toColor:[2,33,227]}]},{id:"orangeBright_predefined",fromColor:[255,235,204],toColor:[240,118,5]},{id:"orangeLightToDark_predefined",fromColor:[250,233,212],toColor:[171,65,36]},{id:"partialSpectrum_predefined",type:"multipart",colorRamps:[{fromColor:[242,241,162],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]},{fromColor:[252,3,69],toColor:[176,7,237]},{fromColor:[176,7,237],toColor:[2,29,173]}]},{id:"partialSpectrum1Diverging_predefined",type:"multipart",colorRamps:[{fromColor:[135,
38,38],toColor:[240,149,12]},{fromColor:[240,149,12],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[74,80,181]},{fromColor:[74,80,181],toColor:[39,32,122]}]},{id:"partialSpectrum2Diverging_predefined",type:"multipart",colorRamps:[{fromColor:[115,77,42],toColor:[201,137,52]},{fromColor:[201,137,52],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[91,63,176]},{fromColor:[91,63,176],toColor:[81,13,97]}]},{id:"pinkToYellowGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[158,
30,113],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[99,110,45]}]},{id:"pinkToYellowGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[97,47,73],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[22,59,15]}]},{id:"precipitation_predefined",type:"multipart",colorRamps:[{fromColor:[194,82,60],toColor:[237,161,19]},{fromColor:[237,161,19],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,219,0]},{fromColor:[0,219,0],toColor:[32,153,143]},{fromColor:[32,153,
143],toColor:[11,44,122]}]},{id:"prediction_predefined",type:"multipart",colorRamps:[{fromColor:[40,146,199],toColor:[250,250,100]},{fromColor:[250,250,100],toColor:[232,16,20]}]},{id:"purpleBright_predefined",fromColor:[255,204,255],toColor:[199,0,199]},{id:"purpleToGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[77,32,150],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[20,122,11]}]},{id:"purpleToGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[67,
14,89],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[24,79,15]}]},{id:"purpleBlueBright_predefined",fromColor:[223,184,230],toColor:[112,12,242]},{id:"purpleBlueLightToDark_predefined",fromColor:[229,213,242],toColor:[93,44,112]},{id:"purpleRedBright_predefined",fromColor:[255,204,225],toColor:[199,0,99]},{id:"purpleRedLightToDark_predefined",fromColor:[250,215,246],toColor:[143,17,57]},{id:"redBright_predefined",fromColor:[255,204,204],toColor:[219,0,0]},{id:"redLightToDark_predefined",
fromColor:[255,224,224],toColor:[143,10,10]},{id:"redToBlueDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[196,69,57],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[48,95,207]}]},{id:"redToBlueDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[107,13,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[13,53,97]}]},{id:"redToGreen_predefined",type:"multipart",colorRamps:[{fromColor:[245,0,0],toColor:[245,245,0]},{fromColor:[245,245,0],toColor:[0,
245,0]}]},{id:"redToGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[186,20,20],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[54,145,33]}]},{id:"redToGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[97,21,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[16,69,16]}]},{id:"slope_predefined",type:"multipart",colorRamps:[{fromColor:[56,168,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]},{id:"spectrumFullBright_predefined",
type:"multipart",colorRamps:[{fromColor:[255,0,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,0,255]}]},{id:"spectrumFullDark_predefined",type:"multipart",colorRamps:[{fromColor:[153,0,0],toColor:[153,153,0]},{fromColor:[153,153,0],toColor:[0,153,153]},{fromColor:[0,153,153],toColor:[0,0,153]}]},{id:"spectrumFullLight_predefined",type:"multipart",colorRamps:[{fromColor:[255,153,153],toColor:[255,255,153]},{fromColor:[255,255,153],toColor:[153,
255,255]},{fromColor:[153,255,255],toColor:[153,153,255]}]},{id:"surface_predefined",type:"multipart",colorRamps:[{fromColor:[112,153,89],toColor:[242,238,162]},{fromColor:[242,238,162],toColor:[242,206,133]},{fromColor:[242,206,133],toColor:[194,140,124]},{fromColor:[194,140,124],toColor:[255,242,255]}]},{id:"temperature_predefined",type:"multipart",colorRamps:[{fromColor:[255,252,255],toColor:[255,0,255]},{fromColor:[255,0,255],toColor:[0,0,255]},{fromColor:[0,0,255],toColor:[0,255,255]},{fromColor:[0,
255,255],toColor:[0,255,0]},{fromColor:[0,255,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,128,0]},{fromColor:[255,128,0],toColor:[128,0,0]}]},{id:"whiteToBlack_predefined",fromColor:[255,255,255],toColor:[0,0,0]},{id:"yellowToDarkRed_predefined",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[242,167,46]},{fromColor:[242,167,46],toColor:[107,0,0]}]},{id:"yellowToGreenToDarkBlue_predefined",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[56,224,9]},{fromColor:[56,
224,9],toColor:[26,147,171]},{fromColor:[26,147,171],toColor:[12,16,120]}]},{id:"yellowToRed_predefined",fromColor:[245,245,0],toColor:[255,0,0]},{id:"yellowGreenBright_predefined",fromColor:[236,252,204],toColor:[157,204,16]},{id:"yellowGreenLightToDark_predefined",fromColor:[215,240,175],toColor:[96,107,45]}],T={aspect_predefined:"Aspect",blackToWhite_predefined:"Black to White",blueBright_predefined:"Blue Bright",blueLightToDark_predefined:"Blue Light to Dark",blueGreenBright_predefined:"Blue-Green Bright",
blueGreenLightToDark_predefined:"Blue-Green Light to Dark",brownLightToDark_predefined:"Brown Light to Dark",brownToBlueGreenDivergingBright_predefined:"Brown to Blue Green Diverging, Bright",brownToBlueGreenDivergingDark_predefined:"Brown to Blue Green Diverging, Dark",coefficientBias_predefined:"Coefficient Bias",coldToHotDiverging_predefined:"Cold to Hot Diverging",conditionNumber_predefined:"Condition Number",cyanToPurple_predefined:"Cyan to Purple",cyanLightToBlueDark_predefined:"Cyan-Light to Blue-Dark",
distance_predefined:"Distance",elevation1_predefined:"Elevation #1",elevation2_predefined:"Elevation #2",errors_predefined:"Errors",grayLightToDark_predefined:"Gray Light to Dark",greenBright_predefined:"Green Bright",greenLightToDark_predefined:"Green Light to Dark",greenToBlue_predefined:"Green to Blue",orangeBright_predefined:"Orange Bright",orangeLightToDark_predefined:"Orange Light to Dark",partialSpectrum_predefined:"Partial Spectrum",partialSpectrum1Diverging_predefined:"Partial Spectrum 1 Diverging",
partialSpectrum2Diverging_predefined:"Partial Spectrum 2 Diverging",pinkToYellowGreenDivergingBright_predefined:"Pink to YellowGreen Diverging, Bright",pinkToYellowGreenDivergingDark_predefined:"Pink to YellowGreen Diverging, Dark",precipitation_predefined:"Precipitation",prediction_predefined:"Prediction",purpleBright_predefined:"Purple Bright",purpleToGreenDivergingBright_predefined:"Purple to Green Diverging, Bright",purpleToGreenDivergingDark_predefined:"Purple to Green Diverging, Dark",purpleBlueBright_predefined:"Purple-Blue Bright",
purpleBlueLightToDark_predefined:"Purple-Blue Light to Dark",purpleRedBright_predefined:"Purple-Red Bright",purpleRedLightToDark_predefined:"Purple-Red Light to Dark",redBright_predefined:"Red Bright",redLightToDark_predefined:"Red Light to Dark",redToBlueDivergingBright_predefined:"Red to Blue Diverging, Bright",redToBlueDivergingDark_predefined:"Red to Blue Diverging, Dark",redToGreen_predefined:"Red to Green",redToGreenDivergingBright_predefined:"Red to Green Diverging, Bright",redToGreenDivergingDark_predefined:"Red to Green Diverging, Dark",
slope_predefined:"Slope",spectrumFullBright_predefined:"Spectrum-Full Bright",spectrumFullDark_predefined:"Spectrum-Full Dark",spectrumFullLight_predefined:"Spectrum-Full Light",surface_predefined:"Surface",temperature_predefined:"Temperature",whiteToBlack_predefined:"White to Black",yellowToDarkRed_predefined:"Yellow to Dark Red",yellowToGreenToDarkBlue_predefined:"Yellow to Green to Dark Blue",yellowToRed_predefined:"Yellow to Red",yellowGreenBright_predefined:"Yellow-Green Bright",yellowGreenLightToDark_predefined:"Yellow-Green Light to Dark"};
da.PREDEFINED_COLOR_RAMP_NAME_MAP=T;da.PREDEFINED_JSON_COLOR_RAMPS=P;da.convertColorRampToColormap=function(V,Q,X=!1){if(V&&Q&&!(1>Q)){var D="toJSON"in V?V.toJSON():V,M="multipart"===D.type?D.colorRamps.length:1;V=[];var K=[],a,k,r,q=0;if(1===Q){var d="multipart"===D.type?D.colorRamps[0].fromColor:D.fromColor;K.push([0].concat(d));return K}for(let w=0;w<M;w++)V[w]={start:null,end:null},V[w].start=q,V[w].end=q+1/M,q=V[w].end;for(let w=0;w<Q;w++){var x=w/(Q-1);V.forEach((u,l)=>{if(x>=u.start&&(x<u.end||
w===Q-1&&l===M-1)){r=(x-u.start)/(u.end-u.start);"multipart"===D.type?(d=D.colorRamps[l].fromColor,a=D.colorRamps[l].toColor):(d=D.fromColor,a=D.toColor);if(0===w)K.push([w].concat(d.slice(0,3)));else if(w===Q-1)K.push([w].concat(a.slice(0,3)));else{var f={r:a[0],g:a[1],b:a[2]};u=r;l=Y.toLAB({r:d[0],g:d[1],b:d[2]});f=Y.toLAB(f);k=Y.toRGB({l:l.l*(1-u)+u*f.l,a:l.a*(1-u)+u*f.a,b:l.b*(1-u)+u*f.b});K.push([w,k.r,k.g,k.b])}u=null!=d[3]?1<d[3]?d[3]/255:d[3]:1;l=null!=a[3]?1<a[3]?a[3]/255:a[3]:1;X&&K[w].push(Math.min(255,
Math.round(255*(u*(1-r)+l*r))))}})}return K}};da.getColorRampId=n;da.getColorRampName=function(V){return(V=n(V))?T[V]:null};Object.defineProperty(da,"__esModule",{value:!0})})},"*noref":1}});
define("../../chunks/_rollupPluginBabelHelpers ../../geometry ./PixelBlock ./rasterFormats/RasterCodec ./rasterFunctions/pixelUtils ../../renderers/support/RasterSymbolizer ../../geometry/Extent".split(" "),function(da,aa,Y,W,n,P,T){return function(){function V(){}var Q=V.prototype;Q.decode=function(){var X=da._asyncToGenerator(function*(D){return(D=yield W.decode(D.data,D.options))&&D.toJSON()});return function(D){return X.apply(this,arguments)}}();Q.symbolize=function(X){X.pixelBlock=Y.fromJSON(X.pixelBlock);
X.extent=X.extent?T.fromJSON(X.extent):null;X=this.symbolizer.symbolize(X);return Promise.resolve(X&&X.toJSON())};Q.updateSymbolizer=function(){var X=da._asyncToGenerator(function*(D){var M;this.symbolizer=P.fromJSON(D.symbolizerJSON);D.histograms&&"rasterStretch"===(null==(M=this.symbolizer)?void 0:M.rendererJSON.type)&&(this.symbolizer.rendererJSON.histograms=D.histograms)});return function(D){return X.apply(this,arguments)}}();Q.stretch=function(X){X=this.symbolizer.simpleStretch(Y.fromJSON(X.srcPixelBlock),
X.stretchParams);return Promise.resolve(X&&X.toJSON())};Q.estimateStatisticsHistograms=function(X){X=n.estimateStatisticsHistograms(Y.fromJSON(X.srcPixelBlock));return Promise.resolve(X)};Q.split=function(X){const D=n.split(Y.fromJSON(X.srcPixelBlock),X.tileSize,X.maximumPyramidLevel);D&&D.forEach((M,K)=>{D.set(K,null==M?void 0:M.toJSON())});return Promise.resolve(D)};Q.mosaicAndTransform=function(){var X=da._asyncToGenerator(function*(D){var M=D.srcPixelBlocks.map(K=>K?new Y(K):null);M=n.mosaic(M,
D.srcMosaicSize,null,null,D.alignmentInfo);return D.coefs?(D=n.approximateTransform(M,D.destDimension,D.coefs,D.sampleSpacing,D.interpolation))&&D.toJSON():M&&M.toJSON()});return function(D){return X.apply(this,arguments)}}();return V}()});