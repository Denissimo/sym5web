// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.20/esri/copyright.txt for details.
//>>built
define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../symbols ../../core/jsonMap ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ./LabelExpressionInfo ./labelUtils ../../symbols/support/defaults ../../symbols/support/jsonUtils".split(" "),
function(B,f,v,n,d,w,g,F,G,H,C,D,q,x,p,E,y){function t(h){return"map-image"===(null==h?void 0:h.type)}function z(h){var k,c;return t(h)?!(null==(k=h.capabilities)||null==(c=k.exportMap)||!c.supportsArcadeExpressionForLabeling):!1}var u;n=new n.JSONMap({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",
esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",
esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},
{ignoreUnknown:!0});d=u=function(h){function k(a){a=h.call(this,a)||this;a.type="label";a.name=null;a.deconflictionStrategy="static";a.labelExpression=null;a.labelExpressionInfo=null;a.labelPlacement=null;a.maxScale=0;a.minScale=0;a.symbol=E.defaultTextSymbol2D;a.useCodedValues=void 0;a.where=null;return a}B._inheritsLoose(k,h);k.evaluateWhere=function(a,e){const m=function(b,r,l){switch(r){case "\x3d":return b==l?!0:!1;case "\x3c\x3e":return b!=l?!0:!1;case "\x3e":return b>l?!0:!1;case "\x3e\x3d":return b>=
l?!0:!1;case "\x3c":return b<l?!0:!1;case "\x3c\x3d":return b<=l?!0:!1}return!1};try{if(null==a)return!0;const b=a.split(" ");if(3===b.length)return m(e[b[0]],b[1],b[2]);if(7===b.length){const r=m(e[b[0]],b[1],b[2]),l=b[3],A=m(e[b[4]],b[5],b[6]);switch(l){case "AND":return r&&A;case "OR":return r||A}}return!1}catch(b){console.log("Error.: can't parse \x3d "+a)}};var c=k.prototype;c.readLabelExpression=function(a,e){e=e.labelExpressionInfo;if(!e||!e.value&&!e.expression)return a};c.writeLabelExpression=
function(a,e,m){if(this.labelExpressionInfo)if(null!=this.labelExpressionInfo.value)a=p.templateStringToSql(this.labelExpressionInfo.value);else if(null!=this.labelExpressionInfo.expression){const b=p.getSingleFieldArcadeExpression(this.labelExpressionInfo.expression);b&&(a="["+b+"]")}null!=a&&(e[m]=a)};c.writeLabelExpressionInfo=function(a,e,m,b){if(null==a&&null!=this.labelExpression&&(b?"service"===b.origin?0:!t(b.layer):1))a=new x({expression:this.getLabelExpressionArcade()});else if(!a)return;
a=a.toJSON(b);a.expression&&(e[m]=a)};c.writeMaxScale=function(a,e){if(a||this.minScale)e.maxScale=a};c.writeMinScale=function(a,e){if(a||this.maxScale)e.minScale=a};c.getLabelExpression=function(){return p.getLabelExpression(this)};c.getLabelExpressionArcade=function(){return p.getLabelExpressionArcade(this)};c.getLabelExpressionSingleField=function(){return p.getLabelExpressionSingleField(this)};c.hash=function(){return JSON.stringify(this)};c.clone=function(){return new u({deconflictionStrategy:this.deconflictionStrategy,
labelExpression:this.labelExpression,labelExpressionInfo:w.clone(this.labelExpressionInfo),labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,symbol:w.clone(this.symbol),where:this.where,useCodedValues:this.useCodedValues})};return k}(d.JSONSupport);f.__decorate([g.property({type:String,json:{write:!0}})],d.prototype,"name",void 0);f.__decorate([g.property({type:String,json:{write:!0,default:"static",origins:{"web-scene":{write:!1}}}})],d.prototype,"deconflictionStrategy",
void 0);f.__decorate([g.property({type:String,json:{write:{overridePolicy(h,k,c){return this.labelExpressionInfo&&"service"===(null==c?void 0:c.origin)&&z(c.layer)?{enabled:!1}:{allowNull:!0}}}}})],d.prototype,"labelExpression",void 0);f.__decorate([C.reader("labelExpression")],d.prototype,"readLabelExpression",null);f.__decorate([q.writer("labelExpression")],d.prototype,"writeLabelExpression",null);f.__decorate([g.property({type:x,json:{write:{overridePolicy(h,k,c){return(c?"service"===c.origin?
0:!t(c.layer):1)||z(c.layer)?{allowNull:!0}:{enabled:!1}}}}})],d.prototype,"labelExpressionInfo",void 0);f.__decorate([q.writer("labelExpressionInfo")],d.prototype,"writeLabelExpressionInfo",null);f.__decorate([g.property({type:n.apiValues,json:{type:n.jsonValues,read:n.read,write:n.write}})],d.prototype,"labelPlacement",void 0);f.__decorate([g.property({type:Number})],d.prototype,"maxScale",void 0);f.__decorate([q.writer("maxScale")],d.prototype,"writeMaxScale",null);f.__decorate([g.property({type:Number})],
d.prototype,"minScale",void 0);f.__decorate([q.writer("minScale")],d.prototype,"writeMinScale",null);f.__decorate([g.property({types:v.symbolTypesLabel,json:{origins:{"web-scene":{types:v.symbolTypesLabel3D,write:y.write,default:null}},write:y.write,default:null}})],d.prototype,"symbol",void 0);f.__decorate([g.property({type:Boolean,json:{write:!0}})],d.prototype,"useCodedValues",void 0);f.__decorate([g.property({type:String,json:{write:!0}})],d.prototype,"where",void 0);return d=u=f.__decorate([D.subclass("esri.layers.support.LabelClass")],
d)});