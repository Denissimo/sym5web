// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.20/esri/copyright.txt for details.
//>>built
define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/HandleOwner ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass".split(" "),function(c,l,d,t,u,e,z,A,B,C,v){const w={visible:"visibleSublayers"};c.ExportWMSImageParameters=function(m){function f(a){a=m.call(this,a)||this;a.scale=0;return a}l._inheritsLoose(f,m);
f.prototype.toJSON=function(){const {layer:a,layers:b}=this,{imageFormat:g,imageTransparency:h,version:k}=a;return{format:g,request:"GetMap",service:"WMS",styles:"",transparent:h,version:k,layers:b}};l._createClass(f,[{key:"layer",set:function(a){this._get("layer")!==a&&(this._set("layer",a),this.handles.remove("layer"),a&&this.handles.add([a.sublayers.on("change",()=>this.notifyChange("visibleSublayers")),a.on("wms-sublayer-update",b=>this.notifyChange(w[b.propertyName]))],"layer"))}},{key:"layers",
get:function(){const {visibleSublayers:a}=this;return a.filter(b=>b.name).map(b=>b.name).join(",")}},{key:"version",get:function(){this.commitProperty("layers");const a=this.layer;a&&a.commitProperty("imageTransparency");return(this._get("version")||0)+1}},{key:"visibleSublayers",get:function(){const {layer:a,scale:b}=this,g=null==a?void 0:a.sublayers,h=[],k=n=>{const {minScale:p,maxScale:q,sublayers:r,visible:x}=n,y=0===b||(0===p||b<=p)&&(0===q||b>=q);x&&y&&(r?r.forEach(k):h.unshift(n))};null==g?
void 0:g.forEach(k);return h}}]);return f}(u.HandleOwnerMixin(t));d.__decorate([e.property()],c.ExportWMSImageParameters.prototype,"layer",null);d.__decorate([e.property({readOnly:!0})],c.ExportWMSImageParameters.prototype,"layers",null);d.__decorate([e.property({type:Number})],c.ExportWMSImageParameters.prototype,"scale",void 0);d.__decorate([e.property({readOnly:!0})],c.ExportWMSImageParameters.prototype,"version",null);d.__decorate([e.property({readOnly:!0})],c.ExportWMSImageParameters.prototype,
"visibleSublayers",null);c.ExportWMSImageParameters=d.__decorate([v.subclass("esri.layers.support.ExportWMSImageParameters")],c.ExportWMSImageParameters);Object.defineProperty(c,"__esModule",{value:!0})});