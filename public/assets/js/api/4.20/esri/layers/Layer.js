// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.20/esri/copyright.txt for details.
//>>built
define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../config ../geometry ../request ../core/Error ../core/Evented ../core/Identifiable ../core/Loadable ../core/Logger ../core/promiseUtils ../core/urlUtils ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/jsonMap ../core/accessorSupport/decorators/subclass ../geometry/Extent ../geometry/SpatialReference".split(" "),function(p,k,d,v,c,w,x,y,z,A,q,B,C,e,F,G,H,D,r,l){let E=0;const t=
q.getLogger("esri.layers.Layer");c=function(u){function g(){var a=u.apply(this,arguments)||this;a.attributionDataUrl=null;a.fullExtent=new r(-180,-90,180,90,l.WGS84);a.id=Date.now().toString(16)+"-layer-"+E++;a.legendEnabled=!0;a.listMode="show";a.opacity=1;a.parent=null;a.popupEnabled=!0;a.attributionVisible=!0;a.spatialReference=l.WGS84;a.title=null;a.type=null;a.url=null;a.visible=!0;return a}k._inheritsLoose(g,u);g.fromArcGISServerUrl=function(){var a=k._asyncToGenerator(function*(b){b="string"===
typeof b?{url:b}:b;const h=yield new Promise(function(f,m){p(["./support/arcgisLayers"],f,m)});try{return yield h.fromUrl(b)}catch(f){throw t.error("#fromArcGISServerUrl({ url: '"+b.url+"'})","Failed to create layer from arcgis server url",f),f;}});return function(b){return a.apply(this,arguments)}}();g.fromPortalItem=function(){var a=k._asyncToGenerator(function*(b){b="portalItem"in b?b:{portalItem:b};const h=yield new Promise(function(f,m){p(["../portal/support/portalLayers"],f,m)});try{return yield h.fromItem(b)}catch(f){throw b=
b&&b.portalItem,t.error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+(b&&b.portal&&b.portal.url||v.portalUrl)+"', id: '"+(b&&b.id||"unset")+"')",f),f;}});return function(b){return a.apply(this,arguments)}}();var n=g.prototype;n.initialize=function(){this.when().catch(a=>{if(!B.isAbortError(a)){var b,h;q.getLogger(this.declaredClass).error("#load()",`Failed to load layer (title: '${null!=(b=this.title)?b:"no title"}', id: '${null!=(h=this.id)?h:"no id"}')`,{error:a})}})};
n.destroy=function(){if(this.parent){const a=this.parent;"layers"in a&&a.layers.includes(this)?a.layers.remove(this):"tables"in a&&a.tables.includes(this)?a.tables.remove(this):"baseLayers"in a&&a.baseLayers.includes(this)?a.baseLayers.remove(this):"baseLayers"in a&&a.referenceLayers.includes(this)&&a.referenceLayers.remove(this)}};n.fetchAttributionData=function(){var a=k._asyncToGenerator(function*(){const b=this.attributionDataUrl;if(this.hasAttributionData&&b)return(yield w(b,{query:{f:"json"},
responseType:"json"})).data;throw new x("layer:no-attribution-data","Layer does not have attribution data");});return function(){return a.apply(this,arguments)}}();k._createClass(g,[{key:"hasAttributionData",get:function(){return null!=this.attributionDataUrl}},{key:"parsedUrl",get:function(){const a=this.url;return a?C.urlToObject(a):null}}]);return g}(y.EventedMixin(z.IdentifiableMixin(A)));d.__decorate([e.property({type:String})],c.prototype,"attributionDataUrl",void 0);d.__decorate([e.property({type:r})],
c.prototype,"fullExtent",void 0);d.__decorate([e.property({readOnly:!0})],c.prototype,"hasAttributionData",null);d.__decorate([e.property({type:String})],c.prototype,"id",void 0);d.__decorate([e.property({type:Boolean,nonNullable:!0})],c.prototype,"legendEnabled",void 0);d.__decorate([e.property({type:["show","hide","hide-children"]})],c.prototype,"listMode",void 0);d.__decorate([e.property({type:Number,range:{min:0,max:1},nonNullable:!0})],c.prototype,"opacity",void 0);d.__decorate([e.property()],
c.prototype,"parent",void 0);d.__decorate([e.property({readOnly:!0})],c.prototype,"parsedUrl",null);d.__decorate([e.property({type:Boolean})],c.prototype,"popupEnabled",void 0);d.__decorate([e.property({type:Boolean})],c.prototype,"attributionVisible",void 0);d.__decorate([e.property({type:l})],c.prototype,"spatialReference",void 0);d.__decorate([e.property({type:String})],c.prototype,"title",void 0);d.__decorate([e.property({type:String,readOnly:!0,json:{read:!1}})],c.prototype,"type",void 0);d.__decorate([e.property()],
c.prototype,"url",void 0);d.__decorate([e.property({type:Boolean,nonNullable:!0})],c.prototype,"visible",void 0);return c=d.__decorate([D.subclass("esri.layers.Layer")],c)});