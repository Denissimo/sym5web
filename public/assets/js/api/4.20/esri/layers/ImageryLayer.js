// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.20/esri/copyright.txt for details.
//>>built
require({cache:{"esri/layers/mixins/ArcGISImageService":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../Graphic ../../rasterRenderers ../../request ../../core/Error ../../core/jsonMap ../../core/lang ../../core/Logger ../../core/maybe ../../core/promiseUtils ../../core/urlUtils ../../core/accessorSupport/decorators/aliasOf ../../core/accessorSupport/ensureType ../../core/has ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../support/commonProperties ../support/DimensionalDefinition ../support/ExportImageServiceParameters ../support/Field ../support/FieldsIndex ../support/imageryRendererUtils ../support/MosaicRule ../support/PixelBlock ../support/rasterEnums ../support/RasterFunction ../support/RasterInfo ../support/RasterJobHandler ../support/rasterFormats/RasterCodec ../../renderers/support/rasterRendererHelper ../../renderers/support/RasterSymbolizer ../../rest/imageService ../../rest/support/FeatureSet ../../rest/support/ImageHistogramParameters ../../rest/support/ImageIdentifyParameters ../../rest/support/ImageSampleParameters ../../rest/support/Query ../../tasks/ImageIdentifyTask ../../tasks/QueryTask ../../geometry/SpatialReference ../../geometry/Polygon ../../geometry/Extent ../../geometry/Point".split(" "),
function(Y,C,x,S,m,W,T,V,N,G,u,A,z,c,k,l,e,a,h,f,q,b,g,p,H,y,r,Q,K,U,F,t,v,J,Z,n,d,D,R,P,X,B,E,L,O,M,ba,da){function ca(fa){if(!fa)return null;fa=JSON.stringify(fa).match(/"rasterFunction":"(.*?")/gi);return(fa=null==fa?void 0:fa.map(na=>na.replace('"rasterFunction":"',"").replace('"',"")))?fa.join("/"):null}const ha=u.getLogger("esri.layers.mixins.ArcGISImageService"),ma=N.strict()({U1:"u1",U2:"u2",U4:"u4",U8:"u8",S8:"s8",U16:"u16",S16:"s16",U32:"u32",S32:"s32",F32:"f32",F64:"f64",C64:"c64",C128:"c128",
UNKNOWN:"unknown"}),pa=new Set("png png8 png24 png32 jpg bmp gif jpgpng lerc tiff".split(" ")),ra=a.ensureRange(l.ensureNumber,{min:0,max:255});Y.ArcGISImageService=fa=>{fa=function(na){function qa(){var w=na.apply(this,arguments)||this;w._functionRasterInfos={};w._rasterJobHandler={instance:null,refCount:0,connectionPromise:null};w._symbolizer=null;w._defaultServiceMosaicRule=null;w.rasterAttributeTableFieldPrefix="Raster.";w.adjustAspectRatio=null;w.bandCount=null;w.bandIds=void 0;w.capabilities=
null;w.compressionQuality=void 0;w.compressionTolerance=.01;w.copyright=null;w.definitionExpression=null;w.exportImageServiceParameters=null;w.rasterInfo=null;w.fields=null;w.fullExtent=null;w.hasMultidimensions=!1;w.imageMaxHeight=4100;w.imageMaxWidth=4100;w.interpolation=void 0;w.minScale=0;w.maxScale=0;w.multidimensionalInfo=null;w.noData=null;w.noDataInterpretation=void 0;w.objectIdField=null;w.pixelSizeX=null;w.pixelSizeY=null;w.pixelFilter=null;w.raster=void 0;w.viewId=void 0;w.renderer=null;
w.rasterAttributeTable=null;w.rasterFunctionInfos=null;w.serviceDataType=null;w.spatialReference=null;w.pixelType=null;w.serviceRasterInfo=null;w.sourceJSON=null;w.url=null;w.version=null;return w}C._inheritsLoose(qa,na);var ia=qa.prototype;ia.initialize=function(){this._set("exportImageServiceParameters",new p.ExportImageServiceParameters({layer:this}))};ia.readDefaultServiceMosaicRule=function(w,I){return Q.fromJSON(I)};ia.readBandIds=function(w,I){if(Array.isArray(w)&&0<w.length&&w.every(aa=>"number"===
typeof aa))return w};ia.readCapabilities=function(w,I){return this._readCapabilities(I)};ia.writeCompressionQuality=function(w,I,aa){null!=w&&"lerc"!==this.format&&(I[aa]=w)};ia.writeCompressionTolerance=function(w,I,aa){"lerc"===this.format&&null!=w&&(I[aa]=w)};ia.readFormat=function(w,I){return"esriImageServiceDataTypeVector-UV"===I.serviceDataType||"esriImageServiceDataTypeVector-MagDir"===I.serviceDataType?"lerc":null!=this.pixelFilter?"lerc":"jpgpng"};ia.readMinScale=function(w,I){return null!=
I.minLOD&&null!=I.maxLOD?w:0};ia.readMaxScale=function(w,I){return null!=I.minLOD&&null!=I.maxLOD?w:0};ia.readMosaicRule=function(w,I){return Q.fromJSON(w||I.mosaicRule||I)};ia.writeMosaicRule=function(w,I,aa){w=this.mosaicRule;const ea=this.definitionExpression;w?ea&&ea!==w.where&&(w=w.clone(),w.where=ea):ea&&(w=new Q({where:ea}));this._isValidCustomizedMosaicRule(w)&&(I[aa]=w.toJSON())};ia.writeNoData=function(w,I,aa){null!=w&&"number"===typeof w&&(I[aa]=ra(w))};ia.readObjectIdField=function(w,
I){w||(w=(w=I.fields.filter(aa=>"esriFieldTypeOID"===aa.type||"oid"===aa.type))&&w[0]&&w[0].name);return w};ia.readRenderer=function(w,I,aa){var ea,ja;w=null==I?void 0:null==(ea=I.layerDefinition)?void 0:null==(ja=ea.drawingInfo)?void 0:ja.renderer;aa=W.read(w,aa);if(null==aa)return null;"vector-field"===aa.type&&I.symbolTileSize&&!w.symbolTileSize&&(aa.symbolTileSize=I.symbolTileSize);r.isSupportedRendererType(aa)||ha.warn("ArcGISImageService","Imagery layer doesn't support given renderer type.");
return aa};ia.writeRenderer=function(w,I,aa){I.layerDefinition=I.layerDefinition||{};I.layerDefinition.drawingInfo=I.layerDefinition.drawingInfo||{};I.layerDefinition.drawingInfo.renderer=w.toJSON();"vector-field"===w.type&&(I.symbolTileSize=w.symbolTileSize)};ia.readRenderingRule=function(w,I){w=I.rasterFunctionInfos;return I.renderingRule||w&&w.length&&"None"!==w[0].name?F.fromJSON(I.renderingRule||{rasterFunctionInfos:I.rasterFunctionInfos}):null};ia.writeRenderingRule=function(w,I,aa){this._isRFTJson(w)||
(I[aa]=w.toJSON())};ia.readSpatialReference=function(w,I){return(w=w||I.extent.spatialReference)?O.fromJSON(w):null};ia.readPixelType=function(w){return ma.fromJSON(w)||w};ia.writePixelType=function(w,I,aa){if(A.isNone(this.serviceRasterInfo)||this.pixelType!==this.serviceRasterInfo.pixelType)I[aa]=ma.toJSON(w)};ia.readVersion=function(w,I){(w=I.currentVersion)||(w=I.hasOwnProperty("fields")||I.hasOwnProperty("timeInfo")?10:9.3);return w};ia.applyFilter=function(w){let I=w;this.pixelFilter&&(I=this._clonePixelData(w),
this.pixelFilter(I));return I};ia.applyRenderer=function(){var w=C._asyncToGenerator(function*(I,aa){var ea=I;if(!this._isPicture()&&this.renderer&&this._symbolizer&&!this.pixelFilter){ea=JSON.stringify(this._cachedRendererJson)!==JSON.stringify(this.renderer.toJSON());const ja=this._rasterJobHandler.instance,{bandIds:ka}=this;ja?(ea&&(this._symbolizer.bind(),yield ja.updateSymbolizer(this._symbolizer,aa),this._cachedRendererJson=this.renderer.toJSON()),aa=yield ja.symbolize({bandIds:ka,...I},aa),
ea={extent:I.extent,pixelBlock:aa}):ea={extent:I.extent,pixelBlock:this._symbolizer.symbolize({bandIds:ka,...I})}}return ea});return function(I,aa){return w.apply(this,arguments)}}();ia.destroy=function(){this._shutdownJobHandler()};ia.increaseRasterJobHandlerUsage=function(){this._rasterJobHandler.refCount++};ia.decreaseRasterJobHandlerUsage=function(){this._rasterJobHandler.refCount--;0>=this._rasterJobHandler.refCount&&this._shutdownJobHandler()};ia.computeHistograms=function(){var w=C._asyncToGenerator(function*(I,
aa){yield this._fetchCapabilities(null==aa?void 0:aa.signal);if(!this.capabilities.operations.supportsComputeHistograms)throw new V("imagery-layer:compute-histograms","this operation is not supported on the input image service");I=l.ensureClass(R,I).clone();const {raster:ea,mosaicRule:ja,renderingRule:ka}=this;ka&&null==I.renderingRule&&(I.renderingRule=ka);ja&&null==I.mosaicRule&&(I.mosaicRule=ja);ea&&null==I.raster&&(I.raster=ea);return d.computeHistograms(this.url,I,this._getRequestOptions(aa))});
return function(I,aa){return w.apply(this,arguments)}}();ia.computeStatisticsHistograms=function(){var w=C._asyncToGenerator(function*(I,aa){yield this._fetchCapabilities(null==aa?void 0:aa.signal);if(!this.capabilities.operations.supportsComputeStatisticsHistograms)throw new V("imagery-layer:compute-statistics-histograms","this operation is not supported on the input image service");I=l.ensureClass(R,I).clone();const {raster:ea,mosaicRule:ja,renderingRule:ka}=this;ka&&null==I.renderingRule&&(I.renderingRule=
ka);ja&&null==I.mosaicRule&&(I.mosaicRule=ja);ea&&null==I.raster&&(I.raster=ea);return d.computeStatisticsHistograms(this.url,I,this._getRequestOptions(aa))});return function(I,aa){return w.apply(this,arguments)}}();ia.fetchImage=function(w,I,aa,ea={}){if(null==w||null==I||null==aa)return Promise.reject(new V("imagery-layer:fetch-image","Insufficient parameters for requesting an image. A valid extent, width and height values are required."));const ja=this.renderer||this._symbolizer?this.generateRasterInfo(this.renderingRule,
{signal:ea.signal}):null;return z.when(ja).then(ka=>{ka&&(this.rasterInfo=ka);ka={imageServiceParameters:this.getExportImageServiceParameters(w,I,aa,ea.timeExtent),imageProps:{extent:w,width:I,height:aa,format:this.format},requestAsImageElement:ea.requestAsImageElement&&!this.pixelFilter||!1,signal:ea.signal};return this._requestArrayBuffer(ka)})};ia.fetchKeyProperties=function(w){w=w&&w.renderingRule&&w.renderingRule.toJSON();return T(this.parsedUrl.path+"/keyProperties",{query:this._getQueryParams({renderingRule:10.3<=
this.version&&w?JSON.stringify(w):null})}).then(I=>I.data)};ia.fetchRasterAttributeTable=function(w){w=w&&w.renderingRule&&w.renderingRule.toJSON();return 10.1>this.version?Promise.reject(new V("#fetchRasterAttributeTable()","Failed to get rasterAttributeTable")):T(this.parsedUrl.path+"/rasterAttributeTable",{query:this._getQueryParams({renderingRule:10.3<=this.version&&w?JSON.stringify(w):null})}).then(I=>D.fromJSON(I.data))};ia.getCatalogItemRasterInfo=function(){var w=C._asyncToGenerator(function*(I,
aa){var ea=T(this.parsedUrl.path+"/"+I+"/info",{query:this._getQueryParams(),...aa}).then(ja=>ja.data);I=T(this.parsedUrl.path+"/"+I+"/info/keyProperties",{query:this._getQueryParams(),...aa}).then(ja=>ja.data).catch(()=>{});ea=yield Promise.all([ea,I]);if(ea[0])return I=ba.fromJSON(ea[0].extent),aa=ea[0].statistics?ea[0].statistics.map(ja=>({min:ja[0],max:ja[1],avg:ja[2],stddev:ja[3]})):null,new t({bandCount:ea[0].bandCount,extent:I,spatialReference:I.sr,pixelSize:new da({x:ea[0].pixelSizeX,y:ea[0].pixelSizeY,
spatialReference:I.sr}),pixelType:ea[0].pixelType.toLowerCase(),statistics:aa,histograms:ea[0].histograms,keyProperties:ea[1]||{}})});return function(I,aa){return w.apply(this,arguments)}}();ia.getCatalogItemICSInfo=function(){var w=C._asyncToGenerator(function*(I,aa){var {data:ea}=yield T(this.parsedUrl.path+"/"+I+"/info/ics",{query:this._getQueryParams(),...aa});if(ea=ea&&ea.ics){var ja=null;try{ja=(yield T(this.parsedUrl.path+"/"+I+"/info",{query:this._getQueryParams(),...aa})).data.extent}catch{}if(!ja||
!ja.spatialReference)return{ics:ea,icsToPixelTransform:null,icsExtent:null,northDirection:null};var ka=10.7<=this.version?T(this.parsedUrl.path+"/"+I+"/info/icstopixel",{query:this._getQueryParams(),...aa}).then(wa=>wa.data).catch(()=>({})):{},oa=ja.spatialReference,la={geometries:JSON.stringify({geometryType:"esriGeometryEnvelope",geometries:[ja]}),inSR:oa.wkid||JSON.stringify(oa),outSR:"0:"+I};la=T(this.parsedUrl.path+"/project",{query:this._getQueryParams(la),...aa}).then(wa=>wa.data).catch(()=>
({}));var sa=(ja.xmin+ja.xmax)/2,va=(ja.ymax-ja.ymin)/6;ja=ja.ymin+va;var za=[];for(let wa=0;5>wa;wa++)za.push({x:sa,y:ja+va*wa});I={geometries:JSON.stringify({geometryType:"esriGeometryPoint",geometries:za}),inSR:oa.wkid||JSON.stringify(oa),outSR:"0:"+I};aa=T(this.parsedUrl.path+"/project",{query:this._getQueryParams(I),...aa}).then(wa=>wa.data).catch(()=>({}));ka=yield Promise.all([ka,la,aa]);aa=ka[0].ipxf;if(null==aa){var ua,ta,xa;I=null==(ua=ea.geodataXform)?void 0:ua.xf_0;"topup"===(null==I?
void 0:null==(ta=I.name)?void 0:ta.toLowerCase())&&6===(null==I?void 0:null==(xa=I.coefficients)?void 0:xa.length)&&(aa={affine:{name:"ics [sensor: Frame] to pixel (column, row) transformation",coefficients:I.coefficients,cellsizeRatio:0,type:"GeometricXform"}})}if(ua=ba.fromJSON(ka[1]&&ka[1].geometries&&ka[1].geometries[0]))ua.spatialReference=new O({wkid:0,imageCoordinateSystem:ea});ta=ka[2].geometries?ka[2].geometries.filter(wa=>null!=wa&&null!=wa.x&&null!=wa.y&&"NaN"!==wa.x&&"NaN"!==wa.y):[];
xa=ta.length;if(3>xa)return{ics:ea,icsToPixelTransform:aa,icsExtent:ua,northDirection:null};oa=la=I=ka=0;for(sa=0;sa<xa;sa++)ka+=ta[sa].x,I+=ta[sa].y,la+=ta[sa].x*ta[sa].x,oa+=ta[sa].x*ta[sa].y;xa=(xa*oa-ka*I)/(xa*la-ka*ka);ka=0;I=ta[4].x>ta[0].x;ta=ta[4].y>ta[0].y;Infinity===xa?ka=ta?90:270:0===xa?ka=I?0:180:0<xa?ka=I?180*Math.atan(xa)/Math.PI:180*Math.atan(xa)/Math.PI+180:0>xa&&(ka=ta?180+180*Math.atan(xa)/Math.PI:360+180*Math.atan(xa)/Math.PI);return{ics:ea,icsToPixelTransform:aa,icsExtent:ua,
northDirection:ka}}});return function(I,aa){return w.apply(this,arguments)}}();ia.generateRasterInfo=function(){var w=C._asyncToGenerator(function*(I,aa){if((!I||"none"===I.functionName.toLowerCase()||this._isVectorFieldResampleFunction(I))&&A.isSome(this.serviceRasterInfo))return this.serviceRasterInfo;const ea=ca(I);if(this._functionRasterInfos[ea])return this._functionRasterInfos[ea];I=this._generateRasterInfo(I,aa);this._functionRasterInfos[ea]=I;try{return yield I}catch{return this._functionRasterInfos[ea]=
null}});return function(I,aa){return w.apply(this,arguments)}}();ia.getExportImageServiceParameters=function(w,I,aa,ea){w=w.clone().shiftCentralMeridian();var ja=w.spatialReference;if(ja.imageCoordinateSystem){const {id:ua,referenceServiceName:ta}=ja.imageCoordinateSystem;ja=null!=ua?ta?-1<this.parsedUrl.path.toLowerCase().indexOf("/"+ta.toLowerCase()+"/")?"0:"+ua:JSON.stringify({icsid:ua,icsns:ta}):"0:"+ua:JSON.stringify({ics:ja.imageCoordinateSystem})}else ja=ja.wkid||JSON.stringify(ja.toJSON());
A.isSome(this.serviceRasterInfo)&&this.pixelType!==this.serviceRasterInfo.pixelType&&(this.exportImageServiceParameters.pixelType=this.pixelType);const ka=this.exportImageServiceParameters.toJSON(),{bandIds:oa,noData:la,mosaicRule:sa}=ka;var {renderingRule:va}=ka;ka.bandIds=oa instanceof Array&&0<oa.length&&!this.renderingRule?oa.join(","):void 0;if(null!=oa&&oa.length&&this.renderingRule)if("Colormap"===va.rasterFunction){const ua=new F({functionName:"ExtractBand",functionArguments:{BandIds:oa,raster:va.rasterFunctionArguments.Raster}});
va.rasterFunctionArguments.Raster=ua}else va=new F({functionName:"ExtractBand",functionArguments:{BandIds:oa,raster:va}});la instanceof Array&&0<la.length&&(ka.noData=la.join(","));const za=this.timeInfo;sa&&sa.multidimensionalDefinition&&ea&&za&&za.startField&&(sa.multidimensionalDefinition=sa.multidimensionalDefinition.filter(ua=>ua.dimensionName!==za.startField));ka.mosaicRule=sa&&JSON.stringify(sa);ka.renderingRule=va&&JSON.stringify(va);va={};if(ea){const {start:ua,end:ta}=ea.toJSON();if(ua&&
ta&&ua===ta)va.time=""+ua;else if(null!=ua||null!=ta)va.time=`${null==ua?"null":ua},${null==ta?"null":ta}`}return{bbox:w.xmin+","+w.ymin+","+w.xmax+","+w.ymax,bboxSR:ja,imageSR:ja,size:I+","+aa,...ka,...va}};ia.getSamples=function(){var w=C._asyncToGenerator(function*(I,aa){yield this._fetchCapabilities(null==aa?void 0:aa.signal);if(!this.capabilities.operations.supportsGetSamples)throw new V("imagery-layer:get-samples","getSamples operation is not supported on the input image service");I=l.ensureClass(X,
I).clone();const {raster:ea}=this;ea&&null==I.raster&&(I.raster=ea);return d.getSamples(this.url,I,this._getRequestOptions(aa))});return function(I,aa){return w.apply(this,arguments)}}();ia.identify=function(){var w=C._asyncToGenerator(function*(I,aa){yield this._fetchCapabilities(null==aa?void 0:aa.signal);if(!this.capabilities.operations.supportsIdentify)throw new V("imagery-layer:query-rasters","query operation is not supported on the input image service");I=l.ensureClass(P,I).clone();const {raster:ea,
mosaicRule:ja,renderingRule:ka}=this;ka&&null==I.renderingRule&&(I.renderingRule=ka);ja&&null==I.mosaicRule&&(I.mosaicRule=ja);ea&&null==I.raster&&(I.raster=ea);return(new E({url:this.url})).execute(I,this._getRequestOptions(aa))});return function(I,aa){return w.apply(this,arguments)}}();ia.queryRasters=function(){var w=C._asyncToGenerator(function*(I,aa){var ea;yield this._fetchCapabilities(null==(ea=aa)?void 0:ea.signal);if(!this.capabilities.operations.supportsQuery)throw new V("imagery-layer:query-rasters",
"query operation is not supported on the input image service");I=l.ensureClass(B,I);aa=this._getRequestOptions(aa);this.raster&&(aa.query={...aa.query,raster:this.raster});return this.queryTask.execute(I,aa)});return function(I,aa){return w.apply(this,arguments)}}();ia.queryVisibleRasters=function(w,I){if(!w)return Promise.reject(new V("imagery-layer: query-visible-rasters","missing query parameter"));const {pixelSize:aa,returnDomainValues:ea,returnTopmostRaster:ja,showNoDataRecords:ka}=I||{pixelSize:null,
returnDomainValues:!1,returnTopmostRaster:!1,showNoDataRecords:!1};let oa=!1;var la=null;let sa=null;const va=this.rasterFunctionNamesIndex;if(A.isSome(w.outFields)&&(oa=w.outFields.some(wa=>-1===wa.toLowerCase().indexOf("raster.servicepixelvalue")),10.4<=this.version)){const wa=w.outFields.filter(ya=>-1<ya.toLowerCase().indexOf("raster.servicepixelvalue")&&24<ya.length).map(ya=>{ya=ya.slice(25);return[this._updateRenderingRulesFunctionName(ya,va),ya]});la=wa.map(ya=>new F({functionName:ya[0]}));
sa=wa.map(ya=>ya[1]);0===la.length?this.renderingRule?(la.push(this.renderingRule),sa.push(this.renderingRule.functionName)):la=null:this.renderingRule&&!la.some(ya=>ya.functionName===this.renderingRule.functionName)&&(la.push(this.renderingRule),sa.push(this.renderingRule.functionName))}const za=A.isNone(w.outSpatialReference)||w.outSpatialReference.equals(this.spatialReference);la=this._getQueryParams({geometry:w.geometry,timeExtent:w.timeExtent||this.timeExtent,mosaicRule:this.exportImageServiceParameters.mosaicRule,
renderingRule:10.4>this.version?this.renderingRule:null,renderingRules:la,pixelSize:aa,returnCatalogItems:oa,returnGeometry:za,raster:this.raster,maxItemCount:ja?1:null});delete la.f;const ua=new P(la),ta=new E({url:this.url}),xa=this.generateRasterInfo(this.renderingRule);return new Promise(wa=>{xa.then(()=>{ta.execute(ua,{signal:null==I?void 0:I.signal,query:{...this.customParameters}}).then(ya=>{const Ea=w.outFields;if(oa&&!za&&ya.catalogItems&&ya.catalogItems.features&&0<ya.catalogItems.features.length){const Ba=
this.objectIdField||"ObjectId",Fa=ya.catalogItems.features;var Ca=Fa.map(Aa=>Aa.attributes&&Aa.attributes[Ba]);Ca=new B({objectIds:Ca,returnGeometry:!0,outSpatialReference:w.outSpatialReference,outFields:[Ba]});return this.queryRasters(Ca).then(Aa=>{Aa&&Aa.features&&0<Aa.features.length&&Aa.features.forEach(Ga=>{Fa.forEach(Da=>{Da.attributes[Ba]===Ga.attributes[Ba]&&(Da.geometry=new M(Ga.geometry),Da.geometry.spatialReference=w.outSpatialReference)})});wa(this._processVisibleRastersResponse(ya,{returnDomainValues:ea,
templateRRFunctionNames:sa,showNoDataRecords:ka,templateFields:Ea}))}).catch(()=>{throw new V("imagery-layer:query-visible-rasters","encountered error when querying visible rasters geometry");})}wa(this._processVisibleRastersResponse(ya,{returnDomainValues:ea,templateRRFunctionNames:sa,showNoDataRecords:ka,templateFields:Ea}))}).catch(()=>{throw new V("imagery-layer:query-visible-rasters","encountered error when querying visible rasters");})})})};ia.fetchVariableStatisticsHistograms=function(){var w=
C._asyncToGenerator(function*(I,aa){var ea=T(this.parsedUrl.path+"/statistics",{query:this._getQueryParams({variable:I}),signal:aa}).then(ja=>{var ka;return null==(ka=ja.data)?void 0:ka.statistics});I=T(this.parsedUrl.path+"/histograms",{query:this._getQueryParams({variable:I}),signal:aa}).then(ja=>{var ka;return null==(ka=ja.data)?void 0:ka.histograms});ea=yield Promise.all([ea,I]);ea[0]&&ea[0].forEach(ja=>{ja.avg=ja.mean;ja.stddev=ja.standardDeviation});return{statistics:ea[0]||null,histograms:ea[1]||
null}});return function(I,aa){return w.apply(this,arguments)}}();ia._fetchService=function(){var w=C._asyncToGenerator(function*(I){yield this._fetchServiceInfo(I);A.isSome(this.serviceRasterInfo)&&!this.rasterInfo&&(this.rasterInfo=this.serviceRasterInfo);var aa=this.sourceJSON;aa=A.isSome(this.serviceRasterInfo)?Promise.resolve(this.serviceRasterInfo):this._fetchAuxiliaryRasterInfo({serviceInfo:aa,signal:I}).then(ea=>{this._set("serviceRasterInfo",ea);return ea});I=this.renderingRule&&"none"!==
this.renderingRule.functionName.toLowerCase()?this.generateRasterInfo(this.renderingRule,{signal:I}):null;return Promise.all([aa,I]).then(ea=>{ea[1]?this._set("rasterInfo",ea[1]):this._set("rasterInfo",ea[0]);this.renderer&&!this._isSupportedRenderer(this.renderer)&&(this.renderer=null,ha.warn("ArcGISImageService","Switching to the default renderer. Renderer applied is not valid for this Imagery Layer"));this._configDefaultRenderer();this.watch("renderer",()=>this._configDefaultRenderer());this.watch("renderingRule",
ja=>{(this.renderer||this._symbolizer||this.popupEnabled&&this.popupTemplate)&&this.generateRasterInfo(ja).then(ka=>{ka&&(this.rasterInfo=ka)})});(ea=A.isSome(this.serviceRasterInfo)&&this.serviceRasterInfo.multidimensionalInfo)&&this._updateMultidimensionalDefinition(ea)})});return function(I){return w.apply(this,arguments)}}();ia._initJobHandler=function(){var w=C._asyncToGenerator(function*(){if(null!=this._rasterJobHandler.connectionPromise)return this._rasterJobHandler.connectionPromise;const I=
new v;this._rasterJobHandler.connectionPromise=I.initialize().then(()=>{this._rasterJobHandler.instance=I},()=>null);yield this._rasterJobHandler.connectionPromise});return function(){return w.apply(this,arguments)}}();ia._shutdownJobHandler=function(){this._rasterJobHandler.instance&&this._rasterJobHandler.instance.destroy();this._rasterJobHandler.instance=null;this._rasterJobHandler.connectionPromise=null;this._rasterJobHandler.refCount=0};ia._isSupportedRenderer=function(w){const {rasterInfo:I,
renderingRule:aa}=this;return"unique-value"===w.type&&aa&&"none"!==aa.functionName.toLowerCase()&&1===I.bandCount&&["u8","s8"].includes(I.pixelType)||Z.getSupportedRendererTypes(this.rasterInfo).includes(this.renderer.type)};ia._fetchCapabilities=function(){var w=C._asyncToGenerator(function*(I){if(this.capabilities)return this.capabilities;yield this._fetchServiceInfo(I);return this.capabilities});return function(I){return w.apply(this,arguments)}}();ia._fetchServiceInfo=function(){var w=C._asyncToGenerator(function*(I){var aa;
let ea=this.sourceJSON;if(!ea){const {data:ja,ssl:ka}=yield T(this.parsedUrl.path,{query:this._getQueryParams(),signal:I});this.sourceJSON=ea=ja;ka&&(this.url=this.url.replace(/^http:/i,"https:"))}if(-1<(null==(aa=ea.capabilities)?void 0:aa.toLowerCase().split(",").map(ja=>ja.trim()).indexOf("tilesonly")))throw new V("imagery-layer:fetch-service-info","use ImageryTileLayer to open tiles-only image services");this.read(ea,{origin:"service",url:this.parsedUrl})});return function(I){return w.apply(this,
arguments)}}();ia._isVectorFieldResampleFunction=function(w){if(!A.isSome(w))return!1;const {functionName:I,functionArguments:aa}=w;w="resample"===I.toLowerCase();const ea=(null==aa?void 0:aa.ResampleType)||(null==aa?void 0:aa.resampleType);return w&&(7===ea||10===ea)};ia._isPicture=function(){return!this.format||-1<this.format.indexOf("jpg")||-1<this.format.indexOf("png")};ia._configDefaultRenderer=function(){if(!this._isPicture()&&!this.pixelFilter){if(!this.bandIds&&3<=this.rasterInfo.bandCount){const aa=
Z.getDefaultBandCombination(this.rasterInfo);!aa||3===this.rasterInfo.bandCount&&0===aa[0]&&1===aa[1]&&2===aa[2]||(this.bandIds=aa)}if(!this.renderer){var w,I;this.renderer=Z.createDefaultRenderer(this.rasterInfo,{bandIds:this.bandIds,variableName:this.renderingRule?null:null==(w=this.mosaicRule)?void 0:null==(I=w.multidimensionalDefinition)?void 0:I[0].variableName})}this._symbolizer?(this._symbolizer.rendererJSON=Z.normalizeRendererJSON(this.renderer.toJSON()),this._symbolizer.rasterInfo=this.rasterInfo):
this._symbolizer=new n({rendererJSON:this.renderer.toJSON(),rasterInfo:this.rasterInfo});this._symbolizer.bind()||(this._symbolizer=null)}};ia._clonePixelData=function(w){return null==w?w:{extent:w.extent&&w.extent.clone(),pixelBlock:w.pixelBlock&&w.pixelBlock.clone()}};ia._getQueryParams=function(w){const {raster:I,viewId:aa}=this;return{raster:I,viewId:aa,f:"json",...w,...this.customParameters}};ia._getRequestOptions=function(w){return{...w,query:{...null==w?void 0:w.query,...this.customParameters}}};
ia._decodePixelBlock=function(w,I,aa){return this._rasterJobHandler.instance?this._rasterJobHandler.instance.decode({data:w,options:I}):J.decode(w,I,aa)};ia._fetchMultidimensionalInfo=function(){var w=C._asyncToGenerator(function*(I){var aa;I=yield T(this.parsedUrl.path+"/multidimensionalInfo",{query:this._getQueryParams(),signal:I}).then(ea=>{var ja;return null==(ja=ea.data)?void 0:ja.multidimensionalInfo});null!=(aa=I.variables)&&aa.length&&I.variables.forEach(ea=>{var ja;null!=(ja=ea.statistics)&&
ja.length&&ea.statistics.forEach(ka=>{ka.avg=ka.mean;ka.stddev=ka.standardDeviation})});return I});return function(I){return w.apply(this,arguments)}}();ia._fetchAuxiliaryRasterInfo=function(w){const I=w&&w.serviceInfo;if(!I)return Promise.reject(new V("imagery-layer:fetch-metadata","valid serviceInfo is required"));var aa=w.renderingRule?JSON.stringify(w.renderingRule.toJSON()):null,ea=w.signal;w=I.hasRasterAttributeTable&&10.1<=this.version?T(this.parsedUrl.path+"/rasterAttributeTable",{query:this._getQueryParams({renderingRule:10.1<=
this.version?aa:null}),signal:ea}).then(oa=>D.fromJSON(oa.data)).catch(()=>null):!1;const ja=I.hasColormap&&10.1<=this.version?T(this.parsedUrl.path+"/colormap",{query:this._getQueryParams({renderingRule:10.6<=this.version?aa:null}),signal:ea}).then(oa=>{var la;return null==(la=oa.data)?void 0:la.colormap}):!1,ka=I.hasHistograms&&10.1<=this.version?T(this.parsedUrl.path+"/histograms",{query:this._getQueryParams({renderingRule:10.1<=this.version?aa:null}),signal:ea}).then(oa=>{var la;return null==
(la=oa.data)?void 0:la.histograms}):!1;aa=10.3<=this.version?T(this.parsedUrl.path+"/keyProperties",{query:this._getQueryParams({renderingRule:aa}),signal:ea}).then(oa=>oa.data).catch(()=>{}):!1;ea=I.hasMultidimensions&&10.3<=this.version?this._fetchMultidimensionalInfo():!1;return Promise.all([w,ja,ka,aa,ea]).then(oa=>{let la=null;if(I.minValues&&I.minValues.length===I.bandCount){la=[];for(var sa=0;sa<I.minValues.length;sa++)la.push({min:I.minValues[sa],max:I.maxValues[sa],avg:I.meanValues[sa],stddev:I.stdvValues[sa]})}sa=
Math.ceil((I.extent.xmax-I.extent.xmin)/I.pixelSizeX-.1);const va=Math.ceil((I.extent.ymax-I.extent.ymin)/I.pixelSizeY-.1),za=O.fromJSON(I.spatialReference||I.extent.spatialReference);return new t({width:sa,height:va,bandCount:I.bandCount,extent:ba.fromJSON(I.extent),spatialReference:za,pixelSize:new da({x:I.pixelSizeX,y:I.pixelSizeY,spatialReference:za}),pixelType:I.pixelType.toLowerCase(),statistics:la,attributeTable:oa[0]||null,colormap:oa[1]||null,histograms:oa[2]||null,keyProperties:oa[3]||{},
multidimensionalInfo:oa[4]||null})})};ia._requestArrayBuffer=function(w){const {imageProps:I,requestAsImageElement:aa,signal:ea}=w;if(aa&&!this.pixelFilter&&I.format&&-1<I.format.indexOf("png"))return T(this.parsedUrl.path+"/exportImage",{responseType:"image",query:this._getQueryParams({f:"image",...w.imageServiceParameters}),signal:ea}).then(ka=>({imageElement:ka.data,params:I}));const ja=this._initJobHandler();w=T(this.parsedUrl.path+"/exportImage",{responseType:"array-buffer",query:this._getQueryParams({f:"image",
...w.imageServiceParameters}),signal:ea});return Promise.all([w,ja]).then(ka=>{ka=ka[0].data;const oa=I.format||"jpgpng";var la=oa;"bsq"!==la&&"bip"!==la&&(la=J.getFormat(ka));if(!la)throw new V("imagery-layer:fetch-image","unsupported format signature "+String.fromCharCode.apply(null,new Uint8Array(ka)));la="gif"===oa||"bmp"===oa||-1<oa.indexOf("png")&&("png"===la||"jpg"===la);const sa={signal:ea};return la?J.decode(ka,{useCanvas:!0,...I},sa).then(va=>({pixelData:{pixelBlock:va,extent:I.extent},
params:I})):this._decodePixelBlock(ka,{width:I.width,height:I.height,planes:null,pixelType:null,noDataValue:null,format:oa},sa).then(va=>({pixelData:{pixelBlock:va,extent:I.extent},params:I}))})};ia._generateRasterInfo=function(){var w=C._asyncToGenerator(function*(I,aa){const {data:ea}=yield T(this.parsedUrl.path,{query:this._getQueryParams({renderingRule:I}),...aa});return yield this._fetchAuxiliaryRasterInfo({serviceInfo:ea,renderingRule:I,...aa})});return function(I,aa){return w.apply(this,arguments)}}();
ia._isValidCustomizedMosaicRule=function(w){return w&&JSON.stringify(w.toJSON())!==JSON.stringify(this._defaultServiceMosaicRule&&this._defaultServiceMosaicRule.toJSON())};ia._updateMultidimensionalDefinition=function(w){if(!this._isValidCustomizedMosaicRule(this.mosaicRule)){var I=w.variables[0].dimensions;w=[];for(var aa in I)if(I.hasOwnProperty(aa)){const ea=I[aa],ja=ea.extent;let ka=!0,oa=[ja[0]];ea.hasRanges&&!0===ea.hasRanges?(ka=!1,oa=[ea.values[0]]):"stdz"===ea.name.toLowerCase()&&Math.abs(ja[1])<=
Math.abs(ja[0])&&(oa=[ja[1]]);w.push(new g({variableName:"",dimensionName:I[aa].name,isSlice:ka,values:oa}))}0<w.length&&(this.mosaicRule=this.mosaicRule||new Q,aa=this.mosaicRule.multidimensionalDefinition,!aa||aa&&0>=aa.length)&&(this.mosaicRule.multidimensionalDefinition=w)}};ia._formatAttributeValue=function(w,I){if("string"===typeof w&&(I=(I=this._getFieldInfo(this.popupTemplate&&this.popupTemplate.fieldInfos,I))&&I.format)){let aa,ea;return-1<w.trim().indexOf(",")?(aa=",",ea=aa+" ",this._formatDelimitedString(w,
aa,ea,I)):-1<w.trim().indexOf(" ")?(aa=ea=" ",this._formatDelimitedString(w,aa,ea,I)):this._formatNumberFromString(w,I)}return w};ia._getFieldInfo=function(w,I){if(w&&w.length&&I){var aa=I.toLowerCase(),ea=void 0;w.some(ja=>!ja.fieldName||ja.fieldName.toLowerCase()!==aa&&ja.fieldName.toLowerCase()!==aa.replace(/ /g,"_")?!1:(ea=ja,!0));return ea}};ia._formatDelimitedString=function(w,I,aa,ea){return w&&I&&aa&&ea?w.trim().split(I).map(ja=>this._formatNumberFromString(ja,ea)).join(aa):w};ia._formatNumberFromString=
function(w,I){if(!w||!I)return w;const aa=Number(w);return isNaN(aa)?w:I.format(aa)};ia._processVisibleRastersResponse=function(w,I){I=I||{};const aa=w.value,{templateRRFunctionNames:ea,showNoDataRecords:ja,returnDomainValues:ka,templateFields:oa}=I;I=w.processedValues;var la=w.catalogItems&&w.catalogItems.features;let sa=w.properties&&w.properties.Values&&w.properties.Values.map(wa=>wa.replace(/ /gi,", "))||[];var va=this.objectIdField||"ObjectId";w="string"===typeof aa&&-1<aa.toLowerCase().indexOf("nodata");
const za=[];!aa||la||w||(la={},la[va]=0,la=new m(this.fullExtent,null,la),sa=[aa],la=[la]);if(!la)return[];this._updateResponseFieldNames(la,oa);w&&!ja&&(la=[]);for(let wa=0;wa<la.length;wa++){va=la[wa];if(null!=aa&&!w){var ua=sa[wa];var ta=this.renderingRule&&I&&0<I.length&&ea&&0<ea.length&&-1<ea.indexOf(this.renderingRule.functionName)?I[ea.indexOf(this.renderingRule.functionName)]:aa;if("nodata"===ua.toLowerCase()&&!ja)continue;va.attributes["Raster.ItemPixelValue"]=this._formatAttributeValue(ua,
"Raster.ItemPixelValue");va.attributes["Raster.ServicePixelValue"]=this._formatAttributeValue(ta,"Raster.ServicePixelValue");this._updateFeatureWithMagDirValues(va,ua);var xa=this.fields&&0<this.fields.length;ta=this.renderingRule&&A.isSome(this.serviceRasterInfo)&&this.serviceRasterInfo.attributeTable?xa?ua:aa:ta;this.renderingRule||(ta=xa?ua:aa);this._updateFeatureWithRasterAttributeTableValues(va,ta)}va.sourceLayer=this;ka&&this._updateFeatureWithDomainValues(va);if(ea&&I&&ea.length===I.length)for(ua=
0;ua<ea.length;ua++)xa="Raster.ServicePixelValue."+ea[ua],va.attributes[xa]=this._formatAttributeValue(I[ua],xa);za.push(la[wa])}return za};ia._updateFeatureWithRasterAttributeTableValues=function(w,I){var aa=this.rasterInfo&&this.rasterInfo.attributeTable||A.isSome(this.serviceRasterInfo)&&this.serviceRasterInfo.attributeTable;const ea=aa&&aa.features;if(ea){aa=aa.fields;var ja=aa.map(la=>la.name).filter(la=>"value"===la.toLowerCase()),ka=ja&&ja[0];if(ka){var oa=ea.filter(la=>la.attributes[ka]===
(null!=I?parseInt(I,10):null));oa&&oa[0]&&aa.forEach(la=>{const sa=this.rasterAttributeTableFieldPrefix+la.name;w.attributes[sa]=this._formatAttributeValue(oa[0].attributes[la.name],sa)})}}};ia._updateFeatureWithMagDirValues=function(w,I){if(this.pixelFilter&&("esriImageServiceDataTypeVector-UV"===this.serviceDataType||"esriImageServiceDataTypeVector-MagDir"===this.serviceDataType)){var aa=I.replace(" ",",").split(",").map(ea=>parseFloat(ea));I=aa.map(ea=>[ea]);aa=aa.map(ea=>({minValue:ea,maxValue:ea,
noDataValue:null}));I=new K({height:1,width:1,pixelType:"f32",pixels:I,statistics:aa});this.pixelFilter({pixelBlock:I,extent:new ba(0,0,0,0,this.spatialReference)});w.attributes["Raster.Magnitude"]=I.pixels[0][0];w.attributes["Raster.Direction"]=I.pixels[1][0]}};ia._updateFeatureWithDomainValues=function(w){const I=this.fields&&this.fields.filter(aa=>aa.domain&&"coded-value"===aa.domain.type);null!=I&&I.forEach(aa=>{const ea=w.attributes[aa.name];if(null!=ea){const ja=aa.domain.codedValues.filter(ka=>
ka.code===ea)[0];ja&&(w.attributes[aa.name]=ja.name)}})};ia._updateResponseFieldNames=function(w,I){if(I&&!(1>I.length)){var aa=this.fieldsIndex;aa&&w.forEach(ea=>{if(ea&&ea.attributes)for(const ja of I)if(aa.has(ja)){const ka=aa.get(ja).name;ka!==ja&&(ea.attributes[ja]=ea.attributes[ka],delete ea.attributes[ka])}})}};ia._updateRenderingRulesFunctionName=function(w,I){if(w&&!(1>w.length)){if("Raw"===w)return w.replace("Raw","None");var aa=w.toLowerCase().replace(/ /gi,"_");return I.has(aa)?I.get(aa):
w}};ia._isRFTJson=function(w){return w.name&&w.arguments&&w.function&&w.hasOwnProperty("functionType")};ia._readCapabilities=function(w){const I=w.capabilities?w.capabilities.toLowerCase().split(",").map(sa=>sa.trim()):["image","catalog"],{currentVersion:aa,advancedQueryCapabilities:ea,maxRecordCount:ja}=w,ka=-1<I.indexOf("image"),oa="esriImageServiceDataTypeElevation"===w.serviceDataType,la=!!(w.spatialReference||w.extent&&w.extent.spatialReference);return{operations:{supportsComputeHistograms:ka,
supportsExportImage:ka,supportsIdentify:ka,supportsMeasure:-1<I.indexOf("mensuration")&&la,supportsDownload:-1<I.indexOf("download"),supportsQuery:-1<I.indexOf("catalog")&&w.fields&&0<w.fields.length,supportsGetSamples:10.2<=aa&&ka,supportsProject:10.3<=aa&&ka,supportsComputeStatisticsHistograms:10.4<=aa&&ka,supportsQueryBoundary:10.6<=aa&&ka,supportsCalculateVolume:10.7<=aa&&oa,supportsComputePixelLocation:10.7<=aa&&-1<I.indexOf("catalog")},query:{supportsStatistics:!(!ea||!ea.supportsStatistics),
supportsOrderBy:!(!ea||!ea.supportsOrderBy),supportsDistinct:!(!ea||!ea.supportsDistinct),supportsPagination:!(!ea||!ea.supportsPagination),supportsStandardizedQueriesOnly:!(!ea||!ea.useStandardizedQueries),maxRecordCount:ja}}};C._createClass(qa,[{key:"rasterFunctionNamesIndex",get:function(){const w=new Map;if(!this.rasterFunctionInfos||1>this.rasterFunctionInfos.length)return w;this.rasterFunctionInfos.forEach(I=>{w.set(I.name.toLowerCase().replace(/ /gi,"_"),I.name)});return w}},{key:"queryTask",
get:function(){return new L({url:this.url})}},{key:"fieldsIndex",get:function(){return this.fields?new y(this.fields):null}},{key:"format",set:function(w){w&&pa.has(w.toLowerCase())&&this._set("format",w.toLowerCase())}},{key:"mosaicRule",set:function(w){w&&w.mosaicMethod&&(w=Q.fromJSON({...w.toJSON(),mosaicMethod:w.mosaicMethod,mosaicOperation:w.mosaicOperation}));this._set("mosaicRule",w)}},{key:"parsedUrl",get:function(){return this.url?c.urlToObject(this.url):null}},{key:"rasterFields",get:function(){const w=
this.rasterAttributeTableFieldPrefix||"Raster.";var I=new H({name:"Raster.ItemPixelValue",alias:"Item Pixel Value",domain:null,editable:!1,length:50,type:"string"});const aa=new H({name:"Raster.ServicePixelValue",alias:"Service Pixel Value",domain:null,editable:!1,length:50,type:"string"}),ea=new H({name:"Raster.ServicePixelValue.Raw",alias:"Raw Service Pixel Value",domain:null,editable:!1,length:50,type:"string"});let ja=this.fields?G.clone(this.fields):[];ja.push(aa);this.capabilities.operations.supportsQuery&&
this.fields&&0<this.fields.length&&ja.push(I);10.4<=this.version&&this.rasterFunctionInfos&&this.rasterFunctionInfos.some(ka=>"none"===ka.name.toLowerCase())&&ja.push(ea);this.rasterFunctionInfos&&this.rasterFunctionInfos.filter(ka=>"none"!==ka.name.toLowerCase()).forEach(ka=>{ja.push(new H({name:"Raster.ServicePixelValue."+ka.name,alias:ka.name,domain:null,editable:!1,length:50,type:"string"}))});null==this.pixelFilter||"esriImageServiceDataTypeVector-UV"!==this.serviceDataType&&"esriImageServiceDataTypeVector-MagDir"!==
this.serviceDataType||(ja.push(new H({name:"Raster.Magnitude",alias:"Magnitude",domain:null,editable:!1,type:"double"})),ja.push(new H({name:"Raster.Direction",alias:"Direction",domain:null,editable:!1,type:"double"})));(I=this.rasterInfo.attributeTable&&this.rasterInfo.attributeTable.fields||null)&&0<I.length&&(I=I.filter(ka=>"esriFieldTypeOID"!==ka.type&&"value"!==ka.name.toLowerCase()).map(ka=>{const oa=G.clone(ka);oa.name=w+ka.name;return oa}),ja=ja.concat(I));return ja}},{key:"renderingRule",
set:function(w){w&&w.rasterFunction&&(w=F.fromJSON({...w.toJSON(),rasterFunction:w.rasterFunction,rasterFunctionArguments:w.rasterFunctionArguments}));this._set("renderingRule",w)}}]);return qa}(fa);x.__decorate([a.property()],fa.prototype,"_functionRasterInfos",void 0);x.__decorate([a.property()],fa.prototype,"_rasterJobHandler",void 0);x.__decorate([a.property()],fa.prototype,"_symbolizer",void 0);x.__decorate([a.property()],fa.prototype,"_defaultServiceMosaicRule",void 0);x.__decorate([h.reader("_defaultServiceMosaicRule",
["defaultMosaicMethod"])],fa.prototype,"readDefaultServiceMosaicRule",null);x.__decorate([a.property()],fa.prototype,"_cachedRendererJson",void 0);x.__decorate([a.property()],fa.prototype,"rasterAttributeTableFieldPrefix",void 0);x.__decorate([a.property({readOnly:!0})],fa.prototype,"rasterFunctionNamesIndex",null);x.__decorate([a.property({readOnly:!0})],fa.prototype,"queryTask",null);x.__decorate([a.property()],fa.prototype,"adjustAspectRatio",void 0);x.__decorate([a.property({readOnly:!0}),k.aliasOf("serviceRasterInfo.bandCount")],
fa.prototype,"bandCount",void 0);x.__decorate([a.property({type:[l.Integer],json:{write:!0}})],fa.prototype,"bandIds",void 0);x.__decorate([h.reader("bandIds")],fa.prototype,"readBandIds",null);x.__decorate([a.property({readOnly:!0,json:{read:!1}})],fa.prototype,"capabilities",void 0);x.__decorate([h.reader("service","capabilities",["capabilities","currentVersion","serviceDataType"])],fa.prototype,"readCapabilities",null);x.__decorate([a.property({type:Number})],fa.prototype,"compressionQuality",
void 0);x.__decorate([q.writer("compressionQuality")],fa.prototype,"writeCompressionQuality",null);x.__decorate([a.property({type:Number})],fa.prototype,"compressionTolerance",void 0);x.__decorate([q.writer("compressionTolerance")],fa.prototype,"writeCompressionTolerance",null);x.__decorate([a.property({json:{read:{source:"copyrightText"}}})],fa.prototype,"copyright",void 0);x.__decorate([a.property({type:String,json:{name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],
fa.prototype,"definitionExpression",void 0);x.__decorate([a.property({readOnly:!0,constructOnly:!0})],fa.prototype,"exportImageServiceParameters",void 0);x.__decorate([a.property()],fa.prototype,"rasterInfo",void 0);x.__decorate([a.property({readOnly:!0,type:[H]})],fa.prototype,"fields",void 0);x.__decorate([a.property({readOnly:!0})],fa.prototype,"fieldsIndex",null);x.__decorate([a.property({type:"png png8 png24 png32 jpg bmp gif jpgpng lerc tiff".split(" "),json:{write:!0}})],fa.prototype,"format",
null);x.__decorate([h.reader("service","format",["serviceDataType"])],fa.prototype,"readFormat",null);x.__decorate([a.property({type:ba})],fa.prototype,"fullExtent",void 0);x.__decorate([a.property({readOnly:!0})],fa.prototype,"hasMultidimensions",void 0);x.__decorate([a.property({json:{read:{source:"maxImageHeight"}}})],fa.prototype,"imageMaxHeight",void 0);x.__decorate([a.property({json:{read:{source:"maxImageWidth"}}})],fa.prototype,"imageMaxWidth",void 0);x.__decorate([a.property({type:String,
json:{type:U.interpolationKebab.jsonValues,read:U.interpolationKebab.read,write:U.interpolationKebab.write}})],fa.prototype,"interpolation",void 0);x.__decorate([a.property()],fa.prototype,"minScale",void 0);x.__decorate([h.reader("service","minScale")],fa.prototype,"readMinScale",null);x.__decorate([a.property()],fa.prototype,"maxScale",void 0);x.__decorate([h.reader("service","maxScale")],fa.prototype,"readMaxScale",null);x.__decorate([a.property({type:Q})],fa.prototype,"mosaicRule",null);x.__decorate([h.reader("mosaicRule",
["mosaicRule","defaultMosaicMethod"])],fa.prototype,"readMosaicRule",null);x.__decorate([q.writer("mosaicRule")],fa.prototype,"writeMosaicRule",null);x.__decorate([a.property({readOnly:!0}),k.aliasOf("serviceRasterInfo.multidimensionalInfo")],fa.prototype,"multidimensionalInfo",void 0);x.__decorate([a.property({json:{type:l.Integer}})],fa.prototype,"noData",void 0);x.__decorate([q.writer("noData")],fa.prototype,"writeNoData",null);x.__decorate([a.property({type:String,json:{type:U.noDataInterpretationKebab.jsonValues,
read:U.noDataInterpretationKebab.read,write:U.noDataInterpretationKebab.write}})],fa.prototype,"noDataInterpretation",void 0);x.__decorate([a.property({type:String,readOnly:!0,json:{read:{source:["fields"]}}})],fa.prototype,"objectIdField",void 0);x.__decorate([h.reader("objectIdField")],fa.prototype,"readObjectIdField",null);x.__decorate([a.property({readOnly:!0})],fa.prototype,"parsedUrl",null);x.__decorate([a.property({readOnly:!0}),k.aliasOf("serviceRasterInfo.pixelSize.x")],fa.prototype,"pixelSizeX",
void 0);x.__decorate([a.property({readOnly:!0}),k.aliasOf("serviceRasterInfo.pixelSize.y")],fa.prototype,"pixelSizeY",void 0);x.__decorate([a.property({type:Function})],fa.prototype,"pixelFilter",void 0);x.__decorate([a.property()],fa.prototype,"raster",void 0);x.__decorate([a.property()],fa.prototype,"viewId",void 0);x.__decorate([a.property({types:W.rasterRendererTypes,json:{name:"layerDefinition.drawingInfo.renderer",origins:{"web-scene":{types:W.websceneRasterRendererTypes,name:"layerDefinition.drawingInfo.renderer",
write:{overridePolicy(na){return{enabled:na&&"vector-field"!==na.type}}}}}}})],fa.prototype,"renderer",void 0);x.__decorate([h.reader("renderer")],fa.prototype,"readRenderer",null);x.__decorate([q.writer("renderer")],fa.prototype,"writeRenderer",null);x.__decorate([a.property(b.opacity)],fa.prototype,"opacity",void 0);x.__decorate([a.property({readOnly:!0}),k.aliasOf("serviceRasterInfo.attributeTable")],fa.prototype,"rasterAttributeTable",void 0);x.__decorate([a.property({readOnly:!0})],fa.prototype,
"rasterFields",null);x.__decorate([a.property({readOnly:!0})],fa.prototype,"rasterFunctionInfos",void 0);x.__decorate([a.property({type:F})],fa.prototype,"renderingRule",null);x.__decorate([h.reader("renderingRule",["renderingRule","rasterFunctionInfos"])],fa.prototype,"readRenderingRule",null);x.__decorate([q.writer("renderingRule")],fa.prototype,"writeRenderingRule",null);x.__decorate([a.property()],fa.prototype,"serviceDataType",void 0);x.__decorate([a.property({readOnly:!0,type:O})],fa.prototype,
"spatialReference",void 0);x.__decorate([h.reader("spatialReference",["spatialReference","extent"])],fa.prototype,"readSpatialReference",null);x.__decorate([a.property({json:{type:ma.jsonValues}})],fa.prototype,"pixelType",void 0);x.__decorate([h.reader("pixelType")],fa.prototype,"readPixelType",null);x.__decorate([q.writer("pixelType")],fa.prototype,"writePixelType",null);x.__decorate([a.property({constructOnly:!0,type:t})],fa.prototype,"serviceRasterInfo",void 0);x.__decorate([a.property()],fa.prototype,
"sourceJSON",void 0);x.__decorate([a.property(b.url)],fa.prototype,"url",void 0);x.__decorate([a.property({readOnly:!0})],fa.prototype,"version",void 0);x.__decorate([h.reader("version",["currentVersion","fields","timeInfo"])],fa.prototype,"readVersion",null);return fa=x.__decorate([f.subclass("esri.layers.mixins.ArcGISImageService")],fa)};Object.defineProperty(Y,"__esModule",{value:!0})})},"esri/rasterRenderers":function(){define("exports ./core/Warning ./renderers/ClassBreaksRenderer ./renderers/RasterColormapRenderer ./renderers/RasterShadedReliefRenderer ./renderers/RasterStretchRenderer ./renderers/UniqueValueRenderer ./renderers/VectorFieldRenderer".split(" "),
function(Y,C,x,S,m,W,T,V){function N(z,c){if(!z)return null;if("classBreaks"===z.type&&z.classificationMethod){var k=z.authoringInfo||{classificationMethod:""};k.classificationMethod=z.classificationMethod;z.authoringInfo=k}k=z?A[z.type]||null:null;if(k)return k=new k,k.read(z,c),k;c&&c.messages&&z&&c.messages.push(new C("renderer:unsupported","Renderers of type '"+(z.type||"unknown")+"' are not supported",{definition:z,context:c}));return null}const G={key:"type",base:null,typeMap:{"unique-value":T,
"class-breaks":x,"raster-colormap":S,"raster-stretch":W,"vector-field":V,"raster-shaded-relief":m}},u={...G,typeMap:{...G.typeMap}};delete u.typeMap["vector-field"];const A={uniqueValue:T,classBreaks:x,rasterStretch:W,rasterColormap:S,vectorField:V,rasterShadedRelief:m};Y.ClassBreaksRenderer=x;Y.RasterColormapRenderer=S;Y.RasterShadedReliefRenderer=m;Y.RasterStretchRenderer=W;Y.UniqueValueRenderer=T;Y.VectorFieldRenderer=V;Y.fromJSON=function(z,c){return N(z,c)};Y.rasterRendererTypes=G;Y.read=N;Y.websceneRasterRendererTypes=
u;Object.defineProperty(Y,"__esModule",{value:!0})})},"esri/renderers/RasterColormapRenderer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ./support/ColormapInfo ./support/colorRampUtils".split(" "),function(Y,C,x,S,m,W,T,V,N,G,u){var A;x=A=function(z){function c(l){l=
z.call(this,l)||this;l.colormapInfos=null;l.type="raster-colormap";return l}Y._inheritsLoose(c,z);c.createFromColormap=function(l,e){if(!l)return null;const a=5===l[0].length;l=[...l].sort(h=>h[0][0]-h[1][0]).map(h=>{var f;return G.fromJSON({value:h[0],color:a?h.slice(1,5):h.slice(1,4).concat([255]),label:e?null!=(f=e[h[0]])?f:"":h[0]})});return new A({colormapInfos:l})};c.createFromColorramp=function(l){l=u.convertColorRampToColormap(l,256);return A.createFromColormap(l)};var k=c.prototype;k.clone=
function(){return new A({colormapInfos:this.colormapInfos.map(l=>l.toJSON())})};k.extractColormap=function(){return this.colormapInfos.map(l=>[l.value,l.color.r,l.color.g,l.color.b,1<l.color.a?l.color.a:255*l.color.a&255]).sort((l,e)=>l[0]-e[0])};return c}(x.JSONSupport);C.__decorate([S.property({type:[G],json:{write:!0}})],x.prototype,"colormapInfos",void 0);C.__decorate([V.enumeration({rasterColormap:"raster-colormap"})],x.prototype,"type",void 0);return x=A=C.__decorate([N.subclass("esri.renderers.RasterColormapRenderer")],
x)})},"esri/renderers/support/ColormapInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Color ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass".split(" "),function(Y,C,x,S,m,W,T,V,N,G){S=function(u){function A(){var z=u.apply(this,arguments)||this;z.value=null;z.label=null;z.color=null;return z}Y._inheritsLoose(A,
u);return A}(S.JSONSupport);C.__decorate([m.property({type:Number,json:{write:!0}})],S.prototype,"value",void 0);C.__decorate([m.property({type:String,json:{write:!0}})],S.prototype,"label",void 0);C.__decorate([m.property({type:x,json:{type:[T.Integer],write:!0}})],S.prototype,"color",void 0);return S=C.__decorate([G.subclass("esri.renderers.support.ColormapInfo")],S)})},"esri/renderers/support/colorRampUtils":function(){define(["exports","../../Color","../../core/colorUtils"],function(Y,C,x){function S(V,
N){if(!V||!N||V.length!==N.length)return!1;for(let G=0;G<V.length;G++)if(V[G]>N[G]+2||V[G]<N[G]-2)return!1;return!0}function m(V,N){if(V){N=N?N:W;var G=null,u;"algorithmic"===V.type?N.some(A=>{if(S(V.fromColor.toRgb(),A.fromColor)&&S(V.toColor.toRgb(),A.toColor))return G=A.id,!0}):"multipart"===V.type&&N.some(A=>{if(V.colorRamps&&A.colorRamps&&V.colorRamps.length===A.colorRamps.length&&(u=V.colorRamps,!A.colorRamps.some((z,c)=>{if(!S(u[c].fromColor.toRgb(),(new C(z.fromColor)).toRgb())||!S(u[c].toColor.toRgb(),
(new C(z.toColor)).toRgb()))return!0}))){if(G)return!0;G=A.id}});return G}}const W=[{id:"aspect_predefined",type:"multipart",colorRamps:[{fromColor:[190,190,190],toColor:[255,45,8]},{fromColor:[255,45,8],toColor:[255,181,61]},{fromColor:[255,181,61],toColor:[255,254,52]},{fromColor:[255,254,52],toColor:[0,251,50]},{fromColor:[0,251,50],toColor:[255,254,52]},{fromColor:[0,253,255],toColor:[0,181,255]},{fromColor:[0,181,255],toColor:[26,35,253]},{fromColor:[26,35,253],toColor:[255,57,251]},{fromColor:[255,
57,251],toColor:[255,45,8]}]},{id:"blackToWhite_predefined",fromColor:[0,0,0],toColor:[255,255,255]},{id:"blueBright_predefined",fromColor:[204,204,255],toColor:[0,0,224]},{id:"blueLightToDark_predefined",fromColor:[211,229,232],toColor:[46,100,140]},{id:"blueGreenBright_predefined",fromColor:[203,245,234],toColor:[48,207,146]},{id:"blueGreenLightToDark_predefined",fromColor:[216,242,237],toColor:[21,79,74]},{id:"brownLightToDark_predefined",fromColor:[240,236,170],toColor:[102,72,48]},{id:"brownToBlueGreenDivergingBright_predefined",
type:"multipart",colorRamps:[{fromColor:[156,85,31],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[33,130,145]}]},{id:"brownToBlueGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[110,70,45],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[48,100,102]}]},{id:"coefficientBias_predefined",fromColor:[214,214,255],toColor:[0,57,148]},{id:"coldToHotDiverging_predefined",type:"multipart",colorRamps:[{fromColor:[69,117,181],toColor:[255,255,191]},{fromColor:[255,255,
191],toColor:[214,47,39]}]},{id:"conditionNumber_predefined",type:"multipart",colorRamps:[{fromColor:[0,97,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,34,0]}]},{id:"cyanToPurple_predefined",type:"multipart",colorRamps:[{fromColor:[0,245,245],toColor:[0,0,245]},{fromColor:[0,0,245],toColor:[245,0,245]}]},{id:"cyanLightToBlueDark_predefined",type:"multipart",colorRamps:[{fromColor:[182,237,240],toColor:[31,131,224]},{fromColor:[31,131,224],toColor:[9,9,145]}]},{id:"distance_predefined",
fromColor:[255,200,0],toColor:[0,0,255]},{id:"elevation1_predefined",type:"multipart",colorRamps:[{fromColor:[175,240,233],toColor:[255,255,179]},{fromColor:[255,255,179],toColor:[0,128,64]},{fromColor:[0,128,64],toColor:[252,186,3]},{fromColor:[252,186,3],toColor:[128,0,0]},{fromColor:[120,0,0],toColor:[105,48,13]},{fromColor:[105,48,13],toColor:[171,171,171]},{fromColor:[171,171,171],toColor:[255,252,255]}]},{id:"elevation2_predefined",type:"multipart",colorRamps:[{fromColor:[118,219,211],toColor:[255,
255,199]},{fromColor:[255,255,199],toColor:[255,255,128]},{fromColor:[255,255,128],toColor:[217,194,121]},{fromColor:[217,194,121],toColor:[135,96,38]},{fromColor:[135,96,38],toColor:[150,150,181]},{fromColor:[150,150,181],toColor:[181,150,181]},{fromColor:[181,150,181],toColor:[255,252,255]}]},{id:"errors_predefined",fromColor:[255,235,214],toColor:[196,10,10]},{id:"grayLightToDark_predefined",fromColor:[219,219,219],toColor:[69,69,69]},{id:"greenBright_predefined",fromColor:[204,255,204],toColor:[14,
204,14]},{id:"greenLightToDark_predefined",fromColor:[220,245,233],toColor:[34,102,51]},{id:"greenToBlue_predefined",type:"multipart",colorRamps:[{fromColor:[32,204,16],toColor:[0,242,242]},{fromColor:[0,242,242],toColor:[2,33,227]}]},{id:"orangeBright_predefined",fromColor:[255,235,204],toColor:[240,118,5]},{id:"orangeLightToDark_predefined",fromColor:[250,233,212],toColor:[171,65,36]},{id:"partialSpectrum_predefined",type:"multipart",colorRamps:[{fromColor:[242,241,162],toColor:[255,255,0]},{fromColor:[255,
255,0],toColor:[255,0,0]},{fromColor:[252,3,69],toColor:[176,7,237]},{fromColor:[176,7,237],toColor:[2,29,173]}]},{id:"partialSpectrum1Diverging_predefined",type:"multipart",colorRamps:[{fromColor:[135,38,38],toColor:[240,149,12]},{fromColor:[240,149,12],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[74,80,181]},{fromColor:[74,80,181],toColor:[39,32,122]}]},{id:"partialSpectrum2Diverging_predefined",type:"multipart",colorRamps:[{fromColor:[115,77,42],toColor:[201,137,52]},{fromColor:[201,
137,52],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[91,63,176]},{fromColor:[91,63,176],toColor:[81,13,97]}]},{id:"pinkToYellowGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[158,30,113],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[99,110,45]}]},{id:"pinkToYellowGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[97,47,73],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[22,59,15]}]},{id:"precipitation_predefined",type:"multipart",
colorRamps:[{fromColor:[194,82,60],toColor:[237,161,19]},{fromColor:[237,161,19],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,219,0]},{fromColor:[0,219,0],toColor:[32,153,143]},{fromColor:[32,153,143],toColor:[11,44,122]}]},{id:"prediction_predefined",type:"multipart",colorRamps:[{fromColor:[40,146,199],toColor:[250,250,100]},{fromColor:[250,250,100],toColor:[232,16,20]}]},{id:"purpleBright_predefined",fromColor:[255,204,255],toColor:[199,0,199]},{id:"purpleToGreenDivergingBright_predefined",
type:"multipart",colorRamps:[{fromColor:[77,32,150],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[20,122,11]}]},{id:"purpleToGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[67,14,89],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[24,79,15]}]},{id:"purpleBlueBright_predefined",fromColor:[223,184,230],toColor:[112,12,242]},{id:"purpleBlueLightToDark_predefined",fromColor:[229,213,242],toColor:[93,44,112]},{id:"purpleRedBright_predefined",fromColor:[255,204,
225],toColor:[199,0,99]},{id:"purpleRedLightToDark_predefined",fromColor:[250,215,246],toColor:[143,17,57]},{id:"redBright_predefined",fromColor:[255,204,204],toColor:[219,0,0]},{id:"redLightToDark_predefined",fromColor:[255,224,224],toColor:[143,10,10]},{id:"redToBlueDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[196,69,57],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[48,95,207]}]},{id:"redToBlueDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[107,
13,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[13,53,97]}]},{id:"redToGreen_predefined",type:"multipart",colorRamps:[{fromColor:[245,0,0],toColor:[245,245,0]},{fromColor:[245,245,0],toColor:[0,245,0]}]},{id:"redToGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[186,20,20],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[54,145,33]}]},{id:"redToGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[97,21,13],toColor:[204,204,102]},
{fromColor:[204,204,102],toColor:[16,69,16]}]},{id:"slope_predefined",type:"multipart",colorRamps:[{fromColor:[56,168,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]},{id:"spectrumFullBright_predefined",type:"multipart",colorRamps:[{fromColor:[255,0,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,0,255]}]},{id:"spectrumFullDark_predefined",type:"multipart",colorRamps:[{fromColor:[153,0,0],toColor:[153,153,0]},{fromColor:[153,
153,0],toColor:[0,153,153]},{fromColor:[0,153,153],toColor:[0,0,153]}]},{id:"spectrumFullLight_predefined",type:"multipart",colorRamps:[{fromColor:[255,153,153],toColor:[255,255,153]},{fromColor:[255,255,153],toColor:[153,255,255]},{fromColor:[153,255,255],toColor:[153,153,255]}]},{id:"surface_predefined",type:"multipart",colorRamps:[{fromColor:[112,153,89],toColor:[242,238,162]},{fromColor:[242,238,162],toColor:[242,206,133]},{fromColor:[242,206,133],toColor:[194,140,124]},{fromColor:[194,140,124],
toColor:[255,242,255]}]},{id:"temperature_predefined",type:"multipart",colorRamps:[{fromColor:[255,252,255],toColor:[255,0,255]},{fromColor:[255,0,255],toColor:[0,0,255]},{fromColor:[0,0,255],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,255,0]},{fromColor:[0,255,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,128,0]},{fromColor:[255,128,0],toColor:[128,0,0]}]},{id:"whiteToBlack_predefined",fromColor:[255,255,255],toColor:[0,0,0]},{id:"yellowToDarkRed_predefined",type:"multipart",
colorRamps:[{fromColor:[255,255,128],toColor:[242,167,46]},{fromColor:[242,167,46],toColor:[107,0,0]}]},{id:"yellowToGreenToDarkBlue_predefined",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[56,224,9]},{fromColor:[56,224,9],toColor:[26,147,171]},{fromColor:[26,147,171],toColor:[12,16,120]}]},{id:"yellowToRed_predefined",fromColor:[245,245,0],toColor:[255,0,0]},{id:"yellowGreenBright_predefined",fromColor:[236,252,204],toColor:[157,204,16]},{id:"yellowGreenLightToDark_predefined",
fromColor:[215,240,175],toColor:[96,107,45]}],T={aspect_predefined:"Aspect",blackToWhite_predefined:"Black to White",blueBright_predefined:"Blue Bright",blueLightToDark_predefined:"Blue Light to Dark",blueGreenBright_predefined:"Blue-Green Bright",blueGreenLightToDark_predefined:"Blue-Green Light to Dark",brownLightToDark_predefined:"Brown Light to Dark",brownToBlueGreenDivergingBright_predefined:"Brown to Blue Green Diverging, Bright",brownToBlueGreenDivergingDark_predefined:"Brown to Blue Green Diverging, Dark",
coefficientBias_predefined:"Coefficient Bias",coldToHotDiverging_predefined:"Cold to Hot Diverging",conditionNumber_predefined:"Condition Number",cyanToPurple_predefined:"Cyan to Purple",cyanLightToBlueDark_predefined:"Cyan-Light to Blue-Dark",distance_predefined:"Distance",elevation1_predefined:"Elevation #1",elevation2_predefined:"Elevation #2",errors_predefined:"Errors",grayLightToDark_predefined:"Gray Light to Dark",greenBright_predefined:"Green Bright",greenLightToDark_predefined:"Green Light to Dark",
greenToBlue_predefined:"Green to Blue",orangeBright_predefined:"Orange Bright",orangeLightToDark_predefined:"Orange Light to Dark",partialSpectrum_predefined:"Partial Spectrum",partialSpectrum1Diverging_predefined:"Partial Spectrum 1 Diverging",partialSpectrum2Diverging_predefined:"Partial Spectrum 2 Diverging",pinkToYellowGreenDivergingBright_predefined:"Pink to YellowGreen Diverging, Bright",pinkToYellowGreenDivergingDark_predefined:"Pink to YellowGreen Diverging, Dark",precipitation_predefined:"Precipitation",
prediction_predefined:"Prediction",purpleBright_predefined:"Purple Bright",purpleToGreenDivergingBright_predefined:"Purple to Green Diverging, Bright",purpleToGreenDivergingDark_predefined:"Purple to Green Diverging, Dark",purpleBlueBright_predefined:"Purple-Blue Bright",purpleBlueLightToDark_predefined:"Purple-Blue Light to Dark",purpleRedBright_predefined:"Purple-Red Bright",purpleRedLightToDark_predefined:"Purple-Red Light to Dark",redBright_predefined:"Red Bright",redLightToDark_predefined:"Red Light to Dark",
redToBlueDivergingBright_predefined:"Red to Blue Diverging, Bright",redToBlueDivergingDark_predefined:"Red to Blue Diverging, Dark",redToGreen_predefined:"Red to Green",redToGreenDivergingBright_predefined:"Red to Green Diverging, Bright",redToGreenDivergingDark_predefined:"Red to Green Diverging, Dark",slope_predefined:"Slope",spectrumFullBright_predefined:"Spectrum-Full Bright",spectrumFullDark_predefined:"Spectrum-Full Dark",spectrumFullLight_predefined:"Spectrum-Full Light",surface_predefined:"Surface",
temperature_predefined:"Temperature",whiteToBlack_predefined:"White to Black",yellowToDarkRed_predefined:"Yellow to Dark Red",yellowToGreenToDarkBlue_predefined:"Yellow to Green to Dark Blue",yellowToRed_predefined:"Yellow to Red",yellowGreenBright_predefined:"Yellow-Green Bright",yellowGreenLightToDark_predefined:"Yellow-Green Light to Dark"};Y.PREDEFINED_COLOR_RAMP_NAME_MAP=T;Y.PREDEFINED_JSON_COLOR_RAMPS=W;Y.convertColorRampToColormap=function(V,N,G=!1){if(V&&N&&!(1>N)){var u="toJSON"in V?V.toJSON():
V,A="multipart"===u.type?u.colorRamps.length:1;V=[];var z=[],c,k,l,e=0;if(1===N){var a="multipart"===u.type?u.colorRamps[0].fromColor:u.fromColor;z.push([0].concat(a));return z}for(let f=0;f<A;f++)V[f]={start:null,end:null},V[f].start=e,V[f].end=e+1/A,e=V[f].end;for(let f=0;f<N;f++){var h=f/(N-1);V.forEach((q,b)=>{if(h>=q.start&&(h<q.end||f===N-1&&b===A-1)){l=(h-q.start)/(q.end-q.start);"multipart"===u.type?(a=u.colorRamps[b].fromColor,c=u.colorRamps[b].toColor):(a=u.fromColor,c=u.toColor);if(0===
f)z.push([f].concat(a.slice(0,3)));else if(f===N-1)z.push([f].concat(c.slice(0,3)));else{var g={r:c[0],g:c[1],b:c[2]};q=l;b=x.toLAB({r:a[0],g:a[1],b:a[2]});g=x.toLAB(g);k=x.toRGB({l:b.l*(1-q)+q*g.l,a:b.a*(1-q)+q*g.a,b:b.b*(1-q)+q*g.b});z.push([f,k.r,k.g,k.b])}q=null!=a[3]?1<a[3]?a[3]/255:a[3]:1;b=null!=c[3]?1<c[3]?c[3]/255:c[3]:1;G&&z[f].push(Math.min(255,Math.round(255*(q*(1-l)+b*l))))}})}return z}};Y.getColorRampId=m;Y.getColorRampName=function(V){return(V=m(V))?T[V]:null};Object.defineProperty(Y,
"__esModule",{value:!0})})},"esri/core/colorUtils":function(){define(["exports"],function(Y){function C(G,u){const A=[];let z,c;if(G[0].length!==u.length)throw"dimensions do not match";const k=G.length,l=G[0].length;let e=0;for(z=0;z<k;z++){for(c=e=0;c<l;c++)e+=G[z][c]*u[c];A.push(e)}return A}function x(G){G=[G.r/255,G.g/255,G.b/255].map(u=>.04045>=u?u/12.92:((u+.055)/1.055)**2.4);G=C(V,G);return{x:100*G[0],y:100*G[1],z:100*G[2]}}function S(G){G=C(N,[G.x/100,G.y/100,G.z/100]).map(u=>Math.min(1,Math.max(.0031308>=
u?12.92*u:1.055*u**(1/2.4)-.055,0)));return{r:Math.round(255*G[0]),g:Math.round(255*G[1]),b:Math.round(255*G[2])}}function m(G){G=[G.x/95.047,G.y/100,G.z/108.883].map(u=>u>(6/29)**3?u**(1/3):1/3*(29/6)**2*u+4/29);return{l:116*G[1]-16,a:500*(G[0]-G[1]),b:200*(G[1]-G[2])}}function W(G){const u=G.l;G=[(u+16)/116+G.a/500,(u+16)/116,(u+16)/116-G.b/200].map(A=>A>6/29?A**3:3*(6/29)**2*(A-4/29));return{x:95.047*G[0],y:100*G[1],z:108.883*G[2]}}function T(G){if("r"in G&&"g"in G&&"b"in G)return G;if("l"in G&&
"c"in G&&"h"in G){var u=G.c;var A=G.h;u={l:G.l,a:u*Math.cos(A),b:u*Math.sin(A)};return S(W(u))}if("l"in G&&"a"in G&&"b"in G)return S(W(G));if("x"in G&&"y"in G&&"z"in G)return S(G);if("h"in G&&"s"in G&&"v"in G){{A=(G.h+360)%360/60;u=G.v/100*255;G=G.s/100*u;const z=G*(1-Math.abs(A%2-1));switch(Math.floor(A)){case 0:A={r:G,g:z,b:0};break;case 1:A={r:z,g:G,b:0};break;case 2:A={r:0,g:G,b:z};break;case 3:A={r:0,g:z,b:G};break;case 4:A={r:z,g:0,b:G};break;case 5:case 6:A={r:G,g:0,b:z};break;default:A={r:0,
g:0,b:0}}A.r=Math.round(A.r+u-G);A.g=Math.round(A.g+u-G);A.b=Math.round(A.b+u-G);u=A}return u}return G}const V=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],N=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];Y.darken=function(G,u){G=m(x(G));G.l*=1-u;return S(W(G))};Y.toHSV=function(G){if("h"in G&&"s"in G&&"v"in G)return G;var u=T(G);{G=u.r;const A=u.g,z=u.b;u=Math.max(G,A,z);const c=u-Math.min(G,A,z);G=0===c?0:u===G?(A-z)/c%6:u===A?(z-G)/c+2:(G-A)/c+4;0>G&&(G+=6);
G={h:60*G,s:100*(0===c?0:c/u),v:100/255*u}}return G};Y.toLAB=function(G){return"l"in G&&"a"in G&&"b"in G?G:m(x(T(G)))};Y.toLCH=function(G){if(!("l"in G&&"c"in G&&"h"in G)){{var u=m(x(T(G)));G=u.l;var A=u.a;const z=u.b;u=Math.sqrt(A*A+z*z);A=Math.atan2(z,A);A=0<A?A:A+2*Math.PI;G={l:G,c:u,h:A}}}return G};Y.toRGB=T;Y.toXYZ=function(G){return"x"in G&&"y"in G&&"z"in G?G:x(T(G))};Object.defineProperty(Y,"__esModule",{value:!0})})},"esri/renderers/RasterShadedReliefRenderer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/has ../core/Logger ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../rest/support/colorRamps".split(" "),
function(Y,C,x,S,m,W,T,V,N,G,u,A){var z;x=z=function(c){function k(e){e=c.call(this,e)||this;e.altitude=45;e.azimuth=315;e.colorRamp=null;e.hillshadeType="multi-directional";e.pixelSizePower=.664;e.pixelSizeFactor=.024;e.scalingType="none";e.type="raster-shaded-relief";e.zFactor=1;return e}Y._inheritsLoose(k,c);var l=k.prototype;l.readColorRamp=function(e){return A.fromJSON(e)};l.clone=function(){return new z({hillshadeType:this.hillshadeType,altitude:this.altitude,azimuth:this.azimuth,zFactor:this.zFactor,
scalingType:this.scalingType,pixelSizeFactor:this.pixelSizeFactor,pixelSizePower:this.pixelSizePower,colorRamp:S.clone(this.colorRamp)})};return k}(x.JSONSupport);C.__decorate([m.property({type:Number,json:{write:!0}})],x.prototype,"altitude",void 0);C.__decorate([m.property({type:Number,json:{write:!0}})],x.prototype,"azimuth",void 0);C.__decorate([m.property({types:A.types,json:{write:!0}})],x.prototype,"colorRamp",void 0);C.__decorate([G.reader("colorRamp")],x.prototype,"readColorRamp",null);C.__decorate([m.property({type:["traditional",
"multi-directional"],json:{write:!0}})],x.prototype,"hillshadeType",void 0);C.__decorate([m.property({type:Number,json:{write:!0}})],x.prototype,"pixelSizePower",void 0);C.__decorate([m.property({type:Number,json:{write:!0}})],x.prototype,"pixelSizeFactor",void 0);C.__decorate([m.property({type:["none","adjusted"],json:{write:!0}})],x.prototype,"scalingType",void 0);C.__decorate([N.enumeration({rasterShadedRelief:"raster-shaded-relief"})],x.prototype,"type",void 0);C.__decorate([m.property({type:Number,
json:{write:!0}})],x.prototype,"zFactor",void 0);return x=z=C.__decorate([u.subclass("esri.renderers.RasterShadedReliefRenderer")],x)})},"esri/renderers/RasterStretchRenderer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/has ../core/Logger ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ./support/stretchRendererUtils ../rest/support/colorRamps".split(" "),
function(Y,C,x,S,m,W,T,V,N,G,u,A,z,c){var k;x=k=function(l){function e(h){h=l.call(this,h)||this;h.colorRamp=null;h.computeGamma=!1;h.dynamicRangeAdjustment=!1;h.gamma=[];h.maxPercent=null;h.minPercent=null;h.numberOfStandardDeviations=null;h.outputMax=null;h.outputMin=null;h.sigmoidStrengthLevel=null;h.statistics=[];h.histograms=null;h.useGamma=!1;h.stretchType="none";h.type="raster-stretch";return h}Y._inheritsLoose(e,l);var a=e.prototype;a.readColorRamp=function(h){if(h)return c.fromJSON(h)};a.writeStatistics=
function(h,f,q){var b;null!=(b=h)&&b.length&&(Array.isArray(h[0])||(h=h.map(g=>[g.min,g.max,g.avg,g.stddev])),f[q]=h)};a.readStretchType=function(h,f){h=f.stretchType;"number"===typeof h&&(h=z.stretchTypeFunctionEnum[h]);return z.stretchTypeJSONDict.read(h)};a.clone=function(){return new k({stretchType:this.stretchType,outputMin:this.outputMin,outputMax:this.outputMax,useGamma:this.useGamma,computeGamma:this.computeGamma,statistics:S.clone(this.statistics),gamma:S.clone(this.gamma),sigmoidStrengthLevel:this.sigmoidStrengthLevel,
numberOfStandardDeviations:this.numberOfStandardDeviations,minPercent:this.minPercent,maxPercent:this.maxPercent,colorRamp:S.clone(this.colorRamp),histograms:S.clone(this.histograms),dynamicRangeAdjustment:this.dynamicRangeAdjustment})};return e}(x.JSONSupport);C.__decorate([m.property({types:c.types,json:{write:!0}})],x.prototype,"colorRamp",void 0);C.__decorate([G.reader("colorRamp")],x.prototype,"readColorRamp",null);C.__decorate([m.property({type:Boolean,json:{write:!0}})],x.prototype,"computeGamma",
void 0);C.__decorate([m.property({type:Boolean,json:{write:{target:"dra"},read:{source:"dra"}}})],x.prototype,"dynamicRangeAdjustment",void 0);C.__decorate([m.property({type:[Number],json:{write:!0}})],x.prototype,"gamma",void 0);C.__decorate([m.property({type:Number,json:{write:!0}})],x.prototype,"maxPercent",void 0);C.__decorate([m.property({type:Number,json:{write:!0}})],x.prototype,"minPercent",void 0);C.__decorate([m.property({type:W.Integer,json:{write:!0}})],x.prototype,"numberOfStandardDeviations",
void 0);C.__decorate([m.property({type:Number,json:{read:{source:"max"},write:{target:"max"}}})],x.prototype,"outputMax",void 0);C.__decorate([m.property({type:Number,json:{read:{source:"min"},write:{target:"min"}}})],x.prototype,"outputMin",void 0);C.__decorate([m.property({type:Number,json:{write:!0}})],x.prototype,"sigmoidStrengthLevel",void 0);C.__decorate([m.property({json:{type:[[Number]],write:!0}})],x.prototype,"statistics",void 0);C.__decorate([m.property()],x.prototype,"histograms",void 0);
C.__decorate([A.writer("statistics")],x.prototype,"writeStatistics",null);C.__decorate([m.property({type:Boolean,json:{write:!0}})],x.prototype,"useGamma",void 0);C.__decorate([m.property({type:z.stretchTypeJSONDict.apiValues,json:{type:z.stretchTypeJSONDict.jsonValues,write:z.stretchTypeJSONDict.write}})],x.prototype,"stretchType",void 0);C.__decorate([G.reader("stretchType",["stretchType"])],x.prototype,"readStretchType",null);C.__decorate([N.enumeration({rasterStretch:"raster-stretch"})],x.prototype,
"type",void 0);return x=k=C.__decorate([u.subclass("esri.renderers.RasterStretchRenderer")],x)})},"esri/renderers/support/stretchRendererUtils":function(){define(["exports","../../core/jsonMap"],function(Y,C){C=new C.JSONMap({none:"none",standardDeviation:"standard-deviation",histogramEqualization:"histogram-equalization",minMax:"min-max",percentClip:"percent-clip",sigmoid:"sigmoid"});Y.stretchTypeFunctionEnum={0:"none",3:"standardDeviation",4:"histogramEqualization",5:"minMax",6:"percentClip",9:"sigmoid"};
Y.stretchTypeJSONDict=C;Object.defineProperty(Y,"__esModule",{value:!0})})},"esri/renderers/VectorFieldRenderer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Color ../geometry ../Graphic ../symbols ../core/jsonMap ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/has ../core/Logger ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../geometry/support/normalizeUtils ../layers/support/rasterFunctions/vectorFieldUtils ./ClassBreaksRenderer ./mixins/VisualVariablesMixin ./support/ClassBreakInfo ./visualVariables/RotationVariable ./visualVariables/SizeVariable ./visualVariables/support/visualVariableUtils ../symbols/SimpleLineSymbol ../symbols/SimpleMarkerSymbol ../symbols/support/utils ../symbols/PictureMarkerSymbol ../geometry/Point".split(" "),
function(Y,C,x,S,m,W,T,V,N,G,u,A,z,c,k,l,e,a,h,f,q,b,g,p,H,y,r,Q,K){var U;const F=new Set(["esriMetersPerSecond","esriKilometersPerHour","esriKnots","esriFeetPerSecond","esriMilesPerHour"]),t=new T.JSONMap({esriMetersPerSecond:"meter-per-second",esriKilometersPerHour:"kilometer-per-hour",esriKnots:"knots",esriFeetPerSecond:"feet-per-second",esriMilesPerHour:"mile-per-hour"});S=new T.JSONMap({beaufort_ft:"beaufort-ft",beaufort_km:"beaufort-km",beaufort_kn:"beaufort-kn",beaufort_m:"beaufort-m",beaufort_mi:"beaufort-mi",
classified_arrow:"classified-arrow",ocean_current_kn:"ocean-current-kn",ocean_current_m:"ocean-current-m",simple_scalar:"simple-scalar",single_arrow:"single-arrow",wind_speed:"wind-barb"});T=new T.JSONMap({flow_from:"flow-from",flow_to:"flow-to"});V=U=function(v){function J(n){n=v.call(this,n)||this;n.attributeField="Magnitude";n.flowRepresentation="flow-from";n.rotationType="arithmetic";n.style="single-arrow";n.symbolTileSize=50;n.type="vector-field";return n}Y._inheritsLoose(J,v);var Z=J.prototype;
Z.readInputUnit=function(n,d){return F.has(n)?t.fromJSON(n):null};Z.readOutputUnit=function(n,d){return F.has(n)?t.fromJSON(n):null};Z.clone=function(){return new U({attributeField:this.attributeField,flowRepresentation:this.flowRepresentation,rotationType:this.rotationType,symbolTileSize:this.symbolTileSize,style:this.style,visualVariables:N.clone(this.visualVariables),inputUnit:this.inputUnit,outputUnit:this.outputUnit})};Z.getGraphicsFromPixelData=function(){var n=Y._asyncToGenerator(function*(d,
D=!1,R=[]){const P=[];var X=a.getUnitConversionFactor(this.inputUnit,this.outputUnit);D=D?a.convertVectorFieldData(d.pixelBlock,"vector-uv",this.rotationType,X):a.convertVectorFieldUnit(d.pixelBlock,"vector-magdir",X);d=d.extent;X=D.mask&&0<D.mask.length;let B=0;const E=(d.xmax-d.xmin)/D.width,L=(d.ymax-d.ymin)/D.height;for(let M=0;M<D.height;M++)for(let ba=0;ba<D.width;ba++,B++){let da=new K({x:d.xmin+ba*E+E/2,y:d.ymax-M*L-L/2,spatialReference:d.spatialReference});da=(yield e.normalizeCentralMeridian(da))[0];
var O=R.some(ca=>ca.intersects(da));X&&!D.mask[B]||O||(O=new m({geometry:{type:"point",x:da.x,y:da.y,spatialReference:d.spatialReference},attributes:{Magnitude:D.pixels[0][B],Direction:D.pixels[1][B]}}),O.symbol=this._getVisualVariablesAppliedSymbol(O),P.push(O))}return P});return function(d){return n.apply(this,arguments)}}();Z.getSymbol=function(n,d){};Z.getSymbolAsync=function(){var n=Y._asyncToGenerator(function*(d,D){});return function(d,D){return n.apply(this,arguments)}}();Z.getSymbols=function(){return[]};
Z.getClassBreakInfos=function(){var n;return null==(n=this.styleRenderer)?void 0:n.classBreakInfos};Z.getDefaultSymbol=function(){var n;return null==(n=this.styleRenderer)?void 0:n.defaultSymbol};Z._getDefaultSymbol=function(n){return new y({path:"M14,32 14,18 9,23 16,3 22,23 17,18 17,32 z",outline:new H({width:0}),size:20,color:n||new x([0,92,230])})};Z._getVisualVariablesAppliedSymbol=function(n){if(n){var d=this.styleRenderer&&this.styleRenderer.getSymbol(n);d=d.clone();var D=this.sizeVariables,
R=this.rotationVariables;D&&D.length&&this.sizeVariables.forEach(P=>r.applySizesToSymbol(d,p.getAllSizes([P],n)));R&&R.length&&(D=n.attributes.Direction,n.attributes.Direction="flow-from"===this.flowRepresentation?D:D+180,this.rotationVariables.forEach(P=>r.applyRotationToSymbol(d,p.getRotationAngle(P,n),P.axis)));return d}};Z._createStyleRenderer=function(n){let d={defaultSymbol:this._getDefaultSymbol(),classBreakInfos:[]};switch(n){case "single-arrow":d=this._createSingleArrowRenderer();break;case "beaufort-kn":d=
this._createBeaufortKnotsRenderer();break;case "beaufort-m":d=this._createBeaufortMeterRenderer();break;case "beaufort-ft":d=this._createBeaufortFeetRenderer();break;case "beaufort-mi":d=this._createBeaufortMilesRenderer();break;case "beaufort-km":d=this._createBeaufortKilometersRenderer();break;case "ocean-current-m":d=this._createCurrentMeterRenderer();break;case "ocean-current-kn":d=this._createCurrentKnotsRenderer();break;case "simple-scalar":d=this._createSimpleScalarRenderer();break;case "wind-barb":d=
this._createWindBarbsRenderer();break;case "classified-arrow":d=this._createClassifiedArrowRenderer()}return new h(d)};Z._createSingleArrowRenderer=function(){return{defaultSymbol:this._getDefaultSymbol()}};Z._createBeaufortKnotsRenderer=function(){const n=this._getDefaultSymbol(new x([214,47,39])),d=this._getClassBreaks([0,1,3,6,10,16,21,27,33,40,47,55,63],[[40,146,199],[89,162,186],[129,179,171],[160,194,155],[191,212,138],[218,230,119],[250,250,100],[252,213,83],[252,179,102],[250,141,52],[247,
110,42],[240,71,29]]);return{defaultSymbol:n,classBreakInfos:d}};Z._createBeaufortMeterRenderer=function(){const n=this._getDefaultSymbol(new x([214,47,39])),d=this._getClassBreaks([0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7],[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]]);return{defaultSymbol:n,classBreakInfos:d}};Z._createBeaufortFeetRenderer=function(){const n=this._getDefaultSymbol(new x([214,
47,39]));var d=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];d=d.map(D=>3.28084*D);d=this._getClassBreaks(d,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]]);return{defaultSymbol:n,classBreakInfos:d}};Z._createBeaufortMilesRenderer=function(){const n=this._getDefaultSymbol(new x([214,47,39]));var d=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];d=d.map(D=>2.23694*
D);d=this._getClassBreaks(d,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]]);return{defaultSymbol:n,classBreakInfos:d}};Z._createBeaufortKilometersRenderer=function(){const n=this._getDefaultSymbol(new x([214,47,39]));var d=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];d=d.map(D=>3.6*D);d=this._getClassBreaks(d,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,
204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]]);return{defaultSymbol:n,classBreakInfos:d}};Z._createCurrentMeterRenderer=function(){const n=this._getDefaultSymbol(new x([177,177,177])),d=this._getClassBreaks([0,.5,1,1.5,2],[[78,26,153],[179,27,26],[202,128,26],[177,177,177]]);return{defaultSymbol:n,classBreakInfos:d}};Z._createCurrentKnotsRenderer=function(){const n=this._getDefaultSymbol(new x([177,177,177])),d=this._getClassBreaks([0,.25,
.5,1,1.5,2,2.5,3,3.5,4],[[0,0,0],[0,37,100],[78,26,153],[151,0,100],[179,27,26],[177,78,26],[202,128,26],[177,179,52],[177,177,177]]);return{defaultSymbol:n,classBreakInfos:d}};Z._createClassifiedArrowRenderer=function(){var n;const d=this._getDefaultSymbol(new x([56,168,0]));var D=[0,1E-6,3.5,7,10.5,14];if(null!=(n=this.sizeVariables)&&n.length){const R=this.sizeVariables[0].minDataValue;n=this.sizeVariables[0].maxDataValue;if(R&&n){const P=(n-R)/5;D=Array.from(Array(6).keys()).map(X=>R+P*X)}}D=
this._getClassBreaks(D,[[56,168,0],[139,309,0],[255,255,0],[255,128,0],[255,0,0]]);return{defaultSymbol:d,classBreakInfos:D}};Z._createSimpleScalarRenderer=function(){return{defaultSymbol:Q.fromJSON({imageData:"iVBORw0KGgoAAAANSUhEUgAAACsAAAArCAQAAABLVLlLAAAABGdBTUEAAYagMeiWXwAAAAJiS0dEAACqjSMyAAAACXBIWXMAAABIAAAASABGyWs+AAAC3ElEQVRIx9XXvW4cVRQH8N982btpsIREJECyiCXsxX4DKh6AliqGKCBBE2SlwlHgAbBD/AKmyEYUeQ1KahPZSZQvBCkQLTHZ7KGY8Xodz4w3a1NwbzVzz/znfJ//zbStVC5q3icKak9GAs2QIdDx3PtW/S011NW3p+M5Eomh11ipTIKe6+4LQzHaQ+G+63pIZNJJQXMpljwTwj1brpgx5w1zZlyx5Z4QnllEIm2xeeSUHBf0hV0bejo1Uh09G3aFvgXk7cCJFBc9EdaRVuHJJaOdKyTV2TVhYLMduNR0Q9gxL5GaaTDw8GzejrDRBpxWoGsySRW0dttKuattwNkIlFw2YXgzOdYq4Ox49PlM+JrKd5OusjTWhBuVxUfMX/KXXZ3WEmkuqa67wspR4BTbwtKr/5u4fFgStse/T7EifFPnnYl9zPq4vmUOPrRndgoHjDti1gOPqlyXoifcRNGQzUd31lDyfHmob1Gp35vSr+P6vilcQ5Egtyd8YF/ySg9NhPM+9M/IOaHwp5+PSZayXTvCogEUwlatC3J8LLwYtcWB8EuDXQVuCkV5/B4eNHb7wGBs87LBDS+xjdVSn09wq1G8dFM+9tSUhIGneLvUdniKxKpTYljCpu3j7rVWlHj/P23v4NPGUEyeCQnexe9lJjzEQqMjJs+EzNAX6B98dBZVRmroJx95x/A/6gln18EyfCUsl+qdXb/tjvfbw+mwforpUOBz4XLVoBwAn3aWnfeH246NyBXhrq7TTN5lNSP9RkU+puUJm3W2Tsdq0nZWM07srk7MwQrZSRysjjGWBLRJNsNbfj2JMR4AbxpU1XLAb9Mxfpsq5EjMuuiR8L0JiHOOBX3hiUvOmavN0nMueSzcceFk0BK4pMqLo7vDD1Z0qrtDx7Itt4Xwm9UqbMmk8S0Dtuzb2pvOU99Z1nLTOfleNmvfZfP2pYZmPfajwosKdDBNpacNpVGGsWX9CyDI8Xq/Sj6QAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE0LTExLTEwVDAzOjE3OjU4LTA1OjAwF+tHyQAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxNC0xMS0xMFQwMzoxNzo1OC0wNTowMGa2/3UAAAAASUVORK5CYII\x3d",
height:20,width:20,type:"esriPMS",angle:0})}};Z._createWindBarbsRenderer=function(){const n=Array.from(Array(31).keys()).map(P=>5*P),d=[{range:"0-5",path:"M20 20 M5 20 A15 15 0 1 0 35 20 A15 15 0 1 0 5 20 M20 20 M10 20 A10 10 0 1 0 30 20 A10 10 0 1 0 10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTIwIDIwIE01IDIwIEExNSAxNSAwIDEgMCAzNSAyMCBBMTUgMTUgMCAxIDAgNSAyMCBNMjAgMjAgTTEwIDIwIEExMCAxMCAwIDEgMCAzMCAyMCBBMTAgMTAgMCAxIDAgMTAgMjAiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},
{range:"5-10",path:"M25 0 L25 40 M25 35 L17.5 37.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNyA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTTI1IDM1IEwxNy41IDM3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"10-15",path:"M25 0 L25 40 L10 45 L25 40",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNyA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"15-20",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L17.5 37.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjEyIDAgMTUgNDUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxNy41IDM3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"20-25",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNiA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCBNMjUgMzUgTDEwIDQwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},
{range:"25-30",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L17.5 32.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNiA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCBNMjUgMzUgTDEwIDQwIEwyNSAzNSBNMjUgMzAgTDE3LjUgMzIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"30-35",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"35-40",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxNy41IDI3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"40-45",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"45-50",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxNy41IDIyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},
{range:"50-55",path:"M25 0 L25 40 L10 40 L25 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"55-60",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L17.5 32.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxNy41IDMyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},
{range:"60-65",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"65-70",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxNy41IDI3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},
{range:"70-75",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"75-80",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxNy41IDIyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"80-85",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"85-90",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L17.5 17.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxNy41IDE3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"90-95",
path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxMCAyMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"95-100",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20 L25 15 M25 10 L17.5 12.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxMCAyMCBMMjUgMTUgTTI1IDEwIEwxNy41IDEyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"100-105",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"105-110",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDE3LjUgMjcuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"110-115",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},
{range:"115-120",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L17.5 22.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDE3LjUgMjIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"120-125",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"125-130",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L17.5 17.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDE3LjUgMTcuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"130-135",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"135-140",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDE3LjUgMTIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"140-145",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDEwIDE1IiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"145-150",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDEwIDE1IE0yNSAxMCBNMjUgNSBMMTcuNSA3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"}],D=Q.fromJSON({imageData:"iVBORw0KGgoAAAANSUhEUgAAACgAAAApCAQAAADtq6NDAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAJiS0dEAP+Hj8y/AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAEY0lEQVRIx5XXWWxWRRQH8N+d+31tUdGAVjGglYJABFEBY91jfDAg7piYaFTccA++uMQEFRcSXlATtxiXqMQt4G4iisYl0ai4sIQYtVFZ1KIFKdTS0l4f7vRCS5fPebozc+bM/2z/Mzcx0AgSiUxXnKfIdMn875FIhX53U2n/B/s+kKM4UINTjTBZImixxnrv+9a2iL6zEoUBXcoudrWj/OtHm3wt02lfU9Qao9OnHvIhgmww84MEl1qnxfNmGrqHxAizLdPpC6chGcAxKGGcL+30gOERf1BSpUqVslQSV8d5ReZFe8VQ9avufJn31cWwlJV7iafKStGOE/1qvfH9qUxxu8ydUdmuSKbGO8YUdT2inKLG69pM70tliktl5qIkCAJGmusDG7Vqsc0WjZa4UBlBiA5YZIcjYzB7qDtH5kaUJFLs7RGZTZ42W4PRRmtwvbdt1+wGiaS4drEtDttdZYIDNVuAclR3vA3+dI3qHqmVSy7U6Tv1MScCPvPR7nIpFlsdCy3FdTLPGhK92e2CUITjMJ9ocwKxnsZqc3O3JwMma3d6UVLnyVxB4aXemZqvPqLdpJhW3KVVbY4yYImPo6M5Urv50fj+0z/FG9YaEiENs8UtMfXUaTeTePNHlhXfA1UU+2lyD1Il3Gtt9+adfpNG7dNlpg2U/T3KYLZ2dUWFdTgp3/rQ4sK973qnInV5TIf40x3dhvrJPBiqyWUo4wAtLqhQYS71qK+QKOFRywmGK/kpikzV6WMKhh58vGWs4TIJNjiEYLIuP8Tt4/zmLyqk+AyrJSbF+Qq1DgqRUPMxyl+9q3IQhX/rMCJ6tEunriDs1oSyQZKlr9AkhT2ZIARbJfaJS1vtVbHB+Rgi0RK/y1q1BWsEEyLoz40xtGKcARPVWB1BTPO7f4LNtpkUl1aoMbViLyZo0GRjPD3BxnxjqXeLYlvhqYrzMMG3HoyJXa3JjfnGlbYYFlP7Jh3qKsKY4hQ7TY0nG+xwRL61n63mxHtqNHosigyMLmClNwvuecFnOZB88nNBDzNkzhxEZaKMBVoKapggMzvHHXBEpNSSFAvtcFRsVn0bW8LlMmcXs+c0Kne3gRR32+zg4uXwjC6zit6Wt4a8LXVfcp/MtQXHn2ynGbuCmb8GvvFeJLEE82ReU9/n6+dkq2x3buG9Wn94smcgAw631RPR7BTH+kbmHReZoEpOdEe7zWqZl40s0JWs9Hmv7hjBHqPDwsjGKVJnWWqjbdZp1KhJi0aPmxYZsIRhlttgeF+Jlke41QcOQKoqilSb6HJzSvNG3G/UoWnxwsmt+sVaYwd63dRbqdnMyCPVeyRPvpYgdavM22oGKoMUVRbJfOWMwidJ8Zzb1UvmWK/VVUXzHaTjjrVYh1897HT7xxYEVUaa5SWb/WO+YUWa9SrwvigzM8YlzlYv2GSdVCYxxlBtVnnFq5olwp5/BEk/OLsf5LUmG2+inRJdVvjZ97ZH9/zP34ug1O91pf4p+D+JYBpvrKxfbwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxNC0xMS0xMFQwMzoxMjowOS0wNTowMB9ViV0AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTQtMTEtMTBUMDM6MTI6MDktMDU6MDBuCDHhAAAAAElFTkSuQmCC",
height:20,width:20,type:"esriPMS",angle:0}),R=n.map((P,X)=>{if(X!==n.length-1)if(0===X)var B={minValue:P,maxValue:n[X+1],symbol:D};else B=Q.fromJSON({type:"esriPMS",imageData:d[X].imageData,contentType:"image/svg+xml",height:32,width:32,angle:0}),B={minValue:P,maxValue:n[X+1],symbol:B};return new q(B)});return{defaultSymbol:D,classBreakInfos:R}};Z._getClassBreaks=function(n,d){return d.map((D,R)=>new q({minValue:n[R],maxValue:n[R+1],symbol:this._getDefaultSymbol(new x(D))}))};Y._createClass(J,[{key:"styleRenderer",
get:function(){const n=this.attributeField,d=this._createStyleRenderer(this.style);d.field=n;return d}},{key:"sizeVariables",get:function(){const n=[];if(this.visualVariables)for(var d of this.visualVariables)"size"===d.type&&n.push(d);0===n.length&&(d=new g({field:"Magnitude",minSize:.2*this.symbolTileSize,maxSize:.8*this.symbolTileSize}),this.visualVariables?this.visualVariables.push(d):this._set("visualVariables",[d]),n.push(d));return n}},{key:"rotationVariables",get:function(){const n=[];if(this.visualVariables)for(var d of this.visualVariables)"rotation"===
d.type&&n.push(d);0===n.length&&(d=new b({field:"Direction",rotationType:this.rotationType}),this.visualVariables?this.visualVariables.push(d):this._set("visualVariables",[d]),n.push(d));return n}}]);return J}(f.VisualVariablesMixin(V.JSONSupport));C.__decorate([G.property({type:String,json:{write:!0}})],V.prototype,"attributeField",void 0);C.__decorate([G.property({type:T.apiValues,json:{type:T.jsonValues,read:{reader:T.read},write:{writer:T.write}}})],V.prototype,"flowRepresentation",void 0);C.__decorate([G.property({type:["geographic",
"arithmetic"],json:{write:!0}})],V.prototype,"rotationType",void 0);C.__decorate([G.property({type:S.apiValues,json:{type:S.jsonValues,read:{reader:S.read},write:{writer:S.write}}})],V.prototype,"style",void 0);C.__decorate([G.property({json:{write:!0}})],V.prototype,"symbolTileSize",void 0);C.__decorate([G.property({type:t.apiValues,json:{type:t.jsonValues,write:{writer:t.write}}})],V.prototype,"inputUnit",void 0);C.__decorate([k.reader("inputUnit")],V.prototype,"readInputUnit",null);C.__decorate([G.property({type:t.apiValues,
json:{type:t.jsonValues,read:{reader:t.read},write:{writer:t.write}}})],V.prototype,"outputUnit",void 0);C.__decorate([k.reader("outputUnit")],V.prototype,"readOutputUnit",null);C.__decorate([c.enumeration({vectorField:"vector-field"})],V.prototype,"type",void 0);C.__decorate([G.property({type:h})],V.prototype,"styleRenderer",null);C.__decorate([G.property({type:g})],V.prototype,"sizeVariables",null);C.__decorate([G.property({type:b})],V.prototype,"rotationVariables",null);return V=U=C.__decorate([l.subclass("esri.renderers.VectorFieldRenderer")],
V)})},"esri/layers/support/rasterFunctions/vectorFieldUtils":function(){define(["exports","../../../core/maybe","../PixelBlock"],function(Y,C,x){function S(N,G="geographic"){const [u,A]=N;N=Math.sqrt(u*u+A*A);let z=Math.atan2(A,u)*W;z=(360+z)%360;"geographic"===G&&(z=(450-z)%360);return[N,z]}function m(N,G="geographic"){let u=N[1];"geographic"===G&&(u=(450-u)%360);u%=360;N=N[0];return[N*Math.cos(u/W),N*Math.sin(u/W)]}const W=180/Math.PI,T=function(N){return N&&"esri.layers.support.PixelBlock"===N.declaredClass&&
N.pixels&&0<N.pixels.length},V=new Map;V.set("meter-per-second",1);V.set("kilometer-per-hour",.277778);V.set("knots",.514444);V.set("feet-per-second",.3048);V.set("mile-per-hour",.44704);Y.convertVectorFieldData=function(N,G,u="geographic",A=1){if(!T(N))return N;const {pixels:z,width:c,height:k}=N;var l=c*k;const e=z[0],a=z[1],h=x.createEmptyBand(N.pixelType,l);l=x.createEmptyBand(N.pixelType,l);let f=0;for(let q=0;q<k;q++)for(let b=0;b<c;b++)"vector-uv"===G?([h[f],l[f]]=S([e[f],a[f]],u),h[f]*=A):
([h[f],l[f]]=m([e[f],a[f]],u),h[f]*=A,l[f]*=A),f++;N=new x({pixelType:N.pixelType,width:N.width,height:N.height,mask:N.mask,validPixelCount:N.validPixelCount,maskIsAlpha:N.maskIsAlpha,pixels:[h,l]});N.updateStatistics();return N};Y.convertVectorFieldUnit=function(N,G,u=1){if(1===u||!T(N))return N;N=N.clone();const {pixels:A,width:z,height:c}=N,k=A[0],l=A[1];let e=0;for(let a=0;a<c;a++)for(let h=0;h<z;h++)"vector-uv"===G?(k[e]*=u,l[e]*=u):k[e]*=u,e++;N.updateStatistics();return N};Y.getUnitConversionFactor=
function(N,G){return V.get(N)/V.get(G)||1};Y.isValidPixelBlock=T;Y.snapImageToSymbolTile=function(N,G,u,A,z){if(!C.isSome(z)||!z.spatialReference.equals(N.spatialReference))return{extent:N,width:G,height:u,resolution:N.width/G};const c=z.xmin;z=z.ymax;A=Math.max(A||0,30);G=((N.xmax-N.xmin)/Math.ceil(1/A*G)+(N.ymax-N.ymin)/Math.ceil(1/A*u))/2;N.xmin=c+Math.floor((N.xmin-c)/G)*G;N.xmax=c+Math.ceil((N.xmax-c)/G)*G;N.ymin=z+Math.floor((N.ymin-z)/G)*G;N.ymax=z+Math.ceil((N.ymax-z)/G)*G;return{extent:N,
width:Math.round(N.width/G),height:Math.round(N.height/G),resolution:G}};Object.defineProperty(Y,"__esModule",{value:!0})})},"esri/layers/support/PixelBlock":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Error ../../core/JSONSupport ../../core/lang ../../core/Logger ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/jsonMap ../../core/accessorSupport/decorators/subclass".split(" "),
function(Y,C,x,S,m,W,T,V,N,G,u,A){var z;const c=T.getLogger("esri.layers.support.PixelBlock");x=z=function(k){function l(a){a=k.call(this,a)||this;a.width=null;a.height=null;a.pixelType="f32";a.validPixelCount=null;a.mask=null;a.maskIsAlpha=!1;a.pixels=null;a.statistics=null;return a}Y._inheritsLoose(l,k);l.createEmptyBand=function(a,h){return new (z.getPixelArrayConstructor(a))(h)};l.getPixelArrayConstructor=function(a){let h;switch(a){case "u1":case "u2":case "u4":case "u8":h=Uint8Array;break;case "u16":h=
Uint16Array;break;case "u32":h=Uint32Array;break;case "s8":h=Int8Array;break;case "s16":h=Int16Array;break;case "s32":h=Int32Array;break;case "u32":h=Uint32Array;break;case "f32":h=Float32Array;break;case "f64":h=Float64Array;break;case "c64":case "c128":case "unknown":h=Float32Array}return h};var e=l.prototype;e.castPixelType=function(a){if(!a)return"f32";a=a.toLowerCase();-1<["u1","u2","u4"].indexOf(a)?a="u8":-1==="unknown u8 s8 u16 s16 u32 s32 f32 f64".split(" ").indexOf(a)&&(a="f32");return a};
e.getPlaneCount=function(){return this.pixels&&this.pixels.length};e.addData=function(a){if(!a.pixels||a.pixels.length!==this.width*this.height)throw new S("pixelblock:invalid-or-missing-pixels","add data requires valid pixels array that has same length defined by pixel block width * height");this.pixels||(this.pixels=[]);this.statistics||(this.statistics=[]);this.pixels.push(a.pixels);this.statistics.push(a.statistics||{minValue:null,maxValue:null})};e.getAsRGBA=function(){const a=new ArrayBuffer(this.width*
this.height*4);switch(this.pixelType){case "s8":case "s16":case "u16":case "s32":case "u32":case "f32":case "f64":this._fillFromNon8Bit(a);break;default:this._fillFrom8Bit(a)}return new Uint8ClampedArray(a)};e.getAsRGBAFloat=function(){const a=new Float32Array(this.width*this.height*4);this._fillFrom32Bit(a);return a};e.updateStatistics=function(){this.statistics=this.pixels.map(f=>this._calculateBandStatistics(f,this.mask));const a=this.mask;let h=0;if(a)for(let f=0;f<a.length;f++)a[f]&&h++;else h=
this.width*this.height;this.validPixelCount=h};e.clamp=function(a){if(a&&"f64"!==a&&"f32"!==a){switch(a){case "u8":var h=[0,255];break;case "u16":h=[0,65535];break;case "u32":h=[0,4294967295];break;case "s8":h=[-128,127];break;case "s16":h=[-32768,32767];break;case "s32":h=[-2147483648,2147483647];break;default:h=[-3.4*1E39,3.4*1E39]}var [f,q]=h;h=this.pixels;var b=this.width*this.height,g=h.length,p=[];for(let Q=0;Q<g;Q++){var H=z.createEmptyBand(a,b);var y=h[Q];for(let K=0;K<b;K++){var r=y[K];H[K]=
r>q?q:r<f?f:r}p.push(H)}this.pixels=p;this.pixelType=a}};e.extractBands=function(a){if(V.isNone(a)||0===a.length||null==this.pixels||0===this.pixels.length)return this;var h=this.pixels.length;const f=a.some(q=>q>=this.pixels.length);h=h===a.length&&!a.some((q,b)=>q!==b);return f||h?this:new z({pixelType:this.pixelType,width:this.width,height:this.height,mask:this.mask,validPixelCount:this.validPixelCount,maskIsAlpha:this.maskIsAlpha,pixels:a.map(q=>this.pixels[q]),statistics:this.statistics&&a.map(q=>
this.statistics[q])})};e.clone=function(){const a=new z({width:this.width,height:this.height,pixelType:this.pixelType,maskIsAlpha:this.maskIsAlpha,validPixelCount:this.validPixelCount});this.mask&&(a.mask=this.mask instanceof Uint8Array?new Uint8Array(this.mask):this.mask.slice(0));let h;const f=z.getPixelArrayConstructor(this.pixelType);if(this.pixels&&0<this.pixels.length){a.pixels=[];const q=this.pixels[0].slice;for(h=0;h<this.pixels.length;h++)a.pixels[h]=q?this.pixels[h].slice(0,this.pixels[h].length):
new f(this.pixels[h])}if(this.statistics)for(a.statistics=[],h=0;h<this.statistics.length;h++)a.statistics[h]=W.clone(this.statistics[h]);return a};e._fillFrom8Bit=function(a){const {mask:h,maskIsAlpha:f,pixels:q}=this;if(a&&q&&q.length){var b,g;var p=b=g=q[0];3<=q.length?(b=q[1],g=q[2]):2===q.length&&(b=q[1]);var H=new Uint32Array(a),y=this.width*this.height;if(p.length!==y)c.error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.");else if(h&&h.length===y)if(f)for(a=0;a<y;a++)h[a]&&
(H[a]=h[a]<<24|g[a]<<16|b[a]<<8|p[a]);else for(a=0;a<y;a++)h[a]&&(H[a]=-16777216|g[a]<<16|b[a]<<8|p[a]);else for(a=0;a<y;a++)H[a]=-16777216|g[a]<<16|b[a]<<8|p[a]}else c.error("getAsRGBA()","Unable to convert to RGBA. The input pixel block is empty.")};e._fillFromNon8Bit=function(a){const {pixels:h,mask:f,statistics:q}=this;if(a&&h&&h.length){var b=this.pixelType,g=1,p=0;g=1;q&&0<q.length?(p=q.map(K=>K.minValue).reduce((K,U)=>Math.min(K,U)),g=q.map(K=>K.maxValue-K.minValue).reduce((K,U)=>Math.max(K,
U)),g=255/g):(g=255,"s8"===b?(p=-128,g=127):"u16"===b?g=65535:"s16"===b?(p=-32768,g=32767):"u32"===b?g=4294967295:"s32"===b?(p=-2147483648,g=2147483647):"f32"===b?(p=-3.4*1E39,g=3.4*1E39):"f64"===b&&(p=-Number.MAX_VALUE,g=Number.MAX_VALUE),g=255/(g-p));a=new Uint32Array(a);b=this.width*this.height;var H,y,r;var Q=H=y=h[0];if(Q.length!==b)return c.error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.");if(2<=h.length)if(H=h[1],3<=h.length&&(y=h[2]),f&&f.length===b)for(r=0;r<b;r++)f[r]&&
(a[r]=-16777216|(y[r]-p)*g<<16|(H[r]-p)*g<<8|(Q[r]-p)*g);else for(r=0;r<b;r++)a[r]=-16777216|(y[r]-p)*g<<16|(H[r]-p)*g<<8|(Q[r]-p)*g;else if(f&&f.length===b)for(r=0;r<b;r++)H=(Q[r]-p)*g,f[r]&&(a[r]=-16777216|H<<16|H<<8|H);else for(r=0;r<b;r++)H=(Q[r]-p)*g,a[r]=-16777216|H<<16|H<<8|H}else c.error("getAsRGBA()","Unable to convert to RGBA. The input pixel block is empty.")};e._fillFrom32Bit=function(a){const {pixels:h,mask:f}=this;if(!a||!h||!h.length)return c.error("getAsRGBAFloat()","Unable to convert to RGBA. The input pixel block is empty.");
let q,b,g,p;q=b=g=h[0];3<=h.length?(b=h[1],g=h[2]):2===h.length&&(b=h[1]);const H=this.width*this.height;if(q.length!==H)return c.error("getAsRGBAFloat()","Unable to convert to RGBA. The pixelblock is invalid.");let y=0;if(f&&f.length===H)for(p=0;p<H;p++)a[y++]=q[p],a[y++]=b[p],a[y++]=g[p],a[y++]=f[p]&1;else for(p=0;p<H;p++)a[y++]=q[p],a[y++]=b[p],a[y++]=g[p],a[y++]=1};e._calculateBandStatistics=function(a,h){let f=Infinity,q=-Infinity;const b=a.length;let g,p=0;if(h)for(g=0;g<b;g++)h[g]&&(p=a[g],
f=p<f?p:f,q=p>q?p:q);else for(g=0;g<b;g++)p=a[g],f=p<f?p:f,q=p>q?p:q;return{minValue:f,maxValue:q}};return l}(m.JSONSupport);C.__decorate([N.property({json:{write:!0}})],x.prototype,"width",void 0);C.__decorate([N.property({json:{write:!0}})],x.prototype,"height",void 0);C.__decorate([N.property({json:{write:!0}})],x.prototype,"pixelType",void 0);C.__decorate([G.cast("pixelType")],x.prototype,"castPixelType",null);C.__decorate([N.property({json:{write:!0}})],x.prototype,"validPixelCount",void 0);
C.__decorate([N.property({json:{write:!0}})],x.prototype,"mask",void 0);C.__decorate([N.property({json:{write:!0}})],x.prototype,"maskIsAlpha",void 0);C.__decorate([N.property({json:{write:!0}})],x.prototype,"pixels",void 0);C.__decorate([N.property({json:{write:!0}})],x.prototype,"statistics",void 0);return x=z=C.__decorate([A.subclass("esri.layers.support.PixelBlock")],x)})},"esri/layers/support/DimensionalDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/has ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass".split(" "),
function(Y,C,x,S,m,W,T,V,N,G){var u;x=u=function(A){function z(c){c=A.call(this,c)||this;c.variableName=null;c.dimensionName=null;c.values=[];c.isSlice=!1;return c}Y._inheritsLoose(z,A);z.prototype.clone=function(){return new u({variableName:this.variableName,dimensionName:this.dimensionName,values:S.clone(this.values),isSlice:this.isSlice})};return z}(x.JSONSupport);C.__decorate([m.property({type:String,json:{write:!0}})],x.prototype,"variableName",void 0);C.__decorate([m.property({type:String,json:{write:!0}})],
x.prototype,"dimensionName",void 0);C.__decorate([m.property({type:W.types.array(W.types.oneOf([W.types.native(Number),W.types.array(W.types.native(Number))])),json:{write:!0}})],x.prototype,"values",void 0);C.__decorate([m.property({type:Boolean,json:{write:!0}})],x.prototype,"isSlice",void 0);return x=u=C.__decorate([G.subclass("esri.layers.support.DimensionalDefinition")],x)})},"esri/layers/support/ExportImageServiceParameters":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/aliasOf ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ./imageryRendererUtils ./MosaicRule ./rasterEnums ./RasterFunction".split(" "),
function(Y,C,x,S,m,W,T,V,N,G,u,A,z,c,k,l){Y.ExportImageServiceParameters=function(e){function a(){var f=e.apply(this,arguments)||this;f.layer=null;f.adjustAspectRatio=void 0;f.bandIds=void 0;f.compression=void 0;f.compressionQuality=void 0;f.compressionTolerance=.01;f.format=null;f.interpolation=null;f.noData=null;f.noDataInterpretation=void 0;f.pixelType=void 0;f.lercVersion=2;return f}C._inheritsLoose(a,e);var h=a.prototype;h.writeAdjustAspectRatio=function(f,q,b){10.3>this.layer.version||(q[b]=
f)};h.writeCompressionQuality=function(f,q,b){this.format&&-1<this.format.toLowerCase().indexOf("jpg")&&null!=f&&(q[b]=f)};h.writeCompressionTolerance=function(f,q,b){"lerc"===this.format&&null!=f&&(q[b]=f)};h.writeLercVersion=function(f,q,b){"lerc"===this.format&&10.5<=this.layer.version&&(q[b]=f)};h.combineRendererWithRenderingRule=function(){var f;const q=this.layer,{rasterInfo:b,renderingRule:g,renderer:p}=q;return p&&z.isSupportedRendererType(p)?z.combineRenderingRules(z.convertRendererToRenderingRule(p,
{rasterAttributeTable:b.attributeTable,pixelType:b.pixelType,dataType:b.dataType,bandProperties:null==(f=b.keyProperties)?void 0:f.BandProperties,convertColorRampToColormap:10.6>q.version}),g):g};h._addResampleRasterFunction=function(f){var q;if("vector-field"!==(null==(q=this.layer.renderer)?void 0:q.type)||"Resample"===(null==f?void 0:f.functionName))return f;q=new l({functionName:"Resample",functionArguments:{ResamplingType:"esriImageServiceDataTypeVector-UV"===this.layer.serviceDataType?7:10,
InputCellSize:{x:this.layer.pixelSizeX,y:this.layer.pixelSizeY}}});return z.combineRenderingRules(q,f)};C._createClass(a,[{key:"version",get:function(){const f=this.layer;f.commitProperty("bandIds");f.commitProperty("format");f.commitProperty("compressionQuality");f.commitProperty("compressionTolerance");f.commitProperty("interpolation");f.commitProperty("noData");f.commitProperty("noDataInterpretation");f.commitProperty("mosaicRule");f.commitProperty("renderingRule");f.commitProperty("adjustAspectRatio");
f.commitProperty("pixelFilter");f.commitProperty("renderer");f.commitProperty("definitionExpression");return(this._get("version")||0)+1},set:function(f){this._set("version",f)}},{key:"mosaicRule",get:function(){var f=this.layer;let q=f.mosaicRule;f=f.definitionExpression;q?f&&f!==q.where&&(q=q.clone(),q.where=f):f&&(q=new c({where:f}));return q}},{key:"renderingRule",get:function(){var f=this.layer;let q=f.renderingRule;const b=f.pixelFilter;f=!f.format||-1<f.format.indexOf("jpg")||-1<f.format.indexOf("png");
q=this._addResampleRasterFunction(q);f&&!b&&(q=this.combineRendererWithRenderingRule());return q}}]);return a}(S.JSONSupport);x.__decorate([G.property()],Y.ExportImageServiceParameters.prototype,"layer",void 0);x.__decorate([G.property({json:{write:!0}})],Y.ExportImageServiceParameters.prototype,"adjustAspectRatio",void 0);x.__decorate([A.writer("adjustAspectRatio")],Y.ExportImageServiceParameters.prototype,"writeAdjustAspectRatio",null);x.__decorate([G.property({json:{write:!0}}),m.aliasOf("layer.bandIds")],
Y.ExportImageServiceParameters.prototype,"bandIds",void 0);x.__decorate([G.property({json:{write:!0}})],Y.ExportImageServiceParameters.prototype,"compression",void 0);x.__decorate([G.property({json:{write:!0}}),m.aliasOf("layer.compressionQuality")],Y.ExportImageServiceParameters.prototype,"compressionQuality",void 0);x.__decorate([A.writer("compressionQuality")],Y.ExportImageServiceParameters.prototype,"writeCompressionQuality",null);x.__decorate([G.property({json:{write:!0}}),m.aliasOf("layer.compressionTolerance")],
Y.ExportImageServiceParameters.prototype,"compressionTolerance",void 0);x.__decorate([A.writer("compressionTolerance")],Y.ExportImageServiceParameters.prototype,"writeCompressionTolerance",null);x.__decorate([G.property({json:{write:!0}}),m.aliasOf("layer.format")],Y.ExportImageServiceParameters.prototype,"format",void 0);x.__decorate([G.property({type:String,json:{read:{reader:k.interpolationKebab.read},write:{writer:k.interpolationKebab.write}}}),m.aliasOf("layer.interpolation")],Y.ExportImageServiceParameters.prototype,
"interpolation",void 0);x.__decorate([G.property({json:{write:!0}}),m.aliasOf("layer.noData")],Y.ExportImageServiceParameters.prototype,"noData",void 0);x.__decorate([G.property({type:String,json:{read:{reader:k.noDataInterpretationKebab.read},write:{writer:k.noDataInterpretationKebab.write}}}),m.aliasOf("layer.noDataInterpretation")],Y.ExportImageServiceParameters.prototype,"noDataInterpretation",void 0);x.__decorate([G.property({json:{write:!0}})],Y.ExportImageServiceParameters.prototype,"pixelType",
void 0);x.__decorate([G.property({json:{write:!0}})],Y.ExportImageServiceParameters.prototype,"lercVersion",void 0);x.__decorate([A.writer("lercVersion")],Y.ExportImageServiceParameters.prototype,"writeLercVersion",null);x.__decorate([G.property({type:Number})],Y.ExportImageServiceParameters.prototype,"version",null);x.__decorate([G.property({json:{write:!0}})],Y.ExportImageServiceParameters.prototype,"mosaicRule",null);x.__decorate([G.property({json:{write:!0}})],Y.ExportImageServiceParameters.prototype,
"renderingRule",null);Y.ExportImageServiceParameters=x.__decorate([u.subclass("esri.layers.mixins.ExportImageServiceParameters")],Y.ExportImageServiceParameters);Object.defineProperty(Y,"__esModule",{value:!0})})},"esri/layers/support/imageryRendererUtils":function(){define("exports ../../core/lang ./RasterFunction ../../renderers/support/colorRampUtils ../../renderers/support/stretchRendererUtils ../../renderers/visualVariables/SizeVariable".split(" "),function(Y,C,x,S,m,W){function T(a){const h=
a.Raster;return h&&"esri.layers.support.RasterFunction"===h.declaredClass?T(h.functionArguments):a}function V(a,h){const f=new x;f.functionName="VectorFieldRenderer";const {dataType:q,bandProperties:b}=h;h="vector-uv"===q?!0:!1;let g,p;b&&2===b.length&&(g=b.map(Q=>Q.BandName.toLowerCase()).indexOf("magnitude"),p=b.map(Q=>Q.BandName.toLowerCase()).indexOf("direction"));if(-1===g||null===g)g=0,p=1;const H="arithmetic"===a.rotationType?1:2,y="flow-from"===a.flowRepresentation?0:1,r=a.visualVariables?
a.visualVariables.filter(Q=>"Magnitude"===Q.field)[0]:new W;a={magnitudeBandID:g,directionBandID:p,isUVComponents:h,referenceSystem:H,massFlowAngleRepresentation:y,symbolTileSize:50,symbolTileSizeUnits:100,calculationMethod:"Vector Average",symbologyName:k[a.style.toLowerCase().replace("-","_")],minimumMagnitude:r.minDataValue,maximumMagnitude:r.maxDataValue,minimumSymbolSize:r.minSize,maximumSymbolSize:r.maxSize};f.functionArguments=a;return f}function N(a,h){const f=[],q=[],b=[],g=[],{pixelType:p,
rasterAttributeTable:H}=h,y=H&&H.features,r=u(H);if(y&&Array.isArray(y)&&a.classBreakInfos){a.classBreakInfos.forEach((U,F)=>{const t=U.symbol.color;let v;t.a&&y.forEach(J=>{v=J.attributes[a.field];(v>=U.minValue&&v<U.maxValue||F===a.classBreakInfos.length-1&&v>=U.minValue)&&g.push([J.attributes[r],t.r,t.g,t.b])})});h=p?G(g,p):g;var Q=new x;Q.functionName="Colormap";Q.functionArguments={};Q.functionArguments.Colormap=h;Q.variableName="Raster";return Q}a.classBreakInfos.forEach((U,F)=>{const t=U.symbol&&
U.symbol.color;t.a?(0===F?f.push(U.minValue,U.maxValue+1E-6):f.push(U.minValue+1E-6,U.maxValue+1E-6),q.push(F),g.push([F,t.r,t.g,t.b])):b.push(U.minValue,U.maxValue)});h=p?G(g,p):g;Q=new x;Q.functionName="Remap";Q.functionArguments={InputRanges:f,OutputValues:q,NoDataRanges:b};Q.variableName="Raster";const K=new x;K.functionName="Colormap";K.functionArguments={Colormap:h,Raster:Q};return K}function G(a,h){(h=c[String(h).toLowerCase()])&&a.push([Math.floor(h[0]-1),0,0,0],[Math.ceil(h[1]+1),0,0,0]);
return a}function u(a){if(a)return{fields:a}=a,(a=a&&a.find(h=>h&&h.name&&"value"===h.name.toLowerCase()))&&a.name}function A(a,h){const f=[],{pixelType:q,rasterAttributeTable:b}=h,g=b&&b.features,p=u(b);let H=!1;a.uniqueValueInfos&&a.uniqueValueInfos.forEach(r=>{const Q=r.symbol.color;null!=Q&&Q.a&&(a.field!==p&&g?g&&g.forEach(K=>{String(K.attributes[a.field])===String(r.value)&&f.push([K.attributes[p],Q.r,Q.g,Q.b])}):isNaN(+r.value)?H=!0:f.push([+r.value,Q.r,Q.g,Q.b]))});if(H)return null;h=q&&0<
f.length?G(f,q):f;const y=new x;y.functionName="Colormap";y.functionArguments={};y.functionArguments.Colormap=h;y.variableName="Raster";return y}function z(a){const h=[];a.forEach(f=>{Array.isArray(f)?h.push(f):null!=f.min&&null!=f.max&&h.push([f.min,f.max,f.avg||0,f.stddev||0])});return h}const c={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767]},k={simple_scalar:"Simple Scalar",wind_barb:"Wind Barb",single_arrow:"Single Arrow",beaufort_kn:"Beaufort Wind (Knots)",
beaufort_m:"Beaufort Wind (MetersPerSecond)",ocean_current_m:"Ocean Current (MetersPerSecond)",ocean_current_kn:"Ocean Current (Knots)"},l=new Set("raster-stretch unique-value class-breaks raster-shaded-relief vector-field raster-colormap".split(" ")),e={none:0,standardDeviation:3,histogramEqualization:4,minMax:5,percentClip:6,sigmoid:9};Y.combineRenderingRules=function(a,h){if(!a||!h)return C.clone(a||h);a=C.clone(a);"none"!==h.functionName.toLowerCase()&&(T(a.functionArguments).Raster=h);return a};
Y.convertRendererToRenderingRule=function(a,h){h=h||{};switch(a.type){case "raster-stretch":var f=new x;f.functionName="Stretch";var q=e[m.stretchTypeJSONDict.toJSON(a.stretchType)],b=z(a.statistics);b={StretchType:q,Statistics:b,DRA:a.dynamicRangeAdjustment,UseGamma:a.useGamma,Gamma:a.gamma,ComputeGamma:a.computeGamma};null!=a.outputMin&&(b.Min=a.outputMin);null!=a.outputMax&&(b.Max=a.outputMax);q===e.standardDeviation?(b.NumberOfStandardDeviations=a.numberOfStandardDeviations,f.outputPixelType=
"u8"):q===e.percentClip?(b.MinPercent=a.minPercent,b.MaxPercent=a.maxPercent,f.outputPixelType="u8"):q===e.minMax?f.outputPixelType="u8":q===e.sigmoid&&(b.SigmoidStrengthLevel=a.sigmoidStrengthLevel);f.functionArguments=b;f.variableName="Raster";if(a.colorRamp){q=a.colorRamp;b=new x;const g=S.getColorRampName(q);b.functionArguments=g?{colorRamp:g}:!h.convertColorRampToColormap||"algorithmic"!==q.type&&"multipart"!==q.type?{colorRamp:a.colorRamp.toJSON()}:{Colormap:S.convertColorRampToColormap(q,256)};
b.variableName="Raster";b.functionName="Colormap";b.functionArguments.Raster=f;a=b}else a=f;return a;case "class-breaks":return N(a,h);case "unique-value":return A(a,h);case "raster-colormap":return(a=a.extractColormap())&&0!==a.length?({pixelType:h}=h,a=h?G(a,h):a,h=new x,h.functionName="Colormap",h.functionArguments={},h.functionArguments.Colormap=a,a=h):a=void 0,a;case "vector-field":return V(a,h);case "raster-shaded-relief":return"elevation"!==h.dataType?a=new x:(h=new x,h.functionName="Hillshade",
f="traditional"===a.hillshadeType?0:1,q="none"===a.scalingType?1:3,b={HillshadeType:f,SlopeType:q,ZFactor:a.zFactor},0===f&&(b.Azimuth=a.azimuth,b.Altitude=a.altitude),3===q&&(b.PSPower=a.pixelSizePower,b.PSZFactor=a.pixelSizeFactor),h.functionArguments=b,h.variableName="Raster",a.colorRamp&&(h.functionName="ShadedRelief",b.Colormap=S.convertColorRampToColormap(a.colorRamp,256)),a=h),a}};Y.isSupportedRendererType=function(a){return l.has(a.type)};Y.pixelTypeRanges=c;Object.defineProperty(Y,"__esModule",
{value:!0})})},"esri/layers/support/RasterFunction":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer".split(" "),function(Y,C,
x,S,m,W,T,V,N,G,u,A){var z;const c=new Set(["raster","raster2","dem","fillraster"]),k=new Set(["rasters"]),l=b=>b&&b.rasterFunction?q.fromJSON(b):b,e=b=>b&&b instanceof q?b.toJSON():b,a=b=>(null==b?void 0:b.functionName)&&!b.declaredClass,h=b=>a(b)?new q(b):b;var f;(function(b){b[b.MOSAIC=0]="MOSAIC";b[b.GROUP=1]="GROUP";b[b.ITEM=2]="ITEM"})(f||(f={}));let q=z=function(b){function g(H){H=b.call(this,H)||this;H.functionName=null;H.outputPixelType="unknown";H.variableName=null;H.description=null;H.functionDefinition=
null;H.thumbnail=null;return H}Y._inheritsLoose(g,b);var p=g.prototype;p.readFunctionArguments=function(H,y){H=y.arguments||y.rasterFunctionArguments;if(null==H)var r=null;else{H=S.clone(H);y={};for(r of Object.keys(H))c.has(r.toLowerCase())?y[r]=l(H[r]):k.has(r.toLowerCase())&&Array.isArray(H[r])?y[r]=H[r].map(l):y[r]=H[r];r=y}return r};p.writeFunctionArguments=function(H,y,r){const Q={};for(const K of Object.keys(H))c.has(K.toLowerCase())?Q[K]=e(H[K]):k.has(K.toLowerCase())&&Array.isArray(H[K])?
Q[K]=H[K].map(e):Q[K]=e(H[K]);this.functionDefinition?y.arguments=Q:y[r]=Q};p.readFunctionName=function(H,y){H=y.rasterFunctionInfos;const r=y.name;return r?r:H&&H.length&&"None"!==H[0].name?H[0].name:y.rasterFunction};p.writeFunctionName=function(H,y,r){this.functionDefinition?y.name=H:y[r]=H};p.readFunctionType=function(H){return f[H]};p.writeFunctionType=function(H,y,r){y[r]=f[H]};p.clone=function(){return new z({functionName:this.functionName,functionArguments:S.clone(this.functionArguments),
outputPixelType:this.outputPixelType,variableName:this.variableName,description:this.description,functionType:this.functionType,functionDefinition:this.functionDefinition,thumbnail:this.thumbnail})};Y._createClass(g,[{key:"functionArguments",set:function(H){if(H){const y=Object.keys(H);if(y.some(r=>c.has(r.toLowerCase())&&a(H[r]))||y.some(r=>k.has(r.toLowerCase())&&Array.isArray(H[r])&&H[r].some(Q=>a(Q)))){H=S.clone(H);for(const r of y)c.has(r.toLowerCase())?H[r]=h(H[r]):k.has(r.toLowerCase())&&Array.isArray(H[r])&&
(H[r]=H[r].map(Q=>h(Q)))}}this._set("functionArguments",H)}}]);return g}(x.JSONSupport);C.__decorate([m.property({json:{type:Object,write:{target:"rasterFunctionArguments"}}})],q.prototype,"functionArguments",null);C.__decorate([G.reader("functionArguments",["rasterFunctionArguments","arguments"])],q.prototype,"readFunctionArguments",null);C.__decorate([A.writer("functionArguments")],q.prototype,"writeFunctionArguments",null);C.__decorate([m.property({json:{type:String,write:{target:"rasterFunction"}}})],
q.prototype,"functionName",void 0);C.__decorate([G.reader("functionName",["rasterFunction","rasterFunctionInfos","name"])],q.prototype,"readFunctionName",null);C.__decorate([A.writer("functionName")],q.prototype,"writeFunctionName",null);C.__decorate([N.enumeration({C128:"c128",C64:"c64",F32:"f32",F64:"f64",S16:"s16",S32:"s32",S8:"s8",U1:"u1",U16:"u16",U2:"u2",U32:"u32",U4:"u4",U8:"u8",UNKNOWN:"unknown"},{ignoreUnknown:!1}),m.property({json:{default:"unknown"}})],q.prototype,"outputPixelType",void 0);
C.__decorate([m.property({type:String,json:{read:!0,write:!0}})],q.prototype,"variableName",void 0);C.__decorate([m.property({type:String,json:{read:!0,write:!0,origins:{"web-document":{read:!1,write:!1}}}})],q.prototype,"description",void 0);C.__decorate([m.property({json:{origins:{"web-document":{read:!1,write:!1}}}})],q.prototype,"functionType",void 0);C.__decorate([G.reader("functionType")],q.prototype,"readFunctionType",null);C.__decorate([A.writer("functionType")],q.prototype,"writeFunctionType",
null);C.__decorate([m.property({type:Object,json:{read:{source:"function"},write:{target:"function"},origins:{"web-document":{read:!1,write:!1}}}})],q.prototype,"functionDefinition",void 0);C.__decorate([m.property({type:String,json:{read:!0,write:!0,origins:{"web-document":{read:!1,write:!1}}}})],q.prototype,"thumbnail",void 0);return q=z=C.__decorate([u.subclass("esri.layers.support.RasterFunction")],q)})},"esri/layers/support/MosaicRule":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/ensureType ../../geometry/Point ./DimensionalDefinition ./RasterFunction".split(" "),
function(Y,C,x,S,m,W,T,V,N,G,u,A,z,c,k){var l;const e=x.strict()({MT_FIRST:"first",MT_LAST:"last",MT_MIN:"min",MT_MAX:"max",MT_MEAN:"mean",MT_BLEND:"blend",MT_SUM:"sum"}),a=x.strict()({esriMosaicNone:"none",esriMosaicCenter:"center",esriMosaicNadir:"nadir",esriMosaicViewpoint:"viewpoint",esriMosaicAttribute:"attribute",esriMosaicLockRaster:"lock-raster",esriMosaicNorthwest:"northwest",esriMosaicSeamline:"seamline"});x=l=function(h){function f(b){b=h.call(this,b)||this;b.ascending=!0;b.itemRenderingRule=
null;b.lockRasterIds=null;b.method=null;b.multidimensionalDefinition=null;b.objectIds=null;b.operation=null;b.sortField=null;b.sortValue=null;b.viewpoint=null;b.where=null;return b}Y._inheritsLoose(f,h);var q=f.prototype;q.readAscending=function(b,g){return null!=g.ascending?g.ascending:null!=g.sortAscending?g.sortAscending:!0};q.readMethod=function(b,g){b=g.mosaicMethod||g.defaultMosaicMethod;switch(b?b.toLowerCase().replace("esrimosaic",""):""){case "byattribute":case "attribute":b="esriMosaicAttribute";
break;case "lockraster":b="esriMosaicLockRaster";break;case "center":b="esriMosaicCenter";break;case "northwest":b="esriMosaicNorthwest";break;case "nadir":b="esriMosaicNadir";break;case "viewpoint":b="esriMosaicViewpoint";break;case "seamline":b="esriMosaicSeamline";break;case "none":b="esriMosaicNone";break;default:b="esriMosaicNone"}return b=a.fromJSON(b)};q.readOperation=function(b,g){b=g.mosaicOperation;g=g.mosaicOperator&&g.mosaicOperator.toLowerCase();g=b||(g?e.toJSON(g):null);return e.fromJSON(g)||
"first"};q.castSortValue=function(b){return null==b||"string"===typeof b||"number"===typeof b?b:`${b}`};q.clone=function(){return new l({ascending:this.ascending,itemRenderingRule:m.clone(this.itemRenderingRule),lockRasterIds:m.clone(this.lockRasterIds),method:this.method,multidimensionalDefinition:m.clone(this.multidimensionalDefinition),objectIds:m.clone(this.objectIds),operation:this.operation,sortField:this.sortField,sortValue:this.sortValue,viewpoint:m.clone(this.viewpoint),where:this.where})};
return f}(S.JSONSupport);C.__decorate([W.property({type:Boolean,json:{write:!0}})],x.prototype,"ascending",void 0);C.__decorate([G.reader("ascending",["ascending","sortAscending"])],x.prototype,"readAscending",null);C.__decorate([W.property({type:k,json:{write:!0}})],x.prototype,"itemRenderingRule",void 0);C.__decorate([W.property({type:[A.Integer],json:{write:{overridePolicy(){return{enabled:"lock-raster"===this.method}}}}})],x.prototype,"lockRasterIds",void 0);C.__decorate([W.property({type:String,
json:{type:a.jsonValues,write:{target:"mosaicMethod",writer:a.write}}})],x.prototype,"method",void 0);C.__decorate([G.reader("method",["mosaicMethod","defaultMosaicMethod"])],x.prototype,"readMethod",null);C.__decorate([W.property({type:[c],json:{write:!0}})],x.prototype,"multidimensionalDefinition",void 0);C.__decorate([W.property({type:[A.Integer],json:{name:"fids",write:!0}})],x.prototype,"objectIds",void 0);C.__decorate([W.property({json:{type:e.jsonValues,read:{reader:e.read},write:{target:"mosaicOperation",
writer:e.write}}})],x.prototype,"operation",void 0);C.__decorate([G.reader("operation",["mosaicOperation","mosaicOperator"])],x.prototype,"readOperation",null);C.__decorate([W.property({type:String,json:{write:{overridePolicy(){return{enabled:"attribute"===this.method}}}}})],x.prototype,"sortField",void 0);C.__decorate([W.property({type:[String,Number],json:{write:{allowNull:!0,overridePolicy(){return{enabled:"attribute"===this.method,allowNull:!0}}}}})],x.prototype,"sortValue",void 0);C.__decorate([T.cast("sortValue")],
x.prototype,"castSortValue",null);C.__decorate([W.property({type:z,json:{write:!0}})],x.prototype,"viewpoint",void 0);C.__decorate([W.property({type:String,json:{write:!0}})],x.prototype,"where",void 0);return x=l=C.__decorate([u.subclass("esri.layers.support.MosaicRule")],x)})},"esri/layers/support/rasterEnums":function(){define(["exports","../../core/jsonMap"],function(Y,C){const x=C.strict()({RSP_NearestNeighbor:"nearest",RSP_BilinearInterpolation:"bilinear",RSP_CubicConvolution:"cubic",RSP_Majority:"majority"});
C=C.strict()({esriNoDataMatchAny:"any",esriNoDataMatchAll:"all"});Y.interpolationKebab=x;Y.noDataInterpretationKebab=C;Object.defineProperty(Y,"__esModule",{value:!0})})},"esri/layers/support/RasterInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../geometry/Extent ../../geometry/SpatialReference ./RasterStorageInfo".split(" "),
function(Y,C,x,S,m,W,T,V,N,G,u,A,z){x=function(c){function k(l){l=c.call(this,l)||this;l.attributeTable=null;l.bandCount=null;l.colormap=null;l.extent=null;l.format=void 0;l.height=null;l.width=null;l.histograms=null;l.keyProperties={};l.multidimensionalInfo=null;l.noDataValue=null;l.pixelSize=null;l.pixelType=null;l.isPseudoSpatialReference=!1;l.spatialReference=null;l.statistics=null;l.storageInfo=null;l.transform=null;return l}Y._inheritsLoose(k,c);Y._createClass(k,[{key:"dataType",get:function(){var l,
e,a;const h=null!=(l=null==(e=this.keyProperties)?void 0:null==(a=e.DataType)?void 0:a.toLowerCase())?l:"generic";return"stdtime"===h?"standard-time":h}},{key:"nativeExtent",get:function(){return this._get("nativeExtent")||this.extent},set:function(l){l&&this._set("nativeExtent",l)}},{key:"nativePixelSize",get:function(){if(!S.isSome(this.transform)||!this.transform.affectsPixelSize)return this.pixelSize;const l=this.nativeExtent;return{x:l.width/this.width,y:l.height/this.height}}}]);return k}(x.JSONSupport);
C.__decorate([m.property({json:{write:!0}})],x.prototype,"attributeTable",void 0);C.__decorate([m.property({json:{write:!0}})],x.prototype,"bandCount",void 0);C.__decorate([m.property({json:{write:!0}})],x.prototype,"colormap",void 0);C.__decorate([m.property({type:String,readOnly:!0})],x.prototype,"dataType",null);C.__decorate([m.property({type:u,json:{write:!0}})],x.prototype,"extent",void 0);C.__decorate([m.property({type:u,json:{write:!0}})],x.prototype,"nativeExtent",null);C.__decorate([m.property({json:{write:!0}})],
x.prototype,"nativePixelSize",null);C.__decorate([m.property({json:{write:!0}})],x.prototype,"format",void 0);C.__decorate([m.property({json:{write:!0}})],x.prototype,"height",void 0);C.__decorate([m.property({json:{write:!0}})],x.prototype,"width",void 0);C.__decorate([m.property({json:{write:!0}})],x.prototype,"histograms",void 0);C.__decorate([m.property({json:{write:!0}})],x.prototype,"keyProperties",void 0);C.__decorate([m.property({json:{write:!0}})],x.prototype,"multidimensionalInfo",void 0);
C.__decorate([m.property()],x.prototype,"noDataValue",void 0);C.__decorate([m.property({json:{write:!0}})],x.prototype,"pixelSize",void 0);C.__decorate([m.property({json:{write:!0}})],x.prototype,"pixelType",void 0);C.__decorate([m.property()],x.prototype,"isPseudoSpatialReference",void 0);C.__decorate([m.property({type:A,json:{write:!0}})],x.prototype,"spatialReference",void 0);C.__decorate([m.property({json:{write:!0}})],x.prototype,"statistics",void 0);C.__decorate([m.property({type:z,json:{write:!0}})],
x.prototype,"storageInfo",void 0);C.__decorate([m.property({json:{write:!0}})],x.prototype,"transform",void 0);return x=C.__decorate([G.subclass("esri.layers.support.RasterInfo")],x)})},"esri/layers/support/RasterStorageInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../geometry/Point".split(" "),
function(Y,C,x,S,m,W,T,V,N,G){x=function(u){function A(){var z=u.apply(this,arguments)||this;z.blockWidth=void 0;z.blockHeight=void 0;z.compression=null;z.origin=null;z.firstPyramidLevel=null;z.maximumPyramidLevel=null;z.pyramidScalingFactor=2;z.pyramidBlockWidth=null;z.pyramidBlockHeight=null;z.isVirtualTileInfo=!1;z.tileInfo=null;z.blockBoundary=null;return z}Y._inheritsLoose(A,u);return A}(x.JSONSupport);C.__decorate([S.property({type:Number,json:{write:!0}})],x.prototype,"blockWidth",void 0);
C.__decorate([S.property({type:Number,json:{write:!0}})],x.prototype,"blockHeight",void 0);C.__decorate([S.property({type:String,json:{write:!0}})],x.prototype,"compression",void 0);C.__decorate([S.property({type:G,json:{write:!0}})],x.prototype,"origin",void 0);C.__decorate([S.property({type:Number,json:{write:!0}})],x.prototype,"firstPyramidLevel",void 0);C.__decorate([S.property({type:Number,json:{write:!0}})],x.prototype,"maximumPyramidLevel",void 0);C.__decorate([S.property({json:{write:!0}})],
x.prototype,"pyramidResolutions",void 0);C.__decorate([S.property({type:Number,json:{write:!0}})],x.prototype,"pyramidScalingFactor",void 0);C.__decorate([S.property({type:Number,json:{write:!0}})],x.prototype,"pyramidBlockWidth",void 0);C.__decorate([S.property({type:Number,json:{write:!0}})],x.prototype,"pyramidBlockHeight",void 0);C.__decorate([S.property({type:Boolean,json:{write:!0}})],x.prototype,"isVirtualTileInfo",void 0);C.__decorate([S.property({json:{write:!0}})],x.prototype,"tileInfo",
void 0);C.__decorate([S.property()],x.prototype,"blockBoundary",void 0);return x=C.__decorate([N.subclass("esri.layers.support.RasterStorageInfo")],x)})},"esri/layers/support/RasterJobHandler":function(){define(["../../chunks/_rollupPluginBabelHelpers","../../core/Error","../../core/workers/workers","./PixelBlock"],function(Y,C,x,S){return function(){function m(){this._workerThread=null;this._destroyed=!1}var W=m.prototype;W.initialize=function(){var T=Y._asyncToGenerator(function*(){const V=yield x.open("RasterWorker");
this._destroyed?V.close():this._workerThread=V});return function(){return T.apply(this,arguments)}}();W.destroy=function(){this._destroyed=!0;this._workerThread&&(this._workerThread.close(),this._workerThread=null)};W.decode=function(){var T=Y._asyncToGenerator(function*(V,N){if(!this._workerThread)throw new C("raster-jobhandler:no-connection","no available worker connection");return(V=yield this._workerThread.invoke("decode",V,N))?new S(V):null});return function(V,N){return T.apply(this,arguments)}}();
W.symbolize=function(){var T=Y._asyncToGenerator(function*(V,N){if(!this._workerThread)throw new C("raster-jobhandler:no-connection","no available worker connection");V={extent:V.extent&&V.extent.toJSON(),pixelBlock:V.pixelBlock.toJSON(),simpleStretchParams:V.simpleStretchParams,bandIds:V.bandIds};return(N=yield this._workerThread.invoke("symbolize",V,N))?new S(N):null});return function(V,N){return T.apply(this,arguments)}}();W.updateSymbolizer=function(){var T=Y._asyncToGenerator(function*(V,N){var G;
if(!this._workerThread)throw new C("raster-jobhandler:no-connection","no available worker connection");const u=null==V?void 0:null==(G=V.rendererJSON)?void 0:G.histograms;yield Promise.all(this._workerThread.broadcast("updateSymbolizer",{symbolizerJSON:V.toJSON(),histograms:u},N))});return function(V,N){return T.apply(this,arguments)}}();W.stretch=function(){var T=Y._asyncToGenerator(function*(V,N){if(!this._workerThread)throw new C("raster-jobhandler:no-connection","no available worker connection");
if(null==V||!V.pixelBlock)return null;V={srcPixelBlock:V.pixelBlock.toJSON(),stretchParams:V.stretchParams};return(N=yield this._workerThread.invoke("stretch",V,N))?new S(N):null});return function(V,N){return T.apply(this,arguments)}}();W.split=function(){var T=Y._asyncToGenerator(function*(V,N){if(!this._workerThread)throw new C("raster-jobhandler:no-connection","no available worker connection");if(null==V||!V.pixelBlock)return null;V={srcPixelBlock:V.pixelBlock.toJSON(),tileSize:V.tileSize,maximumPyramidLevel:V.maximumPyramidLevel};
const G=yield this._workerThread.invoke("split",V,N);G&&G.forEach((u,A)=>{G.set(A,u?S.fromJSON(u):null)});return Promise.resolve(G)});return function(V,N){return T.apply(this,arguments)}}();W.estimateStatisticsHistograms=function(){var T=Y._asyncToGenerator(function*(V,N){if(!this._workerThread)throw new C("raster-jobhandler:no-connection","no available worker connection");if(null==V||!V.pixelBlock)return null;V={srcPixelBlock:V.pixelBlock.toJSON()};N=yield this._workerThread.invoke("estimateStatisticsHistograms",
V,N);return Promise.resolve(N)});return function(V,N){return T.apply(this,arguments)}}();W.mosaicAndTransform=function(){var T=Y._asyncToGenerator(function*(V,N){var G;if(!this._workerThread)throw new C("raster-jobhandler:no-connection","no available worker connection");if(null==V||null==(G=V.srcPixelBlocks)||!G.length)return null;V={...V,srcPixelBlocks:V.srcPixelBlocks.map(u=>u?u.toJSON():null)};return(N=yield this._workerThread.invoke("mosaicAndTransform",V,N))?new S(N):null});return function(V,
N){return T.apply(this,arguments)}}();return m}()})},"esri/layers/support/rasterFormats/RasterCodec":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../PixelBlock ./ImageCanvasDecoder ./JpgPlus ../../../chunks/TiffDecoder ../../../chunks/LercCodec ../../../chunks/Zlib ./Raw ./utils".split(" "),function(Y,C,x,S,m,W,T,V,N,G,u){function A(y,r){if(!u.isPlatformLittleEndian)throw new x("rasterCoded:decode","lerc decoder is not supported on big endian platform");
const {width:Q,height:K,pixelType:U}=r;var F=q(U);const t=F.pixelTypeCtor;r=null==r.noDataValue?F.noDataValue:r.noDataValue;F=0;let v,J=0,Z;const n=y.byteLength-10;for(;J<n;){var d=V.decode(y,{inputOffset:J,encodedMaskData:v,returnMask:0===F?!0:!1,returnEncodedMask:0===F?!0:!1,returnFileInfo:!0,pixelType:t,noDataValue:r});if(Q&&K&&(d.width!==Q||d.height!==K))throw new x("rasterCoded:decode","lerc decoded result has width or height different from specified in options");J=d.fileInfo.eofOffset;0===F&&
(v=d.encodedMaskData,Z=new S({width:d.width,height:d.height,pixels:[],pixelType:U,mask:d.maskData,statistics:[]}));F++;Z.addData({pixels:d.pixelData,statistics:{minValue:d.minValue,maxValue:d.maxValue,noDataValue:d.noDataValue}});10<n-J&&(d=String.fromCharCode.apply(null,new Uint8Array(y,J,10)),J+=-1<d.indexOf("CntZ")?d.indexOf("CntZ"):0)}return Z}function z(y,r){if(!u.isPlatformLittleEndian)throw new x("rasterCoded:decode","lerc decoder is not supported on big endian platform");var Q=0,K=r.offset||
0,U=0;let F;let t;const v=r.eof||y.byteLength-10,J=[],{width:Z,height:n}=r;for(r=0;K<v;){var d;var D=T.Lerc2Codec.decode(y,{inputOffset:K,maskData:F,returnFileInfo:!0});if(Z&&n&&(D.width!==Z||D.height!==n))throw new x("rasterCoded:decode","lerc2 decoded result has width or height different from what's specified in options");K=D.fileInfo.eofOffset;F=D.maskData;0===Q&&(U=D.fileInfo.numValidPixel,t=new S({width:D.width,height:D.height,pixels:[],pixelType:D.fileInfo.pixelType,mask:F,statistics:[]}));
D.fileInfo.mask&&0<D.fileInfo.mask.numBytes&&r++;F&&J.push(F);if(1<D.dimCount&&(null==(d=D.pixelData)?void 0:d.length)===D.width*D.height*D.dimCount){var R,P,X,B;D.pixelData=D.pixelData.slice(-D.width*D.height);const E=null==(R=D.dimStats)?void 0:null==(P=R.minValues)?void 0:P[D.dimCount-1],L=null==(X=D.dimStats)?void 0:null==(B=X.maxValues)?void 0:B[D.dimCount-1];null!=E&&null!=L&&(D.minValue=E,D.maxValue=L)}Q++;t.addData({pixels:D.pixelData,statistics:{minValue:D.minValue,maxValue:D.maxValue}});
10<v-K&&(D=String.fromCharCode.apply(null,new Uint8Array(y,K,10)),K+=-1<D.indexOf("Lerc")?D.indexOf("Lerc"):0)}K=Q=y=0;if(1<r){K=t.width*t.height;F=new Uint8Array(K);F.set(J[0]);for(y=1;y<J.length;y++)for(U=J[y],Q=0;Q<K;Q++)F[Q]&=U[Q];for(Q=U=0;Q<K;Q++)U+=F[Q];t.mask=F}t.validPixelCount=U;return t}function c(y,r){y=T.decode(y,r.pyramidLevel||0);y=new S({width:y.width,height:y.height,pixels:y.pixels,pixelType:y.pixelType.toLowerCase(),mask:y.mask,statistics:null});y.updateStatistics();return y}function k(y){y=
W.decode(y);y=new S({width:y.width,height:y.height,pixels:y.pixels,pixelType:"U8",mask:y.mask,statistics:null});y.updateStatistics();return y}function l(y,r){y=new Uint8Array(y);y=new p(y);const {width:Q,height:K}=r;r=Q*K;y=y.decode();let U=0;var F=0;let t;F=new Uint8Array(r);for(U=0;U<r;U++)F[U]=y[4*U+3];const v=new S({width:Q,height:K,pixels:[],pixelType:"U8",mask:F,statistics:[]});for(U=0;3>U;U++){t=new Uint8Array(r);for(F=0;F<r;F++)t[F]=y[4*F+U];v.addData({pixels:t})}v.updateStatistics();return v}
function e(y,r,Q,K){return a.apply(this,arguments)}function a(){a=C._asyncToGenerator(function*(y,r,Q,K){y=yield(new m).decode(y,{applyJpegMask:!1,format:r,...Q},K);y=new S(y);y.updateStatistics();return y});return a.apply(this,arguments)}function h(y){if(null==y)throw new x("rasterCodec:decode","parameter encodeddata is required.");y=new Uint8Array(y,0,10);let r="";255===y[0]&&216===y[1]?r="jpg":137===y[0]&&80===y[1]&&78===y[2]&&71===y[3]?r="png":67===y[0]&&110===y[1]&&116===y[2]&&90===y[3]&&73===
y[4]&&109===y[5]&&97===y[6]&&103===y[7]&&101===y[8]&&32===y[9]?r="lerc":76===y[0]&&101===y[1]&&114===y[2]&&99===y[3]&&50===y[4]&&32===y[5]?r="lerc2":73===y[0]&&73===y[1]&&42===y[2]&&0===y[3]||77===y[0]&&77===y[1]&&0===y[2]&&42===y[3]||73===y[0]&&73===y[1]&&43===y[2]&&0===y[3]||77===y[0]&&77===y[1]&&0===y[2]&&43===y[3]?r="tiff":71===y[0]&&73===y[1]&&70===y[2]?r="gif":66===y[0]&&77===y[1]?r="bmp":-1<String.fromCharCode.apply(null,y).toLowerCase().indexOf("error")&&(r="error");return r}function f(y){let r=
null;switch(y){case "lerc":r=A;break;case "lerc2":r=z;break;case "jpg":r=k;break;case "png":r=l;break;case "bsq":case "bip":r=(Q,K)=>{{const {pixelTypeCtor:U}=q(K.pixelType),F=G.decode;Q=F(Q,{width:K.width,height:K.height,pixelType:U,format:y});K=new S({width:K.width,height:K.height,pixels:Q.pixels,pixelType:K.pixelType,mask:Q.mask,statistics:null});K.updateStatistics()}return K};break;case "tiff":r=c;break;case "error":r=()=>{throw new x("rasterCodec:decode","input data contains error");};break;
default:r=()=>{throw new x("rasterCodec:decode","unsupported raster format");}}return r}function q(y){let r=null,Q=null;switch(y?y.toLowerCase():"f32"){case "u1":case "u2":case "u4":case "u8":Q=255;r=Uint8Array;break;case "u16":Q=Q||65535;r=Uint16Array;break;case "u32":Q=Q||2**32-1;r=Uint32Array;break;case "s8":Q=Q||-128;r=Int8Array;break;case "s16":Q=Q||-32768;r=Int16Array;break;case "s32":Q=Q||-(2**31);r=Int32Array;break;default:r=Float32Array}return{pixelTypeCtor:r,noDataValue:Q}}function b(y,
r=1){if(y){var {pixels:Q,width:K,height:U,mask:F}=y;if(Q&&0!==Q.length){var t=Q.length,v=K-1,J=U-1,Z=[],n,d,D=S.getPixelArrayConstructor(y.pixelType);if(0===r){for(r=0;r<t;r++){var R=Q[r];var P=new D(v*J);for(n=0;n<J;n++){var X=n*K;for(d=0;d<v;d++)P[n*v+d]=R[X+d]}Z.push(P)}if(F){var B=new Uint8Array(v*J);for(n=0;n<J;n++)for(X=n*K,d=0;d<v;d++)B[n*v+d]=F[X+d]}}else{for(r=0;r<t;r++){R=Q[r];P=new D(v*J);for(n=0;n<J;n++)for(X=n*K,d=0;d<v;d++)P[n*v+d]=(R[X+d]+R[X+d+1]+R[X+K+d]+R[X+K+d+1])/4;Z.push(P)}if(F)for(B=
new Uint8Array(v*J),n=0;n<J;n++)for(X=n*K,d=0;d<v;d++)B[n*v+d]=Math.min.apply(null,[F[X+d],F[X+d+1],F[X+K+d],F[X+K+d+1]])}y.width=v;y.height=J;y.mask=B;y.pixels=Z}}}function g(){g=C._asyncToGenerator(function*(y,r={},Q){if(null==y)throw new x("rasterCodec:decode","missing encodeddata parameter.");let K=r.format&&r.format.toLowerCase();if(!("bsq"!==K&&"bip"!==K||null!=r.width&&null!=r.height))throw new x("rasterCodec:decode","requires width and height in options parameter.");if("tiff"===K&&r.customOptions)return r=
T.decodeTileOrStrip(y,r.customOptions),r=new S({width:r.width,height:r.height,pixels:r.pixels,pixelType:r.pixelType.toLowerCase(),mask:r.mask,statistics:null}),r.updateStatistics(),r;if(!K||"bsq"!==K&&"bip"!==K)K=h(y);r.useCanvas&&H.has(K)?y=yield e(y,K,r,Q):(Q=f(K),r.isPoint&&(r={...r},r.width++,r.height++),y=Q(y,r),r.isPoint&&b(y));return y});return g.apply(this,arguments)}var p=function(y){function r(F){var t,v;this.data=F;this.pos=8;this.palette=[];this.imgData=[];this.transparency={};this.animation=
null;this.text={};for(v=null;;){var J=this.readUInt32();var Z=F=void 0;F=[];for(Z=0;4>Z;++Z)F.push(String.fromCharCode(this.data[this.pos++]));F=F.join("");switch(F){case "IHDR":this.width=this.readUInt32();this.height=this.readUInt32();this.bits=this.data[this.pos++];this.colorType=this.data[this.pos++];this.compressionMethod=this.data[this.pos++];this.filterMethod=this.data[this.pos++];this.interlaceMethod=this.data[this.pos++];break;case "acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||
Infinity,frames:[]};break;case "PLTE":this.palette=this.read(J);break;case "fcTL":v&&this.animation.frames.push(v);this.pos+=4;v={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()};F=this.readUInt16();J=this.readUInt16()||100;v.delay=1E3*F/J;v.disposeOp=this.data[this.pos++];v.blendOp=this.data[this.pos++];v.data=[];break;case "IDAT":case "fdAT":"fdAT"===F&&(this.pos+=4,J-=4);F=(null!=v?v.data:void 0)||this.imgData;for(Z=0;0<=J?Z<J:Z>J;0<=J?++Z:--Z)F.push(this.data[this.pos++]);
break;case "tRNS":this.transparency={};switch(this.colorType){case 3:this.transparency.indexed=this.read(J);J=255-this.transparency.indexed.length;if(0<J)for(F=0;0<=J?F<J:F>J;0<=J?++F:--F)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(J)[0];break;case 2:this.transparency.rgb=this.read(J)}break;case "tEXt":Z=this.read(J);J=Z.indexOf(0);F=String.fromCharCode.apply(String,Z.slice(0,J));this.text[F]=String.fromCharCode.apply(String,Z.slice(J+1));break;case "IEND":v&&
this.animation.frames.push(v);a:{switch(this.colorType){case 0:case 3:case 4:v=1;break a;case 2:case 6:v=3;break a}v=void 0}this.colors=v;this.hasAlphaChannel=4===(t=this.colorType)||6===t;t=this.colors+(this.hasAlphaChannel?1:0);this.pixelBitlength=this.bits*t;a:{switch(this.colors){case 1:t="DeviceGray";break a;case 3:t="DeviceRGB";break a}t=void 0}this.colorSpace=t;this.imgData=new Uint8Array(this.imgData);return;default:this.pos+=J}this.pos+=4;if(this.pos>this.data.length)throw Error("Incomplete or corrupt PNG file");
}}var Q;r.load=function(F,t,v){"function"===typeof t&&(v=t);var J=new XMLHttpRequest;J.open("GET",F,!0);J.responseType="arraybuffer";J.onload=function(){var Z=new Uint8Array(J.response||J.mozResponseArrayBuffer);Z=new r(Z);"function"===typeof(null!=t?t.getContext:void 0)&&Z.render(t);return"function"===typeof v?v(Z):void 0};return J.send(null)};r.prototype.read=function(F){var t;var v=[];for(t=0;0<=F?t<F:t>F;0<=F?++t:--t)v.push(this.data[this.pos++]);return v};r.prototype.readUInt32=function(){var F=
this.data[this.pos++]<<24;var t=this.data[this.pos++]<<16;var v=this.data[this.pos++]<<8;var J=this.data[this.pos++];return F|t|v|J};r.prototype.readUInt16=function(){var F=this.data[this.pos++]<<8;var t=this.data[this.pos++];return F|t};r.prototype.decodePixels=function(F){var t,v,J,Z,n,d,D,R;null==F&&(F=this.imgData);if(0===F.length)return new Uint8Array(0);F=new N.Zlib(F);F=F.getBytes();var P=this.pixelBitlength/8;var X=P*this.width;var B=new Uint8Array(X*this.height);var E=F.length;for(v=Z=n=
0;Z<E;){switch(F[Z++]){case 0:for(J=t=0;t<X;J=t+=1)B[v++]=F[Z++];break;case 1:for(J=d=0;d<X;J=d+=1){t=F[Z++];var L=J<P?0:B[v-P];B[v++]=(t+L)%256}break;case 2:for(J=L=0;L<X;J=L+=1){t=F[Z++];var O=(J-J%P)/P;d=n&&B[(n-1)*X+O*P+J%P];B[v++]=(d+t)%256}break;case 3:for(J=R=0;R<X;J=R+=1)t=F[Z++],O=(J-J%P)/P,L=J<P?0:B[v-P],d=n&&B[(n-1)*X+O*P+J%P],B[v++]=(t+Math.floor((L+d)/2))%256;break;case 4:for(J=R=0;R<X;J=R+=1){t=F[Z++];O=(J-J%P)/P;L=J<P?0:B[v-P];0===n?d=D=0:(d=B[(n-1)*X+O*P+J%P],D=O&&B[(n-1)*X+(O-1)*
P+J%P]);var M=L+d-D;J=Math.abs(M-L);O=Math.abs(M-d);M=Math.abs(M-D);L=J<=O&&J<=M?L:O<=M?d:D;B[v++]=(t+L)%256}break;default:throw Error("Invalid filter algorithm: "+F[Z-1]);}n++}return B};r.prototype.decodePalette=function(){var F,t,v,J;var Z=this.palette;var n=this.transparency.indexed||[];var d=new Uint8Array((n.length||0)+Z.length);var D=0;Z.length;var R=t=F=0;for(v=Z.length;t<v;R=t+=3)d[D++]=Z[R],d[D++]=Z[R+1],d[D++]=Z[R+2],d[D++]=null!=(J=n[F++])?J:255;return d};r.prototype.copyToImageData=function(F,
t){var v,J;var Z=this.colors;var n=null;var d=this.hasAlphaChannel;this.palette.length&&(n=null!=(v=this._decodedPalette)?v:this._decodedPalette=this.decodePalette(),Z=4,d=!0);F=F.data||F;var D=F.length;var R=n||t;v=J=0;if(1===Z)for(;v<D;)Z=n?4*t[v/4]:J,J=R[Z++],F[v++]=J,F[v++]=J,F[v++]=J,F[v++]=d?R[Z++]:this.transparency.grayscale&&this.transparency.grayscale===J?0:255,J=Z;else for(;v<D;)Z=n?4*t[v/4]:J,F[v++]=R[Z++],F[v++]=R[Z++],F[v++]=R[Z++],F[v++]=d?R[Z++]:this.transparency.rgb&&this.transparency.rgb[1]===
R[Z-3]&&this.transparency.rgb[3]===R[Z-2]&&this.transparency.rgb[5]===R[Z-1]?0:255,J=Z};r.prototype.decode=function(){var F=new Uint8Array(this.width*this.height*4);this.copyToImageData(F,this.decodePixels());return F};var K=(Q=y.document&&y.document.createElement("canvas"))&&Q.getContext("2d");var U=function(F){K.width=F.width;K.height=F.height;K.clearRect(0,0,F.width,F.height);K.putImageData(F,0,0);F=new Image;F.src=Q.toDataURL();return F};r.prototype.decodeFrames=function(F){var t,v;if(this.animation){var J=
this.animation.frames;var Z=[];var n=t=0;for(v=J.length;t<v;n=++t){n=J[n];var d=F.createImageData(n.width,n.height);var D=this.decodePixels(new Uint8Array(n.data));this.copyToImageData(d,D);n.imageData=d;Z.push(n.image=U(d))}return Z}};r.prototype.renderFrame=function(F,t){var v=this.animation.frames;var J=v[t];v=v[t-1];0===t&&F.clearRect(0,0,this.width,this.height);1===(null!=v?v.disposeOp:void 0)?F.clearRect(v.xOffset,v.yOffset,v.width,v.height):2===(null!=v?v.disposeOp:void 0)&&F.putImageData(v.imageData,
v.xOffset,v.yOffset);0===J.blendOp&&F.clearRect(J.xOffset,J.yOffset,J.width,J.height);return F.drawImage(J.image,J.xOffset,J.yOffset)};r.prototype.animate=function(F){var t,v=this;var J=0;var Z=this.animation;var n=Z.numFrames;var d=Z.frames;var D=Z.numPlays;return(t=function(){var R=J++%n;var P=d[R];v.renderFrame(F,R);if(1<n&&J/n<D)return v.animation._timeout=setTimeout(t,P.delay)})()};r.prototype.stopAnimation=function(){var F;return clearTimeout(null!=(F=this.animation)?F._timeout:void 0)};r.prototype.render=
function(F){F._png&&F._png.stopAnimation();F._png=this;F.width=this.width;F.height=this.height;F=F.getContext("2d");if(this.animation)return this.decodeFrames(F),this.animate(F);var t=F.createImageData(this.width,this.height);this.copyToImageData(t,this.decodePixels());return F.putImageData(t,0,0)};return r}(self);const H=new Set(["jpg","png","bmp","gif"]);Y.decode=function(y){return g.apply(this,arguments)};Y.decodeLerc2=z;Y.getFormat=function(y){y=h(y);"lerc2"===y?y="lerc":"error"===y&&(y="");return y};
Object.defineProperty(Y,"__esModule",{value:!0})})},"esri/layers/support/rasterFormats/ImageCanvasDecoder":function(){define(["../../../core/Error","../../../core/promiseUtils","../../../chunks/Zlib"],function(Y,C,x){return function(){function S(m){m&&(this.canvas=m.canvas,this.ctx=m.ctx||m.canvas&&m.canvas.getContext("2d"))}S.prototype.decode=function(m,W,T){if(!m||10>m.byteLength)throw new Y("imagecanvasdecoder: decode","required a valid encoded data as input.");let {width:V,height:N,format:G}=
W;const {applyJpegMask:u}=W;if(u&&(!V||!N))throw new Y("imagecanvasdecoder: decode","image width and height are needed to apply jpeg mask directly to canvas");return new Promise((A,z)=>{let c=null;"jpg"===G&&u&&(c=S.getMask(m,{width:V,height:N}));const k=new Blob([new Uint8Array(m)],{type:"jpg"==="image/"+G?"jpeg":G}),l=URL.createObjectURL(k),e=new Image;let a;e.src=l;e.onload=()=>{URL.revokeObjectURL(l);if(C.isAborted(T))z(C.createAbortError());else{V=e.width;N=e.height;if(this.canvas){if(this.canvas.width!==
V||this.canvas.height!==N)this.canvas.width=V,this.canvas.height=N;this.ctx.clearRect(0,0,V,N)}else this.canvas=document.createElement("canvas"),this.canvas.width=V,this.canvas.height=N,this.ctx=this.canvas.getContext("2d");this.ctx.drawImage(e,0,0);var h=this.ctx.getImageData(0,0,V,N);a=h.data;var f;if(W.renderOnCanvas){if(c)for(f=0;f<c.length;f++)a[4*f+3]=c[f]?255:0;this.ctx.putImageData(h,0,0);A(null)}else{h=V*N;var q=new Uint8Array(h),b=new Uint8Array(h),g=new Uint8Array(h);if(c)for(f=0;f<h;f++)q[f]=
a[4*f],b[f]=a[4*f+1],g[f]=a[4*f+2];else for(c=new Uint8Array(h),f=0;f<h;f++)q[f]=a[4*f],b[f]=a[4*f+1],g[f]=a[4*f+2],c[f]=a[4*f+3];A({width:V,height:N,pixels:[q,b,g],mask:c,pixelType:"u8"})}}};e.onerror=()=>{URL.revokeObjectURL(l);z("cannot load image")}})};S.getMask=function(m,W){let T=null;try{var V=new Uint8Array(m);m=0;var N=V.length-2;for(m=Math.ceil(V.length/2);m<N&&(255!==V[m]||217!==V[m+1]);m++);m+=2;if(m<V.length-1){const G=(new x.Zlib(V.subarray(m))).getBytes();T=new Uint8Array(W.width*W.height);
W=0;for(V=0;V<G.length;V++)for(N=7;0<=N;N--)T[W++]=G[V]>>N&1}}catch(G){}return T};return S}()})},"esri/chunks/Zlib":function(){define(["exports"],function(Y){var C={exports:{}};(function(x){(function(S){S=S();void 0!==S&&(x.exports=S)})(function(){var S=function(){function m(){this.bufferLength=this.pos=0;this.eof=!1;this.buffer=null}m.prototype={ensureBuffer:function(W){var T=this.buffer,V=T?T.byteLength:0;if(W<V)return T;for(var N=512;N<W;)N<<=1;W=new Uint8Array(N);for(N=0;N<V;++N)W[N]=T[N];return this.buffer=
W},getByte:function(){for(var W=this.pos;this.bufferLength<=W;){if(this.eof)return null;this.readBlock()}return this.buffer[this.pos++]},getBytes:function(W){var T=this.pos;if(W){this.ensureBuffer(T+W);for(W=T+W;!this.eof&&this.bufferLength<W;)this.readBlock();var V=this.bufferLength;W>V&&(W=V)}else{for(;!this.eof;)this.readBlock();W=this.bufferLength}this.pos=W;return this.buffer.subarray(T,W)},lookChar:function(){for(var W=this.pos;this.bufferLength<=W;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos])},
getChar:function(){for(var W=this.pos;this.bufferLength<=W;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos++])},makeSubStream:function(W,T,V){for(var N=W+T;this.bufferLength<=N&&!this.eof;)this.readBlock();return new Stream(this.buffer,W,T,V)},skip:function(W){W||(W=1);this.pos+=W},reset:function(){this.pos=0}};return m}();return function(){function m(A){throw Error(A);}function W(A){var z=0,c=A[z++],k=A[z++];-1!=c&&-1!=k||m("Invalid header in flate stream");
8!=(c&15)&&m("Unknown compression method in flate stream");0!=((c<<8)+k)%31&&m("Bad FCHECK in flate stream");k&32&&m("FDICT bit set in flate stream");this.bytes=A;this.bytesPos=z;this.codeBuf=this.codeSize=0;S.call(this)}if(!self||!self.Uint32Array)return null;var T=new Uint32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),V=new Uint32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,
258,258,258]),N=new Uint32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),G=[new Uint32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59E4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,
524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,
524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,
524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,
524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,
524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,
524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,
524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9],u=[new Uint32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,
327707,327687,327703,327695,0]),5];W.prototype=Object.create(S.prototype);W.prototype.getBits=function(A){for(var z=this.codeSize,c=this.codeBuf,k=this.bytes,l=this.bytesPos,e;z<A;)"undefined"==typeof(e=k[l++])&&m("Bad encoding in flate stream"),c|=e<<z,z+=8;this.codeBuf=c>>A;this.codeSize=z-=A;this.bytesPos=l;return c&(1<<A)-1};W.prototype.getCode=function(A){var z=A[0],c=A[1];A=this.codeSize;for(var k=this.codeBuf,l=this.bytes,e=this.bytesPos;A<c;){var a;"undefined"==typeof(a=l[e++])&&m("Bad encoding in flate stream");
k|=a<<A;A+=8}c=z[k&(1<<c)-1];z=c>>16;c&=65535;(0==A||A<z||0==z)&&m("Bad encoding in flate stream");this.codeBuf=k>>z;this.codeSize=A-z;this.bytesPos=e;return c};W.prototype.generateHuffmanTable=function(A){for(var z=A.length,c=0,k=0;k<z;++k)A[k]>c&&(c=A[k]);for(var l=1<<c,e=new Uint32Array(l),a=1,h=0,f=2;a<=c;++a,h<<=1,f<<=1)for(var q=0;q<z;++q)if(A[q]==a){var b=0,g=h;for(k=0;k<a;++k)b=b<<1|g&1,g>>=1;for(k=b;k<l;k+=f)e[k]=a<<16|q;++h}return[e,c]};W.prototype.readBlock=function(){function A(b,g,p,
H,y){for(b=b.getBits(p)+H;0<b--;)g[h++]=y}var z=this.getBits(3);z&1&&(this.eof=!0);z>>=1;if(0==z){var c=this.bytes,k=this.bytesPos,l;"undefined"==typeof(l=c[k++])&&m("Bad block header in flate stream");var e=l;"undefined"==typeof(l=c[k++])&&m("Bad block header in flate stream");e|=l<<8;"undefined"==typeof(l=c[k++])&&m("Bad block header in flate stream");z=l;"undefined"==typeof(l=c[k++])&&m("Bad block header in flate stream");(z|l<<8)!=(~e&65535)&&m("Bad uncompressed block length in flate stream");
this.codeSize=this.codeBuf=0;l=this.bufferLength;z=this.ensureBuffer(l+e);this.bufferLength=e=l+e;for(var a=l;a<e;++a){if("undefined"==typeof(l=c[k++])){this.eof=!0;break}z[a]=l}this.bytesPos=k}else{if(1==z)k=G,l=u;else if(2==z){z=this.getBits(5)+257;l=this.getBits(5)+1;c=this.getBits(4)+4;k=Array(T.length);for(var h=0;h<c;)k[T[h++]]=this.getBits(3);k=this.generateHuffmanTable(k);h=c=0;l=z+l;for(e=Array(l);h<l;)a=this.getCode(k),16==a?A(this,e,2,3,c):17==a?A(this,e,3,3,c=0):18==a?A(this,e,7,11,c=
0):e[h++]=c=a;k=this.generateHuffmanTable(e.slice(0,z));l=this.generateHuffmanTable(e.slice(z,l))}else m("Unknown block type in flate stream");e=(z=this.buffer)?z.length:0;for(a=this.bufferLength;;){var f=this.getCode(k);if(256>f)a+1>=e&&(z=this.ensureBuffer(a+1),e=z.length),z[a++]=f;else{if(256==f){this.bufferLength=a;break}f-=257;f=V[f];var q=f>>16;0<q&&(q=this.getBits(q));c=(f&65535)+q;f=this.getCode(l);f=N[f];q=f>>16;0<q&&(q=this.getBits(q));f=(f&65535)+q;a+c>=e&&(z=this.ensureBuffer(a+c),e=z.length);
for(q=0;q<c;++q,++a)z[a]=z[a-f]}}}};return W}()})})(C);Y.Zlib=C.exports})},"esri/layers/support/rasterFormats/JpgPlus":function(){define(["../../../chunks/Jpg","../../../chunks/Zlib"],function(Y,C){return function(){function x(){}x.decode=function(S){var m=new Uint8Array(S);S=new Y.JpegImage;S.parse(m);const {width:W,height:T,numComponents:V,eof:N}=S;S=S.getData(W,T,!0);let G;const u=W*T;let A=0;var z=0,c=0;if(N<m.length-1)for(m=(new C.Zlib(m.subarray(N))).getBytes(),G=new Uint8Array(u),A=z=0;A<m.length;A++)for(c=
7;0<=c;c--)G[z++]=m[A]>>c&1;m=null;if(1===V)m=[S,S,S];else{m=[];for(A=0;3>A;A++)c=new Uint8Array(u),m.push(c);for(z=c=0;z<u;z++)for(A=0;3>A;A++)m[A][z]=S[c++]}return{width:W,height:T,pixels:m,mask:G}};return x}()})},"esri/chunks/Jpg":function(){define(["exports"],function(Y){var C={exports:{}};(function(x){(function(S){S=S();void 0!==S&&(x.exports=S)})(function(){var S=function(){function m(W){this.message="JPEG error: "+W}m.prototype=Error();m.prototype.name="JpegError";return m.constructor=m}();
return function(){function m(){this.decodeTransform=null;this.colorTransform=-1}function W(u,A){for(var z=0,c=[],k,l,e=16;0<e&&!u[e-1];)e--;c.push({children:[],index:0});var a=c[0],h;for(k=0;k<e;k++){for(l=0;l<u[k];l++){a=c.pop();for(a.children[a.index]=A[z];0<a.index;)a=c.pop();a.index++;for(c.push(a);c.length<=k;)c.push(h={children:[],index:0}),a.children[a.index]=h.children,a=h;z++}k+1<e&&(c.push(h={children:[],index:0}),a.children[a.index]=h.children,a=h)}return c[0].children}function T(u,A,z,
c,k,l,e,a,h){function f(){if(0<t)return t--,F>>t&1;F=u[A++];if(255===F){var M=u[A++];if(M)throw new S("unexpected marker "+(F<<8|M).toString(16));}t=7;return F>>>7}function q(M){for(;;){M=M[f()];if("number"===typeof M)return M;if("object"!==typeof M)throw new S("invalid huffman sequence");}}function b(M){for(var ba=0;0<M;)ba=ba<<1|f(),M--;return ba}function g(M){if(1===M)return 1===f()?1:-1;var ba=b(M);return ba>=1<<M-1?ba:ba+(-1<<M)+1}function p(M,ba){var da=q(M.huffmanTableDC);da=0===da?0:g(da);
M.blockData[ba]=M.pred+=da;for(da=1;64>da;){var ca=q(M.huffmanTableAC),ha=ca&15;ca>>=4;if(0===ha){if(15>ca)break;da+=16}else da+=ca,M.blockData[ba+G[da]]=g(ha),da++}}function H(M,ba){var da=q(M.huffmanTableDC);da=0===da?0:g(da)<<h;M.blockData[ba]=M.pred+=da}function y(M,ba){M.blockData[ba]|=f()<<h}function r(M,ba){if(0<v)v--;else for(var da=l;da<=e;){var ca=q(M.huffmanTableAC),ha=ca&15;ca>>=4;if(0===ha){if(15>ca){v=b(ca)+(1<<ca)-1;break}da+=16}else da+=ca,M.blockData[ba+G[da]]=g(ha)*(1<<h),da++}}
function Q(M,ba){for(var da=l,ca=0,ha;da<=e;){ha=G[da];switch(J){case 0:ca=q(M.huffmanTableAC);ha=ca&15;ca>>=4;if(0===ha)15>ca?(v=b(ca)+(1<<ca),J=4):(ca=16,J=1);else{if(1!==ha)throw new S("invalid ACn encoding");Z=g(ha);J=ca?2:3}continue;case 1:case 2:M.blockData[ba+ha]?M.blockData[ba+ha]+=f()<<h:(ca--,0===ca&&(J=2===J?3:0));break;case 3:M.blockData[ba+ha]?M.blockData[ba+ha]+=f()<<h:(M.blockData[ba+ha]=Z<<h,J=0);break;case 4:M.blockData[ba+ha]&&(M.blockData[ba+ha]+=f()<<h)}da++}4===J&&(v--,0===v&&
(J=0))}var K=z.mcusPerLine,U=A,F=0,t=0,v=0,J=0,Z,n=c.length,d,D,R,P;a=z.progressive?0===l?0===a?H:y:0===a?r:Q:p;var X=0;z=1===n?c[0].blocksPerLine*c[0].blocksPerColumn:K*z.mcusPerColumn;for(var B,E;X<z;){var L=k?Math.min(z-X,k):z;for(d=0;d<n;d++)c[d].pred=0;v=0;if(1===n){var O=c[0];for(P=0;P<L;P++)a(O,64*((O.blocksPerLine+1)*(X/O.blocksPerLine|0)+X%O.blocksPerLine)),X++}else for(P=0;P<L;P++){for(d=0;d<n;d++)for(O=c[d],B=O.h,E=O.v,D=0;D<E;D++)for(R=0;R<B;R++)a(O,64*((O.blocksPerLine+1)*((X/K|0)*O.v+
D)+(X%K*O.h+R)));X++}t=0;(O=N(u,A))&&O.invalid&&(console.log("decodeScan - unexpected MCU data, next marker is: "+O.invalid),A=O.offset);O=O&&O.marker;if(!O||65280>=O)throw new S("marker was not found");if(65488<=O&&65495>=O)A+=2;else break}(O=N(u,A))&&O.invalid&&(console.log("decodeScan - unexpected Scan data, next marker is: "+O.invalid),A=O.offset);return A-U}function V(u,A){u=A.blocksPerLine;for(var z=A.blocksPerColumn,c=new Int16Array(64),k=0;k<z;k++)for(var l=0;l<u;l++){var e=void 0,a=void 0,
h=void 0,f=void 0,q=void 0,b=void 0,g=void 0,p=void 0,H=q=b=f=a=e=void 0,y=void 0,r=void 0,Q=void 0,K=64*((A.blocksPerLine+1)*k+l),U=c,F=A.quantizationTable,t=A.blockData;if(!F)throw new S("missing required Quantization Table.");for(var v=0;64>v;v+=8)e=t[K+v],p=t[K+v+1],g=t[K+v+2],b=t[K+v+3],q=t[K+v+4],f=t[K+v+5],h=t[K+v+6],a=t[K+v+7],e*=F[v],0===(p|g|b|q|f|h|a)?(e=5793*e+512>>10,U[v]=e,U[v+1]=e,U[v+2]=e,U[v+3]=e,U[v+4]=e,U[v+5]=e,U[v+6]=e,U[v+7]=e):(p*=F[v+1],g*=F[v+2],b*=F[v+3],q*=F[v+4],f*=F[v+
5],h*=F[v+6],a*=F[v+7],Q=5793*e+128>>8,r=5793*q+128>>8,y=g,H=h,q=2896*(p-a)+128>>8,a=2896*(p+a)+128>>8,b<<=4,f<<=4,Q=Q+r+1>>1,r=Q-r,e=3784*y+1567*H+128>>8,y=1567*y-3784*H+128>>8,H=e,q=q+f+1>>1,f=q-f,a=a+b+1>>1,b=a-b,Q=Q+H+1>>1,H=Q-H,r=r+y+1>>1,y=r-y,e=2276*q+3406*a+2048>>12,q=3406*q-2276*a+2048>>12,a=e,e=799*b+4017*f+2048>>12,b=4017*b-799*f+2048>>12,f=e,U[v]=Q+a,U[v+7]=Q-a,U[v+1]=r+f,U[v+6]=r-f,U[v+2]=y+b,U[v+5]=y-b,U[v+3]=H+q,U[v+4]=H-q);for(F=0;8>F;++F)e=U[F],p=U[F+8],g=U[F+16],b=U[F+24],q=U[F+
32],f=U[F+40],h=U[F+48],a=U[F+56],0===(p|g|b|q|f|h|a)?(e=5793*e+8192>>14,e=-2040>e?0:2024<=e?255:e+2056>>4,t[K+F]=e,t[K+F+8]=e,t[K+F+16]=e,t[K+F+24]=e,t[K+F+32]=e,t[K+F+40]=e,t[K+F+48]=e,t[K+F+56]=e):(Q=5793*e+2048>>12,r=5793*q+2048>>12,y=g,H=h,q=2896*(p-a)+2048>>12,a=2896*(p+a)+2048>>12,Q=(Q+r+1>>1)+4112,r=Q-r,e=3784*y+1567*H+2048>>12,y=1567*y-3784*H+2048>>12,H=e,q=q+f+1>>1,f=q-f,a=a+b+1>>1,b=a-b,Q=Q+H+1>>1,H=Q-H,r=r+y+1>>1,y=r-y,e=2276*q+3406*a+2048>>12,q=3406*q-2276*a+2048>>12,a=e,e=799*b+4017*
f+2048>>12,b=4017*b-799*f+2048>>12,f=e,e=Q+a,a=Q-a,p=r+f,h=r-f,g=y+b,f=y-b,b=H+q,q=H-q,e=16>e?0:4080<=e?255:e>>4,p=16>p?0:4080<=p?255:p>>4,g=16>g?0:4080<=g?255:g>>4,b=16>b?0:4080<=b?255:b>>4,q=16>q?0:4080<=q?255:q>>4,f=16>f?0:4080<=f?255:f>>4,h=16>h?0:4080<=h?255:h>>4,a=16>a?0:4080<=a?255:a>>4,t[K+F]=e,t[K+F+8]=p,t[K+F+16]=g,t[K+F+24]=b,t[K+F+32]=q,t[K+F+40]=f,t[K+F+48]=h,t[K+F+56]=a)}return A.blockData}function N(u,A,z){var c=u.length-1;z=z<A?z:A;if(A>=c)return null;var k=u[A]<<8|u[A+1];if(65472<=
k&&65534>=k)return{invalid:null,marker:k,offset:A};for(A=u[z]<<8|u[z+1];!(65472<=A&&65534>=A);){if(++z>=c)return null;A=u[z]<<8|u[z+1]}return{invalid:k.toString(16),marker:A,offset:z}}if(!self||!self.Uint8ClampedArray)return null;var G=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]);m.prototype={parse:function(u){function A(){var F=u[k]<<8|u[k+1];
k+=2;return F}function z(){var F=A();F=k+F-2;var t=N(u,F,k);t&&t.invalid&&(console.log("readDataBlock - incorrect length, next marker is: "+t.invalid),F=t.offset);F=u.subarray(k,F);k+=F.length;return F}function c(F){for(var t=Math.ceil(F.samplesPerLine/8/F.maxH),v=Math.ceil(F.scanLines/8/F.maxV),J=0;J<F.components.length;J++){U=F.components[J];var Z=Math.ceil(Math.ceil(F.samplesPerLine/8)*U.h/F.maxH),n=Math.ceil(Math.ceil(F.scanLines/8)*U.v/F.maxV);U.blockData=new Int16Array(64*v*U.v*(t*U.h+1));U.blocksPerLine=
Z;U.blocksPerColumn=n}F.mcusPerLine=t;F.mcusPerColumn=v}var k=0,l=null,e=null,a=[],h=[],f=[],q=A();if(65496!==q)throw new S("SOI not found");for(q=A();65497!==q;){switch(q){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var b=z();65504===q&&74===b[0]&&70===b[1]&&73===b[2]&&70===b[3]&&0===b[4]&&(l={version:{major:b[5],minor:b[6]},densityUnits:b[7],xDensity:b[8]<<
8|b[9],yDensity:b[10]<<8|b[11],thumbWidth:b[12],thumbHeight:b[13],thumbData:b.subarray(14,14+3*b[12]*b[13])});65518===q&&65===b[0]&&100===b[1]&&111===b[2]&&98===b[3]&&101===b[4]&&(e={version:b[5]<<8|b[6],flags0:b[7]<<8|b[8],flags1:b[9]<<8|b[10],transformCode:b[11]});break;case 65499:q=A()+k-2;for(var g;k<q;){var p=u[k++],H=new Uint16Array(64);if(0===p>>4)for(b=0;64>b;b++)g=G[b],H[g]=u[k++];else if(1===p>>4)for(b=0;64>b;b++)g=G[b],H[g]=A();else throw new S("DQT - invalid table spec");a[p&15]=H}break;
case 65472:case 65473:case 65474:if(y)throw new S("Only single frame JPEGs supported");A();var y={};y.extended=65473===q;y.progressive=65474===q;y.precision=u[k++];y.scanLines=A();y.samplesPerLine=A();y.components=[];y.componentIds={};b=u[k++];for(q=H=p=0;q<b;q++){g=u[k];var r=u[k+1]>>4;var Q=u[k+1]&15;p<r&&(p=r);H<Q&&(H=Q);r=y.components.push({h:r,v:Q,quantizationId:u[k+2],quantizationTable:null});y.componentIds[g]=r-1;k+=3}y.maxH=p;y.maxV=H;c(y);break;case 65476:g=A();for(q=2;q<g;){p=u[k++];H=new Uint8Array(16);
for(b=r=0;16>b;b++,k++)r+=H[b]=u[k];Q=new Uint8Array(r);for(b=0;b<r;b++,k++)Q[b]=u[k];q+=17+r;(0===p>>4?f:h)[p&15]=W(H,Q)}break;case 65501:A();var K=A();break;case 65498:A();g=u[k++];b=[];for(q=0;q<g;q++){p=y.componentIds[u[k++]];var U=y.components[p];p=u[k++];U.huffmanTableDC=f[p>>4];U.huffmanTableAC=h[p&15];b.push(U)}q=u[k++];g=u[k++];p=u[k++];q=T(u,k,y,b,K,q,g,p>>4,p&15);k+=q;break;case 65535:255!==u[k]&&k--;break;default:if(255===u[k-3]&&192<=u[k-2]&&254>=u[k-2])k-=3;else throw new S("unknown marker "+
q.toString(16));}q=A()}this.width=y.samplesPerLine;this.height=y.scanLines;this.jfif=l;this.eof=k;this.adobe=e;this.components=[];for(q=0;q<y.components.length;q++){U=y.components[q];if(l=a[U.quantizationId])U.quantizationTable=l;this.components.push({output:V(y,U),scaleX:U.h/y.maxH,scaleY:U.v/y.maxV,blocksPerLine:U.blocksPerLine,blocksPerColumn:U.blocksPerColumn})}this.numComponents=this.components.length},_getLinearizedBlockData:function(u,A){var z=this.width/u,c=this.height/A,k,l,e=0,a=this.components.length,
h=u*A*a,f=new Uint8ClampedArray(h),q=new Uint32Array(u);for(l=0;l<a;l++){var b=this.components[l];var g=b.scaleX*z;var p=b.scaleY*c;e=l;var H=b.output;var y=b.blocksPerLine+1<<3;for(k=0;k<u;k++)b=0|k*g,q[k]=(b&4294967288)<<3|b&7;for(g=0;g<A;g++)for(b=0|g*p,b=y*(b&4294967288)|(b&7)<<3,k=0;k<u;k++)f[e]=H[b+q[k]],e+=a}if(A=this.decodeTransform)for(l=0;l<h;)for(u=b=0;b<a;b++,l++,u+=2)f[l]=(f[l]*A[u]>>8)+A[u+1];return f},_isColorConversionNeeded:function(){return this.adobe?!!this.adobe.transformCode:
3===this.numComponents?0===this.colorTransform?!1:!0:1===this.colorTransform?!0:!1},_convertYccToRgb:function(u){for(var A,z,c,k=0,l=u.length;k<l;k+=3)A=u[k],z=u[k+1],c=u[k+2],u[k]=A-179.456+1.402*c,u[k+1]=A+135.459-.344*z-.714*c,u[k+2]=A-226.816+1.772*z;return u},_convertYcckToRgb:function(u){for(var A,z,c,k,l=0,e=0,a=u.length;e<a;e+=4)A=u[e],z=u[e+1],c=u[e+2],k=u[e+3],u[l++]=-122.67195406894+z*(-6.60635669420364E-5*z+4.37130475926232E-4*c-5.4080610064599E-5*A+4.8449797120281E-4*k-.154362151871126)+
c*(-9.57964378445773E-4*c+8.17076911346625E-4*A-.00477271405408747*k+1.53380253221734)+A*(9.61250184130688E-4*A-.00266257332283933*k+.48357088451265)+k*(-3.36197177618394E-4*k+.484791561490776),u[l++]=107.268039397724+z*(2.19927104525741E-5*z-6.40992018297945E-4*c+6.59397001245577E-4*A+4.26105652938837E-4*k-.176491792462875)+c*(-7.78269941513683E-4*c+.00130872261408275*A+7.70482631801132E-4*k-.151051492775562)+A*(.00126935368114843*A-.00265090189010898*k+.25802910206845)+k*(-3.18913117588328E-4*k-
.213742400323665),u[l++]=-20.810012546947+z*(-5.70115196973677E-4*z-2.63409051004589E-5*c+.0020741088115012*A-.00288260236853442*k+.814272968359295)+c*(-1.53496057440975E-5*c-1.32689043961446E-4*A+5.60833691242812E-4*k-.195152027534049)+A*(.00174418132927582*A-.00255243321439347*k+.116935020465145)+k*(-3.43531996510555E-4*k+.24165260232407);return u},_convertYcckToCmyk:function(u){for(var A,z,c,k=0,l=u.length;k<l;k+=4)A=u[k],z=u[k+1],c=u[k+2],u[k]=434.456-A-1.402*c,u[k+1]=119.541-A+.344*z+.714*c,
u[k+2]=481.816-A-1.772*z;return u},_convertCmykToRgb:function(u){for(var A,z,c,k,l=0,e=1/255,a=0,h=u.length;a<h;a+=4)A=u[a]*e,z=u[a+1]*e,c=u[a+2]*e,k=u[a+3]*e,u[l++]=255+A*(-4.387332384609988*A+54.48615194189176*z+18.82290502165302*c+212.25662451639585*k-285.2331026137004)+z*(1.7149763477362134*z-5.6096736904047315*c-17.873870861415444*k-5.497006427196366)+c*(-2.5217340131683033*c-21.248923337353073*k+17.5119270841813)-k*(21.86122147463605*k+189.48180835922747),u[l++]=255+A*(8.841041422036149*A+60.118027045597366*
z+6.871425592049007*c+31.159100130055922*k-79.2970844816548)+z*(-15.310361306967817*z+17.575251261109482*c+131.35250912493976*k-190.9453302588951)+c*(4.444339102852739*c+9.8632861493405*k-24.86741582555878)-k*(20.737325471181034*k+187.80453709719578),u[l++]=255+A*(.8842522430003296*A+8.078677503112928*z+30.89978309703729*c-.23883238689178934*k-14.183576799673286)+z*(10.49593273432072*z+63.02378494754052*c+50.606957656360734*k-112.23884253719248)+c*(.03296041114873217*c+115.60384449646641*k-193.58209356861505)-
k*(22.33816807309886*k+180.12613974708367);return u},getData:function(u,A,z){if(4<this.numComponents)throw new S("Unsupported color mode");u=this._getLinearizedBlockData(u,A);if(1===this.numComponents&&z){z=u.length;A=new Uint8ClampedArray(3*z);for(var c=0,k=0;k<z;k++){var l=u[k];A[c++]=l;A[c++]=l;A[c++]=l}return A}if(3===this.numComponents&&this._isColorConversionNeeded())return this._convertYccToRgb(u);if(4===this.numComponents){if(this._isColorConversionNeeded())return z?this._convertYcckToRgb(u):
this._convertYcckToCmyk(u);if(z)return this._convertCmykToRgb(u)}return u}};return m}()})})(C);Y.JpegImage=C.exports})},"esri/chunks/TiffDecoder":function(){define("exports ../layers/support/rasterDatasets/byteStreamUtils ./Jpg ../layers/support/rasterFormats/Lzw ../layers/support/rasterFormats/TiffTags ../layers/support/rasterFormats/utils ./Zlib".split(" "),function(Y,C,x,S,m,W,T){function V(t,v){let J="unknown";3===t?J="f32":1===t?1===v?J="u1":2===v?J="u2":4===v?J="u4":8>=v?J="u8":16>=v?J="u16":
32>=v&&(J="u32"):2===t&&(8>=v?J="s8":16>=v?J="s16":32>=v&&(J="s32"));return J}function N(t){let v=null;switch(t?t.toLowerCase():"f32"){case "u1":case "u2":case "u4":case "u8":v=Uint8Array;break;case "u16":v=Uint16Array;break;case "u32":v=Uint32Array;break;case "s8":v=Int8Array;break;case "s16":v=Int16Array;break;case "s32":v=Int32Array;break;default:v=Float32Array}return v}function G(t,v){return{x:v[0]*t.x+v[1]*t.y+v[2],y:v[3]*t.x+v[4]*t.y+v[5]}}function u(t,v){var J;return null==(J=t.get(v))?void 0:
J.values}function A(t,v){var J;return null==(J=t.get(v))?void 0:J.values}function z(t,v){var J;return null==(J=t.get(v))?void 0:J.values[0]}function c(t,v){var J;return null==(J=t.get(v))?void 0:J.values[0]}function k(t,v,J,Z=0,n=m.TIFF_TAGS,d=4){var D=8===d;const R=D?f(new DataView(t,J,8),0,v):(new DataView(t,J,2)).getUint16(0,v),P=4+2*d;var X=D?8:2;D=X+R*P;if(J+D>t.byteLength)return{success:!1,ifd:null,nextIFD:null,requiredBufferSize:D};const B=J+D+4<=t.byteLength?q(new DataView(t,J+D,8===d?8:4),
0,v,8===d):null;J+=X;X=new Map;let E,L,O,M,ba;for(let ca=0;ca<R;ca++){var da=new DataView(t,J+P*ca,P);E=da.getUint16(0,v);O=da.getUint16(2,v);L=m.getTagName(E,n);const ha=[];2===d?(M=da.getUint16(4,v),ba=da.getUint16(6,v)):4===d?(M=da.getUint32(4,v),ba=da.getUint32(8,v)):8===d&&(M=q(da,4,v,!0),ba=q(da,12,v,!0),ha.push(da.getUint32(12,v)),ha.push(da.getUint32(16,v)));da={id:E,type:O,valueCount:M,valueOffset:ba,valueOffsets:ha,values:null};l(t,v,da,Z,!1,d);X.set(L,da)}return{success:!0,ifd:X,nextIFD:B,
requiredBufferSize:D}}function l(t,v,J,Z=0,n=!1,d=4){if(J.values)return!0;var D=J.type,R=J.valueCount,P=J.valueOffset;let X=[];var B=r[D],E=8*B,L=R*B,O=R*r[D]*8,M=8===d?64:32;d=J.valueOffsets;if(O>M&&L>(n?t.byteLength:t?t.byteLength-P+Z:0))return J.offlineOffsetSize=[P,L],J.values=null,!1;if(O<=M)if(v||(32>=M?P>>>=32-O:(t=null!=d&&d.length?d[0]:P>>>0,v=null!=d&&d.length?d[1]:Math.round((P-t)/4294967296),32>=O?(P=t>>>32-O,d[0]=P):(P=t*2**(32-O)+(v>>>32-O),d[0]=t,d[1]=v>>>32-O))),1===R&&E===M)X=[P];
else if(64===M)for(t=null!=d&&d.length?d[0]:P>>>0,P=null!=d&&d.length?d[1]:Math.round((P-t)/4294967296),v=t,B=32,t=1;t<=R;t++)L=32-E*t%32,B<E?(L=v<<L>>>32-B,O=P<<32-B>>>32-B,v=P,X.push(L+O*2**(E-B)),B-=32-(E-B)):(X.push(v<<L>>>32-E),B-=E),0===B&&(B=32,v=P);else for(t=1;t<=R;t++)X.push(P<<32-E*t>>>32-E);else for(P-=Z,n&&(P=0),R=P;R<P+L;R+=B){switch(D){case 1:E=(new DataView(t,R,1)).getUint8(0);break;case 2:E=(new DataView(t,R,1)).getUint8(0);break;case 3:E=(new DataView(t,R,2)).getUint16(0,v);break;
case 4:case 13:E=(new DataView(t,R,4)).getUint32(0,v);break;case 5:E=(new DataView(t,R,4)).getUint32(0,v)/(new DataView(t,R+4,4)).getUint32(0,v);break;case 6:E=(new DataView(t,R,1)).getInt8(0);break;case 7:E=(new DataView(t,R,1)).getUint8(0);break;case 8:E=(new DataView(t,R,2)).getInt16(0,v);break;case 9:E=(new DataView(t,R,4)).getInt32(0,v);break;case 10:E=(new DataView(t,R,4)).getInt32(0,v)/(new DataView(t,R+4,4)).getInt32(0,v);break;case 11:E=(new DataView(t,R,4)).getFloat32(0,v);break;case 12:E=
(new DataView(t,R,8)).getFloat64(0,v);break;case 16:case 18:E=f(new DataView(t,R,8),0,v);break;case 17:d=new DataView(t,R,8);O=(E=v)?d.getInt32(0,E):d.getUint32(0,E);d=E?d.getUint32(4,E):d.getInt32(4,E);M=0<=(E?O:d)?1:-1;E?O*=M:d*=M;E=M*(E?4294967296*d+O:4294967296*O+d);break;default:E=null}X.push(E)}if(2===D){D="";P=X;X=[];for(t=0;t<P.length;t++)0===P[t]&&""!==D?(X.push(D),D=""):D+=String.fromCharCode(P[t]);""===D&&0!==X.length||X.push(D)}J.values=X;return!0}function e(t){var v,J,Z=t[0];const n=
c(Z,"TILEWIDTH"),d=c(Z,"TILELENGTH"),D=c(Z,"IMAGEWIDTH"),R=c(Z,"IMAGELENGTH");var P=c(Z,"BITSPERSAMPLE");const X=c(Z,"SAMPLESPERPIXEL");var B=null!=(v=c(Z,"SAMPLEFORMAT"))?v:1;v=V(B,P);const E=a(Z);var L=u(Z,"GDAL_NODATA");let O;null!=L&&L.length&&(O=L.map(ia=>parseFloat(ia)),O.some(ia=>isNaN(ia))&&(O=null));var M=null!=(J=c(Z,"COMPRESSION"))?J:1;switch(M){case 1:J="NONE";break;case 2:case 3:case 4:case 32771:J="CCITT";break;case 5:J="LZW";break;case 6:case 7:J="JPEG";break;case 32773:J="PACKBITS";
break;case 8:case 32946:J="DEFLATE";break;case 34712:J="JPEG2000";break;case 34887:J="LERC";break;default:J=String(M)}L=!0;let ba="";Q.has(M)||(L=!1,ba+="unsupported tag compression "+M);3<B&&(L=!1,ba+="unsupported tag sampleFormat "+B);0!==P%8&&(L=!1,ba+="unsupported tag bitsPerSample "+P);P=z(Z,"GEOASCIIPARAMS");if(P){var da=(da=P.split("|").filter(ia=>-1<ia.indexOf("ESRI PE String \x3d "))[0])?da.replace("ESRI PE String \x3d ",""):"";da=da.startsWith("COMPD_CS")||da.startsWith("PROJCS")||da.startsWith("GEOGCS")?
{wkid:null,wkt:da}:null}B=A(Z,"GEOTIEPOINTS");P=A(Z,"GEOPIXELSCALE");M=A(Z,"GEOTRANSMATRIX");var ca=Z.has("GEOKEYDIRECTORY")?Z.get("GEOKEYDIRECTORY").data:null;Z=!1;if(ca){Z=2===c(ca,"GTRasterTypeGeoKey");var ha=c(ca,"GTModelTypeGeoKey");2===ha?(ca=c(ca,"GeographicTypeGeoKey"),1024<=ca&&32766>=ca&&(da={wkid:ca})):1===ha&&(ca=c(ca,"ProjectedCSTypeGeoKey"),1024<=ca&&32766>=ca&&(da={wkid:ca}))}let ma;P&&B&&6<=B.length?(ma=[P[0],0,B[3]-B[0]*P[0],0,-Math.abs(P[1]),B[4]-B[1]*P[1]],Z&&(ma[2]-=.5*ma[0]+.5*
ma[1],ma[5]-=.5*ma[3]+.5*ma[4])):M&&16===M.length&&(ma=Z?[M[0],M[1],M[3]-.5*M[0],M[4],M[5],M[7]-.5*M[5]]:[M[0],M[1],M[3],M[4],M[5],M[7]]);if(ma){Z=[{x:0,y:R},{x:0,y:0},{x:D,y:R},{x:D,y:0}];ca=M=Number.POSITIVE_INFINITY;let ia=ha=Number.NEGATIVE_INFINITY;for(let w=0;w<Z.length;w++)B=G(Z[w],ma),M=B.x>M?M:B.x,ha=B.x<ha?ha:B.x,ca=B.y>ca?ca:B.y,ia=B.y<ia?ia:B.y;da={xmin:M,xmax:ha,ymin:ca,ymax:ia,spatialReference:da}}else da={xmin:-.5,ymin:.5-R,xmax:D-.5,ymax:.5,spatialReference:da};Z=t.filter(ia=>1===
z(ia,"NEWSUBFILETYPE"));let pa,ra,fa;if(0<Z.length){pa=Math.round(Math.log(D/c(Z[0],"IMAGEWIDTH"))/Math.LN2);var na=Z[Z.length-1];ra=Math.round(Math.log(D/c(na,"IMAGEWIDTH"))/Math.LN2);fa=c(na,"TILEWIDTH");na=c(na,"TILELENGTH")}fa=0<ra?fa||n:null;na=0<ra?na||d:null;let qa;n&&(qa=[{maxCol:Math.ceil(D/n)-1,maxRow:Math.ceil(R/d)-1,minRow:0,minCol:0}],Z.forEach(ia=>{qa.push({maxCol:Math.ceil(c(ia,"IMAGEWIDTH")/c(ia,"TILEWIDTH"))-1,maxRow:Math.ceil(c(ia,"IMAGELENGTH")/c(ia,"TILELENGTH"))-1,minRow:0,minCol:0})}));
Z=z(t[0],"GDAL_METADATA");Z=F(Z);ba+=" "+p({width:D,height:R,tileWidth:n,tileHeight:d,planes:X,ifds:t});return{width:D,height:R,tileWidth:n,tileHeight:d,planes:X,isBSQ:E,pixelType:v,compression:J,noData:O,isSupported:L,message:ba,extent:da,affine:P?null:ma,firstPyramidLevel:pa,maximumPyramidLevel:ra,pyramidBlockWidth:fa,pyramidBlockHeight:na,tileBoundary:qa,metadata:Z}}function a(t,v){return(t=u(t,"PLANARCONFIGURATION"))?2===t[0]:v?v.isBSQ:!1}function h(t){const {littleEndian:v,isBigTiff:J,firstIFD:Z}=
b(t);var n=Z;const d=[];do if(n=g(t,v,n,0,m.TIFF_TAGS,J?8:4),n.success)d.push(n.ifd),n=n.nextIFD;else break;while(0<n);return{...e(d),littleEndian:v,isBigTiff:J,ifds:d}}function f(t,v,J){const Z=t.getUint32(v,J);t=t.getUint32(v+4,J);return J?4294967296*t+Z:4294967296*Z+t}function q(t,v,J,Z){return Z?f(t,v,J):t.getUint32(v,J)}function b(t){var v=new DataView(t,0,16),J=v.getUint16(0,!1);t=null;if(18761===J)t=!0;else if(19789===J)t=!1;else throw"unexpected endianess byte";var Z=v.getUint16(2,t);if(42!==
Z&&43!==Z)throw"unexpected tiff identifier";J=4;if(Z=43===Z){const n=v.getUint16(J,t);J+=2;if(8!==n)throw"unsupported bigtiff version";if(0!==v.getUint16(J,t))throw"unsupported bigtiff version";J+=2}v=q(v,J,t,Z);return{littleEndian:t,isBigTiff:Z,firstIFD:v}}function g(t,v,J,Z=0,n=m.TIFF_TAGS,d=4){J=k(t,v,J,Z,n,d);let D;const R=J.ifd;R&&(m.ifdTags.forEach((P,X)=>{R.has(X)&&(D=R.get(X),D.data=k(t,v,D.valueOffset-Z,Z,P).ifd)}),R.has("GEOKEYDIRECTORY")&&(D=R.get("GEOKEYDIRECTORY"),(n=D.values)&&4<n.length&&
(n=n[0]+"."+n[1]+"."+n[2],D.data=k(t,v,D.valueOffset+6-Z,Z,m.GEO_KEYS,2).ifd,D.data&&D.data.set("GEOTIFFVersion",{id:0,type:2,valueCount:1,valueOffset:null,values:[n]}))),R.has("XMP")&&(D=R.get("XMP"),n=D.values,"number"===typeof n[0]&&7===D.type&&(D.values=[C.bytesToUTF8(new Uint8Array(n))])));return J}function p(t){const {width:v,height:J,tileHeight:Z,tileWidth:n}=t,d=t.planes,D=n?n*Z:v*J;t=c(t.ifds[0],"BITSPERSAMPLE");let R="";D*d>2**30/(8<t?t/8:1)&&(R=n?"tiled tiff exceeding 1 gigabits per tile is not supported":
"scanline tiff exceeding 1 gigabits is not supported");return R}var H={exports:{}};(function(t){(function(v){v=v();void 0!==v&&(t.exports=v)})(function(){var v={unstuff:function(n,d,D,R,P,X,B,E){var L=(1<<D)-1,O=0,M,ba=0;n[n.length-1]<<=8*(4*n.length-Math.ceil(D*R/8));if(P)for(M=0;M<R;M++){if(0===ba){var da=n[O++];ba=32}if(ba>=D){var ca=da>>>ba-D&L;ba-=D}else ba=D-ba,ca=(da&L)<<ba&L,da=n[O++],ba=32-ba,ca+=da>>>ba;d[M]=P[ca]}else for(P=Math.ceil((E-X)/B),M=0;M<R;M++)0===ba&&(da=n[O++],ba=32),ba>=D?
(ca=da>>>ba-D&L,ba-=D):(ba=D-ba,ca=(da&L)<<ba&L,da=n[O++],ba=32-ba,ca+=da>>>ba),d[M]=ca<P?X+ca*B:E},unstuffLUT:function(n,d,D,R,P,X){var B=(1<<d)-1,E=0,L=0,O=0,M=O=0,ba=[];n[n.length-1]<<=8*(4*n.length-Math.ceil(d*D/8));var da=Math.ceil((X-R)/P);for(L=0;L<D;L++){if(0===O){var ca=n[E++];O=32}O>=d?(M=ca>>>O-d&B,O-=d):(O=d-O,M=(ca&B)<<O&B,ca=n[E++],O=32-O,M+=ca>>>O);ba[L]=M<da?R+M*P:X}ba.unshift(R);return ba},unstuff2:function(n,d,D,R,P,X,B,E){var L=(1<<D)-1,O=0,M,ba=0,da=0;if(P)for(M=0;M<R;M++){if(0===
ba){var ca=n[O++];ba=32;da=0}if(ba>=D){var ha=ca>>>da&L;ba-=D;da+=D}else{var ma=D-ba;ha=ca>>>da&L;ca=n[O++];ba=32-ma;ha|=(ca&(1<<ma)-1)<<D-ma;da=ma}d[M]=P[ha]}else for(P=Math.ceil((E-X)/B),M=0;M<R;M++)0===ba&&(ca=n[O++],ba=32,da=0),ba>=D?(ha=ca>>>da&L,ba-=D,da+=D):(ma=D-ba,ha=ca>>>da&L,ca=n[O++],ba=32-ma,ha|=(ca&(1<<ma)-1)<<D-ma,da=ma),d[M]=ha<P?X+ha*B:E;return d},unstuffLUT2:function(n,d,D,R,P,X){var B=(1<<d)-1,E=0,L=0,O=0,M=0,ba=0,da=0,ca=[],ha=Math.ceil((X-R)/P);for(L=0;L<D;L++){if(0===M){var ma=
n[E++];M=32;da=0}M>=d?(ba=ma>>>da&B,M-=d,da+=d):(O=d-M,ba=ma>>>da&B,ma=n[E++],M=32-O,ba|=(ma&(1<<O)-1)<<d-O,da=O);ca[L]=ba<ha?R+ba*P:X}ca.unshift(R);return ca},originalUnstuff:function(n,d,D,R){var P=(1<<D)-1,X=0,B,E=0;n[n.length-1]<<=8*(4*n.length-Math.ceil(D*R/8));for(B=0;B<R;B++){if(0===E){var L=n[X++];E=32}if(E>=D){var O=L>>>E-D&P;E-=D}else E=D-E,O=(L&P)<<E&P,L=n[X++],E=32-E,O+=L>>>E;d[B]=O}return d},originalUnstuff2:function(n,d,D,R){var P=(1<<D)-1,X=0,B,E=0,L=0;for(B=0;B<R;B++){if(0===E){var O=
n[X++];E=32;L=0}if(E>=D){var M=O>>>L&P;E-=D;L+=D}else{var ba=D-E;M=O>>>L&P;O=n[X++];E=32-ba;M|=(O&(1<<ba)-1)<<D-ba;L=ba}d[B]=M}return d}},J={HUFFMAN_LUT_BITS_MAX:12,computeChecksumFletcher32:function(n){for(var d=65535,D=65535,R=n.length,P=Math.floor(R/2),X=0;P;){var B=359<=P?359:P;P-=B;do d+=n[X++]<<8,D+=d+=n[X++];while(--B);d=(d&65535)+(d>>>16);D=(D&65535)+(D>>>16)}R&1&&(D+=d+=n[X]<<8);return((D&65535)+(D>>>16)<<16|(d&65535)+(d>>>16))>>>0},readHeaderInfo:function(n,d){var D=d.ptr,R=new Uint8Array(n,
D,6),P={};P.fileIdentifierString=String.fromCharCode.apply(null,R);if(0!==P.fileIdentifierString.lastIndexOf("Lerc2",0))throw"Unexpected file identifier string (expect Lerc2 ): "+P.fileIdentifierString;D+=6;R=new DataView(n,D,8);var X=R.getInt32(0,!0);P.fileVersion=X;D+=4;3<=X&&(P.checksum=R.getUint32(4,!0),D+=4);R=new DataView(n,D,12);P.height=R.getUint32(0,!0);P.width=R.getUint32(4,!0);D+=8;4<=X?(P.numDims=R.getUint32(8,!0),D+=4):P.numDims=1;R=new DataView(n,D,40);P.numValidPixel=R.getUint32(0,
!0);P.microBlockSize=R.getInt32(4,!0);P.blobSize=R.getInt32(8,!0);P.imageType=R.getInt32(12,!0);P.maxZError=R.getFloat64(16,!0);P.zMin=R.getFloat64(24,!0);P.zMax=R.getFloat64(32,!0);D+=40;d.headerInfo=P;d.ptr=D;if(3<=X&&(n=this.computeChecksumFletcher32(new Uint8Array(n,D-(4<=X?52:48),P.blobSize-14)),n!==P.checksum))throw"Checksum failed.";return!0},checkMinMaxRanges:function(n,d){var D=d.headerInfo,R=this.getDataTypeArray(D.imageType),P=D.numDims*this.getDataTypeSize(D.imageType),X=this.readSubArray(n,
d.ptr,R,P);n=this.readSubArray(n,d.ptr+P,R,P);d.ptr+=2*P;P=!0;for(d=0;d<D.numDims;d++)if(X[d]!==n[d]){P=!1;break}D.minValues=X;D.maxValues=n;return P},readSubArray:function(n,d,D,R){if(D===Uint8Array)n=new Uint8Array(n,d,R);else{var P=new ArrayBuffer(R);(new Uint8Array(P)).set(new Uint8Array(n,d,R));n=new D(P)}return n},readMask:function(n,d){var D=d.ptr,R=d.headerInfo,P=R.width*R.height,X=R.numValidPixel,B=new DataView(n,D,4);R={};R.numBytes=B.getUint32(0,!0);D+=4;if((0===X||P===X)&&0!==R.numBytes)throw"invalid mask";
if(0===X)X=new Uint8Array(Math.ceil(P/8)),R.bitset=X,B=new Uint8Array(P),d.pixels.resultMask=B,D+=R.numBytes;else if(0<R.numBytes){X=new Uint8Array(Math.ceil(P/8));B=new DataView(n,D,R.numBytes);n=B.getInt16(0,!0);var E=2,L=0,O=0;do{if(0<n)for(;n--;)X[L++]=B.getUint8(E++);else for(O=B.getUint8(E++),n=-n;n--;)X[L++]=O;n=B.getInt16(E,!0);E+=2}while(E<R.numBytes);if(-32768!==n||L<X.length)throw"Unexpected end of mask RLE encoding";B=new Uint8Array(P);for(E=E=n=0;E<P;E++)E&7?(n=X[E>>3],n<<=E&7):n=X[E>>
3],n&128&&(B[E]=1);d.pixels.resultMask=B;R.bitset=X;D+=R.numBytes}d.ptr=D;d.mask=R;return!0},readDataOneSweep:function(n,d,D,R){var P=d.ptr,X=d.headerInfo,B=X.numDims,E=X.width*X.height;X=X.numValidPixel*J.getDataTypeSize(X.imageType)*B;var L=d.pixels.resultMask;if(D===Uint8Array)n=new Uint8Array(n,P,X);else{var O=new ArrayBuffer(X);(new Uint8Array(O)).set(new Uint8Array(n,P,X));n=new D(O)}if(n.length===E*B)d.pixels.resultPixels=R?J.swapDimensionOrder(n,E,B,D,!0):n;else{d.pixels.resultPixels=new D(E*
B);var M=O=D=0,ba=0;if(1<B)if(R)for(O=0;O<E;O++){if(L[O])for(ba=O,M=0;M<B;M++,ba+=E)d.pixels.resultPixels[ba]=n[D++]}else for(O=0;O<E;O++){if(L[O])for(ba=O*B,M=0;M<B;M++)d.pixels.resultPixels[ba+M]=n[D++]}else for(O=0;O<E;O++)L[O]&&(d.pixels.resultPixels[O]=n[D++])}d.ptr=P+X;return!0},readHuffmanTree:function(n,d){var D=this.HUFFMAN_LUT_BITS_MAX,R=new DataView(n,d.ptr,16);d.ptr+=16;if(2>R.getInt32(0,!0))throw"unsupported Huffman version";var P=R.getInt32(4,!0),X=R.getInt32(8,!0);R=R.getInt32(12,!0);
if(X>=R)return!1;var B=new Uint32Array(R-X);J.decodeBits(n,d,B);var E=[],L;for(L=X;L<R;L++){var O=L-(L<P?0:P);E[O]={first:B[L-X],second:null}}L=n.byteLength-d.ptr;B=new ArrayBuffer(4*Math.ceil(L/4));(new Uint8Array(B)).set(new Uint8Array(n,d.ptr,L));n=new Uint32Array(B);d=0;B=0;var M=n[0];for(L=X;L<R;L++){O=L-(L<P?0:P);var ba=E[O].first;0<ba&&(E[O].second=M<<d>>>32-ba,32-d>=ba?(d+=ba,32===d&&(d=0,B++,M=n[B])):(d+=ba-32,B++,M=n[B],E[O].second|=M>>>32-d))}var da=M=0,ca=new Z;for(L=0;L<E.length;L++)void 0!==
E[L]&&(M=Math.max(M,E[L].first));da=M>=D?D:M;D=[];var ha;for(L=X;L<R;L++)if(O=L-(L<P?0:P),ba=E[O].first,0<ba)if(X=[ba,O],ba<=da){O=E[O].second<<da-ba;var ma=1<<da-ba;for(ba=0;ba<ma;ba++)D[O|ba]=X}else for(O=E[O].second,ma=ca,--ba;0<=ba;ba--)(ha=O>>>ba&1)?(ma.right||(ma.right=new Z),ma=ma.right):(ma.left||(ma.left=new Z),ma=ma.left),0!==ba||ma.val||(ma.val=X[1]);return{decodeLut:D,numBitsLUTQick:da,numBitsLUT:M,tree:ca,stuffedData:n,srcPtr:B,bitPos:d}},readHuffman:function(n,d,D,R){var P=d.headerInfo.numDims,
X=d.headerInfo.height,B=d.headerInfo.width,E=B*X,L=this.readHuffmanTree(n,d);n=L.decodeLut;var O=L.tree,M=L.stuffedData,ba=L.srcPtr,da=L.bitPos,ca=L.numBitsLUTQick;L=L.numBitsLUT;var ha=0===d.headerInfo.imageType?128:0,ma=d.pixels.resultMask,pa,ra,fa,na,qa,ia,w=0;0<da&&(ba++,da=0);var I=M[ba],aa=1===d.encodeMode,ea=new D(E*P),ja=ea,ka;if(2>P||aa)for(ka=0;ka<P;ka++)if(1<P&&(ja=new D(ea.buffer,E*ka,E),w=0),d.headerInfo.numValidPixel===B*X)for(fa=qa=0;fa<X;fa++)for(na=0;na<B;na++,qa++){var oa=0;var la=
pa=I<<da>>>32-ca;32-da<ca&&(la=pa|=M[ba+1]>>>64-da-ca);if(n[la])oa=n[la][1],da+=n[la][0];else for(la=pa=I<<da>>>32-L,32-da<L&&(la=pa|=M[ba+1]>>>64-da-L),la=O,ia=0;ia<L;ia++)if(la=(ra=pa>>>L-ia-1&1)?la.right:la.left,!la.left&&!la.right){oa=la.val;da=da+ia+1;break}32<=da&&(da-=32,ba++,I=M[ba]);oa-=ha;aa?(oa=0<na?oa+w:0<fa?oa+ja[qa-B]:oa+w,oa&=255,w=ja[qa]=oa):ja[qa]=oa}else for(fa=qa=0;fa<X;fa++)for(na=0;na<B;na++,qa++){if(ma[qa]){oa=0;la=pa=I<<da>>>32-ca;32-da<ca&&(la=pa|=M[ba+1]>>>64-da-ca);if(n[la])oa=
n[la][1],da+=n[la][0];else for(la=pa=I<<da>>>32-L,32-da<L&&(la=pa|=M[ba+1]>>>64-da-L),la=O,ia=0;ia<L;ia++)if(la=(ra=pa>>>L-ia-1&1)?la.right:la.left,!la.left&&!la.right){oa=la.val;da=da+ia+1;break}32<=da&&(da-=32,ba++,I=M[ba]);oa-=ha;aa?(oa=0<na&&ma[qa-1]?oa+w:0<fa&&ma[qa-B]?oa+ja[qa-B]:oa+w,oa&=255,w=ja[qa]=oa):ja[qa]=oa}}else for(fa=qa=0;fa<X;fa++)for(na=0;na<B;na++)if(qa=fa*B+na,!ma||ma[qa])for(ka=0;ka<P;ka++,qa+=E){oa=0;la=pa=I<<da>>>32-ca;32-da<ca&&(la=pa|=M[ba+1]>>>64-da-ca);if(n[la])oa=n[la][1],
da+=n[la][0];else for(la=pa=I<<da>>>32-L,32-da<L&&(la=pa|=M[ba+1]>>>64-da-L),la=O,ia=0;ia<L;ia++)if(la=(ra=pa>>>L-ia-1&1)?la.right:la.left,!la.left&&!la.right){oa=la.val;da=da+ia+1;break}32<=da&&(da-=32,ba++,I=M[ba]);oa-=ha;ja[qa]=oa}d.ptr=d.ptr+4*(ba+1)+(0<da?4:0);d.pixels.resultPixels=ea;1<P&&!R&&(d.pixels.resultPixels=J.swapDimensionOrder(ea,E,P,D))},decodeBits:function(n,d,D,R,P){var X=d.headerInfo,B=X.fileVersion,E=0,L=new DataView(n,d.ptr,5<=n.byteLength-d.ptr?5:n.byteLength-d.ptr),O=L.getUint8(0);
E++;var M=O>>6,ba=0===M?4:3-M,da=0<(O&32)?!0:!1;M=O&31;O=0;if(1===ba)O=L.getUint8(E),E++;else if(2===ba)O=L.getUint16(E,!0),E+=2;else if(4===ba)O=L.getUint32(E,!0),E+=4;else throw"Invalid valid pixel count type";ba=2*X.maxZError;P=1<X.numDims?X.maxValues[P]:X.zMax;if(da){d.counter.lut++;da=L.getUint8(E);E++;X=Math.ceil((da-1)*M/8);var ca=Math.ceil(X/4);ca=new ArrayBuffer(4*ca);var ha=new Uint8Array(ca);d.ptr+=E;ha.set(new Uint8Array(n,d.ptr,X));E=new Uint32Array(ca);d.ptr+=X;for(L=0;da-1>>>L;)L++;
X=Math.ceil(O*L/8);ca=Math.ceil(X/4);ca=new ArrayBuffer(4*ca);ha=new Uint8Array(ca);ha.set(new Uint8Array(n,d.ptr,X));n=new Uint32Array(ca);d.ptr+=X;d=3<=B?v.unstuffLUT2(E,M,da-1,R,ba,P):v.unstuffLUT(E,M,da-1,R,ba,P);3<=B?v.unstuff2(n,D,L,O,d):v.unstuff(n,D,L,O,d)}else d.counter.bitstuffer++,L=M,d.ptr+=E,0<L&&(X=Math.ceil(O*L/8),ca=Math.ceil(X/4),ca=new ArrayBuffer(4*ca),ha=new Uint8Array(ca),ha.set(new Uint8Array(n,d.ptr,X)),n=new Uint32Array(ca),d.ptr+=X,3<=B?null==R?v.originalUnstuff2(n,D,L,O):
v.unstuff2(n,D,L,O,!1,R,ba,P):null==R?v.originalUnstuff(n,D,L,O):v.unstuff(n,D,L,O,!1,R,ba,P))},readTiles:function(n,d,D,R){var P=d.headerInfo,X=P.width,B=P.height,E=X*B,L=P.microBlockSize,O=P.imageType,M=J.getDataTypeSize(O),ba=Math.ceil(X/L),da=Math.ceil(B/L);d.pixels.numBlocksY=da;d.pixels.numBlocksX=ba;var ca=d.pixels.ptr=0,ha=0,ma=0,pa=0,ra=0,fa=0,na=0,qa=0,ia=ca=0,w=0,I=0,aa=na=0;na=na=0;var ea=new D(L*L);B=B%L||L;var ja=X%L||L,ka=P.numDims,oa,la=d.pixels.resultMask,sa=d.pixels.resultPixels,
va=5<=P.fileVersion?14:15,za=P.zMax;for(ma=0;ma<da;ma++)for(ra=ma!==da-1?L:B,pa=0;pa<ba;pa++)for(fa=pa!==ba-1?L:ja,w=ma*X*L+pa*L,I=X-fa,oa=0;oa<ka;oa++){1<ka?(aa=sa,w=ma*X*L+pa*L,sa=new D(d.pixels.resultPixels.buffer,E*oa*M,E),za=P.maxValues[oa]):aa=null;na=n.byteLength-d.ptr;ha=new DataView(n,d.ptr,Math.min(10,na));var ua={};na=0;qa=ha.getUint8(0);na++;var ta=5<=P.fileVersion?qa&4:0;ca=qa>>6&255;ia=qa>>2&va;if(ia!==(pa*L>>3&va))throw"integrity issue";if(ta&&0===oa)throw"integrity issue";qa&=3;if(3<
qa)throw d.ptr+=na,"Invalid block encoding ("+qa+")";if(2===qa){if(ta)if(la)for(ca=0;ca<ra;ca++)for(ha=0;ha<fa;ha++)la[w]&&(sa[w]=aa[w]),w++;else for(ca=0;ca<ra;ca++)for(ha=0;ha<fa;ha++)sa[w]=aa[w],w++;d.counter.constant++;d.ptr+=na}else if(0===qa){if(ta)throw"integrity issue";d.counter.uncompressed++;d.ptr+=na;na=ra*fa*M;aa=n.byteLength-d.ptr;na=na<aa?na:aa;aa=new ArrayBuffer(0===na%M?na:na+M-na%M);ta=new Uint8Array(aa);ta.set(new Uint8Array(n,d.ptr,na));aa=new D(aa);na=0;if(la)for(ca=0;ca<ra;ca++){for(ha=
0;ha<fa;ha++)la[w]&&(sa[w]=aa[na++]),w++;w+=I}else for(ca=0;ca<ra;ca++){for(ha=0;ha<fa;ha++)sa[w++]=aa[na++];w+=I}d.ptr+=na*M}else if(ca=J.getDataTypeUsed(ta&&6>O?4:O,ca),ua=J.getOnePixel(ua,na,ca,ha),na+=J.getDataTypeSize(ca),3===qa)if(d.ptr+=na,d.counter.constantoffset++,la)for(ca=0;ca<ra;ca++){for(ha=0;ha<fa;ha++)la[w]&&(sa[w]=ta?Math.min(za,aa[w]+ua):ua),w++;w+=I}else for(ca=0;ca<ra;ca++){for(ha=0;ha<fa;ha++)sa[w]=ta?Math.min(za,aa[w]+ua):ua,w++;w+=I}else if(d.ptr+=na,J.decodeBits(n,d,ea,ua,oa),
na=0,ta)if(la)for(ca=0;ca<ra;ca++){for(ha=0;ha<fa;ha++)la[w]&&(sa[w]=ea[na++]+aa[w]),w++;w+=I}else for(ca=0;ca<ra;ca++){for(ha=0;ha<fa;ha++)sa[w]=ea[na++]+aa[w],w++;w+=I}else if(la)for(ca=0;ca<ra;ca++){for(ha=0;ha<fa;ha++)la[w]&&(sa[w]=ea[na++]),w++;w+=I}else for(ca=0;ca<ra;ca++){for(ha=0;ha<fa;ha++)sa[w++]=ea[na++];w+=I}}1<ka&&!R&&(d.pixels.resultPixels=J.swapDimensionOrder(d.pixels.resultPixels,E,ka,D))},formatFileInfo:function(n){return{fileIdentifierString:n.headerInfo.fileIdentifierString,fileVersion:n.headerInfo.fileVersion,
imageType:n.headerInfo.imageType,height:n.headerInfo.height,width:n.headerInfo.width,numValidPixel:n.headerInfo.numValidPixel,microBlockSize:n.headerInfo.microBlockSize,blobSize:n.headerInfo.blobSize,maxZError:n.headerInfo.maxZError,pixelType:J.getPixelType(n.headerInfo.imageType),eofOffset:n.eofOffset,mask:n.mask?{numBytes:n.mask.numBytes}:null,pixels:{numBlocksX:n.pixels.numBlocksX,numBlocksY:n.pixels.numBlocksY,maxValue:n.headerInfo.zMax,minValue:n.headerInfo.zMin,noDataValue:n.noDataValue}}},
constructConstantSurface:function(n,d){var D=n.headerInfo.zMax,R=n.headerInfo.zMin,P=n.headerInfo.maxValues,X=n.headerInfo.numDims,B=n.headerInfo.height*n.headerInfo.width,E=0,L=0,O=0,M=n.pixels.resultMask;n=n.pixels.resultPixels;if(M)if(1<X)if(d)for(E=0;E<X;E++)for(O=E*B,D=P[E],L=0;L<B;L++)M[L]&&(n[O+L]=D);else for(L=0;L<B;L++){if(M[L])for(O=L*X,E=0;E<X;E++)n[O+X]=P[E]}else for(L=0;L<B;L++)M[L]&&(n[L]=D);else if(1<X&&R!==D)if(d)for(E=0;E<X;E++)for(O=E*B,D=P[E],L=0;L<B;L++)n[O+L]=D;else for(L=0;L<
B;L++)for(O=L*X,E=0;E<X;E++)n[O+E]=P[E];else for(L=0;L<B*X;L++)n[L]=D},getDataTypeArray:function(n){switch(n){case 0:n=Int8Array;break;case 1:n=Uint8Array;break;case 2:n=Int16Array;break;case 3:n=Uint16Array;break;case 4:n=Int32Array;break;case 5:n=Uint32Array;break;case 6:n=Float32Array;break;case 7:n=Float64Array;break;default:n=Float32Array}return n},getPixelType:function(n){switch(n){case 0:n="S8";break;case 1:n="U8";break;case 2:n="S16";break;case 3:n="U16";break;case 4:n="S32";break;case 5:n=
"U32";break;case 6:n="F32";break;case 7:n="F64";break;default:n="F32"}return n},isValidPixelValue:function(n,d){if(null==d)return!1;switch(n){case 0:n=-128<=d&&127>=d;break;case 1:n=0<=d&&255>=d;break;case 2:n=-32768<=d&&32767>=d;break;case 3:n=0<=d&&65536>=d;break;case 4:n=-2147483648<=d&&2147483647>=d;break;case 5:n=0<=d&&4294967296>=d;break;case 6:n=-3.4027999387901484E38<=d&&3.4027999387901484E38>=d;break;case 7:n=4.9E-324<=d&&1.7976931348623157E308>=d;break;default:n=!1}return n},getDataTypeSize:function(n){var d=
0;switch(n){case 0:case 1:d=1;break;case 2:case 3:d=2;break;case 4:case 5:case 6:d=4;break;case 7:d=8;break;default:d=n}return d},getDataTypeUsed:function(n,d){var D=n;switch(n){case 2:case 4:D=n-d;break;case 3:case 5:D=n-2*d;break;case 6:D=0===d?n:1===d?2:1;break;case 7:D=0===d?n:n-2*d+1;break;default:D=n}return D},getOnePixel:function(n,d,D,R){n=0;switch(D){case 0:n=R.getInt8(d);break;case 1:n=R.getUint8(d);break;case 2:n=R.getInt16(d,!0);break;case 3:n=R.getUint16(d,!0);break;case 4:n=R.getInt32(d,
!0);break;case 5:n=R.getUInt32(d,!0);break;case 6:n=R.getFloat32(d,!0);break;case 7:n=R.getFloat64(d,!0);break;default:throw"the decoder does not understand this pixel type";}return n},swapDimensionOrder:function(n,d,D,R,P){var X=0,B=0,E=0,L=0,O=n;if(1<D)if(O=new R(d*D),P)for(X=0;X<d;X++)for(L=X,E=0;E<D;E++,L+=d)O[L]=n[B++];else for(X=0;X<d;X++)for(L=X,E=0;E<D;E++,L+=d)O[B++]=n[L];return O}},Z=function(n,d,D){this.val=n;this.left=d;this.right=D};return{decode:function(n,d){d=d||{};var D=d.noDataValue,
R=0,P={};P.ptr=d.inputOffset||0;P.pixels={};if(J.readHeaderInfo(n,P)){R=P.headerInfo;var X=R.fileVersion,B=J.getDataTypeArray(R.imageType);if(5<X)throw"unsupported lerc version 2."+X;J.readMask(n,P);R.numValidPixel===R.width*R.height||P.pixels.resultMask||(P.pixels.resultMask=d.maskData);var E=R.width*R.height;P.pixels.resultPixels=new B(E*R.numDims);P.counter={onesweep:0,uncompressed:0,lut:0,bitstuffer:0,constant:0,constantoffset:0};var L=!d.returnPixelInterleavedDims;if(0!==R.numValidPixel)if(R.zMax===
R.zMin)J.constructConstantSurface(P,L);else if(4<=X&&J.checkMinMaxRanges(n,P))J.constructConstantSurface(P,L);else{var O=new DataView(n,P.ptr,2),M=O.getUint8(0);P.ptr++;if(M)J.readDataOneSweep(n,P,B,L);else if(1<X&&1>=R.imageType&&1E-5>Math.abs(R.maxZError-.5)){O=O.getUint8(1);P.ptr++;P.encodeMode=O;if(2<O||4>X&&1<O)throw"Invalid Huffman flag "+O;O?J.readHuffman(n,P,B,L):J.readTiles(n,P,B,L)}else J.readTiles(n,P,B,L)}P.eofOffset=P.ptr;d.inputOffset?(n=P.headerInfo.blobSize+d.inputOffset-P.ptr,1<=
Math.abs(n)&&(P.eofOffset=d.inputOffset+P.headerInfo.blobSize)):(n=P.headerInfo.blobSize-P.ptr,1<=Math.abs(n)&&(P.eofOffset=P.headerInfo.blobSize));n={width:R.width,height:R.height,pixelData:P.pixels.resultPixels,minValue:R.zMin,maxValue:R.zMax,validPixelCount:R.numValidPixel,dimCount:R.numDims,dimStats:{minValues:R.minValues,maxValues:R.maxValues},maskData:P.pixels.resultMask};if(P.pixels.resultMask&&J.isValidPixelValue(R.imageType,D)){X=P.pixels.resultMask;for(R=0;R<E;R++)X[R]||(n.pixelData[R]=
D);n.noDataValue=D}P.noDataValue=D;d.returnFileInfo&&(n.fileInfo=J.formatFileInfo(P));return n}},getBandCount:function(n){for(var d=0,D=0,R={ptr:0,pixels:{}};D<n.byteLength-58;)J.readHeaderInfo(n,R),D+=R.headerInfo.blobSize,d++,R.ptr=D;return d}}})})(H);var y=H.exports;const r=[0,1,1,2,4,8,1,1,2,4,8,4,8,-1,-1,-1,8,8,8],Q=new Set([1,5,6,7,8,34712,34887]),K=function(t,v,J,Z,n){var d,D,R=W.isPlatformLittleEndian===v,P=c(J,"BITSPERSAMPLE");const X=null!=(d=c(J,"SAMPLEFORMAT"))?d:1;d=V(X,P);P=null!=(D=
c(J,"COMPRESSION"))?D:1;D=N(d);if(34887===P)return y.decode(t,{inputOffset:Z,returnFileInfo:!0}).pixelData;if(1===P){var B=t.slice(Z,Z+n);var E=new Uint8Array(B)}else if(8===P||32946===P)E=new Uint8Array(t,Z,n),E=new T.Zlib(E),t=E.getBytes(),B=new ArrayBuffer(t.length),E=new Uint8Array(B),E.set(t);else if(6===P)E=new Uint8Array(t,Z,n),B=new x.JpegImage,B.parse(E),t=B.getData(B.width,B.height,!0),B=new ArrayBuffer(t.length),E=new Uint8Array(B),E.set(t);else if(7===P){v=J.get("JPEGTABLES").values;B=
v.length-2;E=new Uint8Array(B+n-2);for(J=0;J<B;J++)E[J]=v[J];t=new Uint8Array(t,Z+2,n-2);for(Z=0;Z<t.length;Z++)E[B+Z]=t[Z];B=new x.JpegImage;B.parse(E);t=B.getData(B.width,B.height,!0);B=new ArrayBuffer(t.length);E=new Uint8Array(B);E.set(t)}else 5===P&&(E=S.decode(t,Z,n,v),B=E.buffer);if("u8"!==d&&"s8"!==d&&!R)switch(B=new ArrayBuffer(E.length),R=new Uint8Array(B),d){case "u16":case "s16":for(d=0;d<E.length;d+=2)R[d]=E[d+1],R[d+1]=E[d];break;case "u32":case "s32":case "f32":for(d=0;d<E.length;d+=
4)R[d]=E[d+3],R[d+1]=E[d+2],R[d+2]=E[d+1],R[d+3]=E[d]}return new D(B)},U=function(t,v,J){if(!(t&&0<t.length&&v&&J))return null;let Z,n,d;const D=t[0].length,R=t.length,P=new Uint8Array(D);for(let B=0;B<R;B++)if(Z=t[B],n=v[B],d=J[B],0===B)for(var X=0;X<D;X++)P[X]=Z[X]<n||Z[X]>d?0:1;else for(X=0;X<D;X++)P[X]&&(P[X]=Z[X]<n||Z[X]>d?0:1);return P},F=function(t){if(!t)return null;var v=t.match(/<Item(.*?)Item>/gi);if(!v||0===v.length)return null;t=new Map;var J;for(var Z=0;Z<v.length;Z++){var n=v[Z];var d=
n.slice(6,n.indexOf("\x3e"));var D=n.indexOf("sample\x3d");-1<D&&(J=n.slice(D+8,n.indexOf('"',D+8)));D=n.indexOf("name\x3d");-1<D&&(d=n.slice(D+6,n.indexOf('"',D+6)));d&&(n=n.slice(n.indexOf("\x3e")+1,n.indexOf("\x3c/Item\x3e")).trim(),null!=J?t.has(d)?t.get(d)[J]=n:t.set(d,[n]):t.set(d,n));J=null}v=t.get("STATISTICS_MINIMUM");d=t.get("STATISTICS_MAXIMUM");Z=t.get("STATISTICS_MEAN");n=t.get("STATISTICS_STDDEV");J=null;if(v&&d)for(J=[],D=0;D<v.length;D++)J.push({min:parseFloat(v[D]),max:parseFloat(d[D]),
avg:Z&&parseFloat(Z[D]),stddev:n&&parseFloat(n[D])});d=t.get("BandName");Z=t.get("WavelengthMin");n=t.get("WavelengthMax");v=null;if(d)for(v=[],D=0;D<d.length;D++)v.push({BandName:d[D],WavelengthMin:Z&&parseFloat(Z[D]),WavelengthMax:n&&parseFloat(n[D])});d=t.get("DataType");return{statistics:J,bandProperties:v,dataType:d,rawMetadata:t}};Y.Lerc2Codec=y;Y.decode=function(t,v=0,J){J=J||h(t);const {ifds:Z,noData:n}=J;if(0===Z.length)throw"no valid image file directory";var d=p(J);if(d)throw d;d=-1===
v?Z[Z.length-1]:Z[v];v=n?n[0]:null;if(J.tileWidth){var D=J,R,P=A(d,"TILEOFFSETS");if(void 0===P)d=null;else{J=A(d,"TILEBYTECOUNTS");var {width:X,height:B,pixelType:E,tileWidth:L,tileHeight:O}=e([d]),M=a(d,D),ba=D.planes,da=X*B,ca=c(d,"BITSPERSAMPLE"),ha=34887===(null!=(R=c(d,"COMPRESSION"))?R:1),ma=N(E);R=[];for(var pa=0;pa<ba;pa++)R.push(new ma(da));var ra,fa;da=Math.ceil(X/L);if(0===ca%8)if(ha&&M&&1<ba)for(M=Math.round(P.length/ba),ca=0;ca<M;ca++){var na=Math.floor(ca/da)*O;var qa=ca%da*L;ma=na*
X+qa;for(ha=0;ha<ba;ha++){pa=ca*ba+ha;pa=K(t,D.littleEndian,d,P[pa],J[pa]);var ia=0;var w=ma;var I=Math.min(L,X-qa);var aa=Math.min(O,B-na);var ea=R[ha];for(ra=0;ra<aa;ra++)for(w=ma+ra*X,ia=ra*L,fa=0;fa<I;fa++,w++,ia++)ea[w]=pa[ia]}}else for(ca=0;ca<P.length;ca++)for(na=Math.floor(ca/da)*O,qa=ca%da*L,ma=na*X+qa,pa=K(t,D.littleEndian,d,P[ca],J[ca]),ia=0,w=ma,I=Math.min(L,X-qa),aa=Math.min(O,B-na),na=0;na<ba;na++)if(ea=R[na],M||ha)for(ra=0;ra<aa;ra++)for(w=ma+ra*X,ia=L*O*na+ra*L,fa=0;fa<I;fa++,w++,
ia++)ea[w]=pa[ia];else for(ra=0;ra<aa;ra++)for(w=ma+ra*X,ia=ra*L*ba+na,fa=0;fa<I;fa++,w++,ia+=ba)ea[w]=pa[ia];d={width:X,height:B,pixelType:E,pixels:R}}}else if(da=J,ra=W.isPlatformLittleEndian===da.littleEndian,fa=A(d,"STRIPOFFSETS"),void 0===fa)d=null;else{var {width:ja,height:ka,pixelType:oa}=e([d]);J=da.planes;ba=ja*ka;ca=c(d,"BITSPERSAMPLE");P=N(oa);R=new P(ba*J);ma=A(d,"STRIPBYTECOUNTS");pa=c(d,"ROWSPERSTRIP");na=null!=(qa=c(d,"COMPRESSION"))?qa:1;w=pa;if(0===ca%8)for(d=0;d<fa.length;d++){qa=
d*pa*ja*J;w=(d+1)*pa>ka?ka-d*pa:pa;if("u8"===oa||"s8"===oa||ra)8===na||32946===na?(M=new Uint8Array(t,fa[d],ma[d]),M=new T.Zlib(M),ia=M.getBytes(),ha=new ArrayBuffer(ia.length),M=new Uint8Array(ha),M.set(ia),M.length!==w*ja*J*ca/8&&console.log("strip byte counts is different than expected")):6===na?(M=new Uint8Array(t,fa[d],ma[d]),ha=new x.JpegImage,ha.parse(M),w=ha.getData(ha.width,ha.height,!0),ha=new ArrayBuffer(w.length),M=new Uint8Array(ha),M.set(w)):5===na?(M=S.decode(t,fa[d],ma[d],da.littleEndian),
ha=M.buffer):1===na&&(ma[d]!==w*ja*J*ca/8&&console.log("strip byte counts is different than expected"),ha=t.slice(fa[d],fa[d]+ma[d]));else switch(6===na||8===na||32946===na?(M=new Uint8Array(t,fa[d],ma[d]),M=new T.Zlib(M),M=M.getBytes(),ha=new ArrayBuffer(M.length),D=new Uint8Array(ha),M.length!==w*ja*J*ca/8&&console.log("strip byte counts is different than expected")):1===na&&(ma[d]!==w*ja*J*ca/8&&console.log("strip byte counts is different than expected"),ha=new ArrayBuffer(ma[d]),M=new Uint8Array(t,
fa[d],ma[d]),D=new Uint8Array(ha)),oa){case "u16":case "s16":for(w=0;w<M.length;w+=2)D[w]=M[w+1],D[w+1]=M[w];break;case "u32":case "s32":case "f32":for(w=0;w<M.length;w+=4)D[w]=M[w+3],D[w+1]=M[w+2],D[w+2]=M[w+1],D[w+3]=M[w]}w=new P(ha);R.set(w,qa)}M=[];if(1===J)M.push(R);else for(d=0;d<J;d++){D=new P(ba);for(t=0;t<ba;t++)D[t]=R[t*J+d];M.push(D)}d={width:ja,height:ka,pixelType:oa,pixels:M}}if(null!==v){d.mask=new Uint8Array(d.width*d.height);if(1E24<Math.abs(v))for(t=0;t<d.width*d.height;t++)d.mask[t]=
1E-6>Math.abs((d.pixels[0][t]-v)/v)?0:1;else for(t=0;t<d.width*d.height;t++)d.mask[t]=d.pixels[0][t]===v?0:1;d.noDataValue=v}return d};Y.decodeTileOrStrip=function(t,v){var J;const {headerInfo:Z,ifd:n,offsets:d,sizes:D}=v;var R=d.map((pa,ra)=>K(t,Z.littleEndian,n,pa,D[ra]||t.byteLength)),P=a(n,Z);const {pixelType:X,planes:B}=Z;var E=N(X);const L=c(n,"TILEWIDTH"),O=c(n,"TILELENGTH");var M=null!=(J=c(n,"COMPRESSION"))?J:1;J=L*O;const ba=[];let da=R[0];const ca=34887===M;for(let pa=0;pa<B;pa++){M=new E(J);
if(P&&ca){da=R[pa];for(var ha=0;ha<J;ha++)M[ha]=da[pa][ha+pa]}else if(P||ca&&!P)M=da.slice(J*pa,J*(pa+1));else for(ha=0;ha<J;ha++)M[ha]=da[ha*B+pa];ba.push(M)}R=Z.noData?Z.noData[0]:null;P=(E=Z.metadata?Z.metadata.statistics:null)?E.map(pa=>pa.min):null;E=E?E.map(pa=>pa.max):null;let ma;if(null!=R)if(ma=new Uint8Array(J),1E24<Math.abs(R))for(v=0;v<J;v++)ma[v]=1E-6>Math.abs((ba[0][v]-R)/R)?0:1;else for(v=0;v<J;v++)ma[v]=ba[0][v]===R?0:1;else P&&E&&v.applyMinMaxConstraint&&(ma=U(ba,P,E));return{pixelType:X,
width:L,height:O,pixels:ba,mask:ma,noDataValue:R}};Y.getImageInfo=e;Y.isBSQConfig=a;Y.parseFieldValues=l;Y.parseHeader=h;Y.parseIFD=g;Y.parseSignature=b})},"esri/layers/support/rasterDatasets/byteStreamUtils":function(){define(["exports"],function(Y){Y.bytesToUTF8=function(C,x){let S=0,m="",W=0,T=0;const V=C.length;for(;S<V;)if(T=C[S++],W=T>>4,8>W?W=1:15===W?(W=4,T=(T&7)<<18|(C[S++]&63)<<12|(C[S++]&63)<<6|C[S++]&63):14===W?(W=3,T=(T&15)<<12|(C[S++]&63)<<6|C[S++]&63):(W=2,T=(T&31)<<6|C[S++]&63),0!==
T||x)m+=String.fromCharCode(T);return m};Object.defineProperty(Y,"__esModule",{value:!0})})},"esri/layers/support/rasterFormats/Lzw":function(){define(["exports"],function(Y){function C(W,T,V,N=!0){if(0!==T%4||0!==V%4){var G=new ArrayBuffer(4*Math.ceil(V/4));G=new Uint8Array(G);W=new Uint8Array(W,T,V);if(N)for(N=0;N<G.length;N+=4)G[N]=W[N+3],G[N+1]=W[N+2],G[N+2]=W[N+1],G[N+3]=W[N];else G.set(W);return new Uint32Array(G.buffer)}if(N){N=new Uint8Array(W,T,V);G=new Uint8Array(N.length);for(W=0;W<G.length;W+=
4)G[W]=N[W+3],G[W+1]=N[W+2],G[W+2]=N[W+1],G[W+3]=N[W];return new Uint32Array(G.buffer)}return new Uint32Array(W,T,V/4)}function x(){const W=[];for(let T=0;257>=T;T++)W[T]=[T];return W}function S(W,T){for(let V=0;V<T.length;V++)W.push(T[V])}const m=new Set;m.add(511);m.add(1023);m.add(2047);m.add(4095);m.add(8191);Y.decode=function(W,T,V,N=!0){W=C(W,T,V,N);T=9;N=x();let G=32,u=N.length,A=[],z=1,c=W[0],k=0;const l=W.length;V=8*(4*l-V);const e=[];for(;null!=c;){if(G>=T)G-=T,k=c>>>32-T,c<<=T;else{k=c>>>
32-G;c=W[z++];var a=T-G;G=32-a;k=(k<<a)+(c>>>G);c<<=a}if(257===k)break;if(256===k)T=9,N=x(),u=N.length,A=[];else{a=N[k];if(null==a){if(k>N.length)throw"data integrity issue: code does not exist on code page";A.push(A[0]);N[u++]=A.slice();S(e,A)}else S(e,a),A.push(a[0]),1<A.length&&(N[u++]=A.slice()),A=a.slice();m.has(u)&&T++;0===G&&(c=W[z++],G=32);if(z>l||z===l&&G<=V)break}}return new Uint8Array(e)};Object.defineProperty(Y,"__esModule",{value:!0})})},"esri/layers/support/rasterFormats/TiffTags":function(){define(function(){const Y=
(()=>{const m=[];m[254]="NEWSUBFILETYPE";m[255]="SUBFILETYPE";m[256]="IMAGEWIDTH";m[257]="IMAGELENGTH";m[258]="BITSPERSAMPLE";m[259]="COMPRESSION";m[262]="PHOTOMETRICINTERPRETATION";m[263]="THRESHHOLDING";m[264]="CELLWIDTH";m[265]="CELLLENGTH";m[266]="FILLORDER";m[269]="DOCUMENTNAME";m[270]="IMAGEDESCRIPTION";m[271]="MAKE";m[272]="MODEL";m[273]="STRIPOFFSETS";m[274]="ORIENTATION";m[277]="SAMPLESPERPIXEL";m[278]="ROWSPERSTRIP";m[279]="STRIPBYTECOUNTS";m[280]="MINSAMPLEVALUE";m[281]="MAXSAMPLEVALUE";
m[282]="XRESOLUTION";m[283]="YRESOLUTION";m[284]="PLANARCONFIGURATION";m[285]="PAGENAME";m[286]="XPOSITION";m[287]="YPOSITION";m[288]="FREEOFFSETS";m[289]="FREEBYTECOUNTS";m[290]="GRAYRESPONSEUNIT";m[291]="GRAYRESPONSECURVE";m[292]="T4OPTIONS";m[293]="T6OPTIONS";m[296]="RESOLUTIONUNIT";m[297]="PAGENUMBER";m[300]="COLORRESPONSEUNIT";m[301]="TRANSFERFUNCTION";m[305]="SOFTWARE";m[306]="DATETIME";m[315]="ARTIST";m[316]="HOSTCOMPUTER";m[317]="PREDICTOR";m[318]="WHITEPOINT";m[319]="PRIMARYCHROMATICITIES";
m[320]="COLORMAP";m[321]="HALFTONEHINTS";m[322]="TILEWIDTH";m[323]="TILELENGTH";m[324]="TILEOFFSETS";m[325]="TILEBYTECOUNTS";m[326]="BADFAXLINES";m[327]="CLEANFAXDATA";m[328]="CONSECUTIVEBADFAXLINES";m[330]="SUBIFD";m[332]="INKSET";m[333]="INKNAMES";m[334]="NUMBEROFINKS";m[336]="DOTRANGE";m[337]="TARGETPRINTER";m[338]="EXTRASAMPLES";m[339]="SAMPLEFORMAT";m[340]="SMINSAMPLEVALUE";m[341]="SMAXSAMPLEVALUE";m[342]="TRANSFERRANGE";m[347]="JPEGTABLES";m[512]="JPEGPROC";m[513]="JPEGIFOFFSET";m[514]="JPEGIFBYTECOUNT";
m[515]="JPEGRESTARTINTERVAL";m[517]="JPEGLOSSLESSPREDICTORS";m[518]="JPEGPOINTTRANSFORM";m[519]="JPEGQTABLES";m[520]="JPEGDCTABLES";m[521]="JPEGACTABLES";m[529]="YCBCRCOEFFICIENTS";m[530]="YCBCRSUBSAMPLING";m[531]="YCBCRPOSITIONING";m[532]="REFERENCEBLACKWHITE";m[700]="XMP";m[33550]="GEOPIXELSCALE";m[33922]="GEOTIEPOINTS";m[33432]="COPYRIGHT";m[42112]="GDAL_METADATA";m[42113]="GDAL_NODATA";m[50844]="RPCCOEFFICIENT";m[34264]="GEOTRANSMATRIX";m[34735]="GEOKEYDIRECTORY";m[34736]="GEODOUBLEPARAMS";m[34737]=
"GEOASCIIPARAMS";m[34665]="EXIFIFD";m[34853]="GPSIFD";m[40965]="INTEROPERABILITYIFD";return m})(),C=(()=>{const m=[].concat(Y);m[36864]="ExifVersion";m[40960]="FlashpixVersion";m[40961]="ColorSpace";m[42240]="Gamma";m[37121]="ComponentsConfiguration";m[37122]="CompressedBitsPerPixel";m[40962]="PixelXDimension";m[40963]="PixelYDimension";m[37500]="MakerNote";m[37510]="UserComment";m[40964]="RelatedSoundFile";m[36867]="DateTimeOriginal";m[36868]="DateTimeDigitized";m[36880]="OffsetTime";m[36881]="OffsetTimeOriginal";
m[36882]="OffsetTimeDigitized";m[37520]="SubSecTime";m[37521]="SubSecTimeOriginal";m[37522]="SubSecTimeDigitized";m[37888]="Temperature";m[37889]="Humidity";m[37890]="Pressure";m[37891]="WaterDepth";m[37892]="Acceleration";m[37893]="CameraElevationAngle";m[42016]="ImageUniqueID";m[42032]="CameraOwnerName";m[42033]="BodySerialNumber";m[42034]="LensSpecification";m[42035]="LensMake";m[42036]="LensModel";m[42037]="LensSerialNumber";m[33434]="ExposureTime";m[33437]="FNumber";m[34850]="ExposureProgram";
m[34852]="SpectralSensitivity";m[34855]="PhotographicSensitivity";m[34856]="OECF";m[34864]="SensitivityType";m[34865]="StandardOutputSensitivity";m[34866]="RecommendedExposureIndex";m[34867]="ISOSpeed";m[34868]="ISOSpeedLatitudeyyy";m[34869]="ISOSpeedLatitudezzz";m[37377]="ShutterSpeedValue";m[37378]="ApertureValue";m[37379]="BrightnessValue";m[37380]="ExposureBiasValue";m[37381]="MaxApertureValue";m[37382]="SubjectDistance";m[37383]="MeteringMode";m[37384]="LightSource";m[37385]="Flash";m[37386]=
"FocalLength";m[37396]="SubjectArea";m[41483]="FlashEnergy";m[41484]="SpatialFrequencyResponse";m[41486]="FocalPlaneXResolution";m[41487]="FocalPlaneYResolution";m[41488]="FocalPlaneResolutionUnit";m[41492]="SubjectLocation";m[41493]="ExposureIndex";m[41495]="SensingMethod";m[41728]="FileSource";m[41729]="SceneType";m[41730]="CFAPattern";m[41985]="CustomRendered";m[41986]="ExposureMode";m[41987]="WhiteBalance";m[41988]="DigitalZoomRatio";m[41989]="FocalLengthIn35mmFilm";m[41990]="SceneCaptureType";
m[41991]="GainControl";m[41992]="Contrast";m[41993]="Saturation";m[41994]="Sharpness";m[41995]="DeviceSettingDescription";m[41996]="SubjectDistanceRange";return m})(),x=(()=>{const m=[];m[1024]="GTModelTypeGeoKey";m[1025]="GTRasterTypeGeoKey";m[1026]="GTCitationGeoKey";m[2048]="GeographicTypeGeoKey";m[2049]="GeogCitationGeoKey";m[2050]="GeogGeodeticDatumGeoKey";m[2051]="GeogPrimeMeridianGeoKey";m[2052]="GeogLinearUnitsGeoKey";m[2053]="GeogLinearUnitSizeGeoKey";m[2054]="GeogAngularUnitsGeoKey";m[2055]=
"GeogAngularUnitSizeGeoKey";m[2056]="GeogEllipsoidGeoKey";m[2057]="GeogSemiMajorAxisGeoKey";m[2058]="GeogSemiMinorAxisGeoKey";m[2059]="GeogInvFlatteningGeoKey";m[2061]="GeogPrimeMeridianLongGeoKey";m[2060]="GeogAzimuthUnitsGeoKey";m[3072]="ProjectedCSTypeGeoKey";m[3073]="PCSCitationGeoKey";m[3074]="ProjectionGeoKey";m[3075]="ProjCoordTransGeoKey";m[3076]="ProjLinearUnitsGeoKey";m[3077]="ProjLinearUnitSizeGeoKey";m[3078]="ProjStdParallel1GeoKey";m[3079]="ProjStdParallel2GeoKey";m[3080]="ProjNatOriginLongGeoKey";
m[3081]="ProjNatOriginLatGeoKey";m[3082]="ProjFalseEastingGeoKey";m[3083]="ProjFalseNorthingGeoKey";m[3084]="ProjFalseOriginLongGeoKey";m[3085]="ProjFalseOriginLatGeoKey";m[3086]="ProjFalseOriginEastingGeoKey";m[3087]="ProjFalseOriginNorthingGeoKey";m[3088]="ProjCenterLongGeoKey";m[3090]="ProjCenterEastingGeoKey";m[3091]="ProjCenterNorthingGeoKey";m[3092]="ProjScaleAtNatOriginGeoKey";m[3093]="ProjScaleAtCenterGeoKey";m[3094]="ProjAzimuthAngleGeoKey";m[3095]="ProjStraightVertPoleLongGeoKey";m[4096]=
"VerticalCSTypeGeoKey";m[4097]="VerticalCitationGeoKey";m[4098]="VerticalDatumGeoKey";m[4099]="VerticalUnitsGeoKey";return m})(),S=new Map;S.set("EXIFIFD",C);S.set("GPSIFD","GPSVersionID GPSLatitudeRef GPSLatitude GPSLongitudeRef GPSLongitude GPSAltitudeRef GPSAltitude GPSTimeStamp GPSSatellites GPSStatus GPSMeasureMode GPSDOP GPSSpeedRef GPSSpeed GPSTrackRef GPSTrack GPSImgDirectionRef GPSImgDirection GPSMapDatum GPSDestLatitudeRef GPSDestLatitude GPSDestLongitudeRef GPSDestLongitude GPSDestBearingRef GPSDestBearing GPSDestDistanceRef GPSDestDistance GPSProcessingMethod GPSAreaInformation GPSDateStamp GPSDifferential GPSHPositioningError".split(" "));
return{TIFF_TAGS:Y,ifdTags:S,GEO_KEYS:x,getTagName:function(m,W){W=(W||Y)[m];void 0===W&&(W="unknown"+String(m));return W}}})},"esri/layers/support/rasterFormats/utils":function(){define(["exports"],function(Y){{var C=new ArrayBuffer(4);const x=new Uint8Array(C);(new Uint32Array(C))[0]=1;C=1===x[0]}Y.isPlatformLittleEndian=C;Object.defineProperty(Y,"__esModule",{value:!0})})},"esri/chunks/LercCodec":function(){define(["exports"],function(Y){function C(W){x[0]=W;return x[0]}const x=new Float32Array(1),
S=C(3.4028234663852886E38);var m=C(Math.max(-S,Math.min(-Infinity,S)));Y.decode=function(W,T){T=T||{};var V=T.inputOffset||0;var N=T.encodedMaskData||null===T.encodedMaskData;var G=new Uint8Array(W,V,10);G=String.fromCharCode.apply(null,G);if("CntZImage"!=G.trim())throw"Unexpected file identifier string: "+G;V+=10;var u=new DataView(W,V,24);var A=u.getInt32(0,!0);var z=u.getInt32(4,!0);var c=u.getUint32(8,!0);var k=u.getUint32(12,!0);var l=u.getFloat64(16,!0);V+=24;if(!N){u=new DataView(W,V,16);var e=
{};e.numBlocksY=u.getUint32(0,!0);e.numBlocksX=u.getUint32(4,!0);e.numBytes=u.getUint32(8,!0);e.maxValue=u.getFloat32(12,!0);V+=16;if(0<e.numBytes){N=new Uint8Array(Math.ceil(k*c/8));u=new DataView(W,V,e.numBytes);var a=u.getInt16(0,!0);var h=2;var f=0;do{if(0<a)for(;a--;)N[f++]=u.getUint8(h++);else{var q=u.getUint8(h++);for(a=-a;a--;)N[f++]=q}a=u.getInt16(h,!0);h+=2}while(h<e.numBytes);if(-32768!==a||f<N.length)throw"Unexpected end of mask RLE encoding";e.bitset=N;V+=e.numBytes}else 0===(e.numBytes|
e.numBlocksY|e.maxValue)&&(N=new Uint8Array(Math.ceil(k*c/8)),e.bitset=N)}u=new DataView(W,V,16);var b=N=q=f=h=a=void 0;a=u.getUint32(0,!0);h=u.getUint32(4,!0);f=u.getUint32(8,!0);q=u.getFloat32(12,!0);V+=16;b=h;N=a;b+=0<k%b?1:0;var g=N+(0<c%N?1:0);N=Array(b*g);for(var p=1E9,H=0,y=0;y<g;y++)for(var r=0;r<b;r++){var Q=0;u=new DataView(W,V,Math.min(10,W.byteLength-V));var K={};N[H++]=K;var U=u.getUint8(0);Q++;K.encoding=U&63;if(3<K.encoding)throw"Invalid block encoding ("+K.encoding+")";if(2===K.encoding)V++,
p=Math.min(p,0);else{if(0!==U&&2!==U){U>>=6;K.offsetType=U;if(2===U)K.offset=u.getInt8(1),Q++;else if(1===U)K.offset=u.getInt16(1,!0),Q+=2;else if(0===U)K.offset=u.getFloat32(1,!0),Q+=4;else throw"Invalid block offset type";p=Math.min(K.offset,p);if(1===K.encoding)if(U=u.getUint8(Q),Q++,K.bitsPerPixel=U&63,U>>=6,K.numValidPixelsType=U,2===U)K.numValidPixels=u.getUint8(Q),Q++;else if(1===U)K.numValidPixels=u.getUint16(Q,!0),Q+=2;else if(0===U)K.numValidPixels=u.getUint32(Q,!0),Q+=4;else throw"Invalid valid pixel count type";
}V+=Q;if(3!=K.encoding)if(0===K.encoding){u=(f-1)/4;if(u!==Math.floor(u))throw"uncompressed block has invalid length";Q=new ArrayBuffer(4*u);U=new Uint8Array(Q);U.set(new Uint8Array(W,V,4*u));Q=new Float32Array(Q);for(U=0;U<Q.length;U++)p=Math.min(p,Q[U]);K.rawData=Q;V+=4*u}else 1===K.encoding&&(u=Math.ceil(K.numValidPixels*K.bitsPerPixel/8),Q=new ArrayBuffer(4*Math.ceil(u/4)),U=new Uint8Array(Q),U.set(new Uint8Array(W,V,u)),K.stuffedData=new Uint32Array(Q),V+=u)}}b=p;W=V;V=null!=T.noDataValue?C(Math.max(-S,
Math.min(T.noDataValue,S))):m;g=T.encodedMaskData;U=T.returnMask;p=0;H=h;y=a;r=Math.floor(k/H);K=Math.floor(c/y);Q=2*l;g=g||(e?e.bitset:null);var F;u=new (T.pixelType||Float32Array)(k*c);U&&g&&(F=new Uint8Array(k*c));U=new Float32Array(r*K);for(var t,v,J=0;J<=y;J++){var Z=J!==y?K:c%y;if(0!==Z)for(var n=0;n<=H;n++){var d=n!==H?r:k%H;if(0!==d){var D=J*k*K+n*r,R=k-d,P=N[p],X;if(2>P.encoding){if(0===P.encoding)var B=P.rawData;else{t=X=B=void 0;v=P.stuffedData;var E=P.bitsPerPixel,L=P.numValidPixels,O=
P.offset,M=Q,ba=U,da=q,ca=(1<<E)-1,ha=0,ma=0,pa=Math.ceil((da-O)/M);v[v.length-1]<<=8*(4*v.length-Math.ceil(E*L/8));for(t=0;t<L;t++)0===ma&&(B=v[ha++],ma=32),ma>=E?(X=B>>>ma-E&ca,ma-=E):(ma=E-ma,X=(B&ca)<<ma&ca,B=v[ha++],ma=32-ma,X+=B>>>ma),ba[t]=X<pa?O+X*M:da;B=U}X=0}else var ra=2===P.encoding?0:P.offset;if(g)for(v=0;v<Z;v++){if(D&7){var fa=g[D>>3];fa<<=D&7}for(t=0;t<d;t++)D&7||(fa=g[D>>3]),fa&128?(F&&(F[D]=1),u[D++]=2>P.encoding?B[X++]:ra):(F&&(F[D]=0),u[D++]=V),fa<<=1;D+=R}else if(2>P.encoding)for(v=
0;v<Z;v++){for(t=0;t<d;t++)u[D++]=B[X++];D+=R}else for(v=0;v<Z;v++)if(u.fill)u.fill(ra,D,D+d),D+=d+R;else{for(t=0;t<d;t++)u[D++]=ra;D+=R}if(1===P.encoding&&X!==P.numValidPixels)throw"Block and Mask do not match";p++}}}ra=F;F={width:k,height:c,pixelData:u,minValue:b,maxValue:q,noDataValue:V};ra&&(F.maskData=ra);T.returnEncodedMask&&e&&(F.encodedMaskData=e.bitset?e.bitset:null);if(T.returnFileInfo&&(F.fileInfo={fileIdentifierString:G,fileVersion:A,imageType:z,height:c,width:k,maxZError:l,eofOffset:W,
mask:e?{numBlocksX:e.numBlocksX,numBlocksY:e.numBlocksY,numBytes:e.numBytes,maxValue:e.maxValue}:null,pixels:{numBlocksX:h,numBlocksY:a,numBytes:f,maxValue:q,minValue:b,noDataValue:V}},T.computeUsedBitDepths)){T=F.fileInfo;e=h*a;G={};for(A=0;A<e;A++)z=N[A],0===z.encoding?G.float32=!0:1===z.encoding?G[z.bitsPerPixel]=!0:G[0]=!0;e=Object.keys(G);T.bitDepths=e}return F}})},"esri/layers/support/rasterFormats/Raw":function(){define(function(){const Y=function(C){let x=1;switch(C){case Uint8Array:case Int8Array:x=
1;break;case Uint16Array:case Int16Array:x=2;break;case Uint32Array:case Int32Array:case Float32Array:x=4;break;case Float64Array:x=8}return x};return function(){function C(){}C.decode=function(x,S){var m=S.pixelType;const W=[],T=S.width*S.height;var V=Math.floor(x.byteLength/(S.width*S.height*Y(S.pixelType)));const {bandIds:N,format:G}=S;S=N&&N.length||Math.floor(x.byteLength/(S.width*S.height*Y(S.pixelType)));var u=x.byteLength-x.byteLength%(T*Y(m));const A=new m(x,0,T*V);let z,c;let k,l;if("bip"===
G)for(z=0;z<S;z++){k=new m(T);l=N?N[z]:z;for(c=0;c<T;c++)k[c]=A[c*V+l];W.push(k)}else if("bsq"===G)for(z=0;z<S;z++)l=N?N[z]:z,W.push(A.subarray(l*T,(l+1)*T));if(u<x.byteLength-1)if(x=x.slice(u),8*x.byteLength<T)var e=null;else{x=new Uint8Array(x,0,Math.ceil(T/8));m=new Uint8Array(T);for(S=u=S=e=V=0;S<x.length-1;S++)for(e=x[S],u=7;0<=u;u--)m[V++]=e>>u&1;for(u=7;V<T-1;)e=x[x.length-1],m[V++]=e>>u&1,u--;e=m}return{pixels:W,mask:e}};return C}()})},"esri/renderers/support/rasterRendererHelper":function(){define("exports ../../Color ../../rasterRenderers ../../core/maybe ../../core/unitUtils ../../layers/support/Field ../../layers/support/RasterInfo ./AuthoringInfo ./ClassBreakInfo ./colorRampUtils ./UniqueValueInfo ../../rest/support/AlgorithmicColorRamp ../../rest/support/ClassBreaksDefinition ../../rest/support/generateRendererUtils ../../rest/support/MultipartColorRamp ../RasterStretchRenderer ../UniqueValueRenderer ../RasterColormapRenderer ../RasterShadedReliefRenderer ../ClassBreaksRenderer ../VectorFieldRenderer".split(" "),
function(Y,C,x,S,m,W,T,V,N,G,u,A,z,c,k,l,e,a,h,f,q){function b(B,E){var L,O,M,ba;B=g(B,null==E?void 0:E.variableName);const {bandCount:da}=B;let {bandIds:ca,stretchType:ha}=E||{};null!=(L=ca)&&L.some(fa=>fa>=da)&&(ca=null);let ma=S.unwrap(B.statistics),pa=S.unwrap(B.histograms);if(1<da){var ra;ca=null!=(ra=ca)&&ra.length?ca:p(B);ma=null==ma?null:ca.map(fa=>ma[fa]);pa=null==pa?null:ca.map(fa=>pa[fa])}else ca=[0];null==ha&&(ha=y(B));L=!1;switch(ha){case "none":L=!1;break;case "percent-clip":L=!(null!=
(O=pa)&&O.length);break;default:L=!(null!=(M=ma)&&M.length)}({dataType:O}=B);O=1===(null==(ba=ca)?void 0:ba.length)&&X.has(O)?R:null;ba=new l({stretchType:ha,dynamicRangeAdjustment:L,colorRamp:O,outputMin:0,outputMax:255,gamma:1===ca.length?[1]:[1,1,1],useGamma:!1});"percent-clip"===ha?ba.maxPercent=ba.minPercent=.25:"standard-deviation"===ha&&(ba.numberOfStandardDeviations=2);if(!L&&(S.isSome(B.multidimensionalInfo)||null!=E&&E.includeStatisticsInStretch))if("percent-clip"===ha)ba.histograms=pa;
else if("min-max"===ha||"standard-deviation"===ha)ba.statistics=ma;return ba}function g(B,E){if(null==E)return B;let L=S.unwrap(B.statistics),O=S.unwrap(B.histograms);const {multidimensionalInfo:M}=B;if(E&&S.isSome(M)){const {statistics:ba,histograms:da}=M.variables.find(ca=>ca.name===E);null!=ba&&ba.length&&(L=ba);null!=da&&da.length&&(O=da)}return T.fromJSON({...B.toJSON(),statistics:L,histograms:O})}function p(B){const E=B.bandCount;if(1===E)return null;if(2===E)return[0];B=B.keyProperties&&B.keyProperties.BandProperties;
let L;if(B&&B.length===E){const {red:O,green:M,blue:ba,nir:da}=H(B);null!=O&&null!=M&&null!=ba?L=[O,M,ba]:null!=da&&null!=O&&null!=M&&(L=[da,O,M])}!L&&3<=E&&(L=[0,1,2]);return L}function H(B){const E={};for(let ba=0;ba<B.length;ba++){var L,O=B[ba],M=null==(L=O.BandName)?void 0:L.toLowerCase();"red"===M?E.red=ba:"green"===M?E.green=ba:"blue"===M?E.blue=ba:"nearinfrared"===M||"nearinfrared_1"===M||"nir"===M?E.nir=ba:O.WavelengthMax&&O.WavelengthMin&&(M=O.WavelengthMin,O=O.WavelengthMax,null==E.blue&&
410<=M&&480>=M&&480<=O&&540>=O?E.blue=ba:null==E.green&&490<=M&&560>=M&&560<=O&&610>=O?E.green=ba:null==E.red&&595<=M&&670>=M&&660<=O&&730>=O?E.red=ba:null==E.nir&&700<=M&&860>=M&&800<=O&&950>=O&&(E.nir=ba))}return E}function y(B){let E="percent-clip";const {pixelType:L,dataType:O,histograms:M,statistics:ba}=B;"u8"!==L||"processed"!==O&&S.isSome(M)&&S.isSome(ba)?"u8"===L||"elevation"===O||X.has(O)?E="min-max":S.isSome(M)?E="percent-clip":S.isSome(ba)&&(E=E="min-max"):E="none";return E}function r(B,
E,L,O){if(!U(B,E))return null;const {attributeTable:M,statistics:ba}=B,da=Q(M,E),ca=K(M,"red"),ha=K(M,"green"),ma=K(M,"blue");B=new V;const pa=[],ra=new Set,fa=!!(ca&&ha&&ma);if(S.isSome(M))M.features.forEach(na=>{var qa=na.attributes[da.name];ra.has(na.attributes[da.name])||null==qa||(ra.add(qa),qa=!fa||"single"!==ca.type&&"double"!==ca.type||"single"!==ha.type&&"double"!==ha.type||"single"!==ma.type&&"double"!==ma.type||M.features.some(ia=>1<ia.attributes[ca.name]||1<ia.attributes[ha.name]||1<ia.attributes[ma.name])?
1:255,pa.push(new u({value:na.attributes[da.name],label:na.attributes[da.name]+"",symbol:{type:"simple-fill",style:"solid",outline:null,color:fa?new C([na.attributes[ca.name]*qa,na.attributes[ha.name]*qa,na.attributes[ma.name]*qa,1]):new C([0,0,0,0])}})))});else if(null!=ba&&ba[0])for(E=ba[0].min;E<=ba[0].max;E++)pa.push(new u({value:E,label:E.toString(),symbol:{type:"simple-fill",style:"solid",outline:null,color:new C([0,0,0,0])}}));pa.sort((na,qa)=>na.value&&"string"===typeof na.value.valueOf()?
0:na.value>qa.value?1:-1);if(!fa){const na=G.convertColorRampToColormap(P,pa.length);pa.forEach((qa,ia)=>qa.symbol.color=new C(na[ia].slice(1,4)));B.colorRamp=P}if(L||O){const na=L||G.convertColorRampToColormap(O,pa.length).map(qa=>qa.slice(1));pa.forEach((qa,ia)=>qa.symbol.color=new C(na[ia]));B.colorRamp=O}return new e({field:da.name,uniqueValueInfos:pa,authoringInfo:B})}function Q(B,E){let L;S.isSome(B)?(L=E?B.fields.find(O=>E.toLowerCase()===O.name.toLowerCase()):B.fields.find(O=>"string"===O.type&&
-1<O.name.toLowerCase().indexOf("class")),L||(L=B.fields.find(O=>"string"===O.type))||(L=K(B,"value"))):L=new W({name:"value"});return L}function K(B,E){return S.isSome(B)?B.fields.find(L=>L.name.toLowerCase()===E):null}function U(B,E){const {attributeTable:L,bandCount:O}=B;return!S.isSome(L)&&Z(B)?!0:!S.isSome(L)||1<O||E&&null==L.fields.find(M=>M.name.toLowerCase()===E.toLowerCase())?!1:!0}function F(B){const {bandCount:E,colormap:L}=B;return S.isSome(L)&&L.length&&1===E}function t(B){if(!F(B))return null;
let E;const {attributeTable:L,colormap:O}=B;if(S.isSome(L)){const M=K(L,"value"),ba=Q(L);"string"===ba.type&&(E={},L.features.forEach(da=>{da=da.attributes;E[da[M.name]]=ba?da[ba.name]:da[M.name]}))}return a.createFromColormap(S.unwrap(O),E)}function v(B){return"elevation"===B.dataType}function J(B){const {attributeTable:E,bandCount:L}=B;return 1===L&&(S.isSome(E)||S.isSome(B.histograms))}function Z(B){var E,L,O;return-1<["u8","s8"].indexOf(B.pixelType)&&null!=(null==(E=B.statistics)?void 0:null==
(L=E[0])?void 0:L.min)&&null!=(null==(O=B.statistics[0])?void 0:O.max)&&1===B.bandCount}function n(B){var E;const {dataType:L}=B;return!(null!=(E=B.storageInfo)&&E.tileInfo)&&("vector-uv"===L||"vector-magdir"===L)}function d(B){if(!n(B))return null;let E;if(S.isSome(B.statistics)){var L,O;E=[{type:"size",field:"Magnitude",minSize:10,maxSize:40,minDataValue:null==(L=B.statistics[0])?void 0:L.min,maxDataValue:null==(O=B.statistics[0])?void 0:O.max}]}B=new q({visualVariables:E});B.visualVariables=[...B.sizeVariables,
...B.rotationVariables];return B}function D(B){var E;return{color:null==(E=B.symbolLayers[0].material)?void 0:E.color,type:"esriSFS",style:"esriSFSSolid"}}const R=k.fromJSON({type:"multipart",colorRamps:[{fromColor:[0,0,255],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]}),P=k.fromJSON(G.PREDEFINED_JSON_COLOR_RAMPS[0]),X=new Set("scientific standard-time vector-uv vector-magdir vector-u vector-v vector-magnitude vector-direction".split(" "));
Y.createClassBreaksRenderer=function(B,E){B=g(B,null==E?void 0:E.variableName);const {attributeTable:L}=B;if(!J(B))return null;const O=S.isSome(B.histograms)?B.histograms[0]:null;var M=(null==E?void 0:E.numClasses)||5;const ba=new V({classificationMethod:null==E?void 0:E.classificationMethod,colorRamp:null==E?void 0:E.colorRamp});let da=(null==E?void 0:E.field)||"value";const ca=[],ha=[];if(S.isSome(L)){const pa=L.fields.find(qa=>"count"===qa.name.toLowerCase()),ra=L.fields.find(qa=>qa.name.toLowerCase()===
da.toLowerCase());da=ra.name;const fa=L.features.length;let na=0;L.features.forEach(qa=>na+=qa.attributes[pa.name]/fa);L.features.forEach(qa=>{const ia=qa.attributes[ra.name];qa=qa.attributes[pa.name];if(0<qa){ha.push(qa);qa=Math.max(1,Math.round(qa/fa/na*1E3));for(let w=0;w<qa;w++)ca.push(ia)}})}else{({pixelType:B}=B);const pa=(O.max-O.min)/O.size,ra=(B=-1<B.indexOf("s")||-1<B.indexOf("u"))&&1===pa?Math.floor(O.min+.5):O.min,fa=B&&1===pa?Math.floor(O.max-.5):O.max,na=O.size;let qa=0;O.counts.forEach(ia=>
qa+=ia/na);O.counts.forEach((ia,w)=>{if(0<ia){ha.push(ia);ia=Math.max(1,Math.round(ia/na/qa*1E3));w=0===w?ra:w===na-1?fa:O.min+pa*(w+.5);for(let I=0;I<ia;I++)ca.push(w)}})}M=c.createGenerateRendererClassBreaks({values:ca,valueFrequency:ha,normalizationTotal:null,definition:new z({classificationMethod:(null==E?void 0:E.classificationMethod)||"natural-breaks",breakCount:M,definedInterval:null==E?void 0:E.definedInterval})});let ma=null==E?void 0:E.colors;ma||(E=(null==E?void 0:E.colorRamp)||R,ba.colorRamp=
E,ma=G.convertColorRampToColormap(E,M.classBreaks.length,!0).map(pa=>pa.slice(1)));E=M.classBreaks.map((pa,ra)=>new N({minValue:pa.minValue,maxValue:pa.maxValue,label:pa.label,symbol:{type:"simple-fill",color:ma[ra]}}));return new f({field:da,classBreakInfos:E,authoringInfo:ba})};Y.createColorRamp=function(B){const E=[];for(let L=0;L<B.length-1;L++)E[L]=new A({algorithm:"hsv",fromColor:B[L],toColor:B[L+1]||new C({r:255,g:255,b:255,a:1})});return 2<B.length?new k({colorRamps:E}):E[0]};Y.createColormapRenderer=
t;Y.createDefaultRenderer=function(B,E){const {attributeTable:L,colormap:O}=B;if(n(B)){var M=d(B);if(S.isSome(M))return M}return S.isSome(O)&&(M=t(B),S.isSome(M))||S.isSome(L)&&(M=r(B),S.isSome(M))?M:b(B,E)};Y.createShadedReliefRenderer=function(B,E){var L;if(!v(B))return null;({extent:B}=B);B=B.width*m.getMetersPerUnitForSR(B.spatialReference);E=null!=(L=E)?L:"multi-directional";return new h({hillshadeType:E,scalingType:5E6<B?"adjusted":"none"})};Y.createStretchRenderer=b;Y.createUVRenderer=r;Y.createVectorFieldRenderer=
d;Y.getBandNames=function(B,E){var L;const O=B.keyProperties&&B.keyProperties.BandProperties;E=null!=(L=E)&&L.length?E:Array.from(Array(B.bandCount).keys());return E.map(M=>O&&O.length===B.bandCount?O[M]&&O[M].BandName||"band_"+(M+1):"band_"+(M+1))};Y.getClassField=Q;Y.getDefaultBandCombination=p;Y.getDefaultInterpolation=function(B,E,L){const O=["nearest","bilinear","cubic","majority"].find(M=>M===(null==L?void 0:L.toLowerCase()));return"Map"===E?null!=O?O:"bilinear":"standard-time"===B.dataType?
null!=O?O:"nearest":"thematic"===B.dataType||B.attributeTable||B.colormap?"nearest"===O||"majority"===O?O:"nearest":null!=O?O:"bilinear"};Y.getSupportedRendererTypes=function(B){const E=["raster-stretch"];F(B)&&E.push("raster-colormap");U(B)&&E.push("unique-value");J(B)&&E.push("class-breaks");v(B)&&E.push("raster-shaded-relief");n(B)&&E.push("vector-field");return E};Y.getWellKnownBandIndexes=H;Y.isClassBreaksSupported=J;Y.isColormapRendererSupported=F;Y.isShadedReliefRendererSupported=v;Y.isSingleBand8BitRasterWithStats=
Z;Y.isUVRendererSupported=U;Y.isVectorFieldRendererSupported=n;Y.normalizeRendererJSON=function(B){if("uniqueValue"===B.type){var E,L=B.uniqueValueInfos,O=L[0].symbol;null!=O&&null!=(E=O.symbolLayers)&&E.length&&(B.uniqueValueInfos=L.map(M=>({value:M.value,label:M.label,symbol:M.symbol?D(M.symbol):null})));return B}"classBreaks"===B.type&&(E=B.classBreakInfos,O=E[0].symbol,null!=O&&null!=(L=O.symbolLayers)&&L.length&&(B.classBreakInfos=E.map(M=>({classMinValue:M.classMinValue,classMaxValue:M.classMaxValue,
label:M.label,symbol:M.symbol?D(M.symbol):null}))));return B};Object.defineProperty(Y,"__esModule",{value:!0})})},"esri/rest/support/ClassBreaksDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass ./ClassificationDefinition".split(" "),function(Y,C,x,S,m,W,T,V,N){m=new x.JSONMap({esriClassifyEqualInterval:"equal-interval",
esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"});x=new x.JSONMap({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});N=function(G){function u(){var A=G.apply(this,arguments)||this;A.breakCount=null;A.classificationField=null;A.classificationMethod=null;A.normalizationField=null;A.normalizationType=
null;A.type="class-breaks-definition";return A}Y._inheritsLoose(u,G);Y._createClass(u,[{key:"standardDeviationInterval",set:function(A){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",A)}},{key:"definedInterval",set:function(A){"defined-interval"===this.classificationMethod&&this._set("definedInterval",A)}}]);return u}(N);C.__decorate([S.property({json:{write:!0}})],N.prototype,"breakCount",void 0);C.__decorate([S.property({json:{write:!0}})],N.prototype,"classificationField",
void 0);C.__decorate([S.property({type:String,json:{read:m.read,write:m.write}})],N.prototype,"classificationMethod",void 0);C.__decorate([S.property({json:{write:!0}})],N.prototype,"normalizationField",void 0);C.__decorate([S.property({json:{read:x.read,write:x.write}})],N.prototype,"normalizationType",void 0);C.__decorate([S.property({value:null,json:{write:!0}})],N.prototype,"standardDeviationInterval",null);C.__decorate([S.property({value:null,json:{write:!0}})],N.prototype,"definedInterval",
null);C.__decorate([S.property()],N.prototype,"type",void 0);return N=C.__decorate([V.subclass("esri.rest.support.ClassBreaksDefinition")],N)})},"esri/rest/support/ClassificationDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass ./colorRamps ../../symbols/Symbol".split(" "),
function(Y,C,x,S,m,W,T,V,N,G,u){x=new x.JSONMap({classBreaksDef:"class-breaks-definition",uniqueValueDef:"unique-value-definition"});S=function(A){function z(){var c=A.apply(this,arguments)||this;c.baseSymbol=null;c.colorRamp=null;c.type=null;return c}Y._inheritsLoose(z,A);return z}(S.JSONSupport);C.__decorate([m.property({type:u,json:{write:!0}})],S.prototype,"baseSymbol",void 0);C.__decorate([m.property({types:G.types,json:{read:{reader:G.fromJSON},write:!0}})],S.prototype,"colorRamp",void 0);C.__decorate([m.property({json:{read:x.read,
write:x.write}})],S.prototype,"type",void 0);return S=C.__decorate([N.subclass("esri.rest.support.ClassificationDefinition")],S)})},"esri/rest/support/generateRendererUtils":function(){define(["exports"],function(Y){function C(u){const {classificationMethod:A,breakCount:z,normalizationType:c,definedInterval:k}=u.definition,l=[];var e=u.values;if(0===e.length)return[];e=e.sort((g,p)=>g-p);var a=e[0],h=e[e.length-1];if("equal-interval"===A)if(e.length>=z){e=(h-a)/z;u=a;for(var f=1;f<z;f++){var q=Number((a+
f*e).toFixed(6));l.push({minValue:u,maxValue:q,label:x(u,q,c)});u=q}l.push({minValue:u,maxValue:h,label:x(u,h,c)})}else e.forEach(g=>{l.push({minValue:g,maxValue:g,label:x(g,g,c)})});else if("natural-breaks"===A){e=S(e);u=m(e.uniqueValues,u.valueFrequency||e.valueFrequency,z);for(f=1;f<z;f++)e.uniqueValues.length>f&&(q=Number(e.uniqueValues[u[f]].toFixed(6)),l.push({minValue:a,maxValue:q,label:x(a,q,c)}),a=q);l.push({minValue:a,maxValue:h,label:x(a,h,c)})}else if("quantile"===A)if(e.length>=z&&a!==
h){u=Math.ceil(e.length/z);f=0;for(q=1;q<z;q++){var b=u+f-1;b>e.length&&(b=e.length-1);0>b&&(b=0);l.push({minValue:a,maxValue:e[b],label:x(a,e[b],c)});a=e[b];f+=u;u=Math.ceil((e.length-f)/(z-q))}l.push({minValue:a,maxValue:h,label:x(a,h,c)})}else for(h=-1,a=0;a<e.length;a++)u=e[a],u!==h&&(h=u,l.push({minValue:h,maxValue:u,label:x(h,u,c)}),h=u);else if("standard-deviation"===A)if(u=V(e),f=N(e,u),0===f)l.push({minValue:e[0],maxValue:e[0],label:x(e[0],e[0],c)});else{e=T(a,h,z,u,f)*f;f=0;for(q=z;1<=q;q--)b=
Number((u-(q-.5)*e).toFixed(6)),l.push({minValue:a,maxValue:b,label:x(a,b,c)}),a=b,f++;q=Number((u+.5*e).toFixed(6));l.push({minValue:a,maxValue:q,label:x(a,q,c)});a=q;f++;for(b=1;b<=z;b++)q=f===2*z?h:Number((u+(b+.5)*e).toFixed(6)),l.push({minValue:a,maxValue:q,label:x(a,q,c)}),a=q,f++}else if("defined-interval"===A){if(!k)return l;h=e[0];e=e[e.length-1];a=Math.ceil((e-h)/k);u=h;for(f=1;f<a;f++)q=Number((h+f*k).toFixed(6)),l.push({minValue:u,maxValue:q,label:x(u,q,c)}),u=q;l.push({minValue:u,maxValue:e,
label:x(u,e,c)})}return l}function x(u,A,z){let c=null;return c=u===A?z&&"percent-of-total"===z?u+"%":u.toString():z&&"percent-of-total"===z?u+"% - "+A+"%":u+" - "+A}function S(u){const A=[],z=[];let c=Number.MIN_VALUE,k=1,l=-1;for(let e=0;e<u.length;e++){const a=u[e];a===c?(k++,z[l]=k):null!==a&&(A.push(a),c=a,k=1,z.push(k),l++)}return{uniqueValues:A,valueFrequency:z}}function m(u,A,z){var c=u.length;const k=[];z>c&&(z=c);for(var l=0;l<z;l++)k.push(Math.round(l*c/z-1));k.push(c-1);l=W(k,u,A,z);{c=
l.mean;l=l.sdcm;var e=z,a=0,h=0;let q=0,b=0,g=!0;for(let p=0;2>p&&g;p++){0===p&&(g=!1);for(var f=0;f<e-1;f++)for(;k[f+1]+1!==k[f+2];)if(k[f+1]+=1,a=G(f,k,u,A),q=a.sbMean,a=a.sbSdcm,h=G(f+1,k,u,A),b=h.sbMean,h=h.sbSdcm,a+h<l[f]+l[f+1])l[f]=a,l[f+1]=h,c[f]=q,c[f+1]=b,g=!0;else{--k[f+1];break}for(f=e-1;0<f;f--)for(;k[f]!==k[f-1]+1;)if(--k[f],a=G(f-1,k,u,A),q=a.sbMean,a=a.sbSdcm,h=G(f,k,u,A),b=h.sbMean,h=h.sbSdcm,a+h<l[f-1]+l[f])l[f-1]=a,l[f]=h,c[f-1]=q,c[f]=b,g=!0;else{k[f]+=1;break}}c=g}c&&(l=W(k,u,
A,z));return k}function W(u,A,z,c){let k=[];var l=[],e=[];let a=0;const h=[],f=[];for(var q=0;q<c;q++){var b=G(q,u,A,z);h.push(b.sbMean);f.push(b.sbSdcm);a+=f[q]}b=a;for(q=!0;q||a<b;){q=!1;k=[];for(l=0;l<c;l++)k.push(u[l]);for(e=0;e<c;e++)for(b=u[e]+1;b<=u[e+1];b++)if(l=A[b],0<e&&b!==u[e+1]&&Math.abs(l-h[e])>Math.abs(l-h[e-1]))u[e]=b;else if(e<c-1&&u[e]!==b-1&&Math.abs(l-h[e])>Math.abs(l-h[e+1])){u[e+1]=b-1;break}b=a;a=0;l=[];e=[];for(let g=0;g<c;g++){l.push(h[g]);e.push(f[g]);const p=G(g,u,A,z);
h[g]=p.sbMean;f[g]=p.sbSdcm;a+=f[g]}}if(a>b){for(A=0;A<c;A++)u[A]=k[A],h[A]=l[A],f[A]=e[A];a=b}return{mean:h,sdcm:f}}function T(u,A,z,c,k){u=Math.max(c-u,A-c)/k/z;return 1<=u?1:.5<=u?.5:.25}function V(u){let A=0;for(let z=0;z<u.length;z++)A+=u[z];return A/=u.length}function N(u,A){let z=0;for(let c=0;c<u.length;c++){const k=u[c];z+=(k-A)*(k-A)}z/=u.length;return Math.sqrt(z)}function G(u,A,z,c){var k=0,l=0;for(var e=A[u]+1;e<=A[u+1];e++){const a=c[e];k+=z[e]*a;l+=a}0>=l&&console.log("Exception in Natural Breaks calculation");
k/=l;l=0;for(e=A[u]+1;e<=A[u+1];e++)l+=c[e]*(z[e]-k)**2;return{sbMean:k,sbSdcm:l}}Y.createGenerateRendererClassBreaks=function(u){const {normalizationTotal:A}=u;return{classBreaks:C(u),normalizationTotal:A}};Y.createGenerateRendererUniqueValues=function(u){u=S(u);const A=[],z=u.uniqueValues.length;for(let c=0;c<z;c++){const k=u.uniqueValues[c];A.push({value:k,count:u.valueFrequency[c],label:k.toString()})}return{uniqueValues:A}};Object.defineProperty(Y,"__esModule",{value:!0})})},"esri/renderers/support/RasterSymbolizer":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/colorUtils ../../core/JSONSupport ../../core/Logger ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../layers/support/RasterInfo ../../layers/support/rasterFunctions/pixelUtils ../../layers/support/rasterFunctions/surfaceUtils ./colorRampUtils".split(" "),
function(Y,C,x,S,m,W,T,V,N,G,u,A,z,c,k){function l(f,q){const {attributeTable:b,bandCount:g}=f;return!W.isSome(b)||1<g||q&&null==b.fields.find(p=>p.name.toLowerCase()===q.toLowerCase())?!1:!0}function e(f){const {bandCount:q,colormap:b}=f;return W.isSome(b)&&b.length&&1===q}const a=m.getLogger("esri.renderers.support.RasterSymbolizer"),h={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767],u32:[0,4294967295],s32:[-2147483648,2147483647],f32:[-3.4*1E39,3.4*1E39],f64:[-Number.MAX_VALUE,
Number.MAX_VALUE]};S=function(f){function q(g){return f.call(this,g)||this}Y._inheritsLoose(q,f);var b=q.prototype;b.bind=function(){const {rendererJSON:g}=this;if(!g)return!1;this.lookup={rendererJSON:{}};let p;switch(g.type){case "uniqueValue":p=this._updateUVRenderer(g);break;case "rasterColormap":p=this._updateColormapRenderer(g);break;case "rasterStretch":p=this._updateStretchRenderer(g);break;case "classBreaks":p=this._updateClassBreaksRenderer(g);break;case "rasterShadedRelief":p=this._updateShadedReliefRenderer(g)}return p};
b.symbolize=function(g){let p=g&&g.pixelBlock;if(!this.isValidPixelBlock(p))return p;if(g.simpleStretchParams&&"rasterStretch"===this.rendererJSON.type)return this.simpleStretch(p,g.simpleStretchParams);try{3<p.pixels.length&&(p=z.extractBands(p,[0,1,2]));let H;switch(this.rendererJSON.type){case "uniqueValue":case "rasterColormap":H=this._symbolize_colormap(p);break;case "classBreaks":H=this._symbolize_classBreaks(p);break;case "rasterStretch":H=this._symbolize_stretch(p,g.bandIds);break;case "rasterShadedRelief":({extent:g}=
g),H=this._symbolize_shadedRelief(p,{isGCS:g.spatialReference.isGeographic,resolution:{x:(g.xmax-g.xmin)/p.width,y:(g.ymax-g.ymin)/p.height}})}return H}catch(H){return a.error("symbolize",H.message),p}};b.simpleStretch=function(g,p){if(!this.isValidPixelBlock(g))return g;try{return 3<g.pixels.length&&(g=z.extractBands(g,[0,1,2])),z.stretch(g,p)}catch(H){return a.error("symbolize",H.message),g}};b.generateWebGLParameters=function(g){if(-1<["uniqueValue","rasterColormap","classBreaks"].indexOf(this.rendererJSON.type)){var p;
const {indexedColormap:K,offset:U}=(null==(p=this.lookup)?void 0:p.colormapLut)||{};return{colormap:K,colormapOffset:U,type:"lut"}}const {pixelBlock:H,isGCS:y,resolution:r,bandIds:Q}=g;({rendererJSON:g}=this);return"rasterStretch"===g.type?this.generateStretchWebGLParams(H,g,Q):"rasterShadedRelief"===g.type?this.generateShadedReliefWebGLParams(g,y,r):null};b._isLUTChanged=function(g){if(!this.lookup||!this.lookup.rendererJSON)return!0;if("colorRamp"in this.rendererJSON){const p=this.rendererJSON.colorRamp;
if(g)return JSON.stringify(p)!==JSON.stringify(this.lookup.rendererJSON.colorRamp);({...this.rendererJSON});({...this.lookup.rendererJSON})}return JSON.stringify(this.rendererJSON)!==JSON.stringify(this.lookup.rendererJSON)};b._symbolize_colormap=function(g){return this._isLUTChanged()&&!this.bind()?g:z.colorize(g,this.lookup.colormapLut)};b._symbolize_classBreaks=function(g){const p=-1<["u8","u16","s8","s16"].indexOf(this.rasterInfo.pixelType);return this._isLUTChanged()&&!this.bind()?g:p?z.colorize(g,
this.lookup.colormapLut):z.remapColor(g,this.lookup.remapLut)};b._symbolize_stretch=function(g,p){const {pixelType:H,bandCount:y}=this.rasterInfo,r=this.rendererJSON,Q=-1<["u8","u16","s8","s16"].indexOf(H);let K;var {dra:U}=r;var F=r.useGamma?r.gamma:null;if("histogramEqualization"===r.stretchType){var t=U?null:this.lookup.histogramLut;p=this.getStretchCutoff(r,g,p,!t);F=z.stretch(g,{...p,gamma:F});F=z.lookupPixels(F,{lut:U?p.histogramLut:t,offset:0})}else if(Q){if(U)U=this.getStretchCutoff(r,g,p),
K=z.createStretchLUT({pixelType:H,...U,gamma:F});else{if(this._isLUTChanged()&&!this.bind())return g;K=this.lookup?this.lookup.stretchLut:null}if(!K)return g;1<y&&(null==p?void 0:p.length)===g.pixels.length&&(null==(t=K)?void 0:t.lut.length)===y&&(K={lut:p.map(v=>K.lut[v]),offset:K.offset});F=z.lookupPixels(g,K)}else U=this.getStretchCutoff(r,g,p),F=z.stretch(g,{...U,gamma:F});if(r.colorRamp){if(this._isLUTChanged(!0)&&!this.bind())return g;F=z.colorize(F,this.lookup.colormapLut)}return F};b._symbolize_shadedRelief=
function(g,p){var H,y,r=this.rendererJSON;p=c.hillshade(g,{...r,...p});if(!r.colorRamp||this._isLUTChanged(!0)&&!this.bind())return p;r=this.lookup?this.lookup.hsvMap:null;if(!r)return p;const Q=null!=(H=null==(y=W.unwrap(this.rasterInfo.statistics))?void 0:y[0])?H:{min:0,max:8E3};c.tintHillshade(p,g,r,Q);return p};b._updateUVRenderer=function(g){const {bandCount:p,attributeTable:H,pixelType:y}=this.rasterInfo,r=g.field1;if(!r)return!1;var Q=1===p&&["u8","s8"].includes(y);if(!l(this.rasterInfo,r)&&
!Q)return!1;const K=[];if(H){const U=H.fields.filter(F=>"value"===F.name.toLowerCase())[0];if(!U)return!1;H.features.forEach(F=>{var t,v=g.uniqueValueInfos.filter(J=>String(J.value)===String(F.attributes[r]))[0];(v=null==v?void 0:null==(t=v.symbol)?void 0:t.color)&&K.push([F.attributes[U.name]].concat(v))})}else{if("value"!==r.toLowerCase())return!1;g.uniqueValueInfos.forEach(U=>{var F;const t=null==U?void 0:null==(F=U.symbol)?void 0:F.color;t&&K.push([parseInt(""+U.value,10)].concat(t))})}if(0===
K.length)return!1;Q=z.createColormapLUT({colormap:K});this.lookup={rendererJSON:g,colormapLut:Q};return this.canRenderInWebGL=!0};b._updateColormapRenderer=function(g){if(!e(this.rasterInfo))return!1;var p=g.colormapInfos.map(H=>[H.value].concat(H.color)).sort((H,y)=>H[0]-y[0]);if(!p||0===p.length)return!1;p=z.createColormapLUT({colormap:p});this.lookup={rendererJSON:g,colormapLut:p};return this.canRenderInWebGL=!0};b._updateShadedReliefRenderer=function(g){if("elevation"!==this.rasterInfo.dataType)return!1;
if(g.colorRamp){var p=k.convertColorRampToColormap(g.colorRamp,256,!0);p=z.createColormapLUT({colormap:p});const H=[],y=p.indexedColormap;for(let r=0;r<y.length;r+=4){const Q=x.toHSV({r:y[r],g:y[r+1],b:y[r+2]});H.push([Q.h/60,Q.s/100,255*Q.v/100])}this.lookup={rendererJSON:g,colormapLut:p,hsvMap:H}}else this.lookup=null;return this.canRenderInWebGL=!0};b._updateClassBreaksRenderer=function(g){var p=-1<["u8","u16","s8","s16"].indexOf(this.rasterInfo.pixelType),H=g.classBreakInfos;if(null==H||!H.length)return!1;
H=H.sort((U,F)=>U.classMaxValue-F.classMaxValue);const y=H[H.length-1];var r=g.minValue;if(!p){p=[];for(var Q=0;Q<H.length;Q++){var K;p.push({value:null!=(K=H[Q].classMinValue)?K:r,mappedColor:H[Q].symbol.color});r=H[Q].classMaxValue}p.push({value:y.classMaxValue,mappedColor:y.symbol.color});this.lookup={rendererJSON:g,remapLut:p};this.canRenderInWebGL=!1;return!0}K=[];r=Math.floor(g.minValue);for(p=0;p<H.length;p++){for(Q=H[p];r<Q.classMaxValue;r++)K.push([r].concat(Q.symbol.color));r=Math.ceil(Q.classMaxValue)}y.classMaxValue===
r&&K.push([y.classMaxValue].concat(y.symbol.color));H=z.createColormapLUT({colormap:K,fillUnspecified:!1});this.lookup={rendererJSON:g,colormapLut:H};return this.canRenderInWebGL=!0};b._isHistogramRequired=function(g){return"percentClip"===g||"histogramEqualization"===g};b._isValidRasterStatistics=function(g){return W.isSome(g)&&0<g.length&&null!=g[0].min&&null!=g[0].max};b._updateStretchRenderer=function(g){var p;let {stretchType:H,dra:y}=g;if(!("none"===H||null!=(p=g.statistics)&&p.length||this._isValidRasterStatistics(this.rasterInfo.statistics)||
y))return!1;var r=W.unwrap(g.histograms||this.rasterInfo.histograms);!this._isHistogramRequired(g.stretchType)||null!=r&&r.length||y||(H="minMax");const {gamma:Q,useGamma:K,colorRamp:U}=g;p=this.rasterInfo.pixelType;const F=!y&&-1<["u8","u16","s8","s16"].indexOf(p);"histogramEqualization"===H?(p=r.map(t=>z.createHistogramEqualizationLUT(t)),this.lookup={rendererJSON:g,histogramLut:p}):F&&(r=this.getStretchCutoff(g),p=z.createStretchLUT({pixelType:p,...r,gamma:K?Q:null}),this.lookup={rendererJSON:g,
stretchLut:p});U&&(p=k.convertColorRampToColormap(U,256,!0),this.lookup||(this.lookup={rendererJSON:g}),this.lookup.colormapLut=z.createColormapLUT({colormap:p}),this.lookup.rendererJSON=g);return this.canRenderInWebGL=!0};b.getStretchCutoff=function(g,p,H,y){var r,Q,K,U=g.stretchType;if(g.dra)if("minMax"===U&&p.statistics)p=p.statistics.map(R=>[R.minValue,R.maxValue,0,0]);else{var F=z.estimateStatisticsHistograms(p);p=F.statistics;F=F.histograms}else{var t;p=0<(null==(t=g.statistics)?void 0:t.length)?
g.statistics:W.unwrap(this.rasterInfo.statistics);F=g.histograms||W.unwrap(this.rasterInfo.histograms)}!this._isHistogramRequired(U)||null!=(r=F)&&r.length||(U="minMax");t=(null==(Q=p)?void 0:Q.length)||(null==(K=F)?void 0:K.length)||this.rasterInfo.bandCount;Q=[];K=[];let v;let J,Z,n;p&&!Array.isArray(p[0])&&(p=p.map(R=>[R.min,R.max,R.avg,R.stddev]));switch(U){case "none":p=h[this.rasterInfo.pixelType]||h.f32;for(r=0;r<t;r++)Q[r]=p[0],K[r]=p[1];break;case "minMax":for(r=0;r<t;r++)Q[r]=p[r][0],K[r]=
p[r][1];break;case "standardDeviation":for(r=0;r<t;r++)Q[r]=p[r][2]-g.numberOfStandardDeviations*p[r][3],K[r]=p[r][2]+g.numberOfStandardDeviations*p[r][3],Q[r]<p[r][0]&&(Q[r]=p[r][0]),K[r]>p[r][1]&&(K[r]=p[r][1]);break;case "histogramEqualization":for(r=0;r<t;r++)Q[r]=F[r].min,K[r]=F[r].max;break;case "percentClip":for(r=0;r<F.length;r++){p=F[r];J=new Uint32Array(p.size);var d=p.counts;v=0;t=(p.max-p.min)/p.size;Z=-.5===p.min&&1===t?.5:0;for(n=0;n<p.size;n++)v+=d[n],J[n]=v;d=g.minPercent*v/100;for(n=
0;n<p.size;n++)if(J[n]>d){Q[r]=p.min+t*(n+Z);break}d=(1-g.maxPercent/100)*v;for(n=p.size-2;0<=n;n--)if(J[n]<d){K[r]=p.min+t*(n+2-Z);break}}break;default:for(r=0;r<t;r++)Q[r]=p[r][0],K[r]=p[r][1]}let D;"histogramEqualization"===U?(U=F[0].size||256,g=0,y&&(D=F.map(R=>z.createHistogramEqualizationLUT(R)))):(U=g.max||255,g=g.min||0);return this.getSelectedBandCutoffs({minCutOff:Q,maxCutOff:K,outMax:U,outMin:g,histogramLut:D},H)};b.getSelectedBandCutoffs=function(g,p){if(null==p||0===p.length)return g;
const H=Math.max.apply(null,p),{minCutOff:y,maxCutOff:r,outMin:Q,outMax:K,histogramLut:U}=g;return y.length===p.length||y.length<=H?g:{minCutOff:p.map(F=>y[F]),maxCutOff:p.map(F=>r[F]),histogramLut:U?p.map(F=>U[F]):null,outMin:Q,outMax:K}};b.generateStretchWebGLParams=function(g,p,H){var y;let r=null,Q=null;var K=this.lookup&&this.lookup.colormapLut;p.colorRamp&&K&&(r=K.indexedColormap,Q=K.offset);"histogramEqualization"===p.stretchType&&(p={...p,stretchType:"minMax"});({gamma:K}=p);const U=!!(p.useGamma&&
K&&K.some(n=>1!==n)),{minCutOff:F,maxCutOff:t,outMin:v,outMax:J}=this.getStretchCutoff(p,g,H);p=null==(y=g)?void 0:y.getPlaneCount();2===p&&(g=g.clone(),g.statistics=[g.statistics[0]],g.pixels=[g.pixels[0]]);g=Math.min(3,(null==H?void 0:H.length)||p||this.rasterInfo.bandCount);H=new Float32Array(g);y=r||U?1:255;for(p=0;p<g;p++)H[p]=(J-v)/(t[p]-F[p])/y;const Z=new Float32Array(g);if(U)for(p=0;p<g;p++)Z[p]=1<K[p]?2<K[p]?6.5+(K[p]-2)**2.5:6.5+100*(2-K[p])**4:1;return{bandCount:g,outMin:v/y,outMax:J/
y,minCutOff:F,maxCutOff:t,factor:H,useGamma:U,gamma:U?K:[1,1,1],gammaCorrection:U?Z:[1,1,1],colormap:r,colormapOffset:Q,type:"stretch"}};b.generateShadedReliefWebGLParams=function(g,p,H){var y,r,Q;let K=null,U=null;const F=this.lookup&&this.lookup.colormapLut;g.colorRamp&&F&&(K=F.indexedColormap,U=F.offset);p=c.calculateHillshadeParams({...g,isGCS:p,resolution:H});H=null==(y=W.unwrap(this.rasterInfo.statistics))?void 0:y[0];return{...p,minValue:null!=(r=null==H?void 0:H.min)?r:0,maxValue:null!=(Q=
null==H?void 0:H.max)?Q:8E3,hillshadeType:"traditional"===g.hillshadeType?0:1,type:"hillshade",colormap:K,colormapOffset:U}};b.isValidPixelBlock=function(g){return!!(g&&g.pixels&&0<g.pixels.length&&0!==g.validPixelCount)};return q}(S.JSONSupport);C.__decorate([T.property({json:{write:!0}})],S.prototype,"rendererJSON",void 0);C.__decorate([T.property({type:A,json:{write:!0}})],S.prototype,"rasterInfo",void 0);C.__decorate([T.property({json:{write:!0}})],S.prototype,"lookup",void 0);C.__decorate([T.property()],
S.prototype,"canRenderInWebGL",void 0);return S=C.__decorate([u.subclass("esri.renderers.support.RasterSymbolizer")],S)})},"esri/layers/support/rasterFunctions/pixelUtils":function(){define(["exports","../PixelBlock"],function(Y,C){function x(c,k){c=Math.min(Math.max(c,-100),100);k=Math.min(Math.max(k,-100),100);let l,e;const a=new Uint8Array(256);for(l=0;256>l;l++)0<c&&100>c?e=(200*l-25500+510*k)/(2*(100-c))+128:0>=c&&-100<c?e=(200*l-25500+510*k)*(100+c)/2E4+128:100===c?(e=200*l-25500+256*(100-c)+
510*k,e=0<e?255:0):-100===c&&(e=128),a[l]=255<e?255:0>e?0:e;return a}function S(c,k,l,e,a,h,f,q){return{xmin:a<=l*c?0:a<l*c+c?a-l*c:c,ymin:h<=e*k?0:h<e*k+k?h-e*k:k,xmax:a+f<=l*c?0:a+f<l*c+c?a+f-l*c:c,ymax:h+q<=e*k?0:h+q<e*k+k?h+q-e*k:k}}function m(c,k,l,e,a,h){const {width:f,height:q}=l.block,{x:b,y:g}=l.offset,{width:p,height:H}=l.mosaic;l=S(f,q,e,a,b,g,p,H);let y=0;var r=0;if(h){var Q=h.hasGCSSShiftTransform?360:h.halfWorldWidth,K=f*h.resolutionX,U=h.startX+e*K;K=U+K;U<Q&&K>Q?r=h.rightPadding:U>=
Q&&(y=h.leftMargin-h.rightPadding,r=0)}l.xmax-=r;if("number"===typeof k)for(h=l.ymin;h<l.ymax;h++)for(r=(a*q+h-g)*p+(e*f-b)+y,Q=l.xmin;Q<l.xmax;Q++)c[r+Q]=k;else for(h=l.ymin;h<l.ymax;h++)for(r=(a*q+h-g)*p+(e*f-b)+y,Q=h*f,U=l.xmin;U<l.xmax;U++)c[r+U]=k[Q+U]}function W(c,k,l,e,a){var h=c.filter(K=>z(K))[0];if(null==h)return null;const f=e?e.width:k.width,q=e?e.height:k.height;var b=h.width,g=h.height;const p=k.width/b,H=k.height/g;k={offset:l||{x:0,y:0},mosaic:e||k,block:{width:b,height:g}};l=h.pixelType;
e=C.getPixelArrayConstructor(l);b=h.pixels.length;h=[];for(var y=0;y<b;y++){g=new e(f*q);for(let K=0;K<H;K++)for(let U=0;U<p;U++){var r=c[K*p+U];z(r)&&(r=r.pixels[y],m(g,r,k,U,K,a))}h.push(g)}let Q;if(c.some(K=>null==K||K.mask&&0<K.mask.length))for(Q=new Uint8Array(f*q),e=0;e<H;e++)for(b=0;b<p;b++)(y=(g=c[e*p+b])?g.mask:null)?m(Q,y,k,b,e,a):g?m(Q,1,k,b,e,a):m(Q,0,k,b,e,a);c=new C({width:f,height:q,pixels:h,pixelType:l,mask:Q});c.updateStatistics();return c}function T(c){if(!z(c))return null;const k=
c.clone(),{width:l,height:e,pixels:a,mask:h}=c;var f=a[0];c=k.pixels[0];for(let g=2;g<e-1;g++){const p=new Map;for(var q=g-2;q<g+2;q++)for(var b=0;4>b;b++){const H=q*l+b;G(p,f[H],h?h[H]:1)}c[g*l]=V(p);c[g*l+1]=c[g*l+2]=c[g*l];for(q=3;q<l-1;q++)b=(g-2)*l+q+1,G(p,f[b],h?h[b]:1),b=(g-1)*l+q+1,G(p,f[b],h?h[b]:1),b=g*l+q+1,G(p,f[b],h?h[b]:1),b=(g+1)*l+q+1,G(p,f[b],h?h[b]:1),b=(g-2)*l+q-3,N(p,f[b],h?h[b]:1),b=(g-1)*l+q-3,N(p,f[b],h?h[b]:1),b=g*l+q-3,N(p,f[b],h?h[b]:1),b=(g+1)*l+q-3,N(p,f[b],h?h[b]:1),c[g*
l+q]=V(p);c[g*l+q+1]=c[g*l+q]}for(f=0;f<l;f++)c[f]=c[l+f]=c[2*l+f],c[(e-1)*l+f]=c[(e-2)*l+f];k.updateStatistics();return k}function V(c){if(0===c.size)return 0;let k=0,l=-1,e=0;const a=c.keys();let h=a.next();for(;!h.done;)e=c.get(h.value),e>k&&(l=h.value,k=e),h=a.next();return l}function N(c,k,l){0!==l&&(l=c.get(k),1===l?c.delete(k):c.set(k,l-1))}function G(c,k,l){0!==l&&c.set(k,c.has(k)?c.get(k)+1:1)}function u(c,k,l){let {x:e,y:a}=k;const {width:h,height:f}=l;if(0===e&&0===a&&f===c.height&&h===
c.width)return c;const {width:q,height:b}=c;k=Math.max(0,a);const g=Math.max(0,e),p=Math.min(e+h,q),H=Math.min(a+f,b);if(0>p||0>H||!z(c))return null;e=Math.max(0,-e);a=Math.max(0,-a);const {pixels:y,mask:r}=c;var Q=h*f,K=y.length;const U=[];for(var F=0;F<K;F++){var t=y[F],v=C.createEmptyBand(c.pixelType,Q);for(let J=k;J<H;J++){const Z=J*q;let n=(J+a-k)*h+e;for(let d=g;d<p;d++)v[n++]=t[Z+d]}U.push(v)}Q=new Uint8Array(Q);for(K=k;K<H;K++)for(F=K*q,t=(K+a-k)*h+e,v=g;v<p;v++)Q[t++]=r?r[F+v]:1;c=new C({width:l.width,
height:l.height,pixelType:c.pixelType,pixels:U,mask:Q});c.updateStatistics();return c}function A(c,k=!0){if(!z(c))return null;const {pixels:l,width:e,height:a,mask:h,pixelType:f}=c;c=[];const q=Math.round(e/2),b=Math.round(a/2),g=a-1,p=e-1;for(var H=0;H<l.length;H++){var y=l[H],r=C.createEmptyBand(f,q*b),Q=0;for(var K=0;K<a;K+=2)for(var U=0;U<e;U+=2){var F=y[K*e+U];if(k){var t=U===p?F:y[K*e+U+1];const v=K===g?F:y[K*e+U+e],J=U===p?v:K===g?t:y[K*e+U+e+1];r[Q++]=(F+t+v+J)/4}else r[Q++]=F}c.push(r)}H=
null;if(h)for(H=new Uint8Array(q*b),y=0,r=0;r<a;r+=2)for(Q=0;Q<e;Q+=2)K=h[r*e+Q],k?(U=Q===p?K:h[r*e+Q+1],F=r===g?K:h[r*e+Q+e],t=Q===p?F:r===g?U:h[r*e+Q+e+1],H[y++]=K*U*F*t?1:0):H[y++]=K;return new C({width:q,height:b,pixelType:f,pixels:c,mask:H})}const z=function(c){return c&&"esri.layers.support.PixelBlock"===c.declaredClass&&c.pixels&&0<c.pixels.length};Y.approximateTransform=function(c,k,l,e,a="nearest"){if(!z(c))return null;"majority"===a&&(c=T(c));const {pixels:h,mask:f,pixelType:q}=c,b=c.width;
var g=c.height;c=C.getPixelArrayConstructor(q);var p=h.length;const {width:H,height:y}=k;k=e.cols;var r=e.rows;const Q=Math.ceil(H/k),K=Math.ceil(y/r);e=!1;for(var U=0;U<l.length;U+=3)-1===l[U]&&-1===l[U+1]&&-1===l[U+2]&&(e=!0);let F,t,v,J,Z,n;const d=new Float32Array(H*y),D=new Float32Array(H*y);U=0;let R,P;const X="majority"===a?0:.5;for(let L=0;L<K;L++)for(let O=0;O<Q;O++){F=12*(L*Q+O);a=l[F];t=l[F+1];v=l[F+2];J=l[F+3];Z=l[F+4];n=l[F+5];for(var B=0;B<r;B++){U=(L*r+B)*H+O*k;P=(B+.5)/r;for(var E=
0;E<B;E++)R=(E+.5)/k,d[U+E]=Math.round((a*R+t*P+v)*b-X),D[U+E]=Math.round((J*R+Z*P+n)*g-X)}F+=6;a=l[F];t=l[F+1];v=l[F+2];J=l[F+3];Z=l[F+4];n=l[F+5];for(B=0;B<r;B++)for(U=(L*r+B)*H+O*k,P=(B+.5)/r,E=B;E<k;E++)R=(E+.5)/k,d[U+E]=Math.round((a*R+t*P+v)*b-X),D[U+E]=Math.round((J*R+Z*P+n)*g-X)}l=(L,O)=>{for(let M=0;M<y;M++){F=M*H;for(let ba=0;ba<H;ba++)L[F]=0>d[F]||0>D[F]?0:O[d[F]+D[F]*b],F++}};g=[];for(r=0;r<p;r++)k=new c(H*y),l(k,h[r]),g.push(k);c=new C({width:H,height:y,pixelType:q,pixels:g});if(f)c.mask=
new Uint8Array(H*y),l(c.mask,f);else if(e)for(c.mask=new Uint8Array(H*y),p=0;p<H*y;p++)c.mask[p]=0>d[p]||0>D[p]?0:1;c.updateStatistics();return c};Y.clip=u;Y.colorize=function(c,k){if(!z(c)||!k&&(k.indexedColormap||k.indexed2DColormap))return c;const l=c.clone();var e=l.pixels;let a=l.mask;const h=l.width*l.height;if(1!==e.length)return c;const {indexedColormap:f,indexed2DColormap:q,offset:b,alphaSpecified:g}=k;k=f.length-1;c=0;e=e[0];const p=new Uint8Array(e.length),H=new Uint8Array(e.length),y=
new Uint8Array(e.length);let r=0;if(f)if(a)for(c=0;c<h;c++)a[c]&&(r=4*(e[c]-b),r<b||r>k?a[c]=0:(p[c]=f[r],H[c]=f[r+1],y[c]=f[r+2],a[c]=f[r+3]));else{a=new Uint8Array(h);for(c=0;c<h;c++)r=4*(e[c]-b),r<b||r>k?a[c]=0:(p[c]=f[r],H[c]=f[r+1],y[c]=f[r+2],a[c]=f[r+3]);l.mask=a}else if(a)for(c=0;c<h;c++)a[c]&&(k=q[e[c]],p[c]=k[0],H[c]=k[1],y[c]=k[2],a[c]=k[3]);else{a=new Uint8Array(h);for(c=0;c<h;c++)k=q[e[c]],p[c]=k[0],H[c]=k[1],y[c]=k[2],a[c]=k[3];l.mask=a}l.pixels=[p,H,y];l.statistics=null;l.pixelType=
"u8";l.maskIsAlpha=g;return l};Y.createColormapLUT=function(c){if(c){var k=c.colormap;if(k&&0!==k.length){k=k.sort((g,p)=>g[0]-p[0]);var l=0;0>k[0][0]&&(l=k[0][0]);var e=Math.max(256,k[k.length-1][0]-l+1),a=new Uint8Array(4*e),h=[],f=0,q=0,b=5===k[0].length;if(65536<e)return k.forEach(g=>{h[g[0]-l]=b?g.slice(1):g.slice(1).concat([255])}),{indexed2DColormap:h,offset:l,alphaSpecified:b};if(c.fillUnspecified)for(c=k[q],f=c[0]-l;f<e;f++)a[4*f]=c[1],a[4*f+1]=c[2],a[4*f+2]=c[3],a[4*f+3]=b?c[4]:255,f===
c[0]-l&&(c=q===k.length-1?c:k[++q]);else for(f=0;f<k.length;f++)c=k[f],q=4*(c[0]-l),a[q]=c[1],a[q+1]=c[2],a[q+2]=c[3],a[q+3]=b?c[4]:255;return{indexedColormap:a,offset:l,alphaSpecified:b}}}};Y.createContrastBrightnessLUT=x;Y.createHistogramEqualizationLUT=function(c,k=256){k=Math.min(k,256);const {size:l,counts:e}=c;c=new Uint8Array(l);var a=e.reduce((g,p)=>g+p/k,0);let h=0;var f=0;let q=0,b=a;for(let g=0;g<l;g++)if(q+=e[g],!(g<l-1&&q+e[g+1]<b)){for(;h<k-1&&b<q;)h++,b+=a;for(;f<=g;f++)c[f]=h;f=g+
1}for(a=f;a<l;a++)c[a]=k-1;return c};Y.createStretchLUT=function(c){const {minCutOff:k,maxCutOff:l,gamma:e,pixelType:a}=c,h=c.outMin||0,f=c.outMax||255;if(-1===["u8","u16","s8","s16"].indexOf(a))return null;const q=k.length;let b;let g=0;"s8"===a?g=-127:"s16"===a&&(g=-32767);let p=256;-1<["u16","s16"].indexOf(a)&&(p=65536);const H=[],y=f-h;for(b=0;b<q;b++)H[b]=l[b]-k[b];var r=e&&e.length>=q;const Q=[];if(r)for(b=0;b<q;b++)Q[b]=1<e[b]?2<e[b]?6.5+(e[b]-2)**2.5:6.5+100*(2-e[b])**4:1;let K;const U=[];
let F,t,v;if(r)for(b=0;b<q;b++){v=[];for(r=0;r<p;r++)F=r+g,K=(F-k[b])/H[b],t=1,1<e[b]&&(t-=(1/y)**(K*Q[b])),v[r]=F<l[b]&&F>k[b]?Math.floor(t*y*K**(1/e[b]))+h:F>=l[b]?f:h;U[b]=v}else for(b=0;b<q;b++){v=[];for(r=0;r<p;r++)F=r+g,v[r]=F<=k[b]?h:F>=l[b]?f:Math.floor((F-k[b])/H[b]*y)+h;U[b]=v}if(null!=c.contrastOffset)for(c=x(c.contrastOffset,c.brightnessOffset),b=0;b<q;b++)for(v=U[b],r=0;r<p;r++)v[r]=c[v[r]];return{lut:U,offset:g}};Y.estimateStatisticsFromHistograms=function(c){const k=[];for(let h=0;h<
c.length;h++){const {min:f,max:q,size:b,counts:g}=c[h];let p=0;var l=0;for(var e=0;e<b;e++)p+=g[e],l+=e*g[e];l/=p;e=0;for(var a=0;a<b;a++)e+=g[a]*(a-l)**2;a=(q-f)/b;k.push({min:f,max:q,avg:(l+.5)*a+f,stddev:Math.sqrt(e/(p-1))*a})}return k};Y.estimateStatisticsHistograms=function(c){if(!z(c))return null;c.statistics||c.updateStatistics();const {pixels:k,mask:l,pixelType:e,statistics:a}=c;c=c.width*c.height;const h=k.length;let f,q;let b;var g;const p=[],H=[];for(b=0;b<h;b++){var y=new Uint32Array(256);
var r=k[b];if("u8"===e)if(f=-.5,q=255.5,l)for(g=0;g<c;g++)l[g]&&y[r[g]]++;else for(g=0;g<c;g++)y[r[g]]++;else{f=a[b].minValue;q=a[b].maxValue;var Q=(q-f)/256;var K=new Uint32Array(257);if(l)for(g=0;g<c;g++)l[g]&&K[Math.floor((r[g]-f)/Q)]++;else for(g=0;g<c;g++)K[Math.floor((r[g]-f)/Q)]++;for(g=0;255>g;g++)y[g]=K[g];y[255]=K[255]+K[256]}p.push({min:f,max:q,size:256,counts:y});for(g=r=K=Q=0;256>g;g++)Q+=y[g],K+=g*y[g];K/=Q;for(g=0;256>g;g++)r+=y[g]*(g-K)**2;y=Math.sqrt(r/(Q-1));Q=(q-f)/256;g=(K+.5)*
Q+f;y*=Q;H.push({min:f,max:q,avg:g,stddev:y})}return{statistics:H,histograms:p}};Y.extractBands=function(c,k){if(null==k||!k.length||!z(c))return c;const l=c.pixels.length;return k&&k.some(e=>e>=l)||1===l&&1===k.length&&0===k[0]||l===k.length&&!k.some((e,a)=>e!==a)?c:new C({pixelType:c.pixelType,width:c.width,height:c.height,mask:c.mask,validPixelCount:c.validPixelCount,maskIsAlpha:c.maskIsAlpha,pixels:k.map(e=>c.pixels[e]),statistics:c.statistics&&k.map(e=>c.statistics[e])})};Y.getClipBounds=S;Y.lookupPixels=
function(c,k){if(!z(c))return null;const {pixels:l,mask:e}=c,a=c.width*c.height,h=l.length;let f=k.lut;({offset:k}=k);let q,b;f&&1===f[0].length&&(f=l.map(()=>f));const g=[];let p,H,y;if(k)if(null==e)for(q=0;q<h;q++){p=l[q];H=f[q];y=new Uint8Array(a);for(b=0;b<a;b++)y[b]=H[p[b]-k];g.push(y)}else for(q=0;q<h;q++){p=l[q];H=f[q];y=new Uint8Array(a);for(b=0;b<a;b++)e[b]&&(y[b]=H[p[b]-k]);g.push(y)}else if(null==e)for(q=0;q<h;q++){p=l[q];H=f[q];y=new Uint8Array(a);for(b=0;b<a;b++)y[b]=H[p[b]];g.push(y)}else for(q=
0;q<h;q++){p=l[q];H=f[q];y=new Uint8Array(a);for(b=0;b<a;b++)e[b]&&(y[b]=H[p[b]]);g.push(y)}c=new C({width:c.width,height:c.height,pixels:g,mask:e,pixelType:"u8"});c.updateStatistics();return c};Y.mosaic=W;Y.mosaicPixelData=function(c,k){if(!c||0===c.length)return null;var l=c.filter(H=>H.pixelBlock)[0];if(!l)return null;var e=(l.extent.xmax-l.extent.xmin)/l.pixelBlock.width;const a=(l.extent.ymax-l.extent.ymin)/l.pixelBlock.height,h=.01*Math.min(e,a),f=c.sort((H,y)=>Math.abs(H.extent.ymax-y.extent.ymax)>
h?y.extent.ymax-H.extent.ymax:Math.abs(H.extent.xmin-y.extent.xmin)>h?H.extent.xmin-y.extent.xmin:0);var q=Math.min.apply(null,f.map(H=>H.extent.xmin));const b=Math.min.apply(null,f.map(H=>H.extent.ymin)),g=Math.max.apply(null,f.map(H=>H.extent.xmax)),p=Math.max.apply(null,f.map(H=>H.extent.ymax));c={x:Math.round((k.xmin-q)/e),y:Math.round((p-k.ymax)/a)};q={width:Math.round((g-q)/e),height:Math.round((p-b)/a)};e={width:Math.round((k.xmax-k.xmin)/e),height:Math.round((k.ymax-k.ymin)/a)};if(Math.round(q.width/
l.pixelBlock.width)*Math.round(q.height/l.pixelBlock.height)!==f.length||0>c.x||0>c.y||q.width<e.width||q.height<e.height)return null;l=f.map(H=>H.pixelBlock);l=W(l,q,c,e);return{extent:k,pixelBlock:l}};Y.remapColor=function(c,k){if(!z(c))return null;c=c.clone();var {pixels:l}=c;const e=c.width*c.height,a=k.length,h=Math.floor(a/2),f=k[Math.floor(h)];l=l[0];let q,b,g,p,H,y,r=!1;const Q=new Uint8Array(e),K=new Uint8Array(e),U=new Uint8Array(e);let F=c.mask;const t=4===k[0].mappedColor.length;F||(F=
new Uint8Array(e),F.fill(t?255:1),c.mask=F);for(H=0;H<e;H++)if(F[H]){q=l[H];r=!1;y=h;b=f;g=0;for(p=a-1;1<p-g;){if(q===b.value){r=!0;break}q>b.value?g=y:p=y;y=Math.floor((g+p)/2);b=k[Math.floor(y)]}r||(q===k[g].value?(b=k[g],r=!0):q===k[p].value?(b=k[p],r=!0):q<k[g].value?(r=!1,b=null):q>k[g].value&&(q<k[p].value?(b=k[g],r=!0):p===a-1?(r=!1,b=null):(b=k[p],r=!0)));r?(Q[H]=b.mappedColor[0],K[H]=b.mappedColor[1],U[H]=b.mappedColor[2],F[H]=b.mappedColor[3]):Q[H]=K[H]=U[H]=F[H]=0}c.pixels=[Q,K,U];c.mask=
F;c.pixelType="u8";c.maskIsAlpha=t;return c};Y.resampleByMajority=T;Y.setValidBoundary=function(c,k,l){if(!z(c))return null;const {width:e,height:a}=c,h=k.x;k=k.y;const f=l.width+h;l=l.height+k;if(0>h||0>k||f>e||l>a||0===h&&0===k&&f===e&&l===a)return c;c.mask||(c.mask=new Uint8Array(e*a));const q=c.mask;for(let b=0;b<a;b++){const g=b*e;for(let p=0;p<e;p++)q[g+p]=b<k||b>=l||p<h||p>=f?0:1}c.updateStatistics();return c};Y.split=function(c,k,l){if(!z(c))return null;const {width:e,height:a}=k;let {width:h,
height:f}=c;const q=new Map,b={x:0,y:0};l=null==l?1:1+l;for(let g=0;g<l;g++){const p=Math.ceil(h/e),H=Math.ceil(f/a);for(let y=0;y<H;y++){b.y=y*a;for(let r=0;r<p;r++){b.x=r*e;const Q=u(c,b,k);q.set(`${g}/${y}/${r}`,Q)}}g<l-1&&(c=A(c));h=Math.round(h/2);f=Math.round(f/2)}return q};Y.stretch=function(c,k){if(!z(c))return null;c=c.clone();const {pixels:l,mask:e}=c,{minCutOff:a,maxCutOff:h,gamma:f}=k,q=k.outMin||0;k=k.outMax||255;const b=c.width*c.height,g=l.length;let p;let H,y,r;const Q=k-q,K=[];for(p=
0;p<g;p++)K[p]=h[p]-a[p];var U=f&&f.length>=g;const F=[];if(U)for(p=0;p<g;p++)F[p]=1<f[p]?2<f[p]?6.5+(f[p]-2)**2.5:6.5+100*(2-f[p])**4:1;if(U)if(null!=e)for(U=0;U<b;U++){if(e[U])for(p=0;p<g;p++)H=l[p][U],r=(H-a[p])/K[p],y=1,1<f[p]&&(y-=(1/Q)**(r*F[p])),l[p][U]=H<h[p]&&H>a[p]?Math.floor(y*Q*r**(1/f[p]))+q:H>=h[p]?k:q}else for(U=0;U<b;U++)for(p=0;p<g;p++)H=l[p][U],r=(H-a[p])/K[p],y=1,1<f[p]&&(y-=(1/Q)**(r*F[p])),l[p][U]=H<h[p]&&H>a[p]?Math.floor(y*Q*r**(1/f[p]))+q:H>=h[p]?k:q;else if(null!=e)for(U=
0;U<b;U++){if(e[U])for(p=0;p<g;p++)H=l[p][U],l[p][U]=H<h[p]&&H>a[p]?Math.floor((H-a[p])/K[p]*Q)+q:H>=h[p]?k:q}else for(U=0;U<b;U++)for(p=0;p<g;p++)H=l[p][U],l[p][U]=H<h[p]&&H>a[p]?Math.floor((H-a[p])/K[p]*Q)+q:H>=h[p]?k:q;c.pixelType="u8";c.updateStatistics();return c};Object.defineProperty(Y,"__esModule",{value:!0})})},"esri/layers/support/rasterFunctions/surfaceUtils":function(){define(["exports","../PixelBlock"],function(Y,C){function x(m){let {altitude:W,azimuth:T}=m;const {hillshadeType:V,pixelSizePower:N,
pixelSizeFactor:G,scalingType:u,isGCS:A,resolution:z}=m;var c="multi-directional"===V?2*m.zFactor:m.zFactor;const {x:k,y:l}=z;m=c/(8*k);var e=c/(8*l);A&&.001<c&&(m/=111E3,e/=111E3);"adjusted"===u&&(A?(m=111E3*k,e=111E3*l,m=(c+m**N*G)/(8*m),e=(c+e**N*G)/(8*e)):(m=(c+k**N*G)/(8*k),e=(c+l**N*G)/(8*l)));var a=(90-W)*Math.PI/180;c=Math.cos(a);let h=(360-T+90)*Math.PI/180,f=Math.sin(a)*Math.cos(h);a=Math.sin(a)*Math.sin(h);const q=[315,270,225,360,180,0],b=[60,60,60,60,60,90];var g=new Float32Array([3,
5,3,2,1,4]);const p=g.reduce((K,U)=>K+U);g=g.map(K=>K/p);const H="multi-directional"===V?q.length:1,y=new Float32Array(6),r=new Float32Array(6),Q=new Float32Array(6);if("multi-directional"===V)for(let K=0;K<H;K++)W=b[K],T=q[K],a=(90-W)*Math.PI/180,c=Math.cos(a),h=(360-T+90)*Math.PI/180,f=Math.sin(a)*Math.cos(h),a=Math.sin(a)*Math.sin(h),y[K]=c,r[K]=f,Q[K]=a;else y.fill(c),r.fill(f),Q.fill(a);return{resolution:z,factor:[m,e],sinZcosA:f,sinZsinA:a,cosZ:c,sinZcosAs:r,sinZsinAs:Q,cosZs:y,weights:g,hillshadeType:["traditional",
"multi-directional"].indexOf(V)}}const S=function(m){return m&&"esri.layers.support.PixelBlock"===m.declaredClass&&m.pixels&&0<m.pixels.length};Y.calculateHillshadeParams=x;Y.hillshade=function(m,W){if(!S(m))return m;const {width:T,height:V,mask:N}=m,G=new Uint8Array(T*V);N&&G.set(N);const {factor:u,sinZcosA:A,sinZsinA:z,cosZ:c,sinZcosAs:k,sinZsinAs:l,cosZs:e,weights:a}=x(W),[h,f]=u;var {hillshadeType:q}=W;const b=m.pixels[0];W=new Uint8Array(T*V);let g;for(let F=1;F<V-1;F++){const t=F*T;for(let v=
1;v<T-1;v++)if(N&&!N[t+v])W[t+v]=0;else{var p=8;if(N&&(p=N[t-T+v-1]+N[t-T+v]+N[t-T+v+1]+N[t+v-1]+N[t+v+1]+N[t+T+v-1]+N[t+T+v]+N[t+T+v+1],7>p)){W[t+v]=0;G[t+v]=0;continue}if(7===p){var H=N[t-T+v-1]?b[t-T+v-1]:b[t+v];var y=N[t-T+v]?b[t-T+v]:b[t+v];var r=N[t-T+v+1]?b[t-T+v+1]:b[t+v];p=N[t+v-1]?b[t+v-1]:b[t+v];g=N[t+v+1]?b[t+v+1]:b[t+v];var Q=N[t+T+v-1]?b[t+T+v-1]:b[t+v];var K=N[t+T+v]?b[t+T+v]:b[t+v];var U=N[t+T+v+1]?b[t+T+v+1]:b[t+v]}else H=b[t-T+v-1],y=b[t-T+v],r=b[t-T+v+1],p=b[t+v-1],g=b[t+v+1],Q=
b[t+T+v-1],K=b[t+T+v],U=b[t+T+v+1];p=(r+g+g+U-(H+p+p+Q))*h;H=(Q+K+K+U-(H+y+y+r))*f;y=Math.sqrt(1+p*p+H*H);r=0;if("traditional"===q)p=255*(c+z*H-A*p)/y,0>p&&(p=0),r=p;else for(Q=l.length,K=0;K<Q;K++)U=255*(e[K]+l[K]*H-k[K]*p)/y,0>U&&(U=0),r+=U*a[K];W[t+v]=r&255}}for(q=0;q<V;q++)W[q*T]=W[q*T+1],W[(q+1)*T-1]=W[(q+1)*T-2];for(q=1;q<T-1;q++)W[q]=W[q+T],W[q+(V-1)*T]=W[q+(V-2)*T];return new C({width:T,height:V,pixels:[W],mask:N?G:null,pixelType:"u8",validPixelCount:m.validPixelCount,statistics:[{minValue:0,
maxValue:255}]})};Y.tintHillshade=function(m,W,T,V){if(S(m)&&S(W)){var {min:N,max:G}=V;V=m.pixels[0];var {pixels:u,mask:A}=W;W=u[0];var z=255.00001/(G-N),c=new Uint8ClampedArray(W.length),k=new Uint8ClampedArray(W.length),l=new Uint8ClampedArray(W.length),e=T.length-1;for(let f=0;f<W.length;f++){if(A&&0===A[f])continue;var a=Math.floor((W[f]-N)*z);const [q,b]=T[0>a?0:a>e?e:a];var h=V[f];a=h*b;const g=a*(1-Math.abs(q%2-1));h-=a;switch(Math.floor(q)){case 0:c[f]=a+h;k[f]=g+h;l[f]=h;break;case 1:c[f]=
g+h;k[f]=a+h;l[f]=h;break;case 2:c[f]=h;k[f]=a+h;l[f]=g+h;break;case 3:c[f]=h;k[f]=g+h;l[f]=a+h;break;case 4:c[f]=g+h;k[f]=h;l[f]=a+h;break;case 5:case 6:c[f]=a+h,k[f]=h,l[f]=g+h}}m.pixels=[c,k,l];m.updateStatistics()}};Object.defineProperty(Y,"__esModule",{value:!0})})},"esri/rest/imageService":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../request ../core/maybe ../geometry/support/normalizeUtils ./utils ./support/ImageIdentifyResult ./support/ImageSampleResult".split(" "),function(Y,
C,x,S,m,W,T,V){function N(l){const e=null==l?void 0:l.time;if(e&&(null!=e.start||null!=e.end)){const a=[];null!=e.start&&a.push(e.start);null!=e.end&&-1===a.indexOf(e.end)&&a.push(e.end);l.time=a.join(",")}}function G(l,e,a){return u.apply(this,arguments)}function u(){u=C._asyncToGenerator(function*(l,e,a){l=W.parseUrl(l);var h=yield m.normalizeCentralMeridian(e.geometry?[e.geometry]:[]);e=e.toJSON();N(e);h=h&&h[0];S.isSome(h)&&(e.geometry=h.toJSON());l=W.encode({...l.query,f:"json",...e});return W.asValidOptions(l,
a)});return u.apply(this,arguments)}function A(){A=C._asyncToGenerator(function*(l,e,a){e=yield G(l,e,a);l=W.parseUrl(l);({data:l}=yield x(`${l.path}/computeStatisticsHistograms`,e));({statistics:e}=l);null!=e&&e.length&&e.forEach(h=>{h.avg=h.mean;h.stddev=h.standardDeviation});return{statistics:e,histograms:l.histograms}});return A.apply(this,arguments)}function z(){z=C._asyncToGenerator(function*(l,e,a){e=yield G(l,e,a);l=W.parseUrl(l);({data:l}=yield x(`${l.path}/computeHistograms`,e));return{histograms:l.histograms}});
return z.apply(this,arguments)}function c(){c=C._asyncToGenerator(function*(l,e,a){var h,f,q=e.toJSON();N(q);null!=(h=q.outFields)&&h.length&&(q.outFields=q.outFields.join(","));e=yield m.normalizeCentralMeridian(e.geometry);e=null==e?void 0:e[0];S.isSome(e)&&(q.geometry=e.toJSON());l=W.parseUrl(l);q=W.encode({...l.query,f:"json",...q});a=W.asValidOptions(q,a);({data:a}=yield x(`${l.path}/getSamples`,a));a=null==a?void 0:null==(f=a.samples)?void 0:f.map(b=>{const g="NaN"===b.value||""===b.value?null:
b.value.split(" ").map(p=>Number(p));return{...b,pixelValue:g}});return V.fromJSON({samples:a})});return c.apply(this,arguments)}function k(){k=C._asyncToGenerator(function*(l,e,a){const h=W.parseUrl(l);return m.normalizeCentralMeridian(e.geometry?[e.geometry]:[]).then(f=>{var q=e.toJSON();f=f&&f[0];S.isSome(f)&&(q.geometry=JSON.stringify(f.toJSON()));q=W.encode({...h.query,f:"json",...q});q=W.asValidOptions(q,a);return x(h.path+"/identify",q)}).then(f=>T.fromJSON(f.data))});return k.apply(this,arguments)}
Y.computeHistograms=function(l,e,a){return z.apply(this,arguments)};Y.computeStatisticsHistograms=function(l,e,a){return A.apply(this,arguments)};Y.getSamples=function(l,e,a){return c.apply(this,arguments)};Y.identify=function(l,e,a){return k.apply(this,arguments)};Object.defineProperty(Y,"__esModule",{value:!0})})},"esri/rest/support/ImageIdentifyResult":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../geometry/Point ./FeatureSet".split(" "),
function(Y,C,x,S,m,W,T,V,N,G,u){x=function(A){function z(){var c=A.apply(this,arguments)||this;c.catalogItemVisibilities=null;c.catalogItems=null;c.location=null;c.name=null;c.objectId=null;c.processedValues=null;c.properties=null;c.value=null;return c}Y._inheritsLoose(z,A);return z}(x.JSONSupport);C.__decorate([S.property({json:{write:!0}})],x.prototype,"catalogItemVisibilities",void 0);C.__decorate([S.property({type:u,json:{write:!0}})],x.prototype,"catalogItems",void 0);C.__decorate([S.property({type:G,
json:{write:!0}})],x.prototype,"location",void 0);C.__decorate([S.property({json:{write:!0}})],x.prototype,"name",void 0);C.__decorate([S.property({json:{write:!0}})],x.prototype,"objectId",void 0);C.__decorate([S.property({json:{write:!0}})],x.prototype,"processedValues",void 0);C.__decorate([S.property({json:{write:!0}})],x.prototype,"properties",void 0);C.__decorate([S.property({json:{write:!0}})],x.prototype,"value",void 0);return x=C.__decorate([N.subclass("esri.rest.support.ImageIdentifyResult")],
x)})},"esri/rest/support/ImageSampleResult":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ./ImageSample".split(" "),function(Y,C,x,S,m,W,T,V,N,G){x=function(u){function A(){var z=u.apply(this,arguments)||this;z.samples=null;return z}Y._inheritsLoose(A,u);return A}(x.JSONSupport);
C.__decorate([S.property({type:[G],json:{write:!0}})],x.prototype,"samples",void 0);return x=C.__decorate([N.subclass("esri.rest.support.ImageSampleResult")],x)})},"esri/rest/support/ImageSample":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../geometry/Point".split(" "),
function(Y,C,x,S,m,W,T,V,N,G){x=function(u){function A(){var z=u.apply(this,arguments)||this;z.attributes=null;z.location=null;z.locationId=null;z.rasterId=null;z.resolution=null;z.pixelValue=null;return z}Y._inheritsLoose(A,u);return A}(x.JSONSupport);C.__decorate([S.property({json:{write:!0}})],x.prototype,"attributes",void 0);C.__decorate([S.property({type:G,json:{write:!0}})],x.prototype,"location",void 0);C.__decorate([S.property({json:{write:!0}})],x.prototype,"locationId",void 0);C.__decorate([S.property({json:{write:!0}})],
x.prototype,"rasterId",void 0);C.__decorate([S.property({json:{write:!0}})],x.prototype,"resolution",void 0);C.__decorate([S.property({json:{write:!0}})],x.prototype,"pixelValue",void 0);return x=C.__decorate([N.subclass("esri.rest.support.ImageSample")],x)})},"esri/rest/support/ImageHistogramParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../TimeExtent ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/has ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/support/jsonUtils ../../layers/support/MosaicRule ../../layers/support/RasterFunction ../../geometry/Point".split(" "),
function(Y,C,x,S,m,W,T,V,N,G,u,A,z,c,k,l,e){var a;m=a=function(h){function f(){var b=h.apply(this,arguments)||this;b.geometry=null;b.mosaicRule=null;b.renderingRule=null;b.pixelSize=null;b.raster=void 0;b.timeExtent=null;return b}Y._inheritsLoose(f,h);var q=f.prototype;q.writeGeometry=function(b,g,p){null!=b&&(g.geometryType=c.getJsonType(b),g[p]=b.toJSON())};q.clone=function(){return new a(W.clone({geometry:this.geometry,mosaicRule:this.mosaicRule,renderingRule:this.renderingRule,pixelSize:this.pixelSize,
raster:this.raster,timeExtent:this.timeExtent}))};return f}(m.JSONSupport);C.__decorate([T.property({types:x.geometryTypes,json:{read:c.fromJSON}})],m.prototype,"geometry",void 0);C.__decorate([z.writer("geometry")],m.prototype,"writeGeometry",null);C.__decorate([T.property({type:k,json:{write:!0}})],m.prototype,"mosaicRule",void 0);C.__decorate([T.property({type:l,json:{write:!0}})],m.prototype,"renderingRule",void 0);C.__decorate([T.property({type:e,json:{write:!0}})],m.prototype,"pixelSize",void 0);
C.__decorate([T.property({json:{write:!0}})],m.prototype,"raster",void 0);C.__decorate([T.property({type:S,json:{read:{source:"time"},write:{target:"time"}}})],m.prototype,"timeExtent",void 0);return m=a=C.__decorate([A.subclass("esri.rest.support.ImageHistogramParameters")],m)})},"esri/rest/support/ImageIdentifyParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../TimeExtent ../../core/JSONSupport ../../core/lang ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/has ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/Point ../../geometry/support/jsonUtils ../../layers/support/MosaicRule ../../layers/support/RasterFunction".split(" "),
function(Y,C,x,S,m,W,T,V,N,G,u,A,z,c,k,l,e){var a;S=a=function(h){function f(){var b=h.apply(this,arguments)||this;b.geometry=null;b.renderingRules=null;b.pixelSize=null;b.returnGeometry=!0;b.returnCatalogItems=!0;b.returnPixelValues=!0;b.maxItemCount=null;b.timeExtent=null;b.raster=void 0;b.viewId=void 0;return b}Y._inheritsLoose(f,h);var q=f.prototype;q.writeGeometry=function(b,g,p){null!=b&&(g.geometryType=k.getJsonType(b),g[p]=JSON.stringify(b.toJSON()))};q.writeMosaicRule=function(b,g,p){null!=
b&&(g[p]=JSON.stringify(b.toJSON()))};q.writeRenderingRule=function(b,g,p){null!=b&&(g[p]=JSON.stringify(b.toJSON()))};q.writeRenderingRules=function(b,g,p){null!=b&&(g[p]=JSON.stringify(b.map(H=>H.toJSON())))};q.writePixelSize=function(b,g,p){null!=b&&(g[p]=JSON.stringify(b))};q.writeTimeExtent=function(b,g,p){if(null!=b){const H=W.isSome(b.start)?b.start.getTime():null;b=W.isSome(b.end)?b.end.getTime():null;g[p]=null!=H?null!=b?`${H},${b}`:`${H}`:null}};q.clone=function(){return new a(m.clone({geometry:this.geometry,
mosaicRule:this.mosaicRule,renderingRule:this.renderingRule,pixelSize:this.pixelSize,returnGeometry:this.returnGeometry,returnCatalogItems:this.returnCatalogItems,returnPixelValues:this.returnPixelValues,maxItemCount:this.maxItemCount,raster:this.raster,viewId:this.viewId,timeExtent:this.timeExtent}))};Y._createClass(f,[{key:"mosaicRule",set:function(b){b&&b.mosaicMethod&&(b=l.fromJSON({...b.toJSON(),mosaicMethod:b.mosaicMethod,mosaicOperation:b.mosaicOperation}));this._set("mosaicRule",b)}},{key:"renderingRule",
set:function(b){b&&b.rasterFunction&&(b=e.fromJSON({...b.toJSON(),rasterFunction:b.rasterFunction,rasterFunctionArguments:b.rasterFunctionArguments}));this._set("renderingRule",b)}}]);return f}(S.JSONSupport);C.__decorate([T.property({json:{write:!0}})],S.prototype,"geometry",void 0);C.__decorate([z.writer("geometry")],S.prototype,"writeGeometry",null);C.__decorate([T.property({type:l,json:{write:!0}})],S.prototype,"mosaicRule",null);C.__decorate([z.writer("mosaicRule")],S.prototype,"writeMosaicRule",
null);C.__decorate([T.property({type:e,json:{write:!0}})],S.prototype,"renderingRule",null);C.__decorate([z.writer("renderingRule")],S.prototype,"writeRenderingRule",null);C.__decorate([T.property({type:[e],json:{write:!0}})],S.prototype,"renderingRules",void 0);C.__decorate([z.writer("renderingRules")],S.prototype,"writeRenderingRules",null);C.__decorate([T.property({type:c,json:{write:!0}})],S.prototype,"pixelSize",void 0);C.__decorate([z.writer("pixelSize")],S.prototype,"writePixelSize",null);
C.__decorate([T.property({type:Boolean,json:{write:!0}})],S.prototype,"returnGeometry",void 0);C.__decorate([T.property({type:Boolean,json:{write:!0}})],S.prototype,"returnCatalogItems",void 0);C.__decorate([T.property({type:Boolean,json:{write:!0}})],S.prototype,"returnPixelValues",void 0);C.__decorate([T.property({type:Number,json:{write:!0}})],S.prototype,"maxItemCount",void 0);C.__decorate([T.property({type:x,json:{write:{target:"time"}}})],S.prototype,"timeExtent",void 0);C.__decorate([z.writer("timeExtent")],
S.prototype,"writeTimeExtent",null);C.__decorate([T.property({json:{write:!0}})],S.prototype,"raster",void 0);C.__decorate([T.property({json:{write:!0}})],S.prototype,"viewId",void 0);return S=a=C.__decorate([A.subclass("esri.rest.support.ImageIdentifyParameters")],S)})},"esri/rest/support/ImageSampleParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../TimeExtent ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/has ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/support/jsonUtils ../../layers/support/MosaicRule ../../layers/support/rasterEnums ../../geometry/Point ../../geometry/Multipoint".split(" "),
function(Y,C,x,S,m,W,T,V,N,G,u,A,z,c,k,l,e,a){var h;m=h=function(f){function q(){var g=f.apply(this,arguments)||this;g.geometry=null;g.interpolation="nearest";g.mosaicRule=null;g.outFields=null;g.pixelSize=null;g.returnFirstValueOnly=!0;g.sampleDistance=null;g.sampleCount=null;g.sliceId=null;g.timeExtent=null;return g}Y._inheritsLoose(q,f);var b=q.prototype;b.writeGeometry=function(g,p,H){null!=g&&(p.geometryType=c.getJsonType(g),p[H]=g.toJSON())};b.clone=function(){return new h(W.clone({geometry:this.geometry,
locations:this.locations,interpolation:this.interpolation,mosaicRule:this.mosaicRule,outFields:this.outFields,raster:this.raster,returnFirstValueOnly:this.returnFirstValueOnly,sampleDistance:this.sampleDistance,sampleCount:this.sampleCount,sliceId:this.sliceId,pixelSize:this.pixelSize,timeExtent:this.timeExtent}))};Y._createClass(q,[{key:"locations",set:function(g){if(null!=g&&g.length){const p=new a({spatialReference:g[0].spatialReference});p.points=g.map(H=>[H.x,H.y]);this._set("locations",g);this.geometry=
p}}}]);return q}(m.JSONSupport);C.__decorate([T.property({types:x.geometryTypes,json:{read:c.fromJSON}})],m.prototype,"geometry",void 0);C.__decorate([z.writer("geometry")],m.prototype,"writeGeometry",null);C.__decorate([T.property({type:String,json:{type:l.interpolationKebab.jsonValues,read:l.interpolationKebab.read,write:l.interpolationKebab.write}})],m.prototype,"interpolation",void 0);C.__decorate([T.property({type:k,json:{write:!0}})],m.prototype,"mosaicRule",void 0);C.__decorate([T.property({type:[String],
json:{write:!0}})],m.prototype,"outFields",void 0);C.__decorate([T.property({type:e,json:{write:!0}})],m.prototype,"pixelSize",void 0);C.__decorate([T.property({type:String,json:{write:!0}})],m.prototype,"raster",void 0);C.__decorate([T.property({type:Boolean,json:{write:!0}})],m.prototype,"returnFirstValueOnly",void 0);C.__decorate([T.property({type:Number,json:{write:!0}})],m.prototype,"sampleDistance",void 0);C.__decorate([T.property({type:Number,json:{write:!0}})],m.prototype,"sampleCount",void 0);
C.__decorate([T.property({type:Number,json:{write:!0}})],m.prototype,"sliceId",void 0);C.__decorate([T.property({type:S,json:{read:{source:"time"},write:{target:"time"}}})],m.prototype,"timeExtent",void 0);return m=h=C.__decorate([A.subclass("esri.rest.support.ImageSampleParameters")],m)})},"esri/tasks/ImageIdentifyTask":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/jsonMap ../core/accessorSupport/decorators/subclass ../rest/imageService ./Task".split(" "),
function(Y,C,x,S,m,W,T,V,N,G){x=function(u){function A(){return u.apply(this,arguments)||this}Y._inheritsLoose(A,u);A.prototype.execute=function(z,c){return N.identify(this.url,z,c)};return A}(G);return x=C.__decorate([V.subclass("esri.tasks.ImageIdentifyTask")],x)})},"*noref":1}});
define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../PopupTemplate ../core/maybe ../core/MultiOriginJSONSupport ../core/promiseUtils ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/jsonMap ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ./Layer ./mixins/ArcGISImageService ./mixins/ArcGISService ./mixins/BlendLayer ./mixins/CustomParametersMixin ./mixins/OperationalLayer ./mixins/PortalLayer ./mixins/RefreshableLayer ./mixins/ScaleRangeLayer ./mixins/TemporalLayer ./support/commonProperties ../support/popupUtils".split(" "),function(Y,
C,x,S,m,W,T,V,N,G,u,A,z,c,k,l,e,a,h,f,q,b,g,p,H){m=function(y){function r(...K){K=y.call(this,...K)||this;K.legendEnabled=!0;K.isReference=null;K.operationalLayerType="ArcGISImageServiceLayer";K.popupEnabled=!0;K.popupTemplate=null;K.type="imagery";return K}Y._inheritsLoose(r,y);var Q=r.prototype;Q.normalizeCtorArgs=function(K,U){return"string"===typeof K?{url:K,...U}:K};Q.load=function(K){const U=S.isSome(K)?K.signal:null;this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Image Service"]},
K).catch(W.throwIfAbortError).then(()=>this._fetchService(U)));return Promise.resolve(this)};Q.writeOperationalLayerType=function(K,U,F){var t;K="vector-field"===(null==(t=this.renderer)?void 0:t.type);U[F]=K?"ArcGISImageServiceVectorLayer":"ArcGISImageServiceLayer"};Q.createPopupTemplate=function(K){const U=this.rasterFields,F=this.title,t=new Set;var v=!1;let J=!1;this.capabilities&&(J=(v=this.capabilities.operations.supportsQuery&&this.fields&&0<this.fields.length)&&("esriImageServiceDataTypeVector-UV"===
this.serviceDataType||"esriImageServiceDataTypeVector-MagDir"===this.serviceDataType));const Z=new Set;v&&(Z.add("raster.itempixelvalue"),J&&Z.add("raster.magnitude").add("raster.direction"));for(const n of U)v=n.name.toLowerCase(),Z.has(v)||-1<v.indexOf("raster.servicepixelvalue.")||t.add(n.name);return H.createPopupTemplate({fields:U,title:F},{...K,visibleFieldNames:t})};Q.redraw=function(){this.emit("redraw")};Y._createClass(r,[{key:"defaultPopupTemplate",get:function(){return this.createPopupTemplate()}}]);
return r}(e.BlendLayer(g.TemporalLayer(q.RefreshableLayer(b.ScaleRangeLayer(h.OperationalLayer(f.PortalLayer(k.ArcGISImageService(a.CustomParametersMixin(l.ArcGISService(m.MultiOriginJSONMixin(c)))))))))));C.__decorate([T.property(p.legendEnabled)],m.prototype,"legendEnabled",void 0);C.__decorate([T.property({type:["show","hide"]})],m.prototype,"listMode",void 0);C.__decorate([T.property({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],m.prototype,"isReference",
void 0);C.__decorate([T.property({type:["ArcGISImageServiceLayer"],json:{origins:{"web-map":{type:["ArcGISImageServiceLayer","ArcGISImageServiceVectorLayer"],read:!1,write:{target:"layerType",ignoreOrigin:!0}}}}})],m.prototype,"operationalLayerType",void 0);C.__decorate([z.writer("web-map","operationalLayerType")],m.prototype,"writeOperationalLayerType",null);C.__decorate([T.property(p.popupEnabled)],m.prototype,"popupEnabled",void 0);C.__decorate([T.property({type:x,json:{read:{source:"popupInfo"},
write:{target:"popupInfo"}}})],m.prototype,"popupTemplate",void 0);C.__decorate([T.property({readOnly:!0})],m.prototype,"defaultPopupTemplate",null);C.__decorate([T.property({readOnly:!0,json:{read:!1}})],m.prototype,"type",void 0);return m=C.__decorate([A.subclass("esri.layers.ImageryLayer")],m)});