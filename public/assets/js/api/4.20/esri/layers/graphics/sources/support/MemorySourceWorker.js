// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.20/esri/copyright.txt for details.
//>>built
require({cache:{"esri/layers/graphics/featureConversionUtils":function(){define("exports ../../core/Error ../../core/Logger ../../geometry/support/jsonUtils ./OptimizedFeature ./OptimizedFeatureSet ./OptimizedGeometry".split(" "),function(p,e,w,M,h,t,l){function E(m,F){return m?F?4:3:F?3:2}function q(m,F,U,V){if(m){if(U)return F&&V?va:na;if(F&&V)return ta}else if(F&&V)return na;return Oa}function u({scale:m,translate:F},U){return Math.round((U-F[0])/m[0])}function H({scale:m,translate:F},U){return Math.round((F[1]-
U)/m[1])}function X({scale:m,translate:F},U){return U*m[0]+F[0]}function n({scale:m,translate:F},U){return F[1]-U*m[1]}function y(m){m=m.coords;return{x:m[0],y:m[1]}}function A(m,F){m.coords[0]=F.x;m.coords[1]=F.y;return m}function f(m){m=m.coords;return{x:m[0],y:m[1],z:m[2]}}function C(m,F){m.coords[0]=F.x;m.coords[1]=F.y;m.coords[2]=F.z;return m}function B(m){m=m.coords;return{x:m[0],y:m[1],m:m[2]}}function T(m,F){m.coords[0]=F.x;m.coords[1]=F.y;m.coords[2]=F.m;return m}function I(m){m=m.coords;
return{x:m[0],y:m[1],z:m[2],m:m[3]}}function P(m,F){m.coords[0]=F.x;m.coords[1]=F.y;m.coords[2]=F.z;m.coords[3]=F.m;return m}function L(m,F){return m&&F?P:m?C:F?T:A}function G(m,F,U,V,K){U=L(U,V);for(const N of F){const {geometry:Z,attributes:da}=N;let ja;Z&&(ja=U(new l,Z));m.push(new h(ja,da,null,da[K]))}return m}function Y(m,F,U,V){for(const K of F){const {geometry:N,attributes:Z}=K;let da;N&&(da=aa(N,U,V));m.push({attributes:Z,geometry:da})}return m}function aa(m,F,U){if(!m)return null;const V=
E(F,U),K=[];for(let N=0;N<m.coords.length;N+=V){const Z=[];for(let da=0;da<V;da++)Z.push(m.coords[N+da]);K.push(Z)}return F?U?{points:K,hasZ:F,hasM:U}:{points:K,hasZ:F}:U?{points:K,hasM:U}:{points:K}}function k(m,F,U,V,K){U=E(U,V);for(const N of F){F=N.geometry;V=N.attributes;let Z;F&&(Z=x(new l,F,U));m.push(new h(Z,V,null,V[K]))}return m}function x(m,F,U=E(F.hasZ,F.hasM)){m.lengths[0]=F.points.length;const V=m.coords;let K=0;for(const N of F.points)for(F=0;F<U;F++)V[K++]=N[F];return m}function O(m,
F,U){if(!m)return null;const V=E(F,U),{coords:K,lengths:N}=m;m=[];let Z=0;for(const da of N){const ja=[];for(let la=0;la<da;la++){const ra=[];for(let ua=0;ua<V;ua++)ra.push(K[Z++]);ja.push(ra)}m.push(ja)}return F?U?{paths:m,hasZ:F,hasM:U}:{paths:m,hasZ:F}:U?{paths:m,hasM:U}:{paths:m}}function R(m,F,U,V,K){U=E(U,V);for(const N of F){F=N.geometry;V=N.attributes;let Z;F&&(Z=D(new l,F,U));m.push(new h(Z,V,null,V[K]))}return m}function D(m,F,U=E(F.hasZ,F.hasM)){const {lengths:V,coords:K}=m;let N=0;for(const Z of F.paths){for(const da of Z)for(F=
0;F<U;F++)K[N++]=da[F];V.push(Z.length)}return m}function g(m,F,U){if(!m)return null;const V=E(F,U),{coords:K,lengths:N}=m;m=[];let Z=0;for(const da of N){const ja=[];for(let la=0;la<da;la++){const ra=[];for(let ua=0;ua<V;ua++)ra.push(K[Z++]);ja.push(ra)}m.push(ja)}return F?U?{rings:m,hasZ:F,hasM:U}:{rings:m,hasZ:F}:U?{rings:m,hasM:U}:{rings:m}}function b(m,F,U,V,K){for(const N of F){F=N.geometry;const Z=N.centroid,da=N.attributes;let ja;F&&(ja=z(new l,F,U,V));Z?m.push(new h(ja,da,A(new l,Z),da[K])):
m.push(new h(ja,da,null,da[K]))}return m}function z(m,F,U=F.hasZ,V=F.hasM){J(m,F.rings,U,V);return m}function J(m,F,U,V){U=E(U,V);const {lengths:K,coords:N}=m;V=0;K.length=N.length=0;for(const Z of F){for(const da of Z)for(F=0;F<U;F++)N[V++]=da[F];K.push(Z.length)}return m}function W(m,F,U,V,K,N){m.length=0;if(!U){for(const Z of F)m.push(new h(null,Z.attributes,null,Z.attributes[N]));return m}switch(U){case "esriGeometryPoint":return G(m,F,V,K,N);case "esriGeometryMultipoint":return k(m,F,V,K,N);
case "esriGeometryPolyline":return R(m,F,V,K,N);case "esriGeometryPolygon":return b(m,F,V,K,N);default:Ka.error("convertToFeatureSet:unknown-geometry",new e(`Unable to parse unknown geometry type '${U}'`)),m.length=0}return m}function ba(m,F,U,V){m=m&&("coords"in m?m:m.geometry);if(!m)return null;switch(F){case "esriGeometryPoint":return F=y,U&&V?F=I:U?F=f:V&&(F=B),F(m);case "esriGeometryMultipoint":return aa(m,U,V);case "esriGeometryPolyline":return O(m,U,V);case "esriGeometryPolygon":return g(m,
U,V);default:Ka.error("convertToGeometry:unknown-geometry",new e(`Unable to parse unknown geometry type '${F}'`))}}function ia(m,F,U,V,K){m.length=0;switch(U){case "esriGeometryPoint":var N=y;V&&K?N=I:V?N=f:K&&(N=B);for(var Z of F){const {geometry:da,attributes:ja}=Z;V=da?N(da):null;m.push({attributes:ja,geometry:V})}break;case "esriGeometryMultipoint":return Y(m,F,V,K);case "esriGeometryPolyline":for(const da of F){const {geometry:ja,attributes:la}=da;let ra;ja&&(ra=O(ja,V,K));m.push({attributes:la,
geometry:ra})}break;case "esriGeometryPolygon":for(N of F){const {geometry:da,attributes:ja,centroid:la}=N;let ra;da&&(ra=g(da,V,K));la?(Z=y(la),m.push({attributes:ja,centroid:Z,geometry:ra})):m.push({attributes:ja,geometry:ra})}break;default:Ka.error("convertToFeatureSet:unknown-geometry",new e(`Unable to parse unknown geometry type '${U}'`))}return m}function ma(m,F,U,V,K,N,Z=U,da=V){m.lengths.length&&(m.lengths.length=0);m.coords.length&&(m.coords.length=0);if(!F||!F.coords.length)return null;
K=Ha[K];const {coords:ja,lengths:la}=F;F=E(U,V);const ra=E(U&&Z,V&&da);U=q(U,V,Z,da);if(!la.length)return U(m.coords,ja,0,0,u(N,ja[0]),H(N,ja[1])),m.lengths.length&&(m.lengths.length=0),m.coords.length=F,m;let ua,za=0,ya,Ba=0;for(const Na of la){if(Na<K)continue;let Ea=0;ya=Ba;da=V=u(N,ja[za]);ua=Z=H(N,ja[za+1]);U(m.coords,ja,ya,za,da,ua);Ea++;za+=F;ya+=ra;for(let Fa=1;Fa<Na;Fa++,za+=F)if(da=u(N,ja[za]),ua=H(N,ja[za+1]),da!==V||ua!==Z)U(m.coords,ja,ya,za,da-V,ua-Z),ya+=ra,Ea++,V=da,Z=ua;Ea>=K&&(m.lengths.push(Ea),
Ba=ya)}m.coords.length=Ba;return m.coords.length?m:null}function qa(m,F,U,V,K,N,Z){let da=V,ja=0;for(let ra=N+U;ra<Z;ra+=U){{var la=F[ra];const ua=F[ra+1],za=F[Z],ya=F[Z+1];let Ba=F[N],Na=F[N+1],Ea=za-Ba,Fa=ya-Na;if(0!==Ea||0!==Fa){const Ga=((la-Ba)*Ea+(ua-Na)*Fa)/(Ea*Ea+Fa*Fa);1<Ga?(Ba=za,Na=ya):0<Ga&&(Ba+=Ea*Ga,Na+=Fa*Ga)}Ea=la-Ba;Fa=ua-Na;la=Ea*Ea+Fa*Fa}la>da&&(ja=ra,da=la)}da>V&&(ja-N>U&&qa(m,F,U,V,K,N,ja),K(m,F,m.length,ja,F[ja],F[ja+1]),Z-ja>U&&qa(m,F,U,V,K,ja,Z))}function wa(m,F,U,V,K){const {coords:N,
lengths:Z}=F,da=U?V?va:na:V?na:Oa;U=E(U,V);if(!N.length)return m!==F&&(m.lengths.length=0,m.coords.length=0),m;if(!Z.length)return da(m.coords,N,0,0,X(K,N[0]),n(K,N[1])),m!==F&&(m.lengths.length=0,m.coords.length=U),m;const [ja,la]=K.scale;V=0;for(let ra=0;ra<Z.length;ra++){const ua=Z[ra];m.lengths[ra]=ua;let za=X(K,N[V]),ya=n(K,N[V+1]);da(m.coords,N,V,V,za,ya);V+=U;for(let Ba=1;Ba<ua;Ba++,V+=U)za+=N[V]*ja,ya-=N[V+1]*la,da(m.coords,N,V,V,za,ya)}m!==F&&(m.lengths.length=Z.length,m.coords.length=N.length);
return m}function Ca(m,F,U,V){let K=0,N=m[V*F],Z=m[V*(F+1)];for(let da=1;da<U;da++){const ja=N+m[V*(F+da)],la=Z+m[V*(F+da)+1],ra=(ja-N)*(la+Z);N=ja;Z=la;K+=ra}return.5*K}const Ka=w.getLogger("esri.tasks.support.optimizedFeatureSet"),Ha={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},Oa=(m,F,U,V,K,N)=>{m[U]=K;m[U+1]=N},na=(m,F,U,V,K,N)=>{m[U]=K;m[U+1]=N;m[U+2]=F[V+2]},ta=(m,F,U,V,K,N)=>{m[U]=K;m[U+1]=N;m[U+2]=F[V+3]},va=(m,F,U,V,K,N)=>{m[U]=K;m[U+1]=N;m[U+
2]=F[V+2];m[U+3]=F[V+3]},c=[],r=[];p.convertFromFeature=function(m,F,U,V,K){c[0]=m;[m]=W(r,c,F,U,V,K);c.length=r.length=0;return m};p.convertFromFeatureSet=function(m,F){const U=new t,{hasM:V,hasZ:K,features:N,objectIdFieldName:Z,spatialReference:da,geometryType:ja,exceededTransferLimit:la,transform:ra,fields:ua}=m;ua&&(U.fields=ua);U.geometryType=ja;U.objectIdFieldName=Z||F;U.spatialReference=da;if(!U.objectIdFieldName)return Ka.error(new e("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),
U;N&&W(U.features,N,ja,K,V,U.objectIdFieldName);la&&(U.exceededTransferLimit=la);V&&(U.hasM=V);K&&(U.hasZ=K);ra&&(U.transform=ra);return U};p.convertFromFeatures=W;p.convertFromGeometry=function(m,F,U){if(!m)return null;const V=new l;"hasZ"in m&&null==F&&(F=m.hasZ);"hasM"in m&&null==U&&(U=m.hasM);if(M.isPoint(m))return L(null!=F?F:null!=m.z,null!=U?U:null!=m.m)(V,m);if(M.isPolygon(m))return z(V,m,F,U);if(M.isPolyline(m))return D(V,m,E(F,U));if(M.isMultipoint(m))return x(V,m,E(F,U));Ka.error("convertFromGeometry:unknown-geometry",
new e(`Unable to parse unknown geometry type '${m}'`))};p.convertFromGraphics=function(m,F,U,V,K,N){const Z=m.length;switch(U){case "esriGeometryPoint":G(m,F,V,K,N);break;case "esriGeometryMultipoint":k(m,F,V,K,N);break;case "esriGeometryPolyline":R(m,F,V,K,N);break;case "esriGeometryPolygon":b(m,F,V,K,N);break;default:Ka.error("convertToFeatureSet:unknown-geometry",new e(`Unable to parse unknown geometry type '${U}'`))}for(V=0;V<F.length;V++)m[V+Z].geometryType=U,m[V+Z].insertAfter=F[V].insertAfter,
m[V+Z].groupId=F[V].groupId;return m};p.convertFromMultipoint=x;p.convertFromMultipointFeatures=k;p.convertFromNestedArray=J;p.convertFromPoint=function(m,F,U=L(null!=F.z,null!=F.m)){return U(m,F)};p.convertFromPointFeatures=G;p.convertFromPolygon=z;p.convertFromPolyline=D;p.convertFromPolylineFeatures=R;p.convertToFeature=function(m,F,U,V){r[0]=m;ia(c,r,F,U,V);m=c[0];c.length=r.length=0;return m};p.convertToFeatureSet=function(m){const {objectIdFieldName:F,spatialReference:U,transform:V,fields:K,
hasM:N,hasZ:Z,features:da,geometryType:ja,exceededTransferLimit:la,uniqueIdField:ra,queryGeometry:ua,queryGeometryType:za}=m;m=ia([],da,ja,Z,N);const ya=ba(ua,za,!1,!1);m={features:m,fields:K,geometryType:ja,objectIdFieldName:F,spatialReference:U,uniqueIdField:ra,queryGeometry:ya};V&&(m.transform=V);la&&(m.exceededTransferLimit=la);N&&(m.hasM=N);Z&&(m.hasZ=Z);return m};p.convertToFeatures=ia;p.convertToGeometry=ba;p.convertToMultipoint=aa;p.convertToMultipointFeatures=Y;p.convertToPoint=function(m,
F,U){return m?F?U?I(m):f(m):U?B(m):y(m):null};p.convertToPolygon=g;p.convertToPolyline=O;p.deltaDecodeGeometry=function(m,F){const U=m.clone(),V=m.coords;m=m.lengths;let K=0;for(let da=0;da<m.length;da++){const ja=m[da];var N=V[F*K],Z=V[F*K+1];for(let la=1;la<ja;la++)N+=V[F*(K+la)],Z+=V[F*(K+la)+1],U.coords[F*(K+la)]=N,U.coords[F*(K+la)+1]=Z;K+=ja}return U};p.deltaEncodeGeometry=function(m,F){const U=m.clone(),V=m.coords;m=m.lengths;let K=0;for(let Z=0;Z<m.length;Z++){const da=m[Z];let ja=V[F*K];
var N=V[F*K+1];for(let la=1;la<da;la++){const ra=V[F*(K+la)],ua=V[F*(K+la)+1];N=ua-N;U.coords[F*(K+la)]=ra-ja;U.coords[F*(K+la)+1]=N;ja=ra;N=ua}K+=da}return U};p.generalizeOptimizedGeometry=function(m,F,U,V,K,N,Z=U,da=V){m.lengths.length&&(m.lengths.length=0);m.coords.length&&(m.coords.length=0);if(!F||!F.coords.length)return null;K=Ha[K];const {coords:ja,lengths:la}=F;F=E(U,V);const ra=E(U&&Z,V&&da);U=q(U,V,Z,da);if(!la.length)return U(m.coords,ja,0,0,ja[0],ja[1]),m.lengths.length&&(m.lengths.length=
0),m.coords.length=F,m;V=0;N*=N;for(const ua of la){if(ua<K){V+=ua*F;continue}Z=m.coords.length/ra;da=V;const za=V+(ua-1)*F;U(m.coords,ja,m.coords.length,da,ja[da],ja[da+1]);qa(m.coords,ja,F,N,U,da,za);U(m.coords,ja,m.coords.length,za,ja[za],ja[za+1]);da=m.coords.length/ra-Z;da>=K?m.lengths.push(da):m.coords.length=Z*ra;V+=ua*F}return m.coords.length?m:null};p.getBoundsOptimizedGeometry=function(m,F,U,V){if(!F||!F.coords||!F.coords.length)return null;U=E(U,V);let K=V=Number.POSITIVE_INFINITY,N=Number.NEGATIVE_INFINITY,
Z=Number.NEGATIVE_INFINITY;if(F&&F.coords){F=F.coords;for(let da=0;da<F.length;da+=U){const ja=F[da],la=F[da+1];V=Math.min(V,ja);N=Math.max(N,ja);K=Math.min(K,la);Z=Math.max(Z,la)}}m[0]=V;m[1]=K;m[2]=N;m[3]=Z;return m};p.getQuantizedArea=function(m,F){const {coords:U,lengths:V}=m;let K=m=0;for(let N=0;N<V.length;N++)K+=Ca(U,m,V[N],F),m+=N;return Math.abs(K)};p.getQuantizedBoundsOptimizedGeometry=function(m,F,U,V){U=E(U,V);const {lengths:K,coords:N}=F;V=F=Number.POSITIVE_INFINITY;let Z=Number.NEGATIVE_INFINITY,
da=Number.NEGATIVE_INFINITY,ja=0;for(const la of K){let ra=N[ja],ua=N[ja+1];F=Math.min(ra,F);V=Math.min(ua,V);Z=Math.max(ra,Z);da=Math.max(ua,da);ja+=U;for(let za=1;za<la;za++,ja+=U){const ya=N[ja],Ba=N[ja+1];ra+=ya;ua+=Ba;0>ya&&(F=Math.min(F,ra));0<ya&&(Z=Math.max(Z,ra));0>Ba?V=Math.min(V,ua):0<Ba&&(da=Math.max(da,ua))}}m[0]=F;m[1]=V;m[2]=Z;m[3]=da;return m};p.getSignedQuantizedRingArea=Ca;p.quantizeOptimizedFeatureSet=function(m,F){const {geometryType:U,features:V,hasM:K,hasZ:N}=F;if(!m)return F;
for(let Z=0;Z<V.length;Z++){const da=V[Z],ja=da.weakClone();ja.geometry=new l;ma(ja.geometry,da.geometry,K,N,U,m);da.centroid&&(ja.centroid=new l,ma(ja.centroid,da.centroid,K,N,"esriGeometryPoint",m));V[Z]=ja}F.transform=m;return F};p.quantizeOptimizedGeometry=ma;p.quantizeX=u;p.quantizeY=H;p.removeCollinearVectices=function(m,F,U,V,K){if(!F||!F.coords||!F.coords.length)return null;U=Ha[U];const {coords:N,lengths:Z}=F;F=q(V,K,V,K);V=E(V,K);let da=K=0,ja=0,la=0;for(const za of Z){da=la;F(m.coords,
N,da,K,N[K],N[K+1]);K+=V;var ra=N[K];let ya=N[K+1],Ba=ra,Na=ya;var ua=ya/ra;da+=V;F(m.coords,N,da,K,Ba,Na);K+=V;for(let Ea=2;Ea<za;Ea++){ra=N[K];ya=N[K+1];const Fa=ya/ra,Ga=ua===Fa||!isFinite(ua)&&!isFinite(Fa);ua=Ga&&isFinite(Fa)?0<=ua&&0<=Fa||0>=ua&&0>=Fa:0<=Na&&0<=ya||0>=Na&&0>=ya;Ga&&ua?(Ba+=ra,Na+=ya):(Ba=ra,Na=ya,da+=V);F(m.coords,N,da,K,Ba,Na);K+=V;ua=Fa}da+=V;ra=(da-la)/V;ra>=U&&(m.lengths[ja]=ra,la=da,ja++)}m.coords.length>la&&(m.coords.length=la);m.lengths.length>ja&&(m.lengths.length=ja);
return m.coords.length&&m.lengths.length?m:null};p.removeZMValues=function(m,F,U,V,K,N){const Z=E(U,V);U=q(U,V,K,N);V=F.coords;m.coords.length=0;m.lengths.length=0;m.lengths.push(...F.lengths);for(F=0;F<V.length;F+=Z)U(m.coords,V,m.coords.length,F,V[F],V[F+1]);return m};p.unquantizeOptimizedFeatureSet=function(m){const {transform:F,features:U,hasM:V,hasZ:K}=m;if(!F)return m;for(const N of U)N.geometry&&wa(N.geometry,N.geometry,V,K,F),N.centroid&&wa(N.centroid,N.centroid,V,K,F);m.transform=null;return m};
p.unquantizeOptimizedGeometry=wa;p.unquantizeX=X;p.unquantizeY=n;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/graphics/OptimizedFeature":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(p){return function(){function e(w=null,M={},h,t){this.geohashY=this.geohashX=this.displayId=0;this.geometry=w;M&&(this.attributes=M);h&&(this.centroid=h);null!=t&&(this.objectId=t)}e.prototype.weakClone=function(){const w=new e(this.geometry,this.attributes,this.centroid,this.objectId);
w.displayId=this.displayId;w.geohashX=this.geohashX;w.geohashY=this.geohashY;return w};p._createClass(e,[{key:"hasGeometry",get:function(){return!(!this.geometry||!this.geometry.coords||!this.geometry.coords.length)}}]);return e}()})},"esri/layers/graphics/OptimizedFeatureSet":function(){define(function(){return function(){function p(){this.spatialReference=this.geometryType=this.geometryProperties=this.geohashFieldName=this.globalIdFieldName=this.objectIdFieldName=null;this.hasM=this.hasZ=!1;this.features=
[];this.fields=[];this.transform=null;this.exceededTransferLimit=!1;this.queryGeometry=this.queryGeometryType=this.uniqueIdField=null}p.prototype.weakClone=function(){const e=new p;e.objectIdFieldName=this.objectIdFieldName;e.globalIdFieldName=this.globalIdFieldName;e.geohashFieldName=this.geohashFieldName;e.geometryProperties=this.geometryProperties;e.geometryType=this.geometryType;e.spatialReference=this.spatialReference;e.hasZ=this.hasZ;e.hasM=this.hasM;e.features=this.features;e.fields=this.fields;
e.transform=this.transform;e.exceededTransferLimit=this.exceededTransferLimit;e.uniqueIdField=this.uniqueIdField;e.queryGeometry=this.queryGeometry;e.queryGeometryType=this.queryGeometryType;return e};return p}()})},"esri/layers/graphics/OptimizedGeometry":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(p){return function(){function e(M=[],h=[],t=!1){this.lengths=null!=M?M:[];this.coords=null!=h?h:[];this.hasIndeterminateRingOrder=t}var w=e.prototype;w.forEachVertex=function(M){let h=
0;this.lengths.length||M(this.coords[0],this.coords[1]);for(let t=0;t<this.lengths.length;t++){const l=this.lengths[t];for(let E=0;E<l;E++)M(this.coords[2*(E+h)],this.coords[2*(E+h)+1]);h+=l}};w.clone=function(){return new e(this.lengths.slice(),this.coords.slice(),this.hasIndeterminateRingOrder)};p._createClass(e,[{key:"isPoint",get:function(){return 0===this.lengths.length}}]);return e}()})},"esri/layers/graphics/objectIdUtils":function(){define(["exports"],function(p){p.findLastObjectIdFromFeatures=
function(e,w){let M=0;for(const t of w){var h;w=null==(h=t.attributes)?void 0:h[e];"number"===typeof w&&isFinite(w)&&(M=Math.max(M,w))}return M};p.initialObjectId=1;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/graphics/data/FeatureStore":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../core/Evented ../../../core/Logger ../../../core/maybe ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../featureConversionUtils ./BoundsStore ./optimizedFeatureQueryEngineAdapter".split(" "),
function(p,e,w,M,h,t,l,E,q,u){return function(){function H(n){this.geometryInfo=n;this._boundsStore=new q.BoundsStore;this._featuresById=new Map;this._markedIds=new Set;this.events=new w;this.featureAdapter=u.optimizedFeatureQueryEngineAdapter}var X=H.prototype;X.add=function(n){this._add(n);this._emitChanged()};X.addMany=function(n){for(const y of n)this._add(y);this._emitChanged()};X.clear=function(){this._featuresById.clear();this._boundsStore.clear();this._emitChanged()};X.removeById=function(n){n=
this._featuresById.get(n);if(!n)return null;this._remove(n);this._emitChanged();return n};X.removeManyById=function(n){this._boundsStore.invalidateIndex();for(const y of n)(n=this._featuresById.get(y))&&this._remove(n);this._emitChanged()};X.forEachBounds=function(n,y,A){for(const f of n)(n=this._boundsStore.get(f.objectId))&&y(t.fromRect(A,n))};X.getFeature=function(n){return this._featuresById.get(n)};X.has=function(n){return this._featuresById.has(n)};X.forEach=function(n){this._featuresById.forEach(y=>
n(y))};X.forEachInBounds=function(n,y){this._boundsStore.forEachInBounds(n,A=>{y(this._featuresById.get(A))})};X.startMarkingUsedFeatures=function(){this._boundsStore.invalidateIndex();this._markedIds.clear()};X.sweep=function(){let n=!1;this._featuresById.forEach((y,A)=>{this._markedIds.has(A)||(n=!0,this._remove(y))});this._markedIds.clear();n&&this._emitChanged()};X._emitChanged=function(){this.events.emit("changed",void 0)};X._add=function(n){if(n){var y=n.objectId;if(null==y)M.getLogger("esri.layers.graphics.data.FeatureStore").error(new e("featurestore:invalid-feature",
"feature id is missing",{feature:n}));else{var A=this._featuresById.get(y);this._markedIds.add(y);if(A){n.displayId=A.displayId;var f=this._boundsStore.get(y);this._boundsStore.delete(y)}else if(h.isSome(this.onFeatureAdd))this.onFeatureAdd(n);n.geometry&&n.geometry.coords&&n.geometry.coords.length?(f=E.getBoundsOptimizedGeometry(f||l.create(),n.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),this._boundsStore.set(y,f)):this._boundsStore.set(y,null);this._featuresById.set(y,n)}}};X._remove=
function(n){if(h.isSome(this.onFeatureRemove))this.onFeatureRemove(n);this._markedIds.delete(n.objectId);this._boundsStore.delete(n.objectId);this._featuresById.delete(n.objectId);return n};p._createClass(H,[{key:"geometryType",get:function(){return this.geometryInfo.geometryType}},{key:"hasM",get:function(){return this.geometryInfo.hasM}},{key:"hasZ",get:function(){return this.geometryInfo.hasZ}},{key:"numFeatures",get:function(){return this._featuresById.size}},{key:"fullBounds",get:function(){if(!this.numFeatures)return null;
const n=l.create(l.NEGATIVE_INFINITY);this._featuresById.forEach(y=>{if(y=this._boundsStore.get(y.objectId))n[0]=Math.min(y[0],n[0]),n[1]=Math.min(y[1],n[1]),n[2]=Math.max(y[2],n[2]),n[3]=Math.max(y[3],n[3])});return n}},{key:"storeStatistics",get:function(){let n=0;this._featuresById.forEach(y=>{y.geometry&&y.geometry.coords&&(n+=y.geometry.coords.length)});return{featureCount:this._featuresById.size,vertexCount:n/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}}]);return H}()})},"esri/core/Evented":function(){define(["../chunks/_rollupPluginBabelHelpers",
"../chunks/tslib.es6","./Accessor","./handleUtils","./accessorSupport/decorators/subclass"],function(p,e,w,M,h){let t=function(){function l(){this._emitter=new l.EventEmitter(this)}var E=l.prototype;E.emit=function(q,u){return this._emitter.emit(q,u)};E.on=function(q,u){return this._emitter.on(q,u)};E.once=function(q,u){return this._emitter.once(q,u)};E.hasEventListener=function(q){return this._emitter.hasEventListener(q)};return l}();(function(l){let E=function(){function u(X=null){this.target=X;
this._listenersMap=null}var H=u.prototype;H.clear=function(){this._listenersMap&&this._listenersMap.clear()};H.emit=function(X,n){X=this._listenersMap&&this._listenersMap.get(X);if(!X)return!1;const y=this.target||this;[...X].forEach(A=>{A.call(y,n)});return 0<X.length};H.on=function(X,n){if(Array.isArray(X)){var y=X.map(A=>this.on(A,n));return M.handlesGroup(y)}if(-1<X.indexOf(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap||
(this._listenersMap=new Map);y=this._listenersMap.get(X)||[];y.push(n);this._listenersMap.set(X,y);return{remove:()=>{const A=this._listenersMap&&this._listenersMap.get(X)||[],f=A.indexOf(n);0<=f&&A.splice(f,1)}}};H.once=function(X,n){const y=this.on(X,A=>{y.remove();n.call(null,A)});return y};H.hasEventListener=function(X){X=this._listenersMap&&this._listenersMap.get(X);return null!=X&&0<X.length};return u}();l.EventEmitter=E;l.EventedMixin=u=>{u=function(H){function X(){var y=H.apply(this,arguments)||
this;y._emitter=new E;return y}p._inheritsLoose(X,H);var n=X.prototype;n.destroy=function(){this._emitter.clear()};n.emit=function(y,A){return this._emitter.emit(y,A)};n.on=function(y,A){return this._emitter.on(y,A)};n.once=function(y,A){return this._emitter.once(y,A)};n.hasEventListener=function(y){return this._emitter.hasEventListener(y)};return X}(u);return u=e.__decorate([h.subclass("esri.core.Evented")],u)};let q=function(u){function H(){var n=u.apply(this,arguments)||this;n._emitter=new t.EventEmitter(p._assertThisInitialized(n));
return n}p._inheritsLoose(H,u);var X=H.prototype;X.emit=function(n,y){return this._emitter.emit(n,y)};X.on=function(n,y){return this._emitter.on(n,y)};X.once=function(n,y){return this._emitter.once(n,y)};X.hasEventListener=function(n){return this._emitter.hasEventListener(n)};return H}(w);q=e.__decorate([h.subclass("esri.core.Evented")],q);l.EventedAccessor=q})(t||(t={}));return t})},"esri/geometry/support/aaBoundingBox":function(){define(["exports","../../core/maybe","../Extent","./aaBoundingRect"],
function(p,e,w,M){function h(f=y){return[f[0],f[1],f[2],f[3],f[4],f[5]]}function t(f,C,B,T,I,P,L=h()){L[0]=f;L[1]=C;L[2]=B;L[3]=T;L[4]=I;L[5]=P;return L}function l(f){return f[0]>=f[3]?0:f[3]-f[0]}function E(f){return f[1]>=f[4]?0:f[4]-f[1]}function q(f){return f[2]>=f[5]?0:f[5]-f[2]}function u(f,C){return Math.max(C[0],f[0])<=Math.min(C[3],f[3])&&Math.max(C[1],f[1])<=Math.min(C[4],f[4])&&Math.max(C[2],f[2])<=Math.min(C[5],f[5])}function H(f,C){f[0]=C[0];f[1]=C[1];f[2]=C[2];f[3]=C[3];f[4]=C[4];f[5]=
C[5];return f}function X(f){return 6===f.length}const n=[Infinity,Infinity,Infinity,-Infinity,-Infinity,-Infinity],y=[0,0,0,0,0,0],A=h();p.NEGATIVE_INFINITY=n;p.POSITIVE_INFINITY=[-Infinity,-Infinity,-Infinity,Infinity,Infinity,Infinity];p.ZERO=y;p.allFinite=function(f){for(let C=0;6>C;C++)if(!isFinite(f[C]))return!1;return!0};p.center=function(f,C=[0,0,0]){C[0]=f[0]+l(f)/2;C[1]=f[1]+E(f)/2;C[2]=f[2]+q(f)/2;return C};p.contains=function(f,C){return C[0]>=f[0]&&C[1]>=f[1]&&C[2]>=f[2]&&C[3]<=f[3]&&
C[4]<=f[4]&&C[5]<=f[5]};p.containsPoint=function(f,C){return C[0]>=f[0]&&C[1]>=f[1]&&C[2]>=f[2]&&C[0]<=f[3]&&C[1]<=f[4]&&C[2]<=f[5]};p.containsPointWithMargin=function(f,C,B){return C[0]>=f[0]-B&&C[1]>=f[1]-B&&C[2]>=f[2]-B&&C[0]<=f[3]+B&&C[1]<=f[4]+B&&C[2]<=f[5]+B};p.create=h;p.depth=E;p.diameter=function(f){const C=l(f),B=q(f);f=E(f);return Math.sqrt(C*C+B*B+f*f)};p.empty=function(f){return f?H(f,n):h(n)};p.equals=function(f,C,B){if(e.isNone(f)||e.isNone(C))return f===C;if(!X(f)||!X(C))return!1;
if(B)for(let T=0;T<f.length;T++){if(!B(f[T],C[T]))return!1}else for(B=0;B<f.length;B++)if(f[B]!==C[B])return!1;return!0};p.expandWithAABB=function(f,C){f[0]=Math.min(f[0],C[0]);f[1]=Math.min(f[1],C[1]);f[2]=Math.min(f[2],C[2]);f[3]=Math.max(f[3],C[3]);f[4]=Math.max(f[4],C[4]);f[5]=Math.max(f[5],C[5])};p.expandWithBuffer=function(f,C,B=0,T=C.length/3){let I=f[0],P=f[1],L=f[2],G=f[3],Y=f[4],aa=f[5];for(let k=0;k<T;k++)I=Math.min(I,C[B+3*k]),P=Math.min(P,C[B+3*k+1]),L=Math.min(L,C[B+3*k+2]),G=Math.max(G,
C[B+3*k]),Y=Math.max(Y,C[B+3*k+1]),aa=Math.max(aa,C[B+3*k+2]);f[0]=I;f[1]=P;f[2]=L;f[3]=G;f[4]=Y;f[5]=aa};p.expandWithNestedArray=function(f,C,B){const T=C.length;let I=f[0],P=f[1],L=f[2],G=f[3],Y=f[4],aa=f[5];if(B)for(B=0;B<T;B++){var k=C[B];I=Math.min(I,k[0]);P=Math.min(P,k[1]);L=Math.min(L,k[2]);G=Math.max(G,k[0]);Y=Math.max(Y,k[1]);aa=Math.max(aa,k[2])}else for(B=0;B<T;B++)k=C[B],I=Math.min(I,k[0]),P=Math.min(P,k[1]),G=Math.max(G,k[0]),Y=Math.max(Y,k[1]);f[0]=I;f[1]=P;f[2]=L;f[3]=G;f[4]=Y;f[5]=
aa};p.expandWithOffset=function(f,C,B,T){f[0]=Math.min(f[0],f[0]+C);f[3]=Math.max(f[3],f[3]+C);f[1]=Math.min(f[1],f[1]+B);f[4]=Math.max(f[4],f[4]+B);f[2]=Math.min(f[2],f[2]+T);f[5]=Math.max(f[5],f[5]+T)};p.expandWithRect=function(f,C){f[0]=Math.min(f[0],C[0]);f[1]=Math.min(f[1],C[1]);f[3]=Math.max(f[3],C[2]);f[4]=Math.max(f[4],C[3])};p.expandWithVec3=function(f,C){f[0]=Math.min(f[0],C[0]);f[1]=Math.min(f[1],C[1]);f[2]=Math.min(f[2],C[2]);f[3]=Math.max(f[3],C[0]);f[4]=Math.max(f[4],C[1]);f[5]=Math.max(f[5],
C[2])};p.fromExtent=function(f,C=h()){C[0]=f.xmin;C[1]=f.ymin;C[2]=f.zmin;C[3]=f.xmax;C[4]=f.ymax;C[5]=f.zmax;return C};p.fromMinMax=function(f,C,B=h()){B[0]=f[0];B[1]=f[1];B[2]=f[2];B[3]=C[0];B[4]=C[1];B[5]=C[2];return B};p.fromRect=function(f,C){f[0]=C[0];f[1]=C[1];f[2]=Number.NEGATIVE_INFINITY;f[3]=C[2];f[4]=C[3];f[5]=Number.POSITIVE_INFINITY;return f};p.fromValues=t;p.getMax=function(f,C){C[0]=f[3];C[1]=f[4];C[2]=f[5];return C};p.getMin=function(f,C){C[0]=f[0];C[1]=f[1];C[2]=f[2];return C};p.height=
q;p.intersects=u;p.intersectsClippingArea=function(f,C){return e.isNone(C)?!0:u(f,C)};p.is=X;p.isPoint=function(f){return 0===l(f)&&0===E(f)&&0===q(f)};p.maximumDimension=function(f){return Math.max(l(f),q(f),E(f))};p.offset=function(f,C,B,T,I=f){I[0]=f[0]+C;I[1]=f[1]+B;I[2]=f[2]+T;I[3]=f[3]+C;I[4]=f[4]+B;I[5]=f[5]+T;return I};p.scale=function(f,C,B=f){const T=f[0]+l(f)/2,I=f[1]+E(f)/2,P=f[2]+q(f)/2;B[0]=T+(f[0]-T)*C;B[1]=I+(f[1]-I)*C;B[2]=P+(f[2]-P)*C;B[3]=T+(f[3]-T)*C;B[4]=I+(f[4]-I)*C;B[5]=P+(f[5]-
P)*C;return B};p.set=H;p.setMax=function(f,C,B=f){B[3]=C[0];B[4]=C[1];B[5]=C[2];B!==f&&(B[0]=f[0],B[1]=f[1],B[2]=f[2]);return f};p.setMin=function(f,C,B=f){B[0]=C[0];B[1]=C[1];B[2]=C[2];B!==f&&(B[3]=f[3],B[4]=f[4],B[5]=f[5]);return B};p.size=function(f,C=[0,0,0]){C[0]=l(f);C[1]=E(f);C[2]=q(f);return C};p.toExtent=function(f,C){return isFinite(f[2])||isFinite(f[5])?new w({xmin:f[0],xmax:f[3],ymin:f[1],ymax:f[4],zmin:f[2],zmax:f[5],spatialReference:C}):new w({xmin:f[0],xmax:f[3],ymin:f[1],ymax:f[4],
spatialReference:C})};p.toRect=function(f,C){C||(C=M.create());C[0]=f[0];C[1]=f[1];C[2]=f[3];C[3]=f[4];return C};p.width=l;p.wrap=function(f,C,B,T,I,P){return t(f,C,B,T,I,P,A)};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/geometry/support/aaBoundingRect":function(){define(["exports","../../core/has","../../core/maybe","../Extent"],function(p,e,w,M){function h(y=n){return[y[0],y[1],y[2],y[3]]}function t(y){return y[0]>=y[2]?0:y[2]-y[0]}function l(y){return y[1]>=y[3]?0:y[3]-y[1]}function E(y,
A,f){return A>=y[0]&&f>=y[1]&&A<=y[2]&&f<=y[3]}function q(y,A){y[0]=A[0];y[1]=A[1];y[2]=A[2];y[3]=A[3];return y}function u(y){return 4===y.length}function H(y,A,f){return y<A?A:y>f?f:y}const X=[Infinity,Infinity,-Infinity,-Infinity],n=[0,0,0,0];p.NEGATIVE_INFINITY=X;p.POSITIVE_INFINITY=[-Infinity,-Infinity,Infinity,Infinity];p.UNIT=[0,0,1,1];p.ZERO=n;p.allFinite=function(y){for(let A=0;4>A;A++)if(!isFinite(y[A]))return!1;return!0};p.area=function(y){return t(y)*l(y)};p.center=function(y,A=[0,0]){A[0]=
(y[0]+y[2])/2;A[1]=(y[1]+y[3])/2;return A};p.clone=function(y){return[y[0],y[1],y[2],y[3]]};p.contains=function(y,A){return A[0]>=y[0]&&A[2]<=y[2]&&A[1]>=y[1]&&A[3]<=y[3]};p.containsPoint=function(y,A){return E(y,A[0],A[1])};p.containsPointObject=function(y,A){return E(y,A.x,A.y)};p.containsPointWithMargin=function(y,A,f){return A[0]>=y[0]-f&&A[1]>=y[1]-f&&A[0]<=y[2]+f&&A[1]<=y[3]+f};p.containsXY=E;p.create=h;p.diameter=function(y){const A=t(y);y=l(y);return Math.sqrt(A*A+y*y)};p.distance=function(y,
A){const f=(y[1]+y[3])/2,C=Math.max(Math.abs(A[0]-(y[0]+y[2])/2)-t(y)/2,0);y=Math.max(Math.abs(A[1]-f)-l(y)/2,0);return Math.sqrt(C*C+y*y)};p.empty=function(y){return y?q(y,X):h(X)};p.equals=function(y,A,f){if(w.isNone(y)||w.isNone(A))return y===A;if(!u(y)||!u(A))return!1;if(f)for(let C=0;C<y.length;C++){if(!f(y[C],A[C]))return!1}else for(f=0;f<y.length;f++)if(y[f]!==A[f])return!1;return!0};p.expand=function(y,A,f=y){if("length"in A)if(u(A))f[0]=Math.min(y[0],A[0]),f[1]=Math.min(y[1],A[1]),f[2]=Math.max(y[2],
A[2]),f[3]=Math.max(y[3],A[3]);else{if(2===A.length||3===A.length)f[0]=Math.min(y[0],A[0]),f[1]=Math.min(y[1],A[1]),f[2]=Math.max(y[2],A[0]),f[3]=Math.max(y[3],A[1])}else switch(A.type){case "extent":f[0]=Math.min(y[0],A.xmin);f[1]=Math.min(y[1],A.ymin);f[2]=Math.max(y[2],A.xmax);f[3]=Math.max(y[3],A.ymax);break;case "point":f[0]=Math.min(y[0],A.x),f[1]=Math.min(y[1],A.y),f[2]=Math.max(y[2],A.x),f[3]=Math.max(y[3],A.y)}return f};p.expandPointInPlace=function(y,A){A[0]<y[0]&&(y[0]=A[0]);A[0]>y[2]&&
(y[2]=A[0]);A[1]<y[1]&&(y[1]=A[1]);A[1]>y[3]&&(y[3]=A[1])};p.expandWithNestedArray=function(y,A,f=y){const C=A.length;let B=y[0],T=y[1],I=y[2];y=y[3];for(let P=0;P<C;P++){const L=A[P];B=Math.min(B,L[0]);T=Math.min(T,L[1]);I=Math.max(I,L[0]);y=Math.max(y,L[1])}f[0]=B;f[1]=T;f[2]=I;f[3]=y;return f};p.fromExtent=function(y,A=h()){A[0]=y.xmin;A[1]=y.ymin;A[2]=y.xmax;A[3]=y.ymax;return A};p.fromValues=function(y,A,f,C,B=h()){B[0]=y;B[1]=A;B[2]=f;B[3]=C;return B};p.height=l;p.intersection=function(y,A,
f=y){const C=A[0],B=A[1],T=A[2];A=A[3];f[0]=H(y[0],C,T);f[1]=H(y[1],B,A);f[2]=H(y[2],C,T);f[3]=H(y[3],B,A);return f};p.intersects=function(y,A){return Math.max(A[0],y[0])<=Math.min(A[2],y[2])&&Math.max(A[1],y[1])<=Math.min(A[3],y[3])};p.is=u;p.isPoint=function(y){return(0===t(y)||!isFinite(y[0]))&&(0===l(y)||!isFinite(y[1]))};p.offset=function(y,A,f,C=y){C[0]=y[0]+A;C[1]=y[1]+f;C[2]=y[2]+A;C[3]=y[3]+f;return C};p.pad=function(y,A,f=y){f[0]=y[0]-A;f[1]=y[1]-A;f[2]=y[2]+A;f[3]=y[3]+A;return f};p.set=
q;p.setMax=function(y,A,f=y){f[2]=A[0];f[3]=A[1];f!==y&&(f[0]=y[0],f[1]=y[1]);return y};p.setMin=function(y,A,f=y){f[0]=A[0];f[1]=A[1];f!==y&&(f[2]=y[2],f[3]=y[3]);return f};p.size=function(y,A){A[0]=y[2]-y[0];A[1]=y[3]-y[1]};p.toExtent=function(y,A){return new M({xmin:y[0],ymin:y[1],xmax:y[2],ymax:y[3],spatialReference:A})};p.width=t;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/graphics/data/BoundsStore":function(){define(["exports","../../../core/has","../../../core/libs/rbush/PooledRBush"],
function(p,e,w){function M(l,E,q){h.minX=E[0];h.minY=E[1];h.maxX=E[2];h.maxY=E[3];l.search(h,q)}const h={minX:0,minY:0,maxX:0,maxY:0};let t=function(){function l(){this._indexInvalid=!1;this._boundsToLoad=[];this._boundsById=new Map;this._idByBounds=new Map;this._index=new w.PooledRBush(9,e("csp-restrictions")?q=>({minX:q[0],minY:q[1],maxX:q[2],maxY:q[3]}):["[0]","[1]","[2]","[3]"]);this._loadIndex=()=>{if(this._indexInvalid){const q=Array(this._idByBounds.size);let u=0;this._idByBounds.forEach((H,
X)=>{q[u++]=X});this._indexInvalid=!1;this._index.clear();this._index.load(q)}else this._boundsToLoad.length&&(this._index.load(this._boundsToLoad.filter(q=>this._idByBounds.has(q))),this._boundsToLoad.length=0)}}var E=l.prototype;E.clear=function(){this._indexInvalid=!1;this._boundsToLoad.length=0;this._boundsById.clear();this._idByBounds.clear();this._index.clear()};E.delete=function(q){const u=this._boundsById.get(q);this._boundsById.delete(q);u&&(this._idByBounds.delete(u),this._indexInvalid||
this._index.remove(u))};E.forEachInBounds=function(q,u){this._loadIndex();M(this._index,q,H=>u(this._idByBounds.get(H)))};E.get=function(q){return this._boundsById.get(q)};E.has=function(q){return this._boundsById.has(q)};E.invalidateIndex=function(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)};E.set=function(q,u){if(!this._indexInvalid){const H=this._boundsById.get(q);H&&(this._index.remove(H),this._idByBounds.delete(H))}this._boundsById.set(q,u);u&&(this._idByBounds.set(u,
q),this._indexInvalid||(this._boundsToLoad.push(u),5E4<this._boundsToLoad.length&&this._loadIndex()))};return l}();p.BoundsStore=t;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/core/libs/rbush/PooledRBush":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../arrayUtils ../../maybe ../../PooledArray ../../../chunks/quickselect".split(" "),function(p,e,w,M,h,t){function l(aa,k){E(aa,0,aa.children.length,k,aa)}function E(aa,k,x,O,R){R||(R=new G([]));R.minX=Infinity;
R.minY=Infinity;R.maxX=-Infinity;R.maxY=-Infinity;for(let D=k,g;D<x;D++)g=aa.children[D],q(R,aa.leaf?O(g):g);return R}function q(aa,k){aa.minX=Math.min(aa.minX,k.minX);aa.minY=Math.min(aa.minY,k.minY);aa.maxX=Math.max(aa.maxX,k.maxX);aa.maxY=Math.max(aa.maxY,k.maxY)}function u(aa,k){return aa.minX-k.minX}function H(aa,k){return aa.minY-k.minY}function X(aa){return(aa.maxX-aa.minX)*(aa.maxY-aa.minY)}function n(aa){return aa.maxX-aa.minX+(aa.maxY-aa.minY)}function y(aa,k){return aa.minX<=k.minX&&aa.minY<=
k.minY&&k.maxX<=aa.maxX&&k.maxY<=aa.maxY}function A(aa,k){return k.minX<=aa.maxX&&k.minY<=aa.maxY&&k.maxX>=aa.minX&&k.maxY>=aa.minY}function f(aa,k,x,O,R){for(k=[k,x];k.length;){x=M.assumeNonNull(k.pop());const D=M.assumeNonNull(k.pop());if(x-D<=O)continue;const g=D+Math.ceil((x-D)/O/2)*O;t.quickselect(aa,g,D,x,R);k.push(D,g,g,x)}}let C=function(){function aa(x=9,O){this.compareMinX=u;this.compareMinY=H;this.toBBox=function(R){return R};this._maxEntries=Math.max(4,x||9);this._minEntries=Math.max(2,
Math.ceil(.4*this._maxEntries));O&&("function"===typeof O?this.toBBox=O:this._initFormat(O));this.clear()}var k=aa.prototype;k.destroy=function(){this.clear();B.prune();T.prune();I.prune();P.prune()};k.all=function(x){this._all(this.data,x)};k.search=function(x,O){let R=this.data;const D=this.toBBox;if(A(x,R))for(B.clear();R;){for(let g=0,b=R.children.length;g<b;g++){const z=R.children[g],J=R.leaf?D(z):z;A(x,J)&&(R.leaf?O(z):y(x,J)?this._all(z,O):B.push(z))}R=B.pop()}};k.collides=function(x){let O=
this.data;const R=this.toBBox;if(!A(x,O))return!1;for(B.clear();O;){for(let D=0,g=O.children.length;D<g;D++){const b=O.children[D],z=O.leaf?R(b):b;if(A(x,z)){if(O.leaf||y(x,z))return!0;B.push(b)}}O=B.pop()}return!1};k.load=function(x){if(!x.length)return this;if(x.length<this._minEntries){for(let O=0,R=x.length;O<R;O++)this.insert(x[O]);return this}x=this._build(x.slice(0,x.length),0,x.length-1,0);if(this.data.children.length)if(this.data.height===x.height)this._splitRoot(this.data,x);else{if(this.data.height<
x.height){const O=this.data;this.data=x;x=O}this._insert(x,this.data.height-x.height-1,!0)}else this.data=x;return this};k.insert=function(x){x&&this._insert(x,this.data.height-1);return this};k.clear=function(){this.data=new G([]);return this};k.remove=function(x){if(!x)return this;let O=this.data,R=null,D=0,g=!1,b;const z=this.toBBox(x);I.clear();for(P.clear();O||0<I.length;){if(!O){var J;O=M.assumeNonNull(I.pop());R=I.data[I.length-1];D=null!=(J=P.pop())?J:0;g=!0}if(O.leaf&&(b=w.indexOf(O.children,
x,O.children.length,O.indexHint),-1!==b)){O.children.splice(b,1);I.push(O);this._condense(I);break}g||O.leaf||!y(O,z)?R?(D++,O=R.children[D],g=!1):O=null:(I.push(O),P.push(D),D=0,R=O,O=O.children[0])}return this};k.toJSON=function(){return this.data};k.fromJSON=function(x){this.data=x;return this};k._all=function(x,O){for(T.clear();x;){var R;if(!0===x.leaf)for(const D of x.children)O(D);else T.pushArray(x.children);x=null!=(R=T.pop())?R:null}};k._build=function(x,O,R,D){var g=R-O+1,b=this._maxEntries;
if(g<=b)return x=new G(x.slice(O,R+1)),l(x,this.toBBox),x;D||(D=Math.ceil(Math.log(g)/Math.log(b)),b=Math.ceil(g/b**(D-1)));const z=new Y([]);z.height=D;g=Math.ceil(g/b);b=g*Math.ceil(Math.sqrt(b));for(f(x,O,R,b,this.compareMinX);O<=R;O+=b){const J=Math.min(O+b-1,R);f(x,O,J,g,this.compareMinY);for(let W=O;W<=J;W+=g)z.children.push(this._build(x,W,Math.min(W+g-1,J),D-1))}l(z,this.toBBox);return z};k._chooseSubtree=function(x,O,R,D){for(;;){D.push(O);if(!0===O.leaf||D.length-1===R)break;let g=Infinity,
b=Infinity,z=void 0;for(let J=0,W=O.children.length;J<W;J++){const ba=O.children[J],ia=X(ba),ma=(Math.max(ba.maxX,x.maxX)-Math.min(ba.minX,x.minX))*(Math.max(ba.maxY,x.maxY)-Math.min(ba.minY,x.minY))-ia;ma<b?(b=ma,g=ia<g?ia:g,z=ba):ma===b&&ia<g&&(g=ia,z=ba)}O=z||O.children[0]}return O};k._insert=function(x,O,R){var D=this.toBBox;R=R?x:D(x);I.clear();D=this._chooseSubtree(R,this.data,O,I);D.children.push(x);for(q(D,R);0<=O;)if(I.data[O].children.length>this._maxEntries)this._split(I,O),O--;else break;
this._adjustParentBBoxes(R,I,O)};k._split=function(x,O){const R=x.data[O];var D=R.children.length;const g=this._minEntries;this._chooseSplitAxis(R,g,D);(D=this._chooseSplitIndex(R,g,D))?(D=R.children.splice(D,R.children.length-D),D=R.leaf?new G(D):new Y(D),D.height=R.height,l(R,this.toBBox),l(D,this.toBBox),O?x.data[O-1].children.push(D):this._splitRoot(R,D)):console.log("  Error: assertion failed at PooledRBush._split: no valid split index")};k._splitRoot=function(x,O){this.data=new Y([x,O]);this.data.height=
x.height+1;l(this.data,this.toBBox)};k._chooseSplitIndex=function(x,O,R){let D,g,b=void 0;D=g=Infinity;for(let J=O;J<=R-O;J++){var z=E(x,0,J,this.toBBox);const W=E(x,J,R,this.toBBox),ba=Math.max(0,Math.min(z.maxX,W.maxX)-Math.max(z.minX,W.minX))*Math.max(0,Math.min(z.maxY,W.maxY)-Math.max(z.minY,W.minY));z=X(z)+X(W);ba<D?(D=ba,b=J,g=z<g?z:g):ba===D&&z<g&&(g=z,b=J)}return b};k._chooseSplitAxis=function(x,O,R){const D=x.leaf?this.compareMinX:u,g=x.leaf?this.compareMinY:H,b=this._allDistMargin(x,O,R,
D);O=this._allDistMargin(x,O,R,g);b<O&&x.children.sort(D)};k._allDistMargin=function(x,O,R,D){x.children.sort(D);D=this.toBBox;var g=E(x,0,O,D);const b=E(x,R-O,R,D);let z=n(g)+n(b);for(let J=O;J<R-O;J++){const W=x.children[J];q(g,x.leaf?D(W):W);z+=n(g)}for(R=R-O-1;R>=O;R--)g=x.children[R],q(b,x.leaf?D(g):g),z+=n(b);return z};k._adjustParentBBoxes=function(x,O,R){for(;0<=R;R--)q(O.data[R],x)};k._condense=function(x){for(let O=x.length-1;0<=O;O--){const R=x.data[O];if(0===R.children.length)if(0<O){const D=
x.data[O-1],g=D.children;g.splice(w.indexOf(g,R,g.length,D.indexHint),1)}else this.clear();else l(R,this.toBBox)}};k._initFormat=function(x){const O=["return a"," - b",";"];this.compareMinX=new Function("a","b",O.join(x[0]));this.compareMinY=new Function("a","b",O.join(x[1]));this.toBBox=new Function("a","return {minX: a"+x[0]+", minY: a"+x[1]+", maxX: a"+x[2]+", maxY: a"+x[3]+"};")};return aa}();const B=new h,T=new h,I=new h,P=new h({deallocator:void 0});h=function(){this.minY=this.minX=Infinity;
this.maxY=this.maxX=-Infinity};let L=function(aa){function k(){var x=aa.apply(this,arguments)||this;x.height=1;x.indexHint=new w.PositionHint;return x}e._inheritsLoose(k,aa);return k}(h),G=function(aa){function k(x){var O=aa.call(this)||this;O.children=x;O.leaf=!0;return O}e._inheritsLoose(k,aa);return k}(L),Y=function(aa){function k(x){var O=aa.call(this)||this;O.children=x;O.leaf=!1;return O}e._inheritsLoose(k,aa);return k}(L);p.BBox=h;p.PooledRBush=C;p.default=C;Object.defineProperty(p,"__esModule",
{value:!0})})},"esri/chunks/quickselect":function(){define(["exports"],function(p){var e={exports:{}};(function(w){(function(M){M=M();void 0!==M&&(w.exports=M)})(function(){function M(l,E,q,u,H){for(;u>q;){if(600<u-q){var X=u-q+1,n=E-q+1,y=Math.log(X),A=.5*Math.exp(2*y/3);y=.5*Math.sqrt(y*A*(X-A)/X)*(0>n-X/2?-1:1);M(l,E,Math.max(q,Math.floor(E-n*A/X+y)),Math.min(u,Math.floor(E+(X-n)*A/X+y)),H)}X=l[E];n=q;A=u;h(l,q,E);for(0<H(l[u],X)&&h(l,q,u);n<A;){h(l,n,A);n++;for(A--;0>H(l[n],X);)n++;for(;0<H(l[A],
X);)A--}0===H(l[q],X)?h(l,q,A):(A++,h(l,A,u));A<=E&&(q=A+1);E<=A&&(u=A-1)}}function h(l,E,q){var u=l[E];l[E]=l[q];l[q]=u}function t(l,E){return l<E?-1:l>E?1:0}return function(l,E,q,u,H){M(l,E,q||0,u||l.length-1,H||t)}})})(e);p.quickselect=e.exports})},"esri/layers/graphics/data/optimizedFeatureQueryEngineAdapter":function(){define(["exports","../centroid","../OptimizedFeature","../OptimizedGeometry"],function(p,e,w,M){const h={getObjectId(t){return t.objectId},getAttributes(t){return t.attributes},
getAttribute(t,l){return t.attributes[l]},cloneWithGeometry(t,l){return new w(l,t.attributes,null,t.objectId)},getGeometry(t){return t.geometry},getCentroid(t,l){t.centroid||(t.centroid=e.getCentroidOptimizedGeometry(new M,t.geometry,l.hasZ,l.hasM));return t.centroid}};p.default=h;p.optimizedFeatureQueryEngineAdapter=h;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/graphics/centroid":function(){define(["exports"],function(p){function e(M,h,t,l,E,q,u=1){q=E?q?4:3:q?3:2;let H=t,X=
t+q,n=0,y=0,A=t=0,f=0;for(let C=0,B=l-1;C<B;C++,H+=q,X+=q){l=h[H];const T=h[H+1],I=h[H+2],P=h[X],L=h[X+1],G=h[X+2];let Y=l*L-P*T;A+=Y;n+=(l+P)*Y;y+=(T+L)*Y;E&&(Y=l*G-P*I,t+=(I+G)*Y,f+=Y);l<M[0]&&(M[0]=l);l>M[1]&&(M[1]=l);T<M[2]&&(M[2]=T);T>M[3]&&(M[3]=T);E&&(I<M[4]&&(M[4]=I),I>M[5]&&(M[5]=I))}0<A*u&&(A*=-1);0<f*u&&(f*=-1);if(!A)return null;M=[n,y,.5*A];E&&(M[3]=t,M[4]=.5*f);return M}function w(M,h,t,l,E){E=l?E?4:3:E?3:2;let q=h,u=h+E,H=0,X=0,n=0,y=0;for(let B=0,T=t-1;B<T;B++,q+=E,u+=E){var A=M[q];
const I=M[q+1],P=M[q+2],L=M[u],G=M[u+1],Y=M[u+2];if(l){{var f=L-A;var C=G-I;const aa=Y-P;f=Math.sqrt(f*f+C*C+aa*aa)}}else f=L-A,C=G-I,f=Math.sqrt(f*f+C*C);f&&(H+=f,l?(A=[A+.5*(L-A),I+.5*(G-I),P+.5*(Y-P)],X+=f*A[0],n+=f*A[1],y+=f*A[2]):(A=[A+.5*(L-A),I+.5*(G-I)],X+=f*A[0],n+=f*A[1]))}return 0<H?l?[X/H,n/H,y/H]:[X/H,n/H]:0<t?l?[M[h],M[h+1],M[h+2]]:[M[h],M[h+1]]:null}p.getCentroidOptimizedGeometry=function(M,h,t,l,E){if(!h||!h.lengths.length)return null;const q="upperLeft"===(null==E?void 0:E.originPosition)?
-1:1;M.lengths.length&&(M.lengths.length=0);M.coords.length&&(M.coords.length=0);E=M.coords;const u=[],H=t?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:X,coords:n}=h,y=t?l?4:3:l?3:2;let A=0;for(var f of X){const C=e(H,n,A,f,t,l,q);C&&u.push(C);A+=f*y}u.sort((C,B)=>{let T=q*C[2]-q*B[2];
0===T&&t&&(T=C[4]-B[4]);return T});u.length&&(f=6*u[0][2],E[0]=u[0][0]/f,E[1]=u[0][1]/f,t&&(f=6*u[0][4],E[2]=0!==f?u[0][3]/f:0),E[0]<H[0]||E[0]>H[1]||E[1]<H[2]||E[1]>H[3]||t&&(E[2]<H[4]||E[2]>H[5]))&&(E.length=0);if(!E.length)if(h=h.lengths[0]?w(n,0,X[0],t,l):null)E[0]=h[0],E[1]=h[1],t&&2<h.length&&(E[2]=h[2]);else return null;return M};p.lineCentroid=w;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/graphics/data/projectionSupport":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../geometry/projection ../../../geometry/geometryAdapters/json ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/webMercatorUtils".split(" "),
function(p,e,w,M,h,t){function l(A,f){if(!f)return null;if("x"in f){var C={x:0,y:0};[C.x,C.y]=A(f.x,f.y,H);null!=f.z&&(C.z=f.z);null!=f.m&&(C.m=f.m);return C}if("xmin"in f)return C={xmin:0,ymin:0,xmax:0,ymax:0},[C.xmin,C.ymin]=A(f.xmin,f.ymin,H),[C.xmax,C.ymax]=A(f.xmax,f.ymax,H),f.hasZ&&(C.zmin=f.zmin,C.zmax=f.zmax,C.hasZ=!0),f.hasM&&(C.mmin=f.mmin,C.mmax=f.mmax,C.hasM=!0),C;if("rings"in f)return{rings:E(f.rings,A),hasM:f.hasM,hasZ:f.hasZ};if("paths"in f)return{paths:E(f.paths,A),hasM:f.hasM,hasZ:f.hasZ};
if("points"in f)return{points:q(f.points,A),hasM:f.hasM,hasZ:f.hasZ}}function E(A,f){const C=[];for(const B of A)C.push(q(B,f));return C}function q(A,f){const C=[];for(const B of A)A=f(B[0],B[1],[0,0]),C.push(A),2<B.length&&A.push(B[2]),3<B.length&&A.push(B[3]);return C}function u(){u=e._asyncToGenerator(function*(A,f){f&&(A=Array.isArray(A)?A.map(C=>{var B;return null==(B=C.geometry)?void 0:B.spatialReference}):[A],yield w.initializeProjection(A.map(C=>({source:C,dest:f}))))});return u.apply(this,
arguments)}const H=[0,0],X=l.bind(null,t.lngLatToXY),n=l.bind(null,t.xyToLngLat),y=new (function(){function A(){this._jobs=[];this._timer=null;this._process=this._process.bind(this)}var f=A.prototype;f.push=function(){var C=e._asyncToGenerator(function*(B,T,I){if(!(B&&B.length&&T&&I)||h.equals(T,I))return B;const P={geometries:B,inSpatialReference:T,outSpatialReference:I,resolve:null};this._jobs.push(P);return new Promise(L=>{P.resolve=L;null===this._timer&&(this._timer=setTimeout(this._process,10))})});
return function(B,T,I){return C.apply(this,arguments)}}();f._process=function(){this._timer=null;const C=this._jobs.shift();if(C){var {geometries:B,inSpatialReference:T,outSpatialReference:I,resolve:P}=C;t.canProject(T,I)?h.isWebMercator(I)?P(B.map(X)):P(B.map(n)):P(w.projectMany(M.jsonAdapter,B,T,I,null));0<this._jobs.length&&(this._timer=setTimeout(this._process,10))}};return A}());p.checkProjectionSupport=function(A,f){return u.apply(this,arguments)};p.project=function(A,f,C){if(!A)return A;C||
(C=f,f=A.spatialReference);return h.isValid(f)&&h.isValid(C)&&!h.equals(f,C)?t.canProject(f,C)?h.isWebMercator(C)?X(A):n(A):w.projectMany(M.jsonAdapter,[A],f,C,null)[0]:A};p.projectMany=function(A,f,C){return y.push(A,f,C)};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/geometry/projection":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../core/Error ../core/mathUtils ../core/maybe ../core/promiseUtils ../core/unitUtils ../chunks/mat4 ../chunks/vec3 ../chunks/vec3f64 ./Extent ./Multipoint ../chunks/pe ./Point ./Polygon ./Polyline ./projectionEllipsoid ./support/aaBoundingRect ./support/Ellipsoid ./support/geodesicConstants ./support/GeographicTransformation ./support/spatialReferenceUtils".split(" "),
function(p,e,w,M,h,t,l,E,q,u,H,X,n,y,A,f,C,B,T,I,P,L,G){function Y(){return!!Ea&&y.isLoaded()}function aa(ea){t.isNone(Ga)&&(Ga=Promise.all([y.load(),(new Promise(function(ha,fa){p(["../chunks/geometryEngineBase"],ha,fa)})).then(function(ha){return ha.geometryEngineBase}),new Promise(function(ha,fa){p(["./geometryAdapters/hydrated"],ha,fa)})]));return Ga.then(([,ha,{hydratedAdapter:fa}])=>{l.throwIfAborted(ea);Fa=fa;Ea=ha.default;Ea._enableProjection(y.pe)})}function k(ea,ha,fa,ka,xa=null){if(t.isNone(fa)||
t.isNone(ka))return ha;if(O(fa,ka,xa))return ha.map(Aa=>D(Aa,fa,ka));if(t.isNone(xa)){const Aa=L.cacheKey(fa,ka);void 0!==Ja[Aa]?xa=Ja[Aa]:(xa=x(fa,ka,null),t.isNone(xa)&&(xa=new L),Ja[Aa]=xa)}if(t.isNone(Ea))throw new oa;return Ea._project(ea,ha,fa,ka,xa)}function x(ea,ha,fa=null){if(t.isNone(Ea))throw new oa;if(t.isNone(ea)||t.isNone(ha))return null;ea=Ea._getTransformation(Fa,ea,ha,fa,null==fa?void 0:fa.spatialReference);return null!==ea?L.fromGE(ea):null}function O(ea,ha,fa){return fa?!1:G.equals(ea,
ha)?!0:G.isValid(ea)&&G.isValid(ha)&&!!ya(ea,ha,a)}function R(){R=w._asyncToGenerator(function*(ea,ha,fa,ka){if(!Y())if(Array.isArray(ea))for(const {source:xa,dest:Aa,geographicTransformation:La}of ea){if(!O(xa,Aa,La))return aa(ka)}else if(!O(ea,ha,fa))return aa(ka)});return R.apply(this,arguments)}function D(ea,ha,fa){if(!ea)return ea;if("x"in ea){var ka=new A;return g(ea,ha,ka,fa)?ka:null}return"xmin"in ea?(ka=new X,W(ea,ha,ka,fa)?ka:null):"rings"in ea?(ka=new f,J(ea,ha,ka,fa)?ka:null):"paths"in
ea?(ka=new C,z(ea,ha,ka,fa)?ka:null):"points"in ea?(ka=new n,b(ea,ha,ka,fa)?ka:null):null}function g(ea,ha,fa,ka,xa=0){Ra[0]=ea.x;Ra[1]=ea.y;const Aa=ea.z;Ra[2]=void 0!==Aa?Aa:xa;if(!qa(Ra,ha,0,Ra,ka,0,1))return!1;fa.x=Ra[0];fa.y=Ra[1];fa.spatialReference=ka;void 0===Aa?(fa.z=void 0,fa.hasZ=!1):(fa.z=Ra[2],fa.hasZ=!0);void 0===ea.m?(fa.m=void 0,fa.hasM=!1):(fa.m=ea.m,fa.hasM=!0);return!0}function b(ea,ha,fa,ka,xa=0){const {points:Aa,hasZ:La,hasM:Pa}=ea;ea=[];const $a=Aa.length,ab=[];for(var Va of Aa)ab.push(Va[0],
Va[1],La?Va[2]:xa);if(!qa(ab,ha,0,ab,ka,0,$a))return!1;for(ha=0;ha<$a;++ha){xa=3*ha;Va=ab[xa];const hb=ab[xa+1];La&&Pa?ea.push([Va,hb,ab[xa+2],Aa[ha][3]]):La?ea.push([Va,hb,ab[xa+2]]):Pa?ea.push([Va,hb,Aa[ha][2]]):ea.push([Va,hb])}fa.points=ea;fa.spatialReference=ka;fa.hasZ=La;fa.hasM=Pa;return!0}function z(ea,ha,fa,ka,xa=0){const {paths:Aa,hasZ:La,hasM:Pa}=ea;ea=[];if(!wa(Aa,La,Pa,ha,ea,ka,xa))return!1;fa.paths=ea;fa.spatialReference=ka;fa.hasZ=La;fa.hasM=Pa;return!0}function J(ea,ha,fa,ka,xa=0){const {rings:Aa,
hasZ:La,hasM:Pa}=ea;ea=[];if(!wa(Aa,La,Pa,ha,ea,ka,xa))return!1;fa.rings=ea;fa.spatialReference=ka;fa.hasZ=La;fa.hasM=Pa;return!0}function W(ea,ha,fa,ka,xa=0){const {xmin:Aa,ymin:La,xmax:Pa,ymax:$a,hasZ:ab,hasM:Va}=ea;if(!ba(Aa,La,ab?ea.zmin:xa,ha,Ra,ka))return!1;fa.xmin=Ra[0];fa.ymin=Ra[1];ab&&(fa.zmin=Ra[2]);if(!ba(Pa,$a,ab?ea.zmax:xa,ha,Ra,ka))return!1;fa.xmax=Ra[0];fa.ymax=Ra[1];ab&&(fa.zmax=Ra[2]);Va&&(fa.mmin=ea.mmin,fa.mmax=ea.mmax);fa.spatialReference=ka;return!0}function ba(ea,ha,fa,ka,xa,
Aa){Ta[0]=ea;Ta[1]=ha;Ta[2]=fa;return qa(Ta,ka,0,xa,Aa,0,1)}function ia(ea,ha,fa,ka){if(t.isNone(ha)||t.isNone(ka)||2>ea.length)return!1;2===ea.length&&(Ta[0]=ea[0],Ta[1]=ea[1],Ta[2]=0,ea=Ta);return qa(ea,ha,0,fa,ka,0,1)}function ma(ea,ha,fa){if(t.isNone(ha))return!1;ha=Ka(ha,gb);ha=cb[ha][6];if(t.isNone(ha))return!1;ha(ea,0,Ta,0);fa!==Ta&&(fa[0]=Ta[0],fa[1]=Ta[1],2<fa.length&&(fa[2]=Ta[2]));return!0}function qa(ea,ha,fa,ka,xa,Aa,La=1){ha=ya(ha,xa,a);if(t.isNone(ha))return!1;if(ha===Ha){if(ea===ka&&
fa===Aa)return!0;La=fa+3*La;for(let Pa=fa,$a=Aa;Pa<La;Pa++,$a++)ka[$a]=ea[Pa];return!0}La=fa+3*La;for(let Pa=fa,$a=Aa;Pa<La;Pa+=3,$a+=3)ha(ea,Pa,ka,$a);return!0}function wa(ea,ha,fa,ka,xa,Aa,La=0){const Pa=[];for(const $a of ea)for(const ab of $a)Pa.push(ab[0],ab[1],ha?ab[2]:La);if(!qa(Pa,ka,0,Pa,Aa,0,Pa.length/3))return!1;ka=0;xa.length=0;for(const $a of ea){ea=[];for(const ab of $a)ha&&fa?ea.push([Pa[ka++],Pa[ka++],Pa[ka++],ab[3]]):ha?ea.push([Pa[ka++],Pa[ka++],Pa[ka++]]):(fa?ea.push([Pa[ka++],
Pa[ka++],ab[2]]):ea.push([Pa[ka++],Pa[ka++]]),ka++);xa.push(ea)}return!0}function Ca(ea,ha,fa){const ka=Math.sin(ha);ha=Math.cos(ha);const xa=Math.sin(ea);ea=Math.cos(ea);fa[0]=-ka;fa[4]=-xa*ha;fa[8]=ea*ha;fa[12]=0;fa[1]=ha;fa[5]=-xa*ka;fa[9]=ea*ka;fa[13]=0;fa[2]=0;fa[6]=ea;fa[10]=xa;fa[14]=0;fa[3]=0;fa[7]=0;fa[11]=0;fa[15]=1;return fa}function Ka(ea,ha){if(ha.spatialReference===ea)return ha.spatialReferenceId;ha.spatialReference=ea;"metersPerUnit"in ha&&(ha.metersPerUnit=E.getMetersPerUnitForSR(ea,
1));return ea.wkt===B.SphericalECEFSpatialReference.wkt?ha.spatialReferenceId=1:G.isWGS84(ea)?ha.spatialReferenceId=2:G.isWebMercator(ea)?ha.spatialReferenceId=3:ea.wkt===B.WGS84ECEFSpatialReference.wkt?ha.spatialReferenceId=4:4490===ea.wkid?ha.spatialReferenceId=5:ea.wkt===B.SphericalPCPFMars.wkt?ha.spatialReferenceId=7:ea.wkt===B.SphericalPCPFMoon.wkt?ha.spatialReferenceId=9:G.isMars(ea)?ha.spatialReferenceId=8:G.isMoon(ea)?ha.spatialReferenceId=10:ha.spatialReferenceId=0}function Ha(ea,ha,fa,ka){ea!==
fa&&(fa[ka++]=ea[ha++],fa[ka++]=ea[ha++],fa[ka]=ea[ha])}function Oa(ea,ha,fa,ka){fa[ka++]=Ua*(ea[ha++]/I.earth.radius);fa[ka++]=Ua*(Math.PI/2-2*Math.atan(Math.exp(-1*ea[ha++]/I.earth.radius)));fa[ka]=ea[ha]}function na(ea,ha,fa,ka){Oa(ea,ha,fa,ka);U(fa,ka,fa,ka)}function ta(ea,ha,fa,ka){Oa(ea,ha,fa,ka);la(fa,ka,fa,ka)}function va(ea,ha,fa,ka,xa){var Aa=.4999999*Math.PI;Aa=h.clamp(Za*ea[ha+1],-Aa,Aa);Aa=Math.sin(Aa);fa[ka++]=Za*ea[ha]*xa.radius;fa[ka++]=xa.halfSemiMajorAxis*Math.log((1+Aa)/(1-Aa));
fa[ka]=ea[ha+2]}function c(ea,ha,fa,ka){va(ea,ha,fa,ka,I.earth)}function r(ea,ha,fa,ka,xa){xa+=ea[ha+2];const Aa=Za*ea[ha+1];ea=Za*ea[ha];ha=Math.cos(Aa);fa[ka++]=Math.cos(ea)*ha*xa;fa[ka++]=Math.sin(ea)*ha*xa;fa[ka]=Math.sin(Aa)*xa}function m(ea,ha,fa,ka){r(ea,ha,fa,ka,I.moon.radius)}function F(ea,ha,fa,ka){r(ea,ha,fa,ka,I.mars.radius)}function U(ea,ha,fa,ka){r(ea,ha,fa,ka,I.earth.radius)}function V(ea,ha,fa,ka,xa){var Aa=ea[ha];const La=ea[ha+1];ha=ea[ha+2];ea=Math.sqrt(Aa*Aa+La*La+ha*ha);ha=h.asinClamped(ha/
(0===ea?1:ea));Aa=Math.atan2(La,Aa);fa[ka++]=Ua*Aa;fa[ka++]=Ua*ha;fa[ka]=ea-xa}function K(ea,ha,fa,ka){V(ea,ha,fa,ka,I.moon.radius)}function N(ea,ha,fa,ka){V(ea,ha,fa,ka,I.mars.radius)}function Z(ea,ha,fa,ka){V(ea,ha,fa,ka,I.earth.radius)}function da(ea,ha,fa,ka){Z(ea,ha,fa,ka);c(fa,ka,fa,ka)}function ja(ea,ha,fa,ka){Z(ea,ha,fa,ka);la(fa,ka,fa,ka)}function la(ea,ha,fa,ka){{var xa=I.earth;const La=Za*ea[ha];var Aa=Za*ea[ha+1];ea=ea[ha+2];ha=Math.sin(Aa);Aa=Math.cos(Aa);const Pa=xa.radius/Math.sqrt(1-
xa.eccentricitySquared*ha*ha);fa[ka++]=(Pa+ea)*Aa*Math.cos(La);fa[ka++]=(Pa+ea)*Aa*Math.sin(La);fa[ka++]=(Pa*(1-xa.eccentricitySquared)+ea)*ha}}function ra(ea,ha,fa,ka){var xa=P.earthEllipsoidConstants,Aa=ea[ha],La=ea[ha+1];ea=ea[ha+2];let Pa;ha=Math.abs(ea);var $a=Aa*Aa+La*La;var ab=Math.sqrt($a);var Va=$a+ea*ea;var hb=Math.sqrt(Va);Aa=Math.atan2(La,Aa);var lb=ea*ea/Va;Va=$a/Va;La=xa.a2/hb;$a=xa.a3-xa.a4/hb;.3<Va?(lb=ha/hb*(1+Va*(xa.a1+La+lb*$a)/hb),hb=Math.asin(lb),La=lb*lb,Va=Math.sqrt(1-La)):
(Va=ab/hb*(1-lb*(xa.a5-La-Va*$a)/hb),hb=Math.acos(Va),La=1-Va*Va,lb=Math.sqrt(La));Pa=1-I.earth.eccentricitySquared*La;La=I.earth.radius/Math.sqrt(Pa);xa=xa.a6*La;La=ab-La*Va;$a=ha-xa*lb;ha=Va*La+lb*$a;ab=Va*$a-lb*La;xa=ab/(xa/Pa+ha);hb+=xa;0>ea&&(hb=-hb);fa[ka++]=Ua*Aa;fa[ka++]=Ua*hb;fa[ka]=ha+ab*xa/2}function ua(ea,ha,fa,ka){ra(ea,ha,fa,ka);U(fa,ka,fa,ka)}function za(ea,ha,fa,ka){ra(ea,ha,fa,ka);c(fa,ka,fa,ka)}function ya(ea,ha,fa=Na()){return t.isNone(ea)||t.isNone(ha)?null:Ba(ea,ha,fa).projector}
function Ba(ea,ha,fa){if(t.isNone(ea)||t.isNone(ha)||fa.source.spatialReference===ea&&fa.dest.spatialReference===ha)return fa;const ka=Ka(ea,fa.source),xa=Ka(ha,fa.dest);0===ka&&0===xa?G.equals(ea,ha)?fa.projector=Ha:fa.projector=null:fa.projector=cb[ka][xa];return fa}function Na(){return{source:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},projector:Ha}}let Ea=null,Fa=null,Ga=null,Ja={},oa=function(ea){function ha(){return ea.call(this,
"projection:not-loaded","projection engine not fully loaded yet, please call load()")||this}w._inheritsLoose(ha,ea);return ha}(M);const cb={[2]:{[5]:null,[8]:null,[10]:null,[11]:Ha,[6]:Ha,[1]:U,[7]:null,[9]:null,[0]:null,[3]:c,[2]:Ha,[4]:la},[5]:{[5]:Ha,[8]:null,[10]:null,[11]:Ha,[6]:Ha,[1]:U,[7]:null,[9]:null,[0]:null,[3]:null,[2]:null,[4]:la},[8]:{[5]:null,[8]:Ha,[10]:null,[11]:Ha,[6]:null,[1]:null,[7]:F,[9]:null,[0]:null,[3]:null,[2]:null,[4]:null},[10]:{[5]:null,[8]:null,[10]:Ha,[11]:Ha,[6]:null,
[1]:null,[7]:null,[9]:m,[0]:null,[3]:null,[2]:null,[4]:null},[3]:{[5]:null,[8]:null,[10]:null,[11]:Oa,[6]:Oa,[1]:na,[7]:null,[9]:null,[0]:null,[3]:Ha,[2]:Oa,[4]:ta},[4]:{[5]:ra,[8]:null,[10]:null,[11]:ra,[6]:ra,[1]:ua,[7]:null,[9]:null,[0]:null,[3]:za,[2]:ra,[4]:Ha},[1]:{[5]:Z,[8]:null,[10]:null,[11]:Z,[6]:Z,[1]:Ha,[7]:null,[9]:null,[0]:null,[3]:da,[2]:Z,[4]:ja},[7]:{[5]:null,[8]:N,[10]:null,[11]:N,[6]:null,[1]:null,[7]:Ha,[9]:null,[0]:null,[3]:null,[2]:null,[4]:null},[9]:{[5]:null,[8]:null,[10]:K,
[11]:K,[6]:null,[1]:null,[7]:null,[9]:Ha,[0]:null,[3]:null,[2]:null,[4]:null},[0]:{[5]:null,[8]:null,[10]:null,[11]:null,[6]:null,[1]:null,[7]:null,[9]:null,[0]:Ha,[3]:null,[2]:null,[4]:null},[11]:{[5]:Ha,[8]:Ha,[10]:Ha,[11]:Ha,[6]:Ha,[1]:U,[7]:F,[9]:m,[0]:null,[3]:c,[2]:Ha,[4]:la},[6]:{[5]:null,[8]:null,[10]:null,[11]:Ha,[6]:Ha,[1]:U,[7]:null,[9]:null,[0]:null,[3]:null,[2]:Ha,[4]:la}},gb={spatialReference:null,spatialReferenceId:0},fb={spatialReference:null,spatialReferenceId:0},a=Na(),ib=Na(),Za=
h.deg2rad(1),Ua=h.rad2deg(1),Ta=H.create(),jb=H.create(),tb=H.create(),Ra=H.create(),Bb=H.create();e.canProjectToWGS84ComparableLonLat=function(ea){if(t.isNone(ea))return!1;ea=Ka(ea,gb);return!!cb[ea][6]};e.canProjectWithoutEngine=O;e.computeLatLonToENURotation=Ca;e.computeLinearTransformation=function(ea,ha,fa,ka){if(t.isNone(ea)||t.isNone(ka))return!1;var xa=Ka(ea,gb),Aa=Ka(ka,fb);if(xa===Aa&&1!==Aa&&7!==Aa&&9!==Aa&&(0!==xa||G.equals(ea,ka)))return q.identity(fa),q.translate(fa,fa,ha),!0;if(1===
Aa||7===Aa||9===Aa){ka=ea=0;xa=cb[xa][11];Aa=cb[11][Aa];if(t.isNone(xa)||t.isNone(Aa))return!1;xa(ha,0,jb,0);Aa(jb,0,tb,0);ea=Za*jb[0];ka=Za*jb[1];Ca(ka,ea,fa);fa[12]=tb[0];fa[13]=tb[1];fa[14]=tb[2];return!0}if(3===Aa&&(2===xa||1===xa)){Aa=cb[xa][11];if(t.isNone(Aa))return!1;Aa(ha,0,jb,0);ha=Za*jb[1];c(jb,0,tb,0);q.identity(fa);q.translate(fa,fa,tb);ha=1/Math.cos(ha);q.scale(fa,fa,[ha,ha,1]);return!0}return!1};e.getProjectorName=function(ea,ha){switch(ya(ea,ha,a)){case Ha:return"copy3";case U:return"wgs84ToSphericalECEF";
case c:return"wgs84ToWebMercator";case la:return"wgs84ToWGS84ECEF";case Oa:return"webMercatorToWGS84";case na:return"webMercatorToSphericalECEF";case ta:return"webMercatorToWGS84ECEF";case ra:return"wgs84ECEFToWGS84";case ua:return"wgs84ECEFToSphericalECEF";case za:return"wgs84ECEFToWebMercator";case Z:return"sphericalECEFToWGS84";case da:return"sphericalECEFToWebMercator";case N:return"sphericalMarsPCPFToMars2000";case K:return"sphericalMoonPCPFToMoon2000";case ja:return"sphericalECEFToWGS84ECEF";
case F:return"mars2000ToSphericalPCPF";case m:return"moon2000ToSphericalPCPF";default:return null}};e.getTransformation=x;e.getTransformations=function(ea,ha,fa=null){if(t.isNone(Ea))throw new oa;ea=Ea._getTransformationBySuitability(Fa,ea,ha,fa,null==fa?void 0:fa.spatialReference);if(null!==ea){ha=[];for(const ka of ea)ha.push(L.fromGE(ka));return ha}return[]};e.initializeProjection=function(ea,ha,fa,ka){return R.apply(this,arguments)};e.isLoaded=Y;e.isSupported=function(){return!0};e.load=aa;e.localLinearScaleFactors=
function(ea,ha,fa,ka){if(t.isNone(ha)||t.isNone(ka))return!1;const xa=Ka(ha,gb);var Aa=Ka(ka,fb);if(xa===Aa&&0!==xa||G.equals(ha,ka))return fa[0]=1,fa[1]=1,fa[2]=1,!0;if(1===xa){ha=u.length(ea);ea=ha/Math.sqrt(ea[0]*ea[0]+ea[1]*ea[1]);ha/=I.earth.radius;if(3===Aa)return fa[0]=ea*ha,fa[1]=ea*ha,fa[2]=1,!0;if(2===Aa||5===Aa)return Aa=180/(I.earth.radius*Math.PI),fa[0]=Aa*ea*ha,fa[1]=Aa*ha,fa[2]=1,!0}return!1};e.lonLatToSphericalPCPF=function(ea,ha,fa,ka,xa=0){ka+=xa;xa=Math.cos(fa);ea[0]=Math.cos(ha)*
xa*ka;ea[1]=Math.sin(ha)*xa*ka;ea[2]=Math.sin(fa)*ka};e.lonLatToWebMercatorComparable=va;e.project=function(ea,ha,fa=null){return Array.isArray(ea)?0===ea.length?[]:k(Fa,ea,ea[0].spatialReference,ha,fa):k(Fa,[ea],ea.spatialReference,ha,fa)[0]};e.projectBoundingRect=function(ea,ha,fa,ka){if(null==ea)return!1;if(G.equals(ha,ka))return T.set(fa,ea),!0;Ta[0]=ea[0];Ta[1]=ea[1];Ta[2]=0;if(!qa(Ta,ha,0,Ta,ka,0,1))return!1;fa[0]=Ta[0];fa[1]=Ta[1];Ta[0]=ea[2];Ta[1]=ea[3];Ta[2]=0;if(!qa(Ta,ha,0,Ta,ka,0,1))return!1;
fa[2]=Ta[0];fa[3]=Ta[1];return!0};e.projectBoundingSphere=function(ea,ha,fa,ka){if(t.isNone(ha)||t.isNone(ka))return!1;ha=Ba(ha,ka,ib);if(ha.projector===Ha)return fa[0]=ea[0],fa[1]=ea[1],fa[2]=ea[2],fa[3]=ea[3],!0;if(t.isNone(ha.projector))return!1;const {source:xa,dest:Aa}=ha;if(3===Aa.spatialReferenceId){ha=cb[xa.spatialReferenceId][2];if(t.isNone(ha))return!1;ha(ea,0,jb,0);ha=Math.abs(Za*jb[1])+Math.asin(ea[3]/(I.earth.radius+ea[2]));c(jb,0,fa,0);fa[3]=ha>.9999*Math.PI?Number.MAX_VALUE:1/Math.cos(ha)*
ea[3];return!0}ha.projector(ea,0,fa,0);fa[3]=ea[3]*xa.metersPerUnit/Aa.metersPerUnit;return!0};e.projectBuffer=qa;e.projectDirection=function(ea,ha,fa,ka,xa){u.copy(Ra,ea);u.add(Bb,ea,ha);ia(Ra,fa,Ra,xa);ia(Bb,fa,Bb,xa);u.subtract(ka,Bb,Ra);u.normalize(ka,ka)};e.projectExtent=function(ea,ha,fa=ha.spatialReference,ka=0){return t.isNone(fa)?!1:W(ea,ea.spatialReference,ha,fa,ka)};e.projectMany=k;e.projectMultipoint=function(ea,ha,fa=ha.spatialReference,ka=0){return t.isNone(fa)?!1:b(ea,ea.spatialReference,
ha,fa,ka)};e.projectPoint=function(ea,ha,fa=ha.spatialReference,ka=0){return t.isNone(fa)?!1:g(ea,ea.spatialReference,ha,fa,ka)};e.projectPointToVector=function(ea,ha,fa,ka=0){Ra[0]=ea.x;Ra[1]=ea.y;const xa=ea.z;Ra[2]=void 0!==xa?xa:ka;return qa(Ra,ea.spatialReference,0,ha,fa,0,1)};e.projectPointToWGS84ComparableLonLat=function(ea,ha){Ra[0]=ea.x;Ra[1]=ea.y;const fa=ea.z;Ra[2]=void 0!==fa?fa:0;return ma(Ra,ea.spatialReference,ha)};e.projectPolygon=function(ea,ha,fa=ha.spatialReference,ka=0){return t.isNone(fa)?
!1:J(ea,ea.spatialReference,ha,fa,ka)};e.projectPolyline=function(ea,ha,fa=ha.spatialReference,ka=0){return t.isNone(fa)?!1:z(ea,ea.spatialReference,ha,fa,ka)};e.projectVectorToDehydratedPoint=function(ea,ha,fa){return qa(ea,ha,0,Ra,fa.spatialReference,0,1)?(fa.x=Ra[0],fa.y=Ra[1],fa.z=Ra[2],fa):null};e.projectVectorToPoint=function(ea,ha,fa){if(t.isNone(ha)||t.isNone(fa))return null;const ka=new A({spatialReference:fa});return qa(ea,ha,0,Ra,fa,0,1)?(ka.x=Ra[0],ka.y=Ra[1],ka.z=Ra[2],ka):null};e.projectVectorToVector=
ia;e.projectVectorToWGS84ComparableLonLat=function(ea,ha,fa){return ma(ea,ha,fa)};e.projectXYZToVector=ba;e.sphericalPCPFtoLonLatElevation=V;e.unload=function(){Ga=Fa=Ea=null;Ja={}};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/core/unitUtils":function(){define("exports ./has ./jsonMap ../geometry/projectionEllipsoid ../geometry/SpatialReference ../geometry/support/Ellipsoid ../geometry/support/spatialReferenceUtils ../geometry/support/WKIDUnitConversion".split(" "),function(p,e,w,M,h,
t,l,E){function q(g){if(g=O[g])return g;throw Error("unknown measure");}function u(g){return x[g].baseUnit}function H(g,b=null){b=b||q(g);return x[b].baseUnit===g}function X(g,b,z){if(b===z)return g;const J=q(b);if(J!==q(z))throw Error("incompatible units");g=H(b,J)?g:g*x[J].units[b].inBaseUnits;return H(z,J)?g:g/x[J].units[z].inBaseUnits}function n(g,b){return 3E3>X(g,b,"meters")?"meters":"kilometers"}function y(g,b){return 1E5>X(g,b,"meters")?"meters":"kilometers"}function A(g,b){return 1E3>X(g,
b,"feet")?"feet":"miles"}function f(g,b){return 1E5>X(g,b,"feet")?"feet":"miles"}function C(g){return k.fromJSON(g.toLowerCase())||null}function B(g,b=t.earth.metersPerDegree){return T(g,!0)||b}function T(g,b=!1){let z,J,W=null;null!=g&&("object"===typeof g?(z=g.wkid,J=g.wkt):"number"===typeof g?z=g:"string"===typeof g&&(J=g));if(z){if(l.isWKIDFromMars(z))return t.mars.metersPerDegree;if(l.isWKIDFromMoon(z))return t.moon.metersPerDegree;W=G.values[G[z]];!W&&b&&aa.has(z)&&(W=P)}else J&&(-1!==J.search(/^PROJCS/i)?
(g=L.exec(J))&&g[1]&&(W=parseFloat(g[1].split(",")[1])):-1!==J.search(/^GEOCCS/i)&&(g=Y.exec(J))&&g[1]&&(W=parseFloat(g[1].split(",")[1])));return W}function I(g){let b,z,J=null;null!=g&&("object"===typeof g?(b=g.wkid,z=g.wkt):"number"===typeof g?b=g:"string"===typeof g&&(z=g));b?J=G.units[G[b]]:z&&-1!==z.search(/^PROJCS/i)&&(g=L.exec(z))&&g[1]&&(J=(g=/[\\"\\']{1}([^\\"\\']+)/.exec(g[1]))&&g[1]);return J?C(J):null}const P=t.earth.radius*Math.PI/200,L=/UNIT\[([^\]]+)\]\]$/i,G=E,Y=/UNIT\[([^\]]+)\]/i,
aa=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),k=w.strict()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains",
"50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"});e={millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1E3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}};E={"square-millimeters":{inBaseUnits:1E-6},"square-centimeters":{inBaseUnits:1E-4},"square-decimeters":{inBaseUnits:.1*
.1},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:1E6},"square-inches":{inBaseUnits:6.4516E-4},"square-feet":{inBaseUnits:.09290304},"square-yards":{inBaseUnits:.83612736},"square-miles":{inBaseUnits:2589988.110336},"square-us-feet":{inBaseUnits:(g=>g*g)(1200/3937)},acres:{inBaseUnits:4046.8564224},ares:{inBaseUnits:100},hectares:{inBaseUnits:1E4}};const x={length:{baseUnit:"meters",units:e},area:{baseUnit:"square-meters",units:E},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},
"cubic-millimeters":{inBaseUnits:1E3*1E-9},"cubic-centimeters":{inBaseUnits:.001},"cubic-decimeters":{inBaseUnits:1},"cubic-meters":{inBaseUnits:1E3},"cubic-kilometers":{inBaseUnits:1E12},"cubic-inches":{inBaseUnits:.016387064},"cubic-feet":{inBaseUnits:.09290304*304.8},"cubic-yards":{inBaseUnits:764.554857984},"cubic-miles":{inBaseUnits:4.16818182544058E12}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},O=function(){const g={};for(const b in x)for(const z in x[b].units)g[z]=
b;return g}(),R={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},D={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",
esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"};e=w.strict()(R);E=w.strict()(D);w=w.strict()({...R,...D});p.areaUnitsJSONMap=e;p.baseUnitForMeasure=u;p.baseUnitForUnit=function(g){return u(q(g))};p.convertUnit=X;p.getDefaultUnitSystem=function(g){if(!g)return null;switch(I(g)){case "feet":case "us-feet":case "clarke-feet":case "clarke-yards":case "clarke-links":case "sears-yards":case "sears-feet":case "sears-chains":case "benoit-1895-b-chains":case "indian-yards":case "indian-1937-yards":case "gold-coast-feet":case "sears-1922-truncated-chains":return"imperial";
case "50-kilometers":case "150-kilometers":case "meters":return"metric"}return null};p.getMetersPerUnit=T;p.getMetersPerUnitForSR=B;p.getMetersPerVerticalUnitForSR=function(g){if(g&&"object"===typeof g&&!l.isEarth(g))return 1;g=B(g);return 1E5<g?1:g};p.getUnitString=I;p.getVerticalUnitStringForSR=function(g){const b=B(g),z=g instanceof h?M.getReferenceEllipsoid(g).metersPerDegree:1E5;return b>=z?"meters":I(g)};p.inchesPerMeter=39.37;p.isBaseUnit=H;p.isMeasurementSystem=function(g){return"imperial"===
g||"metric"===g};p.lengthToDegrees=function(g,b,z){return X(g,b,"meters")/(z*Math.PI/180)};p.lengthUnitsJSONMap=E;p.measureForUnit=q;p.measurementAreaUnits="metric imperial square-inches square-feet square-yards square-miles square-us-feet square-meters square-kilometers acres ares hectares".split(" ");p.measurementLengthUnits="metric imperial inches feet yards miles nautical-miles us-feet meters kilometers".split(" ");p.preferredImperialAreaUnit=function(g,b){return 1E6>X(g,b,"square-feet")?"square-feet":
"square-miles"};p.preferredImperialLengthUnit=A;p.preferredImperialVerticalLengthUnit=f;p.preferredLengthUnit=function(g,b,z){switch(z){case "metric":return n(g,b);case "imperial":return A(g,b);default:return z}};p.preferredMetricAreaUnit=function(g,b){return 3E6>X(g,b,"square-meters")?"square-meters":"square-kilometers"};p.preferredMetricLengthUnit=n;p.preferredMetricVerticalLengthUnit=y;p.preferredVerticalLengthUnit=function(g,b,z){switch(z){case "metric":return y(g,b);case "imperial":return f(g,
b);default:return z}};p.unitFromRESTJSON=C;p.unitToRESTJSON=function(g){return k.toJSON(g)||null};p.unitsJSONMap=w;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/geometry/projectionEllipsoid":function(){define(["exports","./SpatialReference","./support/Ellipsoid","./support/spatialReferenceUtils"],function(p,e,w,M){function h(u){return new e({wkt:`GEOCCS["Spherical geocentric",
    DATUM["Not specified",
      SPHEROID["Sphere",${u.radius},0]],
    PRIMEM["Greenwich",0.0,
      AUTHORITY["EPSG","8901"]],
    UNIT["m",1.0],
    AXIS["Geocentric X",OTHER],
    AXIS["Geocentric Y",EAST],
    AXIS["Geocentric Z",NORTH]
  ]`})}const t=h(w.earth),l=h(w.mars),E=h(w.moon),q=new e({wkt:`GEOCCS["WGS 84",
  DATUM["WGS_1984",
    SPHEROID["WGS 84",${w.earth.radius},298.257223563,
      AUTHORITY["EPSG","7030"]],
    AUTHORITY["EPSG","6326"]],
  PRIMEM["Greenwich",0,
    AUTHORITY["EPSG","8901"]],
  UNIT["m",1.0,
    AUTHORITY["EPSG","9001"]],
  AXIS["Geocentric X",OTHER],
  AXIS["Geocentric Y",OTHER],
  AXIS["Geocentric Z",NORTH],
  AUTHORITY["EPSG","4978"]
]`});p.SphericalECEFSpatialReference=t;p.SphericalPCPFMars=l;p.SphericalPCPFMoon=E;p.WGS84ECEFSpatialReference=q;p.createSphericalPCPF=h;p.getReferenceEllipsoid=function(u){return u&&(M.isMars(u)||u===l)?w.mars:u&&(M.isMoon(u)||u===E)?w.moon:w.earth};p.getReferenceEllipsoidFromWKID=function(u){return M.isWKIDFromMars(u)?w.mars:M.isWKIDFromMoon(u)?w.moon:w.earth};p.getSphericalPCPF=function(u){return u&&(M.isMars(u)||u===l)?l:u&&(M.isMoon(u)||u===E)?E:t};p.getSphericalPCPFForEllipsoid=function(u){return u&&
u===w.mars?l:u&&u===w.moon?E:t};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/chunks/mat4":function(){define(["exports","./vec3f64","./common"],function(p,e,w){function M(c,r){c[0]=r[0];c[1]=r[1];c[2]=r[2];c[3]=r[3];c[4]=r[4];c[5]=r[5];c[6]=r[6];c[7]=r[7];c[8]=r[8];c[9]=r[9];c[10]=r[10];c[11]=r[11];c[12]=r[12];c[13]=r[13];c[14]=r[14];c[15]=r[15];return c}function h(c,r,m,F,U,V,K,N,Z,da,ja,la,ra,ua,za,ya,Ba){c[0]=r;c[1]=m;c[2]=F;c[3]=U;c[4]=V;c[5]=K;c[6]=N;c[7]=Z;c[8]=da;c[9]=ja;c[10]=
la;c[11]=ra;c[12]=ua;c[13]=za;c[14]=ya;c[15]=Ba;return c}function t(c){c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=1;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=1;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function l(c,r){if(c===r){const m=r[1],F=r[2],U=r[3],V=r[6],K=r[7],N=r[11];c[1]=r[4];c[2]=r[8];c[3]=r[12];c[4]=m;c[6]=r[9];c[7]=r[13];c[8]=F;c[9]=V;c[11]=r[14];c[12]=U;c[13]=K;c[14]=N}else c[0]=r[0],c[1]=r[4],c[2]=r[8],c[3]=r[12],c[4]=r[1],c[5]=r[5],c[6]=r[9],c[7]=r[13],c[8]=r[2],c[9]=r[6],c[10]=r[10],
c[11]=r[14],c[12]=r[3],c[13]=r[7],c[14]=r[11],c[15]=r[15];return c}function E(c,r){const m=r[0],F=r[1],U=r[2],V=r[3],K=r[4],N=r[5],Z=r[6],da=r[7],ja=r[8],la=r[9],ra=r[10],ua=r[11],za=r[12],ya=r[13],Ba=r[14];r=r[15];const Na=m*N-F*K,Ea=m*Z-U*K,Fa=m*da-V*K,Ga=F*Z-U*N,Ja=F*da-V*N,oa=U*da-V*Z,cb=ja*ya-la*za,gb=ja*Ba-ra*za,fb=ja*r-ua*za,a=la*Ba-ra*ya,ib=la*r-ua*ya,Za=ra*r-ua*Ba;let Ua=Na*Za-Ea*ib+Fa*a+Ga*fb-Ja*gb+oa*cb;if(!Ua)return null;Ua=1/Ua;c[0]=(N*Za-Z*ib+da*a)*Ua;c[1]=(U*ib-F*Za-V*a)*Ua;c[2]=(ya*
oa-Ba*Ja+r*Ga)*Ua;c[3]=(ra*Ja-la*oa-ua*Ga)*Ua;c[4]=(Z*fb-K*Za-da*gb)*Ua;c[5]=(m*Za-U*fb+V*gb)*Ua;c[6]=(Ba*Fa-za*oa-r*Ea)*Ua;c[7]=(ja*oa-ra*Fa+ua*Ea)*Ua;c[8]=(K*ib-N*fb+da*cb)*Ua;c[9]=(F*fb-m*ib-V*cb)*Ua;c[10]=(za*Ja-ya*Fa+r*Na)*Ua;c[11]=(la*Fa-ja*Ja-ua*Na)*Ua;c[12]=(N*gb-K*a-Z*cb)*Ua;c[13]=(m*a-F*gb+U*cb)*Ua;c[14]=(ya*Ea-za*Ga-Ba*Na)*Ua;c[15]=(ja*Ga-la*Ea+ra*Na)*Ua;return c}function q(c,r){const m=r[0],F=r[1],U=r[2],V=r[3],K=r[4],N=r[5],Z=r[6],da=r[7],ja=r[8],la=r[9],ra=r[10],ua=r[11],za=r[12],ya=
r[13],Ba=r[14];r=r[15];c[0]=N*(ra*r-ua*Ba)-la*(Z*r-da*Ba)+ya*(Z*ua-da*ra);c[1]=-(F*(ra*r-ua*Ba)-la*(U*r-V*Ba)+ya*(U*ua-V*ra));c[2]=F*(Z*r-da*Ba)-N*(U*r-V*Ba)+ya*(U*da-V*Z);c[3]=-(F*(Z*ua-da*ra)-N*(U*ua-V*ra)+la*(U*da-V*Z));c[4]=-(K*(ra*r-ua*Ba)-ja*(Z*r-da*Ba)+za*(Z*ua-da*ra));c[5]=m*(ra*r-ua*Ba)-ja*(U*r-V*Ba)+za*(U*ua-V*ra);c[6]=-(m*(Z*r-da*Ba)-K*(U*r-V*Ba)+za*(U*da-V*Z));c[7]=m*(Z*ua-da*ra)-K*(U*ua-V*ra)+ja*(U*da-V*Z);c[8]=K*(la*r-ua*ya)-ja*(N*r-da*ya)+za*(N*ua-da*la);c[9]=-(m*(la*r-ua*ya)-ja*(F*
r-V*ya)+za*(F*ua-V*la));c[10]=m*(N*r-da*ya)-K*(F*r-V*ya)+za*(F*da-V*N);c[11]=-(m*(N*ua-da*la)-K*(F*ua-V*la)+ja*(F*da-V*N));c[12]=-(K*(la*Ba-ra*ya)-ja*(N*Ba-Z*ya)+za*(N*ra-Z*la));c[13]=m*(la*Ba-ra*ya)-ja*(F*Ba-U*ya)+za*(F*ra-U*la);c[14]=-(m*(N*Ba-Z*ya)-K*(F*Ba-U*ya)+za*(F*Z-U*N));c[15]=m*(N*ra-Z*la)-K*(F*ra-U*la)+ja*(F*Z-U*N);return c}function u(c){const r=c[0],m=c[1],F=c[2],U=c[3],V=c[4],K=c[5],N=c[6],Z=c[7],da=c[8],ja=c[9],la=c[10],ra=c[11],ua=c[12],za=c[13],ya=c[14];c=c[15];return(r*K-m*V)*(la*
c-ra*ya)-(r*N-F*V)*(ja*c-ra*za)+(r*Z-U*V)*(ja*ya-la*za)+(m*N-F*K)*(da*c-ra*ua)-(m*Z-U*K)*(da*ya-la*ua)+(F*Z-U*N)*(da*za-ja*ua)}function H(c,r,m){const F=r[0],U=r[1],V=r[2],K=r[3],N=r[4],Z=r[5],da=r[6],ja=r[7],la=r[8],ra=r[9],ua=r[10],za=r[11],ya=r[12],Ba=r[13],Na=r[14];r=r[15];let Ea=m[0],Fa=m[1],Ga=m[2],Ja=m[3];c[0]=Ea*F+Fa*N+Ga*la+Ja*ya;c[1]=Ea*U+Fa*Z+Ga*ra+Ja*Ba;c[2]=Ea*V+Fa*da+Ga*ua+Ja*Na;c[3]=Ea*K+Fa*ja+Ga*za+Ja*r;Ea=m[4];Fa=m[5];Ga=m[6];Ja=m[7];c[4]=Ea*F+Fa*N+Ga*la+Ja*ya;c[5]=Ea*U+Fa*Z+Ga*ra+
Ja*Ba;c[6]=Ea*V+Fa*da+Ga*ua+Ja*Na;c[7]=Ea*K+Fa*ja+Ga*za+Ja*r;Ea=m[8];Fa=m[9];Ga=m[10];Ja=m[11];c[8]=Ea*F+Fa*N+Ga*la+Ja*ya;c[9]=Ea*U+Fa*Z+Ga*ra+Ja*Ba;c[10]=Ea*V+Fa*da+Ga*ua+Ja*Na;c[11]=Ea*K+Fa*ja+Ga*za+Ja*r;Ea=m[12];Fa=m[13];Ga=m[14];Ja=m[15];c[12]=Ea*F+Fa*N+Ga*la+Ja*ya;c[13]=Ea*U+Fa*Z+Ga*ra+Ja*Ba;c[14]=Ea*V+Fa*da+Ga*ua+Ja*Na;c[15]=Ea*K+Fa*ja+Ga*za+Ja*r;return c}function X(c,r,m){const F=m[0],U=m[1];m=m[2];let V=void 0,K=void 0,N=void 0,Z=void 0,da=void 0,ja=void 0,la=void 0,ra=void 0,ua=void 0,za=
void 0,ya=void 0,Ba=void 0;r===c?(c[12]=r[0]*F+r[4]*U+r[8]*m+r[12],c[13]=r[1]*F+r[5]*U+r[9]*m+r[13],c[14]=r[2]*F+r[6]*U+r[10]*m+r[14],c[15]=r[3]*F+r[7]*U+r[11]*m+r[15]):(V=r[0],K=r[1],N=r[2],Z=r[3],da=r[4],ja=r[5],la=r[6],ra=r[7],ua=r[8],za=r[9],ya=r[10],Ba=r[11],c[0]=V,c[1]=K,c[2]=N,c[3]=Z,c[4]=da,c[5]=ja,c[6]=la,c[7]=ra,c[8]=ua,c[9]=za,c[10]=ya,c[11]=Ba,c[12]=V*F+da*U+ua*m+r[12],c[13]=K*F+ja*U+za*m+r[13],c[14]=N*F+la*U+ya*m+r[14],c[15]=Z*F+ra*U+Ba*m+r[15]);return c}function n(c,r,m){const F=m[0],
U=m[1];m=m[2];c[0]=r[0]*F;c[1]=r[1]*F;c[2]=r[2]*F;c[3]=r[3]*F;c[4]=r[4]*U;c[5]=r[5]*U;c[6]=r[6]*U;c[7]=r[7]*U;c[8]=r[8]*m;c[9]=r[9]*m;c[10]=r[10]*m;c[11]=r[11]*m;c[12]=r[12];c[13]=r[13];c[14]=r[14];c[15]=r[15];return c}function y(c,r,m,F){let U=F[0],V=F[1];F=F[2];let K=Math.sqrt(U*U+V*V+F*F);var N=void 0,Z=void 0;let da=void 0,ja=void 0,la=void 0,ra=void 0,ua=void 0,za=void 0,ya=void 0,Ba=void 0,Na=void 0,Ea=void 0,Fa=void 0,Ga=void 0,Ja=void 0,oa=void 0,cb=void 0,gb=void 0,fb=void 0,a=void 0,ib=
void 0,Za=void 0;Z=N=void 0;if(K<w.EPSILON)return null;K=1/K;U*=K;V*=K;F*=K;N=Math.sin(m);Z=Math.cos(m);da=1-Z;ja=r[0];la=r[1];ra=r[2];ua=r[3];za=r[4];ya=r[5];Ba=r[6];Na=r[7];Ea=r[8];Fa=r[9];Ga=r[10];Ja=r[11];oa=U*U*da+Z;cb=V*U*da+F*N;gb=F*U*da-V*N;fb=U*V*da-F*N;a=V*V*da+Z;ib=F*V*da+U*N;Za=U*F*da+V*N;N=V*F*da-U*N;Z=F*F*da+Z;c[0]=ja*oa+za*cb+Ea*gb;c[1]=la*oa+ya*cb+Fa*gb;c[2]=ra*oa+Ba*cb+Ga*gb;c[3]=ua*oa+Na*cb+Ja*gb;c[4]=ja*fb+za*a+Ea*ib;c[5]=la*fb+ya*a+Fa*ib;c[6]=ra*fb+Ba*a+Ga*ib;c[7]=ua*fb+Na*a+Ja*
ib;c[8]=ja*Za+za*N+Ea*Z;c[9]=la*Za+ya*N+Fa*Z;c[10]=ra*Za+Ba*N+Ga*Z;c[11]=ua*Za+Na*N+Ja*Z;r!==c&&(c[12]=r[12],c[13]=r[13],c[14]=r[14],c[15]=r[15]);return c}function A(c,r,m){const F=Math.sin(m);m=Math.cos(m);const U=r[4],V=r[5],K=r[6],N=r[7],Z=r[8],da=r[9],ja=r[10],la=r[11];r!==c&&(c[0]=r[0],c[1]=r[1],c[2]=r[2],c[3]=r[3],c[12]=r[12],c[13]=r[13],c[14]=r[14],c[15]=r[15]);c[4]=U*m+Z*F;c[5]=V*m+da*F;c[6]=K*m+ja*F;c[7]=N*m+la*F;c[8]=Z*m-U*F;c[9]=da*m-V*F;c[10]=ja*m-K*F;c[11]=la*m-N*F;return c}function f(c,
r,m){const F=Math.sin(m);m=Math.cos(m);const U=r[0],V=r[1],K=r[2],N=r[3],Z=r[8],da=r[9],ja=r[10],la=r[11];r!==c&&(c[4]=r[4],c[5]=r[5],c[6]=r[6],c[7]=r[7],c[12]=r[12],c[13]=r[13],c[14]=r[14],c[15]=r[15]);c[0]=U*m-Z*F;c[1]=V*m-da*F;c[2]=K*m-ja*F;c[3]=N*m-la*F;c[8]=U*F+Z*m;c[9]=V*F+da*m;c[10]=K*F+ja*m;c[11]=N*F+la*m;return c}function C(c,r,m){const F=Math.sin(m);m=Math.cos(m);const U=r[0],V=r[1],K=r[2],N=r[3],Z=r[4],da=r[5],ja=r[6],la=r[7];r!==c&&(c[8]=r[8],c[9]=r[9],c[10]=r[10],c[11]=r[11],c[12]=r[12],
c[13]=r[13],c[14]=r[14],c[15]=r[15]);c[0]=U*m+Z*F;c[1]=V*m+da*F;c[2]=K*m+ja*F;c[3]=N*m+la*F;c[4]=Z*m-U*F;c[5]=da*m-V*F;c[6]=ja*m-K*F;c[7]=la*m-N*F;return c}function B(c,r){c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=1;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=1;c[11]=0;c[12]=r[0];c[13]=r[1];c[14]=r[2];c[15]=1;return c}function T(c,r){c[0]=r[0];c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=r[1];c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=r[2];c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function I(c,r,m){let F=m[0],U=m[1];m=m[2];
let V=Math.sqrt(F*F+U*U+m*m),K=void 0,N=void 0,Z=void 0;if(V<w.EPSILON)return null;V=1/V;F*=V;U*=V;m*=V;K=Math.sin(r);N=Math.cos(r);Z=1-N;c[0]=F*F*Z+N;c[1]=U*F*Z+m*K;c[2]=m*F*Z-U*K;c[3]=0;c[4]=F*U*Z-m*K;c[5]=U*U*Z+N;c[6]=m*U*Z+F*K;c[7]=0;c[8]=F*m*Z+U*K;c[9]=U*m*Z-F*K;c[10]=m*m*Z+N;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function P(c,r){const m=Math.sin(r);r=Math.cos(r);c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=r;c[6]=m;c[7]=0;c[8]=0;c[9]=-m;c[10]=r;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}
function L(c,r){const m=Math.sin(r);r=Math.cos(r);c[0]=r;c[1]=0;c[2]=-m;c[3]=0;c[4]=0;c[5]=1;c[6]=0;c[7]=0;c[8]=m;c[9]=0;c[10]=r;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function G(c,r){const m=Math.sin(r);r=Math.cos(r);c[0]=r;c[1]=m;c[2]=0;c[3]=0;c[4]=-m;c[5]=r;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=1;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function Y(c,r,m){var F=r[0],U=r[1],V=r[2],K=r[3],N=F+F,Z=U+U;const da=V+V;r=F*N;const ja=F*Z;F*=da;const la=U*Z;U*=da;V*=da;N*=K;Z*=K;K*=da;c[0]=
1-(la+V);c[1]=ja+K;c[2]=F-Z;c[3]=0;c[4]=ja-K;c[5]=1-(r+V);c[6]=U+N;c[7]=0;c[8]=F+Z;c[9]=U-N;c[10]=1-(r+la);c[11]=0;c[12]=m[0];c[13]=m[1];c[14]=m[2];c[15]=1;return c}function aa(c,r){const m=va,F=-r[0],U=-r[1],V=-r[2],K=r[3],N=r[4],Z=r[5],da=r[6],ja=r[7],la=F*F+U*U+V*V+K*K;0<la?(m[0]=2*(N*K+ja*F+Z*V-da*U)/la,m[1]=2*(Z*K+ja*U+da*F-N*V)/la,m[2]=2*(da*K+ja*V+N*U-Z*F)/la):(m[0]=2*(N*K+ja*F+Z*V-da*U),m[1]=2*(Z*K+ja*U+da*F-N*V),m[2]=2*(da*K+ja*V+N*U-Z*F));Y(c,r,m);return c}function k(c,r){c[0]=r[12];c[1]=
r[13];c[2]=r[14];return c}function x(c,r){const m=r[0],F=r[1],U=r[2],V=r[4],K=r[5],N=r[6],Z=r[8],da=r[9];r=r[10];c[0]=Math.sqrt(m*m+F*F+U*U);c[1]=Math.sqrt(V*V+K*K+N*N);c[2]=Math.sqrt(Z*Z+da*da+r*r);return c}function O(c,r){const m=r[0]+r[5]+r[10];let F=0;0<m?(F=2*Math.sqrt(m+1),c[3]=.25*F,c[0]=(r[6]-r[9])/F,c[1]=(r[8]-r[2])/F,c[2]=(r[1]-r[4])/F):r[0]>r[5]&&r[0]>r[10]?(F=2*Math.sqrt(1+r[0]-r[5]-r[10]),c[3]=(r[6]-r[9])/F,c[0]=.25*F,c[1]=(r[1]+r[4])/F,c[2]=(r[8]+r[2])/F):r[5]>r[10]?(F=2*Math.sqrt(1+
r[5]-r[0]-r[10]),c[3]=(r[8]-r[2])/F,c[0]=(r[1]+r[4])/F,c[1]=.25*F,c[2]=(r[6]+r[9])/F):(F=2*Math.sqrt(1+r[10]-r[0]-r[5]),c[3]=(r[1]-r[4])/F,c[0]=(r[8]+r[2])/F,c[1]=(r[6]+r[9])/F,c[2]=.25*F);return c}function R(c,r,m,F){var U=r[0],V=r[1],K=r[2],N=r[3],Z=U+U,da=V+V,ja=K+K;r=U*Z;const la=U*da;U*=ja;const ra=V*da;V*=ja;K*=ja;Z*=N;da*=N;N*=ja;ja=F[0];const ua=F[1];F=F[2];c[0]=(1-(ra+K))*ja;c[1]=(la+N)*ja;c[2]=(U-da)*ja;c[3]=0;c[4]=(la-N)*ua;c[5]=(1-(r+K))*ua;c[6]=(V+Z)*ua;c[7]=0;c[8]=(U+da)*F;c[9]=(V-Z)*
F;c[10]=(1-(r+ra))*F;c[11]=0;c[12]=m[0];c[13]=m[1];c[14]=m[2];c[15]=1;return c}function D(c,r,m,F,U){var V=r[0],K=r[1],N=r[2],Z=r[3],da=V+V,ja=K+K,la=N+N;r=V*da;var ra=V*ja,ua=V*la;V=K*ja;K*=la;var za=N*la;N=Z*da;ja*=Z;const ya=Z*la;var Ba=F[0],Na=F[1];la=F[2];F=U[0];Z=U[1];U=U[2];da=(1-(V+za))*Ba;const Ea=(ra+ya)*Ba;Ba*=ua-ja;ra=(ra-ya)*Na;za=(1-(r+za))*Na;Na*=K+N;ua=(ua+ja)*la;K=(K-N)*la;r=(1-(r+V))*la;c[0]=da;c[1]=Ea;c[2]=Ba;c[3]=0;c[4]=ra;c[5]=za;c[6]=Na;c[7]=0;c[8]=ua;c[9]=K;c[10]=r;c[11]=0;
c[12]=m[0]+F-(da*F+ra*Z+ua*U);c[13]=m[1]+Z-(Ea*F+za*Z+K*U);c[14]=m[2]+U-(Ba*F+Na*Z+r*U);c[15]=1;return c}function g(c,r){var m=r[0],F=r[1],U=r[2];r=r[3];var V=m+m,K=F+F;const N=U+U;m*=V;const Z=F*V;F*=K;const da=U*V,ja=U*K;U*=N;V*=r;K*=r;r*=N;c[0]=1-F-U;c[1]=Z+r;c[2]=da-K;c[3]=0;c[4]=Z-r;c[5]=1-m-U;c[6]=ja+V;c[7]=0;c[8]=da+K;c[9]=ja-V;c[10]=1-m-F;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function b(c,r,m,F,U,V,K){const N=1/(m-r),Z=1/(U-F),da=1/(V-K);c[0]=2*V*N;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=
2*V*Z;c[6]=0;c[7]=0;c[8]=(m+r)*N;c[9]=(U+F)*Z;c[10]=(K+V)*da;c[11]=-1;c[12]=0;c[13]=0;c[14]=K*V*2*da;c[15]=0;return c}function z(c,r,m,F,U){r=1/Math.tan(r/2);let V=void 0;c[0]=r/m;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=r;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[11]=-1;c[12]=0;c[13]=0;c[15]=0;null!=U&&Infinity!==U?(V=1/(F-U),c[10]=(U+F)*V,c[14]=2*U*F*V):(c[10]=-1,c[14]=-2*F);return c}function J(c,r,m,F){const U=Math.tan(r.upDegrees*Math.PI/180),V=Math.tan(r.downDegrees*Math.PI/180),K=Math.tan(r.leftDegrees*Math.PI/
180);r=Math.tan(r.rightDegrees*Math.PI/180);const N=2/(K+r),Z=2/(U+V);c[0]=N;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=Z;c[6]=0;c[7]=0;c[8]=-((K-r)*N*.5);c[9]=(U-V)*Z*.5;c[10]=F/(m-F);c[11]=-1;c[12]=0;c[13]=0;c[14]=F*m/(m-F);c[15]=0;return c}function W(c,r,m,F,U,V,K){const N=1/(r-m),Z=1/(F-U),da=1/(V-K);c[0]=-2*N;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=-2*Z;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=2*da;c[11]=0;c[12]=(r+m)*N;c[13]=(U+F)*Z;c[14]=(K+V)*da;c[15]=1;return c}function ba(c,r,m,F){let U=void 0,V=void 0;var K=void 0,
N=void 0;let Z=void 0,da=void 0;var ja=void 0,la=void 0;let ra=void 0,ua=void 0;const za=r[0],ya=r[1];r=r[2];K=F[0];N=F[1];F=F[2];ja=m[0];la=m[1];m=m[2];if(Math.abs(za-ja)<w.EPSILON&&Math.abs(ya-la)<w.EPSILON&&Math.abs(r-m)<w.EPSILON)return t(c);ja=za-ja;la=ya-la;ra=r-m;ua=1/Math.sqrt(ja*ja+la*la+ra*ra);ja*=ua;la*=ua;ra*=ua;U=N*ra-F*la;V=F*ja-K*ra;K=K*la-N*ja;(ua=Math.sqrt(U*U+V*V+K*K))?(ua=1/ua,U*=ua,V*=ua,K*=ua):K=V=U=0;N=la*K-ra*V;Z=ra*U-ja*K;da=ja*V-la*U;(ua=Math.sqrt(N*N+Z*Z+da*da))?(ua=1/ua,
N*=ua,Z*=ua,da*=ua):da=Z=N=0;c[0]=U;c[1]=N;c[2]=ja;c[3]=0;c[4]=V;c[5]=Z;c[6]=la;c[7]=0;c[8]=K;c[9]=da;c[10]=ra;c[11]=0;c[12]=-(U*za+V*ya+K*r);c[13]=-(N*za+Z*ya+da*r);c[14]=-(ja*za+la*ya+ra*r);c[15]=1;return c}function ia(c,r,m,F){const U=r[0],V=r[1];r=r[2];var K=F[0];const N=F[1];var Z=F[2];F=U-m[0];let da=V-m[1];m=r-m[2];let ja=F*F+da*da+m*m;0<ja&&(ja=1/Math.sqrt(ja),F*=ja,da*=ja,m*=ja);let la=N*m-Z*da;Z=Z*F-K*m;K=K*da-N*F;ja=la*la+Z*Z+K*K;0<ja&&(ja=1/Math.sqrt(ja),la*=ja,Z*=ja,K*=ja);c[0]=la;c[1]=
Z;c[2]=K;c[3]=0;c[4]=da*K-m*Z;c[5]=m*la-F*K;c[6]=F*Z-da*la;c[7]=0;c[8]=F;c[9]=da;c[10]=m;c[11]=0;c[12]=U;c[13]=V;c[14]=r;c[15]=1;return c}function ma(c){return"mat4("+c[0]+", "+c[1]+", "+c[2]+", "+c[3]+", "+c[4]+", "+c[5]+", "+c[6]+", "+c[7]+", "+c[8]+", "+c[9]+", "+c[10]+", "+c[11]+", "+c[12]+", "+c[13]+", "+c[14]+", "+c[15]+")"}function qa(c){return Math.sqrt(c[0]**2+c[1]**2+c[2]**2+c[3]**2+c[4]**2+c[5]**2+c[6]**2+c[7]**2+c[8]**2+c[9]**2+c[10]**2+c[11]**2+c[12]**2+c[13]**2+c[14]**2+c[15]**2)}function wa(c,
r,m){c[0]=r[0]+m[0];c[1]=r[1]+m[1];c[2]=r[2]+m[2];c[3]=r[3]+m[3];c[4]=r[4]+m[4];c[5]=r[5]+m[5];c[6]=r[6]+m[6];c[7]=r[7]+m[7];c[8]=r[8]+m[8];c[9]=r[9]+m[9];c[10]=r[10]+m[10];c[11]=r[11]+m[11];c[12]=r[12]+m[12];c[13]=r[13]+m[13];c[14]=r[14]+m[14];c[15]=r[15]+m[15];return c}function Ca(c,r,m){c[0]=r[0]-m[0];c[1]=r[1]-m[1];c[2]=r[2]-m[2];c[3]=r[3]-m[3];c[4]=r[4]-m[4];c[5]=r[5]-m[5];c[6]=r[6]-m[6];c[7]=r[7]-m[7];c[8]=r[8]-m[8];c[9]=r[9]-m[9];c[10]=r[10]-m[10];c[11]=r[11]-m[11];c[12]=r[12]-m[12];c[13]=
r[13]-m[13];c[14]=r[14]-m[14];c[15]=r[15]-m[15];return c}function Ka(c,r,m){c[0]=r[0]*m;c[1]=r[1]*m;c[2]=r[2]*m;c[3]=r[3]*m;c[4]=r[4]*m;c[5]=r[5]*m;c[6]=r[6]*m;c[7]=r[7]*m;c[8]=r[8]*m;c[9]=r[9]*m;c[10]=r[10]*m;c[11]=r[11]*m;c[12]=r[12]*m;c[13]=r[13]*m;c[14]=r[14]*m;c[15]=r[15]*m;return c}function Ha(c,r,m,F){c[0]=r[0]+m[0]*F;c[1]=r[1]+m[1]*F;c[2]=r[2]+m[2]*F;c[3]=r[3]+m[3]*F;c[4]=r[4]+m[4]*F;c[5]=r[5]+m[5]*F;c[6]=r[6]+m[6]*F;c[7]=r[7]+m[7]*F;c[8]=r[8]+m[8]*F;c[9]=r[9]+m[9]*F;c[10]=r[10]+m[10]*F;c[11]=
r[11]+m[11]*F;c[12]=r[12]+m[12]*F;c[13]=r[13]+m[13]*F;c[14]=r[14]+m[14]*F;c[15]=r[15]+m[15]*F;return c}function Oa(c,r){return c[0]===r[0]&&c[1]===r[1]&&c[2]===r[2]&&c[3]===r[3]&&c[4]===r[4]&&c[5]===r[5]&&c[6]===r[6]&&c[7]===r[7]&&c[8]===r[8]&&c[9]===r[9]&&c[10]===r[10]&&c[11]===r[11]&&c[12]===r[12]&&c[13]===r[13]&&c[14]===r[14]&&c[15]===r[15]}function na(c,r){const m=c[0],F=c[1],U=c[2],V=c[3],K=c[4],N=c[5],Z=c[6],da=c[7],ja=c[8],la=c[9],ra=c[10],ua=c[11],za=c[12],ya=c[13],Ba=c[14];c=c[15];const Na=
r[0],Ea=r[1],Fa=r[2],Ga=r[3],Ja=r[4],oa=r[5],cb=r[6],gb=r[7],fb=r[8],a=r[9],ib=r[10],Za=r[11],Ua=r[12],Ta=r[13],jb=r[14];r=r[15];return Math.abs(m-Na)<=w.EPSILON*Math.max(1,Math.abs(m),Math.abs(Na))&&Math.abs(F-Ea)<=w.EPSILON*Math.max(1,Math.abs(F),Math.abs(Ea))&&Math.abs(U-Fa)<=w.EPSILON*Math.max(1,Math.abs(U),Math.abs(Fa))&&Math.abs(V-Ga)<=w.EPSILON*Math.max(1,Math.abs(V),Math.abs(Ga))&&Math.abs(K-Ja)<=w.EPSILON*Math.max(1,Math.abs(K),Math.abs(Ja))&&Math.abs(N-oa)<=w.EPSILON*Math.max(1,Math.abs(N),
Math.abs(oa))&&Math.abs(Z-cb)<=w.EPSILON*Math.max(1,Math.abs(Z),Math.abs(cb))&&Math.abs(da-gb)<=w.EPSILON*Math.max(1,Math.abs(da),Math.abs(gb))&&Math.abs(ja-fb)<=w.EPSILON*Math.max(1,Math.abs(ja),Math.abs(fb))&&Math.abs(la-a)<=w.EPSILON*Math.max(1,Math.abs(la),Math.abs(a))&&Math.abs(ra-ib)<=w.EPSILON*Math.max(1,Math.abs(ra),Math.abs(ib))&&Math.abs(ua-Za)<=w.EPSILON*Math.max(1,Math.abs(ua),Math.abs(Za))&&Math.abs(za-Ua)<=w.EPSILON*Math.max(1,Math.abs(za),Math.abs(Ua))&&Math.abs(ya-Ta)<=w.EPSILON*Math.max(1,
Math.abs(ya),Math.abs(Ta))&&Math.abs(Ba-jb)<=w.EPSILON*Math.max(1,Math.abs(Ba),Math.abs(jb))&&Math.abs(c-r)<=w.EPSILON*Math.max(1,Math.abs(c),Math.abs(r))}function ta(c){const r=w.EPSILON,m=c[0],F=c[1],U=c[2],V=c[4],K=c[5],N=c[6],Z=c[8],da=c[9];c=c[10];return Math.abs(1-(m*m+V*V+Z*Z))<=r&&Math.abs(1-(F*F+K*K+da*da))<=r&&Math.abs(1-(U*U+N*N+c*c))<=r}const va=e.create();e=Object.freeze({__proto__:null,copy:M,set:h,identity:t,transpose:l,invert:E,adjoint:q,determinant:u,multiply:H,translate:X,scale:n,
rotate:y,rotateX:A,rotateY:f,rotateZ:C,fromTranslation:B,fromScaling:T,fromRotation:I,fromXRotation:P,fromYRotation:L,fromZRotation:G,fromRotationTranslation:Y,fromQuat2:aa,getTranslation:k,getScaling:x,getRotation:O,fromRotationTranslationScale:R,fromRotationTranslationScaleOrigin:D,fromQuat:g,frustum:b,perspective:z,perspectiveFromFieldOfView:J,ortho:W,lookAt:ba,targetTo:ia,str:ma,frob:qa,add:wa,subtract:Ca,multiplyScalar:Ka,multiplyScalarAndAdd:Ha,exactEquals:Oa,equals:na,isOrthoNormal:ta,mul:H,
sub:Ca});p.add=wa;p.adjoint=q;p.copy=M;p.determinant=u;p.equals=na;p.exactEquals=Oa;p.frob=qa;p.fromQuat=g;p.fromQuat2=aa;p.fromRotation=I;p.fromRotationTranslation=Y;p.fromRotationTranslationScale=R;p.fromRotationTranslationScaleOrigin=D;p.fromScaling=T;p.fromTranslation=B;p.fromXRotation=P;p.fromYRotation=L;p.fromZRotation=G;p.frustum=b;p.getRotation=O;p.getScaling=x;p.getTranslation=k;p.identity=t;p.invert=E;p.isOrthoNormal=ta;p.lookAt=ba;p.mat4=e;p.mul=H;p.multiply=H;p.multiplyScalar=Ka;p.multiplyScalarAndAdd=
Ha;p.ortho=W;p.perspective=z;p.perspectiveFromFieldOfView=J;p.rotate=y;p.rotateX=A;p.rotateY=f;p.rotateZ=C;p.scale=n;p.set=h;p.str=ma;p.sub=Ca;p.subtract=Ca;p.targetTo=ia;p.translate=X;p.transpose=l})},"esri/chunks/pe":function(){define(["require","exports","./_rollupPluginBabelHelpers","../assets","../core/has"],function(p,e,w,M,h){function t(){return!!e._pe}function l(){return!!h("esri-wasm")}function E(){return y?y:y=(new Promise(function(f,C){p(["./pe-wasm"],f,C)})).then(function(f){return f.peWasm}).then(({default:f})=>
f({locateFile:C=>M.getAssetUrl(`esri/geometry/support/${C}`)})).then(f=>{q(f)})}function q(f){function C(I,P,L){I[P]=L(I[P])}e._pe=f;e.PeDefs.init();e.PeGTlistExtended.init();e.PeNotationMgrs.init();e.PeNotationUtm.init();e.PePCSInfo.init();e.PeGCSExtent=function(I){function P(){return I.apply(this,arguments)||this}w._inheritsLoose(P,I);P.prototype.destroy=function(){e._pe.destroy(this)};return P}(e._pe.PeGCSExtent);f=[e._pe.PeDatum,e._pe.PeGeogcs,e._pe.PeGeogtran,e._pe.PeObject,e._pe.PeParameter,
e._pe.PePrimem,e._pe.PeProjcs,e._pe.PeSpheroid,e._pe.PeUnit];for(var B of f)C(B.prototype,"getName",I=>function(){return I.call(this,Array(e.PeDefs.PE_NAME_MAX))});for(const I of[e._pe.PeGeogtran,e._pe.PeProjcs])C(I.prototype,"getParameters",P=>function(){const L=Array(e.PeDefs.PE_PARM_MAX);let G=P.call(this);for(let Y=0;Y<L.length;Y++){const aa=e._pe.getValue(G,"*");L[Y]=aa?e._pe.wrapPointer(aa,e._pe.PeParameter):null;G+=Int32Array.BYTES_PER_ELEMENT}return L});C(e._pe.PeHorizon.prototype,"getCoord",
I=>function(){const P=this.getSize();if(!P)return null;const L=[],G=I.call(this);n(L,P,G);return L});C(e._pe.PeGTlistExtendedEntry.prototype,"getEntries",I=>{const P=e._pe._pe_getPeGTlistExtendedGTsSize();return function(){let L=null;var G=I.call(this);if(!e._pe.compare(G,e._pe.NULL)){L=[G];const Y=this.getSteps();if(1<Y){G=e._pe.getPointer(G);for(let aa=1;aa<Y;aa++)L.push(e._pe.wrapPointer(G+P*aa,e._pe.PeGTlistExtendedGTs))}}return L}});const T=e._pe._pe_getPeHorizonSize();B=I=>function(){let P=
this._cache;P||(this._cache=P=new Map);if(P.has(I))return P.get(I);let L=null;var G=I.call(this);if(!e._pe.compare(G,e._pe.NULL)){L=[G];const Y=G.getNump();if(1<Y){G=e._pe.getPointer(G);for(let aa=1;aa<Y;aa++)L.push(e._pe.wrapPointer(G+T*aa,e._pe.PeHorizon))}}P.set(I,L);return L};C(e._pe.PeProjcs.prototype,"horizonGcsGenerate",B);C(e._pe.PeProjcs.prototype,"horizonPcsGenerate",B);e._pe.PeObject.prototype.toString=function(I=e.PeDefs.PE_STR_OPTS_NONE){e._pe.ensureCache.prepare();const P=e._pe.getPointer(this),
L=e._pe.ensureInt8(Array(e.PeDefs.PE_BUFFER_MAX));return e._pe.UTF8ToString(e._pe._pe_object_to_string_ext(P,I,L))}}function u(f){if(f){var C=e._pe.getClass(f);C&&(C=e._pe.getCache(C))&&(f=e._pe.getPointer(f))&&delete C[f]}}function H(f,C){const B=[];C=Array(C);for(let T=0;T<f;T++)B.push(e._pe.ensureInt8(C));return B}function X(f){let C;Array.isArray(f[0])?(C=[],f.forEach(B=>{C.push(B[0],B[1])})):C=f;return C}function n(f,C,B,T=!1){if(T)for(T=0;T<2*C;T++)f[T]=e._pe.getValue(B+T*Float64Array.BYTES_PER_ELEMENT,
"double");else{T=0===f.length;for(let I=0;I<C;I++)T&&(f[I]=Array(2)),f[I][0]=e._pe.getValue(B,"double"),f[I][1]=e._pe.getValue(B+Float64Array.BYTES_PER_ELEMENT,"double"),B+=2*Float64Array.BYTES_PER_ELEMENT}}let y;e._pe=null;e.PeCSTransformations=void 0;(function(f){function C(I,P,L){e._pe.ensureCache.prepare();var G=X(L);const Y=L===G;G=e._pe.ensureFloat64(G);(I=e._pe._pe_geog_to_proj(e._pe.getPointer(I),P,G))&&n(L,P,G,Y);return I}function B(I,P,L){return T(I,P,L,0)}function T(I,P,L,G){e._pe.ensureCache.prepare();
var Y=X(L);const aa=L===Y;Y=e._pe.ensureFloat64(Y);(I=e._pe._pe_proj_to_geog_center(e._pe.getPointer(I),P,Y,G))&&n(L,P,Y,aa);return I}f.geogToProj=C;f.projGeog=function(I,P,L,G){switch(G){case e.PeDefs.PE_TRANSFORM_P_TO_G:return B(I,P,L);case e.PeDefs.PE_TRANSFORM_G_TO_P:return C(I,P,L)}return 0};f.projToGeog=B;f.projToGeogCenter=T})(e.PeCSTransformations||(e.PeCSTransformations={}));e.PeDefs=void 0;(function(f){f.init=function(){f.PE_BUFFER_MAX=e._pe.PeDefs.prototype.PE_BUFFER_MAX;f.PE_NAME_MAX=
e._pe.PeDefs.prototype.PE_NAME_MAX;f.PE_MGRS_MAX=e._pe.PeDefs.prototype.PE_MGRS_MAX;f.PE_USNG_MAX=e._pe.PeDefs.prototype.PE_USNG_MAX;f.PE_DD_MAX=e._pe.PeDefs.prototype.PE_DD_MAX;f.PE_DDM_MAX=e._pe.PeDefs.prototype.PE_DDM_MAX;f.PE_DMS_MAX=e._pe.PeDefs.prototype.PE_DMS_MAX;f.PE_UTM_MAX=e._pe.PeDefs.prototype.PE_UTM_MAX;f.PE_PARM_MAX=e._pe.PeDefs.prototype.PE_PARM_MAX;f.PE_TYPE_NONE=e._pe.PeDefs.prototype.PE_TYPE_NONE;f.PE_TYPE_GEOGCS=e._pe.PeDefs.prototype.PE_TYPE_GEOGCS;f.PE_TYPE_PROJCS=e._pe.PeDefs.prototype.PE_TYPE_PROJCS;
f.PE_TYPE_GEOGTRAN=e._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN;f.PE_TYPE_COORDSYS=e._pe.PeDefs.prototype.PE_TYPE_COORDSYS;f.PE_TYPE_UNIT=e._pe.PeDefs.prototype.PE_TYPE_UNIT;f.PE_TYPE_LINUNIT=e._pe.PeDefs.prototype.PE_TYPE_LINUNIT;f.PE_STR_OPTS_NONE=e._pe.PeDefs.prototype.PE_STR_OPTS_NONE;f.PE_STR_AUTH_NONE=e._pe.PeDefs.prototype.PE_STR_AUTH_NONE;f.PE_STR_AUTH_TOP=e._pe.PeDefs.prototype.PE_STR_AUTH_TOP;f.PE_STR_NAME_CANON=e._pe.PeDefs.prototype.PE_STR_NAME_CANON;f.PE_PARM_X0=e._pe.PeDefs.prototype.PE_PARM_X0;
f.PE_PARM_ND=e._pe.PeDefs.prototype.PE_PARM_ND;f.PE_TRANSFORM_1_TO_2=e._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2;f.PE_TRANSFORM_2_TO_1=e._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1;f.PE_TRANSFORM_P_TO_G=e._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G;f.PE_TRANSFORM_G_TO_P=e._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P;f.PE_HORIZON_RECT=e._pe.PeDefs.prototype.PE_HORIZON_RECT;f.PE_HORIZON_POLY=e._pe.PeDefs.prototype.PE_HORIZON_POLY;f.PE_HORIZON_LINE=e._pe.PeDefs.prototype.PE_HORIZON_LINE;f.PE_HORIZON_DELTA=e._pe.PeDefs.prototype.PE_HORIZON_DELTA}})(e.PeDefs||
(e.PeDefs={}));e.PeFactory=void 0;(function(f){function C(P,L){let G=null,Y=B[P];Y||(Y={},B[P]=Y);Y.hasOwnProperty(String(L))?G=Y[L]:(P=e._pe.PeFactory.prototype.factoryByType(P,L),e._pe.compare(P,e._pe.NULL)||(G=P,Y[L]=G));return G=I(G)}const B={},T={},I=P=>{if(P){const L=P.getType();switch(L){case e.PeDefs.PE_TYPE_GEOGCS:P=e._pe.castObject(P,e._pe.PeGeogcs);break;case e.PeDefs.PE_TYPE_PROJCS:P=e._pe.castObject(P,e._pe.PeProjcs);break;case e.PeDefs.PE_TYPE_GEOGTRAN:P=e._pe.castObject(P,e._pe.PeGeogtran);
break;default:L&e.PeDefs.PE_TYPE_UNIT&&(P=e._pe.castObject(P,e._pe.PeUnit))}}return P};f.initialize=function(){e._pe.PeFactory.prototype.initialize(null)};f.coordsys=function(P){return C(e.PeDefs.PE_TYPE_COORDSYS,P)};f.factoryByType=C;f.fromString=function(P,L){let G=null,Y=T[P];Y||(Y={},T[P]=Y);Y.hasOwnProperty(L)?G=Y[L]:(P=e._pe.PeFactory.prototype.fromString(P,L),e._pe.compare(P,e._pe.NULL)||(G=P,Y[L]=G));return G=I(G)};f.geogcs=function(P){return C(e.PeDefs.PE_TYPE_GEOGCS,P)};f.geogtran=function(P){return C(e.PeDefs.PE_TYPE_GEOGTRAN,
P)};f.getCode=function(P){return e._pe.PeFactory.prototype.getCode(P)};f.projcs=function(P){return C(e.PeDefs.PE_TYPE_PROJCS,P)};f.unit=function(P){return C(e.PeDefs.PE_TYPE_UNIT,P)}})(e.PeFactory||(e.PeFactory={}));e.PeGCSExtent=null;e.PeGTlistExtended=void 0;(function(f){let C;f.init=function(){f.PE_GTLIST_OPTS_COMMON=e._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON;C=e._pe._pe_getPeGTlistExtendedEntrySize()};f.getGTlist=function(B,T,I,P,L,G){let Y=null;const aa=new e._pe.PeInteger(G);try{const k=
e._pe.PeGTlistExtended.prototype.getGTlist(B,T,I,P,L,aa);if(G=aa.val)if(Y=[k],1<G){const x=e._pe.getPointer(k);for(B=1;B<G;B++)Y.push(e._pe.wrapPointer(x+C*B,e._pe.PeGTlistExtendedEntry))}}finally{e._pe.destroy(aa)}return Y}})(e.PeGTlistExtended||(e.PeGTlistExtended={}));e.PeGTlistExtendedEntry=void 0;(function(f){f.destroy=function(C){if(C&&C.length){for(const B of C)u(B),B.getEntries().forEach(T=>{u(T);T=T.getGeogtran();u(T);T.getParameters().forEach(u);[T.getGeogcs1(),T.getGeogcs2()].forEach(I=>
{u(I);const P=I.getDatum();u(P);u(P.getSpheroid());u(I.getPrimem());u(I.getUnit())})});e._pe.PeGTlistExtendedEntry.prototype.Delete(C[0])}}})(e.PeGTlistExtendedEntry||(e.PeGTlistExtendedEntry={}));e.PeGTTransformations=void 0;(function(f){f.geogToGeog=function(C,B,T,I,P){e._pe.ensureCache.prepare();var L=X(T);const G=T===L;L=e._pe.ensureFloat64(L);let Y=0;I&&(Y=e._pe.ensureFloat64(I));(C=e._pe._pe_geog_to_geog(e._pe.getPointer(C),B,L,Y,P))&&n(T,B,L,G);return C}})(e.PeGTTransformations||(e.PeGTTransformations=
{}));e.PeNotationDms=void 0;(function(f){const C=(T,I,P,L,G,Y)=>{e._pe.ensureCache.prepare();switch(T){case "dd":var aa=e._pe._pe_geog_to_dd;var k=e.PeDefs.PE_DD_MAX;break;case "ddm":aa=e._pe._pe_geog_to_ddm;k=e.PeDefs.PE_DDM_MAX;break;case "dms":aa=e._pe._pe_geog_to_dms,k=e.PeDefs.PE_DMS_MAX}T=0;I&&(T=e._pe.getPointer(I));I=X(L);I=e._pe.ensureFloat64(I);k=H(P,k);L=e._pe.ensureInt32(k);if(G=aa(T,P,I,G,L))for(aa=0;aa<P;aa++)Y[aa]=e._pe.UTF8ToString(k[aa]);return G},B=(T,I,P,L,G)=>{e._pe.ensureCache.prepare();
switch(T){case "dd":var Y=e._pe._pe_dd_to_geog;break;case "ddm":Y=e._pe._pe_ddm_to_geog;break;case "dms":Y=e._pe._pe_dms_to_geog}T=0;I&&(T=e._pe.getPointer(I));I=L.map(aa=>e._pe.ensureString(aa));L=e._pe.ensureInt32(I);I=e._pe.ensureFloat64(Array(2*P));(Y=Y(T,P,L,I))&&n(G,P,I);return Y};f.geog_to_dms=function(T,I,P,L,G){return C("dms",T,I,P,L,G)};f.dms_to_geog=function(T,I,P,L){return B("dms",T,I,P,L)};f.geog_to_ddm=function(T,I,P,L,G){return C("ddm",T,I,P,L,G)};f.ddm_to_geog=function(T,I,P,L){return B("ddm",
T,I,P,L)};f.geog_to_dd=function(T,I,P,L,G){return C("dd",T,I,P,L,G)};f.dd_to_geog=function(T,I,P,L){return B("dd",T,I,P,L)}})(e.PeNotationDms||(e.PeNotationDms={}));e.PeNotationMgrs=void 0;(function(f){f.init=function(){f.PE_MGRS_STYLE_NEW=e._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW;f.PE_MGRS_STYLE_OLD=e._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD;f.PE_MGRS_STYLE_AUTO=e._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO;f.PE_MGRS_180_ZONE_1_PLUS=e._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS;
f.PE_MGRS_ADD_SPACES=e._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES};f.geog_to_mgrs_extended=function(C,B,T,I,P,L,G){e._pe.ensureCache.prepare();let Y=0;C&&(Y=e._pe.getPointer(C));C=X(T);T=e._pe.ensureFloat64(C);C=H(B,e.PeDefs.PE_MGRS_MAX);const aa=e._pe.ensureInt32(C);if(I=e._pe._pe_geog_to_mgrs_extended(Y,B,T,I,P,L,aa))for(P=0;P<B;P++)G[P]=e._pe.UTF8ToString(C[P]);return I};f.mgrs_to_geog_extended=function(C,B,T,I,P){e._pe.ensureCache.prepare();let L=0;C&&(L=e._pe.getPointer(C));C=T.map(G=>e._pe.ensureString(G));
T=e._pe.ensureInt32(C);C=e._pe.ensureFloat64(Array(2*B));(I=e._pe._pe_mgrs_to_geog_extended(L,B,T,I,C))&&n(P,B,C);return I}})(e.PeNotationMgrs||(e.PeNotationMgrs={}));e.PeNotationUsng=void 0;(function(f){f.geog_to_usng=function(C,B,T,I,P,L,G){e._pe.ensureCache.prepare();let Y=0;C&&(Y=e._pe.getPointer(C));C=X(T);T=e._pe.ensureFloat64(C);C=H(B,e.PeDefs.PE_MGRS_MAX);const aa=e._pe.ensureInt32(C);if(I=e._pe._pe_geog_to_usng(Y,B,T,I,P,L,aa))for(P=0;P<B;P++)G[P]=e._pe.UTF8ToString(C[P]);return I};f.usng_to_geog=
function(C,B,T,I){e._pe.ensureCache.prepare();var P=0;C&&(P=e._pe.getPointer(C));C=T.map(L=>e._pe.ensureString(L));T=e._pe.ensureInt32(C);C=e._pe.ensureFloat64(Array(2*B));(P=e._pe._pe_usng_to_geog(P,B,T,C))&&n(I,B,C);return P}})(e.PeNotationUsng||(e.PeNotationUsng={}));e.PeNotationUtm=void 0;(function(f){f.init=function(){f.PE_UTM_OPTS_NONE=e._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE;f.PE_UTM_OPTS_ADD_SPACES=e._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES;f.PE_UTM_OPTS_NS=e._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS};
f.geog_to_utm=function(C,B,T,I,P){e._pe.ensureCache.prepare();var L=0;C&&(L=e._pe.getPointer(C));C=X(T);T=e._pe.ensureFloat64(C);C=H(B,e.PeDefs.PE_UTM_MAX);const G=e._pe.ensureInt32(C);if(I=e._pe._pe_geog_to_utm(L,B,T,I,G))for(L=0;L<B;L++)P[L]=e._pe.UTF8ToString(C[L]);return I};f.utm_to_geog=function(C,B,T,I,P){e._pe.ensureCache.prepare();let L=0;C&&(L=e._pe.getPointer(C));C=T.map(G=>e._pe.ensureString(G));T=e._pe.ensureInt32(C);C=e._pe.ensureFloat64(Array(2*B));(I=e._pe._pe_utm_to_geog(L,B,T,I,C))&&
n(P,B,C);return I}})(e.PeNotationUtm||(e.PeNotationUtm={}));e.PePCSInfo=void 0;(function(f){const C=new Map;f.init=function(){f.PE_PCSINFO_OPTION_NONE=e._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE;f.PE_PCSINFO_OPTION_DOMAIN=e._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN;f.PE_POLE_OUTSIDE_BOUNDARY=e._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY;f.PE_POLE_POINT=e._pe.PePCSInfo.prototype.PE_POLE_POINT};f.generate=function(B,T=f.PE_PCSINFO_OPTION_DOMAIN){let I,P;C.has(B)&&(P=C.get(B),P[T]&&
(I=P[T]));I||(I=e._pe.PePCSInfo.prototype.generate(B,T),P||(P=[],C.set(B,P)),P[T]=I);return I}})(e.PePCSInfo||(e.PePCSInfo={}));e.PeVersion=void 0;(function(f){f.version_string=function(){return e._pe.PeVersion.prototype.version_string()}})(e.PeVersion||(e.PeVersion={}));var A=Object.freeze({__proto__:null,get _pe(){return e._pe},isLoaded:t,isSupported:l,load:E,get PeCSTransformations(){return e.PeCSTransformations},get PeDefs(){return e.PeDefs},get PeFactory(){return e.PeFactory},get PeGCSExtent(){return e.PeGCSExtent},
get PeGTlistExtended(){return e.PeGTlistExtended},get PeGTlistExtendedEntry(){return e.PeGTlistExtendedEntry},get PeGTTransformations(){return e.PeGTTransformations},get PeNotationDms(){return e.PeNotationDms},get PeNotationMgrs(){return e.PeNotationMgrs},get PeNotationUsng(){return e.PeNotationUsng},get PeNotationUtm(){return e.PeNotationUtm},get PePCSInfo(){return e.PePCSInfo},get PeVersion(){return e.PeVersion},_init:q});e._init=q;e.isLoaded=t;e.isSupported=l;e.load=E;e.pe=A})},"esri/assets":function(){define("exports ./config ./request ./core/Error ./core/Logger ./core/urlUtils".split(" "),
function(p,e,w,M,h,t){function l(q){if(!e.assetsPath)throw E.errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new M("assets:path-not-set","config.assetsPath is not set");return t.join(e.assetsPath,q)}const E=h.getLogger("esri.assets");p.fetchAsset=function(q,u){return w(l(q),u)};p.getAssetUrl=l;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/request":function(){define("require ./chunks/_rollupPluginBabelHelpers ./config ./kernel ./core/Error ./core/global ./core/has ./core/lang ./core/maybe ./core/promiseUtils ./core/urlUtils ./support/apiKeyUtils ./support/requestUtils".split(" "),
function(p,e,w,M,h,t,l,E,q,u,H,X,n){function y(na,ta){return A.apply(this,arguments)}function A(){A=e._asyncToGenerator(function*(na,ta){var va=H.isDataProtocol(na);const c=H.isBlobProtocol(na);c||va||(na=H.normalize(na));const r={url:na,requestOptions:{...q.unwrap(ta)}};let m=H.getInterceptor(na);if(m){na=yield O(m,r);if(null!=na)return{data:na,getHeader:Ha,requestOptions:r.requestOptions,url:r.url};m.after||m.error||(m=null)}na=r.url;ta=r.requestOptions;if("image"===ta.responseType){if(l("host-webworker")||
l("host-node"))throw B("request:invalid-parameters",Error("responseType 'image' is not supported in Web Workers or Node environment"),r);}else if(va)throw B("request:invalid-parameters",Error("Data URLs are not supported for responseType \x3d "+ta.responseType),r);if("head"===ta.method){if(ta.body)throw B("request:invalid-parameters",Error("body parameter cannot be set when method is 'head'"),r);if(va||c)throw B("request:invalid-parameters",Error("data and blob URLs are not supported for method 'head'"),
r);}yield T();if(ia)return ia.execute(na,ta);const F=u.createAbortController();u.onAbort(ta,()=>F.abort());va=yield b({controller:F,credential:null,credentialToken:null,fetchOptions:null,hasToken:!1,interceptor:m,params:r,redoRequest:!1,useIdentity:ma.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1});m&&m.after&&m.after(va);return va});return A.apply(this,arguments)}function f(na){(na=H.getOrigin(na))&&!y._corsServers.includes(na)&&y._corsServers.push(na)}function C(na){na=H.getOrigin(na);return!na||
na.endsWith(".arcgis.com")||y._corsServers.includes(na)||H.isTrustedServer(na)}function B(na,ta,va,c){let r="Error";const m={url:va.url,requestOptions:va.requestOptions,getHeader:Ha,ssl:!1};if(ta instanceof h)return ta.details?(ta.details=E.clone(ta.details),ta.details.url=va.url,ta.details.requestOptions=va.requestOptions):ta.details=m,ta;if(ta){va=c&&(V=>c.headers.get(V));const F=c&&c.status,U=ta.message;U&&(r=U);va&&(m.getHeader=va);m.httpStatus=(null!=ta.httpCode?ta.httpCode:ta.code)||F||0;m.subCode=
ta.subcode;m.messageCode=ta.messageCode;m.messages="string"===typeof ta.details?[ta.details]:ta.details;m.raw=Oa in ta?ta[Oa]:ta}return u.isAbortError(ta)?u.createAbortError():new h(na,r,m)}function T(){return I.apply(this,arguments)}function I(){I=e._asyncToGenerator(function*(){l("host-webworker")?ia||(ia=yield new Promise(function(na,ta){p(["./core/workers/request"],na,ta)})):y._abortableFetch||(y._abortableFetch=t.fetch.bind(t))});return I.apply(this,arguments)}function P(){return L.apply(this,
arguments)}function L(){L=e._asyncToGenerator(function*(){M.id||(yield new Promise(function(na,ta){p(["./identity/IdentityManager"],function(va){na(Object.freeze({__proto__:null,"default":va}))},ta)}))});return L.apply(this,arguments)}function G(na){return Y.apply(this,arguments)}function Y(){Y=e._asyncToGenerator(function*(na){const ta=na.params.url,va=na.params.requestOptions,c=na.controller.signal,r=va.body;let m=null,F=null,U=null;qa&&"HTMLFormElement"in t&&(r instanceof FormData?m=r:r instanceof
HTMLFormElement&&(F=r,m=new FormData(F)));"string"===typeof r&&(U=r);na.fetchOptions={cache:va.cacheBust&&!y._abortableFetch.polyfill?"no-cache":"default",credentials:"same-origin",headers:va.headers||{},method:"head"===va.method?"HEAD":"GET",mode:"cors",redirect:"follow",signal:c};if(m||U)na.fetchOptions.body=m||U;"anonymous"===va.authMode&&(na.useIdentity=!1);na.hasToken=!!(/token=/i.test(ta)||va.query&&va.query.token||m&&m.get&&m.get("token")||F&&F.elements.token);!na.hasToken&&w.apiKey&&X.supportsApiKey(ta)&&
(va.query||(va.query={}),va.query.token=w.apiKey,na.hasToken=!0);if(na.useIdentity&&!na.hasToken&&!na.credentialToken&&!aa(ta)&&!u.isAborted(c)){let V;"immediate"===va.authMode?(yield P(),V=yield M.id.getCredential(ta,{signal:c}),na.credential=V):"no-prompt"===va.authMode?(yield P(),V=yield M.id.getCredential(ta,{prompt:!1,signal:c}).catch(()=>{}),na.credential=V):M.id&&(V=M.id.findCredential(ta));V&&(na.credentialToken=V.token,na.useSSL=!!V.ssl)}});return Y.apply(this,arguments)}function aa(na){return Ka.some(ta=>
ta.test(na))}function k(na){return x.apply(this,arguments)}function x(){x=e._asyncToGenerator(function*(na){let ta=na.params.url;const va=na.params.requestOptions,c=na.fetchOptions,r=H.isBlobProtocol(ta)||H.isDataProtocol(ta),m=va.responseType||"json",F=r?0:null!=va.timeout?va.timeout:ma.timeout;var U=!1;if(!r){na.useSSL&&(ta=H.toHTTPS(ta));va.cacheBust&&"default"===c.cache&&(ta=H.addQueryParameter(ta,"request.preventCache",Date.now()));var V={...va.query};na.credentialToken&&(V.token=na.credentialToken);
U=H.objectToQuery(V);l("esri-url-encodes-apostrophe")&&(U=U.replace(/'/g,"%27"));const ja=ta.length+1+U.length;U="delete"===va.method||"post"===va.method||"put"===va.method||!!va.body||ja>ma.maxUrlLength;const la=va.useProxy||!!H.getProxyRule(ta);if(la){const ra=H.getProxyUrl(ta);var K=ra.path;!U&&K.length+1+ja>ma.maxUrlLength&&(U=!0);ra.query&&(V={...ra.query,...V})}if("HEAD"===c.method&&(U||la)){if(U){if(ja>ma.maxUrlLength)throw B("request:invalid-parameters",Error("URL exceeds maximum length"),
na.params);throw B("request:invalid-parameters",Error("cannot use POST request when method is 'head'"),na.params);}if(la)throw B("request:invalid-parameters",Error("cannot use proxy when method is 'head'"),na.params);}U?(c.method="delete"===va.method?"DELETE":"put"===va.method?"PUT":"POST",va.body?ta=H.addQueryParameters(ta,V):(c.body=H.objectToQuery(V),c.headers["Content-Type"]="application/x-www-form-urlencoded")):ta=H.addQueryParameters(ta,V);la&&(na.useProxy=!0,ta=`${K}?${ta}`);V.token&&qa&&c.body instanceof
FormData&&(K=c.body,K.set?K.set("token",V.token):K.append("token",V.token));va.hasOwnProperty("withCredentials")?na.withCredentials=va.withCredentials:H.hasSameOrigin(ta,H.appUrl)||(H.isTrustedServer(ta)?na.withCredentials=!0:M.id&&(V=M.id.findServerInfo(ta))&&V.webTierAuth&&(na.withCredentials=!0));na.withCredentials&&(c.credentials="include")}V=0;let N=!1;0<F&&(V=setTimeout(()=>{N=!0;na.controller.abort()},F));let Z,da;try{if("native-request-init"===va.responseType)da=c,da.url=ta;else if("image"!==
va.responseType||"default"!==c.cache||"GET"!==c.method||U||D(va.headers)||!r&&!na.useProxy&&ma.proxyUrl&&!C(ta))if(Z=yield y._abortableFetch(ta,c),na.useProxy||f(ta),"native"===va.responseType)da=Z;else{if("HEAD"!==c.method)if(Z.ok){switch(m){case "array-buffer":da=yield Z.arrayBuffer();break;case "blob":case "image":da=yield Z.blob();break;default:da=yield Z.text()}V&&(clearTimeout(V),V=0);if("json"===m||"xml"===m||"document"===m)if(da)switch(m){case "json":da=JSON.parse(da);break;case "xml":da=
g(da,"application/xml");break;case "document":da=g(da,"text/html")}else da=null;if(da){if("array-buffer"===m||"blob"===m){const ja=Z.headers.get("Content-Type");if(/application\/json|text\/plain/i.test(ja)&&750>=da["blob"===m?"size":"byteLength"])try{const la=yield(new Response(da)).json();la.error&&(da=la)}catch{}}"image"===m&&da instanceof Blob&&(da=yield ba(URL.createObjectURL(da),na,!0))}}else da=yield Z.text()}else da=yield ba(ta,na)}catch(ja){if("AbortError"===ja.name){if(N)throw Error("Timeout exceeded");
throw u.createAbortError("Request canceled");}if(!Z&&ja instanceof TypeError&&ma.proxyUrl&&!va.body&&"delete"!==va.method&&"head"!==va.method&&"post"!==va.method&&"put"!==va.method&&!na.useProxy&&!C(ta))na.redoRequest=!0,H.addProxyRule({proxyUrl:ma.proxyUrl,urlPrefix:H.getOrigin(ta)});else throw ja;}finally{V&&clearTimeout(V)}return[Z,da]});return x.apply(this,arguments)}function O(na,ta){return R.apply(this,arguments)}function R(){R=e._asyncToGenerator(function*(na,ta){if(null!=na.responseData)return na.responseData;
na.headers&&(ta.requestOptions.headers={...ta.requestOptions.headers,...na.headers});na.query&&(ta.requestOptions.query={...ta.requestOptions.query,...na.query});if(na.before){let va,c;try{c=yield na.before(ta)}catch(r){va=B("request:interceptor",r,ta)}if(c instanceof Error||c instanceof h)va=B("request:interceptor",c,ta);if(va)throw na.error&&na.error(va),va;return c}});return R.apply(this,arguments)}function D(na){if(na)for(const ta of Object.getOwnPropertyNames(na))if(na[ta])return!0;return!1}
function g(na,ta){let va;try{va=(new DOMParser).parseFromString(na,ta)}catch{}if(!va||va.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return va}function b(na){return z.apply(this,arguments)}function z(){z=e._asyncToGenerator(function*(na){var ta,va;yield G(na);let c;try{do[c,r]=yield k(na);while(!(yield J(na,c,r)))}catch(F){var r=B("request:server",F,na.params,c);r.details.ssl=na.useSSL;na.interceptor&&na.interceptor.error&&na.interceptor.error(r);throw r;}const m=
na.params.url;!/\/sharing\/rest\/(accounts|portals)\/self/i.test(m)||na.hasToken||na.credentialToken||null==(ta=r)||null==(va=ta.user)||!va.username||H.isTrustedServer(m)||(ta=H.getOrigin(m,!0))&&ma.trustedServers.push(ta);(ta=na.credential)&&M.id&&(va=(va=M.id.findServerInfo(ta.server))&&va.owningSystemUrl)&&(va=va.replace(/\/?$/,"/sharing"),(ta=M.id.findCredential(va,ta.userId))&&-1===M.id._getIdenticalSvcIdx(va,ta)&&ta.resources.unshift(va));return{data:r,getHeader:c?F=>c.headers.get(F):Ha,requestOptions:na.params.requestOptions,
ssl:na.useSSL,url:na.params.url}});return z.apply(this,arguments)}function J(na,ta,va){return W.apply(this,arguments)}function W(){W=e._asyncToGenerator(function*(na,ta,va){if(na.redoRequest)return na.redoRequest=!1;const c=na.params.requestOptions;if(!ta||"native"===c.responseType||"native-request-init"===c.responseType)return!0;let r;if(!ta.ok)throw r=Error(`Unable to load ${ta.url} status: ${ta.status}`),r[Oa]=va,r;null!=va&&va.error&&(r=va.error);let m,F,U;r&&(m=Number(r.code),F=r.hasOwnProperty("subcode")?
Number(r.subcode):null,U=(U=r.messageCode)&&U.toUpperCase());ta=c.authMode;if(403===m&&(4===F||r.message&&-1<r.message.toLowerCase().indexOf("ssl")&&-1===r.message.toLowerCase().indexOf("permission"))){if(!na.useSSL)return na.useSSL=!0,!1}else if(!na.hasToken&&na.useIdentity&&("no-prompt"!==ta||498===m)&&-1!==wa.indexOf(m)&&!aa(na.params.url)&&(403!==m||-1===Ca.indexOf(U)&&(null==F||2===F&&na.credentialToken))){yield P();try{const V=yield M.id.getCredential(na.params.url,{error:B("request:server",
r,na.params),prompt:"no-prompt"!==ta,signal:na.controller.signal,token:na.credentialToken});na.credential=V;na.credentialToken=V.token;na.useSSL=na.useSSL||V.ssl;return!1}catch(V){if("no-prompt"===ta)return na.credential=null,na.credentialToken=null,!1;r=V}}if(r)throw r;return!0});return W.apply(this,arguments)}function ba(na,ta,va=!1){const c=ta.controller.signal,r=new Image;r.crossOrigin=ta.withCredentials?"use-credentials":"anonymous";r.alt="";r.src=na;return n.loadImageAsync(r,na,va,c)}let ia;
const ma=w.request,qa="FormData"in t,wa=[499,498,403,401],Ca=["COM_0056","COM_0057","SB_0008"],Ka=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],Ha=()=>null,Oa=Symbol();y._abortableFetch=null;y._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"];return y})},"esri/support/apiKeyUtils":function(){define(["exports","../core/urlUtils"],function(p,e){const w=["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"];
p.isApiKey=function(M){return M&&4<M.length&&M.startsWith("AAPK")};p.supportsApiKey=function(M){const h=e.getOrigin(M,!0);return h&&h.endsWith(".arcgis.com")&&!w.includes(h)&&!M.endsWith("/sharing/rest/generateToken")};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/support/requestUtils":function(){define(["exports","../core/has","../core/maybe","../core/promiseUtils"],function(p,e,w,M){function h(){try{return new DOMException("Aborted","AbortError")}catch{const t=Error();t.name="AbortError";
return t}}p.loadImageAsync=function(t,l,E=!1,q){return new Promise((u,H)=>{if(M.isAborted(q))H(h());else{var X=()=>{A();H(Error(`Unable to load ${l}`))},n=()=>{const f=t;A();u(f)},y=()=>{if(t){var f=t;A();f.src="";H(h())}},A=()=>{e("esri-image-decode")||(t.removeEventListener("error",X),t.removeEventListener("load",n));t=n=X=null;w.isSome(q)&&q.removeEventListener("abort",y);y=null;E&&URL.revokeObjectURL(l)};w.isSome(q)&&q.addEventListener("abort",y);e("esri-image-decode")?t.decode().then(n,X):(t.addEventListener("error",
X),t.addEventListener("load",n))}})};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/geometry/support/geodesicConstants":function(){define(["exports","./Ellipsoid"],function(p,e){const w=Math.PI/180;var M=e.earth.radius;const h=e.earth.eccentricitySquared;M={a1:M*h,a2:M*h*M*h,a3:M*h*h/2,a4:M*h*M*h*2.5,a5:M*h+M*h*h/2,a6:1-h};e={4267:{a:6378206.4,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:e.earth.radius,f:e.earth.flattening},104900:{a:2439700,f:0},104901:{a:6051E3,f:0},104902:{a:6051800,
f:0},104903:{a:e.moon.radius,f:e.moon.flattening},104904:{a:3393400,f:.005207166853303471},104905:{a:e.mars.radius,f:e.mars.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492E3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1E4,f:0},104912:{a:2409300,f:0},104913:{a:15E3,f:0},104914:{a:4E4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85E3,f:0},104918:{a:1821460,f:0},104919:{a:5E3,f:0},104920:{a:12E3,f:0},104921:{a:3E4,f:3},104922:{a:18E3,
f:0},104923:{a:14E3,f:0},104924:{a:49300,f:0},104925:{a:60268E3,f:.09796243445941462},104926:{a:16E3,f:0},104927:{a:9500,f:0},104928:{a:56E4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16E3,f:0},104932:{a:133E3,f:0},104933:{a:718E3,f:0},104934:{a:888E3,f:0},104935:{a:1986300,f:0},104936:{a:1E4,f:0},104937:{a:41900,f:0},104938:{a:11E4,f:0},104939:{a:50100,f:0},104940:{a:764E3,f:0},104941:{a:11E3,f:0},104942:{a:529800,f:0},104943:{a:2575E3,f:0},104944:{a:25559E3,f:.022927344575296365},
104945:{a:578900,f:0},104946:{a:33E3,f:0},104947:{a:21E3,f:0},104948:{a:13E3,f:0},104949:{a:31E3,f:0},104950:{a:27E3,f:0},104951:{a:42E3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15E3,f:0},104955:{a:54E3,f:0},104956:{a:77E3,f:0},104957:{a:27E3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764E3,f:.01708124697141011},104961:{a:74E3,f:0},104962:{a:79E3,f:0},104963:{a:104E3,f:.14423076923076922},104964:{a:29E3,f:0},104965:{a:17E4,f:0},104966:{a:208E3,f:0},104967:{a:4E4,
f:0},104968:{a:1352600,f:0},104969:{a:1195E3,f:0},104970:{a:593E3,f:0},104971:{a:e.mars.radius,f:0},104972:{a:47E4,f:0},104973:{a:255E3,f:0},104974:{a:2439400,f:0}};p.WKT_SPHEROID_REGEX=/SPHEROID\[([^\]]+)]/i;p.earthEllipsoidConstants=M;p.spheroids=e;p.toRadians=w;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/geometry/support/GeographicTransformation":function(){define(["./GeographicTransformationStep"],function(p){return function(){function e(M){this.steps=[];this._cached_projection=
{};this._chain="";this._gtlistentry=null;if(M&&M.steps)for(const h of M.steps)h instanceof p?this.steps.push(h):this.steps.push(new p({wkid:h.wkid,wkt:h.wkt,isInverse:h.isInverse}))}e.cacheKey=function(M,h){return[void 0!==M.wkid&&null!==M.wkid?M.wkid.toString():"-1",void 0!==M.wkt&&null!==M.wkt?M.wkt.toString():"",void 0!==h.wkid&&null!==h.wkid?h.wkid.toString():"-1",void 0!==h.wkt&&null!==h.wkt?h.wkt.toString():""].join()};e.fromGE=function(M){const h=new e;let t="";for(const l of M.steps)M=p.fromGE(l),
h.steps.push(M),t+=M.uid.toString()+",";h._cached_projection={};h._gtlistentry=null;h._chain=t;return h};var w=e.prototype;w.getInverse=function(){const M=new e;M.steps=[];for(let h=this.steps.length-1;0<=h;h--)M.steps.push(this.steps[h].getInverse());return M};w.getGTListEntry=function(){let M="";for(const h of this.steps)M+=h.uid.toString()+",";M!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=M);return this._gtlistentry};w.assignCachedGe=function(M,h,t){this._cached_projection[e.cacheKey(M,
h)]=t};w.getCachedGeTransformation=function(M,h){let t="";for(const l of this.steps)t+=l.uid.toString()+",";t!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=t);M=this._cached_projection[e.cacheKey(M,h)];return void 0===M?null:M};return e}()})},"esri/geometry/support/GeographicTransformationStep":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(p){let e=0;return function(){function w(M=null){this.uid=e++;M?(this._wkt=void 0!==M.wkt?M.wkt:null,this._wkid=
void 0!==M.wkid?M.wkid:-1,this._isInverse=void 0!==M.isInverse?!0===M.isInverse:!1):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}w.fromGE=function(M){const h=new w;h._wkt=M.wkt;h._wkid=M.wkid;h._isInverse=M.isInverse;return h};w.prototype.getInverse=function(){const M=new w;M._wkt=this.wkt;M._wkid=this._wkid;M._isInverse=!this.isInverse;return M};p._createClass(w,[{key:"wkt",get:function(){return this._wkt},set:function(M){this._wkt=M;this.uid=e++}},{key:"wkid",get:function(){return this._wkid},
set:function(M){this._wkid=M;this.uid=e++}},{key:"isInverse",get:function(){return this._isInverse},set:function(M){this._isInverse=M;this.uid=e++}}]);return w}()})},"esri/geometry/geometryAdapters/json":function(){define(["exports"],function(p){let e=function(l,E,q){this.x=l;this.y=E;this.spatialReference=q;this.m=this.z=void 0},w=function(l,E,q,u){this.rings=l;this.spatialReference=E;this.hasM=this.hasZ=void 0;q&&(this.hasZ=q);u&&(this.hasM=u)},M=function(l,E,q,u){this.paths=l;this.spatialReference=
E;this.hasM=this.hasZ=void 0;q&&(this.hasZ=q);u&&(this.hasM=u)},h=function(l,E,q,u){this.points=l;this.spatialReference=E;this.hasM=this.hasZ=void 0;q&&(this.hasZ=q);u&&(this.hasM=u)},t=function(l,E,q,u,H){this.xmin=l;this.ymin=E;this.xmax=q;this.ymax=u;this.spatialReference=H;this.mmax=this.mmin=this.zmax=this.zmin=void 0};p.jsonAdapter={convertToGEGeometry:function(l,E){return null==E?null:l.convertJSONToGeometry(E)},exportPoint:function(l,E,q){q=new e(l.getPointX(E),l.getPointY(E),q);const u=l.hasZ(E),
H=l.hasM(E);u&&(q.z=l.getPointZ(E));H&&(q.m=l.getPointM(E));return q},exportPolygon:function(l,E,q){return new w(l.exportPaths(E),q,l.hasZ(E),l.hasM(E))},exportPolyline:function(l,E,q){return new M(l.exportPaths(E),q,l.hasZ(E),l.hasM(E))},exportMultipoint:function(l,E,q){return new h(l.exportPoints(E),q,l.hasZ(E),l.hasM(E))},exportExtent:function(l,E,q){var u=l.hasZ(E);const H=l.hasM(E);q=new t(l.getXMin(E),l.getYMin(E),l.getXMax(E),l.getYMax(E),q);u&&(u=l.getZExtent(E),q.zmin=u.vmin,q.zmax=u.vmax);
H&&(l=l.getMExtent(E),q.mmin=l.vmin,q.mmax=l.vmax);return q}};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/graphics/data/QueryEngine":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../core/lang ../../../core/maybe ../../../core/MemCache ../../../core/unitUtils ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../../../geometry/support/boundsUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ./attributeSupport ./projectionSupport ./QueryEngineCapabilities ./QueryEngineResult ./spatialQuerySupport ./timeSupport ./utils ../../support/FieldsIndex ../../support/PromiseQueue ../../../smartMapping/support/utils".split(" "),
function(p,e,w,M,h,t,l,E,q,u,H,X,n,y,A,f,C,B,T,I,P,L,G){function Y(g){return g.every(b=>"exceedslimit"!==b.statisticType)}const aa=new Set,k=new t.MemCacheStorage(2E6);let x=0,O=function(){function g(z){this.capabilities={query:f.queryCapabilities};this.geometryType=z.geometryType;this.hasM=z.hasM;this.hasZ=z.hasZ;this.objectIdField=z.objectIdField;this.spatialReference=z.spatialReference;this.definitionExpression=z.definitionExpression;this.featureStore=z.featureStore;this.aggregateAdapter=z.aggregateAdapter;
this._changeHandle=this.featureStore.events.on("changed",()=>this.clearCache());this.timeInfo=z.timeInfo;z.cacheSpatialQueries&&(this._geometryQueryCache=new t.MemCache(x++ +"$$",k));this.fieldsIndex=new P(z.fields);z.scheduler&&z.priority&&(this._frameQueue=new L,this._frameTask=z.scheduler.registerTask(z.priority,this))}var b=g.prototype;b.destroy=function(){this._frameTask&&(this._frameTask.remove(),this._frameTask=null,this._frameQueue.cancelAll(),this._frameQueue=null);this.clearCache();this._geometryQueryCache&&
this._geometryQueryCache.destroy();this._changeHandle&&(this._changeHandle.remove(),this._changeHandle=null);this.fieldsIndex.destroy()};b.clearCache=function(){this._geometryQueryCache&&this._geometryQueryCache.clear();this._timeExtent=this._allItems=null};b.executeQuery=function(){var z=e._asyncToGenerator(function*(J={},W){let ba=M.clone(J),ia;try{ba=yield this._schedule(()=>I.normalizeQuery(ba,this.definitionExpression,this.spatialReference),W),ba=yield this._reschedule(()=>this._checkQuerySupport(ba),
W),ia=yield this._reschedule(()=>this._executeGeometryQuery(ba,W),W),ia=yield this._reschedule(()=>ia.executeAggregateIdsQuery(ba),W),ia=yield this._reschedule(()=>ia.executeObjectIdsQuery(ba),W),ia=yield this._reschedule(()=>ia.executeTimeQuery(ba),W),ia=yield this._reschedule(()=>ia.executeAttributesQuery(ba),W)}catch(ma){if(ma!==I.QUERY_ENGINE_EMPTY_RESULT)throw ma;ia=new C([],null,this)}return ia.createQueryResponse(ba)});return function(){return z.apply(this,arguments)}}();b.executeQueryForCount=
function(){var z=e._asyncToGenerator(function*(J={},W){let ba=M.clone(J),ia;ba.returnGeometry=!1;ba.returnCentroid=!1;ba.outSR=null;try{ba=yield this._schedule(()=>I.normalizeQuery(ba,this.definitionExpression,this.spatialReference),W),ba=yield this._reschedule(()=>this._checkQuerySupport(ba),W),ia=yield this._reschedule(()=>this._executeGeometryQuery(ba,W),W),ia=yield this._reschedule(()=>ia.executeAggregateIdsQuery(ba),W),ia=yield this._reschedule(()=>ia.executeObjectIdsQuery(ba),W),ia=yield this._reschedule(()=>
ia.executeTimeQuery(ba),W),ia=yield this._reschedule(()=>ia.executeAttributesQuery(ba),W)}catch(ma){if(ma!==I.QUERY_ENGINE_EMPTY_RESULT)throw ma;return 0}return ia.createQueryResponseForCount(ba)});return function(){return z.apply(this,arguments)}}();b.executeQueryForExtent=function(){var z=e._asyncToGenerator(function*(J={},W){let ba=M.clone(J),ia;J=ba.outSR;try{ba=yield this._schedule(()=>I.normalizeQuery(ba,this.definitionExpression,this.spatialReference),W);ba=yield this._reschedule(()=>this._checkQuerySupport(ba),
W);ba.returnGeometry=!0;ba.returnCentroid=!1;ba.outSR=null;ia=yield this._reschedule(()=>this._executeGeometryQuery(ba,W),W);ia=yield this._reschedule(()=>ia.executeAggregateIdsQuery(ba),W);ia=yield this._reschedule(()=>ia.executeObjectIdsQuery(ba),W);ia=yield this._reschedule(()=>ia.executeTimeQuery(ba),W);ia=yield this._reschedule(()=>ia.executeAttributesQuery(ba),W);const ma=ia.size;if(!ma)return{count:ma,extent:null};E.set(D,E.NEGATIVE_INFINITY);this.featureStore.forEachBounds(ia.items,Ca=>E.expandWithAABB(D,
Ca),R);const qa={xmin:D[0],ymin:D[1],xmax:D[3],ymax:D[4],spatialReference:I.cleanFromGeometryEngine(this.spatialReference)};this.hasZ&&isFinite(D[2])&&isFinite(D[5])&&(qa.zmin=D[2],qa.zmax=D[5]);const wa=A.project(qa,ia.spatialReference,J);wa.spatialReference=I.cleanFromGeometryEngine(J||this.spatialReference);if(0===wa.xmax-wa.xmin){const Ca=l.getMetersPerUnitForSR(wa.spatialReference);wa.xmin-=Ca;wa.xmax+=Ca}if(0===wa.ymax-wa.ymin){const Ca=l.getMetersPerUnitForSR(wa.spatialReference);wa.ymin-=
Ca;wa.ymax+=Ca}if(this.hasZ&&null!=wa.zmin&&null!=wa.zmax&&0===wa.zmax-wa.zmin){const Ca=l.getMetersPerUnitForSR(wa.spatialReference);wa.zmin-=Ca;wa.zmax+=Ca}return{count:ma,extent:wa}}catch(ma){if(ma===I.QUERY_ENGINE_EMPTY_RESULT)return{count:0,extent:null};throw ma;}});return function(){return z.apply(this,arguments)}}();b.executeQueryForIds=function(){var z=e._asyncToGenerator(function*(J={},W){return this.executeQueryForIdSet(J,W).then(ba=>Array.from(ba))});return function(){return z.apply(this,
arguments)}}();b.executeQueryForIdSet=function(){var z=e._asyncToGenerator(function*(J={},W){let ba=M.clone(J),ia;ba.returnGeometry=!1;ba.returnCentroid=!1;ba.outSR=null;try{ba=yield this._schedule(()=>I.normalizeQuery(ba,this.definitionExpression,this.spatialReference),W);ba=yield this._reschedule(()=>this._checkQuerySupport(ba),W);ia=yield this._reschedule(()=>this._executeGeometryQuery(ba,W),W);ia=yield this._reschedule(()=>ia.executeAggregateIdsQuery(ba),W);ia=yield this._reschedule(()=>ia.executeObjectIdsQuery(ba),
W);ia=yield this._reschedule(()=>ia.executeTimeQuery(ba),W);ia=yield this._reschedule(()=>ia.executeAttributesQuery(ba),W);const ma=ia.items,qa=new Set;yield this._reschedule(()=>{for(const wa of ma)qa.add(ia.featureAdapter.getObjectId(wa))},W);return qa}catch(ma){if(ma===I.QUERY_ENGINE_EMPTY_RESULT)return new Set;throw ma;}});return function(){return z.apply(this,arguments)}}();b.executeQueryForSnapping=function(){var z=e._asyncToGenerator(function*(J,W){const {point:ba,distance:ia,types:ma}=J;if(0===
ma)return{candidates:[]};const qa=yield this._reschedule(()=>this._checkQuerySupport(J.query),W),wa=!n.equals(ba.spatialReference,this.spatialReference);wa&&(yield A.checkProjectionSupport(ba.spatialReference,this.spatialReference));var Ca="number"===typeof ia?ia:ia.x,Ka="number"===typeof ia?ia:ia.y;Ca={xmin:ba.x-Ca,xmax:ba.x+Ca,ymin:ba.y-Ka,ymax:ba.y+Ka,spatialReference:ba.spatialReference};Ca=wa?A.project(Ca,this.spatialReference):Ca;if(!Ca)return{candidates:[]};Ka=(yield X.normalizeCentralMeridian(H.fromJSON(ba),
null,{signal:W}))[0];const Ha=(yield X.normalizeCentralMeridian(H.fromJSON(Ca),null,{signal:W}))[0];if(h.isNone(Ka)||h.isNone(Ha))return{candidates:[]};let Oa=new C(this._searchFeatures(this._getQueryBBoxes(Ha.toJSON())),null,this);Oa=yield this._reschedule(()=>Oa.executeObjectIdsQuery(qa),W);Oa=yield this._reschedule(()=>Oa.executeTimeQuery(qa),W);Oa=yield this._reschedule(()=>Oa.executeAttributesQuery(qa),W);W=Ka.toJSON();W=wa?A.project(W,this.spatialReference):W;return Oa.createSnappingResponse({...J,
point:W,distance:wa?Math.max(Ca.xmax-Ca.xmin,Ca.ymax-Ca.ymin)/2:ia},ba.spatialReference)});return function(J,W){return z.apply(this,arguments)}}();b.executeQueryForLatestObservations=function(){var z=e._asyncToGenerator(function*(J={},W){if(!this.timeInfo||!this.timeInfo.trackIdField)throw new w("feature-store:unsupported-query","Missing timeInfo or timeInfo.trackIdField",{query:J,timeInfo:this.timeInfo});let ba=M.clone(J),ia;try{ba=yield this._schedule(()=>I.normalizeQuery(ba,this.definitionExpression,
this.spatialReference),W),ba=yield this._reschedule(()=>this._checkQuerySupport(ba),W),ia=yield this._reschedule(()=>this._executeGeometryQuery(ba,W),W),ia=yield this._reschedule(()=>ia.executeAggregateIdsQuery(ba),W),ia=yield this._reschedule(()=>ia.executeObjectIdsQuery(ba),W),ia=yield this._reschedule(()=>ia.executeTimeQuery(ba),W),ia=yield this._reschedule(()=>ia.executeAttributesQuery(ba),W),ia=yield this._reschedule(()=>ia.filterLatest(),W)}catch(ma){if(ma!==I.QUERY_ENGINE_EMPTY_RESULT)throw ma;
ia=new C([],null,this)}return ia.createQueryResponse(ba)});return function(){return z.apply(this,arguments)}}();b.executeQueryForSummaryStatistics=function(){var z=e._asyncToGenerator(function*(J={},W,ba){J=M.clone(J);let ia;try{J=yield this._schedule(()=>I.normalizeQuery(J,this.definitionExpression,this.spatialReference),ba),J=yield this._reschedule(()=>this._checkSummaryStatisticsSupport(J,W),ba),ia=yield this._reschedule(()=>this._executeGeometryQuery(J,ba),ba),ia=yield this._reschedule(()=>ia.executeAggregateIdsQuery(J),
ba),ia=yield this._reschedule(()=>ia.executeObjectIdsQuery(J),ba),ia=yield this._reschedule(()=>ia.executeTimeQuery(J),ba),ia=yield this._reschedule(()=>ia.executeAttributesQuery(J),ba)}catch(ma){if(ma!==I.QUERY_ENGINE_EMPTY_RESULT)throw ma;ia=new C([],null,this)}return ia.createSummaryStatisticsResponse(J,W)});return function(){return z.apply(this,arguments)}}();b._schedule=function(){var z=e._asyncToGenerator(function*(J,W){return this._frameQueue?this._frameQueue.push(J,W):J()});return function(J,
W){return z.apply(this,arguments)}}();b._reschedule=function(){var z=e._asyncToGenerator(function*(J,W){return this._frameQueue?this._frameQueue.unshift(J,W):J()});return function(J,W){return z.apply(this,arguments)}}();b.runTask=function(z){for(this._budget=z;!z.done&&this._frameQueue&&this._frameQueue.process();)z.madeProgress();this._budget=null};b._getAll=function(){if(!this._allItems){const z=[];this.featureStore.forEach(J=>z.push(J));this._allItems=new C(z,null,this)}return this._allItems};
b._executeGeometryQuery=function(){var z=e._asyncToGenerator(function*(J,W){var ba=this;const {geometry:ia,outSR:ma,spatialRel:qa,returnGeometry:wa,returnCentroid:Ca}=J,Ka=wa||Ca,Ha=n.isValid(ma)&&!n.equals(this.spatialReference,ma),Oa=this._geometryQueryCache?Ha&&Ka?JSON.stringify({geometry:ia,spatialRelationship:qa,outSpatialReference:ma}):JSON.stringify({geometry:ia,spatialRelationship:qa}):null;if(Oa){var na=this._geometryQueryCache.get(Oa);if(!h.isUndefined(na))return na}na=function(){var r=
e._asyncToGenerator(function*(m){if(Ha&&Ka)return m=yield m.project(ma),Oa&&ba._geometryQueryCache.put(Oa,m,m.size||1),m;Oa&&ba._geometryQueryCache.put(Oa,m,m.size||1);return m});return function(m){return r.apply(this,arguments)}}();if(!ia)return na(this._getAll());const ta=this.featureAdapter;if("esriSpatialRelDisjoint"===qa){J=this._searchFeatures(this._getQueryBBoxes(ia));if(!J.length)return na(this._getAll());let r,m;const F=new Set;for(var va of J)F.add(ta.getObjectId(va));yield this._reschedule(()=>
{let U=0;r=Array(F.size);this.featureStore.forEach(V=>r[U++]=V);m=F},W);J=yield this._reschedule(e._asyncToGenerator(function*(){const U=yield B.getSpatialQueryOperator(qa,ia,ba.geometryType,ba.hasZ,ba.hasM);return new C(yield ba._runSpatialFilter(r,V=>!m.has(ta.getObjectId(V))||U(ta.getGeometry(V)),W),ia,ba)}),W);return na(J)}va=this._searchFeatures(this._getQueryBBoxes(ia));if(!va.length)return na=new C([],ia,this),Oa&&this._geometryQueryCache.put(Oa,na,na.size||1),na;if(this._canExecuteSoloPass(ia,
J))return na(new C(va,ia,this));const c=yield B.getSpatialQueryOperator(qa,ia,this.geometryType,this.hasZ,this.hasM);J=yield this._runSpatialFilter(va,r=>c(ta.getGeometry(r)),W);return na(new C(J,ia,this))});return function(J,W){return z.apply(this,arguments)}}();b._runSpatialFilter=function(){var z=e._asyncToGenerator(function*(J,W,ba){var ia=this;if(!W)return J;if(!this._budget)return J.filter(Ca=>W(Ca));let ma=0;const qa=[],wa=function(){var Ca=e._asyncToGenerator(function*(){for(;ma<J.length;){const Ka=
J[ma];W(Ka)&&qa.push(Ka);ia._budget.done&&(yield ia._reschedule(()=>wa(),ba));++ma}});return function(){return Ca.apply(this,arguments)}}();return this._reschedule(()=>wa(),ba).then(()=>qa)});return function(J,W,ba){return z.apply(this,arguments)}}();b._canExecuteSoloPass=function(z,J){const {geometryType:W}=this;({spatialRel:J}=J);return B.canQueryWithRBush(z)&&("esriSpatialRelEnvelopeIntersects"===J||"esriGeometryPoint"===W&&("esriSpatialRelIntersects"===J||"esriSpatialRelContains"===J||"esriSpatialRelWithin"===
J))};b._getQueryBBoxes=function(z){if(B.canQueryWithRBush(z)){if(H.isExtent(z))return[q.fromValues(z.xmin,z.ymin,z.xmax,z.ymax)];if(H.isPolygon(z))return z.rings.map(J=>q.fromValues(Math.min(J[0][0],J[2][0]),Math.min(J[0][1],J[2][1]),Math.max(J[0][0],J[2][0]),Math.max(J[0][1],J[2][1])))}return[u.getBoundsXY(q.create(),z)]};b._searchFeatures=function(z){for(const ba of z)this.featureStore.forEachInBounds(ba,ia=>{aa.add(ia)});const J=Array(aa.size);let W=0;aa.forEach(ba=>J[W++]=ba);aa.clear();return J};
b._checkSummaryStatisticsSupport=function(){var z=e._asyncToGenerator(function*(J,W){if(0>J.distance||null!=J.geometryPrecision||J.multipatchOption||J.pixelSize||J.relationParam||J.text||J.outStatistics||J.groupByFieldsForStatistics||J.having||J.orderByFields)throw new w("feature-store:unsupported-query","Unsupported query options",{query:J});return Promise.all([this._checkAttributesQuerySupport(J),this._checkSummaryStatisticsParamsSupport(W),B.checkSpatialQuerySupport(J,this.geometryType,this.spatialReference),
A.checkProjectionSupport(this.spatialReference,J.outSR)]).then(()=>J)});return function(J,W){return z.apply(this,arguments)}}();b._checkSummaryStatisticsParamsSupport=function(){var z=e._asyncToGenerator(function*(J){const W=yield G.getFieldsList({field:J.field,normalizationField:J.normalizationField,valueExpression:J.valueExpression});if(!W.length)throw new w("feature-store:unsupported-query","params should have atleast a field or valueExpression",{params:J});y.validateFields(this.fieldsIndex,W,
"params contains missing fields")});return function(J){return z.apply(this,arguments)}}();b._checkQuerySupport=function(){var z=e._asyncToGenerator(function*(J){if(0>J.distance||null!=J.geometryPrecision||J.multipatchOption||J.pixelSize||J.relationParam||J.text)throw new w("feature-store:unsupported-query","Unsupported query options",{query:J});return Promise.all([this._checkAttributesQuerySupport(J),this._checkStatisticsQuerySupport(J),B.checkSpatialQuerySupport(J,this.geometryType,this.spatialReference),
A.checkProjectionSupport(this.spatialReference,J.outSR)]).then(()=>J)});return function(J){return z.apply(this,arguments)}}();b._checkAttributesQuerySupport=function(z){const {outFields:J,orderByFields:W,returnDistinctValues:ba,outStatistics:ia}=z,ma=ia?ia.map(qa=>qa.outStatisticFieldName&&qa.outStatisticFieldName.toLowerCase()):[];if(W&&0<W.length){const qa=W.map(wa=>{const Ca=wa.toLowerCase();return-1<Ca.indexOf(" asc")?Ca.split(" asc")[0]:-1<Ca.indexOf(" desc")?Ca.split(" desc")[0]:wa}).filter(wa=>
-1===ma.indexOf(wa));y.validateFields(this.fieldsIndex,qa,"orderByFields contains missing fields")}if(J&&0<J.length)y.validateFields(this.fieldsIndex,J,"outFields contains missing fields");else if(ba)throw new w("feature-store:unsupported-query","outFields should be specified for returnDistinctValues",{query:z});y.validateWhere(this.fieldsIndex,z.where)};b._checkStatisticsQuerySupport=function(){var z=e._asyncToGenerator(function*(J){const {outStatistics:W,groupByFieldsForStatistics:ba,having:ia}=
J;var ma=ba&&ba.length,qa=W&&W.length;if(ia){if(!ma||!qa)throw new w("feature-store:unsupported-query","outStatistics and groupByFieldsForStatistics should be specified with having",{query:J});y.validateHaving(this.fieldsIndex,ia,W)}if(qa&&Y(W)){qa=W.map(wa=>wa.onStatisticField);y.validateFields(this.fieldsIndex,qa,"onStatisticFields contains missing fields");ma&&y.validateFields(this.fieldsIndex,ba,"groupByFieldsForStatistics contains missing fields");for(const wa of W){const {onStatisticField:Ca,
statisticType:Ka}=wa;if(("percentile_disc"===Ka||"percentile_cont"===Ka)&&"statisticParameters"in wa){if({statisticParameters:ma}=wa,!ma)throw new w("feature-store:unsupported-query","statisticParamters should be set for percentile type",{definition:wa,query:J});}else if("count"!==Ka&&Ca&&y.hasInvalidFieldType(Ca,this.fieldsIndex))throw new w("feature-store:unsupported-query","outStatistics contains non-numeric fields",{definition:wa,query:J});}}});return function(J){return z.apply(this,arguments)}}();
e._createClass(g,[{key:"featureAdapter",get:function(){return this.featureStore.featureAdapter}},{key:"fullExtent",get:function(){const z=this.featureStore.fullBounds;return z?{xmin:z[0],ymin:z[1],xmax:z[2],ymax:z[3],spatialReference:I.cleanFromGeometryEngine(this.spatialReference)}:null}},{key:"timeExtent",get:function(){return this.timeInfo?this._timeExtent?this._timeExtent:this._timeExtent=T.getTimeExtent(this.timeInfo,this.featureStore):null}},{key:"running",get:function(){return 0<this._frameQueue.length}}]);
return g}();const R=E.create(),D=E.create();p.Feature=function(g,b=null,z,J,W){this.attributes=g;this.geometry=z;this.centroid=J;this.filterFlags=W;this.groupId=-1;this.displayId=b};p.default=O;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/core/MemCache":function(){define(["exports","../chunks/_rollupPluginBabelHelpers","./PooledArray"],function(p,e,w){let M=function(){function t(E,q,u){this._namespace=E;this._storage=q;this._removeFunc=!1;this._miss=this._hit=0;this._storage.register(this);
this._namespace+=":";u&&(this._storage.registerRemoveFunc(this._namespace,u),this._removeFunc=!0)}var l=t.prototype;l.destroy=function(){this._storage.clear(this._namespace);this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace);this._storage.deregister(this);this._storage=null};l.resetHitRate=function(){this._hit=this._miss=0};l.put=function(E,q,u,H=0){this._storage.put(this._namespace+E,q,u,H)};l.get=function(E){E=this._storage.get(this._namespace+E);void 0===E?++this._miss:++this._hit;
return E};l.pop=function(E){E=this._storage.pop(this._namespace+E);void 0===E?++this._miss:++this._hit;return E};l.updateSize=function(E,q,u){this._storage.updateSize(this._namespace+E,q,u)};l.clear=function(){this._storage.clear(this._namespace)};l.clearAll=function(){this._storage.clearAll()};l.getStats=function(){return this._storage.getStats()};l.resetStats=function(){this._storage.resetStats()};e._createClass(t,[{key:"namespace",get:function(){return this._namespace.slice(0,-1)}},{key:"hitRate",
get:function(){return this._hit/(this._hit+this._miss)}},{key:"size",get:function(){return this._storage.size}},{key:"maxSize",get:function(){return this._storage.maxSize}}]);return t}(),h=function(){function t(E=10485760){this._maxSize=E;this._db=new Map;this._miss=this._hit=this._size=0;this._removeFuncs=new w;this._users=new w}var l=t.prototype;l.destroy=function(){this.clearAll();this._removeFuncs.clear();this._users.clear();this._db=null};l.register=function(E){this._users.push(E)};l.deregister=
function(E){this._users.removeUnordered(E)};l.registerRemoveFunc=function(E,q){this._removeFuncs.push([E,q])};l.deregisterRemoveFunc=function(E){this._removeFuncs.filterInPlace(q=>q[0]!==E)};l.put=function(E,q,u,H){const X=this._db.get(E);X&&(this._size-=X.size,this._db.delete(E),X.entry!==q&&this._notifyRemoved(E,X.entry));u>this._maxSize?this._notifyRemoved(E,q):void 0===q?console.warn("Refusing to cache undefined entry "):!u||0>u?console.warn("Refusing to cache entry with invalid size "+u):(H=
1+Math.max(H,-3)- -3,this._db.set(E,{entry:q,size:u,lifetime:H,lives:H}),this._size+=u,this._checkSizeLimit())};l.updateSize=function(E,q,u){const H=this._db.get(E);H&&H.entry===q&&(this._size-=H.size,u>this._maxSize?(this._db.delete(E),this._notifyRemoved(E,q)):(H.size=u,this._size+=u,this._checkSizeLimit()))};l.pop=function(E){const q=this._db.get(E);if(q)return this._size-=q.size,this._db.delete(E),++this._hit,q.entry;++this._miss};l.get=function(E){const q=this._db.get(E);if(void 0===q)++this._miss;
else return this._db.delete(E),q.lives=q.lifetime,this._db.set(E,q),++this._hit,q.entry};l.getStats=function(){const E={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},q={},u=[];this._db.forEach((n,y)=>{const A=n.lifetime;u[A]=(u[A]||0)+n.size;this._users.forAll(f=>{f=f.namespace;y.startsWith(f)&&(q[f]=(q[f]||0)+n.size)})});const H={};this._users.forAll(n=>{const y=n.namespace;!isNaN(n.hitRate)&&
0<n.hitRate?(q[y]=q[y]||0,H[y]=Math.round(100*n.hitRate)+"%"):H[y]="0%"});var X=Object.keys(q);X.forEach(n=>q[n]=q[n]/this._size*100);X.sort((n,y)=>q[y]-q[n]);X.forEach(n=>E[n]=Math.round(q[n])+"% / "+H[n]);for(X=u.length-1;0<=X;--X){const n=u[X];n&&(E["Priority "+(X+-3-1)]=Math.round(n/this.size*100)+"%")}return E};l.resetStats=function(){this._hit=this._miss=0;this._users.forAll(E=>E.resetHitRate())};l.clear=function(E){this._db.forEach((q,u)=>{u.startsWith(E)&&(this._size-=q.size,this._db.delete(u),
this._notifyRemoved(u,q.entry))})};l.clearAll=function(){this._db.forEach((E,q)=>this._notifyRemoved(q,E.entry));this._size=0;this._db.clear()};l._getHitRate=function(){return this._hit/(this._hit+this._miss)};l._notifyRemoved=function(E,q){this._removeFuncs.forAll(u=>{if(E.startsWith(u[0]))u[1](q)})};l._checkSizeLimit=function(){if(!(this._size<=this._maxSize))for(const [E,q]of this._db)if(this._db.delete(E),1>=q.lives?(this._size-=q.size,this._notifyRemoved(E,q.entry)):(--q.lives,this._db.set(E,
q)),this._size<=.9*this.maxSize)break};e._createClass(t,[{key:"size",get:function(){return this._size}},{key:"maxSize",get:function(){return this._maxSize},set:function(E){this._maxSize=Math.max(E,0);this._checkSizeLimit()}}]);return t}();p.MIN_PRIORITY=-3;p.MemCache=M;p.MemCacheStorage=h;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/geometry/support/normalizeUtils":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../config ../../core/Error ../../core/Logger ../../core/maybe ../Polygon ../Polyline ./normalizeUtilsCommon ./spatialReferenceUtils ./webMercatorUtils ../../tasks/geometry/cut ../../tasks/geometry/simplify".split(" "),
function(p,e,w,M,h,t,l,E,q,u,H,X,n){function y(L){const G=[];let Y=0,aa=0;for(let k=0;k<L.length;k++){const x=L[k];let O=null;for(let R=0;R<x.length;R++)O=x[R],G.push(O),0===R?aa=Y=O[0]:(Y=Math.min(Y,O[0]),aa=Math.max(aa,O[0]));O&&G.push([(Y+aa)/2,0])}return G}function A(L,G){if(!(L instanceof E||L instanceof l))throw P.error("straightLineDensify: the input geometry is neither polyline nor polygon"),new M("straightLineDensify: the input geometry is neither polyline nor polygon");var Y=q.getGeometryParts(L);
const aa=[];for(const x of Y){Y=[];aa.push(Y);Y.push([x[0][0],x[0][1]]);for(let O=0;O<x.length-1;O++){const R=x[O][0],D=x[O][1],g=x[O+1][0],b=x[O+1][1];var k=Math.sqrt((g-R)*(g-R)+(b-D)*(b-D));const z=(b-D)/k,J=(g-R)/k,W=k/G;if(1<W){for(let ba=1;ba<=W-1;ba++){const ia=ba*G;Y.push([J*ia+R,z*ia+D])}k=(k+Math.floor(W-1)*G)/2;Y.push([J*k+R,z*k+D])}Y.push([g,b])}}return"polygon"===L.type?new l({rings:aa,spatialReference:L.spatialReference}):new E({paths:aa,spatialReference:L.spatialReference})}function f(L,
G,Y){G&&(L=A(L,1E6),L=H.webMercatorToGeographic(L,!0));Y&&(L=q.updatePolyGeometry(L,Y));return L}function C(L,G,Y){if(Array.isArray(L)){var aa=L[0];aa>G?(Y=q.offsetMagnitude(aa,G),L[0]=aa+-2*Y*G):aa<Y&&(G=q.offsetMagnitude(aa,Y),L[0]=aa+-2*G*Y)}else aa=L.x,aa>G?(Y=q.offsetMagnitude(aa,G),L=L.clone().offset(-2*Y*G,0)):aa<Y&&(G=q.offsetMagnitude(aa,Y),L=L.clone().offset(-2*G*Y,0));return L}function B(L,G){let Y=-1;for(let aa=0;aa<G.cutIndexes.length;aa++){const k=G.cutIndexes[aa],x=G.geometries[aa],
O=q.getGeometryParts(x);for(let R=0;R<O.length;R++){const D=O[R];D.some(g=>{if(180>g[0])return!0;g=0;for(var b=0;b<D.length;b++){var z=D[b][0];g=z>g?z:g}g=Number(g.toFixed(9));g=-360*q.offsetMagnitude(g,180);for(b=0;b<D.length;b++)z=x.getPoint(R,b),x.setPoint(R,b,z.clone().offset(g,0));return!0})}if(k===Y)if("polygon"===L[0].type)for(const R of q.getGeometryParts(x))L[k]=L[k].addRing(R);else{if("polyline"===L[0].type)for(const R of q.getGeometryParts(x))L[k]=L[k].addPath(R)}else Y=k,L[k]=x}return L}
function T(L,G,Y){return I.apply(this,arguments)}function I(){I=e._asyncToGenerator(function*(L,G,Y){if(!Array.isArray(L))return T([L],G);var aa=G?G.url:w.geometryServiceUrl;let k,x,O;let R=0;var D=[];G=[];for(var g of L)if(t.isNone(g))G.push(g);else{if(!b){var b=g.spatialReference;var z=u.getInfo(b);var J=(k=b.isWebMercator)?102100:4326;x=q.cutParams[J].maxX;O=q.cutParams[J].minX;var W=q.cutParams[J].plus180Line;J=q.cutParams[J].minus180Line}if(z)if("mesh"===g.type)G.push(g);else if("point"===g.type)G.push(C(g.clone(),
x,O));else if("multipoint"===g.type){var ba=g.clone();ba.points=ba.points.map(ia=>C(ia,x,O));G.push(ba)}else if("extent"===g.type)ba=g.clone()._normalize(!1,!1,z),G.push(ba.rings?new l(ba):ba);else if(g.extent){ba=g.extent;const ia=2*q.offsetMagnitude(ba.xmin,O)*x;let ma=0===ia?g.clone():q.updatePolyGeometry(g.clone(),ia);ba.offset(ia,0);ba.intersects(W)&&ba.xmax!==x?(R=ba.xmax>R?ba.xmax:R,ma=f(ma,k),D.push(ma),G.push("cut")):ba.intersects(J)&&ba.xmin!==O?(R=2*ba.xmax*x>R?2*ba.xmax*x:R,ma=f(ma,k,
360),D.push(ma),G.push("cut")):G.push(ma)}else G.push(g.clone());else G.push(g)}b=q.offsetMagnitude(R,x);z=-90;W=b;for(g=new E;0<b;)J=-180+360*b,g.addPath([[J,z],[J,-1*z]]),z*=-1,b--;if(0<D.length&&0<W){b=yield X.cut(aa,D,g,Y);b=B(D,b);z=[];D=[];for(W=0;W<G.length;W++)g=G[W],"cut"!==g?D.push(g):(g=b.shift(),J=L[W],t.isSome(J)&&"polygon"===J.type&&J.rings&&1<J.rings.length&&g.rings.length>=J.rings.length?(z.push(g),D.push("simplify")):D.push(k?H.geographicToWebMercator(g):g));if(!z.length)return D;
G=yield n.simplify(aa,z,Y);L=[];for(Y=0;Y<D.length;Y++)aa=D[Y],"simplify"!==aa?L.push(aa):L.push(k?H.geographicToWebMercator(G.shift()):G.shift());return L}L=[];for(Y=0;Y<G.length;Y++)aa=G[Y],"cut"!==aa?L.push(aa):(aa=D.shift(),L.push(!0===k?H.geographicToWebMercator(aa):aa));return Promise.resolve(L)});return I.apply(this,arguments)}const P=h.getLogger("esri.geometry.support.normalizeUtils");p.getDenormalizedExtent=function(L){if(!L)return null;const G=L.extent;if(!G)return null;var Y=L.spatialReference&&
u.getInfo(L.spatialReference);if(!Y)return G;const [aa,k]=Y.valid;({width:Y}=G);let {xmin:x,xmax:O}=G;[x,O]=[O,x];if("extent"===L.type||0===Y||Y<=k||Y>2*k||x<aa||O>k)return G;let R;switch(L.type){case "polygon":if(1<L.rings.length)R=y(L.rings);else return G;break;case "polyline":if(1<L.paths.length)R=y(L.paths);else return G;break;case "multipoint":R=L.points}L=G.clone();for(let D=0;D<R.length;D++){let g=R[D][0];0>g?(g+=k,O=Math.max(g,O)):(g-=k,x=Math.min(g,x))}L.xmin=x;L.xmax=O;return L.width<Y?
(L.xmin-=k,L.xmax-=k,L):G};p.normalizeCentralMeridian=T;p.normalizeMapX=function(L,G){if(G=u.getInfo(G)){const [Y,aa]=G.valid;G=aa-Y;if(L<Y)for(;L<Y;)L+=G;if(L>aa)for(;L>aa;)L-=G}return L};p.straightLineDensify=A;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/geometry/support/normalizeUtilsCommon":function(){define(["exports","../Polyline","../SpatialReference","./jsonUtils"],function(p,e,w,M){function h(l){return M.isPolygon(l)?l.rings:l.paths}const t={102100:{maxX:2.0037508342788905E7,
minX:-2.0037508342788905E7,plus180Line:new e({paths:[[[2.0037508342788905E7,-2.0037508342788905E7],[2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:w.WebMercator}),minus180Line:new e({paths:[[[-2.0037508342788905E7,-2.0037508342788905E7],[-2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:w.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new e({paths:[[[180,-180],[180,180]]],spatialReference:w.WGS84}),minus180Line:new e({paths:[[[-180,-180],[-180,180]]],spatialReference:w.WGS84})}};
p.cutParams=t;p.getGeometryParts=h;p.getSpatialReferenceMinMaxX=function(l){l=(null==l?0:l.isWebMercator)?102100:4326;return[t[l].minX,t[l].maxX]};p.offsetMagnitude=function(l,E){return Math.ceil((l-E)/(2*E))};p.updatePolyGeometry=function(l,E){const q=h(l);for(const u of q)for(const H of u)H[0]+=E;return l};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/tasks/geometry/cut":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../geometry ../../request ../../core/urlUtils ../../geometry/support/jsonUtils".split(" "),
function(p,e,w,M,h,t){function l(){l=e._asyncToGenerator(function*(E,q,u,H){E="string"===typeof E?h.urlToObject(E):E;const X=q[0].spatialReference;q={...H,query:{...E.query,f:"json",sr:JSON.stringify(X),target:JSON.stringify({geometryType:t.getJsonType(q[0]),geometries:q}),cutter:JSON.stringify(u)}};q=yield M(E.path+"/cut",q);const {cutIndexes:n,geometries:y=[]}=q.data;return{cutIndexes:n,geometries:y.map(A=>{A=t.fromJSON(A);A.spatialReference=X;return A})}});return l.apply(this,arguments)}p.cut=
function(E,q,u,H){return l.apply(this,arguments)};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/tasks/geometry/simplify":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../request","../../core/urlUtils","../../geometry/support/jsonUtils"],function(p,e,w,M,h){function t(){t=e._asyncToGenerator(function*(q,u,H){const X="string"===typeof q?M.urlToObject(q):q;q=u[0].spatialReference;const n=h.getJsonType(u[0]);u={...H,query:{...X.query,f:"json",sr:q.wkid?q.wkid:JSON.stringify(q),
geometries:JSON.stringify(l(u))}};u=yield w(X.path+"/simplify",u);return E(u.data,n,q)});return t.apply(this,arguments)}function l(q){return{geometryType:h.getJsonType(q[0]),geometries:q.map(u=>u.toJSON())}}function E(q,u,H){const X=h.getGeometryType(u);return q.map(n=>{n=X.fromJSON(n);n.spatialReference=H;return n})}p.simplify=function(q,u,H){return t.apply(this,arguments)};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/graphics/data/attributeSupport":function(){define(["exports",
"../../../core/Error","../../../core/sql/WhereClauseCache"],function(p,e,w){function M(q,u){return q?l.get(q,u):null}function h(q,u,H,X=!0){const n=[];for(const y of u)if("*"!==y&&!q.has(y))if(X){u=t(y);try{const A=M(u,q);if(!A)throw new e("feature-store:unsupported-query","invalid SQL expression",{where:u});if(!A.isStandardized)throw new e("feature-store:unsupported-query","expression is not standard",{clause:A});h(q,A.fieldNames,"expression contains missing fields")}catch(A){if((u=A&&A.details)&&
(u.clause||u.where))throw A;u&&u.missingFields?n.push(...u.missingFields):n.push(y)}}else n.push(y);if(n.length)throw new e("feature-store:unsupported-query",H,{missingFields:n});}function t(q){return q.split(" as ")[0]}const l=new w.WhereClauseCache(50,500),E=new Set("esriFieldTypeOID esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeLong esriFieldTypeDate".split(" "));p.getAliasFromFieldName=function(q){return q.split(" as ")[1]};p.getExpressionFromFieldName=
t;p.getWhereClause=M;p.hasInvalidFieldType=function(q,u){return(q=u.get(q))?!E.has(q.type):!1};p.validateFields=h;p.validateHaving=function(q,u,H){if(!u)return!0;const X=l.get(u,q);if(!X)throw new e("feature-store:unsupported-query","invalid SQL expression",{having:u});if(!X.isAggregate)throw new e("feature-store:unsupported-query","having does not contain a valid aggregate function",{having:u});h(q,X.fieldNames,"having contains missing fields");if(!X.getExpressions().every(n=>{const {aggregateType:y,
field:A}=n,f=q.has(A)&&q.get(A).name;return H.some(C=>{const {onStatisticField:B,statisticType:T}=C;return(q.has(B)&&q.get(B).name)===f&&T.toLowerCase().trim()===y})}))throw new e("feature-store:unsupported-query","expressions in having should also exist in outStatistics",{having:u});return!0};p.validateWhere=function(q,u){if(!u)return!0;const H=l.get(u,q);if(!H)throw new e("feature-store:unsupported-query","invalid SQL expression",{where:u});if(!H.isStandardized)throw new e("feature-store:unsupported-query",
"where clause is not standard",{where:u});h(q,H.fieldNames,"where clause contains missing fields");return!0};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/core/sql/WhereClauseCache":function(){define(["exports","../ItemCache","./WhereClause"],function(p,e,w){let M=function(){function h(t,l){this._cache=new e(t);this._invalidCache=new e(l)}h.prototype.get=function(t,l){const E=`${l.uid}:${t}`,q=this._cache.get(E);if(q)return q;if(void 0!==this._invalidCache.get(E))return null;try{const u=
w.WhereClause.create(t,l);this._cache.put(E,u);return u}catch{return this._invalidCache.put(E,null),null}};return h}();p.WhereClauseCache=M;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/core/ItemCache":function(){define(["./MemCache"],function(p){return function(){function e(M,h){this._storage=new p.MemCacheStorage;this._storage.maxSize=M;h&&this._storage.registerRemoveFunc("",h)}var w=e.prototype;w.put=function(M,h){this._storage.put(M,h,1,1)};w.pop=function(M){return this._storage.pop(M)};
w.get=function(M){return this._storage.get(M)};w.clear=function(){this._storage.clearAll()};w.destroy=function(){this._storage.destroy()};return e}()})},"esri/core/sql/WhereClause":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../has ./AggregateFunctions ./StandardizedFunctions ./WhereGrammar".split(" "),function(p,e,w,M,h,t){function l(D,g){D+="";return D.length>=g?D:Array(g-D.length+1).join("0")+D}function E(D,g,b="0",z="0",J="0",W="0",ba="",ia="0",ma="0"){return"+"===ba||"-"===
ba?(D=`${l(parseInt(D,10),4)}-${l(parseInt(g,10),2)}-${l(parseInt(b,10),2)}`,g="",10>parseFloat(W)&&(g="0"),z=`${l(parseInt(z,10),2)}:${l(parseInt(J,10),2)}:${g+parseFloat(W).toString()}`,ba=`${ba}${l(parseInt(ia,10),2)}:${l(parseInt(ma,10),2)}`,new Date(D+"T"+z+ba)):new Date(parseInt(D,10),parseInt(g,10)-1,parseInt(b,10),parseInt(z,10),parseInt(J,10),parseFloat(W))}function q(D){let g=G.exec(D);if(null!==g){const [,b,z,J,W,ba,ia]=g;return E(b,z,J,W,ba,ia)}g=Y.exec(D);if(null!==g){const [,b,z,J,W,
ba,ia,ma,qa,wa]=g;return E(b,z,J,W,ba,ia,ma,qa,wa)}g=aa.exec(D);if(null!==g){const [,b,z,J,W,ba,ia,ma,qa]=g;return E(b,z,J,W,ba,"0",ia,ma,qa)}g=k.exec(D);if(null!==g){const [,b,z,J,W,ba]=g;return E(b,z,J,W,ba)}g=L.exec(D);if(null!==g){const [,b,z,J]=g;return E(b,z,J)}throw Error("SQL Invalid Timestamp");}function u(D){D=L.exec(D);if(null===D)throw Error("SQL Invalid Date");const [,g,b,z]=D;return new Date(parseInt(g,10),parseInt(b,10)-1,parseInt(z,10))}function H(D){return Array.isArray(D)?D:[D]}
function X(D){return null!==D?!0!==D:null}function n(D,g){return null!=D&&null!=g?!0===D&&!0===g:!1===D||!1===g?!1:null}function y(D,g){return null!=D&&null!=g?!0===D||!0===g:!0===D||!0===g?!0:null}function A(D,g){if(null==D)return null;let b=!1;for(const z of g)if(null==z)b=null;else if(D===z){b=!0;break}return b}function f(D,g,b){if(null==D)return null;let z="",J=0;for(let W=0;W<g.length;W++){const ba=g.charAt(W);switch(J){case 0:ba===b?J=1:z=0<="-[]/{}()*+?.\\^$|".indexOf(ba)?z+("\\"+ba):"%"===
ba?z+".*":"_"===ba?z+".":z+ba;break;case 1:z=0<="-[]/{}()*+?.\\^$|".indexOf(ba)?z+("\\"+ba):z+ba,J=0}}return(new RegExp("^"+z+"$")).test(D)}function C(D){return D instanceof Date?D.valueOf():D}function B(D,g,b){if(null==g||null==b)return null;g=C(g);b=C(b);switch(D){case "\x3c\x3e":return g!==b;case "\x3d":return g===b;case "\x3e":return g>b;case "\x3c":return g<b;case "\x3e\x3d":return g>=b;case "\x3c\x3d":return g<=b}}function T(D){const g=[],b={};for(const z of D)D=z.toLowerCase(),void 0===b[D]&&
(g.push(z),b[D]=1);return g}function I(D,g,b){if(g instanceof h.SqlInterval)if(b instanceof Date)switch(D){case "+":return new Date(g.valueInMilliseconds()+b.getTime());case "-":return g.valueInMilliseconds()-b.getTime();case "*":return g.valueInMilliseconds()*b.getTime();case "/":return g.valueInMilliseconds()/b.getTime()}else if(b instanceof h.SqlInterval)switch(D){case "+":return h.SqlInterval.createFromMilliseconds(g.valueInMilliseconds()+b.valueInMilliseconds());case "-":return h.SqlInterval.createFromMilliseconds(g.valueInMilliseconds()-
b.valueInMilliseconds());case "*":return g.valueInMilliseconds()*b.valueInMilliseconds();case "/":return g.valueInMilliseconds()/b.valueInMilliseconds()}else g=g.valueInMilliseconds();else if(b instanceof h.SqlInterval)if(g instanceof Date)switch(D){case "+":return new Date(b.valueInMilliseconds()+g.getTime());case "-":return new Date(g.getTime()-b.valueInMilliseconds());case "*":return g.getTime()*b.valueInMilliseconds();case "/":return g.getTime()/b.valueInMilliseconds()}else b=b.valueInMilliseconds();
else if(g instanceof Date&&"number"===typeof b)switch(b*=864E5,g=g.getTime(),D){case "+":return new Date(g+b);case "-":return new Date(g-b);case "*":return new Date(g*b);case "/":return new Date(g/b)}else if(b instanceof Date&&"number"===typeof g)switch(g*=864E5,b=b.getTime(),D){case "+":return new Date(g+b);case "-":return new Date(g-b);case "*":return new Date(g*b);case "/":return new Date(g/b)}switch(D){case "+":return g+b;case "-":return g-b;case "*":return g*b;case "/":return g/b}}function P(D,
g,b,z){D=z.getAttribute(D,g);return null!=D&&1===b[g]?new Date(D):D}const L=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,G=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)$/,Y=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)(\+|\-)(\d{1,2}):(\d{1,2})$/,aa=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})(\+|\-)(\d{1,2}):(\d{1,2})$/,k=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/;let x=function(){function D(){}D.makeBool=function(g){return!0===g};D.featureValue=
function(g,b,z,J){return P(g,b,z,J)};D.equalsNull=function(g){return null===g};D.applyLike=function(g,b,z){return f(g,b,z)};D.ensureArray=function(g){return H(g)};D.applyIn=function(g,b){return A(g,b)};D.currentDate=function(){const g=new Date;g.setHours(0,0,0,0);return g};D.makeSqlInterval=function(g,b,z){return h.SqlInterval.createFromValueAndQualifer(g,b,z)};D.convertInterval=function(g){return g instanceof h.SqlInterval?g.valueInMilliseconds():g};D.currentTimestamp=function(){return new Date};
D.compare=function(g,b,z){return B(g,b,z)};D.calculate=function(g,b,z){return I(g,b,z)};D.makeComparable=function(g){return C(g)};D.evaluateFunction=function(g,b){return h.evaluateFunction(g,b)};D.lookup=function(g,b){g=b[g];return void 0===g?null:g};D.between=function(g,b){return null==g||null==b[0]||null==b[1]?null:g>=b[0]&&g<=b[1]};D.notbetween=function(g,b){return null==g||null==b[0]||null==b[1]?null:g<b[0]||g>b[1]};D.ternaryNot=function(g){return X(g)};D.ternaryAnd=function(g,b){return n(g,b)};
D.ternaryOr=function(g,b){return y(g,b)};return D}(),O=function(){function D(b,z){this.fieldsIndex=z;this.datefields={};this.parameters={};this.parseTree=t.WhereGrammar.parse(b);const {isStandardized:J,isAggregate:W,referencedFieldNames:ba}=this.extractExpressionInfo(z);this.referencedFieldNames=ba;this.isStandardized=J;this.isAggregate=W}D.create=function(b,z){return new D(b,z)};var g=D.prototype;g.testSet=function(b,z=R){const J={};for(const W of this.fieldNames)J[W]=b.map(ba=>z.getAttribute(ba,
W));return!!this.evaluateNode(this.parseTree,{attributes:J},R)};g.calculateValue=function(b,z=R){b=this.evaluateNode(this.parseTree,b,z);return b instanceof h.SqlInterval?b.valueInMilliseconds()/864E5:b};g.calculateValueCompiled=function(b,z=R){if(null!=this.parseTree._compiledVersion)return this.parseTree._compiledVersion(b,this.parameters,z,this.datefields);if(w("csp-restrictions"))return this.calculateValue(b,z);this.compileMe();return this.parseTree._compiledVersion(b,this.parameters,z,this.datefields)};
g.testFeature=function(b,z=R){return!!this.evaluateNode(this.parseTree,b,z)};g.testFeatureCompiled=function(b,z=R){if(null!=this.parseTree._compiledVersion)return!!this.parseTree._compiledVersion(b,this.parameters,z,this.datefields);if(w("csp-restrictions"))return this.testFeature(b,z);this.compileMe();return!!this.parseTree._compiledVersion(b,this.parameters,z,this.datefields)};g.getFunctions=function(){const b=[];this.visitAll(this.parseTree,z=>{"function"===z.type&&b.push(z.name.toLowerCase())});
return T(b)};g.getExpressions=function(){const b=new Map;this.visitAll(this.parseTree,z=>{if("function"===z.type){const J=z.name.toLowerCase();z=z.args.value[0];if("column_ref"===z.type){z=z.column;const W=`${J}-${z}`;b.has(W)||b.set(W,{aggregateType:J,field:z})}}});return[...b.values()]};g.getVariables=function(){const b=[];this.visitAll(this.parseTree,z=>{"param"===z.type&&b.push(z.value.toLowerCase())});return T(b)};g.compileMe=function(){const b="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+
")";this.parseTree._compiledVersion=(new Function("feature","lookups","attributeAdapter","datefields",b)).bind(x)};g.extractExpressionInfo=function(b){const z=[];let J=!0,W=!0;this.visitAll(this.parseTree,ba=>{switch(ba.type){case "column_ref":{const ia=b.get(ba.column),ma=ia&&ia.name;!ia||"date"!==ia.type&&"esriFieldTypeDate"!==ia.type||(this.datefields[ia.name]=1);void 0!==ma?(z.push(ma),ba.column=ma):z.push(ba.column);break}case "function":{const {name:ia,args:ma}=ba;ba=ma.value.length;J&&(J=h.isStandardized(ia,
ba));W&&(W=M.isAggregate(ia,ba))}}});return{referencedFieldNames:T(z),isStandardized:J,isAggregate:W}};g.visitAll=function(b,z){if(null!=b)switch(z(b),b.type){case "when_clause":this.visitAll(b.operand,z);this.visitAll(b.value,z);break;case "case_expression":for(const J of b.clauses)this.visitAll(J,z);"simple"===b.format&&this.visitAll(b.operand,z);null!==b.else&&this.visitAll(b.else,z);break;case "expr_list":for(const J of b.value)this.visitAll(J,z);break;case "unary_expr":this.visitAll(b.expr,z);
break;case "binary_expr":this.visitAll(b.left,z);this.visitAll(b.right,z);break;case "function":this.visitAll(b.args,z)}};g.evaluateNodeToJavaScript=function(b){switch(b.type){case "interval":return"this.makeSqlInterval("+this.evaluateNodeToJavaScript(b.value)+", "+JSON.stringify(b.qualifier)+","+JSON.stringify(b.op)+")";case "case_expression":var z="";if("simple"===b.format){var J="this.makeComparable("+this.evaluateNodeToJavaScript(b.operand)+")";z="( ";for(let W=0;W<b.clauses.length;W++)z+=" ("+
J+" \x3d\x3d\x3d this.makeComparable("+this.evaluateNodeToJavaScript(b.clauses[W].operand)+")) ? ("+this.evaluateNodeToJavaScript(b.clauses[W].value)+") : "}else for(z="( ",J=0;J<b.clauses.length;J++)z+=" this.makeBool("+this.evaluateNodeToJavaScript(b.clauses[J].operand)+")\x3d\x3d\x3dtrue ? ("+this.evaluateNodeToJavaScript(b.clauses[J].value)+") : ";z=null!==b.else?z+this.evaluateNodeToJavaScript(b.else):z+"null";return z+=" )";case "param":return"this.lookup("+JSON.stringify(b.value.toLowerCase())+
",lookups)";case "expr_list":z="[";for(J of b.value)"["!==z&&(z+=","),z+=this.evaluateNodeToJavaScript(J);return z+="]";case "unary_expr":return"this.ternaryNot("+this.evaluateNodeToJavaScript(b.expr)+")";case "binary_expr":switch(b.operator){case "AND":return"this.ternaryAnd("+this.evaluateNodeToJavaScript(b.left)+","+this.evaluateNodeToJavaScript(b.right)+" )";case "OR":return"this.ternaryOr("+this.evaluateNodeToJavaScript(b.left)+","+this.evaluateNodeToJavaScript(b.right)+" )";case "IS":if("null"!==
b.right.type)throw Error("Unsupported RHS for IS");return"this.equalsNull("+this.evaluateNodeToJavaScript(b.left)+")";case "ISNOT":if("null"!==b.right.type)throw Error("Unsupported RHS for IS");return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(b.left)+")))";case "IN":return"this.applyIn("+this.evaluateNodeToJavaScript(b.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(b.right)+"))";case "NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(b.left)+",this.ensureArray("+
this.evaluateNodeToJavaScript(b.right)+")))";case "BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(b.left)+","+this.evaluateNodeToJavaScript(b.right)+")";case "NOTBETWEEN":return"this.notbetween("+this.evaluateNodeToJavaScript(b.left)+","+this.evaluateNodeToJavaScript(b.right)+")";case "LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(b.left)+","+this.evaluateNodeToJavaScript(b.right)+","+JSON.stringify(b.escape)+")";case "NOT LIKE":return"this.ternaryNot(this.applyLike("+
this.evaluateNodeToJavaScript(b.left)+","+this.evaluateNodeToJavaScript(b.right)+","+JSON.stringify(b.escape)+"))";case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return"this.compare("+JSON.stringify(b.operator)+","+this.evaluateNodeToJavaScript(b.left)+","+this.evaluateNodeToJavaScript(b.right)+")";case "*":case "-":case "+":case "/":return"this.calculate("+JSON.stringify(b.operator)+","+this.evaluateNodeToJavaScript(b.left)+","+this.evaluateNodeToJavaScript(b.right)+
")"}throw Error("Not Supported Operator "+b.operator);case "null":case "bool":case "string":case "number":return JSON.stringify(b.value);case "date":return"(new Date("+u(b.value).getTime().toString()+"))";case "timestamp":return"(new Date("+q(b.value).getTime().toString()+"))";case "current_time":return"date"===b.mode?"this.currentDate()":"this.currentTimestamp()";case "column_ref":return"this.featureValue(feature,"+JSON.stringify(b.column)+",datefields,attributeAdapter)";case "function":return"this.evaluateFunction("+
JSON.stringify(b.name)+","+this.evaluateNodeToJavaScript(b.args)+")"}throw Error("Unsupported sql syntax "+b.type);};g.evaluateNode=function(b,z,J){switch(b.type){case "interval":return z=this.evaluateNode(b.value,z,J),h.SqlInterval.createFromValueAndQualifer(z,b.qualifier,b.op);case "case_expression":if("simple"===b.format){var W=C(this.evaluateNode(b.operand,z,J));for(var ba=0;ba<b.clauses.length;ba++)if(W===C(this.evaluateNode(b.clauses[ba].operand,z,J)))return this.evaluateNode(b.clauses[ba].value,
z,J)}else for(W=0;W<b.clauses.length;W++)if(!0===this.evaluateNode(b.clauses[W].operand,z,J))return this.evaluateNode(b.clauses[W].value,z,J);return null!==b.else?this.evaluateNode(b.else,z,J):null;case "param":return this.parameters[b.value.toLowerCase()];case "expr_list":W=[];for(ba of b.value)W.push(this.evaluateNode(ba,z,J));return W;case "unary_expr":return X(this.evaluateNode(b.expr,z,J));case "binary_expr":switch(b.operator){case "AND":return n(this.evaluateNode(b.left,z,J),this.evaluateNode(b.right,
z,J));case "OR":return y(this.evaluateNode(b.left,z,J),this.evaluateNode(b.right,z,J));case "IS":if("null"!==b.right.type)throw Error("Unsupported RHS for IS");return null===this.evaluateNode(b.left,z,J);case "ISNOT":if("null"!==b.right.type)throw Error("Unsupported RHS for IS");return null!==this.evaluateNode(b.left,z,J);case "IN":return W=H(this.evaluateNode(b.right,z,J)),A(this.evaluateNode(b.left,z,J),W);case "NOT IN":return W=H(this.evaluateNode(b.right,z,J)),X(A(this.evaluateNode(b.left,z,J),
W));case "BETWEEN":return W=this.evaluateNode(b.left,z,J),b=this.evaluateNode(b.right,z,J),null==W||null==b[0]||null==b[1]?null:W>=C(b[0])&&W<=C(b[1]);case "NOTBETWEEN":return W=this.evaluateNode(b.left,z,J),b=this.evaluateNode(b.right,z,J),null==W||null==b[0]||null==b[1]?null:W<C(b[0])||W>C(b[1]);case "LIKE":return f(this.evaluateNode(b.left,z,J),this.evaluateNode(b.right,z,J),b.escape);case "NOT LIKE":return X(f(this.evaluateNode(b.left,z,J),this.evaluateNode(b.right,z,J),b.escape));case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return B(b.operator,
this.evaluateNode(b.left,z,J),this.evaluateNode(b.right,z,J));case "-":case "+":case "*":case "/":return I(b.operator,this.evaluateNode(b.left,z,J),this.evaluateNode(b.right,z,J))}case "null":case "bool":case "string":case "number":return b.value;case "date":return u(b.value);case "timestamp":return q(b.value);case "current_time":return z=new Date,"date"===b.mode&&z.setHours(0,0,0,0),z;case "column_ref":return P(z,b.column,this.datefields,J);case "function":return z=this.evaluateNode(b.args,z,J),
this.isAggregate?M.aggregateFunction(b.name,z):h.evaluateFunction(b.name,z)}throw Error("Unsupported sql syntax "+b.type);};e._createClass(D,[{key:"fieldNames",get:function(){return this.referencedFieldNames}}]);return D}();const R={getAttribute(D,g){return(D&&"object"===typeof D.attributes?D.attributes:D)[g]}};p.WhereClause=O;p.defaultAttributeAdapter=R;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/core/sql/AggregateFunctions":function(){define(["exports"],function(p){function e(h){let t=
0;for(let l=0;l<h.length;l++)t+=h[l];return t/h.length}function w(h){const t=e(h),l=h.length;let E=0;for(const q of h)E+=(q-t)**2;return 1<l?E/(l-1):0}const M={min:{minParams:1,maxParams:1,evaluate:h=>null==h[0]?null:Math.min.apply(Math,h[0])},max:{minParams:1,maxParams:1,evaluate:h=>null==h[0]?null:Math.max.apply(Math,h[0])},avg:{minParams:1,maxParams:1,evaluate:h=>null==h[0]?null:e(h[0])},sum:{minParams:1,maxParams:1,evaluate:h=>{if(null==h[0])h=null;else{{h=h[0];let t=0;for(let l=0;l<h.length;l++)t+=
h[l];h=t}}return h}},stddev:{minParams:1,maxParams:1,evaluate:h=>null==h[0]?null:Math.sqrt(w(h[0]))},count:{minParams:1,maxParams:1,evaluate:h=>null==h[0]?null:h[0].length},var:{minParams:1,maxParams:1,evaluate:h=>null==h[0]?null:w(h[0])}};p.aggregateFunction=function(h,t){const l=M[h.toLowerCase()];if(null==l)throw Error("Function Not Recognised");if(t.length<l.minParams||t.length>l.maxParams)throw Error(`Invalid Parameter count for call to ${h.toUpperCase()}`);return l.evaluate(t)};p.isAggregate=
function(h,t){h=M[h.toLowerCase()];return null!=h&&t>=h.minParams&&t<=h.maxParams};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/core/sql/StandardizedFunctions":function(){define(["exports","../string"],function(p,e){let w=function(){function h(){this.op="+";this.minute=this.year=this.month=this.hour=this.second=this.day=0}h.fixDefaults=function(t){if(null!==t.precision||null!==t.secondary)throw Error("Primary and Secondary SqlInterval qualifiers not supported");};h.createFromMilliseconds=
function(t){const l=new h;l.second=t/1E3;return l};h.createFromValueAndQualifer=function(t,l,E){let q=null;const u=new h;u.op="-"===E?"-":"+";if("interval-period"===l.type){h.fixDefaults(l);if("year"===l.period||"month"===l.period)throw Error("Year-Month Intervals not supported");if(/^[0-9]{1,}$/.test(t))u[l.period]=parseFloat(t);else throw Error("Illegal Interval");}else{h.fixDefaults(l.start);h.fixDefaults(l.end);if("year"===l.start.period||"month"===l.start.period)throw Error("Year-Month Intervals not supported");
if("year"===l.end.period||"month"===l.end.period)throw Error("Year-Month Intervals not supported");switch(l.start.period){case "day":switch(l.end.period){case "hour":q=/^[0-9]{1,} [0-9]{1,}$/;if(q.test(t))u[l.start.period]=parseFloat(t.split(" ")[0]),u[l.end.period]=parseFloat(t.split(" ")[1]);else throw Error("Illegal Interval");break;case "minute":q=/^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$/;if(q.test(t))u[l.start.period]=parseFloat(t.split(" ")[0]),t=t.split(" ")[1].split(":"),u.hour=parseFloat(t[0]),
u.minute=parseFloat(t[1]);else throw Error("Illegal Interval");break;case "second":q=/^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(q.test(t))u[l.start.period]=parseFloat(t.split(" ")[0]),t=t.split(" ")[1].split(":"),u.hour=parseFloat(t[0]),u.minute=parseFloat(t[1]),u.second=parseFloat(t[2]);else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;case "hour":switch(l.end.period){case "minute":q=/^[0-9]{1,}:[0-9]{1,}$/;if(q.test(t))u.hour=parseFloat(t.split(":")[0]),
u.minute=parseFloat(t.split(":")[1]);else throw Error("Illegal Interval");break;case "second":q=/^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(q.test(t))t=t.split(":"),u.hour=parseFloat(t[0]),u.minute=parseFloat(t[1]),u.second=parseFloat(t[2]);else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;case "minute":switch(l.end.period){case "second":q=/^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(q.test(t))t=t.split(":"),u.minute=parseFloat(t[0]),u.second=parseFloat(t[1]);
else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;default:throw"Invalid Interval.";}}return u};h.prototype.valueInMilliseconds=function(){return("-"===this.op?-1:1)*(1E3*this.second+6E4*this.minute+36E5*this.hour+864E5*this.day+365/12*this.month*864E5+31536E6*this.year)};return h}();const M={extract:{minParams:2,maxParams:2,evaluate:([h,t])=>{if(null==t)return null;if(t instanceof Date)switch(h.toUpperCase()){case "SECOND":return t.getSeconds();case "MINUTE":return t.getMinutes();
case "HOUR":return t.getHours();case "DAY":return t.getDate();case "MONTH":return t.getMonth()+1;case "YEAR":return t.getFullYear()}throw Error("Invalid Parameter for call to EXTRACT");}},substring:{minParams:2,maxParams:3,evaluate:h=>{if(2===h.length){const [t,l]=h;return null==t||null==l?null:t.toString().substring(l-1)}if(3===h.length){const [t,l,E]=h;return null==t||null==l||null==E?null:0>=E?"":t.toString().substring(l-1,l+E-1)}}},position:{minParams:2,maxParams:2,evaluate:([h,t])=>null==h||
null==t?null:t.indexOf(h)+1},trim:{minParams:2,maxParams:3,evaluate:h=>{var t=3===h.length,l=t?h[1]:" ";t=t?h[2]:h[1];if(null==l||null==t)return null;l=`(${e.escapeRegExpString(l)})`;switch(h[0]){case "BOTH":return t.replace(new RegExp(`^${l}*|${l}*$`,"g"),"");case "LEADING":return t.replace(new RegExp(`^${l}*`,"g"),"");case "TRAILING":return t.replace(new RegExp(`${l}*$`,"g"),"")}throw Error("Invalid Parameter for call to TRIM");}},abs:{minParams:1,maxParams:1,evaluate:h=>null==h[0]?null:Math.abs(h[0])},
ceiling:{minParams:1,maxParams:1,evaluate:h=>null==h[0]?null:Math.ceil(h[0])},floor:{minParams:1,maxParams:1,evaluate:h=>null==h[0]?null:Math.floor(h[0])},log:{minParams:1,maxParams:1,evaluate:h=>null==h[0]?null:Math.log(h[0])},log10:{minParams:1,maxParams:1,evaluate:h=>null==h[0]?null:Math.log(h[0])*Math.LOG10E},sin:{minParams:1,maxParams:1,evaluate:h=>null==h[0]?null:Math.sin(h[0])},cos:{minParams:1,maxParams:1,evaluate:h=>null==h[0]?null:Math.cos(h[0])},tan:{minParams:1,maxParams:1,evaluate:h=>
null==h[0]?null:Math.tan(h[0])},asin:{minParams:1,maxParams:1,evaluate:h=>null==h[0]?null:Math.asin(h[0])},acos:{minParams:1,maxParams:1,evaluate:h=>null==h[0]?null:Math.acos(h[0])},atan:{minParams:1,maxParams:1,evaluate:h=>null==h[0]?null:Math.atan(h[0])},sign:{minParams:1,maxParams:1,evaluate:h=>null==h[0]?null:0<h[0]?1:0>h[1]?-1:0},power:{minParams:2,maxParams:2,evaluate:h=>null==h[0]||null==h[1]?null:h[0]**h[1]},mod:{minParams:2,maxParams:2,evaluate:h=>null==h[0]||null==h[1]?null:h[0]%h[1]},round:{minParams:1,
maxParams:2,evaluate:h=>{const t=h[0];h=2===h.length?10**h[1]:1;return null==t?null:Math.round(t*h)/h}},truncate:{minParams:1,maxParams:2,evaluate:h=>null==h[0]?null:1===h.length?parseInt(h[0].toFixed(0),10):parseFloat(h[0].toFixed(h[1]))},char_length:{minParams:1,maxParams:1,evaluate:h=>"string"===typeof h[0]||h[0]instanceof String?h[0].length:0},concat:{minParams:1,maxParams:Infinity,evaluate:h=>{let t="";for(let l=0;l<h.length;l++){if(null==h[l])return null;t+=h[l].toString()}return t}},lower:{minParams:1,
maxParams:1,evaluate:h=>null==h[0]?null:h[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:h=>null==h[0]?null:h[0].toString().toUpperCase()}};p.SqlInterval=w;p.evaluateFunction=function(h,t){const l=M[h.toLowerCase()];if(null==l)throw Error("Function Not Recognised");if(t.length<l.minParams||t.length>l.maxParams)throw Error(`Invalid Parameter count for call to ${h.toUpperCase()}`);return l.evaluate(t)};p.isStandardized=function(h,t){h=M[h.toLowerCase()];return null!=h&&t>=h.minParams&&
t<=h.maxParams};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/core/sql/WhereGrammar":function(){define(["exports","../../chunks/_commonjsHelpers"],function(p,e){var w={exports:{}};(function(h){(function(t,l){h.exports&&(h.exports=l())})(e.commonjsGlobal,function(){function t(l,E,q,u){this.message=l;this.expected=E;this.found=q;this.location=u;this.name="SyntaxError";"function"===typeof Error.captureStackTrace&&Error.captureStackTrace(this,t)}(function(l,E){function q(){this.constructor=
l}q.prototype=E.prototype;l.prototype=new q})(t,Error);t.buildMessage=function(l,E){function q(n){return n.charCodeAt(0).toString(16).toUpperCase()}function u(n){return n.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(y){return"\\x0"+q(y)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(y){return"\\x"+q(y)})}function H(n){return n.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,
"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(y){return"\\x0"+q(y)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(y){return"\\x"+q(y)})}var X={literal:function(n){return'"'+u(n.text)+'"'},"class":function(n){var y="",A;for(A=0;A<n.parts.length;A++)y+=n.parts[A]instanceof Array?H(n.parts[A][0])+"-"+H(n.parts[A][1]):H(n.parts[A]);return"["+(n.inverted?"^":"")+y+"]"},any:function(n){return"any character"},end:function(n){return"end of input"},
other:function(n){return n.description}};return"Expected "+function(n){var y=Array(n.length),A;for(A=0;A<n.length;A++){var f=A;var C=n[A];C=X[C.type](C);y[f]=C}y.sort();if(0<y.length){for(n=A=1;A<y.length;A++)y[A-1]!==y[A]&&(y[n]=y[A],n++);y.length=n}switch(y.length){case 1:return y[0];case 2:return y[0]+" or "+y[1];default:return y.slice(0,-1).join(", ")+", or "+y[y.length-1]}}(l)+" but "+(E?'"'+u(E)+'"':"end of input")+" found."};return{SyntaxError:t,parse:function(l,E){function q(v,S){return{type:"literal",
text:v,ignoreCase:S}}function u(v,S,Q){return{type:"class",parts:v,inverted:S,ignoreCase:Q}}function H(v){var S=$b[v],Q;if(!S){for(Q=v-1;!$b[Q];)Q--;S=$b[Q];for(S={line:S.line,column:S.column};Q<v;)10===l.charCodeAt(Q)?(S.line++,S.column=1):S.column++,Q++;$b[v]=S}return S}function X(v,S){var Q=H(v),ca=H(S);return{start:{offset:v,line:Q.line,column:Q.column},end:{offset:S,line:ca.line,column:ca.column}}}function n(v){d<sb||(d>sb&&(sb=d,pc=[]),pc.push(v))}function y(){var v=d;var S=oa();if(S!==a)if(S=
f(),S!==a){var Q=oa();Q!==a?v=S:(d=v,v=a)}else d=v,v=a;else d=v,v=a;return v}function A(){var v=d;var S=f();if(S!==a){var Q=[];var ca=d;var sa=oa();if(sa!==a){var Da=Fa();if(Da!==a){var Ia=oa();if(Ia!==a){var Qa=f();Qa!==a?ca=sa=[sa,Da,Ia,Qa]:(d=ca,ca=a)}else d=ca,ca=a}else d=ca,ca=a}else d=ca,ca=a;for(;ca!==a;)Q.push(ca),ca=d,sa=oa(),sa!==a?(Da=Fa(),Da!==a?(Ia=oa(),Ia!==a?(Qa=f(),Qa!==a?ca=sa=[sa,Da,Ia,Qa]:(d=ca,ca=a)):(d=ca,ca=a)):(d=ca,ca=a)):(d=ca,ca=a);if(Q!==a){v={type:"expr_list"};S=[S];for(ca=
0;ca<Q.length;ca++)S.push(Q[ca][3]);v.value=S}else d=v,v=a}else d=v,v=a;return v}function f(){var v=d;var S=C();if(S!==a){var Q=[];var ca=d;var sa=oa();if(sa!==a){var Da=U();if(Da!==a){var Ia=oa();if(Ia!==a){var Qa=C();Qa!==a?ca=sa=[sa,Da,Ia,Qa]:(d=ca,ca=a)}else d=ca,ca=a}else d=ca,ca=a}else d=ca,ca=a;for(;ca!==a;)Q.push(ca),ca=d,sa=oa(),sa!==a?(Da=U(),Da!==a?(Ia=oa(),Ia!==a?(Qa=C(),Qa!==a?ca=sa=[sa,Da,Ia,Qa]:(d=ca,ca=a)):(d=ca,ca=a)):(d=ca,ca=a)):(d=ca,ca=a);Q!==a?v=S=fb(S,Q):(d=v,v=a)}else d=v,
v=a;return v}function C(){var v=d;var S=B();if(S!==a){var Q=[];var ca=d;var sa=oa();if(sa!==a){var Da=F();if(Da!==a){var Ia=oa();if(Ia!==a){var Qa=B();Qa!==a?ca=sa=[sa,Da,Ia,Qa]:(d=ca,ca=a)}else d=ca,ca=a}else d=ca,ca=a}else d=ca,ca=a;for(;ca!==a;)Q.push(ca),ca=d,sa=oa(),sa!==a?(Da=F(),Da!==a?(Ia=oa(),Ia!==a?(Qa=B(),Qa!==a?ca=sa=[sa,Da,Ia,Qa]:(d=ca,ca=a)):(d=ca,ca=a)):(d=ca,ca=a)):(d=ca,ca=a);Q!==a?v=S=fb(S,Q):(d=v,v=a)}else d=v,v=a;return v}function B(){var v=d;var S=m();if(S===a){S=d;if(33===l.charCodeAt(d)){var Q=
Ua;d++}else Q=a,0===pa&&n(Ta);if(Q!==a){var ca=d;pa++;if(61===l.charCodeAt(d)){var sa=jb;d++}else sa=a,0===pa&&n(tb);pa--;sa===a?ca=void 0:(d=ca,ca=a);ca!==a?S=Q=[Q,ca]:(d=S,S=a)}else d=S,S=a}S!==a?(Q=oa(),Q!==a?(ca=B(),ca!==a?v=S={type:"unary_expr",operator:"NOT",expr:ca}:(d=v,v=a)):(d=v,v=a)):(d=v,v=a);if(v===a)if(v=d,S=L(),S!==a)if(Q=oa(),Q!==a){Q=[];ca=d;sa=oa();if(sa!==a){var Da=T();if(Da!==a){var Ia=oa();if(Ia!==a){var Qa=L();Qa!==a?ca=sa=[sa,Da,Ia,Qa]:(d=ca,ca=a)}else d=ca,ca=a}else d=ca,ca=
a}else d=ca,ca=a;if(ca!==a)for(;ca!==a;)Q.push(ca),ca=d,sa=oa(),sa!==a?(Da=T(),Da!==a?(Ia=oa(),Ia!==a?(Qa=L(),Qa!==a?ca=sa=[sa,Da,Ia,Qa]:(d=ca,ca=a)):(d=ca,ca=a)):(d=ca,ca=a)):(d=ca,ca=a);else Q=a;Q!==a&&(Q={type:"arithmetic",tail:Q});Q===a&&(Q=d,ca=P(),ca!==a?(sa=oa(),sa!==a?(sa=Ga(),sa!==a?(sa=oa(),sa!==a?(sa=A(),sa!==a?(Da=oa(),Da!==a?(Da=Ja(),Da!==a?Q=ca={op:ca,right:sa}:(d=Q,Q=a)):(d=Q,Q=a)):(d=Q,Q=a)):(d=Q,Q=a)):(d=Q,Q=a)):(d=Q,Q=a)):(d=Q,Q=a),Q===a&&(Q=d,ca=P(),ca!==a?(sa=oa(),sa!==a?(sa=Ga(),
sa!==a?(sa=oa(),sa!==a?(sa=Ja(),sa!==a?Q=ca={op:ca,right:{type:"expr_list",value:[]}}:(d=Q,Q=a)):(d=Q,Q=a)):(d=Q,Q=a)):(d=Q,Q=a)):(d=Q,Q=a),Q===a&&(Q=d,ca=P(),ca!==a?(sa=oa(),sa!==a?(sa=g(),sa!==a?Q=ca={op:ca,right:sa}:(d=Q,Q=a)):(d=Q,Q=a)):(d=Q,Q=a))),Q===a&&(Q=d,sa=m(),sa!==a?(ca=oa(),ca!==a?(ca=V(),ca!==a?(Da=oa(),Da!==a?(Da=L(),Da!==a?(Ia=oa(),Ia!==a?(Ia=F(),Ia!==a?(sa=oa(),sa!==a?(sa=L(),sa!==a?Q=sa={op:"NOT"+ca,right:{type:"expr_list",value:[Da,sa]}}:(d=Q,Q=a)):(d=Q,Q=a)):(d=Q,Q=a)):(d=Q,Q=
a)):(d=Q,Q=a)):(d=Q,Q=a)):(d=Q,Q=a)):(d=Q,Q=a)):(d=Q,Q=a),Q===a&&(Q=d,sa=V(),sa!==a?(ca=oa(),ca!==a?(ca=L(),ca!==a?(Da=oa(),Da!==a?(Da=F(),Da!==a?(Ia=oa(),Ia!==a?(Ia=L(),Ia!==a?Q=sa={op:sa,right:{type:"expr_list",value:[ca,Ia]}}:(d=Q,Q=a)):(d=Q,Q=a)):(d=Q,Q=a)):(d=Q,Q=a)):(d=Q,Q=a)):(d=Q,Q=a)):(d=Q,Q=a)),Q===a&&(Q=d,ca=c(),ca!==a?(sa=oa(),sa!==a?(sa=m(),sa!==a?(sa=oa(),sa!==a?(sa=L(),sa!==a?Q=ca={op:ca+"NOT",right:sa}:(d=Q,Q=a)):(d=Q,Q=a)):(d=Q,Q=a)):(d=Q,Q=a)):(d=Q,Q=a),Q===a&&(Q=d,ca=c(),ca!==a?
(sa=oa(),sa!==a?(sa=L(),sa!==a?Q=ca={op:ca,right:sa}:(d=Q,Q=a)):(d=Q,Q=a)):(d=Q,Q=a)),Q===a&&(Q=d,ca=I(),ca!==a?(sa=oa(),sa!==a?(sa=ia(),sa!==a?(Da=oa(),Da!==a?(Da=d,l.substr(d,6).toLowerCase()===ud?(Ia=l.substr(d,6),d+=6):(Ia=a,0===pa&&n(vd)),Ia!==a?(Ia=d,pa++,Qa=R(),pa--,Qa===a?Ia=void 0:(d=Ia,Ia=a),Ia!==a?Da="ESCAPE":(d=Da,Da=a)):(d=Da,Da=a),Da!==a?(Da=oa(),Da!==a?(Da=ma(),Da!==a?Q=ca={op:ca,right:sa,escape:Da.value}:(d=Q,Q=a)):(d=Q,Q=a)):(d=Q,Q=a)):(d=Q,Q=a)):(d=Q,Q=a)):(d=Q,Q=a)):(d=Q,Q=a),Q===
a&&(Q=d,ca=I(),ca!==a?(sa=oa(),sa!==a?(sa=ia(),sa!==a?Q=ca={op:ca,right:sa,escape:""}:(d=Q,Q=a)):(d=Q,Q=a)):(d=Q,Q=a))))));Q===a&&(Q=null);Q!==a?(v=S,S=Q,""==S||void 0==S||null==S?S=v:(Q=null,S=Q="arithmetic"==S.type?fb(v,S.tail):gb(S.op,v,S.right,S.escape)),v=S):(d=v,v=a)}else d=v,v=a;else d=v,v=a;return v}function T(){if(l.substr(d,2)===Ra){var v=Ra;d+=2}else v=a,0===pa&&n(Bb);v===a&&(62===l.charCodeAt(d)?(v=ea,d++):(v=a,0===pa&&n(ha)),v===a&&(l.substr(d,2)===fa?(v=fa,d+=2):(v=a,0===pa&&n(ka)),
v===a&&(l.substr(d,2)===xa?(v=xa,d+=2):(v=a,0===pa&&n(Aa)),v===a&&(60===l.charCodeAt(d)?(v=La,d++):(v=a,0===pa&&n(Pa)),v===a&&(61===l.charCodeAt(d)?(v=jb,d++):(v=a,0===pa&&n(tb)),v===a&&(l.substr(d,2)===$a?(v=$a,d+=2):(v=a,0===pa&&n(ab))))))));return v}function I(){var v=v=d;var S=m();if(S!==a){var Q=oa();if(Q!==a){var ca=r();ca!==a?v=S=[S,Q,ca]:(d=v,v=a)}else d=v,v=a}else d=v,v=a;v!==a&&(v=v[0]+" "+v[2]);v===a&&(v=r());return v}function P(){var v=v=d;var S=m();if(S!==a){var Q=oa();if(Q!==a){var ca=
va();ca!==a?v=S=[S,Q,ca]:(d=v,v=a)}else d=v,v=a}else d=v,v=a;v!==a&&(v=v[0]+" "+v[2]);v===a&&(v=va());return v}function L(){var v=d;var S=Y();if(S!==a){var Q=[];var ca=d;var sa=oa();if(sa!==a){var Da=G();if(Da!==a){var Ia=oa();if(Ia!==a){var Qa=Y();Qa!==a?ca=sa=[sa,Da,Ia,Qa]:(d=ca,ca=a)}else d=ca,ca=a}else d=ca,ca=a}else d=ca,ca=a;for(;ca!==a;)Q.push(ca),ca=d,sa=oa(),sa!==a?(Da=G(),Da!==a?(Ia=oa(),Ia!==a?(Qa=Y(),Qa!==a?ca=sa=[sa,Da,Ia,Qa]:(d=ca,ca=a)):(d=ca,ca=a)):(d=ca,ca=a)):(d=ca,ca=a);Q!==a?v=
S=fb(S,Q):(d=v,v=a)}else d=v,v=a;return v}function G(){if(43===l.charCodeAt(d)){var v=Va;d++}else v=a,0===pa&&n(hb);v===a&&(45===l.charCodeAt(d)?(v=lb,d++):(v=a,0===pa&&n(qc)));return v}function Y(){var v=d;var S=k();if(S!==a){var Q=[];var ca=d;var sa=oa();if(sa!==a){var Da=aa();if(Da!==a){var Ia=oa();if(Ia!==a){var Qa=k();Qa!==a?ca=sa=[sa,Da,Ia,Qa]:(d=ca,ca=a)}else d=ca,ca=a}else d=ca,ca=a}else d=ca,ca=a;for(;ca!==a;)Q.push(ca),ca=d,sa=oa(),sa!==a?(Da=aa(),Da!==a?(Ia=oa(),Ia!==a?(Qa=k(),Qa!==a?ca=
sa=[sa,Da,Ia,Qa]:(d=ca,ca=a)):(d=ca,ca=a)):(d=ca,ca=a)):(d=ca,ca=a);Q!==a?v=S=fb(S,Q):(d=v,v=a)}else d=v,v=a;return v}function aa(){if(42===l.charCodeAt(d)){var v=wd;d++}else v=a,0===pa&&n(xd);v===a&&(47===l.charCodeAt(d)?(v=yd,d++):(v=a,0===pa&&n(zd)));return v}function k(){var v=ma();if(v===a){var S=d;var Q=d;var ca=Ka();if(ca!==a){var sa=Ha();if(sa!==a){var Da=Oa();Da!==a?Q=ca=parseFloat(ca+sa+Da):(d=Q,Q=a)}else d=Q,Q=a}else d=Q,Q=a;Q===a&&(Q=d,ca=Ka(),ca!==a?(sa=Ha(),sa!==a?Q=ca=parseFloat(ca+
sa):(d=Q,Q=a)):(d=Q,Q=a),Q===a&&(Q=d,ca=Ka(),ca!==a?(sa=Oa(),sa!==a?Q=ca=parseFloat(ca+sa):(d=Q,Q=a)):(d=Q,Q=a),Q===a&&(Q=d,ca=Ka(),ca!==a&&(ca=parseFloat(ca)),Q=ca)));var Ia=Q;if(Ia!==a){var Qa=d;pa++;var Ad=O();pa--;Ad===a?Qa=void 0:(d=Qa,Qa=a);Qa!==a?S=Ia={type:"number",value:Ia}:(d=S,S=a)}else d=S,S=a;v=S;if(v===a){var Mb=d;var Cb=d;if(l.substr(d,4).toLowerCase()===Bd){var ac=l.substr(d,4);d+=4}else ac=a,0===pa&&n(Cd);if(ac!==a){var Nb=d;pa++;var Dd=R();pa--;Dd===a?Nb=void 0:(d=Nb,Nb=a);Nb!==
a?Cb=ac=[ac,Nb]:(d=Cb,Cb=a)}else d=Cb,Cb=a;var yb=Cb;yb!==a&&(yb={type:"bool",value:!0});Mb=yb;if(Mb===a){Mb=d;var Db=d;if(l.substr(d,5).toLowerCase()===Ed){var bc=l.substr(d,5);d+=5}else bc=a,0===pa&&n(Fd);if(bc!==a){var Ob=d;pa++;var Gd=R();pa--;Gd===a?Ob=void 0:(d=Ob,Ob=a);Ob!==a?Db=bc=[bc,Ob]:(d=Db,Db=a)}else d=Db,Db=a;yb=Db;yb!==a&&(yb={type:"bool",value:!1});Mb=yb}v=Mb;if(v===a){var Eb=d;if(l.substr(d,4).toLowerCase()===Hd){var cc=l.substr(d,4);d+=4}else cc=a,0===pa&&n(Id);if(cc!==a){var Pb=
d;pa++;var Jd=R();pa--;Jd===a?Pb=void 0:(d=Pb,Pb=a);Pb!==a?Eb=cc=[cc,Pb]:(d=Eb,Eb=a)}else d=Eb,Eb=a;var rc=Eb;rc!==a&&(rc={type:"null",value:null});v=rc;if(v===a){var wb=d;var Fb=d;if(l.substr(d,4).toLowerCase()===Kd){var sc=l.substr(d,4);d+=4}else sc=a,0===pa&&n(Ld);if(sc!==a){var dc=d;pa++;var Md=R();pa--;Md===a?dc=void 0:(d=dc,dc=a);dc!==a?Fb=sc="DATE":(d=Fb,Fb=a)}else d=Fb,Fb=a;var Rc=Fb;if(Rc!==a){var Nd=oa();if(Nd!==a){var Sc=ia();Sc!==a?wb=Rc={type:"date",value:Sc.value}:(d=wb,wb=a)}else d=
wb,wb=a}else d=wb,wb=a;v=wb;if(v===a){var xb=d;var Gb=d;if(l.substr(d,9).toLowerCase()===Od){var tc=l.substr(d,9);d+=9}else tc=a,0===pa&&n(Pd);if(tc!==a){var ec=d;pa++;var Qd=R();pa--;Qd===a?ec=void 0:(d=ec,ec=a);ec!==a?Gb=tc="TIMESTAMP":(d=Gb,Gb=a)}else d=Gb,Gb=a;var Tc=Gb;if(Tc!==a){var Rd=oa();if(Rd!==a){var Uc=ia();Uc!==a?xb=Tc={type:"timestamp",value:Uc.value}:(d=xb,xb=a)}else d=xb,xb=a}else d=xb,xb=a;v=xb;if(v===a){var Xa=d;var Qb=Z();if(Qb!==a){var uc=oa();if(uc!==a){if(45===l.charCodeAt(d)){var ub=
lb;d++}else ub=a,0===pa&&n(qc);ub===a&&(43===l.charCodeAt(d)?(ub=Va,d++):(ub=a,0===pa&&n(hb)));if(ub!==a){var vc=oa();if(vc!==a){var Rb=ia();if(Rb!==a){var Sd=oa();if(Sd!==a){var Vc=z();Vc!==a?Xa=Qb={type:"interval",value:Rb,qualifier:Vc,op:ub}:(d=Xa,Xa=a)}else d=Xa,Xa=a}else d=Xa,Xa=a}else d=Xa,Xa=a}else d=Xa,Xa=a}else d=Xa,Xa=a}else d=Xa,Xa=a;Xa===a&&(Xa=d,Qb=Z(),Qb!==a?(uc=oa(),uc!==a?(ub=ia(),ub!==a?(vc=oa(),vc!==a?(Rb=z(),Rb!==a?Xa=Qb={type:"interval",value:ub,qualifier:Rb,op:""}:(d=Xa,Xa=a)):
(d=Xa,Xa=a)):(d=Xa,Xa=a)):(d=Xa,Xa=a)):(d=Xa,Xa=a));v=Xa}}}}}}var Wa=v;if(Wa===a){var db=d;var Hb=d;if(l.substr(d,7).toLowerCase()===Td){var wc=l.substr(d,7);d+=7}else wc=a,0===pa&&n(Ud);if(wc!==a){var fc=d;pa++;var Vd=R();pa--;Vd===a?fc=void 0:(d=fc,fc=a);fc!==a?Hb=wc="EXTRACT":(d=Hb,Hb=a)}else d=Hb,Hb=a;var Wc=Hb;if(Wc!==a){var Wd=oa();if(Wd!==a){var Xd=Ga();if(Xd!==a){var Yd=oa();if(Yd!==a){var pb=da();pb===a&&(pb=ja(),pb===a&&(pb=la(),pb===a&&(pb=ra(),pb===a&&(pb=ua(),pb===a&&(pb=za())))));var Xc=
pb;if(Xc!==a){var Zd=oa();if(Zd!==a){var $d=K();if($d!==a){var ae=oa();if(ae!==a){var Yc=f();if(Yc!==a){var be=oa();if(be!==a){var ce=Ja();ce!==a?db=Wc={type:"function",name:"extract",args:{type:"expr_list",value:[{type:"string",value:Xc},Yc]}}:(d=db,db=a)}else d=db,db=a}else d=db,db=a}else d=db,db=a}else d=db,db=a}else d=db,db=a}else d=db,db=a}else d=db,db=a}else d=db,db=a}else d=db,db=a}else d=db,db=a;Wa=db;if(Wa===a){var bb=d;var Ib=d;if(l.substr(d,9).toLowerCase()===de){var xc=l.substr(d,9);d+=
9}else xc=a,0===pa&&n(ee);if(xc!==a){var gc=d;pa++;var fe=R();pa--;fe===a?gc=void 0:(d=gc,gc=a);gc!==a?Ib=xc="SUBSTRING":(d=Ib,Ib=a)}else d=Ib,Ib=a;var Zc=Ib;if(Zc!==a){var ge=oa();if(ge!==a){var he=Ga();if(he!==a){var ie=oa();if(ie!==a){var yc=f();if(yc!==a){var je=oa();if(je!==a){var ke=K();if(ke!==a){var le=oa();if(le!==a){var zc=f();if(zc!==a){var me=oa();if(me!==a){var mb=d;var Jb=d;if(l.substr(d,3).toLowerCase()===ne){var Ac=l.substr(d,3);d+=3}else Ac=a,0===pa&&n(oe);if(Ac!==a){var hc=d;pa++;
var pe=R();pa--;pe===a?hc=void 0:(d=hc,hc=a);hc!==a?Jb=Ac="FOR":(d=Jb,Jb=a)}else d=Jb,Jb=a;var Sb=Jb;if(Sb!==a){var $c=oa();if($c!==a){var ad=f();if(ad!==a){var bd=oa();bd!==a?mb=Sb=[Sb,$c,ad,bd]:(d=mb,mb=a)}else d=mb,mb=a}else d=mb,mb=a}else d=mb,mb=a;mb===a&&(mb=null);mb!==a?(Sb=Ja(),Sb!==a?bb=Zc={type:"function",name:"substring",args:{type:"expr_list",value:mb?[yc,zc,mb[2]]:[yc,zc]}}:(d=bb,bb=a)):(d=bb,bb=a)}else d=bb,bb=a}else d=bb,bb=a}else d=bb,bb=a}else d=bb,bb=a}else d=bb,bb=a}else d=bb,bb=
a}else d=bb,bb=a}else d=bb,bb=a}else d=bb,bb=a}else d=bb,bb=a;Wa=bb;if(Wa===a){var Ma=d;var Tb=N();if(Tb!==a){var Bc=oa();if(Bc!==a){var Cc=Ga();if(Cc!==a){var Dc=oa();if(Dc!==a){var qb=b();qb===a&&(qb=null);if(qb!==a){var Ec=oa();if(Ec!==a){var Ub=f();if(Ub!==a){var Fc=oa();if(Fc!==a){var Gc=K();if(Gc!==a){var qe=oa();if(qe!==a){var cd=f();if(cd!==a){var re=oa();if(re!==a){var se=Ja();se!==a?Ma=Tb={type:"function",name:"trim",args:{type:"expr_list",value:[{type:"string",value:null==qb?"BOTH":qb},
Ub,cd]}}:(d=Ma,Ma=a)}else d=Ma,Ma=a}else d=Ma,Ma=a}else d=Ma,Ma=a}else d=Ma,Ma=a}else d=Ma,Ma=a}else d=Ma,Ma=a}else d=Ma,Ma=a}else d=Ma,Ma=a}else d=Ma,Ma=a}else d=Ma,Ma=a}else d=Ma,Ma=a}else d=Ma,Ma=a;Ma===a&&(Ma=d,Tb=N(),Tb!==a?(Bc=oa(),Bc!==a?(Cc=Ga(),Cc!==a?(Dc=oa(),Dc!==a?(qb=b(),qb===a&&(qb=null),qb!==a?(Ec=oa(),Ec!==a?(Ub=f(),Ub!==a?(Fc=oa(),Fc!==a?(Gc=Ja(),Gc!==a?Ma=Tb={type:"function",name:"trim",args:{type:"expr_list",value:[{type:"string",value:null==qb?"BOTH":qb},Ub]}}:(d=Ma,Ma=a)):(d=
Ma,Ma=a)):(d=Ma,Ma=a)):(d=Ma,Ma=a)):(d=Ma,Ma=a)):(d=Ma,Ma=a)):(d=Ma,Ma=a)):(d=Ma,Ma=a)):(d=Ma,Ma=a));Wa=Ma;if(Wa===a){var eb=d;var Kb=d;if(l.substr(d,8).toLowerCase()===te){var Hc=l.substr(d,8);d+=8}else Hc=a,0===pa&&n(ue);if(Hc!==a){var ic=d;pa++;var ve=R();pa--;ve===a?ic=void 0:(d=ic,ic=a);ic!==a?Kb=Hc="POSITION":(d=Kb,Kb=a)}else d=Kb,Kb=a;var dd=Kb;if(dd!==a){var we=oa();if(we!==a){var xe=Ga();if(xe!==a){var ye=oa();if(ye!==a){var ed=f();if(ed!==a){var ze=oa();if(ze!==a){var Ae=va();if(Ae!==a){var Be=
oa();if(Be!==a){var fd=f();if(fd!==a){var Ce=oa();if(Ce!==a){var De=Ja();De!==a?eb=dd={type:"function",name:"position",args:{type:"expr_list",value:[ed,fd]}}:(d=eb,eb=a)}else d=eb,eb=a}else d=eb,eb=a}else d=eb,eb=a}else d=eb,eb=a}else d=eb,eb=a}else d=eb,eb=a}else d=eb,eb=a}else d=eb,eb=a}else d=eb,eb=a}else d=eb,eb=a;Wa=eb;if(Wa===a){var kb=d;var Vb;var rb=d;rb=Vb=x();if(rb===a)if(rb=d,96===l.charCodeAt(d)?(Vb=gd,d++):(Vb=a,0===pa&&n(hd)),Vb!==a){var jc=[];if(id.test(l.charAt(d))){var vb=l.charAt(d);
d++}else vb=a,0===pa&&n(jd);if(vb!==a)for(;vb!==a;)jc.push(vb),id.test(l.charAt(d))?(vb=l.charAt(d),d++):(vb=a,0===pa&&n(jd));else jc=a;jc!==a?(96===l.charCodeAt(d)?(vb=gd,d++):(vb=a,0===pa&&n(hd)),vb!==a?rb=Vb=jc.join(""):(d=rb,rb=a)):(d=rb,rb=a)}else d=rb,rb=a;var Ic=rb;if(Ic!==a){var Ee=oa();if(Ee!==a){var Fe=Ga();if(Fe!==a){var Ge=oa();if(Ge!==a){var Wb=A();Wb===a&&(Wb=null);if(Wb!==a){var He=oa();if(He!==a){var Ie=Ja();Ie!==a?kb=Ic={type:"function",name:Ic,args:Wb?Wb:{type:"expr_list",value:[]}}:
(d=kb,kb=a)}else d=kb,kb=a}else d=kb,kb=a}else d=kb,kb=a}else d=kb,kb=a}else d=kb,kb=a}else d=kb,kb=a;Wa=kb;if(Wa===a){var nb;var Sa=d;var Xb=ya();if(Xb!==a){var Jc=oa();if(Jc!==a){var Yb=f();if(Yb!==a){var Kc=oa();if(Kc!==a){var zb=[];for(nb=wa();nb!==a;)zb.push(nb),nb=wa();if(zb!==a)if(nb=oa(),nb!==a){var kc=Ba();kc!==a?Sa=Xb={type:"case_expression",format:"simple",operand:Yb,clauses:zb,else:null}:(d=Sa,Sa=a)}else d=Sa,Sa=a;else d=Sa,Sa=a}else d=Sa,Sa=a}else d=Sa,Sa=a}else d=Sa,Sa=a}else d=Sa,Sa=
a;if(Sa===a)if(Sa=d,Xb=ya(),Xb!==a)if(Jc=oa(),Jc!==a)if(Yb=f(),Yb!==a)if(Kc=oa(),Kc!==a){zb=[];for(nb=wa();nb!==a;)zb.push(nb),nb=wa();if(zb!==a)if(nb=oa(),nb!==a)if(kc=Ca(),kc!==a){var Je=oa();if(Je!==a){var Ke=Ba();Ke!==a?Sa=Xb={type:"case_expression",format:"simple",operand:Yb,clauses:zb,else:kc.value}:(d=Sa,Sa=a)}else d=Sa,Sa=a}else d=Sa,Sa=a;else d=Sa,Sa=a;else d=Sa,Sa=a}else d=Sa,Sa=a;else d=Sa,Sa=a;else d=Sa,Sa=a;else d=Sa,Sa=a;var Lc=Sa;if(Lc===a){var ob;var Ya=d;var Zb=ya();if(Zb!==a){var Mc=
oa();if(Mc!==a){var Ab=[];for(ob=qa();ob!==a;)Ab.push(ob),ob=qa();if(Ab!==a)if(ob=oa(),ob!==a){var lc=Ba();lc!==a?Ya=Zb={type:"case_expression",format:"searched",clauses:Ab,else:null}:(d=Ya,Ya=a)}else d=Ya,Ya=a;else d=Ya,Ya=a}else d=Ya,Ya=a}else d=Ya,Ya=a;if(Ya===a)if(Ya=d,Zb=ya(),Zb!==a)if(Mc=oa(),Mc!==a){Ab=[];for(ob=qa();ob!==a;)Ab.push(ob),ob=qa();if(Ab!==a)if(ob=oa(),ob!==a)if(lc=Ca(),lc!==a){var Le=oa();if(Le!==a){var Me=Ba();Me!==a?Ya=Zb={type:"case_expression",format:"searched",clauses:Ab,
else:lc.value}:(d=Ya,Ya=a)}else d=Ya,Ya=a}else d=Ya,Ya=a;else d=Ya,Ya=a;else d=Ya,Ya=a}else d=Ya,Ya=a;else d=Ya,Ya=a;Lc=Ya}Wa=Lc;if(Wa===a){var mc;var Lb=d;var kd=O();if(kd!==a){var Nc=[];for(mc=D();mc!==a;)Nc.push(mc),mc=D();Nc!==a?Lb=kd+=Nc.join(""):(d=Lb,Lb=a)}else d=Lb,Lb=a;var nc=Lb;if(nc!==a){var Oc=nc;nc=/^CURRENT_DATE$/i.test(Oc)?{type:"current_time",mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(Oc)?{type:"current_time",mode:"timestamp"}:{type:"column_ref",table:"",column:Oc}}Wa=nc;if(Wa===a&&
(Wa=g(),Wa===a)){Wa=d;var ld=Ga();if(ld!==a){var Ne=oa();if(Ne!==a){var Pc=f();if(Pc!==a){var Oe=oa();if(Oe!==a){var Pe=Ja();Pe!==a?(Pc.paren=!0,Wa=ld=Pc):(d=Wa,Wa=a)}else d=Wa,Wa=a}else d=Wa,Wa=a}else d=Wa,Wa=a}else d=Wa,Wa=a}}}}}}}}return Wa}function x(){var v;var S=d;var Q=O();if(Q!==a){var ca=[];for(v=R();v!==a;)ca.push(v),v=R();ca!==a?S=Q+=ca.join(""):(d=S,S=a)}else d=S,S=a;return S}function O(){if(Qe.test(l.charAt(d))){var v=l.charAt(d);d++}else v=a,0===pa&&n(Re);return v}function R(){if(Se.test(l.charAt(d))){var v=
l.charAt(d);d++}else v=a,0===pa&&n(Te);return v}function D(){if(Ue.test(l.charAt(d))){var v=l.charAt(d);d++}else v=a,0===pa&&n(Ve);return v}function g(){var v=d;if(64===l.charCodeAt(d)){var S=We;d++}else S=a,0===pa&&n(Xe);if(S!==a){var Q=x();Q!==a?v=S=[S,Q]:(d=v,v=a)}else d=v,v=a;v!==a&&(v={type:"param",value:v[1]});return v}function b(){var v=d;if(l.substr(d,7).toLowerCase()===Ye){var S=l.substr(d,7);d+=7}else S=a,0===pa&&n(Ze);if(S!==a){S=d;pa++;var Q=R();pa--;Q===a?S=void 0:(d=S,S=a);S!==a?v="LEADING":
(d=v,v=a)}else d=v,v=a;v===a&&(v=d,l.substr(d,8).toLowerCase()===$e?(S=l.substr(d,8),d+=8):(S=a,0===pa&&n(af)),S!==a?(S=d,pa++,Q=R(),pa--,Q===a?S=void 0:(d=S,S=a),S!==a?v="TRAILING":(d=v,v=a)):(d=v,v=a),v===a&&(v=d,l.substr(d,4).toLowerCase()===bf?(S=l.substr(d,4),d+=4):(S=a,0===pa&&n(cf)),S!==a?(S=d,pa++,Q=R(),pa--,Q===a?S=void 0:(d=S,S=a),S!==a?v="BOTH":(d=v,v=a)):(d=v,v=a)));return v}function z(){var v=d;var S=d;var Q=J();if(Q!==a){var ca=oa();if(ca!==a)if(ca=Ga(),ca!==a)if(ca=oa(),ca!==a)if(ca=
ba(),ca!==a){var sa=oa();sa!==a?(sa=Ja(),sa!==a?S=Q={type:"interval-period",period:Q.value,precision:ca,secondary:null}:(d=S,S=a)):(d=S,S=a)}else d=S,S=a;else d=S,S=a;else d=S,S=a;else d=S,S=a}else d=S,S=a;S===a&&(S=d,Q=J(),Q!==a&&(Q=md(Q)),S=Q);if(S!==a)if(Q=oa(),Q!==a)if(Q=d,l.substr(d,2).toLowerCase()===df?(ca=l.substr(d,2),d+=2):(ca=a,0===pa&&n(ef)),ca!==a?(ca=d,pa++,sa=R(),pa--,sa===a?ca=void 0:(d=ca,ca=a),ca!==a?Q="TO":(d=Q,Q=a)):(d=Q,Q=a),Q!==a)if(Q=oa(),Q!==a){Q=d;ca=J();ca!==a&&(ca={type:"interval-period",
period:ca.value,precision:null,secondary:null});Q=ca;if(Q===a){Q=d;ca=za();if(ca!==a)if(ca=oa(),ca!==a)if(ca=Ga(),ca!==a)if(ca=oa(),ca!==a)if(ca=ba(),ca!==a)if(sa=oa(),sa!==a)if(sa=Fa(),sa!==a)if(sa=oa(),sa!==a)if(sa=W(),sa!==a){var Da=oa();Da!==a?(Da=Ja(),Da!==a?Q=ca=nd(ca,sa):(d=Q,Q=a)):(d=Q,Q=a)}else d=Q,Q=a;else d=Q,Q=a;else d=Q,Q=a;else d=Q,Q=a;else d=Q,Q=a;else d=Q,Q=a;else d=Q,Q=a;else d=Q,Q=a;else d=Q,Q=a;Q===a&&(Q=d,ca=za(),ca!==a?(ca=oa(),ca!==a?(ca=Ga(),ca!==a?(ca=oa(),ca!==a?(ca=ba(),
ca!==a?(sa=oa(),sa!==a?(sa=Ja(),sa!==a?Q=ca={type:"interval-period",period:"second",precision:ca,secondary:null}:(d=Q,Q=a)):(d=Q,Q=a)):(d=Q,Q=a)):(d=Q,Q=a)):(d=Q,Q=a)):(d=Q,Q=a)):(d=Q,Q=a),Q===a&&(Q=d,ca=za(),ca!==a&&(ca={type:"interval-period",period:"second",precision:null,secondary:null}),Q=ca))}Q!==a?v=S={type:"interval-qualifier",start:S,end:Q}:(d=v,v=a)}else d=v,v=a;else d=v,v=a;else d=v,v=a;else d=v,v=a;v===a&&(v=d,Q=J(),Q!==a?(S=oa(),S!==a?(S=Ga(),S!==a?(S=oa(),S!==a?(S=W(),S!==a?(ca=oa(),
ca!==a?(ca=Ja(),ca!==a?v=Q={type:"interval-period",period:Q.value,precision:S,secondary:null}:(d=v,v=a)):(d=v,v=a)):(d=v,v=a)):(d=v,v=a)):(d=v,v=a)):(d=v,v=a)):(d=v,v=a),v===a&&(v=d,Q=J(),Q!==a&&(Q=md(Q)),v=Q,v===a&&(v=d,Q=za(),Q!==a?(S=oa(),S!==a?(S=Ga(),S!==a?(S=oa(),S!==a?(S=ba(),S!==a?(ca=oa(),ca!==a?(ca=Fa(),ca!==a?(Q=oa(),Q!==a?(Q=W(),Q!==a?(ca=oa(),ca!==a?(ca=Ja(),ca!==a?v=Q=nd(S,Q):(d=v,v=a)):(d=v,v=a)):(d=v,v=a)):(d=v,v=a)):(d=v,v=a)):(d=v,v=a)):(d=v,v=a)):(d=v,v=a)):(d=v,v=a)):(d=v,v=a)):
(d=v,v=a),v===a&&(v=d,Q=za(),Q!==a?(S=oa(),S!==a?(S=Ga(),S!==a?(S=oa(),S!==a?(S=W(),S!==a?(ca=oa(),ca!==a?(ca=Ja(),ca!==a?v=Q={type:"interval-period",period:"second",precision:S,secondary:null}:(d=v,v=a)):(d=v,v=a)):(d=v,v=a)):(d=v,v=a)):(d=v,v=a)):(d=v,v=a)):(d=v,v=a),v===a&&(v=d,Q=za(),Q!==a&&(Q={type:"interval-period",period:"second",precision:null,secondary:null}),v=Q)))));return v}function J(){var v=d;v=la();v!==a&&(v={type:"string",value:"day"});v===a&&(v=d,v=ra(),v!==a&&(v={type:"string",value:"hour"}),
v===a&&(v=d,v=ua(),v!==a&&(v={type:"string",value:"minute"}),v===a&&(v=d,v=ja(),v!==a&&(v={type:"string",value:"month"}),v===a&&(v=d,v=da(),v!==a&&(v={type:"string",value:"year"})))));return v}function W(){var v=na();v!==a&&(v=parseFloat(v));return v}function ba(){var v=na();v!==a&&(v=parseFloat(v));return v}function ia(){var v=ma();v===a&&(v=g());return v}function ma(){var v=d;if(39===l.charCodeAt(d)){var S=od;d++}else S=a,0===pa&&n(pd);S===a&&(l.substr(d,2)===qd?(S=qd,d+=2):(S=a,0===pa&&n(ff)));
if(S!==a){S=[];var Q=d;l.substr(d,2)===oc?(Q=oc,d+=2):(Q=a,0===pa&&n(rd));Q!==a&&(Q="'");Q===a&&(sd.test(l.charAt(d))?(Q=l.charAt(d),d++):(Q=a,0===pa&&n(td)));for(;Q!==a;)S.push(Q),Q=d,l.substr(d,2)===oc?(Q=oc,d+=2):(Q=a,0===pa&&n(rd)),Q!==a&&(Q="'"),Q===a&&(sd.test(l.charAt(d))?(Q=l.charAt(d),d++):(Q=a,0===pa&&n(td)));S!==a?(39===l.charCodeAt(d)?(Q=od,d++):(Q=a,0===pa&&n(pd)),Q!==a?v=S={type:"string",value:S.join("")}:(d=v,v=a)):(d=v,v=a)}else d=v,v=a;return v}function qa(){var v=d;var S=Na();if(S!==
a)if(S=oa(),S!==a)if(S=f(),S!==a){var Q=oa();Q!==a?(Q=Ea(),Q!==a?(Q=oa(),Q!==a?(Q=f(),Q!==a?v=S={type:"when_clause",operand:S,value:Q}:(d=v,v=a)):(d=v,v=a)):(d=v,v=a)):(d=v,v=a)}else d=v,v=a;else d=v,v=a;else d=v,v=a;return v}function wa(){var v=d;var S=Na();if(S!==a)if(S=oa(),S!==a)if(S=f(),S!==a){var Q=oa();Q!==a?(Q=Ea(),Q!==a?(Q=oa(),Q!==a?(Q=f(),Q!==a?v=S={type:"when_clause",operand:S,value:Q}:(d=v,v=a)):(d=v,v=a)):(d=v,v=a)):(d=v,v=a)}else d=v,v=a;else d=v,v=a;else d=v,v=a;return v}function Ca(){var v=
d;var S=d;if(l.substr(d,4).toLowerCase()===gf){var Q=l.substr(d,4);d+=4}else Q=a,0===pa&&n(hf);if(Q!==a){Q=d;pa++;var ca=R();pa--;ca===a?Q=void 0:(d=Q,Q=a);Q!==a?S="ELSE":(d=S,S=a)}else d=S,S=a;S!==a?(S=oa(),S!==a?(S=f(),S!==a?v={type:"else_clause",value:S}:(d=v,v=a)):(d=v,v=a)):(d=v,v=a);return v}function Ka(){var v=na();if(v===a){v=d;if(45===l.charCodeAt(d)){var S=lb;d++}else S=a,0===pa&&n(qc);S===a&&(43===l.charCodeAt(d)?(S=Va,d++):(S=a,0===pa&&n(hb)));if(S!==a){var Q=na();Q!==a?v=S=S[0]+Q:(d=
v,v=a)}else d=v,v=a}return v}function Ha(){var v=d;if(46===l.charCodeAt(d)){var S=jf;d++}else S=a,0===pa&&n(kf);S!==a?(S=na(),S===a&&(S=null),S!==a?v="."+(null!=S?S:""):(d=v,v=a)):(d=v,v=a);return v}function Oa(){var v;var S=v=d;if(lf.test(l.charAt(d))){var Q=l.charAt(d);d++}else Q=a,0===pa&&n(mf);Q!==a?(nf.test(l.charAt(d))?(Q=l.charAt(d),d++):(Q=a,0===pa&&n(of)),Q===a&&(Q=null),Q!==a?S="e"+(null===Q?"":Q):(d=S,S=a)):(d=S,S=a);S!==a?(Q=na(),Q!==a?v=S+Q:(d=v,v=a)):(d=v,v=a);return v}function na(){var v=
[];var S=ta();if(S!==a)for(;S!==a;)v.push(S),S=ta();else v=a;v!==a&&(v=v.join(""));return v}function ta(){if(pf.test(l.charAt(d))){var v=l.charAt(d);d++}else v=a,0===pa&&n(qf);return v}function va(){var v=d;if(l.substr(d,2).toLowerCase()===rf){var S=l.substr(d,2);d+=2}else S=a,0===pa&&n(sf);if(S!==a){S=d;pa++;var Q=R();pa--;Q===a?S=void 0:(d=S,S=a);S!==a?v="IN":(d=v,v=a)}else d=v,v=a;return v}function c(){var v=d;if(l.substr(d,2).toLowerCase()===tf){var S=l.substr(d,2);d+=2}else S=a,0===pa&&n(uf);
if(S!==a){S=d;pa++;var Q=R();pa--;Q===a?S=void 0:(d=S,S=a);S!==a?v="IS":(d=v,v=a)}else d=v,v=a;return v}function r(){var v=d;if(l.substr(d,4).toLowerCase()===vf){var S=l.substr(d,4);d+=4}else S=a,0===pa&&n(wf);if(S!==a){S=d;pa++;var Q=R();pa--;Q===a?S=void 0:(d=S,S=a);S!==a?v="LIKE":(d=v,v=a)}else d=v,v=a;return v}function m(){var v=d;if(l.substr(d,3).toLowerCase()===xf){var S=l.substr(d,3);d+=3}else S=a,0===pa&&n(yf);if(S!==a){S=d;pa++;var Q=R();pa--;Q===a?S=void 0:(d=S,S=a);S!==a?v="NOT":(d=v,v=
a)}else d=v,v=a;return v}function F(){var v=d;if(l.substr(d,3).toLowerCase()===zf){var S=l.substr(d,3);d+=3}else S=a,0===pa&&n(Af);if(S!==a){S=d;pa++;var Q=R();pa--;Q===a?S=void 0:(d=S,S=a);S!==a?v="AND":(d=v,v=a)}else d=v,v=a;return v}function U(){var v=d;if(l.substr(d,2).toLowerCase()===Bf){var S=l.substr(d,2);d+=2}else S=a,0===pa&&n(Cf);if(S!==a){S=d;pa++;var Q=R();pa--;Q===a?S=void 0:(d=S,S=a);S!==a?v="OR":(d=v,v=a)}else d=v,v=a;return v}function V(){var v=d;if(l.substr(d,7).toLowerCase()===Df){var S=
l.substr(d,7);d+=7}else S=a,0===pa&&n(Ef);if(S!==a){S=d;pa++;var Q=R();pa--;Q===a?S=void 0:(d=S,S=a);S!==a?v="BETWEEN":(d=v,v=a)}else d=v,v=a;return v}function K(){var v=d;if(l.substr(d,4).toLowerCase()===Ff){var S=l.substr(d,4);d+=4}else S=a,0===pa&&n(Gf);if(S!==a){S=d;pa++;var Q=R();pa--;Q===a?S=void 0:(d=S,S=a);S!==a?v="FROM":(d=v,v=a)}else d=v,v=a;return v}function N(){var v=d;if(l.substr(d,4).toLowerCase()===Hf){var S=l.substr(d,4);d+=4}else S=a,0===pa&&n(If);if(S!==a){S=d;pa++;var Q=R();pa--;
Q===a?S=void 0:(d=S,S=a);S!==a?v="TRIM":(d=v,v=a)}else d=v,v=a;return v}function Z(){var v=d;if(l.substr(d,8).toLowerCase()===Jf){var S=l.substr(d,8);d+=8}else S=a,0===pa&&n(Kf);if(S!==a){S=d;pa++;var Q=R();pa--;Q===a?S=void 0:(d=S,S=a);S!==a?v="INTERVAL":(d=v,v=a)}else d=v,v=a;return v}function da(){var v=d;if(l.substr(d,4).toLowerCase()===Lf){var S=l.substr(d,4);d+=4}else S=a,0===pa&&n(Mf);if(S!==a){S=d;pa++;var Q=R();pa--;Q===a?S=void 0:(d=S,S=a);S!==a?v="YEAR":(d=v,v=a)}else d=v,v=a;return v}
function ja(){var v=d;if(l.substr(d,5).toLowerCase()===Nf){var S=l.substr(d,5);d+=5}else S=a,0===pa&&n(Of);if(S!==a){S=d;pa++;var Q=R();pa--;Q===a?S=void 0:(d=S,S=a);S!==a?v="MONTH":(d=v,v=a)}else d=v,v=a;return v}function la(){var v=d;if(l.substr(d,3).toLowerCase()===Pf){var S=l.substr(d,3);d+=3}else S=a,0===pa&&n(Qf);if(S!==a){S=d;pa++;var Q=R();pa--;Q===a?S=void 0:(d=S,S=a);S!==a?v="DAY":(d=v,v=a)}else d=v,v=a;return v}function ra(){var v=d;if(l.substr(d,4).toLowerCase()===Rf){var S=l.substr(d,
4);d+=4}else S=a,0===pa&&n(Sf);if(S!==a){S=d;pa++;var Q=R();pa--;Q===a?S=void 0:(d=S,S=a);S!==a?v="HOUR":(d=v,v=a)}else d=v,v=a;return v}function ua(){var v=d;if(l.substr(d,6).toLowerCase()===Tf){var S=l.substr(d,6);d+=6}else S=a,0===pa&&n(Uf);if(S!==a){S=d;pa++;var Q=R();pa--;Q===a?S=void 0:(d=S,S=a);S!==a?v="MINUTE":(d=v,v=a)}else d=v,v=a;return v}function za(){var v=d;if(l.substr(d,6).toLowerCase()===Vf){var S=l.substr(d,6);d+=6}else S=a,0===pa&&n(Wf);if(S!==a){S=d;pa++;var Q=R();pa--;Q===a?S=
void 0:(d=S,S=a);S!==a?v="SECOND":(d=v,v=a)}else d=v,v=a;return v}function ya(){var v=d;if(l.substr(d,4).toLowerCase()===Xf){var S=l.substr(d,4);d+=4}else S=a,0===pa&&n(Yf);if(S!==a){S=d;pa++;var Q=R();pa--;Q===a?S=void 0:(d=S,S=a);S!==a?v="CASE":(d=v,v=a)}else d=v,v=a;return v}function Ba(){var v=d;if(l.substr(d,3).toLowerCase()===Zf){var S=l.substr(d,3);d+=3}else S=a,0===pa&&n($f);if(S!==a){S=d;pa++;var Q=R();pa--;Q===a?S=void 0:(d=S,S=a);S!==a?v="END":(d=v,v=a)}else d=v,v=a;return v}function Na(){var v=
d;if(l.substr(d,4).toLowerCase()===ag){var S=l.substr(d,4);d+=4}else S=a,0===pa&&n(bg);if(S!==a){S=d;pa++;var Q=R();pa--;Q===a?S=void 0:(d=S,S=a);S!==a?v="WHEN":(d=v,v=a)}else d=v,v=a;return v}function Ea(){var v=d;if(l.substr(d,4).toLowerCase()===cg){var S=l.substr(d,4);d+=4}else S=a,0===pa&&n(dg);if(S!==a){S=d;pa++;var Q=R();pa--;Q===a?S=void 0:(d=S,S=a);S!==a?v="THEN":(d=v,v=a)}else d=v,v=a;return v}function Fa(){if(44===l.charCodeAt(d)){var v=eg;d++}else v=a,0===pa&&n(fg);return v}function Ga(){if(40===
l.charCodeAt(d)){var v=gg;d++}else v=a,0===pa&&n(hg);return v}function Ja(){if(41===l.charCodeAt(d)){var v=ig;d++}else v=a,0===pa&&n(jg);return v}function oa(){var v;var S=[];for(v=cb();v!==a;)S.push(v),v=cb();return S}function cb(){if(kg.test(l.charAt(d))){var v=l.charAt(d);d++}else v=a,0===pa&&n(lg);return v}function gb(v,S,Q,ca){v={type:"binary_expr",operator:v,left:S,right:Q};void 0!==ca&&(v.escape=ca);return v}function fb(v,S){for(var Q=0;Q<S.length;Q++)v=gb(S[Q][1],v,S[Q][3]);return v}E=void 0!==
E?E:{};var a={},ib={start:y},Za=y,Ua="!",Ta=q("!",!1),jb="\x3d",tb=q("\x3d",!1),Ra="\x3e\x3d",Bb=q("\x3e\x3d",!1),ea="\x3e",ha=q("\x3e",!1),fa="\x3c\x3d",ka=q("\x3c\x3d",!1),xa="\x3c\x3e",Aa=q("\x3c\x3e",!1),La="\x3c",Pa=q("\x3c",!1),$a="!\x3d",ab=q("!\x3d",!1),Va="+",hb=q("+",!1),lb="-",qc=q("-",!1),wd="*",xd=q("*",!1),yd="/",zd=q("/",!1),Qe=/^[A-Za-z_\x80-\uFFFF]/,Re=u([["A","Z"],["a","z"],"_",["\u0080","\uffff"]],!1,!1),Se=/^[A-Za-z0-9_]/,Te=u([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),Ue=/^[A-Za-z0-9_.\x80-\uFFFF]/,
Ve=u([["A","Z"],["a","z"],["0","9"],"_",".",["\u0080","\uffff"]],!1,!1),We="@",Xe=q("@",!1),md=function(v){return{type:"interval-period",period:v.value,precision:null,secondary:null}},nd=function(v,S){return{type:"interval-period",period:"second",precision:v,secondary:S}},od="'",pd=q("'",!1),qd="N'",ff=q("N'",!1),oc="''",rd=q("''",!1),sd=/^[^']/,td=u(["'"],!0,!1),jf=".",kf=q(".",!1),pf=/^[0-9]/,qf=u([["0","9"]],!1,!1),lf=/^[eE]/,mf=u(["e","E"],!1,!1),nf=/^[+\-]/,of=u(["+","-"],!1,!1),Hd="null",Id=
q("NULL",!0),Bd="true",Cd=q("TRUE",!0),Ed="false",Fd=q("FALSE",!0),rf="in",sf=q("IN",!0),tf="is",uf=q("IS",!0),vf="like",wf=q("LIKE",!0),ud="escape",vd=q("ESCAPE",!0),xf="not",yf=q("NOT",!0),zf="and",Af=q("AND",!0),Bf="or",Cf=q("OR",!0),Df="between",Ef=q("BETWEEN",!0),Ff="from",Gf=q("FROM",!0),ne="for",oe=q("FOR",!0),de="substring",ee=q("SUBSTRING",!0),Td="extract",Ud=q("EXTRACT",!0),Hf="trim",If=q("TRIM",!0),te="position",ue=q("POSITION",!0),Od="timestamp",Pd=q("TIMESTAMP",!0),Kd="date",Ld=q("DATE",
!0),Ye="leading",Ze=q("LEADING",!0),$e="trailing",af=q("TRAILING",!0),bf="both",cf=q("BOTH",!0),df="to",ef=q("TO",!0),Jf="interval",Kf=q("INTERVAL",!0),Lf="year",Mf=q("YEAR",!0),Nf="month",Of=q("MONTH",!0),Pf="day",Qf=q("DAY",!0),Rf="hour",Sf=q("HOUR",!0),Tf="minute",Uf=q("MINUTE",!0),Vf="second",Wf=q("SECOND",!0),Xf="case",Yf=q("CASE",!0),Zf="end",$f=q("END",!0),ag="when",bg=q("WHEN",!0),cg="then",dg=q("THEN",!0),gf="else",hf=q("ELSE",!0),eg=",",fg=q(",",!1),gg="(",hg=q("(",!1),ig=")",jg=q(")",!1),
kg=/^[ \t\n\r]/,lg=u([" ","\t","\n","\r"],!1,!1),gd="`",hd=q("`",!1),id=/^[^`]/,jd=u(["`"],!0,!1),d=0,$b=[{line:1,column:1}],sb=0,pc=[],pa=0;if("startRule"in E){if(!(E.startRule in ib))throw Error("Can't start parsing from rule \""+E.startRule+'".');Za=ib[E.startRule]}var Qc=Za();if(Qc!==a&&d===l.length)return Qc;Qc!==a&&d<l.length&&n({type:"end"});throw function(v,S,Q){return new t(t.buildMessage(v,S),v,S,Q)}(pc,sb<l.length?l.charAt(sb):null,sb<l.length?X(sb,sb+1):X(sb,sb));}}})})(w);let M=function(){function h(){}
h.parse=function(t){return w.exports.parse(t)};return h}();p.WhereGrammar=M;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/chunks/_commonjsHelpers":function(){define(["exports"],function(p){p.commonjsGlobal="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};p.commonjsRequire=function(e){throw Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.');
};p.getDefaultExportFromCjs=function(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e["default"]:e}})},"esri/layers/graphics/data/QueryEngineCapabilities":function(){define(["exports"],function(p){p.queryCapabilities={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,
supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/graphics/data/QueryEngineResult":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../geometry/support/quantizationUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ./AttributesBuilder ./attributeSupport ./projectionSupport ./timeSupport ./utils ../../support/fieldUtils ../../../smartMapping/statistics/support/utils ../../../support/arcadeOnDemand".split(" "),
function(p,e,w,M,h,t,l,E,q,u,H,X,n){function y(B){return B.substr(24,12)+B.substr(19,4)+B.substr(16,2)+B.substr(14,2)+B.substr(11,2)+B.substr(9,2)+B.substr(6,2)+B.substr(4,2)+B.substr(2,2)+B.substr(0,2)}function A(B,T,I,P){if(I&&"esriFieldTypeDate"===I.type){const L=(new Date(B)).getTime(),G=(new Date(T)).getTime();if(!isNaN(L)&&!isNaN(G))return P?G-L:L-G}return"number"===typeof B&&"number"===typeof T?P?T-B:B-T:"string"===typeof B&&"string"===typeof T?(B=B.toUpperCase(),T=T.toUpperCase(),!I||"esriFieldTypeGUID"!==
I.type&&"esriFieldTypeGlobalID"!==I.type?P=(P?B>T:B<T)?-1:(P?B<T:B>T)?1:0:(I=y(B),T=y(T),P=(P?I>T:I<T)?-1:(P?I<T:I>T)?1:0),P):P?1:-1}function f(B,T,I,P,L,G){L-=I;G-=P;B=Math.min(1,Math.max(0,((B-I)*L+(T-P)*G)/(L*L+G*G)));return{x:I+L*B,y:P+G*B}}function C(B,T){return B?T?4:3:T?3:2}return function(){function B(I,P,L){this.items=I;this.queryGeometry=P;this.definitionExpression=L.definitionExpression;this.geometryType=L.geometryType;this.hasM=L.hasM;this.hasZ=L.hasZ;this.objectIdField=L.objectIdField;
this.spatialReference=L.spatialReference;this.fieldsIndex=L.fieldsIndex;this.timeInfo=L.timeInfo;this.featureAdapter=L.featureAdapter;this.aggregateAdapter=L.aggregateAdapter}var T=B.prototype;T.createQueryResponseForCount=function(I){const P=new t(I,this.featureAdapter,this.fieldsIndex);if(!I.outStatistics)return P.countDistinctValues(this.items);const {groupByFieldsForStatistics:L,having:G}=I;if(null==L||!L.length)return 1;const Y=new Map,aa=new Map,k=new Set;I=I.outStatistics;for(const O of I){({statisticType:I}=
O);I="exceedslimit"!==I?O.onStatisticField:void 0;if(!aa.has(I)){var x=[];for(const R of L){const D=this._getAttributeValues(P,R,Y);x.push(D)}aa.set(I,this._calculateUniqueValues(x))}I=aa.get(I);for(const R in I){const {data:D,items:g}=I[R];x=D.join(",");G&&!P.validateItems(g,G)||k.add(x)}}return k.size};T.createQueryResponse=function(I){let P;P=I.outStatistics?I.outStatistics.some(L=>"exceedslimit"===L.statisticType)?this._createExceedsLimitQueryResponse(I):this._createStatisticsQueryResponse(I):
this._createFeatureQueryResponse(I);I.returnQueryGeometry&&(M.isValid(I.outSR)&&!M.equals(this.queryGeometry.spatialReference,I.outSR)?P.queryGeometry=u.cleanFromGeometryEngine({spatialReference:I.outSR,...E.project(this.queryGeometry,this.queryGeometry.spatialReference,I.outSR)}):P.queryGeometry=u.cleanFromGeometryEngine({spatialReference:I.outSR,...this.queryGeometry}));return P};T.createSnappingResponse=function(I,P){const L=this.featureAdapter,G=C(this.hasZ,this.hasM),{x:Y,y:aa}=I.point,k="number"===
typeof I.distance?I.distance:I.distance.x,x="number"===typeof I.distance?I.distance:I.distance.y,O={candidates:[]},R="esriGeometryPolygon"===this.geometryType;P=this.getPointCreator(I.point,this.spatialReference,P);for(const ia of this.items){var D=L.getGeometry(ia);if(!D)continue;const {coords:ma,lengths:qa}=D;if(I.types&1){D=0;for(var g=0;g<qa.length;g++){var b=qa[g];for(var z=0;z<b;z++,D+=G){var J=ma[D],W=ma[D+1];if(z!==b-1){const wa=ma[D+G],Ca=ma[D+G+1],{x:Ka,y:Ha}=f(Y,aa,J,W,wa,Ca);var ba=(Y-
Ka)/k;const Oa=(aa-Ha)/x;ba=ba*ba+Oa*Oa;1>=ba&&O.candidates.push({type:"edge",objectId:L.getObjectId(ia),distance:Math.sqrt(ba),target:P(Ka,Ha),start:P(J,W),end:P(wa,Ca)})}}}}if(I.types&2)for(D=R?ma.length-G:ma.length,g=0;g<D;g+=G)b=ma[g],z=ma[g+1],J=(Y-b)/k,W=(aa-z)/x,J=J*J+W*W,1>=J&&O.candidates.push({type:"vertex",objectId:L.getObjectId(ia),distance:Math.sqrt(J),target:P(b,z)})}O.candidates.sort((ia,ma)=>ia.distance-ma.distance);return O};T.getPointCreator=function(I,P,L){const G=e.isSome(L)&&
!M.equals(P,L)?Y=>E.project(Y,P,L):Y=>Y;return null!=I.z&&null!=I.m?(Y,aa)=>G({x:Y,y:aa,z:I.z,m:I.m}):null!=I.z?(Y,aa)=>G({x:Y,y:aa,z:I.z}):null!=I.m?(Y,aa)=>G({x:Y,y:aa,m:I.m}):(Y,aa)=>G({x:Y,y:aa})};T.executeAttributesQuery=function(I){var P=l.getWhereClause(I.where,this.fieldsIndex);if(!P)return Promise.resolve(this);if(P.isStandardized){let L=0;const G=[];for(const Y of this.items)P.testFeature(Y,this.featureAdapter)&&(G[L++]=Y);P=new B(G,this.queryGeometry,this);P.definitionExpression=I.where;
return Promise.resolve(P)}return Promise.reject(new TypeError("Where clause is not standardized"))};T.executeAggregateIdsQuery=function(I){if(!I.aggregateIds||!I.aggregateIds.length||e.isNone(this.aggregateAdapter))return Promise.resolve(this);const P=new Set;for(const G of I.aggregateIds)this.aggregateAdapter.getFeatureObjectIds(G).forEach(Y=>P.add(Y));const L=this.featureAdapter.getObjectId;return Promise.resolve(new B(this.items.filter(G=>P.has(L(G))),this.queryGeometry,this))};T.executeObjectIdsQuery=
function(I){if(!I.objectIds||!I.objectIds.length)return Promise.resolve(this);const P=new Set(I.objectIds),L=this.featureAdapter.getObjectId;return Promise.resolve(new B(this.items.filter(G=>P.has(L(G))),this.queryGeometry,this))};T.executeTimeQuery=function(I){I=q.getTimeOperator(this.timeInfo,I.timeExtent,this.featureAdapter);if(!e.isSome(I))return Promise.resolve(this);I=this.items.filter(I);return Promise.resolve(new B(I,this.queryGeometry,this))};T.filterLatest=function(){const {trackIdField:I,
startTimeField:P,endTimeField:L}=this.timeInfo;var G=L||P;const Y=new Map,aa=this.featureAdapter.getAttribute;for(const k of this.items){const x=aa(k,I),O=aa(k,G),R=Y.get(x);(!R||O>aa(R,G))&&Y.set(x,k)}G=Array.from(Y.values());return Promise.resolve(new B(G,this.queryGeometry,this))};T.project=function(){var I=p._asyncToGenerator(function*(P){if(!P||M.equals(this.spatialReference,P))return this;const L=this.featureAdapter,G=(yield E.projectMany(this.items.map(Y=>u.getGeometry(this.geometryType,this.hasZ,
this.hasM,L.getGeometry(Y))),this.spatialReference,P)).map((Y,aa)=>L.cloneWithGeometry(this.items[aa],h.convertFromGeometry(Y,this.hasZ,this.hasM)));return new B(G,this.queryGeometry,{definitionExpression:this.definitionExpression,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,objectIdField:this.objectIdField,spatialReference:P,fieldsIndex:this.fieldsIndex,timeInfo:this.timeInfo,featureAdapter:this.featureAdapter})});return function(P){return I.apply(this,arguments)}}();T.createSummaryStatisticsResponse=
function(){var I=p._asyncToGenerator(function*(P,L){const {field:G,normalizationField:Y,normalizationType:aa,normalizationTotal:k,minValue:x,maxValue:O}=L;var R=new t(P,this.featureAdapter,this.fieldsIndex);P=this.fieldsIndex.isDateField(G);L=L.valueExpression?yield this._getAttributeExpressionValues(R,L.valueExpression,L.viewInfoParams):this._getAttributeNormalizedValues(R,{field:G,normalizationField:Y,normalizationType:aa,normalizationTotal:k});R=X.isNullCountSupported({normalizationType:aa,normalizationField:Y,
minValue:x,maxValue:O});L=H.isStringField(this.fieldsIndex.get(G))?X.calculateStringStatistics({values:L,supportsNullCount:R}):X.calculateStatistics({values:L,minValue:x,maxValue:O,useSampleStdDev:!aa,supportsNullCount:R});return X.processStatsResult(L,P)});return function(P,L){return I.apply(this,arguments)}}();T._sortFeatures=function(I,P,L){if(1<I.length&&P&&P.length)for(const G of P.reverse()){P=G.split(" ");const Y=P[0],aa=this.fieldsIndex.get(Y),k=P[1]&&"desc"===P[1].toLowerCase();I.sort((x,
O)=>{x=L(x,Y,aa);O=L(O,Y,aa);return A(x,O,aa,k)})}};T._createFeatureQueryResponse=function(I){const P=this.items,{geometryType:L,hasM:G,hasZ:Y,objectIdField:aa,spatialReference:k}=this,{outFields:x,outSR:O,quantizationParameters:R,resultRecordCount:D,resultOffset:g,returnZ:b,returnM:z}=I,J=null!=D?P.length>(g||0)+D:!1,W=x&&(-1<x.indexOf("*")?[...this.fieldsIndex.fields]:x.map(ba=>this.fieldsIndex.get(ba)));return{exceededTransferLimit:J,features:this._createFeatures(I,P),fields:W,geometryType:L,hasM:G&&
z,hasZ:Y&&b,objectIdFieldName:aa,spatialReference:u.cleanFromGeometryEngine(O?O:k),transform:R&&w.toQuantizationTransform(R)||null}};T._createFeatures=function(I,P){const L=new t(I,this.featureAdapter,this.fieldsIndex),{hasM:G,hasZ:Y}=this,{orderByFields:aa,quantizationParameters:k,returnGeometry:x,returnCentroid:O,maxAllowableOffset:R,resultOffset:D,resultRecordCount:g,returnZ:b=!1,returnM:z=!1}=I,J=Y&&b,W=G&&z;I=[];var ba=0;P=[...P];this._sortFeatures(P,aa,(qa,wa,Ca)=>L.getFieldValue(qa,wa,Ca));
if(x||O){var ia=w.toQuantizationTransform(k);if(x&&!O)for(var ma of P)I[ba++]={attributes:L.getAttributes(ma),geometry:u.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(ma),R,ia,J,W)};else if(!x&&O)for(const qa of P)I[ba++]={attributes:L.getAttributes(qa),centroid:u.transformCentroid(this,this.featureAdapter.getCentroid(qa,this),ia)};else for(const qa of P)I[ba++]={attributes:L.getAttributes(qa),centroid:u.transformCentroid(this,this.featureAdapter.getCentroid(qa,
this),ia),geometry:u.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(qa),R,ia,J,W)}}else for(ia of P)(ma=L.getAttributes(ia))&&(I[ba++]={attributes:ma});ba=D||0;null!=g&&(I=I.slice(ba,Math.min(I.length,ba+g)));return I};T._createExceedsLimitQueryResponse=function(I){var P=!1;let L=Number.POSITIVE_INFINITY,G=Number.POSITIVE_INFINITY;P=Number.POSITIVE_INFINITY;for(const Y of I.outStatistics)if("exceedslimit"===Y.statisticType){L=null!=Y.maxPointCount?Y.maxPointCount:
Number.POSITIVE_INFINITY;G=null!=Y.maxRecordCount?Y.maxRecordCount:Number.POSITIVE_INFINITY;P=null!=Y.maxVertexCount?Y.maxVertexCount:Number.POSITIVE_INFINITY;break}if("esriGeometryPoint"===this.geometryType)P=this.items.length>L;else if(this.items.length>G)P=!0;else{I=this.hasZ?this.hasM?4:3:this.hasM?3:2;const Y=this.featureAdapter;P=this.items.reduce((aa,k)=>{k=Y.getGeometry(k);return aa+(k&&k.coords.length||0)},0)/I>P}return{fields:[{name:"exceedslimit",type:"esriFieldTypeInteger",alias:"exceedslimit",
sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],features:[{attributes:{exceedslimit:Number(P)}}]}};T._createStatisticsQueryResponse=function(I){var P={attributes:{}};const L=[],G=new Map,Y=new Map,aa=new Map,k=new Map,x=new t(I,this.featureAdapter,this.fieldsIndex);var O=I.outStatistics;const {groupByFieldsForStatistics:R,having:D,orderByFields:g}=I;I=R&&R.length;const b=!!I,z=b&&R[0],J=b&&!this.fieldsIndex.get(z);for(const qa of O){const {outStatisticFieldName:wa,statisticType:Ca}=qa;O=
qa;var W="exceedslimit"!==Ca?qa.onStatisticField:void 0;const Ka="percentile_disc"===Ca||"percentile_cont"===Ca,Ha=b&&1===I&&(W===z||J)&&"count"===Ca;if(b){if(!aa.has(W)){var ba=[];for(const Oa of R){var ia=this._getAttributeValues(x,Oa,G);ba.push(ia)}aa.set(W,this._calculateUniqueValues(ba,x.returnDistinctValues))}ba=aa.get(W);for(const Oa in ba){const {count:na,data:ta,items:va,itemPositions:c}=ba[Oa];ia=ta.join(",");if(!D||x.validateItems(va,D)){const r=k.get(ia)||{attributes:{}};var ma=null;if(Ha)ma=
na;else{const m=this._getAttributeValues(x,W,G);ma=c.map(F=>m[F]);ma=Ka&&"statisticParameters"in O?this._getPercentileValue(O,ma):this._getStatisticValue(O,ma)}r.attributes[wa]=ma;R.forEach((m,F)=>r.attributes[this.fieldsIndex.get(m)?m:`EXPR_${F+1}`]=ta[F]);k.set(ia,r)}}}else W=this._getAttributeValues(x,W,G),P.attributes[wa]=Ka&&"statisticParameters"in O?this._getPercentileValue(O,W):this._getStatisticValue(O,W,Y);L.push({name:wa,alias:wa,type:"esriFieldTypeDouble"})}P=b?Array.from(k.values()):[P];
this._sortFeatures(P,g,(qa,wa)=>qa.attributes[wa]);return{fields:L,features:P}};T._getStatisticValue=function(I,P,L){const {onStatisticField:G,statisticType:Y}=I;I=null;I=null!=L&&L.has(G)?L.get(G):H.isStringField(this.fieldsIndex.get(G))?X.calculateStringStatistics({values:P}):X.calculateStatistics({values:P,minValue:null,maxValue:null,useSampleStdDev:!0});L&&L.set(G,I);return I["var"===Y?"variance":Y]};T._getPercentileValue=function(I,P){const {onStatisticField:L,statisticParameters:G,statisticType:Y}=
I,{value:aa,orderBy:k}=G,x="desc"===k,O=this.fieldsIndex.get(L);I=[...P].filter(R=>null!=R).sort((R,D)=>A(R,D,O,x));return this._calculatePercentile(I,aa,"percentile_disc"===Y)};T._getAttributeValues=function(I,P,L){if(L.has(P))return L.get(P);const G=this.fieldsIndex.get(P),Y=this.items.map(aa=>I.getFieldValue(aa,P,G));L.set(P,Y);return Y};T._getAttributeNormalizedValues=function(I,P){return this.items.map(L=>I.getNormalizedValue(L,{field:P.field,fieldInfo:this.fieldsIndex.get(P.field),normalizationField:P.normalizationField,
normalizationFieldInfo:this.fieldsIndex.get(P.normalizationField),normalizationType:P.normalizationType,normalizationTotal:P.normalizationTotal}))};T._getAttributeExpressionValues=function(){var I=p._asyncToGenerator(function*(P,L,G){const {arcadeUtils:Y}=yield n.loadArcade(),aa=Y.createFunction(L),k=G&&Y.getViewInfo(G);return this.items.map(x=>P.getExpressionValue(x,{compiledFunc:aa,viewInfo:k},Y))});return function(P,L,G){return I.apply(this,arguments)}}();T._calculateUniqueValues=function(I,P){const L=
{},G=this.items,Y=G.length;for(let aa=0;aa<Y;aa++){const k=G[aa],x=[];for(const R of I)x.push(R[aa]);const O=x.join(",");P?null==L[O]&&(L[O]={count:1,data:x,items:[k],itemPositions:[aa]}):null==L[O]?L[O]={count:1,data:x,items:[k],itemPositions:[aa]}:(L[O].count++,L[O].items.push(k),L[O].itemPositions.push(aa))}return L};T._calculatePercentile=function(I,P,L){if(0===I.length)return null;if(0>=P)return I[0];if(1<=P)return I[I.length-1];var G=(I.length-1)*P,Y=Math.floor(G);P=Y+1;G%=1;Y=I[Y];const aa=
I[P];return P>=I.length||L||"string"===typeof Y||"string"===typeof aa?Y:Y*(1-G)+aa*G};p._createClass(B,[{key:"size",get:function(){return this.items.length}}]);return B}()})},"esri/geometry/support/quantizationUtils":function(){define(["exports","./jsonUtils"],function(p,e){function w({scale:k,translate:x},O){return Math.round((O-x[0])/k[0])}function M({scale:k,translate:x},O){return Math.round((x[1]-O)/k[1])}function h(k,x,O){const R=[];let D,g,b,z;for(let J=0;J<O.length;J++){const W=O[J];if(0<J){if(b=
w(k,W[0]),z=M(k,W[1]),b!==D||z!==g)R.push(x(W,b-D,z-g)),D=b,g=z}else D=w(k,W[0]),g=M(k,W[1]),R.push(x(W,D,g))}return 0<R.length?R:null}function t(k,x,O,R){return h(k,O?R?aa:Y:R?Y:G,x)}function l(k,x,O,R){const D=[];O=O?R?aa:Y:R?Y:G;for(R=0;R<x.length;R++){const g=h(k,O,x[R]);g&&3<=g.length&&D.push(g)}return D.length?D:null}function E(k,x,O,R){const D=[];O=O?R?aa:Y:R?Y:G;for(R=0;R<x.length;R++){const g=h(k,O,x[R]);g&&2<=g.length&&D.push(g)}return D.length?D:null}function q({scale:k,translate:x},O){return O*
k[0]+x[0]}function u({scale:k,translate:x},O){return x[1]-O*k[1]}function H(k,x,O){const R=Array(O.length);if(!O.length)return R;const [D,g]=k.scale;let b=q(k,O[0][0]);k=u(k,O[0][1]);R[0]=x(O[0],b,k);for(let z=1;z<O.length;z++){const J=O[z];b+=J[0]*D;k-=J[1]*g;R[z]=x(J,b,k)}return R}function X(k,x,O){const R=Array(O.length);for(let D=0;D<O.length;D++)R[D]=H(k,x,O[D]);return R}function n(k,x,O,R){return H(k,O?R?aa:Y:R?Y:G,x)}function y(k,x,O,R){return X(k,O?R?aa:Y:R?Y:G,x)}function A(k,x,O,R){return X(k,
O?R?aa:Y:R?Y:G,x)}function f(k,x,O){let [R,D]=O[0],g=Math.min(R,x[0]),b=Math.min(D,x[1]),z=Math.max(R,x[2]);x=Math.max(D,x[3]);for(let J=1;J<O.length;J++){const [W,ba]=O[J];R+=W;D+=ba;0>W&&(g=Math.min(g,R));0<W&&(z=Math.max(z,R));0>ba?b=Math.min(b,D):0<ba&&(x=Math.max(x,D))}k[0]=g;k[1]=b;k[2]=z;k[3]=x;return k}function C(k,x){if(!x.length)return null;k[0]=k[1]=Number.POSITIVE_INFINITY;k[2]=k[3]=Number.NEGATIVE_INFINITY;for(let O=0;O<x.length;O++)f(k,k,x[O]);return k}function B(k,x,O,R,D){x.xmin=w(k,
O.xmin);x.ymin=M(k,O.ymin);x.xmax=w(k,O.xmax);x.ymax=M(k,O.ymax);x!==O&&(R&&(x.zmin=O.zmin,x.zmax=O.zmax),D&&(x.mmin=O.mmin,x.mmax=O.mmax));return x}function T(k,x,O,R,D){x.points=t(k,O.points,R,D);return x}function I(k,x,O,R,D){x.x=w(k,O.x);x.y=M(k,O.y);x!==O&&(R&&(x.z=O.z),D&&(x.m=O.m));return x}function P(k,x,O,R,D){k=l(k,O.rings,R,D);if(!k)return null;x.rings=k;return x}function L(k,x,O,R,D){k=E(k,O.paths,R,D);if(!k)return null;x.paths=k;return x}const G=(k,x,O)=>[x,O],Y=(k,x,O)=>[x,O,k[2]],aa=
(k,x,O)=>[x,O,k[2],k[3]];p.equals=function(k,x){if(k===x||null==k&&null==x)return!0;if(null==k||null==x)return!1;let O,R,D,g;k&&"upperLeft"===k.originPosition?(O=k.translate[0],R=k.translate[1],k=k.scale[0]):(O=k.extent.xmin,R=k.extent.ymax,k=k.tolerance);x&&"upperLeft"===x.originPosition?(D=x.translate[0],g=x.translate[1],x=x.scale[0]):(D=x.extent.xmin,g=x.extent.ymax,x=x.tolerance);return O===D&&R===g&&k===x};p.getQuantizedBoundsCoordsArray=f;p.getQuantizedBoundsCoordsArrayArray=C;p.getQuantizedBoundsPaths=
function(k){return C([0,0,0,0],k)};p.getQuantizedBoundsPoints=function(k){const x=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return f(x,x,k)};p.getQuantizedBoundsRings=function(k){return C([0,0,0,0],k)};p.quantizeBounds=function(k,x,O){x[0]=w(k,O[0]);x[3]=M(k,O[1]);x[2]=w(k,O[2]);x[1]=M(k,O[3]);return x};p.quantizeExtent=B;p.quantizeGeometry=function(k,x){return k&&x?e.isPoint(x)?I(k,{},x,!1,!1):e.isPolyline(x)?L(k,{},x,!1,!1):e.isPolygon(x)?
P(k,{},x,!1,!1):e.isMultipoint(x)?T(k,{},x,!1,!1):e.isExtent(x)?B(k,{},x,!1,!1):null:null};p.quantizeMultipoint=T;p.quantizePaths=E;p.quantizePoint=I;p.quantizePoints=t;p.quantizePolygon=P;p.quantizePolyline=L;p.quantizeRings=l;p.quantizeX=w;p.quantizeY=M;p.toQuantizationTransform=function(k){return k?{originPosition:"upper-left"===k.originPosition?"upperLeft":"lower-left"===k.originPosition?"lowerLeft":k.originPosition,scale:k.tolerance?[k.tolerance,k.tolerance]:[1,1],translate:k.extent?[k.extent.xmin,
k.extent.ymax]:[0,0]}:null};p.unquantizeBounds=function(k,x,O){return O?(x[0]=q(k,O[0]),x[1]=u(k,O[3]),x[2]=q(k,O[2]),x[3]=u(k,O[1]),x):[q(k,x[0]),u(k,x[3]),q(k,x[2]),u(k,x[1])]};p.unquantizeCoordsArray=H;p.unquantizeCoordsArrayArray=X;p.unquantizeExtent=function(k,x,O,R,D){x.xmin=q(k,O.xmin);x.ymin=u(k,O.ymin);x.xmax=q(k,O.xmax);x.ymax=u(k,O.ymax);x!==O&&(R&&(x.zmin=O.zmin,x.zmax=O.zmax),D&&(x.mmin=O.mmin,x.mmax=O.mmax));return x};p.unquantizeMultipoint=function(k,x,O,R,D){x.points=n(k,O.points,
R,D);return x};p.unquantizePaths=y;p.unquantizePoint=function(k,x,O,R,D){x.x=q(k,O.x);x.y=u(k,O.y);x!==O&&(R&&(x.z=O.z),D&&(x.m=O.m));return x};p.unquantizePoints=n;p.unquantizePolygon=function(k,x,O,R,D){x.rings=A(k,O.rings,R,D);return x};p.unquantizePolyline=function(k,x,O,R,D){x.paths=y(k,O.paths,R,D);return x};p.unquantizeRings=A;p.unquantizeX=q;p.unquantizeY=u;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/graphics/data/AttributesBuilder":function(){define(["../../../core/maybe",
"./attributeSupport","../../../smartMapping/statistics/support/utils"],function(p,e,w){return function(){function M(t,l,E){this._fieldDataCache=new Map;this._returnDistinctMap=new Map;this.returnDistinctValues=t.returnDistinctValues;this.fieldsIndex=E;this.featureAdapter=l;if((l=t.outFields)&&-1===l.indexOf("*")){this.outFields=l;t=0;for(const u of l){var q=e.getExpressionFromFieldName(u);q=(l=this.fieldsIndex.get(q))?null:e.getWhereClause(q,E);l=l?l.name:e.getAliasFromFieldName(u)||`FIELD_EXP_${t++}`;
this._fieldDataCache.set(u,{alias:l,clause:q})}}}var h=M.prototype;h.countDistinctValues=function(t){if(!this.returnDistinctValues)return t.length;t.forEach(l=>this.getAttributes(l));return this._returnDistinctMap.size};h.getAttributes=function(t){t=this._processAttributesForOutFields(t);return this._processAttributesForDistinctValues(t)};h.getFieldValue=function(t,l,E){const q=E?E.name:l;let u=null;this._fieldDataCache.has(q)?u=this._fieldDataCache.get(q).clause:E||(u=e.getWhereClause(l,this.fieldsIndex),
this._fieldDataCache.set(q,{alias:q,clause:u}));return E?this.featureAdapter.getAttribute(t,q):u.calculateValue(t,this.featureAdapter)};h.getNormalizedValue=function(t,l){const E=l.normalizationType,q=l.normalizationTotal;let u=this.getFieldValue(t,l.field,l.fieldInfo);E&&Number.isFinite(u)&&(t=this.getFieldValue(t,l.normalizationField,l.normalizationFieldInfo),u=w.getNormalizedValue(u,E,t,q));return u};h.getExpressionValue=function(t,l,E){t={attributes:this.featureAdapter.getAttributes(t)};t=E.createExecContext(t,
l.viewInfo);return E.executeFunction(l.compiledFunc,t)};h.validateItem=function(t,l){this._fieldDataCache.has(l)||this._fieldDataCache.set(l,{alias:l,clause:e.getWhereClause(l,this.fieldsIndex)});return this._fieldDataCache.get(l).clause.testFeature(t,this.featureAdapter)};h.validateItems=function(t,l){this._fieldDataCache.has(l)||this._fieldDataCache.set(l,{alias:l,clause:e.getWhereClause(l,this.fieldsIndex)});return this._fieldDataCache.get(l).clause.testSet(t,this.featureAdapter)};h._processAttributesForOutFields=
function(t){const l=this.outFields;if(!l||!l.length)return this.featureAdapter.getAttributes(t);const E={};for(const q of l){const {alias:u,clause:H}=this._fieldDataCache.get(q);E[u]=H?H.calculateValue(t,this.featureAdapter):this.featureAdapter.getAttribute(t,u)}return E};h._processAttributesForDistinctValues=function(t){if(p.isNone(t)||!this.returnDistinctValues)return t;var l=this.outFields,E=[];if(l)for(const u of l){var {alias:q}=this._fieldDataCache.get(u);E.push(t[q])}else for(q in t)E.push(t[q]);
l=`${(l||["*"]).join(",")}=${E.join(",")}`;E=this._returnDistinctMap.get(l)||0;this._returnDistinctMap.set(l,++E);return 1<E?null:t};return M}()})},"esri/smartMapping/statistics/support/utils":function(){define(["exports","../../../core/Error","../../../core/maybe","../../../layers/support/fieldUtils"],function(p,e,w,M){function h(q,u){return new e(q,u)}function t(q,u){q=w.isSome(q)?q:"";w.isSome(u)&&u&&(q=q?"("+q+") AND ("+u+")":u);return q}function l(q){const u=q.layer;return q.fields.filter(H=>
!u.getField(H))}function E(q){const u=q.layer;return q.fields.filter(H=>{H=u.getFieldUsageInfo(H);return!H||!H.supportsStatistics})}p.calculateStatistics=function(q){const {values:u,useSampleStdDev:H,supportsNullCount:X}=q;var n=Number.POSITIVE_INFINITY;let y=Number.NEGATIVE_INFINITY,A=null,f=null;var C=null;let B=null,T=0;const I=null==q.minValue?-Infinity:q.minValue;q=null==q.maxValue?Infinity:q.maxValue;for(const P of u)Number.isFinite(P)?P>=I&&P<=q&&(A+=P,n=Math.min(n,P),y=Math.max(y,P),T++):
"string"===typeof P&&T++;if(T&&null!=A){f=A/T;C=0;for(const P of u)Number.isFinite(P)&&P>=I&&P<=q&&(C+=(P-f)**2);B=H?1<T?C/(T-1):0:0<T?C/T:0;C=Math.sqrt(B)}else y=n=null;n={avg:f,count:T,max:y,min:n,stddev:C,sum:A,variance:B};X&&(n.nullcount=u.length-T);return n};p.calculateStringStatistics=function(q){const {values:u,supportsNullCount:H}=q;q=u.filter(n=>null!=n).length;const X={count:q};H&&(X.nullcount=u.length-q);return X};p.createError=h;p.getNormalizedValue=function(q,u,H,X){let n=null;switch(u){case "log":0!==
q&&(n=Math.log(q)*Math.LOG10E);break;case "percent-of-total":Number.isFinite(X)&&0!==X&&(n=q/X*100);break;case "field":Number.isFinite(H)&&0!==H&&(n=q/H);break;case "natural-log":0<q&&(n=Math.log(q));break;case "square-root":0<q&&(n=q**.5)}return n};p.getRangeExpr=function(q,u,H){u=null!=u?q+" \x3e\x3d "+u:"";q=null!=H?q+" \x3c\x3d "+H:"";H="";return(H=u&&q?t(u,q):u||q)?"("+H+")":""};p.getSQLFilterForNormalization=function(q){const u=q.field,H=q.normalizationType;q=q.normalizationField;let X;if("log"===
H)X="(NOT "+u+" \x3d 0)";else if("field"===H)X="(NOT "+q+" \x3d 0)";else if("natural-log"===H||"square-root"===H)X=`(${u} > 0)`;return X};p.isNullCountSupported=function(q){const u=null!=q.minValue||null!=q.maxValue,H=!!q.sqlExpression&&q.supportsSQLExpression;return!(null!=q.normalizationField||null!=q.normalizationType)&&!u&&!H};p.mergeWhereClauses=t;p.processStatsResult=function(q,u){if(!u)return q;["avg","stddev","variance"].forEach(H=>{null!=q[H]&&(q[H]=Math.ceil(q[H]))});return q};p.verifyBasicFieldValidity=
function(q,u,H){const X=l({layer:q,fields:u});if(X.length)return h(H,"Unknown fields: "+X.join(", ")+". You can only use fields defined in the layer schema");q=E({layer:q,fields:u});if(q.length)return h(H,"Unsupported fields: "+q.join(", ")+". You can only use fields that can be fetched i.e. AdapterFieldUsageInfo.supportsStatistics must be true")};p.verifyFieldType=function(q,u,H,X){let n=null;if(!u)n=h(H,"'field' is not defined in the layer schema");else if(u.name===q.objectIdField||-1===X.indexOf(u.type))n=
h(H,"'field' should be one of these types: "+X.join(","));return n};p.verifyNumericField=function(q,u,H){let X;u?u.name!==q.objectIdField&&M.isNumericField(u)||(X=h(H,"'field' should be one of these numeric types: "+M.numericTypes.join(","))):X=h(H,"'field' is not defined in the layer schema");return X};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/support/fieldUtils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../core/Error ../../core/maybe ../../core/object ./domains ../../support/arcadeOnDemand".split(" "),
function(p,e,w,M,h,t,l,E){function q(K,N,Z){if(K)for(const da of K)(K=(K=t.getDeepValue(da,N))&&"function"!==typeof K&&Z.get(K))&&t.setDeepValue(da,K.name,N)}function u(K,N){if(!K||!N)return[];ta.clear();H(ta,K,N);return Array.from(ta).sort()}function H(K,N,Z){var da;if(Z)if(null!=N&&null!=(da=N.fields)&&da.length)if(Z.includes("*"))for(const {name:ja}of N.fields)K.add(ja);else for(const ja of Z)X(K,N,ja);else if(Z.includes("*"))K.clear(),K.add("*");else for(const ja of Z)K.add(ja)}function X(K,N,
Z){"string"===typeof Z&&(N?(N=N.get(Z))&&K.add(N.name):K.add(Z))}function n(K,N,Z){return y.apply(this,arguments)}function y(){y=w._asyncToGenerator(function*(K,N,Z){if(Z){var {arcadeUtils:da}=yield E.loadArcade();Z=da.extractFieldNames(Z);for(const ja of Z)X(K,N,ja)}});return y.apply(this,arguments)}function A(K,N,Z){return f.apply(this,arguments)}function f(){f=w._asyncToGenerator(function*(K,N,Z){if(Z&&"1\x3d1"!==Z){Z=(yield new Promise(function(da,ja){p(["../../core/sql/WhereClause"],da,ja)})).WhereClause.create(Z,
N);if(!Z.isStandardized)throw new M("fieldUtils:collectFilterFields","Where clause is not standardized");H(K,N,Z.fieldNames)}});return f.apply(this,arguments)}function C(K,N){for(const Z of K)if(Z&&Z.valueType&&Z.valueType===N)return Z.name;return null}function B(){B=w._asyncToGenerator(function*(K){if(!K)return[];const N=new Set;yield T(N,K);return Array.from(N).sort()});return B.apply(this,arguments)}function T(K,N){return I.apply(this,arguments)}function I(){I=w._asyncToGenerator(function*(K,N){if(N){var Z=
t.getDeepValue("elevationInfo.featureExpressionInfo",N);if(Z)return Z.collectRequiredFields(K,N.fieldsIndex)}});return I.apply(this,arguments)}function P(K,N,Z){return L.apply(this,arguments)}function L(){L=w._asyncToGenerator(function*(K,N,Z){Z.outStatistic.onStatisticValueExpression?n(K,N,Z.outStatistic.onStatisticValueExpression):K.add(Z.outStatistic.onStatisticField)});return L.apply(this,arguments)}function G(){G=w._asyncToGenerator(function*(K,N,Z){N&&Z&&"cluster"===Z.type&&Z.fields&&(yield Promise.all(Z.fields.map(da=>
P(K,N.fieldsIndex,da))))});return G.apply(this,arguments)}function Y(){Y=w._asyncToGenerator(function*(K,N,Z){N&&(N.timeInfo&&h.isSome(Z)&&Z.timeExtent&&H(K,N.fieldsIndex,[N.timeInfo.startField,N.timeInfo.endField]),N.floorInfo&&H(K,N.fieldsIndex,[N.floorInfo.floorField]),h.isSome(Z)&&h.isSome(Z.where)&&(yield A(K,N.fieldsIndex,Z.where)))});return Y.apply(this,arguments)}function aa(){aa=w._asyncToGenerator(function*(K){if(!K)return[];const N="timeInfo"in K&&K.timeInfo;return N?u(K.fieldsIndex,[K.trackIdField,
N.startField,N.endField]):[]});return aa.apply(this,arguments)}function k(){k=w._asyncToGenerator(function*(K){if(!K)return[];const N=new Set;yield x(N,K);return Array.from(N).sort()});return k.apply(this,arguments)}function x(K,N){return O.apply(this,arguments)}function O(){O=w._asyncToGenerator(function*(K,N){const {labelingInfo:Z,fieldsIndex:da}=N;Z&&Z.length&&(yield Promise.all(Z.map(ja=>R(K,da,ja))))});return O.apply(this,arguments)}function R(K,N,Z){return D.apply(this,arguments)}function D(){D=
w._asyncToGenerator(function*(K,N,Z){if(Z){var da=Z.getLabelExpression();Z=Z.where;"arcade"===da.type?yield n(K,N,da.expression):(da=da.expression.match(/{[^}]*}/g))&&da.forEach(ja=>{X(K,N,ja.slice(1,-1))});yield A(K,N,Z)}});return D.apply(this,arguments)}function g(K){return"number"===typeof K&&!isNaN(K)&&isFinite(K)}function b(K){return null===K||g(K)}function z(K){return null===K||va(K)}function J(K){return null!=K&&"string"===typeof K}function W(K){return null===K||J(K)}function ba(){return!0}
function ia(K,N){let Z;switch(K.type){case "date":case "integer":case "long":case "small-integer":case "esriFieldTypeDate":case "esriFieldTypeInteger":case "esriFieldTypeLong":case "esriFieldTypeSmallInteger":Z=K.nullable?z:va;break;case "double":case "single":case "esriFieldTypeSingle":case "esriFieldTypeDouble":Z=K.nullable?b:g;break;case "string":case "esriFieldTypeString":Z=K.nullable?W:J;break;default:Z=ba}return 1===arguments.length?Z:Z(N)}function ma(K){return null!=K&&r.has(K.type)}function qa(K,
N){return K.nullable&&null===N?null:ma(K)&&!wa(K.type,Number(N))?e.NumericRangeValidationError.OUT_OF_RANGE:ia(K,N)?K.domain?l.validateDomainValue(K.domain,N):null:e.TypeValidationError.INVALID_TYPE}function wa(K,N){return(K="string"===typeof K?Ca(K):K)?K.isInteger?va(N)&&N>=K.min&&N<=K.max:N>=K.min&&N<=K.max:!1}function Ca(K){switch(K){case "esriFieldTypeSmallInteger":case "small-integer":return m;case "esriFieldTypeInteger":case "integer":return F;case "esriFieldTypeSingle":case "single":return U;
case "esriFieldTypeDouble":case "double":return V}}function Ka(K,N,Z){if(!N||!N.attributes||!K){if(h.isSome(Z))for(var da of K)Z.add(da);return!0}N=N.attributes;da=!1;for(const ja of K)if(!(ja in N))if(da=!0,h.isSome(Z))Z.add(ja);else break;return da}function Ha(){Ha=w._asyncToGenerator(function*(K,N){const Z=new Set;for(const da of N)yield n(Z,K.fieldsIndex,da);return Array.from(Z).sort()});return Ha.apply(this,arguments)}const Oa="field field2 field3 normalizationField rotationInfo.field proportionalSymbolInfo.field proportionalSymbolInfo.normalizationField colorInfo.field colorInfo.normalizationField".split(" "),
na=["field","normalizationField"],ta=new Set,va=(()=>"isInteger"in Number?Number.isInteger:K=>"number"===typeof K&&isFinite(K)&&Math.floor(K)===K)(),c=["integer","small-integer","single","double"],r=new Set([...c,"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);e.NumericRangeValidationError=void 0;(e.NumericRangeValidationError||(e.NumericRangeValidationError={})).OUT_OF_RANGE="numeric-range-validation-error::out-of-range";e.TypeValidationError=void 0;
(e.TypeValidationError||(e.TypeValidationError={})).INVALID_TYPE="type-validation-error::invalid-type";const m={min:-32768,max:32767,isInteger:!0},F={min:-2147483648,max:2147483647,isInteger:!0},U={min:-3.4E38,max:1.2E38,isInteger:!1},V={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};e.collectArcadeFieldNames=n;e.collectElevationFields=T;e.collectFeatureReductionFields=function(K,N,Z){return G.apply(this,arguments)};e.collectField=X;e.collectFields=H;e.collectFilterFields=function(K,N,Z){return Y.apply(this,
arguments)};e.collectLabelingFields=x;e.doubleRange=V;e.featureHasFields=function(K,N){return!Ka(K,N,null)};e.fixFields=u;e.fixRendererFields=function(K,N){if(null!=K&&null!=N)for(const Z of Array.isArray(K)?K:[K])if(q(Oa,Z,N),"visualVariables"in Z&&Z.visualVariables)for(const da of Z.visualVariables)q(na,da,N)};e.fixTimeInfoFields=function(K,N){if(null!=K&&null!=N&&N.fields.length)if("startField"in K){var Z=N.get(K.startField);N=N.get(K.endField);K.startField=Z&&Z.name||null;K.endField=N&&N.name||
null}else Z=N.get(K.startTimeField),N=N.get(K.endTimeField),K.startTimeField=Z&&Z.name||null,K.endTimeField=N&&N.name||null};e.getDisplayFieldName=function({displayField:K,fields:N}){if(K)return K;if(!N||!N.length)return null;if(!(K=C(N,"name-or-title")||C(N,"unique-identifier")||C(N,"type-or-category")))a:{for(const Z of N)if(Z&&Z.name&&(N=Z.name.toLowerCase(),-1<N.indexOf("name")||-1<N.indexOf("title"))){K=Z.name;break a}K=null}return K};e.getElevationFields=function(K){return B.apply(this,arguments)};
e.getExpressionFields=function(K,N){return Ha.apply(this,arguments)};e.getFeatureEditFields=function(K){if(!K)return[];const N="editFieldsInfo"in K&&K.editFieldsInfo;return N?u(K.fieldsIndex,[N&&N.creatorField,N&&N.creationDateField,N&&N.editorField,N&&N.editDateField]):[]};e.getFeatureGeometryFields=function(K){if(!K)return[];const N=K.geometryFieldsInfo;return N?u(K.fieldsIndex,[N.shapeAreaField,N.shapeLengthField]):[]};e.getFieldDefaultValue=function(K){const N=K.defaultValue;if(void 0!==N&&ia(K,
N))return N;if(K.nullable)return null};e.getFieldRange=function(K){const N=l.getDomainRange(K.domain);if(N)return N;if(ma(K))return Ca(K.type)};e.getLabelingFields=function(K){return k.apply(this,arguments)};e.getNumericTypeForValue=function(K){if(!g(K))return null;if(va(K)){if(K>=m.min&&K<=m.max)return"esriFieldTypeSmallInteger";if(K>=F.min&&K<=F.max)return"esriFieldTypeInteger"}return K>=U.min&&K<=U.max?"esriFieldTypeSingle":"esriFieldTypeDouble"};e.getTimeFields=function(K){return aa.apply(this,
arguments)};e.integerRange=F;e.isDateField=function(K){return null!=K&&("date"===K.type||"esriFieldTypeDate"===K.type)};e.isNumberInRange=wa;e.isNumericField=ma;e.isStringField=function(K){return null!=K&&("string"===K.type||"esriFieldTypeString"===K.type)};e.isValidFieldValue=function(K,N){return null===qa(K,N)};e.isValueMatchingFieldType=ia;e.numericTypes=c;e.packFields=function(K,N,Z=1){if(!N||!K)return[];if(N.includes("*"))return["*"];N=u(K,N);return N.length/K.fields.length>=Z?["*"]:N};e.populateMissingFields=
Ka;e.rendererFields=Oa;e.sanitizeNullFieldValue=function(K){return null==K||"number"===typeof K&&isNaN(K)?null:K};e.singleRange=U;e.smallIntegerRange=m;e.unpackFieldNames=function(K,N){return h.isNone(N)||h.isNone(K)?[]:N.includes("*")?K.fields.map(Z=>Z.name):N};e.validateFieldValue=qa;e.validationErrorToString=function(K,N,Z){switch(K){case l.DomainValidationError.INVALID_CODED_VALUE:return`Value ${Z} is not in the coded domain - field: ${N.name}, domain: ${JSON.stringify(N.domain)}`;case l.DomainValidationError.VALUE_OUT_OF_RANGE:return`Value ${Z} is out of the range of valid values - field: ${N.name}, domain: ${JSON.stringify(N.domain)}`;
case e.TypeValidationError.INVALID_TYPE:return`Value ${Z} is not a valid value for the field type - field: ${N.name}, type: ${N.type}, nullable: ${N.nullable}`;case e.NumericRangeValidationError.OUT_OF_RANGE:{const {min:da,max:ja}=Ca(N.type);return`Value ${Z} is out of range for the number type - field: ${N.name}, type: ${N.type}, value range is ${da} to ${ja}`}}};e.visualVariableFields=na;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/layers/support/domains":function(){define("exports ../../core/has ./CodedValueDomain ./Domain ./InheritedDomain ./RangeDomain".split(" "),
function(p,e,w,M,h,t){function l(E,q){switch(E.type){case "range":{const u="range"in E?E.range[1]:E.maxValue;if(+q<("range"in E?E.range[0]:E.minValue)||+q>u)return p.DomainValidationError.VALUE_OUT_OF_RANGE;break}case "coded-value":case "codedValue":if(null==E.codedValues||E.codedValues.every(u=>null==u||u.code!==q))return p.DomainValidationError.INVALID_CODED_VALUE}return null}p.DomainValidationError=void 0;(function(E){E.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range";E.INVALID_CODED_VALUE=
"domain-validation-error::invalid-coded-value"})(p.DomainValidationError||(p.DomainValidationError={}));e={key:"type",base:M,typeMap:{range:t,"coded-value":w,inherited:h}};p.CodedValueDomain=w;p.DomainBase=M;p.InheritedDomain=h;p.RangeDomain=t;p.fromJSON=function(E){if(!E||!E.type)return null;switch(E.type){case "range":return t.fromJSON(E);case "codedValue":return w.fromJSON(E);case "inherited":return h.fromJSON(E)}return null};p.getDomainRange=function(E){if(E&&"range"===E.type)return{min:"range"in
E?E.range[0]:E.minValue,max:"range"in E?E.range[1]:E.maxValue}};p.isValidDomainValue=function(E,q){return null===l(E,q)};p.types=e;p.validateDomainValue=l;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/support/CodedValueDomain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./CodedValue ./Domain".split(" "),
function(p,e,w,M,h,t,l,E,q,u,H){var X;h=X=function(n){function y(f){f=n.call(this,f)||this;f.codedValues=null;f.type="coded-value";return f}p._inheritsLoose(y,n);var A=y.prototype;A.getName=function(f){let C=null;if(this.codedValues){const B=String(f);this.codedValues.some(T=>{String(T.code)===B&&(C=T.name);return!!C})}return C};A.clone=function(){return new X({codedValues:w.clone(this.codedValues),name:this.name})};return y}(H);e.__decorate([M.property({type:[u["default"]],json:{write:!0}})],h.prototype,
"codedValues",void 0);e.__decorate([E.enumeration({codedValue:"coded-value"})],h.prototype,"type",void 0);return h=X=e.__decorate([q.subclass("esri.layers.support.CodedValueDomain")],h)})},"esri/core/accessorSupport/decorators/enumeration":function(){define(["exports","../../jsonMap","./property"],function(p,e,w){p.enumeration=function(M,h={}){var t;M=M instanceof e.JSONMap?M:new e.JSONMap(M,h);M={type:(null!=(t=null==h?void 0:h.ignoreUnknown)?t:1)?M.apiValues:String,readOnly:null==h?void 0:h.readOnly,
json:{type:M.jsonValues,read:null!=h&&h.readOnly?!1:{reader:M.read},write:{writer:M.write}}};void 0!==(null==h?void 0:h.default)&&(M.json.default=h.default);void 0!==(null==h?void 0:h.name)&&(M.json.name=h.name);return w.property(M)};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/support/CodedValue":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass".split(" "),
function(p,e,w,M,h,t,l,E,q,u){var H;p.CodedValue=H=function(X){function n(y){y=X.call(this,y)||this;y.name=null;y.code=null;return y}e._inheritsLoose(n,X);n.prototype.clone=function(){return new H({name:this.name,code:this.code})};return n}(M.JSONSupport);w.__decorate([h.property({type:String,json:{write:!0}})],p.CodedValue.prototype,"name",void 0);w.__decorate([h.property({type:[String,Number],json:{write:!0}})],p.CodedValue.prototype,"code",void 0);p.CodedValue=H=w.__decorate([u.subclass("esri.layers.support.CodedValue")],
p.CodedValue);p.default=p.CodedValue;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/support/Domain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass".split(" "),function(p,e,w,M,h,t,l,E,q,u){w=new w.JSONMap({inherited:"inherited",
codedValue:"coded-value",range:"range"});M=function(H){function X(n){n=H.call(this,n)||this;n.name=null;n.type=null;return n}p._inheritsLoose(X,H);return X}(M.JSONSupport);e.__decorate([h.property({type:String,json:{write:!0}})],M.prototype,"name",void 0);e.__decorate([q.enumeration(w)],M.prototype,"type",void 0);return M=e.__decorate([u.subclass("esri.layers.support.Domain")],M)})},"esri/layers/support/InheritedDomain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./Domain".split(" "),
function(p,e,w,M,h,t,l,E,q){var u;w=u=function(H){function X(n){n=H.call(this,n)||this;n.type="inherited";return n}p._inheritsLoose(X,H);X.prototype.clone=function(){return new u};return X}(q);e.__decorate([l.enumeration({inherited:"inherited"})],w.prototype,"type",void 0);return w=u=e.__decorate([E.subclass("esri.layers.support.InheritedDomain")],w)})},"esri/layers/support/RangeDomain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./Domain".split(" "),
function(p,e,w,M,h,t,l,E,q){var u;M=u=function(H){function X(n){n=H.call(this,n)||this;n.maxValue=null;n.minValue=null;n.type="range";return n}p._inheritsLoose(X,H);X.prototype.clone=function(){return new u({maxValue:this.maxValue,minValue:this.minValue,name:this.name})};return X}(q);e.__decorate([w.property({type:Number,json:{type:[Number],read:{source:"range",reader(H,X){return X.range&&X.range[1]}},write:{enabled:!1,overridePolicy(){return{enabled:null!=this.maxValue&&null==this.minValue}},target:"range",
writer(H,X,n){X[n]=[this.minValue||0,H]}}}})],M.prototype,"maxValue",void 0);e.__decorate([w.property({type:Number,json:{type:[Number],read:{source:"range",reader(H,X){return X.range&&X.range[0]}},write:{target:"range",writer(H,X,n){X[n]=[H,this.maxValue||0]}}}})],M.prototype,"minValue",void 0);e.__decorate([l.enumeration({range:"range"})],M.prototype,"type",void 0);return M=u=e.__decorate([E.subclass("esri.layers.support.RangeDomain")],M)})},"esri/support/arcadeOnDemand":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../geometry ../core/maybe ../geometry/SpatialReference".split(" "),
function(p,e,w,M,h,t){function l(){return E.apply(this,arguments)}function E(){E=w._asyncToGenerator(function*(){q||(q=w._asyncToGenerator(function*(){const H=yield new Promise(function(X,n){p(["./arcadeUtils"],X,n)});yield H.arcade.load();return{arcade:H.arcade,arcadeUtils:H,Dictionary:H.Dictionary,Feature:H.arcadeFeature}})());return q});return E.apply(this,arguments)}let q;M=(H,X,n)=>u.create(H,X,n,null,["$feature","$view"]);let u=function(){function H(n,y,A,f,C,B,T,I){this.script=n;this.evaluate=
C;this.fields=Array.isArray(T)?T:T.fields;this._syntaxTree=f;this._arcade=y;this._arcadeDictionary=A;this._arcadeFeature=B;this._spatialReference=I;this._referencesGeometry=y.scriptTouchesGeometry(this._syntaxTree);this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}H.create=function(){var n=w._asyncToGenerator(function*(y,A,f,C,B,T){const {arcade:I,Feature:P,Dictionary:L}=yield l(),G=t.fromJSON(A);A=I.parseScript(y,T);B=B.reduce((O,R)=>({...O,[R]:null}),{});let Y=null;h.isSome(C)&&
(Y=new L(C),Y.immutable=!0,B.$config=null);C=I.scriptUsesGeometryEngine(A)&&I.enableGeometrySupport();T=I.scriptUsesFeatureSet(A)&&I.enableFeatureSetSupport();const aa=I.scriptIsAsync(A)&&I.enableAsyncSupport();B={vars:B,spatialReference:G,useAsync:!!aa};const k=new L;k.immutable=!1;k.setField("scale",0);const x=I.compileScript(A,B);yield Promise.all([C,T,aa]);return new H(y,I,L,A,O=>{"$view"in O&&O.$view&&(k.setField("scale",O.$view.scale),O.$view=k);Y&&(O.$config=Y);return x({vars:O,spatialReference:G})},
new P,f,G)});return function(y,A,f,C,B,T){return n.apply(this,arguments)}}();var X=H.prototype;X.repurposeFeature=function(n){n.geometry&&!n.geometry.spatialReference&&(n.geometry.spatialReference=this._spatialReference);this._arcadeFeature.repurposeFromGraphicLikeObject(n.geometry,n.attributes,{fields:this.fields});return this._arcadeFeature};X.repurposeAdapter=function(n){this._arcadeFeature.repurposeFromAdapter(n,{fields:this.fields});return this._arcadeFeature};X.createDictionary=function(){return new this._arcadeDictionary};
X.referencesMember=function(n){return this._arcade.referencesMember(this._syntaxTree,n)};X.referencesFunction=function(n){return this._arcade.referencesFunction(this._syntaxTree,n)};X.referencesGeometry=function(){return this._referencesGeometry};X.referencesScale=function(){return this._referencesScale};X.extractFieldLiterals=function(n){return this._arcade.extractFieldLiterals(this._syntaxTree,n)};return H}();e.ArcadeExpression=u;e.createDictionaryExpression=(H,X,n,y)=>u.create(H,X,n,y,["$feature",
"$view"]);e.createLabelExpression=(H,X,n)=>u.create(H,X,n,null,["$feature"]);e.createRendererExpression=M;e.createVVExpression=M;e.default=u;e.loadArcade=l;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/layers/graphics/data/timeSupport":function(){define(["exports"],function(p){function e(h,t,l,E,q){if(null!=E&&null!=q)return u=>{const H=h.getAttribute(u,t);u=h.getAttribute(u,l);return(null==H||H<=q)&&(null==u||u>=E)};if(null!=E)return u=>{u=h.getAttribute(u,l);return null==u||u>=E};if(null!=
q)return u=>{u=h.getAttribute(u,t);return null==u||u<=q}}function w(h,t,l,E){if(null!=l&&null!=E&&l===E)return q=>h.getAttribute(q,t)===l;if(null!=l&&null!=E)return q=>{q=h.getAttribute(q,t);return q>=l&&q<=E};if(null!=l)return q=>h.getAttribute(q,t)>=l;if(null!=E)return q=>h.getAttribute(q,t)<=E}function M(){return()=>!1}p.getTimeExtent=function(h,t){if(!h)return null;const l=t.featureAdapter,{startTimeField:E,endTimeField:q}=h;let u=Number.POSITIVE_INFINITY,H=Number.NEGATIVE_INFINITY;if(E&&q)t.forEach(X=>
{const n=l.getAttribute(X,E);X=l.getAttribute(X,q);null==n||isNaN(n)||(u=Math.min(u,n));null==X||isNaN(X)||(H=Math.max(H,X))});else{const X=E||q;t.forEach(n=>{n=l.getAttribute(n,X);null==n||isNaN(n)||(u=Math.min(u,n),H=Math.max(H,n))})}return{start:u,end:H}};p.getTimeOperator=function(h,t,l){if(!t||!h)return null;const {startTimeField:E,endTimeField:q}=h;if(!E&&!q)return null;const {start:u,end:H}=t;return null===u&&null===H?null:void 0===u&&void 0===H?M():E&&q?e(l,E,q,u,H):w(l,E||q,u,H)};Object.defineProperty(p,
"__esModule",{value:!0})})},"esri/layers/graphics/data/utils":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/jsonMap ../../../core/maybe ../../../core/unitUtils ../../../geometry/support/extentUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ../centroid ../featureConversionUtils ../OptimizedGeometry ./projectionSupport".split(" "),function(p,e,w,M,h,t,l,E,q,u,H,X,n,y){function A(g,
b,z,J=g.hasZ,W=g.hasM){const ba=g.hasZ&&J,ia=g.hasM&&W;return z?(g=X.quantizeOptimizedGeometry(O,b,g.hasZ,g.hasM,"esriGeometryPoint",z,J,W),X.convertToPoint(g,ba,ia)):X.convertToPoint(b,ba,ia)}function f(){f=w._asyncToGenerator(function*(g,b,z){const {outFields:J,orderByFields:W,groupByFieldsForStatistics:ba,outStatistics:ia}=g;if(J)for(var ma=0;ma<J.length;ma++)J[ma]=J[ma].trim();if(W)for(ma=0;ma<W.length;ma++)W[ma]=W[ma].trim();if(ba)for(ma=0;ma<ba.length;ma++)ba[ma]=ba[ma].trim();if(ia)for(ma=
0;ma<ia.length;ma++)ia[ma].onStatisticField&&(ia[ma].onStatisticField=ia[ma].onStatisticField.trim());g.geometry&&!g.outSR&&(g.outSR=g.geometry.spatialReference);return B(g,b,z)});return f.apply(this,arguments)}function C(){C=w._asyncToGenerator(function*(g,b,z){return B(g,b,z)});return C.apply(this,arguments)}function B(g,b,z){return T.apply(this,arguments)}function T(){T=w._asyncToGenerator(function*(g,b,z){if(!g)return null;var {where:J}=g;g.where=J=J&&J.trim();if(!J||/^1 *= *1$/.test(J)||b&&b===
J)g.where=null;if(!g.geometry)return g;b=yield I(g);g.distance=0;g.units=null;"esriSpatialRelEnvelopeIntersects"===g.spatialRel&&({spatialReference:J}=g.geometry,b=l.getGeometryExtent(b),b.spatialReference=J);g.geometry=b;yield y.checkProjectionSupport(b.spatialReference,z);b=(yield q.normalizeCentralMeridian(E.fromJSON(b)))[0];if(h.isNone(b))throw aa;b=b.toJSON();b=yield y.project(b,b.spatialReference,z);if(!b)throw aa;b.spatialReference=z;g.geometry=b;return g});return T.apply(this,arguments)}function I(g){return P.apply(this,
arguments)}function P(){P=w._asyncToGenerator(function*(g){const {geometry:b,distance:z,units:J}=g;if(null==z||"vertexAttributes"in b)return b;var W=b.spatialReference;g=J?Y.fromJSON(J):t.getUnitString(W);W=W&&(u.isGeographic(W)||u.isWebMercator(W))?b:yield y.checkProjectionSupport(W,u.WGS84).then(()=>y.project(b,u.WGS84));return(yield L())(W.spatialReference,W,z,g)});return P.apply(this,arguments)}function L(){return G.apply(this,arguments)}function G(){G=w._asyncToGenerator(function*(){return(yield new Promise(function(g,
b){p(["../../../geometry/geometryEngineJSON"],g,b)})).geodesicBuffer});return G.apply(this,arguments)}const Y=new M.JSONMap({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),aa=Object.freeze({}),k=new n,x=new n,O=new n,R={esriGeometryPoint:X.convertToPoint,esriGeometryPolyline:X.convertToPolyline,esriGeometryPolygon:X.convertToPolygon,esriGeometryMultipoint:X.convertToMultipoint},
D=(g,b)=>"_geVersion"!==g?b:void 0;e.QUERY_ENGINE_EMPTY_RESULT=aa;e.cleanFromGeometryEngine=function(g){return g&&"_geVersion"in g?JSON.parse(JSON.stringify(g,D)):g};e.getCentroid=function(g,b,z){if("esriGeometryPolygon"!==g.geometryType||!b||!b.centroid&&!b.geometry)return null;b.centroid||(b.centroid=H.getCentroidOptimizedGeometry(new n,b.geometry,g.hasZ,g.hasM));return A(g,b.centroid,z)};e.getGeometry=function(g,b,z,J,W,ba,ia=b,ma=z){const qa=b&&ia,wa=z&&ma;J=J?"coords"in J?J:J.geometry:null;if(!J)return null;
if(W)return b=X.generalizeOptimizedGeometry(x,J,b,z,g,W,ia,ma),ba&&(b=X.quantizeOptimizedGeometry(O,b,qa,wa,g,ba)),R[g](b,qa,wa);if(ba)return ba=X.quantizeOptimizedGeometry(O,J,b,z,g,ba,ia,ma),R[g](ba,qa,wa);X.removeZMValues(k,J,b,z,ia,ma);return R[g](k,qa,wa)};e.normalizeFilter=function(g,b,z){return C.apply(this,arguments)};e.normalizeQuery=function(g,b,z){return f.apply(this,arguments)};e.normalizeQueryLike=B;e.transformCentroid=A;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/layers/graphics/data/spatialQuerySupport":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../geometry/support/contains ../../../geometry/support/intersects ../../../geometry/support/jsonUtils ../../../geometry/support/spatialReferenceUtils ../contains ../featureConversionUtils ../OptimizedGeometry ./projectionSupport ./utils".split(" "),
function(p,e,w,M,h,t,l,E,q,u,H,X,n){function y(){return new Promise(function(B,T){p(["../../../geometry/geometryEngineJSON"],B,T)})}function A(){A=w._asyncToGenerator(function*(B,T,I){const {spatialRel:P,geometry:L}=B;if(L){if(!0!==C.spatialRelationship[P])throw new M("feature-store:unsupported-query","Unsupported query spatial relationship",{query:B});if(E.isValid(L.spatialReference)&&E.isValid(I)){if(!0!==C.queryGeometry[l.getJsonType(L)])throw new M("feature-store:unsupported-query","Unsupported query geometry type",
{query:B});if(!0!==C.layerGeometry[T])throw new M("feature-store:unsupported-query","Unsupported layer geometry type",{query:B});if(B.outSR)return X.checkProjectionSupport(B.geometry&&B.geometry.spatialReference,B.outSR)}}});return A.apply(this,arguments)}const f={esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"intersects",esriSpatialRelIndexIntersects:null,esriSpatialRelOverlaps:"overlaps",
esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:null},C={spatialRelationship:{esriSpatialRelIntersects:!0,esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},queryGeometry:{esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!0},
layerGeometry:{esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!1}};e.canQueryWithRBush=function(B){if(l.isExtent(B))return!0;if(l.isPolygon(B)){for(const T of B.rings)if(5!==T.length||T[0][0]!==T[1][0]||T[0][0]!==T[4][0]||T[2][0]!==T[3][0]||T[0][1]!==T[3][1]||T[0][1]!==T[4][1]||T[1][1]!==T[2][1])return!1;return!0}return!1};e.checkSpatialQuerySupport=function(B,T,I){return A.apply(this,arguments)};e.getSpatialQueryOperator=function(B,
T,I,P,L){if(l.isPolygon(T)&&"esriGeometryPoint"===I&&("esriSpatialRelIntersects"===B||"esriSpatialRelContains"===B)){const G=u.convertFromPolygon(new H,T,!1,!1);return Promise.resolve(Y=>q.polygonContainsPoint(G,!1,!1,Y))}if(l.isPolygon(T)&&"esriGeometryMultipoint"===I){const G=u.convertFromPolygon(new H,T,!1,!1);if("esriSpatialRelContains"===B)return Promise.resolve(Y=>q.polygonContainsMultipoint(G,!1,!1,Y,P,L))}if(l.isExtent(T)&&"esriGeometryPoint"===I&&("esriSpatialRelIntersects"===B||"esriSpatialRelContains"===
B))return Promise.resolve(G=>h.extentContainsPoint(T,n.getGeometry(I,P,L,G)));if(l.isExtent(T)&&"esriGeometryMultipoint"===I&&"esriSpatialRelContains"===B)return Promise.resolve(G=>h.extentContainsMultipoint(T,n.getGeometry(I,P,L,G)));if(l.isExtent(T)&&"esriSpatialRelIntersects"===B){const G=t.getExtentIntersector(I);return Promise.resolve(Y=>G(T,n.getGeometry(I,P,L,Y)))}return y().then(G=>{const Y=G[f[B]].bind(null,T.spatialReference,T);return aa=>Y(n.getGeometry(I,P,L,aa))})};Object.defineProperty(e,
"__esModule",{value:!0})})},"esri/geometry/support/intersects":function(){define(["exports","./intersectsBase"],function(p,e){p.extentIntersectsExtent=e.extentIntersectsExtent;p.extentIntersectsMultipoint=e.extentIntersectsMultipoint;p.extentIntersectsPoint=e.extentIntersectsPoint;p.extentIntersectsPolygon=e.extentIntersectsPolygon;p.extentIntersectsPolyline=e.extentIntersectsPolyline;p.getFeatureExtentIntersector=e.getFeatureExtentIntersector;p.isSelfIntersecting=e.isSelfIntersecting;p.segmentIntersects=
e.segmentIntersects;p.getExtentIntersector=function(w){return"mesh"===w?e.extentIntersectsExtent:e.getFeatureExtentIntersector(w)};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/graphics/contains":function(){define(["exports"],function(p){function e(w,M,h,t,l){if(!w)return!1;M=M?h?4:3:h?3:2;const {coords:E,lengths:q}=w;h=!1;w=0;for(const H of q){var u=w;for(let X=w,n=w+H*M;X<n;X+=M){u=X+M;u===n&&(u=w);const y=E[X],A=E[X+1],f=E[u];u=E[u+1];(A<l&&u>=l||u<l&&A>=l)&&y+(l-A)/(u-A)*(f-
y)<t&&(h=!h)}w+=H*M}return h}p.polygonContainsCoords=e;p.polygonContainsMultipoint=function(w,M,h,t,l,E){l=l?E?4:3:E?3:2;const {coords:q,lengths:u}=t;if(!u)return!1;for(let H=0,X=0;H<u.length;H++,X+=l)if(!e(w,M,h,q[X],q[X+1]))return!1;return!0};p.polygonContainsPoint=function(w,M,h,t){return e(w,M,h,t.coords[0],t.coords[1])};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/support/FieldsIndex":function(){define(function(){return function(){function p(w){this.fields=w;this._fieldsMap=
new Map;this._dateFieldsSet=new Set;this.dateFields=[];if(w){var M=[];for(const h of w)if(w=h&&h.name){const t=w.toLowerCase().trim();this._fieldsMap.set(w,h);this._fieldsMap.set(t,h);M.push(t);if("date"===h.type||"esriFieldTypeDate"===h.type)this.dateFields.push(h),this._dateFieldsSet.add(h)}M.sort();this.uid=M.join(",")}}var e=p.prototype;e.destroy=function(){this._fieldsMap.clear()};e.has=function(w){return null!=this.get(w)};e.get=function(w){return null!=w?this._fieldsMap.get(w)||this._fieldsMap.get(w.toLowerCase().trim()):
void 0};e.isDateField=function(w){return this._dateFieldsSet.has(this.get(w))};e.normalizeFieldName=function(w){if(w=this.get(w))return w.name};return p}()})},"esri/layers/support/PromiseQueue":function(){define(["../../chunks/_rollupPluginBabelHelpers","../../core/promiseUtils"],function(p,e){let w=function(M,h,t,l,E){this.resolve=M;this.reject=h;this.callback=t;this.signal=l;this.abortCallback=E};return function(){function M(){this._tasks=[]}var h=M.prototype;h.push=function(t,l,E){return new Promise((q,
u)=>this._tasks.push(new w(q,u,t,l,E)))};h.unshift=function(t,l,E){return new Promise((q,u)=>this._tasks.unshift(new w(q,u,t,l,E)))};h.process=function(){if(0===this._tasks.length)return!1;const t=this._tasks.shift();try{const l=e.isAborted(t.signal);if(l&&!t.abortCallback)t.reject(e.createAbortError());else{const E=l?t.abortCallback(e.createAbortError()):t.callback();e.isPromise(E)?E.then(t.resolve,t.reject):t.resolve(E)}}catch(l){t.reject(l)}return!0};h.cancelAll=function(){const t=e.createAbortError();
for(const l of this._tasks)if(l.abortCallback){const E=l.abortCallback(t);l.resolve(E)}else l.reject(t);this._tasks.length=0};p._createClass(M,[{key:"length",get:function(){return this._tasks.length}}]);return M}()})},"esri/smartMapping/support/utils":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../support/arcadeOnDemand","../../support/basemapUtils"],function(p,e,w,M){function h(){h=e._asyncToGenerator(function*(n){const y=n.field,A=n.normalizationField;n=n.valueExpression;
var f=[];n&&(X||({arcadeUtils:f}=yield w.loadArcade(),X=f),f=X.extractFieldNames(n));y&&f.push(y);A&&f.push(A);return f});return h.apply(this,arguments)}function t(n){return String(n).padStart(2,"0")}function l(n,y,A){if("date"===y||"number"===y){"number"===y&&(n=new Date(n));y=A?n.getFullYear():n.getUTCFullYear();const f=t((A?n.getMonth():n.getUTCMonth())+1),C=t(A?n.getDate():n.getUTCDate()),B=t(A?n.getHours():n.getUTCHours()),T=t(A?n.getMinutes():n.getUTCMinutes());n=t(A?n.getSeconds():n.getUTCSeconds());
n=`TIMESTAMP'${y}-${f}-${C} ${B}:${T}:${n}'`}return n}function E(n,y){if(y instanceof Date)return"date";if("number"===typeof y)return"number";if("string"===typeof y&&(n=n.getField(y),"\x3cnow\x3e"!==y.toLowerCase()&&n&&"date"===n.type))return"field"}const q={light:"streets gray topo terrain national-geographic oceans osm gray-vector streets-vector topo-vector streets-relief-vector streets-navigation-vector".split(" "),dark:["satellite","hybrid","dark-gray","dark-gray-vector","streets-night-vector"]},
u={years:365,months:30,days:1,hours:1/24,minutes:1/1440,seconds:1/86400,milliseconds:1/864E5},H=["integer","small-integer"];let X=null;p.castIntegerFieldToFloat=function(n){return`cast(${n} as float)`};p.defaultBasemapGroups=q;p.getBasemapGroup=function(n,y=q){for(const A in y)if(-1<y[A].indexOf(n))return A};p.getBasemapId=function(n,y,A=!0){let f=null;n&&("string"===typeof n?y.includes(n)&&(f=n):f=M.getWellKnownBasemapId(n));return A?f||"gray":f};p.getDateDiffSQL=function(n,y,A,f){var {hasQueryEngine:C}=
n;A=l(A,E(n,A),C);n=l(y,E(n,y),C);n=`(${A} - ${n})`;C&&(n=`(${n} * ${u.milliseconds})`);f=u[f];C="/";1>f&&(f=1/f,C="*");return{sqlExpression:1===f?n:`(${n} ${C} ${f})`,sqlWhere:null}};p.getDateType=E;p.getFieldsList=function(n){return h.apply(this,arguments)};p.getNormalizationType=function(n){let y=n.normalizationType;y||(n.normalizationField?y="field":null!=n.normalizationTotal&&(y="percent-of-total"));return y};p.isIntegerField=function(n,y){return(n=y&&n.getField(y))&&-1<H.indexOf(n.type)};p.unitValueInDays=
u;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/support/basemapUtils":function(){define("exports ../Basemap ../core/Collection ../core/Logger ../core/urlUtils ../core/accessorSupport/ensureType ./basemapDefinitions".split(" "),function(p,e,w,M,h,t,l){function E(G,Y){var aa;let k;if("string"===typeof G){if(!(G in l.esriBasemapDefinitions))return Y=Object.keys(l.esriBasemapDefinitions).map(x=>`"${x}"`).join(", "),P.warn(`Unable to find basemap definition for: ${G}. Try one of these: ${Y}`),
null;Y&&(k=Y[G]);k||(k=e.fromId(G),Y&&(Y[G]=k))}else k=t.ensureType(e,G);null!=(aa=k)&&aa.destroyed&&(P.warn("The provided basemap is already destroyed",{basemap:k}),k=null);return k}function q(G,Y){const aa=new w;G.forEach(k=>{const x=Y.find(O=>T(y(k),y(O)))||k;aa.some(O=>O===x)?aa.push(k):aa.push(x)});return aa}function u(G){if(H(G.url))return!0;if("vector-tile"===G.type)for(const Y in G.sourceNameToSource){const aa=G.sourceNameToSource[Y];if(H(null==aa?void 0:aa.sourceUrl))return!0}return!1}function H(G){if(!G)return!1;
G=new h.Url(h.makeAbsolute(G));return L.test(G.authority)}function X(G){return G?!G.loaded&&G.resourceInfo?A(G.resourceInfo.data):{baseLayers:n(G.baseLayers),referenceLayers:n(G.referenceLayers)}:null}function n(G){return(w.isCollection(G)?G.toArray():G).map(y)}function y(G){return{type:G.type,url:I("urlTemplate"in G&&G.urlTemplate||G.url||"styleUrl"in G&&G.styleUrl),minScale:"minScale"in G&&null!=G.minScale?G.minScale:0,maxScale:"maxScale"in G&&null!=G.maxScale?G.maxScale:0,opacity:null!=G.opacity?
G.opacity:1,visible:null!=G.visible?!!G.visible:!0}}function A(G){return G?{baseLayers:f(G.baseMapLayers.filter(Y=>!Y.isReference)),referenceLayers:f(G.baseMapLayers.filter(Y=>Y.isReference))}:null}function f(G){return G.map(Y=>{{let aa;switch(Y.layerType){case "VectorTileLayer":aa="vector-tile";break;case "ArcGISTiledMapServiceLayer":aa="tile";break;default:aa="unknown"}Y={type:aa,url:I(Y.templateUrl||Y.urlTemplate||Y.styleUrl||Y.url),minScale:null!=Y.minScale?Y.minScale:0,maxScale:null!=Y.maxScale?
Y.maxScale:0,opacity:null!=Y.opacity?Y.opacity:1,visible:null!=Y.visibility?!!Y.visibility:!0}}return Y})}function C(G,Y,aa){return null!=G!==(null!=Y)?"not-equal":G?B(G.baseLayers,Y.baseLayers)?B(G.referenceLayers,Y.referenceLayers)?"equal":aa.mustMatchReferences?"not-equal":"base-layers-equal":"not-equal":"equal"}function B(G,Y){if(G.length!==Y.length)return!1;for(let aa=0;aa<G.length;aa++)if(!T(G[aa],Y[aa]))return!1;return!0}function T(G,Y){return G.type===Y.type&&G.url===Y.url&&G.minScale===Y.minScale&&
G.maxScale===Y.maxScale&&G.visible===Y.visible&&G.opacity===Y.opacity}function I(G){return G?h.normalize(G).replace(/^\s*https?:/i,"").toLowerCase():""}const P=M.getLogger("esri.support.basemapUtils"),L=/^(basemaps|ibasemaps).*-api\.arcgis\.com$/i;p.clonePreservingTiledLayers=function(G,Y=null){G=E(G);if(!G)return null;const aa=new e({id:G.id,title:G.title,baseLayers:G.baseLayers.slice(),referenceLayers:G.referenceLayers.slice()});Y&&(aa.baseLayers=q(aa.baseLayers,Y.baseLayers),aa.referenceLayers=
q(aa.referenceLayers,Y.referenceLayers));aa.load().catch(()=>{});aa.portalItem=G.portalItem;return aa};p.contentEquals=function(G,Y){if(G===Y)return!0;G=X(G);Y=X(Y);return"equal"===C(G,Y,{mustMatchReferences:!0})};p.createCache=function(){return{}};p.destroyCache=function(G){for(const Y in G){const aa=G[Y];!1===(null==aa?void 0:aa.destroyed)&&aa.destroy();delete G[Y]}};p.ensureType=E;p.getWellKnownBasemapId=function(G){let Y=null;G=X(G);const aa=!G.baseLayers.length;for(const x in l.esriBasemapDefinitions){var k=
A(l.esriBasemapDefinitions[x]);k=C(G,k,{mustMatchReferences:aa});if("equal"===k){Y=x;break}"base-layers-equal"===k&&(Y=x)}return Y};p.hasDeveloperBasemapLayer=function(G){return!(null==G||!G.baseLayers.concat(G.referenceLayers).some(u))};p.isDeveloperBasemapLayer=u;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/Basemap":function(){define("require ./chunks/_rollupPluginBabelHelpers ./chunks/tslib.es6 ./core/Collection ./core/collectionUtils ./core/JSONSupport ./core/lang ./core/Loadable ./core/loadAll ./core/Logger ./core/maybe ./core/promiseUtils ./core/urlUtils ./core/accessorSupport/decorators/property ./core/accessorSupport/ensureType ./core/has ./core/jsonMap ./core/accessorSupport/decorators/subclass ./core/accessorSupport/decorators/writer ./geometry/SpatialReference ./portal/Portal ./portal/PortalItem ./support/basemapDefinitions ./webdoc/support/writeUtils".split(" "),
function(p,e,w,M,h,t,l,E,q,u,H,X,n,y,A,f,C,B,T,I,P,L,G,Y){var aa;let k=0;const x=u.getLogger("esri.Basemap");t=aa=function(O){function R(g){var b=O.call(this,g)||this;b.id=null;b.portalItem=null;b.spatialReference=null;b.thumbnailUrl=null;b.title="Basemap";b.id=Date.now().toString(16)+"-basemap-"+k++;b.baseLayers=new M;b.referenceLayers=new M;const z=J=>{J.parent&&J.parent!==e._assertThisInitialized(b)&&"remove"in J.parent&&J.parent.remove(J);J.parent=e._assertThisInitialized(b);"elevation"===J.type&&
x.error(`Layer '${J.title}, id:${J.id}' of type '${J.type}' is not supported as a basemap layer and will therefore be ignored.`)};b.baseLayers.on("after-add",J=>z(J.item));b.referenceLayers.on("after-add",J=>z(J.item));b.baseLayers.on("after-remove",J=>{J.item.parent=null});b.referenceLayers.on("after-remove",J=>{J.item.parent=null});return b}e._inheritsLoose(R,O);var D=R.prototype;D.initialize=function(){this.when().catch(g=>{x.error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,
g)});this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)};D.destroy=function(){var g,b=this.baseLayers.removeAll();for(const z of b)z.destroy();b=this.referenceLayers.removeAll();for(const z of b)z.destroy();this.baseLayers.destroy();this.referenceLayers.destroy();null==(g=this.portalItem)?void 0:g.destroy();this.portalItem=null};D.normalizeCtorArgs=function(g){g&&"resourceInfo"in g&&(this._set("resourceInfo",g.resourceInfo),g={...g},delete g.resourceInfo);return g};D._writeBaseLayers=
function(g,b,z){const J=[];g&&(z={...z,layerContainerType:"basemap"},this.baseLayers.forEach(W=>{W=Y.getLayerJSON(W,z.webmap?z.webmap.getLayerJSONFromResourceInfo(W):null,z);H.isSome(W)&&J.push(W)}),this.referenceLayers.forEach(W=>{W=Y.getLayerJSON(W,z.webmap?z.webmap.getLayerJSONFromResourceInfo(W):null,z);H.isSome(W)&&(W.isReference=!0,J.push(W))}));b.baseMapLayers=J};D.writeTitle=function(g,b){b.title=g||"Basemap"};D.load=function(g){this.addResolvingPromise(this._loadFromSource(g));return Promise.resolve(this)};
D.loadAll=function(){return q.loadAll(this,g=>{g(this.baseLayers,this.referenceLayers)})};D.clone=function(){const g={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.slice(),referenceLayers:this.referenceLayers.slice()};this.loaded&&(g.loadStatus="loaded");return(new aa({resourceInfo:this.resourceInfo})).set(g)};D.read=function(g,b){this.resourceInfo||this._set("resourceInfo",{data:g,context:b});O.prototype.read.call(this,g,b)};D.write=function(g,b){g=g||{};b&&b.origin||
(b={origin:"web-map",...b});O.prototype.write.call(this,g,b);!this.loaded&&this.resourceInfo&&this.resourceInfo.data.baseMapLayers&&(g.baseMapLayers=this.resourceInfo.data.baseMapLayers.map(z=>{z=l.clone(z);z.url&&n.isProtocolRelative(z.url)&&(z.url=`https:${z.url}`);z.templateUrl&&n.isProtocolRelative(z.templateUrl)&&(z.templateUrl=`https:${z.templateUrl}`);return z}));return g};D._loadFromSource=function(){var g=e._asyncToGenerator(function*(b){const {resourceInfo:z,portalItem:J}=this;X.throwIfAborted(b);
const W=[];z?(W.push(this._loadLayersFromJSON(z.data,z.context?z.context.url:null,b)),z.data.id&&!z.data.title&&W.push(G.getBasemapTitle(z.data.id).then(ba=>{ba&&this.read({title:ba},z.context)}))):J&&W.push(this._loadFromItem(J,b));yield Promise.all(W)});return function(b){return g.apply(this,arguments)}}();D._loadLayersFromJSON=function(){var g=e._asyncToGenerator(function*(b,z,J){var W=this.resourceInfo&&this.resourceInfo.context;const ba=this.portalItem&&this.portalItem.portal||W&&W.portal||null,
ia=W&&"web-scene"===W.origin?"web-scene":"web-map",{populateOperationalLayers:ma}=yield new Promise(function(qa,wa){p(["./layers/support/layersCreator"],qa,wa)});W=[];X.throwIfAborted(J);b.baseMapLayers&&Array.isArray(b.baseMapLayers)&&(z={context:{origin:ia,url:z,portal:ba,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"},J=ma(this.baseLayers,b.baseMapLayers.filter(qa=>!qa.isReference),z),W.push(J),b=ma(this.referenceLayers,b.baseMapLayers.filter(qa=>qa.isReference),z),W.push(b));
yield X.eachAlways(W)});return function(b,z,J){return g.apply(this,arguments)}}();D._loadFromItem=function(){var g=e._asyncToGenerator(function*(b,z){const J=yield(yield b.load(z)).fetchData("json",z),W=n.urlToObject(b.itemUrl);this._set("resourceInfo",{data:J.baseMap,context:{origin:"web-map",portal:b.portal||P.getDefault(),url:W}});this.read(this.resourceInfo.data,this.resourceInfo.context);this.read({spatialReference:J.spatialReference},this.resourceInfo.context);this.read({title:b.title,thumbnailUrl:b.thumbnailUrl},
{origin:"portal-item",portal:b.portal||P.getDefault(),url:W});return this._loadLayersFromJSON(this.resourceInfo.data,W,z)});return function(b,z){return g.apply(this,arguments)}}();R.fromId=function(g){return(g=G.esriBasemapDefinitions[g])?aa.fromJSON(g):null};e._createClass(R,[{key:"baseLayers",set:function(g){this._set("baseLayers",h.referenceSetter(g,this._get("baseLayers")))}},{key:"referenceLayers",set:function(g){this._set("referenceLayers",h.referenceSetter(g,this._get("referenceLayers")))}}]);
return R}(t.JSONSupportMixin(E));w.__decorate([y.property({json:{write:{ignoreOrigin:!0,target:"baseMapLayers",writer(O,R,D,g){this._writeBaseLayers(O,R,g)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:M}},writer(O,R,D,g){this._writeBaseLayers(O,R,g)}}}}}})],t.prototype,"baseLayers",null);w.__decorate([y.property({type:String,json:{origins:{"web-scene":{write:!0}}}})],t.prototype,"id",void 0);w.__decorate([y.property({type:L})],t.prototype,"portalItem",void 0);w.__decorate([y.property()],
t.prototype,"referenceLayers",null);w.__decorate([y.property({readOnly:!0})],t.prototype,"resourceInfo",void 0);w.__decorate([y.property({type:I})],t.prototype,"spatialReference",void 0);w.__decorate([y.property()],t.prototype,"thumbnailUrl",void 0);w.__decorate([y.property({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],t.prototype,"title",void 0);w.__decorate([T.writer("title")],t.prototype,"writeTitle",null);return t=aa=w.__decorate([B.subclass("esri.Basemap")],t)})},"esri/core/Collection":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./ArrayPool ./Evented ./lang ./maybe ./ObjectPool ./scheduling ./accessorSupport/ensureType ./accessorSupport/tracking ./accessorSupport/decorators/property ./accessorSupport/decorators/subclass ./accessorSupport/tracking/SimpleObservable".split(" "),
function(p,e,w,M,h,t,l,E,q,u,H,X,n){function y(x){return x?x instanceof k?x.toArray():x.length?Array.prototype.slice.apply(x):[]:[]}function A(x){if(x&&x.length)return x[0]}function f(x,O,R,D){O&&O.forEach((g,b,z)=>{x.push(g);f(x,R.call(D,g,b,z),R,D)})}var C;let B=function(){function x(){this.target=null;this.defaultPrevented=this.cancellable=!1;this.type=this.item=void 0}var O=x.prototype;O.preventDefault=function(){this.cancellable&&(this.defaultPrevented=!0)};O.reset=function(R){this.defaultPrevented=
!1;this.item=R};return x}();const T=new l(B,void 0,x=>{x.item=null;x.target=null;x.defaultPrevented=!1;x.cancellable=!1}),I=()=>{},P=new Set,L=new Set,G=new Set,Y=new Map;let aa=0,k=C=function(x){function O(D){D=x.call(this,D)||this;D._chgListeners=[];D._notifications=null;D._timer=null;D._observable=new n.SimpleObservable;D.length=0;D._items=[];Object.defineProperty(p._assertThisInitialized(D),"uid",{value:aa++});return D}p._inheritsLoose(O,x);O.isCollection=function(D){return null!=D&&D instanceof
C};var R=O.prototype;R.normalizeCtorArgs=function(D){return D?Array.isArray(D)||D instanceof C?{items:D}:D:{}};R[Symbol.iterator]=function*(){yield*this.items};R.hasEventListener=function(D){return"change"===D?0<this._chgListeners.length:this._emitter.hasEventListener(D)};R.on=function(D,g){if("change"===D){const b=this._chgListeners,z={removed:!1,callback:g};b.push(z);this._notifications&&this._notifications.push({listeners:b.slice(),items:this._items.slice(),changes:[]});return{remove(){this.remove=
I;z.removed=!0;b.splice(b.indexOf(z),1)}}}return this._emitter.on(D,g)};R.once=function(D,g){const b=this.on(D,g);return{remove(){b.remove()}}};R.add=function(D,g){u.trackAccess(this._observable);if(this._emitBeforeChanges(1))return this;g=this.getNextIndex(null!=g?g:null);this._splice(g,0,D);this._emitAfterChanges(1);return this};R.addMany=function(D,g=this._items.length){u.trackAccess(this._observable);if(!D||!D.length||this._emitBeforeChanges(1))return this;g=this.getNextIndex(g);this._splice(g,
0,...y(D));this._emitAfterChanges(1);return this};R.removeAll=function(){u.trackAccess(this._observable);if(!this.length||this._emitBeforeChanges(2))return[];const D=this._splice(0,this.length)||[];this._emitAfterChanges(2);return D};R.clone=function(){u.trackAccess(this._observable);return this._createNewInstance({items:this._items.map(h.clone)})};R.concat=function(...D){u.trackAccess(this._observable);D=D.map(y);return this._createNewInstance({items:this._items.concat(...D)})};R.drain=function(D,
g){u.trackAccess(this._observable);if(this.length&&!this._emitBeforeChanges(2)){var b=t.assumeNonNull(this._splice(0,this.length)),z=b.length;for(let J=0;J<z;J++)D.call(g,b[J],J,b);this._emitAfterChanges(2)}};R.every=function(D,g){u.trackAccess(this._observable);return this._items.every(D,g)};R.filter=function(D,g){u.trackAccess(this._observable);let b;b=2===arguments.length?this._items.filter(D,g):this._items.filter(D);return this._createNewInstance({items:b})};R.find=function(D,g){u.trackAccess(this._observable);
return this._items.find(D,g)};R.findIndex=function(D,g){u.trackAccess(this._observable);return this._items.findIndex(D,g)};R.flatten=function(D,g){u.trackAccess(this._observable);const b=[];f(b,this,D,g);return new C(b)};R.forEach=function(D,g){u.trackAccess(this._observable);return this._items.forEach(D,g)};R.getItemAt=function(D){u.trackAccess(this._observable);return this._items[D]};R.getNextIndex=function(D){u.trackAccess(this._observable);const g=this.length;D=null==D?g:D;0>D?D=0:D>g&&(D=g);
return D};R.includes=function(D,g=0){u.trackAccess(this._observable);return this._items.includes(D,g)};R.indexOf=function(D,g=0){u.trackAccess(this._observable);return this._items.indexOf(D,g)};R.join=function(D=","){u.trackAccess(this._observable);return this._items.join(D)};R.lastIndexOf=function(D,g=this.length-1){u.trackAccess(this._observable);return this._items.lastIndexOf(D,g)};R.map=function(D,g){u.trackAccess(this._observable);D=this._items.map(D,g);return new C({items:D})};R.reorder=function(D,
g=this.length-1){u.trackAccess(this._observable);const b=this.indexOf(D);if(-1!==b){0>g?g=0:g>=this.length&&(g=this.length-1);if(b!==g){if(this._emitBeforeChanges(4))return D;this._splice(b,1);this._splice(g,0,D);this._emitAfterChanges(4)}return D}};R.pop=function(){u.trackAccess(this._observable);if(this.length&&!this._emitBeforeChanges(2)){var D=A(this._splice(this.length-1,1));this._emitAfterChanges(2);return D}};R.push=function(...D){u.trackAccess(this._observable);if(this._emitBeforeChanges(1))return this.length;
this._splice(this.length,0,...D);this._emitAfterChanges(1);return this.length};R.reduce=function(D,g){u.trackAccess(this._observable);const b=this._items;return 2===arguments.length?b.reduce(D,g):b.reduce(D)};R.reduceRight=function(D,g){u.trackAccess(this._observable);const b=this._items;return 2===arguments.length?b.reduceRight(D,g):b.reduceRight(D)};R.remove=function(D){u.trackAccess(this._observable);return this.removeAt(this.indexOf(D))};R.removeAt=function(D){u.trackAccess(this._observable);
if(!(0>D||D>=this.length||this._emitBeforeChanges(2)))return D=A(this._splice(D,1)),this._emitAfterChanges(2),D};R.removeMany=function(D){u.trackAccess(this._observable);if(!D||!D.length||this._emitBeforeChanges(2))return[];D=D instanceof C?D.toArray():D;const g=this._items,b=[],z=D.length;for(let ia=0;ia<z;ia++){var J=g.indexOf(D[ia]);if(-1<J){{var W=ia+1;var ba=J+1;const ma=Math.min(D.length-W,g.length-ba);let qa=0;for(;qa<ma&&D[W+qa]===g[ba+qa];)qa++;W=qa}W=1+W;(J=this._splice(J,W))&&0<J.length&&
b.push.apply(b,J);ia+=W-1}}this._emitAfterChanges(2);return b};R.reverse=function(){u.trackAccess(this._observable);if(this._emitBeforeChanges(4))return this;const D=this._splice(0,this.length);D&&(D.reverse(),this._splice(0,0,...D));this._emitAfterChanges(4);return this};R.shift=function(){u.trackAccess(this._observable);if(this.length&&!this._emitBeforeChanges(2)){var D=A(this._splice(0,1));this._emitAfterChanges(2);return D}};R.slice=function(D=0,g=this.length){u.trackAccess(this._observable);
return this._createNewInstance({items:this._items.slice(D,g)})};R.some=function(D,g){u.trackAccess(this._observable);return this._items.some(D,g)};R.sort=function(D){u.trackAccess(this._observable);if(!this.length||this._emitBeforeChanges(4))return this;const g=t.assumeNonNull(this._splice(0,this.length));arguments.length?g.sort(D):g.sort();this._splice(0,0,...g);this._emitAfterChanges(4);return this};R.splice=function(D,g,...b){u.trackAccess(this._observable);const z=(g?2:0)|(b.length?1:0);if(this._emitBeforeChanges(z))return[];
D=this._splice(D,g,...b)||[];this._emitAfterChanges(z);return D};R.toArray=function(){u.trackAccess(this._observable);return this._items.slice()};R.toJSON=function(){u.trackAccess(this._observable);return this.toArray()};R.toLocaleString=function(){u.trackAccess(this._observable);return this._items.toLocaleString()};R.toString=function(){u.trackAccess(this._observable);return this._items.toString()};R.unshift=function(...D){u.trackAccess(this._observable);if(!D.length||this._emitBeforeChanges(1))return this.length;
this._splice(0,0,...D);this._emitAfterChanges(1);return this.length};R._createNewInstance=function(D){return new this.constructor(D)};R._splice=function(D,g,...b){const z=this._items;var J=this.constructor.prototype.itemType;let W=void 0;!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=E.schedule(()=>this._dispatchChange()));if(g){W=z.splice(D,g);if(this.hasEventListener("before-remove")){var ba=
T.acquire();ba.target=this;ba.cancellable=!0;for(let qa=0,wa=W.length;qa<wa;qa++)g=W[qa],ba.reset(g),this.emit("before-remove",ba),ba.defaultPrevented&&(W.splice(qa,1),z.splice(D,0,g),D+=1,--qa,--wa);T.release(ba)}this.length=this._items.length;if(this.hasEventListener("after-remove")){g=T.acquire();g.target=this;g.cancellable=!1;ba=W.length;for(let qa=0;qa<ba;qa++)g.reset(W[qa]),this.emit("after-remove",g);T.release(g)}}if(b&&b.length){if(J){g=[];for(var ia of b)b=J.ensureType(ia),null==b&&null!=
ia||g.push(b);b=g}J=this.hasEventListener("before-add");ia=this.hasEventListener("after-add");g=D===this.length;if(J||ia){var ma=T.acquire();ma.target=this;ma.cancellable=!0;ba=T.acquire();ba.target=this;ba.cancellable=!1;for(const qa of b)J?(ma.reset(qa),this.emit("before-add",ma),ma.defaultPrevented||(g?z.push(qa):z.splice(D++,0,qa),this._set("length",z.length),ia&&(ba.reset(qa),this.emit("after-add",ba)))):(g?z.push(qa):z.splice(D++,0,qa),this._set("length",z.length),ba.reset(qa),this.emit("after-add",
ba));T.release(ba);T.release(ma)}else{if(g)for(ma of b)z.push(ma);else z.splice(D,0,...b);this._set("length",z.length)}}(b&&b.length||W&&W.length)&&this._notifyChangeEvent(b,W);return W};R._emitBeforeChanges=function(D){let g=!1;if(this.hasEventListener("before-changes")){const b=T.acquire();b.target=this;b.cancellable=!0;b.type=D;this.emit("before-changes",b);g=b.defaultPrevented;T.release(b)}return g};R._emitAfterChanges=function(D){if(this.hasEventListener("after-changes")){const g=T.acquire();
g.target=this;g.cancellable=!1;g.type=D;this.emit("after-changes",g);T.release(g)}this._observable.notify()};R._notifyChangeEvent=function(D,g){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:D,removed:g})};R._dispatchChange=function(){this._timer&&(this._timer.remove(),this._timer=null);if(this._notifications){var D=this._notifications;this._notifications=null;for(const g of D){D=g.changes;P.clear();L.clear();G.clear();for(const {added:ia,
removed:ma}of D){if(ia)if(0===G.size&&0===L.size)for(const qa of ia)P.add(qa);else for(const qa of ia)L.has(qa)?(G.add(qa),L.delete(qa)):G.has(qa)||P.add(qa);if(ma)if(0===G.size&&0===P.size)for(const qa of ma)L.add(qa);else for(const qa of ma)P.has(qa)?P.delete(qa):(G.delete(qa),L.add(qa))}const b=w.acquire();P.forEach(ia=>{b.push(ia)});const z=w.acquire();L.forEach(ia=>{z.push(ia)});const J=this._items,W=g.items,ba=w.acquire();G.forEach(ia=>{W.indexOf(ia)!==J.indexOf(ia)&&ba.push(ia)});if(g.listeners&&
(b.length||z.length||ba.length)){D={target:this,added:b,removed:z,moved:ba};const ia=g.listeners.length;for(let ma=0;ma<ia;ma++){const qa=g.listeners[ma];qa.removed||qa.callback.call(this,D)}}w.release(b);w.release(z);w.release(ba)}P.clear();L.clear();G.clear()}};p._createClass(O,[{key:"items",get:function(){u.trackAccess(this._observable);return this._items},set:function(D){this._emitBeforeChanges(1)||(this._splice(0,this.length,...y(D)),this._emitAfterChanges(1))}}]);return O}(M.EventedAccessor);
k.ofType=x=>{if(!x)return C;if(Y.has(x))return Y.get(x);var O=null;if("function"===typeof x)O=x.prototype.declaredClass;else if(x.base)O=x.base.prototype.declaredClass;else for(var R in x.typeMap){const D=x.typeMap[R].prototype.declaredClass;O=O?O+` | ${D}`:D}R=function(D){function g(){return D.apply(this,arguments)||this}p._inheritsLoose(g,D);return g}(C);R=e.__decorate([X.subclass(`esri.core.Collection<${O}>`)],R);O={Type:x,ensureType:"function"===typeof x?q.ensureType(x):q.ensureOneOfType(x)};
Object.defineProperty(R.prototype,"itemType",{value:O});Y.set(x,R);return R};e.__decorate([H.property()],k.prototype,"length",void 0);e.__decorate([H.property()],k.prototype,"items",null);return k=C=e.__decorate([X.subclass("esri.core.Collection")],k)})},"esri/core/accessorSupport/tracking/SimpleObservable":function(){define(["exports","./ObservationHandle"],function(p,e){let w=function(){function M(){this._observers=[]}var h=M.prototype;h.observe=function(t){this._observers.includes(t)||this._observers.push(t);
return new e.ObservationHandle(this._observers,t)};h.notify=function(){const t=this._observers.slice();for(let l=0;l<t.length;++l){const E=t[l];E.onInvalidated();E.onCommitted()}};return M}();p.SimpleObservable=w;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/core/collectionUtils":function(){define(["exports","./Collection"],function(p,e){p.castForReferenceSetter=function(w){return w};p.referenceSetter=function(w,M,h=e){M||(M=new h);if(M===w)return M;M.removeAll();w&&(Array.isArray(w)||
"items"in w&&Array.isArray(w.items))?M.addMany(w):w&&M.add(w);return M};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/core/Loadable":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./Error ./Promise ./promiseUtils ./Warning ./accessorSupport/decorators/property ./accessorSupport/decorators/subclass".split(" "),function(p,e,w,M,h,t,l,E){const q=u=>{u=function(H){function X(...y){var A=H.call(this,...y)||this;A._loadController=null;A.loadError=null;A.loadStatus=
"not-loaded";A._set("loadWarnings",[]);A.addResolvingPromise(new Promise(f=>{const C=A.load.bind(p._assertThisInitialized(A));A.load=B=>{const T=new Promise((I,P)=>{const L=h.onAbortOrThrow(B,P);A.destroyed&&P(new w("load:instance-destroyed",`Instance of '${A.declaredClass||A.constructor.name}' is already destroyed`,{instance:p._assertThisInitialized(A)}));A._promiseProps.when(I,P).finally(()=>{L&&L.remove()})});if("not-loaded"===A.loadStatus){A._set("loadStatus","loading");const I=A._loadController=
h.createAbortController();C({signal:I.signal});h.onAbort(I.signal,()=>{A._promiseProps.abort()})}f();return T}}));A.when(()=>{A._set("loadStatus","loaded");A._loadController=null},f=>{A._set("loadStatus","failed");A._set("loadError",f);A._loadController=null});return A}p._inheritsLoose(X,H);var n=X.prototype;n.load=function(){return null};n.cancelLoad=function(){var y;if(this.isFulfilled())return this;this._set("loadError",new w("load:cancelled","Cancelled"));null==(y=this._loadController)?void 0:
y.abort();return this};p._createClass(X,[{key:"loaded",get:function(){return"loaded"===this.loadStatus}},{key:"loadWarnings",get:function(){return this._get("loadWarnings")}}]);return X}(u);e.__decorate([l.property({readOnly:!0})],u.prototype,"loaded",null);e.__decorate([l.property({readOnly:!0})],u.prototype,"loadError",void 0);e.__decorate([l.property()],u.prototype,"loadStatus",void 0);e.__decorate([l.property({type:[t],readOnly:!0})],u.prototype,"loadWarnings",null);return u=e.__decorate([E.subclass("esri.core.Loadable")],
u)};M=function(u){function H(){return u.apply(this,arguments)||this}p._inheritsLoose(H,u);return H}(q(M.EsriPromise));M=e.__decorate([E.subclass("esri.core.Loadable")],M);(function(u){u.LoadableMixin=q;u.isLoadable=function(H){return!(!H||!H.load)}})(M||(M={}));return M})},"esri/core/Promise":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./Accessor ./maybe ./promiseUtils ./accessorSupport/decorators/subclass".split(" "),function(p,e,w,M,h,t,l){let E=function(){function u(X){this.instance=
X;this._resolver=t.createDeferred();this._status=0;this._resolvingPromises=[];this._resolver.promise.then(()=>{this._status=1;this._cleanUp()},()=>{this._status=2;this._cleanUp()})}var H=u.prototype;H.addResolvingPromise=function(X){this._resolvingPromises.push(X);this._tryResolve()};H.isResolved=function(){return 1===this._status};H.isRejected=function(){return 2===this._status};H.isFulfilled=function(){return 0!==this._status};H.abort=function(){this._resolver.reject(t.createAbortError())};H.when=
function(X,n){return this._resolver.promise.then(X,n)};H._cleanUp=function(){this._allPromise=this._resolvingPromises=this._allPromise=null};H._tryResolve=function(){if(!this.isFulfilled()){var X=t.createDeferred(),n=[...this._resolvingPromises,h.assumeNonNull(X.promise)],y=this._allPromise=Promise.all(n);y.then(()=>{this.isFulfilled()||this._allPromise!==y||this._resolver.resolve(this.instance)},A=>{this.isFulfilled()||this._allPromise!==y||t.isAbortError(A)||this._resolver.reject(A)});X.resolve()}};
return u}();const q=u=>{u=function(H){function X(...y){y=H.call(this,...y)||this;y._promiseProps=new E(e._assertThisInitialized(y));y.addResolvingPromise(Promise.resolve());return y}e._inheritsLoose(X,H);var n=X.prototype;n.isResolved=function(){return this._promiseProps.isResolved()};n.isRejected=function(){return this._promiseProps.isRejected()};n.isFulfilled=function(){return this._promiseProps.isFulfilled()};n.when=function(y,A){return(new Promise((f,C)=>{this._promiseProps.when(f,C)})).then(y,
A)};n.catch=function(y){return this.when(null,y)};n.addResolvingPromise=function(y){y&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in y?y.when():y)};return X}(u);return u=w.__decorate([l.subclass("esri.core.Promise")],u)};p.EsriPromise=function(u){function H(){return u.apply(this,arguments)||this}e._inheritsLoose(H,u);return H}(q(M));p.EsriPromise=w.__decorate([l.subclass("esri.core.Promise")],p.EsriPromise);p.EsriPromiseMixin=q;Object.defineProperty(p,
"__esModule",{value:!0})})},"esri/core/loadAll":function(){define("exports ../chunks/_rollupPluginBabelHelpers ./asyncUtils ./Collection ./Loadable ./maybe".split(" "),function(p,e,w,M,h,t){function l(H,X){return E.apply(this,arguments)}function E(){E=e._asyncToGenerator(function*(H,X){yield H.load();return q(H,X)});return E.apply(this,arguments)}function q(H,X){return u.apply(this,arguments)}function u(){u=e._asyncToGenerator(function*(H,X){const n=[],y=(...f)=>{for(const C of f)t.isNone(C)||(Array.isArray(C)?
y(...C):M.isCollection(C)?C.forEach(B=>y(B)):h.isLoadable(C)&&n.push(C))};X(y);let A=null;yield w.map(n,function(){var f=e._asyncToGenerator(function*(C){!1!==(yield w.result("loadAll"in C&&"function"===typeof C.loadAll?C.loadAll():C.load())).ok||A||(A=C)});return function(C){return f.apply(this,arguments)}}());if(A)throw A.loadError;return H});return u.apply(this,arguments)}p.default=l;p.loadAll=l;p.loadAllChildren=q;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/core/asyncUtils":function(){define(["exports",
"./maybe","./promiseUtils"],function(p,e,w){p.assertResult=function(M){if(!0===M.ok)return M.value;throw M.error;};p.forEach=function(M,h,t){return w.eachAlways(M.map((l,E)=>h.apply(t,[l,E])))};p.map=function(M,h,t){return w.eachAlways(M.map((l,E)=>h.apply(t,[l,E]))).then(l=>l.map(E=>E.value))};p.result=function(M){return e.isNone(M)?w.resolve():M.then(h=>({ok:!0,value:h})).catch(h=>({ok:!1,error:h}))};p.resultOrAbort=function(M){return M.then(h=>({ok:!0,value:h})).catch(h=>{w.throwIfAbortError(h);
return{ok:!1,error:h}})};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/portal/Portal":function(){define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../config ../intl ../kernel ../request ../core/Error ../core/JSONSupport ../core/Loadable ../core/maybe ../core/promiseUtils ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/jsonMap ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../geometry/Extent ./PortalQueryParams ./PortalQueryResult ./PortalUser ../intl/locale".split(" "),
function(p,e,w,M,h,t,l,E,q,u,H,X,n,y,A,f,C,B,T,I,P,L,G,Y){function aa(R){return Object.freeze({__proto__:null,"default":R})}var k;let x;const O={PortalGroup:()=>new Promise(function(R,D){p(["./PortalGroup"],function(g){R(aa(g))},D)}),PortalItem:()=>new Promise(function(R,D){p(["./PortalItem"],function(g){R(aa(g))},D)}),PortalUser:()=>new Promise(function(R,D){p(["./PortalUser"],function(g){R(aa(g))},D)})};h=k=function(R){function D(b){b=R.call(this,b)||this;b.access=null;b.allSSL=!1;b.authMode="auto";
b.authorizedCrossOriginDomains=null;b.basemapGalleryGroupQuery=null;b.bingKey=null;b.canListApps=!1;b.canListData=!1;b.canListPreProvisionedItems=!1;b.canProvisionDirectPurchase=!1;b.canSearchPublic=!0;b.canShareBingPublic=!1;b.canSharePublic=!1;b.canSignInArcGIS=!1;b.canSignInIDP=!1;b.colorSetsGroupQuery=null;b.commentsEnabled=!1;b.created=null;b.culture=null;b.customBaseUrl=null;b.defaultBasemap=null;b.defaultExtent=null;b.defaultVectorBasemap=null;b.description=null;b.eueiEnabled=null;b.featuredGroups=
null;b.featuredItemsGroupQuery=null;b.galleryTemplatesGroupQuery=null;b.livingAtlasGroupQuery=null;b.hasCategorySchema=!1;b.helperServices=null;b.homePageFeaturedContent=null;b.homePageFeaturedContentCount=null;b.httpPort=null;b.httpsPort=null;b.id=null;b.ipCntryCode=null;b.isPortal=!1;b.isReadOnly=!1;b.layerTemplatesGroupQuery=null;b.maxTokenExpirationMinutes=null;b.modified=null;b.name=null;b.portalHostname=null;b.portalMode=null;b.portalProperties=null;b.region=null;b.rotatorPanels=null;b.showHomePageDescription=
!1;b.sourceJSON=null;b.supportsHostedServices=!1;b.symbolSetsGroupQuery=null;b.templatesGroupQuery=null;b.units=null;b.url=M.portalUrl;b.urlKey=null;b.user=null;b.useStandardizedQuery=!1;b.useVectorBasemaps=!1;b.vectorBasemapGalleryGroupQuery=null;return b}e._inheritsLoose(D,R);var g=D.prototype;g.normalizeCtorArgs=function(b){return"string"===typeof b?{url:b}:b};g.destroy=function(){this._esriId_credentialCreateHandle&&(this._esriId_credentialCreateHandle.remove(),this._esriId_credentialCreateHandle=
null)};g.readAuthorizedCrossOriginDomains=function(b){if(b)for(const z of b)-1===M.request.trustedServers.indexOf(z)&&M.request.trustedServers.push(z);return b};g.readDefaultBasemap=function(b){return b?(b=x.fromJSON(b),b.portalItem={portal:this},b):null};g.readDefaultVectorBasemap=function(b){return b?(b=x.fromJSON(b),b.portalItem={portal:this},b):null};g.readUrlKey=function(b){return b?b.toLowerCase():b};g.readUser=function(b){let z=null;b&&(z=G.fromJSON(b),z.portal=this);return z};g.load=function(b){const z=
(new Promise(function(J,W){p(["../Basemap"],function(ba){J(aa(ba))},W)})).then(({default:J})=>{X.throwIfAborted(b);x=J}).then(()=>this.sourceJSON?this.sourceJSON:this._fetchSelf(this.authMode,!1,b)).then(J=>{if(t.id){const W=t.id;this.credential=W.findCredential(this.restUrl);this.credential||this.authMode!==k.AUTH_MODE_AUTO||(this._esriId_credentialCreateHandle=W.on("credential-create",()=>{W.findCredential(this.restUrl)&&this._signIn()}))}this.sourceJSON=J;this.read(J)});this.addResolvingPromise(z);
return Promise.resolve(this)};g.createClosestFacilityTask=function(){var b=e._asyncToGenerator(function*(){yield this.load();const z=this._getHelperServiceUrl("closestFacility");return new (yield new Promise(function(J,W){p(["../tasks/ClosestFacilityTask"],function(ba){J(aa(ba))},W)})).default(z)});return function(){return b.apply(this,arguments)}}();g.createElevationLayers=function(){var b=e._asyncToGenerator(function*(){yield this.load();const z=this._getHelperService("defaultElevationLayers"),
J=(yield new Promise(function(W,ba){p(["../layers/ElevationLayer"],function(ia){W(aa(ia))},ba)})).default;return z?z.map(W=>new J({id:W.id,url:W.url})):[]});return function(){return b.apply(this,arguments)}}();g.createGeometryService=function(){var b=e._asyncToGenerator(function*(){yield this.load();const z=this._getHelperServiceUrl("geometry");return new (yield new Promise(function(J,W){p(["../tasks/GeometryService"],function(ba){J(aa(ba))},W)})).default({url:z})});return function(){return b.apply(this,
arguments)}}();g.createPrintTask=function(){var b=e._asyncToGenerator(function*(){yield this.load();const z=this._getHelperServiceUrl("printTask");return new (yield new Promise(function(J,W){p(["../tasks/PrintTask"],function(ba){J(aa(ba))},W)})).default(z)});return function(){return b.apply(this,arguments)}}();g.createRouteTask=function(){var b=e._asyncToGenerator(function*(){yield this.load();const z=this._getHelperServiceUrl("route");return new (yield new Promise(function(J,W){p(["../tasks/RouteTask"],
function(ba){J(aa(ba))},W)})).default(z)});return function(){return b.apply(this,arguments)}}();g.createServiceAreaTask=function(){var b=e._asyncToGenerator(function*(){yield this.load();const z=this._getHelperServiceUrl("serviceArea");return new (yield new Promise(function(J,W){p(["../tasks/ServiceAreaTask"],function(ba){J(aa(ba))},W)})).default(z)});return function(){return b.apply(this,arguments)}}();g.fetchBasemaps=function(b,z){const J=new P;J.query=b||(this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:
this.basemapGalleryGroupQuery);J.disableExtraQuery=!0;return this.queryGroups(J,z).then(W=>{J.num=100;J.query='type:"Web Map" -type:"Web Application"';return W.total?(W=W.results[0],J.sortField=W.sortField||"name",J.sortOrder=W.sortOrder||"desc",W.queryItems(J,z)):null}).then(W=>W&&W.total?W.results.filter(ba=>"Web Map"===ba.type).map(ba=>new x({portalItem:ba})):[])};g.fetchCategorySchema=function(b){return this.hasCategorySchema?this._request(this.restUrl+"/portals/self/categorySchema",b).then(z=>
z.categorySchema):X.isAborted(b)?Promise.reject(X.createAbortError()):Promise.resolve([])};g.fetchFeaturedGroups=function(b){const z=this.featuredGroups,J=new P;J.num=100;J.sortField="title";if(z&&z.length){const W=[];for(const ba of z)W.push(`(title:"${ba.title}" AND owner:${ba.owner})`);J.query=W.join(" OR ");return this.queryGroups(J,b).then(ba=>ba.results)}return X.isAborted(b)?Promise.reject(X.createAbortError()):Promise.resolve([])};g.fetchRegions=function(b){const z=this.user&&this.user.culture||
this.culture||Y.getLocale();return this._request(this.restUrl+"/portals/regions",{...b,query:{culture:z}})};D.getDefault=function(){if(!k._default||k._default.destroyed)k._default=new k;return k._default};g.queryGroups=function(b,z){return this._queryPortal("/community/groups",b,"PortalGroup",z)};g.queryItems=function(b,z){return this._queryPortal("/search",b,"PortalItem",z)};g.queryUsers=function(b,z){b.sortField||(b.sortField="username");return this._queryPortal("/community/users",b,"PortalUser",
z)};g.toJSON=function(){throw new E("internal:not-yet-implemented","Portal.toJSON is not yet implemented");};D.fromJSON=function(b){if(!b)return null;if(b.declaredClass)throw Error("JSON object is already hydrated");return new k({sourceJSON:b})};g._getHelperService=function(b){const z=this.helperServices&&this.helperServices[b];if(!z)throw new E("portal:service-not-found",`The \`helperServices\` do not include an entry named "${b}"`);return z};g._getHelperServiceUrl=function(b){const z=this._getHelperService(b);
if(!z.url)throw new E("portal:service-url-not-found",`The \`helperServices\` entry "${b}" does not include a \`url\` value`);return z.url};g._fetchSelf=function(b=this.authMode,z=!1,J){const W=this.restUrl+"/portals/self";b={authMode:b,query:{culture:Y.getLocale().toLowerCase()},...J};"auto"===b.authMode&&(b.authMode="no-prompt");z&&(b.query.default=!0);return this._request(W,b)};g._queryPortal=function(b,z,J,W){const ba=A.ensureType(P,z),ia=ma=>this._request(this.restUrl+b,{...ba.toRequestOptions(this),
...W}).then(qa=>{const wa=ba.clone();wa.start=qa.nextStart;return new L({nextQueryParams:wa,queryParams:ba,total:qa.total,results:k._resultsToTypedArray(ma,{portal:this},qa,W)})}).then(qa=>Promise.all(qa.results.map(wa=>"function"===typeof wa.when?wa.when():qa)).then(()=>qa,wa=>{X.throwIfAbortError(wa);return qa}));return J&&O[J]?O[J]().then(({default:ma})=>{X.throwIfAborted(W);return ia(ma)}):ia()};g._signIn=function(){if(this.authMode===k.AUTH_MODE_ANONYMOUS)return Promise.reject(new E("portal:invalid-auth-mode",
`Current "authMode"' is "${this.authMode}"`));if("failed"===this.loadStatus)return Promise.reject(this.loadError);const b=z=>Promise.resolve().then(()=>{if("not-loaded"===this.loadStatus)return z||(this.authMode="immediate"),this.load().then(()=>null);if("loading"===this.loadStatus)return this.load().then(()=>{if(this.credential)return null;this.credential=z;return this._fetchSelf("immediate")});if(this.user&&this.credential===z)return null;this.credential=z;return this._fetchSelf("immediate")}).then(J=>
{J&&(this.sourceJSON=J,this.read(J))});return t.id?t.id.getCredential(this.restUrl).then(z=>b(z)):b(this.credential)};g._normalizeSSL=function(b){return b.replace(/^http:/i,"https:").replace(":7080",":7443")};g._normalizeUrl=function(b){const z=this.credential&&this.credential.token;return this._normalizeSSL(z?b+(-1<b.indexOf("?")?"\x26":"?")+"token\x3d"+z:b)};g._requestToTypedArray=function(b,z,J){return this._request(b,z).then(W=>{const ba=k._resultsToTypedArray(J,{portal:this},W);return Promise.all(ba.map(ia=>
"function"===typeof ia.when?ia.when():W)).then(()=>ba,()=>ba)})};g._request=function(b,z={}){const J={f:"json",...z.query},{authMode:W=this.authMode===k.AUTH_MODE_ANONYMOUS?"anonymous":"auto",body:ba=null,cacheBust:ia=!1,method:ma="auto",responseType:qa="json",signal:wa}=z;z={authMode:W,body:ba,cacheBust:ia,method:ma,query:J,responseType:qa,timeout:0,signal:wa};return l(this._normalizeSSL(b),z).then(Ca=>Ca.data)};D._resultsToTypedArray=function(b,z,J,W){if(J){const ba=H.isSome(W)?W.signal:null;J=
J.listings||J.notifications||J.userInvitations||J.tags||J.items||J.groups||J.comments||J.provisions||J.results||J.relatedItems||J;if(b||z)J=J.map(ia=>{ia=Object.assign(b?b.fromJSON(ia):ia,z);"function"===typeof ia.load&&ia.load(ba);return ia})}else J=[];return J};e._createClass(D,[{key:"extraQuery",get:function(){const b=!(this.user&&this.user.orgId)||this.canSearchPublic;return this.id&&!b?` AND orgid:${this.id}`:null}},{key:"isOrganization",get:function(){return!!this.access}},{key:"restUrl",get:function(){let b=
this.url;if(b){const z=b.indexOf("/sharing");b=0<z?b.substring(0,z):this.url.replace(/\/+$/,"");b+="/sharing/rest"}return b}},{key:"thumbnailUrl",get:function(){const b=this.restUrl,z=this.thumbnail;return b&&z?this._normalizeSSL(b+"/portals/self/resources/"+z):null}}]);return D}(q.JSONSupportMixin(u));h.AUTH_MODE_ANONYMOUS="anonymous";h.AUTH_MODE_AUTO="auto";h.AUTH_MODE_IMMEDIATE="immediate";w.__decorate([n.property()],h.prototype,"access",void 0);w.__decorate([n.property()],h.prototype,"allSSL",
void 0);w.__decorate([n.property()],h.prototype,"authMode",void 0);w.__decorate([n.property()],h.prototype,"authorizedCrossOriginDomains",void 0);w.__decorate([B.reader("authorizedCrossOriginDomains")],h.prototype,"readAuthorizedCrossOriginDomains",null);w.__decorate([n.property()],h.prototype,"basemapGalleryGroupQuery",void 0);w.__decorate([n.property()],h.prototype,"bingKey",void 0);w.__decorate([n.property()],h.prototype,"canListApps",void 0);w.__decorate([n.property()],h.prototype,"canListData",
void 0);w.__decorate([n.property()],h.prototype,"canListPreProvisionedItems",void 0);w.__decorate([n.property()],h.prototype,"canProvisionDirectPurchase",void 0);w.__decorate([n.property()],h.prototype,"canSearchPublic",void 0);w.__decorate([n.property()],h.prototype,"canShareBingPublic",void 0);w.__decorate([n.property()],h.prototype,"canSharePublic",void 0);w.__decorate([n.property()],h.prototype,"canSignInArcGIS",void 0);w.__decorate([n.property()],h.prototype,"canSignInIDP",void 0);w.__decorate([n.property()],
h.prototype,"colorSetsGroupQuery",void 0);w.__decorate([n.property()],h.prototype,"commentsEnabled",void 0);w.__decorate([n.property({type:Date})],h.prototype,"created",void 0);w.__decorate([n.property()],h.prototype,"credential",void 0);w.__decorate([n.property()],h.prototype,"culture",void 0);w.__decorate([n.property()],h.prototype,"currentVersion",void 0);w.__decorate([n.property()],h.prototype,"customBaseUrl",void 0);w.__decorate([n.property()],h.prototype,"defaultBasemap",void 0);w.__decorate([B.reader("defaultBasemap")],
h.prototype,"readDefaultBasemap",null);w.__decorate([n.property({type:I})],h.prototype,"defaultExtent",void 0);w.__decorate([n.property()],h.prototype,"defaultVectorBasemap",void 0);w.__decorate([B.reader("defaultVectorBasemap")],h.prototype,"readDefaultVectorBasemap",null);w.__decorate([n.property()],h.prototype,"description",void 0);w.__decorate([n.property()],h.prototype,"eueiEnabled",void 0);w.__decorate([n.property({readOnly:!0})],h.prototype,"extraQuery",null);w.__decorate([n.property()],h.prototype,
"featuredGroups",void 0);w.__decorate([n.property()],h.prototype,"featuredItemsGroupQuery",void 0);w.__decorate([n.property()],h.prototype,"galleryTemplatesGroupQuery",void 0);w.__decorate([n.property()],h.prototype,"livingAtlasGroupQuery",void 0);w.__decorate([n.property()],h.prototype,"hasCategorySchema",void 0);w.__decorate([n.property()],h.prototype,"helpBase",void 0);w.__decorate([n.property()],h.prototype,"helperServices",void 0);w.__decorate([n.property()],h.prototype,"helpMap",void 0);w.__decorate([n.property()],
h.prototype,"homePageFeaturedContent",void 0);w.__decorate([n.property()],h.prototype,"homePageFeaturedContentCount",void 0);w.__decorate([n.property()],h.prototype,"httpPort",void 0);w.__decorate([n.property()],h.prototype,"httpsPort",void 0);w.__decorate([n.property()],h.prototype,"id",void 0);w.__decorate([n.property()],h.prototype,"ipCntryCode",void 0);w.__decorate([n.property({readOnly:!0})],h.prototype,"isOrganization",null);w.__decorate([n.property()],h.prototype,"isPortal",void 0);w.__decorate([n.property()],
h.prototype,"isReadOnly",void 0);w.__decorate([n.property()],h.prototype,"layerTemplatesGroupQuery",void 0);w.__decorate([n.property()],h.prototype,"maxTokenExpirationMinutes",void 0);w.__decorate([n.property({type:Date})],h.prototype,"modified",void 0);w.__decorate([n.property()],h.prototype,"name",void 0);w.__decorate([n.property()],h.prototype,"portalHostname",void 0);w.__decorate([n.property()],h.prototype,"portalMode",void 0);w.__decorate([n.property()],h.prototype,"portalProperties",void 0);
w.__decorate([n.property()],h.prototype,"region",void 0);w.__decorate([n.property({readOnly:!0})],h.prototype,"restUrl",null);w.__decorate([n.property()],h.prototype,"rotatorPanels",void 0);w.__decorate([n.property()],h.prototype,"showHomePageDescription",void 0);w.__decorate([n.property()],h.prototype,"sourceJSON",void 0);w.__decorate([n.property()],h.prototype,"staticImagesUrl",void 0);w.__decorate([n.property()],h.prototype,"stylesGroupQuery",void 0);w.__decorate([n.property()],h.prototype,"supportsHostedServices",
void 0);w.__decorate([n.property()],h.prototype,"symbolSetsGroupQuery",void 0);w.__decorate([n.property()],h.prototype,"templatesGroupQuery",void 0);w.__decorate([n.property()],h.prototype,"thumbnail",void 0);w.__decorate([n.property({readOnly:!0})],h.prototype,"thumbnailUrl",null);w.__decorate([n.property()],h.prototype,"units",void 0);w.__decorate([n.property()],h.prototype,"url",void 0);w.__decorate([n.property()],h.prototype,"urlKey",void 0);w.__decorate([B.reader("urlKey")],h.prototype,"readUrlKey",
null);w.__decorate([n.property()],h.prototype,"user",void 0);w.__decorate([B.reader("user")],h.prototype,"readUser",null);w.__decorate([n.property()],h.prototype,"useStandardizedQuery",void 0);w.__decorate([n.property()],h.prototype,"useVectorBasemaps",void 0);w.__decorate([n.property()],h.prototype,"vectorBasemapGalleryGroupQuery",void 0);return h=k=w.__decorate([T.subclass("esri.portal.Portal")],h)})},"esri/intl":function(){define("exports ./intl/date ./intl/number ./intl/substitute ./intl/locale ./intl/messages ./intl/t9n ./assets".split(" "),
function(p,e,w,M,h,t,l,E){t.registerMessageBundleLoader(l.createJSONLoader({pattern:"esri/",location:E.getAssetUrl}));p.convertDateFormatToIntlOptions=e.convertDateFormatToIntlOptions;p.formatDate=e.formatDate;p.convertNumberFormatToIntlOptions=w.convertNumberFormatToIntlOptions;p.formatNumber=w.formatNumber;p.substitute=M.substitute;p.getLocale=h.getLocale;p.onLocaleChange=h.onLocaleChange;p.prefersRTL=h.prefersRTL;p.setLocale=h.setLocale;p.fetchMessageBundle=t.fetchMessageBundle;p.normalizeMessageBundleLocale=
t.normalizeMessageBundleLocale;p.registerMessageBundleLoader=t.registerMessageBundleLoader;p.createJSONLoader=l.createJSONLoader;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/intl/date":function(){define(["exports","../core/jsonMap","./locale"],function(p,e,w){function M(A){A=A||y;if(!n.has(A)){var f=w.getLocale();f=X[w.getLocale()]||f;n.set(A,new Intl.DateTimeFormat(f,A))}return n.get(A)}var h={year:"numeric",month:"numeric",day:"numeric"},t={year:"numeric",month:"long",day:"numeric"},
l={year:"numeric",month:"short",day:"numeric"};const E={year:"numeric",month:"long",weekday:"long",day:"numeric"},q={hour:"numeric",minute:"numeric"},u={...q,second:"numeric"},H={"short-date":h,"short-date-short-time":{...h,...q},"short-date-short-time-24":{...h,...q,hour12:!1},"short-date-long-time":{...h,...u},"short-date-long-time-24":{...h,...u,hour12:!1},"short-date-le":h,"short-date-le-short-time":{...h,...q},"short-date-le-short-time-24":{...h,...q,hour12:!1},"short-date-le-long-time":{...h,
...u},"short-date-le-long-time-24":{...h,...u,hour12:!1},"long-month-day-year":t,"long-month-day-year-short-time":{...t,...q},"long-month-day-year-short-time-24":{...t,...q,hour12:!1},"long-month-day-year-long-time":{...t,...u},"long-month-day-year-long-time-24":{...t,...u,hour12:!1},"day-short-month-year":l,"day-short-month-year-short-time":{...l,...q},"day-short-month-year-short-time-24":{...l,...q,hour12:!1},"day-short-month-year-long-time":{...l,...u},"day-short-month-year-long-time-24":{...l,
...u,hour12:!1},"long-date":E,"long-date-short-time":{...E,...q},"long-date-short-time-24":{...E,...q,hour12:!1},"long-date-long-time":{...E,...u},"long-date-long-time-24":{...E,...u,hour12:!1},"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":q,"long-time":u};e=e.strict()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",
shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",
dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",
shortMonthYear:"short-month-year",year:"year"});h=e.apiValues;t=e.toJSON.bind(e);l=e.fromJSON.bind(e);const X={ar:"ar-u-nu-latn-ca-gregory"};let n=new WeakMap,y=H["short-date-short-time"];w.beforeLocaleChange(()=>{n=new WeakMap;y=H["short-date-short-time"]});p.convertDateFormatToIntlOptions=function(A){return H[A]||null};p.dateFormats=h;p.dictionary=e;p.formatDate=function(A,f){return M(f).format(A)};p.fromJSON=l;p.getDateTimeFormatter=M;p.toJSON=t;Object.defineProperty(p,"__esModule",{value:!0})})},
"esri/intl/locale":function(){define(["exports","../core/global"],function(p,e){function w(){var f,C;return null!=(f=null!=X?X:null==(C=e.navigator)?void 0:C.language)?f:"en"}function M(){void 0===H&&(H=w());return H}function h(f=M()){f=/^([a-zA-Z]{2,3})(?:[_\-]\w+)*$/.exec(f);return null==f?void 0:f[1].toLowerCase()}function t(){var f;const C=null!=(f=u)?f:w();H!==C&&(H=C,[...A].forEach(B=>{B.call(null,C)}),[...y].forEach(B=>{B.call(null,C)}))}var l,E,q;let u=void 0,H=void 0;const X=null!=(l=null==
(E=e.esriConfig)?void 0:E.locale)?l:null==(q=e.dojoConfig)?void 0:q.locale,n={he:!0,ar:!0},y=[],A=[];null==e.addEventListener?void 0:e.addEventListener("languagechange",t);p.beforeLocaleChange=function(f){A.push(f);return{remove(){y.splice(A.indexOf(f),1)}}};p.getDefaultLocale=w;p.getLanguage=h;p.getLocale=M;p.onLocaleChange=function(f){y.push(f);return{remove(){y.splice(y.indexOf(f),1)}}};p.prefersRTL=function(f=M()){f=h(f);return void 0!==f&&(n[f]||!1)};p.setLocale=function(f){u=f?f:void 0;t()};
Object.defineProperty(p,"__esModule",{value:!0})})},"esri/intl/number":function(){define(["exports","../core/maybe","./locale"],function(p,e,w){function M(E){const q=E||l;if(!t.has(q)){var u=w.getLocale();u=h[w.getLocale()]||u;t.set(q,new Intl.NumberFormat(u,E))}return e.assumeNonNull(t.get(q))}const h={ar:"ar-u-nu-latn"};let t=new WeakMap,l={};w.beforeLocaleChange(()=>{t=new WeakMap;l={}});p.convertNumberFormatToIntlOptions=function(E={}){const q={};null!=E.digitSeparator&&(q.useGrouping=E.digitSeparator);
null!=E.places&&(q.minimumFractionDigits=q.maximumFractionDigits=E.places);return q};p.formatNumber=function(E,q){return M(q).format(E)};p.getFormatter=M;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/intl/substitute":function(){define("exports ../core/Logger ../core/object ../core/string ./date ./number".split(" "),function(p,e,w,M,h,t){function l(q){switch(typeof q){case "string":return q;case "number":return t.formatNumber(q);case "boolean":return""+q;default:return q instanceof Date?
h.formatDate(q):""}}const E=e.getLogger("esri.intl");p.substitute=function(q,u,H={}){const {format:X={}}=H;return M.replace(q,n=>{{const f=n.indexOf(":");if(-1===f)var y=n.trim();else{y=n.slice(0,f).trim();var A=n.slice(f+1).trim()}if(y)if(n=w.getDeepValue(y,u),null==n)A="";else if(y=X[A]||X[y])b:switch(y.type){case "date":A=h.formatDate(n,y.intlOptions);break b;case "number":A=t.formatNumber(n,y.intlOptions);break b;default:E.warn("missing format descriptor for key {key}"),A=l(n)}else if(A)b:switch(A.toLowerCase()){case "dateformat":A=
h.formatDate(n);break b;case "numberformat":A=t.formatNumber(n);break b;default:E.warn(`inline format is unsupported since 4.12: ${A}`),A=/^(dateformat|datestring)/i.test(A)?h.formatDate(n):/^numberformat/i.test(A)?t.formatNumber(n):l(n)}else A=l(n);else A=""}return A})};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/intl/messages":function(){define(["exports","../chunks/_rollupPluginBabelHelpers","../core/Error","../core/promiseUtils","./locale"],function(p,e,w,M,h){function t(B){var T;
return null!=(T=n[B])?T:!1}function l(B){for(const T of A.keys())H(B.pattern,T)&&A.delete(T)}function E(){E=e._asyncToGenerator(function*(B){const T=h.getLocale();A.has(B)||A.set(B,q(B,T));B=A.get(B);yield f.add(B);return B});return E.apply(this,arguments)}function q(B,T){return u.apply(this,arguments)}function u(){u=e._asyncToGenerator(function*(B,T){const I=[];for(const P of y)if(H(P.pattern,B))try{return yield P.fetchMessageBundle(B,T)}catch(L){I.push(L)}if(I.length)throw new w("intl:message-bundle-error",
`Errors occurred while loading "${B}"`,{errors:I});throw new w("intl:no-message-bundle-loader",`No loader found for message bundle "${B}"`);});return u.apply(this,arguments)}function H(B,T){return"string"===typeof B?T.startsWith(B):B.test(T)}const X=/^([a-z]{2})(?:[-_]([A-Za-z]{2}))?$/,n={ar:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:!0,nl:!0,pl:!0,"pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,
uk:!0,vi:!0,"zh-CN":!0,"zh-HK":!0,"zh-TW":!0},y=[],A=new Map;h.beforeLocaleChange(()=>{A.clear()});const f=new (function(){function B(){this._numLoading=0}var T=B.prototype;T.waitForAll=function(){var I=e._asyncToGenerator(function*(){this._dfd&&(yield this._dfd.promise)});return function(){return I.apply(this,arguments)}}();T.add=function(I){this._increase();I.then(()=>this._decrease(),()=>this._decrease());return this.waitForAll()};T._increase=function(){this._numLoading++;this._dfd||(this._dfd=
M.createDeferred())};T._decrease=function(){this._numLoading=Math.max(this._numLoading-1,0);this._dfd&&0===this._numLoading&&(this._dfd.resolve(),this._dfd=null)};return B}()),C={cache:A,loaders:y};p.fetchMessageBundle=function(B){return E.apply(this,arguments)};p.normalizeMessageBundleLocale=function(B){if(!X.test(B))return null;const [,T,I]=X.exec(B);B=T+(I?"-"+I.toUpperCase():"");return t(B)?B:t(T)?T:null};p.registerMessageBundleLoader=function(B){y.includes(B)||(l(B),y.unshift(B));return{remove(){const T=
y.indexOf(B);-1<T&&(y.splice(T,1),l(B))}}};p.test=C;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/intl/t9n":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../request ../core/Error ../core/global ../core/maybe ./messages".split(" "),function(p,e,w,M,h,t,l){function E(y,A,f,C){return q.apply(this,arguments)}function q(){q=e._asyncToGenerator(function*(y,A,f,C){var B=A.exec(f);if(!B)throw new M("esri-intl:invalid-bundle",`Bundle id "${f}" is not compatible with the pattern "${A}"`);
A=B[1]?`${B[1]}/`:"";B=B[2];const T=l.normalizeMessageBundleLocale(C);C=`${A}${B}.json`;A=T?`${A}${B}_${T}.json`:C;let I;try{I=yield u(y(A))}catch(P){if(A===C)throw new M("intl:unknown-bundle",`Bundle "${f}" cannot be loaded`,{error:P});try{I=yield u(y(C))}catch(L){throw new M("intl:unknown-bundle",`Bundle "${f}" cannot be loaded`,{error:L});}}return I});return q.apply(this,arguments)}function u(y){return H.apply(this,arguments)}function H(){H=e._asyncToGenerator(function*(y){if(t.isSome(n.fetchBundleAsset))return n.fetchBundleAsset(y);
y=yield w(y,{responseType:"text"});return JSON.parse(y.data)});return H.apply(this,arguments)}let X=function(){function y({base:A="",pattern:f,location:C=new URL(window.location.href)}){let B;B="string"===typeof C?T=>(new URL(T,new URL(C,h.location))).href:C instanceof URL?T=>(new URL(T,C)).href:C;this.pattern="string"===typeof f?new RegExp(`^${f}`):f;this.getAssetUrl=B;A=A?A.endsWith("/")?A:A+"/":"";this.matcher=new RegExp(`^${A}(?:(.*)\/)?(.*)$`)}y.prototype.fetchMessageBundle=function(A,f){return E(this.getAssetUrl,
this.matcher,A,f)};return y}();const n={};p.JSONLoader=X;p.createJSONLoader=function(y){return new X(y)};p.test=n;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/portal/PortalQueryParams":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Accessor ../core/jsonMap ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/has ../core/Logger ../core/accessorSupport/decorators/subclass ../geometry/Extent ../geometry/SpatialReference ../geometry/support/webMercatorUtils".split(" "),
function(p,e,w,M,h,t,l,E,q,u,H,X,n){var y;const A=new M.JSONMap({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});w=y=function(f){function C(T){T=f.call(this,T)||this;T.categories=null;T.disableExtraQuery=!1;T.extent=null;T.num=10;T.query=null;T.sortField=null;T.start=1;return T}p._inheritsLoose(C,f);var B=C.prototype;B.clone=function(){return new y({categories:this.categories?h.clone(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?
this.extent.clone():null,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})};B.toRequestOptions=function(T,I){let P;this.categories&&(P=this.categories.map(Y=>Array.isArray(Y)?JSON.stringify(Y):Y));let L;if(this.extent){var G=n.project(this.extent,X.WGS84);G&&(L=`${G.xmin},${G.ymin},${G.xmax},${G.ymax}`)}G=this.query;!this.disableExtraQuery&&T.extraQuery&&(G="("+G+")"+T.extraQuery);T={categories:P,bbox:L,q:G,num:this.num,sortField:null,sortOrder:null,
start:this.start};this.sortField&&(T.sortField=this.sortField.split(",").map(Y=>A.toJSON(Y.trim())).join(","),T.sortOrder=this.sortOrder);return{query:{...I,...T}}};p._createClass(C,[{key:"sortOrder",get:function(){return this._get("sortOrder")||"asc"},set:function(T){"asc"!==T&&"desc"!==T||this._set("sortOrder",T)}}]);return C}(w);e.__decorate([t.property()],w.prototype,"categories",void 0);e.__decorate([t.property()],w.prototype,"disableExtraQuery",void 0);e.__decorate([t.property({type:H})],w.prototype,
"extent",void 0);e.__decorate([t.property()],w.prototype,"num",void 0);e.__decorate([t.property()],w.prototype,"query",void 0);e.__decorate([t.property()],w.prototype,"sortField",void 0);e.__decorate([t.property()],w.prototype,"sortOrder",null);e.__decorate([t.property()],w.prototype,"start",void 0);return w=y=e.__decorate([u.subclass("esri.portal.PortalQueryParams")],w)})},"esri/portal/PortalQueryResult":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Accessor ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/jsonMap ../core/accessorSupport/decorators/subclass".split(" "),
function(p,e,w,M,h,t,l,E,q){w=function(u){function H(X){X=u.call(this,X)||this;X.nextQueryParams=null;X.queryParams=null;X.results=null;X.total=null;return X}p._inheritsLoose(H,u);return H}(w);e.__decorate([M.property()],w.prototype,"nextQueryParams",void 0);e.__decorate([M.property()],w.prototype,"queryParams",void 0);e.__decorate([M.property()],w.prototype,"results",void 0);e.__decorate([M.property()],w.prototype,"total",void 0);return w=e.__decorate([q.subclass("esri.portal.PortalQueryResult")],
w)})},"esri/portal/PortalUser":function(){define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Error ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/jsonMap ../core/accessorSupport/decorators/subclass ./PortalFolder ./PortalGroup".split(" "),function(p,e,w,M,h,t,l,E,q,u,H,X,n){var y;h=y=function(A){function f(...B){B=A.call(this,...B)||this;B.access=null;B.created=null;B.culture=null;B.description=
null;B.email=null;B.fullName=null;B.modified=null;B.orgId=null;B.portal=null;B.preferredView=null;B.privileges=null;B.region=null;B.role=null;B.roleId=null;B.sourceJSON=null;B.units=null;B.username=null;B.userType=null;return B}e._inheritsLoose(f,A);var C=f.prototype;C.addItem=function(B){const T=B&&B.item;var I=B&&B.data;B=B&&B.folder;const P={method:"post"};T&&(P.query=T.createPostQuery(),null!=I&&("string"===typeof I?P.query.text=I:"object"===typeof I&&(P.query.text=JSON.stringify(I))));I=this.userContentUrl;
B&&(I+="/"+("string"===typeof B?B:B.id));return this.portal._request(I+"/addItem",P).then(L=>{T.id=L.id;T.portal=this.portal;return T.loaded?T.reload():T.load()})};C.deleteItem=function(B){let T=this.userContentUrl;B.ownerFolder&&(T+="/"+B.ownerFolder);return this.portal._request(T+`/items/${B.id}/delete`,{method:"post"}).then(()=>{B.id=null;B.portal=null})};C.deleteItems=function(B){const T=this.userContentUrl+"/deleteItems";var I=B.map(P=>P.id);return I.length?(I={method:"post",query:{items:I.join(",")}},
this.portal._request(T,I).then(()=>{B.forEach(P=>{P.id=null;P.portal=null})})):Promise.resolve(void 0)};C.fetchFolders=function(){return this.portal._request(this.userContentUrl,{query:{num:1}}).then(B=>B&&B.folders?B.folders.map(T=>{T=X.fromJSON(T);T.portal=this.portal;return T}):[])};C.fetchGroups=function(){return this.portal._request(this.url).then(B=>B&&B.groups?B.groups.map(T=>{T=n.fromJSON(T);T.portal=this.portal;return T}):[])};C.fetchItems=function(B){B||(B={});let T=this.userContentUrl;
B.folder&&(T+="/"+B.folder.id);let I;return(new Promise(function(P,L){p(["./PortalItem"],function(G){P(Object.freeze({__proto__:null,"default":G}))},L)})).then(({default:P})=>{I=P;return this.portal._request(T,{query:{folders:!1,num:B.num||10,start:B.start||1,sortField:B.sortField||"created",sortOrder:B.sortOrder||"asc"}})}).then(P=>{let L;return P&&P.items?(L=P.items.map(G=>{G=I.fromJSON(G);G.portal=this.portal;return G}),Promise.all(L.map(G=>G.load())).catch(G=>G).then(()=>({items:L,nextStart:P.nextStart,
total:P.total}))):{items:[],nextStart:-1,total:0}})};C.fetchTags=function(){return this.portal._request(this.url+"/tags").then(B=>B.tags)};C.getThumbnailUrl=function(B){let T=this.thumbnailUrl;T&&B&&(T+=`&w=${B}`);return T};C.queryFavorites=function(B){return this.favGroupId?(this._favGroup||(this._favGroup=new n({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(B)):Promise.reject(new M("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))};C.toJSON=
function(){throw new M("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented");};f.fromJSON=function(B){if(!B)return null;if(B.declaredClass)throw Error("JSON object is already hydrated");const T=new y;T.sourceJSON=B;T.read(B);return T};e._createClass(f,[{key:"thumbnailUrl",get:function(){const B=this.url,T=this.thumbnail;return B&&T?this.portal._normalizeUrl(`${B}/info/${T}?f=json`):null}},{key:"userContentUrl",get:function(){const B=this.get("portal.restUrl");return B?`${B}/content/users/${this.username}`:
null}},{key:"url",get:function(){const B=this.get("portal.restUrl");return B?`${B}/community/users/${this.username}`:null}}]);return f}(h.JSONSupport);w.__decorate([t.property()],h.prototype,"access",void 0);w.__decorate([t.property({type:Date})],h.prototype,"created",void 0);w.__decorate([t.property()],h.prototype,"culture",void 0);w.__decorate([t.property()],h.prototype,"description",void 0);w.__decorate([t.property()],h.prototype,"email",void 0);w.__decorate([t.property()],h.prototype,"favGroupId",
void 0);w.__decorate([t.property()],h.prototype,"fullName",void 0);w.__decorate([t.property({type:Date})],h.prototype,"modified",void 0);w.__decorate([t.property()],h.prototype,"orgId",void 0);w.__decorate([t.property()],h.prototype,"portal",void 0);w.__decorate([t.property()],h.prototype,"preferredView",void 0);w.__decorate([t.property()],h.prototype,"privileges",void 0);w.__decorate([t.property()],h.prototype,"region",void 0);w.__decorate([t.property()],h.prototype,"role",void 0);w.__decorate([t.property()],
h.prototype,"roleId",void 0);w.__decorate([t.property()],h.prototype,"sourceJSON",void 0);w.__decorate([t.property()],h.prototype,"thumbnail",void 0);w.__decorate([t.property({readOnly:!0})],h.prototype,"thumbnailUrl",null);w.__decorate([t.property()],h.prototype,"units",void 0);w.__decorate([t.property({readOnly:!0})],h.prototype,"userContentUrl",null);w.__decorate([t.property({readOnly:!0})],h.prototype,"url",null);w.__decorate([t.property()],h.prototype,"username",void 0);w.__decorate([t.property()],
h.prototype,"userType",void 0);return h=y=w.__decorate([H.subclass("esri.portal.PortalUser")],h)})},"esri/portal/PortalFolder":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Error ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/jsonMap ../core/accessorSupport/decorators/subclass".split(" "),function(p,e,w,M,h,t,l,E,q,u){M=function(H){function X(n){n=H.call(this,n)||this;n.created=
null;n.id=null;n.portal=null;n.title=null;n.username=null;return n}p._inheritsLoose(X,H);X.prototype.toJSON=function(){throw new w("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented");};p._createClass(X,[{key:"url",get:function(){const n=this.get("portal.restUrl");return n?`${n}/content/users/${this.username}/${this.id}`:null}}]);return X}(M.JSONSupport);e.__decorate([h.property({type:Date})],M.prototype,"created",void 0);e.__decorate([h.property()],M.prototype,"id",void 0);
e.__decorate([h.property()],M.prototype,"portal",void 0);e.__decorate([h.property()],M.prototype,"title",void 0);e.__decorate([h.property({readOnly:!0})],M.prototype,"url",null);e.__decorate([h.property()],M.prototype,"username",void 0);return M=e.__decorate([u.subclass("esri.portal.PortalFolder")],M)})},"esri/portal/PortalGroup":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Error ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/jsonMap ../core/accessorSupport/decorators/subclass ./PortalQueryParams".split(" "),
function(p,e,w,M,h,t,l,E,q,u,H){M=function(X){function n(A){A=X.call(this,A)||this;A.access=null;A.created=null;A.description=null;A.id=null;A.isInvitationOnly=!1;A.modified=null;A.owner=null;A.portal=null;A.snippet=null;A.sortField=null;A.sortOrder=null;A.tags=null;A.title=null;return A}p._inheritsLoose(n,X);var y=n.prototype;y.fetchCategorySchema=function(A){return this.portal._request(this.url+"/categorySchema",A).then(f=>{f=f.categorySchema||[];return f.some(C=>"contentCategorySetsGroupQuery.LivingAtlas"===
C.source)?this._fetchCategorySchemaSet("LivingAtlas",A):f})};y.fetchMembers=function(A){return this.portal._request(this.url+"/users",A)};y.getThumbnailUrl=function(A){let f=this.thumbnailUrl;f&&A&&(f+=`&w=${A}`);return f};y.toJSON=function(){throw new w("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented");};y.queryItems=function(A,f){A=l.ensureType(H,A);if(5<parseFloat(this.portal.currentVersion))return A=A||new H,this.portal._queryPortal(`/content/groups/${this.id}/search`,
A,"PortalItem",f);A=A?A.clone():new H;A.query="group:"+this.id+(A.query?" "+A.query:"");return this.portal.queryItems(A,f)};y._fetchCategorySchemaSet=function(A,f){return this.portal._fetchSelf(this.portal.authMode,!0,f).then(C=>{if(C=C.contentCategorySetsGroupQuery){const B=new H;B.disableExtraQuery=!0;B.num=1;B.query=C;return this.portal.queryGroups(B,f)}throw new w("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found");}).then(C=>{if(C.total){C=C.results[0];const B=
new H;B.num=1;B.query=`typekeywords:"${A}"`;return C.queryItems(B,f)}throw new w("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found");}).then(C=>C.total?C.results[0].fetchData("json",f).then(B=>(B=B&&B.categorySchema)&&B.length?B:[]):[])};p._createClass(n,[{key:"thumbnailUrl",get:function(){const A=this.url,f=this.thumbnail;return A&&f?this.portal._normalizeUrl(`${A}/info/${f}?f=json`):null}},{key:"url",get:function(){const A=this.get("portal.restUrl");return A?A+"/community/groups/"+
this.id:null}}]);return n}(M.JSONSupport);e.__decorate([h.property()],M.prototype,"access",void 0);e.__decorate([h.property({type:Date})],M.prototype,"created",void 0);e.__decorate([h.property()],M.prototype,"description",void 0);e.__decorate([h.property()],M.prototype,"id",void 0);e.__decorate([h.property()],M.prototype,"isInvitationOnly",void 0);e.__decorate([h.property({type:Date})],M.prototype,"modified",void 0);e.__decorate([h.property()],M.prototype,"owner",void 0);e.__decorate([h.property()],
M.prototype,"portal",void 0);e.__decorate([h.property()],M.prototype,"snippet",void 0);e.__decorate([h.property()],M.prototype,"sortField",void 0);e.__decorate([h.property()],M.prototype,"sortOrder",void 0);e.__decorate([h.property()],M.prototype,"tags",void 0);e.__decorate([h.property()],M.prototype,"thumbnail",void 0);e.__decorate([h.property({readOnly:!0})],M.prototype,"thumbnailUrl",null);e.__decorate([h.property()],M.prototype,"title",void 0);e.__decorate([h.property({readOnly:!0})],M.prototype,
"url",null);return M=e.__decorate([u.subclass("esri.portal.PortalGroup")],M)})},"esri/portal/PortalItem":function(){define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../assets ../core/Error ../core/JSONSupport ../core/lang ../core/Loadable ../core/maybe ../core/urlUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/has ../core/Logger ../core/jsonMap ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../geometry/Extent ./Portal ./PortalItemResource ./PortalRating".split(" "),
function(p,e,w,M,h,t,l,E,q,u,H,X,n,y,A,f,C,B,T,I,P){var L;t=L=function(G){function Y(k){k=G.call(this,k)||this;k.access=null;k.accessInformation=null;k.apiKey=null;k.applicationProxies=null;k.avgRating=null;k.categories=null;k.created=null;k.culture=null;k.description=null;k.extent=null;k.groupCategories=null;k.id=null;k.itemControl=null;k.licenseInfo=null;k.modified=null;k.name=null;k.numComments=null;k.numRatings=null;k.numViews=null;k.owner=null;k.ownerFolder=null;k.portal=null;k.screenshots=null;
k.size=null;k.snippet=null;k.sourceJSON=null;k.tags=null;k.title=null;k.type=null;k.typeKeywords=null;k.url=null;return k}e._inheritsLoose(Y,G);Y.from=function(k){return X.ensureClass(L,k)};var aa=Y.prototype;aa.destroy=function(){this.portal=null};aa.readExtent=function(k){return k&&k.length?new B(k[0][0],k[0][1],k[1][0],k[1][1]):null};aa.load=function(k){this.portal||(this.portal=T.getDefault());const x=this.portal.load(k).then(()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?this.portal._request(this.itemUrl,
{signal:q.isSome(k)?k.signal:null,query:{token:this.apiKey}}):{}).then(O=>{this.sourceJSON=O;this.read(O)});this.addResolvingPromise(x);return Promise.resolve(this)};aa.addRating=function(k){const x={method:"post",query:{}};k instanceof P&&(k=k.rating);isNaN(k)||"number"!==typeof k||(x.query.rating=k);return this.portal._request(this.itemUrl+"/addRating",x).then(()=>new P({rating:k,created:new Date}))};aa.clone=function(){const k={access:this.access,accessInformation:this.accessInformation,applicationProxies:l.clone(this.applicationProxies),
avgRating:this.avgRating,categories:l.clone(this.categories),created:l.clone(this.created),culture:this.culture,description:this.description,extent:l.clone(this.extent),groupCategories:l.clone(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:l.clone(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:l.clone(this.screenshots),
size:this.size,snippet:this.snippet,tags:l.clone(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:l.clone(this.typeKeywords),url:this.url};this.loaded&&(k.loadStatus="loaded");return(new L({sourceJSON:this.sourceJSON})).set(k)};aa.createPostQuery=function(){const k=this.toJSON();for(const x in k)"tags"===x&&null!==k[x]&&(k[x]=k[x].join(", ")),"typeKeywords"===x&&null!==k[x]&&(k[x]=k[x].join(", ")),"extent"===x&&k[x]&&(k[x]=JSON.stringify(k[x]));return k};aa.deleteRating=
function(){return this.portal._request(this.itemUrl+"/deleteRating",{method:"post"}).then(()=>{})};aa.fetchData=function(k="json",x){return this.portal._request(this.itemUrl+"/data",{responseType:k,...x,query:{token:this.apiKey}})};aa.fetchRating=function(k){return this.portal._request(this.itemUrl+"/rating",{query:{token:this.apiKey},...k}).then(x=>null!=x.rating?(x.created=new Date(x.created),new P(x)):null)};aa.fetchRelatedItems=function(k,x){return this.portal._requestToTypedArray(this.itemUrl+
"/relatedItems",{query:{...k,token:this.apiKey},...x},L)};aa.getThumbnailUrl=function(k){let x=this.thumbnailUrl;x&&k&&(x+=`&w=${k}`);return x};aa.reload=function(){return this.portal._request(this.itemUrl,{cacheBust:!0,query:{token:this.apiKey}}).then(k=>{this.sourceJSON=k;this.read(k);return this})};aa.update=function(k){return this.id?this.load().then(()=>this.portal._signIn()).then(()=>{const x=k&&k.data,O={method:"post"};O.query=this.createPostQuery();for(const R in O.query)null===O.query[R]&&
(O.query[R]="");O.query.clearEmptyFields=!0;null!=x&&("string"===typeof x?O.query.text=x:"object"===typeof x&&(O.query.text=JSON.stringify(x)));return this.portal._request(`${this.userItemUrl}/update`,O).then(()=>this.reload())}):Promise.reject(new h("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))};aa.updateThumbnail=function(k){return this.id?this.load().then(()=>this.portal._signIn()).then(()=>{const x=k.thumbnail,O=k.filename,R={method:"post"};if("string"===typeof x)u.isDataProtocol(x)?
R.query={data:x}:R.query={url:u.makeAbsolute(x)},q.isSome(O)&&(R.query.filename=O);else{const D=new FormData;q.isSome(O)?D.append("file",x,O):D.append("file",x);R.body=D}return this.portal._request(`${this.userItemUrl}/updateThumbnail`,R).then(()=>this.reload())}):Promise.reject(new h("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))};aa.fetchResources=function(){var k=e._asyncToGenerator(function*(x={},O){return(yield new Promise(function(R,D){p(["./support/resourceUtils"],
R,D)})).fetchResources(this,x,O)});return function(){return k.apply(this,arguments)}}();aa.addResource=function(){var k=e._asyncToGenerator(function*(x,O,R){const D=yield new Promise(function(g,b){p(["./support/resourceUtils"],g,b)});x.portalItem=this;return D.addOrUpdateResource(x,"add",O,R)});return function(x,O,R){return k.apply(this,arguments)}}();aa.removeResource=function(){var k=e._asyncToGenerator(function*(x,O){const R=yield new Promise(function(D,g){p(["./support/resourceUtils"],D,g)});
if(x.portalItem&&x.portalItem.itemUrl!==this.itemUrl)throw new h("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return R.removeResource(this,x,O)});return function(x,O){return k.apply(this,arguments)}}();aa.removeAllResources=function(){var k=e._asyncToGenerator(function*(x){return(yield new Promise(function(O,R){p(["./support/resourceUtils"],O,R)})).removeAllResources(this,x)});return function(x){return k.apply(this,arguments)}}();
aa.resourceFromPath=function(k){return new I({portalItem:this,path:k})};aa.toJSON=function(){var k=this.extent;k={created:this.created&&this.created.getTime(),description:this.description,extent:k&&[[k.xmin,k.ymin],[k.xmax,k.ymax]],id:this.id,modified:this.modified&&this.modified.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,tags:this.tags,thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:this.typeKeywords,url:this.url};return l.fixJson(k)};
Y.fromJSON=function(k){if(!k)return null;if(k.declaredClass)throw Error("JSON object is already hydrated");return new L({sourceJSON:k})};aa._getPostQuery=function(){const k=this.toJSON();for(const x in k)"tags"===x&&null!==k[x]&&(k[x]=k[x].join(", ")),"typeKeywords"===x&&null!==k[x]&&(k[x]=k[x].join(", ")),"extent"===x&&k[x]&&(k[x]=JSON.stringify(k[x]));return k};e._createClass(Y,[{key:"displayName",get:function(){const k=this.type,x=this.typeKeywords||[];let O=k;"Feature Service"===k||"Feature Collection"===
k?O=-1<x.indexOf("Table")?"Table":-1<x.indexOf("Route Layer")?"Route Layer":-1<x.indexOf("Markup")?"Markup":"Feature Layer":"Image Service"===k?O=-1<x.indexOf("Elevation 3D Layer")?"Elevation Layer":-1<x.indexOf("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":"Scene Service"===k?O="Scene Layer":"Scene Package"===k?O="Scene Layer Package":"Stream Service"===k?O="Feature Layer":"Geoprocessing Service"===k&&this.portal&&this.portal.isPortal?O=-1<x.indexOf("Web Tool")?"Tool":"Geoprocessing Service":
"Geocoding Service"===k?O="Locator":"Geoenrichment Service"===k?O="GeoEnrichment Service":"Microsoft Powerpoint"===k?O="Microsoft PowerPoint":"GeoJson"===k?O="GeoJSON":"Globe Service"===k?O="Globe Layer":"Vector Tile Service"===k?O="Tile Layer":"netCDF"===k?O="NetCDF":"Map Service"===k?O=-1===x.indexOf("Spatiotemporal")&&(-1<x.indexOf("Hosted Service")||-1<x.indexOf("Tiled"))&&-1===x.indexOf("Relational")?"Tile Layer":"Map Image Layer":k&&-1<k.toLowerCase().indexOf("add in")?O=k.replace(/(add in)/gi,
"Add-In"):"datastore catalog service"===k?O="Big Data File Share":"Compact Tile Package"===k?O="Tile Package (tpkx)":"OGCFeatureServer"===k&&(O="OGC Feature Layer");return O}},{key:"iconUrl",get:function(){var k=this.type&&this.type.toLowerCase()||"";const x=this.typeKeywords||[];let O=!1,R=!1,D=!1,g=!1,b=!1,z=!1;0<k.indexOf("service")||"feature collection"===k||"kml"===k||"wms"===k||"wmts"===k||"wfs"===k?(O=-1<x.indexOf("Hosted Service"),"feature service"===k||"feature collection"===k||"kml"===k||
"wfs"===k?(R=-1<x.indexOf("Table"),D=-1<x.indexOf("Route Layer"),g=-1<x.indexOf("Markup"),b=-1!==x.indexOf("Spatiotemporal"),z=-1!==x.indexOf("UtilityNetwork"),k=b&&R?"spatiotemporaltable":R?"table":D?"routelayer":g?"markup":b?"spatiotemporal":O?"featureshosted":z?"utilitynetwork":"features"):k="map service"===k||"wms"===k||"wmts"===k?O||-1<x.indexOf("Tiled")||"wmts"===k?"maptiles":"mapimages":"scene service"===k?-1<x.indexOf("Line")?"sceneweblayerline":-1<x.indexOf("3DObject")?"sceneweblayermultipatch":
-1<x.indexOf("Point")?"sceneweblayerpoint":-1<x.indexOf("IntegratedMesh")?"sceneweblayermesh":-1<x.indexOf("PointCloud")?"sceneweblayerpointcloud":-1<x.indexOf("Polygon")?"sceneweblayerpolygon":-1<x.indexOf("Building")?"sceneweblayerbuilding":-1<x.indexOf("Voxel")?"sceneweblayervoxel":"sceneweblayer":"image service"===k?-1<x.indexOf("Elevation 3D Layer")?"elevationlayer":-1<x.indexOf("Tiled Imagery")?"tiledimagerylayer":"imagery":"stream service"===k?"streamlayer":"vector tile service"===k?"vectortile":
"datastore catalog service"===k?"datastorecollection":"geocoding service"===k?"geocodeservice":"geoprocessing service"===k?-1<x.indexOf("Web Tool")&&this.portal&&this.portal.isPortal?"tool":"layers":"layers"):k="web map"===k||"cityengine web scene"===k?"maps":"web scene"===k?-1<x.indexOf("ViewingMode-Local")?"webscenelocal":"websceneglobal":"web mapping application"===k||"mobile application"===k||"application"===k||"operation view"===k||"desktop application"===k?"apps":"map document"===k||"map package"===
k||"published map"===k||"scene document"===k||"globe document"===k||"basemap package"===k||"mobile basemap package"===k||"mobile map package"===k||"project package"===k||"project template"===k||"pro map"===k||"layout"===k||"layer"===k&&-1<x.indexOf("ArcGIS Pro")||"explorer map"===k&&x.indexOf("Explorer Document")?"mapsgray":"service definition"===k||"csv"===k||"shapefile"===k||"cad drawing"===k||"geojson"===k||"360 vr experience"===k||"netcdf"===k||"administrative report"===k?"datafiles":"explorer add in"===
k||"desktop add in"===k||"windows viewer add in"===k||"windows viewer configuration"===k?"appsgray":"arcgis pro add in"===k||"arcgis pro configuration"===k?"addindesktop":"rule package"===k||"file geodatabase"===k||"sqlite geodatabase"===k||"csv collection"===k||"kml collection"===k||"windows mobile package"===k||"map template"===k||"desktop application template"===k||"gml"===k||"arcpad package"===k||"code sample"===k||"form"===k||"document link"===k||"earth configuration"===k||"operations dashboard add in"===
k||"rules package"===k||"image"===k||"workflow manager package"===k||"explorer map"===k&&-1<x.indexOf("Explorer Mapping Application")||-1<x.indexOf("Document")?"datafilesgray":"network analysis service"===k||"geoprocessing service"===k||"geodata service"===k||"geometry service"===k||"geoprocessing package"===k||"locator package"===k||"geoprocessing sample"===k||"workflow manager service"===k?"toolsgray":"layer"===k||"layer package"===k||"explorer layer"===k?"layersgray":"scene package"===k?"scenepackage":
"mobile scene package"===k?"mobilescenepackage":"tile package"===k||"compact tile package"===k?"tilepackage":"task file"===k?"taskfile":"report template"===k?"report-template":"statistical data collection"===k?"statisticaldatacollection":"insights workbook"===k?"workbook":"insights model"===k?"insightsmodel":"insights page"===k?"insightspage":"insights theme"===k?"insightstheme":"hub initiative"===k?"hubinitiative":"hubpage"===k?"hubpage":"hub event"===k?"hubevent":"hub site application"===k?"hubsite":
"relational database connection"===k?"relationaldatabaseconnection":"big data file share"===k?"datastorecollection":"image collection"===k?"imagecollection":"style"===k?"style":"desktop style"===k?"desktopstyle":"dashboard"===k?"dashboard":"raster function template"===k?"rasterprocessingtemplate":"vector tile package"===k?"vectortilepackage":"ortho mapping project"===k?"orthomappingproject":"ortho mapping template"===k?"orthomappingtemplate":"solution"===k?"solutions":"geopackage"===k?"geopackage":
"deep learning package"===k?"deeplearningpackage":"real time analytic"===k?"realtimeanalytics":"big data analytic"===k?"bigdataanalytics":"feed"===k?"feed":"excalibur imagery project"===k?"excaliburimageryproject":"notebook"===k?"notebook":"storymap"===k?"storymap":"survey123 add in"===k?"survey123addin":"mission"===k?"mission":"mission report"===k?"missionreport":"quickcapture project"===k?"quickcaptureproject":"pro report"===k?"proreport":"urban model"===k?"urbanmodel":"web experience"===k?"experiencebuilder":
"web experience template"===k?"webexperiencetemplate":"workflow"===k?"workflow":"insights script"===k?"insightsscript":"kernel gateway connection"===k?"kernelgatewayconnection":"hub initiative template"===k?"hubinitiativetemplate":"storymap theme"===k?"storymaptheme":"knowledge graph"===k?"knowledgegraph":"native application"===k?"nativeapp":"native application installer"===k?"nativeappinstaller":"link chart"===k?"linkchart":"investigation"===k?"investigation":"ogcfeatureserver"===k?"features":"pro project"===
k?"proproject":"insights workbook package"===k?"insightsworkbookpackage":"maps";return k?M.getAssetUrl("esri/images/portal/"+k+"16.png"):null}},{key:"isLayer",get:function(){return-1<"Map Service;Feature Service;Feature Collection;Scene Service;Image Service;Stream Service;Vector Tile Service;WMTS;WMS".split(";").indexOf(this.type)}},{key:"itemUrl",get:function(){const k=this.get("portal.restUrl");return k?k+"/content/items/"+this.id:null}},{key:"thumbnailUrl",get:function(){const k=this.itemUrl,
x=this.thumbnail;return k&&x?this.portal._normalizeUrl(`${k}/info/${x}?f=json`):null}},{key:"userItemUrl",get:function(){const k=this.get("portal.restUrl");if(!k)return null;const x=this.owner||this.get("portal.user.username");return x?`${k}/content/users/${this.ownerFolder?`${x}/${this.ownerFolder}`:x}/items/${this.id}`:null}}]);return Y}(t.JSONSupportMixin(E));w.__decorate([H.property({type:["private","shared","org","public"]})],t.prototype,"access",void 0);w.__decorate([H.property()],t.prototype,
"accessInformation",void 0);w.__decorate([H.property({type:String})],t.prototype,"apiKey",void 0);w.__decorate([H.property({json:{read:{source:"appProxies"}}})],t.prototype,"applicationProxies",void 0);w.__decorate([H.property()],t.prototype,"avgRating",void 0);w.__decorate([H.property()],t.prototype,"categories",void 0);w.__decorate([H.property({type:Date})],t.prototype,"created",void 0);w.__decorate([H.property()],t.prototype,"culture",void 0);w.__decorate([H.property()],t.prototype,"description",
void 0);w.__decorate([H.property({readOnly:!0})],t.prototype,"displayName",null);w.__decorate([H.property({type:B})],t.prototype,"extent",void 0);w.__decorate([f.reader("extent")],t.prototype,"readExtent",null);w.__decorate([H.property()],t.prototype,"groupCategories",void 0);w.__decorate([H.property({readOnly:!0})],t.prototype,"iconUrl",null);w.__decorate([H.property()],t.prototype,"id",void 0);w.__decorate([H.property({readOnly:!0})],t.prototype,"isLayer",null);w.__decorate([H.property()],t.prototype,
"itemControl",void 0);w.__decorate([H.property({readOnly:!0})],t.prototype,"itemUrl",null);w.__decorate([H.property()],t.prototype,"licenseInfo",void 0);w.__decorate([H.property({type:Date})],t.prototype,"modified",void 0);w.__decorate([H.property()],t.prototype,"name",void 0);w.__decorate([H.property()],t.prototype,"numComments",void 0);w.__decorate([H.property()],t.prototype,"numRatings",void 0);w.__decorate([H.property()],t.prototype,"numViews",void 0);w.__decorate([H.property()],t.prototype,"owner",
void 0);w.__decorate([H.property()],t.prototype,"ownerFolder",void 0);w.__decorate([H.property({type:T})],t.prototype,"portal",void 0);w.__decorate([H.property()],t.prototype,"screenshots",void 0);w.__decorate([H.property()],t.prototype,"size",void 0);w.__decorate([H.property()],t.prototype,"snippet",void 0);w.__decorate([H.property()],t.prototype,"sourceJSON",void 0);w.__decorate([H.property()],t.prototype,"tags",void 0);w.__decorate([H.property()],t.prototype,"thumbnail",void 0);w.__decorate([H.property({readOnly:!0})],
t.prototype,"thumbnailUrl",null);w.__decorate([H.property()],t.prototype,"title",void 0);w.__decorate([H.property()],t.prototype,"type",void 0);w.__decorate([H.property()],t.prototype,"typeKeywords",void 0);w.__decorate([H.property()],t.prototype,"url",void 0);w.__decorate([H.property({readOnly:!0})],t.prototype,"userItemUrl",null);return t=L=w.__decorate([C.subclass("esri.portal.PortalItem")],t)})},"esri/portal/PortalItemResource":function(){define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Accessor ../core/Error ../core/Logger ../core/maybe ../core/urlUtils ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/decorators/cast ../core/jsonMap ../core/accessorSupport/decorators/subclass".split(" "),
function(p,e,w,M,h,t,l,E,q,u,H,X,n){const y=t.getLogger("esri.portal.PortalItemResource");M=function(A){function f(B){B=A.call(this,B)||this;B.portalItem=null;return B}e._inheritsLoose(f,A);var C=f.prototype;C.normalizeCtorArgs=function(B){return B&&B.portalItem&&B.path?{...B,path:this.normalizePath(B.path,B.portalItem)}:B};C._castPath=function(B){return this.normalizePath(B,this.portalItem)};C.fetch=function(B="json",T){const I=this.url;if(l.isNone(I))throw new h("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");
return this.portalItem.portal._request(I,{responseType:B,query:{token:this.portalItem.apiKey},signal:l.get(T,"signal")})};C.update=function(){var B=e._asyncToGenerator(function*(T,I){return(yield new Promise(function(P,L){p(["./support/resourceUtils"],P,L)})).addOrUpdateResource(this,"update",T,I)});return function(T,I){return B.apply(this,arguments)}}();C.hasPath=function(){return l.isSome(this.path)};C.normalizePath=function(B,T){if(l.isNone(B))return B;B=B.replace(/^\/+/,"");l.isSome(T)&&E.isAbsolute(B)&&
(B=E.makeRelative(B,T.itemUrl));return B.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,"")};e._createClass(f,[{key:"path",set:function(B){l.isSome(B)&&E.isAbsolute(B)?y.error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",B)}},{key:"url",get:function(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}},{key:"itemRelativeUrl",get:function(){return this.portalItem&&this.path?`./resources/${this.path}`:null}}]);
return f}(M);w.__decorate([q.property()],M.prototype,"portalItem",void 0);w.__decorate([q.property({type:String,value:null})],M.prototype,"path",null);w.__decorate([H.cast("path")],M.prototype,"_castPath",null);w.__decorate([q.property({type:String,readOnly:!0})],M.prototype,"url",null);w.__decorate([q.property({type:String,readOnly:!0})],M.prototype,"itemRelativeUrl",null);return M=w.__decorate([n.subclass("esri.portal.PortalItemResource")],M)})},"esri/portal/PortalRating":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Accessor ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/jsonMap ../core/accessorSupport/decorators/subclass".split(" "),
function(p,e,w,M,h,t,l,E,q){w=function(u){function H(X){X=u.call(this,X)||this;X.created=null;X.rating=null;return X}p._inheritsLoose(H,u);return H}(w);e.__decorate([M.property()],w.prototype,"created",void 0);e.__decorate([M.property()],w.prototype,"rating",void 0);return w=e.__decorate([q.subclass("esri.portal.PortalRating")],w)})},"esri/support/basemapDefinitions":function(){define(["exports","../chunks/_rollupPluginBabelHelpers","../assets","../intl/messages"],function(p,e,w,M){function h(){h=
e._asyncToGenerator(function*(t){if(t){var l=-1<t.indexOf("-vector")?t.slice(0,t.indexOf("-vector")):t,E=yield M.fetchMessageBundle("esri/t9n/basemaps");return E[t]||E[l]}});return h.apply(this,arguments)}p.esriBasemapDefinitions={streets:{id:"streets",get thumbnailUrl(){return w.getAssetUrl("esri/images/basemap/streets.jpg")},baseMapLayers:[{id:"streets-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Street Map",
showLegend:!1,visibility:!0,opacity:1}]},satellite:{id:"satellite",get thumbnailUrl(){return w.getAssetUrl("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",get thumbnailUrl(){return w.getAssetUrl("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",
url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Boundaries and Places",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",get thumbnailUrl(){return w.getAssetUrl("esri/images/basemap/terrain.jpg")},
baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},topo:{id:"topo",
get thumbnailUrl(){return w.getAssetUrl("esri/images/basemap/topo.jpg")},baseMapLayers:[{id:"topo-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Topo Map",showLegend:!1,visibility:!0,opacity:1}]},gray:{id:"gray",get thumbnailUrl(){return w.getAssetUrl("esri/images/basemap/gray.jpg")},baseMapLayers:[{id:"gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer",
layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"dark-gray":{id:"dark-gray",get thumbnailUrl(){return w.getAssetUrl("esri/images/basemap/dark-gray.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",
url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"dark-gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",get thumbnailUrl(){return w.getAssetUrl("esri/images/basemap/oceans.jpg")},
baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"national-geographic":{id:"national-geographic",
get thumbnailUrl(){return w.getAssetUrl("esri/images/basemap/national-geographic.jpg")},baseMapLayers:[{id:"national-geographic-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer",title:"NatGeo World Map",showLegend:!1,layerType:"ArcGISTiledMapServiceLayer",visibility:!0,opacity:1}]},osm:{id:"osm",get thumbnailUrl(){return w.getAssetUrl("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,
visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",get thumbnailUrl(){return w.getAssetUrl("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",
layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},"gray-vector":{id:"gray-vector",get thumbnailUrl(){return w.getAssetUrl("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",
layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},"streets-vector":{id:"streets-vector",get thumbnailUrl(){return w.getAssetUrl("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},"topo-vector":{id:"topo-vector",get thumbnailUrl(){return w.getAssetUrl("esri/images/basemap/topo-vector.jpg")},
baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},"streets-night-vector":{id:"streets-night-vector",
get thumbnailUrl(){return w.getAssetUrl("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",get thumbnailUrl(){return w.getAssetUrl("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",
url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",get thumbnailUrl(){return w.getAssetUrl("esri/images/basemap/streets-navigation.jpg")},
baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"arcgis-imagery":{get thumbnailUrl(){return w.getAssetUrl("esri/images/basemap/hybrid.jpg")},title:"Imagery Hybrid",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"},
{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-imagery-standard":{get thumbnailUrl(){return w.getAssetUrl("esri/images/basemap/satellite.jpg")},title:"Imagery",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"}]},"arcgis-imagery-labels":{title:"Hybrid [Reference]",
baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-light-gray":{get thumbnailUrl(){return w.getAssetUrl("esri/images/basemap/gray-vector.jpg")},title:"Light Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Base",title:"Light Gray Canvas Base"},{layerType:"VectorTileLayer",
styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Labels",title:"Light Gray Canvas Labels",isReference:!0}]},"arcgis-dark-gray":{get thumbnailUrl(){return w.getAssetUrl("esri/images/basemap/dark-gray.jpg")},title:"Dark Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Base",title:"Dark Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Labels",
title:"Dark Gray Canvas Labels",isReference:!0}]},"arcgis-navigation":{get thumbnailUrl(){return w.getAssetUrl("esri/images/basemap/streets-navigation.jpg")},title:"Navigation",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Navigation",title:"World Navigation Map"}]},"arcgis-navigation-night":{title:"Navigation (Dark Mode)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:NavigationNight",
title:"World Navigation Map (Dark Mode)"}]},"arcgis-streets":{get thumbnailUrl(){return w.getAssetUrl("esri/images/basemap/streets-vector.jpg")},title:"Streets",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Streets",title:"World Street Map"}]},"arcgis-streets-night":{get thumbnailUrl(){return w.getAssetUrl("esri/images/basemap/streets-night.jpg")},title:"Streets (Night)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsNight",
title:"World Street Map (Night)"}]},"arcgis-streets-relief":{get thumbnailUrl(){return w.getAssetUrl("esri/images/basemap/streets-relief.jpg")},title:"Streets (with Relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsRelief:Base",title:"World Street Map (with Relief)"}]},
"arcgis-topographic":{get thumbnailUrl(){return w.getAssetUrl("esri/images/basemap/topo.jpg")},title:"Topographic",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Topographic:Base",title:"World Topographic Map"}]},"arcgis-oceans":{get thumbnailUrl(){return w.getAssetUrl("esri/images/basemap/oceans.jpg")},
title:"Oceans",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Ocean Base",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Oceans:Labels",title:"World Ocean Reference",isReference:!0}]},"osm-standard":{title:"OpenStreetMap",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Standard",
title:"OpenStreetMap"}]},"osm-standard-relief":{title:"OpenStreetMap (with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StandardRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-streets":{title:"OpenStreetMap (Streets)",baseMapLayers:[{layerType:"VectorTileLayer",
styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Streets",title:"OpenStreetMap (Streets)"}]},"osm-streets-relief":{title:"OpenStreetMap (Streets with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StreetsRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},
"osm-light-gray":{title:"OpenStreetMap (Light Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Base",title:"OSM (Light Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Labels",title:"OSM (Light Gray Reference)",isReference:!0}]},"osm-dark-gray":{title:"OpenStreetMap (Dark Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",
styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Base",title:"OSM (Dark Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Labels",title:"OSM (Dark Gray Reference)",isReference:!0}]},"arcgis-terrain":{title:"Terrain with Labels",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},
{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Base",title:"World Terrain Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Detail",title:"World Terrain Reference",isReference:!0}]},"arcgis-community":{title:"Community",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Community",title:"Community"}]},
"arcgis-charted-territory":{title:"Charted Territory",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ChartedTerritory:Base",title:"Charted Territory"}]},"arcgis-colored-pencil":{title:"Colored Pencil",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ColoredPencil",
title:"Colored Pencil"}]},"arcgis-nova":{title:"Nova",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Nova",title:"Nova"}]},"arcgis-modern-antique":{title:"Modern Antique",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ModernAntique:Base",
title:"Modern Antique"}]},"arcgis-midcentury":{title:"Mid-Century",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Midcentury",title:"Mid-Century"}]},"arcgis-newspaper":{title:"Newspaper",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Newspaper",title:"Newspaper"}]},"arcgis-hillshade-light":{title:"Hillshade",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",
showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"}]},"arcgis-hillshade-dark":{title:"Hillshade (Dark)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade (Dark)",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade_Dark/MapServer"}]}};p.getBasemapTitle=function(t){return h.apply(this,arguments)};Object.defineProperty(p,"__esModule",{value:!0})})},
"esri/webdoc/support/writeUtils":function(){define("exports ../../core/Error ../../core/lang ../../core/maybe ../../core/object ../../core/accessorSupport/extensions/serializableProperty/writer".split(" "),function(p,e,w,M,h,t){function l(H){return!("feature"!==H.type||H.url||!H.source||"memory"!==H.source.type)}function E(H,X){"maxScale"in H&&(X.maxScale=t.numberToJSON(H.maxScale));"minScale"in H&&(X.minScale=t.numberToJSON(H.minScale))}const q=new Set("bing-maps imagery imagery-tile map-image open-street-map tile unknown unsupported vector-tile web-tile".split(" ")),
u=new Set("csv feature geo-rss group imagery imagery-tile kml map-image map-notes ogc-feature tile unknown unsupported vector-tile web-tile wfs".split(" "));p.disableRestrictedWriting=function(H){q.add(H);u.add(H)};p.enableRestrictedWriting=function(H){q.delete(H);u.delete(H)};p.getLayerJSON=function(H,X,n){if(!("write"in H&&H.write))return n&&n.messages&&n.messages.push(new e("layer:unsupported",`Layers (${H.title}, ${H.id}) of type '${H.declaredClass}' cannot be persisted`,{layer:H})),null;if(n.restrictedWebMapWriting){var y=
"basemap"===n.layerContainerType?q:"operational-layers"===n.layerContainerType?u:null;y=M.isSome(y)?y.has(H.type)&&!l(H):!0}else y=!0;if(y)return X={},H.write(X,n)?X:null;if(M.isSome(X)&&(n=X=w.clone(X),l(H)?(y=(y=h.getDeepValue("featureCollection.layers",n))&&y[0]&&y[0].layerDefinition)&&E(H,y):"stream"===H.type?(y=n.layerDefinition=n.layerDefinition||{},E(H,y)):"group"!==H.type&&E(H,n),"blendMode"in H&&(n.blendMode=H.blendMode,"normal"===n.blendMode&&delete n.blendMode),n.opacity=t.numberToJSON(H.opacity),
n.title=H.title||"Layer",n.visibility=H.visible,"legendEnabled"in H&&"wmts"!==H.type))if(l(H)){if(n=n.featureCollection)n.showLegend=H.legendEnabled}else n.showLegend=H.legendEnabled;return X};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/graphics/sources/support/clientSideDefaults":function(){define(["exports","../../../../core/has","../../../../core/lang","../../data/QueryEngineCapabilities","../../../../symbols/support/defaultsJSON"],function(p,e,w,M,h){p.createCapabilities=
function(t,l){return{attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:t},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:l,supportsDelete:l,supportsEditing:l,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAttachments:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:l,supportsExceedsLimitStatistics:!0},query:M.queryCapabilities,queryRelated:{supportsCount:!0,
supportsOrderBy:!0,supportsPagination:!0},editing:{supportsGeometryUpdate:l,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1}}};p.createDefaultAttributesFunction=function(t,l){if(e("csp-restrictions"))return()=>({[l]:null,...t});try{let E=`this.${l} = null;`;for(const u in t){const H=
u.indexOf(".")?`["${u}"]`:`.${u}`;E+=`this${H} = ${JSON.stringify(t[u])};`}const q=new Function(E);return()=>new q}catch(E){return()=>({[l]:null,...t})}};p.createDefaultTemplate=function(t={}){return[{name:"New Feature",description:"",prototype:{attributes:w.clone(t)}}]};p.createDrawingInfo=function(t){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===t||"esriGeometryMultipoint"===t?h.defaultPointSymbolJSON:"esriGeometryPolyline"===t?h.defaultPolylineSymbolJSON:h.defaultPolygonSymbolJSON}}};
Object.defineProperty(p,"__esModule",{value:!0})})},"esri/symbols/support/defaultsJSON":function(){define(["exports"],function(p){const e=[252,146,31,255],w={type:"esriSMS",style:"esriSMSCircle",size:6,color:e,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},M={type:"esriSLS",style:"esriSLSSolid",width:.75,color:e};p.defaultColor=e;p.defaultOutlineColor=[153,153,153,255];p.defaultPointSymbolJSON=w;p.defaultPolygonSymbolJSON={type:"esriSFS",style:"esriSFSSolid",color:[252,
146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}};p.defaultPolylineSymbolJSON=M;p.defaultTextSymbolJSON={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0};p.errorPointSymbolJSON={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5};p.errorPolygonSymbolJSON={type:"esriSFS",
style:"esriSFSSolid",color:[0,0,0,255],outline:null};p.errorPolylineSymbolJSON={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/graphics/sources/support/sourceUtils":function(){define(["require","exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../geometry/support/spatialReferenceUtils","../../../support/fieldUtils"],function(p,e,w,M,h){function t(A){return new H(A)}function l(){return E.apply(this,
arguments)}function E(){E=w._asyncToGenerator(function*(){return y?y:y=yield new Promise(function(A,f){p(["../../../../geometry/geometryEngineJSON"],A,f)})});return E.apply(this,arguments)}function q(){q=w._asyncToGenerator(function*(A,f){!M.isValid(A)||"esriGeometryPolygon"!==f&&"esriGeometryPolyline"!==f||(yield l())});return q.apply(this,arguments)}let u=function(){this.description=this.code=null},H=function(A){this.error=new u;this.objectId=this.globalId=null;this.success=!1;this.uniqueId=null;
this.error.description=A},X=function(A){this.globalId=null;this.success=!0;this.objectId=this.uniqueId=A};const n=new Set;let y;e.createFeatureEditErrorResult=t;e.createFeatureEditSuccessResult=function(A){return new X(A)};e.loadGeometryEngine=l;e.loadGeometryEngineForSimplify=function(A,f){return q.apply(this,arguments)};e.mixAttributes=function(A,f,C,B,T=!1,I){n.clear();for(const Y in C){const aa=A.get(Y);if(aa){var P=C[Y];{var L=aa;var G=P;let k=G;"string"===typeof G&&h.isNumericField(L)?k=parseFloat(G):
null!=G&&h.isStringField(L)&&"string"!==typeof G&&(k=String(G));L=h.sanitizeNullFieldValue(k)}L!==P&&I&&I.push({name:"invalid-value-type",message:"attribute value was converted to match the field type",details:{field:aa,originalValue:P,sanitizedValue:L}});n.add(aa.name);if(aa&&(T||aa.editable)){if(P=h.validateFieldValue(aa,L))return t(h.validationErrorToString(P,aa,L));f[aa.name]=L}}}if(B)for(const Y of B)if(!n.has(Y.name))return t(`missing required field "${Y.name}"`);return null};e.simplify=function(A,
f){if(!A||!M.isValid(f))return A;if("rings"in A||"paths"in A){if(!y)throw new TypeError("geometry engine not loaded");return y.simplify(f,A)}return A};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/layers/support/fieldType":function(){define(["exports","../../core/jsonMap"],function(p,e){e=new e.JSONMap({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",
esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"});p.kebabDict=e;Object.defineProperty(p,"__esModule",{value:!0})})},"*noref":1}});
define("../../../../chunks/_rollupPluginBabelHelpers ../../../../core/Error ../../../../geometry/support/jsonUtils ../../../../geometry/support/spatialReferenceUtils ../../featureConversionUtils ../../objectIdUtils ../../data/FeatureStore ../../data/projectionSupport ../../data/QueryEngine ./clientSideDefaults ./sourceUtils ../../../support/FieldsIndex ../../../support/fieldType ../../../support/fieldUtils".split(" "),function(p,e,w,M,h,t,l,E,q,u,H,X,n,y){function A(I){return w.isPoint(I)?null!=I.z:
!!I.hasZ}function f(I){return w.isPoint(I)?null!=I.m:!!I.hasM}const C=M.WGS84,B={xmin:-180,ymin:-90,xmax:180,ymax:90,spatialReference:M.WGS84},T={hasAttachments:!1,capabilities:"query, editing, create, delete, update",useStandardizedQueries:!0,supportsCoordinatesQuantization:!0,supportsReturningQueryGeometry:!0,advancedQueryCapabilities:{supportsQueryAttachments:!1,supportsStatistics:!0,supportsPercentileStatistics:!0,supportsReturningGeometryCentroid:!0,supportsQueryWithDistance:!0,supportsDistinct:!0,
supportsReturningQueryExtent:!0,supportsReturningGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQueryWithResultType:!1,supportsSqlExpression:!0,supportsDisjointSpatialRel:!0}};return function(){function I(){this._nextObjectId=this._queryEngine=null}var P=I.prototype;P.destroy=function(){this._queryEngine&&this._queryEngine&&this._queryEngine.destroy();this._queryEngine=this._requiredFields=this._fieldsIndex=this._createDefaultAttributes=null};P.load=
function(){var L=p._asyncToGenerator(function*(G){var Y=[];const {features:aa}=G;var k=this._inferLayerProperties(aa,G.fields);const x=G.fields||[],O=null!=G.hasM?G.hasM:k.hasM,R=null!=G.hasZ?G.hasZ:k.hasZ;var D=!G.spatialReference&&!k.spatialReference;const g=D?C:G.spatialReference||k.spatialReference,b=D?B:null,z=G.geometryType||k.geometryType;let J=G.objectIdField||k.objectIdField;G=G.timeInfo;if(z&&(D&&Y.push({name:"feature-layer:spatial-reference-not-found",message:"Spatial reference not provided or found in features. Defaults to WGS84"}),
!z))throw new e("feature-layer:missing-property","geometryType not set and couldn't be inferred from the provided features");if(!J)throw new e("feature-layer:missing-property","objectIdField not set and couldn't be found in the provided fields");k.objectIdField&&J!==k.objectIdField&&(Y.push({name:"feature-layer:duplicated-oid-field",message:`Provided objectIdField "${J}" doesn't match the field name "${k.objectIdField}", found in the provided fields`}),J=k.objectIdField);if(J&&!k.objectIdField){let ba=
null;x.some(ia=>ia.name===J?(ba=ia,!0):!1)?(ba.type="esriFieldTypeOID",ba.editable=!1,ba.nullable=!1):x.unshift({alias:J,name:J,type:"esriFieldTypeOID",editable:!1,nullable:!1})}for(const ba of x){null==ba.name&&(ba.name=ba.alias);null==ba.alias&&(ba.alias=ba.name);if(!ba.name)throw new e("feature-layer:invalid-field-name","field name is missing",{field:ba});ba.name===J&&(ba.type="esriFieldTypeOID");if(-1===n.kebabDict.jsonValues.indexOf(ba.type))throw new e("feature-layer:invalid-field-type",`invalid type for field "${ba.name}"`,
{field:ba});}k={};this._requiredFields=[];for(var W of x)"esriFieldTypeOID"!==W.type&&"esriFieldTypeGlobalID"!==W.type&&(W.editable=null==W.editable?!0:!!W.editable,W.nullable=null==W.nullable?!0:!!W.nullable,D=y.getFieldDefaultValue(W),W.nullable||void 0!==D?k[W.name]=D:this._requiredFields.push(W));this._fieldsIndex=new X(x);this._createDefaultAttributes=u.createDefaultAttributesFunction(k,J);G&&(G.startTimeField&&((W=this._fieldsIndex.get(G.startTimeField))?(G.startTimeField=W.name,W.type="esriFieldTypeDate"):
G.startTimeField=null),G.endTimeField&&((W=this._fieldsIndex.get(G.endTimeField))?(G.endTimeField=W.name,W.type="esriFieldTypeDate"):G.endTimeField=null),G.trackIdField&&((W=this._fieldsIndex.get(G.trackIdField))?G.trackIdField=W.name:(G.trackIdField=null,Y.push({name:"feature-layer:invalid-timeInfo-trackIdField",message:"trackIdField is missing",details:{timeInfo:G}}))),G.startTimeField||G.endTimeField||(Y.push({name:"feature-layer:invalid-timeInfo",message:"startTimeField and endTimeField are missing or invalid",
details:{timeInfo:G}}),G=null));Y={warnings:Y,featureErrors:[],layerDefinition:{...T,drawingInfo:u.createDrawingInfo(z),templates:u.createDefaultTemplate(k),extent:b,geometryType:z,objectIdField:J,fields:x,hasZ:!!R,hasM:!!O,timeInfo:G},assignedObjectIds:{}};this._queryEngine=new q["default"]({fields:x,geometryType:z,hasM:O,hasZ:R,objectIdField:J,spatialReference:g,featureStore:new l({geometryType:z,hasM:O,hasZ:R}),timeInfo:G,cacheSpatialQueries:!0});if(!aa||!aa.length)return this._nextObjectId=t.initialObjectId,
Y;this._nextObjectId=t.findLastObjectIdFromFeatures(J,aa)+1;yield E.checkProjectionSupport(aa,g);return this._loadInitialFeatures(Y,aa)});return function(G){return L.apply(this,arguments)}}();P.applyEdits=function(){var L=p._asyncToGenerator(function*(G){const {spatialReference:Y,geometryType:aa}=this._queryEngine;yield Promise.all([H.loadGeometryEngineForSimplify(Y,aa),E.checkProjectionSupport(G.adds,Y),E.checkProjectionSupport(G.updates,Y)]);return this._applyEdits(G)});return function(G){return L.apply(this,
arguments)}}();P.queryFeatures=function(L,G={}){return this._queryEngine.executeQuery(L,G.signal)};P.queryFeatureCount=function(L,G={}){return this._queryEngine.executeQueryForCount(L,G.signal)};P.queryObjectIds=function(L,G={}){return this._queryEngine.executeQueryForIds(L,G.signal)};P.queryExtent=function(L,G={}){return this._queryEngine.executeQueryForExtent(L,G.signal)};P.querySnapping=function(L,G={}){return this._queryEngine.executeQueryForSnapping(L,G.signal)};P._inferLayerProperties=function(L,
G){let Y=void 0,aa=void 0,k=null,x=null,O=null;for(const R of L)if(L=R.geometry)if(k||(k=w.getJsonType(L)),x||(x=L.spatialReference),null==Y&&(Y=A(L)),null==aa&&(aa=f(L)),k&&x&&null!=Y&&null!=aa)break;if(G&&G.length){let R=null;G.some(D=>{const g="esriFieldTypeOID"===D.type,b=!D.type&&D.name&&"objectid"===D.name.toLowerCase();R=D;return g||b})&&(O=R.name)}return{geometryType:k,spatialReference:x,objectIdField:O,hasM:aa,hasZ:Y}};P._loadInitialFeatures=function(L,G){const {geometryType:Y,hasM:aa,hasZ:k,
objectIdField:x,spatialReference:O,featureStore:R}=this._queryEngine,D=[];for(const g of G){null!=g.uid&&(L.assignedObjectIds[g.uid]=-1);if(g.geometry&&Y!==w.getJsonType(g.geometry)){L.featureErrors.push(H.createFeatureEditErrorResult("Incorrect geometry type."));continue}G=this._createDefaultAttributes();const b=H.mixAttributes(this._fieldsIndex,G,g.attributes,this._requiredFields,!0,L.warnings);b?L.featureErrors.push(b):(this._assignObjectId(G,g.attributes,!0),g.attributes=G,null!=g.uid&&(L.assignedObjectIds[g.uid]=
g.attributes[x]),g.geometry&&(g.geometry=E.project(g.geometry,g.geometry.spatialReference,O)),D.push(g))}R.addMany(h.convertFromFeatures([],D,Y,k,aa,x));L.layerDefinition.extent=this._queryEngine.fullExtent;if(L.layerDefinition.timeInfo){const {start:g,end:b}=this._queryEngine.timeExtent;L.layerDefinition.timeInfo.timeExtent=[g,b]}return L};P._applyEdits=function(L){const {adds:G,updates:Y,deletes:aa}=L;L={addResults:[],deleteResults:[],updateResults:[],uidToObjectId:{}};G&&G.length&&this._applyAddEdits(L,
G);Y&&Y.length&&this._applyUpdateEdits(L,Y);if(aa&&aa.length){for(const k of aa)L.deleteResults.push(H.createFeatureEditSuccessResult(k));this._queryEngine.featureStore.removeManyById(aa)}return{fullExtent:this._queryEngine.fullExtent,featureEditResults:L}};P._applyAddEdits=function(L,G){const {addResults:Y}=L,{geometryType:aa,hasM:k,hasZ:x,objectIdField:O,spatialReference:R,featureStore:D}=this._queryEngine,g=[];for(const b of G){if(b.geometry&&aa!==w.getJsonType(b.geometry)){Y.push(H.createFeatureEditErrorResult("Incorrect geometry type."));
continue}G=this._createDefaultAttributes();const z=H.mixAttributes(this._fieldsIndex,G,b.attributes,this._requiredFields);z?Y.push(z):(this._assignObjectId(G,b.attributes),b.attributes=G,null!=b.uid&&(L.uidToObjectId[b.uid]=b.attributes[O]),b.geometry&&(b.geometry=E.project(H.simplify(b.geometry,R),b.geometry.spatialReference,R)),g.push(b),Y.push(H.createFeatureEditSuccessResult(b.attributes[O])))}D.addMany(h.convertFromFeatures([],g,aa,x,k,O))};P._applyUpdateEdits=function({updateResults:L},G){const {geometryType:Y,
hasM:aa,hasZ:k,objectIdField:x,spatialReference:O,featureStore:R}=this._queryEngine;for(const D of G){const {attributes:g,geometry:b}=D;G=g&&g[x];if(null==G){L.push(H.createFeatureEditErrorResult(`Identifier field ${x} missing`));continue}if(!R.has(G)){L.push(H.createFeatureEditErrorResult(`Feature with object id ${G} missing`));continue}const z=h.convertToFeature(R.getFeature(G),Y,k,aa);if(b){if(Y!==w.getJsonType(b)){L.push(H.createFeatureEditErrorResult("Incorrect geometry type."));continue}z.geometry=
E.project(H.simplify(b,O),b.spatialReference,O)}if(g){const J=H.mixAttributes(this._fieldsIndex,z.attributes,g,this._requiredFields);if(J){L.push(J);continue}}R.add(h.convertFromFeature(z,Y,k,aa,x));L.push(H.createFeatureEditSuccessResult(G))}};P._assignObjectId=function(L,G,Y=!1){const aa=this._queryEngine.objectIdField;Y?G&&isFinite(G[aa])?L[aa]=G[aa]:L[aa]=this._nextObjectId++:L[aa]=this._nextObjectId++};return I}()});