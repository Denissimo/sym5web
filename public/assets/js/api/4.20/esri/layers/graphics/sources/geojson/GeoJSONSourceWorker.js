// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.20/esri/copyright.txt for details.
//>>built
require({cache:{"esri/request":function(){define("require ./chunks/_rollupPluginBabelHelpers ./config ./kernel ./core/Error ./core/global ./core/has ./core/lang ./core/maybe ./core/promiseUtils ./core/urlUtils ./support/apiKeyUtils ./support/requestUtils".split(" "),function(p,e,A,O,g,u,l,F,r,w,J,U,n){function y(na,ta){return C.apply(this,arguments)}function C(){C=e._asyncToGenerator(function*(na,ta){var va=J.isDataProtocol(na);const b=J.isBlobProtocol(na);b||va||(na=J.normalize(na));const t={url:na,
requestOptions:{...r.unwrap(ta)}};let m=J.getInterceptor(na);if(m){na=yield P(m,t);if(null!=na)return{data:na,getHeader:Ha,requestOptions:t.requestOptions,url:t.url};m.after||m.error||(m=null)}na=t.url;ta=t.requestOptions;if("image"===ta.responseType){if(l("host-webworker")||l("host-node"))throw q("request:invalid-parameters",Error("responseType 'image' is not supported in Web Workers or Node environment"),t);}else if(va)throw q("request:invalid-parameters",Error("Data URLs are not supported for responseType \x3d "+
ta.responseType),t);if("head"===ta.method){if(ta.body)throw q("request:invalid-parameters",Error("body parameter cannot be set when method is 'head'"),t);if(va||b)throw q("request:invalid-parameters",Error("data and blob URLs are not supported for method 'head'"),t);}yield H();if(ia)return ia.execute(na,ta);const G=w.createAbortController();w.onAbort(ta,()=>G.abort());va=yield c({controller:G,credential:null,credentialToken:null,fetchOptions:null,hasToken:!1,interceptor:m,params:t,redoRequest:!1,
useIdentity:ma.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1});m&&m.after&&m.after(va);return va});return C.apply(this,arguments)}function f(na){(na=J.getOrigin(na))&&!y._corsServers.includes(na)&&y._corsServers.push(na)}function E(na){na=J.getOrigin(na);return!na||na.endsWith(".arcgis.com")||y._corsServers.includes(na)||J.isTrustedServer(na)}function q(na,ta,va,b){let t="Error";const m={url:va.url,requestOptions:va.requestOptions,getHeader:Ha,ssl:!1};if(ta instanceof g)return ta.details?(ta.details=
F.clone(ta.details),ta.details.url=va.url,ta.details.requestOptions=va.requestOptions):ta.details=m,ta;if(ta){va=b&&(W=>b.headers.get(W));const G=b&&b.status,V=ta.message;V&&(t=V);va&&(m.getHeader=va);m.httpStatus=(null!=ta.httpCode?ta.httpCode:ta.code)||G||0;m.subCode=ta.subcode;m.messageCode=ta.messageCode;m.messages="string"===typeof ta.details?[ta.details]:ta.details;m.raw=Oa in ta?ta[Oa]:ta}return w.isAbortError(ta)?w.createAbortError():new g(na,t,m)}function H(){return v.apply(this,arguments)}
function v(){v=e._asyncToGenerator(function*(){l("host-webworker")?ia||(ia=yield new Promise(function(na,ta){p(["./core/workers/request"],na,ta)})):y._abortableFetch||(y._abortableFetch=u.fetch.bind(u))});return v.apply(this,arguments)}function K(){return N.apply(this,arguments)}function N(){N=e._asyncToGenerator(function*(){O.id||(yield new Promise(function(na,ta){p(["./identity/IdentityManager"],function(va){na(Object.freeze({__proto__:null,"default":va}))},ta)}))});return N.apply(this,arguments)}
function L(na){return X.apply(this,arguments)}function X(){X=e._asyncToGenerator(function*(na){const ta=na.params.url,va=na.params.requestOptions,b=na.controller.signal,t=va.body;let m=null,G=null,V=null;qa&&"HTMLFormElement"in u&&(t instanceof FormData?m=t:t instanceof HTMLFormElement&&(G=t,m=new FormData(G)));"string"===typeof t&&(V=t);na.fetchOptions={cache:va.cacheBust&&!y._abortableFetch.polyfill?"no-cache":"default",credentials:"same-origin",headers:va.headers||{},method:"head"===va.method?
"HEAD":"GET",mode:"cors",redirect:"follow",signal:b};if(m||V)na.fetchOptions.body=m||V;"anonymous"===va.authMode&&(na.useIdentity=!1);na.hasToken=!!(/token=/i.test(ta)||va.query&&va.query.token||m&&m.get&&m.get("token")||G&&G.elements.token);!na.hasToken&&A.apiKey&&U.supportsApiKey(ta)&&(va.query||(va.query={}),va.query.token=A.apiKey,na.hasToken=!0);if(na.useIdentity&&!na.hasToken&&!na.credentialToken&&!aa(ta)&&!w.isAborted(b)){let W;"immediate"===va.authMode?(yield K(),W=yield O.id.getCredential(ta,
{signal:b}),na.credential=W):"no-prompt"===va.authMode?(yield K(),W=yield O.id.getCredential(ta,{prompt:!1,signal:b}).catch(()=>{}),na.credential=W):O.id&&(W=O.id.findCredential(ta));W&&(na.credentialToken=W.token,na.useSSL=!!W.ssl)}});return X.apply(this,arguments)}function aa(na){return Ka.some(ta=>ta.test(na))}function k(na){return z.apply(this,arguments)}function z(){z=e._asyncToGenerator(function*(na){let ta=na.params.url;const va=na.params.requestOptions,b=na.fetchOptions,t=J.isBlobProtocol(ta)||
J.isDataProtocol(ta),m=va.responseType||"json",G=t?0:null!=va.timeout?va.timeout:ma.timeout;var V=!1;if(!t){na.useSSL&&(ta=J.toHTTPS(ta));va.cacheBust&&"default"===b.cache&&(ta=J.addQueryParameter(ta,"request.preventCache",Date.now()));var W={...va.query};na.credentialToken&&(W.token=na.credentialToken);V=J.objectToQuery(W);l("esri-url-encodes-apostrophe")&&(V=V.replace(/'/g,"%27"));const ja=ta.length+1+V.length;V="delete"===va.method||"post"===va.method||"put"===va.method||!!va.body||ja>ma.maxUrlLength;
const la=va.useProxy||!!J.getProxyRule(ta);if(la){const ra=J.getProxyUrl(ta);var I=ra.path;!V&&I.length+1+ja>ma.maxUrlLength&&(V=!0);ra.query&&(W={...ra.query,...W})}if("HEAD"===b.method&&(V||la)){if(V){if(ja>ma.maxUrlLength)throw q("request:invalid-parameters",Error("URL exceeds maximum length"),na.params);throw q("request:invalid-parameters",Error("cannot use POST request when method is 'head'"),na.params);}if(la)throw q("request:invalid-parameters",Error("cannot use proxy when method is 'head'"),
na.params);}V?(b.method="delete"===va.method?"DELETE":"put"===va.method?"PUT":"POST",va.body?ta=J.addQueryParameters(ta,W):(b.body=J.objectToQuery(W),b.headers["Content-Type"]="application/x-www-form-urlencoded")):ta=J.addQueryParameters(ta,W);la&&(na.useProxy=!0,ta=`${I}?${ta}`);W.token&&qa&&b.body instanceof FormData&&(I=b.body,I.set?I.set("token",W.token):I.append("token",W.token));va.hasOwnProperty("withCredentials")?na.withCredentials=va.withCredentials:J.hasSameOrigin(ta,J.appUrl)||(J.isTrustedServer(ta)?
na.withCredentials=!0:O.id&&(W=O.id.findServerInfo(ta))&&W.webTierAuth&&(na.withCredentials=!0));na.withCredentials&&(b.credentials="include")}W=0;let Q=!1;0<G&&(W=setTimeout(()=>{Q=!0;na.controller.abort()},G));let Z,da;try{if("native-request-init"===va.responseType)da=b,da.url=ta;else if("image"!==va.responseType||"default"!==b.cache||"GET"!==b.method||V||D(va.headers)||!t&&!na.useProxy&&ma.proxyUrl&&!E(ta))if(Z=yield y._abortableFetch(ta,b),na.useProxy||f(ta),"native"===va.responseType)da=Z;else{if("HEAD"!==
b.method)if(Z.ok){switch(m){case "array-buffer":da=yield Z.arrayBuffer();break;case "blob":case "image":da=yield Z.blob();break;default:da=yield Z.text()}W&&(clearTimeout(W),W=0);if("json"===m||"xml"===m||"document"===m)if(da)switch(m){case "json":da=JSON.parse(da);break;case "xml":da=h(da,"application/xml");break;case "document":da=h(da,"text/html")}else da=null;if(da){if("array-buffer"===m||"blob"===m){const ja=Z.headers.get("Content-Type");if(/application\/json|text\/plain/i.test(ja)&&750>=da["blob"===
m?"size":"byteLength"])try{const la=yield(new Response(da)).json();la.error&&(da=la)}catch{}}"image"===m&&da instanceof Blob&&(da=yield ba(URL.createObjectURL(da),na,!0))}}else da=yield Z.text()}else da=yield ba(ta,na)}catch(ja){if("AbortError"===ja.name){if(Q)throw Error("Timeout exceeded");throw w.createAbortError("Request canceled");}if(!Z&&ja instanceof TypeError&&ma.proxyUrl&&!va.body&&"delete"!==va.method&&"head"!==va.method&&"post"!==va.method&&"put"!==va.method&&!na.useProxy&&!E(ta))na.redoRequest=
!0,J.addProxyRule({proxyUrl:ma.proxyUrl,urlPrefix:J.getOrigin(ta)});else throw ja;}finally{W&&clearTimeout(W)}return[Z,da]});return z.apply(this,arguments)}function P(na,ta){return R.apply(this,arguments)}function R(){R=e._asyncToGenerator(function*(na,ta){if(null!=na.responseData)return na.responseData;na.headers&&(ta.requestOptions.headers={...ta.requestOptions.headers,...na.headers});na.query&&(ta.requestOptions.query={...ta.requestOptions.query,...na.query});if(na.before){let va,b;try{b=yield na.before(ta)}catch(t){va=
q("request:interceptor",t,ta)}if(b instanceof Error||b instanceof g)va=q("request:interceptor",b,ta);if(va)throw na.error&&na.error(va),va;return b}});return R.apply(this,arguments)}function D(na){if(na)for(const ta of Object.getOwnPropertyNames(na))if(na[ta])return!0;return!1}function h(na,ta){let va;try{va=(new DOMParser).parseFromString(na,ta)}catch{}if(!va||va.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return va}function c(na){return B.apply(this,arguments)}
function B(){B=e._asyncToGenerator(function*(na){var ta,va;yield L(na);let b;try{do[b,t]=yield k(na);while(!(yield M(na,b,t)))}catch(G){var t=q("request:server",G,na.params,b);t.details.ssl=na.useSSL;na.interceptor&&na.interceptor.error&&na.interceptor.error(t);throw t;}const m=na.params.url;!/\/sharing\/rest\/(accounts|portals)\/self/i.test(m)||na.hasToken||na.credentialToken||null==(ta=t)||null==(va=ta.user)||!va.username||J.isTrustedServer(m)||(ta=J.getOrigin(m,!0))&&ma.trustedServers.push(ta);
(ta=na.credential)&&O.id&&(va=(va=O.id.findServerInfo(ta.server))&&va.owningSystemUrl)&&(va=va.replace(/\/?$/,"/sharing"),(ta=O.id.findCredential(va,ta.userId))&&-1===O.id._getIdenticalSvcIdx(va,ta)&&ta.resources.unshift(va));return{data:t,getHeader:b?G=>b.headers.get(G):Ha,requestOptions:na.params.requestOptions,ssl:na.useSSL,url:na.params.url}});return B.apply(this,arguments)}function M(na,ta,va){return Y.apply(this,arguments)}function Y(){Y=e._asyncToGenerator(function*(na,ta,va){if(na.redoRequest)return na.redoRequest=
!1;const b=na.params.requestOptions;if(!ta||"native"===b.responseType||"native-request-init"===b.responseType)return!0;let t;if(!ta.ok)throw t=Error(`Unable to load ${ta.url} status: ${ta.status}`),t[Oa]=va,t;null!=va&&va.error&&(t=va.error);let m,G,V;t&&(m=Number(t.code),G=t.hasOwnProperty("subcode")?Number(t.subcode):null,V=(V=t.messageCode)&&V.toUpperCase());ta=b.authMode;if(403===m&&(4===G||t.message&&-1<t.message.toLowerCase().indexOf("ssl")&&-1===t.message.toLowerCase().indexOf("permission"))){if(!na.useSSL)return na.useSSL=
!0,!1}else if(!na.hasToken&&na.useIdentity&&("no-prompt"!==ta||498===m)&&-1!==wa.indexOf(m)&&!aa(na.params.url)&&(403!==m||-1===Ca.indexOf(V)&&(null==G||2===G&&na.credentialToken))){yield K();try{const W=yield O.id.getCredential(na.params.url,{error:q("request:server",t,na.params),prompt:"no-prompt"!==ta,signal:na.controller.signal,token:na.credentialToken});na.credential=W;na.credentialToken=W.token;na.useSSL=na.useSSL||W.ssl;return!1}catch(W){if("no-prompt"===ta)return na.credential=null,na.credentialToken=
null,!1;t=W}}if(t)throw t;return!0});return Y.apply(this,arguments)}function ba(na,ta,va=!1){const b=ta.controller.signal,t=new Image;t.crossOrigin=ta.withCredentials?"use-credentials":"anonymous";t.alt="";t.src=na;return n.loadImageAsync(t,na,va,b)}let ia;const ma=A.request,qa="FormData"in u,wa=[499,498,403,401],Ca=["COM_0056","COM_0057","SB_0008"],Ka=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],Ha=()=>null,Oa=Symbol();y._abortableFetch=null;y._corsServers=["https://server.arcgisonline.com",
"https://services.arcgisonline.com"];return y})},"esri/support/apiKeyUtils":function(){define(["exports","../core/urlUtils"],function(p,e){const A=["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"];p.isApiKey=function(O){return O&&4<O.length&&O.startsWith("AAPK")};p.supportsApiKey=function(O){const g=e.getOrigin(O,!0);return g&&g.endsWith(".arcgis.com")&&!A.includes(g)&&!O.endsWith("/sharing/rest/generateToken")};Object.defineProperty(p,"__esModule",
{value:!0})})},"esri/support/requestUtils":function(){define(["exports","../core/has","../core/maybe","../core/promiseUtils"],function(p,e,A,O){function g(){try{return new DOMException("Aborted","AbortError")}catch{const u=Error();u.name="AbortError";return u}}p.loadImageAsync=function(u,l,F=!1,r){return new Promise((w,J)=>{if(O.isAborted(r))J(g());else{var U=()=>{C();J(Error(`Unable to load ${l}`))},n=()=>{const f=u;C();w(f)},y=()=>{if(u){var f=u;C();f.src="";J(g())}},C=()=>{e("esri-image-decode")||
(u.removeEventListener("error",U),u.removeEventListener("load",n));u=n=U=null;A.isSome(r)&&r.removeEventListener("abort",y);y=null;F&&URL.revokeObjectURL(l)};A.isSome(r)&&r.addEventListener("abort",y);e("esri-image-decode")?u.decode().then(n,U):(u.addEventListener("error",U),u.addEventListener("load",n))}})};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/graphics/featureConversionUtils":function(){define("exports ../../core/Error ../../core/Logger ../../geometry/support/jsonUtils ./OptimizedFeature ./OptimizedFeatureSet ./OptimizedGeometry".split(" "),
function(p,e,A,O,g,u,l){function F(m,G){return m?G?4:3:G?3:2}function r(m,G,V,W){if(m){if(V)return G&&W?va:na;if(G&&W)return ta}else if(G&&W)return na;return Oa}function w({scale:m,translate:G},V){return Math.round((V-G[0])/m[0])}function J({scale:m,translate:G},V){return Math.round((G[1]-V)/m[1])}function U({scale:m,translate:G},V){return V*m[0]+G[0]}function n({scale:m,translate:G},V){return G[1]-V*m[1]}function y(m){m=m.coords;return{x:m[0],y:m[1]}}function C(m,G){m.coords[0]=G.x;m.coords[1]=G.y;
return m}function f(m){m=m.coords;return{x:m[0],y:m[1],z:m[2]}}function E(m,G){m.coords[0]=G.x;m.coords[1]=G.y;m.coords[2]=G.z;return m}function q(m){m=m.coords;return{x:m[0],y:m[1],m:m[2]}}function H(m,G){m.coords[0]=G.x;m.coords[1]=G.y;m.coords[2]=G.m;return m}function v(m){m=m.coords;return{x:m[0],y:m[1],z:m[2],m:m[3]}}function K(m,G){m.coords[0]=G.x;m.coords[1]=G.y;m.coords[2]=G.z;m.coords[3]=G.m;return m}function N(m,G){return m&&G?K:m?E:G?H:C}function L(m,G,V,W,I){V=N(V,W);for(const Q of G){const {geometry:Z,
attributes:da}=Q;let ja;Z&&(ja=V(new l,Z));m.push(new g(ja,da,null,da[I]))}return m}function X(m,G,V,W){for(const I of G){const {geometry:Q,attributes:Z}=I;let da;Q&&(da=aa(Q,V,W));m.push({attributes:Z,geometry:da})}return m}function aa(m,G,V){if(!m)return null;const W=F(G,V),I=[];for(let Q=0;Q<m.coords.length;Q+=W){const Z=[];for(let da=0;da<W;da++)Z.push(m.coords[Q+da]);I.push(Z)}return G?V?{points:I,hasZ:G,hasM:V}:{points:I,hasZ:G}:V?{points:I,hasM:V}:{points:I}}function k(m,G,V,W,I){V=F(V,W);
for(const Q of G){G=Q.geometry;W=Q.attributes;let Z;G&&(Z=z(new l,G,V));m.push(new g(Z,W,null,W[I]))}return m}function z(m,G,V=F(G.hasZ,G.hasM)){m.lengths[0]=G.points.length;const W=m.coords;let I=0;for(const Q of G.points)for(G=0;G<V;G++)W[I++]=Q[G];return m}function P(m,G,V){if(!m)return null;const W=F(G,V),{coords:I,lengths:Q}=m;m=[];let Z=0;for(const da of Q){const ja=[];for(let la=0;la<da;la++){const ra=[];for(let ua=0;ua<W;ua++)ra.push(I[Z++]);ja.push(ra)}m.push(ja)}return G?V?{paths:m,hasZ:G,
hasM:V}:{paths:m,hasZ:G}:V?{paths:m,hasM:V}:{paths:m}}function R(m,G,V,W,I){V=F(V,W);for(const Q of G){G=Q.geometry;W=Q.attributes;let Z;G&&(Z=D(new l,G,V));m.push(new g(Z,W,null,W[I]))}return m}function D(m,G,V=F(G.hasZ,G.hasM)){const {lengths:W,coords:I}=m;let Q=0;for(const Z of G.paths){for(const da of Z)for(G=0;G<V;G++)I[Q++]=da[G];W.push(Z.length)}return m}function h(m,G,V){if(!m)return null;const W=F(G,V),{coords:I,lengths:Q}=m;m=[];let Z=0;for(const da of Q){const ja=[];for(let la=0;la<da;la++){const ra=
[];for(let ua=0;ua<W;ua++)ra.push(I[Z++]);ja.push(ra)}m.push(ja)}return G?V?{rings:m,hasZ:G,hasM:V}:{rings:m,hasZ:G}:V?{rings:m,hasM:V}:{rings:m}}function c(m,G,V,W,I){for(const Q of G){G=Q.geometry;const Z=Q.centroid,da=Q.attributes;let ja;G&&(ja=B(new l,G,V,W));Z?m.push(new g(ja,da,C(new l,Z),da[I])):m.push(new g(ja,da,null,da[I]))}return m}function B(m,G,V=G.hasZ,W=G.hasM){M(m,G.rings,V,W);return m}function M(m,G,V,W){V=F(V,W);const {lengths:I,coords:Q}=m;W=0;I.length=Q.length=0;for(const Z of G){for(const da of Z)for(G=
0;G<V;G++)Q[W++]=da[G];I.push(Z.length)}return m}function Y(m,G,V,W,I,Q){m.length=0;if(!V){for(const Z of G)m.push(new g(null,Z.attributes,null,Z.attributes[Q]));return m}switch(V){case "esriGeometryPoint":return L(m,G,W,I,Q);case "esriGeometryMultipoint":return k(m,G,W,I,Q);case "esriGeometryPolyline":return R(m,G,W,I,Q);case "esriGeometryPolygon":return c(m,G,W,I,Q);default:Ka.error("convertToFeatureSet:unknown-geometry",new e(`Unable to parse unknown geometry type '${V}'`)),m.length=0}return m}
function ba(m,G,V,W){m=m&&("coords"in m?m:m.geometry);if(!m)return null;switch(G){case "esriGeometryPoint":return G=y,V&&W?G=v:V?G=f:W&&(G=q),G(m);case "esriGeometryMultipoint":return aa(m,V,W);case "esriGeometryPolyline":return P(m,V,W);case "esriGeometryPolygon":return h(m,V,W);default:Ka.error("convertToGeometry:unknown-geometry",new e(`Unable to parse unknown geometry type '${G}'`))}}function ia(m,G,V,W,I){m.length=0;switch(V){case "esriGeometryPoint":var Q=y;W&&I?Q=v:W?Q=f:I&&(Q=q);for(var Z of G){const {geometry:da,
attributes:ja}=Z;W=da?Q(da):null;m.push({attributes:ja,geometry:W})}break;case "esriGeometryMultipoint":return X(m,G,W,I);case "esriGeometryPolyline":for(const da of G){const {geometry:ja,attributes:la}=da;let ra;ja&&(ra=P(ja,W,I));m.push({attributes:la,geometry:ra})}break;case "esriGeometryPolygon":for(Q of G){const {geometry:da,attributes:ja,centroid:la}=Q;let ra;da&&(ra=h(da,W,I));la?(Z=y(la),m.push({attributes:ja,centroid:Z,geometry:ra})):m.push({attributes:ja,geometry:ra})}break;default:Ka.error("convertToFeatureSet:unknown-geometry",
new e(`Unable to parse unknown geometry type '${V}'`))}return m}function ma(m,G,V,W,I,Q,Z=V,da=W){m.lengths.length&&(m.lengths.length=0);m.coords.length&&(m.coords.length=0);if(!G||!G.coords.length)return null;I=Ha[I];const {coords:ja,lengths:la}=G;G=F(V,W);const ra=F(V&&Z,W&&da);V=r(V,W,Z,da);if(!la.length)return V(m.coords,ja,0,0,w(Q,ja[0]),J(Q,ja[1])),m.lengths.length&&(m.lengths.length=0),m.coords.length=G,m;let ua,za=0,ya,Ba=0;for(const Na of la){if(Na<I)continue;let Ea=0;ya=Ba;da=W=w(Q,ja[za]);
ua=Z=J(Q,ja[za+1]);V(m.coords,ja,ya,za,da,ua);Ea++;za+=G;ya+=ra;for(let Fa=1;Fa<Na;Fa++,za+=G)if(da=w(Q,ja[za]),ua=J(Q,ja[za+1]),da!==W||ua!==Z)V(m.coords,ja,ya,za,da-W,ua-Z),ya+=ra,Ea++,W=da,Z=ua;Ea>=I&&(m.lengths.push(Ea),Ba=ya)}m.coords.length=Ba;return m.coords.length?m:null}function qa(m,G,V,W,I,Q,Z){let da=W,ja=0;for(let ra=Q+V;ra<Z;ra+=V){{var la=G[ra];const ua=G[ra+1],za=G[Z],ya=G[Z+1];let Ba=G[Q],Na=G[Q+1],Ea=za-Ba,Fa=ya-Na;if(0!==Ea||0!==Fa){const Ga=((la-Ba)*Ea+(ua-Na)*Fa)/(Ea*Ea+Fa*Fa);
1<Ga?(Ba=za,Na=ya):0<Ga&&(Ba+=Ea*Ga,Na+=Fa*Ga)}Ea=la-Ba;Fa=ua-Na;la=Ea*Ea+Fa*Fa}la>da&&(ja=ra,da=la)}da>W&&(ja-Q>V&&qa(m,G,V,W,I,Q,ja),I(m,G,m.length,ja,G[ja],G[ja+1]),Z-ja>V&&qa(m,G,V,W,I,ja,Z))}function wa(m,G,V,W,I){const {coords:Q,lengths:Z}=G,da=V?W?va:na:W?na:Oa;V=F(V,W);if(!Q.length)return m!==G&&(m.lengths.length=0,m.coords.length=0),m;if(!Z.length)return da(m.coords,Q,0,0,U(I,Q[0]),n(I,Q[1])),m!==G&&(m.lengths.length=0,m.coords.length=V),m;const [ja,la]=I.scale;W=0;for(let ra=0;ra<Z.length;ra++){const ua=
Z[ra];m.lengths[ra]=ua;let za=U(I,Q[W]),ya=n(I,Q[W+1]);da(m.coords,Q,W,W,za,ya);W+=V;for(let Ba=1;Ba<ua;Ba++,W+=V)za+=Q[W]*ja,ya-=Q[W+1]*la,da(m.coords,Q,W,W,za,ya)}m!==G&&(m.lengths.length=Z.length,m.coords.length=Q.length);return m}function Ca(m,G,V,W){let I=0,Q=m[W*G],Z=m[W*(G+1)];for(let da=1;da<V;da++){const ja=Q+m[W*(G+da)],la=Z+m[W*(G+da)+1],ra=(ja-Q)*(la+Z);Q=ja;Z=la;I+=ra}return.5*I}const Ka=A.getLogger("esri.tasks.support.optimizedFeatureSet"),Ha={esriGeometryPoint:0,esriGeometryPolyline:2,
esriGeometryPolygon:3,esriGeometryMultipoint:0},Oa=(m,G,V,W,I,Q)=>{m[V]=I;m[V+1]=Q},na=(m,G,V,W,I,Q)=>{m[V]=I;m[V+1]=Q;m[V+2]=G[W+2]},ta=(m,G,V,W,I,Q)=>{m[V]=I;m[V+1]=Q;m[V+2]=G[W+3]},va=(m,G,V,W,I,Q)=>{m[V]=I;m[V+1]=Q;m[V+2]=G[W+2];m[V+3]=G[W+3]},b=[],t=[];p.convertFromFeature=function(m,G,V,W,I){b[0]=m;[m]=Y(t,b,G,V,W,I);b.length=t.length=0;return m};p.convertFromFeatureSet=function(m,G){const V=new u,{hasM:W,hasZ:I,features:Q,objectIdFieldName:Z,spatialReference:da,geometryType:ja,exceededTransferLimit:la,
transform:ra,fields:ua}=m;ua&&(V.fields=ua);V.geometryType=ja;V.objectIdFieldName=Z||G;V.spatialReference=da;if(!V.objectIdFieldName)return Ka.error(new e("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),V;Q&&Y(V.features,Q,ja,I,W,V.objectIdFieldName);la&&(V.exceededTransferLimit=la);W&&(V.hasM=W);I&&(V.hasZ=I);ra&&(V.transform=ra);return V};p.convertFromFeatures=Y;p.convertFromGeometry=function(m,G,V){if(!m)return null;const W=new l;"hasZ"in m&&null==G&&(G=m.hasZ);
"hasM"in m&&null==V&&(V=m.hasM);if(O.isPoint(m))return N(null!=G?G:null!=m.z,null!=V?V:null!=m.m)(W,m);if(O.isPolygon(m))return B(W,m,G,V);if(O.isPolyline(m))return D(W,m,F(G,V));if(O.isMultipoint(m))return z(W,m,F(G,V));Ka.error("convertFromGeometry:unknown-geometry",new e(`Unable to parse unknown geometry type '${m}'`))};p.convertFromGraphics=function(m,G,V,W,I,Q){const Z=m.length;switch(V){case "esriGeometryPoint":L(m,G,W,I,Q);break;case "esriGeometryMultipoint":k(m,G,W,I,Q);break;case "esriGeometryPolyline":R(m,
G,W,I,Q);break;case "esriGeometryPolygon":c(m,G,W,I,Q);break;default:Ka.error("convertToFeatureSet:unknown-geometry",new e(`Unable to parse unknown geometry type '${V}'`))}for(W=0;W<G.length;W++)m[W+Z].geometryType=V,m[W+Z].insertAfter=G[W].insertAfter,m[W+Z].groupId=G[W].groupId;return m};p.convertFromMultipoint=z;p.convertFromMultipointFeatures=k;p.convertFromNestedArray=M;p.convertFromPoint=function(m,G,V=N(null!=G.z,null!=G.m)){return V(m,G)};p.convertFromPointFeatures=L;p.convertFromPolygon=
B;p.convertFromPolyline=D;p.convertFromPolylineFeatures=R;p.convertToFeature=function(m,G,V,W){t[0]=m;ia(b,t,G,V,W);m=b[0];b.length=t.length=0;return m};p.convertToFeatureSet=function(m){const {objectIdFieldName:G,spatialReference:V,transform:W,fields:I,hasM:Q,hasZ:Z,features:da,geometryType:ja,exceededTransferLimit:la,uniqueIdField:ra,queryGeometry:ua,queryGeometryType:za}=m;m=ia([],da,ja,Z,Q);const ya=ba(ua,za,!1,!1);m={features:m,fields:I,geometryType:ja,objectIdFieldName:G,spatialReference:V,
uniqueIdField:ra,queryGeometry:ya};W&&(m.transform=W);la&&(m.exceededTransferLimit=la);Q&&(m.hasM=Q);Z&&(m.hasZ=Z);return m};p.convertToFeatures=ia;p.convertToGeometry=ba;p.convertToMultipoint=aa;p.convertToMultipointFeatures=X;p.convertToPoint=function(m,G,V){return m?G?V?v(m):f(m):V?q(m):y(m):null};p.convertToPolygon=h;p.convertToPolyline=P;p.deltaDecodeGeometry=function(m,G){const V=m.clone(),W=m.coords;m=m.lengths;let I=0;for(let da=0;da<m.length;da++){const ja=m[da];var Q=W[G*I],Z=W[G*I+1];for(let la=
1;la<ja;la++)Q+=W[G*(I+la)],Z+=W[G*(I+la)+1],V.coords[G*(I+la)]=Q,V.coords[G*(I+la)+1]=Z;I+=ja}return V};p.deltaEncodeGeometry=function(m,G){const V=m.clone(),W=m.coords;m=m.lengths;let I=0;for(let Z=0;Z<m.length;Z++){const da=m[Z];let ja=W[G*I];var Q=W[G*I+1];for(let la=1;la<da;la++){const ra=W[G*(I+la)],ua=W[G*(I+la)+1];Q=ua-Q;V.coords[G*(I+la)]=ra-ja;V.coords[G*(I+la)+1]=Q;ja=ra;Q=ua}I+=da}return V};p.generalizeOptimizedGeometry=function(m,G,V,W,I,Q,Z=V,da=W){m.lengths.length&&(m.lengths.length=
0);m.coords.length&&(m.coords.length=0);if(!G||!G.coords.length)return null;I=Ha[I];const {coords:ja,lengths:la}=G;G=F(V,W);const ra=F(V&&Z,W&&da);V=r(V,W,Z,da);if(!la.length)return V(m.coords,ja,0,0,ja[0],ja[1]),m.lengths.length&&(m.lengths.length=0),m.coords.length=G,m;W=0;Q*=Q;for(const ua of la){if(ua<I){W+=ua*G;continue}Z=m.coords.length/ra;da=W;const za=W+(ua-1)*G;V(m.coords,ja,m.coords.length,da,ja[da],ja[da+1]);qa(m.coords,ja,G,Q,V,da,za);V(m.coords,ja,m.coords.length,za,ja[za],ja[za+1]);
da=m.coords.length/ra-Z;da>=I?m.lengths.push(da):m.coords.length=Z*ra;W+=ua*G}return m.coords.length?m:null};p.getBoundsOptimizedGeometry=function(m,G,V,W){if(!G||!G.coords||!G.coords.length)return null;V=F(V,W);let I=W=Number.POSITIVE_INFINITY,Q=Number.NEGATIVE_INFINITY,Z=Number.NEGATIVE_INFINITY;if(G&&G.coords){G=G.coords;for(let da=0;da<G.length;da+=V){const ja=G[da],la=G[da+1];W=Math.min(W,ja);Q=Math.max(Q,ja);I=Math.min(I,la);Z=Math.max(Z,la)}}m[0]=W;m[1]=I;m[2]=Q;m[3]=Z;return m};p.getQuantizedArea=
function(m,G){const {coords:V,lengths:W}=m;let I=m=0;for(let Q=0;Q<W.length;Q++)I+=Ca(V,m,W[Q],G),m+=Q;return Math.abs(I)};p.getQuantizedBoundsOptimizedGeometry=function(m,G,V,W){V=F(V,W);const {lengths:I,coords:Q}=G;W=G=Number.POSITIVE_INFINITY;let Z=Number.NEGATIVE_INFINITY,da=Number.NEGATIVE_INFINITY,ja=0;for(const la of I){let ra=Q[ja],ua=Q[ja+1];G=Math.min(ra,G);W=Math.min(ua,W);Z=Math.max(ra,Z);da=Math.max(ua,da);ja+=V;for(let za=1;za<la;za++,ja+=V){const ya=Q[ja],Ba=Q[ja+1];ra+=ya;ua+=Ba;0>
ya&&(G=Math.min(G,ra));0<ya&&(Z=Math.max(Z,ra));0>Ba?W=Math.min(W,ua):0<Ba&&(da=Math.max(da,ua))}}m[0]=G;m[1]=W;m[2]=Z;m[3]=da;return m};p.getSignedQuantizedRingArea=Ca;p.quantizeOptimizedFeatureSet=function(m,G){const {geometryType:V,features:W,hasM:I,hasZ:Q}=G;if(!m)return G;for(let Z=0;Z<W.length;Z++){const da=W[Z],ja=da.weakClone();ja.geometry=new l;ma(ja.geometry,da.geometry,I,Q,V,m);da.centroid&&(ja.centroid=new l,ma(ja.centroid,da.centroid,I,Q,"esriGeometryPoint",m));W[Z]=ja}G.transform=m;
return G};p.quantizeOptimizedGeometry=ma;p.quantizeX=w;p.quantizeY=J;p.removeCollinearVectices=function(m,G,V,W,I){if(!G||!G.coords||!G.coords.length)return null;V=Ha[V];const {coords:Q,lengths:Z}=G;G=r(W,I,W,I);W=F(W,I);let da=I=0,ja=0,la=0;for(const za of Z){da=la;G(m.coords,Q,da,I,Q[I],Q[I+1]);I+=W;var ra=Q[I];let ya=Q[I+1],Ba=ra,Na=ya;var ua=ya/ra;da+=W;G(m.coords,Q,da,I,Ba,Na);I+=W;for(let Ea=2;Ea<za;Ea++){ra=Q[I];ya=Q[I+1];const Fa=ya/ra,Ga=ua===Fa||!isFinite(ua)&&!isFinite(Fa);ua=Ga&&isFinite(Fa)?
0<=ua&&0<=Fa||0>=ua&&0>=Fa:0<=Na&&0<=ya||0>=Na&&0>=ya;Ga&&ua?(Ba+=ra,Na+=ya):(Ba=ra,Na=ya,da+=W);G(m.coords,Q,da,I,Ba,Na);I+=W;ua=Fa}da+=W;ra=(da-la)/W;ra>=V&&(m.lengths[ja]=ra,la=da,ja++)}m.coords.length>la&&(m.coords.length=la);m.lengths.length>ja&&(m.lengths.length=ja);return m.coords.length&&m.lengths.length?m:null};p.removeZMValues=function(m,G,V,W,I,Q){const Z=F(V,W);V=r(V,W,I,Q);W=G.coords;m.coords.length=0;m.lengths.length=0;m.lengths.push(...G.lengths);for(G=0;G<W.length;G+=Z)V(m.coords,
W,m.coords.length,G,W[G],W[G+1]);return m};p.unquantizeOptimizedFeatureSet=function(m){const {transform:G,features:V,hasM:W,hasZ:I}=m;if(!G)return m;for(const Q of V)Q.geometry&&wa(Q.geometry,Q.geometry,W,I,G),Q.centroid&&wa(Q.centroid,Q.centroid,W,I,G);m.transform=null;return m};p.unquantizeOptimizedGeometry=wa;p.unquantizeX=U;p.unquantizeY=n;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/graphics/OptimizedFeature":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(p){return function(){function e(A=
null,O={},g,u){this.geohashY=this.geohashX=this.displayId=0;this.geometry=A;O&&(this.attributes=O);g&&(this.centroid=g);null!=u&&(this.objectId=u)}e.prototype.weakClone=function(){const A=new e(this.geometry,this.attributes,this.centroid,this.objectId);A.displayId=this.displayId;A.geohashX=this.geohashX;A.geohashY=this.geohashY;return A};p._createClass(e,[{key:"hasGeometry",get:function(){return!(!this.geometry||!this.geometry.coords||!this.geometry.coords.length)}}]);return e}()})},"esri/layers/graphics/OptimizedFeatureSet":function(){define(function(){return function(){function p(){this.spatialReference=
this.geometryType=this.geometryProperties=this.geohashFieldName=this.globalIdFieldName=this.objectIdFieldName=null;this.hasM=this.hasZ=!1;this.features=[];this.fields=[];this.transform=null;this.exceededTransferLimit=!1;this.queryGeometry=this.queryGeometryType=this.uniqueIdField=null}p.prototype.weakClone=function(){const e=new p;e.objectIdFieldName=this.objectIdFieldName;e.globalIdFieldName=this.globalIdFieldName;e.geohashFieldName=this.geohashFieldName;e.geometryProperties=this.geometryProperties;
e.geometryType=this.geometryType;e.spatialReference=this.spatialReference;e.hasZ=this.hasZ;e.hasM=this.hasM;e.features=this.features;e.fields=this.fields;e.transform=this.transform;e.exceededTransferLimit=this.exceededTransferLimit;e.uniqueIdField=this.uniqueIdField;e.queryGeometry=this.queryGeometry;e.queryGeometryType=this.queryGeometryType;return e};return p}()})},"esri/layers/graphics/OptimizedGeometry":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(p){return function(){function e(O=
[],g=[],u=!1){this.lengths=null!=O?O:[];this.coords=null!=g?g:[];this.hasIndeterminateRingOrder=u}var A=e.prototype;A.forEachVertex=function(O){let g=0;this.lengths.length||O(this.coords[0],this.coords[1]);for(let u=0;u<this.lengths.length;u++){const l=this.lengths[u];for(let F=0;F<l;F++)O(this.coords[2*(F+g)],this.coords[2*(F+g)+1]);g+=l}};A.clone=function(){return new e(this.lengths.slice(),this.coords.slice(),this.hasIndeterminateRingOrder)};p._createClass(e,[{key:"isPoint",get:function(){return 0===
this.lengths.length}}]);return e}()})},"esri/layers/graphics/data/FeatureStore":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../core/Evented ../../../core/Logger ../../../core/maybe ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../featureConversionUtils ./BoundsStore ./optimizedFeatureQueryEngineAdapter".split(" "),function(p,e,A,O,g,u,l,F,r,w){return function(){function J(n){this.geometryInfo=n;this._boundsStore=new r.BoundsStore;
this._featuresById=new Map;this._markedIds=new Set;this.events=new A;this.featureAdapter=w.optimizedFeatureQueryEngineAdapter}var U=J.prototype;U.add=function(n){this._add(n);this._emitChanged()};U.addMany=function(n){for(const y of n)this._add(y);this._emitChanged()};U.clear=function(){this._featuresById.clear();this._boundsStore.clear();this._emitChanged()};U.removeById=function(n){n=this._featuresById.get(n);if(!n)return null;this._remove(n);this._emitChanged();return n};U.removeManyById=function(n){this._boundsStore.invalidateIndex();
for(const y of n)(n=this._featuresById.get(y))&&this._remove(n);this._emitChanged()};U.forEachBounds=function(n,y,C){for(const f of n)(n=this._boundsStore.get(f.objectId))&&y(u.fromRect(C,n))};U.getFeature=function(n){return this._featuresById.get(n)};U.has=function(n){return this._featuresById.has(n)};U.forEach=function(n){this._featuresById.forEach(y=>n(y))};U.forEachInBounds=function(n,y){this._boundsStore.forEachInBounds(n,C=>{y(this._featuresById.get(C))})};U.startMarkingUsedFeatures=function(){this._boundsStore.invalidateIndex();
this._markedIds.clear()};U.sweep=function(){let n=!1;this._featuresById.forEach((y,C)=>{this._markedIds.has(C)||(n=!0,this._remove(y))});this._markedIds.clear();n&&this._emitChanged()};U._emitChanged=function(){this.events.emit("changed",void 0)};U._add=function(n){if(n){var y=n.objectId;if(null==y)O.getLogger("esri.layers.graphics.data.FeatureStore").error(new e("featurestore:invalid-feature","feature id is missing",{feature:n}));else{var C=this._featuresById.get(y);this._markedIds.add(y);if(C){n.displayId=
C.displayId;var f=this._boundsStore.get(y);this._boundsStore.delete(y)}else if(g.isSome(this.onFeatureAdd))this.onFeatureAdd(n);n.geometry&&n.geometry.coords&&n.geometry.coords.length?(f=F.getBoundsOptimizedGeometry(f||l.create(),n.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),this._boundsStore.set(y,f)):this._boundsStore.set(y,null);this._featuresById.set(y,n)}}};U._remove=function(n){if(g.isSome(this.onFeatureRemove))this.onFeatureRemove(n);this._markedIds.delete(n.objectId);this._boundsStore.delete(n.objectId);
this._featuresById.delete(n.objectId);return n};p._createClass(J,[{key:"geometryType",get:function(){return this.geometryInfo.geometryType}},{key:"hasM",get:function(){return this.geometryInfo.hasM}},{key:"hasZ",get:function(){return this.geometryInfo.hasZ}},{key:"numFeatures",get:function(){return this._featuresById.size}},{key:"fullBounds",get:function(){if(!this.numFeatures)return null;const n=l.create(l.NEGATIVE_INFINITY);this._featuresById.forEach(y=>{if(y=this._boundsStore.get(y.objectId))n[0]=
Math.min(y[0],n[0]),n[1]=Math.min(y[1],n[1]),n[2]=Math.max(y[2],n[2]),n[3]=Math.max(y[3],n[3])});return n}},{key:"storeStatistics",get:function(){let n=0;this._featuresById.forEach(y=>{y.geometry&&y.geometry.coords&&(n+=y.geometry.coords.length)});return{featureCount:this._featuresById.size,vertexCount:n/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}}]);return J}()})},"esri/core/Evented":function(){define(["../chunks/_rollupPluginBabelHelpers","../chunks/tslib.es6","./Accessor","./handleUtils","./accessorSupport/decorators/subclass"],
function(p,e,A,O,g){let u=function(){function l(){this._emitter=new l.EventEmitter(this)}var F=l.prototype;F.emit=function(r,w){return this._emitter.emit(r,w)};F.on=function(r,w){return this._emitter.on(r,w)};F.once=function(r,w){return this._emitter.once(r,w)};F.hasEventListener=function(r){return this._emitter.hasEventListener(r)};return l}();(function(l){let F=function(){function w(U=null){this.target=U;this._listenersMap=null}var J=w.prototype;J.clear=function(){this._listenersMap&&this._listenersMap.clear()};
J.emit=function(U,n){U=this._listenersMap&&this._listenersMap.get(U);if(!U)return!1;const y=this.target||this;[...U].forEach(C=>{C.call(y,n)});return 0<U.length};J.on=function(U,n){if(Array.isArray(U)){var y=U.map(C=>this.on(C,n));return O.handlesGroup(y)}if(-1<U.indexOf(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap||(this._listenersMap=new Map);y=this._listenersMap.get(U)||[];y.push(n);this._listenersMap.set(U,y);return{remove:()=>
{const C=this._listenersMap&&this._listenersMap.get(U)||[],f=C.indexOf(n);0<=f&&C.splice(f,1)}}};J.once=function(U,n){const y=this.on(U,C=>{y.remove();n.call(null,C)});return y};J.hasEventListener=function(U){U=this._listenersMap&&this._listenersMap.get(U);return null!=U&&0<U.length};return w}();l.EventEmitter=F;l.EventedMixin=w=>{w=function(J){function U(){var y=J.apply(this,arguments)||this;y._emitter=new F;return y}p._inheritsLoose(U,J);var n=U.prototype;n.destroy=function(){this._emitter.clear()};
n.emit=function(y,C){return this._emitter.emit(y,C)};n.on=function(y,C){return this._emitter.on(y,C)};n.once=function(y,C){return this._emitter.once(y,C)};n.hasEventListener=function(y){return this._emitter.hasEventListener(y)};return U}(w);return w=e.__decorate([g.subclass("esri.core.Evented")],w)};let r=function(w){function J(){var n=w.apply(this,arguments)||this;n._emitter=new u.EventEmitter(p._assertThisInitialized(n));return n}p._inheritsLoose(J,w);var U=J.prototype;U.emit=function(n,y){return this._emitter.emit(n,
y)};U.on=function(n,y){return this._emitter.on(n,y)};U.once=function(n,y){return this._emitter.once(n,y)};U.hasEventListener=function(n){return this._emitter.hasEventListener(n)};return J}(A);r=e.__decorate([g.subclass("esri.core.Evented")],r);l.EventedAccessor=r})(u||(u={}));return u})},"esri/geometry/support/aaBoundingBox":function(){define(["exports","../../core/maybe","../Extent","./aaBoundingRect"],function(p,e,A,O){function g(f=y){return[f[0],f[1],f[2],f[3],f[4],f[5]]}function u(f,E,q,H,v,K,
N=g()){N[0]=f;N[1]=E;N[2]=q;N[3]=H;N[4]=v;N[5]=K;return N}function l(f){return f[0]>=f[3]?0:f[3]-f[0]}function F(f){return f[1]>=f[4]?0:f[4]-f[1]}function r(f){return f[2]>=f[5]?0:f[5]-f[2]}function w(f,E){return Math.max(E[0],f[0])<=Math.min(E[3],f[3])&&Math.max(E[1],f[1])<=Math.min(E[4],f[4])&&Math.max(E[2],f[2])<=Math.min(E[5],f[5])}function J(f,E){f[0]=E[0];f[1]=E[1];f[2]=E[2];f[3]=E[3];f[4]=E[4];f[5]=E[5];return f}function U(f){return 6===f.length}const n=[Infinity,Infinity,Infinity,-Infinity,
-Infinity,-Infinity],y=[0,0,0,0,0,0],C=g();p.NEGATIVE_INFINITY=n;p.POSITIVE_INFINITY=[-Infinity,-Infinity,-Infinity,Infinity,Infinity,Infinity];p.ZERO=y;p.allFinite=function(f){for(let E=0;6>E;E++)if(!isFinite(f[E]))return!1;return!0};p.center=function(f,E=[0,0,0]){E[0]=f[0]+l(f)/2;E[1]=f[1]+F(f)/2;E[2]=f[2]+r(f)/2;return E};p.contains=function(f,E){return E[0]>=f[0]&&E[1]>=f[1]&&E[2]>=f[2]&&E[3]<=f[3]&&E[4]<=f[4]&&E[5]<=f[5]};p.containsPoint=function(f,E){return E[0]>=f[0]&&E[1]>=f[1]&&E[2]>=f[2]&&
E[0]<=f[3]&&E[1]<=f[4]&&E[2]<=f[5]};p.containsPointWithMargin=function(f,E,q){return E[0]>=f[0]-q&&E[1]>=f[1]-q&&E[2]>=f[2]-q&&E[0]<=f[3]+q&&E[1]<=f[4]+q&&E[2]<=f[5]+q};p.create=g;p.depth=F;p.diameter=function(f){const E=l(f),q=r(f);f=F(f);return Math.sqrt(E*E+q*q+f*f)};p.empty=function(f){return f?J(f,n):g(n)};p.equals=function(f,E,q){if(e.isNone(f)||e.isNone(E))return f===E;if(!U(f)||!U(E))return!1;if(q)for(let H=0;H<f.length;H++){if(!q(f[H],E[H]))return!1}else for(q=0;q<f.length;q++)if(f[q]!==
E[q])return!1;return!0};p.expandWithAABB=function(f,E){f[0]=Math.min(f[0],E[0]);f[1]=Math.min(f[1],E[1]);f[2]=Math.min(f[2],E[2]);f[3]=Math.max(f[3],E[3]);f[4]=Math.max(f[4],E[4]);f[5]=Math.max(f[5],E[5])};p.expandWithBuffer=function(f,E,q=0,H=E.length/3){let v=f[0],K=f[1],N=f[2],L=f[3],X=f[4],aa=f[5];for(let k=0;k<H;k++)v=Math.min(v,E[q+3*k]),K=Math.min(K,E[q+3*k+1]),N=Math.min(N,E[q+3*k+2]),L=Math.max(L,E[q+3*k]),X=Math.max(X,E[q+3*k+1]),aa=Math.max(aa,E[q+3*k+2]);f[0]=v;f[1]=K;f[2]=N;f[3]=L;f[4]=
X;f[5]=aa};p.expandWithNestedArray=function(f,E,q){const H=E.length;let v=f[0],K=f[1],N=f[2],L=f[3],X=f[4],aa=f[5];if(q)for(q=0;q<H;q++){var k=E[q];v=Math.min(v,k[0]);K=Math.min(K,k[1]);N=Math.min(N,k[2]);L=Math.max(L,k[0]);X=Math.max(X,k[1]);aa=Math.max(aa,k[2])}else for(q=0;q<H;q++)k=E[q],v=Math.min(v,k[0]),K=Math.min(K,k[1]),L=Math.max(L,k[0]),X=Math.max(X,k[1]);f[0]=v;f[1]=K;f[2]=N;f[3]=L;f[4]=X;f[5]=aa};p.expandWithOffset=function(f,E,q,H){f[0]=Math.min(f[0],f[0]+E);f[3]=Math.max(f[3],f[3]+E);
f[1]=Math.min(f[1],f[1]+q);f[4]=Math.max(f[4],f[4]+q);f[2]=Math.min(f[2],f[2]+H);f[5]=Math.max(f[5],f[5]+H)};p.expandWithRect=function(f,E){f[0]=Math.min(f[0],E[0]);f[1]=Math.min(f[1],E[1]);f[3]=Math.max(f[3],E[2]);f[4]=Math.max(f[4],E[3])};p.expandWithVec3=function(f,E){f[0]=Math.min(f[0],E[0]);f[1]=Math.min(f[1],E[1]);f[2]=Math.min(f[2],E[2]);f[3]=Math.max(f[3],E[0]);f[4]=Math.max(f[4],E[1]);f[5]=Math.max(f[5],E[2])};p.fromExtent=function(f,E=g()){E[0]=f.xmin;E[1]=f.ymin;E[2]=f.zmin;E[3]=f.xmax;
E[4]=f.ymax;E[5]=f.zmax;return E};p.fromMinMax=function(f,E,q=g()){q[0]=f[0];q[1]=f[1];q[2]=f[2];q[3]=E[0];q[4]=E[1];q[5]=E[2];return q};p.fromRect=function(f,E){f[0]=E[0];f[1]=E[1];f[2]=Number.NEGATIVE_INFINITY;f[3]=E[2];f[4]=E[3];f[5]=Number.POSITIVE_INFINITY;return f};p.fromValues=u;p.getMax=function(f,E){E[0]=f[3];E[1]=f[4];E[2]=f[5];return E};p.getMin=function(f,E){E[0]=f[0];E[1]=f[1];E[2]=f[2];return E};p.height=r;p.intersects=w;p.intersectsClippingArea=function(f,E){return e.isNone(E)?!0:w(f,
E)};p.is=U;p.isPoint=function(f){return 0===l(f)&&0===F(f)&&0===r(f)};p.maximumDimension=function(f){return Math.max(l(f),r(f),F(f))};p.offset=function(f,E,q,H,v=f){v[0]=f[0]+E;v[1]=f[1]+q;v[2]=f[2]+H;v[3]=f[3]+E;v[4]=f[4]+q;v[5]=f[5]+H;return v};p.scale=function(f,E,q=f){const H=f[0]+l(f)/2,v=f[1]+F(f)/2,K=f[2]+r(f)/2;q[0]=H+(f[0]-H)*E;q[1]=v+(f[1]-v)*E;q[2]=K+(f[2]-K)*E;q[3]=H+(f[3]-H)*E;q[4]=v+(f[4]-v)*E;q[5]=K+(f[5]-K)*E;return q};p.set=J;p.setMax=function(f,E,q=f){q[3]=E[0];q[4]=E[1];q[5]=E[2];
q!==f&&(q[0]=f[0],q[1]=f[1],q[2]=f[2]);return f};p.setMin=function(f,E,q=f){q[0]=E[0];q[1]=E[1];q[2]=E[2];q!==f&&(q[3]=f[3],q[4]=f[4],q[5]=f[5]);return q};p.size=function(f,E=[0,0,0]){E[0]=l(f);E[1]=F(f);E[2]=r(f);return E};p.toExtent=function(f,E){return isFinite(f[2])||isFinite(f[5])?new A({xmin:f[0],xmax:f[3],ymin:f[1],ymax:f[4],zmin:f[2],zmax:f[5],spatialReference:E}):new A({xmin:f[0],xmax:f[3],ymin:f[1],ymax:f[4],spatialReference:E})};p.toRect=function(f,E){E||(E=O.create());E[0]=f[0];E[1]=f[1];
E[2]=f[3];E[3]=f[4];return E};p.width=l;p.wrap=function(f,E,q,H,v,K){return u(f,E,q,H,v,K,C)};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/geometry/support/aaBoundingRect":function(){define(["exports","../../core/has","../../core/maybe","../Extent"],function(p,e,A,O){function g(y=n){return[y[0],y[1],y[2],y[3]]}function u(y){return y[0]>=y[2]?0:y[2]-y[0]}function l(y){return y[1]>=y[3]?0:y[3]-y[1]}function F(y,C,f){return C>=y[0]&&f>=y[1]&&C<=y[2]&&f<=y[3]}function r(y,C){y[0]=C[0];y[1]=
C[1];y[2]=C[2];y[3]=C[3];return y}function w(y){return 4===y.length}function J(y,C,f){return y<C?C:y>f?f:y}const U=[Infinity,Infinity,-Infinity,-Infinity],n=[0,0,0,0];p.NEGATIVE_INFINITY=U;p.POSITIVE_INFINITY=[-Infinity,-Infinity,Infinity,Infinity];p.UNIT=[0,0,1,1];p.ZERO=n;p.allFinite=function(y){for(let C=0;4>C;C++)if(!isFinite(y[C]))return!1;return!0};p.area=function(y){return u(y)*l(y)};p.center=function(y,C=[0,0]){C[0]=(y[0]+y[2])/2;C[1]=(y[1]+y[3])/2;return C};p.clone=function(y){return[y[0],
y[1],y[2],y[3]]};p.contains=function(y,C){return C[0]>=y[0]&&C[2]<=y[2]&&C[1]>=y[1]&&C[3]<=y[3]};p.containsPoint=function(y,C){return F(y,C[0],C[1])};p.containsPointObject=function(y,C){return F(y,C.x,C.y)};p.containsPointWithMargin=function(y,C,f){return C[0]>=y[0]-f&&C[1]>=y[1]-f&&C[0]<=y[2]+f&&C[1]<=y[3]+f};p.containsXY=F;p.create=g;p.diameter=function(y){const C=u(y);y=l(y);return Math.sqrt(C*C+y*y)};p.distance=function(y,C){const f=(y[1]+y[3])/2,E=Math.max(Math.abs(C[0]-(y[0]+y[2])/2)-u(y)/2,
0);y=Math.max(Math.abs(C[1]-f)-l(y)/2,0);return Math.sqrt(E*E+y*y)};p.empty=function(y){return y?r(y,U):g(U)};p.equals=function(y,C,f){if(A.isNone(y)||A.isNone(C))return y===C;if(!w(y)||!w(C))return!1;if(f)for(let E=0;E<y.length;E++){if(!f(y[E],C[E]))return!1}else for(f=0;f<y.length;f++)if(y[f]!==C[f])return!1;return!0};p.expand=function(y,C,f=y){if("length"in C)if(w(C))f[0]=Math.min(y[0],C[0]),f[1]=Math.min(y[1],C[1]),f[2]=Math.max(y[2],C[2]),f[3]=Math.max(y[3],C[3]);else{if(2===C.length||3===C.length)f[0]=
Math.min(y[0],C[0]),f[1]=Math.min(y[1],C[1]),f[2]=Math.max(y[2],C[0]),f[3]=Math.max(y[3],C[1])}else switch(C.type){case "extent":f[0]=Math.min(y[0],C.xmin);f[1]=Math.min(y[1],C.ymin);f[2]=Math.max(y[2],C.xmax);f[3]=Math.max(y[3],C.ymax);break;case "point":f[0]=Math.min(y[0],C.x),f[1]=Math.min(y[1],C.y),f[2]=Math.max(y[2],C.x),f[3]=Math.max(y[3],C.y)}return f};p.expandPointInPlace=function(y,C){C[0]<y[0]&&(y[0]=C[0]);C[0]>y[2]&&(y[2]=C[0]);C[1]<y[1]&&(y[1]=C[1]);C[1]>y[3]&&(y[3]=C[1])};p.expandWithNestedArray=
function(y,C,f=y){const E=C.length;let q=y[0],H=y[1],v=y[2];y=y[3];for(let K=0;K<E;K++){const N=C[K];q=Math.min(q,N[0]);H=Math.min(H,N[1]);v=Math.max(v,N[0]);y=Math.max(y,N[1])}f[0]=q;f[1]=H;f[2]=v;f[3]=y;return f};p.fromExtent=function(y,C=g()){C[0]=y.xmin;C[1]=y.ymin;C[2]=y.xmax;C[3]=y.ymax;return C};p.fromValues=function(y,C,f,E,q=g()){q[0]=y;q[1]=C;q[2]=f;q[3]=E;return q};p.height=l;p.intersection=function(y,C,f=y){const E=C[0],q=C[1],H=C[2];C=C[3];f[0]=J(y[0],E,H);f[1]=J(y[1],q,C);f[2]=J(y[2],
E,H);f[3]=J(y[3],q,C);return f};p.intersects=function(y,C){return Math.max(C[0],y[0])<=Math.min(C[2],y[2])&&Math.max(C[1],y[1])<=Math.min(C[3],y[3])};p.is=w;p.isPoint=function(y){return(0===u(y)||!isFinite(y[0]))&&(0===l(y)||!isFinite(y[1]))};p.offset=function(y,C,f,E=y){E[0]=y[0]+C;E[1]=y[1]+f;E[2]=y[2]+C;E[3]=y[3]+f;return E};p.pad=function(y,C,f=y){f[0]=y[0]-C;f[1]=y[1]-C;f[2]=y[2]+C;f[3]=y[3]+C;return f};p.set=r;p.setMax=function(y,C,f=y){f[2]=C[0];f[3]=C[1];f!==y&&(f[0]=y[0],f[1]=y[1]);return y};
p.setMin=function(y,C,f=y){f[0]=C[0];f[1]=C[1];f!==y&&(f[2]=y[2],f[3]=y[3]);return f};p.size=function(y,C){C[0]=y[2]-y[0];C[1]=y[3]-y[1]};p.toExtent=function(y,C){return new O({xmin:y[0],ymin:y[1],xmax:y[2],ymax:y[3],spatialReference:C})};p.width=u;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/graphics/data/BoundsStore":function(){define(["exports","../../../core/has","../../../core/libs/rbush/PooledRBush"],function(p,e,A){function O(l,F,r){g.minX=F[0];g.minY=F[1];g.maxX=F[2];g.maxY=
F[3];l.search(g,r)}const g={minX:0,minY:0,maxX:0,maxY:0};let u=function(){function l(){this._indexInvalid=!1;this._boundsToLoad=[];this._boundsById=new Map;this._idByBounds=new Map;this._index=new A.PooledRBush(9,e("csp-restrictions")?r=>({minX:r[0],minY:r[1],maxX:r[2],maxY:r[3]}):["[0]","[1]","[2]","[3]"]);this._loadIndex=()=>{if(this._indexInvalid){const r=Array(this._idByBounds.size);let w=0;this._idByBounds.forEach((J,U)=>{r[w++]=U});this._indexInvalid=!1;this._index.clear();this._index.load(r)}else this._boundsToLoad.length&&
(this._index.load(this._boundsToLoad.filter(r=>this._idByBounds.has(r))),this._boundsToLoad.length=0)}}var F=l.prototype;F.clear=function(){this._indexInvalid=!1;this._boundsToLoad.length=0;this._boundsById.clear();this._idByBounds.clear();this._index.clear()};F.delete=function(r){const w=this._boundsById.get(r);this._boundsById.delete(r);w&&(this._idByBounds.delete(w),this._indexInvalid||this._index.remove(w))};F.forEachInBounds=function(r,w){this._loadIndex();O(this._index,r,J=>w(this._idByBounds.get(J)))};
F.get=function(r){return this._boundsById.get(r)};F.has=function(r){return this._boundsById.has(r)};F.invalidateIndex=function(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)};F.set=function(r,w){if(!this._indexInvalid){const J=this._boundsById.get(r);J&&(this._index.remove(J),this._idByBounds.delete(J))}this._boundsById.set(r,w);w&&(this._idByBounds.set(w,r),this._indexInvalid||(this._boundsToLoad.push(w),5E4<this._boundsToLoad.length&&this._loadIndex()))};return l}();p.BoundsStore=
u;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/core/libs/rbush/PooledRBush":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../arrayUtils ../../maybe ../../PooledArray ../../../chunks/quickselect".split(" "),function(p,e,A,O,g,u){function l(aa,k){F(aa,0,aa.children.length,k,aa)}function F(aa,k,z,P,R){R||(R=new L([]));R.minX=Infinity;R.minY=Infinity;R.maxX=-Infinity;R.maxY=-Infinity;for(let D=k,h;D<z;D++)h=aa.children[D],r(R,aa.leaf?P(h):h);return R}function r(aa,
k){aa.minX=Math.min(aa.minX,k.minX);aa.minY=Math.min(aa.minY,k.minY);aa.maxX=Math.max(aa.maxX,k.maxX);aa.maxY=Math.max(aa.maxY,k.maxY)}function w(aa,k){return aa.minX-k.minX}function J(aa,k){return aa.minY-k.minY}function U(aa){return(aa.maxX-aa.minX)*(aa.maxY-aa.minY)}function n(aa){return aa.maxX-aa.minX+(aa.maxY-aa.minY)}function y(aa,k){return aa.minX<=k.minX&&aa.minY<=k.minY&&k.maxX<=aa.maxX&&k.maxY<=aa.maxY}function C(aa,k){return k.minX<=aa.maxX&&k.minY<=aa.maxY&&k.maxX>=aa.minX&&k.maxY>=aa.minY}
function f(aa,k,z,P,R){for(k=[k,z];k.length;){z=O.assumeNonNull(k.pop());const D=O.assumeNonNull(k.pop());if(z-D<=P)continue;const h=D+Math.ceil((z-D)/P/2)*P;u.quickselect(aa,h,D,z,R);k.push(D,h,h,z)}}let E=function(){function aa(z=9,P){this.compareMinX=w;this.compareMinY=J;this.toBBox=function(R){return R};this._maxEntries=Math.max(4,z||9);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));P&&("function"===typeof P?this.toBBox=P:this._initFormat(P));this.clear()}var k=aa.prototype;k.destroy=
function(){this.clear();q.prune();H.prune();v.prune();K.prune()};k.all=function(z){this._all(this.data,z)};k.search=function(z,P){let R=this.data;const D=this.toBBox;if(C(z,R))for(q.clear();R;){for(let h=0,c=R.children.length;h<c;h++){const B=R.children[h],M=R.leaf?D(B):B;C(z,M)&&(R.leaf?P(B):y(z,M)?this._all(B,P):q.push(B))}R=q.pop()}};k.collides=function(z){let P=this.data;const R=this.toBBox;if(!C(z,P))return!1;for(q.clear();P;){for(let D=0,h=P.children.length;D<h;D++){const c=P.children[D],B=
P.leaf?R(c):c;if(C(z,B)){if(P.leaf||y(z,B))return!0;q.push(c)}}P=q.pop()}return!1};k.load=function(z){if(!z.length)return this;if(z.length<this._minEntries){for(let P=0,R=z.length;P<R;P++)this.insert(z[P]);return this}z=this._build(z.slice(0,z.length),0,z.length-1,0);if(this.data.children.length)if(this.data.height===z.height)this._splitRoot(this.data,z);else{if(this.data.height<z.height){const P=this.data;this.data=z;z=P}this._insert(z,this.data.height-z.height-1,!0)}else this.data=z;return this};
k.insert=function(z){z&&this._insert(z,this.data.height-1);return this};k.clear=function(){this.data=new L([]);return this};k.remove=function(z){if(!z)return this;let P=this.data,R=null,D=0,h=!1,c;const B=this.toBBox(z);v.clear();for(K.clear();P||0<v.length;){if(!P){var M;P=O.assumeNonNull(v.pop());R=v.data[v.length-1];D=null!=(M=K.pop())?M:0;h=!0}if(P.leaf&&(c=A.indexOf(P.children,z,P.children.length,P.indexHint),-1!==c)){P.children.splice(c,1);v.push(P);this._condense(v);break}h||P.leaf||!y(P,B)?
R?(D++,P=R.children[D],h=!1):P=null:(v.push(P),K.push(D),D=0,R=P,P=P.children[0])}return this};k.toJSON=function(){return this.data};k.fromJSON=function(z){this.data=z;return this};k._all=function(z,P){for(H.clear();z;){var R;if(!0===z.leaf)for(const D of z.children)P(D);else H.pushArray(z.children);z=null!=(R=H.pop())?R:null}};k._build=function(z,P,R,D){var h=R-P+1,c=this._maxEntries;if(h<=c)return z=new L(z.slice(P,R+1)),l(z,this.toBBox),z;D||(D=Math.ceil(Math.log(h)/Math.log(c)),c=Math.ceil(h/
c**(D-1)));const B=new X([]);B.height=D;h=Math.ceil(h/c);c=h*Math.ceil(Math.sqrt(c));for(f(z,P,R,c,this.compareMinX);P<=R;P+=c){const M=Math.min(P+c-1,R);f(z,P,M,h,this.compareMinY);for(let Y=P;Y<=M;Y+=h)B.children.push(this._build(z,Y,Math.min(Y+h-1,M),D-1))}l(B,this.toBBox);return B};k._chooseSubtree=function(z,P,R,D){for(;;){D.push(P);if(!0===P.leaf||D.length-1===R)break;let h=Infinity,c=Infinity,B=void 0;for(let M=0,Y=P.children.length;M<Y;M++){const ba=P.children[M],ia=U(ba),ma=(Math.max(ba.maxX,
z.maxX)-Math.min(ba.minX,z.minX))*(Math.max(ba.maxY,z.maxY)-Math.min(ba.minY,z.minY))-ia;ma<c?(c=ma,h=ia<h?ia:h,B=ba):ma===c&&ia<h&&(h=ia,B=ba)}P=B||P.children[0]}return P};k._insert=function(z,P,R){var D=this.toBBox;R=R?z:D(z);v.clear();D=this._chooseSubtree(R,this.data,P,v);D.children.push(z);for(r(D,R);0<=P;)if(v.data[P].children.length>this._maxEntries)this._split(v,P),P--;else break;this._adjustParentBBoxes(R,v,P)};k._split=function(z,P){const R=z.data[P];var D=R.children.length;const h=this._minEntries;
this._chooseSplitAxis(R,h,D);(D=this._chooseSplitIndex(R,h,D))?(D=R.children.splice(D,R.children.length-D),D=R.leaf?new L(D):new X(D),D.height=R.height,l(R,this.toBBox),l(D,this.toBBox),P?z.data[P-1].children.push(D):this._splitRoot(R,D)):console.log("  Error: assertion failed at PooledRBush._split: no valid split index")};k._splitRoot=function(z,P){this.data=new X([z,P]);this.data.height=z.height+1;l(this.data,this.toBBox)};k._chooseSplitIndex=function(z,P,R){let D,h,c=void 0;D=h=Infinity;for(let M=
P;M<=R-P;M++){var B=F(z,0,M,this.toBBox);const Y=F(z,M,R,this.toBBox),ba=Math.max(0,Math.min(B.maxX,Y.maxX)-Math.max(B.minX,Y.minX))*Math.max(0,Math.min(B.maxY,Y.maxY)-Math.max(B.minY,Y.minY));B=U(B)+U(Y);ba<D?(D=ba,c=M,h=B<h?B:h):ba===D&&B<h&&(h=B,c=M)}return c};k._chooseSplitAxis=function(z,P,R){const D=z.leaf?this.compareMinX:w,h=z.leaf?this.compareMinY:J,c=this._allDistMargin(z,P,R,D);P=this._allDistMargin(z,P,R,h);c<P&&z.children.sort(D)};k._allDistMargin=function(z,P,R,D){z.children.sort(D);
D=this.toBBox;var h=F(z,0,P,D);const c=F(z,R-P,R,D);let B=n(h)+n(c);for(let M=P;M<R-P;M++){const Y=z.children[M];r(h,z.leaf?D(Y):Y);B+=n(h)}for(R=R-P-1;R>=P;R--)h=z.children[R],r(c,z.leaf?D(h):h),B+=n(c);return B};k._adjustParentBBoxes=function(z,P,R){for(;0<=R;R--)r(P.data[R],z)};k._condense=function(z){for(let P=z.length-1;0<=P;P--){const R=z.data[P];if(0===R.children.length)if(0<P){const D=z.data[P-1],h=D.children;h.splice(A.indexOf(h,R,h.length,D.indexHint),1)}else this.clear();else l(R,this.toBBox)}};
k._initFormat=function(z){const P=["return a"," - b",";"];this.compareMinX=new Function("a","b",P.join(z[0]));this.compareMinY=new Function("a","b",P.join(z[1]));this.toBBox=new Function("a","return {minX: a"+z[0]+", minY: a"+z[1]+", maxX: a"+z[2]+", maxY: a"+z[3]+"};")};return aa}();const q=new g,H=new g,v=new g,K=new g({deallocator:void 0});g=function(){this.minY=this.minX=Infinity;this.maxY=this.maxX=-Infinity};let N=function(aa){function k(){var z=aa.apply(this,arguments)||this;z.height=1;z.indexHint=
new A.PositionHint;return z}e._inheritsLoose(k,aa);return k}(g),L=function(aa){function k(z){var P=aa.call(this)||this;P.children=z;P.leaf=!0;return P}e._inheritsLoose(k,aa);return k}(N),X=function(aa){function k(z){var P=aa.call(this)||this;P.children=z;P.leaf=!1;return P}e._inheritsLoose(k,aa);return k}(N);p.BBox=g;p.PooledRBush=E;p.default=E;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/chunks/quickselect":function(){define(["exports"],function(p){var e={exports:{}};(function(A){(function(O){O=
O();void 0!==O&&(A.exports=O)})(function(){function O(l,F,r,w,J){for(;w>r;){if(600<w-r){var U=w-r+1,n=F-r+1,y=Math.log(U),C=.5*Math.exp(2*y/3);y=.5*Math.sqrt(y*C*(U-C)/U)*(0>n-U/2?-1:1);O(l,F,Math.max(r,Math.floor(F-n*C/U+y)),Math.min(w,Math.floor(F+(U-n)*C/U+y)),J)}U=l[F];n=r;C=w;g(l,r,F);for(0<J(l[w],U)&&g(l,r,w);n<C;){g(l,n,C);n++;for(C--;0>J(l[n],U);)n++;for(;0<J(l[C],U);)C--}0===J(l[r],U)?g(l,r,C):(C++,g(l,C,w));C<=F&&(r=C+1);F<=C&&(w=C-1)}}function g(l,F,r){var w=l[F];l[F]=l[r];l[r]=w}function u(l,
F){return l<F?-1:l>F?1:0}return function(l,F,r,w,J){O(l,F,r||0,w||l.length-1,J||u)}})})(e);p.quickselect=e.exports})},"esri/layers/graphics/data/optimizedFeatureQueryEngineAdapter":function(){define(["exports","../centroid","../OptimizedFeature","../OptimizedGeometry"],function(p,e,A,O){const g={getObjectId(u){return u.objectId},getAttributes(u){return u.attributes},getAttribute(u,l){return u.attributes[l]},cloneWithGeometry(u,l){return new A(l,u.attributes,null,u.objectId)},getGeometry(u){return u.geometry},
getCentroid(u,l){u.centroid||(u.centroid=e.getCentroidOptimizedGeometry(new O,u.geometry,l.hasZ,l.hasM));return u.centroid}};p.default=g;p.optimizedFeatureQueryEngineAdapter=g;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/graphics/centroid":function(){define(["exports"],function(p){function e(O,g,u,l,F,r,w=1){r=F?r?4:3:r?3:2;let J=u,U=u+r,n=0,y=0,C=u=0,f=0;for(let E=0,q=l-1;E<q;E++,J+=r,U+=r){l=g[J];const H=g[J+1],v=g[J+2],K=g[U],N=g[U+1],L=g[U+2];let X=l*N-K*H;C+=X;n+=(l+K)*X;
y+=(H+N)*X;F&&(X=l*L-K*v,u+=(v+L)*X,f+=X);l<O[0]&&(O[0]=l);l>O[1]&&(O[1]=l);H<O[2]&&(O[2]=H);H>O[3]&&(O[3]=H);F&&(v<O[4]&&(O[4]=v),v>O[5]&&(O[5]=v))}0<C*w&&(C*=-1);0<f*w&&(f*=-1);if(!C)return null;O=[n,y,.5*C];F&&(O[3]=u,O[4]=.5*f);return O}function A(O,g,u,l,F){F=l?F?4:3:F?3:2;let r=g,w=g+F,J=0,U=0,n=0,y=0;for(let q=0,H=u-1;q<H;q++,r+=F,w+=F){var C=O[r];const v=O[r+1],K=O[r+2],N=O[w],L=O[w+1],X=O[w+2];if(l){{var f=N-C;var E=L-v;const aa=X-K;f=Math.sqrt(f*f+E*E+aa*aa)}}else f=N-C,E=L-v,f=Math.sqrt(f*
f+E*E);f&&(J+=f,l?(C=[C+.5*(N-C),v+.5*(L-v),K+.5*(X-K)],U+=f*C[0],n+=f*C[1],y+=f*C[2]):(C=[C+.5*(N-C),v+.5*(L-v)],U+=f*C[0],n+=f*C[1]))}return 0<J?l?[U/J,n/J,y/J]:[U/J,n/J]:0<u?l?[O[g],O[g+1],O[g+2]]:[O[g],O[g+1]]:null}p.getCentroidOptimizedGeometry=function(O,g,u,l,F){if(!g||!g.lengths.length)return null;const r="upperLeft"===(null==F?void 0:F.originPosition)?-1:1;O.lengths.length&&(O.lengths.length=0);O.coords.length&&(O.coords.length=0);F=O.coords;const w=[],J=u?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,
Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:U,coords:n}=g,y=u?l?4:3:l?3:2;let C=0;for(var f of U){const E=e(J,n,C,f,u,l,r);E&&w.push(E);C+=f*y}w.sort((E,q)=>{let H=r*E[2]-r*q[2];0===H&&u&&(H=E[4]-q[4]);return H});w.length&&(f=6*w[0][2],F[0]=w[0][0]/f,F[1]=w[0][1]/f,u&&(f=6*w[0][4],F[2]=0!==f?w[0][3]/f:0),F[0]<J[0]||F[0]>J[1]||F[1]<
J[2]||F[1]>J[3]||u&&(F[2]<J[4]||F[2]>J[5]))&&(F.length=0);if(!F.length)if(g=g.lengths[0]?A(n,0,U[0],u,l):null)F[0]=g[0],F[1]=g[1],u&&2<g.length&&(F[2]=g[2]);else return null;return O};p.lineCentroid=A;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/graphics/data/projectionSupport":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../geometry/projection ../../../geometry/geometryAdapters/json ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/webMercatorUtils".split(" "),
function(p,e,A,O,g,u){function l(C,f){if(!f)return null;if("x"in f){var E={x:0,y:0};[E.x,E.y]=C(f.x,f.y,J);null!=f.z&&(E.z=f.z);null!=f.m&&(E.m=f.m);return E}if("xmin"in f)return E={xmin:0,ymin:0,xmax:0,ymax:0},[E.xmin,E.ymin]=C(f.xmin,f.ymin,J),[E.xmax,E.ymax]=C(f.xmax,f.ymax,J),f.hasZ&&(E.zmin=f.zmin,E.zmax=f.zmax,E.hasZ=!0),f.hasM&&(E.mmin=f.mmin,E.mmax=f.mmax,E.hasM=!0),E;if("rings"in f)return{rings:F(f.rings,C),hasM:f.hasM,hasZ:f.hasZ};if("paths"in f)return{paths:F(f.paths,C),hasM:f.hasM,hasZ:f.hasZ};
if("points"in f)return{points:r(f.points,C),hasM:f.hasM,hasZ:f.hasZ}}function F(C,f){const E=[];for(const q of C)E.push(r(q,f));return E}function r(C,f){const E=[];for(const q of C)C=f(q[0],q[1],[0,0]),E.push(C),2<q.length&&C.push(q[2]),3<q.length&&C.push(q[3]);return E}function w(){w=e._asyncToGenerator(function*(C,f){f&&(C=Array.isArray(C)?C.map(E=>{var q;return null==(q=E.geometry)?void 0:q.spatialReference}):[C],yield A.initializeProjection(C.map(E=>({source:E,dest:f}))))});return w.apply(this,
arguments)}const J=[0,0],U=l.bind(null,u.lngLatToXY),n=l.bind(null,u.xyToLngLat),y=new (function(){function C(){this._jobs=[];this._timer=null;this._process=this._process.bind(this)}var f=C.prototype;f.push=function(){var E=e._asyncToGenerator(function*(q,H,v){if(!(q&&q.length&&H&&v)||g.equals(H,v))return q;const K={geometries:q,inSpatialReference:H,outSpatialReference:v,resolve:null};this._jobs.push(K);return new Promise(N=>{K.resolve=N;null===this._timer&&(this._timer=setTimeout(this._process,10))})});
return function(q,H,v){return E.apply(this,arguments)}}();f._process=function(){this._timer=null;const E=this._jobs.shift();if(E){var {geometries:q,inSpatialReference:H,outSpatialReference:v,resolve:K}=E;u.canProject(H,v)?g.isWebMercator(v)?K(q.map(U)):K(q.map(n)):K(A.projectMany(O.jsonAdapter,q,H,v,null));0<this._jobs.length&&(this._timer=setTimeout(this._process,10))}};return C}());p.checkProjectionSupport=function(C,f){return w.apply(this,arguments)};p.project=function(C,f,E){if(!C)return C;E||
(E=f,f=C.spatialReference);return g.isValid(f)&&g.isValid(E)&&!g.equals(f,E)?u.canProject(f,E)?g.isWebMercator(E)?U(C):n(C):A.projectMany(O.jsonAdapter,[C],f,E,null)[0]:C};p.projectMany=function(C,f,E){return y.push(C,f,E)};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/geometry/projection":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../core/Error ../core/mathUtils ../core/maybe ../core/promiseUtils ../core/unitUtils ../chunks/mat4 ../chunks/vec3 ../chunks/vec3f64 ./Extent ./Multipoint ../chunks/pe ./Point ./Polygon ./Polyline ./projectionEllipsoid ./support/aaBoundingRect ./support/Ellipsoid ./support/geodesicConstants ./support/GeographicTransformation ./support/spatialReferenceUtils".split(" "),
function(p,e,A,O,g,u,l,F,r,w,J,U,n,y,C,f,E,q,H,v,K,N,L){function X(){return!!Ea&&y.isLoaded()}function aa(ea){u.isNone(Ga)&&(Ga=Promise.all([y.load(),(new Promise(function(ha,fa){p(["../chunks/geometryEngineBase"],ha,fa)})).then(function(ha){return ha.geometryEngineBase}),new Promise(function(ha,fa){p(["./geometryAdapters/hydrated"],ha,fa)})]));return Ga.then(([,ha,{hydratedAdapter:fa}])=>{l.throwIfAborted(ea);Fa=fa;Ea=ha.default;Ea._enableProjection(y.pe)})}function k(ea,ha,fa,ka,xa=null){if(u.isNone(fa)||
u.isNone(ka))return ha;if(P(fa,ka,xa))return ha.map(Aa=>D(Aa,fa,ka));if(u.isNone(xa)){const Aa=N.cacheKey(fa,ka);void 0!==Ja[Aa]?xa=Ja[Aa]:(xa=z(fa,ka,null),u.isNone(xa)&&(xa=new N),Ja[Aa]=xa)}if(u.isNone(Ea))throw new oa;return Ea._project(ea,ha,fa,ka,xa)}function z(ea,ha,fa=null){if(u.isNone(Ea))throw new oa;if(u.isNone(ea)||u.isNone(ha))return null;ea=Ea._getTransformation(Fa,ea,ha,fa,null==fa?void 0:fa.spatialReference);return null!==ea?N.fromGE(ea):null}function P(ea,ha,fa){return fa?!1:L.equals(ea,
ha)?!0:L.isValid(ea)&&L.isValid(ha)&&!!ya(ea,ha,a)}function R(){R=A._asyncToGenerator(function*(ea,ha,fa,ka){if(!X())if(Array.isArray(ea))for(const {source:xa,dest:Aa,geographicTransformation:La}of ea){if(!P(xa,Aa,La))return aa(ka)}else if(!P(ea,ha,fa))return aa(ka)});return R.apply(this,arguments)}function D(ea,ha,fa){if(!ea)return ea;if("x"in ea){var ka=new C;return h(ea,ha,ka,fa)?ka:null}return"xmin"in ea?(ka=new U,Y(ea,ha,ka,fa)?ka:null):"rings"in ea?(ka=new f,M(ea,ha,ka,fa)?ka:null):"paths"in
ea?(ka=new E,B(ea,ha,ka,fa)?ka:null):"points"in ea?(ka=new n,c(ea,ha,ka,fa)?ka:null):null}function h(ea,ha,fa,ka,xa=0){Ra[0]=ea.x;Ra[1]=ea.y;const Aa=ea.z;Ra[2]=void 0!==Aa?Aa:xa;if(!qa(Ra,ha,0,Ra,ka,0,1))return!1;fa.x=Ra[0];fa.y=Ra[1];fa.spatialReference=ka;void 0===Aa?(fa.z=void 0,fa.hasZ=!1):(fa.z=Ra[2],fa.hasZ=!0);void 0===ea.m?(fa.m=void 0,fa.hasM=!1):(fa.m=ea.m,fa.hasM=!0);return!0}function c(ea,ha,fa,ka,xa=0){const {points:Aa,hasZ:La,hasM:Pa}=ea;ea=[];const $a=Aa.length,ab=[];for(var Va of Aa)ab.push(Va[0],
Va[1],La?Va[2]:xa);if(!qa(ab,ha,0,ab,ka,0,$a))return!1;for(ha=0;ha<$a;++ha){xa=3*ha;Va=ab[xa];const hb=ab[xa+1];La&&Pa?ea.push([Va,hb,ab[xa+2],Aa[ha][3]]):La?ea.push([Va,hb,ab[xa+2]]):Pa?ea.push([Va,hb,Aa[ha][2]]):ea.push([Va,hb])}fa.points=ea;fa.spatialReference=ka;fa.hasZ=La;fa.hasM=Pa;return!0}function B(ea,ha,fa,ka,xa=0){const {paths:Aa,hasZ:La,hasM:Pa}=ea;ea=[];if(!wa(Aa,La,Pa,ha,ea,ka,xa))return!1;fa.paths=ea;fa.spatialReference=ka;fa.hasZ=La;fa.hasM=Pa;return!0}function M(ea,ha,fa,ka,xa=0){const {rings:Aa,
hasZ:La,hasM:Pa}=ea;ea=[];if(!wa(Aa,La,Pa,ha,ea,ka,xa))return!1;fa.rings=ea;fa.spatialReference=ka;fa.hasZ=La;fa.hasM=Pa;return!0}function Y(ea,ha,fa,ka,xa=0){const {xmin:Aa,ymin:La,xmax:Pa,ymax:$a,hasZ:ab,hasM:Va}=ea;if(!ba(Aa,La,ab?ea.zmin:xa,ha,Ra,ka))return!1;fa.xmin=Ra[0];fa.ymin=Ra[1];ab&&(fa.zmin=Ra[2]);if(!ba(Pa,$a,ab?ea.zmax:xa,ha,Ra,ka))return!1;fa.xmax=Ra[0];fa.ymax=Ra[1];ab&&(fa.zmax=Ra[2]);Va&&(fa.mmin=ea.mmin,fa.mmax=ea.mmax);fa.spatialReference=ka;return!0}function ba(ea,ha,fa,ka,xa,
Aa){Ta[0]=ea;Ta[1]=ha;Ta[2]=fa;return qa(Ta,ka,0,xa,Aa,0,1)}function ia(ea,ha,fa,ka){if(u.isNone(ha)||u.isNone(ka)||2>ea.length)return!1;2===ea.length&&(Ta[0]=ea[0],Ta[1]=ea[1],Ta[2]=0,ea=Ta);return qa(ea,ha,0,fa,ka,0,1)}function ma(ea,ha,fa){if(u.isNone(ha))return!1;ha=Ka(ha,gb);ha=cb[ha][6];if(u.isNone(ha))return!1;ha(ea,0,Ta,0);fa!==Ta&&(fa[0]=Ta[0],fa[1]=Ta[1],2<fa.length&&(fa[2]=Ta[2]));return!0}function qa(ea,ha,fa,ka,xa,Aa,La=1){ha=ya(ha,xa,a);if(u.isNone(ha))return!1;if(ha===Ha){if(ea===ka&&
fa===Aa)return!0;La=fa+3*La;for(let Pa=fa,$a=Aa;Pa<La;Pa++,$a++)ka[$a]=ea[Pa];return!0}La=fa+3*La;for(let Pa=fa,$a=Aa;Pa<La;Pa+=3,$a+=3)ha(ea,Pa,ka,$a);return!0}function wa(ea,ha,fa,ka,xa,Aa,La=0){const Pa=[];for(const $a of ea)for(const ab of $a)Pa.push(ab[0],ab[1],ha?ab[2]:La);if(!qa(Pa,ka,0,Pa,Aa,0,Pa.length/3))return!1;ka=0;xa.length=0;for(const $a of ea){ea=[];for(const ab of $a)ha&&fa?ea.push([Pa[ka++],Pa[ka++],Pa[ka++],ab[3]]):ha?ea.push([Pa[ka++],Pa[ka++],Pa[ka++]]):(fa?ea.push([Pa[ka++],
Pa[ka++],ab[2]]):ea.push([Pa[ka++],Pa[ka++]]),ka++);xa.push(ea)}return!0}function Ca(ea,ha,fa){const ka=Math.sin(ha);ha=Math.cos(ha);const xa=Math.sin(ea);ea=Math.cos(ea);fa[0]=-ka;fa[4]=-xa*ha;fa[8]=ea*ha;fa[12]=0;fa[1]=ha;fa[5]=-xa*ka;fa[9]=ea*ka;fa[13]=0;fa[2]=0;fa[6]=ea;fa[10]=xa;fa[14]=0;fa[3]=0;fa[7]=0;fa[11]=0;fa[15]=1;return fa}function Ka(ea,ha){if(ha.spatialReference===ea)return ha.spatialReferenceId;ha.spatialReference=ea;"metersPerUnit"in ha&&(ha.metersPerUnit=F.getMetersPerUnitForSR(ea,
1));return ea.wkt===q.SphericalECEFSpatialReference.wkt?ha.spatialReferenceId=1:L.isWGS84(ea)?ha.spatialReferenceId=2:L.isWebMercator(ea)?ha.spatialReferenceId=3:ea.wkt===q.WGS84ECEFSpatialReference.wkt?ha.spatialReferenceId=4:4490===ea.wkid?ha.spatialReferenceId=5:ea.wkt===q.SphericalPCPFMars.wkt?ha.spatialReferenceId=7:ea.wkt===q.SphericalPCPFMoon.wkt?ha.spatialReferenceId=9:L.isMars(ea)?ha.spatialReferenceId=8:L.isMoon(ea)?ha.spatialReferenceId=10:ha.spatialReferenceId=0}function Ha(ea,ha,fa,ka){ea!==
fa&&(fa[ka++]=ea[ha++],fa[ka++]=ea[ha++],fa[ka]=ea[ha])}function Oa(ea,ha,fa,ka){fa[ka++]=Ua*(ea[ha++]/v.earth.radius);fa[ka++]=Ua*(Math.PI/2-2*Math.atan(Math.exp(-1*ea[ha++]/v.earth.radius)));fa[ka]=ea[ha]}function na(ea,ha,fa,ka){Oa(ea,ha,fa,ka);V(fa,ka,fa,ka)}function ta(ea,ha,fa,ka){Oa(ea,ha,fa,ka);la(fa,ka,fa,ka)}function va(ea,ha,fa,ka,xa){var Aa=.4999999*Math.PI;Aa=g.clamp(Za*ea[ha+1],-Aa,Aa);Aa=Math.sin(Aa);fa[ka++]=Za*ea[ha]*xa.radius;fa[ka++]=xa.halfSemiMajorAxis*Math.log((1+Aa)/(1-Aa));
fa[ka]=ea[ha+2]}function b(ea,ha,fa,ka){va(ea,ha,fa,ka,v.earth)}function t(ea,ha,fa,ka,xa){xa+=ea[ha+2];const Aa=Za*ea[ha+1];ea=Za*ea[ha];ha=Math.cos(Aa);fa[ka++]=Math.cos(ea)*ha*xa;fa[ka++]=Math.sin(ea)*ha*xa;fa[ka]=Math.sin(Aa)*xa}function m(ea,ha,fa,ka){t(ea,ha,fa,ka,v.moon.radius)}function G(ea,ha,fa,ka){t(ea,ha,fa,ka,v.mars.radius)}function V(ea,ha,fa,ka){t(ea,ha,fa,ka,v.earth.radius)}function W(ea,ha,fa,ka,xa){var Aa=ea[ha];const La=ea[ha+1];ha=ea[ha+2];ea=Math.sqrt(Aa*Aa+La*La+ha*ha);ha=g.asinClamped(ha/
(0===ea?1:ea));Aa=Math.atan2(La,Aa);fa[ka++]=Ua*Aa;fa[ka++]=Ua*ha;fa[ka]=ea-xa}function I(ea,ha,fa,ka){W(ea,ha,fa,ka,v.moon.radius)}function Q(ea,ha,fa,ka){W(ea,ha,fa,ka,v.mars.radius)}function Z(ea,ha,fa,ka){W(ea,ha,fa,ka,v.earth.radius)}function da(ea,ha,fa,ka){Z(ea,ha,fa,ka);b(fa,ka,fa,ka)}function ja(ea,ha,fa,ka){Z(ea,ha,fa,ka);la(fa,ka,fa,ka)}function la(ea,ha,fa,ka){{var xa=v.earth;const La=Za*ea[ha];var Aa=Za*ea[ha+1];ea=ea[ha+2];ha=Math.sin(Aa);Aa=Math.cos(Aa);const Pa=xa.radius/Math.sqrt(1-
xa.eccentricitySquared*ha*ha);fa[ka++]=(Pa+ea)*Aa*Math.cos(La);fa[ka++]=(Pa+ea)*Aa*Math.sin(La);fa[ka++]=(Pa*(1-xa.eccentricitySquared)+ea)*ha}}function ra(ea,ha,fa,ka){var xa=K.earthEllipsoidConstants,Aa=ea[ha],La=ea[ha+1];ea=ea[ha+2];let Pa;ha=Math.abs(ea);var $a=Aa*Aa+La*La;var ab=Math.sqrt($a);var Va=$a+ea*ea;var hb=Math.sqrt(Va);Aa=Math.atan2(La,Aa);var lb=ea*ea/Va;Va=$a/Va;La=xa.a2/hb;$a=xa.a3-xa.a4/hb;.3<Va?(lb=ha/hb*(1+Va*(xa.a1+La+lb*$a)/hb),hb=Math.asin(lb),La=lb*lb,Va=Math.sqrt(1-La)):
(Va=ab/hb*(1-lb*(xa.a5-La-Va*$a)/hb),hb=Math.acos(Va),La=1-Va*Va,lb=Math.sqrt(La));Pa=1-v.earth.eccentricitySquared*La;La=v.earth.radius/Math.sqrt(Pa);xa=xa.a6*La;La=ab-La*Va;$a=ha-xa*lb;ha=Va*La+lb*$a;ab=Va*$a-lb*La;xa=ab/(xa/Pa+ha);hb+=xa;0>ea&&(hb=-hb);fa[ka++]=Ua*Aa;fa[ka++]=Ua*hb;fa[ka]=ha+ab*xa/2}function ua(ea,ha,fa,ka){ra(ea,ha,fa,ka);V(fa,ka,fa,ka)}function za(ea,ha,fa,ka){ra(ea,ha,fa,ka);b(fa,ka,fa,ka)}function ya(ea,ha,fa=Na()){return u.isNone(ea)||u.isNone(ha)?null:Ba(ea,ha,fa).projector}
function Ba(ea,ha,fa){if(u.isNone(ea)||u.isNone(ha)||fa.source.spatialReference===ea&&fa.dest.spatialReference===ha)return fa;const ka=Ka(ea,fa.source),xa=Ka(ha,fa.dest);0===ka&&0===xa?L.equals(ea,ha)?fa.projector=Ha:fa.projector=null:fa.projector=cb[ka][xa];return fa}function Na(){return{source:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},projector:Ha}}let Ea=null,Fa=null,Ga=null,Ja={},oa=function(ea){function ha(){return ea.call(this,
"projection:not-loaded","projection engine not fully loaded yet, please call load()")||this}A._inheritsLoose(ha,ea);return ha}(O);const cb={[2]:{[5]:null,[8]:null,[10]:null,[11]:Ha,[6]:Ha,[1]:V,[7]:null,[9]:null,[0]:null,[3]:b,[2]:Ha,[4]:la},[5]:{[5]:Ha,[8]:null,[10]:null,[11]:Ha,[6]:Ha,[1]:V,[7]:null,[9]:null,[0]:null,[3]:null,[2]:null,[4]:la},[8]:{[5]:null,[8]:Ha,[10]:null,[11]:Ha,[6]:null,[1]:null,[7]:G,[9]:null,[0]:null,[3]:null,[2]:null,[4]:null},[10]:{[5]:null,[8]:null,[10]:Ha,[11]:Ha,[6]:null,
[1]:null,[7]:null,[9]:m,[0]:null,[3]:null,[2]:null,[4]:null},[3]:{[5]:null,[8]:null,[10]:null,[11]:Oa,[6]:Oa,[1]:na,[7]:null,[9]:null,[0]:null,[3]:Ha,[2]:Oa,[4]:ta},[4]:{[5]:ra,[8]:null,[10]:null,[11]:ra,[6]:ra,[1]:ua,[7]:null,[9]:null,[0]:null,[3]:za,[2]:ra,[4]:Ha},[1]:{[5]:Z,[8]:null,[10]:null,[11]:Z,[6]:Z,[1]:Ha,[7]:null,[9]:null,[0]:null,[3]:da,[2]:Z,[4]:ja},[7]:{[5]:null,[8]:Q,[10]:null,[11]:Q,[6]:null,[1]:null,[7]:Ha,[9]:null,[0]:null,[3]:null,[2]:null,[4]:null},[9]:{[5]:null,[8]:null,[10]:I,
[11]:I,[6]:null,[1]:null,[7]:null,[9]:Ha,[0]:null,[3]:null,[2]:null,[4]:null},[0]:{[5]:null,[8]:null,[10]:null,[11]:null,[6]:null,[1]:null,[7]:null,[9]:null,[0]:Ha,[3]:null,[2]:null,[4]:null},[11]:{[5]:Ha,[8]:Ha,[10]:Ha,[11]:Ha,[6]:Ha,[1]:V,[7]:G,[9]:m,[0]:null,[3]:b,[2]:Ha,[4]:la},[6]:{[5]:null,[8]:null,[10]:null,[11]:Ha,[6]:Ha,[1]:V,[7]:null,[9]:null,[0]:null,[3]:null,[2]:Ha,[4]:la}},gb={spatialReference:null,spatialReferenceId:0},fb={spatialReference:null,spatialReferenceId:0},a=Na(),ib=Na(),Za=
g.deg2rad(1),Ua=g.rad2deg(1),Ta=J.create(),jb=J.create(),tb=J.create(),Ra=J.create(),Bb=J.create();e.canProjectToWGS84ComparableLonLat=function(ea){if(u.isNone(ea))return!1;ea=Ka(ea,gb);return!!cb[ea][6]};e.canProjectWithoutEngine=P;e.computeLatLonToENURotation=Ca;e.computeLinearTransformation=function(ea,ha,fa,ka){if(u.isNone(ea)||u.isNone(ka))return!1;var xa=Ka(ea,gb),Aa=Ka(ka,fb);if(xa===Aa&&1!==Aa&&7!==Aa&&9!==Aa&&(0!==xa||L.equals(ea,ka)))return r.identity(fa),r.translate(fa,fa,ha),!0;if(1===
Aa||7===Aa||9===Aa){ka=ea=0;xa=cb[xa][11];Aa=cb[11][Aa];if(u.isNone(xa)||u.isNone(Aa))return!1;xa(ha,0,jb,0);Aa(jb,0,tb,0);ea=Za*jb[0];ka=Za*jb[1];Ca(ka,ea,fa);fa[12]=tb[0];fa[13]=tb[1];fa[14]=tb[2];return!0}if(3===Aa&&(2===xa||1===xa)){Aa=cb[xa][11];if(u.isNone(Aa))return!1;Aa(ha,0,jb,0);ha=Za*jb[1];b(jb,0,tb,0);r.identity(fa);r.translate(fa,fa,tb);ha=1/Math.cos(ha);r.scale(fa,fa,[ha,ha,1]);return!0}return!1};e.getProjectorName=function(ea,ha){switch(ya(ea,ha,a)){case Ha:return"copy3";case V:return"wgs84ToSphericalECEF";
case b:return"wgs84ToWebMercator";case la:return"wgs84ToWGS84ECEF";case Oa:return"webMercatorToWGS84";case na:return"webMercatorToSphericalECEF";case ta:return"webMercatorToWGS84ECEF";case ra:return"wgs84ECEFToWGS84";case ua:return"wgs84ECEFToSphericalECEF";case za:return"wgs84ECEFToWebMercator";case Z:return"sphericalECEFToWGS84";case da:return"sphericalECEFToWebMercator";case Q:return"sphericalMarsPCPFToMars2000";case I:return"sphericalMoonPCPFToMoon2000";case ja:return"sphericalECEFToWGS84ECEF";
case G:return"mars2000ToSphericalPCPF";case m:return"moon2000ToSphericalPCPF";default:return null}};e.getTransformation=z;e.getTransformations=function(ea,ha,fa=null){if(u.isNone(Ea))throw new oa;ea=Ea._getTransformationBySuitability(Fa,ea,ha,fa,null==fa?void 0:fa.spatialReference);if(null!==ea){ha=[];for(const ka of ea)ha.push(N.fromGE(ka));return ha}return[]};e.initializeProjection=function(ea,ha,fa,ka){return R.apply(this,arguments)};e.isLoaded=X;e.isSupported=function(){return!0};e.load=aa;e.localLinearScaleFactors=
function(ea,ha,fa,ka){if(u.isNone(ha)||u.isNone(ka))return!1;const xa=Ka(ha,gb);var Aa=Ka(ka,fb);if(xa===Aa&&0!==xa||L.equals(ha,ka))return fa[0]=1,fa[1]=1,fa[2]=1,!0;if(1===xa){ha=w.length(ea);ea=ha/Math.sqrt(ea[0]*ea[0]+ea[1]*ea[1]);ha/=v.earth.radius;if(3===Aa)return fa[0]=ea*ha,fa[1]=ea*ha,fa[2]=1,!0;if(2===Aa||5===Aa)return Aa=180/(v.earth.radius*Math.PI),fa[0]=Aa*ea*ha,fa[1]=Aa*ha,fa[2]=1,!0}return!1};e.lonLatToSphericalPCPF=function(ea,ha,fa,ka,xa=0){ka+=xa;xa=Math.cos(fa);ea[0]=Math.cos(ha)*
xa*ka;ea[1]=Math.sin(ha)*xa*ka;ea[2]=Math.sin(fa)*ka};e.lonLatToWebMercatorComparable=va;e.project=function(ea,ha,fa=null){return Array.isArray(ea)?0===ea.length?[]:k(Fa,ea,ea[0].spatialReference,ha,fa):k(Fa,[ea],ea.spatialReference,ha,fa)[0]};e.projectBoundingRect=function(ea,ha,fa,ka){if(null==ea)return!1;if(L.equals(ha,ka))return H.set(fa,ea),!0;Ta[0]=ea[0];Ta[1]=ea[1];Ta[2]=0;if(!qa(Ta,ha,0,Ta,ka,0,1))return!1;fa[0]=Ta[0];fa[1]=Ta[1];Ta[0]=ea[2];Ta[1]=ea[3];Ta[2]=0;if(!qa(Ta,ha,0,Ta,ka,0,1))return!1;
fa[2]=Ta[0];fa[3]=Ta[1];return!0};e.projectBoundingSphere=function(ea,ha,fa,ka){if(u.isNone(ha)||u.isNone(ka))return!1;ha=Ba(ha,ka,ib);if(ha.projector===Ha)return fa[0]=ea[0],fa[1]=ea[1],fa[2]=ea[2],fa[3]=ea[3],!0;if(u.isNone(ha.projector))return!1;const {source:xa,dest:Aa}=ha;if(3===Aa.spatialReferenceId){ha=cb[xa.spatialReferenceId][2];if(u.isNone(ha))return!1;ha(ea,0,jb,0);ha=Math.abs(Za*jb[1])+Math.asin(ea[3]/(v.earth.radius+ea[2]));b(jb,0,fa,0);fa[3]=ha>.9999*Math.PI?Number.MAX_VALUE:1/Math.cos(ha)*
ea[3];return!0}ha.projector(ea,0,fa,0);fa[3]=ea[3]*xa.metersPerUnit/Aa.metersPerUnit;return!0};e.projectBuffer=qa;e.projectDirection=function(ea,ha,fa,ka,xa){w.copy(Ra,ea);w.add(Bb,ea,ha);ia(Ra,fa,Ra,xa);ia(Bb,fa,Bb,xa);w.subtract(ka,Bb,Ra);w.normalize(ka,ka)};e.projectExtent=function(ea,ha,fa=ha.spatialReference,ka=0){return u.isNone(fa)?!1:Y(ea,ea.spatialReference,ha,fa,ka)};e.projectMany=k;e.projectMultipoint=function(ea,ha,fa=ha.spatialReference,ka=0){return u.isNone(fa)?!1:c(ea,ea.spatialReference,
ha,fa,ka)};e.projectPoint=function(ea,ha,fa=ha.spatialReference,ka=0){return u.isNone(fa)?!1:h(ea,ea.spatialReference,ha,fa,ka)};e.projectPointToVector=function(ea,ha,fa,ka=0){Ra[0]=ea.x;Ra[1]=ea.y;const xa=ea.z;Ra[2]=void 0!==xa?xa:ka;return qa(Ra,ea.spatialReference,0,ha,fa,0,1)};e.projectPointToWGS84ComparableLonLat=function(ea,ha){Ra[0]=ea.x;Ra[1]=ea.y;const fa=ea.z;Ra[2]=void 0!==fa?fa:0;return ma(Ra,ea.spatialReference,ha)};e.projectPolygon=function(ea,ha,fa=ha.spatialReference,ka=0){return u.isNone(fa)?
!1:M(ea,ea.spatialReference,ha,fa,ka)};e.projectPolyline=function(ea,ha,fa=ha.spatialReference,ka=0){return u.isNone(fa)?!1:B(ea,ea.spatialReference,ha,fa,ka)};e.projectVectorToDehydratedPoint=function(ea,ha,fa){return qa(ea,ha,0,Ra,fa.spatialReference,0,1)?(fa.x=Ra[0],fa.y=Ra[1],fa.z=Ra[2],fa):null};e.projectVectorToPoint=function(ea,ha,fa){if(u.isNone(ha)||u.isNone(fa))return null;const ka=new C({spatialReference:fa});return qa(ea,ha,0,Ra,fa,0,1)?(ka.x=Ra[0],ka.y=Ra[1],ka.z=Ra[2],ka):null};e.projectVectorToVector=
ia;e.projectVectorToWGS84ComparableLonLat=function(ea,ha,fa){return ma(ea,ha,fa)};e.projectXYZToVector=ba;e.sphericalPCPFtoLonLatElevation=W;e.unload=function(){Ga=Fa=Ea=null;Ja={}};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/core/unitUtils":function(){define("exports ./has ./jsonMap ../geometry/projectionEllipsoid ../geometry/SpatialReference ../geometry/support/Ellipsoid ../geometry/support/spatialReferenceUtils ../geometry/support/WKIDUnitConversion".split(" "),function(p,e,A,O,g,
u,l,F){function r(h){if(h=P[h])return h;throw Error("unknown measure");}function w(h){return z[h].baseUnit}function J(h,c=null){c=c||r(h);return z[c].baseUnit===h}function U(h,c,B){if(c===B)return h;const M=r(c);if(M!==r(B))throw Error("incompatible units");h=J(c,M)?h:h*z[M].units[c].inBaseUnits;return J(B,M)?h:h/z[M].units[B].inBaseUnits}function n(h,c){return 3E3>U(h,c,"meters")?"meters":"kilometers"}function y(h,c){return 1E5>U(h,c,"meters")?"meters":"kilometers"}function C(h,c){return 1E3>U(h,
c,"feet")?"feet":"miles"}function f(h,c){return 1E5>U(h,c,"feet")?"feet":"miles"}function E(h){return k.fromJSON(h.toLowerCase())||null}function q(h,c=u.earth.metersPerDegree){return H(h,!0)||c}function H(h,c=!1){let B,M,Y=null;null!=h&&("object"===typeof h?(B=h.wkid,M=h.wkt):"number"===typeof h?B=h:"string"===typeof h&&(M=h));if(B){if(l.isWKIDFromMars(B))return u.mars.metersPerDegree;if(l.isWKIDFromMoon(B))return u.moon.metersPerDegree;Y=L.values[L[B]];!Y&&c&&aa.has(B)&&(Y=K)}else M&&(-1!==M.search(/^PROJCS/i)?
(h=N.exec(M))&&h[1]&&(Y=parseFloat(h[1].split(",")[1])):-1!==M.search(/^GEOCCS/i)&&(h=X.exec(M))&&h[1]&&(Y=parseFloat(h[1].split(",")[1])));return Y}function v(h){let c,B,M=null;null!=h&&("object"===typeof h?(c=h.wkid,B=h.wkt):"number"===typeof h?c=h:"string"===typeof h&&(B=h));c?M=L.units[L[c]]:B&&-1!==B.search(/^PROJCS/i)&&(h=N.exec(B))&&h[1]&&(M=(h=/[\\"\\']{1}([^\\"\\']+)/.exec(h[1]))&&h[1]);return M?E(M):null}const K=u.earth.radius*Math.PI/200,N=/UNIT\[([^\]]+)\]\]$/i,L=F,X=/UNIT\[([^\]]+)\]/i,
aa=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),k=A.strict()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains",
"50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"});e={millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1E3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}};F={"square-millimeters":{inBaseUnits:1E-6},"square-centimeters":{inBaseUnits:1E-4},"square-decimeters":{inBaseUnits:.1*
.1},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:1E6},"square-inches":{inBaseUnits:6.4516E-4},"square-feet":{inBaseUnits:.09290304},"square-yards":{inBaseUnits:.83612736},"square-miles":{inBaseUnits:2589988.110336},"square-us-feet":{inBaseUnits:(h=>h*h)(1200/3937)},acres:{inBaseUnits:4046.8564224},ares:{inBaseUnits:100},hectares:{inBaseUnits:1E4}};const z={length:{baseUnit:"meters",units:e},area:{baseUnit:"square-meters",units:F},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},
"cubic-millimeters":{inBaseUnits:1E3*1E-9},"cubic-centimeters":{inBaseUnits:.001},"cubic-decimeters":{inBaseUnits:1},"cubic-meters":{inBaseUnits:1E3},"cubic-kilometers":{inBaseUnits:1E12},"cubic-inches":{inBaseUnits:.016387064},"cubic-feet":{inBaseUnits:.09290304*304.8},"cubic-yards":{inBaseUnits:764.554857984},"cubic-miles":{inBaseUnits:4.16818182544058E12}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},P=function(){const h={};for(const c in z)for(const B in z[c].units)h[B]=
c;return h}(),R={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},D={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",
esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"};e=A.strict()(R);F=A.strict()(D);A=A.strict()({...R,...D});p.areaUnitsJSONMap=e;p.baseUnitForMeasure=w;p.baseUnitForUnit=function(h){return w(r(h))};p.convertUnit=U;p.getDefaultUnitSystem=function(h){if(!h)return null;switch(v(h)){case "feet":case "us-feet":case "clarke-feet":case "clarke-yards":case "clarke-links":case "sears-yards":case "sears-feet":case "sears-chains":case "benoit-1895-b-chains":case "indian-yards":case "indian-1937-yards":case "gold-coast-feet":case "sears-1922-truncated-chains":return"imperial";
case "50-kilometers":case "150-kilometers":case "meters":return"metric"}return null};p.getMetersPerUnit=H;p.getMetersPerUnitForSR=q;p.getMetersPerVerticalUnitForSR=function(h){if(h&&"object"===typeof h&&!l.isEarth(h))return 1;h=q(h);return 1E5<h?1:h};p.getUnitString=v;p.getVerticalUnitStringForSR=function(h){const c=q(h),B=h instanceof g?O.getReferenceEllipsoid(h).metersPerDegree:1E5;return c>=B?"meters":v(h)};p.inchesPerMeter=39.37;p.isBaseUnit=J;p.isMeasurementSystem=function(h){return"imperial"===
h||"metric"===h};p.lengthToDegrees=function(h,c,B){return U(h,c,"meters")/(B*Math.PI/180)};p.lengthUnitsJSONMap=F;p.measureForUnit=r;p.measurementAreaUnits="metric imperial square-inches square-feet square-yards square-miles square-us-feet square-meters square-kilometers acres ares hectares".split(" ");p.measurementLengthUnits="metric imperial inches feet yards miles nautical-miles us-feet meters kilometers".split(" ");p.preferredImperialAreaUnit=function(h,c){return 1E6>U(h,c,"square-feet")?"square-feet":
"square-miles"};p.preferredImperialLengthUnit=C;p.preferredImperialVerticalLengthUnit=f;p.preferredLengthUnit=function(h,c,B){switch(B){case "metric":return n(h,c);case "imperial":return C(h,c);default:return B}};p.preferredMetricAreaUnit=function(h,c){return 3E6>U(h,c,"square-meters")?"square-meters":"square-kilometers"};p.preferredMetricLengthUnit=n;p.preferredMetricVerticalLengthUnit=y;p.preferredVerticalLengthUnit=function(h,c,B){switch(B){case "metric":return y(h,c);case "imperial":return f(h,
c);default:return B}};p.unitFromRESTJSON=E;p.unitToRESTJSON=function(h){return k.toJSON(h)||null};p.unitsJSONMap=A;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/geometry/projectionEllipsoid":function(){define(["exports","./SpatialReference","./support/Ellipsoid","./support/spatialReferenceUtils"],function(p,e,A,O){function g(w){return new e({wkt:`GEOCCS["Spherical geocentric",
    DATUM["Not specified",
      SPHEROID["Sphere",${w.radius},0]],
    PRIMEM["Greenwich",0.0,
      AUTHORITY["EPSG","8901"]],
    UNIT["m",1.0],
    AXIS["Geocentric X",OTHER],
    AXIS["Geocentric Y",EAST],
    AXIS["Geocentric Z",NORTH]
  ]`})}const u=g(A.earth),l=g(A.mars),F=g(A.moon),r=new e({wkt:`GEOCCS["WGS 84",
  DATUM["WGS_1984",
    SPHEROID["WGS 84",${A.earth.radius},298.257223563,
      AUTHORITY["EPSG","7030"]],
    AUTHORITY["EPSG","6326"]],
  PRIMEM["Greenwich",0,
    AUTHORITY["EPSG","8901"]],
  UNIT["m",1.0,
    AUTHORITY["EPSG","9001"]],
  AXIS["Geocentric X",OTHER],
  AXIS["Geocentric Y",OTHER],
  AXIS["Geocentric Z",NORTH],
  AUTHORITY["EPSG","4978"]
]`});p.SphericalECEFSpatialReference=u;p.SphericalPCPFMars=l;p.SphericalPCPFMoon=F;p.WGS84ECEFSpatialReference=r;p.createSphericalPCPF=g;p.getReferenceEllipsoid=function(w){return w&&(O.isMars(w)||w===l)?A.mars:w&&(O.isMoon(w)||w===F)?A.moon:A.earth};p.getReferenceEllipsoidFromWKID=function(w){return O.isWKIDFromMars(w)?A.mars:O.isWKIDFromMoon(w)?A.moon:A.earth};p.getSphericalPCPF=function(w){return w&&(O.isMars(w)||w===l)?l:w&&(O.isMoon(w)||w===F)?F:u};p.getSphericalPCPFForEllipsoid=function(w){return w&&
w===A.mars?l:w&&w===A.moon?F:u};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/chunks/mat4":function(){define(["exports","./vec3f64","./common"],function(p,e,A){function O(b,t){b[0]=t[0];b[1]=t[1];b[2]=t[2];b[3]=t[3];b[4]=t[4];b[5]=t[5];b[6]=t[6];b[7]=t[7];b[8]=t[8];b[9]=t[9];b[10]=t[10];b[11]=t[11];b[12]=t[12];b[13]=t[13];b[14]=t[14];b[15]=t[15];return b}function g(b,t,m,G,V,W,I,Q,Z,da,ja,la,ra,ua,za,ya,Ba){b[0]=t;b[1]=m;b[2]=G;b[3]=V;b[4]=W;b[5]=I;b[6]=Q;b[7]=Z;b[8]=da;b[9]=ja;b[10]=
la;b[11]=ra;b[12]=ua;b[13]=za;b[14]=ya;b[15]=Ba;return b}function u(b){b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}function l(b,t){if(b===t){const m=t[1],G=t[2],V=t[3],W=t[6],I=t[7],Q=t[11];b[1]=t[4];b[2]=t[8];b[3]=t[12];b[4]=m;b[6]=t[9];b[7]=t[13];b[8]=G;b[9]=W;b[11]=t[14];b[12]=V;b[13]=I;b[14]=Q}else b[0]=t[0],b[1]=t[4],b[2]=t[8],b[3]=t[12],b[4]=t[1],b[5]=t[5],b[6]=t[9],b[7]=t[13],b[8]=t[2],b[9]=t[6],b[10]=t[10],
b[11]=t[14],b[12]=t[3],b[13]=t[7],b[14]=t[11],b[15]=t[15];return b}function F(b,t){const m=t[0],G=t[1],V=t[2],W=t[3],I=t[4],Q=t[5],Z=t[6],da=t[7],ja=t[8],la=t[9],ra=t[10],ua=t[11],za=t[12],ya=t[13],Ba=t[14];t=t[15];const Na=m*Q-G*I,Ea=m*Z-V*I,Fa=m*da-W*I,Ga=G*Z-V*Q,Ja=G*da-W*Q,oa=V*da-W*Z,cb=ja*ya-la*za,gb=ja*Ba-ra*za,fb=ja*t-ua*za,a=la*Ba-ra*ya,ib=la*t-ua*ya,Za=ra*t-ua*Ba;let Ua=Na*Za-Ea*ib+Fa*a+Ga*fb-Ja*gb+oa*cb;if(!Ua)return null;Ua=1/Ua;b[0]=(Q*Za-Z*ib+da*a)*Ua;b[1]=(V*ib-G*Za-W*a)*Ua;b[2]=(ya*
oa-Ba*Ja+t*Ga)*Ua;b[3]=(ra*Ja-la*oa-ua*Ga)*Ua;b[4]=(Z*fb-I*Za-da*gb)*Ua;b[5]=(m*Za-V*fb+W*gb)*Ua;b[6]=(Ba*Fa-za*oa-t*Ea)*Ua;b[7]=(ja*oa-ra*Fa+ua*Ea)*Ua;b[8]=(I*ib-Q*fb+da*cb)*Ua;b[9]=(G*fb-m*ib-W*cb)*Ua;b[10]=(za*Ja-ya*Fa+t*Na)*Ua;b[11]=(la*Fa-ja*Ja-ua*Na)*Ua;b[12]=(Q*gb-I*a-Z*cb)*Ua;b[13]=(m*a-G*gb+V*cb)*Ua;b[14]=(ya*Ea-za*Ga-Ba*Na)*Ua;b[15]=(ja*Ga-la*Ea+ra*Na)*Ua;return b}function r(b,t){const m=t[0],G=t[1],V=t[2],W=t[3],I=t[4],Q=t[5],Z=t[6],da=t[7],ja=t[8],la=t[9],ra=t[10],ua=t[11],za=t[12],ya=
t[13],Ba=t[14];t=t[15];b[0]=Q*(ra*t-ua*Ba)-la*(Z*t-da*Ba)+ya*(Z*ua-da*ra);b[1]=-(G*(ra*t-ua*Ba)-la*(V*t-W*Ba)+ya*(V*ua-W*ra));b[2]=G*(Z*t-da*Ba)-Q*(V*t-W*Ba)+ya*(V*da-W*Z);b[3]=-(G*(Z*ua-da*ra)-Q*(V*ua-W*ra)+la*(V*da-W*Z));b[4]=-(I*(ra*t-ua*Ba)-ja*(Z*t-da*Ba)+za*(Z*ua-da*ra));b[5]=m*(ra*t-ua*Ba)-ja*(V*t-W*Ba)+za*(V*ua-W*ra);b[6]=-(m*(Z*t-da*Ba)-I*(V*t-W*Ba)+za*(V*da-W*Z));b[7]=m*(Z*ua-da*ra)-I*(V*ua-W*ra)+ja*(V*da-W*Z);b[8]=I*(la*t-ua*ya)-ja*(Q*t-da*ya)+za*(Q*ua-da*la);b[9]=-(m*(la*t-ua*ya)-ja*(G*
t-W*ya)+za*(G*ua-W*la));b[10]=m*(Q*t-da*ya)-I*(G*t-W*ya)+za*(G*da-W*Q);b[11]=-(m*(Q*ua-da*la)-I*(G*ua-W*la)+ja*(G*da-W*Q));b[12]=-(I*(la*Ba-ra*ya)-ja*(Q*Ba-Z*ya)+za*(Q*ra-Z*la));b[13]=m*(la*Ba-ra*ya)-ja*(G*Ba-V*ya)+za*(G*ra-V*la);b[14]=-(m*(Q*Ba-Z*ya)-I*(G*Ba-V*ya)+za*(G*Z-V*Q));b[15]=m*(Q*ra-Z*la)-I*(G*ra-V*la)+ja*(G*Z-V*Q);return b}function w(b){const t=b[0],m=b[1],G=b[2],V=b[3],W=b[4],I=b[5],Q=b[6],Z=b[7],da=b[8],ja=b[9],la=b[10],ra=b[11],ua=b[12],za=b[13],ya=b[14];b=b[15];return(t*I-m*W)*(la*
b-ra*ya)-(t*Q-G*W)*(ja*b-ra*za)+(t*Z-V*W)*(ja*ya-la*za)+(m*Q-G*I)*(da*b-ra*ua)-(m*Z-V*I)*(da*ya-la*ua)+(G*Z-V*Q)*(da*za-ja*ua)}function J(b,t,m){const G=t[0],V=t[1],W=t[2],I=t[3],Q=t[4],Z=t[5],da=t[6],ja=t[7],la=t[8],ra=t[9],ua=t[10],za=t[11],ya=t[12],Ba=t[13],Na=t[14];t=t[15];let Ea=m[0],Fa=m[1],Ga=m[2],Ja=m[3];b[0]=Ea*G+Fa*Q+Ga*la+Ja*ya;b[1]=Ea*V+Fa*Z+Ga*ra+Ja*Ba;b[2]=Ea*W+Fa*da+Ga*ua+Ja*Na;b[3]=Ea*I+Fa*ja+Ga*za+Ja*t;Ea=m[4];Fa=m[5];Ga=m[6];Ja=m[7];b[4]=Ea*G+Fa*Q+Ga*la+Ja*ya;b[5]=Ea*V+Fa*Z+Ga*ra+
Ja*Ba;b[6]=Ea*W+Fa*da+Ga*ua+Ja*Na;b[7]=Ea*I+Fa*ja+Ga*za+Ja*t;Ea=m[8];Fa=m[9];Ga=m[10];Ja=m[11];b[8]=Ea*G+Fa*Q+Ga*la+Ja*ya;b[9]=Ea*V+Fa*Z+Ga*ra+Ja*Ba;b[10]=Ea*W+Fa*da+Ga*ua+Ja*Na;b[11]=Ea*I+Fa*ja+Ga*za+Ja*t;Ea=m[12];Fa=m[13];Ga=m[14];Ja=m[15];b[12]=Ea*G+Fa*Q+Ga*la+Ja*ya;b[13]=Ea*V+Fa*Z+Ga*ra+Ja*Ba;b[14]=Ea*W+Fa*da+Ga*ua+Ja*Na;b[15]=Ea*I+Fa*ja+Ga*za+Ja*t;return b}function U(b,t,m){const G=m[0],V=m[1];m=m[2];let W=void 0,I=void 0,Q=void 0,Z=void 0,da=void 0,ja=void 0,la=void 0,ra=void 0,ua=void 0,za=
void 0,ya=void 0,Ba=void 0;t===b?(b[12]=t[0]*G+t[4]*V+t[8]*m+t[12],b[13]=t[1]*G+t[5]*V+t[9]*m+t[13],b[14]=t[2]*G+t[6]*V+t[10]*m+t[14],b[15]=t[3]*G+t[7]*V+t[11]*m+t[15]):(W=t[0],I=t[1],Q=t[2],Z=t[3],da=t[4],ja=t[5],la=t[6],ra=t[7],ua=t[8],za=t[9],ya=t[10],Ba=t[11],b[0]=W,b[1]=I,b[2]=Q,b[3]=Z,b[4]=da,b[5]=ja,b[6]=la,b[7]=ra,b[8]=ua,b[9]=za,b[10]=ya,b[11]=Ba,b[12]=W*G+da*V+ua*m+t[12],b[13]=I*G+ja*V+za*m+t[13],b[14]=Q*G+la*V+ya*m+t[14],b[15]=Z*G+ra*V+Ba*m+t[15]);return b}function n(b,t,m){const G=m[0],
V=m[1];m=m[2];b[0]=t[0]*G;b[1]=t[1]*G;b[2]=t[2]*G;b[3]=t[3]*G;b[4]=t[4]*V;b[5]=t[5]*V;b[6]=t[6]*V;b[7]=t[7]*V;b[8]=t[8]*m;b[9]=t[9]*m;b[10]=t[10]*m;b[11]=t[11]*m;b[12]=t[12];b[13]=t[13];b[14]=t[14];b[15]=t[15];return b}function y(b,t,m,G){let V=G[0],W=G[1];G=G[2];let I=Math.sqrt(V*V+W*W+G*G);var Q=void 0,Z=void 0;let da=void 0,ja=void 0,la=void 0,ra=void 0,ua=void 0,za=void 0,ya=void 0,Ba=void 0,Na=void 0,Ea=void 0,Fa=void 0,Ga=void 0,Ja=void 0,oa=void 0,cb=void 0,gb=void 0,fb=void 0,a=void 0,ib=
void 0,Za=void 0;Z=Q=void 0;if(I<A.EPSILON)return null;I=1/I;V*=I;W*=I;G*=I;Q=Math.sin(m);Z=Math.cos(m);da=1-Z;ja=t[0];la=t[1];ra=t[2];ua=t[3];za=t[4];ya=t[5];Ba=t[6];Na=t[7];Ea=t[8];Fa=t[9];Ga=t[10];Ja=t[11];oa=V*V*da+Z;cb=W*V*da+G*Q;gb=G*V*da-W*Q;fb=V*W*da-G*Q;a=W*W*da+Z;ib=G*W*da+V*Q;Za=V*G*da+W*Q;Q=W*G*da-V*Q;Z=G*G*da+Z;b[0]=ja*oa+za*cb+Ea*gb;b[1]=la*oa+ya*cb+Fa*gb;b[2]=ra*oa+Ba*cb+Ga*gb;b[3]=ua*oa+Na*cb+Ja*gb;b[4]=ja*fb+za*a+Ea*ib;b[5]=la*fb+ya*a+Fa*ib;b[6]=ra*fb+Ba*a+Ga*ib;b[7]=ua*fb+Na*a+Ja*
ib;b[8]=ja*Za+za*Q+Ea*Z;b[9]=la*Za+ya*Q+Fa*Z;b[10]=ra*Za+Ba*Q+Ga*Z;b[11]=ua*Za+Na*Q+Ja*Z;t!==b&&(b[12]=t[12],b[13]=t[13],b[14]=t[14],b[15]=t[15]);return b}function C(b,t,m){const G=Math.sin(m);m=Math.cos(m);const V=t[4],W=t[5],I=t[6],Q=t[7],Z=t[8],da=t[9],ja=t[10],la=t[11];t!==b&&(b[0]=t[0],b[1]=t[1],b[2]=t[2],b[3]=t[3],b[12]=t[12],b[13]=t[13],b[14]=t[14],b[15]=t[15]);b[4]=V*m+Z*G;b[5]=W*m+da*G;b[6]=I*m+ja*G;b[7]=Q*m+la*G;b[8]=Z*m-V*G;b[9]=da*m-W*G;b[10]=ja*m-I*G;b[11]=la*m-Q*G;return b}function f(b,
t,m){const G=Math.sin(m);m=Math.cos(m);const V=t[0],W=t[1],I=t[2],Q=t[3],Z=t[8],da=t[9],ja=t[10],la=t[11];t!==b&&(b[4]=t[4],b[5]=t[5],b[6]=t[6],b[7]=t[7],b[12]=t[12],b[13]=t[13],b[14]=t[14],b[15]=t[15]);b[0]=V*m-Z*G;b[1]=W*m-da*G;b[2]=I*m-ja*G;b[3]=Q*m-la*G;b[8]=V*G+Z*m;b[9]=W*G+da*m;b[10]=I*G+ja*m;b[11]=Q*G+la*m;return b}function E(b,t,m){const G=Math.sin(m);m=Math.cos(m);const V=t[0],W=t[1],I=t[2],Q=t[3],Z=t[4],da=t[5],ja=t[6],la=t[7];t!==b&&(b[8]=t[8],b[9]=t[9],b[10]=t[10],b[11]=t[11],b[12]=t[12],
b[13]=t[13],b[14]=t[14],b[15]=t[15]);b[0]=V*m+Z*G;b[1]=W*m+da*G;b[2]=I*m+ja*G;b[3]=Q*m+la*G;b[4]=Z*m-V*G;b[5]=da*m-W*G;b[6]=ja*m-I*G;b[7]=la*m-Q*G;return b}function q(b,t){b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=t[0];b[13]=t[1];b[14]=t[2];b[15]=1;return b}function H(b,t){b[0]=t[0];b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=t[1];b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=t[2];b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}function v(b,t,m){let G=m[0],V=m[1];m=m[2];
let W=Math.sqrt(G*G+V*V+m*m),I=void 0,Q=void 0,Z=void 0;if(W<A.EPSILON)return null;W=1/W;G*=W;V*=W;m*=W;I=Math.sin(t);Q=Math.cos(t);Z=1-Q;b[0]=G*G*Z+Q;b[1]=V*G*Z+m*I;b[2]=m*G*Z-V*I;b[3]=0;b[4]=G*V*Z-m*I;b[5]=V*V*Z+Q;b[6]=m*V*Z+G*I;b[7]=0;b[8]=G*m*Z+V*I;b[9]=V*m*Z-G*I;b[10]=m*m*Z+Q;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}function K(b,t){const m=Math.sin(t);t=Math.cos(t);b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=t;b[6]=m;b[7]=0;b[8]=0;b[9]=-m;b[10]=t;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}
function N(b,t){const m=Math.sin(t);t=Math.cos(t);b[0]=t;b[1]=0;b[2]=-m;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=m;b[9]=0;b[10]=t;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}function L(b,t){const m=Math.sin(t);t=Math.cos(t);b[0]=t;b[1]=m;b[2]=0;b[3]=0;b[4]=-m;b[5]=t;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}function X(b,t,m){var G=t[0],V=t[1],W=t[2],I=t[3],Q=G+G,Z=V+V;const da=W+W;t=G*Q;const ja=G*Z;G*=da;const la=V*Z;V*=da;W*=da;Q*=I;Z*=I;I*=da;b[0]=
1-(la+W);b[1]=ja+I;b[2]=G-Z;b[3]=0;b[4]=ja-I;b[5]=1-(t+W);b[6]=V+Q;b[7]=0;b[8]=G+Z;b[9]=V-Q;b[10]=1-(t+la);b[11]=0;b[12]=m[0];b[13]=m[1];b[14]=m[2];b[15]=1;return b}function aa(b,t){const m=va,G=-t[0],V=-t[1],W=-t[2],I=t[3],Q=t[4],Z=t[5],da=t[6],ja=t[7],la=G*G+V*V+W*W+I*I;0<la?(m[0]=2*(Q*I+ja*G+Z*W-da*V)/la,m[1]=2*(Z*I+ja*V+da*G-Q*W)/la,m[2]=2*(da*I+ja*W+Q*V-Z*G)/la):(m[0]=2*(Q*I+ja*G+Z*W-da*V),m[1]=2*(Z*I+ja*V+da*G-Q*W),m[2]=2*(da*I+ja*W+Q*V-Z*G));X(b,t,m);return b}function k(b,t){b[0]=t[12];b[1]=
t[13];b[2]=t[14];return b}function z(b,t){const m=t[0],G=t[1],V=t[2],W=t[4],I=t[5],Q=t[6],Z=t[8],da=t[9];t=t[10];b[0]=Math.sqrt(m*m+G*G+V*V);b[1]=Math.sqrt(W*W+I*I+Q*Q);b[2]=Math.sqrt(Z*Z+da*da+t*t);return b}function P(b,t){const m=t[0]+t[5]+t[10];let G=0;0<m?(G=2*Math.sqrt(m+1),b[3]=.25*G,b[0]=(t[6]-t[9])/G,b[1]=(t[8]-t[2])/G,b[2]=(t[1]-t[4])/G):t[0]>t[5]&&t[0]>t[10]?(G=2*Math.sqrt(1+t[0]-t[5]-t[10]),b[3]=(t[6]-t[9])/G,b[0]=.25*G,b[1]=(t[1]+t[4])/G,b[2]=(t[8]+t[2])/G):t[5]>t[10]?(G=2*Math.sqrt(1+
t[5]-t[0]-t[10]),b[3]=(t[8]-t[2])/G,b[0]=(t[1]+t[4])/G,b[1]=.25*G,b[2]=(t[6]+t[9])/G):(G=2*Math.sqrt(1+t[10]-t[0]-t[5]),b[3]=(t[1]-t[4])/G,b[0]=(t[8]+t[2])/G,b[1]=(t[6]+t[9])/G,b[2]=.25*G);return b}function R(b,t,m,G){var V=t[0],W=t[1],I=t[2],Q=t[3],Z=V+V,da=W+W,ja=I+I;t=V*Z;const la=V*da;V*=ja;const ra=W*da;W*=ja;I*=ja;Z*=Q;da*=Q;Q*=ja;ja=G[0];const ua=G[1];G=G[2];b[0]=(1-(ra+I))*ja;b[1]=(la+Q)*ja;b[2]=(V-da)*ja;b[3]=0;b[4]=(la-Q)*ua;b[5]=(1-(t+I))*ua;b[6]=(W+Z)*ua;b[7]=0;b[8]=(V+da)*G;b[9]=(W-Z)*
G;b[10]=(1-(t+ra))*G;b[11]=0;b[12]=m[0];b[13]=m[1];b[14]=m[2];b[15]=1;return b}function D(b,t,m,G,V){var W=t[0],I=t[1],Q=t[2],Z=t[3],da=W+W,ja=I+I,la=Q+Q;t=W*da;var ra=W*ja,ua=W*la;W=I*ja;I*=la;var za=Q*la;Q=Z*da;ja*=Z;const ya=Z*la;var Ba=G[0],Na=G[1];la=G[2];G=V[0];Z=V[1];V=V[2];da=(1-(W+za))*Ba;const Ea=(ra+ya)*Ba;Ba*=ua-ja;ra=(ra-ya)*Na;za=(1-(t+za))*Na;Na*=I+Q;ua=(ua+ja)*la;I=(I-Q)*la;t=(1-(t+W))*la;b[0]=da;b[1]=Ea;b[2]=Ba;b[3]=0;b[4]=ra;b[5]=za;b[6]=Na;b[7]=0;b[8]=ua;b[9]=I;b[10]=t;b[11]=0;
b[12]=m[0]+G-(da*G+ra*Z+ua*V);b[13]=m[1]+Z-(Ea*G+za*Z+I*V);b[14]=m[2]+V-(Ba*G+Na*Z+t*V);b[15]=1;return b}function h(b,t){var m=t[0],G=t[1],V=t[2];t=t[3];var W=m+m,I=G+G;const Q=V+V;m*=W;const Z=G*W;G*=I;const da=V*W,ja=V*I;V*=Q;W*=t;I*=t;t*=Q;b[0]=1-G-V;b[1]=Z+t;b[2]=da-I;b[3]=0;b[4]=Z-t;b[5]=1-m-V;b[6]=ja+W;b[7]=0;b[8]=da+I;b[9]=ja-W;b[10]=1-m-G;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}function c(b,t,m,G,V,W,I){const Q=1/(m-t),Z=1/(V-G),da=1/(W-I);b[0]=2*W*Q;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=
2*W*Z;b[6]=0;b[7]=0;b[8]=(m+t)*Q;b[9]=(V+G)*Z;b[10]=(I+W)*da;b[11]=-1;b[12]=0;b[13]=0;b[14]=I*W*2*da;b[15]=0;return b}function B(b,t,m,G,V){t=1/Math.tan(t/2);let W=void 0;b[0]=t/m;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=t;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[11]=-1;b[12]=0;b[13]=0;b[15]=0;null!=V&&Infinity!==V?(W=1/(G-V),b[10]=(V+G)*W,b[14]=2*V*G*W):(b[10]=-1,b[14]=-2*G);return b}function M(b,t,m,G){const V=Math.tan(t.upDegrees*Math.PI/180),W=Math.tan(t.downDegrees*Math.PI/180),I=Math.tan(t.leftDegrees*Math.PI/
180);t=Math.tan(t.rightDegrees*Math.PI/180);const Q=2/(I+t),Z=2/(V+W);b[0]=Q;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=Z;b[6]=0;b[7]=0;b[8]=-((I-t)*Q*.5);b[9]=(V-W)*Z*.5;b[10]=G/(m-G);b[11]=-1;b[12]=0;b[13]=0;b[14]=G*m/(m-G);b[15]=0;return b}function Y(b,t,m,G,V,W,I){const Q=1/(t-m),Z=1/(G-V),da=1/(W-I);b[0]=-2*Q;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=-2*Z;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=2*da;b[11]=0;b[12]=(t+m)*Q;b[13]=(V+G)*Z;b[14]=(I+W)*da;b[15]=1;return b}function ba(b,t,m,G){let V=void 0,W=void 0;var I=void 0,
Q=void 0;let Z=void 0,da=void 0;var ja=void 0,la=void 0;let ra=void 0,ua=void 0;const za=t[0],ya=t[1];t=t[2];I=G[0];Q=G[1];G=G[2];ja=m[0];la=m[1];m=m[2];if(Math.abs(za-ja)<A.EPSILON&&Math.abs(ya-la)<A.EPSILON&&Math.abs(t-m)<A.EPSILON)return u(b);ja=za-ja;la=ya-la;ra=t-m;ua=1/Math.sqrt(ja*ja+la*la+ra*ra);ja*=ua;la*=ua;ra*=ua;V=Q*ra-G*la;W=G*ja-I*ra;I=I*la-Q*ja;(ua=Math.sqrt(V*V+W*W+I*I))?(ua=1/ua,V*=ua,W*=ua,I*=ua):I=W=V=0;Q=la*I-ra*W;Z=ra*V-ja*I;da=ja*W-la*V;(ua=Math.sqrt(Q*Q+Z*Z+da*da))?(ua=1/ua,
Q*=ua,Z*=ua,da*=ua):da=Z=Q=0;b[0]=V;b[1]=Q;b[2]=ja;b[3]=0;b[4]=W;b[5]=Z;b[6]=la;b[7]=0;b[8]=I;b[9]=da;b[10]=ra;b[11]=0;b[12]=-(V*za+W*ya+I*t);b[13]=-(Q*za+Z*ya+da*t);b[14]=-(ja*za+la*ya+ra*t);b[15]=1;return b}function ia(b,t,m,G){const V=t[0],W=t[1];t=t[2];var I=G[0];const Q=G[1];var Z=G[2];G=V-m[0];let da=W-m[1];m=t-m[2];let ja=G*G+da*da+m*m;0<ja&&(ja=1/Math.sqrt(ja),G*=ja,da*=ja,m*=ja);let la=Q*m-Z*da;Z=Z*G-I*m;I=I*da-Q*G;ja=la*la+Z*Z+I*I;0<ja&&(ja=1/Math.sqrt(ja),la*=ja,Z*=ja,I*=ja);b[0]=la;b[1]=
Z;b[2]=I;b[3]=0;b[4]=da*I-m*Z;b[5]=m*la-G*I;b[6]=G*Z-da*la;b[7]=0;b[8]=G;b[9]=da;b[10]=m;b[11]=0;b[12]=V;b[13]=W;b[14]=t;b[15]=1;return b}function ma(b){return"mat4("+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+", "+b[4]+", "+b[5]+", "+b[6]+", "+b[7]+", "+b[8]+", "+b[9]+", "+b[10]+", "+b[11]+", "+b[12]+", "+b[13]+", "+b[14]+", "+b[15]+")"}function qa(b){return Math.sqrt(b[0]**2+b[1]**2+b[2]**2+b[3]**2+b[4]**2+b[5]**2+b[6]**2+b[7]**2+b[8]**2+b[9]**2+b[10]**2+b[11]**2+b[12]**2+b[13]**2+b[14]**2+b[15]**2)}function wa(b,
t,m){b[0]=t[0]+m[0];b[1]=t[1]+m[1];b[2]=t[2]+m[2];b[3]=t[3]+m[3];b[4]=t[4]+m[4];b[5]=t[5]+m[5];b[6]=t[6]+m[6];b[7]=t[7]+m[7];b[8]=t[8]+m[8];b[9]=t[9]+m[9];b[10]=t[10]+m[10];b[11]=t[11]+m[11];b[12]=t[12]+m[12];b[13]=t[13]+m[13];b[14]=t[14]+m[14];b[15]=t[15]+m[15];return b}function Ca(b,t,m){b[0]=t[0]-m[0];b[1]=t[1]-m[1];b[2]=t[2]-m[2];b[3]=t[3]-m[3];b[4]=t[4]-m[4];b[5]=t[5]-m[5];b[6]=t[6]-m[6];b[7]=t[7]-m[7];b[8]=t[8]-m[8];b[9]=t[9]-m[9];b[10]=t[10]-m[10];b[11]=t[11]-m[11];b[12]=t[12]-m[12];b[13]=
t[13]-m[13];b[14]=t[14]-m[14];b[15]=t[15]-m[15];return b}function Ka(b,t,m){b[0]=t[0]*m;b[1]=t[1]*m;b[2]=t[2]*m;b[3]=t[3]*m;b[4]=t[4]*m;b[5]=t[5]*m;b[6]=t[6]*m;b[7]=t[7]*m;b[8]=t[8]*m;b[9]=t[9]*m;b[10]=t[10]*m;b[11]=t[11]*m;b[12]=t[12]*m;b[13]=t[13]*m;b[14]=t[14]*m;b[15]=t[15]*m;return b}function Ha(b,t,m,G){b[0]=t[0]+m[0]*G;b[1]=t[1]+m[1]*G;b[2]=t[2]+m[2]*G;b[3]=t[3]+m[3]*G;b[4]=t[4]+m[4]*G;b[5]=t[5]+m[5]*G;b[6]=t[6]+m[6]*G;b[7]=t[7]+m[7]*G;b[8]=t[8]+m[8]*G;b[9]=t[9]+m[9]*G;b[10]=t[10]+m[10]*G;b[11]=
t[11]+m[11]*G;b[12]=t[12]+m[12]*G;b[13]=t[13]+m[13]*G;b[14]=t[14]+m[14]*G;b[15]=t[15]+m[15]*G;return b}function Oa(b,t){return b[0]===t[0]&&b[1]===t[1]&&b[2]===t[2]&&b[3]===t[3]&&b[4]===t[4]&&b[5]===t[5]&&b[6]===t[6]&&b[7]===t[7]&&b[8]===t[8]&&b[9]===t[9]&&b[10]===t[10]&&b[11]===t[11]&&b[12]===t[12]&&b[13]===t[13]&&b[14]===t[14]&&b[15]===t[15]}function na(b,t){const m=b[0],G=b[1],V=b[2],W=b[3],I=b[4],Q=b[5],Z=b[6],da=b[7],ja=b[8],la=b[9],ra=b[10],ua=b[11],za=b[12],ya=b[13],Ba=b[14];b=b[15];const Na=
t[0],Ea=t[1],Fa=t[2],Ga=t[3],Ja=t[4],oa=t[5],cb=t[6],gb=t[7],fb=t[8],a=t[9],ib=t[10],Za=t[11],Ua=t[12],Ta=t[13],jb=t[14];t=t[15];return Math.abs(m-Na)<=A.EPSILON*Math.max(1,Math.abs(m),Math.abs(Na))&&Math.abs(G-Ea)<=A.EPSILON*Math.max(1,Math.abs(G),Math.abs(Ea))&&Math.abs(V-Fa)<=A.EPSILON*Math.max(1,Math.abs(V),Math.abs(Fa))&&Math.abs(W-Ga)<=A.EPSILON*Math.max(1,Math.abs(W),Math.abs(Ga))&&Math.abs(I-Ja)<=A.EPSILON*Math.max(1,Math.abs(I),Math.abs(Ja))&&Math.abs(Q-oa)<=A.EPSILON*Math.max(1,Math.abs(Q),
Math.abs(oa))&&Math.abs(Z-cb)<=A.EPSILON*Math.max(1,Math.abs(Z),Math.abs(cb))&&Math.abs(da-gb)<=A.EPSILON*Math.max(1,Math.abs(da),Math.abs(gb))&&Math.abs(ja-fb)<=A.EPSILON*Math.max(1,Math.abs(ja),Math.abs(fb))&&Math.abs(la-a)<=A.EPSILON*Math.max(1,Math.abs(la),Math.abs(a))&&Math.abs(ra-ib)<=A.EPSILON*Math.max(1,Math.abs(ra),Math.abs(ib))&&Math.abs(ua-Za)<=A.EPSILON*Math.max(1,Math.abs(ua),Math.abs(Za))&&Math.abs(za-Ua)<=A.EPSILON*Math.max(1,Math.abs(za),Math.abs(Ua))&&Math.abs(ya-Ta)<=A.EPSILON*Math.max(1,
Math.abs(ya),Math.abs(Ta))&&Math.abs(Ba-jb)<=A.EPSILON*Math.max(1,Math.abs(Ba),Math.abs(jb))&&Math.abs(b-t)<=A.EPSILON*Math.max(1,Math.abs(b),Math.abs(t))}function ta(b){const t=A.EPSILON,m=b[0],G=b[1],V=b[2],W=b[4],I=b[5],Q=b[6],Z=b[8],da=b[9];b=b[10];return Math.abs(1-(m*m+W*W+Z*Z))<=t&&Math.abs(1-(G*G+I*I+da*da))<=t&&Math.abs(1-(V*V+Q*Q+b*b))<=t}const va=e.create();e=Object.freeze({__proto__:null,copy:O,set:g,identity:u,transpose:l,invert:F,adjoint:r,determinant:w,multiply:J,translate:U,scale:n,
rotate:y,rotateX:C,rotateY:f,rotateZ:E,fromTranslation:q,fromScaling:H,fromRotation:v,fromXRotation:K,fromYRotation:N,fromZRotation:L,fromRotationTranslation:X,fromQuat2:aa,getTranslation:k,getScaling:z,getRotation:P,fromRotationTranslationScale:R,fromRotationTranslationScaleOrigin:D,fromQuat:h,frustum:c,perspective:B,perspectiveFromFieldOfView:M,ortho:Y,lookAt:ba,targetTo:ia,str:ma,frob:qa,add:wa,subtract:Ca,multiplyScalar:Ka,multiplyScalarAndAdd:Ha,exactEquals:Oa,equals:na,isOrthoNormal:ta,mul:J,
sub:Ca});p.add=wa;p.adjoint=r;p.copy=O;p.determinant=w;p.equals=na;p.exactEquals=Oa;p.frob=qa;p.fromQuat=h;p.fromQuat2=aa;p.fromRotation=v;p.fromRotationTranslation=X;p.fromRotationTranslationScale=R;p.fromRotationTranslationScaleOrigin=D;p.fromScaling=H;p.fromTranslation=q;p.fromXRotation=K;p.fromYRotation=N;p.fromZRotation=L;p.frustum=c;p.getRotation=P;p.getScaling=z;p.getTranslation=k;p.identity=u;p.invert=F;p.isOrthoNormal=ta;p.lookAt=ba;p.mat4=e;p.mul=J;p.multiply=J;p.multiplyScalar=Ka;p.multiplyScalarAndAdd=
Ha;p.ortho=Y;p.perspective=B;p.perspectiveFromFieldOfView=M;p.rotate=y;p.rotateX=C;p.rotateY=f;p.rotateZ=E;p.scale=n;p.set=g;p.str=ma;p.sub=Ca;p.subtract=Ca;p.targetTo=ia;p.translate=U;p.transpose=l})},"esri/chunks/pe":function(){define(["require","exports","./_rollupPluginBabelHelpers","../assets","../core/has"],function(p,e,A,O,g){function u(){return!!e._pe}function l(){return!!g("esri-wasm")}function F(){return y?y:y=(new Promise(function(f,E){p(["./pe-wasm"],f,E)})).then(function(f){return f.peWasm}).then(({default:f})=>
f({locateFile:E=>O.getAssetUrl(`esri/geometry/support/${E}`)})).then(f=>{r(f)})}function r(f){function E(v,K,N){v[K]=N(v[K])}e._pe=f;e.PeDefs.init();e.PeGTlistExtended.init();e.PeNotationMgrs.init();e.PeNotationUtm.init();e.PePCSInfo.init();e.PeGCSExtent=function(v){function K(){return v.apply(this,arguments)||this}A._inheritsLoose(K,v);K.prototype.destroy=function(){e._pe.destroy(this)};return K}(e._pe.PeGCSExtent);f=[e._pe.PeDatum,e._pe.PeGeogcs,e._pe.PeGeogtran,e._pe.PeObject,e._pe.PeParameter,
e._pe.PePrimem,e._pe.PeProjcs,e._pe.PeSpheroid,e._pe.PeUnit];for(var q of f)E(q.prototype,"getName",v=>function(){return v.call(this,Array(e.PeDefs.PE_NAME_MAX))});for(const v of[e._pe.PeGeogtran,e._pe.PeProjcs])E(v.prototype,"getParameters",K=>function(){const N=Array(e.PeDefs.PE_PARM_MAX);let L=K.call(this);for(let X=0;X<N.length;X++){const aa=e._pe.getValue(L,"*");N[X]=aa?e._pe.wrapPointer(aa,e._pe.PeParameter):null;L+=Int32Array.BYTES_PER_ELEMENT}return N});E(e._pe.PeHorizon.prototype,"getCoord",
v=>function(){const K=this.getSize();if(!K)return null;const N=[],L=v.call(this);n(N,K,L);return N});E(e._pe.PeGTlistExtendedEntry.prototype,"getEntries",v=>{const K=e._pe._pe_getPeGTlistExtendedGTsSize();return function(){let N=null;var L=v.call(this);if(!e._pe.compare(L,e._pe.NULL)){N=[L];const X=this.getSteps();if(1<X){L=e._pe.getPointer(L);for(let aa=1;aa<X;aa++)N.push(e._pe.wrapPointer(L+K*aa,e._pe.PeGTlistExtendedGTs))}}return N}});const H=e._pe._pe_getPeHorizonSize();q=v=>function(){let K=
this._cache;K||(this._cache=K=new Map);if(K.has(v))return K.get(v);let N=null;var L=v.call(this);if(!e._pe.compare(L,e._pe.NULL)){N=[L];const X=L.getNump();if(1<X){L=e._pe.getPointer(L);for(let aa=1;aa<X;aa++)N.push(e._pe.wrapPointer(L+H*aa,e._pe.PeHorizon))}}K.set(v,N);return N};E(e._pe.PeProjcs.prototype,"horizonGcsGenerate",q);E(e._pe.PeProjcs.prototype,"horizonPcsGenerate",q);e._pe.PeObject.prototype.toString=function(v=e.PeDefs.PE_STR_OPTS_NONE){e._pe.ensureCache.prepare();const K=e._pe.getPointer(this),
N=e._pe.ensureInt8(Array(e.PeDefs.PE_BUFFER_MAX));return e._pe.UTF8ToString(e._pe._pe_object_to_string_ext(K,v,N))}}function w(f){if(f){var E=e._pe.getClass(f);E&&(E=e._pe.getCache(E))&&(f=e._pe.getPointer(f))&&delete E[f]}}function J(f,E){const q=[];E=Array(E);for(let H=0;H<f;H++)q.push(e._pe.ensureInt8(E));return q}function U(f){let E;Array.isArray(f[0])?(E=[],f.forEach(q=>{E.push(q[0],q[1])})):E=f;return E}function n(f,E,q,H=!1){if(H)for(H=0;H<2*E;H++)f[H]=e._pe.getValue(q+H*Float64Array.BYTES_PER_ELEMENT,
"double");else{H=0===f.length;for(let v=0;v<E;v++)H&&(f[v]=Array(2)),f[v][0]=e._pe.getValue(q,"double"),f[v][1]=e._pe.getValue(q+Float64Array.BYTES_PER_ELEMENT,"double"),q+=2*Float64Array.BYTES_PER_ELEMENT}}let y;e._pe=null;e.PeCSTransformations=void 0;(function(f){function E(v,K,N){e._pe.ensureCache.prepare();var L=U(N);const X=N===L;L=e._pe.ensureFloat64(L);(v=e._pe._pe_geog_to_proj(e._pe.getPointer(v),K,L))&&n(N,K,L,X);return v}function q(v,K,N){return H(v,K,N,0)}function H(v,K,N,L){e._pe.ensureCache.prepare();
var X=U(N);const aa=N===X;X=e._pe.ensureFloat64(X);(v=e._pe._pe_proj_to_geog_center(e._pe.getPointer(v),K,X,L))&&n(N,K,X,aa);return v}f.geogToProj=E;f.projGeog=function(v,K,N,L){switch(L){case e.PeDefs.PE_TRANSFORM_P_TO_G:return q(v,K,N);case e.PeDefs.PE_TRANSFORM_G_TO_P:return E(v,K,N)}return 0};f.projToGeog=q;f.projToGeogCenter=H})(e.PeCSTransformations||(e.PeCSTransformations={}));e.PeDefs=void 0;(function(f){f.init=function(){f.PE_BUFFER_MAX=e._pe.PeDefs.prototype.PE_BUFFER_MAX;f.PE_NAME_MAX=
e._pe.PeDefs.prototype.PE_NAME_MAX;f.PE_MGRS_MAX=e._pe.PeDefs.prototype.PE_MGRS_MAX;f.PE_USNG_MAX=e._pe.PeDefs.prototype.PE_USNG_MAX;f.PE_DD_MAX=e._pe.PeDefs.prototype.PE_DD_MAX;f.PE_DDM_MAX=e._pe.PeDefs.prototype.PE_DDM_MAX;f.PE_DMS_MAX=e._pe.PeDefs.prototype.PE_DMS_MAX;f.PE_UTM_MAX=e._pe.PeDefs.prototype.PE_UTM_MAX;f.PE_PARM_MAX=e._pe.PeDefs.prototype.PE_PARM_MAX;f.PE_TYPE_NONE=e._pe.PeDefs.prototype.PE_TYPE_NONE;f.PE_TYPE_GEOGCS=e._pe.PeDefs.prototype.PE_TYPE_GEOGCS;f.PE_TYPE_PROJCS=e._pe.PeDefs.prototype.PE_TYPE_PROJCS;
f.PE_TYPE_GEOGTRAN=e._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN;f.PE_TYPE_COORDSYS=e._pe.PeDefs.prototype.PE_TYPE_COORDSYS;f.PE_TYPE_UNIT=e._pe.PeDefs.prototype.PE_TYPE_UNIT;f.PE_TYPE_LINUNIT=e._pe.PeDefs.prototype.PE_TYPE_LINUNIT;f.PE_STR_OPTS_NONE=e._pe.PeDefs.prototype.PE_STR_OPTS_NONE;f.PE_STR_AUTH_NONE=e._pe.PeDefs.prototype.PE_STR_AUTH_NONE;f.PE_STR_AUTH_TOP=e._pe.PeDefs.prototype.PE_STR_AUTH_TOP;f.PE_STR_NAME_CANON=e._pe.PeDefs.prototype.PE_STR_NAME_CANON;f.PE_PARM_X0=e._pe.PeDefs.prototype.PE_PARM_X0;
f.PE_PARM_ND=e._pe.PeDefs.prototype.PE_PARM_ND;f.PE_TRANSFORM_1_TO_2=e._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2;f.PE_TRANSFORM_2_TO_1=e._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1;f.PE_TRANSFORM_P_TO_G=e._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G;f.PE_TRANSFORM_G_TO_P=e._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P;f.PE_HORIZON_RECT=e._pe.PeDefs.prototype.PE_HORIZON_RECT;f.PE_HORIZON_POLY=e._pe.PeDefs.prototype.PE_HORIZON_POLY;f.PE_HORIZON_LINE=e._pe.PeDefs.prototype.PE_HORIZON_LINE;f.PE_HORIZON_DELTA=e._pe.PeDefs.prototype.PE_HORIZON_DELTA}})(e.PeDefs||
(e.PeDefs={}));e.PeFactory=void 0;(function(f){function E(K,N){let L=null,X=q[K];X||(X={},q[K]=X);X.hasOwnProperty(String(N))?L=X[N]:(K=e._pe.PeFactory.prototype.factoryByType(K,N),e._pe.compare(K,e._pe.NULL)||(L=K,X[N]=L));return L=v(L)}const q={},H={},v=K=>{if(K){const N=K.getType();switch(N){case e.PeDefs.PE_TYPE_GEOGCS:K=e._pe.castObject(K,e._pe.PeGeogcs);break;case e.PeDefs.PE_TYPE_PROJCS:K=e._pe.castObject(K,e._pe.PeProjcs);break;case e.PeDefs.PE_TYPE_GEOGTRAN:K=e._pe.castObject(K,e._pe.PeGeogtran);
break;default:N&e.PeDefs.PE_TYPE_UNIT&&(K=e._pe.castObject(K,e._pe.PeUnit))}}return K};f.initialize=function(){e._pe.PeFactory.prototype.initialize(null)};f.coordsys=function(K){return E(e.PeDefs.PE_TYPE_COORDSYS,K)};f.factoryByType=E;f.fromString=function(K,N){let L=null,X=H[K];X||(X={},H[K]=X);X.hasOwnProperty(N)?L=X[N]:(K=e._pe.PeFactory.prototype.fromString(K,N),e._pe.compare(K,e._pe.NULL)||(L=K,X[N]=L));return L=v(L)};f.geogcs=function(K){return E(e.PeDefs.PE_TYPE_GEOGCS,K)};f.geogtran=function(K){return E(e.PeDefs.PE_TYPE_GEOGTRAN,
K)};f.getCode=function(K){return e._pe.PeFactory.prototype.getCode(K)};f.projcs=function(K){return E(e.PeDefs.PE_TYPE_PROJCS,K)};f.unit=function(K){return E(e.PeDefs.PE_TYPE_UNIT,K)}})(e.PeFactory||(e.PeFactory={}));e.PeGCSExtent=null;e.PeGTlistExtended=void 0;(function(f){let E;f.init=function(){f.PE_GTLIST_OPTS_COMMON=e._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON;E=e._pe._pe_getPeGTlistExtendedEntrySize()};f.getGTlist=function(q,H,v,K,N,L){let X=null;const aa=new e._pe.PeInteger(L);try{const k=
e._pe.PeGTlistExtended.prototype.getGTlist(q,H,v,K,N,aa);if(L=aa.val)if(X=[k],1<L){const z=e._pe.getPointer(k);for(q=1;q<L;q++)X.push(e._pe.wrapPointer(z+E*q,e._pe.PeGTlistExtendedEntry))}}finally{e._pe.destroy(aa)}return X}})(e.PeGTlistExtended||(e.PeGTlistExtended={}));e.PeGTlistExtendedEntry=void 0;(function(f){f.destroy=function(E){if(E&&E.length){for(const q of E)w(q),q.getEntries().forEach(H=>{w(H);H=H.getGeogtran();w(H);H.getParameters().forEach(w);[H.getGeogcs1(),H.getGeogcs2()].forEach(v=>
{w(v);const K=v.getDatum();w(K);w(K.getSpheroid());w(v.getPrimem());w(v.getUnit())})});e._pe.PeGTlistExtendedEntry.prototype.Delete(E[0])}}})(e.PeGTlistExtendedEntry||(e.PeGTlistExtendedEntry={}));e.PeGTTransformations=void 0;(function(f){f.geogToGeog=function(E,q,H,v,K){e._pe.ensureCache.prepare();var N=U(H);const L=H===N;N=e._pe.ensureFloat64(N);let X=0;v&&(X=e._pe.ensureFloat64(v));(E=e._pe._pe_geog_to_geog(e._pe.getPointer(E),q,N,X,K))&&n(H,q,N,L);return E}})(e.PeGTTransformations||(e.PeGTTransformations=
{}));e.PeNotationDms=void 0;(function(f){const E=(H,v,K,N,L,X)=>{e._pe.ensureCache.prepare();switch(H){case "dd":var aa=e._pe._pe_geog_to_dd;var k=e.PeDefs.PE_DD_MAX;break;case "ddm":aa=e._pe._pe_geog_to_ddm;k=e.PeDefs.PE_DDM_MAX;break;case "dms":aa=e._pe._pe_geog_to_dms,k=e.PeDefs.PE_DMS_MAX}H=0;v&&(H=e._pe.getPointer(v));v=U(N);v=e._pe.ensureFloat64(v);k=J(K,k);N=e._pe.ensureInt32(k);if(L=aa(H,K,v,L,N))for(aa=0;aa<K;aa++)X[aa]=e._pe.UTF8ToString(k[aa]);return L},q=(H,v,K,N,L)=>{e._pe.ensureCache.prepare();
switch(H){case "dd":var X=e._pe._pe_dd_to_geog;break;case "ddm":X=e._pe._pe_ddm_to_geog;break;case "dms":X=e._pe._pe_dms_to_geog}H=0;v&&(H=e._pe.getPointer(v));v=N.map(aa=>e._pe.ensureString(aa));N=e._pe.ensureInt32(v);v=e._pe.ensureFloat64(Array(2*K));(X=X(H,K,N,v))&&n(L,K,v);return X};f.geog_to_dms=function(H,v,K,N,L){return E("dms",H,v,K,N,L)};f.dms_to_geog=function(H,v,K,N){return q("dms",H,v,K,N)};f.geog_to_ddm=function(H,v,K,N,L){return E("ddm",H,v,K,N,L)};f.ddm_to_geog=function(H,v,K,N){return q("ddm",
H,v,K,N)};f.geog_to_dd=function(H,v,K,N,L){return E("dd",H,v,K,N,L)};f.dd_to_geog=function(H,v,K,N){return q("dd",H,v,K,N)}})(e.PeNotationDms||(e.PeNotationDms={}));e.PeNotationMgrs=void 0;(function(f){f.init=function(){f.PE_MGRS_STYLE_NEW=e._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW;f.PE_MGRS_STYLE_OLD=e._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD;f.PE_MGRS_STYLE_AUTO=e._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO;f.PE_MGRS_180_ZONE_1_PLUS=e._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS;
f.PE_MGRS_ADD_SPACES=e._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES};f.geog_to_mgrs_extended=function(E,q,H,v,K,N,L){e._pe.ensureCache.prepare();let X=0;E&&(X=e._pe.getPointer(E));E=U(H);H=e._pe.ensureFloat64(E);E=J(q,e.PeDefs.PE_MGRS_MAX);const aa=e._pe.ensureInt32(E);if(v=e._pe._pe_geog_to_mgrs_extended(X,q,H,v,K,N,aa))for(K=0;K<q;K++)L[K]=e._pe.UTF8ToString(E[K]);return v};f.mgrs_to_geog_extended=function(E,q,H,v,K){e._pe.ensureCache.prepare();let N=0;E&&(N=e._pe.getPointer(E));E=H.map(L=>e._pe.ensureString(L));
H=e._pe.ensureInt32(E);E=e._pe.ensureFloat64(Array(2*q));(v=e._pe._pe_mgrs_to_geog_extended(N,q,H,v,E))&&n(K,q,E);return v}})(e.PeNotationMgrs||(e.PeNotationMgrs={}));e.PeNotationUsng=void 0;(function(f){f.geog_to_usng=function(E,q,H,v,K,N,L){e._pe.ensureCache.prepare();let X=0;E&&(X=e._pe.getPointer(E));E=U(H);H=e._pe.ensureFloat64(E);E=J(q,e.PeDefs.PE_MGRS_MAX);const aa=e._pe.ensureInt32(E);if(v=e._pe._pe_geog_to_usng(X,q,H,v,K,N,aa))for(K=0;K<q;K++)L[K]=e._pe.UTF8ToString(E[K]);return v};f.usng_to_geog=
function(E,q,H,v){e._pe.ensureCache.prepare();var K=0;E&&(K=e._pe.getPointer(E));E=H.map(N=>e._pe.ensureString(N));H=e._pe.ensureInt32(E);E=e._pe.ensureFloat64(Array(2*q));(K=e._pe._pe_usng_to_geog(K,q,H,E))&&n(v,q,E);return K}})(e.PeNotationUsng||(e.PeNotationUsng={}));e.PeNotationUtm=void 0;(function(f){f.init=function(){f.PE_UTM_OPTS_NONE=e._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE;f.PE_UTM_OPTS_ADD_SPACES=e._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES;f.PE_UTM_OPTS_NS=e._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS};
f.geog_to_utm=function(E,q,H,v,K){e._pe.ensureCache.prepare();var N=0;E&&(N=e._pe.getPointer(E));E=U(H);H=e._pe.ensureFloat64(E);E=J(q,e.PeDefs.PE_UTM_MAX);const L=e._pe.ensureInt32(E);if(v=e._pe._pe_geog_to_utm(N,q,H,v,L))for(N=0;N<q;N++)K[N]=e._pe.UTF8ToString(E[N]);return v};f.utm_to_geog=function(E,q,H,v,K){e._pe.ensureCache.prepare();let N=0;E&&(N=e._pe.getPointer(E));E=H.map(L=>e._pe.ensureString(L));H=e._pe.ensureInt32(E);E=e._pe.ensureFloat64(Array(2*q));(v=e._pe._pe_utm_to_geog(N,q,H,v,E))&&
n(K,q,E);return v}})(e.PeNotationUtm||(e.PeNotationUtm={}));e.PePCSInfo=void 0;(function(f){const E=new Map;f.init=function(){f.PE_PCSINFO_OPTION_NONE=e._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE;f.PE_PCSINFO_OPTION_DOMAIN=e._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN;f.PE_POLE_OUTSIDE_BOUNDARY=e._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY;f.PE_POLE_POINT=e._pe.PePCSInfo.prototype.PE_POLE_POINT};f.generate=function(q,H=f.PE_PCSINFO_OPTION_DOMAIN){let v,K;E.has(q)&&(K=E.get(q),K[H]&&
(v=K[H]));v||(v=e._pe.PePCSInfo.prototype.generate(q,H),K||(K=[],E.set(q,K)),K[H]=v);return v}})(e.PePCSInfo||(e.PePCSInfo={}));e.PeVersion=void 0;(function(f){f.version_string=function(){return e._pe.PeVersion.prototype.version_string()}})(e.PeVersion||(e.PeVersion={}));var C=Object.freeze({__proto__:null,get _pe(){return e._pe},isLoaded:u,isSupported:l,load:F,get PeCSTransformations(){return e.PeCSTransformations},get PeDefs(){return e.PeDefs},get PeFactory(){return e.PeFactory},get PeGCSExtent(){return e.PeGCSExtent},
get PeGTlistExtended(){return e.PeGTlistExtended},get PeGTlistExtendedEntry(){return e.PeGTlistExtendedEntry},get PeGTTransformations(){return e.PeGTTransformations},get PeNotationDms(){return e.PeNotationDms},get PeNotationMgrs(){return e.PeNotationMgrs},get PeNotationUsng(){return e.PeNotationUsng},get PeNotationUtm(){return e.PeNotationUtm},get PePCSInfo(){return e.PePCSInfo},get PeVersion(){return e.PeVersion},_init:r});e._init=r;e.isLoaded=u;e.isSupported=l;e.load=F;e.pe=C})},"esri/assets":function(){define("exports ./config ./request ./core/Error ./core/Logger ./core/urlUtils".split(" "),
function(p,e,A,O,g,u){function l(r){if(!e.assetsPath)throw F.errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new O("assets:path-not-set","config.assetsPath is not set");return u.join(e.assetsPath,r)}const F=g.getLogger("esri.assets");p.fetchAsset=function(r,w){return A(l(r),w)};p.getAssetUrl=l;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/geometry/support/geodesicConstants":function(){define(["exports","./Ellipsoid"],
function(p,e){const A=Math.PI/180;var O=e.earth.radius;const g=e.earth.eccentricitySquared;O={a1:O*g,a2:O*g*O*g,a3:O*g*g/2,a4:O*g*O*g*2.5,a5:O*g+O*g*g/2,a6:1-g};e={4267:{a:6378206.4,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:e.earth.radius,f:e.earth.flattening},104900:{a:2439700,f:0},104901:{a:6051E3,f:0},104902:{a:6051800,f:0},104903:{a:e.moon.radius,f:e.moon.flattening},104904:{a:3393400,f:.005207166853303471},104905:{a:e.mars.radius,f:e.mars.flattening},104906:{a:6200,f:0},104907:{a:11100,
f:0},104908:{a:71492E3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1E4,f:0},104912:{a:2409300,f:0},104913:{a:15E3,f:0},104914:{a:4E4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85E3,f:0},104918:{a:1821460,f:0},104919:{a:5E3,f:0},104920:{a:12E3,f:0},104921:{a:3E4,f:3},104922:{a:18E3,f:0},104923:{a:14E3,f:0},104924:{a:49300,f:0},104925:{a:60268E3,f:.09796243445941462},104926:{a:16E3,f:0},104927:{a:9500,f:0},104928:{a:56E4,f:0},104929:{a:249400,f:0},104930:{a:59500,
f:0},104931:{a:16E3,f:0},104932:{a:133E3,f:0},104933:{a:718E3,f:0},104934:{a:888E3,f:0},104935:{a:1986300,f:0},104936:{a:1E4,f:0},104937:{a:41900,f:0},104938:{a:11E4,f:0},104939:{a:50100,f:0},104940:{a:764E3,f:0},104941:{a:11E3,f:0},104942:{a:529800,f:0},104943:{a:2575E3,f:0},104944:{a:25559E3,f:.022927344575296365},104945:{a:578900,f:0},104946:{a:33E3,f:0},104947:{a:21E3,f:0},104948:{a:13E3,f:0},104949:{a:31E3,f:0},104950:{a:27E3,f:0},104951:{a:42E3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},
104954:{a:15E3,f:0},104955:{a:54E3,f:0},104956:{a:77E3,f:0},104957:{a:27E3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764E3,f:.01708124697141011},104961:{a:74E3,f:0},104962:{a:79E3,f:0},104963:{a:104E3,f:.14423076923076922},104964:{a:29E3,f:0},104965:{a:17E4,f:0},104966:{a:208E3,f:0},104967:{a:4E4,f:0},104968:{a:1352600,f:0},104969:{a:1195E3,f:0},104970:{a:593E3,f:0},104971:{a:e.mars.radius,f:0},104972:{a:47E4,f:0},104973:{a:255E3,f:0},104974:{a:2439400,f:0}};p.WKT_SPHEROID_REGEX=
/SPHEROID\[([^\]]+)]/i;p.earthEllipsoidConstants=O;p.spheroids=e;p.toRadians=A;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/geometry/support/GeographicTransformation":function(){define(["./GeographicTransformationStep"],function(p){return function(){function e(O){this.steps=[];this._cached_projection={};this._chain="";this._gtlistentry=null;if(O&&O.steps)for(const g of O.steps)g instanceof p?this.steps.push(g):this.steps.push(new p({wkid:g.wkid,wkt:g.wkt,isInverse:g.isInverse}))}e.cacheKey=
function(O,g){return[void 0!==O.wkid&&null!==O.wkid?O.wkid.toString():"-1",void 0!==O.wkt&&null!==O.wkt?O.wkt.toString():"",void 0!==g.wkid&&null!==g.wkid?g.wkid.toString():"-1",void 0!==g.wkt&&null!==g.wkt?g.wkt.toString():""].join()};e.fromGE=function(O){const g=new e;let u="";for(const l of O.steps)O=p.fromGE(l),g.steps.push(O),u+=O.uid.toString()+",";g._cached_projection={};g._gtlistentry=null;g._chain=u;return g};var A=e.prototype;A.getInverse=function(){const O=new e;O.steps=[];for(let g=this.steps.length-
1;0<=g;g--)O.steps.push(this.steps[g].getInverse());return O};A.getGTListEntry=function(){let O="";for(const g of this.steps)O+=g.uid.toString()+",";O!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=O);return this._gtlistentry};A.assignCachedGe=function(O,g,u){this._cached_projection[e.cacheKey(O,g)]=u};A.getCachedGeTransformation=function(O,g){let u="";for(const l of this.steps)u+=l.uid.toString()+",";u!==this._chain&&(this._gtlistentry=null,this._cached_projection=
{},this._chain=u);O=this._cached_projection[e.cacheKey(O,g)];return void 0===O?null:O};return e}()})},"esri/geometry/support/GeographicTransformationStep":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(p){let e=0;return function(){function A(O=null){this.uid=e++;O?(this._wkt=void 0!==O.wkt?O.wkt:null,this._wkid=void 0!==O.wkid?O.wkid:-1,this._isInverse=void 0!==O.isInverse?!0===O.isInverse:!1):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}A.fromGE=function(O){const g=new A;
g._wkt=O.wkt;g._wkid=O.wkid;g._isInverse=O.isInverse;return g};A.prototype.getInverse=function(){const O=new A;O._wkt=this.wkt;O._wkid=this._wkid;O._isInverse=!this.isInverse;return O};p._createClass(A,[{key:"wkt",get:function(){return this._wkt},set:function(O){this._wkt=O;this.uid=e++}},{key:"wkid",get:function(){return this._wkid},set:function(O){this._wkid=O;this.uid=e++}},{key:"isInverse",get:function(){return this._isInverse},set:function(O){this._isInverse=O;this.uid=e++}}]);return A}()})},
"esri/geometry/geometryAdapters/json":function(){define(["exports"],function(p){let e=function(l,F,r){this.x=l;this.y=F;this.spatialReference=r;this.m=this.z=void 0},A=function(l,F,r,w){this.rings=l;this.spatialReference=F;this.hasM=this.hasZ=void 0;r&&(this.hasZ=r);w&&(this.hasM=w)},O=function(l,F,r,w){this.paths=l;this.spatialReference=F;this.hasM=this.hasZ=void 0;r&&(this.hasZ=r);w&&(this.hasM=w)},g=function(l,F,r,w){this.points=l;this.spatialReference=F;this.hasM=this.hasZ=void 0;r&&(this.hasZ=
r);w&&(this.hasM=w)},u=function(l,F,r,w,J){this.xmin=l;this.ymin=F;this.xmax=r;this.ymax=w;this.spatialReference=J;this.mmax=this.mmin=this.zmax=this.zmin=void 0};p.jsonAdapter={convertToGEGeometry:function(l,F){return null==F?null:l.convertJSONToGeometry(F)},exportPoint:function(l,F,r){r=new e(l.getPointX(F),l.getPointY(F),r);const w=l.hasZ(F),J=l.hasM(F);w&&(r.z=l.getPointZ(F));J&&(r.m=l.getPointM(F));return r},exportPolygon:function(l,F,r){return new A(l.exportPaths(F),r,l.hasZ(F),l.hasM(F))},
exportPolyline:function(l,F,r){return new O(l.exportPaths(F),r,l.hasZ(F),l.hasM(F))},exportMultipoint:function(l,F,r){return new g(l.exportPoints(F),r,l.hasZ(F),l.hasM(F))},exportExtent:function(l,F,r){var w=l.hasZ(F);const J=l.hasM(F);r=new u(l.getXMin(F),l.getYMin(F),l.getXMax(F),l.getYMax(F),r);w&&(w=l.getZExtent(F),r.zmin=w.vmin,r.zmax=w.vmax);J&&(l=l.getMExtent(F),r.mmin=l.vmin,r.mmax=l.vmax);return r}};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/graphics/data/QueryEngine":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../core/lang ../../../core/maybe ../../../core/MemCache ../../../core/unitUtils ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../../../geometry/support/boundsUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ./attributeSupport ./projectionSupport ./QueryEngineCapabilities ./QueryEngineResult ./spatialQuerySupport ./timeSupport ./utils ../../support/FieldsIndex ../../support/PromiseQueue ../../../smartMapping/support/utils".split(" "),
function(p,e,A,O,g,u,l,F,r,w,J,U,n,y,C,f,E,q,H,v,K,N,L){function X(h){return h.every(c=>"exceedslimit"!==c.statisticType)}const aa=new Set,k=new u.MemCacheStorage(2E6);let z=0,P=function(){function h(B){this.capabilities={query:f.queryCapabilities};this.geometryType=B.geometryType;this.hasM=B.hasM;this.hasZ=B.hasZ;this.objectIdField=B.objectIdField;this.spatialReference=B.spatialReference;this.definitionExpression=B.definitionExpression;this.featureStore=B.featureStore;this.aggregateAdapter=B.aggregateAdapter;
this._changeHandle=this.featureStore.events.on("changed",()=>this.clearCache());this.timeInfo=B.timeInfo;B.cacheSpatialQueries&&(this._geometryQueryCache=new u.MemCache(z++ +"$$",k));this.fieldsIndex=new K(B.fields);B.scheduler&&B.priority&&(this._frameQueue=new N,this._frameTask=B.scheduler.registerTask(B.priority,this))}var c=h.prototype;c.destroy=function(){this._frameTask&&(this._frameTask.remove(),this._frameTask=null,this._frameQueue.cancelAll(),this._frameQueue=null);this.clearCache();this._geometryQueryCache&&
this._geometryQueryCache.destroy();this._changeHandle&&(this._changeHandle.remove(),this._changeHandle=null);this.fieldsIndex.destroy()};c.clearCache=function(){this._geometryQueryCache&&this._geometryQueryCache.clear();this._timeExtent=this._allItems=null};c.executeQuery=function(){var B=e._asyncToGenerator(function*(M={},Y){let ba=O.clone(M),ia;try{ba=yield this._schedule(()=>v.normalizeQuery(ba,this.definitionExpression,this.spatialReference),Y),ba=yield this._reschedule(()=>this._checkQuerySupport(ba),
Y),ia=yield this._reschedule(()=>this._executeGeometryQuery(ba,Y),Y),ia=yield this._reschedule(()=>ia.executeAggregateIdsQuery(ba),Y),ia=yield this._reschedule(()=>ia.executeObjectIdsQuery(ba),Y),ia=yield this._reschedule(()=>ia.executeTimeQuery(ba),Y),ia=yield this._reschedule(()=>ia.executeAttributesQuery(ba),Y)}catch(ma){if(ma!==v.QUERY_ENGINE_EMPTY_RESULT)throw ma;ia=new E([],null,this)}return ia.createQueryResponse(ba)});return function(){return B.apply(this,arguments)}}();c.executeQueryForCount=
function(){var B=e._asyncToGenerator(function*(M={},Y){let ba=O.clone(M),ia;ba.returnGeometry=!1;ba.returnCentroid=!1;ba.outSR=null;try{ba=yield this._schedule(()=>v.normalizeQuery(ba,this.definitionExpression,this.spatialReference),Y),ba=yield this._reschedule(()=>this._checkQuerySupport(ba),Y),ia=yield this._reschedule(()=>this._executeGeometryQuery(ba,Y),Y),ia=yield this._reschedule(()=>ia.executeAggregateIdsQuery(ba),Y),ia=yield this._reschedule(()=>ia.executeObjectIdsQuery(ba),Y),ia=yield this._reschedule(()=>
ia.executeTimeQuery(ba),Y),ia=yield this._reschedule(()=>ia.executeAttributesQuery(ba),Y)}catch(ma){if(ma!==v.QUERY_ENGINE_EMPTY_RESULT)throw ma;return 0}return ia.createQueryResponseForCount(ba)});return function(){return B.apply(this,arguments)}}();c.executeQueryForExtent=function(){var B=e._asyncToGenerator(function*(M={},Y){let ba=O.clone(M),ia;M=ba.outSR;try{ba=yield this._schedule(()=>v.normalizeQuery(ba,this.definitionExpression,this.spatialReference),Y);ba=yield this._reschedule(()=>this._checkQuerySupport(ba),
Y);ba.returnGeometry=!0;ba.returnCentroid=!1;ba.outSR=null;ia=yield this._reschedule(()=>this._executeGeometryQuery(ba,Y),Y);ia=yield this._reschedule(()=>ia.executeAggregateIdsQuery(ba),Y);ia=yield this._reschedule(()=>ia.executeObjectIdsQuery(ba),Y);ia=yield this._reschedule(()=>ia.executeTimeQuery(ba),Y);ia=yield this._reschedule(()=>ia.executeAttributesQuery(ba),Y);const ma=ia.size;if(!ma)return{count:ma,extent:null};F.set(D,F.NEGATIVE_INFINITY);this.featureStore.forEachBounds(ia.items,Ca=>F.expandWithAABB(D,
Ca),R);const qa={xmin:D[0],ymin:D[1],xmax:D[3],ymax:D[4],spatialReference:v.cleanFromGeometryEngine(this.spatialReference)};this.hasZ&&isFinite(D[2])&&isFinite(D[5])&&(qa.zmin=D[2],qa.zmax=D[5]);const wa=C.project(qa,ia.spatialReference,M);wa.spatialReference=v.cleanFromGeometryEngine(M||this.spatialReference);if(0===wa.xmax-wa.xmin){const Ca=l.getMetersPerUnitForSR(wa.spatialReference);wa.xmin-=Ca;wa.xmax+=Ca}if(0===wa.ymax-wa.ymin){const Ca=l.getMetersPerUnitForSR(wa.spatialReference);wa.ymin-=
Ca;wa.ymax+=Ca}if(this.hasZ&&null!=wa.zmin&&null!=wa.zmax&&0===wa.zmax-wa.zmin){const Ca=l.getMetersPerUnitForSR(wa.spatialReference);wa.zmin-=Ca;wa.zmax+=Ca}return{count:ma,extent:wa}}catch(ma){if(ma===v.QUERY_ENGINE_EMPTY_RESULT)return{count:0,extent:null};throw ma;}});return function(){return B.apply(this,arguments)}}();c.executeQueryForIds=function(){var B=e._asyncToGenerator(function*(M={},Y){return this.executeQueryForIdSet(M,Y).then(ba=>Array.from(ba))});return function(){return B.apply(this,
arguments)}}();c.executeQueryForIdSet=function(){var B=e._asyncToGenerator(function*(M={},Y){let ba=O.clone(M),ia;ba.returnGeometry=!1;ba.returnCentroid=!1;ba.outSR=null;try{ba=yield this._schedule(()=>v.normalizeQuery(ba,this.definitionExpression,this.spatialReference),Y);ba=yield this._reschedule(()=>this._checkQuerySupport(ba),Y);ia=yield this._reschedule(()=>this._executeGeometryQuery(ba,Y),Y);ia=yield this._reschedule(()=>ia.executeAggregateIdsQuery(ba),Y);ia=yield this._reschedule(()=>ia.executeObjectIdsQuery(ba),
Y);ia=yield this._reschedule(()=>ia.executeTimeQuery(ba),Y);ia=yield this._reschedule(()=>ia.executeAttributesQuery(ba),Y);const ma=ia.items,qa=new Set;yield this._reschedule(()=>{for(const wa of ma)qa.add(ia.featureAdapter.getObjectId(wa))},Y);return qa}catch(ma){if(ma===v.QUERY_ENGINE_EMPTY_RESULT)return new Set;throw ma;}});return function(){return B.apply(this,arguments)}}();c.executeQueryForSnapping=function(){var B=e._asyncToGenerator(function*(M,Y){const {point:ba,distance:ia,types:ma}=M;if(0===
ma)return{candidates:[]};const qa=yield this._reschedule(()=>this._checkQuerySupport(M.query),Y),wa=!n.equals(ba.spatialReference,this.spatialReference);wa&&(yield C.checkProjectionSupport(ba.spatialReference,this.spatialReference));var Ca="number"===typeof ia?ia:ia.x,Ka="number"===typeof ia?ia:ia.y;Ca={xmin:ba.x-Ca,xmax:ba.x+Ca,ymin:ba.y-Ka,ymax:ba.y+Ka,spatialReference:ba.spatialReference};Ca=wa?C.project(Ca,this.spatialReference):Ca;if(!Ca)return{candidates:[]};Ka=(yield U.normalizeCentralMeridian(J.fromJSON(ba),
null,{signal:Y}))[0];const Ha=(yield U.normalizeCentralMeridian(J.fromJSON(Ca),null,{signal:Y}))[0];if(g.isNone(Ka)||g.isNone(Ha))return{candidates:[]};let Oa=new E(this._searchFeatures(this._getQueryBBoxes(Ha.toJSON())),null,this);Oa=yield this._reschedule(()=>Oa.executeObjectIdsQuery(qa),Y);Oa=yield this._reschedule(()=>Oa.executeTimeQuery(qa),Y);Oa=yield this._reschedule(()=>Oa.executeAttributesQuery(qa),Y);Y=Ka.toJSON();Y=wa?C.project(Y,this.spatialReference):Y;return Oa.createSnappingResponse({...M,
point:Y,distance:wa?Math.max(Ca.xmax-Ca.xmin,Ca.ymax-Ca.ymin)/2:ia},ba.spatialReference)});return function(M,Y){return B.apply(this,arguments)}}();c.executeQueryForLatestObservations=function(){var B=e._asyncToGenerator(function*(M={},Y){if(!this.timeInfo||!this.timeInfo.trackIdField)throw new A("feature-store:unsupported-query","Missing timeInfo or timeInfo.trackIdField",{query:M,timeInfo:this.timeInfo});let ba=O.clone(M),ia;try{ba=yield this._schedule(()=>v.normalizeQuery(ba,this.definitionExpression,
this.spatialReference),Y),ba=yield this._reschedule(()=>this._checkQuerySupport(ba),Y),ia=yield this._reschedule(()=>this._executeGeometryQuery(ba,Y),Y),ia=yield this._reschedule(()=>ia.executeAggregateIdsQuery(ba),Y),ia=yield this._reschedule(()=>ia.executeObjectIdsQuery(ba),Y),ia=yield this._reschedule(()=>ia.executeTimeQuery(ba),Y),ia=yield this._reschedule(()=>ia.executeAttributesQuery(ba),Y),ia=yield this._reschedule(()=>ia.filterLatest(),Y)}catch(ma){if(ma!==v.QUERY_ENGINE_EMPTY_RESULT)throw ma;
ia=new E([],null,this)}return ia.createQueryResponse(ba)});return function(){return B.apply(this,arguments)}}();c.executeQueryForSummaryStatistics=function(){var B=e._asyncToGenerator(function*(M={},Y,ba){M=O.clone(M);let ia;try{M=yield this._schedule(()=>v.normalizeQuery(M,this.definitionExpression,this.spatialReference),ba),M=yield this._reschedule(()=>this._checkSummaryStatisticsSupport(M,Y),ba),ia=yield this._reschedule(()=>this._executeGeometryQuery(M,ba),ba),ia=yield this._reschedule(()=>ia.executeAggregateIdsQuery(M),
ba),ia=yield this._reschedule(()=>ia.executeObjectIdsQuery(M),ba),ia=yield this._reschedule(()=>ia.executeTimeQuery(M),ba),ia=yield this._reschedule(()=>ia.executeAttributesQuery(M),ba)}catch(ma){if(ma!==v.QUERY_ENGINE_EMPTY_RESULT)throw ma;ia=new E([],null,this)}return ia.createSummaryStatisticsResponse(M,Y)});return function(){return B.apply(this,arguments)}}();c._schedule=function(){var B=e._asyncToGenerator(function*(M,Y){return this._frameQueue?this._frameQueue.push(M,Y):M()});return function(M,
Y){return B.apply(this,arguments)}}();c._reschedule=function(){var B=e._asyncToGenerator(function*(M,Y){return this._frameQueue?this._frameQueue.unshift(M,Y):M()});return function(M,Y){return B.apply(this,arguments)}}();c.runTask=function(B){for(this._budget=B;!B.done&&this._frameQueue&&this._frameQueue.process();)B.madeProgress();this._budget=null};c._getAll=function(){if(!this._allItems){const B=[];this.featureStore.forEach(M=>B.push(M));this._allItems=new E(B,null,this)}return this._allItems};
c._executeGeometryQuery=function(){var B=e._asyncToGenerator(function*(M,Y){var ba=this;const {geometry:ia,outSR:ma,spatialRel:qa,returnGeometry:wa,returnCentroid:Ca}=M,Ka=wa||Ca,Ha=n.isValid(ma)&&!n.equals(this.spatialReference,ma),Oa=this._geometryQueryCache?Ha&&Ka?JSON.stringify({geometry:ia,spatialRelationship:qa,outSpatialReference:ma}):JSON.stringify({geometry:ia,spatialRelationship:qa}):null;if(Oa){var na=this._geometryQueryCache.get(Oa);if(!g.isUndefined(na))return na}na=function(){var t=
e._asyncToGenerator(function*(m){if(Ha&&Ka)return m=yield m.project(ma),Oa&&ba._geometryQueryCache.put(Oa,m,m.size||1),m;Oa&&ba._geometryQueryCache.put(Oa,m,m.size||1);return m});return function(m){return t.apply(this,arguments)}}();if(!ia)return na(this._getAll());const ta=this.featureAdapter;if("esriSpatialRelDisjoint"===qa){M=this._searchFeatures(this._getQueryBBoxes(ia));if(!M.length)return na(this._getAll());let t,m;const G=new Set;for(var va of M)G.add(ta.getObjectId(va));yield this._reschedule(()=>
{let V=0;t=Array(G.size);this.featureStore.forEach(W=>t[V++]=W);m=G},Y);M=yield this._reschedule(e._asyncToGenerator(function*(){const V=yield q.getSpatialQueryOperator(qa,ia,ba.geometryType,ba.hasZ,ba.hasM);return new E(yield ba._runSpatialFilter(t,W=>!m.has(ta.getObjectId(W))||V(ta.getGeometry(W)),Y),ia,ba)}),Y);return na(M)}va=this._searchFeatures(this._getQueryBBoxes(ia));if(!va.length)return na=new E([],ia,this),Oa&&this._geometryQueryCache.put(Oa,na,na.size||1),na;if(this._canExecuteSoloPass(ia,
M))return na(new E(va,ia,this));const b=yield q.getSpatialQueryOperator(qa,ia,this.geometryType,this.hasZ,this.hasM);M=yield this._runSpatialFilter(va,t=>b(ta.getGeometry(t)),Y);return na(new E(M,ia,this))});return function(M,Y){return B.apply(this,arguments)}}();c._runSpatialFilter=function(){var B=e._asyncToGenerator(function*(M,Y,ba){var ia=this;if(!Y)return M;if(!this._budget)return M.filter(Ca=>Y(Ca));let ma=0;const qa=[],wa=function(){var Ca=e._asyncToGenerator(function*(){for(;ma<M.length;){const Ka=
M[ma];Y(Ka)&&qa.push(Ka);ia._budget.done&&(yield ia._reschedule(()=>wa(),ba));++ma}});return function(){return Ca.apply(this,arguments)}}();return this._reschedule(()=>wa(),ba).then(()=>qa)});return function(M,Y,ba){return B.apply(this,arguments)}}();c._canExecuteSoloPass=function(B,M){const {geometryType:Y}=this;({spatialRel:M}=M);return q.canQueryWithRBush(B)&&("esriSpatialRelEnvelopeIntersects"===M||"esriGeometryPoint"===Y&&("esriSpatialRelIntersects"===M||"esriSpatialRelContains"===M||"esriSpatialRelWithin"===
M))};c._getQueryBBoxes=function(B){if(q.canQueryWithRBush(B)){if(J.isExtent(B))return[r.fromValues(B.xmin,B.ymin,B.xmax,B.ymax)];if(J.isPolygon(B))return B.rings.map(M=>r.fromValues(Math.min(M[0][0],M[2][0]),Math.min(M[0][1],M[2][1]),Math.max(M[0][0],M[2][0]),Math.max(M[0][1],M[2][1])))}return[w.getBoundsXY(r.create(),B)]};c._searchFeatures=function(B){for(const ba of B)this.featureStore.forEachInBounds(ba,ia=>{aa.add(ia)});const M=Array(aa.size);let Y=0;aa.forEach(ba=>M[Y++]=ba);aa.clear();return M};
c._checkSummaryStatisticsSupport=function(){var B=e._asyncToGenerator(function*(M,Y){if(0>M.distance||null!=M.geometryPrecision||M.multipatchOption||M.pixelSize||M.relationParam||M.text||M.outStatistics||M.groupByFieldsForStatistics||M.having||M.orderByFields)throw new A("feature-store:unsupported-query","Unsupported query options",{query:M});return Promise.all([this._checkAttributesQuerySupport(M),this._checkSummaryStatisticsParamsSupport(Y),q.checkSpatialQuerySupport(M,this.geometryType,this.spatialReference),
C.checkProjectionSupport(this.spatialReference,M.outSR)]).then(()=>M)});return function(M,Y){return B.apply(this,arguments)}}();c._checkSummaryStatisticsParamsSupport=function(){var B=e._asyncToGenerator(function*(M){const Y=yield L.getFieldsList({field:M.field,normalizationField:M.normalizationField,valueExpression:M.valueExpression});if(!Y.length)throw new A("feature-store:unsupported-query","params should have atleast a field or valueExpression",{params:M});y.validateFields(this.fieldsIndex,Y,
"params contains missing fields")});return function(M){return B.apply(this,arguments)}}();c._checkQuerySupport=function(){var B=e._asyncToGenerator(function*(M){if(0>M.distance||null!=M.geometryPrecision||M.multipatchOption||M.pixelSize||M.relationParam||M.text)throw new A("feature-store:unsupported-query","Unsupported query options",{query:M});return Promise.all([this._checkAttributesQuerySupport(M),this._checkStatisticsQuerySupport(M),q.checkSpatialQuerySupport(M,this.geometryType,this.spatialReference),
C.checkProjectionSupport(this.spatialReference,M.outSR)]).then(()=>M)});return function(M){return B.apply(this,arguments)}}();c._checkAttributesQuerySupport=function(B){const {outFields:M,orderByFields:Y,returnDistinctValues:ba,outStatistics:ia}=B,ma=ia?ia.map(qa=>qa.outStatisticFieldName&&qa.outStatisticFieldName.toLowerCase()):[];if(Y&&0<Y.length){const qa=Y.map(wa=>{const Ca=wa.toLowerCase();return-1<Ca.indexOf(" asc")?Ca.split(" asc")[0]:-1<Ca.indexOf(" desc")?Ca.split(" desc")[0]:wa}).filter(wa=>
-1===ma.indexOf(wa));y.validateFields(this.fieldsIndex,qa,"orderByFields contains missing fields")}if(M&&0<M.length)y.validateFields(this.fieldsIndex,M,"outFields contains missing fields");else if(ba)throw new A("feature-store:unsupported-query","outFields should be specified for returnDistinctValues",{query:B});y.validateWhere(this.fieldsIndex,B.where)};c._checkStatisticsQuerySupport=function(){var B=e._asyncToGenerator(function*(M){const {outStatistics:Y,groupByFieldsForStatistics:ba,having:ia}=
M;var ma=ba&&ba.length,qa=Y&&Y.length;if(ia){if(!ma||!qa)throw new A("feature-store:unsupported-query","outStatistics and groupByFieldsForStatistics should be specified with having",{query:M});y.validateHaving(this.fieldsIndex,ia,Y)}if(qa&&X(Y)){qa=Y.map(wa=>wa.onStatisticField);y.validateFields(this.fieldsIndex,qa,"onStatisticFields contains missing fields");ma&&y.validateFields(this.fieldsIndex,ba,"groupByFieldsForStatistics contains missing fields");for(const wa of Y){const {onStatisticField:Ca,
statisticType:Ka}=wa;if(("percentile_disc"===Ka||"percentile_cont"===Ka)&&"statisticParameters"in wa){if({statisticParameters:ma}=wa,!ma)throw new A("feature-store:unsupported-query","statisticParamters should be set for percentile type",{definition:wa,query:M});}else if("count"!==Ka&&Ca&&y.hasInvalidFieldType(Ca,this.fieldsIndex))throw new A("feature-store:unsupported-query","outStatistics contains non-numeric fields",{definition:wa,query:M});}}});return function(M){return B.apply(this,arguments)}}();
e._createClass(h,[{key:"featureAdapter",get:function(){return this.featureStore.featureAdapter}},{key:"fullExtent",get:function(){const B=this.featureStore.fullBounds;return B?{xmin:B[0],ymin:B[1],xmax:B[2],ymax:B[3],spatialReference:v.cleanFromGeometryEngine(this.spatialReference)}:null}},{key:"timeExtent",get:function(){return this.timeInfo?this._timeExtent?this._timeExtent:this._timeExtent=H.getTimeExtent(this.timeInfo,this.featureStore):null}},{key:"running",get:function(){return 0<this._frameQueue.length}}]);
return h}();const R=F.create(),D=F.create();p.Feature=function(h,c=null,B,M,Y){this.attributes=h;this.geometry=B;this.centroid=M;this.filterFlags=Y;this.groupId=-1;this.displayId=c};p.default=P;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/core/MemCache":function(){define(["exports","../chunks/_rollupPluginBabelHelpers","./PooledArray"],function(p,e,A){let O=function(){function u(F,r,w){this._namespace=F;this._storage=r;this._removeFunc=!1;this._miss=this._hit=0;this._storage.register(this);
this._namespace+=":";w&&(this._storage.registerRemoveFunc(this._namespace,w),this._removeFunc=!0)}var l=u.prototype;l.destroy=function(){this._storage.clear(this._namespace);this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace);this._storage.deregister(this);this._storage=null};l.resetHitRate=function(){this._hit=this._miss=0};l.put=function(F,r,w,J=0){this._storage.put(this._namespace+F,r,w,J)};l.get=function(F){F=this._storage.get(this._namespace+F);void 0===F?++this._miss:++this._hit;
return F};l.pop=function(F){F=this._storage.pop(this._namespace+F);void 0===F?++this._miss:++this._hit;return F};l.updateSize=function(F,r,w){this._storage.updateSize(this._namespace+F,r,w)};l.clear=function(){this._storage.clear(this._namespace)};l.clearAll=function(){this._storage.clearAll()};l.getStats=function(){return this._storage.getStats()};l.resetStats=function(){this._storage.resetStats()};e._createClass(u,[{key:"namespace",get:function(){return this._namespace.slice(0,-1)}},{key:"hitRate",
get:function(){return this._hit/(this._hit+this._miss)}},{key:"size",get:function(){return this._storage.size}},{key:"maxSize",get:function(){return this._storage.maxSize}}]);return u}(),g=function(){function u(F=10485760){this._maxSize=F;this._db=new Map;this._miss=this._hit=this._size=0;this._removeFuncs=new A;this._users=new A}var l=u.prototype;l.destroy=function(){this.clearAll();this._removeFuncs.clear();this._users.clear();this._db=null};l.register=function(F){this._users.push(F)};l.deregister=
function(F){this._users.removeUnordered(F)};l.registerRemoveFunc=function(F,r){this._removeFuncs.push([F,r])};l.deregisterRemoveFunc=function(F){this._removeFuncs.filterInPlace(r=>r[0]!==F)};l.put=function(F,r,w,J){const U=this._db.get(F);U&&(this._size-=U.size,this._db.delete(F),U.entry!==r&&this._notifyRemoved(F,U.entry));w>this._maxSize?this._notifyRemoved(F,r):void 0===r?console.warn("Refusing to cache undefined entry "):!w||0>w?console.warn("Refusing to cache entry with invalid size "+w):(J=
1+Math.max(J,-3)- -3,this._db.set(F,{entry:r,size:w,lifetime:J,lives:J}),this._size+=w,this._checkSizeLimit())};l.updateSize=function(F,r,w){const J=this._db.get(F);J&&J.entry===r&&(this._size-=J.size,w>this._maxSize?(this._db.delete(F),this._notifyRemoved(F,r)):(J.size=w,this._size+=w,this._checkSizeLimit()))};l.pop=function(F){const r=this._db.get(F);if(r)return this._size-=r.size,this._db.delete(F),++this._hit,r.entry;++this._miss};l.get=function(F){const r=this._db.get(F);if(void 0===r)++this._miss;
else return this._db.delete(F),r.lives=r.lifetime,this._db.set(F,r),++this._hit,r.entry};l.getStats=function(){const F={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},r={},w=[];this._db.forEach((n,y)=>{const C=n.lifetime;w[C]=(w[C]||0)+n.size;this._users.forAll(f=>{f=f.namespace;y.startsWith(f)&&(r[f]=(r[f]||0)+n.size)})});const J={};this._users.forAll(n=>{const y=n.namespace;!isNaN(n.hitRate)&&
0<n.hitRate?(r[y]=r[y]||0,J[y]=Math.round(100*n.hitRate)+"%"):J[y]="0%"});var U=Object.keys(r);U.forEach(n=>r[n]=r[n]/this._size*100);U.sort((n,y)=>r[y]-r[n]);U.forEach(n=>F[n]=Math.round(r[n])+"% / "+J[n]);for(U=w.length-1;0<=U;--U){const n=w[U];n&&(F["Priority "+(U+-3-1)]=Math.round(n/this.size*100)+"%")}return F};l.resetStats=function(){this._hit=this._miss=0;this._users.forAll(F=>F.resetHitRate())};l.clear=function(F){this._db.forEach((r,w)=>{w.startsWith(F)&&(this._size-=r.size,this._db.delete(w),
this._notifyRemoved(w,r.entry))})};l.clearAll=function(){this._db.forEach((F,r)=>this._notifyRemoved(r,F.entry));this._size=0;this._db.clear()};l._getHitRate=function(){return this._hit/(this._hit+this._miss)};l._notifyRemoved=function(F,r){this._removeFuncs.forAll(w=>{if(F.startsWith(w[0]))w[1](r)})};l._checkSizeLimit=function(){if(!(this._size<=this._maxSize))for(const [F,r]of this._db)if(this._db.delete(F),1>=r.lives?(this._size-=r.size,this._notifyRemoved(F,r.entry)):(--r.lives,this._db.set(F,
r)),this._size<=.9*this.maxSize)break};e._createClass(u,[{key:"size",get:function(){return this._size}},{key:"maxSize",get:function(){return this._maxSize},set:function(F){this._maxSize=Math.max(F,0);this._checkSizeLimit()}}]);return u}();p.MIN_PRIORITY=-3;p.MemCache=O;p.MemCacheStorage=g;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/geometry/support/normalizeUtils":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../config ../../core/Error ../../core/Logger ../../core/maybe ../Polygon ../Polyline ./normalizeUtilsCommon ./spatialReferenceUtils ./webMercatorUtils ../../tasks/geometry/cut ../../tasks/geometry/simplify".split(" "),
function(p,e,A,O,g,u,l,F,r,w,J,U,n){function y(N){const L=[];let X=0,aa=0;for(let k=0;k<N.length;k++){const z=N[k];let P=null;for(let R=0;R<z.length;R++)P=z[R],L.push(P),0===R?aa=X=P[0]:(X=Math.min(X,P[0]),aa=Math.max(aa,P[0]));P&&L.push([(X+aa)/2,0])}return L}function C(N,L){if(!(N instanceof F||N instanceof l))throw K.error("straightLineDensify: the input geometry is neither polyline nor polygon"),new O("straightLineDensify: the input geometry is neither polyline nor polygon");var X=r.getGeometryParts(N);
const aa=[];for(const z of X){X=[];aa.push(X);X.push([z[0][0],z[0][1]]);for(let P=0;P<z.length-1;P++){const R=z[P][0],D=z[P][1],h=z[P+1][0],c=z[P+1][1];var k=Math.sqrt((h-R)*(h-R)+(c-D)*(c-D));const B=(c-D)/k,M=(h-R)/k,Y=k/L;if(1<Y){for(let ba=1;ba<=Y-1;ba++){const ia=ba*L;X.push([M*ia+R,B*ia+D])}k=(k+Math.floor(Y-1)*L)/2;X.push([M*k+R,B*k+D])}X.push([h,c])}}return"polygon"===N.type?new l({rings:aa,spatialReference:N.spatialReference}):new F({paths:aa,spatialReference:N.spatialReference})}function f(N,
L,X){L&&(N=C(N,1E6),N=J.webMercatorToGeographic(N,!0));X&&(N=r.updatePolyGeometry(N,X));return N}function E(N,L,X){if(Array.isArray(N)){var aa=N[0];aa>L?(X=r.offsetMagnitude(aa,L),N[0]=aa+-2*X*L):aa<X&&(L=r.offsetMagnitude(aa,X),N[0]=aa+-2*L*X)}else aa=N.x,aa>L?(X=r.offsetMagnitude(aa,L),N=N.clone().offset(-2*X*L,0)):aa<X&&(L=r.offsetMagnitude(aa,X),N=N.clone().offset(-2*L*X,0));return N}function q(N,L){let X=-1;for(let aa=0;aa<L.cutIndexes.length;aa++){const k=L.cutIndexes[aa],z=L.geometries[aa],
P=r.getGeometryParts(z);for(let R=0;R<P.length;R++){const D=P[R];D.some(h=>{if(180>h[0])return!0;h=0;for(var c=0;c<D.length;c++){var B=D[c][0];h=B>h?B:h}h=Number(h.toFixed(9));h=-360*r.offsetMagnitude(h,180);for(c=0;c<D.length;c++)B=z.getPoint(R,c),z.setPoint(R,c,B.clone().offset(h,0));return!0})}if(k===X)if("polygon"===N[0].type)for(const R of r.getGeometryParts(z))N[k]=N[k].addRing(R);else{if("polyline"===N[0].type)for(const R of r.getGeometryParts(z))N[k]=N[k].addPath(R)}else X=k,N[k]=z}return N}
function H(N,L,X){return v.apply(this,arguments)}function v(){v=e._asyncToGenerator(function*(N,L,X){if(!Array.isArray(N))return H([N],L);var aa=L?L.url:A.geometryServiceUrl;let k,z,P;let R=0;var D=[];L=[];for(var h of N)if(u.isNone(h))L.push(h);else{if(!c){var c=h.spatialReference;var B=w.getInfo(c);var M=(k=c.isWebMercator)?102100:4326;z=r.cutParams[M].maxX;P=r.cutParams[M].minX;var Y=r.cutParams[M].plus180Line;M=r.cutParams[M].minus180Line}if(B)if("mesh"===h.type)L.push(h);else if("point"===h.type)L.push(E(h.clone(),
z,P));else if("multipoint"===h.type){var ba=h.clone();ba.points=ba.points.map(ia=>E(ia,z,P));L.push(ba)}else if("extent"===h.type)ba=h.clone()._normalize(!1,!1,B),L.push(ba.rings?new l(ba):ba);else if(h.extent){ba=h.extent;const ia=2*r.offsetMagnitude(ba.xmin,P)*z;let ma=0===ia?h.clone():r.updatePolyGeometry(h.clone(),ia);ba.offset(ia,0);ba.intersects(Y)&&ba.xmax!==z?(R=ba.xmax>R?ba.xmax:R,ma=f(ma,k),D.push(ma),L.push("cut")):ba.intersects(M)&&ba.xmin!==P?(R=2*ba.xmax*z>R?2*ba.xmax*z:R,ma=f(ma,k,
360),D.push(ma),L.push("cut")):L.push(ma)}else L.push(h.clone());else L.push(h)}c=r.offsetMagnitude(R,z);B=-90;Y=c;for(h=new F;0<c;)M=-180+360*c,h.addPath([[M,B],[M,-1*B]]),B*=-1,c--;if(0<D.length&&0<Y){c=yield U.cut(aa,D,h,X);c=q(D,c);B=[];D=[];for(Y=0;Y<L.length;Y++)h=L[Y],"cut"!==h?D.push(h):(h=c.shift(),M=N[Y],u.isSome(M)&&"polygon"===M.type&&M.rings&&1<M.rings.length&&h.rings.length>=M.rings.length?(B.push(h),D.push("simplify")):D.push(k?J.geographicToWebMercator(h):h));if(!B.length)return D;
L=yield n.simplify(aa,B,X);N=[];for(X=0;X<D.length;X++)aa=D[X],"simplify"!==aa?N.push(aa):N.push(k?J.geographicToWebMercator(L.shift()):L.shift());return N}N=[];for(X=0;X<L.length;X++)aa=L[X],"cut"!==aa?N.push(aa):(aa=D.shift(),N.push(!0===k?J.geographicToWebMercator(aa):aa));return Promise.resolve(N)});return v.apply(this,arguments)}const K=g.getLogger("esri.geometry.support.normalizeUtils");p.getDenormalizedExtent=function(N){if(!N)return null;const L=N.extent;if(!L)return null;var X=N.spatialReference&&
w.getInfo(N.spatialReference);if(!X)return L;const [aa,k]=X.valid;({width:X}=L);let {xmin:z,xmax:P}=L;[z,P]=[P,z];if("extent"===N.type||0===X||X<=k||X>2*k||z<aa||P>k)return L;let R;switch(N.type){case "polygon":if(1<N.rings.length)R=y(N.rings);else return L;break;case "polyline":if(1<N.paths.length)R=y(N.paths);else return L;break;case "multipoint":R=N.points}N=L.clone();for(let D=0;D<R.length;D++){let h=R[D][0];0>h?(h+=k,P=Math.max(h,P)):(h-=k,z=Math.min(h,z))}N.xmin=z;N.xmax=P;return N.width<X?
(N.xmin-=k,N.xmax-=k,N):L};p.normalizeCentralMeridian=H;p.normalizeMapX=function(N,L){if(L=w.getInfo(L)){const [X,aa]=L.valid;L=aa-X;if(N<X)for(;N<X;)N+=L;if(N>aa)for(;N>aa;)N-=L}return N};p.straightLineDensify=C;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/geometry/support/normalizeUtilsCommon":function(){define(["exports","../Polyline","../SpatialReference","./jsonUtils"],function(p,e,A,O){function g(l){return O.isPolygon(l)?l.rings:l.paths}const u={102100:{maxX:2.0037508342788905E7,
minX:-2.0037508342788905E7,plus180Line:new e({paths:[[[2.0037508342788905E7,-2.0037508342788905E7],[2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:A.WebMercator}),minus180Line:new e({paths:[[[-2.0037508342788905E7,-2.0037508342788905E7],[-2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:A.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new e({paths:[[[180,-180],[180,180]]],spatialReference:A.WGS84}),minus180Line:new e({paths:[[[-180,-180],[-180,180]]],spatialReference:A.WGS84})}};
p.cutParams=u;p.getGeometryParts=g;p.getSpatialReferenceMinMaxX=function(l){l=(null==l?0:l.isWebMercator)?102100:4326;return[u[l].minX,u[l].maxX]};p.offsetMagnitude=function(l,F){return Math.ceil((l-F)/(2*F))};p.updatePolyGeometry=function(l,F){const r=g(l);for(const w of r)for(const J of w)J[0]+=F;return l};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/tasks/geometry/cut":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../geometry ../../request ../../core/urlUtils ../../geometry/support/jsonUtils".split(" "),
function(p,e,A,O,g,u){function l(){l=e._asyncToGenerator(function*(F,r,w,J){F="string"===typeof F?g.urlToObject(F):F;const U=r[0].spatialReference;r={...J,query:{...F.query,f:"json",sr:JSON.stringify(U),target:JSON.stringify({geometryType:u.getJsonType(r[0]),geometries:r}),cutter:JSON.stringify(w)}};r=yield O(F.path+"/cut",r);const {cutIndexes:n,geometries:y=[]}=r.data;return{cutIndexes:n,geometries:y.map(C=>{C=u.fromJSON(C);C.spatialReference=U;return C})}});return l.apply(this,arguments)}p.cut=
function(F,r,w,J){return l.apply(this,arguments)};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/tasks/geometry/simplify":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../request","../../core/urlUtils","../../geometry/support/jsonUtils"],function(p,e,A,O,g){function u(){u=e._asyncToGenerator(function*(r,w,J){const U="string"===typeof r?O.urlToObject(r):r;r=w[0].spatialReference;const n=g.getJsonType(w[0]);w={...J,query:{...U.query,f:"json",sr:r.wkid?r.wkid:JSON.stringify(r),
geometries:JSON.stringify(l(w))}};w=yield A(U.path+"/simplify",w);return F(w.data,n,r)});return u.apply(this,arguments)}function l(r){return{geometryType:g.getJsonType(r[0]),geometries:r.map(w=>w.toJSON())}}function F(r,w,J){const U=g.getGeometryType(w);return r.map(n=>{n=U.fromJSON(n);n.spatialReference=J;return n})}p.simplify=function(r,w,J){return u.apply(this,arguments)};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/graphics/data/attributeSupport":function(){define(["exports",
"../../../core/Error","../../../core/sql/WhereClauseCache"],function(p,e,A){function O(r,w){return r?l.get(r,w):null}function g(r,w,J,U=!0){const n=[];for(const y of w)if("*"!==y&&!r.has(y))if(U){w=u(y);try{const C=O(w,r);if(!C)throw new e("feature-store:unsupported-query","invalid SQL expression",{where:w});if(!C.isStandardized)throw new e("feature-store:unsupported-query","expression is not standard",{clause:C});g(r,C.fieldNames,"expression contains missing fields")}catch(C){if((w=C&&C.details)&&
(w.clause||w.where))throw C;w&&w.missingFields?n.push(...w.missingFields):n.push(y)}}else n.push(y);if(n.length)throw new e("feature-store:unsupported-query",J,{missingFields:n});}function u(r){return r.split(" as ")[0]}const l=new A.WhereClauseCache(50,500),F=new Set("esriFieldTypeOID esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeLong esriFieldTypeDate".split(" "));p.getAliasFromFieldName=function(r){return r.split(" as ")[1]};p.getExpressionFromFieldName=
u;p.getWhereClause=O;p.hasInvalidFieldType=function(r,w){return(r=w.get(r))?!F.has(r.type):!1};p.validateFields=g;p.validateHaving=function(r,w,J){if(!w)return!0;const U=l.get(w,r);if(!U)throw new e("feature-store:unsupported-query","invalid SQL expression",{having:w});if(!U.isAggregate)throw new e("feature-store:unsupported-query","having does not contain a valid aggregate function",{having:w});g(r,U.fieldNames,"having contains missing fields");if(!U.getExpressions().every(n=>{const {aggregateType:y,
field:C}=n,f=r.has(C)&&r.get(C).name;return J.some(E=>{const {onStatisticField:q,statisticType:H}=E;return(r.has(q)&&r.get(q).name)===f&&H.toLowerCase().trim()===y})}))throw new e("feature-store:unsupported-query","expressions in having should also exist in outStatistics",{having:w});return!0};p.validateWhere=function(r,w){if(!w)return!0;const J=l.get(w,r);if(!J)throw new e("feature-store:unsupported-query","invalid SQL expression",{where:w});if(!J.isStandardized)throw new e("feature-store:unsupported-query",
"where clause is not standard",{where:w});g(r,J.fieldNames,"where clause contains missing fields");return!0};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/core/sql/WhereClauseCache":function(){define(["exports","../ItemCache","./WhereClause"],function(p,e,A){let O=function(){function g(u,l){this._cache=new e(u);this._invalidCache=new e(l)}g.prototype.get=function(u,l){const F=`${l.uid}:${u}`,r=this._cache.get(F);if(r)return r;if(void 0!==this._invalidCache.get(F))return null;try{const w=
A.WhereClause.create(u,l);this._cache.put(F,w);return w}catch{return this._invalidCache.put(F,null),null}};return g}();p.WhereClauseCache=O;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/core/ItemCache":function(){define(["./MemCache"],function(p){return function(){function e(O,g){this._storage=new p.MemCacheStorage;this._storage.maxSize=O;g&&this._storage.registerRemoveFunc("",g)}var A=e.prototype;A.put=function(O,g){this._storage.put(O,g,1,1)};A.pop=function(O){return this._storage.pop(O)};
A.get=function(O){return this._storage.get(O)};A.clear=function(){this._storage.clearAll()};A.destroy=function(){this._storage.destroy()};return e}()})},"esri/core/sql/WhereClause":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../has ./AggregateFunctions ./StandardizedFunctions ./WhereGrammar".split(" "),function(p,e,A,O,g,u){function l(D,h){D+="";return D.length>=h?D:Array(h-D.length+1).join("0")+D}function F(D,h,c="0",B="0",M="0",Y="0",ba="",ia="0",ma="0"){return"+"===ba||"-"===
ba?(D=`${l(parseInt(D,10),4)}-${l(parseInt(h,10),2)}-${l(parseInt(c,10),2)}`,h="",10>parseFloat(Y)&&(h="0"),B=`${l(parseInt(B,10),2)}:${l(parseInt(M,10),2)}:${h+parseFloat(Y).toString()}`,ba=`${ba}${l(parseInt(ia,10),2)}:${l(parseInt(ma,10),2)}`,new Date(D+"T"+B+ba)):new Date(parseInt(D,10),parseInt(h,10)-1,parseInt(c,10),parseInt(B,10),parseInt(M,10),parseFloat(Y))}function r(D){let h=L.exec(D);if(null!==h){const [,c,B,M,Y,ba,ia]=h;return F(c,B,M,Y,ba,ia)}h=X.exec(D);if(null!==h){const [,c,B,M,Y,
ba,ia,ma,qa,wa]=h;return F(c,B,M,Y,ba,ia,ma,qa,wa)}h=aa.exec(D);if(null!==h){const [,c,B,M,Y,ba,ia,ma,qa]=h;return F(c,B,M,Y,ba,"0",ia,ma,qa)}h=k.exec(D);if(null!==h){const [,c,B,M,Y,ba]=h;return F(c,B,M,Y,ba)}h=N.exec(D);if(null!==h){const [,c,B,M]=h;return F(c,B,M)}throw Error("SQL Invalid Timestamp");}function w(D){D=N.exec(D);if(null===D)throw Error("SQL Invalid Date");const [,h,c,B]=D;return new Date(parseInt(h,10),parseInt(c,10)-1,parseInt(B,10))}function J(D){return Array.isArray(D)?D:[D]}
function U(D){return null!==D?!0!==D:null}function n(D,h){return null!=D&&null!=h?!0===D&&!0===h:!1===D||!1===h?!1:null}function y(D,h){return null!=D&&null!=h?!0===D||!0===h:!0===D||!0===h?!0:null}function C(D,h){if(null==D)return null;let c=!1;for(const B of h)if(null==B)c=null;else if(D===B){c=!0;break}return c}function f(D,h,c){if(null==D)return null;let B="",M=0;for(let Y=0;Y<h.length;Y++){const ba=h.charAt(Y);switch(M){case 0:ba===c?M=1:B=0<="-[]/{}()*+?.\\^$|".indexOf(ba)?B+("\\"+ba):"%"===
ba?B+".*":"_"===ba?B+".":B+ba;break;case 1:B=0<="-[]/{}()*+?.\\^$|".indexOf(ba)?B+("\\"+ba):B+ba,M=0}}return(new RegExp("^"+B+"$")).test(D)}function E(D){return D instanceof Date?D.valueOf():D}function q(D,h,c){if(null==h||null==c)return null;h=E(h);c=E(c);switch(D){case "\x3c\x3e":return h!==c;case "\x3d":return h===c;case "\x3e":return h>c;case "\x3c":return h<c;case "\x3e\x3d":return h>=c;case "\x3c\x3d":return h<=c}}function H(D){const h=[],c={};for(const B of D)D=B.toLowerCase(),void 0===c[D]&&
(h.push(B),c[D]=1);return h}function v(D,h,c){if(h instanceof g.SqlInterval)if(c instanceof Date)switch(D){case "+":return new Date(h.valueInMilliseconds()+c.getTime());case "-":return h.valueInMilliseconds()-c.getTime();case "*":return h.valueInMilliseconds()*c.getTime();case "/":return h.valueInMilliseconds()/c.getTime()}else if(c instanceof g.SqlInterval)switch(D){case "+":return g.SqlInterval.createFromMilliseconds(h.valueInMilliseconds()+c.valueInMilliseconds());case "-":return g.SqlInterval.createFromMilliseconds(h.valueInMilliseconds()-
c.valueInMilliseconds());case "*":return h.valueInMilliseconds()*c.valueInMilliseconds();case "/":return h.valueInMilliseconds()/c.valueInMilliseconds()}else h=h.valueInMilliseconds();else if(c instanceof g.SqlInterval)if(h instanceof Date)switch(D){case "+":return new Date(c.valueInMilliseconds()+h.getTime());case "-":return new Date(h.getTime()-c.valueInMilliseconds());case "*":return h.getTime()*c.valueInMilliseconds();case "/":return h.getTime()/c.valueInMilliseconds()}else c=c.valueInMilliseconds();
else if(h instanceof Date&&"number"===typeof c)switch(c*=864E5,h=h.getTime(),D){case "+":return new Date(h+c);case "-":return new Date(h-c);case "*":return new Date(h*c);case "/":return new Date(h/c)}else if(c instanceof Date&&"number"===typeof h)switch(h*=864E5,c=c.getTime(),D){case "+":return new Date(h+c);case "-":return new Date(h-c);case "*":return new Date(h*c);case "/":return new Date(h/c)}switch(D){case "+":return h+c;case "-":return h-c;case "*":return h*c;case "/":return h/c}}function K(D,
h,c,B){D=B.getAttribute(D,h);return null!=D&&1===c[h]?new Date(D):D}const N=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,L=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)$/,X=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)(\+|\-)(\d{1,2}):(\d{1,2})$/,aa=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})(\+|\-)(\d{1,2}):(\d{1,2})$/,k=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/;let z=function(){function D(){}D.makeBool=function(h){return!0===h};D.featureValue=
function(h,c,B,M){return K(h,c,B,M)};D.equalsNull=function(h){return null===h};D.applyLike=function(h,c,B){return f(h,c,B)};D.ensureArray=function(h){return J(h)};D.applyIn=function(h,c){return C(h,c)};D.currentDate=function(){const h=new Date;h.setHours(0,0,0,0);return h};D.makeSqlInterval=function(h,c,B){return g.SqlInterval.createFromValueAndQualifer(h,c,B)};D.convertInterval=function(h){return h instanceof g.SqlInterval?h.valueInMilliseconds():h};D.currentTimestamp=function(){return new Date};
D.compare=function(h,c,B){return q(h,c,B)};D.calculate=function(h,c,B){return v(h,c,B)};D.makeComparable=function(h){return E(h)};D.evaluateFunction=function(h,c){return g.evaluateFunction(h,c)};D.lookup=function(h,c){h=c[h];return void 0===h?null:h};D.between=function(h,c){return null==h||null==c[0]||null==c[1]?null:h>=c[0]&&h<=c[1]};D.notbetween=function(h,c){return null==h||null==c[0]||null==c[1]?null:h<c[0]||h>c[1]};D.ternaryNot=function(h){return U(h)};D.ternaryAnd=function(h,c){return n(h,c)};
D.ternaryOr=function(h,c){return y(h,c)};return D}(),P=function(){function D(c,B){this.fieldsIndex=B;this.datefields={};this.parameters={};this.parseTree=u.WhereGrammar.parse(c);const {isStandardized:M,isAggregate:Y,referencedFieldNames:ba}=this.extractExpressionInfo(B);this.referencedFieldNames=ba;this.isStandardized=M;this.isAggregate=Y}D.create=function(c,B){return new D(c,B)};var h=D.prototype;h.testSet=function(c,B=R){const M={};for(const Y of this.fieldNames)M[Y]=c.map(ba=>B.getAttribute(ba,
Y));return!!this.evaluateNode(this.parseTree,{attributes:M},R)};h.calculateValue=function(c,B=R){c=this.evaluateNode(this.parseTree,c,B);return c instanceof g.SqlInterval?c.valueInMilliseconds()/864E5:c};h.calculateValueCompiled=function(c,B=R){if(null!=this.parseTree._compiledVersion)return this.parseTree._compiledVersion(c,this.parameters,B,this.datefields);if(A("csp-restrictions"))return this.calculateValue(c,B);this.compileMe();return this.parseTree._compiledVersion(c,this.parameters,B,this.datefields)};
h.testFeature=function(c,B=R){return!!this.evaluateNode(this.parseTree,c,B)};h.testFeatureCompiled=function(c,B=R){if(null!=this.parseTree._compiledVersion)return!!this.parseTree._compiledVersion(c,this.parameters,B,this.datefields);if(A("csp-restrictions"))return this.testFeature(c,B);this.compileMe();return!!this.parseTree._compiledVersion(c,this.parameters,B,this.datefields)};h.getFunctions=function(){const c=[];this.visitAll(this.parseTree,B=>{"function"===B.type&&c.push(B.name.toLowerCase())});
return H(c)};h.getExpressions=function(){const c=new Map;this.visitAll(this.parseTree,B=>{if("function"===B.type){const M=B.name.toLowerCase();B=B.args.value[0];if("column_ref"===B.type){B=B.column;const Y=`${M}-${B}`;c.has(Y)||c.set(Y,{aggregateType:M,field:B})}}});return[...c.values()]};h.getVariables=function(){const c=[];this.visitAll(this.parseTree,B=>{"param"===B.type&&c.push(B.value.toLowerCase())});return H(c)};h.compileMe=function(){const c="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+
")";this.parseTree._compiledVersion=(new Function("feature","lookups","attributeAdapter","datefields",c)).bind(z)};h.extractExpressionInfo=function(c){const B=[];let M=!0,Y=!0;this.visitAll(this.parseTree,ba=>{switch(ba.type){case "column_ref":{const ia=c.get(ba.column),ma=ia&&ia.name;!ia||"date"!==ia.type&&"esriFieldTypeDate"!==ia.type||(this.datefields[ia.name]=1);void 0!==ma?(B.push(ma),ba.column=ma):B.push(ba.column);break}case "function":{const {name:ia,args:ma}=ba;ba=ma.value.length;M&&(M=g.isStandardized(ia,
ba));Y&&(Y=O.isAggregate(ia,ba))}}});return{referencedFieldNames:H(B),isStandardized:M,isAggregate:Y}};h.visitAll=function(c,B){if(null!=c)switch(B(c),c.type){case "when_clause":this.visitAll(c.operand,B);this.visitAll(c.value,B);break;case "case_expression":for(const M of c.clauses)this.visitAll(M,B);"simple"===c.format&&this.visitAll(c.operand,B);null!==c.else&&this.visitAll(c.else,B);break;case "expr_list":for(const M of c.value)this.visitAll(M,B);break;case "unary_expr":this.visitAll(c.expr,B);
break;case "binary_expr":this.visitAll(c.left,B);this.visitAll(c.right,B);break;case "function":this.visitAll(c.args,B)}};h.evaluateNodeToJavaScript=function(c){switch(c.type){case "interval":return"this.makeSqlInterval("+this.evaluateNodeToJavaScript(c.value)+", "+JSON.stringify(c.qualifier)+","+JSON.stringify(c.op)+")";case "case_expression":var B="";if("simple"===c.format){var M="this.makeComparable("+this.evaluateNodeToJavaScript(c.operand)+")";B="( ";for(let Y=0;Y<c.clauses.length;Y++)B+=" ("+
M+" \x3d\x3d\x3d this.makeComparable("+this.evaluateNodeToJavaScript(c.clauses[Y].operand)+")) ? ("+this.evaluateNodeToJavaScript(c.clauses[Y].value)+") : "}else for(B="( ",M=0;M<c.clauses.length;M++)B+=" this.makeBool("+this.evaluateNodeToJavaScript(c.clauses[M].operand)+")\x3d\x3d\x3dtrue ? ("+this.evaluateNodeToJavaScript(c.clauses[M].value)+") : ";B=null!==c.else?B+this.evaluateNodeToJavaScript(c.else):B+"null";return B+=" )";case "param":return"this.lookup("+JSON.stringify(c.value.toLowerCase())+
",lookups)";case "expr_list":B="[";for(M of c.value)"["!==B&&(B+=","),B+=this.evaluateNodeToJavaScript(M);return B+="]";case "unary_expr":return"this.ternaryNot("+this.evaluateNodeToJavaScript(c.expr)+")";case "binary_expr":switch(c.operator){case "AND":return"this.ternaryAnd("+this.evaluateNodeToJavaScript(c.left)+","+this.evaluateNodeToJavaScript(c.right)+" )";case "OR":return"this.ternaryOr("+this.evaluateNodeToJavaScript(c.left)+","+this.evaluateNodeToJavaScript(c.right)+" )";case "IS":if("null"!==
c.right.type)throw Error("Unsupported RHS for IS");return"this.equalsNull("+this.evaluateNodeToJavaScript(c.left)+")";case "ISNOT":if("null"!==c.right.type)throw Error("Unsupported RHS for IS");return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(c.left)+")))";case "IN":return"this.applyIn("+this.evaluateNodeToJavaScript(c.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(c.right)+"))";case "NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(c.left)+",this.ensureArray("+
this.evaluateNodeToJavaScript(c.right)+")))";case "BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(c.left)+","+this.evaluateNodeToJavaScript(c.right)+")";case "NOTBETWEEN":return"this.notbetween("+this.evaluateNodeToJavaScript(c.left)+","+this.evaluateNodeToJavaScript(c.right)+")";case "LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(c.left)+","+this.evaluateNodeToJavaScript(c.right)+","+JSON.stringify(c.escape)+")";case "NOT LIKE":return"this.ternaryNot(this.applyLike("+
this.evaluateNodeToJavaScript(c.left)+","+this.evaluateNodeToJavaScript(c.right)+","+JSON.stringify(c.escape)+"))";case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return"this.compare("+JSON.stringify(c.operator)+","+this.evaluateNodeToJavaScript(c.left)+","+this.evaluateNodeToJavaScript(c.right)+")";case "*":case "-":case "+":case "/":return"this.calculate("+JSON.stringify(c.operator)+","+this.evaluateNodeToJavaScript(c.left)+","+this.evaluateNodeToJavaScript(c.right)+
")"}throw Error("Not Supported Operator "+c.operator);case "null":case "bool":case "string":case "number":return JSON.stringify(c.value);case "date":return"(new Date("+w(c.value).getTime().toString()+"))";case "timestamp":return"(new Date("+r(c.value).getTime().toString()+"))";case "current_time":return"date"===c.mode?"this.currentDate()":"this.currentTimestamp()";case "column_ref":return"this.featureValue(feature,"+JSON.stringify(c.column)+",datefields,attributeAdapter)";case "function":return"this.evaluateFunction("+
JSON.stringify(c.name)+","+this.evaluateNodeToJavaScript(c.args)+")"}throw Error("Unsupported sql syntax "+c.type);};h.evaluateNode=function(c,B,M){switch(c.type){case "interval":return B=this.evaluateNode(c.value,B,M),g.SqlInterval.createFromValueAndQualifer(B,c.qualifier,c.op);case "case_expression":if("simple"===c.format){var Y=E(this.evaluateNode(c.operand,B,M));for(var ba=0;ba<c.clauses.length;ba++)if(Y===E(this.evaluateNode(c.clauses[ba].operand,B,M)))return this.evaluateNode(c.clauses[ba].value,
B,M)}else for(Y=0;Y<c.clauses.length;Y++)if(!0===this.evaluateNode(c.clauses[Y].operand,B,M))return this.evaluateNode(c.clauses[Y].value,B,M);return null!==c.else?this.evaluateNode(c.else,B,M):null;case "param":return this.parameters[c.value.toLowerCase()];case "expr_list":Y=[];for(ba of c.value)Y.push(this.evaluateNode(ba,B,M));return Y;case "unary_expr":return U(this.evaluateNode(c.expr,B,M));case "binary_expr":switch(c.operator){case "AND":return n(this.evaluateNode(c.left,B,M),this.evaluateNode(c.right,
B,M));case "OR":return y(this.evaluateNode(c.left,B,M),this.evaluateNode(c.right,B,M));case "IS":if("null"!==c.right.type)throw Error("Unsupported RHS for IS");return null===this.evaluateNode(c.left,B,M);case "ISNOT":if("null"!==c.right.type)throw Error("Unsupported RHS for IS");return null!==this.evaluateNode(c.left,B,M);case "IN":return Y=J(this.evaluateNode(c.right,B,M)),C(this.evaluateNode(c.left,B,M),Y);case "NOT IN":return Y=J(this.evaluateNode(c.right,B,M)),U(C(this.evaluateNode(c.left,B,M),
Y));case "BETWEEN":return Y=this.evaluateNode(c.left,B,M),c=this.evaluateNode(c.right,B,M),null==Y||null==c[0]||null==c[1]?null:Y>=E(c[0])&&Y<=E(c[1]);case "NOTBETWEEN":return Y=this.evaluateNode(c.left,B,M),c=this.evaluateNode(c.right,B,M),null==Y||null==c[0]||null==c[1]?null:Y<E(c[0])||Y>E(c[1]);case "LIKE":return f(this.evaluateNode(c.left,B,M),this.evaluateNode(c.right,B,M),c.escape);case "NOT LIKE":return U(f(this.evaluateNode(c.left,B,M),this.evaluateNode(c.right,B,M),c.escape));case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return q(c.operator,
this.evaluateNode(c.left,B,M),this.evaluateNode(c.right,B,M));case "-":case "+":case "*":case "/":return v(c.operator,this.evaluateNode(c.left,B,M),this.evaluateNode(c.right,B,M))}case "null":case "bool":case "string":case "number":return c.value;case "date":return w(c.value);case "timestamp":return r(c.value);case "current_time":return B=new Date,"date"===c.mode&&B.setHours(0,0,0,0),B;case "column_ref":return K(B,c.column,this.datefields,M);case "function":return B=this.evaluateNode(c.args,B,M),
this.isAggregate?O.aggregateFunction(c.name,B):g.evaluateFunction(c.name,B)}throw Error("Unsupported sql syntax "+c.type);};e._createClass(D,[{key:"fieldNames",get:function(){return this.referencedFieldNames}}]);return D}();const R={getAttribute(D,h){return(D&&"object"===typeof D.attributes?D.attributes:D)[h]}};p.WhereClause=P;p.defaultAttributeAdapter=R;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/core/sql/AggregateFunctions":function(){define(["exports"],function(p){function e(g){let u=
0;for(let l=0;l<g.length;l++)u+=g[l];return u/g.length}function A(g){const u=e(g),l=g.length;let F=0;for(const r of g)F+=(r-u)**2;return 1<l?F/(l-1):0}const O={min:{minParams:1,maxParams:1,evaluate:g=>null==g[0]?null:Math.min.apply(Math,g[0])},max:{minParams:1,maxParams:1,evaluate:g=>null==g[0]?null:Math.max.apply(Math,g[0])},avg:{minParams:1,maxParams:1,evaluate:g=>null==g[0]?null:e(g[0])},sum:{minParams:1,maxParams:1,evaluate:g=>{if(null==g[0])g=null;else{{g=g[0];let u=0;for(let l=0;l<g.length;l++)u+=
g[l];g=u}}return g}},stddev:{minParams:1,maxParams:1,evaluate:g=>null==g[0]?null:Math.sqrt(A(g[0]))},count:{minParams:1,maxParams:1,evaluate:g=>null==g[0]?null:g[0].length},var:{minParams:1,maxParams:1,evaluate:g=>null==g[0]?null:A(g[0])}};p.aggregateFunction=function(g,u){const l=O[g.toLowerCase()];if(null==l)throw Error("Function Not Recognised");if(u.length<l.minParams||u.length>l.maxParams)throw Error(`Invalid Parameter count for call to ${g.toUpperCase()}`);return l.evaluate(u)};p.isAggregate=
function(g,u){g=O[g.toLowerCase()];return null!=g&&u>=g.minParams&&u<=g.maxParams};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/core/sql/StandardizedFunctions":function(){define(["exports","../string"],function(p,e){let A=function(){function g(){this.op="+";this.minute=this.year=this.month=this.hour=this.second=this.day=0}g.fixDefaults=function(u){if(null!==u.precision||null!==u.secondary)throw Error("Primary and Secondary SqlInterval qualifiers not supported");};g.createFromMilliseconds=
function(u){const l=new g;l.second=u/1E3;return l};g.createFromValueAndQualifer=function(u,l,F){let r=null;const w=new g;w.op="-"===F?"-":"+";if("interval-period"===l.type){g.fixDefaults(l);if("year"===l.period||"month"===l.period)throw Error("Year-Month Intervals not supported");if(/^[0-9]{1,}$/.test(u))w[l.period]=parseFloat(u);else throw Error("Illegal Interval");}else{g.fixDefaults(l.start);g.fixDefaults(l.end);if("year"===l.start.period||"month"===l.start.period)throw Error("Year-Month Intervals not supported");
if("year"===l.end.period||"month"===l.end.period)throw Error("Year-Month Intervals not supported");switch(l.start.period){case "day":switch(l.end.period){case "hour":r=/^[0-9]{1,} [0-9]{1,}$/;if(r.test(u))w[l.start.period]=parseFloat(u.split(" ")[0]),w[l.end.period]=parseFloat(u.split(" ")[1]);else throw Error("Illegal Interval");break;case "minute":r=/^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$/;if(r.test(u))w[l.start.period]=parseFloat(u.split(" ")[0]),u=u.split(" ")[1].split(":"),w.hour=parseFloat(u[0]),
w.minute=parseFloat(u[1]);else throw Error("Illegal Interval");break;case "second":r=/^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(r.test(u))w[l.start.period]=parseFloat(u.split(" ")[0]),u=u.split(" ")[1].split(":"),w.hour=parseFloat(u[0]),w.minute=parseFloat(u[1]),w.second=parseFloat(u[2]);else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;case "hour":switch(l.end.period){case "minute":r=/^[0-9]{1,}:[0-9]{1,}$/;if(r.test(u))w.hour=parseFloat(u.split(":")[0]),
w.minute=parseFloat(u.split(":")[1]);else throw Error("Illegal Interval");break;case "second":r=/^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(r.test(u))u=u.split(":"),w.hour=parseFloat(u[0]),w.minute=parseFloat(u[1]),w.second=parseFloat(u[2]);else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;case "minute":switch(l.end.period){case "second":r=/^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(r.test(u))u=u.split(":"),w.minute=parseFloat(u[0]),w.second=parseFloat(u[1]);
else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;default:throw"Invalid Interval.";}}return w};g.prototype.valueInMilliseconds=function(){return("-"===this.op?-1:1)*(1E3*this.second+6E4*this.minute+36E5*this.hour+864E5*this.day+365/12*this.month*864E5+31536E6*this.year)};return g}();const O={extract:{minParams:2,maxParams:2,evaluate:([g,u])=>{if(null==u)return null;if(u instanceof Date)switch(g.toUpperCase()){case "SECOND":return u.getSeconds();case "MINUTE":return u.getMinutes();
case "HOUR":return u.getHours();case "DAY":return u.getDate();case "MONTH":return u.getMonth()+1;case "YEAR":return u.getFullYear()}throw Error("Invalid Parameter for call to EXTRACT");}},substring:{minParams:2,maxParams:3,evaluate:g=>{if(2===g.length){const [u,l]=g;return null==u||null==l?null:u.toString().substring(l-1)}if(3===g.length){const [u,l,F]=g;return null==u||null==l||null==F?null:0>=F?"":u.toString().substring(l-1,l+F-1)}}},position:{minParams:2,maxParams:2,evaluate:([g,u])=>null==g||
null==u?null:u.indexOf(g)+1},trim:{minParams:2,maxParams:3,evaluate:g=>{var u=3===g.length,l=u?g[1]:" ";u=u?g[2]:g[1];if(null==l||null==u)return null;l=`(${e.escapeRegExpString(l)})`;switch(g[0]){case "BOTH":return u.replace(new RegExp(`^${l}*|${l}*$`,"g"),"");case "LEADING":return u.replace(new RegExp(`^${l}*`,"g"),"");case "TRAILING":return u.replace(new RegExp(`${l}*$`,"g"),"")}throw Error("Invalid Parameter for call to TRIM");}},abs:{minParams:1,maxParams:1,evaluate:g=>null==g[0]?null:Math.abs(g[0])},
ceiling:{minParams:1,maxParams:1,evaluate:g=>null==g[0]?null:Math.ceil(g[0])},floor:{minParams:1,maxParams:1,evaluate:g=>null==g[0]?null:Math.floor(g[0])},log:{minParams:1,maxParams:1,evaluate:g=>null==g[0]?null:Math.log(g[0])},log10:{minParams:1,maxParams:1,evaluate:g=>null==g[0]?null:Math.log(g[0])*Math.LOG10E},sin:{minParams:1,maxParams:1,evaluate:g=>null==g[0]?null:Math.sin(g[0])},cos:{minParams:1,maxParams:1,evaluate:g=>null==g[0]?null:Math.cos(g[0])},tan:{minParams:1,maxParams:1,evaluate:g=>
null==g[0]?null:Math.tan(g[0])},asin:{minParams:1,maxParams:1,evaluate:g=>null==g[0]?null:Math.asin(g[0])},acos:{minParams:1,maxParams:1,evaluate:g=>null==g[0]?null:Math.acos(g[0])},atan:{minParams:1,maxParams:1,evaluate:g=>null==g[0]?null:Math.atan(g[0])},sign:{minParams:1,maxParams:1,evaluate:g=>null==g[0]?null:0<g[0]?1:0>g[1]?-1:0},power:{minParams:2,maxParams:2,evaluate:g=>null==g[0]||null==g[1]?null:g[0]**g[1]},mod:{minParams:2,maxParams:2,evaluate:g=>null==g[0]||null==g[1]?null:g[0]%g[1]},round:{minParams:1,
maxParams:2,evaluate:g=>{const u=g[0];g=2===g.length?10**g[1]:1;return null==u?null:Math.round(u*g)/g}},truncate:{minParams:1,maxParams:2,evaluate:g=>null==g[0]?null:1===g.length?parseInt(g[0].toFixed(0),10):parseFloat(g[0].toFixed(g[1]))},char_length:{minParams:1,maxParams:1,evaluate:g=>"string"===typeof g[0]||g[0]instanceof String?g[0].length:0},concat:{minParams:1,maxParams:Infinity,evaluate:g=>{let u="";for(let l=0;l<g.length;l++){if(null==g[l])return null;u+=g[l].toString()}return u}},lower:{minParams:1,
maxParams:1,evaluate:g=>null==g[0]?null:g[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:g=>null==g[0]?null:g[0].toString().toUpperCase()}};p.SqlInterval=A;p.evaluateFunction=function(g,u){const l=O[g.toLowerCase()];if(null==l)throw Error("Function Not Recognised");if(u.length<l.minParams||u.length>l.maxParams)throw Error(`Invalid Parameter count for call to ${g.toUpperCase()}`);return l.evaluate(u)};p.isStandardized=function(g,u){g=O[g.toLowerCase()];return null!=g&&u>=g.minParams&&
u<=g.maxParams};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/core/sql/WhereGrammar":function(){define(["exports","../../chunks/_commonjsHelpers"],function(p,e){var A={exports:{}};(function(g){(function(u,l){g.exports&&(g.exports=l())})(e.commonjsGlobal,function(){function u(l,F,r,w){this.message=l;this.expected=F;this.found=r;this.location=w;this.name="SyntaxError";"function"===typeof Error.captureStackTrace&&Error.captureStackTrace(this,u)}(function(l,F){function r(){this.constructor=
l}r.prototype=F.prototype;l.prototype=new r})(u,Error);u.buildMessage=function(l,F){function r(n){return n.charCodeAt(0).toString(16).toUpperCase()}function w(n){return n.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(y){return"\\x0"+r(y)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(y){return"\\x"+r(y)})}function J(n){return n.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,
"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(y){return"\\x0"+r(y)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(y){return"\\x"+r(y)})}var U={literal:function(n){return'"'+w(n.text)+'"'},"class":function(n){var y="",C;for(C=0;C<n.parts.length;C++)y+=n.parts[C]instanceof Array?J(n.parts[C][0])+"-"+J(n.parts[C][1]):J(n.parts[C]);return"["+(n.inverted?"^":"")+y+"]"},any:function(n){return"any character"},end:function(n){return"end of input"},
other:function(n){return n.description}};return"Expected "+function(n){var y=Array(n.length),C;for(C=0;C<n.length;C++){var f=C;var E=n[C];E=U[E.type](E);y[f]=E}y.sort();if(0<y.length){for(n=C=1;C<y.length;C++)y[C-1]!==y[C]&&(y[n]=y[C],n++);y.length=n}switch(y.length){case 1:return y[0];case 2:return y[0]+" or "+y[1];default:return y.slice(0,-1).join(", ")+", or "+y[y.length-1]}}(l)+" but "+(F?'"'+w(F)+'"':"end of input")+" found."};return{SyntaxError:u,parse:function(l,F){function r(x,T){return{type:"literal",
text:x,ignoreCase:T}}function w(x,T,S){return{type:"class",parts:x,inverted:T,ignoreCase:S}}function J(x){var T=$b[x],S;if(!T){for(S=x-1;!$b[S];)S--;T=$b[S];for(T={line:T.line,column:T.column};S<x;)10===l.charCodeAt(S)?(T.line++,T.column=1):T.column++,S++;$b[x]=T}return T}function U(x,T){var S=J(x),ca=J(T);return{start:{offset:x,line:S.line,column:S.column},end:{offset:T,line:ca.line,column:ca.column}}}function n(x){d<sb||(d>sb&&(sb=d,pc=[]),pc.push(x))}function y(){var x=d;var T=oa();if(T!==a)if(T=
f(),T!==a){var S=oa();S!==a?x=T:(d=x,x=a)}else d=x,x=a;else d=x,x=a;return x}function C(){var x=d;var T=f();if(T!==a){var S=[];var ca=d;var sa=oa();if(sa!==a){var Da=Fa();if(Da!==a){var Ia=oa();if(Ia!==a){var Qa=f();Qa!==a?ca=sa=[sa,Da,Ia,Qa]:(d=ca,ca=a)}else d=ca,ca=a}else d=ca,ca=a}else d=ca,ca=a;for(;ca!==a;)S.push(ca),ca=d,sa=oa(),sa!==a?(Da=Fa(),Da!==a?(Ia=oa(),Ia!==a?(Qa=f(),Qa!==a?ca=sa=[sa,Da,Ia,Qa]:(d=ca,ca=a)):(d=ca,ca=a)):(d=ca,ca=a)):(d=ca,ca=a);if(S!==a){x={type:"expr_list"};T=[T];for(ca=
0;ca<S.length;ca++)T.push(S[ca][3]);x.value=T}else d=x,x=a}else d=x,x=a;return x}function f(){var x=d;var T=E();if(T!==a){var S=[];var ca=d;var sa=oa();if(sa!==a){var Da=V();if(Da!==a){var Ia=oa();if(Ia!==a){var Qa=E();Qa!==a?ca=sa=[sa,Da,Ia,Qa]:(d=ca,ca=a)}else d=ca,ca=a}else d=ca,ca=a}else d=ca,ca=a;for(;ca!==a;)S.push(ca),ca=d,sa=oa(),sa!==a?(Da=V(),Da!==a?(Ia=oa(),Ia!==a?(Qa=E(),Qa!==a?ca=sa=[sa,Da,Ia,Qa]:(d=ca,ca=a)):(d=ca,ca=a)):(d=ca,ca=a)):(d=ca,ca=a);S!==a?x=T=fb(T,S):(d=x,x=a)}else d=x,
x=a;return x}function E(){var x=d;var T=q();if(T!==a){var S=[];var ca=d;var sa=oa();if(sa!==a){var Da=G();if(Da!==a){var Ia=oa();if(Ia!==a){var Qa=q();Qa!==a?ca=sa=[sa,Da,Ia,Qa]:(d=ca,ca=a)}else d=ca,ca=a}else d=ca,ca=a}else d=ca,ca=a;for(;ca!==a;)S.push(ca),ca=d,sa=oa(),sa!==a?(Da=G(),Da!==a?(Ia=oa(),Ia!==a?(Qa=q(),Qa!==a?ca=sa=[sa,Da,Ia,Qa]:(d=ca,ca=a)):(d=ca,ca=a)):(d=ca,ca=a)):(d=ca,ca=a);S!==a?x=T=fb(T,S):(d=x,x=a)}else d=x,x=a;return x}function q(){var x=d;var T=m();if(T===a){T=d;if(33===l.charCodeAt(d)){var S=
Ua;d++}else S=a,0===pa&&n(Ta);if(S!==a){var ca=d;pa++;if(61===l.charCodeAt(d)){var sa=jb;d++}else sa=a,0===pa&&n(tb);pa--;sa===a?ca=void 0:(d=ca,ca=a);ca!==a?T=S=[S,ca]:(d=T,T=a)}else d=T,T=a}T!==a?(S=oa(),S!==a?(ca=q(),ca!==a?x=T={type:"unary_expr",operator:"NOT",expr:ca}:(d=x,x=a)):(d=x,x=a)):(d=x,x=a);if(x===a)if(x=d,T=N(),T!==a)if(S=oa(),S!==a){S=[];ca=d;sa=oa();if(sa!==a){var Da=H();if(Da!==a){var Ia=oa();if(Ia!==a){var Qa=N();Qa!==a?ca=sa=[sa,Da,Ia,Qa]:(d=ca,ca=a)}else d=ca,ca=a}else d=ca,ca=
a}else d=ca,ca=a;if(ca!==a)for(;ca!==a;)S.push(ca),ca=d,sa=oa(),sa!==a?(Da=H(),Da!==a?(Ia=oa(),Ia!==a?(Qa=N(),Qa!==a?ca=sa=[sa,Da,Ia,Qa]:(d=ca,ca=a)):(d=ca,ca=a)):(d=ca,ca=a)):(d=ca,ca=a);else S=a;S!==a&&(S={type:"arithmetic",tail:S});S===a&&(S=d,ca=K(),ca!==a?(sa=oa(),sa!==a?(sa=Ga(),sa!==a?(sa=oa(),sa!==a?(sa=C(),sa!==a?(Da=oa(),Da!==a?(Da=Ja(),Da!==a?S=ca={op:ca,right:sa}:(d=S,S=a)):(d=S,S=a)):(d=S,S=a)):(d=S,S=a)):(d=S,S=a)):(d=S,S=a)):(d=S,S=a),S===a&&(S=d,ca=K(),ca!==a?(sa=oa(),sa!==a?(sa=Ga(),
sa!==a?(sa=oa(),sa!==a?(sa=Ja(),sa!==a?S=ca={op:ca,right:{type:"expr_list",value:[]}}:(d=S,S=a)):(d=S,S=a)):(d=S,S=a)):(d=S,S=a)):(d=S,S=a),S===a&&(S=d,ca=K(),ca!==a?(sa=oa(),sa!==a?(sa=h(),sa!==a?S=ca={op:ca,right:sa}:(d=S,S=a)):(d=S,S=a)):(d=S,S=a))),S===a&&(S=d,sa=m(),sa!==a?(ca=oa(),ca!==a?(ca=W(),ca!==a?(Da=oa(),Da!==a?(Da=N(),Da!==a?(Ia=oa(),Ia!==a?(Ia=G(),Ia!==a?(sa=oa(),sa!==a?(sa=N(),sa!==a?S=sa={op:"NOT"+ca,right:{type:"expr_list",value:[Da,sa]}}:(d=S,S=a)):(d=S,S=a)):(d=S,S=a)):(d=S,S=
a)):(d=S,S=a)):(d=S,S=a)):(d=S,S=a)):(d=S,S=a)):(d=S,S=a),S===a&&(S=d,sa=W(),sa!==a?(ca=oa(),ca!==a?(ca=N(),ca!==a?(Da=oa(),Da!==a?(Da=G(),Da!==a?(Ia=oa(),Ia!==a?(Ia=N(),Ia!==a?S=sa={op:sa,right:{type:"expr_list",value:[ca,Ia]}}:(d=S,S=a)):(d=S,S=a)):(d=S,S=a)):(d=S,S=a)):(d=S,S=a)):(d=S,S=a)):(d=S,S=a)),S===a&&(S=d,ca=b(),ca!==a?(sa=oa(),sa!==a?(sa=m(),sa!==a?(sa=oa(),sa!==a?(sa=N(),sa!==a?S=ca={op:ca+"NOT",right:sa}:(d=S,S=a)):(d=S,S=a)):(d=S,S=a)):(d=S,S=a)):(d=S,S=a),S===a&&(S=d,ca=b(),ca!==a?
(sa=oa(),sa!==a?(sa=N(),sa!==a?S=ca={op:ca,right:sa}:(d=S,S=a)):(d=S,S=a)):(d=S,S=a)),S===a&&(S=d,ca=v(),ca!==a?(sa=oa(),sa!==a?(sa=ia(),sa!==a?(Da=oa(),Da!==a?(Da=d,l.substr(d,6).toLowerCase()===ud?(Ia=l.substr(d,6),d+=6):(Ia=a,0===pa&&n(vd)),Ia!==a?(Ia=d,pa++,Qa=R(),pa--,Qa===a?Ia=void 0:(d=Ia,Ia=a),Ia!==a?Da="ESCAPE":(d=Da,Da=a)):(d=Da,Da=a),Da!==a?(Da=oa(),Da!==a?(Da=ma(),Da!==a?S=ca={op:ca,right:sa,escape:Da.value}:(d=S,S=a)):(d=S,S=a)):(d=S,S=a)):(d=S,S=a)):(d=S,S=a)):(d=S,S=a)):(d=S,S=a),S===
a&&(S=d,ca=v(),ca!==a?(sa=oa(),sa!==a?(sa=ia(),sa!==a?S=ca={op:ca,right:sa,escape:""}:(d=S,S=a)):(d=S,S=a)):(d=S,S=a))))));S===a&&(S=null);S!==a?(x=T,T=S,""==T||void 0==T||null==T?T=x:(S=null,T=S="arithmetic"==T.type?fb(x,T.tail):gb(T.op,x,T.right,T.escape)),x=T):(d=x,x=a)}else d=x,x=a;else d=x,x=a;return x}function H(){if(l.substr(d,2)===Ra){var x=Ra;d+=2}else x=a,0===pa&&n(Bb);x===a&&(62===l.charCodeAt(d)?(x=ea,d++):(x=a,0===pa&&n(ha)),x===a&&(l.substr(d,2)===fa?(x=fa,d+=2):(x=a,0===pa&&n(ka)),
x===a&&(l.substr(d,2)===xa?(x=xa,d+=2):(x=a,0===pa&&n(Aa)),x===a&&(60===l.charCodeAt(d)?(x=La,d++):(x=a,0===pa&&n(Pa)),x===a&&(61===l.charCodeAt(d)?(x=jb,d++):(x=a,0===pa&&n(tb)),x===a&&(l.substr(d,2)===$a?(x=$a,d+=2):(x=a,0===pa&&n(ab))))))));return x}function v(){var x=x=d;var T=m();if(T!==a){var S=oa();if(S!==a){var ca=t();ca!==a?x=T=[T,S,ca]:(d=x,x=a)}else d=x,x=a}else d=x,x=a;x!==a&&(x=x[0]+" "+x[2]);x===a&&(x=t());return x}function K(){var x=x=d;var T=m();if(T!==a){var S=oa();if(S!==a){var ca=
va();ca!==a?x=T=[T,S,ca]:(d=x,x=a)}else d=x,x=a}else d=x,x=a;x!==a&&(x=x[0]+" "+x[2]);x===a&&(x=va());return x}function N(){var x=d;var T=X();if(T!==a){var S=[];var ca=d;var sa=oa();if(sa!==a){var Da=L();if(Da!==a){var Ia=oa();if(Ia!==a){var Qa=X();Qa!==a?ca=sa=[sa,Da,Ia,Qa]:(d=ca,ca=a)}else d=ca,ca=a}else d=ca,ca=a}else d=ca,ca=a;for(;ca!==a;)S.push(ca),ca=d,sa=oa(),sa!==a?(Da=L(),Da!==a?(Ia=oa(),Ia!==a?(Qa=X(),Qa!==a?ca=sa=[sa,Da,Ia,Qa]:(d=ca,ca=a)):(d=ca,ca=a)):(d=ca,ca=a)):(d=ca,ca=a);S!==a?x=
T=fb(T,S):(d=x,x=a)}else d=x,x=a;return x}function L(){if(43===l.charCodeAt(d)){var x=Va;d++}else x=a,0===pa&&n(hb);x===a&&(45===l.charCodeAt(d)?(x=lb,d++):(x=a,0===pa&&n(qc)));return x}function X(){var x=d;var T=k();if(T!==a){var S=[];var ca=d;var sa=oa();if(sa!==a){var Da=aa();if(Da!==a){var Ia=oa();if(Ia!==a){var Qa=k();Qa!==a?ca=sa=[sa,Da,Ia,Qa]:(d=ca,ca=a)}else d=ca,ca=a}else d=ca,ca=a}else d=ca,ca=a;for(;ca!==a;)S.push(ca),ca=d,sa=oa(),sa!==a?(Da=aa(),Da!==a?(Ia=oa(),Ia!==a?(Qa=k(),Qa!==a?ca=
sa=[sa,Da,Ia,Qa]:(d=ca,ca=a)):(d=ca,ca=a)):(d=ca,ca=a)):(d=ca,ca=a);S!==a?x=T=fb(T,S):(d=x,x=a)}else d=x,x=a;return x}function aa(){if(42===l.charCodeAt(d)){var x=wd;d++}else x=a,0===pa&&n(xd);x===a&&(47===l.charCodeAt(d)?(x=yd,d++):(x=a,0===pa&&n(zd)));return x}function k(){var x=ma();if(x===a){var T=d;var S=d;var ca=Ka();if(ca!==a){var sa=Ha();if(sa!==a){var Da=Oa();Da!==a?S=ca=parseFloat(ca+sa+Da):(d=S,S=a)}else d=S,S=a}else d=S,S=a;S===a&&(S=d,ca=Ka(),ca!==a?(sa=Ha(),sa!==a?S=ca=parseFloat(ca+
sa):(d=S,S=a)):(d=S,S=a),S===a&&(S=d,ca=Ka(),ca!==a?(sa=Oa(),sa!==a?S=ca=parseFloat(ca+sa):(d=S,S=a)):(d=S,S=a),S===a&&(S=d,ca=Ka(),ca!==a&&(ca=parseFloat(ca)),S=ca)));var Ia=S;if(Ia!==a){var Qa=d;pa++;var Ad=P();pa--;Ad===a?Qa=void 0:(d=Qa,Qa=a);Qa!==a?T=Ia={type:"number",value:Ia}:(d=T,T=a)}else d=T,T=a;x=T;if(x===a){var Mb=d;var Cb=d;if(l.substr(d,4).toLowerCase()===Bd){var ac=l.substr(d,4);d+=4}else ac=a,0===pa&&n(Cd);if(ac!==a){var Nb=d;pa++;var Dd=R();pa--;Dd===a?Nb=void 0:(d=Nb,Nb=a);Nb!==
a?Cb=ac=[ac,Nb]:(d=Cb,Cb=a)}else d=Cb,Cb=a;var yb=Cb;yb!==a&&(yb={type:"bool",value:!0});Mb=yb;if(Mb===a){Mb=d;var Db=d;if(l.substr(d,5).toLowerCase()===Ed){var bc=l.substr(d,5);d+=5}else bc=a,0===pa&&n(Fd);if(bc!==a){var Ob=d;pa++;var Gd=R();pa--;Gd===a?Ob=void 0:(d=Ob,Ob=a);Ob!==a?Db=bc=[bc,Ob]:(d=Db,Db=a)}else d=Db,Db=a;yb=Db;yb!==a&&(yb={type:"bool",value:!1});Mb=yb}x=Mb;if(x===a){var Eb=d;if(l.substr(d,4).toLowerCase()===Hd){var cc=l.substr(d,4);d+=4}else cc=a,0===pa&&n(Id);if(cc!==a){var Pb=
d;pa++;var Jd=R();pa--;Jd===a?Pb=void 0:(d=Pb,Pb=a);Pb!==a?Eb=cc=[cc,Pb]:(d=Eb,Eb=a)}else d=Eb,Eb=a;var rc=Eb;rc!==a&&(rc={type:"null",value:null});x=rc;if(x===a){var wb=d;var Fb=d;if(l.substr(d,4).toLowerCase()===Kd){var sc=l.substr(d,4);d+=4}else sc=a,0===pa&&n(Ld);if(sc!==a){var dc=d;pa++;var Md=R();pa--;Md===a?dc=void 0:(d=dc,dc=a);dc!==a?Fb=sc="DATE":(d=Fb,Fb=a)}else d=Fb,Fb=a;var Rc=Fb;if(Rc!==a){var Nd=oa();if(Nd!==a){var Sc=ia();Sc!==a?wb=Rc={type:"date",value:Sc.value}:(d=wb,wb=a)}else d=
wb,wb=a}else d=wb,wb=a;x=wb;if(x===a){var xb=d;var Gb=d;if(l.substr(d,9).toLowerCase()===Od){var tc=l.substr(d,9);d+=9}else tc=a,0===pa&&n(Pd);if(tc!==a){var ec=d;pa++;var Qd=R();pa--;Qd===a?ec=void 0:(d=ec,ec=a);ec!==a?Gb=tc="TIMESTAMP":(d=Gb,Gb=a)}else d=Gb,Gb=a;var Tc=Gb;if(Tc!==a){var Rd=oa();if(Rd!==a){var Uc=ia();Uc!==a?xb=Tc={type:"timestamp",value:Uc.value}:(d=xb,xb=a)}else d=xb,xb=a}else d=xb,xb=a;x=xb;if(x===a){var Xa=d;var Qb=Z();if(Qb!==a){var uc=oa();if(uc!==a){if(45===l.charCodeAt(d)){var ub=
lb;d++}else ub=a,0===pa&&n(qc);ub===a&&(43===l.charCodeAt(d)?(ub=Va,d++):(ub=a,0===pa&&n(hb)));if(ub!==a){var vc=oa();if(vc!==a){var Rb=ia();if(Rb!==a){var Sd=oa();if(Sd!==a){var Vc=B();Vc!==a?Xa=Qb={type:"interval",value:Rb,qualifier:Vc,op:ub}:(d=Xa,Xa=a)}else d=Xa,Xa=a}else d=Xa,Xa=a}else d=Xa,Xa=a}else d=Xa,Xa=a}else d=Xa,Xa=a}else d=Xa,Xa=a;Xa===a&&(Xa=d,Qb=Z(),Qb!==a?(uc=oa(),uc!==a?(ub=ia(),ub!==a?(vc=oa(),vc!==a?(Rb=B(),Rb!==a?Xa=Qb={type:"interval",value:ub,qualifier:Rb,op:""}:(d=Xa,Xa=a)):
(d=Xa,Xa=a)):(d=Xa,Xa=a)):(d=Xa,Xa=a)):(d=Xa,Xa=a));x=Xa}}}}}}var Wa=x;if(Wa===a){var db=d;var Hb=d;if(l.substr(d,7).toLowerCase()===Td){var wc=l.substr(d,7);d+=7}else wc=a,0===pa&&n(Ud);if(wc!==a){var fc=d;pa++;var Vd=R();pa--;Vd===a?fc=void 0:(d=fc,fc=a);fc!==a?Hb=wc="EXTRACT":(d=Hb,Hb=a)}else d=Hb,Hb=a;var Wc=Hb;if(Wc!==a){var Wd=oa();if(Wd!==a){var Xd=Ga();if(Xd!==a){var Yd=oa();if(Yd!==a){var pb=da();pb===a&&(pb=ja(),pb===a&&(pb=la(),pb===a&&(pb=ra(),pb===a&&(pb=ua(),pb===a&&(pb=za())))));var Xc=
pb;if(Xc!==a){var Zd=oa();if(Zd!==a){var $d=I();if($d!==a){var ae=oa();if(ae!==a){var Yc=f();if(Yc!==a){var be=oa();if(be!==a){var ce=Ja();ce!==a?db=Wc={type:"function",name:"extract",args:{type:"expr_list",value:[{type:"string",value:Xc},Yc]}}:(d=db,db=a)}else d=db,db=a}else d=db,db=a}else d=db,db=a}else d=db,db=a}else d=db,db=a}else d=db,db=a}else d=db,db=a}else d=db,db=a}else d=db,db=a}else d=db,db=a;Wa=db;if(Wa===a){var bb=d;var Ib=d;if(l.substr(d,9).toLowerCase()===de){var xc=l.substr(d,9);d+=
9}else xc=a,0===pa&&n(ee);if(xc!==a){var gc=d;pa++;var fe=R();pa--;fe===a?gc=void 0:(d=gc,gc=a);gc!==a?Ib=xc="SUBSTRING":(d=Ib,Ib=a)}else d=Ib,Ib=a;var Zc=Ib;if(Zc!==a){var ge=oa();if(ge!==a){var he=Ga();if(he!==a){var ie=oa();if(ie!==a){var yc=f();if(yc!==a){var je=oa();if(je!==a){var ke=I();if(ke!==a){var le=oa();if(le!==a){var zc=f();if(zc!==a){var me=oa();if(me!==a){var mb=d;var Jb=d;if(l.substr(d,3).toLowerCase()===ne){var Ac=l.substr(d,3);d+=3}else Ac=a,0===pa&&n(oe);if(Ac!==a){var hc=d;pa++;
var pe=R();pa--;pe===a?hc=void 0:(d=hc,hc=a);hc!==a?Jb=Ac="FOR":(d=Jb,Jb=a)}else d=Jb,Jb=a;var Sb=Jb;if(Sb!==a){var $c=oa();if($c!==a){var ad=f();if(ad!==a){var bd=oa();bd!==a?mb=Sb=[Sb,$c,ad,bd]:(d=mb,mb=a)}else d=mb,mb=a}else d=mb,mb=a}else d=mb,mb=a;mb===a&&(mb=null);mb!==a?(Sb=Ja(),Sb!==a?bb=Zc={type:"function",name:"substring",args:{type:"expr_list",value:mb?[yc,zc,mb[2]]:[yc,zc]}}:(d=bb,bb=a)):(d=bb,bb=a)}else d=bb,bb=a}else d=bb,bb=a}else d=bb,bb=a}else d=bb,bb=a}else d=bb,bb=a}else d=bb,bb=
a}else d=bb,bb=a}else d=bb,bb=a}else d=bb,bb=a}else d=bb,bb=a;Wa=bb;if(Wa===a){var Ma=d;var Tb=Q();if(Tb!==a){var Bc=oa();if(Bc!==a){var Cc=Ga();if(Cc!==a){var Dc=oa();if(Dc!==a){var qb=c();qb===a&&(qb=null);if(qb!==a){var Ec=oa();if(Ec!==a){var Ub=f();if(Ub!==a){var Fc=oa();if(Fc!==a){var Gc=I();if(Gc!==a){var qe=oa();if(qe!==a){var cd=f();if(cd!==a){var re=oa();if(re!==a){var se=Ja();se!==a?Ma=Tb={type:"function",name:"trim",args:{type:"expr_list",value:[{type:"string",value:null==qb?"BOTH":qb},
Ub,cd]}}:(d=Ma,Ma=a)}else d=Ma,Ma=a}else d=Ma,Ma=a}else d=Ma,Ma=a}else d=Ma,Ma=a}else d=Ma,Ma=a}else d=Ma,Ma=a}else d=Ma,Ma=a}else d=Ma,Ma=a}else d=Ma,Ma=a}else d=Ma,Ma=a}else d=Ma,Ma=a}else d=Ma,Ma=a;Ma===a&&(Ma=d,Tb=Q(),Tb!==a?(Bc=oa(),Bc!==a?(Cc=Ga(),Cc!==a?(Dc=oa(),Dc!==a?(qb=c(),qb===a&&(qb=null),qb!==a?(Ec=oa(),Ec!==a?(Ub=f(),Ub!==a?(Fc=oa(),Fc!==a?(Gc=Ja(),Gc!==a?Ma=Tb={type:"function",name:"trim",args:{type:"expr_list",value:[{type:"string",value:null==qb?"BOTH":qb},Ub]}}:(d=Ma,Ma=a)):(d=
Ma,Ma=a)):(d=Ma,Ma=a)):(d=Ma,Ma=a)):(d=Ma,Ma=a)):(d=Ma,Ma=a)):(d=Ma,Ma=a)):(d=Ma,Ma=a)):(d=Ma,Ma=a));Wa=Ma;if(Wa===a){var eb=d;var Kb=d;if(l.substr(d,8).toLowerCase()===te){var Hc=l.substr(d,8);d+=8}else Hc=a,0===pa&&n(ue);if(Hc!==a){var ic=d;pa++;var ve=R();pa--;ve===a?ic=void 0:(d=ic,ic=a);ic!==a?Kb=Hc="POSITION":(d=Kb,Kb=a)}else d=Kb,Kb=a;var dd=Kb;if(dd!==a){var we=oa();if(we!==a){var xe=Ga();if(xe!==a){var ye=oa();if(ye!==a){var ed=f();if(ed!==a){var ze=oa();if(ze!==a){var Ae=va();if(Ae!==a){var Be=
oa();if(Be!==a){var fd=f();if(fd!==a){var Ce=oa();if(Ce!==a){var De=Ja();De!==a?eb=dd={type:"function",name:"position",args:{type:"expr_list",value:[ed,fd]}}:(d=eb,eb=a)}else d=eb,eb=a}else d=eb,eb=a}else d=eb,eb=a}else d=eb,eb=a}else d=eb,eb=a}else d=eb,eb=a}else d=eb,eb=a}else d=eb,eb=a}else d=eb,eb=a}else d=eb,eb=a;Wa=eb;if(Wa===a){var kb=d;var Vb;var rb=d;rb=Vb=z();if(rb===a)if(rb=d,96===l.charCodeAt(d)?(Vb=gd,d++):(Vb=a,0===pa&&n(hd)),Vb!==a){var jc=[];if(id.test(l.charAt(d))){var vb=l.charAt(d);
d++}else vb=a,0===pa&&n(jd);if(vb!==a)for(;vb!==a;)jc.push(vb),id.test(l.charAt(d))?(vb=l.charAt(d),d++):(vb=a,0===pa&&n(jd));else jc=a;jc!==a?(96===l.charCodeAt(d)?(vb=gd,d++):(vb=a,0===pa&&n(hd)),vb!==a?rb=Vb=jc.join(""):(d=rb,rb=a)):(d=rb,rb=a)}else d=rb,rb=a;var Ic=rb;if(Ic!==a){var Ee=oa();if(Ee!==a){var Fe=Ga();if(Fe!==a){var Ge=oa();if(Ge!==a){var Wb=C();Wb===a&&(Wb=null);if(Wb!==a){var He=oa();if(He!==a){var Ie=Ja();Ie!==a?kb=Ic={type:"function",name:Ic,args:Wb?Wb:{type:"expr_list",value:[]}}:
(d=kb,kb=a)}else d=kb,kb=a}else d=kb,kb=a}else d=kb,kb=a}else d=kb,kb=a}else d=kb,kb=a}else d=kb,kb=a;Wa=kb;if(Wa===a){var nb;var Sa=d;var Xb=ya();if(Xb!==a){var Jc=oa();if(Jc!==a){var Yb=f();if(Yb!==a){var Kc=oa();if(Kc!==a){var zb=[];for(nb=wa();nb!==a;)zb.push(nb),nb=wa();if(zb!==a)if(nb=oa(),nb!==a){var kc=Ba();kc!==a?Sa=Xb={type:"case_expression",format:"simple",operand:Yb,clauses:zb,else:null}:(d=Sa,Sa=a)}else d=Sa,Sa=a;else d=Sa,Sa=a}else d=Sa,Sa=a}else d=Sa,Sa=a}else d=Sa,Sa=a}else d=Sa,Sa=
a;if(Sa===a)if(Sa=d,Xb=ya(),Xb!==a)if(Jc=oa(),Jc!==a)if(Yb=f(),Yb!==a)if(Kc=oa(),Kc!==a){zb=[];for(nb=wa();nb!==a;)zb.push(nb),nb=wa();if(zb!==a)if(nb=oa(),nb!==a)if(kc=Ca(),kc!==a){var Je=oa();if(Je!==a){var Ke=Ba();Ke!==a?Sa=Xb={type:"case_expression",format:"simple",operand:Yb,clauses:zb,else:kc.value}:(d=Sa,Sa=a)}else d=Sa,Sa=a}else d=Sa,Sa=a;else d=Sa,Sa=a;else d=Sa,Sa=a}else d=Sa,Sa=a;else d=Sa,Sa=a;else d=Sa,Sa=a;else d=Sa,Sa=a;var Lc=Sa;if(Lc===a){var ob;var Ya=d;var Zb=ya();if(Zb!==a){var Mc=
oa();if(Mc!==a){var Ab=[];for(ob=qa();ob!==a;)Ab.push(ob),ob=qa();if(Ab!==a)if(ob=oa(),ob!==a){var lc=Ba();lc!==a?Ya=Zb={type:"case_expression",format:"searched",clauses:Ab,else:null}:(d=Ya,Ya=a)}else d=Ya,Ya=a;else d=Ya,Ya=a}else d=Ya,Ya=a}else d=Ya,Ya=a;if(Ya===a)if(Ya=d,Zb=ya(),Zb!==a)if(Mc=oa(),Mc!==a){Ab=[];for(ob=qa();ob!==a;)Ab.push(ob),ob=qa();if(Ab!==a)if(ob=oa(),ob!==a)if(lc=Ca(),lc!==a){var Le=oa();if(Le!==a){var Me=Ba();Me!==a?Ya=Zb={type:"case_expression",format:"searched",clauses:Ab,
else:lc.value}:(d=Ya,Ya=a)}else d=Ya,Ya=a}else d=Ya,Ya=a;else d=Ya,Ya=a;else d=Ya,Ya=a}else d=Ya,Ya=a;else d=Ya,Ya=a;Lc=Ya}Wa=Lc;if(Wa===a){var mc;var Lb=d;var kd=P();if(kd!==a){var Nc=[];for(mc=D();mc!==a;)Nc.push(mc),mc=D();Nc!==a?Lb=kd+=Nc.join(""):(d=Lb,Lb=a)}else d=Lb,Lb=a;var nc=Lb;if(nc!==a){var Oc=nc;nc=/^CURRENT_DATE$/i.test(Oc)?{type:"current_time",mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(Oc)?{type:"current_time",mode:"timestamp"}:{type:"column_ref",table:"",column:Oc}}Wa=nc;if(Wa===a&&
(Wa=h(),Wa===a)){Wa=d;var ld=Ga();if(ld!==a){var Ne=oa();if(Ne!==a){var Pc=f();if(Pc!==a){var Oe=oa();if(Oe!==a){var Pe=Ja();Pe!==a?(Pc.paren=!0,Wa=ld=Pc):(d=Wa,Wa=a)}else d=Wa,Wa=a}else d=Wa,Wa=a}else d=Wa,Wa=a}else d=Wa,Wa=a}}}}}}}}return Wa}function z(){var x;var T=d;var S=P();if(S!==a){var ca=[];for(x=R();x!==a;)ca.push(x),x=R();ca!==a?T=S+=ca.join(""):(d=T,T=a)}else d=T,T=a;return T}function P(){if(Qe.test(l.charAt(d))){var x=l.charAt(d);d++}else x=a,0===pa&&n(Re);return x}function R(){if(Se.test(l.charAt(d))){var x=
l.charAt(d);d++}else x=a,0===pa&&n(Te);return x}function D(){if(Ue.test(l.charAt(d))){var x=l.charAt(d);d++}else x=a,0===pa&&n(Ve);return x}function h(){var x=d;if(64===l.charCodeAt(d)){var T=We;d++}else T=a,0===pa&&n(Xe);if(T!==a){var S=z();S!==a?x=T=[T,S]:(d=x,x=a)}else d=x,x=a;x!==a&&(x={type:"param",value:x[1]});return x}function c(){var x=d;if(l.substr(d,7).toLowerCase()===Ye){var T=l.substr(d,7);d+=7}else T=a,0===pa&&n(Ze);if(T!==a){T=d;pa++;var S=R();pa--;S===a?T=void 0:(d=T,T=a);T!==a?x="LEADING":
(d=x,x=a)}else d=x,x=a;x===a&&(x=d,l.substr(d,8).toLowerCase()===$e?(T=l.substr(d,8),d+=8):(T=a,0===pa&&n(af)),T!==a?(T=d,pa++,S=R(),pa--,S===a?T=void 0:(d=T,T=a),T!==a?x="TRAILING":(d=x,x=a)):(d=x,x=a),x===a&&(x=d,l.substr(d,4).toLowerCase()===bf?(T=l.substr(d,4),d+=4):(T=a,0===pa&&n(cf)),T!==a?(T=d,pa++,S=R(),pa--,S===a?T=void 0:(d=T,T=a),T!==a?x="BOTH":(d=x,x=a)):(d=x,x=a)));return x}function B(){var x=d;var T=d;var S=M();if(S!==a){var ca=oa();if(ca!==a)if(ca=Ga(),ca!==a)if(ca=oa(),ca!==a)if(ca=
ba(),ca!==a){var sa=oa();sa!==a?(sa=Ja(),sa!==a?T=S={type:"interval-period",period:S.value,precision:ca,secondary:null}:(d=T,T=a)):(d=T,T=a)}else d=T,T=a;else d=T,T=a;else d=T,T=a;else d=T,T=a}else d=T,T=a;T===a&&(T=d,S=M(),S!==a&&(S=md(S)),T=S);if(T!==a)if(S=oa(),S!==a)if(S=d,l.substr(d,2).toLowerCase()===df?(ca=l.substr(d,2),d+=2):(ca=a,0===pa&&n(ef)),ca!==a?(ca=d,pa++,sa=R(),pa--,sa===a?ca=void 0:(d=ca,ca=a),ca!==a?S="TO":(d=S,S=a)):(d=S,S=a),S!==a)if(S=oa(),S!==a){S=d;ca=M();ca!==a&&(ca={type:"interval-period",
period:ca.value,precision:null,secondary:null});S=ca;if(S===a){S=d;ca=za();if(ca!==a)if(ca=oa(),ca!==a)if(ca=Ga(),ca!==a)if(ca=oa(),ca!==a)if(ca=ba(),ca!==a)if(sa=oa(),sa!==a)if(sa=Fa(),sa!==a)if(sa=oa(),sa!==a)if(sa=Y(),sa!==a){var Da=oa();Da!==a?(Da=Ja(),Da!==a?S=ca=nd(ca,sa):(d=S,S=a)):(d=S,S=a)}else d=S,S=a;else d=S,S=a;else d=S,S=a;else d=S,S=a;else d=S,S=a;else d=S,S=a;else d=S,S=a;else d=S,S=a;else d=S,S=a;S===a&&(S=d,ca=za(),ca!==a?(ca=oa(),ca!==a?(ca=Ga(),ca!==a?(ca=oa(),ca!==a?(ca=ba(),
ca!==a?(sa=oa(),sa!==a?(sa=Ja(),sa!==a?S=ca={type:"interval-period",period:"second",precision:ca,secondary:null}:(d=S,S=a)):(d=S,S=a)):(d=S,S=a)):(d=S,S=a)):(d=S,S=a)):(d=S,S=a)):(d=S,S=a),S===a&&(S=d,ca=za(),ca!==a&&(ca={type:"interval-period",period:"second",precision:null,secondary:null}),S=ca))}S!==a?x=T={type:"interval-qualifier",start:T,end:S}:(d=x,x=a)}else d=x,x=a;else d=x,x=a;else d=x,x=a;else d=x,x=a;x===a&&(x=d,S=M(),S!==a?(T=oa(),T!==a?(T=Ga(),T!==a?(T=oa(),T!==a?(T=Y(),T!==a?(ca=oa(),
ca!==a?(ca=Ja(),ca!==a?x=S={type:"interval-period",period:S.value,precision:T,secondary:null}:(d=x,x=a)):(d=x,x=a)):(d=x,x=a)):(d=x,x=a)):(d=x,x=a)):(d=x,x=a)):(d=x,x=a),x===a&&(x=d,S=M(),S!==a&&(S=md(S)),x=S,x===a&&(x=d,S=za(),S!==a?(T=oa(),T!==a?(T=Ga(),T!==a?(T=oa(),T!==a?(T=ba(),T!==a?(ca=oa(),ca!==a?(ca=Fa(),ca!==a?(S=oa(),S!==a?(S=Y(),S!==a?(ca=oa(),ca!==a?(ca=Ja(),ca!==a?x=S=nd(T,S):(d=x,x=a)):(d=x,x=a)):(d=x,x=a)):(d=x,x=a)):(d=x,x=a)):(d=x,x=a)):(d=x,x=a)):(d=x,x=a)):(d=x,x=a)):(d=x,x=a)):
(d=x,x=a),x===a&&(x=d,S=za(),S!==a?(T=oa(),T!==a?(T=Ga(),T!==a?(T=oa(),T!==a?(T=Y(),T!==a?(ca=oa(),ca!==a?(ca=Ja(),ca!==a?x=S={type:"interval-period",period:"second",precision:T,secondary:null}:(d=x,x=a)):(d=x,x=a)):(d=x,x=a)):(d=x,x=a)):(d=x,x=a)):(d=x,x=a)):(d=x,x=a),x===a&&(x=d,S=za(),S!==a&&(S={type:"interval-period",period:"second",precision:null,secondary:null}),x=S)))));return x}function M(){var x=d;x=la();x!==a&&(x={type:"string",value:"day"});x===a&&(x=d,x=ra(),x!==a&&(x={type:"string",value:"hour"}),
x===a&&(x=d,x=ua(),x!==a&&(x={type:"string",value:"minute"}),x===a&&(x=d,x=ja(),x!==a&&(x={type:"string",value:"month"}),x===a&&(x=d,x=da(),x!==a&&(x={type:"string",value:"year"})))));return x}function Y(){var x=na();x!==a&&(x=parseFloat(x));return x}function ba(){var x=na();x!==a&&(x=parseFloat(x));return x}function ia(){var x=ma();x===a&&(x=h());return x}function ma(){var x=d;if(39===l.charCodeAt(d)){var T=od;d++}else T=a,0===pa&&n(pd);T===a&&(l.substr(d,2)===qd?(T=qd,d+=2):(T=a,0===pa&&n(ff)));
if(T!==a){T=[];var S=d;l.substr(d,2)===oc?(S=oc,d+=2):(S=a,0===pa&&n(rd));S!==a&&(S="'");S===a&&(sd.test(l.charAt(d))?(S=l.charAt(d),d++):(S=a,0===pa&&n(td)));for(;S!==a;)T.push(S),S=d,l.substr(d,2)===oc?(S=oc,d+=2):(S=a,0===pa&&n(rd)),S!==a&&(S="'"),S===a&&(sd.test(l.charAt(d))?(S=l.charAt(d),d++):(S=a,0===pa&&n(td)));T!==a?(39===l.charCodeAt(d)?(S=od,d++):(S=a,0===pa&&n(pd)),S!==a?x=T={type:"string",value:T.join("")}:(d=x,x=a)):(d=x,x=a)}else d=x,x=a;return x}function qa(){var x=d;var T=Na();if(T!==
a)if(T=oa(),T!==a)if(T=f(),T!==a){var S=oa();S!==a?(S=Ea(),S!==a?(S=oa(),S!==a?(S=f(),S!==a?x=T={type:"when_clause",operand:T,value:S}:(d=x,x=a)):(d=x,x=a)):(d=x,x=a)):(d=x,x=a)}else d=x,x=a;else d=x,x=a;else d=x,x=a;return x}function wa(){var x=d;var T=Na();if(T!==a)if(T=oa(),T!==a)if(T=f(),T!==a){var S=oa();S!==a?(S=Ea(),S!==a?(S=oa(),S!==a?(S=f(),S!==a?x=T={type:"when_clause",operand:T,value:S}:(d=x,x=a)):(d=x,x=a)):(d=x,x=a)):(d=x,x=a)}else d=x,x=a;else d=x,x=a;else d=x,x=a;return x}function Ca(){var x=
d;var T=d;if(l.substr(d,4).toLowerCase()===gf){var S=l.substr(d,4);d+=4}else S=a,0===pa&&n(hf);if(S!==a){S=d;pa++;var ca=R();pa--;ca===a?S=void 0:(d=S,S=a);S!==a?T="ELSE":(d=T,T=a)}else d=T,T=a;T!==a?(T=oa(),T!==a?(T=f(),T!==a?x={type:"else_clause",value:T}:(d=x,x=a)):(d=x,x=a)):(d=x,x=a);return x}function Ka(){var x=na();if(x===a){x=d;if(45===l.charCodeAt(d)){var T=lb;d++}else T=a,0===pa&&n(qc);T===a&&(43===l.charCodeAt(d)?(T=Va,d++):(T=a,0===pa&&n(hb)));if(T!==a){var S=na();S!==a?x=T=T[0]+S:(d=
x,x=a)}else d=x,x=a}return x}function Ha(){var x=d;if(46===l.charCodeAt(d)){var T=jf;d++}else T=a,0===pa&&n(kf);T!==a?(T=na(),T===a&&(T=null),T!==a?x="."+(null!=T?T:""):(d=x,x=a)):(d=x,x=a);return x}function Oa(){var x;var T=x=d;if(lf.test(l.charAt(d))){var S=l.charAt(d);d++}else S=a,0===pa&&n(mf);S!==a?(nf.test(l.charAt(d))?(S=l.charAt(d),d++):(S=a,0===pa&&n(of)),S===a&&(S=null),S!==a?T="e"+(null===S?"":S):(d=T,T=a)):(d=T,T=a);T!==a?(S=na(),S!==a?x=T+S:(d=x,x=a)):(d=x,x=a);return x}function na(){var x=
[];var T=ta();if(T!==a)for(;T!==a;)x.push(T),T=ta();else x=a;x!==a&&(x=x.join(""));return x}function ta(){if(pf.test(l.charAt(d))){var x=l.charAt(d);d++}else x=a,0===pa&&n(qf);return x}function va(){var x=d;if(l.substr(d,2).toLowerCase()===rf){var T=l.substr(d,2);d+=2}else T=a,0===pa&&n(sf);if(T!==a){T=d;pa++;var S=R();pa--;S===a?T=void 0:(d=T,T=a);T!==a?x="IN":(d=x,x=a)}else d=x,x=a;return x}function b(){var x=d;if(l.substr(d,2).toLowerCase()===tf){var T=l.substr(d,2);d+=2}else T=a,0===pa&&n(uf);
if(T!==a){T=d;pa++;var S=R();pa--;S===a?T=void 0:(d=T,T=a);T!==a?x="IS":(d=x,x=a)}else d=x,x=a;return x}function t(){var x=d;if(l.substr(d,4).toLowerCase()===vf){var T=l.substr(d,4);d+=4}else T=a,0===pa&&n(wf);if(T!==a){T=d;pa++;var S=R();pa--;S===a?T=void 0:(d=T,T=a);T!==a?x="LIKE":(d=x,x=a)}else d=x,x=a;return x}function m(){var x=d;if(l.substr(d,3).toLowerCase()===xf){var T=l.substr(d,3);d+=3}else T=a,0===pa&&n(yf);if(T!==a){T=d;pa++;var S=R();pa--;S===a?T=void 0:(d=T,T=a);T!==a?x="NOT":(d=x,x=
a)}else d=x,x=a;return x}function G(){var x=d;if(l.substr(d,3).toLowerCase()===zf){var T=l.substr(d,3);d+=3}else T=a,0===pa&&n(Af);if(T!==a){T=d;pa++;var S=R();pa--;S===a?T=void 0:(d=T,T=a);T!==a?x="AND":(d=x,x=a)}else d=x,x=a;return x}function V(){var x=d;if(l.substr(d,2).toLowerCase()===Bf){var T=l.substr(d,2);d+=2}else T=a,0===pa&&n(Cf);if(T!==a){T=d;pa++;var S=R();pa--;S===a?T=void 0:(d=T,T=a);T!==a?x="OR":(d=x,x=a)}else d=x,x=a;return x}function W(){var x=d;if(l.substr(d,7).toLowerCase()===Df){var T=
l.substr(d,7);d+=7}else T=a,0===pa&&n(Ef);if(T!==a){T=d;pa++;var S=R();pa--;S===a?T=void 0:(d=T,T=a);T!==a?x="BETWEEN":(d=x,x=a)}else d=x,x=a;return x}function I(){var x=d;if(l.substr(d,4).toLowerCase()===Ff){var T=l.substr(d,4);d+=4}else T=a,0===pa&&n(Gf);if(T!==a){T=d;pa++;var S=R();pa--;S===a?T=void 0:(d=T,T=a);T!==a?x="FROM":(d=x,x=a)}else d=x,x=a;return x}function Q(){var x=d;if(l.substr(d,4).toLowerCase()===Hf){var T=l.substr(d,4);d+=4}else T=a,0===pa&&n(If);if(T!==a){T=d;pa++;var S=R();pa--;
S===a?T=void 0:(d=T,T=a);T!==a?x="TRIM":(d=x,x=a)}else d=x,x=a;return x}function Z(){var x=d;if(l.substr(d,8).toLowerCase()===Jf){var T=l.substr(d,8);d+=8}else T=a,0===pa&&n(Kf);if(T!==a){T=d;pa++;var S=R();pa--;S===a?T=void 0:(d=T,T=a);T!==a?x="INTERVAL":(d=x,x=a)}else d=x,x=a;return x}function da(){var x=d;if(l.substr(d,4).toLowerCase()===Lf){var T=l.substr(d,4);d+=4}else T=a,0===pa&&n(Mf);if(T!==a){T=d;pa++;var S=R();pa--;S===a?T=void 0:(d=T,T=a);T!==a?x="YEAR":(d=x,x=a)}else d=x,x=a;return x}
function ja(){var x=d;if(l.substr(d,5).toLowerCase()===Nf){var T=l.substr(d,5);d+=5}else T=a,0===pa&&n(Of);if(T!==a){T=d;pa++;var S=R();pa--;S===a?T=void 0:(d=T,T=a);T!==a?x="MONTH":(d=x,x=a)}else d=x,x=a;return x}function la(){var x=d;if(l.substr(d,3).toLowerCase()===Pf){var T=l.substr(d,3);d+=3}else T=a,0===pa&&n(Qf);if(T!==a){T=d;pa++;var S=R();pa--;S===a?T=void 0:(d=T,T=a);T!==a?x="DAY":(d=x,x=a)}else d=x,x=a;return x}function ra(){var x=d;if(l.substr(d,4).toLowerCase()===Rf){var T=l.substr(d,
4);d+=4}else T=a,0===pa&&n(Sf);if(T!==a){T=d;pa++;var S=R();pa--;S===a?T=void 0:(d=T,T=a);T!==a?x="HOUR":(d=x,x=a)}else d=x,x=a;return x}function ua(){var x=d;if(l.substr(d,6).toLowerCase()===Tf){var T=l.substr(d,6);d+=6}else T=a,0===pa&&n(Uf);if(T!==a){T=d;pa++;var S=R();pa--;S===a?T=void 0:(d=T,T=a);T!==a?x="MINUTE":(d=x,x=a)}else d=x,x=a;return x}function za(){var x=d;if(l.substr(d,6).toLowerCase()===Vf){var T=l.substr(d,6);d+=6}else T=a,0===pa&&n(Wf);if(T!==a){T=d;pa++;var S=R();pa--;S===a?T=
void 0:(d=T,T=a);T!==a?x="SECOND":(d=x,x=a)}else d=x,x=a;return x}function ya(){var x=d;if(l.substr(d,4).toLowerCase()===Xf){var T=l.substr(d,4);d+=4}else T=a,0===pa&&n(Yf);if(T!==a){T=d;pa++;var S=R();pa--;S===a?T=void 0:(d=T,T=a);T!==a?x="CASE":(d=x,x=a)}else d=x,x=a;return x}function Ba(){var x=d;if(l.substr(d,3).toLowerCase()===Zf){var T=l.substr(d,3);d+=3}else T=a,0===pa&&n($f);if(T!==a){T=d;pa++;var S=R();pa--;S===a?T=void 0:(d=T,T=a);T!==a?x="END":(d=x,x=a)}else d=x,x=a;return x}function Na(){var x=
d;if(l.substr(d,4).toLowerCase()===ag){var T=l.substr(d,4);d+=4}else T=a,0===pa&&n(bg);if(T!==a){T=d;pa++;var S=R();pa--;S===a?T=void 0:(d=T,T=a);T!==a?x="WHEN":(d=x,x=a)}else d=x,x=a;return x}function Ea(){var x=d;if(l.substr(d,4).toLowerCase()===cg){var T=l.substr(d,4);d+=4}else T=a,0===pa&&n(dg);if(T!==a){T=d;pa++;var S=R();pa--;S===a?T=void 0:(d=T,T=a);T!==a?x="THEN":(d=x,x=a)}else d=x,x=a;return x}function Fa(){if(44===l.charCodeAt(d)){var x=eg;d++}else x=a,0===pa&&n(fg);return x}function Ga(){if(40===
l.charCodeAt(d)){var x=gg;d++}else x=a,0===pa&&n(hg);return x}function Ja(){if(41===l.charCodeAt(d)){var x=ig;d++}else x=a,0===pa&&n(jg);return x}function oa(){var x;var T=[];for(x=cb();x!==a;)T.push(x),x=cb();return T}function cb(){if(kg.test(l.charAt(d))){var x=l.charAt(d);d++}else x=a,0===pa&&n(lg);return x}function gb(x,T,S,ca){x={type:"binary_expr",operator:x,left:T,right:S};void 0!==ca&&(x.escape=ca);return x}function fb(x,T){for(var S=0;S<T.length;S++)x=gb(T[S][1],x,T[S][3]);return x}F=void 0!==
F?F:{};var a={},ib={start:y},Za=y,Ua="!",Ta=r("!",!1),jb="\x3d",tb=r("\x3d",!1),Ra="\x3e\x3d",Bb=r("\x3e\x3d",!1),ea="\x3e",ha=r("\x3e",!1),fa="\x3c\x3d",ka=r("\x3c\x3d",!1),xa="\x3c\x3e",Aa=r("\x3c\x3e",!1),La="\x3c",Pa=r("\x3c",!1),$a="!\x3d",ab=r("!\x3d",!1),Va="+",hb=r("+",!1),lb="-",qc=r("-",!1),wd="*",xd=r("*",!1),yd="/",zd=r("/",!1),Qe=/^[A-Za-z_\x80-\uFFFF]/,Re=w([["A","Z"],["a","z"],"_",["\u0080","\uffff"]],!1,!1),Se=/^[A-Za-z0-9_]/,Te=w([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),Ue=/^[A-Za-z0-9_.\x80-\uFFFF]/,
Ve=w([["A","Z"],["a","z"],["0","9"],"_",".",["\u0080","\uffff"]],!1,!1),We="@",Xe=r("@",!1),md=function(x){return{type:"interval-period",period:x.value,precision:null,secondary:null}},nd=function(x,T){return{type:"interval-period",period:"second",precision:x,secondary:T}},od="'",pd=r("'",!1),qd="N'",ff=r("N'",!1),oc="''",rd=r("''",!1),sd=/^[^']/,td=w(["'"],!0,!1),jf=".",kf=r(".",!1),pf=/^[0-9]/,qf=w([["0","9"]],!1,!1),lf=/^[eE]/,mf=w(["e","E"],!1,!1),nf=/^[+\-]/,of=w(["+","-"],!1,!1),Hd="null",Id=
r("NULL",!0),Bd="true",Cd=r("TRUE",!0),Ed="false",Fd=r("FALSE",!0),rf="in",sf=r("IN",!0),tf="is",uf=r("IS",!0),vf="like",wf=r("LIKE",!0),ud="escape",vd=r("ESCAPE",!0),xf="not",yf=r("NOT",!0),zf="and",Af=r("AND",!0),Bf="or",Cf=r("OR",!0),Df="between",Ef=r("BETWEEN",!0),Ff="from",Gf=r("FROM",!0),ne="for",oe=r("FOR",!0),de="substring",ee=r("SUBSTRING",!0),Td="extract",Ud=r("EXTRACT",!0),Hf="trim",If=r("TRIM",!0),te="position",ue=r("POSITION",!0),Od="timestamp",Pd=r("TIMESTAMP",!0),Kd="date",Ld=r("DATE",
!0),Ye="leading",Ze=r("LEADING",!0),$e="trailing",af=r("TRAILING",!0),bf="both",cf=r("BOTH",!0),df="to",ef=r("TO",!0),Jf="interval",Kf=r("INTERVAL",!0),Lf="year",Mf=r("YEAR",!0),Nf="month",Of=r("MONTH",!0),Pf="day",Qf=r("DAY",!0),Rf="hour",Sf=r("HOUR",!0),Tf="minute",Uf=r("MINUTE",!0),Vf="second",Wf=r("SECOND",!0),Xf="case",Yf=r("CASE",!0),Zf="end",$f=r("END",!0),ag="when",bg=r("WHEN",!0),cg="then",dg=r("THEN",!0),gf="else",hf=r("ELSE",!0),eg=",",fg=r(",",!1),gg="(",hg=r("(",!1),ig=")",jg=r(")",!1),
kg=/^[ \t\n\r]/,lg=w([" ","\t","\n","\r"],!1,!1),gd="`",hd=r("`",!1),id=/^[^`]/,jd=w(["`"],!0,!1),d=0,$b=[{line:1,column:1}],sb=0,pc=[],pa=0;if("startRule"in F){if(!(F.startRule in ib))throw Error("Can't start parsing from rule \""+F.startRule+'".');Za=ib[F.startRule]}var Qc=Za();if(Qc!==a&&d===l.length)return Qc;Qc!==a&&d<l.length&&n({type:"end"});throw function(x,T,S){return new u(u.buildMessage(x,T),x,T,S)}(pc,sb<l.length?l.charAt(sb):null,sb<l.length?U(sb,sb+1):U(sb,sb));}}})})(A);let O=function(){function g(){}
g.parse=function(u){return A.exports.parse(u)};return g}();p.WhereGrammar=O;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/chunks/_commonjsHelpers":function(){define(["exports"],function(p){p.commonjsGlobal="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};p.commonjsRequire=function(e){throw Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.');
};p.getDefaultExportFromCjs=function(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e["default"]:e}})},"esri/layers/graphics/data/QueryEngineCapabilities":function(){define(["exports"],function(p){p.queryCapabilities={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,
supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/graphics/data/QueryEngineResult":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../geometry/support/quantizationUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ./AttributesBuilder ./attributeSupport ./projectionSupport ./timeSupport ./utils ../../support/fieldUtils ../../../smartMapping/statistics/support/utils ../../../support/arcadeOnDemand".split(" "),
function(p,e,A,O,g,u,l,F,r,w,J,U,n){function y(q){return q.substr(24,12)+q.substr(19,4)+q.substr(16,2)+q.substr(14,2)+q.substr(11,2)+q.substr(9,2)+q.substr(6,2)+q.substr(4,2)+q.substr(2,2)+q.substr(0,2)}function C(q,H,v,K){if(v&&"esriFieldTypeDate"===v.type){const N=(new Date(q)).getTime(),L=(new Date(H)).getTime();if(!isNaN(N)&&!isNaN(L))return K?L-N:N-L}return"number"===typeof q&&"number"===typeof H?K?H-q:q-H:"string"===typeof q&&"string"===typeof H?(q=q.toUpperCase(),H=H.toUpperCase(),!v||"esriFieldTypeGUID"!==
v.type&&"esriFieldTypeGlobalID"!==v.type?K=(K?q>H:q<H)?-1:(K?q<H:q>H)?1:0:(v=y(q),H=y(H),K=(K?v>H:v<H)?-1:(K?v<H:v>H)?1:0),K):K?1:-1}function f(q,H,v,K,N,L){N-=v;L-=K;q=Math.min(1,Math.max(0,((q-v)*N+(H-K)*L)/(N*N+L*L)));return{x:v+N*q,y:K+L*q}}function E(q,H){return q?H?4:3:H?3:2}return function(){function q(v,K,N){this.items=v;this.queryGeometry=K;this.definitionExpression=N.definitionExpression;this.geometryType=N.geometryType;this.hasM=N.hasM;this.hasZ=N.hasZ;this.objectIdField=N.objectIdField;
this.spatialReference=N.spatialReference;this.fieldsIndex=N.fieldsIndex;this.timeInfo=N.timeInfo;this.featureAdapter=N.featureAdapter;this.aggregateAdapter=N.aggregateAdapter}var H=q.prototype;H.createQueryResponseForCount=function(v){const K=new u(v,this.featureAdapter,this.fieldsIndex);if(!v.outStatistics)return K.countDistinctValues(this.items);const {groupByFieldsForStatistics:N,having:L}=v;if(null==N||!N.length)return 1;const X=new Map,aa=new Map,k=new Set;v=v.outStatistics;for(const P of v){({statisticType:v}=
P);v="exceedslimit"!==v?P.onStatisticField:void 0;if(!aa.has(v)){var z=[];for(const R of N){const D=this._getAttributeValues(K,R,X);z.push(D)}aa.set(v,this._calculateUniqueValues(z))}v=aa.get(v);for(const R in v){const {data:D,items:h}=v[R];z=D.join(",");L&&!K.validateItems(h,L)||k.add(z)}}return k.size};H.createQueryResponse=function(v){let K;K=v.outStatistics?v.outStatistics.some(N=>"exceedslimit"===N.statisticType)?this._createExceedsLimitQueryResponse(v):this._createStatisticsQueryResponse(v):
this._createFeatureQueryResponse(v);v.returnQueryGeometry&&(O.isValid(v.outSR)&&!O.equals(this.queryGeometry.spatialReference,v.outSR)?K.queryGeometry=w.cleanFromGeometryEngine({spatialReference:v.outSR,...F.project(this.queryGeometry,this.queryGeometry.spatialReference,v.outSR)}):K.queryGeometry=w.cleanFromGeometryEngine({spatialReference:v.outSR,...this.queryGeometry}));return K};H.createSnappingResponse=function(v,K){const N=this.featureAdapter,L=E(this.hasZ,this.hasM),{x:X,y:aa}=v.point,k="number"===
typeof v.distance?v.distance:v.distance.x,z="number"===typeof v.distance?v.distance:v.distance.y,P={candidates:[]},R="esriGeometryPolygon"===this.geometryType;K=this.getPointCreator(v.point,this.spatialReference,K);for(const ia of this.items){var D=N.getGeometry(ia);if(!D)continue;const {coords:ma,lengths:qa}=D;if(v.types&1){D=0;for(var h=0;h<qa.length;h++){var c=qa[h];for(var B=0;B<c;B++,D+=L){var M=ma[D],Y=ma[D+1];if(B!==c-1){const wa=ma[D+L],Ca=ma[D+L+1],{x:Ka,y:Ha}=f(X,aa,M,Y,wa,Ca);var ba=(X-
Ka)/k;const Oa=(aa-Ha)/z;ba=ba*ba+Oa*Oa;1>=ba&&P.candidates.push({type:"edge",objectId:N.getObjectId(ia),distance:Math.sqrt(ba),target:K(Ka,Ha),start:K(M,Y),end:K(wa,Ca)})}}}}if(v.types&2)for(D=R?ma.length-L:ma.length,h=0;h<D;h+=L)c=ma[h],B=ma[h+1],M=(X-c)/k,Y=(aa-B)/z,M=M*M+Y*Y,1>=M&&P.candidates.push({type:"vertex",objectId:N.getObjectId(ia),distance:Math.sqrt(M),target:K(c,B)})}P.candidates.sort((ia,ma)=>ia.distance-ma.distance);return P};H.getPointCreator=function(v,K,N){const L=e.isSome(N)&&
!O.equals(K,N)?X=>F.project(X,K,N):X=>X;return null!=v.z&&null!=v.m?(X,aa)=>L({x:X,y:aa,z:v.z,m:v.m}):null!=v.z?(X,aa)=>L({x:X,y:aa,z:v.z}):null!=v.m?(X,aa)=>L({x:X,y:aa,m:v.m}):(X,aa)=>L({x:X,y:aa})};H.executeAttributesQuery=function(v){var K=l.getWhereClause(v.where,this.fieldsIndex);if(!K)return Promise.resolve(this);if(K.isStandardized){let N=0;const L=[];for(const X of this.items)K.testFeature(X,this.featureAdapter)&&(L[N++]=X);K=new q(L,this.queryGeometry,this);K.definitionExpression=v.where;
return Promise.resolve(K)}return Promise.reject(new TypeError("Where clause is not standardized"))};H.executeAggregateIdsQuery=function(v){if(!v.aggregateIds||!v.aggregateIds.length||e.isNone(this.aggregateAdapter))return Promise.resolve(this);const K=new Set;for(const L of v.aggregateIds)this.aggregateAdapter.getFeatureObjectIds(L).forEach(X=>K.add(X));const N=this.featureAdapter.getObjectId;return Promise.resolve(new q(this.items.filter(L=>K.has(N(L))),this.queryGeometry,this))};H.executeObjectIdsQuery=
function(v){if(!v.objectIds||!v.objectIds.length)return Promise.resolve(this);const K=new Set(v.objectIds),N=this.featureAdapter.getObjectId;return Promise.resolve(new q(this.items.filter(L=>K.has(N(L))),this.queryGeometry,this))};H.executeTimeQuery=function(v){v=r.getTimeOperator(this.timeInfo,v.timeExtent,this.featureAdapter);if(!e.isSome(v))return Promise.resolve(this);v=this.items.filter(v);return Promise.resolve(new q(v,this.queryGeometry,this))};H.filterLatest=function(){const {trackIdField:v,
startTimeField:K,endTimeField:N}=this.timeInfo;var L=N||K;const X=new Map,aa=this.featureAdapter.getAttribute;for(const k of this.items){const z=aa(k,v),P=aa(k,L),R=X.get(z);(!R||P>aa(R,L))&&X.set(z,k)}L=Array.from(X.values());return Promise.resolve(new q(L,this.queryGeometry,this))};H.project=function(){var v=p._asyncToGenerator(function*(K){if(!K||O.equals(this.spatialReference,K))return this;const N=this.featureAdapter,L=(yield F.projectMany(this.items.map(X=>w.getGeometry(this.geometryType,this.hasZ,
this.hasM,N.getGeometry(X))),this.spatialReference,K)).map((X,aa)=>N.cloneWithGeometry(this.items[aa],g.convertFromGeometry(X,this.hasZ,this.hasM)));return new q(L,this.queryGeometry,{definitionExpression:this.definitionExpression,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,objectIdField:this.objectIdField,spatialReference:K,fieldsIndex:this.fieldsIndex,timeInfo:this.timeInfo,featureAdapter:this.featureAdapter})});return function(K){return v.apply(this,arguments)}}();H.createSummaryStatisticsResponse=
function(){var v=p._asyncToGenerator(function*(K,N){const {field:L,normalizationField:X,normalizationType:aa,normalizationTotal:k,minValue:z,maxValue:P}=N;var R=new u(K,this.featureAdapter,this.fieldsIndex);K=this.fieldsIndex.isDateField(L);N=N.valueExpression?yield this._getAttributeExpressionValues(R,N.valueExpression,N.viewInfoParams):this._getAttributeNormalizedValues(R,{field:L,normalizationField:X,normalizationType:aa,normalizationTotal:k});R=U.isNullCountSupported({normalizationType:aa,normalizationField:X,
minValue:z,maxValue:P});N=J.isStringField(this.fieldsIndex.get(L))?U.calculateStringStatistics({values:N,supportsNullCount:R}):U.calculateStatistics({values:N,minValue:z,maxValue:P,useSampleStdDev:!aa,supportsNullCount:R});return U.processStatsResult(N,K)});return function(K,N){return v.apply(this,arguments)}}();H._sortFeatures=function(v,K,N){if(1<v.length&&K&&K.length)for(const L of K.reverse()){K=L.split(" ");const X=K[0],aa=this.fieldsIndex.get(X),k=K[1]&&"desc"===K[1].toLowerCase();v.sort((z,
P)=>{z=N(z,X,aa);P=N(P,X,aa);return C(z,P,aa,k)})}};H._createFeatureQueryResponse=function(v){const K=this.items,{geometryType:N,hasM:L,hasZ:X,objectIdField:aa,spatialReference:k}=this,{outFields:z,outSR:P,quantizationParameters:R,resultRecordCount:D,resultOffset:h,returnZ:c,returnM:B}=v,M=null!=D?K.length>(h||0)+D:!1,Y=z&&(-1<z.indexOf("*")?[...this.fieldsIndex.fields]:z.map(ba=>this.fieldsIndex.get(ba)));return{exceededTransferLimit:M,features:this._createFeatures(v,K),fields:Y,geometryType:N,hasM:L&&
B,hasZ:X&&c,objectIdFieldName:aa,spatialReference:w.cleanFromGeometryEngine(P?P:k),transform:R&&A.toQuantizationTransform(R)||null}};H._createFeatures=function(v,K){const N=new u(v,this.featureAdapter,this.fieldsIndex),{hasM:L,hasZ:X}=this,{orderByFields:aa,quantizationParameters:k,returnGeometry:z,returnCentroid:P,maxAllowableOffset:R,resultOffset:D,resultRecordCount:h,returnZ:c=!1,returnM:B=!1}=v,M=X&&c,Y=L&&B;v=[];var ba=0;K=[...K];this._sortFeatures(K,aa,(qa,wa,Ca)=>N.getFieldValue(qa,wa,Ca));
if(z||P){var ia=A.toQuantizationTransform(k);if(z&&!P)for(var ma of K)v[ba++]={attributes:N.getAttributes(ma),geometry:w.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(ma),R,ia,M,Y)};else if(!z&&P)for(const qa of K)v[ba++]={attributes:N.getAttributes(qa),centroid:w.transformCentroid(this,this.featureAdapter.getCentroid(qa,this),ia)};else for(const qa of K)v[ba++]={attributes:N.getAttributes(qa),centroid:w.transformCentroid(this,this.featureAdapter.getCentroid(qa,
this),ia),geometry:w.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(qa),R,ia,M,Y)}}else for(ia of K)(ma=N.getAttributes(ia))&&(v[ba++]={attributes:ma});ba=D||0;null!=h&&(v=v.slice(ba,Math.min(v.length,ba+h)));return v};H._createExceedsLimitQueryResponse=function(v){var K=!1;let N=Number.POSITIVE_INFINITY,L=Number.POSITIVE_INFINITY;K=Number.POSITIVE_INFINITY;for(const X of v.outStatistics)if("exceedslimit"===X.statisticType){N=null!=X.maxPointCount?X.maxPointCount:
Number.POSITIVE_INFINITY;L=null!=X.maxRecordCount?X.maxRecordCount:Number.POSITIVE_INFINITY;K=null!=X.maxVertexCount?X.maxVertexCount:Number.POSITIVE_INFINITY;break}if("esriGeometryPoint"===this.geometryType)K=this.items.length>N;else if(this.items.length>L)K=!0;else{v=this.hasZ?this.hasM?4:3:this.hasM?3:2;const X=this.featureAdapter;K=this.items.reduce((aa,k)=>{k=X.getGeometry(k);return aa+(k&&k.coords.length||0)},0)/v>K}return{fields:[{name:"exceedslimit",type:"esriFieldTypeInteger",alias:"exceedslimit",
sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],features:[{attributes:{exceedslimit:Number(K)}}]}};H._createStatisticsQueryResponse=function(v){var K={attributes:{}};const N=[],L=new Map,X=new Map,aa=new Map,k=new Map,z=new u(v,this.featureAdapter,this.fieldsIndex);var P=v.outStatistics;const {groupByFieldsForStatistics:R,having:D,orderByFields:h}=v;v=R&&R.length;const c=!!v,B=c&&R[0],M=c&&!this.fieldsIndex.get(B);for(const qa of P){const {outStatisticFieldName:wa,statisticType:Ca}=qa;P=
qa;var Y="exceedslimit"!==Ca?qa.onStatisticField:void 0;const Ka="percentile_disc"===Ca||"percentile_cont"===Ca,Ha=c&&1===v&&(Y===B||M)&&"count"===Ca;if(c){if(!aa.has(Y)){var ba=[];for(const Oa of R){var ia=this._getAttributeValues(z,Oa,L);ba.push(ia)}aa.set(Y,this._calculateUniqueValues(ba,z.returnDistinctValues))}ba=aa.get(Y);for(const Oa in ba){const {count:na,data:ta,items:va,itemPositions:b}=ba[Oa];ia=ta.join(",");if(!D||z.validateItems(va,D)){const t=k.get(ia)||{attributes:{}};var ma=null;if(Ha)ma=
na;else{const m=this._getAttributeValues(z,Y,L);ma=b.map(G=>m[G]);ma=Ka&&"statisticParameters"in P?this._getPercentileValue(P,ma):this._getStatisticValue(P,ma)}t.attributes[wa]=ma;R.forEach((m,G)=>t.attributes[this.fieldsIndex.get(m)?m:`EXPR_${G+1}`]=ta[G]);k.set(ia,t)}}}else Y=this._getAttributeValues(z,Y,L),K.attributes[wa]=Ka&&"statisticParameters"in P?this._getPercentileValue(P,Y):this._getStatisticValue(P,Y,X);N.push({name:wa,alias:wa,type:"esriFieldTypeDouble"})}K=c?Array.from(k.values()):[K];
this._sortFeatures(K,h,(qa,wa)=>qa.attributes[wa]);return{fields:N,features:K}};H._getStatisticValue=function(v,K,N){const {onStatisticField:L,statisticType:X}=v;v=null;v=null!=N&&N.has(L)?N.get(L):J.isStringField(this.fieldsIndex.get(L))?U.calculateStringStatistics({values:K}):U.calculateStatistics({values:K,minValue:null,maxValue:null,useSampleStdDev:!0});N&&N.set(L,v);return v["var"===X?"variance":X]};H._getPercentileValue=function(v,K){const {onStatisticField:N,statisticParameters:L,statisticType:X}=
v,{value:aa,orderBy:k}=L,z="desc"===k,P=this.fieldsIndex.get(N);v=[...K].filter(R=>null!=R).sort((R,D)=>C(R,D,P,z));return this._calculatePercentile(v,aa,"percentile_disc"===X)};H._getAttributeValues=function(v,K,N){if(N.has(K))return N.get(K);const L=this.fieldsIndex.get(K),X=this.items.map(aa=>v.getFieldValue(aa,K,L));N.set(K,X);return X};H._getAttributeNormalizedValues=function(v,K){return this.items.map(N=>v.getNormalizedValue(N,{field:K.field,fieldInfo:this.fieldsIndex.get(K.field),normalizationField:K.normalizationField,
normalizationFieldInfo:this.fieldsIndex.get(K.normalizationField),normalizationType:K.normalizationType,normalizationTotal:K.normalizationTotal}))};H._getAttributeExpressionValues=function(){var v=p._asyncToGenerator(function*(K,N,L){const {arcadeUtils:X}=yield n.loadArcade(),aa=X.createFunction(N),k=L&&X.getViewInfo(L);return this.items.map(z=>K.getExpressionValue(z,{compiledFunc:aa,viewInfo:k},X))});return function(K,N,L){return v.apply(this,arguments)}}();H._calculateUniqueValues=function(v,K){const N=
{},L=this.items,X=L.length;for(let aa=0;aa<X;aa++){const k=L[aa],z=[];for(const R of v)z.push(R[aa]);const P=z.join(",");K?null==N[P]&&(N[P]={count:1,data:z,items:[k],itemPositions:[aa]}):null==N[P]?N[P]={count:1,data:z,items:[k],itemPositions:[aa]}:(N[P].count++,N[P].items.push(k),N[P].itemPositions.push(aa))}return N};H._calculatePercentile=function(v,K,N){if(0===v.length)return null;if(0>=K)return v[0];if(1<=K)return v[v.length-1];var L=(v.length-1)*K,X=Math.floor(L);K=X+1;L%=1;X=v[X];const aa=
v[K];return K>=v.length||N||"string"===typeof X||"string"===typeof aa?X:X*(1-L)+aa*L};p._createClass(q,[{key:"size",get:function(){return this.items.length}}]);return q}()})},"esri/geometry/support/quantizationUtils":function(){define(["exports","./jsonUtils"],function(p,e){function A({scale:k,translate:z},P){return Math.round((P-z[0])/k[0])}function O({scale:k,translate:z},P){return Math.round((z[1]-P)/k[1])}function g(k,z,P){const R=[];let D,h,c,B;for(let M=0;M<P.length;M++){const Y=P[M];if(0<M){if(c=
A(k,Y[0]),B=O(k,Y[1]),c!==D||B!==h)R.push(z(Y,c-D,B-h)),D=c,h=B}else D=A(k,Y[0]),h=O(k,Y[1]),R.push(z(Y,D,h))}return 0<R.length?R:null}function u(k,z,P,R){return g(k,P?R?aa:X:R?X:L,z)}function l(k,z,P,R){const D=[];P=P?R?aa:X:R?X:L;for(R=0;R<z.length;R++){const h=g(k,P,z[R]);h&&3<=h.length&&D.push(h)}return D.length?D:null}function F(k,z,P,R){const D=[];P=P?R?aa:X:R?X:L;for(R=0;R<z.length;R++){const h=g(k,P,z[R]);h&&2<=h.length&&D.push(h)}return D.length?D:null}function r({scale:k,translate:z},P){return P*
k[0]+z[0]}function w({scale:k,translate:z},P){return z[1]-P*k[1]}function J(k,z,P){const R=Array(P.length);if(!P.length)return R;const [D,h]=k.scale;let c=r(k,P[0][0]);k=w(k,P[0][1]);R[0]=z(P[0],c,k);for(let B=1;B<P.length;B++){const M=P[B];c+=M[0]*D;k-=M[1]*h;R[B]=z(M,c,k)}return R}function U(k,z,P){const R=Array(P.length);for(let D=0;D<P.length;D++)R[D]=J(k,z,P[D]);return R}function n(k,z,P,R){return J(k,P?R?aa:X:R?X:L,z)}function y(k,z,P,R){return U(k,P?R?aa:X:R?X:L,z)}function C(k,z,P,R){return U(k,
P?R?aa:X:R?X:L,z)}function f(k,z,P){let [R,D]=P[0],h=Math.min(R,z[0]),c=Math.min(D,z[1]),B=Math.max(R,z[2]);z=Math.max(D,z[3]);for(let M=1;M<P.length;M++){const [Y,ba]=P[M];R+=Y;D+=ba;0>Y&&(h=Math.min(h,R));0<Y&&(B=Math.max(B,R));0>ba?c=Math.min(c,D):0<ba&&(z=Math.max(z,D))}k[0]=h;k[1]=c;k[2]=B;k[3]=z;return k}function E(k,z){if(!z.length)return null;k[0]=k[1]=Number.POSITIVE_INFINITY;k[2]=k[3]=Number.NEGATIVE_INFINITY;for(let P=0;P<z.length;P++)f(k,k,z[P]);return k}function q(k,z,P,R,D){z.xmin=A(k,
P.xmin);z.ymin=O(k,P.ymin);z.xmax=A(k,P.xmax);z.ymax=O(k,P.ymax);z!==P&&(R&&(z.zmin=P.zmin,z.zmax=P.zmax),D&&(z.mmin=P.mmin,z.mmax=P.mmax));return z}function H(k,z,P,R,D){z.points=u(k,P.points,R,D);return z}function v(k,z,P,R,D){z.x=A(k,P.x);z.y=O(k,P.y);z!==P&&(R&&(z.z=P.z),D&&(z.m=P.m));return z}function K(k,z,P,R,D){k=l(k,P.rings,R,D);if(!k)return null;z.rings=k;return z}function N(k,z,P,R,D){k=F(k,P.paths,R,D);if(!k)return null;z.paths=k;return z}const L=(k,z,P)=>[z,P],X=(k,z,P)=>[z,P,k[2]],aa=
(k,z,P)=>[z,P,k[2],k[3]];p.equals=function(k,z){if(k===z||null==k&&null==z)return!0;if(null==k||null==z)return!1;let P,R,D,h;k&&"upperLeft"===k.originPosition?(P=k.translate[0],R=k.translate[1],k=k.scale[0]):(P=k.extent.xmin,R=k.extent.ymax,k=k.tolerance);z&&"upperLeft"===z.originPosition?(D=z.translate[0],h=z.translate[1],z=z.scale[0]):(D=z.extent.xmin,h=z.extent.ymax,z=z.tolerance);return P===D&&R===h&&k===z};p.getQuantizedBoundsCoordsArray=f;p.getQuantizedBoundsCoordsArrayArray=E;p.getQuantizedBoundsPaths=
function(k){return E([0,0,0,0],k)};p.getQuantizedBoundsPoints=function(k){const z=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return f(z,z,k)};p.getQuantizedBoundsRings=function(k){return E([0,0,0,0],k)};p.quantizeBounds=function(k,z,P){z[0]=A(k,P[0]);z[3]=O(k,P[1]);z[2]=A(k,P[2]);z[1]=O(k,P[3]);return z};p.quantizeExtent=q;p.quantizeGeometry=function(k,z){return k&&z?e.isPoint(z)?v(k,{},z,!1,!1):e.isPolyline(z)?N(k,{},z,!1,!1):e.isPolygon(z)?
K(k,{},z,!1,!1):e.isMultipoint(z)?H(k,{},z,!1,!1):e.isExtent(z)?q(k,{},z,!1,!1):null:null};p.quantizeMultipoint=H;p.quantizePaths=F;p.quantizePoint=v;p.quantizePoints=u;p.quantizePolygon=K;p.quantizePolyline=N;p.quantizeRings=l;p.quantizeX=A;p.quantizeY=O;p.toQuantizationTransform=function(k){return k?{originPosition:"upper-left"===k.originPosition?"upperLeft":"lower-left"===k.originPosition?"lowerLeft":k.originPosition,scale:k.tolerance?[k.tolerance,k.tolerance]:[1,1],translate:k.extent?[k.extent.xmin,
k.extent.ymax]:[0,0]}:null};p.unquantizeBounds=function(k,z,P){return P?(z[0]=r(k,P[0]),z[1]=w(k,P[3]),z[2]=r(k,P[2]),z[3]=w(k,P[1]),z):[r(k,z[0]),w(k,z[3]),r(k,z[2]),w(k,z[1])]};p.unquantizeCoordsArray=J;p.unquantizeCoordsArrayArray=U;p.unquantizeExtent=function(k,z,P,R,D){z.xmin=r(k,P.xmin);z.ymin=w(k,P.ymin);z.xmax=r(k,P.xmax);z.ymax=w(k,P.ymax);z!==P&&(R&&(z.zmin=P.zmin,z.zmax=P.zmax),D&&(z.mmin=P.mmin,z.mmax=P.mmax));return z};p.unquantizeMultipoint=function(k,z,P,R,D){z.points=n(k,P.points,
R,D);return z};p.unquantizePaths=y;p.unquantizePoint=function(k,z,P,R,D){z.x=r(k,P.x);z.y=w(k,P.y);z!==P&&(R&&(z.z=P.z),D&&(z.m=P.m));return z};p.unquantizePoints=n;p.unquantizePolygon=function(k,z,P,R,D){z.rings=C(k,P.rings,R,D);return z};p.unquantizePolyline=function(k,z,P,R,D){z.paths=y(k,P.paths,R,D);return z};p.unquantizeRings=C;p.unquantizeX=r;p.unquantizeY=w;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/graphics/data/AttributesBuilder":function(){define(["../../../core/maybe",
"./attributeSupport","../../../smartMapping/statistics/support/utils"],function(p,e,A){return function(){function O(u,l,F){this._fieldDataCache=new Map;this._returnDistinctMap=new Map;this.returnDistinctValues=u.returnDistinctValues;this.fieldsIndex=F;this.featureAdapter=l;if((l=u.outFields)&&-1===l.indexOf("*")){this.outFields=l;u=0;for(const w of l){var r=e.getExpressionFromFieldName(w);r=(l=this.fieldsIndex.get(r))?null:e.getWhereClause(r,F);l=l?l.name:e.getAliasFromFieldName(w)||`FIELD_EXP_${u++}`;
this._fieldDataCache.set(w,{alias:l,clause:r})}}}var g=O.prototype;g.countDistinctValues=function(u){if(!this.returnDistinctValues)return u.length;u.forEach(l=>this.getAttributes(l));return this._returnDistinctMap.size};g.getAttributes=function(u){u=this._processAttributesForOutFields(u);return this._processAttributesForDistinctValues(u)};g.getFieldValue=function(u,l,F){const r=F?F.name:l;let w=null;this._fieldDataCache.has(r)?w=this._fieldDataCache.get(r).clause:F||(w=e.getWhereClause(l,this.fieldsIndex),
this._fieldDataCache.set(r,{alias:r,clause:w}));return F?this.featureAdapter.getAttribute(u,r):w.calculateValue(u,this.featureAdapter)};g.getNormalizedValue=function(u,l){const F=l.normalizationType,r=l.normalizationTotal;let w=this.getFieldValue(u,l.field,l.fieldInfo);F&&Number.isFinite(w)&&(u=this.getFieldValue(u,l.normalizationField,l.normalizationFieldInfo),w=A.getNormalizedValue(w,F,u,r));return w};g.getExpressionValue=function(u,l,F){u={attributes:this.featureAdapter.getAttributes(u)};u=F.createExecContext(u,
l.viewInfo);return F.executeFunction(l.compiledFunc,u)};g.validateItem=function(u,l){this._fieldDataCache.has(l)||this._fieldDataCache.set(l,{alias:l,clause:e.getWhereClause(l,this.fieldsIndex)});return this._fieldDataCache.get(l).clause.testFeature(u,this.featureAdapter)};g.validateItems=function(u,l){this._fieldDataCache.has(l)||this._fieldDataCache.set(l,{alias:l,clause:e.getWhereClause(l,this.fieldsIndex)});return this._fieldDataCache.get(l).clause.testSet(u,this.featureAdapter)};g._processAttributesForOutFields=
function(u){const l=this.outFields;if(!l||!l.length)return this.featureAdapter.getAttributes(u);const F={};for(const r of l){const {alias:w,clause:J}=this._fieldDataCache.get(r);F[w]=J?J.calculateValue(u,this.featureAdapter):this.featureAdapter.getAttribute(u,w)}return F};g._processAttributesForDistinctValues=function(u){if(p.isNone(u)||!this.returnDistinctValues)return u;var l=this.outFields,F=[];if(l)for(const w of l){var {alias:r}=this._fieldDataCache.get(w);F.push(u[r])}else for(r in u)F.push(u[r]);
l=`${(l||["*"]).join(",")}=${F.join(",")}`;F=this._returnDistinctMap.get(l)||0;this._returnDistinctMap.set(l,++F);return 1<F?null:u};return O}()})},"esri/smartMapping/statistics/support/utils":function(){define(["exports","../../../core/Error","../../../core/maybe","../../../layers/support/fieldUtils"],function(p,e,A,O){function g(r,w){return new e(r,w)}function u(r,w){r=A.isSome(r)?r:"";A.isSome(w)&&w&&(r=r?"("+r+") AND ("+w+")":w);return r}function l(r){const w=r.layer;return r.fields.filter(J=>
!w.getField(J))}function F(r){const w=r.layer;return r.fields.filter(J=>{J=w.getFieldUsageInfo(J);return!J||!J.supportsStatistics})}p.calculateStatistics=function(r){const {values:w,useSampleStdDev:J,supportsNullCount:U}=r;var n=Number.POSITIVE_INFINITY;let y=Number.NEGATIVE_INFINITY,C=null,f=null;var E=null;let q=null,H=0;const v=null==r.minValue?-Infinity:r.minValue;r=null==r.maxValue?Infinity:r.maxValue;for(const K of w)Number.isFinite(K)?K>=v&&K<=r&&(C+=K,n=Math.min(n,K),y=Math.max(y,K),H++):
"string"===typeof K&&H++;if(H&&null!=C){f=C/H;E=0;for(const K of w)Number.isFinite(K)&&K>=v&&K<=r&&(E+=(K-f)**2);q=J?1<H?E/(H-1):0:0<H?E/H:0;E=Math.sqrt(q)}else y=n=null;n={avg:f,count:H,max:y,min:n,stddev:E,sum:C,variance:q};U&&(n.nullcount=w.length-H);return n};p.calculateStringStatistics=function(r){const {values:w,supportsNullCount:J}=r;r=w.filter(n=>null!=n).length;const U={count:r};J&&(U.nullcount=w.length-r);return U};p.createError=g;p.getNormalizedValue=function(r,w,J,U){let n=null;switch(w){case "log":0!==
r&&(n=Math.log(r)*Math.LOG10E);break;case "percent-of-total":Number.isFinite(U)&&0!==U&&(n=r/U*100);break;case "field":Number.isFinite(J)&&0!==J&&(n=r/J);break;case "natural-log":0<r&&(n=Math.log(r));break;case "square-root":0<r&&(n=r**.5)}return n};p.getRangeExpr=function(r,w,J){w=null!=w?r+" \x3e\x3d "+w:"";r=null!=J?r+" \x3c\x3d "+J:"";J="";return(J=w&&r?u(w,r):w||r)?"("+J+")":""};p.getSQLFilterForNormalization=function(r){const w=r.field,J=r.normalizationType;r=r.normalizationField;let U;if("log"===
J)U="(NOT "+w+" \x3d 0)";else if("field"===J)U="(NOT "+r+" \x3d 0)";else if("natural-log"===J||"square-root"===J)U=`(${w} > 0)`;return U};p.isNullCountSupported=function(r){const w=null!=r.minValue||null!=r.maxValue,J=!!r.sqlExpression&&r.supportsSQLExpression;return!(null!=r.normalizationField||null!=r.normalizationType)&&!w&&!J};p.mergeWhereClauses=u;p.processStatsResult=function(r,w){if(!w)return r;["avg","stddev","variance"].forEach(J=>{null!=r[J]&&(r[J]=Math.ceil(r[J]))});return r};p.verifyBasicFieldValidity=
function(r,w,J){const U=l({layer:r,fields:w});if(U.length)return g(J,"Unknown fields: "+U.join(", ")+". You can only use fields defined in the layer schema");r=F({layer:r,fields:w});if(r.length)return g(J,"Unsupported fields: "+r.join(", ")+". You can only use fields that can be fetched i.e. AdapterFieldUsageInfo.supportsStatistics must be true")};p.verifyFieldType=function(r,w,J,U){let n=null;if(!w)n=g(J,"'field' is not defined in the layer schema");else if(w.name===r.objectIdField||-1===U.indexOf(w.type))n=
g(J,"'field' should be one of these types: "+U.join(","));return n};p.verifyNumericField=function(r,w,J){let U;w?w.name!==r.objectIdField&&O.isNumericField(w)||(U=g(J,"'field' should be one of these numeric types: "+O.numericTypes.join(","))):U=g(J,"'field' is not defined in the layer schema");return U};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/support/fieldUtils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../core/Error ../../core/maybe ../../core/object ./domains ../../support/arcadeOnDemand".split(" "),
function(p,e,A,O,g,u,l,F){function r(I,Q,Z){if(I)for(const da of I)(I=(I=u.getDeepValue(da,Q))&&"function"!==typeof I&&Z.get(I))&&u.setDeepValue(da,I.name,Q)}function w(I,Q){if(!I||!Q)return[];ta.clear();J(ta,I,Q);return Array.from(ta).sort()}function J(I,Q,Z){var da;if(Z)if(null!=Q&&null!=(da=Q.fields)&&da.length)if(Z.includes("*"))for(const {name:ja}of Q.fields)I.add(ja);else for(const ja of Z)U(I,Q,ja);else if(Z.includes("*"))I.clear(),I.add("*");else for(const ja of Z)I.add(ja)}function U(I,Q,
Z){"string"===typeof Z&&(Q?(Q=Q.get(Z))&&I.add(Q.name):I.add(Z))}function n(I,Q,Z){return y.apply(this,arguments)}function y(){y=A._asyncToGenerator(function*(I,Q,Z){if(Z){var {arcadeUtils:da}=yield F.loadArcade();Z=da.extractFieldNames(Z);for(const ja of Z)U(I,Q,ja)}});return y.apply(this,arguments)}function C(I,Q,Z){return f.apply(this,arguments)}function f(){f=A._asyncToGenerator(function*(I,Q,Z){if(Z&&"1\x3d1"!==Z){Z=(yield new Promise(function(da,ja){p(["../../core/sql/WhereClause"],da,ja)})).WhereClause.create(Z,
Q);if(!Z.isStandardized)throw new O("fieldUtils:collectFilterFields","Where clause is not standardized");J(I,Q,Z.fieldNames)}});return f.apply(this,arguments)}function E(I,Q){for(const Z of I)if(Z&&Z.valueType&&Z.valueType===Q)return Z.name;return null}function q(){q=A._asyncToGenerator(function*(I){if(!I)return[];const Q=new Set;yield H(Q,I);return Array.from(Q).sort()});return q.apply(this,arguments)}function H(I,Q){return v.apply(this,arguments)}function v(){v=A._asyncToGenerator(function*(I,Q){if(Q){var Z=
u.getDeepValue("elevationInfo.featureExpressionInfo",Q);if(Z)return Z.collectRequiredFields(I,Q.fieldsIndex)}});return v.apply(this,arguments)}function K(I,Q,Z){return N.apply(this,arguments)}function N(){N=A._asyncToGenerator(function*(I,Q,Z){Z.outStatistic.onStatisticValueExpression?n(I,Q,Z.outStatistic.onStatisticValueExpression):I.add(Z.outStatistic.onStatisticField)});return N.apply(this,arguments)}function L(){L=A._asyncToGenerator(function*(I,Q,Z){Q&&Z&&"cluster"===Z.type&&Z.fields&&(yield Promise.all(Z.fields.map(da=>
K(I,Q.fieldsIndex,da))))});return L.apply(this,arguments)}function X(){X=A._asyncToGenerator(function*(I,Q,Z){Q&&(Q.timeInfo&&g.isSome(Z)&&Z.timeExtent&&J(I,Q.fieldsIndex,[Q.timeInfo.startField,Q.timeInfo.endField]),Q.floorInfo&&J(I,Q.fieldsIndex,[Q.floorInfo.floorField]),g.isSome(Z)&&g.isSome(Z.where)&&(yield C(I,Q.fieldsIndex,Z.where)))});return X.apply(this,arguments)}function aa(){aa=A._asyncToGenerator(function*(I){if(!I)return[];const Q="timeInfo"in I&&I.timeInfo;return Q?w(I.fieldsIndex,[I.trackIdField,
Q.startField,Q.endField]):[]});return aa.apply(this,arguments)}function k(){k=A._asyncToGenerator(function*(I){if(!I)return[];const Q=new Set;yield z(Q,I);return Array.from(Q).sort()});return k.apply(this,arguments)}function z(I,Q){return P.apply(this,arguments)}function P(){P=A._asyncToGenerator(function*(I,Q){const {labelingInfo:Z,fieldsIndex:da}=Q;Z&&Z.length&&(yield Promise.all(Z.map(ja=>R(I,da,ja))))});return P.apply(this,arguments)}function R(I,Q,Z){return D.apply(this,arguments)}function D(){D=
A._asyncToGenerator(function*(I,Q,Z){if(Z){var da=Z.getLabelExpression();Z=Z.where;"arcade"===da.type?yield n(I,Q,da.expression):(da=da.expression.match(/{[^}]*}/g))&&da.forEach(ja=>{U(I,Q,ja.slice(1,-1))});yield C(I,Q,Z)}});return D.apply(this,arguments)}function h(I){return"number"===typeof I&&!isNaN(I)&&isFinite(I)}function c(I){return null===I||h(I)}function B(I){return null===I||va(I)}function M(I){return null!=I&&"string"===typeof I}function Y(I){return null===I||M(I)}function ba(){return!0}
function ia(I,Q){let Z;switch(I.type){case "date":case "integer":case "long":case "small-integer":case "esriFieldTypeDate":case "esriFieldTypeInteger":case "esriFieldTypeLong":case "esriFieldTypeSmallInteger":Z=I.nullable?B:va;break;case "double":case "single":case "esriFieldTypeSingle":case "esriFieldTypeDouble":Z=I.nullable?c:h;break;case "string":case "esriFieldTypeString":Z=I.nullable?Y:M;break;default:Z=ba}return 1===arguments.length?Z:Z(Q)}function ma(I){return null!=I&&t.has(I.type)}function qa(I,
Q){return I.nullable&&null===Q?null:ma(I)&&!wa(I.type,Number(Q))?e.NumericRangeValidationError.OUT_OF_RANGE:ia(I,Q)?I.domain?l.validateDomainValue(I.domain,Q):null:e.TypeValidationError.INVALID_TYPE}function wa(I,Q){return(I="string"===typeof I?Ca(I):I)?I.isInteger?va(Q)&&Q>=I.min&&Q<=I.max:Q>=I.min&&Q<=I.max:!1}function Ca(I){switch(I){case "esriFieldTypeSmallInteger":case "small-integer":return m;case "esriFieldTypeInteger":case "integer":return G;case "esriFieldTypeSingle":case "single":return V;
case "esriFieldTypeDouble":case "double":return W}}function Ka(I,Q,Z){if(!Q||!Q.attributes||!I){if(g.isSome(Z))for(var da of I)Z.add(da);return!0}Q=Q.attributes;da=!1;for(const ja of I)if(!(ja in Q))if(da=!0,g.isSome(Z))Z.add(ja);else break;return da}function Ha(){Ha=A._asyncToGenerator(function*(I,Q){const Z=new Set;for(const da of Q)yield n(Z,I.fieldsIndex,da);return Array.from(Z).sort()});return Ha.apply(this,arguments)}const Oa="field field2 field3 normalizationField rotationInfo.field proportionalSymbolInfo.field proportionalSymbolInfo.normalizationField colorInfo.field colorInfo.normalizationField".split(" "),
na=["field","normalizationField"],ta=new Set,va=(()=>"isInteger"in Number?Number.isInteger:I=>"number"===typeof I&&isFinite(I)&&Math.floor(I)===I)(),b=["integer","small-integer","single","double"],t=new Set([...b,"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);e.NumericRangeValidationError=void 0;(e.NumericRangeValidationError||(e.NumericRangeValidationError={})).OUT_OF_RANGE="numeric-range-validation-error::out-of-range";e.TypeValidationError=void 0;
(e.TypeValidationError||(e.TypeValidationError={})).INVALID_TYPE="type-validation-error::invalid-type";const m={min:-32768,max:32767,isInteger:!0},G={min:-2147483648,max:2147483647,isInteger:!0},V={min:-3.4E38,max:1.2E38,isInteger:!1},W={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};e.collectArcadeFieldNames=n;e.collectElevationFields=H;e.collectFeatureReductionFields=function(I,Q,Z){return L.apply(this,arguments)};e.collectField=U;e.collectFields=J;e.collectFilterFields=function(I,Q,Z){return X.apply(this,
arguments)};e.collectLabelingFields=z;e.doubleRange=W;e.featureHasFields=function(I,Q){return!Ka(I,Q,null)};e.fixFields=w;e.fixRendererFields=function(I,Q){if(null!=I&&null!=Q)for(const Z of Array.isArray(I)?I:[I])if(r(Oa,Z,Q),"visualVariables"in Z&&Z.visualVariables)for(const da of Z.visualVariables)r(na,da,Q)};e.fixTimeInfoFields=function(I,Q){if(null!=I&&null!=Q&&Q.fields.length)if("startField"in I){var Z=Q.get(I.startField);Q=Q.get(I.endField);I.startField=Z&&Z.name||null;I.endField=Q&&Q.name||
null}else Z=Q.get(I.startTimeField),Q=Q.get(I.endTimeField),I.startTimeField=Z&&Z.name||null,I.endTimeField=Q&&Q.name||null};e.getDisplayFieldName=function({displayField:I,fields:Q}){if(I)return I;if(!Q||!Q.length)return null;if(!(I=E(Q,"name-or-title")||E(Q,"unique-identifier")||E(Q,"type-or-category")))a:{for(const Z of Q)if(Z&&Z.name&&(Q=Z.name.toLowerCase(),-1<Q.indexOf("name")||-1<Q.indexOf("title"))){I=Z.name;break a}I=null}return I};e.getElevationFields=function(I){return q.apply(this,arguments)};
e.getExpressionFields=function(I,Q){return Ha.apply(this,arguments)};e.getFeatureEditFields=function(I){if(!I)return[];const Q="editFieldsInfo"in I&&I.editFieldsInfo;return Q?w(I.fieldsIndex,[Q&&Q.creatorField,Q&&Q.creationDateField,Q&&Q.editorField,Q&&Q.editDateField]):[]};e.getFeatureGeometryFields=function(I){if(!I)return[];const Q=I.geometryFieldsInfo;return Q?w(I.fieldsIndex,[Q.shapeAreaField,Q.shapeLengthField]):[]};e.getFieldDefaultValue=function(I){const Q=I.defaultValue;if(void 0!==Q&&ia(I,
Q))return Q;if(I.nullable)return null};e.getFieldRange=function(I){const Q=l.getDomainRange(I.domain);if(Q)return Q;if(ma(I))return Ca(I.type)};e.getLabelingFields=function(I){return k.apply(this,arguments)};e.getNumericTypeForValue=function(I){if(!h(I))return null;if(va(I)){if(I>=m.min&&I<=m.max)return"esriFieldTypeSmallInteger";if(I>=G.min&&I<=G.max)return"esriFieldTypeInteger"}return I>=V.min&&I<=V.max?"esriFieldTypeSingle":"esriFieldTypeDouble"};e.getTimeFields=function(I){return aa.apply(this,
arguments)};e.integerRange=G;e.isDateField=function(I){return null!=I&&("date"===I.type||"esriFieldTypeDate"===I.type)};e.isNumberInRange=wa;e.isNumericField=ma;e.isStringField=function(I){return null!=I&&("string"===I.type||"esriFieldTypeString"===I.type)};e.isValidFieldValue=function(I,Q){return null===qa(I,Q)};e.isValueMatchingFieldType=ia;e.numericTypes=b;e.packFields=function(I,Q,Z=1){if(!Q||!I)return[];if(Q.includes("*"))return["*"];Q=w(I,Q);return Q.length/I.fields.length>=Z?["*"]:Q};e.populateMissingFields=
Ka;e.rendererFields=Oa;e.sanitizeNullFieldValue=function(I){return null==I||"number"===typeof I&&isNaN(I)?null:I};e.singleRange=V;e.smallIntegerRange=m;e.unpackFieldNames=function(I,Q){return g.isNone(Q)||g.isNone(I)?[]:Q.includes("*")?I.fields.map(Z=>Z.name):Q};e.validateFieldValue=qa;e.validationErrorToString=function(I,Q,Z){switch(I){case l.DomainValidationError.INVALID_CODED_VALUE:return`Value ${Z} is not in the coded domain - field: ${Q.name}, domain: ${JSON.stringify(Q.domain)}`;case l.DomainValidationError.VALUE_OUT_OF_RANGE:return`Value ${Z} is out of the range of valid values - field: ${Q.name}, domain: ${JSON.stringify(Q.domain)}`;
case e.TypeValidationError.INVALID_TYPE:return`Value ${Z} is not a valid value for the field type - field: ${Q.name}, type: ${Q.type}, nullable: ${Q.nullable}`;case e.NumericRangeValidationError.OUT_OF_RANGE:{const {min:da,max:ja}=Ca(Q.type);return`Value ${Z} is out of range for the number type - field: ${Q.name}, type: ${Q.type}, value range is ${da} to ${ja}`}}};e.visualVariableFields=na;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/layers/support/domains":function(){define("exports ../../core/has ./CodedValueDomain ./Domain ./InheritedDomain ./RangeDomain".split(" "),
function(p,e,A,O,g,u){function l(F,r){switch(F.type){case "range":{const w="range"in F?F.range[1]:F.maxValue;if(+r<("range"in F?F.range[0]:F.minValue)||+r>w)return p.DomainValidationError.VALUE_OUT_OF_RANGE;break}case "coded-value":case "codedValue":if(null==F.codedValues||F.codedValues.every(w=>null==w||w.code!==r))return p.DomainValidationError.INVALID_CODED_VALUE}return null}p.DomainValidationError=void 0;(function(F){F.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range";F.INVALID_CODED_VALUE=
"domain-validation-error::invalid-coded-value"})(p.DomainValidationError||(p.DomainValidationError={}));e={key:"type",base:O,typeMap:{range:u,"coded-value":A,inherited:g}};p.CodedValueDomain=A;p.DomainBase=O;p.InheritedDomain=g;p.RangeDomain=u;p.fromJSON=function(F){if(!F||!F.type)return null;switch(F.type){case "range":return u.fromJSON(F);case "codedValue":return A.fromJSON(F);case "inherited":return g.fromJSON(F)}return null};p.getDomainRange=function(F){if(F&&"range"===F.type)return{min:"range"in
F?F.range[0]:F.minValue,max:"range"in F?F.range[1]:F.maxValue}};p.isValidDomainValue=function(F,r){return null===l(F,r)};p.types=e;p.validateDomainValue=l;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/support/CodedValueDomain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./CodedValue ./Domain".split(" "),
function(p,e,A,O,g,u,l,F,r,w,J){var U;g=U=function(n){function y(f){f=n.call(this,f)||this;f.codedValues=null;f.type="coded-value";return f}p._inheritsLoose(y,n);var C=y.prototype;C.getName=function(f){let E=null;if(this.codedValues){const q=String(f);this.codedValues.some(H=>{String(H.code)===q&&(E=H.name);return!!E})}return E};C.clone=function(){return new U({codedValues:A.clone(this.codedValues),name:this.name})};return y}(J);e.__decorate([O.property({type:[w["default"]],json:{write:!0}})],g.prototype,
"codedValues",void 0);e.__decorate([F.enumeration({codedValue:"coded-value"})],g.prototype,"type",void 0);return g=U=e.__decorate([r.subclass("esri.layers.support.CodedValueDomain")],g)})},"esri/core/accessorSupport/decorators/enumeration":function(){define(["exports","../../jsonMap","./property"],function(p,e,A){p.enumeration=function(O,g={}){var u;O=O instanceof e.JSONMap?O:new e.JSONMap(O,g);O={type:(null!=(u=null==g?void 0:g.ignoreUnknown)?u:1)?O.apiValues:String,readOnly:null==g?void 0:g.readOnly,
json:{type:O.jsonValues,read:null!=g&&g.readOnly?!1:{reader:O.read},write:{writer:O.write}}};void 0!==(null==g?void 0:g.default)&&(O.json.default=g.default);void 0!==(null==g?void 0:g.name)&&(O.json.name=g.name);return A.property(O)};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/support/CodedValue":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass".split(" "),
function(p,e,A,O,g,u,l,F,r,w){var J;p.CodedValue=J=function(U){function n(y){y=U.call(this,y)||this;y.name=null;y.code=null;return y}e._inheritsLoose(n,U);n.prototype.clone=function(){return new J({name:this.name,code:this.code})};return n}(O.JSONSupport);A.__decorate([g.property({type:String,json:{write:!0}})],p.CodedValue.prototype,"name",void 0);A.__decorate([g.property({type:[String,Number],json:{write:!0}})],p.CodedValue.prototype,"code",void 0);p.CodedValue=J=A.__decorate([w.subclass("esri.layers.support.CodedValue")],
p.CodedValue);p.default=p.CodedValue;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/support/Domain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass".split(" "),function(p,e,A,O,g,u,l,F,r,w){A=new A.JSONMap({inherited:"inherited",
codedValue:"coded-value",range:"range"});O=function(J){function U(n){n=J.call(this,n)||this;n.name=null;n.type=null;return n}p._inheritsLoose(U,J);return U}(O.JSONSupport);e.__decorate([g.property({type:String,json:{write:!0}})],O.prototype,"name",void 0);e.__decorate([r.enumeration(A)],O.prototype,"type",void 0);return O=e.__decorate([w.subclass("esri.layers.support.Domain")],O)})},"esri/layers/support/InheritedDomain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./Domain".split(" "),
function(p,e,A,O,g,u,l,F,r){var w;A=w=function(J){function U(n){n=J.call(this,n)||this;n.type="inherited";return n}p._inheritsLoose(U,J);U.prototype.clone=function(){return new w};return U}(r);e.__decorate([l.enumeration({inherited:"inherited"})],A.prototype,"type",void 0);return A=w=e.__decorate([F.subclass("esri.layers.support.InheritedDomain")],A)})},"esri/layers/support/RangeDomain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./Domain".split(" "),
function(p,e,A,O,g,u,l,F,r){var w;O=w=function(J){function U(n){n=J.call(this,n)||this;n.maxValue=null;n.minValue=null;n.type="range";return n}p._inheritsLoose(U,J);U.prototype.clone=function(){return new w({maxValue:this.maxValue,minValue:this.minValue,name:this.name})};return U}(r);e.__decorate([A.property({type:Number,json:{type:[Number],read:{source:"range",reader(J,U){return U.range&&U.range[1]}},write:{enabled:!1,overridePolicy(){return{enabled:null!=this.maxValue&&null==this.minValue}},target:"range",
writer(J,U,n){U[n]=[this.minValue||0,J]}}}})],O.prototype,"maxValue",void 0);e.__decorate([A.property({type:Number,json:{type:[Number],read:{source:"range",reader(J,U){return U.range&&U.range[0]}},write:{target:"range",writer(J,U,n){U[n]=[J,this.maxValue||0]}}}})],O.prototype,"minValue",void 0);e.__decorate([l.enumeration({range:"range"})],O.prototype,"type",void 0);return O=w=e.__decorate([F.subclass("esri.layers.support.RangeDomain")],O)})},"esri/support/arcadeOnDemand":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../geometry ../core/maybe ../geometry/SpatialReference".split(" "),
function(p,e,A,O,g,u){function l(){return F.apply(this,arguments)}function F(){F=A._asyncToGenerator(function*(){r||(r=A._asyncToGenerator(function*(){const J=yield new Promise(function(U,n){p(["./arcadeUtils"],U,n)});yield J.arcade.load();return{arcade:J.arcade,arcadeUtils:J,Dictionary:J.Dictionary,Feature:J.arcadeFeature}})());return r});return F.apply(this,arguments)}let r;O=(J,U,n)=>w.create(J,U,n,null,["$feature","$view"]);let w=function(){function J(n,y,C,f,E,q,H,v){this.script=n;this.evaluate=
E;this.fields=Array.isArray(H)?H:H.fields;this._syntaxTree=f;this._arcade=y;this._arcadeDictionary=C;this._arcadeFeature=q;this._spatialReference=v;this._referencesGeometry=y.scriptTouchesGeometry(this._syntaxTree);this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}J.create=function(){var n=A._asyncToGenerator(function*(y,C,f,E,q,H){const {arcade:v,Feature:K,Dictionary:N}=yield l(),L=u.fromJSON(C);C=v.parseScript(y,H);q=q.reduce((P,R)=>({...P,[R]:null}),{});let X=null;g.isSome(E)&&
(X=new N(E),X.immutable=!0,q.$config=null);E=v.scriptUsesGeometryEngine(C)&&v.enableGeometrySupport();H=v.scriptUsesFeatureSet(C)&&v.enableFeatureSetSupport();const aa=v.scriptIsAsync(C)&&v.enableAsyncSupport();q={vars:q,spatialReference:L,useAsync:!!aa};const k=new N;k.immutable=!1;k.setField("scale",0);const z=v.compileScript(C,q);yield Promise.all([E,H,aa]);return new J(y,v,N,C,P=>{"$view"in P&&P.$view&&(k.setField("scale",P.$view.scale),P.$view=k);X&&(P.$config=X);return z({vars:P,spatialReference:L})},
new K,f,L)});return function(y,C,f,E,q,H){return n.apply(this,arguments)}}();var U=J.prototype;U.repurposeFeature=function(n){n.geometry&&!n.geometry.spatialReference&&(n.geometry.spatialReference=this._spatialReference);this._arcadeFeature.repurposeFromGraphicLikeObject(n.geometry,n.attributes,{fields:this.fields});return this._arcadeFeature};U.repurposeAdapter=function(n){this._arcadeFeature.repurposeFromAdapter(n,{fields:this.fields});return this._arcadeFeature};U.createDictionary=function(){return new this._arcadeDictionary};
U.referencesMember=function(n){return this._arcade.referencesMember(this._syntaxTree,n)};U.referencesFunction=function(n){return this._arcade.referencesFunction(this._syntaxTree,n)};U.referencesGeometry=function(){return this._referencesGeometry};U.referencesScale=function(){return this._referencesScale};U.extractFieldLiterals=function(n){return this._arcade.extractFieldLiterals(this._syntaxTree,n)};return J}();e.ArcadeExpression=w;e.createDictionaryExpression=(J,U,n,y)=>w.create(J,U,n,y,["$feature",
"$view"]);e.createLabelExpression=(J,U,n)=>w.create(J,U,n,null,["$feature"]);e.createRendererExpression=O;e.createVVExpression=O;e.default=w;e.loadArcade=l;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/layers/graphics/data/timeSupport":function(){define(["exports"],function(p){function e(g,u,l,F,r){if(null!=F&&null!=r)return w=>{const J=g.getAttribute(w,u);w=g.getAttribute(w,l);return(null==J||J<=r)&&(null==w||w>=F)};if(null!=F)return w=>{w=g.getAttribute(w,l);return null==w||w>=F};if(null!=
r)return w=>{w=g.getAttribute(w,u);return null==w||w<=r}}function A(g,u,l,F){if(null!=l&&null!=F&&l===F)return r=>g.getAttribute(r,u)===l;if(null!=l&&null!=F)return r=>{r=g.getAttribute(r,u);return r>=l&&r<=F};if(null!=l)return r=>g.getAttribute(r,u)>=l;if(null!=F)return r=>g.getAttribute(r,u)<=F}function O(){return()=>!1}p.getTimeExtent=function(g,u){if(!g)return null;const l=u.featureAdapter,{startTimeField:F,endTimeField:r}=g;let w=Number.POSITIVE_INFINITY,J=Number.NEGATIVE_INFINITY;if(F&&r)u.forEach(U=>
{const n=l.getAttribute(U,F);U=l.getAttribute(U,r);null==n||isNaN(n)||(w=Math.min(w,n));null==U||isNaN(U)||(J=Math.max(J,U))});else{const U=F||r;u.forEach(n=>{n=l.getAttribute(n,U);null==n||isNaN(n)||(w=Math.min(w,n),J=Math.max(J,n))})}return{start:w,end:J}};p.getTimeOperator=function(g,u,l){if(!u||!g)return null;const {startTimeField:F,endTimeField:r}=g;if(!F&&!r)return null;const {start:w,end:J}=u;return null===w&&null===J?null:void 0===w&&void 0===J?O():F&&r?e(l,F,r,w,J):A(l,F||r,w,J)};Object.defineProperty(p,
"__esModule",{value:!0})})},"esri/layers/graphics/data/utils":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/jsonMap ../../../core/maybe ../../../core/unitUtils ../../../geometry/support/extentUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ../centroid ../featureConversionUtils ../OptimizedGeometry ./projectionSupport".split(" "),function(p,e,A,O,g,u,l,F,r,w,J,U,n,y){function C(h,
c,B,M=h.hasZ,Y=h.hasM){const ba=h.hasZ&&M,ia=h.hasM&&Y;return B?(h=U.quantizeOptimizedGeometry(P,c,h.hasZ,h.hasM,"esriGeometryPoint",B,M,Y),U.convertToPoint(h,ba,ia)):U.convertToPoint(c,ba,ia)}function f(){f=A._asyncToGenerator(function*(h,c,B){const {outFields:M,orderByFields:Y,groupByFieldsForStatistics:ba,outStatistics:ia}=h;if(M)for(var ma=0;ma<M.length;ma++)M[ma]=M[ma].trim();if(Y)for(ma=0;ma<Y.length;ma++)Y[ma]=Y[ma].trim();if(ba)for(ma=0;ma<ba.length;ma++)ba[ma]=ba[ma].trim();if(ia)for(ma=
0;ma<ia.length;ma++)ia[ma].onStatisticField&&(ia[ma].onStatisticField=ia[ma].onStatisticField.trim());h.geometry&&!h.outSR&&(h.outSR=h.geometry.spatialReference);return q(h,c,B)});return f.apply(this,arguments)}function E(){E=A._asyncToGenerator(function*(h,c,B){return q(h,c,B)});return E.apply(this,arguments)}function q(h,c,B){return H.apply(this,arguments)}function H(){H=A._asyncToGenerator(function*(h,c,B){if(!h)return null;var {where:M}=h;h.where=M=M&&M.trim();if(!M||/^1 *= *1$/.test(M)||c&&c===
M)h.where=null;if(!h.geometry)return h;c=yield v(h);h.distance=0;h.units=null;"esriSpatialRelEnvelopeIntersects"===h.spatialRel&&({spatialReference:M}=h.geometry,c=l.getGeometryExtent(c),c.spatialReference=M);h.geometry=c;yield y.checkProjectionSupport(c.spatialReference,B);c=(yield r.normalizeCentralMeridian(F.fromJSON(c)))[0];if(g.isNone(c))throw aa;c=c.toJSON();c=yield y.project(c,c.spatialReference,B);if(!c)throw aa;c.spatialReference=B;h.geometry=c;return h});return H.apply(this,arguments)}function v(h){return K.apply(this,
arguments)}function K(){K=A._asyncToGenerator(function*(h){const {geometry:c,distance:B,units:M}=h;if(null==B||"vertexAttributes"in c)return c;var Y=c.spatialReference;h=M?X.fromJSON(M):u.getUnitString(Y);Y=Y&&(w.isGeographic(Y)||w.isWebMercator(Y))?c:yield y.checkProjectionSupport(Y,w.WGS84).then(()=>y.project(c,w.WGS84));return(yield N())(Y.spatialReference,Y,B,h)});return K.apply(this,arguments)}function N(){return L.apply(this,arguments)}function L(){L=A._asyncToGenerator(function*(){return(yield new Promise(function(h,
c){p(["../../../geometry/geometryEngineJSON"],h,c)})).geodesicBuffer});return L.apply(this,arguments)}const X=new O.JSONMap({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),aa=Object.freeze({}),k=new n,z=new n,P=new n,R={esriGeometryPoint:U.convertToPoint,esriGeometryPolyline:U.convertToPolyline,esriGeometryPolygon:U.convertToPolygon,esriGeometryMultipoint:U.convertToMultipoint},
D=(h,c)=>"_geVersion"!==h?c:void 0;e.QUERY_ENGINE_EMPTY_RESULT=aa;e.cleanFromGeometryEngine=function(h){return h&&"_geVersion"in h?JSON.parse(JSON.stringify(h,D)):h};e.getCentroid=function(h,c,B){if("esriGeometryPolygon"!==h.geometryType||!c||!c.centroid&&!c.geometry)return null;c.centroid||(c.centroid=J.getCentroidOptimizedGeometry(new n,c.geometry,h.hasZ,h.hasM));return C(h,c.centroid,B)};e.getGeometry=function(h,c,B,M,Y,ba,ia=c,ma=B){const qa=c&&ia,wa=B&&ma;M=M?"coords"in M?M:M.geometry:null;if(!M)return null;
if(Y)return c=U.generalizeOptimizedGeometry(z,M,c,B,h,Y,ia,ma),ba&&(c=U.quantizeOptimizedGeometry(P,c,qa,wa,h,ba)),R[h](c,qa,wa);if(ba)return ba=U.quantizeOptimizedGeometry(P,M,c,B,h,ba,ia,ma),R[h](ba,qa,wa);U.removeZMValues(k,M,c,B,ia,ma);return R[h](k,qa,wa)};e.normalizeFilter=function(h,c,B){return E.apply(this,arguments)};e.normalizeQuery=function(h,c,B){return f.apply(this,arguments)};e.normalizeQueryLike=q;e.transformCentroid=C;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/layers/graphics/data/spatialQuerySupport":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../geometry/support/contains ../../../geometry/support/intersects ../../../geometry/support/jsonUtils ../../../geometry/support/spatialReferenceUtils ../contains ../featureConversionUtils ../OptimizedGeometry ./projectionSupport ./utils".split(" "),
function(p,e,A,O,g,u,l,F,r,w,J,U,n){function y(){return new Promise(function(q,H){p(["../../../geometry/geometryEngineJSON"],q,H)})}function C(){C=A._asyncToGenerator(function*(q,H,v){const {spatialRel:K,geometry:N}=q;if(N){if(!0!==E.spatialRelationship[K])throw new O("feature-store:unsupported-query","Unsupported query spatial relationship",{query:q});if(F.isValid(N.spatialReference)&&F.isValid(v)){if(!0!==E.queryGeometry[l.getJsonType(N)])throw new O("feature-store:unsupported-query","Unsupported query geometry type",
{query:q});if(!0!==E.layerGeometry[H])throw new O("feature-store:unsupported-query","Unsupported layer geometry type",{query:q});if(q.outSR)return U.checkProjectionSupport(q.geometry&&q.geometry.spatialReference,q.outSR)}}});return C.apply(this,arguments)}const f={esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"intersects",esriSpatialRelIndexIntersects:null,esriSpatialRelOverlaps:"overlaps",
esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:null},E={spatialRelationship:{esriSpatialRelIntersects:!0,esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},queryGeometry:{esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!0},
layerGeometry:{esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!1}};e.canQueryWithRBush=function(q){if(l.isExtent(q))return!0;if(l.isPolygon(q)){for(const H of q.rings)if(5!==H.length||H[0][0]!==H[1][0]||H[0][0]!==H[4][0]||H[2][0]!==H[3][0]||H[0][1]!==H[3][1]||H[0][1]!==H[4][1]||H[1][1]!==H[2][1])return!1;return!0}return!1};e.checkSpatialQuerySupport=function(q,H,v){return C.apply(this,arguments)};e.getSpatialQueryOperator=function(q,
H,v,K,N){if(l.isPolygon(H)&&"esriGeometryPoint"===v&&("esriSpatialRelIntersects"===q||"esriSpatialRelContains"===q)){const L=w.convertFromPolygon(new J,H,!1,!1);return Promise.resolve(X=>r.polygonContainsPoint(L,!1,!1,X))}if(l.isPolygon(H)&&"esriGeometryMultipoint"===v){const L=w.convertFromPolygon(new J,H,!1,!1);if("esriSpatialRelContains"===q)return Promise.resolve(X=>r.polygonContainsMultipoint(L,!1,!1,X,K,N))}if(l.isExtent(H)&&"esriGeometryPoint"===v&&("esriSpatialRelIntersects"===q||"esriSpatialRelContains"===
q))return Promise.resolve(L=>g.extentContainsPoint(H,n.getGeometry(v,K,N,L)));if(l.isExtent(H)&&"esriGeometryMultipoint"===v&&"esriSpatialRelContains"===q)return Promise.resolve(L=>g.extentContainsMultipoint(H,n.getGeometry(v,K,N,L)));if(l.isExtent(H)&&"esriSpatialRelIntersects"===q){const L=u.getExtentIntersector(v);return Promise.resolve(X=>L(H,n.getGeometry(v,K,N,X)))}return y().then(L=>{const X=L[f[q]].bind(null,H.spatialReference,H);return aa=>X(n.getGeometry(v,K,N,aa))})};Object.defineProperty(e,
"__esModule",{value:!0})})},"esri/geometry/support/intersects":function(){define(["exports","./intersectsBase"],function(p,e){p.extentIntersectsExtent=e.extentIntersectsExtent;p.extentIntersectsMultipoint=e.extentIntersectsMultipoint;p.extentIntersectsPoint=e.extentIntersectsPoint;p.extentIntersectsPolygon=e.extentIntersectsPolygon;p.extentIntersectsPolyline=e.extentIntersectsPolyline;p.getFeatureExtentIntersector=e.getFeatureExtentIntersector;p.isSelfIntersecting=e.isSelfIntersecting;p.segmentIntersects=
e.segmentIntersects;p.getExtentIntersector=function(A){return"mesh"===A?e.extentIntersectsExtent:e.getFeatureExtentIntersector(A)};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/graphics/contains":function(){define(["exports"],function(p){function e(A,O,g,u,l){if(!A)return!1;O=O?g?4:3:g?3:2;const {coords:F,lengths:r}=A;g=!1;A=0;for(const J of r){var w=A;for(let U=A,n=A+J*O;U<n;U+=O){w=U+O;w===n&&(w=A);const y=F[U],C=F[U+1],f=F[w];w=F[w+1];(C<l&&w>=l||w<l&&C>=l)&&y+(l-C)/(w-C)*(f-
y)<u&&(g=!g)}A+=J*O}return g}p.polygonContainsCoords=e;p.polygonContainsMultipoint=function(A,O,g,u,l,F){l=l?F?4:3:F?3:2;const {coords:r,lengths:w}=u;if(!w)return!1;for(let J=0,U=0;J<w.length;J++,U+=l)if(!e(A,O,g,r[U],r[U+1]))return!1;return!0};p.polygonContainsPoint=function(A,O,g,u){return e(A,O,g,u.coords[0],u.coords[1])};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/support/FieldsIndex":function(){define(function(){return function(){function p(A){this.fields=A;this._fieldsMap=
new Map;this._dateFieldsSet=new Set;this.dateFields=[];if(A){var O=[];for(const g of A)if(A=g&&g.name){const u=A.toLowerCase().trim();this._fieldsMap.set(A,g);this._fieldsMap.set(u,g);O.push(u);if("date"===g.type||"esriFieldTypeDate"===g.type)this.dateFields.push(g),this._dateFieldsSet.add(g)}O.sort();this.uid=O.join(",")}}var e=p.prototype;e.destroy=function(){this._fieldsMap.clear()};e.has=function(A){return null!=this.get(A)};e.get=function(A){return null!=A?this._fieldsMap.get(A)||this._fieldsMap.get(A.toLowerCase().trim()):
void 0};e.isDateField=function(A){return this._dateFieldsSet.has(this.get(A))};e.normalizeFieldName=function(A){if(A=this.get(A))return A.name};return p}()})},"esri/layers/support/PromiseQueue":function(){define(["../../chunks/_rollupPluginBabelHelpers","../../core/promiseUtils"],function(p,e){let A=function(O,g,u,l,F){this.resolve=O;this.reject=g;this.callback=u;this.signal=l;this.abortCallback=F};return function(){function O(){this._tasks=[]}var g=O.prototype;g.push=function(u,l,F){return new Promise((r,
w)=>this._tasks.push(new A(r,w,u,l,F)))};g.unshift=function(u,l,F){return new Promise((r,w)=>this._tasks.unshift(new A(r,w,u,l,F)))};g.process=function(){if(0===this._tasks.length)return!1;const u=this._tasks.shift();try{const l=e.isAborted(u.signal);if(l&&!u.abortCallback)u.reject(e.createAbortError());else{const F=l?u.abortCallback(e.createAbortError()):u.callback();e.isPromise(F)?F.then(u.resolve,u.reject):u.resolve(F)}}catch(l){u.reject(l)}return!0};g.cancelAll=function(){const u=e.createAbortError();
for(const l of this._tasks)if(l.abortCallback){const F=l.abortCallback(u);l.resolve(F)}else l.reject(u);this._tasks.length=0};p._createClass(O,[{key:"length",get:function(){return this._tasks.length}}]);return O}()})},"esri/smartMapping/support/utils":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../support/arcadeOnDemand","../../support/basemapUtils"],function(p,e,A,O){function g(){g=e._asyncToGenerator(function*(n){const y=n.field,C=n.normalizationField;n=n.valueExpression;
var f=[];n&&(U||({arcadeUtils:f}=yield A.loadArcade(),U=f),f=U.extractFieldNames(n));y&&f.push(y);C&&f.push(C);return f});return g.apply(this,arguments)}function u(n){return String(n).padStart(2,"0")}function l(n,y,C){if("date"===y||"number"===y){"number"===y&&(n=new Date(n));y=C?n.getFullYear():n.getUTCFullYear();const f=u((C?n.getMonth():n.getUTCMonth())+1),E=u(C?n.getDate():n.getUTCDate()),q=u(C?n.getHours():n.getUTCHours()),H=u(C?n.getMinutes():n.getUTCMinutes());n=u(C?n.getSeconds():n.getUTCSeconds());
n=`TIMESTAMP'${y}-${f}-${E} ${q}:${H}:${n}'`}return n}function F(n,y){if(y instanceof Date)return"date";if("number"===typeof y)return"number";if("string"===typeof y&&(n=n.getField(y),"\x3cnow\x3e"!==y.toLowerCase()&&n&&"date"===n.type))return"field"}const r={light:"streets gray topo terrain national-geographic oceans osm gray-vector streets-vector topo-vector streets-relief-vector streets-navigation-vector".split(" "),dark:["satellite","hybrid","dark-gray","dark-gray-vector","streets-night-vector"]},
w={years:365,months:30,days:1,hours:1/24,minutes:1/1440,seconds:1/86400,milliseconds:1/864E5},J=["integer","small-integer"];let U=null;p.castIntegerFieldToFloat=function(n){return`cast(${n} as float)`};p.defaultBasemapGroups=r;p.getBasemapGroup=function(n,y=r){for(const C in y)if(-1<y[C].indexOf(n))return C};p.getBasemapId=function(n,y,C=!0){let f=null;n&&("string"===typeof n?y.includes(n)&&(f=n):f=O.getWellKnownBasemapId(n));return C?f||"gray":f};p.getDateDiffSQL=function(n,y,C,f){var {hasQueryEngine:E}=
n;C=l(C,F(n,C),E);n=l(y,F(n,y),E);n=`(${C} - ${n})`;E&&(n=`(${n} * ${w.milliseconds})`);f=w[f];E="/";1>f&&(f=1/f,E="*");return{sqlExpression:1===f?n:`(${n} ${E} ${f})`,sqlWhere:null}};p.getDateType=F;p.getFieldsList=function(n){return g.apply(this,arguments)};p.getNormalizationType=function(n){let y=n.normalizationType;y||(n.normalizationField?y="field":null!=n.normalizationTotal&&(y="percent-of-total"));return y};p.isIntegerField=function(n,y){return(n=y&&n.getField(y))&&-1<J.indexOf(n.type)};p.unitValueInDays=
w;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/support/basemapUtils":function(){define("exports ../Basemap ../core/Collection ../core/Logger ../core/urlUtils ../core/accessorSupport/ensureType ./basemapDefinitions".split(" "),function(p,e,A,O,g,u,l){function F(L,X){var aa;let k;if("string"===typeof L){if(!(L in l.esriBasemapDefinitions))return X=Object.keys(l.esriBasemapDefinitions).map(z=>`"${z}"`).join(", "),K.warn(`Unable to find basemap definition for: ${L}. Try one of these: ${X}`),
null;X&&(k=X[L]);k||(k=e.fromId(L),X&&(X[L]=k))}else k=u.ensureType(e,L);null!=(aa=k)&&aa.destroyed&&(K.warn("The provided basemap is already destroyed",{basemap:k}),k=null);return k}function r(L,X){const aa=new A;L.forEach(k=>{const z=X.find(P=>H(y(k),y(P)))||k;aa.some(P=>P===z)?aa.push(k):aa.push(z)});return aa}function w(L){if(J(L.url))return!0;if("vector-tile"===L.type)for(const X in L.sourceNameToSource){const aa=L.sourceNameToSource[X];if(J(null==aa?void 0:aa.sourceUrl))return!0}return!1}function J(L){if(!L)return!1;
L=new g.Url(g.makeAbsolute(L));return N.test(L.authority)}function U(L){return L?!L.loaded&&L.resourceInfo?C(L.resourceInfo.data):{baseLayers:n(L.baseLayers),referenceLayers:n(L.referenceLayers)}:null}function n(L){return(A.isCollection(L)?L.toArray():L).map(y)}function y(L){return{type:L.type,url:v("urlTemplate"in L&&L.urlTemplate||L.url||"styleUrl"in L&&L.styleUrl),minScale:"minScale"in L&&null!=L.minScale?L.minScale:0,maxScale:"maxScale"in L&&null!=L.maxScale?L.maxScale:0,opacity:null!=L.opacity?
L.opacity:1,visible:null!=L.visible?!!L.visible:!0}}function C(L){return L?{baseLayers:f(L.baseMapLayers.filter(X=>!X.isReference)),referenceLayers:f(L.baseMapLayers.filter(X=>X.isReference))}:null}function f(L){return L.map(X=>{{let aa;switch(X.layerType){case "VectorTileLayer":aa="vector-tile";break;case "ArcGISTiledMapServiceLayer":aa="tile";break;default:aa="unknown"}X={type:aa,url:v(X.templateUrl||X.urlTemplate||X.styleUrl||X.url),minScale:null!=X.minScale?X.minScale:0,maxScale:null!=X.maxScale?
X.maxScale:0,opacity:null!=X.opacity?X.opacity:1,visible:null!=X.visibility?!!X.visibility:!0}}return X})}function E(L,X,aa){return null!=L!==(null!=X)?"not-equal":L?q(L.baseLayers,X.baseLayers)?q(L.referenceLayers,X.referenceLayers)?"equal":aa.mustMatchReferences?"not-equal":"base-layers-equal":"not-equal":"equal"}function q(L,X){if(L.length!==X.length)return!1;for(let aa=0;aa<L.length;aa++)if(!H(L[aa],X[aa]))return!1;return!0}function H(L,X){return L.type===X.type&&L.url===X.url&&L.minScale===X.minScale&&
L.maxScale===X.maxScale&&L.visible===X.visible&&L.opacity===X.opacity}function v(L){return L?g.normalize(L).replace(/^\s*https?:/i,"").toLowerCase():""}const K=O.getLogger("esri.support.basemapUtils"),N=/^(basemaps|ibasemaps).*-api\.arcgis\.com$/i;p.clonePreservingTiledLayers=function(L,X=null){L=F(L);if(!L)return null;const aa=new e({id:L.id,title:L.title,baseLayers:L.baseLayers.slice(),referenceLayers:L.referenceLayers.slice()});X&&(aa.baseLayers=r(aa.baseLayers,X.baseLayers),aa.referenceLayers=
r(aa.referenceLayers,X.referenceLayers));aa.load().catch(()=>{});aa.portalItem=L.portalItem;return aa};p.contentEquals=function(L,X){if(L===X)return!0;L=U(L);X=U(X);return"equal"===E(L,X,{mustMatchReferences:!0})};p.createCache=function(){return{}};p.destroyCache=function(L){for(const X in L){const aa=L[X];!1===(null==aa?void 0:aa.destroyed)&&aa.destroy();delete L[X]}};p.ensureType=F;p.getWellKnownBasemapId=function(L){let X=null;L=U(L);const aa=!L.baseLayers.length;for(const z in l.esriBasemapDefinitions){var k=
C(l.esriBasemapDefinitions[z]);k=E(L,k,{mustMatchReferences:aa});if("equal"===k){X=z;break}"base-layers-equal"===k&&(X=z)}return X};p.hasDeveloperBasemapLayer=function(L){return!(null==L||!L.baseLayers.concat(L.referenceLayers).some(w))};p.isDeveloperBasemapLayer=w;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/Basemap":function(){define("require ./chunks/_rollupPluginBabelHelpers ./chunks/tslib.es6 ./core/Collection ./core/collectionUtils ./core/JSONSupport ./core/lang ./core/Loadable ./core/loadAll ./core/Logger ./core/maybe ./core/promiseUtils ./core/urlUtils ./core/accessorSupport/decorators/property ./core/accessorSupport/ensureType ./core/has ./core/jsonMap ./core/accessorSupport/decorators/subclass ./core/accessorSupport/decorators/writer ./geometry/SpatialReference ./portal/Portal ./portal/PortalItem ./support/basemapDefinitions ./webdoc/support/writeUtils".split(" "),
function(p,e,A,O,g,u,l,F,r,w,J,U,n,y,C,f,E,q,H,v,K,N,L,X){var aa;let k=0;const z=w.getLogger("esri.Basemap");u=aa=function(P){function R(h){var c=P.call(this,h)||this;c.id=null;c.portalItem=null;c.spatialReference=null;c.thumbnailUrl=null;c.title="Basemap";c.id=Date.now().toString(16)+"-basemap-"+k++;c.baseLayers=new O;c.referenceLayers=new O;const B=M=>{M.parent&&M.parent!==e._assertThisInitialized(c)&&"remove"in M.parent&&M.parent.remove(M);M.parent=e._assertThisInitialized(c);"elevation"===M.type&&
z.error(`Layer '${M.title}, id:${M.id}' of type '${M.type}' is not supported as a basemap layer and will therefore be ignored.`)};c.baseLayers.on("after-add",M=>B(M.item));c.referenceLayers.on("after-add",M=>B(M.item));c.baseLayers.on("after-remove",M=>{M.item.parent=null});c.referenceLayers.on("after-remove",M=>{M.item.parent=null});return c}e._inheritsLoose(R,P);var D=R.prototype;D.initialize=function(){this.when().catch(h=>{z.error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,
h)});this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)};D.destroy=function(){var h,c=this.baseLayers.removeAll();for(const B of c)B.destroy();c=this.referenceLayers.removeAll();for(const B of c)B.destroy();this.baseLayers.destroy();this.referenceLayers.destroy();null==(h=this.portalItem)?void 0:h.destroy();this.portalItem=null};D.normalizeCtorArgs=function(h){h&&"resourceInfo"in h&&(this._set("resourceInfo",h.resourceInfo),h={...h},delete h.resourceInfo);return h};D._writeBaseLayers=
function(h,c,B){const M=[];h&&(B={...B,layerContainerType:"basemap"},this.baseLayers.forEach(Y=>{Y=X.getLayerJSON(Y,B.webmap?B.webmap.getLayerJSONFromResourceInfo(Y):null,B);J.isSome(Y)&&M.push(Y)}),this.referenceLayers.forEach(Y=>{Y=X.getLayerJSON(Y,B.webmap?B.webmap.getLayerJSONFromResourceInfo(Y):null,B);J.isSome(Y)&&(Y.isReference=!0,M.push(Y))}));c.baseMapLayers=M};D.writeTitle=function(h,c){c.title=h||"Basemap"};D.load=function(h){this.addResolvingPromise(this._loadFromSource(h));return Promise.resolve(this)};
D.loadAll=function(){return r.loadAll(this,h=>{h(this.baseLayers,this.referenceLayers)})};D.clone=function(){const h={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.slice(),referenceLayers:this.referenceLayers.slice()};this.loaded&&(h.loadStatus="loaded");return(new aa({resourceInfo:this.resourceInfo})).set(h)};D.read=function(h,c){this.resourceInfo||this._set("resourceInfo",{data:h,context:c});P.prototype.read.call(this,h,c)};D.write=function(h,c){h=h||{};c&&c.origin||
(c={origin:"web-map",...c});P.prototype.write.call(this,h,c);!this.loaded&&this.resourceInfo&&this.resourceInfo.data.baseMapLayers&&(h.baseMapLayers=this.resourceInfo.data.baseMapLayers.map(B=>{B=l.clone(B);B.url&&n.isProtocolRelative(B.url)&&(B.url=`https:${B.url}`);B.templateUrl&&n.isProtocolRelative(B.templateUrl)&&(B.templateUrl=`https:${B.templateUrl}`);return B}));return h};D._loadFromSource=function(){var h=e._asyncToGenerator(function*(c){const {resourceInfo:B,portalItem:M}=this;U.throwIfAborted(c);
const Y=[];B?(Y.push(this._loadLayersFromJSON(B.data,B.context?B.context.url:null,c)),B.data.id&&!B.data.title&&Y.push(L.getBasemapTitle(B.data.id).then(ba=>{ba&&this.read({title:ba},B.context)}))):M&&Y.push(this._loadFromItem(M,c));yield Promise.all(Y)});return function(c){return h.apply(this,arguments)}}();D._loadLayersFromJSON=function(){var h=e._asyncToGenerator(function*(c,B,M){var Y=this.resourceInfo&&this.resourceInfo.context;const ba=this.portalItem&&this.portalItem.portal||Y&&Y.portal||null,
ia=Y&&"web-scene"===Y.origin?"web-scene":"web-map",{populateOperationalLayers:ma}=yield new Promise(function(qa,wa){p(["./layers/support/layersCreator"],qa,wa)});Y=[];U.throwIfAborted(M);c.baseMapLayers&&Array.isArray(c.baseMapLayers)&&(B={context:{origin:ia,url:B,portal:ba,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"},M=ma(this.baseLayers,c.baseMapLayers.filter(qa=>!qa.isReference),B),Y.push(M),c=ma(this.referenceLayers,c.baseMapLayers.filter(qa=>qa.isReference),B),Y.push(c));
yield U.eachAlways(Y)});return function(c,B,M){return h.apply(this,arguments)}}();D._loadFromItem=function(){var h=e._asyncToGenerator(function*(c,B){const M=yield(yield c.load(B)).fetchData("json",B),Y=n.urlToObject(c.itemUrl);this._set("resourceInfo",{data:M.baseMap,context:{origin:"web-map",portal:c.portal||K.getDefault(),url:Y}});this.read(this.resourceInfo.data,this.resourceInfo.context);this.read({spatialReference:M.spatialReference},this.resourceInfo.context);this.read({title:c.title,thumbnailUrl:c.thumbnailUrl},
{origin:"portal-item",portal:c.portal||K.getDefault(),url:Y});return this._loadLayersFromJSON(this.resourceInfo.data,Y,B)});return function(c,B){return h.apply(this,arguments)}}();R.fromId=function(h){return(h=L.esriBasemapDefinitions[h])?aa.fromJSON(h):null};e._createClass(R,[{key:"baseLayers",set:function(h){this._set("baseLayers",g.referenceSetter(h,this._get("baseLayers")))}},{key:"referenceLayers",set:function(h){this._set("referenceLayers",g.referenceSetter(h,this._get("referenceLayers")))}}]);
return R}(u.JSONSupportMixin(F));A.__decorate([y.property({json:{write:{ignoreOrigin:!0,target:"baseMapLayers",writer(P,R,D,h){this._writeBaseLayers(P,R,h)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:O}},writer(P,R,D,h){this._writeBaseLayers(P,R,h)}}}}}})],u.prototype,"baseLayers",null);A.__decorate([y.property({type:String,json:{origins:{"web-scene":{write:!0}}}})],u.prototype,"id",void 0);A.__decorate([y.property({type:N})],u.prototype,"portalItem",void 0);A.__decorate([y.property()],
u.prototype,"referenceLayers",null);A.__decorate([y.property({readOnly:!0})],u.prototype,"resourceInfo",void 0);A.__decorate([y.property({type:v})],u.prototype,"spatialReference",void 0);A.__decorate([y.property()],u.prototype,"thumbnailUrl",void 0);A.__decorate([y.property({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],u.prototype,"title",void 0);A.__decorate([H.writer("title")],u.prototype,"writeTitle",null);return u=aa=A.__decorate([q.subclass("esri.Basemap")],u)})},"esri/core/Collection":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./ArrayPool ./Evented ./lang ./maybe ./ObjectPool ./scheduling ./accessorSupport/ensureType ./accessorSupport/tracking ./accessorSupport/decorators/property ./accessorSupport/decorators/subclass ./accessorSupport/tracking/SimpleObservable".split(" "),
function(p,e,A,O,g,u,l,F,r,w,J,U,n){function y(z){return z?z instanceof k?z.toArray():z.length?Array.prototype.slice.apply(z):[]:[]}function C(z){if(z&&z.length)return z[0]}function f(z,P,R,D){P&&P.forEach((h,c,B)=>{z.push(h);f(z,R.call(D,h,c,B),R,D)})}var E;let q=function(){function z(){this.target=null;this.defaultPrevented=this.cancellable=!1;this.type=this.item=void 0}var P=z.prototype;P.preventDefault=function(){this.cancellable&&(this.defaultPrevented=!0)};P.reset=function(R){this.defaultPrevented=
!1;this.item=R};return z}();const H=new l(q,void 0,z=>{z.item=null;z.target=null;z.defaultPrevented=!1;z.cancellable=!1}),v=()=>{},K=new Set,N=new Set,L=new Set,X=new Map;let aa=0,k=E=function(z){function P(D){D=z.call(this,D)||this;D._chgListeners=[];D._notifications=null;D._timer=null;D._observable=new n.SimpleObservable;D.length=0;D._items=[];Object.defineProperty(p._assertThisInitialized(D),"uid",{value:aa++});return D}p._inheritsLoose(P,z);P.isCollection=function(D){return null!=D&&D instanceof
E};var R=P.prototype;R.normalizeCtorArgs=function(D){return D?Array.isArray(D)||D instanceof E?{items:D}:D:{}};R[Symbol.iterator]=function*(){yield*this.items};R.hasEventListener=function(D){return"change"===D?0<this._chgListeners.length:this._emitter.hasEventListener(D)};R.on=function(D,h){if("change"===D){const c=this._chgListeners,B={removed:!1,callback:h};c.push(B);this._notifications&&this._notifications.push({listeners:c.slice(),items:this._items.slice(),changes:[]});return{remove(){this.remove=
v;B.removed=!0;c.splice(c.indexOf(B),1)}}}return this._emitter.on(D,h)};R.once=function(D,h){const c=this.on(D,h);return{remove(){c.remove()}}};R.add=function(D,h){w.trackAccess(this._observable);if(this._emitBeforeChanges(1))return this;h=this.getNextIndex(null!=h?h:null);this._splice(h,0,D);this._emitAfterChanges(1);return this};R.addMany=function(D,h=this._items.length){w.trackAccess(this._observable);if(!D||!D.length||this._emitBeforeChanges(1))return this;h=this.getNextIndex(h);this._splice(h,
0,...y(D));this._emitAfterChanges(1);return this};R.removeAll=function(){w.trackAccess(this._observable);if(!this.length||this._emitBeforeChanges(2))return[];const D=this._splice(0,this.length)||[];this._emitAfterChanges(2);return D};R.clone=function(){w.trackAccess(this._observable);return this._createNewInstance({items:this._items.map(g.clone)})};R.concat=function(...D){w.trackAccess(this._observable);D=D.map(y);return this._createNewInstance({items:this._items.concat(...D)})};R.drain=function(D,
h){w.trackAccess(this._observable);if(this.length&&!this._emitBeforeChanges(2)){var c=u.assumeNonNull(this._splice(0,this.length)),B=c.length;for(let M=0;M<B;M++)D.call(h,c[M],M,c);this._emitAfterChanges(2)}};R.every=function(D,h){w.trackAccess(this._observable);return this._items.every(D,h)};R.filter=function(D,h){w.trackAccess(this._observable);let c;c=2===arguments.length?this._items.filter(D,h):this._items.filter(D);return this._createNewInstance({items:c})};R.find=function(D,h){w.trackAccess(this._observable);
return this._items.find(D,h)};R.findIndex=function(D,h){w.trackAccess(this._observable);return this._items.findIndex(D,h)};R.flatten=function(D,h){w.trackAccess(this._observable);const c=[];f(c,this,D,h);return new E(c)};R.forEach=function(D,h){w.trackAccess(this._observable);return this._items.forEach(D,h)};R.getItemAt=function(D){w.trackAccess(this._observable);return this._items[D]};R.getNextIndex=function(D){w.trackAccess(this._observable);const h=this.length;D=null==D?h:D;0>D?D=0:D>h&&(D=h);
return D};R.includes=function(D,h=0){w.trackAccess(this._observable);return this._items.includes(D,h)};R.indexOf=function(D,h=0){w.trackAccess(this._observable);return this._items.indexOf(D,h)};R.join=function(D=","){w.trackAccess(this._observable);return this._items.join(D)};R.lastIndexOf=function(D,h=this.length-1){w.trackAccess(this._observable);return this._items.lastIndexOf(D,h)};R.map=function(D,h){w.trackAccess(this._observable);D=this._items.map(D,h);return new E({items:D})};R.reorder=function(D,
h=this.length-1){w.trackAccess(this._observable);const c=this.indexOf(D);if(-1!==c){0>h?h=0:h>=this.length&&(h=this.length-1);if(c!==h){if(this._emitBeforeChanges(4))return D;this._splice(c,1);this._splice(h,0,D);this._emitAfterChanges(4)}return D}};R.pop=function(){w.trackAccess(this._observable);if(this.length&&!this._emitBeforeChanges(2)){var D=C(this._splice(this.length-1,1));this._emitAfterChanges(2);return D}};R.push=function(...D){w.trackAccess(this._observable);if(this._emitBeforeChanges(1))return this.length;
this._splice(this.length,0,...D);this._emitAfterChanges(1);return this.length};R.reduce=function(D,h){w.trackAccess(this._observable);const c=this._items;return 2===arguments.length?c.reduce(D,h):c.reduce(D)};R.reduceRight=function(D,h){w.trackAccess(this._observable);const c=this._items;return 2===arguments.length?c.reduceRight(D,h):c.reduceRight(D)};R.remove=function(D){w.trackAccess(this._observable);return this.removeAt(this.indexOf(D))};R.removeAt=function(D){w.trackAccess(this._observable);
if(!(0>D||D>=this.length||this._emitBeforeChanges(2)))return D=C(this._splice(D,1)),this._emitAfterChanges(2),D};R.removeMany=function(D){w.trackAccess(this._observable);if(!D||!D.length||this._emitBeforeChanges(2))return[];D=D instanceof E?D.toArray():D;const h=this._items,c=[],B=D.length;for(let ia=0;ia<B;ia++){var M=h.indexOf(D[ia]);if(-1<M){{var Y=ia+1;var ba=M+1;const ma=Math.min(D.length-Y,h.length-ba);let qa=0;for(;qa<ma&&D[Y+qa]===h[ba+qa];)qa++;Y=qa}Y=1+Y;(M=this._splice(M,Y))&&0<M.length&&
c.push.apply(c,M);ia+=Y-1}}this._emitAfterChanges(2);return c};R.reverse=function(){w.trackAccess(this._observable);if(this._emitBeforeChanges(4))return this;const D=this._splice(0,this.length);D&&(D.reverse(),this._splice(0,0,...D));this._emitAfterChanges(4);return this};R.shift=function(){w.trackAccess(this._observable);if(this.length&&!this._emitBeforeChanges(2)){var D=C(this._splice(0,1));this._emitAfterChanges(2);return D}};R.slice=function(D=0,h=this.length){w.trackAccess(this._observable);
return this._createNewInstance({items:this._items.slice(D,h)})};R.some=function(D,h){w.trackAccess(this._observable);return this._items.some(D,h)};R.sort=function(D){w.trackAccess(this._observable);if(!this.length||this._emitBeforeChanges(4))return this;const h=u.assumeNonNull(this._splice(0,this.length));arguments.length?h.sort(D):h.sort();this._splice(0,0,...h);this._emitAfterChanges(4);return this};R.splice=function(D,h,...c){w.trackAccess(this._observable);const B=(h?2:0)|(c.length?1:0);if(this._emitBeforeChanges(B))return[];
D=this._splice(D,h,...c)||[];this._emitAfterChanges(B);return D};R.toArray=function(){w.trackAccess(this._observable);return this._items.slice()};R.toJSON=function(){w.trackAccess(this._observable);return this.toArray()};R.toLocaleString=function(){w.trackAccess(this._observable);return this._items.toLocaleString()};R.toString=function(){w.trackAccess(this._observable);return this._items.toString()};R.unshift=function(...D){w.trackAccess(this._observable);if(!D.length||this._emitBeforeChanges(1))return this.length;
this._splice(0,0,...D);this._emitAfterChanges(1);return this.length};R._createNewInstance=function(D){return new this.constructor(D)};R._splice=function(D,h,...c){const B=this._items;var M=this.constructor.prototype.itemType;let Y=void 0;!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=F.schedule(()=>this._dispatchChange()));if(h){Y=B.splice(D,h);if(this.hasEventListener("before-remove")){var ba=
H.acquire();ba.target=this;ba.cancellable=!0;for(let qa=0,wa=Y.length;qa<wa;qa++)h=Y[qa],ba.reset(h),this.emit("before-remove",ba),ba.defaultPrevented&&(Y.splice(qa,1),B.splice(D,0,h),D+=1,--qa,--wa);H.release(ba)}this.length=this._items.length;if(this.hasEventListener("after-remove")){h=H.acquire();h.target=this;h.cancellable=!1;ba=Y.length;for(let qa=0;qa<ba;qa++)h.reset(Y[qa]),this.emit("after-remove",h);H.release(h)}}if(c&&c.length){if(M){h=[];for(var ia of c)c=M.ensureType(ia),null==c&&null!=
ia||h.push(c);c=h}M=this.hasEventListener("before-add");ia=this.hasEventListener("after-add");h=D===this.length;if(M||ia){var ma=H.acquire();ma.target=this;ma.cancellable=!0;ba=H.acquire();ba.target=this;ba.cancellable=!1;for(const qa of c)M?(ma.reset(qa),this.emit("before-add",ma),ma.defaultPrevented||(h?B.push(qa):B.splice(D++,0,qa),this._set("length",B.length),ia&&(ba.reset(qa),this.emit("after-add",ba)))):(h?B.push(qa):B.splice(D++,0,qa),this._set("length",B.length),ba.reset(qa),this.emit("after-add",
ba));H.release(ba);H.release(ma)}else{if(h)for(ma of c)B.push(ma);else B.splice(D,0,...c);this._set("length",B.length)}}(c&&c.length||Y&&Y.length)&&this._notifyChangeEvent(c,Y);return Y};R._emitBeforeChanges=function(D){let h=!1;if(this.hasEventListener("before-changes")){const c=H.acquire();c.target=this;c.cancellable=!0;c.type=D;this.emit("before-changes",c);h=c.defaultPrevented;H.release(c)}return h};R._emitAfterChanges=function(D){if(this.hasEventListener("after-changes")){const h=H.acquire();
h.target=this;h.cancellable=!1;h.type=D;this.emit("after-changes",h);H.release(h)}this._observable.notify()};R._notifyChangeEvent=function(D,h){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:D,removed:h})};R._dispatchChange=function(){this._timer&&(this._timer.remove(),this._timer=null);if(this._notifications){var D=this._notifications;this._notifications=null;for(const h of D){D=h.changes;K.clear();N.clear();L.clear();for(const {added:ia,
removed:ma}of D){if(ia)if(0===L.size&&0===N.size)for(const qa of ia)K.add(qa);else for(const qa of ia)N.has(qa)?(L.add(qa),N.delete(qa)):L.has(qa)||K.add(qa);if(ma)if(0===L.size&&0===K.size)for(const qa of ma)N.add(qa);else for(const qa of ma)K.has(qa)?K.delete(qa):(L.delete(qa),N.add(qa))}const c=A.acquire();K.forEach(ia=>{c.push(ia)});const B=A.acquire();N.forEach(ia=>{B.push(ia)});const M=this._items,Y=h.items,ba=A.acquire();L.forEach(ia=>{Y.indexOf(ia)!==M.indexOf(ia)&&ba.push(ia)});if(h.listeners&&
(c.length||B.length||ba.length)){D={target:this,added:c,removed:B,moved:ba};const ia=h.listeners.length;for(let ma=0;ma<ia;ma++){const qa=h.listeners[ma];qa.removed||qa.callback.call(this,D)}}A.release(c);A.release(B);A.release(ba)}K.clear();N.clear();L.clear()}};p._createClass(P,[{key:"items",get:function(){w.trackAccess(this._observable);return this._items},set:function(D){this._emitBeforeChanges(1)||(this._splice(0,this.length,...y(D)),this._emitAfterChanges(1))}}]);return P}(O.EventedAccessor);
k.ofType=z=>{if(!z)return E;if(X.has(z))return X.get(z);var P=null;if("function"===typeof z)P=z.prototype.declaredClass;else if(z.base)P=z.base.prototype.declaredClass;else for(var R in z.typeMap){const D=z.typeMap[R].prototype.declaredClass;P=P?P+` | ${D}`:D}R=function(D){function h(){return D.apply(this,arguments)||this}p._inheritsLoose(h,D);return h}(E);R=e.__decorate([U.subclass(`esri.core.Collection<${P}>`)],R);P={Type:z,ensureType:"function"===typeof z?r.ensureType(z):r.ensureOneOfType(z)};
Object.defineProperty(R.prototype,"itemType",{value:P});X.set(z,R);return R};e.__decorate([J.property()],k.prototype,"length",void 0);e.__decorate([J.property()],k.prototype,"items",null);return k=E=e.__decorate([U.subclass("esri.core.Collection")],k)})},"esri/core/accessorSupport/tracking/SimpleObservable":function(){define(["exports","./ObservationHandle"],function(p,e){let A=function(){function O(){this._observers=[]}var g=O.prototype;g.observe=function(u){this._observers.includes(u)||this._observers.push(u);
return new e.ObservationHandle(this._observers,u)};g.notify=function(){const u=this._observers.slice();for(let l=0;l<u.length;++l){const F=u[l];F.onInvalidated();F.onCommitted()}};return O}();p.SimpleObservable=A;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/core/collectionUtils":function(){define(["exports","./Collection"],function(p,e){p.castForReferenceSetter=function(A){return A};p.referenceSetter=function(A,O,g=e){O||(O=new g);if(O===A)return O;O.removeAll();A&&(Array.isArray(A)||
"items"in A&&Array.isArray(A.items))?O.addMany(A):A&&O.add(A);return O};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/core/Loadable":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./Error ./Promise ./promiseUtils ./Warning ./accessorSupport/decorators/property ./accessorSupport/decorators/subclass".split(" "),function(p,e,A,O,g,u,l,F){const r=w=>{w=function(J){function U(...y){var C=J.call(this,...y)||this;C._loadController=null;C.loadError=null;C.loadStatus=
"not-loaded";C._set("loadWarnings",[]);C.addResolvingPromise(new Promise(f=>{const E=C.load.bind(p._assertThisInitialized(C));C.load=q=>{const H=new Promise((v,K)=>{const N=g.onAbortOrThrow(q,K);C.destroyed&&K(new A("load:instance-destroyed",`Instance of '${C.declaredClass||C.constructor.name}' is already destroyed`,{instance:p._assertThisInitialized(C)}));C._promiseProps.when(v,K).finally(()=>{N&&N.remove()})});if("not-loaded"===C.loadStatus){C._set("loadStatus","loading");const v=C._loadController=
g.createAbortController();E({signal:v.signal});g.onAbort(v.signal,()=>{C._promiseProps.abort()})}f();return H}}));C.when(()=>{C._set("loadStatus","loaded");C._loadController=null},f=>{C._set("loadStatus","failed");C._set("loadError",f);C._loadController=null});return C}p._inheritsLoose(U,J);var n=U.prototype;n.load=function(){return null};n.cancelLoad=function(){var y;if(this.isFulfilled())return this;this._set("loadError",new A("load:cancelled","Cancelled"));null==(y=this._loadController)?void 0:
y.abort();return this};p._createClass(U,[{key:"loaded",get:function(){return"loaded"===this.loadStatus}},{key:"loadWarnings",get:function(){return this._get("loadWarnings")}}]);return U}(w);e.__decorate([l.property({readOnly:!0})],w.prototype,"loaded",null);e.__decorate([l.property({readOnly:!0})],w.prototype,"loadError",void 0);e.__decorate([l.property()],w.prototype,"loadStatus",void 0);e.__decorate([l.property({type:[u],readOnly:!0})],w.prototype,"loadWarnings",null);return w=e.__decorate([F.subclass("esri.core.Loadable")],
w)};O=function(w){function J(){return w.apply(this,arguments)||this}p._inheritsLoose(J,w);return J}(r(O.EsriPromise));O=e.__decorate([F.subclass("esri.core.Loadable")],O);(function(w){w.LoadableMixin=r;w.isLoadable=function(J){return!(!J||!J.load)}})(O||(O={}));return O})},"esri/core/Promise":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./Accessor ./maybe ./promiseUtils ./accessorSupport/decorators/subclass".split(" "),function(p,e,A,O,g,u,l){let F=function(){function w(U){this.instance=
U;this._resolver=u.createDeferred();this._status=0;this._resolvingPromises=[];this._resolver.promise.then(()=>{this._status=1;this._cleanUp()},()=>{this._status=2;this._cleanUp()})}var J=w.prototype;J.addResolvingPromise=function(U){this._resolvingPromises.push(U);this._tryResolve()};J.isResolved=function(){return 1===this._status};J.isRejected=function(){return 2===this._status};J.isFulfilled=function(){return 0!==this._status};J.abort=function(){this._resolver.reject(u.createAbortError())};J.when=
function(U,n){return this._resolver.promise.then(U,n)};J._cleanUp=function(){this._allPromise=this._resolvingPromises=this._allPromise=null};J._tryResolve=function(){if(!this.isFulfilled()){var U=u.createDeferred(),n=[...this._resolvingPromises,g.assumeNonNull(U.promise)],y=this._allPromise=Promise.all(n);y.then(()=>{this.isFulfilled()||this._allPromise!==y||this._resolver.resolve(this.instance)},C=>{this.isFulfilled()||this._allPromise!==y||u.isAbortError(C)||this._resolver.reject(C)});U.resolve()}};
return w}();const r=w=>{w=function(J){function U(...y){y=J.call(this,...y)||this;y._promiseProps=new F(e._assertThisInitialized(y));y.addResolvingPromise(Promise.resolve());return y}e._inheritsLoose(U,J);var n=U.prototype;n.isResolved=function(){return this._promiseProps.isResolved()};n.isRejected=function(){return this._promiseProps.isRejected()};n.isFulfilled=function(){return this._promiseProps.isFulfilled()};n.when=function(y,C){return(new Promise((f,E)=>{this._promiseProps.when(f,E)})).then(y,
C)};n.catch=function(y){return this.when(null,y)};n.addResolvingPromise=function(y){y&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in y?y.when():y)};return U}(w);return w=A.__decorate([l.subclass("esri.core.Promise")],w)};p.EsriPromise=function(w){function J(){return w.apply(this,arguments)||this}e._inheritsLoose(J,w);return J}(r(O));p.EsriPromise=A.__decorate([l.subclass("esri.core.Promise")],p.EsriPromise);p.EsriPromiseMixin=r;Object.defineProperty(p,
"__esModule",{value:!0})})},"esri/core/loadAll":function(){define("exports ../chunks/_rollupPluginBabelHelpers ./asyncUtils ./Collection ./Loadable ./maybe".split(" "),function(p,e,A,O,g,u){function l(J,U){return F.apply(this,arguments)}function F(){F=e._asyncToGenerator(function*(J,U){yield J.load();return r(J,U)});return F.apply(this,arguments)}function r(J,U){return w.apply(this,arguments)}function w(){w=e._asyncToGenerator(function*(J,U){const n=[],y=(...f)=>{for(const E of f)u.isNone(E)||(Array.isArray(E)?
y(...E):O.isCollection(E)?E.forEach(q=>y(q)):g.isLoadable(E)&&n.push(E))};U(y);let C=null;yield A.map(n,function(){var f=e._asyncToGenerator(function*(E){!1!==(yield A.result("loadAll"in E&&"function"===typeof E.loadAll?E.loadAll():E.load())).ok||C||(C=E)});return function(E){return f.apply(this,arguments)}}());if(C)throw C.loadError;return J});return w.apply(this,arguments)}p.default=l;p.loadAll=l;p.loadAllChildren=r;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/core/asyncUtils":function(){define(["exports",
"./maybe","./promiseUtils"],function(p,e,A){p.assertResult=function(O){if(!0===O.ok)return O.value;throw O.error;};p.forEach=function(O,g,u){return A.eachAlways(O.map((l,F)=>g.apply(u,[l,F])))};p.map=function(O,g,u){return A.eachAlways(O.map((l,F)=>g.apply(u,[l,F]))).then(l=>l.map(F=>F.value))};p.result=function(O){return e.isNone(O)?A.resolve():O.then(g=>({ok:!0,value:g})).catch(g=>({ok:!1,error:g}))};p.resultOrAbort=function(O){return O.then(g=>({ok:!0,value:g})).catch(g=>{A.throwIfAbortError(g);
return{ok:!1,error:g}})};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/portal/Portal":function(){define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../config ../intl ../kernel ../request ../core/Error ../core/JSONSupport ../core/Loadable ../core/maybe ../core/promiseUtils ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/jsonMap ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../geometry/Extent ./PortalQueryParams ./PortalQueryResult ./PortalUser ../intl/locale".split(" "),
function(p,e,A,O,g,u,l,F,r,w,J,U,n,y,C,f,E,q,H,v,K,N,L,X){function aa(R){return Object.freeze({__proto__:null,"default":R})}var k;let z;const P={PortalGroup:()=>new Promise(function(R,D){p(["./PortalGroup"],function(h){R(aa(h))},D)}),PortalItem:()=>new Promise(function(R,D){p(["./PortalItem"],function(h){R(aa(h))},D)}),PortalUser:()=>new Promise(function(R,D){p(["./PortalUser"],function(h){R(aa(h))},D)})};g=k=function(R){function D(c){c=R.call(this,c)||this;c.access=null;c.allSSL=!1;c.authMode="auto";
c.authorizedCrossOriginDomains=null;c.basemapGalleryGroupQuery=null;c.bingKey=null;c.canListApps=!1;c.canListData=!1;c.canListPreProvisionedItems=!1;c.canProvisionDirectPurchase=!1;c.canSearchPublic=!0;c.canShareBingPublic=!1;c.canSharePublic=!1;c.canSignInArcGIS=!1;c.canSignInIDP=!1;c.colorSetsGroupQuery=null;c.commentsEnabled=!1;c.created=null;c.culture=null;c.customBaseUrl=null;c.defaultBasemap=null;c.defaultExtent=null;c.defaultVectorBasemap=null;c.description=null;c.eueiEnabled=null;c.featuredGroups=
null;c.featuredItemsGroupQuery=null;c.galleryTemplatesGroupQuery=null;c.livingAtlasGroupQuery=null;c.hasCategorySchema=!1;c.helperServices=null;c.homePageFeaturedContent=null;c.homePageFeaturedContentCount=null;c.httpPort=null;c.httpsPort=null;c.id=null;c.ipCntryCode=null;c.isPortal=!1;c.isReadOnly=!1;c.layerTemplatesGroupQuery=null;c.maxTokenExpirationMinutes=null;c.modified=null;c.name=null;c.portalHostname=null;c.portalMode=null;c.portalProperties=null;c.region=null;c.rotatorPanels=null;c.showHomePageDescription=
!1;c.sourceJSON=null;c.supportsHostedServices=!1;c.symbolSetsGroupQuery=null;c.templatesGroupQuery=null;c.units=null;c.url=O.portalUrl;c.urlKey=null;c.user=null;c.useStandardizedQuery=!1;c.useVectorBasemaps=!1;c.vectorBasemapGalleryGroupQuery=null;return c}e._inheritsLoose(D,R);var h=D.prototype;h.normalizeCtorArgs=function(c){return"string"===typeof c?{url:c}:c};h.destroy=function(){this._esriId_credentialCreateHandle&&(this._esriId_credentialCreateHandle.remove(),this._esriId_credentialCreateHandle=
null)};h.readAuthorizedCrossOriginDomains=function(c){if(c)for(const B of c)-1===O.request.trustedServers.indexOf(B)&&O.request.trustedServers.push(B);return c};h.readDefaultBasemap=function(c){return c?(c=z.fromJSON(c),c.portalItem={portal:this},c):null};h.readDefaultVectorBasemap=function(c){return c?(c=z.fromJSON(c),c.portalItem={portal:this},c):null};h.readUrlKey=function(c){return c?c.toLowerCase():c};h.readUser=function(c){let B=null;c&&(B=L.fromJSON(c),B.portal=this);return B};h.load=function(c){const B=
(new Promise(function(M,Y){p(["../Basemap"],function(ba){M(aa(ba))},Y)})).then(({default:M})=>{U.throwIfAborted(c);z=M}).then(()=>this.sourceJSON?this.sourceJSON:this._fetchSelf(this.authMode,!1,c)).then(M=>{if(u.id){const Y=u.id;this.credential=Y.findCredential(this.restUrl);this.credential||this.authMode!==k.AUTH_MODE_AUTO||(this._esriId_credentialCreateHandle=Y.on("credential-create",()=>{Y.findCredential(this.restUrl)&&this._signIn()}))}this.sourceJSON=M;this.read(M)});this.addResolvingPromise(B);
return Promise.resolve(this)};h.createClosestFacilityTask=function(){var c=e._asyncToGenerator(function*(){yield this.load();const B=this._getHelperServiceUrl("closestFacility");return new (yield new Promise(function(M,Y){p(["../tasks/ClosestFacilityTask"],function(ba){M(aa(ba))},Y)})).default(B)});return function(){return c.apply(this,arguments)}}();h.createElevationLayers=function(){var c=e._asyncToGenerator(function*(){yield this.load();const B=this._getHelperService("defaultElevationLayers"),
M=(yield new Promise(function(Y,ba){p(["../layers/ElevationLayer"],function(ia){Y(aa(ia))},ba)})).default;return B?B.map(Y=>new M({id:Y.id,url:Y.url})):[]});return function(){return c.apply(this,arguments)}}();h.createGeometryService=function(){var c=e._asyncToGenerator(function*(){yield this.load();const B=this._getHelperServiceUrl("geometry");return new (yield new Promise(function(M,Y){p(["../tasks/GeometryService"],function(ba){M(aa(ba))},Y)})).default({url:B})});return function(){return c.apply(this,
arguments)}}();h.createPrintTask=function(){var c=e._asyncToGenerator(function*(){yield this.load();const B=this._getHelperServiceUrl("printTask");return new (yield new Promise(function(M,Y){p(["../tasks/PrintTask"],function(ba){M(aa(ba))},Y)})).default(B)});return function(){return c.apply(this,arguments)}}();h.createRouteTask=function(){var c=e._asyncToGenerator(function*(){yield this.load();const B=this._getHelperServiceUrl("route");return new (yield new Promise(function(M,Y){p(["../tasks/RouteTask"],
function(ba){M(aa(ba))},Y)})).default(B)});return function(){return c.apply(this,arguments)}}();h.createServiceAreaTask=function(){var c=e._asyncToGenerator(function*(){yield this.load();const B=this._getHelperServiceUrl("serviceArea");return new (yield new Promise(function(M,Y){p(["../tasks/ServiceAreaTask"],function(ba){M(aa(ba))},Y)})).default(B)});return function(){return c.apply(this,arguments)}}();h.fetchBasemaps=function(c,B){const M=new K;M.query=c||(this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:
this.basemapGalleryGroupQuery);M.disableExtraQuery=!0;return this.queryGroups(M,B).then(Y=>{M.num=100;M.query='type:"Web Map" -type:"Web Application"';return Y.total?(Y=Y.results[0],M.sortField=Y.sortField||"name",M.sortOrder=Y.sortOrder||"desc",Y.queryItems(M,B)):null}).then(Y=>Y&&Y.total?Y.results.filter(ba=>"Web Map"===ba.type).map(ba=>new z({portalItem:ba})):[])};h.fetchCategorySchema=function(c){return this.hasCategorySchema?this._request(this.restUrl+"/portals/self/categorySchema",c).then(B=>
B.categorySchema):U.isAborted(c)?Promise.reject(U.createAbortError()):Promise.resolve([])};h.fetchFeaturedGroups=function(c){const B=this.featuredGroups,M=new K;M.num=100;M.sortField="title";if(B&&B.length){const Y=[];for(const ba of B)Y.push(`(title:"${ba.title}" AND owner:${ba.owner})`);M.query=Y.join(" OR ");return this.queryGroups(M,c).then(ba=>ba.results)}return U.isAborted(c)?Promise.reject(U.createAbortError()):Promise.resolve([])};h.fetchRegions=function(c){const B=this.user&&this.user.culture||
this.culture||X.getLocale();return this._request(this.restUrl+"/portals/regions",{...c,query:{culture:B}})};D.getDefault=function(){if(!k._default||k._default.destroyed)k._default=new k;return k._default};h.queryGroups=function(c,B){return this._queryPortal("/community/groups",c,"PortalGroup",B)};h.queryItems=function(c,B){return this._queryPortal("/search",c,"PortalItem",B)};h.queryUsers=function(c,B){c.sortField||(c.sortField="username");return this._queryPortal("/community/users",c,"PortalUser",
B)};h.toJSON=function(){throw new F("internal:not-yet-implemented","Portal.toJSON is not yet implemented");};D.fromJSON=function(c){if(!c)return null;if(c.declaredClass)throw Error("JSON object is already hydrated");return new k({sourceJSON:c})};h._getHelperService=function(c){const B=this.helperServices&&this.helperServices[c];if(!B)throw new F("portal:service-not-found",`The \`helperServices\` do not include an entry named "${c}"`);return B};h._getHelperServiceUrl=function(c){const B=this._getHelperService(c);
if(!B.url)throw new F("portal:service-url-not-found",`The \`helperServices\` entry "${c}" does not include a \`url\` value`);return B.url};h._fetchSelf=function(c=this.authMode,B=!1,M){const Y=this.restUrl+"/portals/self";c={authMode:c,query:{culture:X.getLocale().toLowerCase()},...M};"auto"===c.authMode&&(c.authMode="no-prompt");B&&(c.query.default=!0);return this._request(Y,c)};h._queryPortal=function(c,B,M,Y){const ba=C.ensureType(K,B),ia=ma=>this._request(this.restUrl+c,{...ba.toRequestOptions(this),
...Y}).then(qa=>{const wa=ba.clone();wa.start=qa.nextStart;return new N({nextQueryParams:wa,queryParams:ba,total:qa.total,results:k._resultsToTypedArray(ma,{portal:this},qa,Y)})}).then(qa=>Promise.all(qa.results.map(wa=>"function"===typeof wa.when?wa.when():qa)).then(()=>qa,wa=>{U.throwIfAbortError(wa);return qa}));return M&&P[M]?P[M]().then(({default:ma})=>{U.throwIfAborted(Y);return ia(ma)}):ia()};h._signIn=function(){if(this.authMode===k.AUTH_MODE_ANONYMOUS)return Promise.reject(new F("portal:invalid-auth-mode",
`Current "authMode"' is "${this.authMode}"`));if("failed"===this.loadStatus)return Promise.reject(this.loadError);const c=B=>Promise.resolve().then(()=>{if("not-loaded"===this.loadStatus)return B||(this.authMode="immediate"),this.load().then(()=>null);if("loading"===this.loadStatus)return this.load().then(()=>{if(this.credential)return null;this.credential=B;return this._fetchSelf("immediate")});if(this.user&&this.credential===B)return null;this.credential=B;return this._fetchSelf("immediate")}).then(M=>
{M&&(this.sourceJSON=M,this.read(M))});return u.id?u.id.getCredential(this.restUrl).then(B=>c(B)):c(this.credential)};h._normalizeSSL=function(c){return c.replace(/^http:/i,"https:").replace(":7080",":7443")};h._normalizeUrl=function(c){const B=this.credential&&this.credential.token;return this._normalizeSSL(B?c+(-1<c.indexOf("?")?"\x26":"?")+"token\x3d"+B:c)};h._requestToTypedArray=function(c,B,M){return this._request(c,B).then(Y=>{const ba=k._resultsToTypedArray(M,{portal:this},Y);return Promise.all(ba.map(ia=>
"function"===typeof ia.when?ia.when():Y)).then(()=>ba,()=>ba)})};h._request=function(c,B={}){const M={f:"json",...B.query},{authMode:Y=this.authMode===k.AUTH_MODE_ANONYMOUS?"anonymous":"auto",body:ba=null,cacheBust:ia=!1,method:ma="auto",responseType:qa="json",signal:wa}=B;B={authMode:Y,body:ba,cacheBust:ia,method:ma,query:M,responseType:qa,timeout:0,signal:wa};return l(this._normalizeSSL(c),B).then(Ca=>Ca.data)};D._resultsToTypedArray=function(c,B,M,Y){if(M){const ba=J.isSome(Y)?Y.signal:null;M=
M.listings||M.notifications||M.userInvitations||M.tags||M.items||M.groups||M.comments||M.provisions||M.results||M.relatedItems||M;if(c||B)M=M.map(ia=>{ia=Object.assign(c?c.fromJSON(ia):ia,B);"function"===typeof ia.load&&ia.load(ba);return ia})}else M=[];return M};e._createClass(D,[{key:"extraQuery",get:function(){const c=!(this.user&&this.user.orgId)||this.canSearchPublic;return this.id&&!c?` AND orgid:${this.id}`:null}},{key:"isOrganization",get:function(){return!!this.access}},{key:"restUrl",get:function(){let c=
this.url;if(c){const B=c.indexOf("/sharing");c=0<B?c.substring(0,B):this.url.replace(/\/+$/,"");c+="/sharing/rest"}return c}},{key:"thumbnailUrl",get:function(){const c=this.restUrl,B=this.thumbnail;return c&&B?this._normalizeSSL(c+"/portals/self/resources/"+B):null}}]);return D}(r.JSONSupportMixin(w));g.AUTH_MODE_ANONYMOUS="anonymous";g.AUTH_MODE_AUTO="auto";g.AUTH_MODE_IMMEDIATE="immediate";A.__decorate([n.property()],g.prototype,"access",void 0);A.__decorate([n.property()],g.prototype,"allSSL",
void 0);A.__decorate([n.property()],g.prototype,"authMode",void 0);A.__decorate([n.property()],g.prototype,"authorizedCrossOriginDomains",void 0);A.__decorate([q.reader("authorizedCrossOriginDomains")],g.prototype,"readAuthorizedCrossOriginDomains",null);A.__decorate([n.property()],g.prototype,"basemapGalleryGroupQuery",void 0);A.__decorate([n.property()],g.prototype,"bingKey",void 0);A.__decorate([n.property()],g.prototype,"canListApps",void 0);A.__decorate([n.property()],g.prototype,"canListData",
void 0);A.__decorate([n.property()],g.prototype,"canListPreProvisionedItems",void 0);A.__decorate([n.property()],g.prototype,"canProvisionDirectPurchase",void 0);A.__decorate([n.property()],g.prototype,"canSearchPublic",void 0);A.__decorate([n.property()],g.prototype,"canShareBingPublic",void 0);A.__decorate([n.property()],g.prototype,"canSharePublic",void 0);A.__decorate([n.property()],g.prototype,"canSignInArcGIS",void 0);A.__decorate([n.property()],g.prototype,"canSignInIDP",void 0);A.__decorate([n.property()],
g.prototype,"colorSetsGroupQuery",void 0);A.__decorate([n.property()],g.prototype,"commentsEnabled",void 0);A.__decorate([n.property({type:Date})],g.prototype,"created",void 0);A.__decorate([n.property()],g.prototype,"credential",void 0);A.__decorate([n.property()],g.prototype,"culture",void 0);A.__decorate([n.property()],g.prototype,"currentVersion",void 0);A.__decorate([n.property()],g.prototype,"customBaseUrl",void 0);A.__decorate([n.property()],g.prototype,"defaultBasemap",void 0);A.__decorate([q.reader("defaultBasemap")],
g.prototype,"readDefaultBasemap",null);A.__decorate([n.property({type:v})],g.prototype,"defaultExtent",void 0);A.__decorate([n.property()],g.prototype,"defaultVectorBasemap",void 0);A.__decorate([q.reader("defaultVectorBasemap")],g.prototype,"readDefaultVectorBasemap",null);A.__decorate([n.property()],g.prototype,"description",void 0);A.__decorate([n.property()],g.prototype,"eueiEnabled",void 0);A.__decorate([n.property({readOnly:!0})],g.prototype,"extraQuery",null);A.__decorate([n.property()],g.prototype,
"featuredGroups",void 0);A.__decorate([n.property()],g.prototype,"featuredItemsGroupQuery",void 0);A.__decorate([n.property()],g.prototype,"galleryTemplatesGroupQuery",void 0);A.__decorate([n.property()],g.prototype,"livingAtlasGroupQuery",void 0);A.__decorate([n.property()],g.prototype,"hasCategorySchema",void 0);A.__decorate([n.property()],g.prototype,"helpBase",void 0);A.__decorate([n.property()],g.prototype,"helperServices",void 0);A.__decorate([n.property()],g.prototype,"helpMap",void 0);A.__decorate([n.property()],
g.prototype,"homePageFeaturedContent",void 0);A.__decorate([n.property()],g.prototype,"homePageFeaturedContentCount",void 0);A.__decorate([n.property()],g.prototype,"httpPort",void 0);A.__decorate([n.property()],g.prototype,"httpsPort",void 0);A.__decorate([n.property()],g.prototype,"id",void 0);A.__decorate([n.property()],g.prototype,"ipCntryCode",void 0);A.__decorate([n.property({readOnly:!0})],g.prototype,"isOrganization",null);A.__decorate([n.property()],g.prototype,"isPortal",void 0);A.__decorate([n.property()],
g.prototype,"isReadOnly",void 0);A.__decorate([n.property()],g.prototype,"layerTemplatesGroupQuery",void 0);A.__decorate([n.property()],g.prototype,"maxTokenExpirationMinutes",void 0);A.__decorate([n.property({type:Date})],g.prototype,"modified",void 0);A.__decorate([n.property()],g.prototype,"name",void 0);A.__decorate([n.property()],g.prototype,"portalHostname",void 0);A.__decorate([n.property()],g.prototype,"portalMode",void 0);A.__decorate([n.property()],g.prototype,"portalProperties",void 0);
A.__decorate([n.property()],g.prototype,"region",void 0);A.__decorate([n.property({readOnly:!0})],g.prototype,"restUrl",null);A.__decorate([n.property()],g.prototype,"rotatorPanels",void 0);A.__decorate([n.property()],g.prototype,"showHomePageDescription",void 0);A.__decorate([n.property()],g.prototype,"sourceJSON",void 0);A.__decorate([n.property()],g.prototype,"staticImagesUrl",void 0);A.__decorate([n.property()],g.prototype,"stylesGroupQuery",void 0);A.__decorate([n.property()],g.prototype,"supportsHostedServices",
void 0);A.__decorate([n.property()],g.prototype,"symbolSetsGroupQuery",void 0);A.__decorate([n.property()],g.prototype,"templatesGroupQuery",void 0);A.__decorate([n.property()],g.prototype,"thumbnail",void 0);A.__decorate([n.property({readOnly:!0})],g.prototype,"thumbnailUrl",null);A.__decorate([n.property()],g.prototype,"units",void 0);A.__decorate([n.property()],g.prototype,"url",void 0);A.__decorate([n.property()],g.prototype,"urlKey",void 0);A.__decorate([q.reader("urlKey")],g.prototype,"readUrlKey",
null);A.__decorate([n.property()],g.prototype,"user",void 0);A.__decorate([q.reader("user")],g.prototype,"readUser",null);A.__decorate([n.property()],g.prototype,"useStandardizedQuery",void 0);A.__decorate([n.property()],g.prototype,"useVectorBasemaps",void 0);A.__decorate([n.property()],g.prototype,"vectorBasemapGalleryGroupQuery",void 0);return g=k=A.__decorate([H.subclass("esri.portal.Portal")],g)})},"esri/intl":function(){define("exports ./intl/date ./intl/number ./intl/substitute ./intl/locale ./intl/messages ./intl/t9n ./assets".split(" "),
function(p,e,A,O,g,u,l,F){u.registerMessageBundleLoader(l.createJSONLoader({pattern:"esri/",location:F.getAssetUrl}));p.convertDateFormatToIntlOptions=e.convertDateFormatToIntlOptions;p.formatDate=e.formatDate;p.convertNumberFormatToIntlOptions=A.convertNumberFormatToIntlOptions;p.formatNumber=A.formatNumber;p.substitute=O.substitute;p.getLocale=g.getLocale;p.onLocaleChange=g.onLocaleChange;p.prefersRTL=g.prefersRTL;p.setLocale=g.setLocale;p.fetchMessageBundle=u.fetchMessageBundle;p.normalizeMessageBundleLocale=
u.normalizeMessageBundleLocale;p.registerMessageBundleLoader=u.registerMessageBundleLoader;p.createJSONLoader=l.createJSONLoader;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/intl/date":function(){define(["exports","../core/jsonMap","./locale"],function(p,e,A){function O(C){C=C||y;if(!n.has(C)){var f=A.getLocale();f=U[A.getLocale()]||f;n.set(C,new Intl.DateTimeFormat(f,C))}return n.get(C)}var g={year:"numeric",month:"numeric",day:"numeric"},u={year:"numeric",month:"long",day:"numeric"},
l={year:"numeric",month:"short",day:"numeric"};const F={year:"numeric",month:"long",weekday:"long",day:"numeric"},r={hour:"numeric",minute:"numeric"},w={...r,second:"numeric"},J={"short-date":g,"short-date-short-time":{...g,...r},"short-date-short-time-24":{...g,...r,hour12:!1},"short-date-long-time":{...g,...w},"short-date-long-time-24":{...g,...w,hour12:!1},"short-date-le":g,"short-date-le-short-time":{...g,...r},"short-date-le-short-time-24":{...g,...r,hour12:!1},"short-date-le-long-time":{...g,
...w},"short-date-le-long-time-24":{...g,...w,hour12:!1},"long-month-day-year":u,"long-month-day-year-short-time":{...u,...r},"long-month-day-year-short-time-24":{...u,...r,hour12:!1},"long-month-day-year-long-time":{...u,...w},"long-month-day-year-long-time-24":{...u,...w,hour12:!1},"day-short-month-year":l,"day-short-month-year-short-time":{...l,...r},"day-short-month-year-short-time-24":{...l,...r,hour12:!1},"day-short-month-year-long-time":{...l,...w},"day-short-month-year-long-time-24":{...l,
...w,hour12:!1},"long-date":F,"long-date-short-time":{...F,...r},"long-date-short-time-24":{...F,...r,hour12:!1},"long-date-long-time":{...F,...w},"long-date-long-time-24":{...F,...w,hour12:!1},"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":r,"long-time":w};e=e.strict()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",
shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",
dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",
shortMonthYear:"short-month-year",year:"year"});g=e.apiValues;u=e.toJSON.bind(e);l=e.fromJSON.bind(e);const U={ar:"ar-u-nu-latn-ca-gregory"};let n=new WeakMap,y=J["short-date-short-time"];A.beforeLocaleChange(()=>{n=new WeakMap;y=J["short-date-short-time"]});p.convertDateFormatToIntlOptions=function(C){return J[C]||null};p.dateFormats=g;p.dictionary=e;p.formatDate=function(C,f){return O(f).format(C)};p.fromJSON=l;p.getDateTimeFormatter=O;p.toJSON=u;Object.defineProperty(p,"__esModule",{value:!0})})},
"esri/intl/locale":function(){define(["exports","../core/global"],function(p,e){function A(){var f,E;return null!=(f=null!=U?U:null==(E=e.navigator)?void 0:E.language)?f:"en"}function O(){void 0===J&&(J=A());return J}function g(f=O()){f=/^([a-zA-Z]{2,3})(?:[_\-]\w+)*$/.exec(f);return null==f?void 0:f[1].toLowerCase()}function u(){var f;const E=null!=(f=w)?f:A();J!==E&&(J=E,[...C].forEach(q=>{q.call(null,E)}),[...y].forEach(q=>{q.call(null,E)}))}var l,F,r;let w=void 0,J=void 0;const U=null!=(l=null==
(F=e.esriConfig)?void 0:F.locale)?l:null==(r=e.dojoConfig)?void 0:r.locale,n={he:!0,ar:!0},y=[],C=[];null==e.addEventListener?void 0:e.addEventListener("languagechange",u);p.beforeLocaleChange=function(f){C.push(f);return{remove(){y.splice(C.indexOf(f),1)}}};p.getDefaultLocale=A;p.getLanguage=g;p.getLocale=O;p.onLocaleChange=function(f){y.push(f);return{remove(){y.splice(y.indexOf(f),1)}}};p.prefersRTL=function(f=O()){f=g(f);return void 0!==f&&(n[f]||!1)};p.setLocale=function(f){w=f?f:void 0;u()};
Object.defineProperty(p,"__esModule",{value:!0})})},"esri/intl/number":function(){define(["exports","../core/maybe","./locale"],function(p,e,A){function O(F){const r=F||l;if(!u.has(r)){var w=A.getLocale();w=g[A.getLocale()]||w;u.set(r,new Intl.NumberFormat(w,F))}return e.assumeNonNull(u.get(r))}const g={ar:"ar-u-nu-latn"};let u=new WeakMap,l={};A.beforeLocaleChange(()=>{u=new WeakMap;l={}});p.convertNumberFormatToIntlOptions=function(F={}){const r={};null!=F.digitSeparator&&(r.useGrouping=F.digitSeparator);
null!=F.places&&(r.minimumFractionDigits=r.maximumFractionDigits=F.places);return r};p.formatNumber=function(F,r){return O(r).format(F)};p.getFormatter=O;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/intl/substitute":function(){define("exports ../core/Logger ../core/object ../core/string ./date ./number".split(" "),function(p,e,A,O,g,u){function l(r){switch(typeof r){case "string":return r;case "number":return u.formatNumber(r);case "boolean":return""+r;default:return r instanceof Date?
g.formatDate(r):""}}const F=e.getLogger("esri.intl");p.substitute=function(r,w,J={}){const {format:U={}}=J;return O.replace(r,n=>{{const f=n.indexOf(":");if(-1===f)var y=n.trim();else{y=n.slice(0,f).trim();var C=n.slice(f+1).trim()}if(y)if(n=A.getDeepValue(y,w),null==n)C="";else if(y=U[C]||U[y])b:switch(y.type){case "date":C=g.formatDate(n,y.intlOptions);break b;case "number":C=u.formatNumber(n,y.intlOptions);break b;default:F.warn("missing format descriptor for key {key}"),C=l(n)}else if(C)b:switch(C.toLowerCase()){case "dateformat":C=
g.formatDate(n);break b;case "numberformat":C=u.formatNumber(n);break b;default:F.warn(`inline format is unsupported since 4.12: ${C}`),C=/^(dateformat|datestring)/i.test(C)?g.formatDate(n):/^numberformat/i.test(C)?u.formatNumber(n):l(n)}else C=l(n);else C=""}return C})};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/intl/messages":function(){define(["exports","../chunks/_rollupPluginBabelHelpers","../core/Error","../core/promiseUtils","./locale"],function(p,e,A,O,g){function u(q){var H;
return null!=(H=n[q])?H:!1}function l(q){for(const H of C.keys())J(q.pattern,H)&&C.delete(H)}function F(){F=e._asyncToGenerator(function*(q){const H=g.getLocale();C.has(q)||C.set(q,r(q,H));q=C.get(q);yield f.add(q);return q});return F.apply(this,arguments)}function r(q,H){return w.apply(this,arguments)}function w(){w=e._asyncToGenerator(function*(q,H){const v=[];for(const K of y)if(J(K.pattern,q))try{return yield K.fetchMessageBundle(q,H)}catch(N){v.push(N)}if(v.length)throw new A("intl:message-bundle-error",
`Errors occurred while loading "${q}"`,{errors:v});throw new A("intl:no-message-bundle-loader",`No loader found for message bundle "${q}"`);});return w.apply(this,arguments)}function J(q,H){return"string"===typeof q?H.startsWith(q):q.test(H)}const U=/^([a-z]{2})(?:[-_]([A-Za-z]{2}))?$/,n={ar:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:!0,nl:!0,pl:!0,"pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,
uk:!0,vi:!0,"zh-CN":!0,"zh-HK":!0,"zh-TW":!0},y=[],C=new Map;g.beforeLocaleChange(()=>{C.clear()});const f=new (function(){function q(){this._numLoading=0}var H=q.prototype;H.waitForAll=function(){var v=e._asyncToGenerator(function*(){this._dfd&&(yield this._dfd.promise)});return function(){return v.apply(this,arguments)}}();H.add=function(v){this._increase();v.then(()=>this._decrease(),()=>this._decrease());return this.waitForAll()};H._increase=function(){this._numLoading++;this._dfd||(this._dfd=
O.createDeferred())};H._decrease=function(){this._numLoading=Math.max(this._numLoading-1,0);this._dfd&&0===this._numLoading&&(this._dfd.resolve(),this._dfd=null)};return q}()),E={cache:C,loaders:y};p.fetchMessageBundle=function(q){return F.apply(this,arguments)};p.normalizeMessageBundleLocale=function(q){if(!U.test(q))return null;const [,H,v]=U.exec(q);q=H+(v?"-"+v.toUpperCase():"");return u(q)?q:u(H)?H:null};p.registerMessageBundleLoader=function(q){y.includes(q)||(l(q),y.unshift(q));return{remove(){const H=
y.indexOf(q);-1<H&&(y.splice(H,1),l(q))}}};p.test=E;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/intl/t9n":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../request ../core/Error ../core/global ../core/maybe ./messages".split(" "),function(p,e,A,O,g,u,l){function F(y,C,f,E){return r.apply(this,arguments)}function r(){r=e._asyncToGenerator(function*(y,C,f,E){var q=C.exec(f);if(!q)throw new O("esri-intl:invalid-bundle",`Bundle id "${f}" is not compatible with the pattern "${C}"`);
C=q[1]?`${q[1]}/`:"";q=q[2];const H=l.normalizeMessageBundleLocale(E);E=`${C}${q}.json`;C=H?`${C}${q}_${H}.json`:E;let v;try{v=yield w(y(C))}catch(K){if(C===E)throw new O("intl:unknown-bundle",`Bundle "${f}" cannot be loaded`,{error:K});try{v=yield w(y(E))}catch(N){throw new O("intl:unknown-bundle",`Bundle "${f}" cannot be loaded`,{error:N});}}return v});return r.apply(this,arguments)}function w(y){return J.apply(this,arguments)}function J(){J=e._asyncToGenerator(function*(y){if(u.isSome(n.fetchBundleAsset))return n.fetchBundleAsset(y);
y=yield A(y,{responseType:"text"});return JSON.parse(y.data)});return J.apply(this,arguments)}let U=function(){function y({base:C="",pattern:f,location:E=new URL(window.location.href)}){let q;q="string"===typeof E?H=>(new URL(H,new URL(E,g.location))).href:E instanceof URL?H=>(new URL(H,E)).href:E;this.pattern="string"===typeof f?new RegExp(`^${f}`):f;this.getAssetUrl=q;C=C?C.endsWith("/")?C:C+"/":"";this.matcher=new RegExp(`^${C}(?:(.*)\/)?(.*)$`)}y.prototype.fetchMessageBundle=function(C,f){return F(this.getAssetUrl,
this.matcher,C,f)};return y}();const n={};p.JSONLoader=U;p.createJSONLoader=function(y){return new U(y)};p.test=n;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/portal/PortalQueryParams":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Accessor ../core/jsonMap ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/has ../core/Logger ../core/accessorSupport/decorators/subclass ../geometry/Extent ../geometry/SpatialReference ../geometry/support/webMercatorUtils".split(" "),
function(p,e,A,O,g,u,l,F,r,w,J,U,n){var y;const C=new O.JSONMap({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});A=y=function(f){function E(H){H=f.call(this,H)||this;H.categories=null;H.disableExtraQuery=!1;H.extent=null;H.num=10;H.query=null;H.sortField=null;H.start=1;return H}p._inheritsLoose(E,f);var q=E.prototype;q.clone=function(){return new y({categories:this.categories?g.clone(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?
this.extent.clone():null,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})};q.toRequestOptions=function(H,v){let K;this.categories&&(K=this.categories.map(X=>Array.isArray(X)?JSON.stringify(X):X));let N;if(this.extent){var L=n.project(this.extent,U.WGS84);L&&(N=`${L.xmin},${L.ymin},${L.xmax},${L.ymax}`)}L=this.query;!this.disableExtraQuery&&H.extraQuery&&(L="("+L+")"+H.extraQuery);H={categories:K,bbox:N,q:L,num:this.num,sortField:null,sortOrder:null,
start:this.start};this.sortField&&(H.sortField=this.sortField.split(",").map(X=>C.toJSON(X.trim())).join(","),H.sortOrder=this.sortOrder);return{query:{...v,...H}}};p._createClass(E,[{key:"sortOrder",get:function(){return this._get("sortOrder")||"asc"},set:function(H){"asc"!==H&&"desc"!==H||this._set("sortOrder",H)}}]);return E}(A);e.__decorate([u.property()],A.prototype,"categories",void 0);e.__decorate([u.property()],A.prototype,"disableExtraQuery",void 0);e.__decorate([u.property({type:J})],A.prototype,
"extent",void 0);e.__decorate([u.property()],A.prototype,"num",void 0);e.__decorate([u.property()],A.prototype,"query",void 0);e.__decorate([u.property()],A.prototype,"sortField",void 0);e.__decorate([u.property()],A.prototype,"sortOrder",null);e.__decorate([u.property()],A.prototype,"start",void 0);return A=y=e.__decorate([w.subclass("esri.portal.PortalQueryParams")],A)})},"esri/portal/PortalQueryResult":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Accessor ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/jsonMap ../core/accessorSupport/decorators/subclass".split(" "),
function(p,e,A,O,g,u,l,F,r){A=function(w){function J(U){U=w.call(this,U)||this;U.nextQueryParams=null;U.queryParams=null;U.results=null;U.total=null;return U}p._inheritsLoose(J,w);return J}(A);e.__decorate([O.property()],A.prototype,"nextQueryParams",void 0);e.__decorate([O.property()],A.prototype,"queryParams",void 0);e.__decorate([O.property()],A.prototype,"results",void 0);e.__decorate([O.property()],A.prototype,"total",void 0);return A=e.__decorate([r.subclass("esri.portal.PortalQueryResult")],
A)})},"esri/portal/PortalUser":function(){define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Error ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/jsonMap ../core/accessorSupport/decorators/subclass ./PortalFolder ./PortalGroup".split(" "),function(p,e,A,O,g,u,l,F,r,w,J,U,n){var y;g=y=function(C){function f(...q){q=C.call(this,...q)||this;q.access=null;q.created=null;q.culture=null;q.description=
null;q.email=null;q.fullName=null;q.modified=null;q.orgId=null;q.portal=null;q.preferredView=null;q.privileges=null;q.region=null;q.role=null;q.roleId=null;q.sourceJSON=null;q.units=null;q.username=null;q.userType=null;return q}e._inheritsLoose(f,C);var E=f.prototype;E.addItem=function(q){const H=q&&q.item;var v=q&&q.data;q=q&&q.folder;const K={method:"post"};H&&(K.query=H.createPostQuery(),null!=v&&("string"===typeof v?K.query.text=v:"object"===typeof v&&(K.query.text=JSON.stringify(v))));v=this.userContentUrl;
q&&(v+="/"+("string"===typeof q?q:q.id));return this.portal._request(v+"/addItem",K).then(N=>{H.id=N.id;H.portal=this.portal;return H.loaded?H.reload():H.load()})};E.deleteItem=function(q){let H=this.userContentUrl;q.ownerFolder&&(H+="/"+q.ownerFolder);return this.portal._request(H+`/items/${q.id}/delete`,{method:"post"}).then(()=>{q.id=null;q.portal=null})};E.deleteItems=function(q){const H=this.userContentUrl+"/deleteItems";var v=q.map(K=>K.id);return v.length?(v={method:"post",query:{items:v.join(",")}},
this.portal._request(H,v).then(()=>{q.forEach(K=>{K.id=null;K.portal=null})})):Promise.resolve(void 0)};E.fetchFolders=function(){return this.portal._request(this.userContentUrl,{query:{num:1}}).then(q=>q&&q.folders?q.folders.map(H=>{H=U.fromJSON(H);H.portal=this.portal;return H}):[])};E.fetchGroups=function(){return this.portal._request(this.url).then(q=>q&&q.groups?q.groups.map(H=>{H=n.fromJSON(H);H.portal=this.portal;return H}):[])};E.fetchItems=function(q){q||(q={});let H=this.userContentUrl;
q.folder&&(H+="/"+q.folder.id);let v;return(new Promise(function(K,N){p(["./PortalItem"],function(L){K(Object.freeze({__proto__:null,"default":L}))},N)})).then(({default:K})=>{v=K;return this.portal._request(H,{query:{folders:!1,num:q.num||10,start:q.start||1,sortField:q.sortField||"created",sortOrder:q.sortOrder||"asc"}})}).then(K=>{let N;return K&&K.items?(N=K.items.map(L=>{L=v.fromJSON(L);L.portal=this.portal;return L}),Promise.all(N.map(L=>L.load())).catch(L=>L).then(()=>({items:N,nextStart:K.nextStart,
total:K.total}))):{items:[],nextStart:-1,total:0}})};E.fetchTags=function(){return this.portal._request(this.url+"/tags").then(q=>q.tags)};E.getThumbnailUrl=function(q){let H=this.thumbnailUrl;H&&q&&(H+=`&w=${q}`);return H};E.queryFavorites=function(q){return this.favGroupId?(this._favGroup||(this._favGroup=new n({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(q)):Promise.reject(new O("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))};E.toJSON=
function(){throw new O("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented");};f.fromJSON=function(q){if(!q)return null;if(q.declaredClass)throw Error("JSON object is already hydrated");const H=new y;H.sourceJSON=q;H.read(q);return H};e._createClass(f,[{key:"thumbnailUrl",get:function(){const q=this.url,H=this.thumbnail;return q&&H?this.portal._normalizeUrl(`${q}/info/${H}?f=json`):null}},{key:"userContentUrl",get:function(){const q=this.get("portal.restUrl");return q?`${q}/content/users/${this.username}`:
null}},{key:"url",get:function(){const q=this.get("portal.restUrl");return q?`${q}/community/users/${this.username}`:null}}]);return f}(g.JSONSupport);A.__decorate([u.property()],g.prototype,"access",void 0);A.__decorate([u.property({type:Date})],g.prototype,"created",void 0);A.__decorate([u.property()],g.prototype,"culture",void 0);A.__decorate([u.property()],g.prototype,"description",void 0);A.__decorate([u.property()],g.prototype,"email",void 0);A.__decorate([u.property()],g.prototype,"favGroupId",
void 0);A.__decorate([u.property()],g.prototype,"fullName",void 0);A.__decorate([u.property({type:Date})],g.prototype,"modified",void 0);A.__decorate([u.property()],g.prototype,"orgId",void 0);A.__decorate([u.property()],g.prototype,"portal",void 0);A.__decorate([u.property()],g.prototype,"preferredView",void 0);A.__decorate([u.property()],g.prototype,"privileges",void 0);A.__decorate([u.property()],g.prototype,"region",void 0);A.__decorate([u.property()],g.prototype,"role",void 0);A.__decorate([u.property()],
g.prototype,"roleId",void 0);A.__decorate([u.property()],g.prototype,"sourceJSON",void 0);A.__decorate([u.property()],g.prototype,"thumbnail",void 0);A.__decorate([u.property({readOnly:!0})],g.prototype,"thumbnailUrl",null);A.__decorate([u.property()],g.prototype,"units",void 0);A.__decorate([u.property({readOnly:!0})],g.prototype,"userContentUrl",null);A.__decorate([u.property({readOnly:!0})],g.prototype,"url",null);A.__decorate([u.property()],g.prototype,"username",void 0);A.__decorate([u.property()],
g.prototype,"userType",void 0);return g=y=A.__decorate([J.subclass("esri.portal.PortalUser")],g)})},"esri/portal/PortalFolder":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Error ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/jsonMap ../core/accessorSupport/decorators/subclass".split(" "),function(p,e,A,O,g,u,l,F,r,w){O=function(J){function U(n){n=J.call(this,n)||this;n.created=
null;n.id=null;n.portal=null;n.title=null;n.username=null;return n}p._inheritsLoose(U,J);U.prototype.toJSON=function(){throw new A("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented");};p._createClass(U,[{key:"url",get:function(){const n=this.get("portal.restUrl");return n?`${n}/content/users/${this.username}/${this.id}`:null}}]);return U}(O.JSONSupport);e.__decorate([g.property({type:Date})],O.prototype,"created",void 0);e.__decorate([g.property()],O.prototype,"id",void 0);
e.__decorate([g.property()],O.prototype,"portal",void 0);e.__decorate([g.property()],O.prototype,"title",void 0);e.__decorate([g.property({readOnly:!0})],O.prototype,"url",null);e.__decorate([g.property()],O.prototype,"username",void 0);return O=e.__decorate([w.subclass("esri.portal.PortalFolder")],O)})},"esri/portal/PortalGroup":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Error ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/jsonMap ../core/accessorSupport/decorators/subclass ./PortalQueryParams".split(" "),
function(p,e,A,O,g,u,l,F,r,w,J){O=function(U){function n(C){C=U.call(this,C)||this;C.access=null;C.created=null;C.description=null;C.id=null;C.isInvitationOnly=!1;C.modified=null;C.owner=null;C.portal=null;C.snippet=null;C.sortField=null;C.sortOrder=null;C.tags=null;C.title=null;return C}p._inheritsLoose(n,U);var y=n.prototype;y.fetchCategorySchema=function(C){return this.portal._request(this.url+"/categorySchema",C).then(f=>{f=f.categorySchema||[];return f.some(E=>"contentCategorySetsGroupQuery.LivingAtlas"===
E.source)?this._fetchCategorySchemaSet("LivingAtlas",C):f})};y.fetchMembers=function(C){return this.portal._request(this.url+"/users",C)};y.getThumbnailUrl=function(C){let f=this.thumbnailUrl;f&&C&&(f+=`&w=${C}`);return f};y.toJSON=function(){throw new A("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented");};y.queryItems=function(C,f){C=l.ensureType(J,C);if(5<parseFloat(this.portal.currentVersion))return C=C||new J,this.portal._queryPortal(`/content/groups/${this.id}/search`,
C,"PortalItem",f);C=C?C.clone():new J;C.query="group:"+this.id+(C.query?" "+C.query:"");return this.portal.queryItems(C,f)};y._fetchCategorySchemaSet=function(C,f){return this.portal._fetchSelf(this.portal.authMode,!0,f).then(E=>{if(E=E.contentCategorySetsGroupQuery){const q=new J;q.disableExtraQuery=!0;q.num=1;q.query=E;return this.portal.queryGroups(q,f)}throw new A("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found");}).then(E=>{if(E.total){E=E.results[0];const q=
new J;q.num=1;q.query=`typekeywords:"${C}"`;return E.queryItems(q,f)}throw new A("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found");}).then(E=>E.total?E.results[0].fetchData("json",f).then(q=>(q=q&&q.categorySchema)&&q.length?q:[]):[])};p._createClass(n,[{key:"thumbnailUrl",get:function(){const C=this.url,f=this.thumbnail;return C&&f?this.portal._normalizeUrl(`${C}/info/${f}?f=json`):null}},{key:"url",get:function(){const C=this.get("portal.restUrl");return C?C+"/community/groups/"+
this.id:null}}]);return n}(O.JSONSupport);e.__decorate([g.property()],O.prototype,"access",void 0);e.__decorate([g.property({type:Date})],O.prototype,"created",void 0);e.__decorate([g.property()],O.prototype,"description",void 0);e.__decorate([g.property()],O.prototype,"id",void 0);e.__decorate([g.property()],O.prototype,"isInvitationOnly",void 0);e.__decorate([g.property({type:Date})],O.prototype,"modified",void 0);e.__decorate([g.property()],O.prototype,"owner",void 0);e.__decorate([g.property()],
O.prototype,"portal",void 0);e.__decorate([g.property()],O.prototype,"snippet",void 0);e.__decorate([g.property()],O.prototype,"sortField",void 0);e.__decorate([g.property()],O.prototype,"sortOrder",void 0);e.__decorate([g.property()],O.prototype,"tags",void 0);e.__decorate([g.property()],O.prototype,"thumbnail",void 0);e.__decorate([g.property({readOnly:!0})],O.prototype,"thumbnailUrl",null);e.__decorate([g.property()],O.prototype,"title",void 0);e.__decorate([g.property({readOnly:!0})],O.prototype,
"url",null);return O=e.__decorate([w.subclass("esri.portal.PortalGroup")],O)})},"esri/portal/PortalItem":function(){define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../assets ../core/Error ../core/JSONSupport ../core/lang ../core/Loadable ../core/maybe ../core/urlUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/has ../core/Logger ../core/jsonMap ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../geometry/Extent ./Portal ./PortalItemResource ./PortalRating".split(" "),
function(p,e,A,O,g,u,l,F,r,w,J,U,n,y,C,f,E,q,H,v,K){var N;u=N=function(L){function X(k){k=L.call(this,k)||this;k.access=null;k.accessInformation=null;k.apiKey=null;k.applicationProxies=null;k.avgRating=null;k.categories=null;k.created=null;k.culture=null;k.description=null;k.extent=null;k.groupCategories=null;k.id=null;k.itemControl=null;k.licenseInfo=null;k.modified=null;k.name=null;k.numComments=null;k.numRatings=null;k.numViews=null;k.owner=null;k.ownerFolder=null;k.portal=null;k.screenshots=null;
k.size=null;k.snippet=null;k.sourceJSON=null;k.tags=null;k.title=null;k.type=null;k.typeKeywords=null;k.url=null;return k}e._inheritsLoose(X,L);X.from=function(k){return U.ensureClass(N,k)};var aa=X.prototype;aa.destroy=function(){this.portal=null};aa.readExtent=function(k){return k&&k.length?new q(k[0][0],k[0][1],k[1][0],k[1][1]):null};aa.load=function(k){this.portal||(this.portal=H.getDefault());const z=this.portal.load(k).then(()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?this.portal._request(this.itemUrl,
{signal:r.isSome(k)?k.signal:null,query:{token:this.apiKey}}):{}).then(P=>{this.sourceJSON=P;this.read(P)});this.addResolvingPromise(z);return Promise.resolve(this)};aa.addRating=function(k){const z={method:"post",query:{}};k instanceof K&&(k=k.rating);isNaN(k)||"number"!==typeof k||(z.query.rating=k);return this.portal._request(this.itemUrl+"/addRating",z).then(()=>new K({rating:k,created:new Date}))};aa.clone=function(){const k={access:this.access,accessInformation:this.accessInformation,applicationProxies:l.clone(this.applicationProxies),
avgRating:this.avgRating,categories:l.clone(this.categories),created:l.clone(this.created),culture:this.culture,description:this.description,extent:l.clone(this.extent),groupCategories:l.clone(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:l.clone(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:l.clone(this.screenshots),
size:this.size,snippet:this.snippet,tags:l.clone(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:l.clone(this.typeKeywords),url:this.url};this.loaded&&(k.loadStatus="loaded");return(new N({sourceJSON:this.sourceJSON})).set(k)};aa.createPostQuery=function(){const k=this.toJSON();for(const z in k)"tags"===z&&null!==k[z]&&(k[z]=k[z].join(", ")),"typeKeywords"===z&&null!==k[z]&&(k[z]=k[z].join(", ")),"extent"===z&&k[z]&&(k[z]=JSON.stringify(k[z]));return k};aa.deleteRating=
function(){return this.portal._request(this.itemUrl+"/deleteRating",{method:"post"}).then(()=>{})};aa.fetchData=function(k="json",z){return this.portal._request(this.itemUrl+"/data",{responseType:k,...z,query:{token:this.apiKey}})};aa.fetchRating=function(k){return this.portal._request(this.itemUrl+"/rating",{query:{token:this.apiKey},...k}).then(z=>null!=z.rating?(z.created=new Date(z.created),new K(z)):null)};aa.fetchRelatedItems=function(k,z){return this.portal._requestToTypedArray(this.itemUrl+
"/relatedItems",{query:{...k,token:this.apiKey},...z},N)};aa.getThumbnailUrl=function(k){let z=this.thumbnailUrl;z&&k&&(z+=`&w=${k}`);return z};aa.reload=function(){return this.portal._request(this.itemUrl,{cacheBust:!0,query:{token:this.apiKey}}).then(k=>{this.sourceJSON=k;this.read(k);return this})};aa.update=function(k){return this.id?this.load().then(()=>this.portal._signIn()).then(()=>{const z=k&&k.data,P={method:"post"};P.query=this.createPostQuery();for(const R in P.query)null===P.query[R]&&
(P.query[R]="");P.query.clearEmptyFields=!0;null!=z&&("string"===typeof z?P.query.text=z:"object"===typeof z&&(P.query.text=JSON.stringify(z)));return this.portal._request(`${this.userItemUrl}/update`,P).then(()=>this.reload())}):Promise.reject(new g("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))};aa.updateThumbnail=function(k){return this.id?this.load().then(()=>this.portal._signIn()).then(()=>{const z=k.thumbnail,P=k.filename,R={method:"post"};if("string"===typeof z)w.isDataProtocol(z)?
R.query={data:z}:R.query={url:w.makeAbsolute(z)},r.isSome(P)&&(R.query.filename=P);else{const D=new FormData;r.isSome(P)?D.append("file",z,P):D.append("file",z);R.body=D}return this.portal._request(`${this.userItemUrl}/updateThumbnail`,R).then(()=>this.reload())}):Promise.reject(new g("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))};aa.fetchResources=function(){var k=e._asyncToGenerator(function*(z={},P){return(yield new Promise(function(R,D){p(["./support/resourceUtils"],
R,D)})).fetchResources(this,z,P)});return function(){return k.apply(this,arguments)}}();aa.addResource=function(){var k=e._asyncToGenerator(function*(z,P,R){const D=yield new Promise(function(h,c){p(["./support/resourceUtils"],h,c)});z.portalItem=this;return D.addOrUpdateResource(z,"add",P,R)});return function(z,P,R){return k.apply(this,arguments)}}();aa.removeResource=function(){var k=e._asyncToGenerator(function*(z,P){const R=yield new Promise(function(D,h){p(["./support/resourceUtils"],D,h)});
if(z.portalItem&&z.portalItem.itemUrl!==this.itemUrl)throw new g("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return R.removeResource(this,z,P)});return function(z,P){return k.apply(this,arguments)}}();aa.removeAllResources=function(){var k=e._asyncToGenerator(function*(z){return(yield new Promise(function(P,R){p(["./support/resourceUtils"],P,R)})).removeAllResources(this,z)});return function(z){return k.apply(this,arguments)}}();
aa.resourceFromPath=function(k){return new v({portalItem:this,path:k})};aa.toJSON=function(){var k=this.extent;k={created:this.created&&this.created.getTime(),description:this.description,extent:k&&[[k.xmin,k.ymin],[k.xmax,k.ymax]],id:this.id,modified:this.modified&&this.modified.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,tags:this.tags,thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:this.typeKeywords,url:this.url};return l.fixJson(k)};
X.fromJSON=function(k){if(!k)return null;if(k.declaredClass)throw Error("JSON object is already hydrated");return new N({sourceJSON:k})};aa._getPostQuery=function(){const k=this.toJSON();for(const z in k)"tags"===z&&null!==k[z]&&(k[z]=k[z].join(", ")),"typeKeywords"===z&&null!==k[z]&&(k[z]=k[z].join(", ")),"extent"===z&&k[z]&&(k[z]=JSON.stringify(k[z]));return k};e._createClass(X,[{key:"displayName",get:function(){const k=this.type,z=this.typeKeywords||[];let P=k;"Feature Service"===k||"Feature Collection"===
k?P=-1<z.indexOf("Table")?"Table":-1<z.indexOf("Route Layer")?"Route Layer":-1<z.indexOf("Markup")?"Markup":"Feature Layer":"Image Service"===k?P=-1<z.indexOf("Elevation 3D Layer")?"Elevation Layer":-1<z.indexOf("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":"Scene Service"===k?P="Scene Layer":"Scene Package"===k?P="Scene Layer Package":"Stream Service"===k?P="Feature Layer":"Geoprocessing Service"===k&&this.portal&&this.portal.isPortal?P=-1<z.indexOf("Web Tool")?"Tool":"Geoprocessing Service":
"Geocoding Service"===k?P="Locator":"Geoenrichment Service"===k?P="GeoEnrichment Service":"Microsoft Powerpoint"===k?P="Microsoft PowerPoint":"GeoJson"===k?P="GeoJSON":"Globe Service"===k?P="Globe Layer":"Vector Tile Service"===k?P="Tile Layer":"netCDF"===k?P="NetCDF":"Map Service"===k?P=-1===z.indexOf("Spatiotemporal")&&(-1<z.indexOf("Hosted Service")||-1<z.indexOf("Tiled"))&&-1===z.indexOf("Relational")?"Tile Layer":"Map Image Layer":k&&-1<k.toLowerCase().indexOf("add in")?P=k.replace(/(add in)/gi,
"Add-In"):"datastore catalog service"===k?P="Big Data File Share":"Compact Tile Package"===k?P="Tile Package (tpkx)":"OGCFeatureServer"===k&&(P="OGC Feature Layer");return P}},{key:"iconUrl",get:function(){var k=this.type&&this.type.toLowerCase()||"";const z=this.typeKeywords||[];let P=!1,R=!1,D=!1,h=!1,c=!1,B=!1;0<k.indexOf("service")||"feature collection"===k||"kml"===k||"wms"===k||"wmts"===k||"wfs"===k?(P=-1<z.indexOf("Hosted Service"),"feature service"===k||"feature collection"===k||"kml"===k||
"wfs"===k?(R=-1<z.indexOf("Table"),D=-1<z.indexOf("Route Layer"),h=-1<z.indexOf("Markup"),c=-1!==z.indexOf("Spatiotemporal"),B=-1!==z.indexOf("UtilityNetwork"),k=c&&R?"spatiotemporaltable":R?"table":D?"routelayer":h?"markup":c?"spatiotemporal":P?"featureshosted":B?"utilitynetwork":"features"):k="map service"===k||"wms"===k||"wmts"===k?P||-1<z.indexOf("Tiled")||"wmts"===k?"maptiles":"mapimages":"scene service"===k?-1<z.indexOf("Line")?"sceneweblayerline":-1<z.indexOf("3DObject")?"sceneweblayermultipatch":
-1<z.indexOf("Point")?"sceneweblayerpoint":-1<z.indexOf("IntegratedMesh")?"sceneweblayermesh":-1<z.indexOf("PointCloud")?"sceneweblayerpointcloud":-1<z.indexOf("Polygon")?"sceneweblayerpolygon":-1<z.indexOf("Building")?"sceneweblayerbuilding":-1<z.indexOf("Voxel")?"sceneweblayervoxel":"sceneweblayer":"image service"===k?-1<z.indexOf("Elevation 3D Layer")?"elevationlayer":-1<z.indexOf("Tiled Imagery")?"tiledimagerylayer":"imagery":"stream service"===k?"streamlayer":"vector tile service"===k?"vectortile":
"datastore catalog service"===k?"datastorecollection":"geocoding service"===k?"geocodeservice":"geoprocessing service"===k?-1<z.indexOf("Web Tool")&&this.portal&&this.portal.isPortal?"tool":"layers":"layers"):k="web map"===k||"cityengine web scene"===k?"maps":"web scene"===k?-1<z.indexOf("ViewingMode-Local")?"webscenelocal":"websceneglobal":"web mapping application"===k||"mobile application"===k||"application"===k||"operation view"===k||"desktop application"===k?"apps":"map document"===k||"map package"===
k||"published map"===k||"scene document"===k||"globe document"===k||"basemap package"===k||"mobile basemap package"===k||"mobile map package"===k||"project package"===k||"project template"===k||"pro map"===k||"layout"===k||"layer"===k&&-1<z.indexOf("ArcGIS Pro")||"explorer map"===k&&z.indexOf("Explorer Document")?"mapsgray":"service definition"===k||"csv"===k||"shapefile"===k||"cad drawing"===k||"geojson"===k||"360 vr experience"===k||"netcdf"===k||"administrative report"===k?"datafiles":"explorer add in"===
k||"desktop add in"===k||"windows viewer add in"===k||"windows viewer configuration"===k?"appsgray":"arcgis pro add in"===k||"arcgis pro configuration"===k?"addindesktop":"rule package"===k||"file geodatabase"===k||"sqlite geodatabase"===k||"csv collection"===k||"kml collection"===k||"windows mobile package"===k||"map template"===k||"desktop application template"===k||"gml"===k||"arcpad package"===k||"code sample"===k||"form"===k||"document link"===k||"earth configuration"===k||"operations dashboard add in"===
k||"rules package"===k||"image"===k||"workflow manager package"===k||"explorer map"===k&&-1<z.indexOf("Explorer Mapping Application")||-1<z.indexOf("Document")?"datafilesgray":"network analysis service"===k||"geoprocessing service"===k||"geodata service"===k||"geometry service"===k||"geoprocessing package"===k||"locator package"===k||"geoprocessing sample"===k||"workflow manager service"===k?"toolsgray":"layer"===k||"layer package"===k||"explorer layer"===k?"layersgray":"scene package"===k?"scenepackage":
"mobile scene package"===k?"mobilescenepackage":"tile package"===k||"compact tile package"===k?"tilepackage":"task file"===k?"taskfile":"report template"===k?"report-template":"statistical data collection"===k?"statisticaldatacollection":"insights workbook"===k?"workbook":"insights model"===k?"insightsmodel":"insights page"===k?"insightspage":"insights theme"===k?"insightstheme":"hub initiative"===k?"hubinitiative":"hubpage"===k?"hubpage":"hub event"===k?"hubevent":"hub site application"===k?"hubsite":
"relational database connection"===k?"relationaldatabaseconnection":"big data file share"===k?"datastorecollection":"image collection"===k?"imagecollection":"style"===k?"style":"desktop style"===k?"desktopstyle":"dashboard"===k?"dashboard":"raster function template"===k?"rasterprocessingtemplate":"vector tile package"===k?"vectortilepackage":"ortho mapping project"===k?"orthomappingproject":"ortho mapping template"===k?"orthomappingtemplate":"solution"===k?"solutions":"geopackage"===k?"geopackage":
"deep learning package"===k?"deeplearningpackage":"real time analytic"===k?"realtimeanalytics":"big data analytic"===k?"bigdataanalytics":"feed"===k?"feed":"excalibur imagery project"===k?"excaliburimageryproject":"notebook"===k?"notebook":"storymap"===k?"storymap":"survey123 add in"===k?"survey123addin":"mission"===k?"mission":"mission report"===k?"missionreport":"quickcapture project"===k?"quickcaptureproject":"pro report"===k?"proreport":"urban model"===k?"urbanmodel":"web experience"===k?"experiencebuilder":
"web experience template"===k?"webexperiencetemplate":"workflow"===k?"workflow":"insights script"===k?"insightsscript":"kernel gateway connection"===k?"kernelgatewayconnection":"hub initiative template"===k?"hubinitiativetemplate":"storymap theme"===k?"storymaptheme":"knowledge graph"===k?"knowledgegraph":"native application"===k?"nativeapp":"native application installer"===k?"nativeappinstaller":"link chart"===k?"linkchart":"investigation"===k?"investigation":"ogcfeatureserver"===k?"features":"pro project"===
k?"proproject":"insights workbook package"===k?"insightsworkbookpackage":"maps";return k?O.getAssetUrl("esri/images/portal/"+k+"16.png"):null}},{key:"isLayer",get:function(){return-1<"Map Service;Feature Service;Feature Collection;Scene Service;Image Service;Stream Service;Vector Tile Service;WMTS;WMS".split(";").indexOf(this.type)}},{key:"itemUrl",get:function(){const k=this.get("portal.restUrl");return k?k+"/content/items/"+this.id:null}},{key:"thumbnailUrl",get:function(){const k=this.itemUrl,
z=this.thumbnail;return k&&z?this.portal._normalizeUrl(`${k}/info/${z}?f=json`):null}},{key:"userItemUrl",get:function(){const k=this.get("portal.restUrl");if(!k)return null;const z=this.owner||this.get("portal.user.username");return z?`${k}/content/users/${this.ownerFolder?`${z}/${this.ownerFolder}`:z}/items/${this.id}`:null}}]);return X}(u.JSONSupportMixin(F));A.__decorate([J.property({type:["private","shared","org","public"]})],u.prototype,"access",void 0);A.__decorate([J.property()],u.prototype,
"accessInformation",void 0);A.__decorate([J.property({type:String})],u.prototype,"apiKey",void 0);A.__decorate([J.property({json:{read:{source:"appProxies"}}})],u.prototype,"applicationProxies",void 0);A.__decorate([J.property()],u.prototype,"avgRating",void 0);A.__decorate([J.property()],u.prototype,"categories",void 0);A.__decorate([J.property({type:Date})],u.prototype,"created",void 0);A.__decorate([J.property()],u.prototype,"culture",void 0);A.__decorate([J.property()],u.prototype,"description",
void 0);A.__decorate([J.property({readOnly:!0})],u.prototype,"displayName",null);A.__decorate([J.property({type:q})],u.prototype,"extent",void 0);A.__decorate([f.reader("extent")],u.prototype,"readExtent",null);A.__decorate([J.property()],u.prototype,"groupCategories",void 0);A.__decorate([J.property({readOnly:!0})],u.prototype,"iconUrl",null);A.__decorate([J.property()],u.prototype,"id",void 0);A.__decorate([J.property({readOnly:!0})],u.prototype,"isLayer",null);A.__decorate([J.property()],u.prototype,
"itemControl",void 0);A.__decorate([J.property({readOnly:!0})],u.prototype,"itemUrl",null);A.__decorate([J.property()],u.prototype,"licenseInfo",void 0);A.__decorate([J.property({type:Date})],u.prototype,"modified",void 0);A.__decorate([J.property()],u.prototype,"name",void 0);A.__decorate([J.property()],u.prototype,"numComments",void 0);A.__decorate([J.property()],u.prototype,"numRatings",void 0);A.__decorate([J.property()],u.prototype,"numViews",void 0);A.__decorate([J.property()],u.prototype,"owner",
void 0);A.__decorate([J.property()],u.prototype,"ownerFolder",void 0);A.__decorate([J.property({type:H})],u.prototype,"portal",void 0);A.__decorate([J.property()],u.prototype,"screenshots",void 0);A.__decorate([J.property()],u.prototype,"size",void 0);A.__decorate([J.property()],u.prototype,"snippet",void 0);A.__decorate([J.property()],u.prototype,"sourceJSON",void 0);A.__decorate([J.property()],u.prototype,"tags",void 0);A.__decorate([J.property()],u.prototype,"thumbnail",void 0);A.__decorate([J.property({readOnly:!0})],
u.prototype,"thumbnailUrl",null);A.__decorate([J.property()],u.prototype,"title",void 0);A.__decorate([J.property()],u.prototype,"type",void 0);A.__decorate([J.property()],u.prototype,"typeKeywords",void 0);A.__decorate([J.property()],u.prototype,"url",void 0);A.__decorate([J.property({readOnly:!0})],u.prototype,"userItemUrl",null);return u=N=A.__decorate([E.subclass("esri.portal.PortalItem")],u)})},"esri/portal/PortalItemResource":function(){define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Accessor ../core/Error ../core/Logger ../core/maybe ../core/urlUtils ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/decorators/cast ../core/jsonMap ../core/accessorSupport/decorators/subclass".split(" "),
function(p,e,A,O,g,u,l,F,r,w,J,U,n){const y=u.getLogger("esri.portal.PortalItemResource");O=function(C){function f(q){q=C.call(this,q)||this;q.portalItem=null;return q}e._inheritsLoose(f,C);var E=f.prototype;E.normalizeCtorArgs=function(q){return q&&q.portalItem&&q.path?{...q,path:this.normalizePath(q.path,q.portalItem)}:q};E._castPath=function(q){return this.normalizePath(q,this.portalItem)};E.fetch=function(q="json",H){const v=this.url;if(l.isNone(v))throw new g("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");
return this.portalItem.portal._request(v,{responseType:q,query:{token:this.portalItem.apiKey},signal:l.get(H,"signal")})};E.update=function(){var q=e._asyncToGenerator(function*(H,v){return(yield new Promise(function(K,N){p(["./support/resourceUtils"],K,N)})).addOrUpdateResource(this,"update",H,v)});return function(H,v){return q.apply(this,arguments)}}();E.hasPath=function(){return l.isSome(this.path)};E.normalizePath=function(q,H){if(l.isNone(q))return q;q=q.replace(/^\/+/,"");l.isSome(H)&&F.isAbsolute(q)&&
(q=F.makeRelative(q,H.itemUrl));return q.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,"")};e._createClass(f,[{key:"path",set:function(q){l.isSome(q)&&F.isAbsolute(q)?y.error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",q)}},{key:"url",get:function(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}},{key:"itemRelativeUrl",get:function(){return this.portalItem&&this.path?`./resources/${this.path}`:null}}]);
return f}(O);A.__decorate([r.property()],O.prototype,"portalItem",void 0);A.__decorate([r.property({type:String,value:null})],O.prototype,"path",null);A.__decorate([J.cast("path")],O.prototype,"_castPath",null);A.__decorate([r.property({type:String,readOnly:!0})],O.prototype,"url",null);A.__decorate([r.property({type:String,readOnly:!0})],O.prototype,"itemRelativeUrl",null);return O=A.__decorate([n.subclass("esri.portal.PortalItemResource")],O)})},"esri/portal/PortalRating":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Accessor ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/jsonMap ../core/accessorSupport/decorators/subclass".split(" "),
function(p,e,A,O,g,u,l,F,r){A=function(w){function J(U){U=w.call(this,U)||this;U.created=null;U.rating=null;return U}p._inheritsLoose(J,w);return J}(A);e.__decorate([O.property()],A.prototype,"created",void 0);e.__decorate([O.property()],A.prototype,"rating",void 0);return A=e.__decorate([r.subclass("esri.portal.PortalRating")],A)})},"esri/support/basemapDefinitions":function(){define(["exports","../chunks/_rollupPluginBabelHelpers","../assets","../intl/messages"],function(p,e,A,O){function g(){g=
e._asyncToGenerator(function*(u){if(u){var l=-1<u.indexOf("-vector")?u.slice(0,u.indexOf("-vector")):u,F=yield O.fetchMessageBundle("esri/t9n/basemaps");return F[u]||F[l]}});return g.apply(this,arguments)}p.esriBasemapDefinitions={streets:{id:"streets",get thumbnailUrl(){return A.getAssetUrl("esri/images/basemap/streets.jpg")},baseMapLayers:[{id:"streets-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Street Map",
showLegend:!1,visibility:!0,opacity:1}]},satellite:{id:"satellite",get thumbnailUrl(){return A.getAssetUrl("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",get thumbnailUrl(){return A.getAssetUrl("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",
url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Boundaries and Places",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",get thumbnailUrl(){return A.getAssetUrl("esri/images/basemap/terrain.jpg")},
baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},topo:{id:"topo",
get thumbnailUrl(){return A.getAssetUrl("esri/images/basemap/topo.jpg")},baseMapLayers:[{id:"topo-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Topo Map",showLegend:!1,visibility:!0,opacity:1}]},gray:{id:"gray",get thumbnailUrl(){return A.getAssetUrl("esri/images/basemap/gray.jpg")},baseMapLayers:[{id:"gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer",
layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"dark-gray":{id:"dark-gray",get thumbnailUrl(){return A.getAssetUrl("esri/images/basemap/dark-gray.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",
url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"dark-gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",get thumbnailUrl(){return A.getAssetUrl("esri/images/basemap/oceans.jpg")},
baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"national-geographic":{id:"national-geographic",
get thumbnailUrl(){return A.getAssetUrl("esri/images/basemap/national-geographic.jpg")},baseMapLayers:[{id:"national-geographic-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer",title:"NatGeo World Map",showLegend:!1,layerType:"ArcGISTiledMapServiceLayer",visibility:!0,opacity:1}]},osm:{id:"osm",get thumbnailUrl(){return A.getAssetUrl("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,
visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",get thumbnailUrl(){return A.getAssetUrl("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",
layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},"gray-vector":{id:"gray-vector",get thumbnailUrl(){return A.getAssetUrl("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",
layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},"streets-vector":{id:"streets-vector",get thumbnailUrl(){return A.getAssetUrl("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},"topo-vector":{id:"topo-vector",get thumbnailUrl(){return A.getAssetUrl("esri/images/basemap/topo-vector.jpg")},
baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},"streets-night-vector":{id:"streets-night-vector",
get thumbnailUrl(){return A.getAssetUrl("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",get thumbnailUrl(){return A.getAssetUrl("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",
url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",get thumbnailUrl(){return A.getAssetUrl("esri/images/basemap/streets-navigation.jpg")},
baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"arcgis-imagery":{get thumbnailUrl(){return A.getAssetUrl("esri/images/basemap/hybrid.jpg")},title:"Imagery Hybrid",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"},
{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-imagery-standard":{get thumbnailUrl(){return A.getAssetUrl("esri/images/basemap/satellite.jpg")},title:"Imagery",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"}]},"arcgis-imagery-labels":{title:"Hybrid [Reference]",
baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-light-gray":{get thumbnailUrl(){return A.getAssetUrl("esri/images/basemap/gray-vector.jpg")},title:"Light Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Base",title:"Light Gray Canvas Base"},{layerType:"VectorTileLayer",
styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Labels",title:"Light Gray Canvas Labels",isReference:!0}]},"arcgis-dark-gray":{get thumbnailUrl(){return A.getAssetUrl("esri/images/basemap/dark-gray.jpg")},title:"Dark Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Base",title:"Dark Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Labels",
title:"Dark Gray Canvas Labels",isReference:!0}]},"arcgis-navigation":{get thumbnailUrl(){return A.getAssetUrl("esri/images/basemap/streets-navigation.jpg")},title:"Navigation",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Navigation",title:"World Navigation Map"}]},"arcgis-navigation-night":{title:"Navigation (Dark Mode)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:NavigationNight",
title:"World Navigation Map (Dark Mode)"}]},"arcgis-streets":{get thumbnailUrl(){return A.getAssetUrl("esri/images/basemap/streets-vector.jpg")},title:"Streets",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Streets",title:"World Street Map"}]},"arcgis-streets-night":{get thumbnailUrl(){return A.getAssetUrl("esri/images/basemap/streets-night.jpg")},title:"Streets (Night)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsNight",
title:"World Street Map (Night)"}]},"arcgis-streets-relief":{get thumbnailUrl(){return A.getAssetUrl("esri/images/basemap/streets-relief.jpg")},title:"Streets (with Relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsRelief:Base",title:"World Street Map (with Relief)"}]},
"arcgis-topographic":{get thumbnailUrl(){return A.getAssetUrl("esri/images/basemap/topo.jpg")},title:"Topographic",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Topographic:Base",title:"World Topographic Map"}]},"arcgis-oceans":{get thumbnailUrl(){return A.getAssetUrl("esri/images/basemap/oceans.jpg")},
title:"Oceans",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Ocean Base",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Oceans:Labels",title:"World Ocean Reference",isReference:!0}]},"osm-standard":{title:"OpenStreetMap",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Standard",
title:"OpenStreetMap"}]},"osm-standard-relief":{title:"OpenStreetMap (with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StandardRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-streets":{title:"OpenStreetMap (Streets)",baseMapLayers:[{layerType:"VectorTileLayer",
styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Streets",title:"OpenStreetMap (Streets)"}]},"osm-streets-relief":{title:"OpenStreetMap (Streets with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StreetsRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},
"osm-light-gray":{title:"OpenStreetMap (Light Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Base",title:"OSM (Light Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Labels",title:"OSM (Light Gray Reference)",isReference:!0}]},"osm-dark-gray":{title:"OpenStreetMap (Dark Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",
styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Base",title:"OSM (Dark Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Labels",title:"OSM (Dark Gray Reference)",isReference:!0}]},"arcgis-terrain":{title:"Terrain with Labels",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},
{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Base",title:"World Terrain Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Detail",title:"World Terrain Reference",isReference:!0}]},"arcgis-community":{title:"Community",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Community",title:"Community"}]},
"arcgis-charted-territory":{title:"Charted Territory",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ChartedTerritory:Base",title:"Charted Territory"}]},"arcgis-colored-pencil":{title:"Colored Pencil",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ColoredPencil",
title:"Colored Pencil"}]},"arcgis-nova":{title:"Nova",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Nova",title:"Nova"}]},"arcgis-modern-antique":{title:"Modern Antique",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ModernAntique:Base",
title:"Modern Antique"}]},"arcgis-midcentury":{title:"Mid-Century",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Midcentury",title:"Mid-Century"}]},"arcgis-newspaper":{title:"Newspaper",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Newspaper",title:"Newspaper"}]},"arcgis-hillshade-light":{title:"Hillshade",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",
showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"}]},"arcgis-hillshade-dark":{title:"Hillshade (Dark)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade (Dark)",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade_Dark/MapServer"}]}};p.getBasemapTitle=function(u){return g.apply(this,arguments)};Object.defineProperty(p,"__esModule",{value:!0})})},
"esri/webdoc/support/writeUtils":function(){define("exports ../../core/Error ../../core/lang ../../core/maybe ../../core/object ../../core/accessorSupport/extensions/serializableProperty/writer".split(" "),function(p,e,A,O,g,u){function l(J){return!("feature"!==J.type||J.url||!J.source||"memory"!==J.source.type)}function F(J,U){"maxScale"in J&&(U.maxScale=u.numberToJSON(J.maxScale));"minScale"in J&&(U.minScale=u.numberToJSON(J.minScale))}const r=new Set("bing-maps imagery imagery-tile map-image open-street-map tile unknown unsupported vector-tile web-tile".split(" ")),
w=new Set("csv feature geo-rss group imagery imagery-tile kml map-image map-notes ogc-feature tile unknown unsupported vector-tile web-tile wfs".split(" "));p.disableRestrictedWriting=function(J){r.add(J);w.add(J)};p.enableRestrictedWriting=function(J){r.delete(J);w.delete(J)};p.getLayerJSON=function(J,U,n){if(!("write"in J&&J.write))return n&&n.messages&&n.messages.push(new e("layer:unsupported",`Layers (${J.title}, ${J.id}) of type '${J.declaredClass}' cannot be persisted`,{layer:J})),null;if(n.restrictedWebMapWriting){var y=
"basemap"===n.layerContainerType?r:"operational-layers"===n.layerContainerType?w:null;y=O.isSome(y)?y.has(J.type)&&!l(J):!0}else y=!0;if(y)return U={},J.write(U,n)?U:null;if(O.isSome(U)&&(n=U=A.clone(U),l(J)?(y=(y=g.getDeepValue("featureCollection.layers",n))&&y[0]&&y[0].layerDefinition)&&F(J,y):"stream"===J.type?(y=n.layerDefinition=n.layerDefinition||{},F(J,y)):"group"!==J.type&&F(J,n),"blendMode"in J&&(n.blendMode=J.blendMode,"normal"===n.blendMode&&delete n.blendMode),n.opacity=u.numberToJSON(J.opacity),
n.title=J.title||"Layer",n.visibility=J.visible,"legendEnabled"in J&&"wmts"!==J.type))if(l(J)){if(n=n.featureCollection)n.showLegend=J.legendEnabled}else n.showLegend=J.legendEnabled;return U};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/graphics/sources/geojson/geojson":function(){define(["exports","../../../../core/Error","../../OptimizedFeature","../../OptimizedGeometry"],function(p,e,A,O){function*g(q){switch(q.type){case "Feature":yield q;break;case "FeatureCollection":for(const H of q.features)H&&
(yield H)}}function*u(q){if(!q)return null;switch(q.type){case "Point":yield q.coordinates;break;case "LineString":case "MultiPoint":yield*q.coordinates;break;case "MultiLineString":case "Polygon":for(const H of q.coordinates)yield*H;break;case "MultiPolygon":for(const H of q.coordinates)for(const v of H)yield*v}}function*l(q,H={}){const {geometryType:v,objectIdField:K}=H;for(const L of q){var N;const {geometry:X,properties:aa,id:k}=L;if(X&&E[X.type]!==v)continue;q=aa||{};let z=null!=(N=q[K])?N:null;
K&&null!=k&&!q[K]&&(q[K]=z=k);yield new A(X?J(new O,X,H):null,q,null,z)}}function F(q){for(const H of q)if(2<H.length)return!0;return!1}function r(q){let H=0;for(let v=0;v<q.length;v++){const K=q[v],N=q[(v+1)%q.length];H+=K[0]*N[1]-N[0]*K[1]}return 0>=H}function w(q){const H=q[0],v=q[q.length-1];H[0]===v[0]&&H[1]===v[1]&&H[2]===v[2]||q.push(H);return q}function J(q,H,v){switch(H.type){case "LineString":return y(q,H.coordinates,v),q;case "MultiLineString":for(const N of H.coordinates)y(q,N,v);return q;
case "MultiPoint":return y(q,H.coordinates,v),q;case "MultiPolygon":for(var K of H.coordinates)for(U(q,K[0],v),H=1;H<K.length;H++)n(q,K[H],v);return q;case "Point":return f(q,H.coordinates,v),q;case "Polygon":K=H.coordinates;U(q,K[0],v);for(H=1;H<K.length;H++)n(q,K[H],v);return q}}function U(q,H,v){H=w(H);r(H)?y(q,H,v):C(q,H,v)}function n(q,H,v){H=w(H);r(H)?C(q,H,v):y(q,H,v)}function y(q,H,v){for(const K of H)f(q,K,v);q.lengths.push(H.length)}function C(q,H,v){for(let K=H.length-1;0<=K;K--)f(q,H[K],
v);q.lengths.push(H.length)}function f(q,H,v){const [K,N,L]=H;q.coords.push(K,N);v.hasZ&&q.coords.push(L||0)}const E={LineString:"esriGeometryPolyline",MultiLineString:"esriGeometryPolyline",MultiPoint:"esriGeometryMultipoint",Point:"esriGeometryPoint",Polygon:"esriGeometryPolygon",MultiPolygon:"esriGeometryPolygon"};p.createOptimizedFeatures=function(q,H){return Array.from(l(g(q),H))};p.getGeometryType=function(q){return E[q]};p.inferLayerProperties=function(q,H={}){const v=[];var K=new Set;const N=
new Set;var L=!1;let X=Number.NEGATIVE_INFINITY,aa=null,k=!1,z=void 0;({geometryType:H=null}=H);var P=!1;for(const R of g(q)){const {geometry:D,properties:h,id:c}=R;if(D&&(H||(H=E[D.type]),E[D.type]!==H))continue;L||(L=u(D),L=F(L));!k&&(k=null!=c)&&(z=typeof c,"number"===z&&(aa=Object.keys(h).filter(B=>h[B]===c)));k&&"number"===z&&null!=c&&(X=Math.max(X,c),1<aa.length?aa=aa.filter(B=>h[B]===c):1===aa.length&&(aa=h[aa[0]]===c?aa:[]));if(!P&&h){q=!0;for(const B in h)if(!K.has(B))if(P=h[B],null==P)q=
!1,N.add(B);else{a:switch(typeof P){case "string":P="esriFieldTypeString";break a;case "number":P="esriFieldTypeDouble";break a;default:P="unknown"}"unknown"===P?N.add(B):(N.delete(B),K.add(B),v.push({name:B,alias:B,type:P}))}P=q}}if(K=aa&&1===aa.length&&aa[0]||null)for(const R of v)R.name===K&&(R.type="esriFieldTypeOID");return{fields:v,geometryType:H,hasZ:L,maxObjectId:Math.max(0,X),objectIdFieldName:K,objectIdFieldType:z,unknownFields:Array.from(N)}};p.validateGeoJSON=function(q){if(!q)throw new e("geojson-layer:empty",
"GeoJSON data is empty");if("Feature"!==q.type&&"FeatureCollection"!==q.type)throw new e("geojson-layer:unsupported-geojson-object","missing or not supported GeoJSON object type",{data:q});({crs:q}=q);if(q){var H="string"===typeof q?q:"name"===q.type?q.properties.name:"EPSG"===q.type?q.properties.code:null,v=/.*(CRS84H?|4326)$/i;if(!H||!v.test(H))throw new e("geojson-layer:unsupported-crs","unsupported GeoJSON 'crs' member",{crs:q});}};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/graphics/sources/support/clientSideDefaults":function(){define(["exports",
"../../../../core/has","../../../../core/lang","../../data/QueryEngineCapabilities","../../../../symbols/support/defaultsJSON"],function(p,e,A,O,g){p.createCapabilities=function(u,l){return{attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:u},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:l,supportsDelete:l,supportsEditing:l,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAttachments:!1,
supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:l,supportsExceedsLimitStatistics:!0},query:O.queryCapabilities,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0},editing:{supportsGeometryUpdate:l,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1}}};p.createDefaultAttributesFunction=
function(u,l){if(e("csp-restrictions"))return()=>({[l]:null,...u});try{let F=`this.${l} = null;`;for(const w in u){const J=w.indexOf(".")?`["${w}"]`:`.${w}`;F+=`this${J} = ${JSON.stringify(u[w])};`}const r=new Function(F);return()=>new r}catch(F){return()=>({[l]:null,...u})}};p.createDefaultTemplate=function(u={}){return[{name:"New Feature",description:"",prototype:{attributes:A.clone(u)}}]};p.createDrawingInfo=function(u){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===u||"esriGeometryMultipoint"===
u?g.defaultPointSymbolJSON:"esriGeometryPolyline"===u?g.defaultPolylineSymbolJSON:g.defaultPolygonSymbolJSON}}};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/symbols/support/defaultsJSON":function(){define(["exports"],function(p){const e=[252,146,31,255],A={type:"esriSMS",style:"esriSMSCircle",size:6,color:e,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},O={type:"esriSLS",style:"esriSLSSolid",width:.75,color:e};p.defaultColor=e;p.defaultOutlineColor=[153,
153,153,255];p.defaultPointSymbolJSON=A;p.defaultPolygonSymbolJSON={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}};p.defaultPolylineSymbolJSON=O;p.defaultTextSymbolJSON={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0};p.errorPointSymbolJSON={type:"esriSMS",
style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5};p.errorPolygonSymbolJSON={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null};p.errorPolylineSymbolJSON={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/graphics/sources/support/sourceUtils":function(){define(["require","exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../geometry/support/spatialReferenceUtils","../../../support/fieldUtils"],
function(p,e,A,O,g){function u(C){return new J(C)}function l(){return F.apply(this,arguments)}function F(){F=A._asyncToGenerator(function*(){return y?y:y=yield new Promise(function(C,f){p(["../../../../geometry/geometryEngineJSON"],C,f)})});return F.apply(this,arguments)}function r(){r=A._asyncToGenerator(function*(C,f){!O.isValid(C)||"esriGeometryPolygon"!==f&&"esriGeometryPolyline"!==f||(yield l())});return r.apply(this,arguments)}let w=function(){this.description=this.code=null},J=function(C){this.error=
new w;this.objectId=this.globalId=null;this.success=!1;this.uniqueId=null;this.error.description=C},U=function(C){this.globalId=null;this.success=!0;this.objectId=this.uniqueId=C};const n=new Set;let y;e.createFeatureEditErrorResult=u;e.createFeatureEditSuccessResult=function(C){return new U(C)};e.loadGeometryEngine=l;e.loadGeometryEngineForSimplify=function(C,f){return r.apply(this,arguments)};e.mixAttributes=function(C,f,E,q,H=!1,v){n.clear();for(const X in E){const aa=C.get(X);if(aa){var K=E[X];
{var N=aa;var L=K;let k=L;"string"===typeof L&&g.isNumericField(N)?k=parseFloat(L):null!=L&&g.isStringField(N)&&"string"!==typeof L&&(k=String(L));N=g.sanitizeNullFieldValue(k)}N!==K&&v&&v.push({name:"invalid-value-type",message:"attribute value was converted to match the field type",details:{field:aa,originalValue:K,sanitizedValue:N}});n.add(aa.name);if(aa&&(H||aa.editable)){if(K=g.validateFieldValue(aa,N))return u(g.validationErrorToString(K,aa,N));f[aa.name]=N}}}if(q)for(const X of q)if(!n.has(X.name))return u(`missing required field "${X.name}"`);
return null};e.simplify=function(C,f){if(!C||!O.isValid(f))return C;if("rings"in C||"paths"in C){if(!y)throw new TypeError("geometry engine not loaded");return y.simplify(f,C)}return C};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/layers/support/fieldType":function(){define(["exports","../../core/jsonMap"],function(p,e){e=new e.JSONMap({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",
esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"});p.kebabDict=e;Object.defineProperty(p,"__esModule",{value:!0})})},"*noref":1}});
define("../../../../chunks/_rollupPluginBabelHelpers ../../../../request ../../../../core/Error ../../../../geometry/support/jsonUtils ../../../../geometry/support/spatialReferenceUtils ../../featureConversionUtils ../../data/FeatureStore ../../data/projectionSupport ../../data/QueryEngine ./geojson ../support/clientSideDefaults ../support/sourceUtils ../../../support/FieldsIndex ../../../support/fieldType ../../../support/fieldUtils".split(" "),function(p,e,A,O,g,u,l,F,r,w,J,U,n,y,C){const f={hasAttachments:!1,
capabilities:"query, editing, create, delete, update",useStandardizedQueries:!0,supportsCoordinatesQuantization:!0,supportsReturningQueryGeometry:!0,advancedQueryCapabilities:{supportsQueryAttachments:!1,supportsStatistics:!0,supportsPercentileStatistics:!0,supportsReturningGeometryCentroid:!0,supportsQueryWithDistance:!0,supportsDistinct:!0,supportsReturningQueryExtent:!0,supportsReturningGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQueryWithResultType:!1,
supportsSqlExpression:!0,supportsDisjointSpatialRel:!0}};return function(){function E(){this._queryEngine=null}var q=E.prototype;q.destroy=function(){this._queryEngine&&this._queryEngine&&this._queryEngine.destroy();this._queryEngine=this._requiredFields=this._fieldsIndex=this._createDefaultAttributes=null};q.load=function(){var H=p._asyncToGenerator(function*(v){var K=[];yield this._checkProjection(v.spatialReference);var N=null;v.url&&(N=(yield e(v.url,{responseType:"json"})).data,yield w.validateGeoJSON(N));
const L=w.inferLayerProperties(N,{geometryType:v.geometryType}),X=v.fields||L.fields||[],aa=null!=v.hasZ?v.hasZ:L.hasZ,k=L.geometryType,z=v.objectIdField||("number"===L.objectIdFieldType?L.objectIdFieldName:"OBJECTID")||"OBJECTID",P=v.spatialReference||g.WGS84;v=v.timeInfo;if(!k)throw new A("geojson-layer:missing-property","geometryType not set and couldn't be inferred from the provided features");"string"===L.objectIdFieldType&&K.push({name:"geojson-layer:unsupported-id-type",message:"Feature ids are of type string and can't be honored."});
X===L.fields&&0<L.unknownFields.length&&K.push({name:"geojson-layer:unknown-field-types",message:"Some fields types couldn't be inferred from the features and were dropped",details:{unknownFields:L.unknownFields}});if(z){let h=null;X.some(c=>c.name===z?(h=c,!0):!1)?(h.type="esriFieldTypeOID",h.editable=!1,h.nullable=!1):X.unshift({alias:z,name:z,type:"esriFieldTypeOID",editable:!1,nullable:!1})}for(var R of X){null==R.name&&(R.name=R.alias);null==R.alias&&(R.alias=R.name);if(!R.name)throw new A("geojson-layer:invalid-field-name",
"field name is missing",{field:R});R.name===z&&(R.type="esriFieldTypeOID");if(-1===y.kebabDict.jsonValues.indexOf(R.type))throw new A("geojson-layer:invalid-field-type",`invalid type for field "${R.name}"`,{field:R});}R={};this._requiredFields=[];for(var D of X)if("esriFieldTypeOID"!==D.type&&"esriFieldTypeGlobalID"!==D.type){D.editable=null==D.editable?!0:!!D.editable;D.nullable=null==D.nullable?!0:!!D.nullable;const h=C.getFieldDefaultValue(D);D.nullable||void 0!==h?R[D.name]=h:this._requiredFields.push(D)}this._fieldsIndex=
new n(X);v&&(v.startTimeField&&((D=this._fieldsIndex.get(v.startTimeField))?(v.startTimeField=D.name,D.type="esriFieldTypeDate"):v.startTimeField=null),v.endTimeField&&((D=this._fieldsIndex.get(v.endTimeField))?(v.endTimeField=D.name,D.type="esriFieldTypeDate"):v.endTimeField=null),v.trackIdField&&((D=this._fieldsIndex.get(v.trackIdField))?v.trackIdField=D.name:(v.trackIdField=null,K.push({name:"geojson-layer:invalid-timeInfo-trackIdField",message:"trackIdField is missing",details:{timeInfo:v}}))),
v.startTimeField||v.endTimeField||(K.push({name:"geojson-layer:invalid-timeInfo",message:"startTimeField and endTimeField are missing",details:{timeInfo:v}}),v=null));K={warnings:K,featureErrors:[],layerDefinition:{...f,drawingInfo:J.createDrawingInfo(k),templates:J.createDefaultTemplate(R),extent:null,geometryType:k,objectIdField:z,fields:X,hasZ:!!aa,timeInfo:v}};this._queryEngine=new r["default"]({fields:X,geometryType:k,hasM:!1,hasZ:aa,objectIdField:z,spatialReference:P,timeInfo:v,featureStore:new l({geometryType:k,
hasM:!1,hasZ:aa}),cacheSpatialQueries:!0});this._createDefaultAttributes=J.createDefaultAttributesFunction(R,z);this._nextObjectId=L.maxObjectId+1;N=w.createOptimizedFeatures(N,{geometryType:k,hasZ:aa,objectIdField:"number"===L.objectIdFieldType?z:null});if(!g.equals(P,g.WGS84))for(const h of N)h.geometry&&(h.geometry=u.convertFromGeometry(F.project(u.convertToGeometry(h.geometry,k,aa,!1),g.WGS84,P)));this._loadInitialFeatures(K,N);return K});return function(v){return H.apply(this,arguments)}}();
q.applyEdits=function(){var H=p._asyncToGenerator(function*(v){const {spatialReference:K,geometryType:N}=this._queryEngine;yield Promise.all([U.loadGeometryEngineForSimplify(K,N),F.checkProjectionSupport(v.adds,K),F.checkProjectionSupport(v.updates,K)]);return this._applyEdits(v)});return function(v){return H.apply(this,arguments)}}();q.queryFeatures=function(H={},v={}){return this._queryEngine.executeQuery(H,v.signal)};q.queryFeatureCount=function(H={},v={}){return this._queryEngine.executeQueryForCount(H,
v.signal)};q.queryObjectIds=function(H={},v={}){return this._queryEngine.executeQueryForIds(H,v.signal)};q.queryExtent=function(H={},v={}){return this._queryEngine.executeQueryForExtent(H,v.signal)};q.querySnapping=function(H,v={}){return this._queryEngine.executeQueryForSnapping(H,v.signal)};q._loadInitialFeatures=function(H,v){const {featureStore:K,objectIdField:N}=this._queryEngine,L=[];for(const X of v){v=this._createDefaultAttributes();const aa=U.mixAttributes(this._fieldsIndex,v,X.attributes,
this._requiredFields,!0,H.warnings);aa?H.featureErrors.push(aa):(this._assignObjectId(v,X.attributes,!0),X.attributes=v,X.objectId=v[N],L.push(X))}K.addMany(L);H.layerDefinition.extent=this._queryEngine.fullExtent;if(H.layerDefinition.timeInfo){const {start:X,end:aa}=this._queryEngine.timeExtent;H.layerDefinition.timeInfo.timeExtent=[X,aa]}return H};q._applyEdits=function(H){const {adds:v,updates:K,deletes:N}=H;H={addResults:[],deleteResults:[],updateResults:[],uidToObjectId:{}};v&&v.length&&this._applyAddEdits(H,
v);K&&K.length&&this._applyUpdateEdits(H,K);if(N&&N.length){for(const L of N)H.deleteResults.push(U.createFeatureEditSuccessResult(L));this._queryEngine.featureStore.removeManyById(N)}return{fullExtent:this._queryEngine.fullExtent,timeExtent:this._queryEngine.timeExtent,featureEditResults:H}};q._applyAddEdits=function(H,v){const {addResults:K}=H,{geometryType:N,hasM:L,hasZ:X,objectIdField:aa,spatialReference:k,featureStore:z}=this._queryEngine,P=[];for(const R of v){if(R.geometry&&N!==O.getJsonType(R.geometry)){K.push(U.createFeatureEditErrorResult("Incorrect geometry type."));
continue}v=this._createDefaultAttributes();const D=U.mixAttributes(this._fieldsIndex,v,R.attributes,this._requiredFields);D?K.push(D):(this._assignObjectId(v,R.attributes),R.attributes=v,null!=R.uid&&(H.uidToObjectId[R.uid]=R.attributes[aa]),R.geometry&&(R.geometry=F.project(U.simplify(R.geometry,k),R.geometry.spatialReference,k)),P.push(R),K.push(U.createFeatureEditSuccessResult(R.attributes[aa])))}z.addMany(u.convertFromFeatures([],P,N,X,L,aa))};q._applyUpdateEdits=function({updateResults:H},v){const {geometryType:K,
hasM:N,hasZ:L,objectIdField:X,spatialReference:aa,featureStore:k}=this._queryEngine;for(const z of v){const {attributes:P,geometry:R}=z;v=P&&P[X];if(null==v){H.push(U.createFeatureEditErrorResult(`Identifier field ${X} missing`));continue}if(!k.has(v)){H.push(U.createFeatureEditErrorResult(`Feature with object id ${v} missing`));continue}const D=u.convertToFeature(k.getFeature(v),K,L,N);if(R){if(K!==O.getJsonType(R)){H.push(U.createFeatureEditErrorResult("Incorrect geometry type."));continue}D.geometry=
F.project(U.simplify(R,aa),R.spatialReference,aa)}if(P){const h=U.mixAttributes(this._fieldsIndex,D.attributes,P,this._requiredFields);if(h){H.push(h);continue}}k.add(u.convertFromFeature(D,K,L,N,X));H.push(U.createFeatureEditSuccessResult(v))}};q._assignObjectId=function(H,v,K=!1){const N=this._queryEngine.objectIdField;K?isFinite(v[N])?H[N]=v[N]:H[N]=this._nextObjectId++:H[N]=this._nextObjectId++};q._checkProjection=function(){var H=p._asyncToGenerator(function*(v){try{yield F.checkProjectionSupport(g.WGS84,
v)}catch{throw new A("geojson-layer","Projection not supported");}});return function(v){return H.apply(this,arguments)}}();return E}()});