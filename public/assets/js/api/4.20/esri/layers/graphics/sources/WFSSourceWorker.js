// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.20/esri/copyright.txt for details.
//>>built
require({cache:{"esri/layers/graphics/featureConversionUtils":function(){define("exports ../../core/Error ../../core/Logger ../../geometry/support/jsonUtils ./OptimizedFeature ./OptimizedFeatureSet ./OptimizedGeometry".split(" "),function(p,c,x,K,g,u,n){function E(h,w){return h?w?4:3:w?3:2}function t(h,w,R,S){if(h){if(R)return w&&S?ka:oa;if(w&&S)return ua}else if(w&&S)return oa;return La}function v({scale:h,translate:w},R){return Math.round((R-w[0])/h[0])}function J({scale:h,translate:w},R){return Math.round((w[1]-
R)/h[1])}function W({scale:h,translate:w},R){return R*h[0]+w[0]}function q({scale:h,translate:w},R){return w[1]-R*h[1]}function A(h){h=h.coords;return{x:h[0],y:h[1]}}function B(h,w){h.coords[0]=w.x;h.coords[1]=w.y;return h}function e(h){h=h.coords;return{x:h[0],y:h[1],z:h[2]}}function y(h,w){h.coords[0]=w.x;h.coords[1]=w.y;h.coords[2]=w.z;return h}function r(h){h=h.coords;return{x:h[0],y:h[1],m:h[2]}}function G(h,w){h.coords[0]=w.x;h.coords[1]=w.y;h.coords[2]=w.m;return h}function F(h){h=h.coords;
return{x:h[0],y:h[1],z:h[2],m:h[3]}}function O(h,w){h.coords[0]=w.x;h.coords[1]=w.y;h.coords[2]=w.z;h.coords[3]=w.m;return h}function P(h,w){return h&&w?O:h?y:w?G:B}function M(h,w,R,S,I){R=P(R,S);for(const N of w){const {geometry:Y,attributes:ca}=N;let ja;Y&&(ja=R(new n,Y));h.push(new g(ja,ca,null,ca[I]))}return h}function Z(h,w,R,S){for(const I of w){const {geometry:N,attributes:Y}=I;let ca;N&&(ca=aa(N,R,S));h.push({attributes:Y,geometry:ca})}return h}function aa(h,w,R){if(!h)return null;const S=
E(w,R),I=[];for(let N=0;N<h.coords.length;N+=S){const Y=[];for(let ca=0;ca<S;ca++)Y.push(h.coords[N+ca]);I.push(Y)}return w?R?{points:I,hasZ:w,hasM:R}:{points:I,hasZ:w}:R?{points:I,hasM:R}:{points:I}}function m(h,w,R,S,I){R=E(R,S);for(const N of w){w=N.geometry;S=N.attributes;let Y;w&&(Y=D(new n,w,R));h.push(new g(Y,S,null,S[I]))}return h}function D(h,w,R=E(w.hasZ,w.hasM)){h.lengths[0]=w.points.length;const S=h.coords;let I=0;for(const N of w.points)for(w=0;w<R;w++)S[I++]=N[w];return h}function Q(h,
w,R){if(!h)return null;const S=E(w,R),{coords:I,lengths:N}=h;h=[];let Y=0;for(const ca of N){const ja=[];for(let ma=0;ma<ca;ma++){const sa=[];for(let va=0;va<S;va++)sa.push(I[Y++]);ja.push(sa)}h.push(ja)}return w?R?{paths:h,hasZ:w,hasM:R}:{paths:h,hasZ:w}:R?{paths:h,hasM:R}:{paths:h}}function V(h,w,R,S,I){R=E(R,S);for(const N of w){w=N.geometry;S=N.attributes;let Y;w&&(Y=H(new n,w,R));h.push(new g(Y,S,null,S[I]))}return h}function H(h,w,R=E(w.hasZ,w.hasM)){const {lengths:S,coords:I}=h;let N=0;for(const Y of w.paths){for(const ca of Y)for(w=
0;w<R;w++)I[N++]=ca[w];S.push(Y.length)}return h}function k(h,w,R){if(!h)return null;const S=E(w,R),{coords:I,lengths:N}=h;h=[];let Y=0;for(const ca of N){const ja=[];for(let ma=0;ma<ca;ma++){const sa=[];for(let va=0;va<S;va++)sa.push(I[Y++]);ja.push(sa)}h.push(ja)}return w?R?{rings:h,hasZ:w,hasM:R}:{rings:h,hasZ:w}:R?{rings:h,hasM:R}:{rings:h}}function d(h,w,R,S,I){for(const N of w){w=N.geometry;const Y=N.centroid,ca=N.attributes;let ja;w&&(ja=C(new n,w,R,S));Y?h.push(new g(ja,ca,B(new n,Y),ca[I])):
h.push(new g(ja,ca,null,ca[I]))}return h}function C(h,w,R=w.hasZ,S=w.hasM){L(h,w.rings,R,S);return h}function L(h,w,R,S){R=E(R,S);const {lengths:I,coords:N}=h;S=0;I.length=N.length=0;for(const Y of w){for(const ca of Y)for(w=0;w<R;w++)N[S++]=ca[w];I.push(Y.length)}return h}function X(h,w,R,S,I,N){h.length=0;if(!R){for(const Y of w)h.push(new g(null,Y.attributes,null,Y.attributes[N]));return h}switch(R){case "esriGeometryPoint":return M(h,w,S,I,N);case "esriGeometryMultipoint":return m(h,w,S,I,N);
case "esriGeometryPolyline":return V(h,w,S,I,N);case "esriGeometryPolygon":return d(h,w,S,I,N);default:Ia.error("convertToFeatureSet:unknown-geometry",new c(`Unable to parse unknown geometry type '${R}'`)),h.length=0}return h}function ba(h,w,R,S){h=h&&("coords"in h?h:h.geometry);if(!h)return null;switch(w){case "esriGeometryPoint":return w=A,R&&S?w=F:R?w=e:S&&(w=r),w(h);case "esriGeometryMultipoint":return aa(h,R,S);case "esriGeometryPolyline":return Q(h,R,S);case "esriGeometryPolygon":return k(h,
R,S);default:Ia.error("convertToGeometry:unknown-geometry",new c(`Unable to parse unknown geometry type '${w}'`))}}function ia(h,w,R,S,I){h.length=0;switch(R){case "esriGeometryPoint":var N=A;S&&I?N=F:S?N=e:I&&(N=r);for(var Y of w){const {geometry:ca,attributes:ja}=Y;S=ca?N(ca):null;h.push({attributes:ja,geometry:S})}break;case "esriGeometryMultipoint":return Z(h,w,S,I);case "esriGeometryPolyline":for(const ca of w){const {geometry:ja,attributes:ma}=ca;let sa;ja&&(sa=Q(ja,S,I));h.push({attributes:ma,
geometry:sa})}break;case "esriGeometryPolygon":for(N of w){const {geometry:ca,attributes:ja,centroid:ma}=N;let sa;ca&&(sa=k(ca,S,I));ma?(Y=A(ma),h.push({attributes:ja,centroid:Y,geometry:sa})):h.push({attributes:ja,geometry:sa})}break;default:Ia.error("convertToFeatureSet:unknown-geometry",new c(`Unable to parse unknown geometry type '${R}'`))}return h}function na(h,w,R,S,I,N,Y=R,ca=S){h.lengths.length&&(h.lengths.length=0);h.coords.length&&(h.coords.length=0);if(!w||!w.coords.length)return null;
I=Ha[I];const {coords:ja,lengths:ma}=w;w=E(R,S);const sa=E(R&&Y,S&&ca);R=t(R,S,Y,ca);if(!ma.length)return R(h.coords,ja,0,0,v(N,ja[0]),J(N,ja[1])),h.lengths.length&&(h.lengths.length=0),h.coords.length=w,h;let va,za=0,ya,Ba=0;for(const Oa of ma){if(Oa<I)continue;let Ea=0;ya=Ba;ca=S=v(N,ja[za]);va=Y=J(N,ja[za+1]);R(h.coords,ja,ya,za,ca,va);Ea++;za+=w;ya+=sa;for(let Fa=1;Fa<Oa;Fa++,za+=w)if(ca=v(N,ja[za]),va=J(N,ja[za+1]),ca!==S||va!==Y)R(h.coords,ja,ya,za,ca-S,va-Y),ya+=sa,Ea++,S=ca,Y=va;Ea>=I&&(h.lengths.push(Ea),
Ba=ya)}h.coords.length=Ba;return h.coords.length?h:null}function ra(h,w,R,S,I,N,Y){let ca=S,ja=0;for(let sa=N+R;sa<Y;sa+=R){{var ma=w[sa];const va=w[sa+1],za=w[Y],ya=w[Y+1];let Ba=w[N],Oa=w[N+1],Ea=za-Ba,Fa=ya-Oa;if(0!==Ea||0!==Fa){const Ga=((ma-Ba)*Ea+(va-Oa)*Fa)/(Ea*Ea+Fa*Fa);1<Ga?(Ba=za,Oa=ya):0<Ga&&(Ba+=Ea*Ga,Oa+=Fa*Ga)}Ea=ma-Ba;Fa=va-Oa;ma=Ea*Ea+Fa*Fa}ma>ca&&(ja=sa,ca=ma)}ca>S&&(ja-N>R&&ra(h,w,R,S,I,N,ja),I(h,w,h.length,ja,w[ja],w[ja+1]),Y-ja>R&&ra(h,w,R,S,I,ja,Y))}function wa(h,w,R,S,I){const {coords:N,
lengths:Y}=w,ca=R?S?ka:oa:S?oa:La;R=E(R,S);if(!N.length)return h!==w&&(h.lengths.length=0,h.coords.length=0),h;if(!Y.length)return ca(h.coords,N,0,0,W(I,N[0]),q(I,N[1])),h!==w&&(h.lengths.length=0,h.coords.length=R),h;const [ja,ma]=I.scale;S=0;for(let sa=0;sa<Y.length;sa++){const va=Y[sa];h.lengths[sa]=va;let za=W(I,N[S]),ya=q(I,N[S+1]);ca(h.coords,N,S,S,za,ya);S+=R;for(let Ba=1;Ba<va;Ba++,S+=R)za+=N[S]*ja,ya-=N[S+1]*ma,ca(h.coords,N,S,S,za,ya)}h!==w&&(h.lengths.length=Y.length,h.coords.length=N.length);
return h}function Ca(h,w,R,S){let I=0,N=h[S*w],Y=h[S*(w+1)];for(let ca=1;ca<R;ca++){const ja=N+h[S*(w+ca)],ma=Y+h[S*(w+ca)+1],sa=(ja-N)*(ma+Y);N=ja;Y=ma;I+=sa}return.5*I}const Ia=x.getLogger("esri.tasks.support.optimizedFeatureSet"),Ha={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},La=(h,w,R,S,I,N)=>{h[R]=I;h[R+1]=N},oa=(h,w,R,S,I,N)=>{h[R]=I;h[R+1]=N;h[R+2]=w[S+2]},ua=(h,w,R,S,I,N)=>{h[R]=I;h[R+1]=N;h[R+2]=w[S+3]},ka=(h,w,R,S,I,N)=>{h[R]=I;h[R+1]=N;h[R+
2]=w[S+2];h[R+3]=w[S+3]},b=[],l=[];p.convertFromFeature=function(h,w,R,S,I){b[0]=h;[h]=X(l,b,w,R,S,I);b.length=l.length=0;return h};p.convertFromFeatureSet=function(h,w){const R=new u,{hasM:S,hasZ:I,features:N,objectIdFieldName:Y,spatialReference:ca,geometryType:ja,exceededTransferLimit:ma,transform:sa,fields:va}=h;va&&(R.fields=va);R.geometryType=ja;R.objectIdFieldName=Y||w;R.spatialReference=ca;if(!R.objectIdFieldName)return Ia.error(new c("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),
R;N&&X(R.features,N,ja,I,S,R.objectIdFieldName);ma&&(R.exceededTransferLimit=ma);S&&(R.hasM=S);I&&(R.hasZ=I);sa&&(R.transform=sa);return R};p.convertFromFeatures=X;p.convertFromGeometry=function(h,w,R){if(!h)return null;const S=new n;"hasZ"in h&&null==w&&(w=h.hasZ);"hasM"in h&&null==R&&(R=h.hasM);if(K.isPoint(h))return P(null!=w?w:null!=h.z,null!=R?R:null!=h.m)(S,h);if(K.isPolygon(h))return C(S,h,w,R);if(K.isPolyline(h))return H(S,h,E(w,R));if(K.isMultipoint(h))return D(S,h,E(w,R));Ia.error("convertFromGeometry:unknown-geometry",
new c(`Unable to parse unknown geometry type '${h}'`))};p.convertFromGraphics=function(h,w,R,S,I,N){const Y=h.length;switch(R){case "esriGeometryPoint":M(h,w,S,I,N);break;case "esriGeometryMultipoint":m(h,w,S,I,N);break;case "esriGeometryPolyline":V(h,w,S,I,N);break;case "esriGeometryPolygon":d(h,w,S,I,N);break;default:Ia.error("convertToFeatureSet:unknown-geometry",new c(`Unable to parse unknown geometry type '${R}'`))}for(S=0;S<w.length;S++)h[S+Y].geometryType=R,h[S+Y].insertAfter=w[S].insertAfter,
h[S+Y].groupId=w[S].groupId;return h};p.convertFromMultipoint=D;p.convertFromMultipointFeatures=m;p.convertFromNestedArray=L;p.convertFromPoint=function(h,w,R=P(null!=w.z,null!=w.m)){return R(h,w)};p.convertFromPointFeatures=M;p.convertFromPolygon=C;p.convertFromPolyline=H;p.convertFromPolylineFeatures=V;p.convertToFeature=function(h,w,R,S){l[0]=h;ia(b,l,w,R,S);h=b[0];b.length=l.length=0;return h};p.convertToFeatureSet=function(h){const {objectIdFieldName:w,spatialReference:R,transform:S,fields:I,
hasM:N,hasZ:Y,features:ca,geometryType:ja,exceededTransferLimit:ma,uniqueIdField:sa,queryGeometry:va,queryGeometryType:za}=h;h=ia([],ca,ja,Y,N);const ya=ba(va,za,!1,!1);h={features:h,fields:I,geometryType:ja,objectIdFieldName:w,spatialReference:R,uniqueIdField:sa,queryGeometry:ya};S&&(h.transform=S);ma&&(h.exceededTransferLimit=ma);N&&(h.hasM=N);Y&&(h.hasZ=Y);return h};p.convertToFeatures=ia;p.convertToGeometry=ba;p.convertToMultipoint=aa;p.convertToMultipointFeatures=Z;p.convertToPoint=function(h,
w,R){return h?w?R?F(h):e(h):R?r(h):A(h):null};p.convertToPolygon=k;p.convertToPolyline=Q;p.deltaDecodeGeometry=function(h,w){const R=h.clone(),S=h.coords;h=h.lengths;let I=0;for(let ca=0;ca<h.length;ca++){const ja=h[ca];var N=S[w*I],Y=S[w*I+1];for(let ma=1;ma<ja;ma++)N+=S[w*(I+ma)],Y+=S[w*(I+ma)+1],R.coords[w*(I+ma)]=N,R.coords[w*(I+ma)+1]=Y;I+=ja}return R};p.deltaEncodeGeometry=function(h,w){const R=h.clone(),S=h.coords;h=h.lengths;let I=0;for(let Y=0;Y<h.length;Y++){const ca=h[Y];let ja=S[w*I];
var N=S[w*I+1];for(let ma=1;ma<ca;ma++){const sa=S[w*(I+ma)],va=S[w*(I+ma)+1];N=va-N;R.coords[w*(I+ma)]=sa-ja;R.coords[w*(I+ma)+1]=N;ja=sa;N=va}I+=ca}return R};p.generalizeOptimizedGeometry=function(h,w,R,S,I,N,Y=R,ca=S){h.lengths.length&&(h.lengths.length=0);h.coords.length&&(h.coords.length=0);if(!w||!w.coords.length)return null;I=Ha[I];const {coords:ja,lengths:ma}=w;w=E(R,S);const sa=E(R&&Y,S&&ca);R=t(R,S,Y,ca);if(!ma.length)return R(h.coords,ja,0,0,ja[0],ja[1]),h.lengths.length&&(h.lengths.length=
0),h.coords.length=w,h;S=0;N*=N;for(const va of ma){if(va<I){S+=va*w;continue}Y=h.coords.length/sa;ca=S;const za=S+(va-1)*w;R(h.coords,ja,h.coords.length,ca,ja[ca],ja[ca+1]);ra(h.coords,ja,w,N,R,ca,za);R(h.coords,ja,h.coords.length,za,ja[za],ja[za+1]);ca=h.coords.length/sa-Y;ca>=I?h.lengths.push(ca):h.coords.length=Y*sa;S+=va*w}return h.coords.length?h:null};p.getBoundsOptimizedGeometry=function(h,w,R,S){if(!w||!w.coords||!w.coords.length)return null;R=E(R,S);let I=S=Number.POSITIVE_INFINITY,N=Number.NEGATIVE_INFINITY,
Y=Number.NEGATIVE_INFINITY;if(w&&w.coords){w=w.coords;for(let ca=0;ca<w.length;ca+=R){const ja=w[ca],ma=w[ca+1];S=Math.min(S,ja);N=Math.max(N,ja);I=Math.min(I,ma);Y=Math.max(Y,ma)}}h[0]=S;h[1]=I;h[2]=N;h[3]=Y;return h};p.getQuantizedArea=function(h,w){const {coords:R,lengths:S}=h;let I=h=0;for(let N=0;N<S.length;N++)I+=Ca(R,h,S[N],w),h+=N;return Math.abs(I)};p.getQuantizedBoundsOptimizedGeometry=function(h,w,R,S){R=E(R,S);const {lengths:I,coords:N}=w;S=w=Number.POSITIVE_INFINITY;let Y=Number.NEGATIVE_INFINITY,
ca=Number.NEGATIVE_INFINITY,ja=0;for(const ma of I){let sa=N[ja],va=N[ja+1];w=Math.min(sa,w);S=Math.min(va,S);Y=Math.max(sa,Y);ca=Math.max(va,ca);ja+=R;for(let za=1;za<ma;za++,ja+=R){const ya=N[ja],Ba=N[ja+1];sa+=ya;va+=Ba;0>ya&&(w=Math.min(w,sa));0<ya&&(Y=Math.max(Y,sa));0>Ba?S=Math.min(S,va):0<Ba&&(ca=Math.max(ca,va))}}h[0]=w;h[1]=S;h[2]=Y;h[3]=ca;return h};p.getSignedQuantizedRingArea=Ca;p.quantizeOptimizedFeatureSet=function(h,w){const {geometryType:R,features:S,hasM:I,hasZ:N}=w;if(!h)return w;
for(let Y=0;Y<S.length;Y++){const ca=S[Y],ja=ca.weakClone();ja.geometry=new n;na(ja.geometry,ca.geometry,I,N,R,h);ca.centroid&&(ja.centroid=new n,na(ja.centroid,ca.centroid,I,N,"esriGeometryPoint",h));S[Y]=ja}w.transform=h;return w};p.quantizeOptimizedGeometry=na;p.quantizeX=v;p.quantizeY=J;p.removeCollinearVectices=function(h,w,R,S,I){if(!w||!w.coords||!w.coords.length)return null;R=Ha[R];const {coords:N,lengths:Y}=w;w=t(S,I,S,I);S=E(S,I);let ca=I=0,ja=0,ma=0;for(const za of Y){ca=ma;w(h.coords,
N,ca,I,N[I],N[I+1]);I+=S;var sa=N[I];let ya=N[I+1],Ba=sa,Oa=ya;var va=ya/sa;ca+=S;w(h.coords,N,ca,I,Ba,Oa);I+=S;for(let Ea=2;Ea<za;Ea++){sa=N[I];ya=N[I+1];const Fa=ya/sa,Ga=va===Fa||!isFinite(va)&&!isFinite(Fa);va=Ga&&isFinite(Fa)?0<=va&&0<=Fa||0>=va&&0>=Fa:0<=Oa&&0<=ya||0>=Oa&&0>=ya;Ga&&va?(Ba+=sa,Oa+=ya):(Ba=sa,Oa=ya,ca+=S);w(h.coords,N,ca,I,Ba,Oa);I+=S;va=Fa}ca+=S;sa=(ca-ma)/S;sa>=R&&(h.lengths[ja]=sa,ma=ca,ja++)}h.coords.length>ma&&(h.coords.length=ma);h.lengths.length>ja&&(h.lengths.length=ja);
return h.coords.length&&h.lengths.length?h:null};p.removeZMValues=function(h,w,R,S,I,N){const Y=E(R,S);R=t(R,S,I,N);S=w.coords;h.coords.length=0;h.lengths.length=0;h.lengths.push(...w.lengths);for(w=0;w<S.length;w+=Y)R(h.coords,S,h.coords.length,w,S[w],S[w+1]);return h};p.unquantizeOptimizedFeatureSet=function(h){const {transform:w,features:R,hasM:S,hasZ:I}=h;if(!w)return h;for(const N of R)N.geometry&&wa(N.geometry,N.geometry,S,I,w),N.centroid&&wa(N.centroid,N.centroid,S,I,w);h.transform=null;return h};
p.unquantizeOptimizedGeometry=wa;p.unquantizeX=W;p.unquantizeY=q;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/graphics/OptimizedFeature":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(p){return function(){function c(x=null,K={},g,u){this.geohashY=this.geohashX=this.displayId=0;this.geometry=x;K&&(this.attributes=K);g&&(this.centroid=g);null!=u&&(this.objectId=u)}c.prototype.weakClone=function(){const x=new c(this.geometry,this.attributes,this.centroid,this.objectId);
x.displayId=this.displayId;x.geohashX=this.geohashX;x.geohashY=this.geohashY;return x};p._createClass(c,[{key:"hasGeometry",get:function(){return!(!this.geometry||!this.geometry.coords||!this.geometry.coords.length)}}]);return c}()})},"esri/layers/graphics/OptimizedFeatureSet":function(){define(function(){return function(){function p(){this.spatialReference=this.geometryType=this.geometryProperties=this.geohashFieldName=this.globalIdFieldName=this.objectIdFieldName=null;this.hasM=this.hasZ=!1;this.features=
[];this.fields=[];this.transform=null;this.exceededTransferLimit=!1;this.queryGeometry=this.queryGeometryType=this.uniqueIdField=null}p.prototype.weakClone=function(){const c=new p;c.objectIdFieldName=this.objectIdFieldName;c.globalIdFieldName=this.globalIdFieldName;c.geohashFieldName=this.geohashFieldName;c.geometryProperties=this.geometryProperties;c.geometryType=this.geometryType;c.spatialReference=this.spatialReference;c.hasZ=this.hasZ;c.hasM=this.hasM;c.features=this.features;c.fields=this.fields;
c.transform=this.transform;c.exceededTransferLimit=this.exceededTransferLimit;c.uniqueIdField=this.uniqueIdField;c.queryGeometry=this.queryGeometry;c.queryGeometryType=this.queryGeometryType;return c};return p}()})},"esri/layers/graphics/OptimizedGeometry":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(p){return function(){function c(K=[],g=[],u=!1){this.lengths=null!=K?K:[];this.coords=null!=g?g:[];this.hasIndeterminateRingOrder=u}var x=c.prototype;x.forEachVertex=function(K){let g=
0;this.lengths.length||K(this.coords[0],this.coords[1]);for(let u=0;u<this.lengths.length;u++){const n=this.lengths[u];for(let E=0;E<n;E++)K(this.coords[2*(E+g)],this.coords[2*(E+g)+1]);g+=n}};x.clone=function(){return new c(this.lengths.slice(),this.coords.slice(),this.hasIndeterminateRingOrder)};p._createClass(c,[{key:"isPoint",get:function(){return 0===this.lengths.length}}]);return c}()})},"esri/layers/graphics/data/FeatureStore":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../core/Evented ../../../core/Logger ../../../core/maybe ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../featureConversionUtils ./BoundsStore ./optimizedFeatureQueryEngineAdapter".split(" "),
function(p,c,x,K,g,u,n,E,t,v){return function(){function J(q){this.geometryInfo=q;this._boundsStore=new t.BoundsStore;this._featuresById=new Map;this._markedIds=new Set;this.events=new x;this.featureAdapter=v.optimizedFeatureQueryEngineAdapter}var W=J.prototype;W.add=function(q){this._add(q);this._emitChanged()};W.addMany=function(q){for(const A of q)this._add(A);this._emitChanged()};W.clear=function(){this._featuresById.clear();this._boundsStore.clear();this._emitChanged()};W.removeById=function(q){q=
this._featuresById.get(q);if(!q)return null;this._remove(q);this._emitChanged();return q};W.removeManyById=function(q){this._boundsStore.invalidateIndex();for(const A of q)(q=this._featuresById.get(A))&&this._remove(q);this._emitChanged()};W.forEachBounds=function(q,A,B){for(const e of q)(q=this._boundsStore.get(e.objectId))&&A(u.fromRect(B,q))};W.getFeature=function(q){return this._featuresById.get(q)};W.has=function(q){return this._featuresById.has(q)};W.forEach=function(q){this._featuresById.forEach(A=>
q(A))};W.forEachInBounds=function(q,A){this._boundsStore.forEachInBounds(q,B=>{A(this._featuresById.get(B))})};W.startMarkingUsedFeatures=function(){this._boundsStore.invalidateIndex();this._markedIds.clear()};W.sweep=function(){let q=!1;this._featuresById.forEach((A,B)=>{this._markedIds.has(B)||(q=!0,this._remove(A))});this._markedIds.clear();q&&this._emitChanged()};W._emitChanged=function(){this.events.emit("changed",void 0)};W._add=function(q){if(q){var A=q.objectId;if(null==A)K.getLogger("esri.layers.graphics.data.FeatureStore").error(new c("featurestore:invalid-feature",
"feature id is missing",{feature:q}));else{var B=this._featuresById.get(A);this._markedIds.add(A);if(B){q.displayId=B.displayId;var e=this._boundsStore.get(A);this._boundsStore.delete(A)}else if(g.isSome(this.onFeatureAdd))this.onFeatureAdd(q);q.geometry&&q.geometry.coords&&q.geometry.coords.length?(e=E.getBoundsOptimizedGeometry(e||n.create(),q.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),this._boundsStore.set(A,e)):this._boundsStore.set(A,null);this._featuresById.set(A,q)}}};W._remove=
function(q){if(g.isSome(this.onFeatureRemove))this.onFeatureRemove(q);this._markedIds.delete(q.objectId);this._boundsStore.delete(q.objectId);this._featuresById.delete(q.objectId);return q};p._createClass(J,[{key:"geometryType",get:function(){return this.geometryInfo.geometryType}},{key:"hasM",get:function(){return this.geometryInfo.hasM}},{key:"hasZ",get:function(){return this.geometryInfo.hasZ}},{key:"numFeatures",get:function(){return this._featuresById.size}},{key:"fullBounds",get:function(){if(!this.numFeatures)return null;
const q=n.create(n.NEGATIVE_INFINITY);this._featuresById.forEach(A=>{if(A=this._boundsStore.get(A.objectId))q[0]=Math.min(A[0],q[0]),q[1]=Math.min(A[1],q[1]),q[2]=Math.max(A[2],q[2]),q[3]=Math.max(A[3],q[3])});return q}},{key:"storeStatistics",get:function(){let q=0;this._featuresById.forEach(A=>{A.geometry&&A.geometry.coords&&(q+=A.geometry.coords.length)});return{featureCount:this._featuresById.size,vertexCount:q/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}}]);return J}()})},"esri/core/Evented":function(){define(["../chunks/_rollupPluginBabelHelpers",
"../chunks/tslib.es6","./Accessor","./handleUtils","./accessorSupport/decorators/subclass"],function(p,c,x,K,g){let u=function(){function n(){this._emitter=new n.EventEmitter(this)}var E=n.prototype;E.emit=function(t,v){return this._emitter.emit(t,v)};E.on=function(t,v){return this._emitter.on(t,v)};E.once=function(t,v){return this._emitter.once(t,v)};E.hasEventListener=function(t){return this._emitter.hasEventListener(t)};return n}();(function(n){let E=function(){function v(W=null){this.target=W;
this._listenersMap=null}var J=v.prototype;J.clear=function(){this._listenersMap&&this._listenersMap.clear()};J.emit=function(W,q){W=this._listenersMap&&this._listenersMap.get(W);if(!W)return!1;const A=this.target||this;[...W].forEach(B=>{B.call(A,q)});return 0<W.length};J.on=function(W,q){if(Array.isArray(W)){var A=W.map(B=>this.on(B,q));return K.handlesGroup(A)}if(-1<W.indexOf(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap||
(this._listenersMap=new Map);A=this._listenersMap.get(W)||[];A.push(q);this._listenersMap.set(W,A);return{remove:()=>{const B=this._listenersMap&&this._listenersMap.get(W)||[],e=B.indexOf(q);0<=e&&B.splice(e,1)}}};J.once=function(W,q){const A=this.on(W,B=>{A.remove();q.call(null,B)});return A};J.hasEventListener=function(W){W=this._listenersMap&&this._listenersMap.get(W);return null!=W&&0<W.length};return v}();n.EventEmitter=E;n.EventedMixin=v=>{v=function(J){function W(){var A=J.apply(this,arguments)||
this;A._emitter=new E;return A}p._inheritsLoose(W,J);var q=W.prototype;q.destroy=function(){this._emitter.clear()};q.emit=function(A,B){return this._emitter.emit(A,B)};q.on=function(A,B){return this._emitter.on(A,B)};q.once=function(A,B){return this._emitter.once(A,B)};q.hasEventListener=function(A){return this._emitter.hasEventListener(A)};return W}(v);return v=c.__decorate([g.subclass("esri.core.Evented")],v)};let t=function(v){function J(){var q=v.apply(this,arguments)||this;q._emitter=new u.EventEmitter(p._assertThisInitialized(q));
return q}p._inheritsLoose(J,v);var W=J.prototype;W.emit=function(q,A){return this._emitter.emit(q,A)};W.on=function(q,A){return this._emitter.on(q,A)};W.once=function(q,A){return this._emitter.once(q,A)};W.hasEventListener=function(q){return this._emitter.hasEventListener(q)};return J}(x);t=c.__decorate([g.subclass("esri.core.Evented")],t);n.EventedAccessor=t})(u||(u={}));return u})},"esri/geometry/support/aaBoundingBox":function(){define(["exports","../../core/maybe","../Extent","./aaBoundingRect"],
function(p,c,x,K){function g(e=A){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function u(e,y,r,G,F,O,P=g()){P[0]=e;P[1]=y;P[2]=r;P[3]=G;P[4]=F;P[5]=O;return P}function n(e){return e[0]>=e[3]?0:e[3]-e[0]}function E(e){return e[1]>=e[4]?0:e[4]-e[1]}function t(e){return e[2]>=e[5]?0:e[5]-e[2]}function v(e,y){return Math.max(y[0],e[0])<=Math.min(y[3],e[3])&&Math.max(y[1],e[1])<=Math.min(y[4],e[4])&&Math.max(y[2],e[2])<=Math.min(y[5],e[5])}function J(e,y){e[0]=y[0];e[1]=y[1];e[2]=y[2];e[3]=y[3];e[4]=y[4];e[5]=
y[5];return e}function W(e){return 6===e.length}const q=[Infinity,Infinity,Infinity,-Infinity,-Infinity,-Infinity],A=[0,0,0,0,0,0],B=g();p.NEGATIVE_INFINITY=q;p.POSITIVE_INFINITY=[-Infinity,-Infinity,-Infinity,Infinity,Infinity,Infinity];p.ZERO=A;p.allFinite=function(e){for(let y=0;6>y;y++)if(!isFinite(e[y]))return!1;return!0};p.center=function(e,y=[0,0,0]){y[0]=e[0]+n(e)/2;y[1]=e[1]+E(e)/2;y[2]=e[2]+t(e)/2;return y};p.contains=function(e,y){return y[0]>=e[0]&&y[1]>=e[1]&&y[2]>=e[2]&&y[3]<=e[3]&&
y[4]<=e[4]&&y[5]<=e[5]};p.containsPoint=function(e,y){return y[0]>=e[0]&&y[1]>=e[1]&&y[2]>=e[2]&&y[0]<=e[3]&&y[1]<=e[4]&&y[2]<=e[5]};p.containsPointWithMargin=function(e,y,r){return y[0]>=e[0]-r&&y[1]>=e[1]-r&&y[2]>=e[2]-r&&y[0]<=e[3]+r&&y[1]<=e[4]+r&&y[2]<=e[5]+r};p.create=g;p.depth=E;p.diameter=function(e){const y=n(e),r=t(e);e=E(e);return Math.sqrt(y*y+r*r+e*e)};p.empty=function(e){return e?J(e,q):g(q)};p.equals=function(e,y,r){if(c.isNone(e)||c.isNone(y))return e===y;if(!W(e)||!W(y))return!1;
if(r)for(let G=0;G<e.length;G++){if(!r(e[G],y[G]))return!1}else for(r=0;r<e.length;r++)if(e[r]!==y[r])return!1;return!0};p.expandWithAABB=function(e,y){e[0]=Math.min(e[0],y[0]);e[1]=Math.min(e[1],y[1]);e[2]=Math.min(e[2],y[2]);e[3]=Math.max(e[3],y[3]);e[4]=Math.max(e[4],y[4]);e[5]=Math.max(e[5],y[5])};p.expandWithBuffer=function(e,y,r=0,G=y.length/3){let F=e[0],O=e[1],P=e[2],M=e[3],Z=e[4],aa=e[5];for(let m=0;m<G;m++)F=Math.min(F,y[r+3*m]),O=Math.min(O,y[r+3*m+1]),P=Math.min(P,y[r+3*m+2]),M=Math.max(M,
y[r+3*m]),Z=Math.max(Z,y[r+3*m+1]),aa=Math.max(aa,y[r+3*m+2]);e[0]=F;e[1]=O;e[2]=P;e[3]=M;e[4]=Z;e[5]=aa};p.expandWithNestedArray=function(e,y,r){const G=y.length;let F=e[0],O=e[1],P=e[2],M=e[3],Z=e[4],aa=e[5];if(r)for(r=0;r<G;r++){var m=y[r];F=Math.min(F,m[0]);O=Math.min(O,m[1]);P=Math.min(P,m[2]);M=Math.max(M,m[0]);Z=Math.max(Z,m[1]);aa=Math.max(aa,m[2])}else for(r=0;r<G;r++)m=y[r],F=Math.min(F,m[0]),O=Math.min(O,m[1]),M=Math.max(M,m[0]),Z=Math.max(Z,m[1]);e[0]=F;e[1]=O;e[2]=P;e[3]=M;e[4]=Z;e[5]=
aa};p.expandWithOffset=function(e,y,r,G){e[0]=Math.min(e[0],e[0]+y);e[3]=Math.max(e[3],e[3]+y);e[1]=Math.min(e[1],e[1]+r);e[4]=Math.max(e[4],e[4]+r);e[2]=Math.min(e[2],e[2]+G);e[5]=Math.max(e[5],e[5]+G)};p.expandWithRect=function(e,y){e[0]=Math.min(e[0],y[0]);e[1]=Math.min(e[1],y[1]);e[3]=Math.max(e[3],y[2]);e[4]=Math.max(e[4],y[3])};p.expandWithVec3=function(e,y){e[0]=Math.min(e[0],y[0]);e[1]=Math.min(e[1],y[1]);e[2]=Math.min(e[2],y[2]);e[3]=Math.max(e[3],y[0]);e[4]=Math.max(e[4],y[1]);e[5]=Math.max(e[5],
y[2])};p.fromExtent=function(e,y=g()){y[0]=e.xmin;y[1]=e.ymin;y[2]=e.zmin;y[3]=e.xmax;y[4]=e.ymax;y[5]=e.zmax;return y};p.fromMinMax=function(e,y,r=g()){r[0]=e[0];r[1]=e[1];r[2]=e[2];r[3]=y[0];r[4]=y[1];r[5]=y[2];return r};p.fromRect=function(e,y){e[0]=y[0];e[1]=y[1];e[2]=Number.NEGATIVE_INFINITY;e[3]=y[2];e[4]=y[3];e[5]=Number.POSITIVE_INFINITY;return e};p.fromValues=u;p.getMax=function(e,y){y[0]=e[3];y[1]=e[4];y[2]=e[5];return y};p.getMin=function(e,y){y[0]=e[0];y[1]=e[1];y[2]=e[2];return y};p.height=
t;p.intersects=v;p.intersectsClippingArea=function(e,y){return c.isNone(y)?!0:v(e,y)};p.is=W;p.isPoint=function(e){return 0===n(e)&&0===E(e)&&0===t(e)};p.maximumDimension=function(e){return Math.max(n(e),t(e),E(e))};p.offset=function(e,y,r,G,F=e){F[0]=e[0]+y;F[1]=e[1]+r;F[2]=e[2]+G;F[3]=e[3]+y;F[4]=e[4]+r;F[5]=e[5]+G;return F};p.scale=function(e,y,r=e){const G=e[0]+n(e)/2,F=e[1]+E(e)/2,O=e[2]+t(e)/2;r[0]=G+(e[0]-G)*y;r[1]=F+(e[1]-F)*y;r[2]=O+(e[2]-O)*y;r[3]=G+(e[3]-G)*y;r[4]=F+(e[4]-F)*y;r[5]=O+(e[5]-
O)*y;return r};p.set=J;p.setMax=function(e,y,r=e){r[3]=y[0];r[4]=y[1];r[5]=y[2];r!==e&&(r[0]=e[0],r[1]=e[1],r[2]=e[2]);return e};p.setMin=function(e,y,r=e){r[0]=y[0];r[1]=y[1];r[2]=y[2];r!==e&&(r[3]=e[3],r[4]=e[4],r[5]=e[5]);return r};p.size=function(e,y=[0,0,0]){y[0]=n(e);y[1]=E(e);y[2]=t(e);return y};p.toExtent=function(e,y){return isFinite(e[2])||isFinite(e[5])?new x({xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],zmin:e[2],zmax:e[5],spatialReference:y}):new x({xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],
spatialReference:y})};p.toRect=function(e,y){y||(y=K.create());y[0]=e[0];y[1]=e[1];y[2]=e[3];y[3]=e[4];return y};p.width=n;p.wrap=function(e,y,r,G,F,O){return u(e,y,r,G,F,O,B)};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/geometry/support/aaBoundingRect":function(){define(["exports","../../core/has","../../core/maybe","../Extent"],function(p,c,x,K){function g(A=q){return[A[0],A[1],A[2],A[3]]}function u(A){return A[0]>=A[2]?0:A[2]-A[0]}function n(A){return A[1]>=A[3]?0:A[3]-A[1]}function E(A,
B,e){return B>=A[0]&&e>=A[1]&&B<=A[2]&&e<=A[3]}function t(A,B){A[0]=B[0];A[1]=B[1];A[2]=B[2];A[3]=B[3];return A}function v(A){return 4===A.length}function J(A,B,e){return A<B?B:A>e?e:A}const W=[Infinity,Infinity,-Infinity,-Infinity],q=[0,0,0,0];p.NEGATIVE_INFINITY=W;p.POSITIVE_INFINITY=[-Infinity,-Infinity,Infinity,Infinity];p.UNIT=[0,0,1,1];p.ZERO=q;p.allFinite=function(A){for(let B=0;4>B;B++)if(!isFinite(A[B]))return!1;return!0};p.area=function(A){return u(A)*n(A)};p.center=function(A,B=[0,0]){B[0]=
(A[0]+A[2])/2;B[1]=(A[1]+A[3])/2;return B};p.clone=function(A){return[A[0],A[1],A[2],A[3]]};p.contains=function(A,B){return B[0]>=A[0]&&B[2]<=A[2]&&B[1]>=A[1]&&B[3]<=A[3]};p.containsPoint=function(A,B){return E(A,B[0],B[1])};p.containsPointObject=function(A,B){return E(A,B.x,B.y)};p.containsPointWithMargin=function(A,B,e){return B[0]>=A[0]-e&&B[1]>=A[1]-e&&B[0]<=A[2]+e&&B[1]<=A[3]+e};p.containsXY=E;p.create=g;p.diameter=function(A){const B=u(A);A=n(A);return Math.sqrt(B*B+A*A)};p.distance=function(A,
B){const e=(A[1]+A[3])/2,y=Math.max(Math.abs(B[0]-(A[0]+A[2])/2)-u(A)/2,0);A=Math.max(Math.abs(B[1]-e)-n(A)/2,0);return Math.sqrt(y*y+A*A)};p.empty=function(A){return A?t(A,W):g(W)};p.equals=function(A,B,e){if(x.isNone(A)||x.isNone(B))return A===B;if(!v(A)||!v(B))return!1;if(e)for(let y=0;y<A.length;y++){if(!e(A[y],B[y]))return!1}else for(e=0;e<A.length;e++)if(A[e]!==B[e])return!1;return!0};p.expand=function(A,B,e=A){if("length"in B)if(v(B))e[0]=Math.min(A[0],B[0]),e[1]=Math.min(A[1],B[1]),e[2]=Math.max(A[2],
B[2]),e[3]=Math.max(A[3],B[3]);else{if(2===B.length||3===B.length)e[0]=Math.min(A[0],B[0]),e[1]=Math.min(A[1],B[1]),e[2]=Math.max(A[2],B[0]),e[3]=Math.max(A[3],B[1])}else switch(B.type){case "extent":e[0]=Math.min(A[0],B.xmin);e[1]=Math.min(A[1],B.ymin);e[2]=Math.max(A[2],B.xmax);e[3]=Math.max(A[3],B.ymax);break;case "point":e[0]=Math.min(A[0],B.x),e[1]=Math.min(A[1],B.y),e[2]=Math.max(A[2],B.x),e[3]=Math.max(A[3],B.y)}return e};p.expandPointInPlace=function(A,B){B[0]<A[0]&&(A[0]=B[0]);B[0]>A[2]&&
(A[2]=B[0]);B[1]<A[1]&&(A[1]=B[1]);B[1]>A[3]&&(A[3]=B[1])};p.expandWithNestedArray=function(A,B,e=A){const y=B.length;let r=A[0],G=A[1],F=A[2];A=A[3];for(let O=0;O<y;O++){const P=B[O];r=Math.min(r,P[0]);G=Math.min(G,P[1]);F=Math.max(F,P[0]);A=Math.max(A,P[1])}e[0]=r;e[1]=G;e[2]=F;e[3]=A;return e};p.fromExtent=function(A,B=g()){B[0]=A.xmin;B[1]=A.ymin;B[2]=A.xmax;B[3]=A.ymax;return B};p.fromValues=function(A,B,e,y,r=g()){r[0]=A;r[1]=B;r[2]=e;r[3]=y;return r};p.height=n;p.intersection=function(A,B,
e=A){const y=B[0],r=B[1],G=B[2];B=B[3];e[0]=J(A[0],y,G);e[1]=J(A[1],r,B);e[2]=J(A[2],y,G);e[3]=J(A[3],r,B);return e};p.intersects=function(A,B){return Math.max(B[0],A[0])<=Math.min(B[2],A[2])&&Math.max(B[1],A[1])<=Math.min(B[3],A[3])};p.is=v;p.isPoint=function(A){return(0===u(A)||!isFinite(A[0]))&&(0===n(A)||!isFinite(A[1]))};p.offset=function(A,B,e,y=A){y[0]=A[0]+B;y[1]=A[1]+e;y[2]=A[2]+B;y[3]=A[3]+e;return y};p.pad=function(A,B,e=A){e[0]=A[0]-B;e[1]=A[1]-B;e[2]=A[2]+B;e[3]=A[3]+B;return e};p.set=
t;p.setMax=function(A,B,e=A){e[2]=B[0];e[3]=B[1];e!==A&&(e[0]=A[0],e[1]=A[1]);return A};p.setMin=function(A,B,e=A){e[0]=B[0];e[1]=B[1];e!==A&&(e[2]=A[2],e[3]=A[3]);return e};p.size=function(A,B){B[0]=A[2]-A[0];B[1]=A[3]-A[1]};p.toExtent=function(A,B){return new K({xmin:A[0],ymin:A[1],xmax:A[2],ymax:A[3],spatialReference:B})};p.width=u;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/graphics/data/BoundsStore":function(){define(["exports","../../../core/has","../../../core/libs/rbush/PooledRBush"],
function(p,c,x){function K(n,E,t){g.minX=E[0];g.minY=E[1];g.maxX=E[2];g.maxY=E[3];n.search(g,t)}const g={minX:0,minY:0,maxX:0,maxY:0};let u=function(){function n(){this._indexInvalid=!1;this._boundsToLoad=[];this._boundsById=new Map;this._idByBounds=new Map;this._index=new x.PooledRBush(9,c("csp-restrictions")?t=>({minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]}):["[0]","[1]","[2]","[3]"]);this._loadIndex=()=>{if(this._indexInvalid){const t=Array(this._idByBounds.size);let v=0;this._idByBounds.forEach((J,
W)=>{t[v++]=W});this._indexInvalid=!1;this._index.clear();this._index.load(t)}else this._boundsToLoad.length&&(this._index.load(this._boundsToLoad.filter(t=>this._idByBounds.has(t))),this._boundsToLoad.length=0)}}var E=n.prototype;E.clear=function(){this._indexInvalid=!1;this._boundsToLoad.length=0;this._boundsById.clear();this._idByBounds.clear();this._index.clear()};E.delete=function(t){const v=this._boundsById.get(t);this._boundsById.delete(t);v&&(this._idByBounds.delete(v),this._indexInvalid||
this._index.remove(v))};E.forEachInBounds=function(t,v){this._loadIndex();K(this._index,t,J=>v(this._idByBounds.get(J)))};E.get=function(t){return this._boundsById.get(t)};E.has=function(t){return this._boundsById.has(t)};E.invalidateIndex=function(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)};E.set=function(t,v){if(!this._indexInvalid){const J=this._boundsById.get(t);J&&(this._index.remove(J),this._idByBounds.delete(J))}this._boundsById.set(t,v);v&&(this._idByBounds.set(v,
t),this._indexInvalid||(this._boundsToLoad.push(v),5E4<this._boundsToLoad.length&&this._loadIndex()))};return n}();p.BoundsStore=u;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/core/libs/rbush/PooledRBush":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../arrayUtils ../../maybe ../../PooledArray ../../../chunks/quickselect".split(" "),function(p,c,x,K,g,u){function n(aa,m){E(aa,0,aa.children.length,m,aa)}function E(aa,m,D,Q,V){V||(V=new M([]));V.minX=Infinity;
V.minY=Infinity;V.maxX=-Infinity;V.maxY=-Infinity;for(let H=m,k;H<D;H++)k=aa.children[H],t(V,aa.leaf?Q(k):k);return V}function t(aa,m){aa.minX=Math.min(aa.minX,m.minX);aa.minY=Math.min(aa.minY,m.minY);aa.maxX=Math.max(aa.maxX,m.maxX);aa.maxY=Math.max(aa.maxY,m.maxY)}function v(aa,m){return aa.minX-m.minX}function J(aa,m){return aa.minY-m.minY}function W(aa){return(aa.maxX-aa.minX)*(aa.maxY-aa.minY)}function q(aa){return aa.maxX-aa.minX+(aa.maxY-aa.minY)}function A(aa,m){return aa.minX<=m.minX&&aa.minY<=
m.minY&&m.maxX<=aa.maxX&&m.maxY<=aa.maxY}function B(aa,m){return m.minX<=aa.maxX&&m.minY<=aa.maxY&&m.maxX>=aa.minX&&m.maxY>=aa.minY}function e(aa,m,D,Q,V){for(m=[m,D];m.length;){D=K.assumeNonNull(m.pop());const H=K.assumeNonNull(m.pop());if(D-H<=Q)continue;const k=H+Math.ceil((D-H)/Q/2)*Q;u.quickselect(aa,k,H,D,V);m.push(H,k,k,D)}}let y=function(){function aa(D=9,Q){this.compareMinX=v;this.compareMinY=J;this.toBBox=function(V){return V};this._maxEntries=Math.max(4,D||9);this._minEntries=Math.max(2,
Math.ceil(.4*this._maxEntries));Q&&("function"===typeof Q?this.toBBox=Q:this._initFormat(Q));this.clear()}var m=aa.prototype;m.destroy=function(){this.clear();r.prune();G.prune();F.prune();O.prune()};m.all=function(D){this._all(this.data,D)};m.search=function(D,Q){let V=this.data;const H=this.toBBox;if(B(D,V))for(r.clear();V;){for(let k=0,d=V.children.length;k<d;k++){const C=V.children[k],L=V.leaf?H(C):C;B(D,L)&&(V.leaf?Q(C):A(D,L)?this._all(C,Q):r.push(C))}V=r.pop()}};m.collides=function(D){let Q=
this.data;const V=this.toBBox;if(!B(D,Q))return!1;for(r.clear();Q;){for(let H=0,k=Q.children.length;H<k;H++){const d=Q.children[H],C=Q.leaf?V(d):d;if(B(D,C)){if(Q.leaf||A(D,C))return!0;r.push(d)}}Q=r.pop()}return!1};m.load=function(D){if(!D.length)return this;if(D.length<this._minEntries){for(let Q=0,V=D.length;Q<V;Q++)this.insert(D[Q]);return this}D=this._build(D.slice(0,D.length),0,D.length-1,0);if(this.data.children.length)if(this.data.height===D.height)this._splitRoot(this.data,D);else{if(this.data.height<
D.height){const Q=this.data;this.data=D;D=Q}this._insert(D,this.data.height-D.height-1,!0)}else this.data=D;return this};m.insert=function(D){D&&this._insert(D,this.data.height-1);return this};m.clear=function(){this.data=new M([]);return this};m.remove=function(D){if(!D)return this;let Q=this.data,V=null,H=0,k=!1,d;const C=this.toBBox(D);F.clear();for(O.clear();Q||0<F.length;){if(!Q){var L;Q=K.assumeNonNull(F.pop());V=F.data[F.length-1];H=null!=(L=O.pop())?L:0;k=!0}if(Q.leaf&&(d=x.indexOf(Q.children,
D,Q.children.length,Q.indexHint),-1!==d)){Q.children.splice(d,1);F.push(Q);this._condense(F);break}k||Q.leaf||!A(Q,C)?V?(H++,Q=V.children[H],k=!1):Q=null:(F.push(Q),O.push(H),H=0,V=Q,Q=Q.children[0])}return this};m.toJSON=function(){return this.data};m.fromJSON=function(D){this.data=D;return this};m._all=function(D,Q){for(G.clear();D;){var V;if(!0===D.leaf)for(const H of D.children)Q(H);else G.pushArray(D.children);D=null!=(V=G.pop())?V:null}};m._build=function(D,Q,V,H){var k=V-Q+1,d=this._maxEntries;
if(k<=d)return D=new M(D.slice(Q,V+1)),n(D,this.toBBox),D;H||(H=Math.ceil(Math.log(k)/Math.log(d)),d=Math.ceil(k/d**(H-1)));const C=new Z([]);C.height=H;k=Math.ceil(k/d);d=k*Math.ceil(Math.sqrt(d));for(e(D,Q,V,d,this.compareMinX);Q<=V;Q+=d){const L=Math.min(Q+d-1,V);e(D,Q,L,k,this.compareMinY);for(let X=Q;X<=L;X+=k)C.children.push(this._build(D,X,Math.min(X+k-1,L),H-1))}n(C,this.toBBox);return C};m._chooseSubtree=function(D,Q,V,H){for(;;){H.push(Q);if(!0===Q.leaf||H.length-1===V)break;let k=Infinity,
d=Infinity,C=void 0;for(let L=0,X=Q.children.length;L<X;L++){const ba=Q.children[L],ia=W(ba),na=(Math.max(ba.maxX,D.maxX)-Math.min(ba.minX,D.minX))*(Math.max(ba.maxY,D.maxY)-Math.min(ba.minY,D.minY))-ia;na<d?(d=na,k=ia<k?ia:k,C=ba):na===d&&ia<k&&(k=ia,C=ba)}Q=C||Q.children[0]}return Q};m._insert=function(D,Q,V){var H=this.toBBox;V=V?D:H(D);F.clear();H=this._chooseSubtree(V,this.data,Q,F);H.children.push(D);for(t(H,V);0<=Q;)if(F.data[Q].children.length>this._maxEntries)this._split(F,Q),Q--;else break;
this._adjustParentBBoxes(V,F,Q)};m._split=function(D,Q){const V=D.data[Q];var H=V.children.length;const k=this._minEntries;this._chooseSplitAxis(V,k,H);(H=this._chooseSplitIndex(V,k,H))?(H=V.children.splice(H,V.children.length-H),H=V.leaf?new M(H):new Z(H),H.height=V.height,n(V,this.toBBox),n(H,this.toBBox),Q?D.data[Q-1].children.push(H):this._splitRoot(V,H)):console.log("  Error: assertion failed at PooledRBush._split: no valid split index")};m._splitRoot=function(D,Q){this.data=new Z([D,Q]);this.data.height=
D.height+1;n(this.data,this.toBBox)};m._chooseSplitIndex=function(D,Q,V){let H,k,d=void 0;H=k=Infinity;for(let L=Q;L<=V-Q;L++){var C=E(D,0,L,this.toBBox);const X=E(D,L,V,this.toBBox),ba=Math.max(0,Math.min(C.maxX,X.maxX)-Math.max(C.minX,X.minX))*Math.max(0,Math.min(C.maxY,X.maxY)-Math.max(C.minY,X.minY));C=W(C)+W(X);ba<H?(H=ba,d=L,k=C<k?C:k):ba===H&&C<k&&(k=C,d=L)}return d};m._chooseSplitAxis=function(D,Q,V){const H=D.leaf?this.compareMinX:v,k=D.leaf?this.compareMinY:J,d=this._allDistMargin(D,Q,V,
H);Q=this._allDistMargin(D,Q,V,k);d<Q&&D.children.sort(H)};m._allDistMargin=function(D,Q,V,H){D.children.sort(H);H=this.toBBox;var k=E(D,0,Q,H);const d=E(D,V-Q,V,H);let C=q(k)+q(d);for(let L=Q;L<V-Q;L++){const X=D.children[L];t(k,D.leaf?H(X):X);C+=q(k)}for(V=V-Q-1;V>=Q;V--)k=D.children[V],t(d,D.leaf?H(k):k),C+=q(d);return C};m._adjustParentBBoxes=function(D,Q,V){for(;0<=V;V--)t(Q.data[V],D)};m._condense=function(D){for(let Q=D.length-1;0<=Q;Q--){const V=D.data[Q];if(0===V.children.length)if(0<Q){const H=
D.data[Q-1],k=H.children;k.splice(x.indexOf(k,V,k.length,H.indexHint),1)}else this.clear();else n(V,this.toBBox)}};m._initFormat=function(D){const Q=["return a"," - b",";"];this.compareMinX=new Function("a","b",Q.join(D[0]));this.compareMinY=new Function("a","b",Q.join(D[1]));this.toBBox=new Function("a","return {minX: a"+D[0]+", minY: a"+D[1]+", maxX: a"+D[2]+", maxY: a"+D[3]+"};")};return aa}();const r=new g,G=new g,F=new g,O=new g({deallocator:void 0});g=function(){this.minY=this.minX=Infinity;
this.maxY=this.maxX=-Infinity};let P=function(aa){function m(){var D=aa.apply(this,arguments)||this;D.height=1;D.indexHint=new x.PositionHint;return D}c._inheritsLoose(m,aa);return m}(g),M=function(aa){function m(D){var Q=aa.call(this)||this;Q.children=D;Q.leaf=!0;return Q}c._inheritsLoose(m,aa);return m}(P),Z=function(aa){function m(D){var Q=aa.call(this)||this;Q.children=D;Q.leaf=!1;return Q}c._inheritsLoose(m,aa);return m}(P);p.BBox=g;p.PooledRBush=y;p.default=y;Object.defineProperty(p,"__esModule",
{value:!0})})},"esri/chunks/quickselect":function(){define(["exports"],function(p){var c={exports:{}};(function(x){(function(K){K=K();void 0!==K&&(x.exports=K)})(function(){function K(n,E,t,v,J){for(;v>t;){if(600<v-t){var W=v-t+1,q=E-t+1,A=Math.log(W),B=.5*Math.exp(2*A/3);A=.5*Math.sqrt(A*B*(W-B)/W)*(0>q-W/2?-1:1);K(n,E,Math.max(t,Math.floor(E-q*B/W+A)),Math.min(v,Math.floor(E+(W-q)*B/W+A)),J)}W=n[E];q=t;B=v;g(n,t,E);for(0<J(n[v],W)&&g(n,t,v);q<B;){g(n,q,B);q++;for(B--;0>J(n[q],W);)q++;for(;0<J(n[B],
W);)B--}0===J(n[t],W)?g(n,t,B):(B++,g(n,B,v));B<=E&&(t=B+1);E<=B&&(v=B-1)}}function g(n,E,t){var v=n[E];n[E]=n[t];n[t]=v}function u(n,E){return n<E?-1:n>E?1:0}return function(n,E,t,v,J){K(n,E,t||0,v||n.length-1,J||u)}})})(c);p.quickselect=c.exports})},"esri/layers/graphics/data/optimizedFeatureQueryEngineAdapter":function(){define(["exports","../centroid","../OptimizedFeature","../OptimizedGeometry"],function(p,c,x,K){const g={getObjectId(u){return u.objectId},getAttributes(u){return u.attributes},
getAttribute(u,n){return u.attributes[n]},cloneWithGeometry(u,n){return new x(n,u.attributes,null,u.objectId)},getGeometry(u){return u.geometry},getCentroid(u,n){u.centroid||(u.centroid=c.getCentroidOptimizedGeometry(new K,u.geometry,n.hasZ,n.hasM));return u.centroid}};p.default=g;p.optimizedFeatureQueryEngineAdapter=g;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/graphics/centroid":function(){define(["exports"],function(p){function c(K,g,u,n,E,t,v=1){t=E?t?4:3:t?3:2;let J=u,W=
u+t,q=0,A=0,B=u=0,e=0;for(let y=0,r=n-1;y<r;y++,J+=t,W+=t){n=g[J];const G=g[J+1],F=g[J+2],O=g[W],P=g[W+1],M=g[W+2];let Z=n*P-O*G;B+=Z;q+=(n+O)*Z;A+=(G+P)*Z;E&&(Z=n*M-O*F,u+=(F+M)*Z,e+=Z);n<K[0]&&(K[0]=n);n>K[1]&&(K[1]=n);G<K[2]&&(K[2]=G);G>K[3]&&(K[3]=G);E&&(F<K[4]&&(K[4]=F),F>K[5]&&(K[5]=F))}0<B*v&&(B*=-1);0<e*v&&(e*=-1);if(!B)return null;K=[q,A,.5*B];E&&(K[3]=u,K[4]=.5*e);return K}function x(K,g,u,n,E){E=n?E?4:3:E?3:2;let t=g,v=g+E,J=0,W=0,q=0,A=0;for(let r=0,G=u-1;r<G;r++,t+=E,v+=E){var B=K[t];
const F=K[t+1],O=K[t+2],P=K[v],M=K[v+1],Z=K[v+2];if(n){{var e=P-B;var y=M-F;const aa=Z-O;e=Math.sqrt(e*e+y*y+aa*aa)}}else e=P-B,y=M-F,e=Math.sqrt(e*e+y*y);e&&(J+=e,n?(B=[B+.5*(P-B),F+.5*(M-F),O+.5*(Z-O)],W+=e*B[0],q+=e*B[1],A+=e*B[2]):(B=[B+.5*(P-B),F+.5*(M-F)],W+=e*B[0],q+=e*B[1]))}return 0<J?n?[W/J,q/J,A/J]:[W/J,q/J]:0<u?n?[K[g],K[g+1],K[g+2]]:[K[g],K[g+1]]:null}p.getCentroidOptimizedGeometry=function(K,g,u,n,E){if(!g||!g.lengths.length)return null;const t="upperLeft"===(null==E?void 0:E.originPosition)?
-1:1;K.lengths.length&&(K.lengths.length=0);K.coords.length&&(K.coords.length=0);E=K.coords;const v=[],J=u?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:W,coords:q}=g,A=u?n?4:3:n?3:2;let B=0;for(var e of W){const y=c(J,q,B,e,u,n,t);y&&v.push(y);B+=e*A}v.sort((y,r)=>{let G=t*y[2]-t*r[2];
0===G&&u&&(G=y[4]-r[4]);return G});v.length&&(e=6*v[0][2],E[0]=v[0][0]/e,E[1]=v[0][1]/e,u&&(e=6*v[0][4],E[2]=0!==e?v[0][3]/e:0),E[0]<J[0]||E[0]>J[1]||E[1]<J[2]||E[1]>J[3]||u&&(E[2]<J[4]||E[2]>J[5]))&&(E.length=0);if(!E.length)if(g=g.lengths[0]?x(q,0,W[0],u,n):null)E[0]=g[0],E[1]=g[1],u&&2<g.length&&(E[2]=g[2]);else return null;return K};p.lineCentroid=x;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/graphics/data/projectionSupport":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../geometry/projection ../../../geometry/geometryAdapters/json ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/webMercatorUtils".split(" "),
function(p,c,x,K,g,u){function n(B,e){if(!e)return null;if("x"in e){var y={x:0,y:0};[y.x,y.y]=B(e.x,e.y,J);null!=e.z&&(y.z=e.z);null!=e.m&&(y.m=e.m);return y}if("xmin"in e)return y={xmin:0,ymin:0,xmax:0,ymax:0},[y.xmin,y.ymin]=B(e.xmin,e.ymin,J),[y.xmax,y.ymax]=B(e.xmax,e.ymax,J),e.hasZ&&(y.zmin=e.zmin,y.zmax=e.zmax,y.hasZ=!0),e.hasM&&(y.mmin=e.mmin,y.mmax=e.mmax,y.hasM=!0),y;if("rings"in e)return{rings:E(e.rings,B),hasM:e.hasM,hasZ:e.hasZ};if("paths"in e)return{paths:E(e.paths,B),hasM:e.hasM,hasZ:e.hasZ};
if("points"in e)return{points:t(e.points,B),hasM:e.hasM,hasZ:e.hasZ}}function E(B,e){const y=[];for(const r of B)y.push(t(r,e));return y}function t(B,e){const y=[];for(const r of B)B=e(r[0],r[1],[0,0]),y.push(B),2<r.length&&B.push(r[2]),3<r.length&&B.push(r[3]);return y}function v(){v=c._asyncToGenerator(function*(B,e){e&&(B=Array.isArray(B)?B.map(y=>{var r;return null==(r=y.geometry)?void 0:r.spatialReference}):[B],yield x.initializeProjection(B.map(y=>({source:y,dest:e}))))});return v.apply(this,
arguments)}const J=[0,0],W=n.bind(null,u.lngLatToXY),q=n.bind(null,u.xyToLngLat),A=new (function(){function B(){this._jobs=[];this._timer=null;this._process=this._process.bind(this)}var e=B.prototype;e.push=function(){var y=c._asyncToGenerator(function*(r,G,F){if(!(r&&r.length&&G&&F)||g.equals(G,F))return r;const O={geometries:r,inSpatialReference:G,outSpatialReference:F,resolve:null};this._jobs.push(O);return new Promise(P=>{O.resolve=P;null===this._timer&&(this._timer=setTimeout(this._process,10))})});
return function(r,G,F){return y.apply(this,arguments)}}();e._process=function(){this._timer=null;const y=this._jobs.shift();if(y){var {geometries:r,inSpatialReference:G,outSpatialReference:F,resolve:O}=y;u.canProject(G,F)?g.isWebMercator(F)?O(r.map(W)):O(r.map(q)):O(x.projectMany(K.jsonAdapter,r,G,F,null));0<this._jobs.length&&(this._timer=setTimeout(this._process,10))}};return B}());p.checkProjectionSupport=function(B,e){return v.apply(this,arguments)};p.project=function(B,e,y){if(!B)return B;y||
(y=e,e=B.spatialReference);return g.isValid(e)&&g.isValid(y)&&!g.equals(e,y)?u.canProject(e,y)?g.isWebMercator(y)?W(B):q(B):x.projectMany(K.jsonAdapter,[B],e,y,null)[0]:B};p.projectMany=function(B,e,y){return A.push(B,e,y)};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/geometry/projection":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../core/Error ../core/mathUtils ../core/maybe ../core/promiseUtils ../core/unitUtils ../chunks/mat4 ../chunks/vec3 ../chunks/vec3f64 ./Extent ./Multipoint ../chunks/pe ./Point ./Polygon ./Polyline ./projectionEllipsoid ./support/aaBoundingRect ./support/Ellipsoid ./support/geodesicConstants ./support/GeographicTransformation ./support/spatialReferenceUtils".split(" "),
function(p,c,x,K,g,u,n,E,t,v,J,W,q,A,B,e,y,r,G,F,O,P,M){function Z(){return!!Ea&&A.isLoaded()}function aa(ea){u.isNone(Ga)&&(Ga=Promise.all([A.load(),(new Promise(function(ha,fa){p(["../chunks/geometryEngineBase"],ha,fa)})).then(function(ha){return ha.geometryEngineBase}),new Promise(function(ha,fa){p(["./geometryAdapters/hydrated"],ha,fa)})]));return Ga.then(([,ha,{hydratedAdapter:fa}])=>{n.throwIfAborted(ea);Fa=fa;Ea=ha.default;Ea._enableProjection(A.pe)})}function m(ea,ha,fa,la,xa=null){if(u.isNone(fa)||
u.isNone(la))return ha;if(Q(fa,la,xa))return ha.map(Aa=>H(Aa,fa,la));if(u.isNone(xa)){const Aa=P.cacheKey(fa,la);void 0!==Ka[Aa]?xa=Ka[Aa]:(xa=D(fa,la,null),u.isNone(xa)&&(xa=new P),Ka[Aa]=xa)}if(u.isNone(Ea))throw new pa;return Ea._project(ea,ha,fa,la,xa)}function D(ea,ha,fa=null){if(u.isNone(Ea))throw new pa;if(u.isNone(ea)||u.isNone(ha))return null;ea=Ea._getTransformation(Fa,ea,ha,fa,null==fa?void 0:fa.spatialReference);return null!==ea?P.fromGE(ea):null}function Q(ea,ha,fa){return fa?!1:M.equals(ea,
ha)?!0:M.isValid(ea)&&M.isValid(ha)&&!!ya(ea,ha,a)}function V(){V=x._asyncToGenerator(function*(ea,ha,fa,la){if(!Z())if(Array.isArray(ea))for(const {source:xa,dest:Aa,geographicTransformation:Ma}of ea){if(!Q(xa,Aa,Ma))return aa(la)}else if(!Q(ea,ha,fa))return aa(la)});return V.apply(this,arguments)}function H(ea,ha,fa){if(!ea)return ea;if("x"in ea){var la=new B;return k(ea,ha,la,fa)?la:null}return"xmin"in ea?(la=new W,X(ea,ha,la,fa)?la:null):"rings"in ea?(la=new e,L(ea,ha,la,fa)?la:null):"paths"in
ea?(la=new y,C(ea,ha,la,fa)?la:null):"points"in ea?(la=new q,d(ea,ha,la,fa)?la:null):null}function k(ea,ha,fa,la,xa=0){Ra[0]=ea.x;Ra[1]=ea.y;const Aa=ea.z;Ra[2]=void 0!==Aa?Aa:xa;if(!ra(Ra,ha,0,Ra,la,0,1))return!1;fa.x=Ra[0];fa.y=Ra[1];fa.spatialReference=la;void 0===Aa?(fa.z=void 0,fa.hasZ=!1):(fa.z=Ra[2],fa.hasZ=!0);void 0===ea.m?(fa.m=void 0,fa.hasM=!1):(fa.m=ea.m,fa.hasM=!0);return!0}function d(ea,ha,fa,la,xa=0){const {points:Aa,hasZ:Ma,hasM:Pa}=ea;ea=[];const $a=Aa.length,ab=[];for(var Va of Aa)ab.push(Va[0],
Va[1],Ma?Va[2]:xa);if(!ra(ab,ha,0,ab,la,0,$a))return!1;for(ha=0;ha<$a;++ha){xa=3*ha;Va=ab[xa];const hb=ab[xa+1];Ma&&Pa?ea.push([Va,hb,ab[xa+2],Aa[ha][3]]):Ma?ea.push([Va,hb,ab[xa+2]]):Pa?ea.push([Va,hb,Aa[ha][2]]):ea.push([Va,hb])}fa.points=ea;fa.spatialReference=la;fa.hasZ=Ma;fa.hasM=Pa;return!0}function C(ea,ha,fa,la,xa=0){const {paths:Aa,hasZ:Ma,hasM:Pa}=ea;ea=[];if(!wa(Aa,Ma,Pa,ha,ea,la,xa))return!1;fa.paths=ea;fa.spatialReference=la;fa.hasZ=Ma;fa.hasM=Pa;return!0}function L(ea,ha,fa,la,xa=0){const {rings:Aa,
hasZ:Ma,hasM:Pa}=ea;ea=[];if(!wa(Aa,Ma,Pa,ha,ea,la,xa))return!1;fa.rings=ea;fa.spatialReference=la;fa.hasZ=Ma;fa.hasM=Pa;return!0}function X(ea,ha,fa,la,xa=0){const {xmin:Aa,ymin:Ma,xmax:Pa,ymax:$a,hasZ:ab,hasM:Va}=ea;if(!ba(Aa,Ma,ab?ea.zmin:xa,ha,Ra,la))return!1;fa.xmin=Ra[0];fa.ymin=Ra[1];ab&&(fa.zmin=Ra[2]);if(!ba(Pa,$a,ab?ea.zmax:xa,ha,Ra,la))return!1;fa.xmax=Ra[0];fa.ymax=Ra[1];ab&&(fa.zmax=Ra[2]);Va&&(fa.mmin=ea.mmin,fa.mmax=ea.mmax);fa.spatialReference=la;return!0}function ba(ea,ha,fa,la,xa,
Aa){Ta[0]=ea;Ta[1]=ha;Ta[2]=fa;return ra(Ta,la,0,xa,Aa,0,1)}function ia(ea,ha,fa,la){if(u.isNone(ha)||u.isNone(la)||2>ea.length)return!1;2===ea.length&&(Ta[0]=ea[0],Ta[1]=ea[1],Ta[2]=0,ea=Ta);return ra(ea,ha,0,fa,la,0,1)}function na(ea,ha,fa){if(u.isNone(ha))return!1;ha=Ia(ha,gb);ha=cb[ha][6];if(u.isNone(ha))return!1;ha(ea,0,Ta,0);fa!==Ta&&(fa[0]=Ta[0],fa[1]=Ta[1],2<fa.length&&(fa[2]=Ta[2]));return!0}function ra(ea,ha,fa,la,xa,Aa,Ma=1){ha=ya(ha,xa,a);if(u.isNone(ha))return!1;if(ha===Ha){if(ea===la&&
fa===Aa)return!0;Ma=fa+3*Ma;for(let Pa=fa,$a=Aa;Pa<Ma;Pa++,$a++)la[$a]=ea[Pa];return!0}Ma=fa+3*Ma;for(let Pa=fa,$a=Aa;Pa<Ma;Pa+=3,$a+=3)ha(ea,Pa,la,$a);return!0}function wa(ea,ha,fa,la,xa,Aa,Ma=0){const Pa=[];for(const $a of ea)for(const ab of $a)Pa.push(ab[0],ab[1],ha?ab[2]:Ma);if(!ra(Pa,la,0,Pa,Aa,0,Pa.length/3))return!1;la=0;xa.length=0;for(const $a of ea){ea=[];for(const ab of $a)ha&&fa?ea.push([Pa[la++],Pa[la++],Pa[la++],ab[3]]):ha?ea.push([Pa[la++],Pa[la++],Pa[la++]]):(fa?ea.push([Pa[la++],
Pa[la++],ab[2]]):ea.push([Pa[la++],Pa[la++]]),la++);xa.push(ea)}return!0}function Ca(ea,ha,fa){const la=Math.sin(ha);ha=Math.cos(ha);const xa=Math.sin(ea);ea=Math.cos(ea);fa[0]=-la;fa[4]=-xa*ha;fa[8]=ea*ha;fa[12]=0;fa[1]=ha;fa[5]=-xa*la;fa[9]=ea*la;fa[13]=0;fa[2]=0;fa[6]=ea;fa[10]=xa;fa[14]=0;fa[3]=0;fa[7]=0;fa[11]=0;fa[15]=1;return fa}function Ia(ea,ha){if(ha.spatialReference===ea)return ha.spatialReferenceId;ha.spatialReference=ea;"metersPerUnit"in ha&&(ha.metersPerUnit=E.getMetersPerUnitForSR(ea,
1));return ea.wkt===r.SphericalECEFSpatialReference.wkt?ha.spatialReferenceId=1:M.isWGS84(ea)?ha.spatialReferenceId=2:M.isWebMercator(ea)?ha.spatialReferenceId=3:ea.wkt===r.WGS84ECEFSpatialReference.wkt?ha.spatialReferenceId=4:4490===ea.wkid?ha.spatialReferenceId=5:ea.wkt===r.SphericalPCPFMars.wkt?ha.spatialReferenceId=7:ea.wkt===r.SphericalPCPFMoon.wkt?ha.spatialReferenceId=9:M.isMars(ea)?ha.spatialReferenceId=8:M.isMoon(ea)?ha.spatialReferenceId=10:ha.spatialReferenceId=0}function Ha(ea,ha,fa,la){ea!==
fa&&(fa[la++]=ea[ha++],fa[la++]=ea[ha++],fa[la]=ea[ha])}function La(ea,ha,fa,la){fa[la++]=Ua*(ea[ha++]/F.earth.radius);fa[la++]=Ua*(Math.PI/2-2*Math.atan(Math.exp(-1*ea[ha++]/F.earth.radius)));fa[la]=ea[ha]}function oa(ea,ha,fa,la){La(ea,ha,fa,la);R(fa,la,fa,la)}function ua(ea,ha,fa,la){La(ea,ha,fa,la);ma(fa,la,fa,la)}function ka(ea,ha,fa,la,xa){var Aa=.4999999*Math.PI;Aa=g.clamp(Za*ea[ha+1],-Aa,Aa);Aa=Math.sin(Aa);fa[la++]=Za*ea[ha]*xa.radius;fa[la++]=xa.halfSemiMajorAxis*Math.log((1+Aa)/(1-Aa));
fa[la]=ea[ha+2]}function b(ea,ha,fa,la){ka(ea,ha,fa,la,F.earth)}function l(ea,ha,fa,la,xa){xa+=ea[ha+2];const Aa=Za*ea[ha+1];ea=Za*ea[ha];ha=Math.cos(Aa);fa[la++]=Math.cos(ea)*ha*xa;fa[la++]=Math.sin(ea)*ha*xa;fa[la]=Math.sin(Aa)*xa}function h(ea,ha,fa,la){l(ea,ha,fa,la,F.moon.radius)}function w(ea,ha,fa,la){l(ea,ha,fa,la,F.mars.radius)}function R(ea,ha,fa,la){l(ea,ha,fa,la,F.earth.radius)}function S(ea,ha,fa,la,xa){var Aa=ea[ha];const Ma=ea[ha+1];ha=ea[ha+2];ea=Math.sqrt(Aa*Aa+Ma*Ma+ha*ha);ha=g.asinClamped(ha/
(0===ea?1:ea));Aa=Math.atan2(Ma,Aa);fa[la++]=Ua*Aa;fa[la++]=Ua*ha;fa[la]=ea-xa}function I(ea,ha,fa,la){S(ea,ha,fa,la,F.moon.radius)}function N(ea,ha,fa,la){S(ea,ha,fa,la,F.mars.radius)}function Y(ea,ha,fa,la){S(ea,ha,fa,la,F.earth.radius)}function ca(ea,ha,fa,la){Y(ea,ha,fa,la);b(fa,la,fa,la)}function ja(ea,ha,fa,la){Y(ea,ha,fa,la);ma(fa,la,fa,la)}function ma(ea,ha,fa,la){{var xa=F.earth;const Ma=Za*ea[ha];var Aa=Za*ea[ha+1];ea=ea[ha+2];ha=Math.sin(Aa);Aa=Math.cos(Aa);const Pa=xa.radius/Math.sqrt(1-
xa.eccentricitySquared*ha*ha);fa[la++]=(Pa+ea)*Aa*Math.cos(Ma);fa[la++]=(Pa+ea)*Aa*Math.sin(Ma);fa[la++]=(Pa*(1-xa.eccentricitySquared)+ea)*ha}}function sa(ea,ha,fa,la){var xa=O.earthEllipsoidConstants,Aa=ea[ha],Ma=ea[ha+1];ea=ea[ha+2];let Pa;ha=Math.abs(ea);var $a=Aa*Aa+Ma*Ma;var ab=Math.sqrt($a);var Va=$a+ea*ea;var hb=Math.sqrt(Va);Aa=Math.atan2(Ma,Aa);var lb=ea*ea/Va;Va=$a/Va;Ma=xa.a2/hb;$a=xa.a3-xa.a4/hb;.3<Va?(lb=ha/hb*(1+Va*(xa.a1+Ma+lb*$a)/hb),hb=Math.asin(lb),Ma=lb*lb,Va=Math.sqrt(1-Ma)):
(Va=ab/hb*(1-lb*(xa.a5-Ma-Va*$a)/hb),hb=Math.acos(Va),Ma=1-Va*Va,lb=Math.sqrt(Ma));Pa=1-F.earth.eccentricitySquared*Ma;Ma=F.earth.radius/Math.sqrt(Pa);xa=xa.a6*Ma;Ma=ab-Ma*Va;$a=ha-xa*lb;ha=Va*Ma+lb*$a;ab=Va*$a-lb*Ma;xa=ab/(xa/Pa+ha);hb+=xa;0>ea&&(hb=-hb);fa[la++]=Ua*Aa;fa[la++]=Ua*hb;fa[la]=ha+ab*xa/2}function va(ea,ha,fa,la){sa(ea,ha,fa,la);R(fa,la,fa,la)}function za(ea,ha,fa,la){sa(ea,ha,fa,la);b(fa,la,fa,la)}function ya(ea,ha,fa=Oa()){return u.isNone(ea)||u.isNone(ha)?null:Ba(ea,ha,fa).projector}
function Ba(ea,ha,fa){if(u.isNone(ea)||u.isNone(ha)||fa.source.spatialReference===ea&&fa.dest.spatialReference===ha)return fa;const la=Ia(ea,fa.source),xa=Ia(ha,fa.dest);0===la&&0===xa?M.equals(ea,ha)?fa.projector=Ha:fa.projector=null:fa.projector=cb[la][xa];return fa}function Oa(){return{source:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},projector:Ha}}let Ea=null,Fa=null,Ga=null,Ka={},pa=function(ea){function ha(){return ea.call(this,
"projection:not-loaded","projection engine not fully loaded yet, please call load()")||this}x._inheritsLoose(ha,ea);return ha}(K);const cb={[2]:{[5]:null,[8]:null,[10]:null,[11]:Ha,[6]:Ha,[1]:R,[7]:null,[9]:null,[0]:null,[3]:b,[2]:Ha,[4]:ma},[5]:{[5]:Ha,[8]:null,[10]:null,[11]:Ha,[6]:Ha,[1]:R,[7]:null,[9]:null,[0]:null,[3]:null,[2]:null,[4]:ma},[8]:{[5]:null,[8]:Ha,[10]:null,[11]:Ha,[6]:null,[1]:null,[7]:w,[9]:null,[0]:null,[3]:null,[2]:null,[4]:null},[10]:{[5]:null,[8]:null,[10]:Ha,[11]:Ha,[6]:null,
[1]:null,[7]:null,[9]:h,[0]:null,[3]:null,[2]:null,[4]:null},[3]:{[5]:null,[8]:null,[10]:null,[11]:La,[6]:La,[1]:oa,[7]:null,[9]:null,[0]:null,[3]:Ha,[2]:La,[4]:ua},[4]:{[5]:sa,[8]:null,[10]:null,[11]:sa,[6]:sa,[1]:va,[7]:null,[9]:null,[0]:null,[3]:za,[2]:sa,[4]:Ha},[1]:{[5]:Y,[8]:null,[10]:null,[11]:Y,[6]:Y,[1]:Ha,[7]:null,[9]:null,[0]:null,[3]:ca,[2]:Y,[4]:ja},[7]:{[5]:null,[8]:N,[10]:null,[11]:N,[6]:null,[1]:null,[7]:Ha,[9]:null,[0]:null,[3]:null,[2]:null,[4]:null},[9]:{[5]:null,[8]:null,[10]:I,
[11]:I,[6]:null,[1]:null,[7]:null,[9]:Ha,[0]:null,[3]:null,[2]:null,[4]:null},[0]:{[5]:null,[8]:null,[10]:null,[11]:null,[6]:null,[1]:null,[7]:null,[9]:null,[0]:Ha,[3]:null,[2]:null,[4]:null},[11]:{[5]:Ha,[8]:Ha,[10]:Ha,[11]:Ha,[6]:Ha,[1]:R,[7]:w,[9]:h,[0]:null,[3]:b,[2]:Ha,[4]:ma},[6]:{[5]:null,[8]:null,[10]:null,[11]:Ha,[6]:Ha,[1]:R,[7]:null,[9]:null,[0]:null,[3]:null,[2]:Ha,[4]:ma}},gb={spatialReference:null,spatialReferenceId:0},fb={spatialReference:null,spatialReferenceId:0},a=Oa(),ib=Oa(),Za=
g.deg2rad(1),Ua=g.rad2deg(1),Ta=J.create(),jb=J.create(),tb=J.create(),Ra=J.create(),Bb=J.create();c.canProjectToWGS84ComparableLonLat=function(ea){if(u.isNone(ea))return!1;ea=Ia(ea,gb);return!!cb[ea][6]};c.canProjectWithoutEngine=Q;c.computeLatLonToENURotation=Ca;c.computeLinearTransformation=function(ea,ha,fa,la){if(u.isNone(ea)||u.isNone(la))return!1;var xa=Ia(ea,gb),Aa=Ia(la,fb);if(xa===Aa&&1!==Aa&&7!==Aa&&9!==Aa&&(0!==xa||M.equals(ea,la)))return t.identity(fa),t.translate(fa,fa,ha),!0;if(1===
Aa||7===Aa||9===Aa){la=ea=0;xa=cb[xa][11];Aa=cb[11][Aa];if(u.isNone(xa)||u.isNone(Aa))return!1;xa(ha,0,jb,0);Aa(jb,0,tb,0);ea=Za*jb[0];la=Za*jb[1];Ca(la,ea,fa);fa[12]=tb[0];fa[13]=tb[1];fa[14]=tb[2];return!0}if(3===Aa&&(2===xa||1===xa)){Aa=cb[xa][11];if(u.isNone(Aa))return!1;Aa(ha,0,jb,0);ha=Za*jb[1];b(jb,0,tb,0);t.identity(fa);t.translate(fa,fa,tb);ha=1/Math.cos(ha);t.scale(fa,fa,[ha,ha,1]);return!0}return!1};c.getProjectorName=function(ea,ha){switch(ya(ea,ha,a)){case Ha:return"copy3";case R:return"wgs84ToSphericalECEF";
case b:return"wgs84ToWebMercator";case ma:return"wgs84ToWGS84ECEF";case La:return"webMercatorToWGS84";case oa:return"webMercatorToSphericalECEF";case ua:return"webMercatorToWGS84ECEF";case sa:return"wgs84ECEFToWGS84";case va:return"wgs84ECEFToSphericalECEF";case za:return"wgs84ECEFToWebMercator";case Y:return"sphericalECEFToWGS84";case ca:return"sphericalECEFToWebMercator";case N:return"sphericalMarsPCPFToMars2000";case I:return"sphericalMoonPCPFToMoon2000";case ja:return"sphericalECEFToWGS84ECEF";
case w:return"mars2000ToSphericalPCPF";case h:return"moon2000ToSphericalPCPF";default:return null}};c.getTransformation=D;c.getTransformations=function(ea,ha,fa=null){if(u.isNone(Ea))throw new pa;ea=Ea._getTransformationBySuitability(Fa,ea,ha,fa,null==fa?void 0:fa.spatialReference);if(null!==ea){ha=[];for(const la of ea)ha.push(P.fromGE(la));return ha}return[]};c.initializeProjection=function(ea,ha,fa,la){return V.apply(this,arguments)};c.isLoaded=Z;c.isSupported=function(){return!0};c.load=aa;c.localLinearScaleFactors=
function(ea,ha,fa,la){if(u.isNone(ha)||u.isNone(la))return!1;const xa=Ia(ha,gb);var Aa=Ia(la,fb);if(xa===Aa&&0!==xa||M.equals(ha,la))return fa[0]=1,fa[1]=1,fa[2]=1,!0;if(1===xa){ha=v.length(ea);ea=ha/Math.sqrt(ea[0]*ea[0]+ea[1]*ea[1]);ha/=F.earth.radius;if(3===Aa)return fa[0]=ea*ha,fa[1]=ea*ha,fa[2]=1,!0;if(2===Aa||5===Aa)return Aa=180/(F.earth.radius*Math.PI),fa[0]=Aa*ea*ha,fa[1]=Aa*ha,fa[2]=1,!0}return!1};c.lonLatToSphericalPCPF=function(ea,ha,fa,la,xa=0){la+=xa;xa=Math.cos(fa);ea[0]=Math.cos(ha)*
xa*la;ea[1]=Math.sin(ha)*xa*la;ea[2]=Math.sin(fa)*la};c.lonLatToWebMercatorComparable=ka;c.project=function(ea,ha,fa=null){return Array.isArray(ea)?0===ea.length?[]:m(Fa,ea,ea[0].spatialReference,ha,fa):m(Fa,[ea],ea.spatialReference,ha,fa)[0]};c.projectBoundingRect=function(ea,ha,fa,la){if(null==ea)return!1;if(M.equals(ha,la))return G.set(fa,ea),!0;Ta[0]=ea[0];Ta[1]=ea[1];Ta[2]=0;if(!ra(Ta,ha,0,Ta,la,0,1))return!1;fa[0]=Ta[0];fa[1]=Ta[1];Ta[0]=ea[2];Ta[1]=ea[3];Ta[2]=0;if(!ra(Ta,ha,0,Ta,la,0,1))return!1;
fa[2]=Ta[0];fa[3]=Ta[1];return!0};c.projectBoundingSphere=function(ea,ha,fa,la){if(u.isNone(ha)||u.isNone(la))return!1;ha=Ba(ha,la,ib);if(ha.projector===Ha)return fa[0]=ea[0],fa[1]=ea[1],fa[2]=ea[2],fa[3]=ea[3],!0;if(u.isNone(ha.projector))return!1;const {source:xa,dest:Aa}=ha;if(3===Aa.spatialReferenceId){ha=cb[xa.spatialReferenceId][2];if(u.isNone(ha))return!1;ha(ea,0,jb,0);ha=Math.abs(Za*jb[1])+Math.asin(ea[3]/(F.earth.radius+ea[2]));b(jb,0,fa,0);fa[3]=ha>.9999*Math.PI?Number.MAX_VALUE:1/Math.cos(ha)*
ea[3];return!0}ha.projector(ea,0,fa,0);fa[3]=ea[3]*xa.metersPerUnit/Aa.metersPerUnit;return!0};c.projectBuffer=ra;c.projectDirection=function(ea,ha,fa,la,xa){v.copy(Ra,ea);v.add(Bb,ea,ha);ia(Ra,fa,Ra,xa);ia(Bb,fa,Bb,xa);v.subtract(la,Bb,Ra);v.normalize(la,la)};c.projectExtent=function(ea,ha,fa=ha.spatialReference,la=0){return u.isNone(fa)?!1:X(ea,ea.spatialReference,ha,fa,la)};c.projectMany=m;c.projectMultipoint=function(ea,ha,fa=ha.spatialReference,la=0){return u.isNone(fa)?!1:d(ea,ea.spatialReference,
ha,fa,la)};c.projectPoint=function(ea,ha,fa=ha.spatialReference,la=0){return u.isNone(fa)?!1:k(ea,ea.spatialReference,ha,fa,la)};c.projectPointToVector=function(ea,ha,fa,la=0){Ra[0]=ea.x;Ra[1]=ea.y;const xa=ea.z;Ra[2]=void 0!==xa?xa:la;return ra(Ra,ea.spatialReference,0,ha,fa,0,1)};c.projectPointToWGS84ComparableLonLat=function(ea,ha){Ra[0]=ea.x;Ra[1]=ea.y;const fa=ea.z;Ra[2]=void 0!==fa?fa:0;return na(Ra,ea.spatialReference,ha)};c.projectPolygon=function(ea,ha,fa=ha.spatialReference,la=0){return u.isNone(fa)?
!1:L(ea,ea.spatialReference,ha,fa,la)};c.projectPolyline=function(ea,ha,fa=ha.spatialReference,la=0){return u.isNone(fa)?!1:C(ea,ea.spatialReference,ha,fa,la)};c.projectVectorToDehydratedPoint=function(ea,ha,fa){return ra(ea,ha,0,Ra,fa.spatialReference,0,1)?(fa.x=Ra[0],fa.y=Ra[1],fa.z=Ra[2],fa):null};c.projectVectorToPoint=function(ea,ha,fa){if(u.isNone(ha)||u.isNone(fa))return null;const la=new B({spatialReference:fa});return ra(ea,ha,0,Ra,fa,0,1)?(la.x=Ra[0],la.y=Ra[1],la.z=Ra[2],la):null};c.projectVectorToVector=
ia;c.projectVectorToWGS84ComparableLonLat=function(ea,ha,fa){return na(ea,ha,fa)};c.projectXYZToVector=ba;c.sphericalPCPFtoLonLatElevation=S;c.unload=function(){Ga=Fa=Ea=null;Ka={}};Object.defineProperty(c,"__esModule",{value:!0})})},"esri/core/unitUtils":function(){define("exports ./has ./jsonMap ../geometry/projectionEllipsoid ../geometry/SpatialReference ../geometry/support/Ellipsoid ../geometry/support/spatialReferenceUtils ../geometry/support/WKIDUnitConversion".split(" "),function(p,c,x,K,g,
u,n,E){function t(k){if(k=Q[k])return k;throw Error("unknown measure");}function v(k){return D[k].baseUnit}function J(k,d=null){d=d||t(k);return D[d].baseUnit===k}function W(k,d,C){if(d===C)return k;const L=t(d);if(L!==t(C))throw Error("incompatible units");k=J(d,L)?k:k*D[L].units[d].inBaseUnits;return J(C,L)?k:k/D[L].units[C].inBaseUnits}function q(k,d){return 3E3>W(k,d,"meters")?"meters":"kilometers"}function A(k,d){return 1E5>W(k,d,"meters")?"meters":"kilometers"}function B(k,d){return 1E3>W(k,
d,"feet")?"feet":"miles"}function e(k,d){return 1E5>W(k,d,"feet")?"feet":"miles"}function y(k){return m.fromJSON(k.toLowerCase())||null}function r(k,d=u.earth.metersPerDegree){return G(k,!0)||d}function G(k,d=!1){let C,L,X=null;null!=k&&("object"===typeof k?(C=k.wkid,L=k.wkt):"number"===typeof k?C=k:"string"===typeof k&&(L=k));if(C){if(n.isWKIDFromMars(C))return u.mars.metersPerDegree;if(n.isWKIDFromMoon(C))return u.moon.metersPerDegree;X=M.values[M[C]];!X&&d&&aa.has(C)&&(X=O)}else L&&(-1!==L.search(/^PROJCS/i)?
(k=P.exec(L))&&k[1]&&(X=parseFloat(k[1].split(",")[1])):-1!==L.search(/^GEOCCS/i)&&(k=Z.exec(L))&&k[1]&&(X=parseFloat(k[1].split(",")[1])));return X}function F(k){let d,C,L=null;null!=k&&("object"===typeof k?(d=k.wkid,C=k.wkt):"number"===typeof k?d=k:"string"===typeof k&&(C=k));d?L=M.units[M[d]]:C&&-1!==C.search(/^PROJCS/i)&&(k=P.exec(C))&&k[1]&&(L=(k=/[\\"\\']{1}([^\\"\\']+)/.exec(k[1]))&&k[1]);return L?y(L):null}const O=u.earth.radius*Math.PI/200,P=/UNIT\[([^\]]+)\]\]$/i,M=E,Z=/UNIT\[([^\]]+)\]/i,
aa=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),m=x.strict()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains",
"50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"});c={millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1E3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}};E={"square-millimeters":{inBaseUnits:1E-6},"square-centimeters":{inBaseUnits:1E-4},"square-decimeters":{inBaseUnits:.1*
.1},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:1E6},"square-inches":{inBaseUnits:6.4516E-4},"square-feet":{inBaseUnits:.09290304},"square-yards":{inBaseUnits:.83612736},"square-miles":{inBaseUnits:2589988.110336},"square-us-feet":{inBaseUnits:(k=>k*k)(1200/3937)},acres:{inBaseUnits:4046.8564224},ares:{inBaseUnits:100},hectares:{inBaseUnits:1E4}};const D={length:{baseUnit:"meters",units:c},area:{baseUnit:"square-meters",units:E},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},
"cubic-millimeters":{inBaseUnits:1E3*1E-9},"cubic-centimeters":{inBaseUnits:.001},"cubic-decimeters":{inBaseUnits:1},"cubic-meters":{inBaseUnits:1E3},"cubic-kilometers":{inBaseUnits:1E12},"cubic-inches":{inBaseUnits:.016387064},"cubic-feet":{inBaseUnits:.09290304*304.8},"cubic-yards":{inBaseUnits:764.554857984},"cubic-miles":{inBaseUnits:4.16818182544058E12}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},Q=function(){const k={};for(const d in D)for(const C in D[d].units)k[C]=
d;return k}(),V={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},H={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",
esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"};c=x.strict()(V);E=x.strict()(H);x=x.strict()({...V,...H});p.areaUnitsJSONMap=c;p.baseUnitForMeasure=v;p.baseUnitForUnit=function(k){return v(t(k))};p.convertUnit=W;p.getDefaultUnitSystem=function(k){if(!k)return null;switch(F(k)){case "feet":case "us-feet":case "clarke-feet":case "clarke-yards":case "clarke-links":case "sears-yards":case "sears-feet":case "sears-chains":case "benoit-1895-b-chains":case "indian-yards":case "indian-1937-yards":case "gold-coast-feet":case "sears-1922-truncated-chains":return"imperial";
case "50-kilometers":case "150-kilometers":case "meters":return"metric"}return null};p.getMetersPerUnit=G;p.getMetersPerUnitForSR=r;p.getMetersPerVerticalUnitForSR=function(k){if(k&&"object"===typeof k&&!n.isEarth(k))return 1;k=r(k);return 1E5<k?1:k};p.getUnitString=F;p.getVerticalUnitStringForSR=function(k){const d=r(k),C=k instanceof g?K.getReferenceEllipsoid(k).metersPerDegree:1E5;return d>=C?"meters":F(k)};p.inchesPerMeter=39.37;p.isBaseUnit=J;p.isMeasurementSystem=function(k){return"imperial"===
k||"metric"===k};p.lengthToDegrees=function(k,d,C){return W(k,d,"meters")/(C*Math.PI/180)};p.lengthUnitsJSONMap=E;p.measureForUnit=t;p.measurementAreaUnits="metric imperial square-inches square-feet square-yards square-miles square-us-feet square-meters square-kilometers acres ares hectares".split(" ");p.measurementLengthUnits="metric imperial inches feet yards miles nautical-miles us-feet meters kilometers".split(" ");p.preferredImperialAreaUnit=function(k,d){return 1E6>W(k,d,"square-feet")?"square-feet":
"square-miles"};p.preferredImperialLengthUnit=B;p.preferredImperialVerticalLengthUnit=e;p.preferredLengthUnit=function(k,d,C){switch(C){case "metric":return q(k,d);case "imperial":return B(k,d);default:return C}};p.preferredMetricAreaUnit=function(k,d){return 3E6>W(k,d,"square-meters")?"square-meters":"square-kilometers"};p.preferredMetricLengthUnit=q;p.preferredMetricVerticalLengthUnit=A;p.preferredVerticalLengthUnit=function(k,d,C){switch(C){case "metric":return A(k,d);case "imperial":return e(k,
d);default:return C}};p.unitFromRESTJSON=y;p.unitToRESTJSON=function(k){return m.toJSON(k)||null};p.unitsJSONMap=x;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/geometry/projectionEllipsoid":function(){define(["exports","./SpatialReference","./support/Ellipsoid","./support/spatialReferenceUtils"],function(p,c,x,K){function g(v){return new c({wkt:`GEOCCS["Spherical geocentric",
    DATUM["Not specified",
      SPHEROID["Sphere",${v.radius},0]],
    PRIMEM["Greenwich",0.0,
      AUTHORITY["EPSG","8901"]],
    UNIT["m",1.0],
    AXIS["Geocentric X",OTHER],
    AXIS["Geocentric Y",EAST],
    AXIS["Geocentric Z",NORTH]
  ]`})}const u=g(x.earth),n=g(x.mars),E=g(x.moon),t=new c({wkt:`GEOCCS["WGS 84",
  DATUM["WGS_1984",
    SPHEROID["WGS 84",${x.earth.radius},298.257223563,
      AUTHORITY["EPSG","7030"]],
    AUTHORITY["EPSG","6326"]],
  PRIMEM["Greenwich",0,
    AUTHORITY["EPSG","8901"]],
  UNIT["m",1.0,
    AUTHORITY["EPSG","9001"]],
  AXIS["Geocentric X",OTHER],
  AXIS["Geocentric Y",OTHER],
  AXIS["Geocentric Z",NORTH],
  AUTHORITY["EPSG","4978"]
]`});p.SphericalECEFSpatialReference=u;p.SphericalPCPFMars=n;p.SphericalPCPFMoon=E;p.WGS84ECEFSpatialReference=t;p.createSphericalPCPF=g;p.getReferenceEllipsoid=function(v){return v&&(K.isMars(v)||v===n)?x.mars:v&&(K.isMoon(v)||v===E)?x.moon:x.earth};p.getReferenceEllipsoidFromWKID=function(v){return K.isWKIDFromMars(v)?x.mars:K.isWKIDFromMoon(v)?x.moon:x.earth};p.getSphericalPCPF=function(v){return v&&(K.isMars(v)||v===n)?n:v&&(K.isMoon(v)||v===E)?E:u};p.getSphericalPCPFForEllipsoid=function(v){return v&&
v===x.mars?n:v&&v===x.moon?E:u};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/chunks/mat4":function(){define(["exports","./vec3f64","./common"],function(p,c,x){function K(b,l){b[0]=l[0];b[1]=l[1];b[2]=l[2];b[3]=l[3];b[4]=l[4];b[5]=l[5];b[6]=l[6];b[7]=l[7];b[8]=l[8];b[9]=l[9];b[10]=l[10];b[11]=l[11];b[12]=l[12];b[13]=l[13];b[14]=l[14];b[15]=l[15];return b}function g(b,l,h,w,R,S,I,N,Y,ca,ja,ma,sa,va,za,ya,Ba){b[0]=l;b[1]=h;b[2]=w;b[3]=R;b[4]=S;b[5]=I;b[6]=N;b[7]=Y;b[8]=ca;b[9]=ja;b[10]=
ma;b[11]=sa;b[12]=va;b[13]=za;b[14]=ya;b[15]=Ba;return b}function u(b){b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}function n(b,l){if(b===l){const h=l[1],w=l[2],R=l[3],S=l[6],I=l[7],N=l[11];b[1]=l[4];b[2]=l[8];b[3]=l[12];b[4]=h;b[6]=l[9];b[7]=l[13];b[8]=w;b[9]=S;b[11]=l[14];b[12]=R;b[13]=I;b[14]=N}else b[0]=l[0],b[1]=l[4],b[2]=l[8],b[3]=l[12],b[4]=l[1],b[5]=l[5],b[6]=l[9],b[7]=l[13],b[8]=l[2],b[9]=l[6],b[10]=l[10],
b[11]=l[14],b[12]=l[3],b[13]=l[7],b[14]=l[11],b[15]=l[15];return b}function E(b,l){const h=l[0],w=l[1],R=l[2],S=l[3],I=l[4],N=l[5],Y=l[6],ca=l[7],ja=l[8],ma=l[9],sa=l[10],va=l[11],za=l[12],ya=l[13],Ba=l[14];l=l[15];const Oa=h*N-w*I,Ea=h*Y-R*I,Fa=h*ca-S*I,Ga=w*Y-R*N,Ka=w*ca-S*N,pa=R*ca-S*Y,cb=ja*ya-ma*za,gb=ja*Ba-sa*za,fb=ja*l-va*za,a=ma*Ba-sa*ya,ib=ma*l-va*ya,Za=sa*l-va*Ba;let Ua=Oa*Za-Ea*ib+Fa*a+Ga*fb-Ka*gb+pa*cb;if(!Ua)return null;Ua=1/Ua;b[0]=(N*Za-Y*ib+ca*a)*Ua;b[1]=(R*ib-w*Za-S*a)*Ua;b[2]=(ya*
pa-Ba*Ka+l*Ga)*Ua;b[3]=(sa*Ka-ma*pa-va*Ga)*Ua;b[4]=(Y*fb-I*Za-ca*gb)*Ua;b[5]=(h*Za-R*fb+S*gb)*Ua;b[6]=(Ba*Fa-za*pa-l*Ea)*Ua;b[7]=(ja*pa-sa*Fa+va*Ea)*Ua;b[8]=(I*ib-N*fb+ca*cb)*Ua;b[9]=(w*fb-h*ib-S*cb)*Ua;b[10]=(za*Ka-ya*Fa+l*Oa)*Ua;b[11]=(ma*Fa-ja*Ka-va*Oa)*Ua;b[12]=(N*gb-I*a-Y*cb)*Ua;b[13]=(h*a-w*gb+R*cb)*Ua;b[14]=(ya*Ea-za*Ga-Ba*Oa)*Ua;b[15]=(ja*Ga-ma*Ea+sa*Oa)*Ua;return b}function t(b,l){const h=l[0],w=l[1],R=l[2],S=l[3],I=l[4],N=l[5],Y=l[6],ca=l[7],ja=l[8],ma=l[9],sa=l[10],va=l[11],za=l[12],ya=
l[13],Ba=l[14];l=l[15];b[0]=N*(sa*l-va*Ba)-ma*(Y*l-ca*Ba)+ya*(Y*va-ca*sa);b[1]=-(w*(sa*l-va*Ba)-ma*(R*l-S*Ba)+ya*(R*va-S*sa));b[2]=w*(Y*l-ca*Ba)-N*(R*l-S*Ba)+ya*(R*ca-S*Y);b[3]=-(w*(Y*va-ca*sa)-N*(R*va-S*sa)+ma*(R*ca-S*Y));b[4]=-(I*(sa*l-va*Ba)-ja*(Y*l-ca*Ba)+za*(Y*va-ca*sa));b[5]=h*(sa*l-va*Ba)-ja*(R*l-S*Ba)+za*(R*va-S*sa);b[6]=-(h*(Y*l-ca*Ba)-I*(R*l-S*Ba)+za*(R*ca-S*Y));b[7]=h*(Y*va-ca*sa)-I*(R*va-S*sa)+ja*(R*ca-S*Y);b[8]=I*(ma*l-va*ya)-ja*(N*l-ca*ya)+za*(N*va-ca*ma);b[9]=-(h*(ma*l-va*ya)-ja*(w*
l-S*ya)+za*(w*va-S*ma));b[10]=h*(N*l-ca*ya)-I*(w*l-S*ya)+za*(w*ca-S*N);b[11]=-(h*(N*va-ca*ma)-I*(w*va-S*ma)+ja*(w*ca-S*N));b[12]=-(I*(ma*Ba-sa*ya)-ja*(N*Ba-Y*ya)+za*(N*sa-Y*ma));b[13]=h*(ma*Ba-sa*ya)-ja*(w*Ba-R*ya)+za*(w*sa-R*ma);b[14]=-(h*(N*Ba-Y*ya)-I*(w*Ba-R*ya)+za*(w*Y-R*N));b[15]=h*(N*sa-Y*ma)-I*(w*sa-R*ma)+ja*(w*Y-R*N);return b}function v(b){const l=b[0],h=b[1],w=b[2],R=b[3],S=b[4],I=b[5],N=b[6],Y=b[7],ca=b[8],ja=b[9],ma=b[10],sa=b[11],va=b[12],za=b[13],ya=b[14];b=b[15];return(l*I-h*S)*(ma*
b-sa*ya)-(l*N-w*S)*(ja*b-sa*za)+(l*Y-R*S)*(ja*ya-ma*za)+(h*N-w*I)*(ca*b-sa*va)-(h*Y-R*I)*(ca*ya-ma*va)+(w*Y-R*N)*(ca*za-ja*va)}function J(b,l,h){const w=l[0],R=l[1],S=l[2],I=l[3],N=l[4],Y=l[5],ca=l[6],ja=l[7],ma=l[8],sa=l[9],va=l[10],za=l[11],ya=l[12],Ba=l[13],Oa=l[14];l=l[15];let Ea=h[0],Fa=h[1],Ga=h[2],Ka=h[3];b[0]=Ea*w+Fa*N+Ga*ma+Ka*ya;b[1]=Ea*R+Fa*Y+Ga*sa+Ka*Ba;b[2]=Ea*S+Fa*ca+Ga*va+Ka*Oa;b[3]=Ea*I+Fa*ja+Ga*za+Ka*l;Ea=h[4];Fa=h[5];Ga=h[6];Ka=h[7];b[4]=Ea*w+Fa*N+Ga*ma+Ka*ya;b[5]=Ea*R+Fa*Y+Ga*sa+
Ka*Ba;b[6]=Ea*S+Fa*ca+Ga*va+Ka*Oa;b[7]=Ea*I+Fa*ja+Ga*za+Ka*l;Ea=h[8];Fa=h[9];Ga=h[10];Ka=h[11];b[8]=Ea*w+Fa*N+Ga*ma+Ka*ya;b[9]=Ea*R+Fa*Y+Ga*sa+Ka*Ba;b[10]=Ea*S+Fa*ca+Ga*va+Ka*Oa;b[11]=Ea*I+Fa*ja+Ga*za+Ka*l;Ea=h[12];Fa=h[13];Ga=h[14];Ka=h[15];b[12]=Ea*w+Fa*N+Ga*ma+Ka*ya;b[13]=Ea*R+Fa*Y+Ga*sa+Ka*Ba;b[14]=Ea*S+Fa*ca+Ga*va+Ka*Oa;b[15]=Ea*I+Fa*ja+Ga*za+Ka*l;return b}function W(b,l,h){const w=h[0],R=h[1];h=h[2];let S=void 0,I=void 0,N=void 0,Y=void 0,ca=void 0,ja=void 0,ma=void 0,sa=void 0,va=void 0,za=
void 0,ya=void 0,Ba=void 0;l===b?(b[12]=l[0]*w+l[4]*R+l[8]*h+l[12],b[13]=l[1]*w+l[5]*R+l[9]*h+l[13],b[14]=l[2]*w+l[6]*R+l[10]*h+l[14],b[15]=l[3]*w+l[7]*R+l[11]*h+l[15]):(S=l[0],I=l[1],N=l[2],Y=l[3],ca=l[4],ja=l[5],ma=l[6],sa=l[7],va=l[8],za=l[9],ya=l[10],Ba=l[11],b[0]=S,b[1]=I,b[2]=N,b[3]=Y,b[4]=ca,b[5]=ja,b[6]=ma,b[7]=sa,b[8]=va,b[9]=za,b[10]=ya,b[11]=Ba,b[12]=S*w+ca*R+va*h+l[12],b[13]=I*w+ja*R+za*h+l[13],b[14]=N*w+ma*R+ya*h+l[14],b[15]=Y*w+sa*R+Ba*h+l[15]);return b}function q(b,l,h){const w=h[0],
R=h[1];h=h[2];b[0]=l[0]*w;b[1]=l[1]*w;b[2]=l[2]*w;b[3]=l[3]*w;b[4]=l[4]*R;b[5]=l[5]*R;b[6]=l[6]*R;b[7]=l[7]*R;b[8]=l[8]*h;b[9]=l[9]*h;b[10]=l[10]*h;b[11]=l[11]*h;b[12]=l[12];b[13]=l[13];b[14]=l[14];b[15]=l[15];return b}function A(b,l,h,w){let R=w[0],S=w[1];w=w[2];let I=Math.sqrt(R*R+S*S+w*w);var N=void 0,Y=void 0;let ca=void 0,ja=void 0,ma=void 0,sa=void 0,va=void 0,za=void 0,ya=void 0,Ba=void 0,Oa=void 0,Ea=void 0,Fa=void 0,Ga=void 0,Ka=void 0,pa=void 0,cb=void 0,gb=void 0,fb=void 0,a=void 0,ib=
void 0,Za=void 0;Y=N=void 0;if(I<x.EPSILON)return null;I=1/I;R*=I;S*=I;w*=I;N=Math.sin(h);Y=Math.cos(h);ca=1-Y;ja=l[0];ma=l[1];sa=l[2];va=l[3];za=l[4];ya=l[5];Ba=l[6];Oa=l[7];Ea=l[8];Fa=l[9];Ga=l[10];Ka=l[11];pa=R*R*ca+Y;cb=S*R*ca+w*N;gb=w*R*ca-S*N;fb=R*S*ca-w*N;a=S*S*ca+Y;ib=w*S*ca+R*N;Za=R*w*ca+S*N;N=S*w*ca-R*N;Y=w*w*ca+Y;b[0]=ja*pa+za*cb+Ea*gb;b[1]=ma*pa+ya*cb+Fa*gb;b[2]=sa*pa+Ba*cb+Ga*gb;b[3]=va*pa+Oa*cb+Ka*gb;b[4]=ja*fb+za*a+Ea*ib;b[5]=ma*fb+ya*a+Fa*ib;b[6]=sa*fb+Ba*a+Ga*ib;b[7]=va*fb+Oa*a+Ka*
ib;b[8]=ja*Za+za*N+Ea*Y;b[9]=ma*Za+ya*N+Fa*Y;b[10]=sa*Za+Ba*N+Ga*Y;b[11]=va*Za+Oa*N+Ka*Y;l!==b&&(b[12]=l[12],b[13]=l[13],b[14]=l[14],b[15]=l[15]);return b}function B(b,l,h){const w=Math.sin(h);h=Math.cos(h);const R=l[4],S=l[5],I=l[6],N=l[7],Y=l[8],ca=l[9],ja=l[10],ma=l[11];l!==b&&(b[0]=l[0],b[1]=l[1],b[2]=l[2],b[3]=l[3],b[12]=l[12],b[13]=l[13],b[14]=l[14],b[15]=l[15]);b[4]=R*h+Y*w;b[5]=S*h+ca*w;b[6]=I*h+ja*w;b[7]=N*h+ma*w;b[8]=Y*h-R*w;b[9]=ca*h-S*w;b[10]=ja*h-I*w;b[11]=ma*h-N*w;return b}function e(b,
l,h){const w=Math.sin(h);h=Math.cos(h);const R=l[0],S=l[1],I=l[2],N=l[3],Y=l[8],ca=l[9],ja=l[10],ma=l[11];l!==b&&(b[4]=l[4],b[5]=l[5],b[6]=l[6],b[7]=l[7],b[12]=l[12],b[13]=l[13],b[14]=l[14],b[15]=l[15]);b[0]=R*h-Y*w;b[1]=S*h-ca*w;b[2]=I*h-ja*w;b[3]=N*h-ma*w;b[8]=R*w+Y*h;b[9]=S*w+ca*h;b[10]=I*w+ja*h;b[11]=N*w+ma*h;return b}function y(b,l,h){const w=Math.sin(h);h=Math.cos(h);const R=l[0],S=l[1],I=l[2],N=l[3],Y=l[4],ca=l[5],ja=l[6],ma=l[7];l!==b&&(b[8]=l[8],b[9]=l[9],b[10]=l[10],b[11]=l[11],b[12]=l[12],
b[13]=l[13],b[14]=l[14],b[15]=l[15]);b[0]=R*h+Y*w;b[1]=S*h+ca*w;b[2]=I*h+ja*w;b[3]=N*h+ma*w;b[4]=Y*h-R*w;b[5]=ca*h-S*w;b[6]=ja*h-I*w;b[7]=ma*h-N*w;return b}function r(b,l){b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=l[0];b[13]=l[1];b[14]=l[2];b[15]=1;return b}function G(b,l){b[0]=l[0];b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=l[1];b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=l[2];b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}function F(b,l,h){let w=h[0],R=h[1];h=h[2];
let S=Math.sqrt(w*w+R*R+h*h),I=void 0,N=void 0,Y=void 0;if(S<x.EPSILON)return null;S=1/S;w*=S;R*=S;h*=S;I=Math.sin(l);N=Math.cos(l);Y=1-N;b[0]=w*w*Y+N;b[1]=R*w*Y+h*I;b[2]=h*w*Y-R*I;b[3]=0;b[4]=w*R*Y-h*I;b[5]=R*R*Y+N;b[6]=h*R*Y+w*I;b[7]=0;b[8]=w*h*Y+R*I;b[9]=R*h*Y-w*I;b[10]=h*h*Y+N;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}function O(b,l){const h=Math.sin(l);l=Math.cos(l);b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=l;b[6]=h;b[7]=0;b[8]=0;b[9]=-h;b[10]=l;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}
function P(b,l){const h=Math.sin(l);l=Math.cos(l);b[0]=l;b[1]=0;b[2]=-h;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=h;b[9]=0;b[10]=l;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}function M(b,l){const h=Math.sin(l);l=Math.cos(l);b[0]=l;b[1]=h;b[2]=0;b[3]=0;b[4]=-h;b[5]=l;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}function Z(b,l,h){var w=l[0],R=l[1],S=l[2],I=l[3],N=w+w,Y=R+R;const ca=S+S;l=w*N;const ja=w*Y;w*=ca;const ma=R*Y;R*=ca;S*=ca;N*=I;Y*=I;I*=ca;b[0]=
1-(ma+S);b[1]=ja+I;b[2]=w-Y;b[3]=0;b[4]=ja-I;b[5]=1-(l+S);b[6]=R+N;b[7]=0;b[8]=w+Y;b[9]=R-N;b[10]=1-(l+ma);b[11]=0;b[12]=h[0];b[13]=h[1];b[14]=h[2];b[15]=1;return b}function aa(b,l){const h=ka,w=-l[0],R=-l[1],S=-l[2],I=l[3],N=l[4],Y=l[5],ca=l[6],ja=l[7],ma=w*w+R*R+S*S+I*I;0<ma?(h[0]=2*(N*I+ja*w+Y*S-ca*R)/ma,h[1]=2*(Y*I+ja*R+ca*w-N*S)/ma,h[2]=2*(ca*I+ja*S+N*R-Y*w)/ma):(h[0]=2*(N*I+ja*w+Y*S-ca*R),h[1]=2*(Y*I+ja*R+ca*w-N*S),h[2]=2*(ca*I+ja*S+N*R-Y*w));Z(b,l,h);return b}function m(b,l){b[0]=l[12];b[1]=
l[13];b[2]=l[14];return b}function D(b,l){const h=l[0],w=l[1],R=l[2],S=l[4],I=l[5],N=l[6],Y=l[8],ca=l[9];l=l[10];b[0]=Math.sqrt(h*h+w*w+R*R);b[1]=Math.sqrt(S*S+I*I+N*N);b[2]=Math.sqrt(Y*Y+ca*ca+l*l);return b}function Q(b,l){const h=l[0]+l[5]+l[10];let w=0;0<h?(w=2*Math.sqrt(h+1),b[3]=.25*w,b[0]=(l[6]-l[9])/w,b[1]=(l[8]-l[2])/w,b[2]=(l[1]-l[4])/w):l[0]>l[5]&&l[0]>l[10]?(w=2*Math.sqrt(1+l[0]-l[5]-l[10]),b[3]=(l[6]-l[9])/w,b[0]=.25*w,b[1]=(l[1]+l[4])/w,b[2]=(l[8]+l[2])/w):l[5]>l[10]?(w=2*Math.sqrt(1+
l[5]-l[0]-l[10]),b[3]=(l[8]-l[2])/w,b[0]=(l[1]+l[4])/w,b[1]=.25*w,b[2]=(l[6]+l[9])/w):(w=2*Math.sqrt(1+l[10]-l[0]-l[5]),b[3]=(l[1]-l[4])/w,b[0]=(l[8]+l[2])/w,b[1]=(l[6]+l[9])/w,b[2]=.25*w);return b}function V(b,l,h,w){var R=l[0],S=l[1],I=l[2],N=l[3],Y=R+R,ca=S+S,ja=I+I;l=R*Y;const ma=R*ca;R*=ja;const sa=S*ca;S*=ja;I*=ja;Y*=N;ca*=N;N*=ja;ja=w[0];const va=w[1];w=w[2];b[0]=(1-(sa+I))*ja;b[1]=(ma+N)*ja;b[2]=(R-ca)*ja;b[3]=0;b[4]=(ma-N)*va;b[5]=(1-(l+I))*va;b[6]=(S+Y)*va;b[7]=0;b[8]=(R+ca)*w;b[9]=(S-Y)*
w;b[10]=(1-(l+sa))*w;b[11]=0;b[12]=h[0];b[13]=h[1];b[14]=h[2];b[15]=1;return b}function H(b,l,h,w,R){var S=l[0],I=l[1],N=l[2],Y=l[3],ca=S+S,ja=I+I,ma=N+N;l=S*ca;var sa=S*ja,va=S*ma;S=I*ja;I*=ma;var za=N*ma;N=Y*ca;ja*=Y;const ya=Y*ma;var Ba=w[0],Oa=w[1];ma=w[2];w=R[0];Y=R[1];R=R[2];ca=(1-(S+za))*Ba;const Ea=(sa+ya)*Ba;Ba*=va-ja;sa=(sa-ya)*Oa;za=(1-(l+za))*Oa;Oa*=I+N;va=(va+ja)*ma;I=(I-N)*ma;l=(1-(l+S))*ma;b[0]=ca;b[1]=Ea;b[2]=Ba;b[3]=0;b[4]=sa;b[5]=za;b[6]=Oa;b[7]=0;b[8]=va;b[9]=I;b[10]=l;b[11]=0;
b[12]=h[0]+w-(ca*w+sa*Y+va*R);b[13]=h[1]+Y-(Ea*w+za*Y+I*R);b[14]=h[2]+R-(Ba*w+Oa*Y+l*R);b[15]=1;return b}function k(b,l){var h=l[0],w=l[1],R=l[2];l=l[3];var S=h+h,I=w+w;const N=R+R;h*=S;const Y=w*S;w*=I;const ca=R*S,ja=R*I;R*=N;S*=l;I*=l;l*=N;b[0]=1-w-R;b[1]=Y+l;b[2]=ca-I;b[3]=0;b[4]=Y-l;b[5]=1-h-R;b[6]=ja+S;b[7]=0;b[8]=ca+I;b[9]=ja-S;b[10]=1-h-w;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}function d(b,l,h,w,R,S,I){const N=1/(h-l),Y=1/(R-w),ca=1/(S-I);b[0]=2*S*N;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=
2*S*Y;b[6]=0;b[7]=0;b[8]=(h+l)*N;b[9]=(R+w)*Y;b[10]=(I+S)*ca;b[11]=-1;b[12]=0;b[13]=0;b[14]=I*S*2*ca;b[15]=0;return b}function C(b,l,h,w,R){l=1/Math.tan(l/2);let S=void 0;b[0]=l/h;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=l;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[11]=-1;b[12]=0;b[13]=0;b[15]=0;null!=R&&Infinity!==R?(S=1/(w-R),b[10]=(R+w)*S,b[14]=2*R*w*S):(b[10]=-1,b[14]=-2*w);return b}function L(b,l,h,w){const R=Math.tan(l.upDegrees*Math.PI/180),S=Math.tan(l.downDegrees*Math.PI/180),I=Math.tan(l.leftDegrees*Math.PI/
180);l=Math.tan(l.rightDegrees*Math.PI/180);const N=2/(I+l),Y=2/(R+S);b[0]=N;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=Y;b[6]=0;b[7]=0;b[8]=-((I-l)*N*.5);b[9]=(R-S)*Y*.5;b[10]=w/(h-w);b[11]=-1;b[12]=0;b[13]=0;b[14]=w*h/(h-w);b[15]=0;return b}function X(b,l,h,w,R,S,I){const N=1/(l-h),Y=1/(w-R),ca=1/(S-I);b[0]=-2*N;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=-2*Y;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=2*ca;b[11]=0;b[12]=(l+h)*N;b[13]=(R+w)*Y;b[14]=(I+S)*ca;b[15]=1;return b}function ba(b,l,h,w){let R=void 0,S=void 0;var I=void 0,
N=void 0;let Y=void 0,ca=void 0;var ja=void 0,ma=void 0;let sa=void 0,va=void 0;const za=l[0],ya=l[1];l=l[2];I=w[0];N=w[1];w=w[2];ja=h[0];ma=h[1];h=h[2];if(Math.abs(za-ja)<x.EPSILON&&Math.abs(ya-ma)<x.EPSILON&&Math.abs(l-h)<x.EPSILON)return u(b);ja=za-ja;ma=ya-ma;sa=l-h;va=1/Math.sqrt(ja*ja+ma*ma+sa*sa);ja*=va;ma*=va;sa*=va;R=N*sa-w*ma;S=w*ja-I*sa;I=I*ma-N*ja;(va=Math.sqrt(R*R+S*S+I*I))?(va=1/va,R*=va,S*=va,I*=va):I=S=R=0;N=ma*I-sa*S;Y=sa*R-ja*I;ca=ja*S-ma*R;(va=Math.sqrt(N*N+Y*Y+ca*ca))?(va=1/va,
N*=va,Y*=va,ca*=va):ca=Y=N=0;b[0]=R;b[1]=N;b[2]=ja;b[3]=0;b[4]=S;b[5]=Y;b[6]=ma;b[7]=0;b[8]=I;b[9]=ca;b[10]=sa;b[11]=0;b[12]=-(R*za+S*ya+I*l);b[13]=-(N*za+Y*ya+ca*l);b[14]=-(ja*za+ma*ya+sa*l);b[15]=1;return b}function ia(b,l,h,w){const R=l[0],S=l[1];l=l[2];var I=w[0];const N=w[1];var Y=w[2];w=R-h[0];let ca=S-h[1];h=l-h[2];let ja=w*w+ca*ca+h*h;0<ja&&(ja=1/Math.sqrt(ja),w*=ja,ca*=ja,h*=ja);let ma=N*h-Y*ca;Y=Y*w-I*h;I=I*ca-N*w;ja=ma*ma+Y*Y+I*I;0<ja&&(ja=1/Math.sqrt(ja),ma*=ja,Y*=ja,I*=ja);b[0]=ma;b[1]=
Y;b[2]=I;b[3]=0;b[4]=ca*I-h*Y;b[5]=h*ma-w*I;b[6]=w*Y-ca*ma;b[7]=0;b[8]=w;b[9]=ca;b[10]=h;b[11]=0;b[12]=R;b[13]=S;b[14]=l;b[15]=1;return b}function na(b){return"mat4("+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+", "+b[4]+", "+b[5]+", "+b[6]+", "+b[7]+", "+b[8]+", "+b[9]+", "+b[10]+", "+b[11]+", "+b[12]+", "+b[13]+", "+b[14]+", "+b[15]+")"}function ra(b){return Math.sqrt(b[0]**2+b[1]**2+b[2]**2+b[3]**2+b[4]**2+b[5]**2+b[6]**2+b[7]**2+b[8]**2+b[9]**2+b[10]**2+b[11]**2+b[12]**2+b[13]**2+b[14]**2+b[15]**2)}function wa(b,
l,h){b[0]=l[0]+h[0];b[1]=l[1]+h[1];b[2]=l[2]+h[2];b[3]=l[3]+h[3];b[4]=l[4]+h[4];b[5]=l[5]+h[5];b[6]=l[6]+h[6];b[7]=l[7]+h[7];b[8]=l[8]+h[8];b[9]=l[9]+h[9];b[10]=l[10]+h[10];b[11]=l[11]+h[11];b[12]=l[12]+h[12];b[13]=l[13]+h[13];b[14]=l[14]+h[14];b[15]=l[15]+h[15];return b}function Ca(b,l,h){b[0]=l[0]-h[0];b[1]=l[1]-h[1];b[2]=l[2]-h[2];b[3]=l[3]-h[3];b[4]=l[4]-h[4];b[5]=l[5]-h[5];b[6]=l[6]-h[6];b[7]=l[7]-h[7];b[8]=l[8]-h[8];b[9]=l[9]-h[9];b[10]=l[10]-h[10];b[11]=l[11]-h[11];b[12]=l[12]-h[12];b[13]=
l[13]-h[13];b[14]=l[14]-h[14];b[15]=l[15]-h[15];return b}function Ia(b,l,h){b[0]=l[0]*h;b[1]=l[1]*h;b[2]=l[2]*h;b[3]=l[3]*h;b[4]=l[4]*h;b[5]=l[5]*h;b[6]=l[6]*h;b[7]=l[7]*h;b[8]=l[8]*h;b[9]=l[9]*h;b[10]=l[10]*h;b[11]=l[11]*h;b[12]=l[12]*h;b[13]=l[13]*h;b[14]=l[14]*h;b[15]=l[15]*h;return b}function Ha(b,l,h,w){b[0]=l[0]+h[0]*w;b[1]=l[1]+h[1]*w;b[2]=l[2]+h[2]*w;b[3]=l[3]+h[3]*w;b[4]=l[4]+h[4]*w;b[5]=l[5]+h[5]*w;b[6]=l[6]+h[6]*w;b[7]=l[7]+h[7]*w;b[8]=l[8]+h[8]*w;b[9]=l[9]+h[9]*w;b[10]=l[10]+h[10]*w;b[11]=
l[11]+h[11]*w;b[12]=l[12]+h[12]*w;b[13]=l[13]+h[13]*w;b[14]=l[14]+h[14]*w;b[15]=l[15]+h[15]*w;return b}function La(b,l){return b[0]===l[0]&&b[1]===l[1]&&b[2]===l[2]&&b[3]===l[3]&&b[4]===l[4]&&b[5]===l[5]&&b[6]===l[6]&&b[7]===l[7]&&b[8]===l[8]&&b[9]===l[9]&&b[10]===l[10]&&b[11]===l[11]&&b[12]===l[12]&&b[13]===l[13]&&b[14]===l[14]&&b[15]===l[15]}function oa(b,l){const h=b[0],w=b[1],R=b[2],S=b[3],I=b[4],N=b[5],Y=b[6],ca=b[7],ja=b[8],ma=b[9],sa=b[10],va=b[11],za=b[12],ya=b[13],Ba=b[14];b=b[15];const Oa=
l[0],Ea=l[1],Fa=l[2],Ga=l[3],Ka=l[4],pa=l[5],cb=l[6],gb=l[7],fb=l[8],a=l[9],ib=l[10],Za=l[11],Ua=l[12],Ta=l[13],jb=l[14];l=l[15];return Math.abs(h-Oa)<=x.EPSILON*Math.max(1,Math.abs(h),Math.abs(Oa))&&Math.abs(w-Ea)<=x.EPSILON*Math.max(1,Math.abs(w),Math.abs(Ea))&&Math.abs(R-Fa)<=x.EPSILON*Math.max(1,Math.abs(R),Math.abs(Fa))&&Math.abs(S-Ga)<=x.EPSILON*Math.max(1,Math.abs(S),Math.abs(Ga))&&Math.abs(I-Ka)<=x.EPSILON*Math.max(1,Math.abs(I),Math.abs(Ka))&&Math.abs(N-pa)<=x.EPSILON*Math.max(1,Math.abs(N),
Math.abs(pa))&&Math.abs(Y-cb)<=x.EPSILON*Math.max(1,Math.abs(Y),Math.abs(cb))&&Math.abs(ca-gb)<=x.EPSILON*Math.max(1,Math.abs(ca),Math.abs(gb))&&Math.abs(ja-fb)<=x.EPSILON*Math.max(1,Math.abs(ja),Math.abs(fb))&&Math.abs(ma-a)<=x.EPSILON*Math.max(1,Math.abs(ma),Math.abs(a))&&Math.abs(sa-ib)<=x.EPSILON*Math.max(1,Math.abs(sa),Math.abs(ib))&&Math.abs(va-Za)<=x.EPSILON*Math.max(1,Math.abs(va),Math.abs(Za))&&Math.abs(za-Ua)<=x.EPSILON*Math.max(1,Math.abs(za),Math.abs(Ua))&&Math.abs(ya-Ta)<=x.EPSILON*Math.max(1,
Math.abs(ya),Math.abs(Ta))&&Math.abs(Ba-jb)<=x.EPSILON*Math.max(1,Math.abs(Ba),Math.abs(jb))&&Math.abs(b-l)<=x.EPSILON*Math.max(1,Math.abs(b),Math.abs(l))}function ua(b){const l=x.EPSILON,h=b[0],w=b[1],R=b[2],S=b[4],I=b[5],N=b[6],Y=b[8],ca=b[9];b=b[10];return Math.abs(1-(h*h+S*S+Y*Y))<=l&&Math.abs(1-(w*w+I*I+ca*ca))<=l&&Math.abs(1-(R*R+N*N+b*b))<=l}const ka=c.create();c=Object.freeze({__proto__:null,copy:K,set:g,identity:u,transpose:n,invert:E,adjoint:t,determinant:v,multiply:J,translate:W,scale:q,
rotate:A,rotateX:B,rotateY:e,rotateZ:y,fromTranslation:r,fromScaling:G,fromRotation:F,fromXRotation:O,fromYRotation:P,fromZRotation:M,fromRotationTranslation:Z,fromQuat2:aa,getTranslation:m,getScaling:D,getRotation:Q,fromRotationTranslationScale:V,fromRotationTranslationScaleOrigin:H,fromQuat:k,frustum:d,perspective:C,perspectiveFromFieldOfView:L,ortho:X,lookAt:ba,targetTo:ia,str:na,frob:ra,add:wa,subtract:Ca,multiplyScalar:Ia,multiplyScalarAndAdd:Ha,exactEquals:La,equals:oa,isOrthoNormal:ua,mul:J,
sub:Ca});p.add=wa;p.adjoint=t;p.copy=K;p.determinant=v;p.equals=oa;p.exactEquals=La;p.frob=ra;p.fromQuat=k;p.fromQuat2=aa;p.fromRotation=F;p.fromRotationTranslation=Z;p.fromRotationTranslationScale=V;p.fromRotationTranslationScaleOrigin=H;p.fromScaling=G;p.fromTranslation=r;p.fromXRotation=O;p.fromYRotation=P;p.fromZRotation=M;p.frustum=d;p.getRotation=Q;p.getScaling=D;p.getTranslation=m;p.identity=u;p.invert=E;p.isOrthoNormal=ua;p.lookAt=ba;p.mat4=c;p.mul=J;p.multiply=J;p.multiplyScalar=Ia;p.multiplyScalarAndAdd=
Ha;p.ortho=X;p.perspective=C;p.perspectiveFromFieldOfView=L;p.rotate=A;p.rotateX=B;p.rotateY=e;p.rotateZ=y;p.scale=q;p.set=g;p.str=na;p.sub=Ca;p.subtract=Ca;p.targetTo=ia;p.translate=W;p.transpose=n})},"esri/chunks/pe":function(){define(["require","exports","./_rollupPluginBabelHelpers","../assets","../core/has"],function(p,c,x,K,g){function u(){return!!c._pe}function n(){return!!g("esri-wasm")}function E(){return A?A:A=(new Promise(function(e,y){p(["./pe-wasm"],e,y)})).then(function(e){return e.peWasm}).then(({default:e})=>
e({locateFile:y=>K.getAssetUrl(`esri/geometry/support/${y}`)})).then(e=>{t(e)})}function t(e){function y(F,O,P){F[O]=P(F[O])}c._pe=e;c.PeDefs.init();c.PeGTlistExtended.init();c.PeNotationMgrs.init();c.PeNotationUtm.init();c.PePCSInfo.init();c.PeGCSExtent=function(F){function O(){return F.apply(this,arguments)||this}x._inheritsLoose(O,F);O.prototype.destroy=function(){c._pe.destroy(this)};return O}(c._pe.PeGCSExtent);e=[c._pe.PeDatum,c._pe.PeGeogcs,c._pe.PeGeogtran,c._pe.PeObject,c._pe.PeParameter,
c._pe.PePrimem,c._pe.PeProjcs,c._pe.PeSpheroid,c._pe.PeUnit];for(var r of e)y(r.prototype,"getName",F=>function(){return F.call(this,Array(c.PeDefs.PE_NAME_MAX))});for(const F of[c._pe.PeGeogtran,c._pe.PeProjcs])y(F.prototype,"getParameters",O=>function(){const P=Array(c.PeDefs.PE_PARM_MAX);let M=O.call(this);for(let Z=0;Z<P.length;Z++){const aa=c._pe.getValue(M,"*");P[Z]=aa?c._pe.wrapPointer(aa,c._pe.PeParameter):null;M+=Int32Array.BYTES_PER_ELEMENT}return P});y(c._pe.PeHorizon.prototype,"getCoord",
F=>function(){const O=this.getSize();if(!O)return null;const P=[],M=F.call(this);q(P,O,M);return P});y(c._pe.PeGTlistExtendedEntry.prototype,"getEntries",F=>{const O=c._pe._pe_getPeGTlistExtendedGTsSize();return function(){let P=null;var M=F.call(this);if(!c._pe.compare(M,c._pe.NULL)){P=[M];const Z=this.getSteps();if(1<Z){M=c._pe.getPointer(M);for(let aa=1;aa<Z;aa++)P.push(c._pe.wrapPointer(M+O*aa,c._pe.PeGTlistExtendedGTs))}}return P}});const G=c._pe._pe_getPeHorizonSize();r=F=>function(){let O=
this._cache;O||(this._cache=O=new Map);if(O.has(F))return O.get(F);let P=null;var M=F.call(this);if(!c._pe.compare(M,c._pe.NULL)){P=[M];const Z=M.getNump();if(1<Z){M=c._pe.getPointer(M);for(let aa=1;aa<Z;aa++)P.push(c._pe.wrapPointer(M+G*aa,c._pe.PeHorizon))}}O.set(F,P);return P};y(c._pe.PeProjcs.prototype,"horizonGcsGenerate",r);y(c._pe.PeProjcs.prototype,"horizonPcsGenerate",r);c._pe.PeObject.prototype.toString=function(F=c.PeDefs.PE_STR_OPTS_NONE){c._pe.ensureCache.prepare();const O=c._pe.getPointer(this),
P=c._pe.ensureInt8(Array(c.PeDefs.PE_BUFFER_MAX));return c._pe.UTF8ToString(c._pe._pe_object_to_string_ext(O,F,P))}}function v(e){if(e){var y=c._pe.getClass(e);y&&(y=c._pe.getCache(y))&&(e=c._pe.getPointer(e))&&delete y[e]}}function J(e,y){const r=[];y=Array(y);for(let G=0;G<e;G++)r.push(c._pe.ensureInt8(y));return r}function W(e){let y;Array.isArray(e[0])?(y=[],e.forEach(r=>{y.push(r[0],r[1])})):y=e;return y}function q(e,y,r,G=!1){if(G)for(G=0;G<2*y;G++)e[G]=c._pe.getValue(r+G*Float64Array.BYTES_PER_ELEMENT,
"double");else{G=0===e.length;for(let F=0;F<y;F++)G&&(e[F]=Array(2)),e[F][0]=c._pe.getValue(r,"double"),e[F][1]=c._pe.getValue(r+Float64Array.BYTES_PER_ELEMENT,"double"),r+=2*Float64Array.BYTES_PER_ELEMENT}}let A;c._pe=null;c.PeCSTransformations=void 0;(function(e){function y(F,O,P){c._pe.ensureCache.prepare();var M=W(P);const Z=P===M;M=c._pe.ensureFloat64(M);(F=c._pe._pe_geog_to_proj(c._pe.getPointer(F),O,M))&&q(P,O,M,Z);return F}function r(F,O,P){return G(F,O,P,0)}function G(F,O,P,M){c._pe.ensureCache.prepare();
var Z=W(P);const aa=P===Z;Z=c._pe.ensureFloat64(Z);(F=c._pe._pe_proj_to_geog_center(c._pe.getPointer(F),O,Z,M))&&q(P,O,Z,aa);return F}e.geogToProj=y;e.projGeog=function(F,O,P,M){switch(M){case c.PeDefs.PE_TRANSFORM_P_TO_G:return r(F,O,P);case c.PeDefs.PE_TRANSFORM_G_TO_P:return y(F,O,P)}return 0};e.projToGeog=r;e.projToGeogCenter=G})(c.PeCSTransformations||(c.PeCSTransformations={}));c.PeDefs=void 0;(function(e){e.init=function(){e.PE_BUFFER_MAX=c._pe.PeDefs.prototype.PE_BUFFER_MAX;e.PE_NAME_MAX=
c._pe.PeDefs.prototype.PE_NAME_MAX;e.PE_MGRS_MAX=c._pe.PeDefs.prototype.PE_MGRS_MAX;e.PE_USNG_MAX=c._pe.PeDefs.prototype.PE_USNG_MAX;e.PE_DD_MAX=c._pe.PeDefs.prototype.PE_DD_MAX;e.PE_DDM_MAX=c._pe.PeDefs.prototype.PE_DDM_MAX;e.PE_DMS_MAX=c._pe.PeDefs.prototype.PE_DMS_MAX;e.PE_UTM_MAX=c._pe.PeDefs.prototype.PE_UTM_MAX;e.PE_PARM_MAX=c._pe.PeDefs.prototype.PE_PARM_MAX;e.PE_TYPE_NONE=c._pe.PeDefs.prototype.PE_TYPE_NONE;e.PE_TYPE_GEOGCS=c._pe.PeDefs.prototype.PE_TYPE_GEOGCS;e.PE_TYPE_PROJCS=c._pe.PeDefs.prototype.PE_TYPE_PROJCS;
e.PE_TYPE_GEOGTRAN=c._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN;e.PE_TYPE_COORDSYS=c._pe.PeDefs.prototype.PE_TYPE_COORDSYS;e.PE_TYPE_UNIT=c._pe.PeDefs.prototype.PE_TYPE_UNIT;e.PE_TYPE_LINUNIT=c._pe.PeDefs.prototype.PE_TYPE_LINUNIT;e.PE_STR_OPTS_NONE=c._pe.PeDefs.prototype.PE_STR_OPTS_NONE;e.PE_STR_AUTH_NONE=c._pe.PeDefs.prototype.PE_STR_AUTH_NONE;e.PE_STR_AUTH_TOP=c._pe.PeDefs.prototype.PE_STR_AUTH_TOP;e.PE_STR_NAME_CANON=c._pe.PeDefs.prototype.PE_STR_NAME_CANON;e.PE_PARM_X0=c._pe.PeDefs.prototype.PE_PARM_X0;
e.PE_PARM_ND=c._pe.PeDefs.prototype.PE_PARM_ND;e.PE_TRANSFORM_1_TO_2=c._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2;e.PE_TRANSFORM_2_TO_1=c._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1;e.PE_TRANSFORM_P_TO_G=c._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G;e.PE_TRANSFORM_G_TO_P=c._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P;e.PE_HORIZON_RECT=c._pe.PeDefs.prototype.PE_HORIZON_RECT;e.PE_HORIZON_POLY=c._pe.PeDefs.prototype.PE_HORIZON_POLY;e.PE_HORIZON_LINE=c._pe.PeDefs.prototype.PE_HORIZON_LINE;e.PE_HORIZON_DELTA=c._pe.PeDefs.prototype.PE_HORIZON_DELTA}})(c.PeDefs||
(c.PeDefs={}));c.PeFactory=void 0;(function(e){function y(O,P){let M=null,Z=r[O];Z||(Z={},r[O]=Z);Z.hasOwnProperty(String(P))?M=Z[P]:(O=c._pe.PeFactory.prototype.factoryByType(O,P),c._pe.compare(O,c._pe.NULL)||(M=O,Z[P]=M));return M=F(M)}const r={},G={},F=O=>{if(O){const P=O.getType();switch(P){case c.PeDefs.PE_TYPE_GEOGCS:O=c._pe.castObject(O,c._pe.PeGeogcs);break;case c.PeDefs.PE_TYPE_PROJCS:O=c._pe.castObject(O,c._pe.PeProjcs);break;case c.PeDefs.PE_TYPE_GEOGTRAN:O=c._pe.castObject(O,c._pe.PeGeogtran);
break;default:P&c.PeDefs.PE_TYPE_UNIT&&(O=c._pe.castObject(O,c._pe.PeUnit))}}return O};e.initialize=function(){c._pe.PeFactory.prototype.initialize(null)};e.coordsys=function(O){return y(c.PeDefs.PE_TYPE_COORDSYS,O)};e.factoryByType=y;e.fromString=function(O,P){let M=null,Z=G[O];Z||(Z={},G[O]=Z);Z.hasOwnProperty(P)?M=Z[P]:(O=c._pe.PeFactory.prototype.fromString(O,P),c._pe.compare(O,c._pe.NULL)||(M=O,Z[P]=M));return M=F(M)};e.geogcs=function(O){return y(c.PeDefs.PE_TYPE_GEOGCS,O)};e.geogtran=function(O){return y(c.PeDefs.PE_TYPE_GEOGTRAN,
O)};e.getCode=function(O){return c._pe.PeFactory.prototype.getCode(O)};e.projcs=function(O){return y(c.PeDefs.PE_TYPE_PROJCS,O)};e.unit=function(O){return y(c.PeDefs.PE_TYPE_UNIT,O)}})(c.PeFactory||(c.PeFactory={}));c.PeGCSExtent=null;c.PeGTlistExtended=void 0;(function(e){let y;e.init=function(){e.PE_GTLIST_OPTS_COMMON=c._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON;y=c._pe._pe_getPeGTlistExtendedEntrySize()};e.getGTlist=function(r,G,F,O,P,M){let Z=null;const aa=new c._pe.PeInteger(M);try{const m=
c._pe.PeGTlistExtended.prototype.getGTlist(r,G,F,O,P,aa);if(M=aa.val)if(Z=[m],1<M){const D=c._pe.getPointer(m);for(r=1;r<M;r++)Z.push(c._pe.wrapPointer(D+y*r,c._pe.PeGTlistExtendedEntry))}}finally{c._pe.destroy(aa)}return Z}})(c.PeGTlistExtended||(c.PeGTlistExtended={}));c.PeGTlistExtendedEntry=void 0;(function(e){e.destroy=function(y){if(y&&y.length){for(const r of y)v(r),r.getEntries().forEach(G=>{v(G);G=G.getGeogtran();v(G);G.getParameters().forEach(v);[G.getGeogcs1(),G.getGeogcs2()].forEach(F=>
{v(F);const O=F.getDatum();v(O);v(O.getSpheroid());v(F.getPrimem());v(F.getUnit())})});c._pe.PeGTlistExtendedEntry.prototype.Delete(y[0])}}})(c.PeGTlistExtendedEntry||(c.PeGTlistExtendedEntry={}));c.PeGTTransformations=void 0;(function(e){e.geogToGeog=function(y,r,G,F,O){c._pe.ensureCache.prepare();var P=W(G);const M=G===P;P=c._pe.ensureFloat64(P);let Z=0;F&&(Z=c._pe.ensureFloat64(F));(y=c._pe._pe_geog_to_geog(c._pe.getPointer(y),r,P,Z,O))&&q(G,r,P,M);return y}})(c.PeGTTransformations||(c.PeGTTransformations=
{}));c.PeNotationDms=void 0;(function(e){const y=(G,F,O,P,M,Z)=>{c._pe.ensureCache.prepare();switch(G){case "dd":var aa=c._pe._pe_geog_to_dd;var m=c.PeDefs.PE_DD_MAX;break;case "ddm":aa=c._pe._pe_geog_to_ddm;m=c.PeDefs.PE_DDM_MAX;break;case "dms":aa=c._pe._pe_geog_to_dms,m=c.PeDefs.PE_DMS_MAX}G=0;F&&(G=c._pe.getPointer(F));F=W(P);F=c._pe.ensureFloat64(F);m=J(O,m);P=c._pe.ensureInt32(m);if(M=aa(G,O,F,M,P))for(aa=0;aa<O;aa++)Z[aa]=c._pe.UTF8ToString(m[aa]);return M},r=(G,F,O,P,M)=>{c._pe.ensureCache.prepare();
switch(G){case "dd":var Z=c._pe._pe_dd_to_geog;break;case "ddm":Z=c._pe._pe_ddm_to_geog;break;case "dms":Z=c._pe._pe_dms_to_geog}G=0;F&&(G=c._pe.getPointer(F));F=P.map(aa=>c._pe.ensureString(aa));P=c._pe.ensureInt32(F);F=c._pe.ensureFloat64(Array(2*O));(Z=Z(G,O,P,F))&&q(M,O,F);return Z};e.geog_to_dms=function(G,F,O,P,M){return y("dms",G,F,O,P,M)};e.dms_to_geog=function(G,F,O,P){return r("dms",G,F,O,P)};e.geog_to_ddm=function(G,F,O,P,M){return y("ddm",G,F,O,P,M)};e.ddm_to_geog=function(G,F,O,P){return r("ddm",
G,F,O,P)};e.geog_to_dd=function(G,F,O,P,M){return y("dd",G,F,O,P,M)};e.dd_to_geog=function(G,F,O,P){return r("dd",G,F,O,P)}})(c.PeNotationDms||(c.PeNotationDms={}));c.PeNotationMgrs=void 0;(function(e){e.init=function(){e.PE_MGRS_STYLE_NEW=c._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW;e.PE_MGRS_STYLE_OLD=c._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD;e.PE_MGRS_STYLE_AUTO=c._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO;e.PE_MGRS_180_ZONE_1_PLUS=c._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS;
e.PE_MGRS_ADD_SPACES=c._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES};e.geog_to_mgrs_extended=function(y,r,G,F,O,P,M){c._pe.ensureCache.prepare();let Z=0;y&&(Z=c._pe.getPointer(y));y=W(G);G=c._pe.ensureFloat64(y);y=J(r,c.PeDefs.PE_MGRS_MAX);const aa=c._pe.ensureInt32(y);if(F=c._pe._pe_geog_to_mgrs_extended(Z,r,G,F,O,P,aa))for(O=0;O<r;O++)M[O]=c._pe.UTF8ToString(y[O]);return F};e.mgrs_to_geog_extended=function(y,r,G,F,O){c._pe.ensureCache.prepare();let P=0;y&&(P=c._pe.getPointer(y));y=G.map(M=>c._pe.ensureString(M));
G=c._pe.ensureInt32(y);y=c._pe.ensureFloat64(Array(2*r));(F=c._pe._pe_mgrs_to_geog_extended(P,r,G,F,y))&&q(O,r,y);return F}})(c.PeNotationMgrs||(c.PeNotationMgrs={}));c.PeNotationUsng=void 0;(function(e){e.geog_to_usng=function(y,r,G,F,O,P,M){c._pe.ensureCache.prepare();let Z=0;y&&(Z=c._pe.getPointer(y));y=W(G);G=c._pe.ensureFloat64(y);y=J(r,c.PeDefs.PE_MGRS_MAX);const aa=c._pe.ensureInt32(y);if(F=c._pe._pe_geog_to_usng(Z,r,G,F,O,P,aa))for(O=0;O<r;O++)M[O]=c._pe.UTF8ToString(y[O]);return F};e.usng_to_geog=
function(y,r,G,F){c._pe.ensureCache.prepare();var O=0;y&&(O=c._pe.getPointer(y));y=G.map(P=>c._pe.ensureString(P));G=c._pe.ensureInt32(y);y=c._pe.ensureFloat64(Array(2*r));(O=c._pe._pe_usng_to_geog(O,r,G,y))&&q(F,r,y);return O}})(c.PeNotationUsng||(c.PeNotationUsng={}));c.PeNotationUtm=void 0;(function(e){e.init=function(){e.PE_UTM_OPTS_NONE=c._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE;e.PE_UTM_OPTS_ADD_SPACES=c._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES;e.PE_UTM_OPTS_NS=c._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS};
e.geog_to_utm=function(y,r,G,F,O){c._pe.ensureCache.prepare();var P=0;y&&(P=c._pe.getPointer(y));y=W(G);G=c._pe.ensureFloat64(y);y=J(r,c.PeDefs.PE_UTM_MAX);const M=c._pe.ensureInt32(y);if(F=c._pe._pe_geog_to_utm(P,r,G,F,M))for(P=0;P<r;P++)O[P]=c._pe.UTF8ToString(y[P]);return F};e.utm_to_geog=function(y,r,G,F,O){c._pe.ensureCache.prepare();let P=0;y&&(P=c._pe.getPointer(y));y=G.map(M=>c._pe.ensureString(M));G=c._pe.ensureInt32(y);y=c._pe.ensureFloat64(Array(2*r));(F=c._pe._pe_utm_to_geog(P,r,G,F,y))&&
q(O,r,y);return F}})(c.PeNotationUtm||(c.PeNotationUtm={}));c.PePCSInfo=void 0;(function(e){const y=new Map;e.init=function(){e.PE_PCSINFO_OPTION_NONE=c._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE;e.PE_PCSINFO_OPTION_DOMAIN=c._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN;e.PE_POLE_OUTSIDE_BOUNDARY=c._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY;e.PE_POLE_POINT=c._pe.PePCSInfo.prototype.PE_POLE_POINT};e.generate=function(r,G=e.PE_PCSINFO_OPTION_DOMAIN){let F,O;y.has(r)&&(O=y.get(r),O[G]&&
(F=O[G]));F||(F=c._pe.PePCSInfo.prototype.generate(r,G),O||(O=[],y.set(r,O)),O[G]=F);return F}})(c.PePCSInfo||(c.PePCSInfo={}));c.PeVersion=void 0;(function(e){e.version_string=function(){return c._pe.PeVersion.prototype.version_string()}})(c.PeVersion||(c.PeVersion={}));var B=Object.freeze({__proto__:null,get _pe(){return c._pe},isLoaded:u,isSupported:n,load:E,get PeCSTransformations(){return c.PeCSTransformations},get PeDefs(){return c.PeDefs},get PeFactory(){return c.PeFactory},get PeGCSExtent(){return c.PeGCSExtent},
get PeGTlistExtended(){return c.PeGTlistExtended},get PeGTlistExtendedEntry(){return c.PeGTlistExtendedEntry},get PeGTTransformations(){return c.PeGTTransformations},get PeNotationDms(){return c.PeNotationDms},get PeNotationMgrs(){return c.PeNotationMgrs},get PeNotationUsng(){return c.PeNotationUsng},get PeNotationUtm(){return c.PeNotationUtm},get PePCSInfo(){return c.PePCSInfo},get PeVersion(){return c.PeVersion},_init:t});c._init=t;c.isLoaded=u;c.isSupported=n;c.load=E;c.pe=B})},"esri/assets":function(){define("exports ./config ./request ./core/Error ./core/Logger ./core/urlUtils".split(" "),
function(p,c,x,K,g,u){function n(t){if(!c.assetsPath)throw E.errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new K("assets:path-not-set","config.assetsPath is not set");return u.join(c.assetsPath,t)}const E=g.getLogger("esri.assets");p.fetchAsset=function(t,v){return x(n(t),v)};p.getAssetUrl=n;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/request":function(){define("require ./chunks/_rollupPluginBabelHelpers ./config ./kernel ./core/Error ./core/global ./core/has ./core/lang ./core/maybe ./core/promiseUtils ./core/urlUtils ./support/apiKeyUtils ./support/requestUtils".split(" "),
function(p,c,x,K,g,u,n,E,t,v,J,W,q){function A(oa,ua){return B.apply(this,arguments)}function B(){B=c._asyncToGenerator(function*(oa,ua){var ka=J.isDataProtocol(oa);const b=J.isBlobProtocol(oa);b||ka||(oa=J.normalize(oa));const l={url:oa,requestOptions:{...t.unwrap(ua)}};let h=J.getInterceptor(oa);if(h){oa=yield Q(h,l);if(null!=oa)return{data:oa,getHeader:Ha,requestOptions:l.requestOptions,url:l.url};h.after||h.error||(h=null)}oa=l.url;ua=l.requestOptions;if("image"===ua.responseType){if(n("host-webworker")||
n("host-node"))throw r("request:invalid-parameters",Error("responseType 'image' is not supported in Web Workers or Node environment"),l);}else if(ka)throw r("request:invalid-parameters",Error("Data URLs are not supported for responseType \x3d "+ua.responseType),l);if("head"===ua.method){if(ua.body)throw r("request:invalid-parameters",Error("body parameter cannot be set when method is 'head'"),l);if(ka||b)throw r("request:invalid-parameters",Error("data and blob URLs are not supported for method 'head'"),
l);}yield G();if(ia)return ia.execute(oa,ua);const w=v.createAbortController();v.onAbort(ua,()=>w.abort());ka=yield d({controller:w,credential:null,credentialToken:null,fetchOptions:null,hasToken:!1,interceptor:h,params:l,redoRequest:!1,useIdentity:na.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1});h&&h.after&&h.after(ka);return ka});return B.apply(this,arguments)}function e(oa){(oa=J.getOrigin(oa))&&!A._corsServers.includes(oa)&&A._corsServers.push(oa)}function y(oa){oa=J.getOrigin(oa);return!oa||
oa.endsWith(".arcgis.com")||A._corsServers.includes(oa)||J.isTrustedServer(oa)}function r(oa,ua,ka,b){let l="Error";const h={url:ka.url,requestOptions:ka.requestOptions,getHeader:Ha,ssl:!1};if(ua instanceof g)return ua.details?(ua.details=E.clone(ua.details),ua.details.url=ka.url,ua.details.requestOptions=ka.requestOptions):ua.details=h,ua;if(ua){ka=b&&(S=>b.headers.get(S));const w=b&&b.status,R=ua.message;R&&(l=R);ka&&(h.getHeader=ka);h.httpStatus=(null!=ua.httpCode?ua.httpCode:ua.code)||w||0;h.subCode=
ua.subcode;h.messageCode=ua.messageCode;h.messages="string"===typeof ua.details?[ua.details]:ua.details;h.raw=La in ua?ua[La]:ua}return v.isAbortError(ua)?v.createAbortError():new g(oa,l,h)}function G(){return F.apply(this,arguments)}function F(){F=c._asyncToGenerator(function*(){n("host-webworker")?ia||(ia=yield new Promise(function(oa,ua){p(["./core/workers/request"],oa,ua)})):A._abortableFetch||(A._abortableFetch=u.fetch.bind(u))});return F.apply(this,arguments)}function O(){return P.apply(this,
arguments)}function P(){P=c._asyncToGenerator(function*(){K.id||(yield new Promise(function(oa,ua){p(["./identity/IdentityManager"],function(ka){oa(Object.freeze({__proto__:null,"default":ka}))},ua)}))});return P.apply(this,arguments)}function M(oa){return Z.apply(this,arguments)}function Z(){Z=c._asyncToGenerator(function*(oa){const ua=oa.params.url,ka=oa.params.requestOptions,b=oa.controller.signal,l=ka.body;let h=null,w=null,R=null;ra&&"HTMLFormElement"in u&&(l instanceof FormData?h=l:l instanceof
HTMLFormElement&&(w=l,h=new FormData(w)));"string"===typeof l&&(R=l);oa.fetchOptions={cache:ka.cacheBust&&!A._abortableFetch.polyfill?"no-cache":"default",credentials:"same-origin",headers:ka.headers||{},method:"head"===ka.method?"HEAD":"GET",mode:"cors",redirect:"follow",signal:b};if(h||R)oa.fetchOptions.body=h||R;"anonymous"===ka.authMode&&(oa.useIdentity=!1);oa.hasToken=!!(/token=/i.test(ua)||ka.query&&ka.query.token||h&&h.get&&h.get("token")||w&&w.elements.token);!oa.hasToken&&x.apiKey&&W.supportsApiKey(ua)&&
(ka.query||(ka.query={}),ka.query.token=x.apiKey,oa.hasToken=!0);if(oa.useIdentity&&!oa.hasToken&&!oa.credentialToken&&!aa(ua)&&!v.isAborted(b)){let S;"immediate"===ka.authMode?(yield O(),S=yield K.id.getCredential(ua,{signal:b}),oa.credential=S):"no-prompt"===ka.authMode?(yield O(),S=yield K.id.getCredential(ua,{prompt:!1,signal:b}).catch(()=>{}),oa.credential=S):K.id&&(S=K.id.findCredential(ua));S&&(oa.credentialToken=S.token,oa.useSSL=!!S.ssl)}});return Z.apply(this,arguments)}function aa(oa){return Ia.some(ua=>
ua.test(oa))}function m(oa){return D.apply(this,arguments)}function D(){D=c._asyncToGenerator(function*(oa){let ua=oa.params.url;const ka=oa.params.requestOptions,b=oa.fetchOptions,l=J.isBlobProtocol(ua)||J.isDataProtocol(ua),h=ka.responseType||"json",w=l?0:null!=ka.timeout?ka.timeout:na.timeout;var R=!1;if(!l){oa.useSSL&&(ua=J.toHTTPS(ua));ka.cacheBust&&"default"===b.cache&&(ua=J.addQueryParameter(ua,"request.preventCache",Date.now()));var S={...ka.query};oa.credentialToken&&(S.token=oa.credentialToken);
R=J.objectToQuery(S);n("esri-url-encodes-apostrophe")&&(R=R.replace(/'/g,"%27"));const ja=ua.length+1+R.length;R="delete"===ka.method||"post"===ka.method||"put"===ka.method||!!ka.body||ja>na.maxUrlLength;const ma=ka.useProxy||!!J.getProxyRule(ua);if(ma){const sa=J.getProxyUrl(ua);var I=sa.path;!R&&I.length+1+ja>na.maxUrlLength&&(R=!0);sa.query&&(S={...sa.query,...S})}if("HEAD"===b.method&&(R||ma)){if(R){if(ja>na.maxUrlLength)throw r("request:invalid-parameters",Error("URL exceeds maximum length"),
oa.params);throw r("request:invalid-parameters",Error("cannot use POST request when method is 'head'"),oa.params);}if(ma)throw r("request:invalid-parameters",Error("cannot use proxy when method is 'head'"),oa.params);}R?(b.method="delete"===ka.method?"DELETE":"put"===ka.method?"PUT":"POST",ka.body?ua=J.addQueryParameters(ua,S):(b.body=J.objectToQuery(S),b.headers["Content-Type"]="application/x-www-form-urlencoded")):ua=J.addQueryParameters(ua,S);ma&&(oa.useProxy=!0,ua=`${I}?${ua}`);S.token&&ra&&b.body instanceof
FormData&&(I=b.body,I.set?I.set("token",S.token):I.append("token",S.token));ka.hasOwnProperty("withCredentials")?oa.withCredentials=ka.withCredentials:J.hasSameOrigin(ua,J.appUrl)||(J.isTrustedServer(ua)?oa.withCredentials=!0:K.id&&(S=K.id.findServerInfo(ua))&&S.webTierAuth&&(oa.withCredentials=!0));oa.withCredentials&&(b.credentials="include")}S=0;let N=!1;0<w&&(S=setTimeout(()=>{N=!0;oa.controller.abort()},w));let Y,ca;try{if("native-request-init"===ka.responseType)ca=b,ca.url=ua;else if("image"!==
ka.responseType||"default"!==b.cache||"GET"!==b.method||R||H(ka.headers)||!l&&!oa.useProxy&&na.proxyUrl&&!y(ua))if(Y=yield A._abortableFetch(ua,b),oa.useProxy||e(ua),"native"===ka.responseType)ca=Y;else{if("HEAD"!==b.method)if(Y.ok){switch(h){case "array-buffer":ca=yield Y.arrayBuffer();break;case "blob":case "image":ca=yield Y.blob();break;default:ca=yield Y.text()}S&&(clearTimeout(S),S=0);if("json"===h||"xml"===h||"document"===h)if(ca)switch(h){case "json":ca=JSON.parse(ca);break;case "xml":ca=
k(ca,"application/xml");break;case "document":ca=k(ca,"text/html")}else ca=null;if(ca){if("array-buffer"===h||"blob"===h){const ja=Y.headers.get("Content-Type");if(/application\/json|text\/plain/i.test(ja)&&750>=ca["blob"===h?"size":"byteLength"])try{const ma=yield(new Response(ca)).json();ma.error&&(ca=ma)}catch{}}"image"===h&&ca instanceof Blob&&(ca=yield ba(URL.createObjectURL(ca),oa,!0))}}else ca=yield Y.text()}else ca=yield ba(ua,oa)}catch(ja){if("AbortError"===ja.name){if(N)throw Error("Timeout exceeded");
throw v.createAbortError("Request canceled");}if(!Y&&ja instanceof TypeError&&na.proxyUrl&&!ka.body&&"delete"!==ka.method&&"head"!==ka.method&&"post"!==ka.method&&"put"!==ka.method&&!oa.useProxy&&!y(ua))oa.redoRequest=!0,J.addProxyRule({proxyUrl:na.proxyUrl,urlPrefix:J.getOrigin(ua)});else throw ja;}finally{S&&clearTimeout(S)}return[Y,ca]});return D.apply(this,arguments)}function Q(oa,ua){return V.apply(this,arguments)}function V(){V=c._asyncToGenerator(function*(oa,ua){if(null!=oa.responseData)return oa.responseData;
oa.headers&&(ua.requestOptions.headers={...ua.requestOptions.headers,...oa.headers});oa.query&&(ua.requestOptions.query={...ua.requestOptions.query,...oa.query});if(oa.before){let ka,b;try{b=yield oa.before(ua)}catch(l){ka=r("request:interceptor",l,ua)}if(b instanceof Error||b instanceof g)ka=r("request:interceptor",b,ua);if(ka)throw oa.error&&oa.error(ka),ka;return b}});return V.apply(this,arguments)}function H(oa){if(oa)for(const ua of Object.getOwnPropertyNames(oa))if(oa[ua])return!0;return!1}
function k(oa,ua){let ka;try{ka=(new DOMParser).parseFromString(oa,ua)}catch{}if(!ka||ka.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return ka}function d(oa){return C.apply(this,arguments)}function C(){C=c._asyncToGenerator(function*(oa){var ua,ka;yield M(oa);let b;try{do[b,l]=yield m(oa);while(!(yield L(oa,b,l)))}catch(w){var l=r("request:server",w,oa.params,b);l.details.ssl=oa.useSSL;oa.interceptor&&oa.interceptor.error&&oa.interceptor.error(l);throw l;}const h=
oa.params.url;!/\/sharing\/rest\/(accounts|portals)\/self/i.test(h)||oa.hasToken||oa.credentialToken||null==(ua=l)||null==(ka=ua.user)||!ka.username||J.isTrustedServer(h)||(ua=J.getOrigin(h,!0))&&na.trustedServers.push(ua);(ua=oa.credential)&&K.id&&(ka=(ka=K.id.findServerInfo(ua.server))&&ka.owningSystemUrl)&&(ka=ka.replace(/\/?$/,"/sharing"),(ua=K.id.findCredential(ka,ua.userId))&&-1===K.id._getIdenticalSvcIdx(ka,ua)&&ua.resources.unshift(ka));return{data:l,getHeader:b?w=>b.headers.get(w):Ha,requestOptions:oa.params.requestOptions,
ssl:oa.useSSL,url:oa.params.url}});return C.apply(this,arguments)}function L(oa,ua,ka){return X.apply(this,arguments)}function X(){X=c._asyncToGenerator(function*(oa,ua,ka){if(oa.redoRequest)return oa.redoRequest=!1;const b=oa.params.requestOptions;if(!ua||"native"===b.responseType||"native-request-init"===b.responseType)return!0;let l;if(!ua.ok)throw l=Error(`Unable to load ${ua.url} status: ${ua.status}`),l[La]=ka,l;null!=ka&&ka.error&&(l=ka.error);let h,w,R;l&&(h=Number(l.code),w=l.hasOwnProperty("subcode")?
Number(l.subcode):null,R=(R=l.messageCode)&&R.toUpperCase());ua=b.authMode;if(403===h&&(4===w||l.message&&-1<l.message.toLowerCase().indexOf("ssl")&&-1===l.message.toLowerCase().indexOf("permission"))){if(!oa.useSSL)return oa.useSSL=!0,!1}else if(!oa.hasToken&&oa.useIdentity&&("no-prompt"!==ua||498===h)&&-1!==wa.indexOf(h)&&!aa(oa.params.url)&&(403!==h||-1===Ca.indexOf(R)&&(null==w||2===w&&oa.credentialToken))){yield O();try{const S=yield K.id.getCredential(oa.params.url,{error:r("request:server",
l,oa.params),prompt:"no-prompt"!==ua,signal:oa.controller.signal,token:oa.credentialToken});oa.credential=S;oa.credentialToken=S.token;oa.useSSL=oa.useSSL||S.ssl;return!1}catch(S){if("no-prompt"===ua)return oa.credential=null,oa.credentialToken=null,!1;l=S}}if(l)throw l;return!0});return X.apply(this,arguments)}function ba(oa,ua,ka=!1){const b=ua.controller.signal,l=new Image;l.crossOrigin=ua.withCredentials?"use-credentials":"anonymous";l.alt="";l.src=oa;return q.loadImageAsync(l,oa,ka,b)}let ia;
const na=x.request,ra="FormData"in u,wa=[499,498,403,401],Ca=["COM_0056","COM_0057","SB_0008"],Ia=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],Ha=()=>null,La=Symbol();A._abortableFetch=null;A._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"];return A})},"esri/support/apiKeyUtils":function(){define(["exports","../core/urlUtils"],function(p,c){const x=["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"];
p.isApiKey=function(K){return K&&4<K.length&&K.startsWith("AAPK")};p.supportsApiKey=function(K){const g=c.getOrigin(K,!0);return g&&g.endsWith(".arcgis.com")&&!x.includes(g)&&!K.endsWith("/sharing/rest/generateToken")};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/support/requestUtils":function(){define(["exports","../core/has","../core/maybe","../core/promiseUtils"],function(p,c,x,K){function g(){try{return new DOMException("Aborted","AbortError")}catch{const u=Error();u.name="AbortError";
return u}}p.loadImageAsync=function(u,n,E=!1,t){return new Promise((v,J)=>{if(K.isAborted(t))J(g());else{var W=()=>{B();J(Error(`Unable to load ${n}`))},q=()=>{const e=u;B();v(e)},A=()=>{if(u){var e=u;B();e.src="";J(g())}},B=()=>{c("esri-image-decode")||(u.removeEventListener("error",W),u.removeEventListener("load",q));u=q=W=null;x.isSome(t)&&t.removeEventListener("abort",A);A=null;E&&URL.revokeObjectURL(n)};x.isSome(t)&&t.addEventListener("abort",A);c("esri-image-decode")?u.decode().then(q,W):(u.addEventListener("error",
W),u.addEventListener("load",q))}})};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/geometry/support/geodesicConstants":function(){define(["exports","./Ellipsoid"],function(p,c){const x=Math.PI/180;var K=c.earth.radius;const g=c.earth.eccentricitySquared;K={a1:K*g,a2:K*g*K*g,a3:K*g*g/2,a4:K*g*K*g*2.5,a5:K*g+K*g*g/2,a6:1-g};c={4267:{a:6378206.4,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:c.earth.radius,f:c.earth.flattening},104900:{a:2439700,f:0},104901:{a:6051E3,f:0},104902:{a:6051800,
f:0},104903:{a:c.moon.radius,f:c.moon.flattening},104904:{a:3393400,f:.005207166853303471},104905:{a:c.mars.radius,f:c.mars.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492E3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1E4,f:0},104912:{a:2409300,f:0},104913:{a:15E3,f:0},104914:{a:4E4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85E3,f:0},104918:{a:1821460,f:0},104919:{a:5E3,f:0},104920:{a:12E3,f:0},104921:{a:3E4,f:3},104922:{a:18E3,
f:0},104923:{a:14E3,f:0},104924:{a:49300,f:0},104925:{a:60268E3,f:.09796243445941462},104926:{a:16E3,f:0},104927:{a:9500,f:0},104928:{a:56E4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16E3,f:0},104932:{a:133E3,f:0},104933:{a:718E3,f:0},104934:{a:888E3,f:0},104935:{a:1986300,f:0},104936:{a:1E4,f:0},104937:{a:41900,f:0},104938:{a:11E4,f:0},104939:{a:50100,f:0},104940:{a:764E3,f:0},104941:{a:11E3,f:0},104942:{a:529800,f:0},104943:{a:2575E3,f:0},104944:{a:25559E3,f:.022927344575296365},
104945:{a:578900,f:0},104946:{a:33E3,f:0},104947:{a:21E3,f:0},104948:{a:13E3,f:0},104949:{a:31E3,f:0},104950:{a:27E3,f:0},104951:{a:42E3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15E3,f:0},104955:{a:54E3,f:0},104956:{a:77E3,f:0},104957:{a:27E3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764E3,f:.01708124697141011},104961:{a:74E3,f:0},104962:{a:79E3,f:0},104963:{a:104E3,f:.14423076923076922},104964:{a:29E3,f:0},104965:{a:17E4,f:0},104966:{a:208E3,f:0},104967:{a:4E4,
f:0},104968:{a:1352600,f:0},104969:{a:1195E3,f:0},104970:{a:593E3,f:0},104971:{a:c.mars.radius,f:0},104972:{a:47E4,f:0},104973:{a:255E3,f:0},104974:{a:2439400,f:0}};p.WKT_SPHEROID_REGEX=/SPHEROID\[([^\]]+)]/i;p.earthEllipsoidConstants=K;p.spheroids=c;p.toRadians=x;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/geometry/support/GeographicTransformation":function(){define(["./GeographicTransformationStep"],function(p){return function(){function c(K){this.steps=[];this._cached_projection=
{};this._chain="";this._gtlistentry=null;if(K&&K.steps)for(const g of K.steps)g instanceof p?this.steps.push(g):this.steps.push(new p({wkid:g.wkid,wkt:g.wkt,isInverse:g.isInverse}))}c.cacheKey=function(K,g){return[void 0!==K.wkid&&null!==K.wkid?K.wkid.toString():"-1",void 0!==K.wkt&&null!==K.wkt?K.wkt.toString():"",void 0!==g.wkid&&null!==g.wkid?g.wkid.toString():"-1",void 0!==g.wkt&&null!==g.wkt?g.wkt.toString():""].join()};c.fromGE=function(K){const g=new c;let u="";for(const n of K.steps)K=p.fromGE(n),
g.steps.push(K),u+=K.uid.toString()+",";g._cached_projection={};g._gtlistentry=null;g._chain=u;return g};var x=c.prototype;x.getInverse=function(){const K=new c;K.steps=[];for(let g=this.steps.length-1;0<=g;g--)K.steps.push(this.steps[g].getInverse());return K};x.getGTListEntry=function(){let K="";for(const g of this.steps)K+=g.uid.toString()+",";K!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=K);return this._gtlistentry};x.assignCachedGe=function(K,g,u){this._cached_projection[c.cacheKey(K,
g)]=u};x.getCachedGeTransformation=function(K,g){let u="";for(const n of this.steps)u+=n.uid.toString()+",";u!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=u);K=this._cached_projection[c.cacheKey(K,g)];return void 0===K?null:K};return c}()})},"esri/geometry/support/GeographicTransformationStep":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(p){let c=0;return function(){function x(K=null){this.uid=c++;K?(this._wkt=void 0!==K.wkt?K.wkt:null,this._wkid=
void 0!==K.wkid?K.wkid:-1,this._isInverse=void 0!==K.isInverse?!0===K.isInverse:!1):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}x.fromGE=function(K){const g=new x;g._wkt=K.wkt;g._wkid=K.wkid;g._isInverse=K.isInverse;return g};x.prototype.getInverse=function(){const K=new x;K._wkt=this.wkt;K._wkid=this._wkid;K._isInverse=!this.isInverse;return K};p._createClass(x,[{key:"wkt",get:function(){return this._wkt},set:function(K){this._wkt=K;this.uid=c++}},{key:"wkid",get:function(){return this._wkid},
set:function(K){this._wkid=K;this.uid=c++}},{key:"isInverse",get:function(){return this._isInverse},set:function(K){this._isInverse=K;this.uid=c++}}]);return x}()})},"esri/geometry/geometryAdapters/json":function(){define(["exports"],function(p){let c=function(n,E,t){this.x=n;this.y=E;this.spatialReference=t;this.m=this.z=void 0},x=function(n,E,t,v){this.rings=n;this.spatialReference=E;this.hasM=this.hasZ=void 0;t&&(this.hasZ=t);v&&(this.hasM=v)},K=function(n,E,t,v){this.paths=n;this.spatialReference=
E;this.hasM=this.hasZ=void 0;t&&(this.hasZ=t);v&&(this.hasM=v)},g=function(n,E,t,v){this.points=n;this.spatialReference=E;this.hasM=this.hasZ=void 0;t&&(this.hasZ=t);v&&(this.hasM=v)},u=function(n,E,t,v,J){this.xmin=n;this.ymin=E;this.xmax=t;this.ymax=v;this.spatialReference=J;this.mmax=this.mmin=this.zmax=this.zmin=void 0};p.jsonAdapter={convertToGEGeometry:function(n,E){return null==E?null:n.convertJSONToGeometry(E)},exportPoint:function(n,E,t){t=new c(n.getPointX(E),n.getPointY(E),t);const v=n.hasZ(E),
J=n.hasM(E);v&&(t.z=n.getPointZ(E));J&&(t.m=n.getPointM(E));return t},exportPolygon:function(n,E,t){return new x(n.exportPaths(E),t,n.hasZ(E),n.hasM(E))},exportPolyline:function(n,E,t){return new K(n.exportPaths(E),t,n.hasZ(E),n.hasM(E))},exportMultipoint:function(n,E,t){return new g(n.exportPoints(E),t,n.hasZ(E),n.hasM(E))},exportExtent:function(n,E,t){var v=n.hasZ(E);const J=n.hasM(E);t=new u(n.getXMin(E),n.getYMin(E),n.getXMax(E),n.getYMax(E),t);v&&(v=n.getZExtent(E),t.zmin=v.vmin,t.zmax=v.vmax);
J&&(n=n.getMExtent(E),t.mmin=n.vmin,t.mmax=n.vmax);return t}};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/graphics/data/QueryEngine":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../core/lang ../../../core/maybe ../../../core/MemCache ../../../core/unitUtils ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../../../geometry/support/boundsUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ./attributeSupport ./projectionSupport ./QueryEngineCapabilities ./QueryEngineResult ./spatialQuerySupport ./timeSupport ./utils ../../support/FieldsIndex ../../support/PromiseQueue ../../../smartMapping/support/utils".split(" "),
function(p,c,x,K,g,u,n,E,t,v,J,W,q,A,B,e,y,r,G,F,O,P,M){function Z(k){return k.every(d=>"exceedslimit"!==d.statisticType)}const aa=new Set,m=new u.MemCacheStorage(2E6);let D=0,Q=function(){function k(C){this.capabilities={query:e.queryCapabilities};this.geometryType=C.geometryType;this.hasM=C.hasM;this.hasZ=C.hasZ;this.objectIdField=C.objectIdField;this.spatialReference=C.spatialReference;this.definitionExpression=C.definitionExpression;this.featureStore=C.featureStore;this.aggregateAdapter=C.aggregateAdapter;
this._changeHandle=this.featureStore.events.on("changed",()=>this.clearCache());this.timeInfo=C.timeInfo;C.cacheSpatialQueries&&(this._geometryQueryCache=new u.MemCache(D++ +"$$",m));this.fieldsIndex=new O(C.fields);C.scheduler&&C.priority&&(this._frameQueue=new P,this._frameTask=C.scheduler.registerTask(C.priority,this))}var d=k.prototype;d.destroy=function(){this._frameTask&&(this._frameTask.remove(),this._frameTask=null,this._frameQueue.cancelAll(),this._frameQueue=null);this.clearCache();this._geometryQueryCache&&
this._geometryQueryCache.destroy();this._changeHandle&&(this._changeHandle.remove(),this._changeHandle=null);this.fieldsIndex.destroy()};d.clearCache=function(){this._geometryQueryCache&&this._geometryQueryCache.clear();this._timeExtent=this._allItems=null};d.executeQuery=function(){var C=c._asyncToGenerator(function*(L={},X){let ba=K.clone(L),ia;try{ba=yield this._schedule(()=>F.normalizeQuery(ba,this.definitionExpression,this.spatialReference),X),ba=yield this._reschedule(()=>this._checkQuerySupport(ba),
X),ia=yield this._reschedule(()=>this._executeGeometryQuery(ba,X),X),ia=yield this._reschedule(()=>ia.executeAggregateIdsQuery(ba),X),ia=yield this._reschedule(()=>ia.executeObjectIdsQuery(ba),X),ia=yield this._reschedule(()=>ia.executeTimeQuery(ba),X),ia=yield this._reschedule(()=>ia.executeAttributesQuery(ba),X)}catch(na){if(na!==F.QUERY_ENGINE_EMPTY_RESULT)throw na;ia=new y([],null,this)}return ia.createQueryResponse(ba)});return function(){return C.apply(this,arguments)}}();d.executeQueryForCount=
function(){var C=c._asyncToGenerator(function*(L={},X){let ba=K.clone(L),ia;ba.returnGeometry=!1;ba.returnCentroid=!1;ba.outSR=null;try{ba=yield this._schedule(()=>F.normalizeQuery(ba,this.definitionExpression,this.spatialReference),X),ba=yield this._reschedule(()=>this._checkQuerySupport(ba),X),ia=yield this._reschedule(()=>this._executeGeometryQuery(ba,X),X),ia=yield this._reschedule(()=>ia.executeAggregateIdsQuery(ba),X),ia=yield this._reschedule(()=>ia.executeObjectIdsQuery(ba),X),ia=yield this._reschedule(()=>
ia.executeTimeQuery(ba),X),ia=yield this._reschedule(()=>ia.executeAttributesQuery(ba),X)}catch(na){if(na!==F.QUERY_ENGINE_EMPTY_RESULT)throw na;return 0}return ia.createQueryResponseForCount(ba)});return function(){return C.apply(this,arguments)}}();d.executeQueryForExtent=function(){var C=c._asyncToGenerator(function*(L={},X){let ba=K.clone(L),ia;L=ba.outSR;try{ba=yield this._schedule(()=>F.normalizeQuery(ba,this.definitionExpression,this.spatialReference),X);ba=yield this._reschedule(()=>this._checkQuerySupport(ba),
X);ba.returnGeometry=!0;ba.returnCentroid=!1;ba.outSR=null;ia=yield this._reschedule(()=>this._executeGeometryQuery(ba,X),X);ia=yield this._reschedule(()=>ia.executeAggregateIdsQuery(ba),X);ia=yield this._reschedule(()=>ia.executeObjectIdsQuery(ba),X);ia=yield this._reschedule(()=>ia.executeTimeQuery(ba),X);ia=yield this._reschedule(()=>ia.executeAttributesQuery(ba),X);const na=ia.size;if(!na)return{count:na,extent:null};E.set(H,E.NEGATIVE_INFINITY);this.featureStore.forEachBounds(ia.items,Ca=>E.expandWithAABB(H,
Ca),V);const ra={xmin:H[0],ymin:H[1],xmax:H[3],ymax:H[4],spatialReference:F.cleanFromGeometryEngine(this.spatialReference)};this.hasZ&&isFinite(H[2])&&isFinite(H[5])&&(ra.zmin=H[2],ra.zmax=H[5]);const wa=B.project(ra,ia.spatialReference,L);wa.spatialReference=F.cleanFromGeometryEngine(L||this.spatialReference);if(0===wa.xmax-wa.xmin){const Ca=n.getMetersPerUnitForSR(wa.spatialReference);wa.xmin-=Ca;wa.xmax+=Ca}if(0===wa.ymax-wa.ymin){const Ca=n.getMetersPerUnitForSR(wa.spatialReference);wa.ymin-=
Ca;wa.ymax+=Ca}if(this.hasZ&&null!=wa.zmin&&null!=wa.zmax&&0===wa.zmax-wa.zmin){const Ca=n.getMetersPerUnitForSR(wa.spatialReference);wa.zmin-=Ca;wa.zmax+=Ca}return{count:na,extent:wa}}catch(na){if(na===F.QUERY_ENGINE_EMPTY_RESULT)return{count:0,extent:null};throw na;}});return function(){return C.apply(this,arguments)}}();d.executeQueryForIds=function(){var C=c._asyncToGenerator(function*(L={},X){return this.executeQueryForIdSet(L,X).then(ba=>Array.from(ba))});return function(){return C.apply(this,
arguments)}}();d.executeQueryForIdSet=function(){var C=c._asyncToGenerator(function*(L={},X){let ba=K.clone(L),ia;ba.returnGeometry=!1;ba.returnCentroid=!1;ba.outSR=null;try{ba=yield this._schedule(()=>F.normalizeQuery(ba,this.definitionExpression,this.spatialReference),X);ba=yield this._reschedule(()=>this._checkQuerySupport(ba),X);ia=yield this._reschedule(()=>this._executeGeometryQuery(ba,X),X);ia=yield this._reschedule(()=>ia.executeAggregateIdsQuery(ba),X);ia=yield this._reschedule(()=>ia.executeObjectIdsQuery(ba),
X);ia=yield this._reschedule(()=>ia.executeTimeQuery(ba),X);ia=yield this._reschedule(()=>ia.executeAttributesQuery(ba),X);const na=ia.items,ra=new Set;yield this._reschedule(()=>{for(const wa of na)ra.add(ia.featureAdapter.getObjectId(wa))},X);return ra}catch(na){if(na===F.QUERY_ENGINE_EMPTY_RESULT)return new Set;throw na;}});return function(){return C.apply(this,arguments)}}();d.executeQueryForSnapping=function(){var C=c._asyncToGenerator(function*(L,X){const {point:ba,distance:ia,types:na}=L;if(0===
na)return{candidates:[]};const ra=yield this._reschedule(()=>this._checkQuerySupport(L.query),X),wa=!q.equals(ba.spatialReference,this.spatialReference);wa&&(yield B.checkProjectionSupport(ba.spatialReference,this.spatialReference));var Ca="number"===typeof ia?ia:ia.x,Ia="number"===typeof ia?ia:ia.y;Ca={xmin:ba.x-Ca,xmax:ba.x+Ca,ymin:ba.y-Ia,ymax:ba.y+Ia,spatialReference:ba.spatialReference};Ca=wa?B.project(Ca,this.spatialReference):Ca;if(!Ca)return{candidates:[]};Ia=(yield W.normalizeCentralMeridian(J.fromJSON(ba),
null,{signal:X}))[0];const Ha=(yield W.normalizeCentralMeridian(J.fromJSON(Ca),null,{signal:X}))[0];if(g.isNone(Ia)||g.isNone(Ha))return{candidates:[]};let La=new y(this._searchFeatures(this._getQueryBBoxes(Ha.toJSON())),null,this);La=yield this._reschedule(()=>La.executeObjectIdsQuery(ra),X);La=yield this._reschedule(()=>La.executeTimeQuery(ra),X);La=yield this._reschedule(()=>La.executeAttributesQuery(ra),X);X=Ia.toJSON();X=wa?B.project(X,this.spatialReference):X;return La.createSnappingResponse({...L,
point:X,distance:wa?Math.max(Ca.xmax-Ca.xmin,Ca.ymax-Ca.ymin)/2:ia},ba.spatialReference)});return function(L,X){return C.apply(this,arguments)}}();d.executeQueryForLatestObservations=function(){var C=c._asyncToGenerator(function*(L={},X){if(!this.timeInfo||!this.timeInfo.trackIdField)throw new x("feature-store:unsupported-query","Missing timeInfo or timeInfo.trackIdField",{query:L,timeInfo:this.timeInfo});let ba=K.clone(L),ia;try{ba=yield this._schedule(()=>F.normalizeQuery(ba,this.definitionExpression,
this.spatialReference),X),ba=yield this._reschedule(()=>this._checkQuerySupport(ba),X),ia=yield this._reschedule(()=>this._executeGeometryQuery(ba,X),X),ia=yield this._reschedule(()=>ia.executeAggregateIdsQuery(ba),X),ia=yield this._reschedule(()=>ia.executeObjectIdsQuery(ba),X),ia=yield this._reschedule(()=>ia.executeTimeQuery(ba),X),ia=yield this._reschedule(()=>ia.executeAttributesQuery(ba),X),ia=yield this._reschedule(()=>ia.filterLatest(),X)}catch(na){if(na!==F.QUERY_ENGINE_EMPTY_RESULT)throw na;
ia=new y([],null,this)}return ia.createQueryResponse(ba)});return function(){return C.apply(this,arguments)}}();d.executeQueryForSummaryStatistics=function(){var C=c._asyncToGenerator(function*(L={},X,ba){L=K.clone(L);let ia;try{L=yield this._schedule(()=>F.normalizeQuery(L,this.definitionExpression,this.spatialReference),ba),L=yield this._reschedule(()=>this._checkSummaryStatisticsSupport(L,X),ba),ia=yield this._reschedule(()=>this._executeGeometryQuery(L,ba),ba),ia=yield this._reschedule(()=>ia.executeAggregateIdsQuery(L),
ba),ia=yield this._reschedule(()=>ia.executeObjectIdsQuery(L),ba),ia=yield this._reschedule(()=>ia.executeTimeQuery(L),ba),ia=yield this._reschedule(()=>ia.executeAttributesQuery(L),ba)}catch(na){if(na!==F.QUERY_ENGINE_EMPTY_RESULT)throw na;ia=new y([],null,this)}return ia.createSummaryStatisticsResponse(L,X)});return function(){return C.apply(this,arguments)}}();d._schedule=function(){var C=c._asyncToGenerator(function*(L,X){return this._frameQueue?this._frameQueue.push(L,X):L()});return function(L,
X){return C.apply(this,arguments)}}();d._reschedule=function(){var C=c._asyncToGenerator(function*(L,X){return this._frameQueue?this._frameQueue.unshift(L,X):L()});return function(L,X){return C.apply(this,arguments)}}();d.runTask=function(C){for(this._budget=C;!C.done&&this._frameQueue&&this._frameQueue.process();)C.madeProgress();this._budget=null};d._getAll=function(){if(!this._allItems){const C=[];this.featureStore.forEach(L=>C.push(L));this._allItems=new y(C,null,this)}return this._allItems};
d._executeGeometryQuery=function(){var C=c._asyncToGenerator(function*(L,X){var ba=this;const {geometry:ia,outSR:na,spatialRel:ra,returnGeometry:wa,returnCentroid:Ca}=L,Ia=wa||Ca,Ha=q.isValid(na)&&!q.equals(this.spatialReference,na),La=this._geometryQueryCache?Ha&&Ia?JSON.stringify({geometry:ia,spatialRelationship:ra,outSpatialReference:na}):JSON.stringify({geometry:ia,spatialRelationship:ra}):null;if(La){var oa=this._geometryQueryCache.get(La);if(!g.isUndefined(oa))return oa}oa=function(){var l=
c._asyncToGenerator(function*(h){if(Ha&&Ia)return h=yield h.project(na),La&&ba._geometryQueryCache.put(La,h,h.size||1),h;La&&ba._geometryQueryCache.put(La,h,h.size||1);return h});return function(h){return l.apply(this,arguments)}}();if(!ia)return oa(this._getAll());const ua=this.featureAdapter;if("esriSpatialRelDisjoint"===ra){L=this._searchFeatures(this._getQueryBBoxes(ia));if(!L.length)return oa(this._getAll());let l,h;const w=new Set;for(var ka of L)w.add(ua.getObjectId(ka));yield this._reschedule(()=>
{let R=0;l=Array(w.size);this.featureStore.forEach(S=>l[R++]=S);h=w},X);L=yield this._reschedule(c._asyncToGenerator(function*(){const R=yield r.getSpatialQueryOperator(ra,ia,ba.geometryType,ba.hasZ,ba.hasM);return new y(yield ba._runSpatialFilter(l,S=>!h.has(ua.getObjectId(S))||R(ua.getGeometry(S)),X),ia,ba)}),X);return oa(L)}ka=this._searchFeatures(this._getQueryBBoxes(ia));if(!ka.length)return oa=new y([],ia,this),La&&this._geometryQueryCache.put(La,oa,oa.size||1),oa;if(this._canExecuteSoloPass(ia,
L))return oa(new y(ka,ia,this));const b=yield r.getSpatialQueryOperator(ra,ia,this.geometryType,this.hasZ,this.hasM);L=yield this._runSpatialFilter(ka,l=>b(ua.getGeometry(l)),X);return oa(new y(L,ia,this))});return function(L,X){return C.apply(this,arguments)}}();d._runSpatialFilter=function(){var C=c._asyncToGenerator(function*(L,X,ba){var ia=this;if(!X)return L;if(!this._budget)return L.filter(Ca=>X(Ca));let na=0;const ra=[],wa=function(){var Ca=c._asyncToGenerator(function*(){for(;na<L.length;){const Ia=
L[na];X(Ia)&&ra.push(Ia);ia._budget.done&&(yield ia._reschedule(()=>wa(),ba));++na}});return function(){return Ca.apply(this,arguments)}}();return this._reschedule(()=>wa(),ba).then(()=>ra)});return function(L,X,ba){return C.apply(this,arguments)}}();d._canExecuteSoloPass=function(C,L){const {geometryType:X}=this;({spatialRel:L}=L);return r.canQueryWithRBush(C)&&("esriSpatialRelEnvelopeIntersects"===L||"esriGeometryPoint"===X&&("esriSpatialRelIntersects"===L||"esriSpatialRelContains"===L||"esriSpatialRelWithin"===
L))};d._getQueryBBoxes=function(C){if(r.canQueryWithRBush(C)){if(J.isExtent(C))return[t.fromValues(C.xmin,C.ymin,C.xmax,C.ymax)];if(J.isPolygon(C))return C.rings.map(L=>t.fromValues(Math.min(L[0][0],L[2][0]),Math.min(L[0][1],L[2][1]),Math.max(L[0][0],L[2][0]),Math.max(L[0][1],L[2][1])))}return[v.getBoundsXY(t.create(),C)]};d._searchFeatures=function(C){for(const ba of C)this.featureStore.forEachInBounds(ba,ia=>{aa.add(ia)});const L=Array(aa.size);let X=0;aa.forEach(ba=>L[X++]=ba);aa.clear();return L};
d._checkSummaryStatisticsSupport=function(){var C=c._asyncToGenerator(function*(L,X){if(0>L.distance||null!=L.geometryPrecision||L.multipatchOption||L.pixelSize||L.relationParam||L.text||L.outStatistics||L.groupByFieldsForStatistics||L.having||L.orderByFields)throw new x("feature-store:unsupported-query","Unsupported query options",{query:L});return Promise.all([this._checkAttributesQuerySupport(L),this._checkSummaryStatisticsParamsSupport(X),r.checkSpatialQuerySupport(L,this.geometryType,this.spatialReference),
B.checkProjectionSupport(this.spatialReference,L.outSR)]).then(()=>L)});return function(L,X){return C.apply(this,arguments)}}();d._checkSummaryStatisticsParamsSupport=function(){var C=c._asyncToGenerator(function*(L){const X=yield M.getFieldsList({field:L.field,normalizationField:L.normalizationField,valueExpression:L.valueExpression});if(!X.length)throw new x("feature-store:unsupported-query","params should have atleast a field or valueExpression",{params:L});A.validateFields(this.fieldsIndex,X,
"params contains missing fields")});return function(L){return C.apply(this,arguments)}}();d._checkQuerySupport=function(){var C=c._asyncToGenerator(function*(L){if(0>L.distance||null!=L.geometryPrecision||L.multipatchOption||L.pixelSize||L.relationParam||L.text)throw new x("feature-store:unsupported-query","Unsupported query options",{query:L});return Promise.all([this._checkAttributesQuerySupport(L),this._checkStatisticsQuerySupport(L),r.checkSpatialQuerySupport(L,this.geometryType,this.spatialReference),
B.checkProjectionSupport(this.spatialReference,L.outSR)]).then(()=>L)});return function(L){return C.apply(this,arguments)}}();d._checkAttributesQuerySupport=function(C){const {outFields:L,orderByFields:X,returnDistinctValues:ba,outStatistics:ia}=C,na=ia?ia.map(ra=>ra.outStatisticFieldName&&ra.outStatisticFieldName.toLowerCase()):[];if(X&&0<X.length){const ra=X.map(wa=>{const Ca=wa.toLowerCase();return-1<Ca.indexOf(" asc")?Ca.split(" asc")[0]:-1<Ca.indexOf(" desc")?Ca.split(" desc")[0]:wa}).filter(wa=>
-1===na.indexOf(wa));A.validateFields(this.fieldsIndex,ra,"orderByFields contains missing fields")}if(L&&0<L.length)A.validateFields(this.fieldsIndex,L,"outFields contains missing fields");else if(ba)throw new x("feature-store:unsupported-query","outFields should be specified for returnDistinctValues",{query:C});A.validateWhere(this.fieldsIndex,C.where)};d._checkStatisticsQuerySupport=function(){var C=c._asyncToGenerator(function*(L){const {outStatistics:X,groupByFieldsForStatistics:ba,having:ia}=
L;var na=ba&&ba.length,ra=X&&X.length;if(ia){if(!na||!ra)throw new x("feature-store:unsupported-query","outStatistics and groupByFieldsForStatistics should be specified with having",{query:L});A.validateHaving(this.fieldsIndex,ia,X)}if(ra&&Z(X)){ra=X.map(wa=>wa.onStatisticField);A.validateFields(this.fieldsIndex,ra,"onStatisticFields contains missing fields");na&&A.validateFields(this.fieldsIndex,ba,"groupByFieldsForStatistics contains missing fields");for(const wa of X){const {onStatisticField:Ca,
statisticType:Ia}=wa;if(("percentile_disc"===Ia||"percentile_cont"===Ia)&&"statisticParameters"in wa){if({statisticParameters:na}=wa,!na)throw new x("feature-store:unsupported-query","statisticParamters should be set for percentile type",{definition:wa,query:L});}else if("count"!==Ia&&Ca&&A.hasInvalidFieldType(Ca,this.fieldsIndex))throw new x("feature-store:unsupported-query","outStatistics contains non-numeric fields",{definition:wa,query:L});}}});return function(L){return C.apply(this,arguments)}}();
c._createClass(k,[{key:"featureAdapter",get:function(){return this.featureStore.featureAdapter}},{key:"fullExtent",get:function(){const C=this.featureStore.fullBounds;return C?{xmin:C[0],ymin:C[1],xmax:C[2],ymax:C[3],spatialReference:F.cleanFromGeometryEngine(this.spatialReference)}:null}},{key:"timeExtent",get:function(){return this.timeInfo?this._timeExtent?this._timeExtent:this._timeExtent=G.getTimeExtent(this.timeInfo,this.featureStore):null}},{key:"running",get:function(){return 0<this._frameQueue.length}}]);
return k}();const V=E.create(),H=E.create();p.Feature=function(k,d=null,C,L,X){this.attributes=k;this.geometry=C;this.centroid=L;this.filterFlags=X;this.groupId=-1;this.displayId=d};p.default=Q;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/core/MemCache":function(){define(["exports","../chunks/_rollupPluginBabelHelpers","./PooledArray"],function(p,c,x){let K=function(){function u(E,t,v){this._namespace=E;this._storage=t;this._removeFunc=!1;this._miss=this._hit=0;this._storage.register(this);
this._namespace+=":";v&&(this._storage.registerRemoveFunc(this._namespace,v),this._removeFunc=!0)}var n=u.prototype;n.destroy=function(){this._storage.clear(this._namespace);this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace);this._storage.deregister(this);this._storage=null};n.resetHitRate=function(){this._hit=this._miss=0};n.put=function(E,t,v,J=0){this._storage.put(this._namespace+E,t,v,J)};n.get=function(E){E=this._storage.get(this._namespace+E);void 0===E?++this._miss:++this._hit;
return E};n.pop=function(E){E=this._storage.pop(this._namespace+E);void 0===E?++this._miss:++this._hit;return E};n.updateSize=function(E,t,v){this._storage.updateSize(this._namespace+E,t,v)};n.clear=function(){this._storage.clear(this._namespace)};n.clearAll=function(){this._storage.clearAll()};n.getStats=function(){return this._storage.getStats()};n.resetStats=function(){this._storage.resetStats()};c._createClass(u,[{key:"namespace",get:function(){return this._namespace.slice(0,-1)}},{key:"hitRate",
get:function(){return this._hit/(this._hit+this._miss)}},{key:"size",get:function(){return this._storage.size}},{key:"maxSize",get:function(){return this._storage.maxSize}}]);return u}(),g=function(){function u(E=10485760){this._maxSize=E;this._db=new Map;this._miss=this._hit=this._size=0;this._removeFuncs=new x;this._users=new x}var n=u.prototype;n.destroy=function(){this.clearAll();this._removeFuncs.clear();this._users.clear();this._db=null};n.register=function(E){this._users.push(E)};n.deregister=
function(E){this._users.removeUnordered(E)};n.registerRemoveFunc=function(E,t){this._removeFuncs.push([E,t])};n.deregisterRemoveFunc=function(E){this._removeFuncs.filterInPlace(t=>t[0]!==E)};n.put=function(E,t,v,J){const W=this._db.get(E);W&&(this._size-=W.size,this._db.delete(E),W.entry!==t&&this._notifyRemoved(E,W.entry));v>this._maxSize?this._notifyRemoved(E,t):void 0===t?console.warn("Refusing to cache undefined entry "):!v||0>v?console.warn("Refusing to cache entry with invalid size "+v):(J=
1+Math.max(J,-3)- -3,this._db.set(E,{entry:t,size:v,lifetime:J,lives:J}),this._size+=v,this._checkSizeLimit())};n.updateSize=function(E,t,v){const J=this._db.get(E);J&&J.entry===t&&(this._size-=J.size,v>this._maxSize?(this._db.delete(E),this._notifyRemoved(E,t)):(J.size=v,this._size+=v,this._checkSizeLimit()))};n.pop=function(E){const t=this._db.get(E);if(t)return this._size-=t.size,this._db.delete(E),++this._hit,t.entry;++this._miss};n.get=function(E){const t=this._db.get(E);if(void 0===t)++this._miss;
else return this._db.delete(E),t.lives=t.lifetime,this._db.set(E,t),++this._hit,t.entry};n.getStats=function(){const E={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},t={},v=[];this._db.forEach((q,A)=>{const B=q.lifetime;v[B]=(v[B]||0)+q.size;this._users.forAll(e=>{e=e.namespace;A.startsWith(e)&&(t[e]=(t[e]||0)+q.size)})});const J={};this._users.forAll(q=>{const A=q.namespace;!isNaN(q.hitRate)&&
0<q.hitRate?(t[A]=t[A]||0,J[A]=Math.round(100*q.hitRate)+"%"):J[A]="0%"});var W=Object.keys(t);W.forEach(q=>t[q]=t[q]/this._size*100);W.sort((q,A)=>t[A]-t[q]);W.forEach(q=>E[q]=Math.round(t[q])+"% / "+J[q]);for(W=v.length-1;0<=W;--W){const q=v[W];q&&(E["Priority "+(W+-3-1)]=Math.round(q/this.size*100)+"%")}return E};n.resetStats=function(){this._hit=this._miss=0;this._users.forAll(E=>E.resetHitRate())};n.clear=function(E){this._db.forEach((t,v)=>{v.startsWith(E)&&(this._size-=t.size,this._db.delete(v),
this._notifyRemoved(v,t.entry))})};n.clearAll=function(){this._db.forEach((E,t)=>this._notifyRemoved(t,E.entry));this._size=0;this._db.clear()};n._getHitRate=function(){return this._hit/(this._hit+this._miss)};n._notifyRemoved=function(E,t){this._removeFuncs.forAll(v=>{if(E.startsWith(v[0]))v[1](t)})};n._checkSizeLimit=function(){if(!(this._size<=this._maxSize))for(const [E,t]of this._db)if(this._db.delete(E),1>=t.lives?(this._size-=t.size,this._notifyRemoved(E,t.entry)):(--t.lives,this._db.set(E,
t)),this._size<=.9*this.maxSize)break};c._createClass(u,[{key:"size",get:function(){return this._size}},{key:"maxSize",get:function(){return this._maxSize},set:function(E){this._maxSize=Math.max(E,0);this._checkSizeLimit()}}]);return u}();p.MIN_PRIORITY=-3;p.MemCache=K;p.MemCacheStorage=g;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/geometry/support/normalizeUtils":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../config ../../core/Error ../../core/Logger ../../core/maybe ../Polygon ../Polyline ./normalizeUtilsCommon ./spatialReferenceUtils ./webMercatorUtils ../../tasks/geometry/cut ../../tasks/geometry/simplify".split(" "),
function(p,c,x,K,g,u,n,E,t,v,J,W,q){function A(P){const M=[];let Z=0,aa=0;for(let m=0;m<P.length;m++){const D=P[m];let Q=null;for(let V=0;V<D.length;V++)Q=D[V],M.push(Q),0===V?aa=Z=Q[0]:(Z=Math.min(Z,Q[0]),aa=Math.max(aa,Q[0]));Q&&M.push([(Z+aa)/2,0])}return M}function B(P,M){if(!(P instanceof E||P instanceof n))throw O.error("straightLineDensify: the input geometry is neither polyline nor polygon"),new K("straightLineDensify: the input geometry is neither polyline nor polygon");var Z=t.getGeometryParts(P);
const aa=[];for(const D of Z){Z=[];aa.push(Z);Z.push([D[0][0],D[0][1]]);for(let Q=0;Q<D.length-1;Q++){const V=D[Q][0],H=D[Q][1],k=D[Q+1][0],d=D[Q+1][1];var m=Math.sqrt((k-V)*(k-V)+(d-H)*(d-H));const C=(d-H)/m,L=(k-V)/m,X=m/M;if(1<X){for(let ba=1;ba<=X-1;ba++){const ia=ba*M;Z.push([L*ia+V,C*ia+H])}m=(m+Math.floor(X-1)*M)/2;Z.push([L*m+V,C*m+H])}Z.push([k,d])}}return"polygon"===P.type?new n({rings:aa,spatialReference:P.spatialReference}):new E({paths:aa,spatialReference:P.spatialReference})}function e(P,
M,Z){M&&(P=B(P,1E6),P=J.webMercatorToGeographic(P,!0));Z&&(P=t.updatePolyGeometry(P,Z));return P}function y(P,M,Z){if(Array.isArray(P)){var aa=P[0];aa>M?(Z=t.offsetMagnitude(aa,M),P[0]=aa+-2*Z*M):aa<Z&&(M=t.offsetMagnitude(aa,Z),P[0]=aa+-2*M*Z)}else aa=P.x,aa>M?(Z=t.offsetMagnitude(aa,M),P=P.clone().offset(-2*Z*M,0)):aa<Z&&(M=t.offsetMagnitude(aa,Z),P=P.clone().offset(-2*M*Z,0));return P}function r(P,M){let Z=-1;for(let aa=0;aa<M.cutIndexes.length;aa++){const m=M.cutIndexes[aa],D=M.geometries[aa],
Q=t.getGeometryParts(D);for(let V=0;V<Q.length;V++){const H=Q[V];H.some(k=>{if(180>k[0])return!0;k=0;for(var d=0;d<H.length;d++){var C=H[d][0];k=C>k?C:k}k=Number(k.toFixed(9));k=-360*t.offsetMagnitude(k,180);for(d=0;d<H.length;d++)C=D.getPoint(V,d),D.setPoint(V,d,C.clone().offset(k,0));return!0})}if(m===Z)if("polygon"===P[0].type)for(const V of t.getGeometryParts(D))P[m]=P[m].addRing(V);else{if("polyline"===P[0].type)for(const V of t.getGeometryParts(D))P[m]=P[m].addPath(V)}else Z=m,P[m]=D}return P}
function G(P,M,Z){return F.apply(this,arguments)}function F(){F=c._asyncToGenerator(function*(P,M,Z){if(!Array.isArray(P))return G([P],M);var aa=M?M.url:x.geometryServiceUrl;let m,D,Q;let V=0;var H=[];M=[];for(var k of P)if(u.isNone(k))M.push(k);else{if(!d){var d=k.spatialReference;var C=v.getInfo(d);var L=(m=d.isWebMercator)?102100:4326;D=t.cutParams[L].maxX;Q=t.cutParams[L].minX;var X=t.cutParams[L].plus180Line;L=t.cutParams[L].minus180Line}if(C)if("mesh"===k.type)M.push(k);else if("point"===k.type)M.push(y(k.clone(),
D,Q));else if("multipoint"===k.type){var ba=k.clone();ba.points=ba.points.map(ia=>y(ia,D,Q));M.push(ba)}else if("extent"===k.type)ba=k.clone()._normalize(!1,!1,C),M.push(ba.rings?new n(ba):ba);else if(k.extent){ba=k.extent;const ia=2*t.offsetMagnitude(ba.xmin,Q)*D;let na=0===ia?k.clone():t.updatePolyGeometry(k.clone(),ia);ba.offset(ia,0);ba.intersects(X)&&ba.xmax!==D?(V=ba.xmax>V?ba.xmax:V,na=e(na,m),H.push(na),M.push("cut")):ba.intersects(L)&&ba.xmin!==Q?(V=2*ba.xmax*D>V?2*ba.xmax*D:V,na=e(na,m,
360),H.push(na),M.push("cut")):M.push(na)}else M.push(k.clone());else M.push(k)}d=t.offsetMagnitude(V,D);C=-90;X=d;for(k=new E;0<d;)L=-180+360*d,k.addPath([[L,C],[L,-1*C]]),C*=-1,d--;if(0<H.length&&0<X){d=yield W.cut(aa,H,k,Z);d=r(H,d);C=[];H=[];for(X=0;X<M.length;X++)k=M[X],"cut"!==k?H.push(k):(k=d.shift(),L=P[X],u.isSome(L)&&"polygon"===L.type&&L.rings&&1<L.rings.length&&k.rings.length>=L.rings.length?(C.push(k),H.push("simplify")):H.push(m?J.geographicToWebMercator(k):k));if(!C.length)return H;
M=yield q.simplify(aa,C,Z);P=[];for(Z=0;Z<H.length;Z++)aa=H[Z],"simplify"!==aa?P.push(aa):P.push(m?J.geographicToWebMercator(M.shift()):M.shift());return P}P=[];for(Z=0;Z<M.length;Z++)aa=M[Z],"cut"!==aa?P.push(aa):(aa=H.shift(),P.push(!0===m?J.geographicToWebMercator(aa):aa));return Promise.resolve(P)});return F.apply(this,arguments)}const O=g.getLogger("esri.geometry.support.normalizeUtils");p.getDenormalizedExtent=function(P){if(!P)return null;const M=P.extent;if(!M)return null;var Z=P.spatialReference&&
v.getInfo(P.spatialReference);if(!Z)return M;const [aa,m]=Z.valid;({width:Z}=M);let {xmin:D,xmax:Q}=M;[D,Q]=[Q,D];if("extent"===P.type||0===Z||Z<=m||Z>2*m||D<aa||Q>m)return M;let V;switch(P.type){case "polygon":if(1<P.rings.length)V=A(P.rings);else return M;break;case "polyline":if(1<P.paths.length)V=A(P.paths);else return M;break;case "multipoint":V=P.points}P=M.clone();for(let H=0;H<V.length;H++){let k=V[H][0];0>k?(k+=m,Q=Math.max(k,Q)):(k-=m,D=Math.min(k,D))}P.xmin=D;P.xmax=Q;return P.width<Z?
(P.xmin-=m,P.xmax-=m,P):M};p.normalizeCentralMeridian=G;p.normalizeMapX=function(P,M){if(M=v.getInfo(M)){const [Z,aa]=M.valid;M=aa-Z;if(P<Z)for(;P<Z;)P+=M;if(P>aa)for(;P>aa;)P-=M}return P};p.straightLineDensify=B;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/geometry/support/normalizeUtilsCommon":function(){define(["exports","../Polyline","../SpatialReference","./jsonUtils"],function(p,c,x,K){function g(n){return K.isPolygon(n)?n.rings:n.paths}const u={102100:{maxX:2.0037508342788905E7,
minX:-2.0037508342788905E7,plus180Line:new c({paths:[[[2.0037508342788905E7,-2.0037508342788905E7],[2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:x.WebMercator}),minus180Line:new c({paths:[[[-2.0037508342788905E7,-2.0037508342788905E7],[-2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:x.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new c({paths:[[[180,-180],[180,180]]],spatialReference:x.WGS84}),minus180Line:new c({paths:[[[-180,-180],[-180,180]]],spatialReference:x.WGS84})}};
p.cutParams=u;p.getGeometryParts=g;p.getSpatialReferenceMinMaxX=function(n){n=(null==n?0:n.isWebMercator)?102100:4326;return[u[n].minX,u[n].maxX]};p.offsetMagnitude=function(n,E){return Math.ceil((n-E)/(2*E))};p.updatePolyGeometry=function(n,E){const t=g(n);for(const v of t)for(const J of v)J[0]+=E;return n};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/tasks/geometry/cut":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../geometry ../../request ../../core/urlUtils ../../geometry/support/jsonUtils".split(" "),
function(p,c,x,K,g,u){function n(){n=c._asyncToGenerator(function*(E,t,v,J){E="string"===typeof E?g.urlToObject(E):E;const W=t[0].spatialReference;t={...J,query:{...E.query,f:"json",sr:JSON.stringify(W),target:JSON.stringify({geometryType:u.getJsonType(t[0]),geometries:t}),cutter:JSON.stringify(v)}};t=yield K(E.path+"/cut",t);const {cutIndexes:q,geometries:A=[]}=t.data;return{cutIndexes:q,geometries:A.map(B=>{B=u.fromJSON(B);B.spatialReference=W;return B})}});return n.apply(this,arguments)}p.cut=
function(E,t,v,J){return n.apply(this,arguments)};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/tasks/geometry/simplify":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../request","../../core/urlUtils","../../geometry/support/jsonUtils"],function(p,c,x,K,g){function u(){u=c._asyncToGenerator(function*(t,v,J){const W="string"===typeof t?K.urlToObject(t):t;t=v[0].spatialReference;const q=g.getJsonType(v[0]);v={...J,query:{...W.query,f:"json",sr:t.wkid?t.wkid:JSON.stringify(t),
geometries:JSON.stringify(n(v))}};v=yield x(W.path+"/simplify",v);return E(v.data,q,t)});return u.apply(this,arguments)}function n(t){return{geometryType:g.getJsonType(t[0]),geometries:t.map(v=>v.toJSON())}}function E(t,v,J){const W=g.getGeometryType(v);return t.map(q=>{q=W.fromJSON(q);q.spatialReference=J;return q})}p.simplify=function(t,v,J){return u.apply(this,arguments)};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/graphics/data/attributeSupport":function(){define(["exports",
"../../../core/Error","../../../core/sql/WhereClauseCache"],function(p,c,x){function K(t,v){return t?n.get(t,v):null}function g(t,v,J,W=!0){const q=[];for(const A of v)if("*"!==A&&!t.has(A))if(W){v=u(A);try{const B=K(v,t);if(!B)throw new c("feature-store:unsupported-query","invalid SQL expression",{where:v});if(!B.isStandardized)throw new c("feature-store:unsupported-query","expression is not standard",{clause:B});g(t,B.fieldNames,"expression contains missing fields")}catch(B){if((v=B&&B.details)&&
(v.clause||v.where))throw B;v&&v.missingFields?q.push(...v.missingFields):q.push(A)}}else q.push(A);if(q.length)throw new c("feature-store:unsupported-query",J,{missingFields:q});}function u(t){return t.split(" as ")[0]}const n=new x.WhereClauseCache(50,500),E=new Set("esriFieldTypeOID esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeLong esriFieldTypeDate".split(" "));p.getAliasFromFieldName=function(t){return t.split(" as ")[1]};p.getExpressionFromFieldName=
u;p.getWhereClause=K;p.hasInvalidFieldType=function(t,v){return(t=v.get(t))?!E.has(t.type):!1};p.validateFields=g;p.validateHaving=function(t,v,J){if(!v)return!0;const W=n.get(v,t);if(!W)throw new c("feature-store:unsupported-query","invalid SQL expression",{having:v});if(!W.isAggregate)throw new c("feature-store:unsupported-query","having does not contain a valid aggregate function",{having:v});g(t,W.fieldNames,"having contains missing fields");if(!W.getExpressions().every(q=>{const {aggregateType:A,
field:B}=q,e=t.has(B)&&t.get(B).name;return J.some(y=>{const {onStatisticField:r,statisticType:G}=y;return(t.has(r)&&t.get(r).name)===e&&G.toLowerCase().trim()===A})}))throw new c("feature-store:unsupported-query","expressions in having should also exist in outStatistics",{having:v});return!0};p.validateWhere=function(t,v){if(!v)return!0;const J=n.get(v,t);if(!J)throw new c("feature-store:unsupported-query","invalid SQL expression",{where:v});if(!J.isStandardized)throw new c("feature-store:unsupported-query",
"where clause is not standard",{where:v});g(t,J.fieldNames,"where clause contains missing fields");return!0};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/core/sql/WhereClauseCache":function(){define(["exports","../ItemCache","./WhereClause"],function(p,c,x){let K=function(){function g(u,n){this._cache=new c(u);this._invalidCache=new c(n)}g.prototype.get=function(u,n){const E=`${n.uid}:${u}`,t=this._cache.get(E);if(t)return t;if(void 0!==this._invalidCache.get(E))return null;try{const v=
x.WhereClause.create(u,n);this._cache.put(E,v);return v}catch{return this._invalidCache.put(E,null),null}};return g}();p.WhereClauseCache=K;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/core/ItemCache":function(){define(["./MemCache"],function(p){return function(){function c(K,g){this._storage=new p.MemCacheStorage;this._storage.maxSize=K;g&&this._storage.registerRemoveFunc("",g)}var x=c.prototype;x.put=function(K,g){this._storage.put(K,g,1,1)};x.pop=function(K){return this._storage.pop(K)};
x.get=function(K){return this._storage.get(K)};x.clear=function(){this._storage.clearAll()};x.destroy=function(){this._storage.destroy()};return c}()})},"esri/core/sql/WhereClause":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../has ./AggregateFunctions ./StandardizedFunctions ./WhereGrammar".split(" "),function(p,c,x,K,g,u){function n(H,k){H+="";return H.length>=k?H:Array(k-H.length+1).join("0")+H}function E(H,k,d="0",C="0",L="0",X="0",ba="",ia="0",na="0"){return"+"===ba||"-"===
ba?(H=`${n(parseInt(H,10),4)}-${n(parseInt(k,10),2)}-${n(parseInt(d,10),2)}`,k="",10>parseFloat(X)&&(k="0"),C=`${n(parseInt(C,10),2)}:${n(parseInt(L,10),2)}:${k+parseFloat(X).toString()}`,ba=`${ba}${n(parseInt(ia,10),2)}:${n(parseInt(na,10),2)}`,new Date(H+"T"+C+ba)):new Date(parseInt(H,10),parseInt(k,10)-1,parseInt(d,10),parseInt(C,10),parseInt(L,10),parseFloat(X))}function t(H){let k=M.exec(H);if(null!==k){const [,d,C,L,X,ba,ia]=k;return E(d,C,L,X,ba,ia)}k=Z.exec(H);if(null!==k){const [,d,C,L,X,
ba,ia,na,ra,wa]=k;return E(d,C,L,X,ba,ia,na,ra,wa)}k=aa.exec(H);if(null!==k){const [,d,C,L,X,ba,ia,na,ra]=k;return E(d,C,L,X,ba,"0",ia,na,ra)}k=m.exec(H);if(null!==k){const [,d,C,L,X,ba]=k;return E(d,C,L,X,ba)}k=P.exec(H);if(null!==k){const [,d,C,L]=k;return E(d,C,L)}throw Error("SQL Invalid Timestamp");}function v(H){H=P.exec(H);if(null===H)throw Error("SQL Invalid Date");const [,k,d,C]=H;return new Date(parseInt(k,10),parseInt(d,10)-1,parseInt(C,10))}function J(H){return Array.isArray(H)?H:[H]}
function W(H){return null!==H?!0!==H:null}function q(H,k){return null!=H&&null!=k?!0===H&&!0===k:!1===H||!1===k?!1:null}function A(H,k){return null!=H&&null!=k?!0===H||!0===k:!0===H||!0===k?!0:null}function B(H,k){if(null==H)return null;let d=!1;for(const C of k)if(null==C)d=null;else if(H===C){d=!0;break}return d}function e(H,k,d){if(null==H)return null;let C="",L=0;for(let X=0;X<k.length;X++){const ba=k.charAt(X);switch(L){case 0:ba===d?L=1:C=0<="-[]/{}()*+?.\\^$|".indexOf(ba)?C+("\\"+ba):"%"===
ba?C+".*":"_"===ba?C+".":C+ba;break;case 1:C=0<="-[]/{}()*+?.\\^$|".indexOf(ba)?C+("\\"+ba):C+ba,L=0}}return(new RegExp("^"+C+"$")).test(H)}function y(H){return H instanceof Date?H.valueOf():H}function r(H,k,d){if(null==k||null==d)return null;k=y(k);d=y(d);switch(H){case "\x3c\x3e":return k!==d;case "\x3d":return k===d;case "\x3e":return k>d;case "\x3c":return k<d;case "\x3e\x3d":return k>=d;case "\x3c\x3d":return k<=d}}function G(H){const k=[],d={};for(const C of H)H=C.toLowerCase(),void 0===d[H]&&
(k.push(C),d[H]=1);return k}function F(H,k,d){if(k instanceof g.SqlInterval)if(d instanceof Date)switch(H){case "+":return new Date(k.valueInMilliseconds()+d.getTime());case "-":return k.valueInMilliseconds()-d.getTime();case "*":return k.valueInMilliseconds()*d.getTime();case "/":return k.valueInMilliseconds()/d.getTime()}else if(d instanceof g.SqlInterval)switch(H){case "+":return g.SqlInterval.createFromMilliseconds(k.valueInMilliseconds()+d.valueInMilliseconds());case "-":return g.SqlInterval.createFromMilliseconds(k.valueInMilliseconds()-
d.valueInMilliseconds());case "*":return k.valueInMilliseconds()*d.valueInMilliseconds();case "/":return k.valueInMilliseconds()/d.valueInMilliseconds()}else k=k.valueInMilliseconds();else if(d instanceof g.SqlInterval)if(k instanceof Date)switch(H){case "+":return new Date(d.valueInMilliseconds()+k.getTime());case "-":return new Date(k.getTime()-d.valueInMilliseconds());case "*":return k.getTime()*d.valueInMilliseconds();case "/":return k.getTime()/d.valueInMilliseconds()}else d=d.valueInMilliseconds();
else if(k instanceof Date&&"number"===typeof d)switch(d*=864E5,k=k.getTime(),H){case "+":return new Date(k+d);case "-":return new Date(k-d);case "*":return new Date(k*d);case "/":return new Date(k/d)}else if(d instanceof Date&&"number"===typeof k)switch(k*=864E5,d=d.getTime(),H){case "+":return new Date(k+d);case "-":return new Date(k-d);case "*":return new Date(k*d);case "/":return new Date(k/d)}switch(H){case "+":return k+d;case "-":return k-d;case "*":return k*d;case "/":return k/d}}function O(H,
k,d,C){H=C.getAttribute(H,k);return null!=H&&1===d[k]?new Date(H):H}const P=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,M=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)$/,Z=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)(\+|\-)(\d{1,2}):(\d{1,2})$/,aa=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})(\+|\-)(\d{1,2}):(\d{1,2})$/,m=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/;let D=function(){function H(){}H.makeBool=function(k){return!0===k};H.featureValue=
function(k,d,C,L){return O(k,d,C,L)};H.equalsNull=function(k){return null===k};H.applyLike=function(k,d,C){return e(k,d,C)};H.ensureArray=function(k){return J(k)};H.applyIn=function(k,d){return B(k,d)};H.currentDate=function(){const k=new Date;k.setHours(0,0,0,0);return k};H.makeSqlInterval=function(k,d,C){return g.SqlInterval.createFromValueAndQualifer(k,d,C)};H.convertInterval=function(k){return k instanceof g.SqlInterval?k.valueInMilliseconds():k};H.currentTimestamp=function(){return new Date};
H.compare=function(k,d,C){return r(k,d,C)};H.calculate=function(k,d,C){return F(k,d,C)};H.makeComparable=function(k){return y(k)};H.evaluateFunction=function(k,d){return g.evaluateFunction(k,d)};H.lookup=function(k,d){k=d[k];return void 0===k?null:k};H.between=function(k,d){return null==k||null==d[0]||null==d[1]?null:k>=d[0]&&k<=d[1]};H.notbetween=function(k,d){return null==k||null==d[0]||null==d[1]?null:k<d[0]||k>d[1]};H.ternaryNot=function(k){return W(k)};H.ternaryAnd=function(k,d){return q(k,d)};
H.ternaryOr=function(k,d){return A(k,d)};return H}(),Q=function(){function H(d,C){this.fieldsIndex=C;this.datefields={};this.parameters={};this.parseTree=u.WhereGrammar.parse(d);const {isStandardized:L,isAggregate:X,referencedFieldNames:ba}=this.extractExpressionInfo(C);this.referencedFieldNames=ba;this.isStandardized=L;this.isAggregate=X}H.create=function(d,C){return new H(d,C)};var k=H.prototype;k.testSet=function(d,C=V){const L={};for(const X of this.fieldNames)L[X]=d.map(ba=>C.getAttribute(ba,
X));return!!this.evaluateNode(this.parseTree,{attributes:L},V)};k.calculateValue=function(d,C=V){d=this.evaluateNode(this.parseTree,d,C);return d instanceof g.SqlInterval?d.valueInMilliseconds()/864E5:d};k.calculateValueCompiled=function(d,C=V){if(null!=this.parseTree._compiledVersion)return this.parseTree._compiledVersion(d,this.parameters,C,this.datefields);if(x("csp-restrictions"))return this.calculateValue(d,C);this.compileMe();return this.parseTree._compiledVersion(d,this.parameters,C,this.datefields)};
k.testFeature=function(d,C=V){return!!this.evaluateNode(this.parseTree,d,C)};k.testFeatureCompiled=function(d,C=V){if(null!=this.parseTree._compiledVersion)return!!this.parseTree._compiledVersion(d,this.parameters,C,this.datefields);if(x("csp-restrictions"))return this.testFeature(d,C);this.compileMe();return!!this.parseTree._compiledVersion(d,this.parameters,C,this.datefields)};k.getFunctions=function(){const d=[];this.visitAll(this.parseTree,C=>{"function"===C.type&&d.push(C.name.toLowerCase())});
return G(d)};k.getExpressions=function(){const d=new Map;this.visitAll(this.parseTree,C=>{if("function"===C.type){const L=C.name.toLowerCase();C=C.args.value[0];if("column_ref"===C.type){C=C.column;const X=`${L}-${C}`;d.has(X)||d.set(X,{aggregateType:L,field:C})}}});return[...d.values()]};k.getVariables=function(){const d=[];this.visitAll(this.parseTree,C=>{"param"===C.type&&d.push(C.value.toLowerCase())});return G(d)};k.compileMe=function(){const d="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+
")";this.parseTree._compiledVersion=(new Function("feature","lookups","attributeAdapter","datefields",d)).bind(D)};k.extractExpressionInfo=function(d){const C=[];let L=!0,X=!0;this.visitAll(this.parseTree,ba=>{switch(ba.type){case "column_ref":{const ia=d.get(ba.column),na=ia&&ia.name;!ia||"date"!==ia.type&&"esriFieldTypeDate"!==ia.type||(this.datefields[ia.name]=1);void 0!==na?(C.push(na),ba.column=na):C.push(ba.column);break}case "function":{const {name:ia,args:na}=ba;ba=na.value.length;L&&(L=g.isStandardized(ia,
ba));X&&(X=K.isAggregate(ia,ba))}}});return{referencedFieldNames:G(C),isStandardized:L,isAggregate:X}};k.visitAll=function(d,C){if(null!=d)switch(C(d),d.type){case "when_clause":this.visitAll(d.operand,C);this.visitAll(d.value,C);break;case "case_expression":for(const L of d.clauses)this.visitAll(L,C);"simple"===d.format&&this.visitAll(d.operand,C);null!==d.else&&this.visitAll(d.else,C);break;case "expr_list":for(const L of d.value)this.visitAll(L,C);break;case "unary_expr":this.visitAll(d.expr,C);
break;case "binary_expr":this.visitAll(d.left,C);this.visitAll(d.right,C);break;case "function":this.visitAll(d.args,C)}};k.evaluateNodeToJavaScript=function(d){switch(d.type){case "interval":return"this.makeSqlInterval("+this.evaluateNodeToJavaScript(d.value)+", "+JSON.stringify(d.qualifier)+","+JSON.stringify(d.op)+")";case "case_expression":var C="";if("simple"===d.format){var L="this.makeComparable("+this.evaluateNodeToJavaScript(d.operand)+")";C="( ";for(let X=0;X<d.clauses.length;X++)C+=" ("+
L+" \x3d\x3d\x3d this.makeComparable("+this.evaluateNodeToJavaScript(d.clauses[X].operand)+")) ? ("+this.evaluateNodeToJavaScript(d.clauses[X].value)+") : "}else for(C="( ",L=0;L<d.clauses.length;L++)C+=" this.makeBool("+this.evaluateNodeToJavaScript(d.clauses[L].operand)+")\x3d\x3d\x3dtrue ? ("+this.evaluateNodeToJavaScript(d.clauses[L].value)+") : ";C=null!==d.else?C+this.evaluateNodeToJavaScript(d.else):C+"null";return C+=" )";case "param":return"this.lookup("+JSON.stringify(d.value.toLowerCase())+
",lookups)";case "expr_list":C="[";for(L of d.value)"["!==C&&(C+=","),C+=this.evaluateNodeToJavaScript(L);return C+="]";case "unary_expr":return"this.ternaryNot("+this.evaluateNodeToJavaScript(d.expr)+")";case "binary_expr":switch(d.operator){case "AND":return"this.ternaryAnd("+this.evaluateNodeToJavaScript(d.left)+","+this.evaluateNodeToJavaScript(d.right)+" )";case "OR":return"this.ternaryOr("+this.evaluateNodeToJavaScript(d.left)+","+this.evaluateNodeToJavaScript(d.right)+" )";case "IS":if("null"!==
d.right.type)throw Error("Unsupported RHS for IS");return"this.equalsNull("+this.evaluateNodeToJavaScript(d.left)+")";case "ISNOT":if("null"!==d.right.type)throw Error("Unsupported RHS for IS");return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(d.left)+")))";case "IN":return"this.applyIn("+this.evaluateNodeToJavaScript(d.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(d.right)+"))";case "NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(d.left)+",this.ensureArray("+
this.evaluateNodeToJavaScript(d.right)+")))";case "BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(d.left)+","+this.evaluateNodeToJavaScript(d.right)+")";case "NOTBETWEEN":return"this.notbetween("+this.evaluateNodeToJavaScript(d.left)+","+this.evaluateNodeToJavaScript(d.right)+")";case "LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(d.left)+","+this.evaluateNodeToJavaScript(d.right)+","+JSON.stringify(d.escape)+")";case "NOT LIKE":return"this.ternaryNot(this.applyLike("+
this.evaluateNodeToJavaScript(d.left)+","+this.evaluateNodeToJavaScript(d.right)+","+JSON.stringify(d.escape)+"))";case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return"this.compare("+JSON.stringify(d.operator)+","+this.evaluateNodeToJavaScript(d.left)+","+this.evaluateNodeToJavaScript(d.right)+")";case "*":case "-":case "+":case "/":return"this.calculate("+JSON.stringify(d.operator)+","+this.evaluateNodeToJavaScript(d.left)+","+this.evaluateNodeToJavaScript(d.right)+
")"}throw Error("Not Supported Operator "+d.operator);case "null":case "bool":case "string":case "number":return JSON.stringify(d.value);case "date":return"(new Date("+v(d.value).getTime().toString()+"))";case "timestamp":return"(new Date("+t(d.value).getTime().toString()+"))";case "current_time":return"date"===d.mode?"this.currentDate()":"this.currentTimestamp()";case "column_ref":return"this.featureValue(feature,"+JSON.stringify(d.column)+",datefields,attributeAdapter)";case "function":return"this.evaluateFunction("+
JSON.stringify(d.name)+","+this.evaluateNodeToJavaScript(d.args)+")"}throw Error("Unsupported sql syntax "+d.type);};k.evaluateNode=function(d,C,L){switch(d.type){case "interval":return C=this.evaluateNode(d.value,C,L),g.SqlInterval.createFromValueAndQualifer(C,d.qualifier,d.op);case "case_expression":if("simple"===d.format){var X=y(this.evaluateNode(d.operand,C,L));for(var ba=0;ba<d.clauses.length;ba++)if(X===y(this.evaluateNode(d.clauses[ba].operand,C,L)))return this.evaluateNode(d.clauses[ba].value,
C,L)}else for(X=0;X<d.clauses.length;X++)if(!0===this.evaluateNode(d.clauses[X].operand,C,L))return this.evaluateNode(d.clauses[X].value,C,L);return null!==d.else?this.evaluateNode(d.else,C,L):null;case "param":return this.parameters[d.value.toLowerCase()];case "expr_list":X=[];for(ba of d.value)X.push(this.evaluateNode(ba,C,L));return X;case "unary_expr":return W(this.evaluateNode(d.expr,C,L));case "binary_expr":switch(d.operator){case "AND":return q(this.evaluateNode(d.left,C,L),this.evaluateNode(d.right,
C,L));case "OR":return A(this.evaluateNode(d.left,C,L),this.evaluateNode(d.right,C,L));case "IS":if("null"!==d.right.type)throw Error("Unsupported RHS for IS");return null===this.evaluateNode(d.left,C,L);case "ISNOT":if("null"!==d.right.type)throw Error("Unsupported RHS for IS");return null!==this.evaluateNode(d.left,C,L);case "IN":return X=J(this.evaluateNode(d.right,C,L)),B(this.evaluateNode(d.left,C,L),X);case "NOT IN":return X=J(this.evaluateNode(d.right,C,L)),W(B(this.evaluateNode(d.left,C,L),
X));case "BETWEEN":return X=this.evaluateNode(d.left,C,L),d=this.evaluateNode(d.right,C,L),null==X||null==d[0]||null==d[1]?null:X>=y(d[0])&&X<=y(d[1]);case "NOTBETWEEN":return X=this.evaluateNode(d.left,C,L),d=this.evaluateNode(d.right,C,L),null==X||null==d[0]||null==d[1]?null:X<y(d[0])||X>y(d[1]);case "LIKE":return e(this.evaluateNode(d.left,C,L),this.evaluateNode(d.right,C,L),d.escape);case "NOT LIKE":return W(e(this.evaluateNode(d.left,C,L),this.evaluateNode(d.right,C,L),d.escape));case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return r(d.operator,
this.evaluateNode(d.left,C,L),this.evaluateNode(d.right,C,L));case "-":case "+":case "*":case "/":return F(d.operator,this.evaluateNode(d.left,C,L),this.evaluateNode(d.right,C,L))}case "null":case "bool":case "string":case "number":return d.value;case "date":return v(d.value);case "timestamp":return t(d.value);case "current_time":return C=new Date,"date"===d.mode&&C.setHours(0,0,0,0),C;case "column_ref":return O(C,d.column,this.datefields,L);case "function":return C=this.evaluateNode(d.args,C,L),
this.isAggregate?K.aggregateFunction(d.name,C):g.evaluateFunction(d.name,C)}throw Error("Unsupported sql syntax "+d.type);};c._createClass(H,[{key:"fieldNames",get:function(){return this.referencedFieldNames}}]);return H}();const V={getAttribute(H,k){return(H&&"object"===typeof H.attributes?H.attributes:H)[k]}};p.WhereClause=Q;p.defaultAttributeAdapter=V;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/core/sql/AggregateFunctions":function(){define(["exports"],function(p){function c(g){let u=
0;for(let n=0;n<g.length;n++)u+=g[n];return u/g.length}function x(g){const u=c(g),n=g.length;let E=0;for(const t of g)E+=(t-u)**2;return 1<n?E/(n-1):0}const K={min:{minParams:1,maxParams:1,evaluate:g=>null==g[0]?null:Math.min.apply(Math,g[0])},max:{minParams:1,maxParams:1,evaluate:g=>null==g[0]?null:Math.max.apply(Math,g[0])},avg:{minParams:1,maxParams:1,evaluate:g=>null==g[0]?null:c(g[0])},sum:{minParams:1,maxParams:1,evaluate:g=>{if(null==g[0])g=null;else{{g=g[0];let u=0;for(let n=0;n<g.length;n++)u+=
g[n];g=u}}return g}},stddev:{minParams:1,maxParams:1,evaluate:g=>null==g[0]?null:Math.sqrt(x(g[0]))},count:{minParams:1,maxParams:1,evaluate:g=>null==g[0]?null:g[0].length},var:{minParams:1,maxParams:1,evaluate:g=>null==g[0]?null:x(g[0])}};p.aggregateFunction=function(g,u){const n=K[g.toLowerCase()];if(null==n)throw Error("Function Not Recognised");if(u.length<n.minParams||u.length>n.maxParams)throw Error(`Invalid Parameter count for call to ${g.toUpperCase()}`);return n.evaluate(u)};p.isAggregate=
function(g,u){g=K[g.toLowerCase()];return null!=g&&u>=g.minParams&&u<=g.maxParams};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/core/sql/StandardizedFunctions":function(){define(["exports","../string"],function(p,c){let x=function(){function g(){this.op="+";this.minute=this.year=this.month=this.hour=this.second=this.day=0}g.fixDefaults=function(u){if(null!==u.precision||null!==u.secondary)throw Error("Primary and Secondary SqlInterval qualifiers not supported");};g.createFromMilliseconds=
function(u){const n=new g;n.second=u/1E3;return n};g.createFromValueAndQualifer=function(u,n,E){let t=null;const v=new g;v.op="-"===E?"-":"+";if("interval-period"===n.type){g.fixDefaults(n);if("year"===n.period||"month"===n.period)throw Error("Year-Month Intervals not supported");if(/^[0-9]{1,}$/.test(u))v[n.period]=parseFloat(u);else throw Error("Illegal Interval");}else{g.fixDefaults(n.start);g.fixDefaults(n.end);if("year"===n.start.period||"month"===n.start.period)throw Error("Year-Month Intervals not supported");
if("year"===n.end.period||"month"===n.end.period)throw Error("Year-Month Intervals not supported");switch(n.start.period){case "day":switch(n.end.period){case "hour":t=/^[0-9]{1,} [0-9]{1,}$/;if(t.test(u))v[n.start.period]=parseFloat(u.split(" ")[0]),v[n.end.period]=parseFloat(u.split(" ")[1]);else throw Error("Illegal Interval");break;case "minute":t=/^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$/;if(t.test(u))v[n.start.period]=parseFloat(u.split(" ")[0]),u=u.split(" ")[1].split(":"),v.hour=parseFloat(u[0]),
v.minute=parseFloat(u[1]);else throw Error("Illegal Interval");break;case "second":t=/^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(t.test(u))v[n.start.period]=parseFloat(u.split(" ")[0]),u=u.split(" ")[1].split(":"),v.hour=parseFloat(u[0]),v.minute=parseFloat(u[1]),v.second=parseFloat(u[2]);else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;case "hour":switch(n.end.period){case "minute":t=/^[0-9]{1,}:[0-9]{1,}$/;if(t.test(u))v.hour=parseFloat(u.split(":")[0]),
v.minute=parseFloat(u.split(":")[1]);else throw Error("Illegal Interval");break;case "second":t=/^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(t.test(u))u=u.split(":"),v.hour=parseFloat(u[0]),v.minute=parseFloat(u[1]),v.second=parseFloat(u[2]);else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;case "minute":switch(n.end.period){case "second":t=/^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(t.test(u))u=u.split(":"),v.minute=parseFloat(u[0]),v.second=parseFloat(u[1]);
else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;default:throw"Invalid Interval.";}}return v};g.prototype.valueInMilliseconds=function(){return("-"===this.op?-1:1)*(1E3*this.second+6E4*this.minute+36E5*this.hour+864E5*this.day+365/12*this.month*864E5+31536E6*this.year)};return g}();const K={extract:{minParams:2,maxParams:2,evaluate:([g,u])=>{if(null==u)return null;if(u instanceof Date)switch(g.toUpperCase()){case "SECOND":return u.getSeconds();case "MINUTE":return u.getMinutes();
case "HOUR":return u.getHours();case "DAY":return u.getDate();case "MONTH":return u.getMonth()+1;case "YEAR":return u.getFullYear()}throw Error("Invalid Parameter for call to EXTRACT");}},substring:{minParams:2,maxParams:3,evaluate:g=>{if(2===g.length){const [u,n]=g;return null==u||null==n?null:u.toString().substring(n-1)}if(3===g.length){const [u,n,E]=g;return null==u||null==n||null==E?null:0>=E?"":u.toString().substring(n-1,n+E-1)}}},position:{minParams:2,maxParams:2,evaluate:([g,u])=>null==g||
null==u?null:u.indexOf(g)+1},trim:{minParams:2,maxParams:3,evaluate:g=>{var u=3===g.length,n=u?g[1]:" ";u=u?g[2]:g[1];if(null==n||null==u)return null;n=`(${c.escapeRegExpString(n)})`;switch(g[0]){case "BOTH":return u.replace(new RegExp(`^${n}*|${n}*$`,"g"),"");case "LEADING":return u.replace(new RegExp(`^${n}*`,"g"),"");case "TRAILING":return u.replace(new RegExp(`${n}*$`,"g"),"")}throw Error("Invalid Parameter for call to TRIM");}},abs:{minParams:1,maxParams:1,evaluate:g=>null==g[0]?null:Math.abs(g[0])},
ceiling:{minParams:1,maxParams:1,evaluate:g=>null==g[0]?null:Math.ceil(g[0])},floor:{minParams:1,maxParams:1,evaluate:g=>null==g[0]?null:Math.floor(g[0])},log:{minParams:1,maxParams:1,evaluate:g=>null==g[0]?null:Math.log(g[0])},log10:{minParams:1,maxParams:1,evaluate:g=>null==g[0]?null:Math.log(g[0])*Math.LOG10E},sin:{minParams:1,maxParams:1,evaluate:g=>null==g[0]?null:Math.sin(g[0])},cos:{minParams:1,maxParams:1,evaluate:g=>null==g[0]?null:Math.cos(g[0])},tan:{minParams:1,maxParams:1,evaluate:g=>
null==g[0]?null:Math.tan(g[0])},asin:{minParams:1,maxParams:1,evaluate:g=>null==g[0]?null:Math.asin(g[0])},acos:{minParams:1,maxParams:1,evaluate:g=>null==g[0]?null:Math.acos(g[0])},atan:{minParams:1,maxParams:1,evaluate:g=>null==g[0]?null:Math.atan(g[0])},sign:{minParams:1,maxParams:1,evaluate:g=>null==g[0]?null:0<g[0]?1:0>g[1]?-1:0},power:{minParams:2,maxParams:2,evaluate:g=>null==g[0]||null==g[1]?null:g[0]**g[1]},mod:{minParams:2,maxParams:2,evaluate:g=>null==g[0]||null==g[1]?null:g[0]%g[1]},round:{minParams:1,
maxParams:2,evaluate:g=>{const u=g[0];g=2===g.length?10**g[1]:1;return null==u?null:Math.round(u*g)/g}},truncate:{minParams:1,maxParams:2,evaluate:g=>null==g[0]?null:1===g.length?parseInt(g[0].toFixed(0),10):parseFloat(g[0].toFixed(g[1]))},char_length:{minParams:1,maxParams:1,evaluate:g=>"string"===typeof g[0]||g[0]instanceof String?g[0].length:0},concat:{minParams:1,maxParams:Infinity,evaluate:g=>{let u="";for(let n=0;n<g.length;n++){if(null==g[n])return null;u+=g[n].toString()}return u}},lower:{minParams:1,
maxParams:1,evaluate:g=>null==g[0]?null:g[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:g=>null==g[0]?null:g[0].toString().toUpperCase()}};p.SqlInterval=x;p.evaluateFunction=function(g,u){const n=K[g.toLowerCase()];if(null==n)throw Error("Function Not Recognised");if(u.length<n.minParams||u.length>n.maxParams)throw Error(`Invalid Parameter count for call to ${g.toUpperCase()}`);return n.evaluate(u)};p.isStandardized=function(g,u){g=K[g.toLowerCase()];return null!=g&&u>=g.minParams&&
u<=g.maxParams};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/core/sql/WhereGrammar":function(){define(["exports","../../chunks/_commonjsHelpers"],function(p,c){var x={exports:{}};(function(g){(function(u,n){g.exports&&(g.exports=n())})(c.commonjsGlobal,function(){function u(n,E,t,v){this.message=n;this.expected=E;this.found=t;this.location=v;this.name="SyntaxError";"function"===typeof Error.captureStackTrace&&Error.captureStackTrace(this,u)}(function(n,E){function t(){this.constructor=
n}t.prototype=E.prototype;n.prototype=new t})(u,Error);u.buildMessage=function(n,E){function t(q){return q.charCodeAt(0).toString(16).toUpperCase()}function v(q){return q.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(A){return"\\x0"+t(A)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(A){return"\\x"+t(A)})}function J(q){return q.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,
"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(A){return"\\x0"+t(A)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(A){return"\\x"+t(A)})}var W={literal:function(q){return'"'+v(q.text)+'"'},"class":function(q){var A="",B;for(B=0;B<q.parts.length;B++)A+=q.parts[B]instanceof Array?J(q.parts[B][0])+"-"+J(q.parts[B][1]):J(q.parts[B]);return"["+(q.inverted?"^":"")+A+"]"},any:function(q){return"any character"},end:function(q){return"end of input"},
other:function(q){return q.description}};return"Expected "+function(q){var A=Array(q.length),B;for(B=0;B<q.length;B++){var e=B;var y=q[B];y=W[y.type](y);A[e]=y}A.sort();if(0<A.length){for(q=B=1;B<A.length;B++)A[B-1]!==A[B]&&(A[q]=A[B],q++);A.length=q}switch(A.length){case 1:return A[0];case 2:return A[0]+" or "+A[1];default:return A.slice(0,-1).join(", ")+", or "+A[A.length-1]}}(n)+" but "+(E?'"'+v(E)+'"':"end of input")+" found."};return{SyntaxError:u,parse:function(n,E){function t(z,U){return{type:"literal",
text:z,ignoreCase:U}}function v(z,U,T){return{type:"class",parts:z,inverted:U,ignoreCase:T}}function J(z){var U=$b[z],T;if(!U){for(T=z-1;!$b[T];)T--;U=$b[T];for(U={line:U.line,column:U.column};T<z;)10===n.charCodeAt(T)?(U.line++,U.column=1):U.column++,T++;$b[z]=U}return U}function W(z,U){var T=J(z),da=J(U);return{start:{offset:z,line:T.line,column:T.column},end:{offset:U,line:da.line,column:da.column}}}function q(z){f<sb||(f>sb&&(sb=f,pc=[]),pc.push(z))}function A(){var z=f;var U=pa();if(U!==a)if(U=
e(),U!==a){var T=pa();T!==a?z=U:(f=z,z=a)}else f=z,z=a;else f=z,z=a;return z}function B(){var z=f;var U=e();if(U!==a){var T=[];var da=f;var ta=pa();if(ta!==a){var Da=Fa();if(Da!==a){var Ja=pa();if(Ja!==a){var Qa=e();Qa!==a?da=ta=[ta,Da,Ja,Qa]:(f=da,da=a)}else f=da,da=a}else f=da,da=a}else f=da,da=a;for(;da!==a;)T.push(da),da=f,ta=pa(),ta!==a?(Da=Fa(),Da!==a?(Ja=pa(),Ja!==a?(Qa=e(),Qa!==a?da=ta=[ta,Da,Ja,Qa]:(f=da,da=a)):(f=da,da=a)):(f=da,da=a)):(f=da,da=a);if(T!==a){z={type:"expr_list"};U=[U];for(da=
0;da<T.length;da++)U.push(T[da][3]);z.value=U}else f=z,z=a}else f=z,z=a;return z}function e(){var z=f;var U=y();if(U!==a){var T=[];var da=f;var ta=pa();if(ta!==a){var Da=R();if(Da!==a){var Ja=pa();if(Ja!==a){var Qa=y();Qa!==a?da=ta=[ta,Da,Ja,Qa]:(f=da,da=a)}else f=da,da=a}else f=da,da=a}else f=da,da=a;for(;da!==a;)T.push(da),da=f,ta=pa(),ta!==a?(Da=R(),Da!==a?(Ja=pa(),Ja!==a?(Qa=y(),Qa!==a?da=ta=[ta,Da,Ja,Qa]:(f=da,da=a)):(f=da,da=a)):(f=da,da=a)):(f=da,da=a);T!==a?z=U=fb(U,T):(f=z,z=a)}else f=z,
z=a;return z}function y(){var z=f;var U=r();if(U!==a){var T=[];var da=f;var ta=pa();if(ta!==a){var Da=w();if(Da!==a){var Ja=pa();if(Ja!==a){var Qa=r();Qa!==a?da=ta=[ta,Da,Ja,Qa]:(f=da,da=a)}else f=da,da=a}else f=da,da=a}else f=da,da=a;for(;da!==a;)T.push(da),da=f,ta=pa(),ta!==a?(Da=w(),Da!==a?(Ja=pa(),Ja!==a?(Qa=r(),Qa!==a?da=ta=[ta,Da,Ja,Qa]:(f=da,da=a)):(f=da,da=a)):(f=da,da=a)):(f=da,da=a);T!==a?z=U=fb(U,T):(f=z,z=a)}else f=z,z=a;return z}function r(){var z=f;var U=h();if(U===a){U=f;if(33===n.charCodeAt(f)){var T=
Ua;f++}else T=a,0===qa&&q(Ta);if(T!==a){var da=f;qa++;if(61===n.charCodeAt(f)){var ta=jb;f++}else ta=a,0===qa&&q(tb);qa--;ta===a?da=void 0:(f=da,da=a);da!==a?U=T=[T,da]:(f=U,U=a)}else f=U,U=a}U!==a?(T=pa(),T!==a?(da=r(),da!==a?z=U={type:"unary_expr",operator:"NOT",expr:da}:(f=z,z=a)):(f=z,z=a)):(f=z,z=a);if(z===a)if(z=f,U=P(),U!==a)if(T=pa(),T!==a){T=[];da=f;ta=pa();if(ta!==a){var Da=G();if(Da!==a){var Ja=pa();if(Ja!==a){var Qa=P();Qa!==a?da=ta=[ta,Da,Ja,Qa]:(f=da,da=a)}else f=da,da=a}else f=da,da=
a}else f=da,da=a;if(da!==a)for(;da!==a;)T.push(da),da=f,ta=pa(),ta!==a?(Da=G(),Da!==a?(Ja=pa(),Ja!==a?(Qa=P(),Qa!==a?da=ta=[ta,Da,Ja,Qa]:(f=da,da=a)):(f=da,da=a)):(f=da,da=a)):(f=da,da=a);else T=a;T!==a&&(T={type:"arithmetic",tail:T});T===a&&(T=f,da=O(),da!==a?(ta=pa(),ta!==a?(ta=Ga(),ta!==a?(ta=pa(),ta!==a?(ta=B(),ta!==a?(Da=pa(),Da!==a?(Da=Ka(),Da!==a?T=da={op:da,right:ta}:(f=T,T=a)):(f=T,T=a)):(f=T,T=a)):(f=T,T=a)):(f=T,T=a)):(f=T,T=a)):(f=T,T=a),T===a&&(T=f,da=O(),da!==a?(ta=pa(),ta!==a?(ta=Ga(),
ta!==a?(ta=pa(),ta!==a?(ta=Ka(),ta!==a?T=da={op:da,right:{type:"expr_list",value:[]}}:(f=T,T=a)):(f=T,T=a)):(f=T,T=a)):(f=T,T=a)):(f=T,T=a),T===a&&(T=f,da=O(),da!==a?(ta=pa(),ta!==a?(ta=k(),ta!==a?T=da={op:da,right:ta}:(f=T,T=a)):(f=T,T=a)):(f=T,T=a))),T===a&&(T=f,ta=h(),ta!==a?(da=pa(),da!==a?(da=S(),da!==a?(Da=pa(),Da!==a?(Da=P(),Da!==a?(Ja=pa(),Ja!==a?(Ja=w(),Ja!==a?(ta=pa(),ta!==a?(ta=P(),ta!==a?T=ta={op:"NOT"+da,right:{type:"expr_list",value:[Da,ta]}}:(f=T,T=a)):(f=T,T=a)):(f=T,T=a)):(f=T,T=
a)):(f=T,T=a)):(f=T,T=a)):(f=T,T=a)):(f=T,T=a)):(f=T,T=a),T===a&&(T=f,ta=S(),ta!==a?(da=pa(),da!==a?(da=P(),da!==a?(Da=pa(),Da!==a?(Da=w(),Da!==a?(Ja=pa(),Ja!==a?(Ja=P(),Ja!==a?T=ta={op:ta,right:{type:"expr_list",value:[da,Ja]}}:(f=T,T=a)):(f=T,T=a)):(f=T,T=a)):(f=T,T=a)):(f=T,T=a)):(f=T,T=a)):(f=T,T=a)),T===a&&(T=f,da=b(),da!==a?(ta=pa(),ta!==a?(ta=h(),ta!==a?(ta=pa(),ta!==a?(ta=P(),ta!==a?T=da={op:da+"NOT",right:ta}:(f=T,T=a)):(f=T,T=a)):(f=T,T=a)):(f=T,T=a)):(f=T,T=a),T===a&&(T=f,da=b(),da!==a?
(ta=pa(),ta!==a?(ta=P(),ta!==a?T=da={op:da,right:ta}:(f=T,T=a)):(f=T,T=a)):(f=T,T=a)),T===a&&(T=f,da=F(),da!==a?(ta=pa(),ta!==a?(ta=ia(),ta!==a?(Da=pa(),Da!==a?(Da=f,n.substr(f,6).toLowerCase()===ud?(Ja=n.substr(f,6),f+=6):(Ja=a,0===qa&&q(vd)),Ja!==a?(Ja=f,qa++,Qa=V(),qa--,Qa===a?Ja=void 0:(f=Ja,Ja=a),Ja!==a?Da="ESCAPE":(f=Da,Da=a)):(f=Da,Da=a),Da!==a?(Da=pa(),Da!==a?(Da=na(),Da!==a?T=da={op:da,right:ta,escape:Da.value}:(f=T,T=a)):(f=T,T=a)):(f=T,T=a)):(f=T,T=a)):(f=T,T=a)):(f=T,T=a)):(f=T,T=a),T===
a&&(T=f,da=F(),da!==a?(ta=pa(),ta!==a?(ta=ia(),ta!==a?T=da={op:da,right:ta,escape:""}:(f=T,T=a)):(f=T,T=a)):(f=T,T=a))))));T===a&&(T=null);T!==a?(z=U,U=T,""==U||void 0==U||null==U?U=z:(T=null,U=T="arithmetic"==U.type?fb(z,U.tail):gb(U.op,z,U.right,U.escape)),z=U):(f=z,z=a)}else f=z,z=a;else f=z,z=a;return z}function G(){if(n.substr(f,2)===Ra){var z=Ra;f+=2}else z=a,0===qa&&q(Bb);z===a&&(62===n.charCodeAt(f)?(z=ea,f++):(z=a,0===qa&&q(ha)),z===a&&(n.substr(f,2)===fa?(z=fa,f+=2):(z=a,0===qa&&q(la)),
z===a&&(n.substr(f,2)===xa?(z=xa,f+=2):(z=a,0===qa&&q(Aa)),z===a&&(60===n.charCodeAt(f)?(z=Ma,f++):(z=a,0===qa&&q(Pa)),z===a&&(61===n.charCodeAt(f)?(z=jb,f++):(z=a,0===qa&&q(tb)),z===a&&(n.substr(f,2)===$a?(z=$a,f+=2):(z=a,0===qa&&q(ab))))))));return z}function F(){var z=z=f;var U=h();if(U!==a){var T=pa();if(T!==a){var da=l();da!==a?z=U=[U,T,da]:(f=z,z=a)}else f=z,z=a}else f=z,z=a;z!==a&&(z=z[0]+" "+z[2]);z===a&&(z=l());return z}function O(){var z=z=f;var U=h();if(U!==a){var T=pa();if(T!==a){var da=
ka();da!==a?z=U=[U,T,da]:(f=z,z=a)}else f=z,z=a}else f=z,z=a;z!==a&&(z=z[0]+" "+z[2]);z===a&&(z=ka());return z}function P(){var z=f;var U=Z();if(U!==a){var T=[];var da=f;var ta=pa();if(ta!==a){var Da=M();if(Da!==a){var Ja=pa();if(Ja!==a){var Qa=Z();Qa!==a?da=ta=[ta,Da,Ja,Qa]:(f=da,da=a)}else f=da,da=a}else f=da,da=a}else f=da,da=a;for(;da!==a;)T.push(da),da=f,ta=pa(),ta!==a?(Da=M(),Da!==a?(Ja=pa(),Ja!==a?(Qa=Z(),Qa!==a?da=ta=[ta,Da,Ja,Qa]:(f=da,da=a)):(f=da,da=a)):(f=da,da=a)):(f=da,da=a);T!==a?z=
U=fb(U,T):(f=z,z=a)}else f=z,z=a;return z}function M(){if(43===n.charCodeAt(f)){var z=Va;f++}else z=a,0===qa&&q(hb);z===a&&(45===n.charCodeAt(f)?(z=lb,f++):(z=a,0===qa&&q(qc)));return z}function Z(){var z=f;var U=m();if(U!==a){var T=[];var da=f;var ta=pa();if(ta!==a){var Da=aa();if(Da!==a){var Ja=pa();if(Ja!==a){var Qa=m();Qa!==a?da=ta=[ta,Da,Ja,Qa]:(f=da,da=a)}else f=da,da=a}else f=da,da=a}else f=da,da=a;for(;da!==a;)T.push(da),da=f,ta=pa(),ta!==a?(Da=aa(),Da!==a?(Ja=pa(),Ja!==a?(Qa=m(),Qa!==a?da=
ta=[ta,Da,Ja,Qa]:(f=da,da=a)):(f=da,da=a)):(f=da,da=a)):(f=da,da=a);T!==a?z=U=fb(U,T):(f=z,z=a)}else f=z,z=a;return z}function aa(){if(42===n.charCodeAt(f)){var z=wd;f++}else z=a,0===qa&&q(xd);z===a&&(47===n.charCodeAt(f)?(z=yd,f++):(z=a,0===qa&&q(zd)));return z}function m(){var z=na();if(z===a){var U=f;var T=f;var da=Ia();if(da!==a){var ta=Ha();if(ta!==a){var Da=La();Da!==a?T=da=parseFloat(da+ta+Da):(f=T,T=a)}else f=T,T=a}else f=T,T=a;T===a&&(T=f,da=Ia(),da!==a?(ta=Ha(),ta!==a?T=da=parseFloat(da+
ta):(f=T,T=a)):(f=T,T=a),T===a&&(T=f,da=Ia(),da!==a?(ta=La(),ta!==a?T=da=parseFloat(da+ta):(f=T,T=a)):(f=T,T=a),T===a&&(T=f,da=Ia(),da!==a&&(da=parseFloat(da)),T=da)));var Ja=T;if(Ja!==a){var Qa=f;qa++;var Ad=Q();qa--;Ad===a?Qa=void 0:(f=Qa,Qa=a);Qa!==a?U=Ja={type:"number",value:Ja}:(f=U,U=a)}else f=U,U=a;z=U;if(z===a){var Mb=f;var Cb=f;if(n.substr(f,4).toLowerCase()===Bd){var ac=n.substr(f,4);f+=4}else ac=a,0===qa&&q(Cd);if(ac!==a){var Nb=f;qa++;var Dd=V();qa--;Dd===a?Nb=void 0:(f=Nb,Nb=a);Nb!==
a?Cb=ac=[ac,Nb]:(f=Cb,Cb=a)}else f=Cb,Cb=a;var yb=Cb;yb!==a&&(yb={type:"bool",value:!0});Mb=yb;if(Mb===a){Mb=f;var Db=f;if(n.substr(f,5).toLowerCase()===Ed){var bc=n.substr(f,5);f+=5}else bc=a,0===qa&&q(Fd);if(bc!==a){var Ob=f;qa++;var Gd=V();qa--;Gd===a?Ob=void 0:(f=Ob,Ob=a);Ob!==a?Db=bc=[bc,Ob]:(f=Db,Db=a)}else f=Db,Db=a;yb=Db;yb!==a&&(yb={type:"bool",value:!1});Mb=yb}z=Mb;if(z===a){var Eb=f;if(n.substr(f,4).toLowerCase()===Hd){var cc=n.substr(f,4);f+=4}else cc=a,0===qa&&q(Id);if(cc!==a){var Pb=
f;qa++;var Jd=V();qa--;Jd===a?Pb=void 0:(f=Pb,Pb=a);Pb!==a?Eb=cc=[cc,Pb]:(f=Eb,Eb=a)}else f=Eb,Eb=a;var rc=Eb;rc!==a&&(rc={type:"null",value:null});z=rc;if(z===a){var wb=f;var Fb=f;if(n.substr(f,4).toLowerCase()===Kd){var sc=n.substr(f,4);f+=4}else sc=a,0===qa&&q(Ld);if(sc!==a){var dc=f;qa++;var Md=V();qa--;Md===a?dc=void 0:(f=dc,dc=a);dc!==a?Fb=sc="DATE":(f=Fb,Fb=a)}else f=Fb,Fb=a;var Rc=Fb;if(Rc!==a){var Nd=pa();if(Nd!==a){var Sc=ia();Sc!==a?wb=Rc={type:"date",value:Sc.value}:(f=wb,wb=a)}else f=
wb,wb=a}else f=wb,wb=a;z=wb;if(z===a){var xb=f;var Gb=f;if(n.substr(f,9).toLowerCase()===Od){var tc=n.substr(f,9);f+=9}else tc=a,0===qa&&q(Pd);if(tc!==a){var ec=f;qa++;var Qd=V();qa--;Qd===a?ec=void 0:(f=ec,ec=a);ec!==a?Gb=tc="TIMESTAMP":(f=Gb,Gb=a)}else f=Gb,Gb=a;var Tc=Gb;if(Tc!==a){var Rd=pa();if(Rd!==a){var Uc=ia();Uc!==a?xb=Tc={type:"timestamp",value:Uc.value}:(f=xb,xb=a)}else f=xb,xb=a}else f=xb,xb=a;z=xb;if(z===a){var Xa=f;var Qb=Y();if(Qb!==a){var uc=pa();if(uc!==a){if(45===n.charCodeAt(f)){var ub=
lb;f++}else ub=a,0===qa&&q(qc);ub===a&&(43===n.charCodeAt(f)?(ub=Va,f++):(ub=a,0===qa&&q(hb)));if(ub!==a){var vc=pa();if(vc!==a){var Rb=ia();if(Rb!==a){var Sd=pa();if(Sd!==a){var Vc=C();Vc!==a?Xa=Qb={type:"interval",value:Rb,qualifier:Vc,op:ub}:(f=Xa,Xa=a)}else f=Xa,Xa=a}else f=Xa,Xa=a}else f=Xa,Xa=a}else f=Xa,Xa=a}else f=Xa,Xa=a}else f=Xa,Xa=a;Xa===a&&(Xa=f,Qb=Y(),Qb!==a?(uc=pa(),uc!==a?(ub=ia(),ub!==a?(vc=pa(),vc!==a?(Rb=C(),Rb!==a?Xa=Qb={type:"interval",value:ub,qualifier:Rb,op:""}:(f=Xa,Xa=a)):
(f=Xa,Xa=a)):(f=Xa,Xa=a)):(f=Xa,Xa=a)):(f=Xa,Xa=a));z=Xa}}}}}}var Wa=z;if(Wa===a){var db=f;var Hb=f;if(n.substr(f,7).toLowerCase()===Td){var wc=n.substr(f,7);f+=7}else wc=a,0===qa&&q(Ud);if(wc!==a){var fc=f;qa++;var Vd=V();qa--;Vd===a?fc=void 0:(f=fc,fc=a);fc!==a?Hb=wc="EXTRACT":(f=Hb,Hb=a)}else f=Hb,Hb=a;var Wc=Hb;if(Wc!==a){var Wd=pa();if(Wd!==a){var Xd=Ga();if(Xd!==a){var Yd=pa();if(Yd!==a){var pb=ca();pb===a&&(pb=ja(),pb===a&&(pb=ma(),pb===a&&(pb=sa(),pb===a&&(pb=va(),pb===a&&(pb=za())))));var Xc=
pb;if(Xc!==a){var Zd=pa();if(Zd!==a){var $d=I();if($d!==a){var ae=pa();if(ae!==a){var Yc=e();if(Yc!==a){var be=pa();if(be!==a){var ce=Ka();ce!==a?db=Wc={type:"function",name:"extract",args:{type:"expr_list",value:[{type:"string",value:Xc},Yc]}}:(f=db,db=a)}else f=db,db=a}else f=db,db=a}else f=db,db=a}else f=db,db=a}else f=db,db=a}else f=db,db=a}else f=db,db=a}else f=db,db=a}else f=db,db=a}else f=db,db=a;Wa=db;if(Wa===a){var bb=f;var Ib=f;if(n.substr(f,9).toLowerCase()===de){var xc=n.substr(f,9);f+=
9}else xc=a,0===qa&&q(ee);if(xc!==a){var gc=f;qa++;var fe=V();qa--;fe===a?gc=void 0:(f=gc,gc=a);gc!==a?Ib=xc="SUBSTRING":(f=Ib,Ib=a)}else f=Ib,Ib=a;var Zc=Ib;if(Zc!==a){var ge=pa();if(ge!==a){var he=Ga();if(he!==a){var ie=pa();if(ie!==a){var yc=e();if(yc!==a){var je=pa();if(je!==a){var ke=I();if(ke!==a){var le=pa();if(le!==a){var zc=e();if(zc!==a){var me=pa();if(me!==a){var mb=f;var Jb=f;if(n.substr(f,3).toLowerCase()===ne){var Ac=n.substr(f,3);f+=3}else Ac=a,0===qa&&q(oe);if(Ac!==a){var hc=f;qa++;
var pe=V();qa--;pe===a?hc=void 0:(f=hc,hc=a);hc!==a?Jb=Ac="FOR":(f=Jb,Jb=a)}else f=Jb,Jb=a;var Sb=Jb;if(Sb!==a){var $c=pa();if($c!==a){var ad=e();if(ad!==a){var bd=pa();bd!==a?mb=Sb=[Sb,$c,ad,bd]:(f=mb,mb=a)}else f=mb,mb=a}else f=mb,mb=a}else f=mb,mb=a;mb===a&&(mb=null);mb!==a?(Sb=Ka(),Sb!==a?bb=Zc={type:"function",name:"substring",args:{type:"expr_list",value:mb?[yc,zc,mb[2]]:[yc,zc]}}:(f=bb,bb=a)):(f=bb,bb=a)}else f=bb,bb=a}else f=bb,bb=a}else f=bb,bb=a}else f=bb,bb=a}else f=bb,bb=a}else f=bb,bb=
a}else f=bb,bb=a}else f=bb,bb=a}else f=bb,bb=a}else f=bb,bb=a;Wa=bb;if(Wa===a){var Na=f;var Tb=N();if(Tb!==a){var Bc=pa();if(Bc!==a){var Cc=Ga();if(Cc!==a){var Dc=pa();if(Dc!==a){var qb=d();qb===a&&(qb=null);if(qb!==a){var Ec=pa();if(Ec!==a){var Ub=e();if(Ub!==a){var Fc=pa();if(Fc!==a){var Gc=I();if(Gc!==a){var qe=pa();if(qe!==a){var cd=e();if(cd!==a){var re=pa();if(re!==a){var se=Ka();se!==a?Na=Tb={type:"function",name:"trim",args:{type:"expr_list",value:[{type:"string",value:null==qb?"BOTH":qb},
Ub,cd]}}:(f=Na,Na=a)}else f=Na,Na=a}else f=Na,Na=a}else f=Na,Na=a}else f=Na,Na=a}else f=Na,Na=a}else f=Na,Na=a}else f=Na,Na=a}else f=Na,Na=a}else f=Na,Na=a}else f=Na,Na=a}else f=Na,Na=a}else f=Na,Na=a;Na===a&&(Na=f,Tb=N(),Tb!==a?(Bc=pa(),Bc!==a?(Cc=Ga(),Cc!==a?(Dc=pa(),Dc!==a?(qb=d(),qb===a&&(qb=null),qb!==a?(Ec=pa(),Ec!==a?(Ub=e(),Ub!==a?(Fc=pa(),Fc!==a?(Gc=Ka(),Gc!==a?Na=Tb={type:"function",name:"trim",args:{type:"expr_list",value:[{type:"string",value:null==qb?"BOTH":qb},Ub]}}:(f=Na,Na=a)):(f=
Na,Na=a)):(f=Na,Na=a)):(f=Na,Na=a)):(f=Na,Na=a)):(f=Na,Na=a)):(f=Na,Na=a)):(f=Na,Na=a)):(f=Na,Na=a));Wa=Na;if(Wa===a){var eb=f;var Kb=f;if(n.substr(f,8).toLowerCase()===te){var Hc=n.substr(f,8);f+=8}else Hc=a,0===qa&&q(ue);if(Hc!==a){var ic=f;qa++;var ve=V();qa--;ve===a?ic=void 0:(f=ic,ic=a);ic!==a?Kb=Hc="POSITION":(f=Kb,Kb=a)}else f=Kb,Kb=a;var dd=Kb;if(dd!==a){var we=pa();if(we!==a){var xe=Ga();if(xe!==a){var ye=pa();if(ye!==a){var ed=e();if(ed!==a){var ze=pa();if(ze!==a){var Ae=ka();if(Ae!==a){var Be=
pa();if(Be!==a){var fd=e();if(fd!==a){var Ce=pa();if(Ce!==a){var De=Ka();De!==a?eb=dd={type:"function",name:"position",args:{type:"expr_list",value:[ed,fd]}}:(f=eb,eb=a)}else f=eb,eb=a}else f=eb,eb=a}else f=eb,eb=a}else f=eb,eb=a}else f=eb,eb=a}else f=eb,eb=a}else f=eb,eb=a}else f=eb,eb=a}else f=eb,eb=a}else f=eb,eb=a;Wa=eb;if(Wa===a){var kb=f;var Vb;var rb=f;rb=Vb=D();if(rb===a)if(rb=f,96===n.charCodeAt(f)?(Vb=gd,f++):(Vb=a,0===qa&&q(hd)),Vb!==a){var jc=[];if(id.test(n.charAt(f))){var vb=n.charAt(f);
f++}else vb=a,0===qa&&q(jd);if(vb!==a)for(;vb!==a;)jc.push(vb),id.test(n.charAt(f))?(vb=n.charAt(f),f++):(vb=a,0===qa&&q(jd));else jc=a;jc!==a?(96===n.charCodeAt(f)?(vb=gd,f++):(vb=a,0===qa&&q(hd)),vb!==a?rb=Vb=jc.join(""):(f=rb,rb=a)):(f=rb,rb=a)}else f=rb,rb=a;var Ic=rb;if(Ic!==a){var Ee=pa();if(Ee!==a){var Fe=Ga();if(Fe!==a){var Ge=pa();if(Ge!==a){var Wb=B();Wb===a&&(Wb=null);if(Wb!==a){var He=pa();if(He!==a){var Ie=Ka();Ie!==a?kb=Ic={type:"function",name:Ic,args:Wb?Wb:{type:"expr_list",value:[]}}:
(f=kb,kb=a)}else f=kb,kb=a}else f=kb,kb=a}else f=kb,kb=a}else f=kb,kb=a}else f=kb,kb=a}else f=kb,kb=a;Wa=kb;if(Wa===a){var nb;var Sa=f;var Xb=ya();if(Xb!==a){var Jc=pa();if(Jc!==a){var Yb=e();if(Yb!==a){var Kc=pa();if(Kc!==a){var zb=[];for(nb=wa();nb!==a;)zb.push(nb),nb=wa();if(zb!==a)if(nb=pa(),nb!==a){var kc=Ba();kc!==a?Sa=Xb={type:"case_expression",format:"simple",operand:Yb,clauses:zb,else:null}:(f=Sa,Sa=a)}else f=Sa,Sa=a;else f=Sa,Sa=a}else f=Sa,Sa=a}else f=Sa,Sa=a}else f=Sa,Sa=a}else f=Sa,Sa=
a;if(Sa===a)if(Sa=f,Xb=ya(),Xb!==a)if(Jc=pa(),Jc!==a)if(Yb=e(),Yb!==a)if(Kc=pa(),Kc!==a){zb=[];for(nb=wa();nb!==a;)zb.push(nb),nb=wa();if(zb!==a)if(nb=pa(),nb!==a)if(kc=Ca(),kc!==a){var Je=pa();if(Je!==a){var Ke=Ba();Ke!==a?Sa=Xb={type:"case_expression",format:"simple",operand:Yb,clauses:zb,else:kc.value}:(f=Sa,Sa=a)}else f=Sa,Sa=a}else f=Sa,Sa=a;else f=Sa,Sa=a;else f=Sa,Sa=a}else f=Sa,Sa=a;else f=Sa,Sa=a;else f=Sa,Sa=a;else f=Sa,Sa=a;var Lc=Sa;if(Lc===a){var ob;var Ya=f;var Zb=ya();if(Zb!==a){var Mc=
pa();if(Mc!==a){var Ab=[];for(ob=ra();ob!==a;)Ab.push(ob),ob=ra();if(Ab!==a)if(ob=pa(),ob!==a){var lc=Ba();lc!==a?Ya=Zb={type:"case_expression",format:"searched",clauses:Ab,else:null}:(f=Ya,Ya=a)}else f=Ya,Ya=a;else f=Ya,Ya=a}else f=Ya,Ya=a}else f=Ya,Ya=a;if(Ya===a)if(Ya=f,Zb=ya(),Zb!==a)if(Mc=pa(),Mc!==a){Ab=[];for(ob=ra();ob!==a;)Ab.push(ob),ob=ra();if(Ab!==a)if(ob=pa(),ob!==a)if(lc=Ca(),lc!==a){var Le=pa();if(Le!==a){var Me=Ba();Me!==a?Ya=Zb={type:"case_expression",format:"searched",clauses:Ab,
else:lc.value}:(f=Ya,Ya=a)}else f=Ya,Ya=a}else f=Ya,Ya=a;else f=Ya,Ya=a;else f=Ya,Ya=a}else f=Ya,Ya=a;else f=Ya,Ya=a;Lc=Ya}Wa=Lc;if(Wa===a){var mc;var Lb=f;var kd=Q();if(kd!==a){var Nc=[];for(mc=H();mc!==a;)Nc.push(mc),mc=H();Nc!==a?Lb=kd+=Nc.join(""):(f=Lb,Lb=a)}else f=Lb,Lb=a;var nc=Lb;if(nc!==a){var Oc=nc;nc=/^CURRENT_DATE$/i.test(Oc)?{type:"current_time",mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(Oc)?{type:"current_time",mode:"timestamp"}:{type:"column_ref",table:"",column:Oc}}Wa=nc;if(Wa===a&&
(Wa=k(),Wa===a)){Wa=f;var ld=Ga();if(ld!==a){var Ne=pa();if(Ne!==a){var Pc=e();if(Pc!==a){var Oe=pa();if(Oe!==a){var Pe=Ka();Pe!==a?(Pc.paren=!0,Wa=ld=Pc):(f=Wa,Wa=a)}else f=Wa,Wa=a}else f=Wa,Wa=a}else f=Wa,Wa=a}else f=Wa,Wa=a}}}}}}}}return Wa}function D(){var z;var U=f;var T=Q();if(T!==a){var da=[];for(z=V();z!==a;)da.push(z),z=V();da!==a?U=T+=da.join(""):(f=U,U=a)}else f=U,U=a;return U}function Q(){if(Qe.test(n.charAt(f))){var z=n.charAt(f);f++}else z=a,0===qa&&q(Re);return z}function V(){if(Se.test(n.charAt(f))){var z=
n.charAt(f);f++}else z=a,0===qa&&q(Te);return z}function H(){if(Ue.test(n.charAt(f))){var z=n.charAt(f);f++}else z=a,0===qa&&q(Ve);return z}function k(){var z=f;if(64===n.charCodeAt(f)){var U=We;f++}else U=a,0===qa&&q(Xe);if(U!==a){var T=D();T!==a?z=U=[U,T]:(f=z,z=a)}else f=z,z=a;z!==a&&(z={type:"param",value:z[1]});return z}function d(){var z=f;if(n.substr(f,7).toLowerCase()===Ye){var U=n.substr(f,7);f+=7}else U=a,0===qa&&q(Ze);if(U!==a){U=f;qa++;var T=V();qa--;T===a?U=void 0:(f=U,U=a);U!==a?z="LEADING":
(f=z,z=a)}else f=z,z=a;z===a&&(z=f,n.substr(f,8).toLowerCase()===$e?(U=n.substr(f,8),f+=8):(U=a,0===qa&&q(af)),U!==a?(U=f,qa++,T=V(),qa--,T===a?U=void 0:(f=U,U=a),U!==a?z="TRAILING":(f=z,z=a)):(f=z,z=a),z===a&&(z=f,n.substr(f,4).toLowerCase()===bf?(U=n.substr(f,4),f+=4):(U=a,0===qa&&q(cf)),U!==a?(U=f,qa++,T=V(),qa--,T===a?U=void 0:(f=U,U=a),U!==a?z="BOTH":(f=z,z=a)):(f=z,z=a)));return z}function C(){var z=f;var U=f;var T=L();if(T!==a){var da=pa();if(da!==a)if(da=Ga(),da!==a)if(da=pa(),da!==a)if(da=
ba(),da!==a){var ta=pa();ta!==a?(ta=Ka(),ta!==a?U=T={type:"interval-period",period:T.value,precision:da,secondary:null}:(f=U,U=a)):(f=U,U=a)}else f=U,U=a;else f=U,U=a;else f=U,U=a;else f=U,U=a}else f=U,U=a;U===a&&(U=f,T=L(),T!==a&&(T=md(T)),U=T);if(U!==a)if(T=pa(),T!==a)if(T=f,n.substr(f,2).toLowerCase()===df?(da=n.substr(f,2),f+=2):(da=a,0===qa&&q(ef)),da!==a?(da=f,qa++,ta=V(),qa--,ta===a?da=void 0:(f=da,da=a),da!==a?T="TO":(f=T,T=a)):(f=T,T=a),T!==a)if(T=pa(),T!==a){T=f;da=L();da!==a&&(da={type:"interval-period",
period:da.value,precision:null,secondary:null});T=da;if(T===a){T=f;da=za();if(da!==a)if(da=pa(),da!==a)if(da=Ga(),da!==a)if(da=pa(),da!==a)if(da=ba(),da!==a)if(ta=pa(),ta!==a)if(ta=Fa(),ta!==a)if(ta=pa(),ta!==a)if(ta=X(),ta!==a){var Da=pa();Da!==a?(Da=Ka(),Da!==a?T=da=nd(da,ta):(f=T,T=a)):(f=T,T=a)}else f=T,T=a;else f=T,T=a;else f=T,T=a;else f=T,T=a;else f=T,T=a;else f=T,T=a;else f=T,T=a;else f=T,T=a;else f=T,T=a;T===a&&(T=f,da=za(),da!==a?(da=pa(),da!==a?(da=Ga(),da!==a?(da=pa(),da!==a?(da=ba(),
da!==a?(ta=pa(),ta!==a?(ta=Ka(),ta!==a?T=da={type:"interval-period",period:"second",precision:da,secondary:null}:(f=T,T=a)):(f=T,T=a)):(f=T,T=a)):(f=T,T=a)):(f=T,T=a)):(f=T,T=a)):(f=T,T=a),T===a&&(T=f,da=za(),da!==a&&(da={type:"interval-period",period:"second",precision:null,secondary:null}),T=da))}T!==a?z=U={type:"interval-qualifier",start:U,end:T}:(f=z,z=a)}else f=z,z=a;else f=z,z=a;else f=z,z=a;else f=z,z=a;z===a&&(z=f,T=L(),T!==a?(U=pa(),U!==a?(U=Ga(),U!==a?(U=pa(),U!==a?(U=X(),U!==a?(da=pa(),
da!==a?(da=Ka(),da!==a?z=T={type:"interval-period",period:T.value,precision:U,secondary:null}:(f=z,z=a)):(f=z,z=a)):(f=z,z=a)):(f=z,z=a)):(f=z,z=a)):(f=z,z=a)):(f=z,z=a),z===a&&(z=f,T=L(),T!==a&&(T=md(T)),z=T,z===a&&(z=f,T=za(),T!==a?(U=pa(),U!==a?(U=Ga(),U!==a?(U=pa(),U!==a?(U=ba(),U!==a?(da=pa(),da!==a?(da=Fa(),da!==a?(T=pa(),T!==a?(T=X(),T!==a?(da=pa(),da!==a?(da=Ka(),da!==a?z=T=nd(U,T):(f=z,z=a)):(f=z,z=a)):(f=z,z=a)):(f=z,z=a)):(f=z,z=a)):(f=z,z=a)):(f=z,z=a)):(f=z,z=a)):(f=z,z=a)):(f=z,z=a)):
(f=z,z=a),z===a&&(z=f,T=za(),T!==a?(U=pa(),U!==a?(U=Ga(),U!==a?(U=pa(),U!==a?(U=X(),U!==a?(da=pa(),da!==a?(da=Ka(),da!==a?z=T={type:"interval-period",period:"second",precision:U,secondary:null}:(f=z,z=a)):(f=z,z=a)):(f=z,z=a)):(f=z,z=a)):(f=z,z=a)):(f=z,z=a)):(f=z,z=a),z===a&&(z=f,T=za(),T!==a&&(T={type:"interval-period",period:"second",precision:null,secondary:null}),z=T)))));return z}function L(){var z=f;z=ma();z!==a&&(z={type:"string",value:"day"});z===a&&(z=f,z=sa(),z!==a&&(z={type:"string",value:"hour"}),
z===a&&(z=f,z=va(),z!==a&&(z={type:"string",value:"minute"}),z===a&&(z=f,z=ja(),z!==a&&(z={type:"string",value:"month"}),z===a&&(z=f,z=ca(),z!==a&&(z={type:"string",value:"year"})))));return z}function X(){var z=oa();z!==a&&(z=parseFloat(z));return z}function ba(){var z=oa();z!==a&&(z=parseFloat(z));return z}function ia(){var z=na();z===a&&(z=k());return z}function na(){var z=f;if(39===n.charCodeAt(f)){var U=od;f++}else U=a,0===qa&&q(pd);U===a&&(n.substr(f,2)===qd?(U=qd,f+=2):(U=a,0===qa&&q(ff)));
if(U!==a){U=[];var T=f;n.substr(f,2)===oc?(T=oc,f+=2):(T=a,0===qa&&q(rd));T!==a&&(T="'");T===a&&(sd.test(n.charAt(f))?(T=n.charAt(f),f++):(T=a,0===qa&&q(td)));for(;T!==a;)U.push(T),T=f,n.substr(f,2)===oc?(T=oc,f+=2):(T=a,0===qa&&q(rd)),T!==a&&(T="'"),T===a&&(sd.test(n.charAt(f))?(T=n.charAt(f),f++):(T=a,0===qa&&q(td)));U!==a?(39===n.charCodeAt(f)?(T=od,f++):(T=a,0===qa&&q(pd)),T!==a?z=U={type:"string",value:U.join("")}:(f=z,z=a)):(f=z,z=a)}else f=z,z=a;return z}function ra(){var z=f;var U=Oa();if(U!==
a)if(U=pa(),U!==a)if(U=e(),U!==a){var T=pa();T!==a?(T=Ea(),T!==a?(T=pa(),T!==a?(T=e(),T!==a?z=U={type:"when_clause",operand:U,value:T}:(f=z,z=a)):(f=z,z=a)):(f=z,z=a)):(f=z,z=a)}else f=z,z=a;else f=z,z=a;else f=z,z=a;return z}function wa(){var z=f;var U=Oa();if(U!==a)if(U=pa(),U!==a)if(U=e(),U!==a){var T=pa();T!==a?(T=Ea(),T!==a?(T=pa(),T!==a?(T=e(),T!==a?z=U={type:"when_clause",operand:U,value:T}:(f=z,z=a)):(f=z,z=a)):(f=z,z=a)):(f=z,z=a)}else f=z,z=a;else f=z,z=a;else f=z,z=a;return z}function Ca(){var z=
f;var U=f;if(n.substr(f,4).toLowerCase()===gf){var T=n.substr(f,4);f+=4}else T=a,0===qa&&q(hf);if(T!==a){T=f;qa++;var da=V();qa--;da===a?T=void 0:(f=T,T=a);T!==a?U="ELSE":(f=U,U=a)}else f=U,U=a;U!==a?(U=pa(),U!==a?(U=e(),U!==a?z={type:"else_clause",value:U}:(f=z,z=a)):(f=z,z=a)):(f=z,z=a);return z}function Ia(){var z=oa();if(z===a){z=f;if(45===n.charCodeAt(f)){var U=lb;f++}else U=a,0===qa&&q(qc);U===a&&(43===n.charCodeAt(f)?(U=Va,f++):(U=a,0===qa&&q(hb)));if(U!==a){var T=oa();T!==a?z=U=U[0]+T:(f=
z,z=a)}else f=z,z=a}return z}function Ha(){var z=f;if(46===n.charCodeAt(f)){var U=jf;f++}else U=a,0===qa&&q(kf);U!==a?(U=oa(),U===a&&(U=null),U!==a?z="."+(null!=U?U:""):(f=z,z=a)):(f=z,z=a);return z}function La(){var z;var U=z=f;if(lf.test(n.charAt(f))){var T=n.charAt(f);f++}else T=a,0===qa&&q(mf);T!==a?(nf.test(n.charAt(f))?(T=n.charAt(f),f++):(T=a,0===qa&&q(of)),T===a&&(T=null),T!==a?U="e"+(null===T?"":T):(f=U,U=a)):(f=U,U=a);U!==a?(T=oa(),T!==a?z=U+T:(f=z,z=a)):(f=z,z=a);return z}function oa(){var z=
[];var U=ua();if(U!==a)for(;U!==a;)z.push(U),U=ua();else z=a;z!==a&&(z=z.join(""));return z}function ua(){if(pf.test(n.charAt(f))){var z=n.charAt(f);f++}else z=a,0===qa&&q(qf);return z}function ka(){var z=f;if(n.substr(f,2).toLowerCase()===rf){var U=n.substr(f,2);f+=2}else U=a,0===qa&&q(sf);if(U!==a){U=f;qa++;var T=V();qa--;T===a?U=void 0:(f=U,U=a);U!==a?z="IN":(f=z,z=a)}else f=z,z=a;return z}function b(){var z=f;if(n.substr(f,2).toLowerCase()===tf){var U=n.substr(f,2);f+=2}else U=a,0===qa&&q(uf);
if(U!==a){U=f;qa++;var T=V();qa--;T===a?U=void 0:(f=U,U=a);U!==a?z="IS":(f=z,z=a)}else f=z,z=a;return z}function l(){var z=f;if(n.substr(f,4).toLowerCase()===vf){var U=n.substr(f,4);f+=4}else U=a,0===qa&&q(wf);if(U!==a){U=f;qa++;var T=V();qa--;T===a?U=void 0:(f=U,U=a);U!==a?z="LIKE":(f=z,z=a)}else f=z,z=a;return z}function h(){var z=f;if(n.substr(f,3).toLowerCase()===xf){var U=n.substr(f,3);f+=3}else U=a,0===qa&&q(yf);if(U!==a){U=f;qa++;var T=V();qa--;T===a?U=void 0:(f=U,U=a);U!==a?z="NOT":(f=z,z=
a)}else f=z,z=a;return z}function w(){var z=f;if(n.substr(f,3).toLowerCase()===zf){var U=n.substr(f,3);f+=3}else U=a,0===qa&&q(Af);if(U!==a){U=f;qa++;var T=V();qa--;T===a?U=void 0:(f=U,U=a);U!==a?z="AND":(f=z,z=a)}else f=z,z=a;return z}function R(){var z=f;if(n.substr(f,2).toLowerCase()===Bf){var U=n.substr(f,2);f+=2}else U=a,0===qa&&q(Cf);if(U!==a){U=f;qa++;var T=V();qa--;T===a?U=void 0:(f=U,U=a);U!==a?z="OR":(f=z,z=a)}else f=z,z=a;return z}function S(){var z=f;if(n.substr(f,7).toLowerCase()===Df){var U=
n.substr(f,7);f+=7}else U=a,0===qa&&q(Ef);if(U!==a){U=f;qa++;var T=V();qa--;T===a?U=void 0:(f=U,U=a);U!==a?z="BETWEEN":(f=z,z=a)}else f=z,z=a;return z}function I(){var z=f;if(n.substr(f,4).toLowerCase()===Ff){var U=n.substr(f,4);f+=4}else U=a,0===qa&&q(Gf);if(U!==a){U=f;qa++;var T=V();qa--;T===a?U=void 0:(f=U,U=a);U!==a?z="FROM":(f=z,z=a)}else f=z,z=a;return z}function N(){var z=f;if(n.substr(f,4).toLowerCase()===Hf){var U=n.substr(f,4);f+=4}else U=a,0===qa&&q(If);if(U!==a){U=f;qa++;var T=V();qa--;
T===a?U=void 0:(f=U,U=a);U!==a?z="TRIM":(f=z,z=a)}else f=z,z=a;return z}function Y(){var z=f;if(n.substr(f,8).toLowerCase()===Jf){var U=n.substr(f,8);f+=8}else U=a,0===qa&&q(Kf);if(U!==a){U=f;qa++;var T=V();qa--;T===a?U=void 0:(f=U,U=a);U!==a?z="INTERVAL":(f=z,z=a)}else f=z,z=a;return z}function ca(){var z=f;if(n.substr(f,4).toLowerCase()===Lf){var U=n.substr(f,4);f+=4}else U=a,0===qa&&q(Mf);if(U!==a){U=f;qa++;var T=V();qa--;T===a?U=void 0:(f=U,U=a);U!==a?z="YEAR":(f=z,z=a)}else f=z,z=a;return z}
function ja(){var z=f;if(n.substr(f,5).toLowerCase()===Nf){var U=n.substr(f,5);f+=5}else U=a,0===qa&&q(Of);if(U!==a){U=f;qa++;var T=V();qa--;T===a?U=void 0:(f=U,U=a);U!==a?z="MONTH":(f=z,z=a)}else f=z,z=a;return z}function ma(){var z=f;if(n.substr(f,3).toLowerCase()===Pf){var U=n.substr(f,3);f+=3}else U=a,0===qa&&q(Qf);if(U!==a){U=f;qa++;var T=V();qa--;T===a?U=void 0:(f=U,U=a);U!==a?z="DAY":(f=z,z=a)}else f=z,z=a;return z}function sa(){var z=f;if(n.substr(f,4).toLowerCase()===Rf){var U=n.substr(f,
4);f+=4}else U=a,0===qa&&q(Sf);if(U!==a){U=f;qa++;var T=V();qa--;T===a?U=void 0:(f=U,U=a);U!==a?z="HOUR":(f=z,z=a)}else f=z,z=a;return z}function va(){var z=f;if(n.substr(f,6).toLowerCase()===Tf){var U=n.substr(f,6);f+=6}else U=a,0===qa&&q(Uf);if(U!==a){U=f;qa++;var T=V();qa--;T===a?U=void 0:(f=U,U=a);U!==a?z="MINUTE":(f=z,z=a)}else f=z,z=a;return z}function za(){var z=f;if(n.substr(f,6).toLowerCase()===Vf){var U=n.substr(f,6);f+=6}else U=a,0===qa&&q(Wf);if(U!==a){U=f;qa++;var T=V();qa--;T===a?U=
void 0:(f=U,U=a);U!==a?z="SECOND":(f=z,z=a)}else f=z,z=a;return z}function ya(){var z=f;if(n.substr(f,4).toLowerCase()===Xf){var U=n.substr(f,4);f+=4}else U=a,0===qa&&q(Yf);if(U!==a){U=f;qa++;var T=V();qa--;T===a?U=void 0:(f=U,U=a);U!==a?z="CASE":(f=z,z=a)}else f=z,z=a;return z}function Ba(){var z=f;if(n.substr(f,3).toLowerCase()===Zf){var U=n.substr(f,3);f+=3}else U=a,0===qa&&q($f);if(U!==a){U=f;qa++;var T=V();qa--;T===a?U=void 0:(f=U,U=a);U!==a?z="END":(f=z,z=a)}else f=z,z=a;return z}function Oa(){var z=
f;if(n.substr(f,4).toLowerCase()===ag){var U=n.substr(f,4);f+=4}else U=a,0===qa&&q(bg);if(U!==a){U=f;qa++;var T=V();qa--;T===a?U=void 0:(f=U,U=a);U!==a?z="WHEN":(f=z,z=a)}else f=z,z=a;return z}function Ea(){var z=f;if(n.substr(f,4).toLowerCase()===cg){var U=n.substr(f,4);f+=4}else U=a,0===qa&&q(dg);if(U!==a){U=f;qa++;var T=V();qa--;T===a?U=void 0:(f=U,U=a);U!==a?z="THEN":(f=z,z=a)}else f=z,z=a;return z}function Fa(){if(44===n.charCodeAt(f)){var z=eg;f++}else z=a,0===qa&&q(fg);return z}function Ga(){if(40===
n.charCodeAt(f)){var z=gg;f++}else z=a,0===qa&&q(hg);return z}function Ka(){if(41===n.charCodeAt(f)){var z=ig;f++}else z=a,0===qa&&q(jg);return z}function pa(){var z;var U=[];for(z=cb();z!==a;)U.push(z),z=cb();return U}function cb(){if(kg.test(n.charAt(f))){var z=n.charAt(f);f++}else z=a,0===qa&&q(lg);return z}function gb(z,U,T,da){z={type:"binary_expr",operator:z,left:U,right:T};void 0!==da&&(z.escape=da);return z}function fb(z,U){for(var T=0;T<U.length;T++)z=gb(U[T][1],z,U[T][3]);return z}E=void 0!==
E?E:{};var a={},ib={start:A},Za=A,Ua="!",Ta=t("!",!1),jb="\x3d",tb=t("\x3d",!1),Ra="\x3e\x3d",Bb=t("\x3e\x3d",!1),ea="\x3e",ha=t("\x3e",!1),fa="\x3c\x3d",la=t("\x3c\x3d",!1),xa="\x3c\x3e",Aa=t("\x3c\x3e",!1),Ma="\x3c",Pa=t("\x3c",!1),$a="!\x3d",ab=t("!\x3d",!1),Va="+",hb=t("+",!1),lb="-",qc=t("-",!1),wd="*",xd=t("*",!1),yd="/",zd=t("/",!1),Qe=/^[A-Za-z_\x80-\uFFFF]/,Re=v([["A","Z"],["a","z"],"_",["\u0080","\uffff"]],!1,!1),Se=/^[A-Za-z0-9_]/,Te=v([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),Ue=/^[A-Za-z0-9_.\x80-\uFFFF]/,
Ve=v([["A","Z"],["a","z"],["0","9"],"_",".",["\u0080","\uffff"]],!1,!1),We="@",Xe=t("@",!1),md=function(z){return{type:"interval-period",period:z.value,precision:null,secondary:null}},nd=function(z,U){return{type:"interval-period",period:"second",precision:z,secondary:U}},od="'",pd=t("'",!1),qd="N'",ff=t("N'",!1),oc="''",rd=t("''",!1),sd=/^[^']/,td=v(["'"],!0,!1),jf=".",kf=t(".",!1),pf=/^[0-9]/,qf=v([["0","9"]],!1,!1),lf=/^[eE]/,mf=v(["e","E"],!1,!1),nf=/^[+\-]/,of=v(["+","-"],!1,!1),Hd="null",Id=
t("NULL",!0),Bd="true",Cd=t("TRUE",!0),Ed="false",Fd=t("FALSE",!0),rf="in",sf=t("IN",!0),tf="is",uf=t("IS",!0),vf="like",wf=t("LIKE",!0),ud="escape",vd=t("ESCAPE",!0),xf="not",yf=t("NOT",!0),zf="and",Af=t("AND",!0),Bf="or",Cf=t("OR",!0),Df="between",Ef=t("BETWEEN",!0),Ff="from",Gf=t("FROM",!0),ne="for",oe=t("FOR",!0),de="substring",ee=t("SUBSTRING",!0),Td="extract",Ud=t("EXTRACT",!0),Hf="trim",If=t("TRIM",!0),te="position",ue=t("POSITION",!0),Od="timestamp",Pd=t("TIMESTAMP",!0),Kd="date",Ld=t("DATE",
!0),Ye="leading",Ze=t("LEADING",!0),$e="trailing",af=t("TRAILING",!0),bf="both",cf=t("BOTH",!0),df="to",ef=t("TO",!0),Jf="interval",Kf=t("INTERVAL",!0),Lf="year",Mf=t("YEAR",!0),Nf="month",Of=t("MONTH",!0),Pf="day",Qf=t("DAY",!0),Rf="hour",Sf=t("HOUR",!0),Tf="minute",Uf=t("MINUTE",!0),Vf="second",Wf=t("SECOND",!0),Xf="case",Yf=t("CASE",!0),Zf="end",$f=t("END",!0),ag="when",bg=t("WHEN",!0),cg="then",dg=t("THEN",!0),gf="else",hf=t("ELSE",!0),eg=",",fg=t(",",!1),gg="(",hg=t("(",!1),ig=")",jg=t(")",!1),
kg=/^[ \t\n\r]/,lg=v([" ","\t","\n","\r"],!1,!1),gd="`",hd=t("`",!1),id=/^[^`]/,jd=v(["`"],!0,!1),f=0,$b=[{line:1,column:1}],sb=0,pc=[],qa=0;if("startRule"in E){if(!(E.startRule in ib))throw Error("Can't start parsing from rule \""+E.startRule+'".');Za=ib[E.startRule]}var Qc=Za();if(Qc!==a&&f===n.length)return Qc;Qc!==a&&f<n.length&&q({type:"end"});throw function(z,U,T){return new u(u.buildMessage(z,U),z,U,T)}(pc,sb<n.length?n.charAt(sb):null,sb<n.length?W(sb,sb+1):W(sb,sb));}}})})(x);let K=function(){function g(){}
g.parse=function(u){return x.exports.parse(u)};return g}();p.WhereGrammar=K;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/chunks/_commonjsHelpers":function(){define(["exports"],function(p){p.commonjsGlobal="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};p.commonjsRequire=function(c){throw Error('Could not dynamically require "'+c+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.');
};p.getDefaultExportFromCjs=function(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c["default"]:c}})},"esri/layers/graphics/data/QueryEngineCapabilities":function(){define(["exports"],function(p){p.queryCapabilities={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,
supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/graphics/data/QueryEngineResult":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../geometry/support/quantizationUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ./AttributesBuilder ./attributeSupport ./projectionSupport ./timeSupport ./utils ../../support/fieldUtils ../../../smartMapping/statistics/support/utils ../../../support/arcadeOnDemand".split(" "),
function(p,c,x,K,g,u,n,E,t,v,J,W,q){function A(r){return r.substr(24,12)+r.substr(19,4)+r.substr(16,2)+r.substr(14,2)+r.substr(11,2)+r.substr(9,2)+r.substr(6,2)+r.substr(4,2)+r.substr(2,2)+r.substr(0,2)}function B(r,G,F,O){if(F&&"esriFieldTypeDate"===F.type){const P=(new Date(r)).getTime(),M=(new Date(G)).getTime();if(!isNaN(P)&&!isNaN(M))return O?M-P:P-M}return"number"===typeof r&&"number"===typeof G?O?G-r:r-G:"string"===typeof r&&"string"===typeof G?(r=r.toUpperCase(),G=G.toUpperCase(),!F||"esriFieldTypeGUID"!==
F.type&&"esriFieldTypeGlobalID"!==F.type?O=(O?r>G:r<G)?-1:(O?r<G:r>G)?1:0:(F=A(r),G=A(G),O=(O?F>G:F<G)?-1:(O?F<G:F>G)?1:0),O):O?1:-1}function e(r,G,F,O,P,M){P-=F;M-=O;r=Math.min(1,Math.max(0,((r-F)*P+(G-O)*M)/(P*P+M*M)));return{x:F+P*r,y:O+M*r}}function y(r,G){return r?G?4:3:G?3:2}return function(){function r(F,O,P){this.items=F;this.queryGeometry=O;this.definitionExpression=P.definitionExpression;this.geometryType=P.geometryType;this.hasM=P.hasM;this.hasZ=P.hasZ;this.objectIdField=P.objectIdField;
this.spatialReference=P.spatialReference;this.fieldsIndex=P.fieldsIndex;this.timeInfo=P.timeInfo;this.featureAdapter=P.featureAdapter;this.aggregateAdapter=P.aggregateAdapter}var G=r.prototype;G.createQueryResponseForCount=function(F){const O=new u(F,this.featureAdapter,this.fieldsIndex);if(!F.outStatistics)return O.countDistinctValues(this.items);const {groupByFieldsForStatistics:P,having:M}=F;if(null==P||!P.length)return 1;const Z=new Map,aa=new Map,m=new Set;F=F.outStatistics;for(const Q of F){({statisticType:F}=
Q);F="exceedslimit"!==F?Q.onStatisticField:void 0;if(!aa.has(F)){var D=[];for(const V of P){const H=this._getAttributeValues(O,V,Z);D.push(H)}aa.set(F,this._calculateUniqueValues(D))}F=aa.get(F);for(const V in F){const {data:H,items:k}=F[V];D=H.join(",");M&&!O.validateItems(k,M)||m.add(D)}}return m.size};G.createQueryResponse=function(F){let O;O=F.outStatistics?F.outStatistics.some(P=>"exceedslimit"===P.statisticType)?this._createExceedsLimitQueryResponse(F):this._createStatisticsQueryResponse(F):
this._createFeatureQueryResponse(F);F.returnQueryGeometry&&(K.isValid(F.outSR)&&!K.equals(this.queryGeometry.spatialReference,F.outSR)?O.queryGeometry=v.cleanFromGeometryEngine({spatialReference:F.outSR,...E.project(this.queryGeometry,this.queryGeometry.spatialReference,F.outSR)}):O.queryGeometry=v.cleanFromGeometryEngine({spatialReference:F.outSR,...this.queryGeometry}));return O};G.createSnappingResponse=function(F,O){const P=this.featureAdapter,M=y(this.hasZ,this.hasM),{x:Z,y:aa}=F.point,m="number"===
typeof F.distance?F.distance:F.distance.x,D="number"===typeof F.distance?F.distance:F.distance.y,Q={candidates:[]},V="esriGeometryPolygon"===this.geometryType;O=this.getPointCreator(F.point,this.spatialReference,O);for(const ia of this.items){var H=P.getGeometry(ia);if(!H)continue;const {coords:na,lengths:ra}=H;if(F.types&1){H=0;for(var k=0;k<ra.length;k++){var d=ra[k];for(var C=0;C<d;C++,H+=M){var L=na[H],X=na[H+1];if(C!==d-1){const wa=na[H+M],Ca=na[H+M+1],{x:Ia,y:Ha}=e(Z,aa,L,X,wa,Ca);var ba=(Z-
Ia)/m;const La=(aa-Ha)/D;ba=ba*ba+La*La;1>=ba&&Q.candidates.push({type:"edge",objectId:P.getObjectId(ia),distance:Math.sqrt(ba),target:O(Ia,Ha),start:O(L,X),end:O(wa,Ca)})}}}}if(F.types&2)for(H=V?na.length-M:na.length,k=0;k<H;k+=M)d=na[k],C=na[k+1],L=(Z-d)/m,X=(aa-C)/D,L=L*L+X*X,1>=L&&Q.candidates.push({type:"vertex",objectId:P.getObjectId(ia),distance:Math.sqrt(L),target:O(d,C)})}Q.candidates.sort((ia,na)=>ia.distance-na.distance);return Q};G.getPointCreator=function(F,O,P){const M=c.isSome(P)&&
!K.equals(O,P)?Z=>E.project(Z,O,P):Z=>Z;return null!=F.z&&null!=F.m?(Z,aa)=>M({x:Z,y:aa,z:F.z,m:F.m}):null!=F.z?(Z,aa)=>M({x:Z,y:aa,z:F.z}):null!=F.m?(Z,aa)=>M({x:Z,y:aa,m:F.m}):(Z,aa)=>M({x:Z,y:aa})};G.executeAttributesQuery=function(F){var O=n.getWhereClause(F.where,this.fieldsIndex);if(!O)return Promise.resolve(this);if(O.isStandardized){let P=0;const M=[];for(const Z of this.items)O.testFeature(Z,this.featureAdapter)&&(M[P++]=Z);O=new r(M,this.queryGeometry,this);O.definitionExpression=F.where;
return Promise.resolve(O)}return Promise.reject(new TypeError("Where clause is not standardized"))};G.executeAggregateIdsQuery=function(F){if(!F.aggregateIds||!F.aggregateIds.length||c.isNone(this.aggregateAdapter))return Promise.resolve(this);const O=new Set;for(const M of F.aggregateIds)this.aggregateAdapter.getFeatureObjectIds(M).forEach(Z=>O.add(Z));const P=this.featureAdapter.getObjectId;return Promise.resolve(new r(this.items.filter(M=>O.has(P(M))),this.queryGeometry,this))};G.executeObjectIdsQuery=
function(F){if(!F.objectIds||!F.objectIds.length)return Promise.resolve(this);const O=new Set(F.objectIds),P=this.featureAdapter.getObjectId;return Promise.resolve(new r(this.items.filter(M=>O.has(P(M))),this.queryGeometry,this))};G.executeTimeQuery=function(F){F=t.getTimeOperator(this.timeInfo,F.timeExtent,this.featureAdapter);if(!c.isSome(F))return Promise.resolve(this);F=this.items.filter(F);return Promise.resolve(new r(F,this.queryGeometry,this))};G.filterLatest=function(){const {trackIdField:F,
startTimeField:O,endTimeField:P}=this.timeInfo;var M=P||O;const Z=new Map,aa=this.featureAdapter.getAttribute;for(const m of this.items){const D=aa(m,F),Q=aa(m,M),V=Z.get(D);(!V||Q>aa(V,M))&&Z.set(D,m)}M=Array.from(Z.values());return Promise.resolve(new r(M,this.queryGeometry,this))};G.project=function(){var F=p._asyncToGenerator(function*(O){if(!O||K.equals(this.spatialReference,O))return this;const P=this.featureAdapter,M=(yield E.projectMany(this.items.map(Z=>v.getGeometry(this.geometryType,this.hasZ,
this.hasM,P.getGeometry(Z))),this.spatialReference,O)).map((Z,aa)=>P.cloneWithGeometry(this.items[aa],g.convertFromGeometry(Z,this.hasZ,this.hasM)));return new r(M,this.queryGeometry,{definitionExpression:this.definitionExpression,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,objectIdField:this.objectIdField,spatialReference:O,fieldsIndex:this.fieldsIndex,timeInfo:this.timeInfo,featureAdapter:this.featureAdapter})});return function(O){return F.apply(this,arguments)}}();G.createSummaryStatisticsResponse=
function(){var F=p._asyncToGenerator(function*(O,P){const {field:M,normalizationField:Z,normalizationType:aa,normalizationTotal:m,minValue:D,maxValue:Q}=P;var V=new u(O,this.featureAdapter,this.fieldsIndex);O=this.fieldsIndex.isDateField(M);P=P.valueExpression?yield this._getAttributeExpressionValues(V,P.valueExpression,P.viewInfoParams):this._getAttributeNormalizedValues(V,{field:M,normalizationField:Z,normalizationType:aa,normalizationTotal:m});V=W.isNullCountSupported({normalizationType:aa,normalizationField:Z,
minValue:D,maxValue:Q});P=J.isStringField(this.fieldsIndex.get(M))?W.calculateStringStatistics({values:P,supportsNullCount:V}):W.calculateStatistics({values:P,minValue:D,maxValue:Q,useSampleStdDev:!aa,supportsNullCount:V});return W.processStatsResult(P,O)});return function(O,P){return F.apply(this,arguments)}}();G._sortFeatures=function(F,O,P){if(1<F.length&&O&&O.length)for(const M of O.reverse()){O=M.split(" ");const Z=O[0],aa=this.fieldsIndex.get(Z),m=O[1]&&"desc"===O[1].toLowerCase();F.sort((D,
Q)=>{D=P(D,Z,aa);Q=P(Q,Z,aa);return B(D,Q,aa,m)})}};G._createFeatureQueryResponse=function(F){const O=this.items,{geometryType:P,hasM:M,hasZ:Z,objectIdField:aa,spatialReference:m}=this,{outFields:D,outSR:Q,quantizationParameters:V,resultRecordCount:H,resultOffset:k,returnZ:d,returnM:C}=F,L=null!=H?O.length>(k||0)+H:!1,X=D&&(-1<D.indexOf("*")?[...this.fieldsIndex.fields]:D.map(ba=>this.fieldsIndex.get(ba)));return{exceededTransferLimit:L,features:this._createFeatures(F,O),fields:X,geometryType:P,hasM:M&&
C,hasZ:Z&&d,objectIdFieldName:aa,spatialReference:v.cleanFromGeometryEngine(Q?Q:m),transform:V&&x.toQuantizationTransform(V)||null}};G._createFeatures=function(F,O){const P=new u(F,this.featureAdapter,this.fieldsIndex),{hasM:M,hasZ:Z}=this,{orderByFields:aa,quantizationParameters:m,returnGeometry:D,returnCentroid:Q,maxAllowableOffset:V,resultOffset:H,resultRecordCount:k,returnZ:d=!1,returnM:C=!1}=F,L=Z&&d,X=M&&C;F=[];var ba=0;O=[...O];this._sortFeatures(O,aa,(ra,wa,Ca)=>P.getFieldValue(ra,wa,Ca));
if(D||Q){var ia=x.toQuantizationTransform(m);if(D&&!Q)for(var na of O)F[ba++]={attributes:P.getAttributes(na),geometry:v.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(na),V,ia,L,X)};else if(!D&&Q)for(const ra of O)F[ba++]={attributes:P.getAttributes(ra),centroid:v.transformCentroid(this,this.featureAdapter.getCentroid(ra,this),ia)};else for(const ra of O)F[ba++]={attributes:P.getAttributes(ra),centroid:v.transformCentroid(this,this.featureAdapter.getCentroid(ra,
this),ia),geometry:v.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(ra),V,ia,L,X)}}else for(ia of O)(na=P.getAttributes(ia))&&(F[ba++]={attributes:na});ba=H||0;null!=k&&(F=F.slice(ba,Math.min(F.length,ba+k)));return F};G._createExceedsLimitQueryResponse=function(F){var O=!1;let P=Number.POSITIVE_INFINITY,M=Number.POSITIVE_INFINITY;O=Number.POSITIVE_INFINITY;for(const Z of F.outStatistics)if("exceedslimit"===Z.statisticType){P=null!=Z.maxPointCount?Z.maxPointCount:
Number.POSITIVE_INFINITY;M=null!=Z.maxRecordCount?Z.maxRecordCount:Number.POSITIVE_INFINITY;O=null!=Z.maxVertexCount?Z.maxVertexCount:Number.POSITIVE_INFINITY;break}if("esriGeometryPoint"===this.geometryType)O=this.items.length>P;else if(this.items.length>M)O=!0;else{F=this.hasZ?this.hasM?4:3:this.hasM?3:2;const Z=this.featureAdapter;O=this.items.reduce((aa,m)=>{m=Z.getGeometry(m);return aa+(m&&m.coords.length||0)},0)/F>O}return{fields:[{name:"exceedslimit",type:"esriFieldTypeInteger",alias:"exceedslimit",
sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],features:[{attributes:{exceedslimit:Number(O)}}]}};G._createStatisticsQueryResponse=function(F){var O={attributes:{}};const P=[],M=new Map,Z=new Map,aa=new Map,m=new Map,D=new u(F,this.featureAdapter,this.fieldsIndex);var Q=F.outStatistics;const {groupByFieldsForStatistics:V,having:H,orderByFields:k}=F;F=V&&V.length;const d=!!F,C=d&&V[0],L=d&&!this.fieldsIndex.get(C);for(const ra of Q){const {outStatisticFieldName:wa,statisticType:Ca}=ra;Q=
ra;var X="exceedslimit"!==Ca?ra.onStatisticField:void 0;const Ia="percentile_disc"===Ca||"percentile_cont"===Ca,Ha=d&&1===F&&(X===C||L)&&"count"===Ca;if(d){if(!aa.has(X)){var ba=[];for(const La of V){var ia=this._getAttributeValues(D,La,M);ba.push(ia)}aa.set(X,this._calculateUniqueValues(ba,D.returnDistinctValues))}ba=aa.get(X);for(const La in ba){const {count:oa,data:ua,items:ka,itemPositions:b}=ba[La];ia=ua.join(",");if(!H||D.validateItems(ka,H)){const l=m.get(ia)||{attributes:{}};var na=null;if(Ha)na=
oa;else{const h=this._getAttributeValues(D,X,M);na=b.map(w=>h[w]);na=Ia&&"statisticParameters"in Q?this._getPercentileValue(Q,na):this._getStatisticValue(Q,na)}l.attributes[wa]=na;V.forEach((h,w)=>l.attributes[this.fieldsIndex.get(h)?h:`EXPR_${w+1}`]=ua[w]);m.set(ia,l)}}}else X=this._getAttributeValues(D,X,M),O.attributes[wa]=Ia&&"statisticParameters"in Q?this._getPercentileValue(Q,X):this._getStatisticValue(Q,X,Z);P.push({name:wa,alias:wa,type:"esriFieldTypeDouble"})}O=d?Array.from(m.values()):[O];
this._sortFeatures(O,k,(ra,wa)=>ra.attributes[wa]);return{fields:P,features:O}};G._getStatisticValue=function(F,O,P){const {onStatisticField:M,statisticType:Z}=F;F=null;F=null!=P&&P.has(M)?P.get(M):J.isStringField(this.fieldsIndex.get(M))?W.calculateStringStatistics({values:O}):W.calculateStatistics({values:O,minValue:null,maxValue:null,useSampleStdDev:!0});P&&P.set(M,F);return F["var"===Z?"variance":Z]};G._getPercentileValue=function(F,O){const {onStatisticField:P,statisticParameters:M,statisticType:Z}=
F,{value:aa,orderBy:m}=M,D="desc"===m,Q=this.fieldsIndex.get(P);F=[...O].filter(V=>null!=V).sort((V,H)=>B(V,H,Q,D));return this._calculatePercentile(F,aa,"percentile_disc"===Z)};G._getAttributeValues=function(F,O,P){if(P.has(O))return P.get(O);const M=this.fieldsIndex.get(O),Z=this.items.map(aa=>F.getFieldValue(aa,O,M));P.set(O,Z);return Z};G._getAttributeNormalizedValues=function(F,O){return this.items.map(P=>F.getNormalizedValue(P,{field:O.field,fieldInfo:this.fieldsIndex.get(O.field),normalizationField:O.normalizationField,
normalizationFieldInfo:this.fieldsIndex.get(O.normalizationField),normalizationType:O.normalizationType,normalizationTotal:O.normalizationTotal}))};G._getAttributeExpressionValues=function(){var F=p._asyncToGenerator(function*(O,P,M){const {arcadeUtils:Z}=yield q.loadArcade(),aa=Z.createFunction(P),m=M&&Z.getViewInfo(M);return this.items.map(D=>O.getExpressionValue(D,{compiledFunc:aa,viewInfo:m},Z))});return function(O,P,M){return F.apply(this,arguments)}}();G._calculateUniqueValues=function(F,O){const P=
{},M=this.items,Z=M.length;for(let aa=0;aa<Z;aa++){const m=M[aa],D=[];for(const V of F)D.push(V[aa]);const Q=D.join(",");O?null==P[Q]&&(P[Q]={count:1,data:D,items:[m],itemPositions:[aa]}):null==P[Q]?P[Q]={count:1,data:D,items:[m],itemPositions:[aa]}:(P[Q].count++,P[Q].items.push(m),P[Q].itemPositions.push(aa))}return P};G._calculatePercentile=function(F,O,P){if(0===F.length)return null;if(0>=O)return F[0];if(1<=O)return F[F.length-1];var M=(F.length-1)*O,Z=Math.floor(M);O=Z+1;M%=1;Z=F[Z];const aa=
F[O];return O>=F.length||P||"string"===typeof Z||"string"===typeof aa?Z:Z*(1-M)+aa*M};p._createClass(r,[{key:"size",get:function(){return this.items.length}}]);return r}()})},"esri/geometry/support/quantizationUtils":function(){define(["exports","./jsonUtils"],function(p,c){function x({scale:m,translate:D},Q){return Math.round((Q-D[0])/m[0])}function K({scale:m,translate:D},Q){return Math.round((D[1]-Q)/m[1])}function g(m,D,Q){const V=[];let H,k,d,C;for(let L=0;L<Q.length;L++){const X=Q[L];if(0<L){if(d=
x(m,X[0]),C=K(m,X[1]),d!==H||C!==k)V.push(D(X,d-H,C-k)),H=d,k=C}else H=x(m,X[0]),k=K(m,X[1]),V.push(D(X,H,k))}return 0<V.length?V:null}function u(m,D,Q,V){return g(m,Q?V?aa:Z:V?Z:M,D)}function n(m,D,Q,V){const H=[];Q=Q?V?aa:Z:V?Z:M;for(V=0;V<D.length;V++){const k=g(m,Q,D[V]);k&&3<=k.length&&H.push(k)}return H.length?H:null}function E(m,D,Q,V){const H=[];Q=Q?V?aa:Z:V?Z:M;for(V=0;V<D.length;V++){const k=g(m,Q,D[V]);k&&2<=k.length&&H.push(k)}return H.length?H:null}function t({scale:m,translate:D},Q){return Q*
m[0]+D[0]}function v({scale:m,translate:D},Q){return D[1]-Q*m[1]}function J(m,D,Q){const V=Array(Q.length);if(!Q.length)return V;const [H,k]=m.scale;let d=t(m,Q[0][0]);m=v(m,Q[0][1]);V[0]=D(Q[0],d,m);for(let C=1;C<Q.length;C++){const L=Q[C];d+=L[0]*H;m-=L[1]*k;V[C]=D(L,d,m)}return V}function W(m,D,Q){const V=Array(Q.length);for(let H=0;H<Q.length;H++)V[H]=J(m,D,Q[H]);return V}function q(m,D,Q,V){return J(m,Q?V?aa:Z:V?Z:M,D)}function A(m,D,Q,V){return W(m,Q?V?aa:Z:V?Z:M,D)}function B(m,D,Q,V){return W(m,
Q?V?aa:Z:V?Z:M,D)}function e(m,D,Q){let [V,H]=Q[0],k=Math.min(V,D[0]),d=Math.min(H,D[1]),C=Math.max(V,D[2]);D=Math.max(H,D[3]);for(let L=1;L<Q.length;L++){const [X,ba]=Q[L];V+=X;H+=ba;0>X&&(k=Math.min(k,V));0<X&&(C=Math.max(C,V));0>ba?d=Math.min(d,H):0<ba&&(D=Math.max(D,H))}m[0]=k;m[1]=d;m[2]=C;m[3]=D;return m}function y(m,D){if(!D.length)return null;m[0]=m[1]=Number.POSITIVE_INFINITY;m[2]=m[3]=Number.NEGATIVE_INFINITY;for(let Q=0;Q<D.length;Q++)e(m,m,D[Q]);return m}function r(m,D,Q,V,H){D.xmin=x(m,
Q.xmin);D.ymin=K(m,Q.ymin);D.xmax=x(m,Q.xmax);D.ymax=K(m,Q.ymax);D!==Q&&(V&&(D.zmin=Q.zmin,D.zmax=Q.zmax),H&&(D.mmin=Q.mmin,D.mmax=Q.mmax));return D}function G(m,D,Q,V,H){D.points=u(m,Q.points,V,H);return D}function F(m,D,Q,V,H){D.x=x(m,Q.x);D.y=K(m,Q.y);D!==Q&&(V&&(D.z=Q.z),H&&(D.m=Q.m));return D}function O(m,D,Q,V,H){m=n(m,Q.rings,V,H);if(!m)return null;D.rings=m;return D}function P(m,D,Q,V,H){m=E(m,Q.paths,V,H);if(!m)return null;D.paths=m;return D}const M=(m,D,Q)=>[D,Q],Z=(m,D,Q)=>[D,Q,m[2]],aa=
(m,D,Q)=>[D,Q,m[2],m[3]];p.equals=function(m,D){if(m===D||null==m&&null==D)return!0;if(null==m||null==D)return!1;let Q,V,H,k;m&&"upperLeft"===m.originPosition?(Q=m.translate[0],V=m.translate[1],m=m.scale[0]):(Q=m.extent.xmin,V=m.extent.ymax,m=m.tolerance);D&&"upperLeft"===D.originPosition?(H=D.translate[0],k=D.translate[1],D=D.scale[0]):(H=D.extent.xmin,k=D.extent.ymax,D=D.tolerance);return Q===H&&V===k&&m===D};p.getQuantizedBoundsCoordsArray=e;p.getQuantizedBoundsCoordsArrayArray=y;p.getQuantizedBoundsPaths=
function(m){return y([0,0,0,0],m)};p.getQuantizedBoundsPoints=function(m){const D=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return e(D,D,m)};p.getQuantizedBoundsRings=function(m){return y([0,0,0,0],m)};p.quantizeBounds=function(m,D,Q){D[0]=x(m,Q[0]);D[3]=K(m,Q[1]);D[2]=x(m,Q[2]);D[1]=K(m,Q[3]);return D};p.quantizeExtent=r;p.quantizeGeometry=function(m,D){return m&&D?c.isPoint(D)?F(m,{},D,!1,!1):c.isPolyline(D)?P(m,{},D,!1,!1):c.isPolygon(D)?
O(m,{},D,!1,!1):c.isMultipoint(D)?G(m,{},D,!1,!1):c.isExtent(D)?r(m,{},D,!1,!1):null:null};p.quantizeMultipoint=G;p.quantizePaths=E;p.quantizePoint=F;p.quantizePoints=u;p.quantizePolygon=O;p.quantizePolyline=P;p.quantizeRings=n;p.quantizeX=x;p.quantizeY=K;p.toQuantizationTransform=function(m){return m?{originPosition:"upper-left"===m.originPosition?"upperLeft":"lower-left"===m.originPosition?"lowerLeft":m.originPosition,scale:m.tolerance?[m.tolerance,m.tolerance]:[1,1],translate:m.extent?[m.extent.xmin,
m.extent.ymax]:[0,0]}:null};p.unquantizeBounds=function(m,D,Q){return Q?(D[0]=t(m,Q[0]),D[1]=v(m,Q[3]),D[2]=t(m,Q[2]),D[3]=v(m,Q[1]),D):[t(m,D[0]),v(m,D[3]),t(m,D[2]),v(m,D[1])]};p.unquantizeCoordsArray=J;p.unquantizeCoordsArrayArray=W;p.unquantizeExtent=function(m,D,Q,V,H){D.xmin=t(m,Q.xmin);D.ymin=v(m,Q.ymin);D.xmax=t(m,Q.xmax);D.ymax=v(m,Q.ymax);D!==Q&&(V&&(D.zmin=Q.zmin,D.zmax=Q.zmax),H&&(D.mmin=Q.mmin,D.mmax=Q.mmax));return D};p.unquantizeMultipoint=function(m,D,Q,V,H){D.points=q(m,Q.points,
V,H);return D};p.unquantizePaths=A;p.unquantizePoint=function(m,D,Q,V,H){D.x=t(m,Q.x);D.y=v(m,Q.y);D!==Q&&(V&&(D.z=Q.z),H&&(D.m=Q.m));return D};p.unquantizePoints=q;p.unquantizePolygon=function(m,D,Q,V,H){D.rings=B(m,Q.rings,V,H);return D};p.unquantizePolyline=function(m,D,Q,V,H){D.paths=A(m,Q.paths,V,H);return D};p.unquantizeRings=B;p.unquantizeX=t;p.unquantizeY=v;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/graphics/data/AttributesBuilder":function(){define(["../../../core/maybe",
"./attributeSupport","../../../smartMapping/statistics/support/utils"],function(p,c,x){return function(){function K(u,n,E){this._fieldDataCache=new Map;this._returnDistinctMap=new Map;this.returnDistinctValues=u.returnDistinctValues;this.fieldsIndex=E;this.featureAdapter=n;if((n=u.outFields)&&-1===n.indexOf("*")){this.outFields=n;u=0;for(const v of n){var t=c.getExpressionFromFieldName(v);t=(n=this.fieldsIndex.get(t))?null:c.getWhereClause(t,E);n=n?n.name:c.getAliasFromFieldName(v)||`FIELD_EXP_${u++}`;
this._fieldDataCache.set(v,{alias:n,clause:t})}}}var g=K.prototype;g.countDistinctValues=function(u){if(!this.returnDistinctValues)return u.length;u.forEach(n=>this.getAttributes(n));return this._returnDistinctMap.size};g.getAttributes=function(u){u=this._processAttributesForOutFields(u);return this._processAttributesForDistinctValues(u)};g.getFieldValue=function(u,n,E){const t=E?E.name:n;let v=null;this._fieldDataCache.has(t)?v=this._fieldDataCache.get(t).clause:E||(v=c.getWhereClause(n,this.fieldsIndex),
this._fieldDataCache.set(t,{alias:t,clause:v}));return E?this.featureAdapter.getAttribute(u,t):v.calculateValue(u,this.featureAdapter)};g.getNormalizedValue=function(u,n){const E=n.normalizationType,t=n.normalizationTotal;let v=this.getFieldValue(u,n.field,n.fieldInfo);E&&Number.isFinite(v)&&(u=this.getFieldValue(u,n.normalizationField,n.normalizationFieldInfo),v=x.getNormalizedValue(v,E,u,t));return v};g.getExpressionValue=function(u,n,E){u={attributes:this.featureAdapter.getAttributes(u)};u=E.createExecContext(u,
n.viewInfo);return E.executeFunction(n.compiledFunc,u)};g.validateItem=function(u,n){this._fieldDataCache.has(n)||this._fieldDataCache.set(n,{alias:n,clause:c.getWhereClause(n,this.fieldsIndex)});return this._fieldDataCache.get(n).clause.testFeature(u,this.featureAdapter)};g.validateItems=function(u,n){this._fieldDataCache.has(n)||this._fieldDataCache.set(n,{alias:n,clause:c.getWhereClause(n,this.fieldsIndex)});return this._fieldDataCache.get(n).clause.testSet(u,this.featureAdapter)};g._processAttributesForOutFields=
function(u){const n=this.outFields;if(!n||!n.length)return this.featureAdapter.getAttributes(u);const E={};for(const t of n){const {alias:v,clause:J}=this._fieldDataCache.get(t);E[v]=J?J.calculateValue(u,this.featureAdapter):this.featureAdapter.getAttribute(u,v)}return E};g._processAttributesForDistinctValues=function(u){if(p.isNone(u)||!this.returnDistinctValues)return u;var n=this.outFields,E=[];if(n)for(const v of n){var {alias:t}=this._fieldDataCache.get(v);E.push(u[t])}else for(t in u)E.push(u[t]);
n=`${(n||["*"]).join(",")}=${E.join(",")}`;E=this._returnDistinctMap.get(n)||0;this._returnDistinctMap.set(n,++E);return 1<E?null:u};return K}()})},"esri/smartMapping/statistics/support/utils":function(){define(["exports","../../../core/Error","../../../core/maybe","../../../layers/support/fieldUtils"],function(p,c,x,K){function g(t,v){return new c(t,v)}function u(t,v){t=x.isSome(t)?t:"";x.isSome(v)&&v&&(t=t?"("+t+") AND ("+v+")":v);return t}function n(t){const v=t.layer;return t.fields.filter(J=>
!v.getField(J))}function E(t){const v=t.layer;return t.fields.filter(J=>{J=v.getFieldUsageInfo(J);return!J||!J.supportsStatistics})}p.calculateStatistics=function(t){const {values:v,useSampleStdDev:J,supportsNullCount:W}=t;var q=Number.POSITIVE_INFINITY;let A=Number.NEGATIVE_INFINITY,B=null,e=null;var y=null;let r=null,G=0;const F=null==t.minValue?-Infinity:t.minValue;t=null==t.maxValue?Infinity:t.maxValue;for(const O of v)Number.isFinite(O)?O>=F&&O<=t&&(B+=O,q=Math.min(q,O),A=Math.max(A,O),G++):
"string"===typeof O&&G++;if(G&&null!=B){e=B/G;y=0;for(const O of v)Number.isFinite(O)&&O>=F&&O<=t&&(y+=(O-e)**2);r=J?1<G?y/(G-1):0:0<G?y/G:0;y=Math.sqrt(r)}else A=q=null;q={avg:e,count:G,max:A,min:q,stddev:y,sum:B,variance:r};W&&(q.nullcount=v.length-G);return q};p.calculateStringStatistics=function(t){const {values:v,supportsNullCount:J}=t;t=v.filter(q=>null!=q).length;const W={count:t};J&&(W.nullcount=v.length-t);return W};p.createError=g;p.getNormalizedValue=function(t,v,J,W){let q=null;switch(v){case "log":0!==
t&&(q=Math.log(t)*Math.LOG10E);break;case "percent-of-total":Number.isFinite(W)&&0!==W&&(q=t/W*100);break;case "field":Number.isFinite(J)&&0!==J&&(q=t/J);break;case "natural-log":0<t&&(q=Math.log(t));break;case "square-root":0<t&&(q=t**.5)}return q};p.getRangeExpr=function(t,v,J){v=null!=v?t+" \x3e\x3d "+v:"";t=null!=J?t+" \x3c\x3d "+J:"";J="";return(J=v&&t?u(v,t):v||t)?"("+J+")":""};p.getSQLFilterForNormalization=function(t){const v=t.field,J=t.normalizationType;t=t.normalizationField;let W;if("log"===
J)W="(NOT "+v+" \x3d 0)";else if("field"===J)W="(NOT "+t+" \x3d 0)";else if("natural-log"===J||"square-root"===J)W=`(${v} > 0)`;return W};p.isNullCountSupported=function(t){const v=null!=t.minValue||null!=t.maxValue,J=!!t.sqlExpression&&t.supportsSQLExpression;return!(null!=t.normalizationField||null!=t.normalizationType)&&!v&&!J};p.mergeWhereClauses=u;p.processStatsResult=function(t,v){if(!v)return t;["avg","stddev","variance"].forEach(J=>{null!=t[J]&&(t[J]=Math.ceil(t[J]))});return t};p.verifyBasicFieldValidity=
function(t,v,J){const W=n({layer:t,fields:v});if(W.length)return g(J,"Unknown fields: "+W.join(", ")+". You can only use fields defined in the layer schema");t=E({layer:t,fields:v});if(t.length)return g(J,"Unsupported fields: "+t.join(", ")+". You can only use fields that can be fetched i.e. AdapterFieldUsageInfo.supportsStatistics must be true")};p.verifyFieldType=function(t,v,J,W){let q=null;if(!v)q=g(J,"'field' is not defined in the layer schema");else if(v.name===t.objectIdField||-1===W.indexOf(v.type))q=
g(J,"'field' should be one of these types: "+W.join(","));return q};p.verifyNumericField=function(t,v,J){let W;v?v.name!==t.objectIdField&&K.isNumericField(v)||(W=g(J,"'field' should be one of these numeric types: "+K.numericTypes.join(","))):W=g(J,"'field' is not defined in the layer schema");return W};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/support/fieldUtils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../core/Error ../../core/maybe ../../core/object ./domains ../../support/arcadeOnDemand".split(" "),
function(p,c,x,K,g,u,n,E){function t(I,N,Y){if(I)for(const ca of I)(I=(I=u.getDeepValue(ca,N))&&"function"!==typeof I&&Y.get(I))&&u.setDeepValue(ca,I.name,N)}function v(I,N){if(!I||!N)return[];ua.clear();J(ua,I,N);return Array.from(ua).sort()}function J(I,N,Y){var ca;if(Y)if(null!=N&&null!=(ca=N.fields)&&ca.length)if(Y.includes("*"))for(const {name:ja}of N.fields)I.add(ja);else for(const ja of Y)W(I,N,ja);else if(Y.includes("*"))I.clear(),I.add("*");else for(const ja of Y)I.add(ja)}function W(I,N,
Y){"string"===typeof Y&&(N?(N=N.get(Y))&&I.add(N.name):I.add(Y))}function q(I,N,Y){return A.apply(this,arguments)}function A(){A=x._asyncToGenerator(function*(I,N,Y){if(Y){var {arcadeUtils:ca}=yield E.loadArcade();Y=ca.extractFieldNames(Y);for(const ja of Y)W(I,N,ja)}});return A.apply(this,arguments)}function B(I,N,Y){return e.apply(this,arguments)}function e(){e=x._asyncToGenerator(function*(I,N,Y){if(Y&&"1\x3d1"!==Y){Y=(yield new Promise(function(ca,ja){p(["../../core/sql/WhereClause"],ca,ja)})).WhereClause.create(Y,
N);if(!Y.isStandardized)throw new K("fieldUtils:collectFilterFields","Where clause is not standardized");J(I,N,Y.fieldNames)}});return e.apply(this,arguments)}function y(I,N){for(const Y of I)if(Y&&Y.valueType&&Y.valueType===N)return Y.name;return null}function r(){r=x._asyncToGenerator(function*(I){if(!I)return[];const N=new Set;yield G(N,I);return Array.from(N).sort()});return r.apply(this,arguments)}function G(I,N){return F.apply(this,arguments)}function F(){F=x._asyncToGenerator(function*(I,N){if(N){var Y=
u.getDeepValue("elevationInfo.featureExpressionInfo",N);if(Y)return Y.collectRequiredFields(I,N.fieldsIndex)}});return F.apply(this,arguments)}function O(I,N,Y){return P.apply(this,arguments)}function P(){P=x._asyncToGenerator(function*(I,N,Y){Y.outStatistic.onStatisticValueExpression?q(I,N,Y.outStatistic.onStatisticValueExpression):I.add(Y.outStatistic.onStatisticField)});return P.apply(this,arguments)}function M(){M=x._asyncToGenerator(function*(I,N,Y){N&&Y&&"cluster"===Y.type&&Y.fields&&(yield Promise.all(Y.fields.map(ca=>
O(I,N.fieldsIndex,ca))))});return M.apply(this,arguments)}function Z(){Z=x._asyncToGenerator(function*(I,N,Y){N&&(N.timeInfo&&g.isSome(Y)&&Y.timeExtent&&J(I,N.fieldsIndex,[N.timeInfo.startField,N.timeInfo.endField]),N.floorInfo&&J(I,N.fieldsIndex,[N.floorInfo.floorField]),g.isSome(Y)&&g.isSome(Y.where)&&(yield B(I,N.fieldsIndex,Y.where)))});return Z.apply(this,arguments)}function aa(){aa=x._asyncToGenerator(function*(I){if(!I)return[];const N="timeInfo"in I&&I.timeInfo;return N?v(I.fieldsIndex,[I.trackIdField,
N.startField,N.endField]):[]});return aa.apply(this,arguments)}function m(){m=x._asyncToGenerator(function*(I){if(!I)return[];const N=new Set;yield D(N,I);return Array.from(N).sort()});return m.apply(this,arguments)}function D(I,N){return Q.apply(this,arguments)}function Q(){Q=x._asyncToGenerator(function*(I,N){const {labelingInfo:Y,fieldsIndex:ca}=N;Y&&Y.length&&(yield Promise.all(Y.map(ja=>V(I,ca,ja))))});return Q.apply(this,arguments)}function V(I,N,Y){return H.apply(this,arguments)}function H(){H=
x._asyncToGenerator(function*(I,N,Y){if(Y){var ca=Y.getLabelExpression();Y=Y.where;"arcade"===ca.type?yield q(I,N,ca.expression):(ca=ca.expression.match(/{[^}]*}/g))&&ca.forEach(ja=>{W(I,N,ja.slice(1,-1))});yield B(I,N,Y)}});return H.apply(this,arguments)}function k(I){return"number"===typeof I&&!isNaN(I)&&isFinite(I)}function d(I){return null===I||k(I)}function C(I){return null===I||ka(I)}function L(I){return null!=I&&"string"===typeof I}function X(I){return null===I||L(I)}function ba(){return!0}
function ia(I,N){let Y;switch(I.type){case "date":case "integer":case "long":case "small-integer":case "esriFieldTypeDate":case "esriFieldTypeInteger":case "esriFieldTypeLong":case "esriFieldTypeSmallInteger":Y=I.nullable?C:ka;break;case "double":case "single":case "esriFieldTypeSingle":case "esriFieldTypeDouble":Y=I.nullable?d:k;break;case "string":case "esriFieldTypeString":Y=I.nullable?X:L;break;default:Y=ba}return 1===arguments.length?Y:Y(N)}function na(I){return null!=I&&l.has(I.type)}function ra(I,
N){return I.nullable&&null===N?null:na(I)&&!wa(I.type,Number(N))?c.NumericRangeValidationError.OUT_OF_RANGE:ia(I,N)?I.domain?n.validateDomainValue(I.domain,N):null:c.TypeValidationError.INVALID_TYPE}function wa(I,N){return(I="string"===typeof I?Ca(I):I)?I.isInteger?ka(N)&&N>=I.min&&N<=I.max:N>=I.min&&N<=I.max:!1}function Ca(I){switch(I){case "esriFieldTypeSmallInteger":case "small-integer":return h;case "esriFieldTypeInteger":case "integer":return w;case "esriFieldTypeSingle":case "single":return R;
case "esriFieldTypeDouble":case "double":return S}}function Ia(I,N,Y){if(!N||!N.attributes||!I){if(g.isSome(Y))for(var ca of I)Y.add(ca);return!0}N=N.attributes;ca=!1;for(const ja of I)if(!(ja in N))if(ca=!0,g.isSome(Y))Y.add(ja);else break;return ca}function Ha(){Ha=x._asyncToGenerator(function*(I,N){const Y=new Set;for(const ca of N)yield q(Y,I.fieldsIndex,ca);return Array.from(Y).sort()});return Ha.apply(this,arguments)}const La="field field2 field3 normalizationField rotationInfo.field proportionalSymbolInfo.field proportionalSymbolInfo.normalizationField colorInfo.field colorInfo.normalizationField".split(" "),
oa=["field","normalizationField"],ua=new Set,ka=(()=>"isInteger"in Number?Number.isInteger:I=>"number"===typeof I&&isFinite(I)&&Math.floor(I)===I)(),b=["integer","small-integer","single","double"],l=new Set([...b,"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);c.NumericRangeValidationError=void 0;(c.NumericRangeValidationError||(c.NumericRangeValidationError={})).OUT_OF_RANGE="numeric-range-validation-error::out-of-range";c.TypeValidationError=void 0;
(c.TypeValidationError||(c.TypeValidationError={})).INVALID_TYPE="type-validation-error::invalid-type";const h={min:-32768,max:32767,isInteger:!0},w={min:-2147483648,max:2147483647,isInteger:!0},R={min:-3.4E38,max:1.2E38,isInteger:!1},S={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};c.collectArcadeFieldNames=q;c.collectElevationFields=G;c.collectFeatureReductionFields=function(I,N,Y){return M.apply(this,arguments)};c.collectField=W;c.collectFields=J;c.collectFilterFields=function(I,N,Y){return Z.apply(this,
arguments)};c.collectLabelingFields=D;c.doubleRange=S;c.featureHasFields=function(I,N){return!Ia(I,N,null)};c.fixFields=v;c.fixRendererFields=function(I,N){if(null!=I&&null!=N)for(const Y of Array.isArray(I)?I:[I])if(t(La,Y,N),"visualVariables"in Y&&Y.visualVariables)for(const ca of Y.visualVariables)t(oa,ca,N)};c.fixTimeInfoFields=function(I,N){if(null!=I&&null!=N&&N.fields.length)if("startField"in I){var Y=N.get(I.startField);N=N.get(I.endField);I.startField=Y&&Y.name||null;I.endField=N&&N.name||
null}else Y=N.get(I.startTimeField),N=N.get(I.endTimeField),I.startTimeField=Y&&Y.name||null,I.endTimeField=N&&N.name||null};c.getDisplayFieldName=function({displayField:I,fields:N}){if(I)return I;if(!N||!N.length)return null;if(!(I=y(N,"name-or-title")||y(N,"unique-identifier")||y(N,"type-or-category")))a:{for(const Y of N)if(Y&&Y.name&&(N=Y.name.toLowerCase(),-1<N.indexOf("name")||-1<N.indexOf("title"))){I=Y.name;break a}I=null}return I};c.getElevationFields=function(I){return r.apply(this,arguments)};
c.getExpressionFields=function(I,N){return Ha.apply(this,arguments)};c.getFeatureEditFields=function(I){if(!I)return[];const N="editFieldsInfo"in I&&I.editFieldsInfo;return N?v(I.fieldsIndex,[N&&N.creatorField,N&&N.creationDateField,N&&N.editorField,N&&N.editDateField]):[]};c.getFeatureGeometryFields=function(I){if(!I)return[];const N=I.geometryFieldsInfo;return N?v(I.fieldsIndex,[N.shapeAreaField,N.shapeLengthField]):[]};c.getFieldDefaultValue=function(I){const N=I.defaultValue;if(void 0!==N&&ia(I,
N))return N;if(I.nullable)return null};c.getFieldRange=function(I){const N=n.getDomainRange(I.domain);if(N)return N;if(na(I))return Ca(I.type)};c.getLabelingFields=function(I){return m.apply(this,arguments)};c.getNumericTypeForValue=function(I){if(!k(I))return null;if(ka(I)){if(I>=h.min&&I<=h.max)return"esriFieldTypeSmallInteger";if(I>=w.min&&I<=w.max)return"esriFieldTypeInteger"}return I>=R.min&&I<=R.max?"esriFieldTypeSingle":"esriFieldTypeDouble"};c.getTimeFields=function(I){return aa.apply(this,
arguments)};c.integerRange=w;c.isDateField=function(I){return null!=I&&("date"===I.type||"esriFieldTypeDate"===I.type)};c.isNumberInRange=wa;c.isNumericField=na;c.isStringField=function(I){return null!=I&&("string"===I.type||"esriFieldTypeString"===I.type)};c.isValidFieldValue=function(I,N){return null===ra(I,N)};c.isValueMatchingFieldType=ia;c.numericTypes=b;c.packFields=function(I,N,Y=1){if(!N||!I)return[];if(N.includes("*"))return["*"];N=v(I,N);return N.length/I.fields.length>=Y?["*"]:N};c.populateMissingFields=
Ia;c.rendererFields=La;c.sanitizeNullFieldValue=function(I){return null==I||"number"===typeof I&&isNaN(I)?null:I};c.singleRange=R;c.smallIntegerRange=h;c.unpackFieldNames=function(I,N){return g.isNone(N)||g.isNone(I)?[]:N.includes("*")?I.fields.map(Y=>Y.name):N};c.validateFieldValue=ra;c.validationErrorToString=function(I,N,Y){switch(I){case n.DomainValidationError.INVALID_CODED_VALUE:return`Value ${Y} is not in the coded domain - field: ${N.name}, domain: ${JSON.stringify(N.domain)}`;case n.DomainValidationError.VALUE_OUT_OF_RANGE:return`Value ${Y} is out of the range of valid values - field: ${N.name}, domain: ${JSON.stringify(N.domain)}`;
case c.TypeValidationError.INVALID_TYPE:return`Value ${Y} is not a valid value for the field type - field: ${N.name}, type: ${N.type}, nullable: ${N.nullable}`;case c.NumericRangeValidationError.OUT_OF_RANGE:{const {min:ca,max:ja}=Ca(N.type);return`Value ${Y} is out of range for the number type - field: ${N.name}, type: ${N.type}, value range is ${ca} to ${ja}`}}};c.visualVariableFields=oa;Object.defineProperty(c,"__esModule",{value:!0})})},"esri/layers/support/domains":function(){define("exports ../../core/has ./CodedValueDomain ./Domain ./InheritedDomain ./RangeDomain".split(" "),
function(p,c,x,K,g,u){function n(E,t){switch(E.type){case "range":{const v="range"in E?E.range[1]:E.maxValue;if(+t<("range"in E?E.range[0]:E.minValue)||+t>v)return p.DomainValidationError.VALUE_OUT_OF_RANGE;break}case "coded-value":case "codedValue":if(null==E.codedValues||E.codedValues.every(v=>null==v||v.code!==t))return p.DomainValidationError.INVALID_CODED_VALUE}return null}p.DomainValidationError=void 0;(function(E){E.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range";E.INVALID_CODED_VALUE=
"domain-validation-error::invalid-coded-value"})(p.DomainValidationError||(p.DomainValidationError={}));c={key:"type",base:K,typeMap:{range:u,"coded-value":x,inherited:g}};p.CodedValueDomain=x;p.DomainBase=K;p.InheritedDomain=g;p.RangeDomain=u;p.fromJSON=function(E){if(!E||!E.type)return null;switch(E.type){case "range":return u.fromJSON(E);case "codedValue":return x.fromJSON(E);case "inherited":return g.fromJSON(E)}return null};p.getDomainRange=function(E){if(E&&"range"===E.type)return{min:"range"in
E?E.range[0]:E.minValue,max:"range"in E?E.range[1]:E.maxValue}};p.isValidDomainValue=function(E,t){return null===n(E,t)};p.types=c;p.validateDomainValue=n;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/support/CodedValueDomain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./CodedValue ./Domain".split(" "),
function(p,c,x,K,g,u,n,E,t,v,J){var W;g=W=function(q){function A(e){e=q.call(this,e)||this;e.codedValues=null;e.type="coded-value";return e}p._inheritsLoose(A,q);var B=A.prototype;B.getName=function(e){let y=null;if(this.codedValues){const r=String(e);this.codedValues.some(G=>{String(G.code)===r&&(y=G.name);return!!y})}return y};B.clone=function(){return new W({codedValues:x.clone(this.codedValues),name:this.name})};return A}(J);c.__decorate([K.property({type:[v["default"]],json:{write:!0}})],g.prototype,
"codedValues",void 0);c.__decorate([E.enumeration({codedValue:"coded-value"})],g.prototype,"type",void 0);return g=W=c.__decorate([t.subclass("esri.layers.support.CodedValueDomain")],g)})},"esri/core/accessorSupport/decorators/enumeration":function(){define(["exports","../../jsonMap","./property"],function(p,c,x){p.enumeration=function(K,g={}){var u;K=K instanceof c.JSONMap?K:new c.JSONMap(K,g);K={type:(null!=(u=null==g?void 0:g.ignoreUnknown)?u:1)?K.apiValues:String,readOnly:null==g?void 0:g.readOnly,
json:{type:K.jsonValues,read:null!=g&&g.readOnly?!1:{reader:K.read},write:{writer:K.write}}};void 0!==(null==g?void 0:g.default)&&(K.json.default=g.default);void 0!==(null==g?void 0:g.name)&&(K.json.name=g.name);return x.property(K)};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/support/CodedValue":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass".split(" "),
function(p,c,x,K,g,u,n,E,t,v){var J;p.CodedValue=J=function(W){function q(A){A=W.call(this,A)||this;A.name=null;A.code=null;return A}c._inheritsLoose(q,W);q.prototype.clone=function(){return new J({name:this.name,code:this.code})};return q}(K.JSONSupport);x.__decorate([g.property({type:String,json:{write:!0}})],p.CodedValue.prototype,"name",void 0);x.__decorate([g.property({type:[String,Number],json:{write:!0}})],p.CodedValue.prototype,"code",void 0);p.CodedValue=J=x.__decorate([v.subclass("esri.layers.support.CodedValue")],
p.CodedValue);p.default=p.CodedValue;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/support/Domain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass".split(" "),function(p,c,x,K,g,u,n,E,t,v){x=new x.JSONMap({inherited:"inherited",
codedValue:"coded-value",range:"range"});K=function(J){function W(q){q=J.call(this,q)||this;q.name=null;q.type=null;return q}p._inheritsLoose(W,J);return W}(K.JSONSupport);c.__decorate([g.property({type:String,json:{write:!0}})],K.prototype,"name",void 0);c.__decorate([t.enumeration(x)],K.prototype,"type",void 0);return K=c.__decorate([v.subclass("esri.layers.support.Domain")],K)})},"esri/layers/support/InheritedDomain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./Domain".split(" "),
function(p,c,x,K,g,u,n,E,t){var v;x=v=function(J){function W(q){q=J.call(this,q)||this;q.type="inherited";return q}p._inheritsLoose(W,J);W.prototype.clone=function(){return new v};return W}(t);c.__decorate([n.enumeration({inherited:"inherited"})],x.prototype,"type",void 0);return x=v=c.__decorate([E.subclass("esri.layers.support.InheritedDomain")],x)})},"esri/layers/support/RangeDomain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./Domain".split(" "),
function(p,c,x,K,g,u,n,E,t){var v;K=v=function(J){function W(q){q=J.call(this,q)||this;q.maxValue=null;q.minValue=null;q.type="range";return q}p._inheritsLoose(W,J);W.prototype.clone=function(){return new v({maxValue:this.maxValue,minValue:this.minValue,name:this.name})};return W}(t);c.__decorate([x.property({type:Number,json:{type:[Number],read:{source:"range",reader(J,W){return W.range&&W.range[1]}},write:{enabled:!1,overridePolicy(){return{enabled:null!=this.maxValue&&null==this.minValue}},target:"range",
writer(J,W,q){W[q]=[this.minValue||0,J]}}}})],K.prototype,"maxValue",void 0);c.__decorate([x.property({type:Number,json:{type:[Number],read:{source:"range",reader(J,W){return W.range&&W.range[0]}},write:{target:"range",writer(J,W,q){W[q]=[J,this.maxValue||0]}}}})],K.prototype,"minValue",void 0);c.__decorate([n.enumeration({range:"range"})],K.prototype,"type",void 0);return K=v=c.__decorate([E.subclass("esri.layers.support.RangeDomain")],K)})},"esri/support/arcadeOnDemand":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../geometry ../core/maybe ../geometry/SpatialReference".split(" "),
function(p,c,x,K,g,u){function n(){return E.apply(this,arguments)}function E(){E=x._asyncToGenerator(function*(){t||(t=x._asyncToGenerator(function*(){const J=yield new Promise(function(W,q){p(["./arcadeUtils"],W,q)});yield J.arcade.load();return{arcade:J.arcade,arcadeUtils:J,Dictionary:J.Dictionary,Feature:J.arcadeFeature}})());return t});return E.apply(this,arguments)}let t;K=(J,W,q)=>v.create(J,W,q,null,["$feature","$view"]);let v=function(){function J(q,A,B,e,y,r,G,F){this.script=q;this.evaluate=
y;this.fields=Array.isArray(G)?G:G.fields;this._syntaxTree=e;this._arcade=A;this._arcadeDictionary=B;this._arcadeFeature=r;this._spatialReference=F;this._referencesGeometry=A.scriptTouchesGeometry(this._syntaxTree);this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}J.create=function(){var q=x._asyncToGenerator(function*(A,B,e,y,r,G){const {arcade:F,Feature:O,Dictionary:P}=yield n(),M=u.fromJSON(B);B=F.parseScript(A,G);r=r.reduce((Q,V)=>({...Q,[V]:null}),{});let Z=null;g.isSome(y)&&
(Z=new P(y),Z.immutable=!0,r.$config=null);y=F.scriptUsesGeometryEngine(B)&&F.enableGeometrySupport();G=F.scriptUsesFeatureSet(B)&&F.enableFeatureSetSupport();const aa=F.scriptIsAsync(B)&&F.enableAsyncSupport();r={vars:r,spatialReference:M,useAsync:!!aa};const m=new P;m.immutable=!1;m.setField("scale",0);const D=F.compileScript(B,r);yield Promise.all([y,G,aa]);return new J(A,F,P,B,Q=>{"$view"in Q&&Q.$view&&(m.setField("scale",Q.$view.scale),Q.$view=m);Z&&(Q.$config=Z);return D({vars:Q,spatialReference:M})},
new O,e,M)});return function(A,B,e,y,r,G){return q.apply(this,arguments)}}();var W=J.prototype;W.repurposeFeature=function(q){q.geometry&&!q.geometry.spatialReference&&(q.geometry.spatialReference=this._spatialReference);this._arcadeFeature.repurposeFromGraphicLikeObject(q.geometry,q.attributes,{fields:this.fields});return this._arcadeFeature};W.repurposeAdapter=function(q){this._arcadeFeature.repurposeFromAdapter(q,{fields:this.fields});return this._arcadeFeature};W.createDictionary=function(){return new this._arcadeDictionary};
W.referencesMember=function(q){return this._arcade.referencesMember(this._syntaxTree,q)};W.referencesFunction=function(q){return this._arcade.referencesFunction(this._syntaxTree,q)};W.referencesGeometry=function(){return this._referencesGeometry};W.referencesScale=function(){return this._referencesScale};W.extractFieldLiterals=function(q){return this._arcade.extractFieldLiterals(this._syntaxTree,q)};return J}();c.ArcadeExpression=v;c.createDictionaryExpression=(J,W,q,A)=>v.create(J,W,q,A,["$feature",
"$view"]);c.createLabelExpression=(J,W,q)=>v.create(J,W,q,null,["$feature"]);c.createRendererExpression=K;c.createVVExpression=K;c.default=v;c.loadArcade=n;Object.defineProperty(c,"__esModule",{value:!0})})},"esri/layers/graphics/data/timeSupport":function(){define(["exports"],function(p){function c(g,u,n,E,t){if(null!=E&&null!=t)return v=>{const J=g.getAttribute(v,u);v=g.getAttribute(v,n);return(null==J||J<=t)&&(null==v||v>=E)};if(null!=E)return v=>{v=g.getAttribute(v,n);return null==v||v>=E};if(null!=
t)return v=>{v=g.getAttribute(v,u);return null==v||v<=t}}function x(g,u,n,E){if(null!=n&&null!=E&&n===E)return t=>g.getAttribute(t,u)===n;if(null!=n&&null!=E)return t=>{t=g.getAttribute(t,u);return t>=n&&t<=E};if(null!=n)return t=>g.getAttribute(t,u)>=n;if(null!=E)return t=>g.getAttribute(t,u)<=E}function K(){return()=>!1}p.getTimeExtent=function(g,u){if(!g)return null;const n=u.featureAdapter,{startTimeField:E,endTimeField:t}=g;let v=Number.POSITIVE_INFINITY,J=Number.NEGATIVE_INFINITY;if(E&&t)u.forEach(W=>
{const q=n.getAttribute(W,E);W=n.getAttribute(W,t);null==q||isNaN(q)||(v=Math.min(v,q));null==W||isNaN(W)||(J=Math.max(J,W))});else{const W=E||t;u.forEach(q=>{q=n.getAttribute(q,W);null==q||isNaN(q)||(v=Math.min(v,q),J=Math.max(J,q))})}return{start:v,end:J}};p.getTimeOperator=function(g,u,n){if(!u||!g)return null;const {startTimeField:E,endTimeField:t}=g;if(!E&&!t)return null;const {start:v,end:J}=u;return null===v&&null===J?null:void 0===v&&void 0===J?K():E&&t?c(n,E,t,v,J):x(n,E||t,v,J)};Object.defineProperty(p,
"__esModule",{value:!0})})},"esri/layers/graphics/data/utils":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/jsonMap ../../../core/maybe ../../../core/unitUtils ../../../geometry/support/extentUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ../centroid ../featureConversionUtils ../OptimizedGeometry ./projectionSupport".split(" "),function(p,c,x,K,g,u,n,E,t,v,J,W,q,A){function B(k,
d,C,L=k.hasZ,X=k.hasM){const ba=k.hasZ&&L,ia=k.hasM&&X;return C?(k=W.quantizeOptimizedGeometry(Q,d,k.hasZ,k.hasM,"esriGeometryPoint",C,L,X),W.convertToPoint(k,ba,ia)):W.convertToPoint(d,ba,ia)}function e(){e=x._asyncToGenerator(function*(k,d,C){const {outFields:L,orderByFields:X,groupByFieldsForStatistics:ba,outStatistics:ia}=k;if(L)for(var na=0;na<L.length;na++)L[na]=L[na].trim();if(X)for(na=0;na<X.length;na++)X[na]=X[na].trim();if(ba)for(na=0;na<ba.length;na++)ba[na]=ba[na].trim();if(ia)for(na=
0;na<ia.length;na++)ia[na].onStatisticField&&(ia[na].onStatisticField=ia[na].onStatisticField.trim());k.geometry&&!k.outSR&&(k.outSR=k.geometry.spatialReference);return r(k,d,C)});return e.apply(this,arguments)}function y(){y=x._asyncToGenerator(function*(k,d,C){return r(k,d,C)});return y.apply(this,arguments)}function r(k,d,C){return G.apply(this,arguments)}function G(){G=x._asyncToGenerator(function*(k,d,C){if(!k)return null;var {where:L}=k;k.where=L=L&&L.trim();if(!L||/^1 *= *1$/.test(L)||d&&d===
L)k.where=null;if(!k.geometry)return k;d=yield F(k);k.distance=0;k.units=null;"esriSpatialRelEnvelopeIntersects"===k.spatialRel&&({spatialReference:L}=k.geometry,d=n.getGeometryExtent(d),d.spatialReference=L);k.geometry=d;yield A.checkProjectionSupport(d.spatialReference,C);d=(yield t.normalizeCentralMeridian(E.fromJSON(d)))[0];if(g.isNone(d))throw aa;d=d.toJSON();d=yield A.project(d,d.spatialReference,C);if(!d)throw aa;d.spatialReference=C;k.geometry=d;return k});return G.apply(this,arguments)}function F(k){return O.apply(this,
arguments)}function O(){O=x._asyncToGenerator(function*(k){const {geometry:d,distance:C,units:L}=k;if(null==C||"vertexAttributes"in d)return d;var X=d.spatialReference;k=L?Z.fromJSON(L):u.getUnitString(X);X=X&&(v.isGeographic(X)||v.isWebMercator(X))?d:yield A.checkProjectionSupport(X,v.WGS84).then(()=>A.project(d,v.WGS84));return(yield P())(X.spatialReference,X,C,k)});return O.apply(this,arguments)}function P(){return M.apply(this,arguments)}function M(){M=x._asyncToGenerator(function*(){return(yield new Promise(function(k,
d){p(["../../../geometry/geometryEngineJSON"],k,d)})).geodesicBuffer});return M.apply(this,arguments)}const Z=new K.JSONMap({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),aa=Object.freeze({}),m=new q,D=new q,Q=new q,V={esriGeometryPoint:W.convertToPoint,esriGeometryPolyline:W.convertToPolyline,esriGeometryPolygon:W.convertToPolygon,esriGeometryMultipoint:W.convertToMultipoint},
H=(k,d)=>"_geVersion"!==k?d:void 0;c.QUERY_ENGINE_EMPTY_RESULT=aa;c.cleanFromGeometryEngine=function(k){return k&&"_geVersion"in k?JSON.parse(JSON.stringify(k,H)):k};c.getCentroid=function(k,d,C){if("esriGeometryPolygon"!==k.geometryType||!d||!d.centroid&&!d.geometry)return null;d.centroid||(d.centroid=J.getCentroidOptimizedGeometry(new q,d.geometry,k.hasZ,k.hasM));return B(k,d.centroid,C)};c.getGeometry=function(k,d,C,L,X,ba,ia=d,na=C){const ra=d&&ia,wa=C&&na;L=L?"coords"in L?L:L.geometry:null;if(!L)return null;
if(X)return d=W.generalizeOptimizedGeometry(D,L,d,C,k,X,ia,na),ba&&(d=W.quantizeOptimizedGeometry(Q,d,ra,wa,k,ba)),V[k](d,ra,wa);if(ba)return ba=W.quantizeOptimizedGeometry(Q,L,d,C,k,ba,ia,na),V[k](ba,ra,wa);W.removeZMValues(m,L,d,C,ia,na);return V[k](m,ra,wa)};c.normalizeFilter=function(k,d,C){return y.apply(this,arguments)};c.normalizeQuery=function(k,d,C){return e.apply(this,arguments)};c.normalizeQueryLike=r;c.transformCentroid=B;Object.defineProperty(c,"__esModule",{value:!0})})},"esri/layers/graphics/data/spatialQuerySupport":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../geometry/support/contains ../../../geometry/support/intersects ../../../geometry/support/jsonUtils ../../../geometry/support/spatialReferenceUtils ../contains ../featureConversionUtils ../OptimizedGeometry ./projectionSupport ./utils".split(" "),
function(p,c,x,K,g,u,n,E,t,v,J,W,q){function A(){return new Promise(function(r,G){p(["../../../geometry/geometryEngineJSON"],r,G)})}function B(){B=x._asyncToGenerator(function*(r,G,F){const {spatialRel:O,geometry:P}=r;if(P){if(!0!==y.spatialRelationship[O])throw new K("feature-store:unsupported-query","Unsupported query spatial relationship",{query:r});if(E.isValid(P.spatialReference)&&E.isValid(F)){if(!0!==y.queryGeometry[n.getJsonType(P)])throw new K("feature-store:unsupported-query","Unsupported query geometry type",
{query:r});if(!0!==y.layerGeometry[G])throw new K("feature-store:unsupported-query","Unsupported layer geometry type",{query:r});if(r.outSR)return W.checkProjectionSupport(r.geometry&&r.geometry.spatialReference,r.outSR)}}});return B.apply(this,arguments)}const e={esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"intersects",esriSpatialRelIndexIntersects:null,esriSpatialRelOverlaps:"overlaps",
esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:null},y={spatialRelationship:{esriSpatialRelIntersects:!0,esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},queryGeometry:{esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!0},
layerGeometry:{esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!1}};c.canQueryWithRBush=function(r){if(n.isExtent(r))return!0;if(n.isPolygon(r)){for(const G of r.rings)if(5!==G.length||G[0][0]!==G[1][0]||G[0][0]!==G[4][0]||G[2][0]!==G[3][0]||G[0][1]!==G[3][1]||G[0][1]!==G[4][1]||G[1][1]!==G[2][1])return!1;return!0}return!1};c.checkSpatialQuerySupport=function(r,G,F){return B.apply(this,arguments)};c.getSpatialQueryOperator=function(r,
G,F,O,P){if(n.isPolygon(G)&&"esriGeometryPoint"===F&&("esriSpatialRelIntersects"===r||"esriSpatialRelContains"===r)){const M=v.convertFromPolygon(new J,G,!1,!1);return Promise.resolve(Z=>t.polygonContainsPoint(M,!1,!1,Z))}if(n.isPolygon(G)&&"esriGeometryMultipoint"===F){const M=v.convertFromPolygon(new J,G,!1,!1);if("esriSpatialRelContains"===r)return Promise.resolve(Z=>t.polygonContainsMultipoint(M,!1,!1,Z,O,P))}if(n.isExtent(G)&&"esriGeometryPoint"===F&&("esriSpatialRelIntersects"===r||"esriSpatialRelContains"===
r))return Promise.resolve(M=>g.extentContainsPoint(G,q.getGeometry(F,O,P,M)));if(n.isExtent(G)&&"esriGeometryMultipoint"===F&&"esriSpatialRelContains"===r)return Promise.resolve(M=>g.extentContainsMultipoint(G,q.getGeometry(F,O,P,M)));if(n.isExtent(G)&&"esriSpatialRelIntersects"===r){const M=u.getExtentIntersector(F);return Promise.resolve(Z=>M(G,q.getGeometry(F,O,P,Z)))}return A().then(M=>{const Z=M[e[r]].bind(null,G.spatialReference,G);return aa=>Z(q.getGeometry(F,O,P,aa))})};Object.defineProperty(c,
"__esModule",{value:!0})})},"esri/geometry/support/intersects":function(){define(["exports","./intersectsBase"],function(p,c){p.extentIntersectsExtent=c.extentIntersectsExtent;p.extentIntersectsMultipoint=c.extentIntersectsMultipoint;p.extentIntersectsPoint=c.extentIntersectsPoint;p.extentIntersectsPolygon=c.extentIntersectsPolygon;p.extentIntersectsPolyline=c.extentIntersectsPolyline;p.getFeatureExtentIntersector=c.getFeatureExtentIntersector;p.isSelfIntersecting=c.isSelfIntersecting;p.segmentIntersects=
c.segmentIntersects;p.getExtentIntersector=function(x){return"mesh"===x?c.extentIntersectsExtent:c.getFeatureExtentIntersector(x)};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/graphics/contains":function(){define(["exports"],function(p){function c(x,K,g,u,n){if(!x)return!1;K=K?g?4:3:g?3:2;const {coords:E,lengths:t}=x;g=!1;x=0;for(const J of t){var v=x;for(let W=x,q=x+J*K;W<q;W+=K){v=W+K;v===q&&(v=x);const A=E[W],B=E[W+1],e=E[v];v=E[v+1];(B<n&&v>=n||v<n&&B>=n)&&A+(n-B)/(v-B)*(e-
A)<u&&(g=!g)}x+=J*K}return g}p.polygonContainsCoords=c;p.polygonContainsMultipoint=function(x,K,g,u,n,E){n=n?E?4:3:E?3:2;const {coords:t,lengths:v}=u;if(!v)return!1;for(let J=0,W=0;J<v.length;J++,W+=n)if(!c(x,K,g,t[W],t[W+1]))return!1;return!0};p.polygonContainsPoint=function(x,K,g,u){return c(x,K,g,u.coords[0],u.coords[1])};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/support/FieldsIndex":function(){define(function(){return function(){function p(x){this.fields=x;this._fieldsMap=
new Map;this._dateFieldsSet=new Set;this.dateFields=[];if(x){var K=[];for(const g of x)if(x=g&&g.name){const u=x.toLowerCase().trim();this._fieldsMap.set(x,g);this._fieldsMap.set(u,g);K.push(u);if("date"===g.type||"esriFieldTypeDate"===g.type)this.dateFields.push(g),this._dateFieldsSet.add(g)}K.sort();this.uid=K.join(",")}}var c=p.prototype;c.destroy=function(){this._fieldsMap.clear()};c.has=function(x){return null!=this.get(x)};c.get=function(x){return null!=x?this._fieldsMap.get(x)||this._fieldsMap.get(x.toLowerCase().trim()):
void 0};c.isDateField=function(x){return this._dateFieldsSet.has(this.get(x))};c.normalizeFieldName=function(x){if(x=this.get(x))return x.name};return p}()})},"esri/layers/support/PromiseQueue":function(){define(["../../chunks/_rollupPluginBabelHelpers","../../core/promiseUtils"],function(p,c){let x=function(K,g,u,n,E){this.resolve=K;this.reject=g;this.callback=u;this.signal=n;this.abortCallback=E};return function(){function K(){this._tasks=[]}var g=K.prototype;g.push=function(u,n,E){return new Promise((t,
v)=>this._tasks.push(new x(t,v,u,n,E)))};g.unshift=function(u,n,E){return new Promise((t,v)=>this._tasks.unshift(new x(t,v,u,n,E)))};g.process=function(){if(0===this._tasks.length)return!1;const u=this._tasks.shift();try{const n=c.isAborted(u.signal);if(n&&!u.abortCallback)u.reject(c.createAbortError());else{const E=n?u.abortCallback(c.createAbortError()):u.callback();c.isPromise(E)?E.then(u.resolve,u.reject):u.resolve(E)}}catch(n){u.reject(n)}return!0};g.cancelAll=function(){const u=c.createAbortError();
for(const n of this._tasks)if(n.abortCallback){const E=n.abortCallback(u);n.resolve(E)}else n.reject(u);this._tasks.length=0};p._createClass(K,[{key:"length",get:function(){return this._tasks.length}}]);return K}()})},"esri/smartMapping/support/utils":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../support/arcadeOnDemand","../../support/basemapUtils"],function(p,c,x,K){function g(){g=c._asyncToGenerator(function*(q){const A=q.field,B=q.normalizationField;q=q.valueExpression;
var e=[];q&&(W||({arcadeUtils:e}=yield x.loadArcade(),W=e),e=W.extractFieldNames(q));A&&e.push(A);B&&e.push(B);return e});return g.apply(this,arguments)}function u(q){return String(q).padStart(2,"0")}function n(q,A,B){if("date"===A||"number"===A){"number"===A&&(q=new Date(q));A=B?q.getFullYear():q.getUTCFullYear();const e=u((B?q.getMonth():q.getUTCMonth())+1),y=u(B?q.getDate():q.getUTCDate()),r=u(B?q.getHours():q.getUTCHours()),G=u(B?q.getMinutes():q.getUTCMinutes());q=u(B?q.getSeconds():q.getUTCSeconds());
q=`TIMESTAMP'${A}-${e}-${y} ${r}:${G}:${q}'`}return q}function E(q,A){if(A instanceof Date)return"date";if("number"===typeof A)return"number";if("string"===typeof A&&(q=q.getField(A),"\x3cnow\x3e"!==A.toLowerCase()&&q&&"date"===q.type))return"field"}const t={light:"streets gray topo terrain national-geographic oceans osm gray-vector streets-vector topo-vector streets-relief-vector streets-navigation-vector".split(" "),dark:["satellite","hybrid","dark-gray","dark-gray-vector","streets-night-vector"]},
v={years:365,months:30,days:1,hours:1/24,minutes:1/1440,seconds:1/86400,milliseconds:1/864E5},J=["integer","small-integer"];let W=null;p.castIntegerFieldToFloat=function(q){return`cast(${q} as float)`};p.defaultBasemapGroups=t;p.getBasemapGroup=function(q,A=t){for(const B in A)if(-1<A[B].indexOf(q))return B};p.getBasemapId=function(q,A,B=!0){let e=null;q&&("string"===typeof q?A.includes(q)&&(e=q):e=K.getWellKnownBasemapId(q));return B?e||"gray":e};p.getDateDiffSQL=function(q,A,B,e){var {hasQueryEngine:y}=
q;B=n(B,E(q,B),y);q=n(A,E(q,A),y);q=`(${B} - ${q})`;y&&(q=`(${q} * ${v.milliseconds})`);e=v[e];y="/";1>e&&(e=1/e,y="*");return{sqlExpression:1===e?q:`(${q} ${y} ${e})`,sqlWhere:null}};p.getDateType=E;p.getFieldsList=function(q){return g.apply(this,arguments)};p.getNormalizationType=function(q){let A=q.normalizationType;A||(q.normalizationField?A="field":null!=q.normalizationTotal&&(A="percent-of-total"));return A};p.isIntegerField=function(q,A){return(q=A&&q.getField(A))&&-1<J.indexOf(q.type)};p.unitValueInDays=
v;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/support/basemapUtils":function(){define("exports ../Basemap ../core/Collection ../core/Logger ../core/urlUtils ../core/accessorSupport/ensureType ./basemapDefinitions".split(" "),function(p,c,x,K,g,u,n){function E(M,Z){var aa;let m;if("string"===typeof M){if(!(M in n.esriBasemapDefinitions))return Z=Object.keys(n.esriBasemapDefinitions).map(D=>`"${D}"`).join(", "),O.warn(`Unable to find basemap definition for: ${M}. Try one of these: ${Z}`),
null;Z&&(m=Z[M]);m||(m=c.fromId(M),Z&&(Z[M]=m))}else m=u.ensureType(c,M);null!=(aa=m)&&aa.destroyed&&(O.warn("The provided basemap is already destroyed",{basemap:m}),m=null);return m}function t(M,Z){const aa=new x;M.forEach(m=>{const D=Z.find(Q=>G(A(m),A(Q)))||m;aa.some(Q=>Q===D)?aa.push(m):aa.push(D)});return aa}function v(M){if(J(M.url))return!0;if("vector-tile"===M.type)for(const Z in M.sourceNameToSource){const aa=M.sourceNameToSource[Z];if(J(null==aa?void 0:aa.sourceUrl))return!0}return!1}function J(M){if(!M)return!1;
M=new g.Url(g.makeAbsolute(M));return P.test(M.authority)}function W(M){return M?!M.loaded&&M.resourceInfo?B(M.resourceInfo.data):{baseLayers:q(M.baseLayers),referenceLayers:q(M.referenceLayers)}:null}function q(M){return(x.isCollection(M)?M.toArray():M).map(A)}function A(M){return{type:M.type,url:F("urlTemplate"in M&&M.urlTemplate||M.url||"styleUrl"in M&&M.styleUrl),minScale:"minScale"in M&&null!=M.minScale?M.minScale:0,maxScale:"maxScale"in M&&null!=M.maxScale?M.maxScale:0,opacity:null!=M.opacity?
M.opacity:1,visible:null!=M.visible?!!M.visible:!0}}function B(M){return M?{baseLayers:e(M.baseMapLayers.filter(Z=>!Z.isReference)),referenceLayers:e(M.baseMapLayers.filter(Z=>Z.isReference))}:null}function e(M){return M.map(Z=>{{let aa;switch(Z.layerType){case "VectorTileLayer":aa="vector-tile";break;case "ArcGISTiledMapServiceLayer":aa="tile";break;default:aa="unknown"}Z={type:aa,url:F(Z.templateUrl||Z.urlTemplate||Z.styleUrl||Z.url),minScale:null!=Z.minScale?Z.minScale:0,maxScale:null!=Z.maxScale?
Z.maxScale:0,opacity:null!=Z.opacity?Z.opacity:1,visible:null!=Z.visibility?!!Z.visibility:!0}}return Z})}function y(M,Z,aa){return null!=M!==(null!=Z)?"not-equal":M?r(M.baseLayers,Z.baseLayers)?r(M.referenceLayers,Z.referenceLayers)?"equal":aa.mustMatchReferences?"not-equal":"base-layers-equal":"not-equal":"equal"}function r(M,Z){if(M.length!==Z.length)return!1;for(let aa=0;aa<M.length;aa++)if(!G(M[aa],Z[aa]))return!1;return!0}function G(M,Z){return M.type===Z.type&&M.url===Z.url&&M.minScale===Z.minScale&&
M.maxScale===Z.maxScale&&M.visible===Z.visible&&M.opacity===Z.opacity}function F(M){return M?g.normalize(M).replace(/^\s*https?:/i,"").toLowerCase():""}const O=K.getLogger("esri.support.basemapUtils"),P=/^(basemaps|ibasemaps).*-api\.arcgis\.com$/i;p.clonePreservingTiledLayers=function(M,Z=null){M=E(M);if(!M)return null;const aa=new c({id:M.id,title:M.title,baseLayers:M.baseLayers.slice(),referenceLayers:M.referenceLayers.slice()});Z&&(aa.baseLayers=t(aa.baseLayers,Z.baseLayers),aa.referenceLayers=
t(aa.referenceLayers,Z.referenceLayers));aa.load().catch(()=>{});aa.portalItem=M.portalItem;return aa};p.contentEquals=function(M,Z){if(M===Z)return!0;M=W(M);Z=W(Z);return"equal"===y(M,Z,{mustMatchReferences:!0})};p.createCache=function(){return{}};p.destroyCache=function(M){for(const Z in M){const aa=M[Z];!1===(null==aa?void 0:aa.destroyed)&&aa.destroy();delete M[Z]}};p.ensureType=E;p.getWellKnownBasemapId=function(M){let Z=null;M=W(M);const aa=!M.baseLayers.length;for(const D in n.esriBasemapDefinitions){var m=
B(n.esriBasemapDefinitions[D]);m=y(M,m,{mustMatchReferences:aa});if("equal"===m){Z=D;break}"base-layers-equal"===m&&(Z=D)}return Z};p.hasDeveloperBasemapLayer=function(M){return!(null==M||!M.baseLayers.concat(M.referenceLayers).some(v))};p.isDeveloperBasemapLayer=v;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/Basemap":function(){define("require ./chunks/_rollupPluginBabelHelpers ./chunks/tslib.es6 ./core/Collection ./core/collectionUtils ./core/JSONSupport ./core/lang ./core/Loadable ./core/loadAll ./core/Logger ./core/maybe ./core/promiseUtils ./core/urlUtils ./core/accessorSupport/decorators/property ./core/accessorSupport/ensureType ./core/has ./core/jsonMap ./core/accessorSupport/decorators/subclass ./core/accessorSupport/decorators/writer ./geometry/SpatialReference ./portal/Portal ./portal/PortalItem ./support/basemapDefinitions ./webdoc/support/writeUtils".split(" "),
function(p,c,x,K,g,u,n,E,t,v,J,W,q,A,B,e,y,r,G,F,O,P,M,Z){var aa;let m=0;const D=v.getLogger("esri.Basemap");u=aa=function(Q){function V(k){var d=Q.call(this,k)||this;d.id=null;d.portalItem=null;d.spatialReference=null;d.thumbnailUrl=null;d.title="Basemap";d.id=Date.now().toString(16)+"-basemap-"+m++;d.baseLayers=new K;d.referenceLayers=new K;const C=L=>{L.parent&&L.parent!==c._assertThisInitialized(d)&&"remove"in L.parent&&L.parent.remove(L);L.parent=c._assertThisInitialized(d);"elevation"===L.type&&
D.error(`Layer '${L.title}, id:${L.id}' of type '${L.type}' is not supported as a basemap layer and will therefore be ignored.`)};d.baseLayers.on("after-add",L=>C(L.item));d.referenceLayers.on("after-add",L=>C(L.item));d.baseLayers.on("after-remove",L=>{L.item.parent=null});d.referenceLayers.on("after-remove",L=>{L.item.parent=null});return d}c._inheritsLoose(V,Q);var H=V.prototype;H.initialize=function(){this.when().catch(k=>{D.error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,
k)});this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)};H.destroy=function(){var k,d=this.baseLayers.removeAll();for(const C of d)C.destroy();d=this.referenceLayers.removeAll();for(const C of d)C.destroy();this.baseLayers.destroy();this.referenceLayers.destroy();null==(k=this.portalItem)?void 0:k.destroy();this.portalItem=null};H.normalizeCtorArgs=function(k){k&&"resourceInfo"in k&&(this._set("resourceInfo",k.resourceInfo),k={...k},delete k.resourceInfo);return k};H._writeBaseLayers=
function(k,d,C){const L=[];k&&(C={...C,layerContainerType:"basemap"},this.baseLayers.forEach(X=>{X=Z.getLayerJSON(X,C.webmap?C.webmap.getLayerJSONFromResourceInfo(X):null,C);J.isSome(X)&&L.push(X)}),this.referenceLayers.forEach(X=>{X=Z.getLayerJSON(X,C.webmap?C.webmap.getLayerJSONFromResourceInfo(X):null,C);J.isSome(X)&&(X.isReference=!0,L.push(X))}));d.baseMapLayers=L};H.writeTitle=function(k,d){d.title=k||"Basemap"};H.load=function(k){this.addResolvingPromise(this._loadFromSource(k));return Promise.resolve(this)};
H.loadAll=function(){return t.loadAll(this,k=>{k(this.baseLayers,this.referenceLayers)})};H.clone=function(){const k={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.slice(),referenceLayers:this.referenceLayers.slice()};this.loaded&&(k.loadStatus="loaded");return(new aa({resourceInfo:this.resourceInfo})).set(k)};H.read=function(k,d){this.resourceInfo||this._set("resourceInfo",{data:k,context:d});Q.prototype.read.call(this,k,d)};H.write=function(k,d){k=k||{};d&&d.origin||
(d={origin:"web-map",...d});Q.prototype.write.call(this,k,d);!this.loaded&&this.resourceInfo&&this.resourceInfo.data.baseMapLayers&&(k.baseMapLayers=this.resourceInfo.data.baseMapLayers.map(C=>{C=n.clone(C);C.url&&q.isProtocolRelative(C.url)&&(C.url=`https:${C.url}`);C.templateUrl&&q.isProtocolRelative(C.templateUrl)&&(C.templateUrl=`https:${C.templateUrl}`);return C}));return k};H._loadFromSource=function(){var k=c._asyncToGenerator(function*(d){const {resourceInfo:C,portalItem:L}=this;W.throwIfAborted(d);
const X=[];C?(X.push(this._loadLayersFromJSON(C.data,C.context?C.context.url:null,d)),C.data.id&&!C.data.title&&X.push(M.getBasemapTitle(C.data.id).then(ba=>{ba&&this.read({title:ba},C.context)}))):L&&X.push(this._loadFromItem(L,d));yield Promise.all(X)});return function(d){return k.apply(this,arguments)}}();H._loadLayersFromJSON=function(){var k=c._asyncToGenerator(function*(d,C,L){var X=this.resourceInfo&&this.resourceInfo.context;const ba=this.portalItem&&this.portalItem.portal||X&&X.portal||null,
ia=X&&"web-scene"===X.origin?"web-scene":"web-map",{populateOperationalLayers:na}=yield new Promise(function(ra,wa){p(["./layers/support/layersCreator"],ra,wa)});X=[];W.throwIfAborted(L);d.baseMapLayers&&Array.isArray(d.baseMapLayers)&&(C={context:{origin:ia,url:C,portal:ba,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"},L=na(this.baseLayers,d.baseMapLayers.filter(ra=>!ra.isReference),C),X.push(L),d=na(this.referenceLayers,d.baseMapLayers.filter(ra=>ra.isReference),C),X.push(d));
yield W.eachAlways(X)});return function(d,C,L){return k.apply(this,arguments)}}();H._loadFromItem=function(){var k=c._asyncToGenerator(function*(d,C){const L=yield(yield d.load(C)).fetchData("json",C),X=q.urlToObject(d.itemUrl);this._set("resourceInfo",{data:L.baseMap,context:{origin:"web-map",portal:d.portal||O.getDefault(),url:X}});this.read(this.resourceInfo.data,this.resourceInfo.context);this.read({spatialReference:L.spatialReference},this.resourceInfo.context);this.read({title:d.title,thumbnailUrl:d.thumbnailUrl},
{origin:"portal-item",portal:d.portal||O.getDefault(),url:X});return this._loadLayersFromJSON(this.resourceInfo.data,X,C)});return function(d,C){return k.apply(this,arguments)}}();V.fromId=function(k){return(k=M.esriBasemapDefinitions[k])?aa.fromJSON(k):null};c._createClass(V,[{key:"baseLayers",set:function(k){this._set("baseLayers",g.referenceSetter(k,this._get("baseLayers")))}},{key:"referenceLayers",set:function(k){this._set("referenceLayers",g.referenceSetter(k,this._get("referenceLayers")))}}]);
return V}(u.JSONSupportMixin(E));x.__decorate([A.property({json:{write:{ignoreOrigin:!0,target:"baseMapLayers",writer(Q,V,H,k){this._writeBaseLayers(Q,V,k)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:K}},writer(Q,V,H,k){this._writeBaseLayers(Q,V,k)}}}}}})],u.prototype,"baseLayers",null);x.__decorate([A.property({type:String,json:{origins:{"web-scene":{write:!0}}}})],u.prototype,"id",void 0);x.__decorate([A.property({type:P})],u.prototype,"portalItem",void 0);x.__decorate([A.property()],
u.prototype,"referenceLayers",null);x.__decorate([A.property({readOnly:!0})],u.prototype,"resourceInfo",void 0);x.__decorate([A.property({type:F})],u.prototype,"spatialReference",void 0);x.__decorate([A.property()],u.prototype,"thumbnailUrl",void 0);x.__decorate([A.property({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],u.prototype,"title",void 0);x.__decorate([G.writer("title")],u.prototype,"writeTitle",null);return u=aa=x.__decorate([r.subclass("esri.Basemap")],u)})},"esri/core/Collection":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./ArrayPool ./Evented ./lang ./maybe ./ObjectPool ./scheduling ./accessorSupport/ensureType ./accessorSupport/tracking ./accessorSupport/decorators/property ./accessorSupport/decorators/subclass ./accessorSupport/tracking/SimpleObservable".split(" "),
function(p,c,x,K,g,u,n,E,t,v,J,W,q){function A(D){return D?D instanceof m?D.toArray():D.length?Array.prototype.slice.apply(D):[]:[]}function B(D){if(D&&D.length)return D[0]}function e(D,Q,V,H){Q&&Q.forEach((k,d,C)=>{D.push(k);e(D,V.call(H,k,d,C),V,H)})}var y;let r=function(){function D(){this.target=null;this.defaultPrevented=this.cancellable=!1;this.type=this.item=void 0}var Q=D.prototype;Q.preventDefault=function(){this.cancellable&&(this.defaultPrevented=!0)};Q.reset=function(V){this.defaultPrevented=
!1;this.item=V};return D}();const G=new n(r,void 0,D=>{D.item=null;D.target=null;D.defaultPrevented=!1;D.cancellable=!1}),F=()=>{},O=new Set,P=new Set,M=new Set,Z=new Map;let aa=0,m=y=function(D){function Q(H){H=D.call(this,H)||this;H._chgListeners=[];H._notifications=null;H._timer=null;H._observable=new q.SimpleObservable;H.length=0;H._items=[];Object.defineProperty(p._assertThisInitialized(H),"uid",{value:aa++});return H}p._inheritsLoose(Q,D);Q.isCollection=function(H){return null!=H&&H instanceof
y};var V=Q.prototype;V.normalizeCtorArgs=function(H){return H?Array.isArray(H)||H instanceof y?{items:H}:H:{}};V[Symbol.iterator]=function*(){yield*this.items};V.hasEventListener=function(H){return"change"===H?0<this._chgListeners.length:this._emitter.hasEventListener(H)};V.on=function(H,k){if("change"===H){const d=this._chgListeners,C={removed:!1,callback:k};d.push(C);this._notifications&&this._notifications.push({listeners:d.slice(),items:this._items.slice(),changes:[]});return{remove(){this.remove=
F;C.removed=!0;d.splice(d.indexOf(C),1)}}}return this._emitter.on(H,k)};V.once=function(H,k){const d=this.on(H,k);return{remove(){d.remove()}}};V.add=function(H,k){v.trackAccess(this._observable);if(this._emitBeforeChanges(1))return this;k=this.getNextIndex(null!=k?k:null);this._splice(k,0,H);this._emitAfterChanges(1);return this};V.addMany=function(H,k=this._items.length){v.trackAccess(this._observable);if(!H||!H.length||this._emitBeforeChanges(1))return this;k=this.getNextIndex(k);this._splice(k,
0,...A(H));this._emitAfterChanges(1);return this};V.removeAll=function(){v.trackAccess(this._observable);if(!this.length||this._emitBeforeChanges(2))return[];const H=this._splice(0,this.length)||[];this._emitAfterChanges(2);return H};V.clone=function(){v.trackAccess(this._observable);return this._createNewInstance({items:this._items.map(g.clone)})};V.concat=function(...H){v.trackAccess(this._observable);H=H.map(A);return this._createNewInstance({items:this._items.concat(...H)})};V.drain=function(H,
k){v.trackAccess(this._observable);if(this.length&&!this._emitBeforeChanges(2)){var d=u.assumeNonNull(this._splice(0,this.length)),C=d.length;for(let L=0;L<C;L++)H.call(k,d[L],L,d);this._emitAfterChanges(2)}};V.every=function(H,k){v.trackAccess(this._observable);return this._items.every(H,k)};V.filter=function(H,k){v.trackAccess(this._observable);let d;d=2===arguments.length?this._items.filter(H,k):this._items.filter(H);return this._createNewInstance({items:d})};V.find=function(H,k){v.trackAccess(this._observable);
return this._items.find(H,k)};V.findIndex=function(H,k){v.trackAccess(this._observable);return this._items.findIndex(H,k)};V.flatten=function(H,k){v.trackAccess(this._observable);const d=[];e(d,this,H,k);return new y(d)};V.forEach=function(H,k){v.trackAccess(this._observable);return this._items.forEach(H,k)};V.getItemAt=function(H){v.trackAccess(this._observable);return this._items[H]};V.getNextIndex=function(H){v.trackAccess(this._observable);const k=this.length;H=null==H?k:H;0>H?H=0:H>k&&(H=k);
return H};V.includes=function(H,k=0){v.trackAccess(this._observable);return this._items.includes(H,k)};V.indexOf=function(H,k=0){v.trackAccess(this._observable);return this._items.indexOf(H,k)};V.join=function(H=","){v.trackAccess(this._observable);return this._items.join(H)};V.lastIndexOf=function(H,k=this.length-1){v.trackAccess(this._observable);return this._items.lastIndexOf(H,k)};V.map=function(H,k){v.trackAccess(this._observable);H=this._items.map(H,k);return new y({items:H})};V.reorder=function(H,
k=this.length-1){v.trackAccess(this._observable);const d=this.indexOf(H);if(-1!==d){0>k?k=0:k>=this.length&&(k=this.length-1);if(d!==k){if(this._emitBeforeChanges(4))return H;this._splice(d,1);this._splice(k,0,H);this._emitAfterChanges(4)}return H}};V.pop=function(){v.trackAccess(this._observable);if(this.length&&!this._emitBeforeChanges(2)){var H=B(this._splice(this.length-1,1));this._emitAfterChanges(2);return H}};V.push=function(...H){v.trackAccess(this._observable);if(this._emitBeforeChanges(1))return this.length;
this._splice(this.length,0,...H);this._emitAfterChanges(1);return this.length};V.reduce=function(H,k){v.trackAccess(this._observable);const d=this._items;return 2===arguments.length?d.reduce(H,k):d.reduce(H)};V.reduceRight=function(H,k){v.trackAccess(this._observable);const d=this._items;return 2===arguments.length?d.reduceRight(H,k):d.reduceRight(H)};V.remove=function(H){v.trackAccess(this._observable);return this.removeAt(this.indexOf(H))};V.removeAt=function(H){v.trackAccess(this._observable);
if(!(0>H||H>=this.length||this._emitBeforeChanges(2)))return H=B(this._splice(H,1)),this._emitAfterChanges(2),H};V.removeMany=function(H){v.trackAccess(this._observable);if(!H||!H.length||this._emitBeforeChanges(2))return[];H=H instanceof y?H.toArray():H;const k=this._items,d=[],C=H.length;for(let ia=0;ia<C;ia++){var L=k.indexOf(H[ia]);if(-1<L){{var X=ia+1;var ba=L+1;const na=Math.min(H.length-X,k.length-ba);let ra=0;for(;ra<na&&H[X+ra]===k[ba+ra];)ra++;X=ra}X=1+X;(L=this._splice(L,X))&&0<L.length&&
d.push.apply(d,L);ia+=X-1}}this._emitAfterChanges(2);return d};V.reverse=function(){v.trackAccess(this._observable);if(this._emitBeforeChanges(4))return this;const H=this._splice(0,this.length);H&&(H.reverse(),this._splice(0,0,...H));this._emitAfterChanges(4);return this};V.shift=function(){v.trackAccess(this._observable);if(this.length&&!this._emitBeforeChanges(2)){var H=B(this._splice(0,1));this._emitAfterChanges(2);return H}};V.slice=function(H=0,k=this.length){v.trackAccess(this._observable);
return this._createNewInstance({items:this._items.slice(H,k)})};V.some=function(H,k){v.trackAccess(this._observable);return this._items.some(H,k)};V.sort=function(H){v.trackAccess(this._observable);if(!this.length||this._emitBeforeChanges(4))return this;const k=u.assumeNonNull(this._splice(0,this.length));arguments.length?k.sort(H):k.sort();this._splice(0,0,...k);this._emitAfterChanges(4);return this};V.splice=function(H,k,...d){v.trackAccess(this._observable);const C=(k?2:0)|(d.length?1:0);if(this._emitBeforeChanges(C))return[];
H=this._splice(H,k,...d)||[];this._emitAfterChanges(C);return H};V.toArray=function(){v.trackAccess(this._observable);return this._items.slice()};V.toJSON=function(){v.trackAccess(this._observable);return this.toArray()};V.toLocaleString=function(){v.trackAccess(this._observable);return this._items.toLocaleString()};V.toString=function(){v.trackAccess(this._observable);return this._items.toString()};V.unshift=function(...H){v.trackAccess(this._observable);if(!H.length||this._emitBeforeChanges(1))return this.length;
this._splice(0,0,...H);this._emitAfterChanges(1);return this.length};V._createNewInstance=function(H){return new this.constructor(H)};V._splice=function(H,k,...d){const C=this._items;var L=this.constructor.prototype.itemType;let X=void 0;!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=E.schedule(()=>this._dispatchChange()));if(k){X=C.splice(H,k);if(this.hasEventListener("before-remove")){var ba=
G.acquire();ba.target=this;ba.cancellable=!0;for(let ra=0,wa=X.length;ra<wa;ra++)k=X[ra],ba.reset(k),this.emit("before-remove",ba),ba.defaultPrevented&&(X.splice(ra,1),C.splice(H,0,k),H+=1,--ra,--wa);G.release(ba)}this.length=this._items.length;if(this.hasEventListener("after-remove")){k=G.acquire();k.target=this;k.cancellable=!1;ba=X.length;for(let ra=0;ra<ba;ra++)k.reset(X[ra]),this.emit("after-remove",k);G.release(k)}}if(d&&d.length){if(L){k=[];for(var ia of d)d=L.ensureType(ia),null==d&&null!=
ia||k.push(d);d=k}L=this.hasEventListener("before-add");ia=this.hasEventListener("after-add");k=H===this.length;if(L||ia){var na=G.acquire();na.target=this;na.cancellable=!0;ba=G.acquire();ba.target=this;ba.cancellable=!1;for(const ra of d)L?(na.reset(ra),this.emit("before-add",na),na.defaultPrevented||(k?C.push(ra):C.splice(H++,0,ra),this._set("length",C.length),ia&&(ba.reset(ra),this.emit("after-add",ba)))):(k?C.push(ra):C.splice(H++,0,ra),this._set("length",C.length),ba.reset(ra),this.emit("after-add",
ba));G.release(ba);G.release(na)}else{if(k)for(na of d)C.push(na);else C.splice(H,0,...d);this._set("length",C.length)}}(d&&d.length||X&&X.length)&&this._notifyChangeEvent(d,X);return X};V._emitBeforeChanges=function(H){let k=!1;if(this.hasEventListener("before-changes")){const d=G.acquire();d.target=this;d.cancellable=!0;d.type=H;this.emit("before-changes",d);k=d.defaultPrevented;G.release(d)}return k};V._emitAfterChanges=function(H){if(this.hasEventListener("after-changes")){const k=G.acquire();
k.target=this;k.cancellable=!1;k.type=H;this.emit("after-changes",k);G.release(k)}this._observable.notify()};V._notifyChangeEvent=function(H,k){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:H,removed:k})};V._dispatchChange=function(){this._timer&&(this._timer.remove(),this._timer=null);if(this._notifications){var H=this._notifications;this._notifications=null;for(const k of H){H=k.changes;O.clear();P.clear();M.clear();for(const {added:ia,
removed:na}of H){if(ia)if(0===M.size&&0===P.size)for(const ra of ia)O.add(ra);else for(const ra of ia)P.has(ra)?(M.add(ra),P.delete(ra)):M.has(ra)||O.add(ra);if(na)if(0===M.size&&0===O.size)for(const ra of na)P.add(ra);else for(const ra of na)O.has(ra)?O.delete(ra):(M.delete(ra),P.add(ra))}const d=x.acquire();O.forEach(ia=>{d.push(ia)});const C=x.acquire();P.forEach(ia=>{C.push(ia)});const L=this._items,X=k.items,ba=x.acquire();M.forEach(ia=>{X.indexOf(ia)!==L.indexOf(ia)&&ba.push(ia)});if(k.listeners&&
(d.length||C.length||ba.length)){H={target:this,added:d,removed:C,moved:ba};const ia=k.listeners.length;for(let na=0;na<ia;na++){const ra=k.listeners[na];ra.removed||ra.callback.call(this,H)}}x.release(d);x.release(C);x.release(ba)}O.clear();P.clear();M.clear()}};p._createClass(Q,[{key:"items",get:function(){v.trackAccess(this._observable);return this._items},set:function(H){this._emitBeforeChanges(1)||(this._splice(0,this.length,...A(H)),this._emitAfterChanges(1))}}]);return Q}(K.EventedAccessor);
m.ofType=D=>{if(!D)return y;if(Z.has(D))return Z.get(D);var Q=null;if("function"===typeof D)Q=D.prototype.declaredClass;else if(D.base)Q=D.base.prototype.declaredClass;else for(var V in D.typeMap){const H=D.typeMap[V].prototype.declaredClass;Q=Q?Q+` | ${H}`:H}V=function(H){function k(){return H.apply(this,arguments)||this}p._inheritsLoose(k,H);return k}(y);V=c.__decorate([W.subclass(`esri.core.Collection<${Q}>`)],V);Q={Type:D,ensureType:"function"===typeof D?t.ensureType(D):t.ensureOneOfType(D)};
Object.defineProperty(V.prototype,"itemType",{value:Q});Z.set(D,V);return V};c.__decorate([J.property()],m.prototype,"length",void 0);c.__decorate([J.property()],m.prototype,"items",null);return m=y=c.__decorate([W.subclass("esri.core.Collection")],m)})},"esri/core/accessorSupport/tracking/SimpleObservable":function(){define(["exports","./ObservationHandle"],function(p,c){let x=function(){function K(){this._observers=[]}var g=K.prototype;g.observe=function(u){this._observers.includes(u)||this._observers.push(u);
return new c.ObservationHandle(this._observers,u)};g.notify=function(){const u=this._observers.slice();for(let n=0;n<u.length;++n){const E=u[n];E.onInvalidated();E.onCommitted()}};return K}();p.SimpleObservable=x;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/core/collectionUtils":function(){define(["exports","./Collection"],function(p,c){p.castForReferenceSetter=function(x){return x};p.referenceSetter=function(x,K,g=c){K||(K=new g);if(K===x)return K;K.removeAll();x&&(Array.isArray(x)||
"items"in x&&Array.isArray(x.items))?K.addMany(x):x&&K.add(x);return K};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/core/Loadable":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./Error ./Promise ./promiseUtils ./Warning ./accessorSupport/decorators/property ./accessorSupport/decorators/subclass".split(" "),function(p,c,x,K,g,u,n,E){const t=v=>{v=function(J){function W(...A){var B=J.call(this,...A)||this;B._loadController=null;B.loadError=null;B.loadStatus=
"not-loaded";B._set("loadWarnings",[]);B.addResolvingPromise(new Promise(e=>{const y=B.load.bind(p._assertThisInitialized(B));B.load=r=>{const G=new Promise((F,O)=>{const P=g.onAbortOrThrow(r,O);B.destroyed&&O(new x("load:instance-destroyed",`Instance of '${B.declaredClass||B.constructor.name}' is already destroyed`,{instance:p._assertThisInitialized(B)}));B._promiseProps.when(F,O).finally(()=>{P&&P.remove()})});if("not-loaded"===B.loadStatus){B._set("loadStatus","loading");const F=B._loadController=
g.createAbortController();y({signal:F.signal});g.onAbort(F.signal,()=>{B._promiseProps.abort()})}e();return G}}));B.when(()=>{B._set("loadStatus","loaded");B._loadController=null},e=>{B._set("loadStatus","failed");B._set("loadError",e);B._loadController=null});return B}p._inheritsLoose(W,J);var q=W.prototype;q.load=function(){return null};q.cancelLoad=function(){var A;if(this.isFulfilled())return this;this._set("loadError",new x("load:cancelled","Cancelled"));null==(A=this._loadController)?void 0:
A.abort();return this};p._createClass(W,[{key:"loaded",get:function(){return"loaded"===this.loadStatus}},{key:"loadWarnings",get:function(){return this._get("loadWarnings")}}]);return W}(v);c.__decorate([n.property({readOnly:!0})],v.prototype,"loaded",null);c.__decorate([n.property({readOnly:!0})],v.prototype,"loadError",void 0);c.__decorate([n.property()],v.prototype,"loadStatus",void 0);c.__decorate([n.property({type:[u],readOnly:!0})],v.prototype,"loadWarnings",null);return v=c.__decorate([E.subclass("esri.core.Loadable")],
v)};K=function(v){function J(){return v.apply(this,arguments)||this}p._inheritsLoose(J,v);return J}(t(K.EsriPromise));K=c.__decorate([E.subclass("esri.core.Loadable")],K);(function(v){v.LoadableMixin=t;v.isLoadable=function(J){return!(!J||!J.load)}})(K||(K={}));return K})},"esri/core/Promise":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./Accessor ./maybe ./promiseUtils ./accessorSupport/decorators/subclass".split(" "),function(p,c,x,K,g,u,n){let E=function(){function v(W){this.instance=
W;this._resolver=u.createDeferred();this._status=0;this._resolvingPromises=[];this._resolver.promise.then(()=>{this._status=1;this._cleanUp()},()=>{this._status=2;this._cleanUp()})}var J=v.prototype;J.addResolvingPromise=function(W){this._resolvingPromises.push(W);this._tryResolve()};J.isResolved=function(){return 1===this._status};J.isRejected=function(){return 2===this._status};J.isFulfilled=function(){return 0!==this._status};J.abort=function(){this._resolver.reject(u.createAbortError())};J.when=
function(W,q){return this._resolver.promise.then(W,q)};J._cleanUp=function(){this._allPromise=this._resolvingPromises=this._allPromise=null};J._tryResolve=function(){if(!this.isFulfilled()){var W=u.createDeferred(),q=[...this._resolvingPromises,g.assumeNonNull(W.promise)],A=this._allPromise=Promise.all(q);A.then(()=>{this.isFulfilled()||this._allPromise!==A||this._resolver.resolve(this.instance)},B=>{this.isFulfilled()||this._allPromise!==A||u.isAbortError(B)||this._resolver.reject(B)});W.resolve()}};
return v}();const t=v=>{v=function(J){function W(...A){A=J.call(this,...A)||this;A._promiseProps=new E(c._assertThisInitialized(A));A.addResolvingPromise(Promise.resolve());return A}c._inheritsLoose(W,J);var q=W.prototype;q.isResolved=function(){return this._promiseProps.isResolved()};q.isRejected=function(){return this._promiseProps.isRejected()};q.isFulfilled=function(){return this._promiseProps.isFulfilled()};q.when=function(A,B){return(new Promise((e,y)=>{this._promiseProps.when(e,y)})).then(A,
B)};q.catch=function(A){return this.when(null,A)};q.addResolvingPromise=function(A){A&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in A?A.when():A)};return W}(v);return v=x.__decorate([n.subclass("esri.core.Promise")],v)};p.EsriPromise=function(v){function J(){return v.apply(this,arguments)||this}c._inheritsLoose(J,v);return J}(t(K));p.EsriPromise=x.__decorate([n.subclass("esri.core.Promise")],p.EsriPromise);p.EsriPromiseMixin=t;Object.defineProperty(p,
"__esModule",{value:!0})})},"esri/core/loadAll":function(){define("exports ../chunks/_rollupPluginBabelHelpers ./asyncUtils ./Collection ./Loadable ./maybe".split(" "),function(p,c,x,K,g,u){function n(J,W){return E.apply(this,arguments)}function E(){E=c._asyncToGenerator(function*(J,W){yield J.load();return t(J,W)});return E.apply(this,arguments)}function t(J,W){return v.apply(this,arguments)}function v(){v=c._asyncToGenerator(function*(J,W){const q=[],A=(...e)=>{for(const y of e)u.isNone(y)||(Array.isArray(y)?
A(...y):K.isCollection(y)?y.forEach(r=>A(r)):g.isLoadable(y)&&q.push(y))};W(A);let B=null;yield x.map(q,function(){var e=c._asyncToGenerator(function*(y){!1!==(yield x.result("loadAll"in y&&"function"===typeof y.loadAll?y.loadAll():y.load())).ok||B||(B=y)});return function(y){return e.apply(this,arguments)}}());if(B)throw B.loadError;return J});return v.apply(this,arguments)}p.default=n;p.loadAll=n;p.loadAllChildren=t;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/core/asyncUtils":function(){define(["exports",
"./maybe","./promiseUtils"],function(p,c,x){p.assertResult=function(K){if(!0===K.ok)return K.value;throw K.error;};p.forEach=function(K,g,u){return x.eachAlways(K.map((n,E)=>g.apply(u,[n,E])))};p.map=function(K,g,u){return x.eachAlways(K.map((n,E)=>g.apply(u,[n,E]))).then(n=>n.map(E=>E.value))};p.result=function(K){return c.isNone(K)?x.resolve():K.then(g=>({ok:!0,value:g})).catch(g=>({ok:!1,error:g}))};p.resultOrAbort=function(K){return K.then(g=>({ok:!0,value:g})).catch(g=>{x.throwIfAbortError(g);
return{ok:!1,error:g}})};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/portal/Portal":function(){define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../config ../intl ../kernel ../request ../core/Error ../core/JSONSupport ../core/Loadable ../core/maybe ../core/promiseUtils ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/jsonMap ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../geometry/Extent ./PortalQueryParams ./PortalQueryResult ./PortalUser ../intl/locale".split(" "),
function(p,c,x,K,g,u,n,E,t,v,J,W,q,A,B,e,y,r,G,F,O,P,M,Z){function aa(V){return Object.freeze({__proto__:null,"default":V})}var m;let D;const Q={PortalGroup:()=>new Promise(function(V,H){p(["./PortalGroup"],function(k){V(aa(k))},H)}),PortalItem:()=>new Promise(function(V,H){p(["./PortalItem"],function(k){V(aa(k))},H)}),PortalUser:()=>new Promise(function(V,H){p(["./PortalUser"],function(k){V(aa(k))},H)})};g=m=function(V){function H(d){d=V.call(this,d)||this;d.access=null;d.allSSL=!1;d.authMode="auto";
d.authorizedCrossOriginDomains=null;d.basemapGalleryGroupQuery=null;d.bingKey=null;d.canListApps=!1;d.canListData=!1;d.canListPreProvisionedItems=!1;d.canProvisionDirectPurchase=!1;d.canSearchPublic=!0;d.canShareBingPublic=!1;d.canSharePublic=!1;d.canSignInArcGIS=!1;d.canSignInIDP=!1;d.colorSetsGroupQuery=null;d.commentsEnabled=!1;d.created=null;d.culture=null;d.customBaseUrl=null;d.defaultBasemap=null;d.defaultExtent=null;d.defaultVectorBasemap=null;d.description=null;d.eueiEnabled=null;d.featuredGroups=
null;d.featuredItemsGroupQuery=null;d.galleryTemplatesGroupQuery=null;d.livingAtlasGroupQuery=null;d.hasCategorySchema=!1;d.helperServices=null;d.homePageFeaturedContent=null;d.homePageFeaturedContentCount=null;d.httpPort=null;d.httpsPort=null;d.id=null;d.ipCntryCode=null;d.isPortal=!1;d.isReadOnly=!1;d.layerTemplatesGroupQuery=null;d.maxTokenExpirationMinutes=null;d.modified=null;d.name=null;d.portalHostname=null;d.portalMode=null;d.portalProperties=null;d.region=null;d.rotatorPanels=null;d.showHomePageDescription=
!1;d.sourceJSON=null;d.supportsHostedServices=!1;d.symbolSetsGroupQuery=null;d.templatesGroupQuery=null;d.units=null;d.url=K.portalUrl;d.urlKey=null;d.user=null;d.useStandardizedQuery=!1;d.useVectorBasemaps=!1;d.vectorBasemapGalleryGroupQuery=null;return d}c._inheritsLoose(H,V);var k=H.prototype;k.normalizeCtorArgs=function(d){return"string"===typeof d?{url:d}:d};k.destroy=function(){this._esriId_credentialCreateHandle&&(this._esriId_credentialCreateHandle.remove(),this._esriId_credentialCreateHandle=
null)};k.readAuthorizedCrossOriginDomains=function(d){if(d)for(const C of d)-1===K.request.trustedServers.indexOf(C)&&K.request.trustedServers.push(C);return d};k.readDefaultBasemap=function(d){return d?(d=D.fromJSON(d),d.portalItem={portal:this},d):null};k.readDefaultVectorBasemap=function(d){return d?(d=D.fromJSON(d),d.portalItem={portal:this},d):null};k.readUrlKey=function(d){return d?d.toLowerCase():d};k.readUser=function(d){let C=null;d&&(C=M.fromJSON(d),C.portal=this);return C};k.load=function(d){const C=
(new Promise(function(L,X){p(["../Basemap"],function(ba){L(aa(ba))},X)})).then(({default:L})=>{W.throwIfAborted(d);D=L}).then(()=>this.sourceJSON?this.sourceJSON:this._fetchSelf(this.authMode,!1,d)).then(L=>{if(u.id){const X=u.id;this.credential=X.findCredential(this.restUrl);this.credential||this.authMode!==m.AUTH_MODE_AUTO||(this._esriId_credentialCreateHandle=X.on("credential-create",()=>{X.findCredential(this.restUrl)&&this._signIn()}))}this.sourceJSON=L;this.read(L)});this.addResolvingPromise(C);
return Promise.resolve(this)};k.createClosestFacilityTask=function(){var d=c._asyncToGenerator(function*(){yield this.load();const C=this._getHelperServiceUrl("closestFacility");return new (yield new Promise(function(L,X){p(["../tasks/ClosestFacilityTask"],function(ba){L(aa(ba))},X)})).default(C)});return function(){return d.apply(this,arguments)}}();k.createElevationLayers=function(){var d=c._asyncToGenerator(function*(){yield this.load();const C=this._getHelperService("defaultElevationLayers"),
L=(yield new Promise(function(X,ba){p(["../layers/ElevationLayer"],function(ia){X(aa(ia))},ba)})).default;return C?C.map(X=>new L({id:X.id,url:X.url})):[]});return function(){return d.apply(this,arguments)}}();k.createGeometryService=function(){var d=c._asyncToGenerator(function*(){yield this.load();const C=this._getHelperServiceUrl("geometry");return new (yield new Promise(function(L,X){p(["../tasks/GeometryService"],function(ba){L(aa(ba))},X)})).default({url:C})});return function(){return d.apply(this,
arguments)}}();k.createPrintTask=function(){var d=c._asyncToGenerator(function*(){yield this.load();const C=this._getHelperServiceUrl("printTask");return new (yield new Promise(function(L,X){p(["../tasks/PrintTask"],function(ba){L(aa(ba))},X)})).default(C)});return function(){return d.apply(this,arguments)}}();k.createRouteTask=function(){var d=c._asyncToGenerator(function*(){yield this.load();const C=this._getHelperServiceUrl("route");return new (yield new Promise(function(L,X){p(["../tasks/RouteTask"],
function(ba){L(aa(ba))},X)})).default(C)});return function(){return d.apply(this,arguments)}}();k.createServiceAreaTask=function(){var d=c._asyncToGenerator(function*(){yield this.load();const C=this._getHelperServiceUrl("serviceArea");return new (yield new Promise(function(L,X){p(["../tasks/ServiceAreaTask"],function(ba){L(aa(ba))},X)})).default(C)});return function(){return d.apply(this,arguments)}}();k.fetchBasemaps=function(d,C){const L=new O;L.query=d||(this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:
this.basemapGalleryGroupQuery);L.disableExtraQuery=!0;return this.queryGroups(L,C).then(X=>{L.num=100;L.query='type:"Web Map" -type:"Web Application"';return X.total?(X=X.results[0],L.sortField=X.sortField||"name",L.sortOrder=X.sortOrder||"desc",X.queryItems(L,C)):null}).then(X=>X&&X.total?X.results.filter(ba=>"Web Map"===ba.type).map(ba=>new D({portalItem:ba})):[])};k.fetchCategorySchema=function(d){return this.hasCategorySchema?this._request(this.restUrl+"/portals/self/categorySchema",d).then(C=>
C.categorySchema):W.isAborted(d)?Promise.reject(W.createAbortError()):Promise.resolve([])};k.fetchFeaturedGroups=function(d){const C=this.featuredGroups,L=new O;L.num=100;L.sortField="title";if(C&&C.length){const X=[];for(const ba of C)X.push(`(title:"${ba.title}" AND owner:${ba.owner})`);L.query=X.join(" OR ");return this.queryGroups(L,d).then(ba=>ba.results)}return W.isAborted(d)?Promise.reject(W.createAbortError()):Promise.resolve([])};k.fetchRegions=function(d){const C=this.user&&this.user.culture||
this.culture||Z.getLocale();return this._request(this.restUrl+"/portals/regions",{...d,query:{culture:C}})};H.getDefault=function(){if(!m._default||m._default.destroyed)m._default=new m;return m._default};k.queryGroups=function(d,C){return this._queryPortal("/community/groups",d,"PortalGroup",C)};k.queryItems=function(d,C){return this._queryPortal("/search",d,"PortalItem",C)};k.queryUsers=function(d,C){d.sortField||(d.sortField="username");return this._queryPortal("/community/users",d,"PortalUser",
C)};k.toJSON=function(){throw new E("internal:not-yet-implemented","Portal.toJSON is not yet implemented");};H.fromJSON=function(d){if(!d)return null;if(d.declaredClass)throw Error("JSON object is already hydrated");return new m({sourceJSON:d})};k._getHelperService=function(d){const C=this.helperServices&&this.helperServices[d];if(!C)throw new E("portal:service-not-found",`The \`helperServices\` do not include an entry named "${d}"`);return C};k._getHelperServiceUrl=function(d){const C=this._getHelperService(d);
if(!C.url)throw new E("portal:service-url-not-found",`The \`helperServices\` entry "${d}" does not include a \`url\` value`);return C.url};k._fetchSelf=function(d=this.authMode,C=!1,L){const X=this.restUrl+"/portals/self";d={authMode:d,query:{culture:Z.getLocale().toLowerCase()},...L};"auto"===d.authMode&&(d.authMode="no-prompt");C&&(d.query.default=!0);return this._request(X,d)};k._queryPortal=function(d,C,L,X){const ba=B.ensureType(O,C),ia=na=>this._request(this.restUrl+d,{...ba.toRequestOptions(this),
...X}).then(ra=>{const wa=ba.clone();wa.start=ra.nextStart;return new P({nextQueryParams:wa,queryParams:ba,total:ra.total,results:m._resultsToTypedArray(na,{portal:this},ra,X)})}).then(ra=>Promise.all(ra.results.map(wa=>"function"===typeof wa.when?wa.when():ra)).then(()=>ra,wa=>{W.throwIfAbortError(wa);return ra}));return L&&Q[L]?Q[L]().then(({default:na})=>{W.throwIfAborted(X);return ia(na)}):ia()};k._signIn=function(){if(this.authMode===m.AUTH_MODE_ANONYMOUS)return Promise.reject(new E("portal:invalid-auth-mode",
`Current "authMode"' is "${this.authMode}"`));if("failed"===this.loadStatus)return Promise.reject(this.loadError);const d=C=>Promise.resolve().then(()=>{if("not-loaded"===this.loadStatus)return C||(this.authMode="immediate"),this.load().then(()=>null);if("loading"===this.loadStatus)return this.load().then(()=>{if(this.credential)return null;this.credential=C;return this._fetchSelf("immediate")});if(this.user&&this.credential===C)return null;this.credential=C;return this._fetchSelf("immediate")}).then(L=>
{L&&(this.sourceJSON=L,this.read(L))});return u.id?u.id.getCredential(this.restUrl).then(C=>d(C)):d(this.credential)};k._normalizeSSL=function(d){return d.replace(/^http:/i,"https:").replace(":7080",":7443")};k._normalizeUrl=function(d){const C=this.credential&&this.credential.token;return this._normalizeSSL(C?d+(-1<d.indexOf("?")?"\x26":"?")+"token\x3d"+C:d)};k._requestToTypedArray=function(d,C,L){return this._request(d,C).then(X=>{const ba=m._resultsToTypedArray(L,{portal:this},X);return Promise.all(ba.map(ia=>
"function"===typeof ia.when?ia.when():X)).then(()=>ba,()=>ba)})};k._request=function(d,C={}){const L={f:"json",...C.query},{authMode:X=this.authMode===m.AUTH_MODE_ANONYMOUS?"anonymous":"auto",body:ba=null,cacheBust:ia=!1,method:na="auto",responseType:ra="json",signal:wa}=C;C={authMode:X,body:ba,cacheBust:ia,method:na,query:L,responseType:ra,timeout:0,signal:wa};return n(this._normalizeSSL(d),C).then(Ca=>Ca.data)};H._resultsToTypedArray=function(d,C,L,X){if(L){const ba=J.isSome(X)?X.signal:null;L=
L.listings||L.notifications||L.userInvitations||L.tags||L.items||L.groups||L.comments||L.provisions||L.results||L.relatedItems||L;if(d||C)L=L.map(ia=>{ia=Object.assign(d?d.fromJSON(ia):ia,C);"function"===typeof ia.load&&ia.load(ba);return ia})}else L=[];return L};c._createClass(H,[{key:"extraQuery",get:function(){const d=!(this.user&&this.user.orgId)||this.canSearchPublic;return this.id&&!d?` AND orgid:${this.id}`:null}},{key:"isOrganization",get:function(){return!!this.access}},{key:"restUrl",get:function(){let d=
this.url;if(d){const C=d.indexOf("/sharing");d=0<C?d.substring(0,C):this.url.replace(/\/+$/,"");d+="/sharing/rest"}return d}},{key:"thumbnailUrl",get:function(){const d=this.restUrl,C=this.thumbnail;return d&&C?this._normalizeSSL(d+"/portals/self/resources/"+C):null}}]);return H}(t.JSONSupportMixin(v));g.AUTH_MODE_ANONYMOUS="anonymous";g.AUTH_MODE_AUTO="auto";g.AUTH_MODE_IMMEDIATE="immediate";x.__decorate([q.property()],g.prototype,"access",void 0);x.__decorate([q.property()],g.prototype,"allSSL",
void 0);x.__decorate([q.property()],g.prototype,"authMode",void 0);x.__decorate([q.property()],g.prototype,"authorizedCrossOriginDomains",void 0);x.__decorate([r.reader("authorizedCrossOriginDomains")],g.prototype,"readAuthorizedCrossOriginDomains",null);x.__decorate([q.property()],g.prototype,"basemapGalleryGroupQuery",void 0);x.__decorate([q.property()],g.prototype,"bingKey",void 0);x.__decorate([q.property()],g.prototype,"canListApps",void 0);x.__decorate([q.property()],g.prototype,"canListData",
void 0);x.__decorate([q.property()],g.prototype,"canListPreProvisionedItems",void 0);x.__decorate([q.property()],g.prototype,"canProvisionDirectPurchase",void 0);x.__decorate([q.property()],g.prototype,"canSearchPublic",void 0);x.__decorate([q.property()],g.prototype,"canShareBingPublic",void 0);x.__decorate([q.property()],g.prototype,"canSharePublic",void 0);x.__decorate([q.property()],g.prototype,"canSignInArcGIS",void 0);x.__decorate([q.property()],g.prototype,"canSignInIDP",void 0);x.__decorate([q.property()],
g.prototype,"colorSetsGroupQuery",void 0);x.__decorate([q.property()],g.prototype,"commentsEnabled",void 0);x.__decorate([q.property({type:Date})],g.prototype,"created",void 0);x.__decorate([q.property()],g.prototype,"credential",void 0);x.__decorate([q.property()],g.prototype,"culture",void 0);x.__decorate([q.property()],g.prototype,"currentVersion",void 0);x.__decorate([q.property()],g.prototype,"customBaseUrl",void 0);x.__decorate([q.property()],g.prototype,"defaultBasemap",void 0);x.__decorate([r.reader("defaultBasemap")],
g.prototype,"readDefaultBasemap",null);x.__decorate([q.property({type:F})],g.prototype,"defaultExtent",void 0);x.__decorate([q.property()],g.prototype,"defaultVectorBasemap",void 0);x.__decorate([r.reader("defaultVectorBasemap")],g.prototype,"readDefaultVectorBasemap",null);x.__decorate([q.property()],g.prototype,"description",void 0);x.__decorate([q.property()],g.prototype,"eueiEnabled",void 0);x.__decorate([q.property({readOnly:!0})],g.prototype,"extraQuery",null);x.__decorate([q.property()],g.prototype,
"featuredGroups",void 0);x.__decorate([q.property()],g.prototype,"featuredItemsGroupQuery",void 0);x.__decorate([q.property()],g.prototype,"galleryTemplatesGroupQuery",void 0);x.__decorate([q.property()],g.prototype,"livingAtlasGroupQuery",void 0);x.__decorate([q.property()],g.prototype,"hasCategorySchema",void 0);x.__decorate([q.property()],g.prototype,"helpBase",void 0);x.__decorate([q.property()],g.prototype,"helperServices",void 0);x.__decorate([q.property()],g.prototype,"helpMap",void 0);x.__decorate([q.property()],
g.prototype,"homePageFeaturedContent",void 0);x.__decorate([q.property()],g.prototype,"homePageFeaturedContentCount",void 0);x.__decorate([q.property()],g.prototype,"httpPort",void 0);x.__decorate([q.property()],g.prototype,"httpsPort",void 0);x.__decorate([q.property()],g.prototype,"id",void 0);x.__decorate([q.property()],g.prototype,"ipCntryCode",void 0);x.__decorate([q.property({readOnly:!0})],g.prototype,"isOrganization",null);x.__decorate([q.property()],g.prototype,"isPortal",void 0);x.__decorate([q.property()],
g.prototype,"isReadOnly",void 0);x.__decorate([q.property()],g.prototype,"layerTemplatesGroupQuery",void 0);x.__decorate([q.property()],g.prototype,"maxTokenExpirationMinutes",void 0);x.__decorate([q.property({type:Date})],g.prototype,"modified",void 0);x.__decorate([q.property()],g.prototype,"name",void 0);x.__decorate([q.property()],g.prototype,"portalHostname",void 0);x.__decorate([q.property()],g.prototype,"portalMode",void 0);x.__decorate([q.property()],g.prototype,"portalProperties",void 0);
x.__decorate([q.property()],g.prototype,"region",void 0);x.__decorate([q.property({readOnly:!0})],g.prototype,"restUrl",null);x.__decorate([q.property()],g.prototype,"rotatorPanels",void 0);x.__decorate([q.property()],g.prototype,"showHomePageDescription",void 0);x.__decorate([q.property()],g.prototype,"sourceJSON",void 0);x.__decorate([q.property()],g.prototype,"staticImagesUrl",void 0);x.__decorate([q.property()],g.prototype,"stylesGroupQuery",void 0);x.__decorate([q.property()],g.prototype,"supportsHostedServices",
void 0);x.__decorate([q.property()],g.prototype,"symbolSetsGroupQuery",void 0);x.__decorate([q.property()],g.prototype,"templatesGroupQuery",void 0);x.__decorate([q.property()],g.prototype,"thumbnail",void 0);x.__decorate([q.property({readOnly:!0})],g.prototype,"thumbnailUrl",null);x.__decorate([q.property()],g.prototype,"units",void 0);x.__decorate([q.property()],g.prototype,"url",void 0);x.__decorate([q.property()],g.prototype,"urlKey",void 0);x.__decorate([r.reader("urlKey")],g.prototype,"readUrlKey",
null);x.__decorate([q.property()],g.prototype,"user",void 0);x.__decorate([r.reader("user")],g.prototype,"readUser",null);x.__decorate([q.property()],g.prototype,"useStandardizedQuery",void 0);x.__decorate([q.property()],g.prototype,"useVectorBasemaps",void 0);x.__decorate([q.property()],g.prototype,"vectorBasemapGalleryGroupQuery",void 0);return g=m=x.__decorate([G.subclass("esri.portal.Portal")],g)})},"esri/intl":function(){define("exports ./intl/date ./intl/number ./intl/substitute ./intl/locale ./intl/messages ./intl/t9n ./assets".split(" "),
function(p,c,x,K,g,u,n,E){u.registerMessageBundleLoader(n.createJSONLoader({pattern:"esri/",location:E.getAssetUrl}));p.convertDateFormatToIntlOptions=c.convertDateFormatToIntlOptions;p.formatDate=c.formatDate;p.convertNumberFormatToIntlOptions=x.convertNumberFormatToIntlOptions;p.formatNumber=x.formatNumber;p.substitute=K.substitute;p.getLocale=g.getLocale;p.onLocaleChange=g.onLocaleChange;p.prefersRTL=g.prefersRTL;p.setLocale=g.setLocale;p.fetchMessageBundle=u.fetchMessageBundle;p.normalizeMessageBundleLocale=
u.normalizeMessageBundleLocale;p.registerMessageBundleLoader=u.registerMessageBundleLoader;p.createJSONLoader=n.createJSONLoader;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/intl/date":function(){define(["exports","../core/jsonMap","./locale"],function(p,c,x){function K(B){B=B||A;if(!q.has(B)){var e=x.getLocale();e=W[x.getLocale()]||e;q.set(B,new Intl.DateTimeFormat(e,B))}return q.get(B)}var g={year:"numeric",month:"numeric",day:"numeric"},u={year:"numeric",month:"long",day:"numeric"},
n={year:"numeric",month:"short",day:"numeric"};const E={year:"numeric",month:"long",weekday:"long",day:"numeric"},t={hour:"numeric",minute:"numeric"},v={...t,second:"numeric"},J={"short-date":g,"short-date-short-time":{...g,...t},"short-date-short-time-24":{...g,...t,hour12:!1},"short-date-long-time":{...g,...v},"short-date-long-time-24":{...g,...v,hour12:!1},"short-date-le":g,"short-date-le-short-time":{...g,...t},"short-date-le-short-time-24":{...g,...t,hour12:!1},"short-date-le-long-time":{...g,
...v},"short-date-le-long-time-24":{...g,...v,hour12:!1},"long-month-day-year":u,"long-month-day-year-short-time":{...u,...t},"long-month-day-year-short-time-24":{...u,...t,hour12:!1},"long-month-day-year-long-time":{...u,...v},"long-month-day-year-long-time-24":{...u,...v,hour12:!1},"day-short-month-year":n,"day-short-month-year-short-time":{...n,...t},"day-short-month-year-short-time-24":{...n,...t,hour12:!1},"day-short-month-year-long-time":{...n,...v},"day-short-month-year-long-time-24":{...n,
...v,hour12:!1},"long-date":E,"long-date-short-time":{...E,...t},"long-date-short-time-24":{...E,...t,hour12:!1},"long-date-long-time":{...E,...v},"long-date-long-time-24":{...E,...v,hour12:!1},"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":t,"long-time":v};c=c.strict()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",
shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",
dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",
shortMonthYear:"short-month-year",year:"year"});g=c.apiValues;u=c.toJSON.bind(c);n=c.fromJSON.bind(c);const W={ar:"ar-u-nu-latn-ca-gregory"};let q=new WeakMap,A=J["short-date-short-time"];x.beforeLocaleChange(()=>{q=new WeakMap;A=J["short-date-short-time"]});p.convertDateFormatToIntlOptions=function(B){return J[B]||null};p.dateFormats=g;p.dictionary=c;p.formatDate=function(B,e){return K(e).format(B)};p.fromJSON=n;p.getDateTimeFormatter=K;p.toJSON=u;Object.defineProperty(p,"__esModule",{value:!0})})},
"esri/intl/locale":function(){define(["exports","../core/global"],function(p,c){function x(){var e,y;return null!=(e=null!=W?W:null==(y=c.navigator)?void 0:y.language)?e:"en"}function K(){void 0===J&&(J=x());return J}function g(e=K()){e=/^([a-zA-Z]{2,3})(?:[_\-]\w+)*$/.exec(e);return null==e?void 0:e[1].toLowerCase()}function u(){var e;const y=null!=(e=v)?e:x();J!==y&&(J=y,[...B].forEach(r=>{r.call(null,y)}),[...A].forEach(r=>{r.call(null,y)}))}var n,E,t;let v=void 0,J=void 0;const W=null!=(n=null==
(E=c.esriConfig)?void 0:E.locale)?n:null==(t=c.dojoConfig)?void 0:t.locale,q={he:!0,ar:!0},A=[],B=[];null==c.addEventListener?void 0:c.addEventListener("languagechange",u);p.beforeLocaleChange=function(e){B.push(e);return{remove(){A.splice(B.indexOf(e),1)}}};p.getDefaultLocale=x;p.getLanguage=g;p.getLocale=K;p.onLocaleChange=function(e){A.push(e);return{remove(){A.splice(A.indexOf(e),1)}}};p.prefersRTL=function(e=K()){e=g(e);return void 0!==e&&(q[e]||!1)};p.setLocale=function(e){v=e?e:void 0;u()};
Object.defineProperty(p,"__esModule",{value:!0})})},"esri/intl/number":function(){define(["exports","../core/maybe","./locale"],function(p,c,x){function K(E){const t=E||n;if(!u.has(t)){var v=x.getLocale();v=g[x.getLocale()]||v;u.set(t,new Intl.NumberFormat(v,E))}return c.assumeNonNull(u.get(t))}const g={ar:"ar-u-nu-latn"};let u=new WeakMap,n={};x.beforeLocaleChange(()=>{u=new WeakMap;n={}});p.convertNumberFormatToIntlOptions=function(E={}){const t={};null!=E.digitSeparator&&(t.useGrouping=E.digitSeparator);
null!=E.places&&(t.minimumFractionDigits=t.maximumFractionDigits=E.places);return t};p.formatNumber=function(E,t){return K(t).format(E)};p.getFormatter=K;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/intl/substitute":function(){define("exports ../core/Logger ../core/object ../core/string ./date ./number".split(" "),function(p,c,x,K,g,u){function n(t){switch(typeof t){case "string":return t;case "number":return u.formatNumber(t);case "boolean":return""+t;default:return t instanceof Date?
g.formatDate(t):""}}const E=c.getLogger("esri.intl");p.substitute=function(t,v,J={}){const {format:W={}}=J;return K.replace(t,q=>{{const e=q.indexOf(":");if(-1===e)var A=q.trim();else{A=q.slice(0,e).trim();var B=q.slice(e+1).trim()}if(A)if(q=x.getDeepValue(A,v),null==q)B="";else if(A=W[B]||W[A])b:switch(A.type){case "date":B=g.formatDate(q,A.intlOptions);break b;case "number":B=u.formatNumber(q,A.intlOptions);break b;default:E.warn("missing format descriptor for key {key}"),B=n(q)}else if(B)b:switch(B.toLowerCase()){case "dateformat":B=
g.formatDate(q);break b;case "numberformat":B=u.formatNumber(q);break b;default:E.warn(`inline format is unsupported since 4.12: ${B}`),B=/^(dateformat|datestring)/i.test(B)?g.formatDate(q):/^numberformat/i.test(B)?u.formatNumber(q):n(q)}else B=n(q);else B=""}return B})};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/intl/messages":function(){define(["exports","../chunks/_rollupPluginBabelHelpers","../core/Error","../core/promiseUtils","./locale"],function(p,c,x,K,g){function u(r){var G;
return null!=(G=q[r])?G:!1}function n(r){for(const G of B.keys())J(r.pattern,G)&&B.delete(G)}function E(){E=c._asyncToGenerator(function*(r){const G=g.getLocale();B.has(r)||B.set(r,t(r,G));r=B.get(r);yield e.add(r);return r});return E.apply(this,arguments)}function t(r,G){return v.apply(this,arguments)}function v(){v=c._asyncToGenerator(function*(r,G){const F=[];for(const O of A)if(J(O.pattern,r))try{return yield O.fetchMessageBundle(r,G)}catch(P){F.push(P)}if(F.length)throw new x("intl:message-bundle-error",
`Errors occurred while loading "${r}"`,{errors:F});throw new x("intl:no-message-bundle-loader",`No loader found for message bundle "${r}"`);});return v.apply(this,arguments)}function J(r,G){return"string"===typeof r?G.startsWith(r):r.test(G)}const W=/^([a-z]{2})(?:[-_]([A-Za-z]{2}))?$/,q={ar:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:!0,nl:!0,pl:!0,"pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,
uk:!0,vi:!0,"zh-CN":!0,"zh-HK":!0,"zh-TW":!0},A=[],B=new Map;g.beforeLocaleChange(()=>{B.clear()});const e=new (function(){function r(){this._numLoading=0}var G=r.prototype;G.waitForAll=function(){var F=c._asyncToGenerator(function*(){this._dfd&&(yield this._dfd.promise)});return function(){return F.apply(this,arguments)}}();G.add=function(F){this._increase();F.then(()=>this._decrease(),()=>this._decrease());return this.waitForAll()};G._increase=function(){this._numLoading++;this._dfd||(this._dfd=
K.createDeferred())};G._decrease=function(){this._numLoading=Math.max(this._numLoading-1,0);this._dfd&&0===this._numLoading&&(this._dfd.resolve(),this._dfd=null)};return r}()),y={cache:B,loaders:A};p.fetchMessageBundle=function(r){return E.apply(this,arguments)};p.normalizeMessageBundleLocale=function(r){if(!W.test(r))return null;const [,G,F]=W.exec(r);r=G+(F?"-"+F.toUpperCase():"");return u(r)?r:u(G)?G:null};p.registerMessageBundleLoader=function(r){A.includes(r)||(n(r),A.unshift(r));return{remove(){const G=
A.indexOf(r);-1<G&&(A.splice(G,1),n(r))}}};p.test=y;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/intl/t9n":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../request ../core/Error ../core/global ../core/maybe ./messages".split(" "),function(p,c,x,K,g,u,n){function E(A,B,e,y){return t.apply(this,arguments)}function t(){t=c._asyncToGenerator(function*(A,B,e,y){var r=B.exec(e);if(!r)throw new K("esri-intl:invalid-bundle",`Bundle id "${e}" is not compatible with the pattern "${B}"`);
B=r[1]?`${r[1]}/`:"";r=r[2];const G=n.normalizeMessageBundleLocale(y);y=`${B}${r}.json`;B=G?`${B}${r}_${G}.json`:y;let F;try{F=yield v(A(B))}catch(O){if(B===y)throw new K("intl:unknown-bundle",`Bundle "${e}" cannot be loaded`,{error:O});try{F=yield v(A(y))}catch(P){throw new K("intl:unknown-bundle",`Bundle "${e}" cannot be loaded`,{error:P});}}return F});return t.apply(this,arguments)}function v(A){return J.apply(this,arguments)}function J(){J=c._asyncToGenerator(function*(A){if(u.isSome(q.fetchBundleAsset))return q.fetchBundleAsset(A);
A=yield x(A,{responseType:"text"});return JSON.parse(A.data)});return J.apply(this,arguments)}let W=function(){function A({base:B="",pattern:e,location:y=new URL(window.location.href)}){let r;r="string"===typeof y?G=>(new URL(G,new URL(y,g.location))).href:y instanceof URL?G=>(new URL(G,y)).href:y;this.pattern="string"===typeof e?new RegExp(`^${e}`):e;this.getAssetUrl=r;B=B?B.endsWith("/")?B:B+"/":"";this.matcher=new RegExp(`^${B}(?:(.*)\/)?(.*)$`)}A.prototype.fetchMessageBundle=function(B,e){return E(this.getAssetUrl,
this.matcher,B,e)};return A}();const q={};p.JSONLoader=W;p.createJSONLoader=function(A){return new W(A)};p.test=q;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/portal/PortalQueryParams":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Accessor ../core/jsonMap ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/has ../core/Logger ../core/accessorSupport/decorators/subclass ../geometry/Extent ../geometry/SpatialReference ../geometry/support/webMercatorUtils".split(" "),
function(p,c,x,K,g,u,n,E,t,v,J,W,q){var A;const B=new K.JSONMap({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});x=A=function(e){function y(G){G=e.call(this,G)||this;G.categories=null;G.disableExtraQuery=!1;G.extent=null;G.num=10;G.query=null;G.sortField=null;G.start=1;return G}p._inheritsLoose(y,e);var r=y.prototype;r.clone=function(){return new A({categories:this.categories?g.clone(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?
this.extent.clone():null,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})};r.toRequestOptions=function(G,F){let O;this.categories&&(O=this.categories.map(Z=>Array.isArray(Z)?JSON.stringify(Z):Z));let P;if(this.extent){var M=q.project(this.extent,W.WGS84);M&&(P=`${M.xmin},${M.ymin},${M.xmax},${M.ymax}`)}M=this.query;!this.disableExtraQuery&&G.extraQuery&&(M="("+M+")"+G.extraQuery);G={categories:O,bbox:P,q:M,num:this.num,sortField:null,sortOrder:null,
start:this.start};this.sortField&&(G.sortField=this.sortField.split(",").map(Z=>B.toJSON(Z.trim())).join(","),G.sortOrder=this.sortOrder);return{query:{...F,...G}}};p._createClass(y,[{key:"sortOrder",get:function(){return this._get("sortOrder")||"asc"},set:function(G){"asc"!==G&&"desc"!==G||this._set("sortOrder",G)}}]);return y}(x);c.__decorate([u.property()],x.prototype,"categories",void 0);c.__decorate([u.property()],x.prototype,"disableExtraQuery",void 0);c.__decorate([u.property({type:J})],x.prototype,
"extent",void 0);c.__decorate([u.property()],x.prototype,"num",void 0);c.__decorate([u.property()],x.prototype,"query",void 0);c.__decorate([u.property()],x.prototype,"sortField",void 0);c.__decorate([u.property()],x.prototype,"sortOrder",null);c.__decorate([u.property()],x.prototype,"start",void 0);return x=A=c.__decorate([v.subclass("esri.portal.PortalQueryParams")],x)})},"esri/portal/PortalQueryResult":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Accessor ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/jsonMap ../core/accessorSupport/decorators/subclass".split(" "),
function(p,c,x,K,g,u,n,E,t){x=function(v){function J(W){W=v.call(this,W)||this;W.nextQueryParams=null;W.queryParams=null;W.results=null;W.total=null;return W}p._inheritsLoose(J,v);return J}(x);c.__decorate([K.property()],x.prototype,"nextQueryParams",void 0);c.__decorate([K.property()],x.prototype,"queryParams",void 0);c.__decorate([K.property()],x.prototype,"results",void 0);c.__decorate([K.property()],x.prototype,"total",void 0);return x=c.__decorate([t.subclass("esri.portal.PortalQueryResult")],
x)})},"esri/portal/PortalUser":function(){define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Error ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/jsonMap ../core/accessorSupport/decorators/subclass ./PortalFolder ./PortalGroup".split(" "),function(p,c,x,K,g,u,n,E,t,v,J,W,q){var A;g=A=function(B){function e(...r){r=B.call(this,...r)||this;r.access=null;r.created=null;r.culture=null;r.description=
null;r.email=null;r.fullName=null;r.modified=null;r.orgId=null;r.portal=null;r.preferredView=null;r.privileges=null;r.region=null;r.role=null;r.roleId=null;r.sourceJSON=null;r.units=null;r.username=null;r.userType=null;return r}c._inheritsLoose(e,B);var y=e.prototype;y.addItem=function(r){const G=r&&r.item;var F=r&&r.data;r=r&&r.folder;const O={method:"post"};G&&(O.query=G.createPostQuery(),null!=F&&("string"===typeof F?O.query.text=F:"object"===typeof F&&(O.query.text=JSON.stringify(F))));F=this.userContentUrl;
r&&(F+="/"+("string"===typeof r?r:r.id));return this.portal._request(F+"/addItem",O).then(P=>{G.id=P.id;G.portal=this.portal;return G.loaded?G.reload():G.load()})};y.deleteItem=function(r){let G=this.userContentUrl;r.ownerFolder&&(G+="/"+r.ownerFolder);return this.portal._request(G+`/items/${r.id}/delete`,{method:"post"}).then(()=>{r.id=null;r.portal=null})};y.deleteItems=function(r){const G=this.userContentUrl+"/deleteItems";var F=r.map(O=>O.id);return F.length?(F={method:"post",query:{items:F.join(",")}},
this.portal._request(G,F).then(()=>{r.forEach(O=>{O.id=null;O.portal=null})})):Promise.resolve(void 0)};y.fetchFolders=function(){return this.portal._request(this.userContentUrl,{query:{num:1}}).then(r=>r&&r.folders?r.folders.map(G=>{G=W.fromJSON(G);G.portal=this.portal;return G}):[])};y.fetchGroups=function(){return this.portal._request(this.url).then(r=>r&&r.groups?r.groups.map(G=>{G=q.fromJSON(G);G.portal=this.portal;return G}):[])};y.fetchItems=function(r){r||(r={});let G=this.userContentUrl;
r.folder&&(G+="/"+r.folder.id);let F;return(new Promise(function(O,P){p(["./PortalItem"],function(M){O(Object.freeze({__proto__:null,"default":M}))},P)})).then(({default:O})=>{F=O;return this.portal._request(G,{query:{folders:!1,num:r.num||10,start:r.start||1,sortField:r.sortField||"created",sortOrder:r.sortOrder||"asc"}})}).then(O=>{let P;return O&&O.items?(P=O.items.map(M=>{M=F.fromJSON(M);M.portal=this.portal;return M}),Promise.all(P.map(M=>M.load())).catch(M=>M).then(()=>({items:P,nextStart:O.nextStart,
total:O.total}))):{items:[],nextStart:-1,total:0}})};y.fetchTags=function(){return this.portal._request(this.url+"/tags").then(r=>r.tags)};y.getThumbnailUrl=function(r){let G=this.thumbnailUrl;G&&r&&(G+=`&w=${r}`);return G};y.queryFavorites=function(r){return this.favGroupId?(this._favGroup||(this._favGroup=new q({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(r)):Promise.reject(new K("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))};y.toJSON=
function(){throw new K("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented");};e.fromJSON=function(r){if(!r)return null;if(r.declaredClass)throw Error("JSON object is already hydrated");const G=new A;G.sourceJSON=r;G.read(r);return G};c._createClass(e,[{key:"thumbnailUrl",get:function(){const r=this.url,G=this.thumbnail;return r&&G?this.portal._normalizeUrl(`${r}/info/${G}?f=json`):null}},{key:"userContentUrl",get:function(){const r=this.get("portal.restUrl");return r?`${r}/content/users/${this.username}`:
null}},{key:"url",get:function(){const r=this.get("portal.restUrl");return r?`${r}/community/users/${this.username}`:null}}]);return e}(g.JSONSupport);x.__decorate([u.property()],g.prototype,"access",void 0);x.__decorate([u.property({type:Date})],g.prototype,"created",void 0);x.__decorate([u.property()],g.prototype,"culture",void 0);x.__decorate([u.property()],g.prototype,"description",void 0);x.__decorate([u.property()],g.prototype,"email",void 0);x.__decorate([u.property()],g.prototype,"favGroupId",
void 0);x.__decorate([u.property()],g.prototype,"fullName",void 0);x.__decorate([u.property({type:Date})],g.prototype,"modified",void 0);x.__decorate([u.property()],g.prototype,"orgId",void 0);x.__decorate([u.property()],g.prototype,"portal",void 0);x.__decorate([u.property()],g.prototype,"preferredView",void 0);x.__decorate([u.property()],g.prototype,"privileges",void 0);x.__decorate([u.property()],g.prototype,"region",void 0);x.__decorate([u.property()],g.prototype,"role",void 0);x.__decorate([u.property()],
g.prototype,"roleId",void 0);x.__decorate([u.property()],g.prototype,"sourceJSON",void 0);x.__decorate([u.property()],g.prototype,"thumbnail",void 0);x.__decorate([u.property({readOnly:!0})],g.prototype,"thumbnailUrl",null);x.__decorate([u.property()],g.prototype,"units",void 0);x.__decorate([u.property({readOnly:!0})],g.prototype,"userContentUrl",null);x.__decorate([u.property({readOnly:!0})],g.prototype,"url",null);x.__decorate([u.property()],g.prototype,"username",void 0);x.__decorate([u.property()],
g.prototype,"userType",void 0);return g=A=x.__decorate([J.subclass("esri.portal.PortalUser")],g)})},"esri/portal/PortalFolder":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Error ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/jsonMap ../core/accessorSupport/decorators/subclass".split(" "),function(p,c,x,K,g,u,n,E,t,v){K=function(J){function W(q){q=J.call(this,q)||this;q.created=
null;q.id=null;q.portal=null;q.title=null;q.username=null;return q}p._inheritsLoose(W,J);W.prototype.toJSON=function(){throw new x("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented");};p._createClass(W,[{key:"url",get:function(){const q=this.get("portal.restUrl");return q?`${q}/content/users/${this.username}/${this.id}`:null}}]);return W}(K.JSONSupport);c.__decorate([g.property({type:Date})],K.prototype,"created",void 0);c.__decorate([g.property()],K.prototype,"id",void 0);
c.__decorate([g.property()],K.prototype,"portal",void 0);c.__decorate([g.property()],K.prototype,"title",void 0);c.__decorate([g.property({readOnly:!0})],K.prototype,"url",null);c.__decorate([g.property()],K.prototype,"username",void 0);return K=c.__decorate([v.subclass("esri.portal.PortalFolder")],K)})},"esri/portal/PortalGroup":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Error ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/jsonMap ../core/accessorSupport/decorators/subclass ./PortalQueryParams".split(" "),
function(p,c,x,K,g,u,n,E,t,v,J){K=function(W){function q(B){B=W.call(this,B)||this;B.access=null;B.created=null;B.description=null;B.id=null;B.isInvitationOnly=!1;B.modified=null;B.owner=null;B.portal=null;B.snippet=null;B.sortField=null;B.sortOrder=null;B.tags=null;B.title=null;return B}p._inheritsLoose(q,W);var A=q.prototype;A.fetchCategorySchema=function(B){return this.portal._request(this.url+"/categorySchema",B).then(e=>{e=e.categorySchema||[];return e.some(y=>"contentCategorySetsGroupQuery.LivingAtlas"===
y.source)?this._fetchCategorySchemaSet("LivingAtlas",B):e})};A.fetchMembers=function(B){return this.portal._request(this.url+"/users",B)};A.getThumbnailUrl=function(B){let e=this.thumbnailUrl;e&&B&&(e+=`&w=${B}`);return e};A.toJSON=function(){throw new x("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented");};A.queryItems=function(B,e){B=n.ensureType(J,B);if(5<parseFloat(this.portal.currentVersion))return B=B||new J,this.portal._queryPortal(`/content/groups/${this.id}/search`,
B,"PortalItem",e);B=B?B.clone():new J;B.query="group:"+this.id+(B.query?" "+B.query:"");return this.portal.queryItems(B,e)};A._fetchCategorySchemaSet=function(B,e){return this.portal._fetchSelf(this.portal.authMode,!0,e).then(y=>{if(y=y.contentCategorySetsGroupQuery){const r=new J;r.disableExtraQuery=!0;r.num=1;r.query=y;return this.portal.queryGroups(r,e)}throw new x("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found");}).then(y=>{if(y.total){y=y.results[0];const r=
new J;r.num=1;r.query=`typekeywords:"${B}"`;return y.queryItems(r,e)}throw new x("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found");}).then(y=>y.total?y.results[0].fetchData("json",e).then(r=>(r=r&&r.categorySchema)&&r.length?r:[]):[])};p._createClass(q,[{key:"thumbnailUrl",get:function(){const B=this.url,e=this.thumbnail;return B&&e?this.portal._normalizeUrl(`${B}/info/${e}?f=json`):null}},{key:"url",get:function(){const B=this.get("portal.restUrl");return B?B+"/community/groups/"+
this.id:null}}]);return q}(K.JSONSupport);c.__decorate([g.property()],K.prototype,"access",void 0);c.__decorate([g.property({type:Date})],K.prototype,"created",void 0);c.__decorate([g.property()],K.prototype,"description",void 0);c.__decorate([g.property()],K.prototype,"id",void 0);c.__decorate([g.property()],K.prototype,"isInvitationOnly",void 0);c.__decorate([g.property({type:Date})],K.prototype,"modified",void 0);c.__decorate([g.property()],K.prototype,"owner",void 0);c.__decorate([g.property()],
K.prototype,"portal",void 0);c.__decorate([g.property()],K.prototype,"snippet",void 0);c.__decorate([g.property()],K.prototype,"sortField",void 0);c.__decorate([g.property()],K.prototype,"sortOrder",void 0);c.__decorate([g.property()],K.prototype,"tags",void 0);c.__decorate([g.property()],K.prototype,"thumbnail",void 0);c.__decorate([g.property({readOnly:!0})],K.prototype,"thumbnailUrl",null);c.__decorate([g.property()],K.prototype,"title",void 0);c.__decorate([g.property({readOnly:!0})],K.prototype,
"url",null);return K=c.__decorate([v.subclass("esri.portal.PortalGroup")],K)})},"esri/portal/PortalItem":function(){define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../assets ../core/Error ../core/JSONSupport ../core/lang ../core/Loadable ../core/maybe ../core/urlUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/has ../core/Logger ../core/jsonMap ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../geometry/Extent ./Portal ./PortalItemResource ./PortalRating".split(" "),
function(p,c,x,K,g,u,n,E,t,v,J,W,q,A,B,e,y,r,G,F,O){var P;u=P=function(M){function Z(m){m=M.call(this,m)||this;m.access=null;m.accessInformation=null;m.apiKey=null;m.applicationProxies=null;m.avgRating=null;m.categories=null;m.created=null;m.culture=null;m.description=null;m.extent=null;m.groupCategories=null;m.id=null;m.itemControl=null;m.licenseInfo=null;m.modified=null;m.name=null;m.numComments=null;m.numRatings=null;m.numViews=null;m.owner=null;m.ownerFolder=null;m.portal=null;m.screenshots=null;
m.size=null;m.snippet=null;m.sourceJSON=null;m.tags=null;m.title=null;m.type=null;m.typeKeywords=null;m.url=null;return m}c._inheritsLoose(Z,M);Z.from=function(m){return W.ensureClass(P,m)};var aa=Z.prototype;aa.destroy=function(){this.portal=null};aa.readExtent=function(m){return m&&m.length?new r(m[0][0],m[0][1],m[1][0],m[1][1]):null};aa.load=function(m){this.portal||(this.portal=G.getDefault());const D=this.portal.load(m).then(()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?this.portal._request(this.itemUrl,
{signal:t.isSome(m)?m.signal:null,query:{token:this.apiKey}}):{}).then(Q=>{this.sourceJSON=Q;this.read(Q)});this.addResolvingPromise(D);return Promise.resolve(this)};aa.addRating=function(m){const D={method:"post",query:{}};m instanceof O&&(m=m.rating);isNaN(m)||"number"!==typeof m||(D.query.rating=m);return this.portal._request(this.itemUrl+"/addRating",D).then(()=>new O({rating:m,created:new Date}))};aa.clone=function(){const m={access:this.access,accessInformation:this.accessInformation,applicationProxies:n.clone(this.applicationProxies),
avgRating:this.avgRating,categories:n.clone(this.categories),created:n.clone(this.created),culture:this.culture,description:this.description,extent:n.clone(this.extent),groupCategories:n.clone(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:n.clone(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:n.clone(this.screenshots),
size:this.size,snippet:this.snippet,tags:n.clone(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:n.clone(this.typeKeywords),url:this.url};this.loaded&&(m.loadStatus="loaded");return(new P({sourceJSON:this.sourceJSON})).set(m)};aa.createPostQuery=function(){const m=this.toJSON();for(const D in m)"tags"===D&&null!==m[D]&&(m[D]=m[D].join(", ")),"typeKeywords"===D&&null!==m[D]&&(m[D]=m[D].join(", ")),"extent"===D&&m[D]&&(m[D]=JSON.stringify(m[D]));return m};aa.deleteRating=
function(){return this.portal._request(this.itemUrl+"/deleteRating",{method:"post"}).then(()=>{})};aa.fetchData=function(m="json",D){return this.portal._request(this.itemUrl+"/data",{responseType:m,...D,query:{token:this.apiKey}})};aa.fetchRating=function(m){return this.portal._request(this.itemUrl+"/rating",{query:{token:this.apiKey},...m}).then(D=>null!=D.rating?(D.created=new Date(D.created),new O(D)):null)};aa.fetchRelatedItems=function(m,D){return this.portal._requestToTypedArray(this.itemUrl+
"/relatedItems",{query:{...m,token:this.apiKey},...D},P)};aa.getThumbnailUrl=function(m){let D=this.thumbnailUrl;D&&m&&(D+=`&w=${m}`);return D};aa.reload=function(){return this.portal._request(this.itemUrl,{cacheBust:!0,query:{token:this.apiKey}}).then(m=>{this.sourceJSON=m;this.read(m);return this})};aa.update=function(m){return this.id?this.load().then(()=>this.portal._signIn()).then(()=>{const D=m&&m.data,Q={method:"post"};Q.query=this.createPostQuery();for(const V in Q.query)null===Q.query[V]&&
(Q.query[V]="");Q.query.clearEmptyFields=!0;null!=D&&("string"===typeof D?Q.query.text=D:"object"===typeof D&&(Q.query.text=JSON.stringify(D)));return this.portal._request(`${this.userItemUrl}/update`,Q).then(()=>this.reload())}):Promise.reject(new g("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))};aa.updateThumbnail=function(m){return this.id?this.load().then(()=>this.portal._signIn()).then(()=>{const D=m.thumbnail,Q=m.filename,V={method:"post"};if("string"===typeof D)v.isDataProtocol(D)?
V.query={data:D}:V.query={url:v.makeAbsolute(D)},t.isSome(Q)&&(V.query.filename=Q);else{const H=new FormData;t.isSome(Q)?H.append("file",D,Q):H.append("file",D);V.body=H}return this.portal._request(`${this.userItemUrl}/updateThumbnail`,V).then(()=>this.reload())}):Promise.reject(new g("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))};aa.fetchResources=function(){var m=c._asyncToGenerator(function*(D={},Q){return(yield new Promise(function(V,H){p(["./support/resourceUtils"],
V,H)})).fetchResources(this,D,Q)});return function(){return m.apply(this,arguments)}}();aa.addResource=function(){var m=c._asyncToGenerator(function*(D,Q,V){const H=yield new Promise(function(k,d){p(["./support/resourceUtils"],k,d)});D.portalItem=this;return H.addOrUpdateResource(D,"add",Q,V)});return function(D,Q,V){return m.apply(this,arguments)}}();aa.removeResource=function(){var m=c._asyncToGenerator(function*(D,Q){const V=yield new Promise(function(H,k){p(["./support/resourceUtils"],H,k)});
if(D.portalItem&&D.portalItem.itemUrl!==this.itemUrl)throw new g("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return V.removeResource(this,D,Q)});return function(D,Q){return m.apply(this,arguments)}}();aa.removeAllResources=function(){var m=c._asyncToGenerator(function*(D){return(yield new Promise(function(Q,V){p(["./support/resourceUtils"],Q,V)})).removeAllResources(this,D)});return function(D){return m.apply(this,arguments)}}();
aa.resourceFromPath=function(m){return new F({portalItem:this,path:m})};aa.toJSON=function(){var m=this.extent;m={created:this.created&&this.created.getTime(),description:this.description,extent:m&&[[m.xmin,m.ymin],[m.xmax,m.ymax]],id:this.id,modified:this.modified&&this.modified.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,tags:this.tags,thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:this.typeKeywords,url:this.url};return n.fixJson(m)};
Z.fromJSON=function(m){if(!m)return null;if(m.declaredClass)throw Error("JSON object is already hydrated");return new P({sourceJSON:m})};aa._getPostQuery=function(){const m=this.toJSON();for(const D in m)"tags"===D&&null!==m[D]&&(m[D]=m[D].join(", ")),"typeKeywords"===D&&null!==m[D]&&(m[D]=m[D].join(", ")),"extent"===D&&m[D]&&(m[D]=JSON.stringify(m[D]));return m};c._createClass(Z,[{key:"displayName",get:function(){const m=this.type,D=this.typeKeywords||[];let Q=m;"Feature Service"===m||"Feature Collection"===
m?Q=-1<D.indexOf("Table")?"Table":-1<D.indexOf("Route Layer")?"Route Layer":-1<D.indexOf("Markup")?"Markup":"Feature Layer":"Image Service"===m?Q=-1<D.indexOf("Elevation 3D Layer")?"Elevation Layer":-1<D.indexOf("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":"Scene Service"===m?Q="Scene Layer":"Scene Package"===m?Q="Scene Layer Package":"Stream Service"===m?Q="Feature Layer":"Geoprocessing Service"===m&&this.portal&&this.portal.isPortal?Q=-1<D.indexOf("Web Tool")?"Tool":"Geoprocessing Service":
"Geocoding Service"===m?Q="Locator":"Geoenrichment Service"===m?Q="GeoEnrichment Service":"Microsoft Powerpoint"===m?Q="Microsoft PowerPoint":"GeoJson"===m?Q="GeoJSON":"Globe Service"===m?Q="Globe Layer":"Vector Tile Service"===m?Q="Tile Layer":"netCDF"===m?Q="NetCDF":"Map Service"===m?Q=-1===D.indexOf("Spatiotemporal")&&(-1<D.indexOf("Hosted Service")||-1<D.indexOf("Tiled"))&&-1===D.indexOf("Relational")?"Tile Layer":"Map Image Layer":m&&-1<m.toLowerCase().indexOf("add in")?Q=m.replace(/(add in)/gi,
"Add-In"):"datastore catalog service"===m?Q="Big Data File Share":"Compact Tile Package"===m?Q="Tile Package (tpkx)":"OGCFeatureServer"===m&&(Q="OGC Feature Layer");return Q}},{key:"iconUrl",get:function(){var m=this.type&&this.type.toLowerCase()||"";const D=this.typeKeywords||[];let Q=!1,V=!1,H=!1,k=!1,d=!1,C=!1;0<m.indexOf("service")||"feature collection"===m||"kml"===m||"wms"===m||"wmts"===m||"wfs"===m?(Q=-1<D.indexOf("Hosted Service"),"feature service"===m||"feature collection"===m||"kml"===m||
"wfs"===m?(V=-1<D.indexOf("Table"),H=-1<D.indexOf("Route Layer"),k=-1<D.indexOf("Markup"),d=-1!==D.indexOf("Spatiotemporal"),C=-1!==D.indexOf("UtilityNetwork"),m=d&&V?"spatiotemporaltable":V?"table":H?"routelayer":k?"markup":d?"spatiotemporal":Q?"featureshosted":C?"utilitynetwork":"features"):m="map service"===m||"wms"===m||"wmts"===m?Q||-1<D.indexOf("Tiled")||"wmts"===m?"maptiles":"mapimages":"scene service"===m?-1<D.indexOf("Line")?"sceneweblayerline":-1<D.indexOf("3DObject")?"sceneweblayermultipatch":
-1<D.indexOf("Point")?"sceneweblayerpoint":-1<D.indexOf("IntegratedMesh")?"sceneweblayermesh":-1<D.indexOf("PointCloud")?"sceneweblayerpointcloud":-1<D.indexOf("Polygon")?"sceneweblayerpolygon":-1<D.indexOf("Building")?"sceneweblayerbuilding":-1<D.indexOf("Voxel")?"sceneweblayervoxel":"sceneweblayer":"image service"===m?-1<D.indexOf("Elevation 3D Layer")?"elevationlayer":-1<D.indexOf("Tiled Imagery")?"tiledimagerylayer":"imagery":"stream service"===m?"streamlayer":"vector tile service"===m?"vectortile":
"datastore catalog service"===m?"datastorecollection":"geocoding service"===m?"geocodeservice":"geoprocessing service"===m?-1<D.indexOf("Web Tool")&&this.portal&&this.portal.isPortal?"tool":"layers":"layers"):m="web map"===m||"cityengine web scene"===m?"maps":"web scene"===m?-1<D.indexOf("ViewingMode-Local")?"webscenelocal":"websceneglobal":"web mapping application"===m||"mobile application"===m||"application"===m||"operation view"===m||"desktop application"===m?"apps":"map document"===m||"map package"===
m||"published map"===m||"scene document"===m||"globe document"===m||"basemap package"===m||"mobile basemap package"===m||"mobile map package"===m||"project package"===m||"project template"===m||"pro map"===m||"layout"===m||"layer"===m&&-1<D.indexOf("ArcGIS Pro")||"explorer map"===m&&D.indexOf("Explorer Document")?"mapsgray":"service definition"===m||"csv"===m||"shapefile"===m||"cad drawing"===m||"geojson"===m||"360 vr experience"===m||"netcdf"===m||"administrative report"===m?"datafiles":"explorer add in"===
m||"desktop add in"===m||"windows viewer add in"===m||"windows viewer configuration"===m?"appsgray":"arcgis pro add in"===m||"arcgis pro configuration"===m?"addindesktop":"rule package"===m||"file geodatabase"===m||"sqlite geodatabase"===m||"csv collection"===m||"kml collection"===m||"windows mobile package"===m||"map template"===m||"desktop application template"===m||"gml"===m||"arcpad package"===m||"code sample"===m||"form"===m||"document link"===m||"earth configuration"===m||"operations dashboard add in"===
m||"rules package"===m||"image"===m||"workflow manager package"===m||"explorer map"===m&&-1<D.indexOf("Explorer Mapping Application")||-1<D.indexOf("Document")?"datafilesgray":"network analysis service"===m||"geoprocessing service"===m||"geodata service"===m||"geometry service"===m||"geoprocessing package"===m||"locator package"===m||"geoprocessing sample"===m||"workflow manager service"===m?"toolsgray":"layer"===m||"layer package"===m||"explorer layer"===m?"layersgray":"scene package"===m?"scenepackage":
"mobile scene package"===m?"mobilescenepackage":"tile package"===m||"compact tile package"===m?"tilepackage":"task file"===m?"taskfile":"report template"===m?"report-template":"statistical data collection"===m?"statisticaldatacollection":"insights workbook"===m?"workbook":"insights model"===m?"insightsmodel":"insights page"===m?"insightspage":"insights theme"===m?"insightstheme":"hub initiative"===m?"hubinitiative":"hubpage"===m?"hubpage":"hub event"===m?"hubevent":"hub site application"===m?"hubsite":
"relational database connection"===m?"relationaldatabaseconnection":"big data file share"===m?"datastorecollection":"image collection"===m?"imagecollection":"style"===m?"style":"desktop style"===m?"desktopstyle":"dashboard"===m?"dashboard":"raster function template"===m?"rasterprocessingtemplate":"vector tile package"===m?"vectortilepackage":"ortho mapping project"===m?"orthomappingproject":"ortho mapping template"===m?"orthomappingtemplate":"solution"===m?"solutions":"geopackage"===m?"geopackage":
"deep learning package"===m?"deeplearningpackage":"real time analytic"===m?"realtimeanalytics":"big data analytic"===m?"bigdataanalytics":"feed"===m?"feed":"excalibur imagery project"===m?"excaliburimageryproject":"notebook"===m?"notebook":"storymap"===m?"storymap":"survey123 add in"===m?"survey123addin":"mission"===m?"mission":"mission report"===m?"missionreport":"quickcapture project"===m?"quickcaptureproject":"pro report"===m?"proreport":"urban model"===m?"urbanmodel":"web experience"===m?"experiencebuilder":
"web experience template"===m?"webexperiencetemplate":"workflow"===m?"workflow":"insights script"===m?"insightsscript":"kernel gateway connection"===m?"kernelgatewayconnection":"hub initiative template"===m?"hubinitiativetemplate":"storymap theme"===m?"storymaptheme":"knowledge graph"===m?"knowledgegraph":"native application"===m?"nativeapp":"native application installer"===m?"nativeappinstaller":"link chart"===m?"linkchart":"investigation"===m?"investigation":"ogcfeatureserver"===m?"features":"pro project"===
m?"proproject":"insights workbook package"===m?"insightsworkbookpackage":"maps";return m?K.getAssetUrl("esri/images/portal/"+m+"16.png"):null}},{key:"isLayer",get:function(){return-1<"Map Service;Feature Service;Feature Collection;Scene Service;Image Service;Stream Service;Vector Tile Service;WMTS;WMS".split(";").indexOf(this.type)}},{key:"itemUrl",get:function(){const m=this.get("portal.restUrl");return m?m+"/content/items/"+this.id:null}},{key:"thumbnailUrl",get:function(){const m=this.itemUrl,
D=this.thumbnail;return m&&D?this.portal._normalizeUrl(`${m}/info/${D}?f=json`):null}},{key:"userItemUrl",get:function(){const m=this.get("portal.restUrl");if(!m)return null;const D=this.owner||this.get("portal.user.username");return D?`${m}/content/users/${this.ownerFolder?`${D}/${this.ownerFolder}`:D}/items/${this.id}`:null}}]);return Z}(u.JSONSupportMixin(E));x.__decorate([J.property({type:["private","shared","org","public"]})],u.prototype,"access",void 0);x.__decorate([J.property()],u.prototype,
"accessInformation",void 0);x.__decorate([J.property({type:String})],u.prototype,"apiKey",void 0);x.__decorate([J.property({json:{read:{source:"appProxies"}}})],u.prototype,"applicationProxies",void 0);x.__decorate([J.property()],u.prototype,"avgRating",void 0);x.__decorate([J.property()],u.prototype,"categories",void 0);x.__decorate([J.property({type:Date})],u.prototype,"created",void 0);x.__decorate([J.property()],u.prototype,"culture",void 0);x.__decorate([J.property()],u.prototype,"description",
void 0);x.__decorate([J.property({readOnly:!0})],u.prototype,"displayName",null);x.__decorate([J.property({type:r})],u.prototype,"extent",void 0);x.__decorate([e.reader("extent")],u.prototype,"readExtent",null);x.__decorate([J.property()],u.prototype,"groupCategories",void 0);x.__decorate([J.property({readOnly:!0})],u.prototype,"iconUrl",null);x.__decorate([J.property()],u.prototype,"id",void 0);x.__decorate([J.property({readOnly:!0})],u.prototype,"isLayer",null);x.__decorate([J.property()],u.prototype,
"itemControl",void 0);x.__decorate([J.property({readOnly:!0})],u.prototype,"itemUrl",null);x.__decorate([J.property()],u.prototype,"licenseInfo",void 0);x.__decorate([J.property({type:Date})],u.prototype,"modified",void 0);x.__decorate([J.property()],u.prototype,"name",void 0);x.__decorate([J.property()],u.prototype,"numComments",void 0);x.__decorate([J.property()],u.prototype,"numRatings",void 0);x.__decorate([J.property()],u.prototype,"numViews",void 0);x.__decorate([J.property()],u.prototype,"owner",
void 0);x.__decorate([J.property()],u.prototype,"ownerFolder",void 0);x.__decorate([J.property({type:G})],u.prototype,"portal",void 0);x.__decorate([J.property()],u.prototype,"screenshots",void 0);x.__decorate([J.property()],u.prototype,"size",void 0);x.__decorate([J.property()],u.prototype,"snippet",void 0);x.__decorate([J.property()],u.prototype,"sourceJSON",void 0);x.__decorate([J.property()],u.prototype,"tags",void 0);x.__decorate([J.property()],u.prototype,"thumbnail",void 0);x.__decorate([J.property({readOnly:!0})],
u.prototype,"thumbnailUrl",null);x.__decorate([J.property()],u.prototype,"title",void 0);x.__decorate([J.property()],u.prototype,"type",void 0);x.__decorate([J.property()],u.prototype,"typeKeywords",void 0);x.__decorate([J.property()],u.prototype,"url",void 0);x.__decorate([J.property({readOnly:!0})],u.prototype,"userItemUrl",null);return u=P=x.__decorate([y.subclass("esri.portal.PortalItem")],u)})},"esri/portal/PortalItemResource":function(){define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Accessor ../core/Error ../core/Logger ../core/maybe ../core/urlUtils ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/decorators/cast ../core/jsonMap ../core/accessorSupport/decorators/subclass".split(" "),
function(p,c,x,K,g,u,n,E,t,v,J,W,q){const A=u.getLogger("esri.portal.PortalItemResource");K=function(B){function e(r){r=B.call(this,r)||this;r.portalItem=null;return r}c._inheritsLoose(e,B);var y=e.prototype;y.normalizeCtorArgs=function(r){return r&&r.portalItem&&r.path?{...r,path:this.normalizePath(r.path,r.portalItem)}:r};y._castPath=function(r){return this.normalizePath(r,this.portalItem)};y.fetch=function(r="json",G){const F=this.url;if(n.isNone(F))throw new g("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");
return this.portalItem.portal._request(F,{responseType:r,query:{token:this.portalItem.apiKey},signal:n.get(G,"signal")})};y.update=function(){var r=c._asyncToGenerator(function*(G,F){return(yield new Promise(function(O,P){p(["./support/resourceUtils"],O,P)})).addOrUpdateResource(this,"update",G,F)});return function(G,F){return r.apply(this,arguments)}}();y.hasPath=function(){return n.isSome(this.path)};y.normalizePath=function(r,G){if(n.isNone(r))return r;r=r.replace(/^\/+/,"");n.isSome(G)&&E.isAbsolute(r)&&
(r=E.makeRelative(r,G.itemUrl));return r.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,"")};c._createClass(e,[{key:"path",set:function(r){n.isSome(r)&&E.isAbsolute(r)?A.error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",r)}},{key:"url",get:function(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}},{key:"itemRelativeUrl",get:function(){return this.portalItem&&this.path?`./resources/${this.path}`:null}}]);
return e}(K);x.__decorate([t.property()],K.prototype,"portalItem",void 0);x.__decorate([t.property({type:String,value:null})],K.prototype,"path",null);x.__decorate([J.cast("path")],K.prototype,"_castPath",null);x.__decorate([t.property({type:String,readOnly:!0})],K.prototype,"url",null);x.__decorate([t.property({type:String,readOnly:!0})],K.prototype,"itemRelativeUrl",null);return K=x.__decorate([q.subclass("esri.portal.PortalItemResource")],K)})},"esri/portal/PortalRating":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Accessor ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/jsonMap ../core/accessorSupport/decorators/subclass".split(" "),
function(p,c,x,K,g,u,n,E,t){x=function(v){function J(W){W=v.call(this,W)||this;W.created=null;W.rating=null;return W}p._inheritsLoose(J,v);return J}(x);c.__decorate([K.property()],x.prototype,"created",void 0);c.__decorate([K.property()],x.prototype,"rating",void 0);return x=c.__decorate([t.subclass("esri.portal.PortalRating")],x)})},"esri/support/basemapDefinitions":function(){define(["exports","../chunks/_rollupPluginBabelHelpers","../assets","../intl/messages"],function(p,c,x,K){function g(){g=
c._asyncToGenerator(function*(u){if(u){var n=-1<u.indexOf("-vector")?u.slice(0,u.indexOf("-vector")):u,E=yield K.fetchMessageBundle("esri/t9n/basemaps");return E[u]||E[n]}});return g.apply(this,arguments)}p.esriBasemapDefinitions={streets:{id:"streets",get thumbnailUrl(){return x.getAssetUrl("esri/images/basemap/streets.jpg")},baseMapLayers:[{id:"streets-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Street Map",
showLegend:!1,visibility:!0,opacity:1}]},satellite:{id:"satellite",get thumbnailUrl(){return x.getAssetUrl("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",get thumbnailUrl(){return x.getAssetUrl("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",
url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Boundaries and Places",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",get thumbnailUrl(){return x.getAssetUrl("esri/images/basemap/terrain.jpg")},
baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},topo:{id:"topo",
get thumbnailUrl(){return x.getAssetUrl("esri/images/basemap/topo.jpg")},baseMapLayers:[{id:"topo-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Topo Map",showLegend:!1,visibility:!0,opacity:1}]},gray:{id:"gray",get thumbnailUrl(){return x.getAssetUrl("esri/images/basemap/gray.jpg")},baseMapLayers:[{id:"gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer",
layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"dark-gray":{id:"dark-gray",get thumbnailUrl(){return x.getAssetUrl("esri/images/basemap/dark-gray.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",
url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"dark-gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",get thumbnailUrl(){return x.getAssetUrl("esri/images/basemap/oceans.jpg")},
baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"national-geographic":{id:"national-geographic",
get thumbnailUrl(){return x.getAssetUrl("esri/images/basemap/national-geographic.jpg")},baseMapLayers:[{id:"national-geographic-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer",title:"NatGeo World Map",showLegend:!1,layerType:"ArcGISTiledMapServiceLayer",visibility:!0,opacity:1}]},osm:{id:"osm",get thumbnailUrl(){return x.getAssetUrl("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,
visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",get thumbnailUrl(){return x.getAssetUrl("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",
layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},"gray-vector":{id:"gray-vector",get thumbnailUrl(){return x.getAssetUrl("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",
layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},"streets-vector":{id:"streets-vector",get thumbnailUrl(){return x.getAssetUrl("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},"topo-vector":{id:"topo-vector",get thumbnailUrl(){return x.getAssetUrl("esri/images/basemap/topo-vector.jpg")},
baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},"streets-night-vector":{id:"streets-night-vector",
get thumbnailUrl(){return x.getAssetUrl("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",get thumbnailUrl(){return x.getAssetUrl("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",
url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",get thumbnailUrl(){return x.getAssetUrl("esri/images/basemap/streets-navigation.jpg")},
baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"arcgis-imagery":{get thumbnailUrl(){return x.getAssetUrl("esri/images/basemap/hybrid.jpg")},title:"Imagery Hybrid",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"},
{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-imagery-standard":{get thumbnailUrl(){return x.getAssetUrl("esri/images/basemap/satellite.jpg")},title:"Imagery",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"}]},"arcgis-imagery-labels":{title:"Hybrid [Reference]",
baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-light-gray":{get thumbnailUrl(){return x.getAssetUrl("esri/images/basemap/gray-vector.jpg")},title:"Light Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Base",title:"Light Gray Canvas Base"},{layerType:"VectorTileLayer",
styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Labels",title:"Light Gray Canvas Labels",isReference:!0}]},"arcgis-dark-gray":{get thumbnailUrl(){return x.getAssetUrl("esri/images/basemap/dark-gray.jpg")},title:"Dark Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Base",title:"Dark Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Labels",
title:"Dark Gray Canvas Labels",isReference:!0}]},"arcgis-navigation":{get thumbnailUrl(){return x.getAssetUrl("esri/images/basemap/streets-navigation.jpg")},title:"Navigation",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Navigation",title:"World Navigation Map"}]},"arcgis-navigation-night":{title:"Navigation (Dark Mode)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:NavigationNight",
title:"World Navigation Map (Dark Mode)"}]},"arcgis-streets":{get thumbnailUrl(){return x.getAssetUrl("esri/images/basemap/streets-vector.jpg")},title:"Streets",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Streets",title:"World Street Map"}]},"arcgis-streets-night":{get thumbnailUrl(){return x.getAssetUrl("esri/images/basemap/streets-night.jpg")},title:"Streets (Night)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsNight",
title:"World Street Map (Night)"}]},"arcgis-streets-relief":{get thumbnailUrl(){return x.getAssetUrl("esri/images/basemap/streets-relief.jpg")},title:"Streets (with Relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsRelief:Base",title:"World Street Map (with Relief)"}]},
"arcgis-topographic":{get thumbnailUrl(){return x.getAssetUrl("esri/images/basemap/topo.jpg")},title:"Topographic",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Topographic:Base",title:"World Topographic Map"}]},"arcgis-oceans":{get thumbnailUrl(){return x.getAssetUrl("esri/images/basemap/oceans.jpg")},
title:"Oceans",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Ocean Base",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Oceans:Labels",title:"World Ocean Reference",isReference:!0}]},"osm-standard":{title:"OpenStreetMap",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Standard",
title:"OpenStreetMap"}]},"osm-standard-relief":{title:"OpenStreetMap (with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StandardRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-streets":{title:"OpenStreetMap (Streets)",baseMapLayers:[{layerType:"VectorTileLayer",
styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Streets",title:"OpenStreetMap (Streets)"}]},"osm-streets-relief":{title:"OpenStreetMap (Streets with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StreetsRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},
"osm-light-gray":{title:"OpenStreetMap (Light Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Base",title:"OSM (Light Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Labels",title:"OSM (Light Gray Reference)",isReference:!0}]},"osm-dark-gray":{title:"OpenStreetMap (Dark Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",
styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Base",title:"OSM (Dark Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Labels",title:"OSM (Dark Gray Reference)",isReference:!0}]},"arcgis-terrain":{title:"Terrain with Labels",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},
{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Base",title:"World Terrain Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Detail",title:"World Terrain Reference",isReference:!0}]},"arcgis-community":{title:"Community",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Community",title:"Community"}]},
"arcgis-charted-territory":{title:"Charted Territory",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ChartedTerritory:Base",title:"Charted Territory"}]},"arcgis-colored-pencil":{title:"Colored Pencil",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ColoredPencil",
title:"Colored Pencil"}]},"arcgis-nova":{title:"Nova",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Nova",title:"Nova"}]},"arcgis-modern-antique":{title:"Modern Antique",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ModernAntique:Base",
title:"Modern Antique"}]},"arcgis-midcentury":{title:"Mid-Century",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Midcentury",title:"Mid-Century"}]},"arcgis-newspaper":{title:"Newspaper",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Newspaper",title:"Newspaper"}]},"arcgis-hillshade-light":{title:"Hillshade",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",
showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"}]},"arcgis-hillshade-dark":{title:"Hillshade (Dark)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade (Dark)",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade_Dark/MapServer"}]}};p.getBasemapTitle=function(u){return g.apply(this,arguments)};Object.defineProperty(p,"__esModule",{value:!0})})},
"esri/webdoc/support/writeUtils":function(){define("exports ../../core/Error ../../core/lang ../../core/maybe ../../core/object ../../core/accessorSupport/extensions/serializableProperty/writer".split(" "),function(p,c,x,K,g,u){function n(J){return!("feature"!==J.type||J.url||!J.source||"memory"!==J.source.type)}function E(J,W){"maxScale"in J&&(W.maxScale=u.numberToJSON(J.maxScale));"minScale"in J&&(W.minScale=u.numberToJSON(J.minScale))}const t=new Set("bing-maps imagery imagery-tile map-image open-street-map tile unknown unsupported vector-tile web-tile".split(" ")),
v=new Set("csv feature geo-rss group imagery imagery-tile kml map-image map-notes ogc-feature tile unknown unsupported vector-tile web-tile wfs".split(" "));p.disableRestrictedWriting=function(J){t.add(J);v.add(J)};p.enableRestrictedWriting=function(J){t.delete(J);v.delete(J)};p.getLayerJSON=function(J,W,q){if(!("write"in J&&J.write))return q&&q.messages&&q.messages.push(new c("layer:unsupported",`Layers (${J.title}, ${J.id}) of type '${J.declaredClass}' cannot be persisted`,{layer:J})),null;if(q.restrictedWebMapWriting){var A=
"basemap"===q.layerContainerType?t:"operational-layers"===q.layerContainerType?v:null;A=K.isSome(A)?A.has(J.type)&&!n(J):!0}else A=!0;if(A)return W={},J.write(W,q)?W:null;if(K.isSome(W)&&(q=W=x.clone(W),n(J)?(A=(A=g.getDeepValue("featureCollection.layers",q))&&A[0]&&A[0].layerDefinition)&&E(J,A):"stream"===J.type?(A=q.layerDefinition=q.layerDefinition||{},E(J,A)):"group"!==J.type&&E(J,q),"blendMode"in J&&(q.blendMode=J.blendMode,"normal"===q.blendMode&&delete q.blendMode),q.opacity=u.numberToJSON(J.opacity),
q.title=J.title||"Layer",q.visibility=J.visible,"legendEnabled"in J&&"wmts"!==J.type))if(n(J)){if(q=q.featureCollection)q.showLegend=J.legendEnabled}else q.showLegend=J.legendEnabled;return W};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/graphics/sources/geojson/geojson":function(){define(["exports","../../../../core/Error","../../OptimizedFeature","../../OptimizedGeometry"],function(p,c,x,K){function*g(r){switch(r.type){case "Feature":yield r;break;case "FeatureCollection":for(const G of r.features)G&&
(yield G)}}function*u(r){if(!r)return null;switch(r.type){case "Point":yield r.coordinates;break;case "LineString":case "MultiPoint":yield*r.coordinates;break;case "MultiLineString":case "Polygon":for(const G of r.coordinates)yield*G;break;case "MultiPolygon":for(const G of r.coordinates)for(const F of G)yield*F}}function*n(r,G={}){const {geometryType:F,objectIdField:O}=G;for(const M of r){var P;const {geometry:Z,properties:aa,id:m}=M;if(Z&&y[Z.type]!==F)continue;r=aa||{};let D=null!=(P=r[O])?P:null;
O&&null!=m&&!r[O]&&(r[O]=D=m);yield new x(Z?J(new K,Z,G):null,r,null,D)}}function E(r){for(const G of r)if(2<G.length)return!0;return!1}function t(r){let G=0;for(let F=0;F<r.length;F++){const O=r[F],P=r[(F+1)%r.length];G+=O[0]*P[1]-P[0]*O[1]}return 0>=G}function v(r){const G=r[0],F=r[r.length-1];G[0]===F[0]&&G[1]===F[1]&&G[2]===F[2]||r.push(G);return r}function J(r,G,F){switch(G.type){case "LineString":return A(r,G.coordinates,F),r;case "MultiLineString":for(const P of G.coordinates)A(r,P,F);return r;
case "MultiPoint":return A(r,G.coordinates,F),r;case "MultiPolygon":for(var O of G.coordinates)for(W(r,O[0],F),G=1;G<O.length;G++)q(r,O[G],F);return r;case "Point":return e(r,G.coordinates,F),r;case "Polygon":O=G.coordinates;W(r,O[0],F);for(G=1;G<O.length;G++)q(r,O[G],F);return r}}function W(r,G,F){G=v(G);t(G)?A(r,G,F):B(r,G,F)}function q(r,G,F){G=v(G);t(G)?B(r,G,F):A(r,G,F)}function A(r,G,F){for(const O of G)e(r,O,F);r.lengths.push(G.length)}function B(r,G,F){for(let O=G.length-1;0<=O;O--)e(r,G[O],
F);r.lengths.push(G.length)}function e(r,G,F){const [O,P,M]=G;r.coords.push(O,P);F.hasZ&&r.coords.push(M||0)}const y={LineString:"esriGeometryPolyline",MultiLineString:"esriGeometryPolyline",MultiPoint:"esriGeometryMultipoint",Point:"esriGeometryPoint",Polygon:"esriGeometryPolygon",MultiPolygon:"esriGeometryPolygon"};p.createOptimizedFeatures=function(r,G){return Array.from(n(g(r),G))};p.getGeometryType=function(r){return y[r]};p.inferLayerProperties=function(r,G={}){const F=[];var O=new Set;const P=
new Set;var M=!1;let Z=Number.NEGATIVE_INFINITY,aa=null,m=!1,D=void 0;({geometryType:G=null}=G);var Q=!1;for(const V of g(r)){const {geometry:H,properties:k,id:d}=V;if(H&&(G||(G=y[H.type]),y[H.type]!==G))continue;M||(M=u(H),M=E(M));!m&&(m=null!=d)&&(D=typeof d,"number"===D&&(aa=Object.keys(k).filter(C=>k[C]===d)));m&&"number"===D&&null!=d&&(Z=Math.max(Z,d),1<aa.length?aa=aa.filter(C=>k[C]===d):1===aa.length&&(aa=k[aa[0]]===d?aa:[]));if(!Q&&k){r=!0;for(const C in k)if(!O.has(C))if(Q=k[C],null==Q)r=
!1,P.add(C);else{a:switch(typeof Q){case "string":Q="esriFieldTypeString";break a;case "number":Q="esriFieldTypeDouble";break a;default:Q="unknown"}"unknown"===Q?P.add(C):(P.delete(C),O.add(C),F.push({name:C,alias:C,type:Q}))}Q=r}}if(O=aa&&1===aa.length&&aa[0]||null)for(const V of F)V.name===O&&(V.type="esriFieldTypeOID");return{fields:F,geometryType:G,hasZ:M,maxObjectId:Math.max(0,Z),objectIdFieldName:O,objectIdFieldType:D,unknownFields:Array.from(P)}};p.validateGeoJSON=function(r){if(!r)throw new c("geojson-layer:empty",
"GeoJSON data is empty");if("Feature"!==r.type&&"FeatureCollection"!==r.type)throw new c("geojson-layer:unsupported-geojson-object","missing or not supported GeoJSON object type",{data:r});({crs:r}=r);if(r){var G="string"===typeof r?r:"name"===r.type?r.properties.name:"EPSG"===r.type?r.properties.code:null,F=/.*(CRS84H?|4326)$/i;if(!G||!F.test(G))throw new c("geojson-layer:unsupported-crs","unsupported GeoJSON 'crs' member",{crs:r});}};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/graphics/sources/support/sourceUtils":function(){define(["require",
"exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../geometry/support/spatialReferenceUtils","../../../support/fieldUtils"],function(p,c,x,K,g){function u(B){return new J(B)}function n(){return E.apply(this,arguments)}function E(){E=x._asyncToGenerator(function*(){return A?A:A=yield new Promise(function(B,e){p(["../../../../geometry/geometryEngineJSON"],B,e)})});return E.apply(this,arguments)}function t(){t=x._asyncToGenerator(function*(B,e){!K.isValid(B)||"esriGeometryPolygon"!==
e&&"esriGeometryPolyline"!==e||(yield n())});return t.apply(this,arguments)}let v=function(){this.description=this.code=null},J=function(B){this.error=new v;this.objectId=this.globalId=null;this.success=!1;this.uniqueId=null;this.error.description=B},W=function(B){this.globalId=null;this.success=!0;this.objectId=this.uniqueId=B};const q=new Set;let A;c.createFeatureEditErrorResult=u;c.createFeatureEditSuccessResult=function(B){return new W(B)};c.loadGeometryEngine=n;c.loadGeometryEngineForSimplify=
function(B,e){return t.apply(this,arguments)};c.mixAttributes=function(B,e,y,r,G=!1,F){q.clear();for(const Z in y){const aa=B.get(Z);if(aa){var O=y[Z];{var P=aa;var M=O;let m=M;"string"===typeof M&&g.isNumericField(P)?m=parseFloat(M):null!=M&&g.isStringField(P)&&"string"!==typeof M&&(m=String(M));P=g.sanitizeNullFieldValue(m)}P!==O&&F&&F.push({name:"invalid-value-type",message:"attribute value was converted to match the field type",details:{field:aa,originalValue:O,sanitizedValue:P}});q.add(aa.name);
if(aa&&(G||aa.editable)){if(O=g.validateFieldValue(aa,P))return u(g.validationErrorToString(O,aa,P));e[aa.name]=P}}}if(r)for(const Z of r)if(!q.has(Z.name))return u(`missing required field "${Z.name}"`);return null};c.simplify=function(B,e){if(!B||!K.isValid(e))return B;if("rings"in B||"paths"in B){if(!A)throw new TypeError("geometry engine not loaded");return A.simplify(e,B)}return B};Object.defineProperty(c,"__esModule",{value:!0})})},"esri/layers/ogc/wfsUtils":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../geometry ../../request ../../core/Error ../../core/interatorUtils ../../core/maybe ../../core/promiseUtils ../../core/urlUtils ../../geometry/projection ../../geometry/support/spatialReferenceUtils ../../geometry/support/typeUtils ../graphics/sources/geojson/geojson ./dateUtils ./xmlUtils ../support/Field ../../geometry/SpatialReference ../../geometry/Extent".split(" "),
function(p,c,x,K,g,u,n,E,t,v,J,W,q,A,B,e,y,r){function G(){G=c._asyncToGenerator(function*(ka,b){b=yield K(ka,{responseType:"text",query:{SERVICE:"WFS",REQUEST:"GetCapabilities",VERSION:"2.0.0",...null==b?void 0:b.customParameters},signal:null==b?void 0:b.signal});b=F(b.data);t.isHTTPSProtocol(ka)&&(t.hasSameOrigin(ka,b.operations.DescribeFeatureType.url,!0)&&(b.operations.DescribeFeatureType.url=t.toHTTPS(b.operations.DescribeFeatureType.url)),t.hasSameOrigin(ka,b.operations.GetFeature.url,!0)&&
(b.operations.GetFeature.url=t.toHTTPS(b.operations.GetFeature.url)));return b});return G.apply(this,arguments)}function F(ka){ka=Ca(ka);Ha(ka);La(ka);const b=ka.firstElementChild,l=new Map;return{operations:O(b),get featureTypes(){return Array.from(P(b,l))},readFeatureTypes:()=>P(b,l)}}function O(ka){let b=!1;const l={GetCapabilities:{url:""},DescribeFeatureType:{url:""},GetFeature:{url:"",outputFormat:null,supportsPagination:!1}};B.visitXML(ka,{OperationsMetadata:{Operation:h=>{switch(h.getAttribute("name")){case "GetCapabilities":return{DCP:{HTTP:{Get:w=>
{l.GetCapabilities.url=w.getAttribute("xlink:href")}}}};case "DescribeFeatureType":return{DCP:{HTTP:{Get:w=>{l.DescribeFeatureType.url=w.getAttribute("xlink:href")}}}};case "GetFeature":return{DCP:{HTTP:{Get:w=>{l.GetFeature.url=w.getAttribute("xlink:href")}}},Parameter:w=>{if("outputFormat"===w.getAttribute("name"))return{AllowedValues:{Value:R=>{R=R.textContent;oa.has(R.toLowerCase())&&(l.GetFeature.outputFormat=R)}}}}}}},Constraint:h=>{switch(h.getAttribute("name")){case "KVPEncoding":return{DefaultValue:w=>
{b="true"===w.textContent.toLowerCase()}};case "ImplementsResultPaging":return{DefaultValue:w=>{l.GetFeature.supportsPagination="true"===w.textContent.toLowerCase()}}}}}});if(!b)throw new g("wfs-layer:kvp-encoding-not-supported","WFS service doesn't support key/value pair (KVP) encoding");if(n.isNone(l.GetFeature.outputFormat))throw new g("wfs-layer:geojson-not-supported","WFS service doesn't support GeoJSON output format");return l}function P(ka,b){return B.iterateXML(ka,{FeatureTypeList:{FeatureType:l=>
{if(b.has(l))return b.get(l);const h={typeName:"undefined:undefined",name:"",title:"",description:"",extent:null,namespacePrefix:"",namespaceUri:"",supportedSpatialReferences:[]},w=new Set([4326]),R=S=>{var I,N;S=parseInt(null==(I=S.textContent.match(c._wrapRegExp(/([0-9]+$)/i,{wkid:1})))?void 0:null==(N=I.groups)?void 0:N.wkid,10);Number.isNaN(S)||w.add(S)};B.visitXML(l,{Name:S=>{const {name:I,prefix:N}=Ia(S.textContent);h.typeName=`${N}:${I}`;h.name=I;h.namespacePrefix=N;h.namespaceUri=S.lookupNamespaceURI(N)},
Abstract:S=>{h.description=S.textContent},Title:S=>{h.title=S.textContent},WGS84BoundingBox:S=>{h.extent=M(S)},DefaultSRS:R,DefaultCRS:R,OtherSRS:R,OtherCRS:R});h.title||(h.title=h.name);h.supportedSpatialReferences.push(...w);b.set(l,h);return h}}})}function M(ka){let b,l,h,w;for(const R of ka.children)switch(R.localName){case "LowerCorner":[b,l]=R.textContent.split(" ").map(S=>Number.parseFloat(S));break;case "UpperCorner":[h,w]=R.textContent.split(" ").map(S=>Number.parseFloat(S))}return{xmin:b,
ymin:l,xmax:h,ymax:w,spatialReference:J.WGS84}}function Z(ka,b,l){return u.find(ka,h=>l?h.name===b&&h.namespaceUri===l:h.typeName===b||h.name===b)}function aa(){aa=c._asyncToGenerator(function*(ka,b,l,h={}){var w;const {featureType:R,extent:S}=yield m(ka,b,l,h),{fields:I,geometryType:N,swapXY:Y,objectIdField:ca,geometryField:ja}=yield Q(ka,R.typeName,h);return{url:ka.operations.GetCapabilities.url,name:R.name,namespaceUri:R.namespaceUri,fields:I,geometryField:ja,geometryType:N,objectIdField:ca,spatialReference:null!=
(w=h.spatialReference)?w:y.WGS84,extent:S,swapXY:Y,wfsCapabilities:ka,customParameters:h.customParameters}});return aa.apply(this,arguments)}function m(ka,b,l){return D.apply(this,arguments)}function D(){D=c._asyncToGenerator(function*(ka,b,l,h={}){const {spatialReference:w=y.WGS84}=h;ka=ka.readFeatureTypes();l=b?Z(ka,b,l):ka.next().value;if(n.isNone(l)){if(b)throw new g("wfs-layer:feature-type-not-found",`The type '${b}' could not be found in the service`);throw new g("wfs-layer:empty-service","The service is empty");
}b=new r({...l.extent,spatialReference:w});if(!J.equals(w,J.WGS84))try{yield v.initializeProjection(J.WGS84,w,void 0,h),b=v.project(b,J.WGS84)}catch{throw new g("wfs-layer:unsupported-spatial-reference","Projection not supported");}return{extent:b,spatialReference:w,featureType:l}});return D.apply(this,arguments)}function Q(ka,b){return V.apply(this,arguments)}function V(){V=c._asyncToGenerator(function*(ka,b,l={}){const [h,w]=yield E.eachAlways([C(ka.operations.DescribeFeatureType.url,b,l),k(ka,
b,l)]);if(h.error||w.error)throw new g("wfs-layer:getWFSLayerTypeInfo-error",`An error occurred while getting info about the feature type '${b}'`,{error:h.error||w.error});const {fields:R,errors:S}=h.value;ka=h.value.geometryType||w.value.geometryType;l=w.value.swapXY;if(n.isNone(ka))throw new g("wfs-layer:unknown-geometry-type",`The geometry type could not be determined for type '${b}`,{typeName:b,geometryType:ka,fields:R,errors:S});return{...H(R),geometryType:ka,swapXY:l}});return V.apply(this,
arguments)}function H(ka){var b;const l=ka.find(w=>"geometry"===w.type);let h=ka.find(w=>"oid"===w.type);ka=ka.filter(w=>"geometry"!==w.type);h||(h=new e({name:"__esri_wfs_id__",type:"oid",alias:"__esri_wfs_id__"}),ka.unshift(h));return{geometryField:null!=(b=null==l?void 0:l.name)?b:null,objectIdField:h.name,fields:ka}}function k(ka,b){return d.apply(this,arguments)}function d(){d=c._asyncToGenerator(function*(ka,b,l={}){var h;let w,R=!1;const [S,I]=yield Promise.all([ia(ka.operations.GetFeature.url,
b,ka.operations.GetFeature.outputFormat,{...l,count:1}),K(ka.operations.GetFeature.url,{responseType:"text",query:ra(b,void 0,{...l,count:1}),signal:null==l?void 0:l.signal})]);if(ka="FeatureCollection"===S.type&&(null==(h=S.features[0])?void 0:h.geometry)){w=W.featureGeometryTypeKebabDictionary.fromJSON(q.getGeometryType(ka.type));switch(ka.type){case "Point":var N=ka.coordinates;break;case "LineString":case "MultiPoint":N=ka.coordinates[0];break;case "MultiLineString":case "Polygon":N=ka.coordinates[0][0];
break;case "MultiPolygon":N=ka.coordinates[0][0][0]}if(ka=/<[^>]*pos[^>]*> *(-?\d+(?:\.\d+)?) (-?\d+(?:\.\d+)?)/.exec(I.data))h=N[0].toFixed(3),N=N[1].toFixed(3),b=parseFloat(ka[1]).toFixed(3),ka=parseFloat(ka[2]).toFixed(3),h===ka&&N===b&&(R=!0)}return{geometryType:w,swapXY:R}});return d.apply(this,arguments)}function C(ka,b,l){return L.apply(this,arguments)}function L(){L=c._asyncToGenerator(function*(ka,b,l){ka=yield K(ka,{responseType:"text",query:{SERVICE:"WFS",REQUEST:"DescribeFeatureType",
VERSION:"2.0.0",TYPENAME:b,...null==l?void 0:l.customParameters},signal:null==l?void 0:l.signal});return X(b,ka.data)});return L.apply(this,arguments)}function X(ka,b){const {name:l}=Ia(ka);b=Ca(b);La(b);const h=u.find(B.iterateXML(b.firstElementChild,{element:w=>({name:w.getAttribute("name"),typeName:Ia(w.getAttribute("type")).name})}),({name:w})=>w===l);if(n.isSome(h)){const w=u.find(B.iterateXML(b.firstElementChild,{complexType:R=>R}),R=>R.getAttribute("name")===h.typeName);if(n.isSome(w))return ba(w)}throw new g("wfs-layer:feature-type-not-found",
`Type '${ka}' not found in document`,{document:(new XMLSerializer).serializeToString(b)});}function ba(ka){var b,l;const h=[],w=[];let R;var S=B.iterateXML(ka,{complexContent:{extension:{sequence:{element:I=>I}}}});for(const I of S){S=I.getAttribute("name");if(!S)continue;let N,Y;I.hasAttribute("type")?N=Ia(I.getAttribute("type")).name:B.visitXML(I,{simpleType:{restriction:ma=>{N=Ia(ma.getAttribute("base")).name;return{maxLength:sa=>{Y=+sa.getAttribute("value")}}}}});if(!N)continue;const ca="true"===
I.getAttribute("nillable");let ja=!1;switch(N.toLowerCase()){case "integer":case "nonpositiveinteger":case "negativeinteger":case "long":case "int":case "short":case "byte":case "nonnegativeinteger":case "unsignedlong":case "unsignedint":case "unsignedshort":case "unsignedbyte":case "positiveinteger":w.push(new e({name:S,alias:S,type:"integer",nullable:ca}));break;case "float":case "double":case "decimal":w.push(new e({name:S,alias:S,type:"double",nullable:ca}));break;case "boolean":case "string":case "gyearmonth":case "gyear":case "gmonthday":case "gday":case "gmonth":case "anyuri":case "qname":case "notation":case "normalizedstring":case "token":case "language":case "idrefs":case "entities":case "nmtoken":case "nmtokens":case "name":case "ncname":case "id":case "idref":case "entity":case "duration":case "time":w.push(new e({name:S,
alias:S,type:"string",nullable:ca,length:null!=(b=Y)?b:255}));break;case "datetime":case "date":w.push(new e({name:S,alias:S,type:"date",nullable:ca,length:null!=(l=Y)?l:36}));break;case "pointpropertytype":R="point";ja=!0;break;case "multipointpropertytype":R="multipoint";ja=!0;break;case "curvepropertytype":case "multicurvepropertytype":case "multilinestringpropertytype":R="polyline";ja=!0;break;case "surfacepropertytype":case "multisurfacepropertytype":case "multipolygonpropertytype":R="polygon";
ja=!0;break;case "geometrypropertytype":case "multigeometrypropertytype":ja=!0;h.push(new g("wfs-layer:unknown-geometry-type",`geometry type '${N}' is not supported`,{type:(new XMLSerializer).serializeToString(ka)}));break;default:h.push(new g("wfs-layer:unknown-field-type",`Unknown field type '${N}'`,{type:(new XMLSerializer).serializeToString(ka)}))}ja&&w.push(new e({name:S,alias:S,type:"geometry",nullable:ca}))}for(const I of w)if("integer"===I.type&&!I.nullable&&ua.has(I.name.toLowerCase())){I.type=
"oid";break}return{geometryType:R,fields:w,errors:h}}function ia(ka,b,l,h){return na.apply(this,arguments)}function na(){na=c._asyncToGenerator(function*(ka,b,l,h){({data:ka}=yield K(ka,{responseType:"text",query:ra(b,l,h),signal:null==h?void 0:h.signal}));ka=ka.replace(/": +(-?\d+),(\d+)(,)?/g,'": $1.$2$3');try{var w;if(null!=h&&null!=(w=h.dateFields)&&w.length){const R=new Set(h.dateFields);return JSON.parse(ka,(S,I)=>R.has(S)?A.parseDate(I):I)}return JSON.parse(ka)}catch(R){throw new g("wfs-layer:malformed-json",
"Error while parsing the\u00a0response",{response:ka,error:R});}});return na.apply(this,arguments)}function ra(ka,b,l){return{SERVICE:"WFS",REQUEST:"GetFeature",VERSION:"2.0.0",TYPENAMES:ka,OUTPUTFORMAT:b,SRSNAME:"EPSG:4326",STARTINDEX:null==l?void 0:l.startIndex,COUNT:null==l?void 0:l.count,...null==l?void 0:l.customParameters}}function wa(){wa=c._asyncToGenerator(function*(ka,b,l){ka=yield K(ka,{responseType:"text",query:{SERVICE:"WFS",REQUEST:"GetFeature",VERSION:"2.0.0",TYPENAMES:b,RESULTTYPE:"hits",
...null==l?void 0:l.customParameters},signal:null==l?void 0:l.signal});ka=Ca(ka.data);La(ka);ka=Number.parseFloat(ka.firstElementChild.getAttribute("numberMatched"));return Number.isNaN(ka)?0:ka});return wa.apply(this,arguments)}function Ca(ka){return(new DOMParser).parseFromString(ka.trim(),"text/xml")}function Ia(ka){const [b,l]=ka.split(":");return{prefix:l?b:"",name:null!=l?l:b}}function Ha(ka){if((ka=ka.firstElementChild.getAttribute("version"))&&"2.0.0"!==ka)throw new g("wfs-layer:unsupported-wfs-version",
`Unsupported WFS version ${ka}. Supported version: ${"2.0.0"}`);}function La(ka){let b,l;B.visitXML(ka.firstElementChild,{Exception:h=>{b=h.getAttribute("exceptionCode");return{ExceptionText:w=>{l=w.textContent}}}});if(b)throw new g(`wfs-layer:${b}`,l);}const oa=new Set(["json","application/json","geojson","application/json; subtype\x3dgeojson"]),ua=new Set(["objectid","fid"]);p.WFS_OID_FIELD_NAME="__esri_wfs_id__";p.describeFeatureType=C;p.findFeatureType=Z;p.getCapabilities=function(ka,b){return G.apply(this,
arguments)};p.getFeature=ia;p.getFeatureCount=function(ka,b,l){return wa.apply(this,arguments)};p.getFeatureTypeInfo=m;p.getWFSLayerInfo=function(ka,b,l){return aa.apply(this,arguments)};p.parseDescribeFeatureTypeResponse=X;p.parseGetCapabilitiesResponse=F;p.prepareWFSLayerFields=H;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/core/interatorUtils":function(){define(["exports"],function(p){p.find=function(c,x){for(const K of c)if(null!=K&&x(K))return K};Object.defineProperty(p,"__esModule",
{value:!0})})},"esri/layers/ogc/dateUtils":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers"],function(p,c){function x(g){g=(new Date(g)).getTime();return Number.isNaN(g)?null:g}const K=c._wrapRegExp(/^(?:(\x2D?[0-9]{4,})\x2D([0-9]{2})\x2D([0-9]{2}))(?:T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:\.([0-9]+))?)?(?:(Z)|(?:(\+|\x2D)([0-9]{2}):([0-9]{2})))?$/,{year:1,month:2,day:3,hours:4,minutes:5,seconds:6,ms:7,isUTC:8,offsetSign:9,offsetHours:10,offsetMinutes:11});p.parseDate=function(g){var u;
var n,E,t,v=K.exec(g);if(v){v=v.groups;var J=+v.year,W=+v.month-1,q=+v.day,A=+(null!=(n=v.hours)?n:0);n=+(null!=(E=v.minutes)?E:0);E=+(null!=(t=v.seconds)?t:0);if(23<A||59<n||59<E)var B=null;else B=(t=null!=(B=v.ms)?B:"0")?+t.padEnd(3,"0").substring(0,3):0,B=v.isUTC?Date.UTC(J,W,q,A,n,E,B):v.offsetSign?6E4*("+"===v.offsetSign?-1:1)*(60*+v.offsetHours+ +v.offsetMinutes)+Date.UTC(J,W,q,A,n,E,B):(new Date(J,W,q,A,n,E,B)).getTime(),B=Number.isNaN(B)?null:B}else B=null;return null!=(u=B)?u:x(g)};p.parseJSDate=
x;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/ogc/xmlUtils":function(){define(["exports"],function(p){function c(K,g){for(const u of K.children)u.localName in g&&(K=g[u.localName],"function"===typeof K?(K=K(u))&&c(u,K):c(u,K))}function*x(K,g){for(const u of K.children)u.localName in g&&(K=g[u.localName],"function"===typeof K?yield K(u):yield*x(u,K))}p.iterateXML=x;p.visitXML=c;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/support/Field":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ./domains ./fieldType".split(" "),
function(p,c,x,K,g,u,n,E,t,v,J,W,q){var A;const B=new x.JSONMap({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});x=A=function(e){function y(G){G=e.call(this,G)||this;
G.alias=null;G.defaultValue=void 0;G.description=null;G.domain=null;G.editable=!0;G.length=-1;G.name=null;G.nullable=!0;G.type=null;G.valueType=null;return G}p._inheritsLoose(y,e);var r=y.prototype;r.readDescription=function(G,{description:F}){let O;try{O=JSON.parse(F)}catch(P){}return O?O.value:null};r.readValueType=function(G,{description:F}){let O;try{O=JSON.parse(F)}catch(P){}return O?B.fromJSON(O.fieldValueType):null};r.clone=function(){return new A({alias:this.alias,defaultValue:this.defaultValue,
description:this.description,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType})};return y}(K.JSONSupport);c.__decorate([g.property({type:String,json:{write:!0}})],x.prototype,"alias",void 0);c.__decorate([g.property({type:[String,Number],json:{write:{allowNull:!0}}})],x.prototype,"defaultValue",void 0);c.__decorate([g.property()],x.prototype,"description",void 0);c.__decorate([v.reader("description")],
x.prototype,"readDescription",null);c.__decorate([g.property({types:W.types,json:{read:{reader:W.fromJSON},write:!0}})],x.prototype,"domain",void 0);c.__decorate([g.property({type:Boolean,json:{write:!0}})],x.prototype,"editable",void 0);c.__decorate([g.property({type:n.Integer,json:{write:!0}})],x.prototype,"length",void 0);c.__decorate([g.property({type:String,json:{write:!0}})],x.prototype,"name",void 0);c.__decorate([g.property({type:Boolean,json:{write:!0}})],x.prototype,"nullable",void 0);c.__decorate([t.enumeration(q.kebabDict)],
x.prototype,"type",void 0);c.__decorate([g.property()],x.prototype,"valueType",void 0);c.__decorate([v.reader("valueType",["description"])],x.prototype,"readValueType",null);return x=A=c.__decorate([J.subclass("esri.layers.support.Field")],x)})},"esri/layers/support/fieldType":function(){define(["exports","../../core/jsonMap"],function(p,c){c=new c.JSONMap({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",
esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"});p.kebabDict=c;Object.defineProperty(p,"__esModule",{value:!0})})},"*noref":1}});
define("../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../core/Logger ../../../core/maybe ../../../core/promiseUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ../data/FeatureStore ../data/projectionSupport ../data/QueryEngine ./geojson/geojson ./support/sourceUtils ../../ogc/wfsUtils ../../support/FieldsIndex".split(" "),function(p,c,x,K,g,u,n,E,t,v,J,W,q,A){return function(){function B(){var y=this;this._customParameters=this._queryEngine=null;
this._snapshotFeatures=function(){var r=p._asyncToGenerator(function*(G){const {objectIdField:F}=y._queryEngine;var O=yield q.getFeature(y._getFeatureUrl,y._featureType.typeName,y._getFeatureOutputFormat,{customParameters:y._customParameters,dateFields:y._queryEngine.fieldsIndex.dateFields.map(M=>M.name),signal:G});yield J.validateGeoJSON(O);g.throwIfAborted(G);G=J.createOptimizedFeatures(O,{geometryType:y._queryEngine.geometryType,hasZ:!1,objectIdField:F});if(!u.equals(y._queryEngine.spatialReference,
u.WGS84))for(var P of G)P.geometry&&(P.geometry=n.convertFromGeometry(t.project(n.convertToGeometry(P.geometry,y._queryEngine.geometryType,!1,!1),u.WGS84,y._queryEngine.spatialReference)));P=1;for(const M of G)O={},W.mixAttributes(y._fieldsIndex,O,M.attributes,null,!0),M.attributes=O,null==M.attributes[F]&&(M.objectId=M.attributes[F]=P++);return G});return function(G){return r.apply(this,arguments)}}()}var e=B.prototype;e.destroy=function(){var y;null==(y=this._queryEngine)?void 0:y.destroy();this._queryEngine=
null};e.load=function(){var y=p._asyncToGenerator(function*(r,G){const {getFeatureUrl:F,getFeatureOutputFormat:O,spatialReference:P,fields:M,geometryType:Z,featureType:aa,objectIdField:m,customParameters:D}=r;this._featureType=aa;this._customParameters=D;this._getFeatureUrl=F;this._getFeatureOutputFormat=O;this._fieldsIndex=new A(M);yield this._checkProjection(P);g.throwIfAborted(G);this._queryEngine=new v["default"]({fields:M,geometryType:Z,hasM:!1,hasZ:!1,objectIdField:m,spatialReference:P,timeInfo:null,
featureStore:new E({geometryType:Z,hasM:!1,hasZ:!1})});r=yield this._snapshotFeatures(K.unwrap(G.signal));this._queryEngine.featureStore.addMany(r);return{extent:this._queryEngine.fullExtent}});return function(r,G){return y.apply(this,arguments)}}();e.applyEdits=function(){var y=p._asyncToGenerator(function*(){throw new c("wfs-source:editing-not-supported","applyEdits() is not supported on WFSLayer");});return function(){return y.apply(this,arguments)}}();e.queryFeatures=function(){var y=p._asyncToGenerator(function*(r=
{},G={}){yield this._waitSnapshotComplete();return this._queryEngine.executeQuery(r,G.signal)});return function(){return y.apply(this,arguments)}}();e.queryFeatureCount=function(){var y=p._asyncToGenerator(function*(r={},G={}){yield this._waitSnapshotComplete();return this._queryEngine.executeQueryForCount(r,G.signal)});return function(){return y.apply(this,arguments)}}();e.queryObjectIds=function(){var y=p._asyncToGenerator(function*(r={},G={}){yield this._waitSnapshotComplete();return this._queryEngine.executeQueryForIds(r,
G.signal)});return function(){return y.apply(this,arguments)}}();e.queryExtent=function(){var y=p._asyncToGenerator(function*(r={},G={}){yield this._waitSnapshotComplete();return this._queryEngine.executeQueryForExtent(r,G.signal)});return function(){return y.apply(this,arguments)}}();e.querySnapping=function(){var y=p._asyncToGenerator(function*(r,G={}){yield this._waitSnapshotComplete();return this._queryEngine.executeQueryForSnapping(r,G.signal)});return function(r){return y.apply(this,arguments)}}();
e.setCustomParameters=function(y){this._customParameters=y};e.refresh=function(){var y=p._asyncToGenerator(function*(){var r;null==(r=this._snapshotTask)?void 0:r.abort();this._snapshotTask=g.createTask(this._snapshotFeatures);this._snapshotTask.promise.then(G=>{this._queryEngine.featureStore.clear();G&&this._queryEngine.featureStore.addMany(G)},G=>{this._queryEngine.featureStore.clear();g.isAbortError(G)||x.getLogger("esri.layers.WFSLayer").error(new c("wfs-layer:getfeature-error","An error occurred during the GetFeature request",
{error:G}))});yield this._waitSnapshotComplete();return{extent:this._queryEngine.fullExtent}});return function(){return y.apply(this,arguments)}}();e._waitSnapshotComplete=function(){var y=p._asyncToGenerator(function*(){if(this._snapshotTask&&!this._snapshotTask.finished){try{yield this._snapshotTask.promise}catch{}return this._waitSnapshotComplete()}});return function(){return y.apply(this,arguments)}}();e._checkProjection=function(){var y=p._asyncToGenerator(function*(r){try{yield t.checkProjectionSupport(u.WGS84,
r)}catch{throw new c("unsupported-projection","Projection not supported",{spatialReference:r});}});return function(r){return y.apply(this,arguments)}}();return B}()});