// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.20/esri/copyright.txt for details.
//>>built
define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Error ../core/maybe ../core/MultiOriginJSONSupport ../core/accessorSupport/decorators/aliasOf ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/jsonMap ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Layer ./mixins/CustomParametersMixin ./mixins/ImageryTileMixin ./mixins/OperationalLayer ./mixins/PortalLayer ./mixins/RefreshableLayer ./mixins/ScaleRangeLayer ./support/commonProperties ./support/Field ./support/rasterDatasets/WCSRaster ../support/popupUtils".split(" "),
function(k,c,n,p,b,q,E,F,G,H,d,r,t,u,v,w,x,y,z,A,l,B,C){b=function(m){function f(...a){a=m.call(this,...a)||this;a.coverageId=null;a.coverageInfo=null;a.version=null;a.isReference=null;a.type="wcs";a.popupEnabled=!0;a.popupTemplate=null;a.fields=null;return a}k._inheritsLoose(f,m);var g=f.prototype;g.normalizeCtorArgs=function(a,h){return"string"===typeof a?{url:a,...h}:a};g.load=function(a){a=p.isSome(a)?a.signal:null;this.addResolvingPromise(this._openRaster(a));return Promise.resolve(this)};g.createPopupTemplate=
function(a){return C.createPopupTemplate({fields:this.rasterFields,title:this.title},a)};g._openRaster=function(){var a=k._asyncToGenerator(function*(h){const e=new B({url:this.url,version:this.version,coverageId:this.coverageId,ioConfig:{sampling:"closest",...this.ioConfig,customFetchParameters:this.customParameters}});yield e.open({signal:h});if(!e.rasterInfo)throw e.destroy(),new n("wcs-layer:load","cannot load resources on "+this.url);null==this.title&&this.setAtOrigin("title",e.datasetName,"service");
null==this.coverageId&&this.setAtOrigin("coverageId",e.coverageInfo.id,"service");this.raster=e;this._configDefaultSettings();this.watch("customParameters",D=>this.raster.ioConfig.customFetchParameters=D)});return function(h){return a.apply(this,arguments)}}();k._createClass(f,[{key:"defaultPopupTemplate",get:function(){return this.createPopupTemplate()}},{key:"rasterFields",get:function(){return[new l({name:"Raster.ServicePixelValue",alias:"Pixel Value",domain:null,editable:!1,length:50,type:"string"})]}}]);
return f}(z.ScaleRangeLayer(y.RefreshableLayer(w.OperationalLayer(x.PortalLayer(u.CustomParametersMixin(v.ImageryTileMixin(b.MultiOriginJSONMixin(t))))))));c.__decorate([d.property({json:{write:!0}})],b.prototype,"coverageId",void 0);c.__decorate([d.property({readOnly:!0}),q.aliasOf("raster.coverageInfo")],b.prototype,"coverageInfo",void 0);c.__decorate([d.property()],b.prototype,"version",void 0);c.__decorate([d.property()],b.prototype,"isReference",void 0);c.__decorate([d.property({readOnly:!0})],
b.prototype,"type",void 0);c.__decorate([d.property(A.popupEnabled)],b.prototype,"popupEnabled",void 0);c.__decorate([d.property()],b.prototype,"popupTemplate",void 0);c.__decorate([d.property({readOnly:!0})],b.prototype,"defaultPopupTemplate",null);c.__decorate([d.property({readOnly:!0,type:[l]})],b.prototype,"fields",void 0);c.__decorate([d.property({readOnly:!0,type:[l]})],b.prototype,"rasterFields",null);return b=c.__decorate([r.subclass("esri.layers.WCSLayer")],b)});