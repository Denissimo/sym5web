// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.20/esri/copyright.txt for details.
//>>built
require({cache:{"esri/rasterRenderers":function(){define("exports ./core/Warning ./renderers/ClassBreaksRenderer ./renderers/RasterColormapRenderer ./renderers/RasterShadedReliefRenderer ./renderers/RasterStretchRenderer ./renderers/UniqueValueRenderer ./renderers/VectorFieldRenderer".split(" "),function(R,r,K,N,C,Q,Y,W){function U(F,b){if(!F)return null;if("classBreaks"===F.type&&F.classificationMethod){var n=F.authoringInfo||{classificationMethod:""};n.classificationMethod=F.classificationMethod;
F.authoringInfo=n}n=F?H[F.type]||null:null;if(n)return n=new n,n.read(F,b),n;b&&b.messages&&F&&b.messages.push(new r("renderer:unsupported","Renderers of type '"+(F.type||"unknown")+"' are not supported",{definition:F,context:b}));return null}const I={key:"type",base:null,typeMap:{"unique-value":Y,"class-breaks":K,"raster-colormap":N,"raster-stretch":Q,"vector-field":W,"raster-shaded-relief":C}},y={...I,typeMap:{...I.typeMap}};delete y.typeMap["vector-field"];const H={uniqueValue:Y,classBreaks:K,
rasterStretch:Q,rasterColormap:N,vectorField:W,rasterShadedRelief:C};R.ClassBreaksRenderer=K;R.RasterColormapRenderer=N;R.RasterShadedReliefRenderer=C;R.RasterStretchRenderer=Q;R.UniqueValueRenderer=Y;R.VectorFieldRenderer=W;R.fromJSON=function(F,b){return U(F,b)};R.rasterRendererTypes=I;R.read=U;R.websceneRasterRendererTypes=y;Object.defineProperty(R,"__esModule",{value:!0})})},"esri/renderers/RasterColormapRenderer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ./support/ColormapInfo ./support/colorRampUtils".split(" "),
function(R,r,K,N,C,Q,Y,W,U,I,y){var H;K=H=function(F){function b(m){m=F.call(this,m)||this;m.colormapInfos=null;m.type="raster-colormap";return m}R._inheritsLoose(b,F);b.createFromColormap=function(m,q){if(!m)return null;const v=5===m[0].length;m=[...m].sort(D=>D[0][0]-D[1][0]).map(D=>{var x;return I.fromJSON({value:D[0],color:v?D.slice(1,5):D.slice(1,4).concat([255]),label:q?null!=(x=q[D[0]])?x:"":D[0]})});return new H({colormapInfos:m})};b.createFromColorramp=function(m){m=y.convertColorRampToColormap(m,
256);return H.createFromColormap(m)};var n=b.prototype;n.clone=function(){return new H({colormapInfos:this.colormapInfos.map(m=>m.toJSON())})};n.extractColormap=function(){return this.colormapInfos.map(m=>[m.value,m.color.r,m.color.g,m.color.b,1<m.color.a?m.color.a:255*m.color.a&255]).sort((m,q)=>m[0]-q[0])};return b}(K.JSONSupport);r.__decorate([N.property({type:[I],json:{write:!0}})],K.prototype,"colormapInfos",void 0);r.__decorate([W.enumeration({rasterColormap:"raster-colormap"})],K.prototype,
"type",void 0);return K=H=r.__decorate([U.subclass("esri.renderers.RasterColormapRenderer")],K)})},"esri/renderers/support/ColormapInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Color ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass".split(" "),function(R,r,K,N,C,Q,Y,W,U,I){N=function(y){function H(){var F=
y.apply(this,arguments)||this;F.value=null;F.label=null;F.color=null;return F}R._inheritsLoose(H,y);return H}(N.JSONSupport);r.__decorate([C.property({type:Number,json:{write:!0}})],N.prototype,"value",void 0);r.__decorate([C.property({type:String,json:{write:!0}})],N.prototype,"label",void 0);r.__decorate([C.property({type:K,json:{type:[Y.Integer],write:!0}})],N.prototype,"color",void 0);return N=r.__decorate([I.subclass("esri.renderers.support.ColormapInfo")],N)})},"esri/renderers/support/colorRampUtils":function(){define(["exports",
"../../Color","../../core/colorUtils"],function(R,r,K){function N(W,U){if(!W||!U||W.length!==U.length)return!1;for(let I=0;I<W.length;I++)if(W[I]>U[I]+2||W[I]<U[I]-2)return!1;return!0}function C(W,U){if(W){U=U?U:Q;var I=null,y;"algorithmic"===W.type?U.some(H=>{if(N(W.fromColor.toRgb(),H.fromColor)&&N(W.toColor.toRgb(),H.toColor))return I=H.id,!0}):"multipart"===W.type&&U.some(H=>{if(W.colorRamps&&H.colorRamps&&W.colorRamps.length===H.colorRamps.length&&(y=W.colorRamps,!H.colorRamps.some((F,b)=>{if(!N(y[b].fromColor.toRgb(),
(new r(F.fromColor)).toRgb())||!N(y[b].toColor.toRgb(),(new r(F.toColor)).toRgb()))return!0}))){if(I)return!0;I=H.id}});return I}}const Q=[{id:"aspect_predefined",type:"multipart",colorRamps:[{fromColor:[190,190,190],toColor:[255,45,8]},{fromColor:[255,45,8],toColor:[255,181,61]},{fromColor:[255,181,61],toColor:[255,254,52]},{fromColor:[255,254,52],toColor:[0,251,50]},{fromColor:[0,251,50],toColor:[255,254,52]},{fromColor:[0,253,255],toColor:[0,181,255]},{fromColor:[0,181,255],toColor:[26,35,253]},
{fromColor:[26,35,253],toColor:[255,57,251]},{fromColor:[255,57,251],toColor:[255,45,8]}]},{id:"blackToWhite_predefined",fromColor:[0,0,0],toColor:[255,255,255]},{id:"blueBright_predefined",fromColor:[204,204,255],toColor:[0,0,224]},{id:"blueLightToDark_predefined",fromColor:[211,229,232],toColor:[46,100,140]},{id:"blueGreenBright_predefined",fromColor:[203,245,234],toColor:[48,207,146]},{id:"blueGreenLightToDark_predefined",fromColor:[216,242,237],toColor:[21,79,74]},{id:"brownLightToDark_predefined",
fromColor:[240,236,170],toColor:[102,72,48]},{id:"brownToBlueGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[156,85,31],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[33,130,145]}]},{id:"brownToBlueGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[110,70,45],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[48,100,102]}]},{id:"coefficientBias_predefined",fromColor:[214,214,255],toColor:[0,57,148]},{id:"coldToHotDiverging_predefined",
type:"multipart",colorRamps:[{fromColor:[69,117,181],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[214,47,39]}]},{id:"conditionNumber_predefined",type:"multipart",colorRamps:[{fromColor:[0,97,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,34,0]}]},{id:"cyanToPurple_predefined",type:"multipart",colorRamps:[{fromColor:[0,245,245],toColor:[0,0,245]},{fromColor:[0,0,245],toColor:[245,0,245]}]},{id:"cyanLightToBlueDark_predefined",type:"multipart",colorRamps:[{fromColor:[182,237,
240],toColor:[31,131,224]},{fromColor:[31,131,224],toColor:[9,9,145]}]},{id:"distance_predefined",fromColor:[255,200,0],toColor:[0,0,255]},{id:"elevation1_predefined",type:"multipart",colorRamps:[{fromColor:[175,240,233],toColor:[255,255,179]},{fromColor:[255,255,179],toColor:[0,128,64]},{fromColor:[0,128,64],toColor:[252,186,3]},{fromColor:[252,186,3],toColor:[128,0,0]},{fromColor:[120,0,0],toColor:[105,48,13]},{fromColor:[105,48,13],toColor:[171,171,171]},{fromColor:[171,171,171],toColor:[255,252,
255]}]},{id:"elevation2_predefined",type:"multipart",colorRamps:[{fromColor:[118,219,211],toColor:[255,255,199]},{fromColor:[255,255,199],toColor:[255,255,128]},{fromColor:[255,255,128],toColor:[217,194,121]},{fromColor:[217,194,121],toColor:[135,96,38]},{fromColor:[135,96,38],toColor:[150,150,181]},{fromColor:[150,150,181],toColor:[181,150,181]},{fromColor:[181,150,181],toColor:[255,252,255]}]},{id:"errors_predefined",fromColor:[255,235,214],toColor:[196,10,10]},{id:"grayLightToDark_predefined",
fromColor:[219,219,219],toColor:[69,69,69]},{id:"greenBright_predefined",fromColor:[204,255,204],toColor:[14,204,14]},{id:"greenLightToDark_predefined",fromColor:[220,245,233],toColor:[34,102,51]},{id:"greenToBlue_predefined",type:"multipart",colorRamps:[{fromColor:[32,204,16],toColor:[0,242,242]},{fromColor:[0,242,242],toColor:[2,33,227]}]},{id:"orangeBright_predefined",fromColor:[255,235,204],toColor:[240,118,5]},{id:"orangeLightToDark_predefined",fromColor:[250,233,212],toColor:[171,65,36]},{id:"partialSpectrum_predefined",
type:"multipart",colorRamps:[{fromColor:[242,241,162],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]},{fromColor:[252,3,69],toColor:[176,7,237]},{fromColor:[176,7,237],toColor:[2,29,173]}]},{id:"partialSpectrum1Diverging_predefined",type:"multipart",colorRamps:[{fromColor:[135,38,38],toColor:[240,149,12]},{fromColor:[240,149,12],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[74,80,181]},{fromColor:[74,80,181],toColor:[39,32,122]}]},{id:"partialSpectrum2Diverging_predefined",
type:"multipart",colorRamps:[{fromColor:[115,77,42],toColor:[201,137,52]},{fromColor:[201,137,52],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[91,63,176]},{fromColor:[91,63,176],toColor:[81,13,97]}]},{id:"pinkToYellowGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[158,30,113],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[99,110,45]}]},{id:"pinkToYellowGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[97,47,73],toColor:[204,204,
102]},{fromColor:[204,204,102],toColor:[22,59,15]}]},{id:"precipitation_predefined",type:"multipart",colorRamps:[{fromColor:[194,82,60],toColor:[237,161,19]},{fromColor:[237,161,19],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,219,0]},{fromColor:[0,219,0],toColor:[32,153,143]},{fromColor:[32,153,143],toColor:[11,44,122]}]},{id:"prediction_predefined",type:"multipart",colorRamps:[{fromColor:[40,146,199],toColor:[250,250,100]},{fromColor:[250,250,100],toColor:[232,16,20]}]},{id:"purpleBright_predefined",
fromColor:[255,204,255],toColor:[199,0,199]},{id:"purpleToGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[77,32,150],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[20,122,11]}]},{id:"purpleToGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[67,14,89],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[24,79,15]}]},{id:"purpleBlueBright_predefined",fromColor:[223,184,230],toColor:[112,12,242]},{id:"purpleBlueLightToDark_predefined",fromColor:[229,
213,242],toColor:[93,44,112]},{id:"purpleRedBright_predefined",fromColor:[255,204,225],toColor:[199,0,99]},{id:"purpleRedLightToDark_predefined",fromColor:[250,215,246],toColor:[143,17,57]},{id:"redBright_predefined",fromColor:[255,204,204],toColor:[219,0,0]},{id:"redLightToDark_predefined",fromColor:[255,224,224],toColor:[143,10,10]},{id:"redToBlueDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[196,69,57],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[48,95,207]}]},
{id:"redToBlueDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[107,13,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[13,53,97]}]},{id:"redToGreen_predefined",type:"multipart",colorRamps:[{fromColor:[245,0,0],toColor:[245,245,0]},{fromColor:[245,245,0],toColor:[0,245,0]}]},{id:"redToGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[186,20,20],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[54,145,33]}]},{id:"redToGreenDivergingDark_predefined",
type:"multipart",colorRamps:[{fromColor:[97,21,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[16,69,16]}]},{id:"slope_predefined",type:"multipart",colorRamps:[{fromColor:[56,168,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]},{id:"spectrumFullBright_predefined",type:"multipart",colorRamps:[{fromColor:[255,0,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,0,255]}]},{id:"spectrumFullDark_predefined",type:"multipart",
colorRamps:[{fromColor:[153,0,0],toColor:[153,153,0]},{fromColor:[153,153,0],toColor:[0,153,153]},{fromColor:[0,153,153],toColor:[0,0,153]}]},{id:"spectrumFullLight_predefined",type:"multipart",colorRamps:[{fromColor:[255,153,153],toColor:[255,255,153]},{fromColor:[255,255,153],toColor:[153,255,255]},{fromColor:[153,255,255],toColor:[153,153,255]}]},{id:"surface_predefined",type:"multipart",colorRamps:[{fromColor:[112,153,89],toColor:[242,238,162]},{fromColor:[242,238,162],toColor:[242,206,133]},
{fromColor:[242,206,133],toColor:[194,140,124]},{fromColor:[194,140,124],toColor:[255,242,255]}]},{id:"temperature_predefined",type:"multipart",colorRamps:[{fromColor:[255,252,255],toColor:[255,0,255]},{fromColor:[255,0,255],toColor:[0,0,255]},{fromColor:[0,0,255],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,255,0]},{fromColor:[0,255,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,128,0]},{fromColor:[255,128,0],toColor:[128,0,0]}]},{id:"whiteToBlack_predefined",fromColor:[255,
255,255],toColor:[0,0,0]},{id:"yellowToDarkRed_predefined",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[242,167,46]},{fromColor:[242,167,46],toColor:[107,0,0]}]},{id:"yellowToGreenToDarkBlue_predefined",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[56,224,9]},{fromColor:[56,224,9],toColor:[26,147,171]},{fromColor:[26,147,171],toColor:[12,16,120]}]},{id:"yellowToRed_predefined",fromColor:[245,245,0],toColor:[255,0,0]},{id:"yellowGreenBright_predefined",fromColor:[236,
252,204],toColor:[157,204,16]},{id:"yellowGreenLightToDark_predefined",fromColor:[215,240,175],toColor:[96,107,45]}],Y={aspect_predefined:"Aspect",blackToWhite_predefined:"Black to White",blueBright_predefined:"Blue Bright",blueLightToDark_predefined:"Blue Light to Dark",blueGreenBright_predefined:"Blue-Green Bright",blueGreenLightToDark_predefined:"Blue-Green Light to Dark",brownLightToDark_predefined:"Brown Light to Dark",brownToBlueGreenDivergingBright_predefined:"Brown to Blue Green Diverging, Bright",
brownToBlueGreenDivergingDark_predefined:"Brown to Blue Green Diverging, Dark",coefficientBias_predefined:"Coefficient Bias",coldToHotDiverging_predefined:"Cold to Hot Diverging",conditionNumber_predefined:"Condition Number",cyanToPurple_predefined:"Cyan to Purple",cyanLightToBlueDark_predefined:"Cyan-Light to Blue-Dark",distance_predefined:"Distance",elevation1_predefined:"Elevation #1",elevation2_predefined:"Elevation #2",errors_predefined:"Errors",grayLightToDark_predefined:"Gray Light to Dark",
greenBright_predefined:"Green Bright",greenLightToDark_predefined:"Green Light to Dark",greenToBlue_predefined:"Green to Blue",orangeBright_predefined:"Orange Bright",orangeLightToDark_predefined:"Orange Light to Dark",partialSpectrum_predefined:"Partial Spectrum",partialSpectrum1Diverging_predefined:"Partial Spectrum 1 Diverging",partialSpectrum2Diverging_predefined:"Partial Spectrum 2 Diverging",pinkToYellowGreenDivergingBright_predefined:"Pink to YellowGreen Diverging, Bright",pinkToYellowGreenDivergingDark_predefined:"Pink to YellowGreen Diverging, Dark",
precipitation_predefined:"Precipitation",prediction_predefined:"Prediction",purpleBright_predefined:"Purple Bright",purpleToGreenDivergingBright_predefined:"Purple to Green Diverging, Bright",purpleToGreenDivergingDark_predefined:"Purple to Green Diverging, Dark",purpleBlueBright_predefined:"Purple-Blue Bright",purpleBlueLightToDark_predefined:"Purple-Blue Light to Dark",purpleRedBright_predefined:"Purple-Red Bright",purpleRedLightToDark_predefined:"Purple-Red Light to Dark",redBright_predefined:"Red Bright",
redLightToDark_predefined:"Red Light to Dark",redToBlueDivergingBright_predefined:"Red to Blue Diverging, Bright",redToBlueDivergingDark_predefined:"Red to Blue Diverging, Dark",redToGreen_predefined:"Red to Green",redToGreenDivergingBright_predefined:"Red to Green Diverging, Bright",redToGreenDivergingDark_predefined:"Red to Green Diverging, Dark",slope_predefined:"Slope",spectrumFullBright_predefined:"Spectrum-Full Bright",spectrumFullDark_predefined:"Spectrum-Full Dark",spectrumFullLight_predefined:"Spectrum-Full Light",
surface_predefined:"Surface",temperature_predefined:"Temperature",whiteToBlack_predefined:"White to Black",yellowToDarkRed_predefined:"Yellow to Dark Red",yellowToGreenToDarkBlue_predefined:"Yellow to Green to Dark Blue",yellowToRed_predefined:"Yellow to Red",yellowGreenBright_predefined:"Yellow-Green Bright",yellowGreenLightToDark_predefined:"Yellow-Green Light to Dark"};R.PREDEFINED_COLOR_RAMP_NAME_MAP=Y;R.PREDEFINED_JSON_COLOR_RAMPS=Q;R.convertColorRampToColormap=function(W,U,I=!1){if(W&&U&&!(1>
U)){var y="toJSON"in W?W.toJSON():W,H="multipart"===y.type?y.colorRamps.length:1;W=[];var F=[],b,n,m,q=0;if(1===U){var v="multipart"===y.type?y.colorRamps[0].fromColor:y.fromColor;F.push([0].concat(v));return F}for(let x=0;x<H;x++)W[x]={start:null,end:null},W[x].start=q,W[x].end=q+1/H,q=W[x].end;for(let x=0;x<U;x++){var D=x/(U-1);W.forEach((A,u)=>{if(D>=A.start&&(D<A.end||x===U-1&&u===H-1)){m=(D-A.start)/(A.end-A.start);"multipart"===y.type?(v=y.colorRamps[u].fromColor,b=y.colorRamps[u].toColor):
(v=y.fromColor,b=y.toColor);if(0===x)F.push([x].concat(v.slice(0,3)));else if(x===U-1)F.push([x].concat(b.slice(0,3)));else{var g={r:b[0],g:b[1],b:b[2]};A=m;u=K.toLAB({r:v[0],g:v[1],b:v[2]});g=K.toLAB(g);n=K.toRGB({l:u.l*(1-A)+A*g.l,a:u.a*(1-A)+A*g.a,b:u.b*(1-A)+A*g.b});F.push([x,n.r,n.g,n.b])}A=null!=v[3]?1<v[3]?v[3]/255:v[3]:1;u=null!=b[3]?1<b[3]?b[3]/255:b[3]:1;I&&F[x].push(Math.min(255,Math.round(255*(A*(1-m)+u*m))))}})}return F}};R.getColorRampId=C;R.getColorRampName=function(W){return(W=C(W))?
Y[W]:null};Object.defineProperty(R,"__esModule",{value:!0})})},"esri/core/colorUtils":function(){define(["exports"],function(R){function r(I,y){const H=[];let F,b;if(I[0].length!==y.length)throw"dimensions do not match";const n=I.length,m=I[0].length;let q=0;for(F=0;F<n;F++){for(b=q=0;b<m;b++)q+=I[F][b]*y[b];H.push(q)}return H}function K(I){I=[I.r/255,I.g/255,I.b/255].map(y=>.04045>=y?y/12.92:((y+.055)/1.055)**2.4);I=r(W,I);return{x:100*I[0],y:100*I[1],z:100*I[2]}}function N(I){I=r(U,[I.x/100,I.y/
100,I.z/100]).map(y=>Math.min(1,Math.max(.0031308>=y?12.92*y:1.055*y**(1/2.4)-.055,0)));return{r:Math.round(255*I[0]),g:Math.round(255*I[1]),b:Math.round(255*I[2])}}function C(I){I=[I.x/95.047,I.y/100,I.z/108.883].map(y=>y>(6/29)**3?y**(1/3):1/3*(29/6)**2*y+4/29);return{l:116*I[1]-16,a:500*(I[0]-I[1]),b:200*(I[1]-I[2])}}function Q(I){const y=I.l;I=[(y+16)/116+I.a/500,(y+16)/116,(y+16)/116-I.b/200].map(H=>H>6/29?H**3:3*(6/29)**2*(H-4/29));return{x:95.047*I[0],y:100*I[1],z:108.883*I[2]}}function Y(I){if("r"in
I&&"g"in I&&"b"in I)return I;if("l"in I&&"c"in I&&"h"in I){var y=I.c;var H=I.h;y={l:I.l,a:y*Math.cos(H),b:y*Math.sin(H)};return N(Q(y))}if("l"in I&&"a"in I&&"b"in I)return N(Q(I));if("x"in I&&"y"in I&&"z"in I)return N(I);if("h"in I&&"s"in I&&"v"in I){{H=(I.h+360)%360/60;y=I.v/100*255;I=I.s/100*y;const F=I*(1-Math.abs(H%2-1));switch(Math.floor(H)){case 0:H={r:I,g:F,b:0};break;case 1:H={r:F,g:I,b:0};break;case 2:H={r:0,g:I,b:F};break;case 3:H={r:0,g:F,b:I};break;case 4:H={r:F,g:0,b:I};break;case 5:case 6:H=
{r:I,g:0,b:F};break;default:H={r:0,g:0,b:0}}H.r=Math.round(H.r+y-I);H.g=Math.round(H.g+y-I);H.b=Math.round(H.b+y-I);y=H}return y}return I}const W=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],U=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];R.darken=function(I,y){I=C(K(I));I.l*=1-y;return N(Q(I))};R.toHSV=function(I){if("h"in I&&"s"in I&&"v"in I)return I;var y=Y(I);{I=y.r;const H=y.g,F=y.b;y=Math.max(I,H,F);const b=y-Math.min(I,H,F);I=0===b?0:y===I?(H-F)/b%6:y===
H?(F-I)/b+2:(I-H)/b+4;0>I&&(I+=6);I={h:60*I,s:100*(0===b?0:b/y),v:100/255*y}}return I};R.toLAB=function(I){return"l"in I&&"a"in I&&"b"in I?I:C(K(Y(I)))};R.toLCH=function(I){if(!("l"in I&&"c"in I&&"h"in I)){{var y=C(K(Y(I)));I=y.l;var H=y.a;const F=y.b;y=Math.sqrt(H*H+F*F);H=Math.atan2(F,H);H=0<H?H:H+2*Math.PI;I={l:I,c:y,h:H}}}return I};R.toRGB=Y;R.toXYZ=function(I){return"x"in I&&"y"in I&&"z"in I?I:K(Y(I))};Object.defineProperty(R,"__esModule",{value:!0})})},"esri/renderers/RasterShadedReliefRenderer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/has ../core/Logger ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../rest/support/colorRamps".split(" "),
function(R,r,K,N,C,Q,Y,W,U,I,y,H){var F;K=F=function(b){function n(q){q=b.call(this,q)||this;q.altitude=45;q.azimuth=315;q.colorRamp=null;q.hillshadeType="multi-directional";q.pixelSizePower=.664;q.pixelSizeFactor=.024;q.scalingType="none";q.type="raster-shaded-relief";q.zFactor=1;return q}R._inheritsLoose(n,b);var m=n.prototype;m.readColorRamp=function(q){return H.fromJSON(q)};m.clone=function(){return new F({hillshadeType:this.hillshadeType,altitude:this.altitude,azimuth:this.azimuth,zFactor:this.zFactor,
scalingType:this.scalingType,pixelSizeFactor:this.pixelSizeFactor,pixelSizePower:this.pixelSizePower,colorRamp:N.clone(this.colorRamp)})};return n}(K.JSONSupport);r.__decorate([C.property({type:Number,json:{write:!0}})],K.prototype,"altitude",void 0);r.__decorate([C.property({type:Number,json:{write:!0}})],K.prototype,"azimuth",void 0);r.__decorate([C.property({types:H.types,json:{write:!0}})],K.prototype,"colorRamp",void 0);r.__decorate([I.reader("colorRamp")],K.prototype,"readColorRamp",null);r.__decorate([C.property({type:["traditional",
"multi-directional"],json:{write:!0}})],K.prototype,"hillshadeType",void 0);r.__decorate([C.property({type:Number,json:{write:!0}})],K.prototype,"pixelSizePower",void 0);r.__decorate([C.property({type:Number,json:{write:!0}})],K.prototype,"pixelSizeFactor",void 0);r.__decorate([C.property({type:["none","adjusted"],json:{write:!0}})],K.prototype,"scalingType",void 0);r.__decorate([U.enumeration({rasterShadedRelief:"raster-shaded-relief"})],K.prototype,"type",void 0);r.__decorate([C.property({type:Number,
json:{write:!0}})],K.prototype,"zFactor",void 0);return K=F=r.__decorate([y.subclass("esri.renderers.RasterShadedReliefRenderer")],K)})},"esri/renderers/RasterStretchRenderer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/has ../core/Logger ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ./support/stretchRendererUtils ../rest/support/colorRamps".split(" "),
function(R,r,K,N,C,Q,Y,W,U,I,y,H,F,b){var n;K=n=function(m){function q(D){D=m.call(this,D)||this;D.colorRamp=null;D.computeGamma=!1;D.dynamicRangeAdjustment=!1;D.gamma=[];D.maxPercent=null;D.minPercent=null;D.numberOfStandardDeviations=null;D.outputMax=null;D.outputMin=null;D.sigmoidStrengthLevel=null;D.statistics=[];D.histograms=null;D.useGamma=!1;D.stretchType="none";D.type="raster-stretch";return D}R._inheritsLoose(q,m);var v=q.prototype;v.readColorRamp=function(D){if(D)return b.fromJSON(D)};v.writeStatistics=
function(D,x,A){var u;null!=(u=D)&&u.length&&(Array.isArray(D[0])||(D=D.map(g=>[g.min,g.max,g.avg,g.stddev])),x[A]=D)};v.readStretchType=function(D,x){D=x.stretchType;"number"===typeof D&&(D=F.stretchTypeFunctionEnum[D]);return F.stretchTypeJSONDict.read(D)};v.clone=function(){return new n({stretchType:this.stretchType,outputMin:this.outputMin,outputMax:this.outputMax,useGamma:this.useGamma,computeGamma:this.computeGamma,statistics:N.clone(this.statistics),gamma:N.clone(this.gamma),sigmoidStrengthLevel:this.sigmoidStrengthLevel,
numberOfStandardDeviations:this.numberOfStandardDeviations,minPercent:this.minPercent,maxPercent:this.maxPercent,colorRamp:N.clone(this.colorRamp),histograms:N.clone(this.histograms),dynamicRangeAdjustment:this.dynamicRangeAdjustment})};return q}(K.JSONSupport);r.__decorate([C.property({types:b.types,json:{write:!0}})],K.prototype,"colorRamp",void 0);r.__decorate([I.reader("colorRamp")],K.prototype,"readColorRamp",null);r.__decorate([C.property({type:Boolean,json:{write:!0}})],K.prototype,"computeGamma",
void 0);r.__decorate([C.property({type:Boolean,json:{write:{target:"dra"},read:{source:"dra"}}})],K.prototype,"dynamicRangeAdjustment",void 0);r.__decorate([C.property({type:[Number],json:{write:!0}})],K.prototype,"gamma",void 0);r.__decorate([C.property({type:Number,json:{write:!0}})],K.prototype,"maxPercent",void 0);r.__decorate([C.property({type:Number,json:{write:!0}})],K.prototype,"minPercent",void 0);r.__decorate([C.property({type:Q.Integer,json:{write:!0}})],K.prototype,"numberOfStandardDeviations",
void 0);r.__decorate([C.property({type:Number,json:{read:{source:"max"},write:{target:"max"}}})],K.prototype,"outputMax",void 0);r.__decorate([C.property({type:Number,json:{read:{source:"min"},write:{target:"min"}}})],K.prototype,"outputMin",void 0);r.__decorate([C.property({type:Number,json:{write:!0}})],K.prototype,"sigmoidStrengthLevel",void 0);r.__decorate([C.property({json:{type:[[Number]],write:!0}})],K.prototype,"statistics",void 0);r.__decorate([C.property()],K.prototype,"histograms",void 0);
r.__decorate([H.writer("statistics")],K.prototype,"writeStatistics",null);r.__decorate([C.property({type:Boolean,json:{write:!0}})],K.prototype,"useGamma",void 0);r.__decorate([C.property({type:F.stretchTypeJSONDict.apiValues,json:{type:F.stretchTypeJSONDict.jsonValues,write:F.stretchTypeJSONDict.write}})],K.prototype,"stretchType",void 0);r.__decorate([I.reader("stretchType",["stretchType"])],K.prototype,"readStretchType",null);r.__decorate([U.enumeration({rasterStretch:"raster-stretch"})],K.prototype,
"type",void 0);return K=n=r.__decorate([y.subclass("esri.renderers.RasterStretchRenderer")],K)})},"esri/renderers/support/stretchRendererUtils":function(){define(["exports","../../core/jsonMap"],function(R,r){r=new r.JSONMap({none:"none",standardDeviation:"standard-deviation",histogramEqualization:"histogram-equalization",minMax:"min-max",percentClip:"percent-clip",sigmoid:"sigmoid"});R.stretchTypeFunctionEnum={0:"none",3:"standardDeviation",4:"histogramEqualization",5:"minMax",6:"percentClip",9:"sigmoid"};
R.stretchTypeJSONDict=r;Object.defineProperty(R,"__esModule",{value:!0})})},"esri/renderers/VectorFieldRenderer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Color ../geometry ../Graphic ../symbols ../core/jsonMap ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/has ../core/Logger ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../geometry/support/normalizeUtils ../layers/support/rasterFunctions/vectorFieldUtils ./ClassBreaksRenderer ./mixins/VisualVariablesMixin ./support/ClassBreakInfo ./visualVariables/RotationVariable ./visualVariables/SizeVariable ./visualVariables/support/visualVariableUtils ../symbols/SimpleLineSymbol ../symbols/SimpleMarkerSymbol ../symbols/support/utils ../symbols/PictureMarkerSymbol ../geometry/Point".split(" "),
function(R,r,K,N,C,Q,Y,W,U,I,y,H,F,b,n,m,q,v,D,x,A,u,g,c,E,l,w,G,d){var h;const p=new Set(["esriMetersPerSecond","esriKilometersPerHour","esriKnots","esriFeetPerSecond","esriMilesPerHour"]),k=new Y.JSONMap({esriMetersPerSecond:"meter-per-second",esriKilometersPerHour:"kilometer-per-hour",esriKnots:"knots",esriFeetPerSecond:"feet-per-second",esriMilesPerHour:"mile-per-hour"});N=new Y.JSONMap({beaufort_ft:"beaufort-ft",beaufort_km:"beaufort-km",beaufort_kn:"beaufort-kn",beaufort_m:"beaufort-m",beaufort_mi:"beaufort-mi",
classified_arrow:"classified-arrow",ocean_current_kn:"ocean-current-kn",ocean_current_m:"ocean-current-m",simple_scalar:"simple-scalar",single_arrow:"single-arrow",wind_speed:"wind-barb"});Y=new Y.JSONMap({flow_from:"flow-from",flow_to:"flow-to"});W=h=function(f){function B(z){z=f.call(this,z)||this;z.attributeField="Magnitude";z.flowRepresentation="flow-from";z.rotationType="arithmetic";z.style="single-arrow";z.symbolTileSize=50;z.type="vector-field";return z}R._inheritsLoose(B,f);var O=B.prototype;
O.readInputUnit=function(z,t){return p.has(z)?k.fromJSON(z):null};O.readOutputUnit=function(z,t){return p.has(z)?k.fromJSON(z):null};O.clone=function(){return new h({attributeField:this.attributeField,flowRepresentation:this.flowRepresentation,rotationType:this.rotationType,symbolTileSize:this.symbolTileSize,style:this.style,visualVariables:U.clone(this.visualVariables),inputUnit:this.inputUnit,outputUnit:this.outputUnit})};O.getGraphicsFromPixelData=function(){var z=R._asyncToGenerator(function*(t,
J=!1,V=[]){const T=[];var ba=v.getUnitConversionFactor(this.inputUnit,this.outputUnit);J=J?v.convertVectorFieldData(t.pixelBlock,"vector-uv",this.rotationType,ba):v.convertVectorFieldUnit(t.pixelBlock,"vector-magdir",ba);t=t.extent;ba=J.mask&&0<J.mask.length;let M=0;const L=(t.xmax-t.xmin)/J.width,S=(t.ymax-t.ymin)/J.height;for(let aa=0;aa<J.height;aa++)for(let fa=0;fa<J.width;fa++,M++){let a=new d({x:t.xmin+fa*L+L/2,y:t.ymax-aa*S-S/2,spatialReference:t.spatialReference});a=(yield q.normalizeCentralMeridian(a))[0];
var X=V.some(e=>e.intersects(a));ba&&!J.mask[M]||X||(X=new C({geometry:{type:"point",x:a.x,y:a.y,spatialReference:t.spatialReference},attributes:{Magnitude:J.pixels[0][M],Direction:J.pixels[1][M]}}),X.symbol=this._getVisualVariablesAppliedSymbol(X),T.push(X))}return T});return function(t){return z.apply(this,arguments)}}();O.getSymbol=function(z,t){};O.getSymbolAsync=function(){var z=R._asyncToGenerator(function*(t,J){});return function(t,J){return z.apply(this,arguments)}}();O.getSymbols=function(){return[]};
O.getClassBreakInfos=function(){var z;return null==(z=this.styleRenderer)?void 0:z.classBreakInfos};O.getDefaultSymbol=function(){var z;return null==(z=this.styleRenderer)?void 0:z.defaultSymbol};O._getDefaultSymbol=function(z){return new l({path:"M14,32 14,18 9,23 16,3 22,23 17,18 17,32 z",outline:new E({width:0}),size:20,color:z||new K([0,92,230])})};O._getVisualVariablesAppliedSymbol=function(z){if(z){var t=this.styleRenderer&&this.styleRenderer.getSymbol(z);t=t.clone();var J=this.sizeVariables,
V=this.rotationVariables;J&&J.length&&this.sizeVariables.forEach(T=>w.applySizesToSymbol(t,c.getAllSizes([T],z)));V&&V.length&&(J=z.attributes.Direction,z.attributes.Direction="flow-from"===this.flowRepresentation?J:J+180,this.rotationVariables.forEach(T=>w.applyRotationToSymbol(t,c.getRotationAngle(T,z),T.axis)));return t}};O._createStyleRenderer=function(z){let t={defaultSymbol:this._getDefaultSymbol(),classBreakInfos:[]};switch(z){case "single-arrow":t=this._createSingleArrowRenderer();break;case "beaufort-kn":t=
this._createBeaufortKnotsRenderer();break;case "beaufort-m":t=this._createBeaufortMeterRenderer();break;case "beaufort-ft":t=this._createBeaufortFeetRenderer();break;case "beaufort-mi":t=this._createBeaufortMilesRenderer();break;case "beaufort-km":t=this._createBeaufortKilometersRenderer();break;case "ocean-current-m":t=this._createCurrentMeterRenderer();break;case "ocean-current-kn":t=this._createCurrentKnotsRenderer();break;case "simple-scalar":t=this._createSimpleScalarRenderer();break;case "wind-barb":t=
this._createWindBarbsRenderer();break;case "classified-arrow":t=this._createClassifiedArrowRenderer()}return new D(t)};O._createSingleArrowRenderer=function(){return{defaultSymbol:this._getDefaultSymbol()}};O._createBeaufortKnotsRenderer=function(){const z=this._getDefaultSymbol(new K([214,47,39])),t=this._getClassBreaks([0,1,3,6,10,16,21,27,33,40,47,55,63],[[40,146,199],[89,162,186],[129,179,171],[160,194,155],[191,212,138],[218,230,119],[250,250,100],[252,213,83],[252,179,102],[250,141,52],[247,
110,42],[240,71,29]]);return{defaultSymbol:z,classBreakInfos:t}};O._createBeaufortMeterRenderer=function(){const z=this._getDefaultSymbol(new K([214,47,39])),t=this._getClassBreaks([0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7],[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]]);return{defaultSymbol:z,classBreakInfos:t}};O._createBeaufortFeetRenderer=function(){const z=this._getDefaultSymbol(new K([214,
47,39]));var t=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];t=t.map(J=>3.28084*J);t=this._getClassBreaks(t,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]]);return{defaultSymbol:z,classBreakInfos:t}};O._createBeaufortMilesRenderer=function(){const z=this._getDefaultSymbol(new K([214,47,39]));var t=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];t=t.map(J=>2.23694*
J);t=this._getClassBreaks(t,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]]);return{defaultSymbol:z,classBreakInfos:t}};O._createBeaufortKilometersRenderer=function(){const z=this._getDefaultSymbol(new K([214,47,39]));var t=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];t=t.map(J=>3.6*J);t=this._getClassBreaks(t,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,
204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]]);return{defaultSymbol:z,classBreakInfos:t}};O._createCurrentMeterRenderer=function(){const z=this._getDefaultSymbol(new K([177,177,177])),t=this._getClassBreaks([0,.5,1,1.5,2],[[78,26,153],[179,27,26],[202,128,26],[177,177,177]]);return{defaultSymbol:z,classBreakInfos:t}};O._createCurrentKnotsRenderer=function(){const z=this._getDefaultSymbol(new K([177,177,177])),t=this._getClassBreaks([0,.25,
.5,1,1.5,2,2.5,3,3.5,4],[[0,0,0],[0,37,100],[78,26,153],[151,0,100],[179,27,26],[177,78,26],[202,128,26],[177,179,52],[177,177,177]]);return{defaultSymbol:z,classBreakInfos:t}};O._createClassifiedArrowRenderer=function(){var z;const t=this._getDefaultSymbol(new K([56,168,0]));var J=[0,1E-6,3.5,7,10.5,14];if(null!=(z=this.sizeVariables)&&z.length){const V=this.sizeVariables[0].minDataValue;z=this.sizeVariables[0].maxDataValue;if(V&&z){const T=(z-V)/5;J=Array.from(Array(6).keys()).map(ba=>V+T*ba)}}J=
this._getClassBreaks(J,[[56,168,0],[139,309,0],[255,255,0],[255,128,0],[255,0,0]]);return{defaultSymbol:t,classBreakInfos:J}};O._createSimpleScalarRenderer=function(){return{defaultSymbol:G.fromJSON({imageData:"iVBORw0KGgoAAAANSUhEUgAAACsAAAArCAQAAABLVLlLAAAABGdBTUEAAYagMeiWXwAAAAJiS0dEAACqjSMyAAAACXBIWXMAAABIAAAASABGyWs+AAAC3ElEQVRIx9XXvW4cVRQH8N982btpsIREJECyiCXsxX4DKh6AliqGKCBBE2SlwlHgAbBD/AKmyEYUeQ1KahPZSZQvBCkQLTHZ7KGY8Xodz4w3a1NwbzVzz/znfJ//zbStVC5q3icKak9GAs2QIdDx3PtW/S011NW3p+M5Eomh11ipTIKe6+4LQzHaQ+G+63pIZNJJQXMpljwTwj1brpgx5w1zZlyx5Z4QnllEIm2xeeSUHBf0hV0bejo1Uh09G3aFvgXk7cCJFBc9EdaRVuHJJaOdKyTV2TVhYLMduNR0Q9gxL5GaaTDw8GzejrDRBpxWoGsySRW0dttKuattwNkIlFw2YXgzOdYq4Ox49PlM+JrKd5OusjTWhBuVxUfMX/KXXZ3WEmkuqa67wspR4BTbwtKr/5u4fFgStse/T7EifFPnnYl9zPq4vmUOPrRndgoHjDti1gOPqlyXoifcRNGQzUd31lDyfHmob1Gp35vSr+P6vilcQ5Egtyd8YF/ySg9NhPM+9M/IOaHwp5+PSZayXTvCogEUwlatC3J8LLwYtcWB8EuDXQVuCkV5/B4eNHb7wGBs87LBDS+xjdVSn09wq1G8dFM+9tSUhIGneLvUdniKxKpTYljCpu3j7rVWlHj/P23v4NPGUEyeCQnexe9lJjzEQqMjJs+EzNAX6B98dBZVRmroJx95x/A/6gln18EyfCUsl+qdXb/tjvfbw+mwforpUOBz4XLVoBwAn3aWnfeH246NyBXhrq7TTN5lNSP9RkU+puUJm3W2Tsdq0nZWM07srk7MwQrZSRysjjGWBLRJNsNbfj2JMR4AbxpU1XLAb9Mxfpsq5EjMuuiR8L0JiHOOBX3hiUvOmavN0nMueSzcceFk0BK4pMqLo7vDD1Z0qrtDx7Itt4Xwm9UqbMmk8S0Dtuzb2pvOU99Z1nLTOfleNmvfZfP2pYZmPfajwosKdDBNpacNpVGGsWX9CyDI8Xq/Sj6QAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE0LTExLTEwVDAzOjE3OjU4LTA1OjAwF+tHyQAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxNC0xMS0xMFQwMzoxNzo1OC0wNTowMGa2/3UAAAAASUVORK5CYII\x3d",
height:20,width:20,type:"esriPMS",angle:0})}};O._createWindBarbsRenderer=function(){const z=Array.from(Array(31).keys()).map(T=>5*T),t=[{range:"0-5",path:"M20 20 M5 20 A15 15 0 1 0 35 20 A15 15 0 1 0 5 20 M20 20 M10 20 A10 10 0 1 0 30 20 A10 10 0 1 0 10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTIwIDIwIE01IDIwIEExNSAxNSAwIDEgMCAzNSAyMCBBMTUgMTUgMCAxIDAgNSAyMCBNMjAgMjAgTTEwIDIwIEExMCAxMCAwIDEgMCAzMCAyMCBBMTAgMTAgMCAxIDAgMTAgMjAiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},
{range:"5-10",path:"M25 0 L25 40 M25 35 L17.5 37.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNyA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTTI1IDM1IEwxNy41IDM3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"10-15",path:"M25 0 L25 40 L10 45 L25 40",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNyA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"15-20",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L17.5 37.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjEyIDAgMTUgNDUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxNy41IDM3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"20-25",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNiA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCBNMjUgMzUgTDEwIDQwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},
{range:"25-30",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L17.5 32.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNiA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCBNMjUgMzUgTDEwIDQwIEwyNSAzNSBNMjUgMzAgTDE3LjUgMzIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"30-35",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"35-40",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxNy41IDI3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"40-45",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"45-50",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxNy41IDIyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},
{range:"50-55",path:"M25 0 L25 40 L10 40 L25 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"55-60",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L17.5 32.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxNy41IDMyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},
{range:"60-65",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"65-70",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxNy41IDI3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},
{range:"70-75",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"75-80",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxNy41IDIyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"80-85",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"85-90",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L17.5 17.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxNy41IDE3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"90-95",
path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxMCAyMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"95-100",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20 L25 15 M25 10 L17.5 12.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxMCAyMCBMMjUgMTUgTTI1IDEwIEwxNy41IDEyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"100-105",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"105-110",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDE3LjUgMjcuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"110-115",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},
{range:"115-120",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L17.5 22.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDE3LjUgMjIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"120-125",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"125-130",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L17.5 17.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDE3LjUgMTcuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"130-135",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"135-140",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDE3LjUgMTIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"140-145",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDEwIDE1IiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"145-150",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDEwIDE1IE0yNSAxMCBNMjUgNSBMMTcuNSA3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"}],J=G.fromJSON({imageData:"iVBORw0KGgoAAAANSUhEUgAAACgAAAApCAQAAADtq6NDAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAJiS0dEAP+Hj8y/AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAEY0lEQVRIx5XXWWxWRRQH8N+d+31tUdGAVjGglYJABFEBY91jfDAg7piYaFTccA++uMQEFRcSXlATtxiXqMQt4G4iisYl0ai4sIQYtVFZ1KIFKdTS0l4f7vRCS5fPebozc+bM/2z/Mzcx0AgSiUxXnKfIdMn875FIhX53U2n/B/s+kKM4UINTjTBZImixxnrv+9a2iL6zEoUBXcoudrWj/OtHm3wt02lfU9Qao9OnHvIhgmww84MEl1qnxfNmGrqHxAizLdPpC6chGcAxKGGcL+30gOERf1BSpUqVslQSV8d5ReZFe8VQ9avufJn31cWwlJV7iafKStGOE/1qvfH9qUxxu8ydUdmuSKbGO8YUdT2inKLG69pM70tliktl5qIkCAJGmusDG7Vqsc0WjZa4UBlBiA5YZIcjYzB7qDtH5kaUJFLs7RGZTZ42W4PRRmtwvbdt1+wGiaS4drEtDttdZYIDNVuAclR3vA3+dI3qHqmVSy7U6Tv1MScCPvPR7nIpFlsdCy3FdTLPGhK92e2CUITjMJ9ocwKxnsZqc3O3JwMma3d6UVLnyVxB4aXemZqvPqLdpJhW3KVVbY4yYImPo6M5Urv50fj+0z/FG9YaEiENs8UtMfXUaTeTePNHlhXfA1UU+2lyD1Il3Gtt9+adfpNG7dNlpg2U/T3KYLZ2dUWFdTgp3/rQ4sK973qnInV5TIf40x3dhvrJPBiqyWUo4wAtLqhQYS71qK+QKOFRywmGK/kpikzV6WMKhh58vGWs4TIJNjiEYLIuP8Tt4/zmLyqk+AyrJSbF+Qq1DgqRUPMxyl+9q3IQhX/rMCJ6tEunriDs1oSyQZKlr9AkhT2ZIARbJfaJS1vtVbHB+Rgi0RK/y1q1BWsEEyLoz40xtGKcARPVWB1BTPO7f4LNtpkUl1aoMbViLyZo0GRjPD3BxnxjqXeLYlvhqYrzMMG3HoyJXa3JjfnGlbYYFlP7Jh3qKsKY4hQ7TY0nG+xwRL61n63mxHtqNHosigyMLmClNwvuecFnOZB88nNBDzNkzhxEZaKMBVoKapggMzvHHXBEpNSSFAvtcFRsVn0bW8LlMmcXs+c0Kne3gRR32+zg4uXwjC6zit6Wt4a8LXVfcp/MtQXHn2ynGbuCmb8GvvFeJLEE82ReU9/n6+dkq2x3buG9Wn94smcgAw631RPR7BTH+kbmHReZoEpOdEe7zWqZl40s0JWs9Hmv7hjBHqPDwsjGKVJnWWqjbdZp1KhJi0aPmxYZsIRhlttgeF+Jlke41QcOQKoqilSb6HJzSvNG3G/UoWnxwsmt+sVaYwd63dRbqdnMyCPVeyRPvpYgdavM22oGKoMUVRbJfOWMwidJ8Zzb1UvmWK/VVUXzHaTjjrVYh1897HT7xxYEVUaa5SWb/WO+YUWa9SrwvigzM8YlzlYv2GSdVCYxxlBtVnnFq5olwp5/BEk/OLsf5LUmG2+inRJdVvjZ97ZH9/zP34ug1O91pf4p+D+JYBpvrKxfbwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxNC0xMS0xMFQwMzoxMjowOS0wNTowMB9ViV0AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTQtMTEtMTBUMDM6MTI6MDktMDU6MDBuCDHhAAAAAElFTkSuQmCC",
height:20,width:20,type:"esriPMS",angle:0}),V=z.map((T,ba)=>{if(ba!==z.length-1)if(0===ba)var M={minValue:T,maxValue:z[ba+1],symbol:J};else M=G.fromJSON({type:"esriPMS",imageData:t[ba].imageData,contentType:"image/svg+xml",height:32,width:32,angle:0}),M={minValue:T,maxValue:z[ba+1],symbol:M};return new A(M)});return{defaultSymbol:J,classBreakInfos:V}};O._getClassBreaks=function(z,t){return t.map((J,V)=>new A({minValue:z[V],maxValue:z[V+1],symbol:this._getDefaultSymbol(new K(J))}))};R._createClass(B,
[{key:"styleRenderer",get:function(){const z=this.attributeField,t=this._createStyleRenderer(this.style);t.field=z;return t}},{key:"sizeVariables",get:function(){const z=[];if(this.visualVariables)for(var t of this.visualVariables)"size"===t.type&&z.push(t);0===z.length&&(t=new g({field:"Magnitude",minSize:.2*this.symbolTileSize,maxSize:.8*this.symbolTileSize}),this.visualVariables?this.visualVariables.push(t):this._set("visualVariables",[t]),z.push(t));return z}},{key:"rotationVariables",get:function(){const z=
[];if(this.visualVariables)for(var t of this.visualVariables)"rotation"===t.type&&z.push(t);0===z.length&&(t=new u({field:"Direction",rotationType:this.rotationType}),this.visualVariables?this.visualVariables.push(t):this._set("visualVariables",[t]),z.push(t));return z}}]);return B}(x.VisualVariablesMixin(W.JSONSupport));r.__decorate([I.property({type:String,json:{write:!0}})],W.prototype,"attributeField",void 0);r.__decorate([I.property({type:Y.apiValues,json:{type:Y.jsonValues,read:{reader:Y.read},
write:{writer:Y.write}}})],W.prototype,"flowRepresentation",void 0);r.__decorate([I.property({type:["geographic","arithmetic"],json:{write:!0}})],W.prototype,"rotationType",void 0);r.__decorate([I.property({type:N.apiValues,json:{type:N.jsonValues,read:{reader:N.read},write:{writer:N.write}}})],W.prototype,"style",void 0);r.__decorate([I.property({json:{write:!0}})],W.prototype,"symbolTileSize",void 0);r.__decorate([I.property({type:k.apiValues,json:{type:k.jsonValues,write:{writer:k.write}}})],W.prototype,
"inputUnit",void 0);r.__decorate([n.reader("inputUnit")],W.prototype,"readInputUnit",null);r.__decorate([I.property({type:k.apiValues,json:{type:k.jsonValues,read:{reader:k.read},write:{writer:k.write}}})],W.prototype,"outputUnit",void 0);r.__decorate([n.reader("outputUnit")],W.prototype,"readOutputUnit",null);r.__decorate([b.enumeration({vectorField:"vector-field"})],W.prototype,"type",void 0);r.__decorate([I.property({type:D})],W.prototype,"styleRenderer",null);r.__decorate([I.property({type:g})],
W.prototype,"sizeVariables",null);r.__decorate([I.property({type:u})],W.prototype,"rotationVariables",null);return W=h=r.__decorate([m.subclass("esri.renderers.VectorFieldRenderer")],W)})},"esri/layers/support/rasterFunctions/vectorFieldUtils":function(){define(["exports","../../../core/maybe","../PixelBlock"],function(R,r,K){function N(U,I="geographic"){const [y,H]=U;U=Math.sqrt(y*y+H*H);let F=Math.atan2(H,y)*Q;F=(360+F)%360;"geographic"===I&&(F=(450-F)%360);return[U,F]}function C(U,I="geographic"){let y=
U[1];"geographic"===I&&(y=(450-y)%360);y%=360;U=U[0];return[U*Math.cos(y/Q),U*Math.sin(y/Q)]}const Q=180/Math.PI,Y=function(U){return U&&"esri.layers.support.PixelBlock"===U.declaredClass&&U.pixels&&0<U.pixels.length},W=new Map;W.set("meter-per-second",1);W.set("kilometer-per-hour",.277778);W.set("knots",.514444);W.set("feet-per-second",.3048);W.set("mile-per-hour",.44704);R.convertVectorFieldData=function(U,I,y="geographic",H=1){if(!Y(U))return U;const {pixels:F,width:b,height:n}=U;var m=b*n;const q=
F[0],v=F[1],D=K.createEmptyBand(U.pixelType,m);m=K.createEmptyBand(U.pixelType,m);let x=0;for(let A=0;A<n;A++)for(let u=0;u<b;u++)"vector-uv"===I?([D[x],m[x]]=N([q[x],v[x]],y),D[x]*=H):([D[x],m[x]]=C([q[x],v[x]],y),D[x]*=H,m[x]*=H),x++;U=new K({pixelType:U.pixelType,width:U.width,height:U.height,mask:U.mask,validPixelCount:U.validPixelCount,maskIsAlpha:U.maskIsAlpha,pixels:[D,m]});U.updateStatistics();return U};R.convertVectorFieldUnit=function(U,I,y=1){if(1===y||!Y(U))return U;U=U.clone();const {pixels:H,
width:F,height:b}=U,n=H[0],m=H[1];let q=0;for(let v=0;v<b;v++)for(let D=0;D<F;D++)"vector-uv"===I?(n[q]*=y,m[q]*=y):n[q]*=y,q++;U.updateStatistics();return U};R.getUnitConversionFactor=function(U,I){return W.get(U)/W.get(I)||1};R.isValidPixelBlock=Y;R.snapImageToSymbolTile=function(U,I,y,H,F){if(!r.isSome(F)||!F.spatialReference.equals(U.spatialReference))return{extent:U,width:I,height:y,resolution:U.width/I};const b=F.xmin;F=F.ymax;H=Math.max(H||0,30);I=((U.xmax-U.xmin)/Math.ceil(1/H*I)+(U.ymax-
U.ymin)/Math.ceil(1/H*y))/2;U.xmin=b+Math.floor((U.xmin-b)/I)*I;U.xmax=b+Math.ceil((U.xmax-b)/I)*I;U.ymin=F+Math.floor((U.ymin-F)/I)*I;U.ymax=F+Math.ceil((U.ymax-F)/I)*I;return{extent:U,width:Math.round(U.width/I),height:Math.round(U.height/I),resolution:I}};Object.defineProperty(R,"__esModule",{value:!0})})},"esri/layers/support/PixelBlock":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Error ../../core/JSONSupport ../../core/lang ../../core/Logger ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/jsonMap ../../core/accessorSupport/decorators/subclass".split(" "),
function(R,r,K,N,C,Q,Y,W,U,I,y,H){var F;const b=Y.getLogger("esri.layers.support.PixelBlock");K=F=function(n){function m(v){v=n.call(this,v)||this;v.width=null;v.height=null;v.pixelType="f32";v.validPixelCount=null;v.mask=null;v.maskIsAlpha=!1;v.pixels=null;v.statistics=null;return v}R._inheritsLoose(m,n);m.createEmptyBand=function(v,D){return new (F.getPixelArrayConstructor(v))(D)};m.getPixelArrayConstructor=function(v){let D;switch(v){case "u1":case "u2":case "u4":case "u8":D=Uint8Array;break;case "u16":D=
Uint16Array;break;case "u32":D=Uint32Array;break;case "s8":D=Int8Array;break;case "s16":D=Int16Array;break;case "s32":D=Int32Array;break;case "u32":D=Uint32Array;break;case "f32":D=Float32Array;break;case "f64":D=Float64Array;break;case "c64":case "c128":case "unknown":D=Float32Array}return D};var q=m.prototype;q.castPixelType=function(v){if(!v)return"f32";v=v.toLowerCase();-1<["u1","u2","u4"].indexOf(v)?v="u8":-1==="unknown u8 s8 u16 s16 u32 s32 f32 f64".split(" ").indexOf(v)&&(v="f32");return v};
q.getPlaneCount=function(){return this.pixels&&this.pixels.length};q.addData=function(v){if(!v.pixels||v.pixels.length!==this.width*this.height)throw new N("pixelblock:invalid-or-missing-pixels","add data requires valid pixels array that has same length defined by pixel block width * height");this.pixels||(this.pixels=[]);this.statistics||(this.statistics=[]);this.pixels.push(v.pixels);this.statistics.push(v.statistics||{minValue:null,maxValue:null})};q.getAsRGBA=function(){const v=new ArrayBuffer(this.width*
this.height*4);switch(this.pixelType){case "s8":case "s16":case "u16":case "s32":case "u32":case "f32":case "f64":this._fillFromNon8Bit(v);break;default:this._fillFrom8Bit(v)}return new Uint8ClampedArray(v)};q.getAsRGBAFloat=function(){const v=new Float32Array(this.width*this.height*4);this._fillFrom32Bit(v);return v};q.updateStatistics=function(){this.statistics=this.pixels.map(x=>this._calculateBandStatistics(x,this.mask));const v=this.mask;let D=0;if(v)for(let x=0;x<v.length;x++)v[x]&&D++;else D=
this.width*this.height;this.validPixelCount=D};q.clamp=function(v){if(v&&"f64"!==v&&"f32"!==v){switch(v){case "u8":var D=[0,255];break;case "u16":D=[0,65535];break;case "u32":D=[0,4294967295];break;case "s8":D=[-128,127];break;case "s16":D=[-32768,32767];break;case "s32":D=[-2147483648,2147483647];break;default:D=[-3.4*1E39,3.4*1E39]}var [x,A]=D;D=this.pixels;var u=this.width*this.height,g=D.length,c=[];for(let G=0;G<g;G++){var E=F.createEmptyBand(v,u);var l=D[G];for(let d=0;d<u;d++){var w=l[d];E[d]=
w>A?A:w<x?x:w}c.push(E)}this.pixels=c;this.pixelType=v}};q.extractBands=function(v){if(W.isNone(v)||0===v.length||null==this.pixels||0===this.pixels.length)return this;var D=this.pixels.length;const x=v.some(A=>A>=this.pixels.length);D=D===v.length&&!v.some((A,u)=>A!==u);return x||D?this:new F({pixelType:this.pixelType,width:this.width,height:this.height,mask:this.mask,validPixelCount:this.validPixelCount,maskIsAlpha:this.maskIsAlpha,pixels:v.map(A=>this.pixels[A]),statistics:this.statistics&&v.map(A=>
this.statistics[A])})};q.clone=function(){const v=new F({width:this.width,height:this.height,pixelType:this.pixelType,maskIsAlpha:this.maskIsAlpha,validPixelCount:this.validPixelCount});this.mask&&(v.mask=this.mask instanceof Uint8Array?new Uint8Array(this.mask):this.mask.slice(0));let D;const x=F.getPixelArrayConstructor(this.pixelType);if(this.pixels&&0<this.pixels.length){v.pixels=[];const A=this.pixels[0].slice;for(D=0;D<this.pixels.length;D++)v.pixels[D]=A?this.pixels[D].slice(0,this.pixels[D].length):
new x(this.pixels[D])}if(this.statistics)for(v.statistics=[],D=0;D<this.statistics.length;D++)v.statistics[D]=Q.clone(this.statistics[D]);return v};q._fillFrom8Bit=function(v){const {mask:D,maskIsAlpha:x,pixels:A}=this;if(v&&A&&A.length){var u,g;var c=u=g=A[0];3<=A.length?(u=A[1],g=A[2]):2===A.length&&(u=A[1]);var E=new Uint32Array(v),l=this.width*this.height;if(c.length!==l)b.error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.");else if(D&&D.length===l)if(x)for(v=0;v<l;v++)D[v]&&
(E[v]=D[v]<<24|g[v]<<16|u[v]<<8|c[v]);else for(v=0;v<l;v++)D[v]&&(E[v]=-16777216|g[v]<<16|u[v]<<8|c[v]);else for(v=0;v<l;v++)E[v]=-16777216|g[v]<<16|u[v]<<8|c[v]}else b.error("getAsRGBA()","Unable to convert to RGBA. The input pixel block is empty.")};q._fillFromNon8Bit=function(v){const {pixels:D,mask:x,statistics:A}=this;if(v&&D&&D.length){var u=this.pixelType,g=1,c=0;g=1;A&&0<A.length?(c=A.map(d=>d.minValue).reduce((d,h)=>Math.min(d,h)),g=A.map(d=>d.maxValue-d.minValue).reduce((d,h)=>Math.max(d,
h)),g=255/g):(g=255,"s8"===u?(c=-128,g=127):"u16"===u?g=65535:"s16"===u?(c=-32768,g=32767):"u32"===u?g=4294967295:"s32"===u?(c=-2147483648,g=2147483647):"f32"===u?(c=-3.4*1E39,g=3.4*1E39):"f64"===u&&(c=-Number.MAX_VALUE,g=Number.MAX_VALUE),g=255/(g-c));v=new Uint32Array(v);u=this.width*this.height;var E,l,w;var G=E=l=D[0];if(G.length!==u)return b.error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.");if(2<=D.length)if(E=D[1],3<=D.length&&(l=D[2]),x&&x.length===u)for(w=0;w<u;w++)x[w]&&
(v[w]=-16777216|(l[w]-c)*g<<16|(E[w]-c)*g<<8|(G[w]-c)*g);else for(w=0;w<u;w++)v[w]=-16777216|(l[w]-c)*g<<16|(E[w]-c)*g<<8|(G[w]-c)*g;else if(x&&x.length===u)for(w=0;w<u;w++)E=(G[w]-c)*g,x[w]&&(v[w]=-16777216|E<<16|E<<8|E);else for(w=0;w<u;w++)E=(G[w]-c)*g,v[w]=-16777216|E<<16|E<<8|E}else b.error("getAsRGBA()","Unable to convert to RGBA. The input pixel block is empty.")};q._fillFrom32Bit=function(v){const {pixels:D,mask:x}=this;if(!v||!D||!D.length)return b.error("getAsRGBAFloat()","Unable to convert to RGBA. The input pixel block is empty.");
let A,u,g,c;A=u=g=D[0];3<=D.length?(u=D[1],g=D[2]):2===D.length&&(u=D[1]);const E=this.width*this.height;if(A.length!==E)return b.error("getAsRGBAFloat()","Unable to convert to RGBA. The pixelblock is invalid.");let l=0;if(x&&x.length===E)for(c=0;c<E;c++)v[l++]=A[c],v[l++]=u[c],v[l++]=g[c],v[l++]=x[c]&1;else for(c=0;c<E;c++)v[l++]=A[c],v[l++]=u[c],v[l++]=g[c],v[l++]=1};q._calculateBandStatistics=function(v,D){let x=Infinity,A=-Infinity;const u=v.length;let g,c=0;if(D)for(g=0;g<u;g++)D[g]&&(c=v[g],
x=c<x?c:x,A=c>A?c:A);else for(g=0;g<u;g++)c=v[g],x=c<x?c:x,A=c>A?c:A;return{minValue:x,maxValue:A}};return m}(C.JSONSupport);r.__decorate([U.property({json:{write:!0}})],K.prototype,"width",void 0);r.__decorate([U.property({json:{write:!0}})],K.prototype,"height",void 0);r.__decorate([U.property({json:{write:!0}})],K.prototype,"pixelType",void 0);r.__decorate([I.cast("pixelType")],K.prototype,"castPixelType",null);r.__decorate([U.property({json:{write:!0}})],K.prototype,"validPixelCount",void 0);
r.__decorate([U.property({json:{write:!0}})],K.prototype,"mask",void 0);r.__decorate([U.property({json:{write:!0}})],K.prototype,"maskIsAlpha",void 0);r.__decorate([U.property({json:{write:!0}})],K.prototype,"pixels",void 0);r.__decorate([U.property({json:{write:!0}})],K.prototype,"statistics",void 0);return K=F=r.__decorate([H.subclass("esri.layers.support.PixelBlock")],K)})},"esri/layers/mixins/ImageryTileMixin":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../rasterRenderers ../../request ../../core/Logger ../../core/maybe ../../core/accessorSupport/decorators/aliasOf ../../core/has ../../core/accessorSupport/ensureType ../../core/jsonMap ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../../geometry/support/spatialReferenceUtils ../support/arcgisLayerUrl ../support/commonProperties ../support/DimensionalDefinition ../support/RasterJobHandler ../support/TileInfo ../../renderers/support/rasterRendererHelper ../../renderers/support/RasterSymbolizer ../../geometry/Extent ../../geometry/SpatialReference".split(" "),
function(R,r,K,N,C,Q,Y,W,U,I,y,H,F,b,n,m,q,v,D,x,A,u,g,c){const E=Y.getLogger("esri.layers.mixins.ImageryTileMixin");R.ImageryTileMixin=l=>{l=function(w){function G(){var h=w.apply(this,arguments)||this;h._rasterJobHandler={instance:null,refCount:0,connectionPromise:null};h.bandIds=null;h.copyright=null;h.fullExtent=null;h.interpolation="nearest";h.raster=null;h.rasterInfo=null;h.sourceJSON=null;h.spatialReference=null;h.tileInfo=null;h.symbolizer=null;return h}r._inheritsLoose(G,w);var d=G.prototype;
d.updateRenderer=function(){var h=r._asyncToGenerator(function*(){if(this.loaded&&JSON.stringify(this._cachedRendererJson)!==JSON.stringify(this.renderer)){var p=this._rasterJobHandler.instance;p&&(this.symbolizer.rendererJSON=A.normalizeRendererJSON(this.renderer.toJSON()),this.symbolizer.bind(),yield p.updateSymbolizer(this.symbolizer),this._cachedRendererJson=this.renderer.toJSON())}});return function(){return h.apply(this,arguments)}}();d.applyRenderer=function(){var h=r._asyncToGenerator(function*(p,
k){var f=p&&p.pixelBlock;if(!(f&&f.pixels&&0<f.pixels.length))return null;this.updateRenderer();f=this._rasterJobHandler.instance;const {bandIds:B}=this;return f?yield f.symbolize({...p,simpleStretchParams:k,bandIds:B}):this.symbolizer.symbolize({...p,simpleStretchParams:k,bandIds:B})});return function(p,k){return h.apply(this,arguments)}}();d.getTileUrl=function(h,p,k){return"RasterTileServer"===this.raster.datasetFormat?`${this.url}/tile/${h}/${p}/${k}`:""};d.getCompatibleTileInfo=function(h,p,
k=!1){if(!this.loaded)return null;if(k&&h.equals(this.spatialReference))return this.tileInfo;k=n.getInfo(h);return x.create({size:256,spatialReference:h,origin:k?{x:k.origin[0],y:k.origin[1]}:{x:p.xmin,y:p.ymax}})};d.getCompatibleFullExtent=function(h){return this.loaded?this._compatibleFullExtent&&this._compatibleFullExtent.spatialReference.equals(h)?this._compatibleFullExtent:this._compatibleFullExtent=this.raster.computeExtent(h):null};d.fetchTile=function(){var h=r._asyncToGenerator(function*(p,
k,f,B={}){if(B.requestAsImageElement)return p=this.getTileUrl(p,k,f),Q(p,{responseType:"image",query:{sliceId:this._sliceId,_ts:B.timestamp,...this.raster.ioConfig.customFetchParameters},signal:B.signal}).then(z=>z.data);yield this._initJobHandler();const O="raster-shaded-relief"===this.renderer.type?{cols:1,rows:1}:null;this.multidimensionalDefinition&&(B={multidimensionalDefinition:this.multidimensionalDefinition,sliceId:this._sliceId,buffer:O,...B});return this.raster.fetchTile(p,k,f,B)});return function(p,
k,f){return h.apply(this,arguments)}}();d.fetchPixels=function(){var h=r._asyncToGenerator(function*(p,k,f,B){yield this._initJobHandler();this.multidimensionalDefinition&&(B={multidimensionalDefinition:this.multidimensionalDefinition,sliceId:this._sliceId,...B});return this.raster.fetchPixels(p,k,f,B)});return function(p,k,f,B){return h.apply(this,arguments)}}();d.identify=function(h,p={}){this.multidimensionalDefinition&&!p.multidimensionalDefinition&&(p={...p,multidimensionalDefinition:this.multidimensionalDefinition});
return this.raster.identify(h,p)};d.increaseRasterJobHandlerUsage=function(){this._rasterJobHandler.refCount++};d.decreaseRasterJobHandlerUsage=function(){this._rasterJobHandler.refCount--;0>=this._rasterJobHandler.refCount&&this._shutdownJobHandler()};d.hasStandardTime=function(){var h;const p=this.rasterInfo.multidimensionalInfo;if(!W.isSome(p)||"standard-time"!==this.rasterInfo.dataType)return!1;const k=null==(h=this.multidimensionalDefinition[0])?void 0:h.variableName;return p.variables.some(f=>
f.name===k&&f.dimensions.some(B=>"StdTime"===B.name))};d.getStandardTimeValue=function(h){return(new Date(864E5*(h-25569))).toString()};d._configDefaultSettings=function(){this._configDefaultInterpolation();this._configDefaultSlice();this._configDefaultRenderer()};d._initJobHandler=function(){if(null!=this._rasterJobHandler.connectionPromise)return this._rasterJobHandler.connectionPromise;const h=new D;this._rasterJobHandler.connectionPromise=h.initialize().then(()=>{this._rasterJobHandler.instance=
h;this.raster.rasterJobHandler=h;this.renderer&&this.updateRenderer()}).catch(()=>null);return this._rasterJobHandler.connectionPromise};d._shutdownJobHandler=function(){this._rasterJobHandler.instance&&this._rasterJobHandler.instance.destroy();this._rasterJobHandler.instance=null;this._rasterJobHandler.connectionPromise=null;this._rasterJobHandler.refCount=0;this.raster.rasterJobHandler=null};d._configDefaultInterpolation=function(){if(null==this.interpolation){var h;const p=A.getDefaultInterpolation(this.rasterInfo,
this.raster.tileType,null==(h=this.sourceJSON)?void 0:h.defaultResamplingMethod);this._set("interpolation",p)}};d._configDefaultSlice=function(){const {multidimensionalInfo:h}=this.raster.rasterInfo;if(W.isSome(h)){if(!this.multidimensionalDefinition){const p=h.variables[0],k=[];p.dimensions.forEach(f=>{k.push(new v({variableName:p.name,dimensionName:f.name,values:f.hasRegularIntervals?f.extent[0]:f.values[0],isSlice:!0}))});this.multidimensionalDefinition=k}this._sliceId=this.raster.getSliceIndex(this.multidimensionalDefinition)}};
d._configDefaultRenderer=function(){const h=this.raster.rasterInfo;this.bandIds||(this.bandIds=A.getDefaultBandCombination(h));if(!this.renderer){var p,k;this.renderer=A.createDefaultRenderer(h,{bandIds:this.bandIds,variableName:null==(p=this.multidimensionalDefinition)?void 0:null==(k=p[0])?void 0:k.variableName})}this.symbolizer?(this.symbolizer.rendererJSON=A.normalizeRendererJSON(this.renderer.toJSON()),this.symbolizer.rasterInfo=h):this.symbolizer=new u({rendererJSON:this.renderer.toJSON(),rasterInfo:h});
this.symbolizer.bind()||E.warn("imagery-tile-mixin","The given renderer is not supported by the layer.")};r._createClass(G,[{key:"multidimensionalDefinition",set:function(h){this.raster&&(this._sliceId=this.raster.getSliceIndex(h));this._set("multidimensionalDefinition",h)}},{key:"url",set:function(h){this._set("url",m.sanitizeUrl(h,E))}},{key:"renderer",set:function(h){this._set("renderer",h);this.updateRenderer()}}]);return G}(l);K.__decorate([F.property()],l.prototype,"_cachedRendererJson",void 0);
K.__decorate([F.property()],l.prototype,"_sliceId",void 0);K.__decorate([F.property()],l.prototype,"_compatibleFullExtent",void 0);K.__decorate([F.property()],l.prototype,"_rasterJobHandler",void 0);K.__decorate([F.property()],l.prototype,"bandIds",void 0);K.__decorate([F.property()],l.prototype,"copyright",void 0);K.__decorate([F.property({type:g}),U.aliasOf("rasterInfo.extent")],l.prototype,"fullExtent",void 0);K.__decorate([F.property()],l.prototype,"interpolation",void 0);K.__decorate([F.property()],
l.prototype,"ioConfig",void 0);K.__decorate([F.property({type:[v]})],l.prototype,"multidimensionalDefinition",null);K.__decorate([F.property()],l.prototype,"raster",void 0);K.__decorate([F.property({readOnly:!0}),U.aliasOf("raster.rasterInfo")],l.prototype,"rasterInfo",void 0);K.__decorate([F.property()],l.prototype,"sourceJSON",void 0);K.__decorate([F.property({type:c}),U.aliasOf("rasterInfo.spatialReference")],l.prototype,"spatialReference",void 0);K.__decorate([F.property({type:x}),U.aliasOf("rasterInfo.storageInfo.tileInfo")],
l.prototype,"tileInfo",void 0);K.__decorate([F.property(q.url)],l.prototype,"url",null);K.__decorate([F.property({types:C.rasterRendererTypes})],l.prototype,"renderer",null);K.__decorate([F.property()],l.prototype,"symbolizer",void 0);return l=K.__decorate([b.subclass("esri.layers.ImageryTileMixin")],l)};Object.defineProperty(R,"__esModule",{value:!0})})},"esri/layers/support/DimensionalDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/has ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass".split(" "),
function(R,r,K,N,C,Q,Y,W,U,I){var y;K=y=function(H){function F(b){b=H.call(this,b)||this;b.variableName=null;b.dimensionName=null;b.values=[];b.isSlice=!1;return b}R._inheritsLoose(F,H);F.prototype.clone=function(){return new y({variableName:this.variableName,dimensionName:this.dimensionName,values:N.clone(this.values),isSlice:this.isSlice})};return F}(K.JSONSupport);r.__decorate([C.property({type:String,json:{write:!0}})],K.prototype,"variableName",void 0);r.__decorate([C.property({type:String,json:{write:!0}})],
K.prototype,"dimensionName",void 0);r.__decorate([C.property({type:Q.types.array(Q.types.oneOf([Q.types.native(Number),Q.types.array(Q.types.native(Number))])),json:{write:!0}})],K.prototype,"values",void 0);r.__decorate([C.property({type:Boolean,json:{write:!0}})],K.prototype,"isSlice",void 0);return K=y=r.__decorate([I.subclass("esri.layers.support.DimensionalDefinition")],K)})},"esri/layers/support/RasterJobHandler":function(){define(["../../chunks/_rollupPluginBabelHelpers","../../core/Error",
"../../core/workers/workers","./PixelBlock"],function(R,r,K,N){return function(){function C(){this._workerThread=null;this._destroyed=!1}var Q=C.prototype;Q.initialize=function(){var Y=R._asyncToGenerator(function*(){const W=yield K.open("RasterWorker");this._destroyed?W.close():this._workerThread=W});return function(){return Y.apply(this,arguments)}}();Q.destroy=function(){this._destroyed=!0;this._workerThread&&(this._workerThread.close(),this._workerThread=null)};Q.decode=function(){var Y=R._asyncToGenerator(function*(W,
U){if(!this._workerThread)throw new r("raster-jobhandler:no-connection","no available worker connection");return(W=yield this._workerThread.invoke("decode",W,U))?new N(W):null});return function(W,U){return Y.apply(this,arguments)}}();Q.symbolize=function(){var Y=R._asyncToGenerator(function*(W,U){if(!this._workerThread)throw new r("raster-jobhandler:no-connection","no available worker connection");W={extent:W.extent&&W.extent.toJSON(),pixelBlock:W.pixelBlock.toJSON(),simpleStretchParams:W.simpleStretchParams,
bandIds:W.bandIds};return(U=yield this._workerThread.invoke("symbolize",W,U))?new N(U):null});return function(W,U){return Y.apply(this,arguments)}}();Q.updateSymbolizer=function(){var Y=R._asyncToGenerator(function*(W,U){var I;if(!this._workerThread)throw new r("raster-jobhandler:no-connection","no available worker connection");const y=null==W?void 0:null==(I=W.rendererJSON)?void 0:I.histograms;yield Promise.all(this._workerThread.broadcast("updateSymbolizer",{symbolizerJSON:W.toJSON(),histograms:y},
U))});return function(W,U){return Y.apply(this,arguments)}}();Q.stretch=function(){var Y=R._asyncToGenerator(function*(W,U){if(!this._workerThread)throw new r("raster-jobhandler:no-connection","no available worker connection");if(null==W||!W.pixelBlock)return null;W={srcPixelBlock:W.pixelBlock.toJSON(),stretchParams:W.stretchParams};return(U=yield this._workerThread.invoke("stretch",W,U))?new N(U):null});return function(W,U){return Y.apply(this,arguments)}}();Q.split=function(){var Y=R._asyncToGenerator(function*(W,
U){if(!this._workerThread)throw new r("raster-jobhandler:no-connection","no available worker connection");if(null==W||!W.pixelBlock)return null;W={srcPixelBlock:W.pixelBlock.toJSON(),tileSize:W.tileSize,maximumPyramidLevel:W.maximumPyramidLevel};const I=yield this._workerThread.invoke("split",W,U);I&&I.forEach((y,H)=>{I.set(H,y?N.fromJSON(y):null)});return Promise.resolve(I)});return function(W,U){return Y.apply(this,arguments)}}();Q.estimateStatisticsHistograms=function(){var Y=R._asyncToGenerator(function*(W,
U){if(!this._workerThread)throw new r("raster-jobhandler:no-connection","no available worker connection");if(null==W||!W.pixelBlock)return null;W={srcPixelBlock:W.pixelBlock.toJSON()};U=yield this._workerThread.invoke("estimateStatisticsHistograms",W,U);return Promise.resolve(U)});return function(W,U){return Y.apply(this,arguments)}}();Q.mosaicAndTransform=function(){var Y=R._asyncToGenerator(function*(W,U){var I;if(!this._workerThread)throw new r("raster-jobhandler:no-connection","no available worker connection");
if(null==W||null==(I=W.srcPixelBlocks)||!I.length)return null;W={...W,srcPixelBlocks:W.srcPixelBlocks.map(y=>y?y.toJSON():null)};return(U=yield this._workerThread.invoke("mosaicAndTransform",W,U))?new N(U):null});return function(W,U){return Y.apply(this,arguments)}}();return C}()})},"esri/layers/support/TileInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/unitUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/Point ../../geometry/SpatialReference ../../geometry/support/aaBoundingRect ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ./LOD".split(" "),
function(R,r,K,N,C,Q,Y,W,U,I,y,H,F,b,n,m,q,v){var D;K=new K.JSONMap({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});N=D=function(x){function A(g){g=x.call(this,g)||this;g.dpi=96;g.format=null;g.origin=null;g.minScale=0;g.maxScale=0;g.size=null;g.spatialReference=null;return g}R._inheritsLoose(A,x);A.create=function(g=
{}){const {resolutionFactor:c=1,scales:E,size:l=256,spatialReference:w=b.WebMercator,numLODs:G=24}=g;if(!m.isValid(w)){g=[];if(E)for(var d=0;d<E.length;d++){var h=E[d];g.push({level:d,scale:h,resolution:h})}else for(d=5E-4,h=G-1;0<=h;h--)g.unshift({level:h,scale:d,resolution:d}),d*=2;return new D({dpi:96,lods:g,origin:new F(0,0,w),size:[l,l],spatialReference:w})}d=m.getInfo(w);g=g.origin?new F({x:g.origin.x,y:g.origin.y,spatialReference:w}):d?new F({x:d.origin[0],y:d.origin[1],spatialReference:w}):
new F({x:0,y:0,spatialReference:w});d=1/(39.37*C.getMetersPerUnitForSR(w)*96);h=[];if(E)for(var p=0;p<E.length;p++){var k=E[p];h.push({level:p,scale:k,resolution:k*d})}else{var f=m.isGeographic(w)?512/l*5.916575275917094E8:256/l*5.91657527591555E8;p=Math.ceil(G/c);h.push({level:0,scale:f,resolution:f*d});for(k=1;k<p;k++)f/=2**c,h.push({level:k,scale:f,resolution:f*d})}return new D({dpi:96,lods:h,origin:g,size:[l,l],spatialReference:w})};var u=A.prototype;u.readOrigin=function(g,c){return F.fromJSON({spatialReference:c.spatialReference,
...g})};u.readSize=function(g,c){return[c.cols,c.rows]};u.writeSize=function(g,c){c.cols=g[0];c.rows=g[0]};u.zoomToScale=function(g){const c=this.scales;if(0>=g)return c[0];if(g>=c.length-1)return c[c.length-1];{const E=Math.floor(g);return c[E]/(c[E]/c[E+1])**(g-E)}};u.scaleToZoom=function(g){const c=this.scales,E=c.length-1;let l=0;for(;l<E;l++){const w=c[l],G=c[l+1];if(w<=g)break;if(G===g)return l+1;if(w>g&&G<g)return l+Math.log(w/g)/Math.log(w/G)}return l};u.snapScale=function(g,c=.95){g=this.scaleToZoom(g);
return g%Math.floor(g)>=c?this.zoomToScale(Math.ceil(g)):this.zoomToScale(Math.floor(g))};u.tileAt=function(g,c,E,l){var w=this.lodAt(g);if(!w)return null;let G;if("number"===typeof c)G=c,c=E;else{if(m.equals(c.spatialReference,this.spatialReference))G=c.x,c=c.y;else{l=q.project(c,this.spatialReference);if(!l)return null;G=l.x;c=l.y}l=E}E=w.resolution*this.size[0];w=w.resolution*this.size[1];l||(l={id:null,level:0,row:0,col:0,extent:n.create()});l.level=g;l.row=Math.floor((this.origin.y-c)/w+.001);
l.col=Math.floor((G-this.origin.x)/E+.001);this.updateTileInfo(l);return l};u.updateTileInfo=function(g,c=0){var E=this.lodAt(g.level);E||1!==c||(c=this.lods[this.lods.length-1],c.level<g.level&&(E=c));if(E){var l=g.level-E.level;c=E.resolution*this.size[0]/2**l;E=E.resolution*this.size[1]/2**l;g.id=`${g.level}/${g.row}/${g.col}`;g.extent||(g.extent=n.create());g.extent[0]=this.origin.x+g.col*c;g.extent[1]=this.origin.y-(g.row+1)*E;g.extent[2]=g.extent[0]+c;g.extent[3]=g.extent[1]+E}};u.upsampleTile=
function(g){const c=this._upsampleLevels[g.level];if(!c||-1===c.parentLevel)return!1;g.level=c.parentLevel;g.row=Math.floor(g.row/c.factor+.001);g.col=Math.floor(g.col/c.factor+.001);this.updateTileInfo(g);return!0};u.getTileBounds=function(g,c){var {resolution:E}=this.lodAt(c.level);const l=E*this.size[0];E*=this.size[1];g[0]=this.origin.x+c.col*l;g[1]=this.origin.y-(c.row+1)*E;g[2]=g[0]+l;g[3]=g[1]+E;return g};u.lodAt=function(g){return this._levelToLOD&&this._levelToLOD[g]||null};u.clone=function(){return D.fromJSON(this.write({}))};
u._initializeUpsampleLevels=function(){const g=this.lods;this._upsampleLevels=[];let c=null;for(let E=0;E<g.length;E++){const l=g[E];this._upsampleLevels[l.level]={parentLevel:c?c.level:-1,factor:c?c.resolution/l.resolution:0};c=l}};R._createClass(A,[{key:"isWrappable",get:function(){const {spatialReference:g,origin:c}=this;if(g&&c){const E=m.getInfo(g);return g.isWrappable&&Math.abs(E.origin[0]-c.x)<=E.dx}return!1}},{key:"lods",set:function(g){let c=0,E=0;const l=[];this._levelToLOD={};g&&(c=-Infinity,
E=Infinity,g.forEach(w=>{l.push(w.scale);c=w.scale>c?w.scale:c;E=w.scale<E?w.scale:E;this._levelToLOD[w.level]=w}));this._set("scales",l);this._set("minScale",c);this._set("maxScale",E);this._set("lods",g);this._initializeUpsampleLevels()}}]);return A}(N.JSONSupport);r.__decorate([Q.property({type:Number,json:{write:!0}})],N.prototype,"compressionQuality",void 0);r.__decorate([Q.property({type:Number,json:{write:!0}})],N.prototype,"dpi",void 0);r.__decorate([Q.property({type:String,json:{read:K.read,
write:K.write,origins:{"web-scene":{read:!1,write:!1}}}})],N.prototype,"format",void 0);r.__decorate([Q.property({readOnly:!0})],N.prototype,"isWrappable",null);r.__decorate([Q.property({type:F,json:{write:!0}})],N.prototype,"origin",void 0);r.__decorate([I.reader("origin")],N.prototype,"readOrigin",null);r.__decorate([Q.property({type:[v],value:null,json:{write:!0}})],N.prototype,"lods",null);r.__decorate([Q.property({readOnly:!0})],N.prototype,"minScale",void 0);r.__decorate([Q.property({readOnly:!0})],
N.prototype,"maxScale",void 0);r.__decorate([Q.property({readOnly:!0})],N.prototype,"scales",void 0);r.__decorate([Q.property({cast:x=>Array.isArray(x)?x:"number"===typeof x?[x,x]:[256,256]})],N.prototype,"size",void 0);r.__decorate([I.reader("size",["rows","cols"])],N.prototype,"readSize",null);r.__decorate([H.writer("size",{cols:{type:W.Integer},rows:{type:W.Integer}})],N.prototype,"writeSize",null);r.__decorate([Q.property({type:b,json:{write:!0}})],N.prototype,"spatialReference",void 0);return N=
D=r.__decorate([y.subclass("esri.layers.support.TileInfo")],N)})},"esri/geometry/support/aaBoundingRect":function(){define(["exports","../../core/has","../../core/maybe","../Extent"],function(R,r,K,N){function C(b=F){return[b[0],b[1],b[2],b[3]]}function Q(b){return b[0]>=b[2]?0:b[2]-b[0]}function Y(b){return b[1]>=b[3]?0:b[3]-b[1]}function W(b,n,m){return n>=b[0]&&m>=b[1]&&n<=b[2]&&m<=b[3]}function U(b,n){b[0]=n[0];b[1]=n[1];b[2]=n[2];b[3]=n[3];return b}function I(b){return 4===b.length}function y(b,
n,m){return b<n?n:b>m?m:b}const H=[Infinity,Infinity,-Infinity,-Infinity],F=[0,0,0,0];R.NEGATIVE_INFINITY=H;R.POSITIVE_INFINITY=[-Infinity,-Infinity,Infinity,Infinity];R.UNIT=[0,0,1,1];R.ZERO=F;R.allFinite=function(b){for(let n=0;4>n;n++)if(!isFinite(b[n]))return!1;return!0};R.area=function(b){return Q(b)*Y(b)};R.center=function(b,n=[0,0]){n[0]=(b[0]+b[2])/2;n[1]=(b[1]+b[3])/2;return n};R.clone=function(b){return[b[0],b[1],b[2],b[3]]};R.contains=function(b,n){return n[0]>=b[0]&&n[2]<=b[2]&&n[1]>=
b[1]&&n[3]<=b[3]};R.containsPoint=function(b,n){return W(b,n[0],n[1])};R.containsPointObject=function(b,n){return W(b,n.x,n.y)};R.containsPointWithMargin=function(b,n,m){return n[0]>=b[0]-m&&n[1]>=b[1]-m&&n[0]<=b[2]+m&&n[1]<=b[3]+m};R.containsXY=W;R.create=C;R.diameter=function(b){const n=Q(b);b=Y(b);return Math.sqrt(n*n+b*b)};R.distance=function(b,n){const m=(b[1]+b[3])/2,q=Math.max(Math.abs(n[0]-(b[0]+b[2])/2)-Q(b)/2,0);b=Math.max(Math.abs(n[1]-m)-Y(b)/2,0);return Math.sqrt(q*q+b*b)};R.empty=function(b){return b?
U(b,H):C(H)};R.equals=function(b,n,m){if(K.isNone(b)||K.isNone(n))return b===n;if(!I(b)||!I(n))return!1;if(m)for(let q=0;q<b.length;q++){if(!m(b[q],n[q]))return!1}else for(m=0;m<b.length;m++)if(b[m]!==n[m])return!1;return!0};R.expand=function(b,n,m=b){if("length"in n)if(I(n))m[0]=Math.min(b[0],n[0]),m[1]=Math.min(b[1],n[1]),m[2]=Math.max(b[2],n[2]),m[3]=Math.max(b[3],n[3]);else{if(2===n.length||3===n.length)m[0]=Math.min(b[0],n[0]),m[1]=Math.min(b[1],n[1]),m[2]=Math.max(b[2],n[0]),m[3]=Math.max(b[3],
n[1])}else switch(n.type){case "extent":m[0]=Math.min(b[0],n.xmin);m[1]=Math.min(b[1],n.ymin);m[2]=Math.max(b[2],n.xmax);m[3]=Math.max(b[3],n.ymax);break;case "point":m[0]=Math.min(b[0],n.x),m[1]=Math.min(b[1],n.y),m[2]=Math.max(b[2],n.x),m[3]=Math.max(b[3],n.y)}return m};R.expandPointInPlace=function(b,n){n[0]<b[0]&&(b[0]=n[0]);n[0]>b[2]&&(b[2]=n[0]);n[1]<b[1]&&(b[1]=n[1]);n[1]>b[3]&&(b[3]=n[1])};R.expandWithNestedArray=function(b,n,m=b){const q=n.length;let v=b[0],D=b[1],x=b[2];b=b[3];for(let A=
0;A<q;A++){const u=n[A];v=Math.min(v,u[0]);D=Math.min(D,u[1]);x=Math.max(x,u[0]);b=Math.max(b,u[1])}m[0]=v;m[1]=D;m[2]=x;m[3]=b;return m};R.fromExtent=function(b,n=C()){n[0]=b.xmin;n[1]=b.ymin;n[2]=b.xmax;n[3]=b.ymax;return n};R.fromValues=function(b,n,m,q,v=C()){v[0]=b;v[1]=n;v[2]=m;v[3]=q;return v};R.height=Y;R.intersection=function(b,n,m=b){const q=n[0],v=n[1],D=n[2];n=n[3];m[0]=y(b[0],q,D);m[1]=y(b[1],v,n);m[2]=y(b[2],q,D);m[3]=y(b[3],v,n);return m};R.intersects=function(b,n){return Math.max(n[0],
b[0])<=Math.min(n[2],b[2])&&Math.max(n[1],b[1])<=Math.min(n[3],b[3])};R.is=I;R.isPoint=function(b){return(0===Q(b)||!isFinite(b[0]))&&(0===Y(b)||!isFinite(b[1]))};R.offset=function(b,n,m,q=b){q[0]=b[0]+n;q[1]=b[1]+m;q[2]=b[2]+n;q[3]=b[3]+m;return q};R.pad=function(b,n,m=b){m[0]=b[0]-n;m[1]=b[1]-n;m[2]=b[2]+n;m[3]=b[3]+n;return m};R.set=U;R.setMax=function(b,n,m=b){m[2]=n[0];m[3]=n[1];m!==b&&(m[0]=b[0],m[1]=b[1]);return b};R.setMin=function(b,n,m=b){m[0]=n[0];m[1]=n[1];m!==b&&(m[2]=b[2],m[3]=b[3]);
return m};R.size=function(b,n){n[0]=b[2]-b[0];n[1]=b[3]-b[1]};R.toExtent=function(b,n){return new N({xmin:b[0],ymin:b[1],xmax:b[2],ymax:b[3],spatialReference:n})};R.width=Q;Object.defineProperty(R,"__esModule",{value:!0})})},"esri/layers/support/LOD":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass".split(" "),
function(R,r,K,N,C,Q,Y,W,U){var I;K=I=function(y){function H(F){F=y.call(this,F)||this;F.level=0;F.levelValue=null;F.resolution=0;F.scale=0;return F}R._inheritsLoose(H,y);H.prototype.clone=function(){return new I({level:this.level,levelValue:this.levelValue,resolution:this.resolution,scale:this.scale})};return H}(K.JSONSupport);r.__decorate([N.property({type:Q.Integer,json:{write:!0}})],K.prototype,"level",void 0);r.__decorate([N.property({type:String,json:{write:!0}})],K.prototype,"levelValue",void 0);
r.__decorate([N.property({type:Number,json:{write:!0}})],K.prototype,"resolution",void 0);r.__decorate([N.property({type:Number,json:{write:!0}})],K.prototype,"scale",void 0);return K=I=r.__decorate([U.subclass("esri.layers.support.LOD")],K)})},"esri/renderers/support/rasterRendererHelper":function(){define("exports ../../Color ../../rasterRenderers ../../core/maybe ../../core/unitUtils ../../layers/support/Field ../../layers/support/RasterInfo ./AuthoringInfo ./ClassBreakInfo ./colorRampUtils ./UniqueValueInfo ../../rest/support/AlgorithmicColorRamp ../../rest/support/ClassBreaksDefinition ../../rest/support/generateRendererUtils ../../rest/support/MultipartColorRamp ../RasterStretchRenderer ../UniqueValueRenderer ../RasterColormapRenderer ../RasterShadedReliefRenderer ../ClassBreaksRenderer ../VectorFieldRenderer".split(" "),
function(R,r,K,N,C,Q,Y,W,U,I,y,H,F,b,n,m,q,v,D,x,A){function u(M,L){var S,X,aa,fa;M=g(M,null==L?void 0:L.variableName);const {bandCount:a}=M;let {bandIds:e,stretchType:P}=L||{};null!=(S=e)&&S.some(la=>la>=a)&&(e=null);let Z=N.unwrap(M.statistics),da=N.unwrap(M.histograms);if(1<a){var ka;e=null!=(ka=e)&&ka.length?e:c(M);Z=null==Z?null:e.map(la=>Z[la]);da=null==da?null:e.map(la=>da[la])}else e=[0];null==P&&(P=l(M));S=!1;switch(P){case "none":S=!1;break;case "percent-clip":S=!(null!=(X=da)&&X.length);
break;default:S=!(null!=(aa=Z)&&aa.length)}({dataType:X}=M);X=1===(null==(fa=e)?void 0:fa.length)&&ba.has(X)?V:null;fa=new m({stretchType:P,dynamicRangeAdjustment:S,colorRamp:X,outputMin:0,outputMax:255,gamma:1===e.length?[1]:[1,1,1],useGamma:!1});"percent-clip"===P?fa.maxPercent=fa.minPercent=.25:"standard-deviation"===P&&(fa.numberOfStandardDeviations=2);if(!S&&(N.isSome(M.multidimensionalInfo)||null!=L&&L.includeStatisticsInStretch))if("percent-clip"===P)fa.histograms=da;else if("min-max"===P||
"standard-deviation"===P)fa.statistics=Z;return fa}function g(M,L){if(null==L)return M;let S=N.unwrap(M.statistics),X=N.unwrap(M.histograms);const {multidimensionalInfo:aa}=M;if(L&&N.isSome(aa)){const {statistics:fa,histograms:a}=aa.variables.find(e=>e.name===L);null!=fa&&fa.length&&(S=fa);null!=a&&a.length&&(X=a)}return Y.fromJSON({...M.toJSON(),statistics:S,histograms:X})}function c(M){const L=M.bandCount;if(1===L)return null;if(2===L)return[0];M=M.keyProperties&&M.keyProperties.BandProperties;
let S;if(M&&M.length===L){const {red:X,green:aa,blue:fa,nir:a}=E(M);null!=X&&null!=aa&&null!=fa?S=[X,aa,fa]:null!=a&&null!=X&&null!=aa&&(S=[a,X,aa])}!S&&3<=L&&(S=[0,1,2]);return S}function E(M){const L={};for(let fa=0;fa<M.length;fa++){var S,X=M[fa],aa=null==(S=X.BandName)?void 0:S.toLowerCase();"red"===aa?L.red=fa:"green"===aa?L.green=fa:"blue"===aa?L.blue=fa:"nearinfrared"===aa||"nearinfrared_1"===aa||"nir"===aa?L.nir=fa:X.WavelengthMax&&X.WavelengthMin&&(aa=X.WavelengthMin,X=X.WavelengthMax,null==
L.blue&&410<=aa&&480>=aa&&480<=X&&540>=X?L.blue=fa:null==L.green&&490<=aa&&560>=aa&&560<=X&&610>=X?L.green=fa:null==L.red&&595<=aa&&670>=aa&&660<=X&&730>=X?L.red=fa:null==L.nir&&700<=aa&&860>=aa&&800<=X&&950>=X&&(L.nir=fa))}return L}function l(M){let L="percent-clip";const {pixelType:S,dataType:X,histograms:aa,statistics:fa}=M;"u8"!==S||"processed"!==X&&N.isSome(aa)&&N.isSome(fa)?"u8"===S||"elevation"===X||ba.has(X)?L="min-max":N.isSome(aa)?L="percent-clip":N.isSome(fa)&&(L=L="min-max"):L="none";
return L}function w(M,L,S,X){if(!h(M,L))return null;const {attributeTable:aa,statistics:fa}=M,a=G(aa,L),e=d(aa,"red"),P=d(aa,"green"),Z=d(aa,"blue");M=new W;const da=[],ka=new Set,la=!!(e&&P&&Z);if(N.isSome(aa))aa.features.forEach(ia=>{var ja=ia.attributes[a.name];ka.has(ia.attributes[a.name])||null==ja||(ka.add(ja),ja=!la||"single"!==e.type&&"double"!==e.type||"single"!==P.type&&"double"!==P.type||"single"!==Z.type&&"double"!==Z.type||aa.features.some(na=>1<na.attributes[e.name]||1<na.attributes[P.name]||
1<na.attributes[Z.name])?1:255,da.push(new y({value:ia.attributes[a.name],label:ia.attributes[a.name]+"",symbol:{type:"simple-fill",style:"solid",outline:null,color:la?new r([ia.attributes[e.name]*ja,ia.attributes[P.name]*ja,ia.attributes[Z.name]*ja,1]):new r([0,0,0,0])}})))});else if(null!=fa&&fa[0])for(L=fa[0].min;L<=fa[0].max;L++)da.push(new y({value:L,label:L.toString(),symbol:{type:"simple-fill",style:"solid",outline:null,color:new r([0,0,0,0])}}));da.sort((ia,ja)=>ia.value&&"string"===typeof ia.value.valueOf()?
0:ia.value>ja.value?1:-1);if(!la){const ia=I.convertColorRampToColormap(T,da.length);da.forEach((ja,na)=>ja.symbol.color=new r(ia[na].slice(1,4)));M.colorRamp=T}if(S||X){const ia=S||I.convertColorRampToColormap(X,da.length).map(ja=>ja.slice(1));da.forEach((ja,na)=>ja.symbol.color=new r(ia[na]));M.colorRamp=X}return new q({field:a.name,uniqueValueInfos:da,authoringInfo:M})}function G(M,L){let S;N.isSome(M)?(S=L?M.fields.find(X=>L.toLowerCase()===X.name.toLowerCase()):M.fields.find(X=>"string"===X.type&&
-1<X.name.toLowerCase().indexOf("class")),S||(S=M.fields.find(X=>"string"===X.type))||(S=d(M,"value"))):S=new Q({name:"value"});return S}function d(M,L){return N.isSome(M)?M.fields.find(S=>S.name.toLowerCase()===L):null}function h(M,L){const {attributeTable:S,bandCount:X}=M;return!N.isSome(S)&&O(M)?!0:!N.isSome(S)||1<X||L&&null==S.fields.find(aa=>aa.name.toLowerCase()===L.toLowerCase())?!1:!0}function p(M){const {bandCount:L,colormap:S}=M;return N.isSome(S)&&S.length&&1===L}function k(M){if(!p(M))return null;
let L;const {attributeTable:S,colormap:X}=M;if(N.isSome(S)){const aa=d(S,"value"),fa=G(S);"string"===fa.type&&(L={},S.features.forEach(a=>{a=a.attributes;L[a[aa.name]]=fa?a[fa.name]:a[aa.name]}))}return v.createFromColormap(N.unwrap(X),L)}function f(M){return"elevation"===M.dataType}function B(M){const {attributeTable:L,bandCount:S}=M;return 1===S&&(N.isSome(L)||N.isSome(M.histograms))}function O(M){var L,S,X;return-1<["u8","s8"].indexOf(M.pixelType)&&null!=(null==(L=M.statistics)?void 0:null==(S=
L[0])?void 0:S.min)&&null!=(null==(X=M.statistics[0])?void 0:X.max)&&1===M.bandCount}function z(M){var L;const {dataType:S}=M;return!(null!=(L=M.storageInfo)&&L.tileInfo)&&("vector-uv"===S||"vector-magdir"===S)}function t(M){if(!z(M))return null;let L;if(N.isSome(M.statistics)){var S,X;L=[{type:"size",field:"Magnitude",minSize:10,maxSize:40,minDataValue:null==(S=M.statistics[0])?void 0:S.min,maxDataValue:null==(X=M.statistics[0])?void 0:X.max}]}M=new A({visualVariables:L});M.visualVariables=[...M.sizeVariables,
...M.rotationVariables];return M}function J(M){var L;return{color:null==(L=M.symbolLayers[0].material)?void 0:L.color,type:"esriSFS",style:"esriSFSSolid"}}const V=n.fromJSON({type:"multipart",colorRamps:[{fromColor:[0,0,255],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]}),T=n.fromJSON(I.PREDEFINED_JSON_COLOR_RAMPS[0]),ba=new Set("scientific standard-time vector-uv vector-magdir vector-u vector-v vector-magnitude vector-direction".split(" "));
R.createClassBreaksRenderer=function(M,L){M=g(M,null==L?void 0:L.variableName);const {attributeTable:S}=M;if(!B(M))return null;const X=N.isSome(M.histograms)?M.histograms[0]:null;var aa=(null==L?void 0:L.numClasses)||5;const fa=new W({classificationMethod:null==L?void 0:L.classificationMethod,colorRamp:null==L?void 0:L.colorRamp});let a=(null==L?void 0:L.field)||"value";const e=[],P=[];if(N.isSome(S)){const da=S.fields.find(ja=>"count"===ja.name.toLowerCase()),ka=S.fields.find(ja=>ja.name.toLowerCase()===
a.toLowerCase());a=ka.name;const la=S.features.length;let ia=0;S.features.forEach(ja=>ia+=ja.attributes[da.name]/la);S.features.forEach(ja=>{const na=ja.attributes[ka.name];ja=ja.attributes[da.name];if(0<ja){P.push(ja);ja=Math.max(1,Math.round(ja/la/ia*1E3));for(let ma=0;ma<ja;ma++)e.push(na)}})}else{({pixelType:M}=M);const da=(X.max-X.min)/X.size,ka=(M=-1<M.indexOf("s")||-1<M.indexOf("u"))&&1===da?Math.floor(X.min+.5):X.min,la=M&&1===da?Math.floor(X.max-.5):X.max,ia=X.size;let ja=0;X.counts.forEach(na=>
ja+=na/ia);X.counts.forEach((na,ma)=>{if(0<na){P.push(na);na=Math.max(1,Math.round(na/ia/ja*1E3));ma=0===ma?ka:ma===ia-1?la:X.min+da*(ma+.5);for(let pa=0;pa<na;pa++)e.push(ma)}})}aa=b.createGenerateRendererClassBreaks({values:e,valueFrequency:P,normalizationTotal:null,definition:new F({classificationMethod:(null==L?void 0:L.classificationMethod)||"natural-breaks",breakCount:aa,definedInterval:null==L?void 0:L.definedInterval})});let Z=null==L?void 0:L.colors;Z||(L=(null==L?void 0:L.colorRamp)||V,
fa.colorRamp=L,Z=I.convertColorRampToColormap(L,aa.classBreaks.length,!0).map(da=>da.slice(1)));L=aa.classBreaks.map((da,ka)=>new U({minValue:da.minValue,maxValue:da.maxValue,label:da.label,symbol:{type:"simple-fill",color:Z[ka]}}));return new x({field:a,classBreakInfos:L,authoringInfo:fa})};R.createColorRamp=function(M){const L=[];for(let S=0;S<M.length-1;S++)L[S]=new H({algorithm:"hsv",fromColor:M[S],toColor:M[S+1]||new r({r:255,g:255,b:255,a:1})});return 2<M.length?new n({colorRamps:L}):L[0]};
R.createColormapRenderer=k;R.createDefaultRenderer=function(M,L){const {attributeTable:S,colormap:X}=M;if(z(M)){var aa=t(M);if(N.isSome(aa))return aa}return N.isSome(X)&&(aa=k(M),N.isSome(aa))||N.isSome(S)&&(aa=w(M),N.isSome(aa))?aa:u(M,L)};R.createShadedReliefRenderer=function(M,L){var S;if(!f(M))return null;({extent:M}=M);M=M.width*C.getMetersPerUnitForSR(M.spatialReference);L=null!=(S=L)?S:"multi-directional";return new D({hillshadeType:L,scalingType:5E6<M?"adjusted":"none"})};R.createStretchRenderer=
u;R.createUVRenderer=w;R.createVectorFieldRenderer=t;R.getBandNames=function(M,L){var S;const X=M.keyProperties&&M.keyProperties.BandProperties;L=null!=(S=L)&&S.length?L:Array.from(Array(M.bandCount).keys());return L.map(aa=>X&&X.length===M.bandCount?X[aa]&&X[aa].BandName||"band_"+(aa+1):"band_"+(aa+1))};R.getClassField=G;R.getDefaultBandCombination=c;R.getDefaultInterpolation=function(M,L,S){const X=["nearest","bilinear","cubic","majority"].find(aa=>aa===(null==S?void 0:S.toLowerCase()));return"Map"===
L?null!=X?X:"bilinear":"standard-time"===M.dataType?null!=X?X:"nearest":"thematic"===M.dataType||M.attributeTable||M.colormap?"nearest"===X||"majority"===X?X:"nearest":null!=X?X:"bilinear"};R.getSupportedRendererTypes=function(M){const L=["raster-stretch"];p(M)&&L.push("raster-colormap");h(M)&&L.push("unique-value");B(M)&&L.push("class-breaks");f(M)&&L.push("raster-shaded-relief");z(M)&&L.push("vector-field");return L};R.getWellKnownBandIndexes=E;R.isClassBreaksSupported=B;R.isColormapRendererSupported=
p;R.isShadedReliefRendererSupported=f;R.isSingleBand8BitRasterWithStats=O;R.isUVRendererSupported=h;R.isVectorFieldRendererSupported=z;R.normalizeRendererJSON=function(M){if("uniqueValue"===M.type){var L,S=M.uniqueValueInfos,X=S[0].symbol;null!=X&&null!=(L=X.symbolLayers)&&L.length&&(M.uniqueValueInfos=S.map(aa=>({value:aa.value,label:aa.label,symbol:aa.symbol?J(aa.symbol):null})));return M}"classBreaks"===M.type&&(L=M.classBreakInfos,X=L[0].symbol,null!=X&&null!=(S=X.symbolLayers)&&S.length&&(M.classBreakInfos=
L.map(aa=>({classMinValue:aa.classMinValue,classMaxValue:aa.classMaxValue,label:aa.label,symbol:aa.symbol?J(aa.symbol):null}))));return M};Object.defineProperty(R,"__esModule",{value:!0})})},"esri/layers/support/RasterInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../geometry/Extent ../../geometry/SpatialReference ./RasterStorageInfo".split(" "),
function(R,r,K,N,C,Q,Y,W,U,I,y,H,F){K=function(b){function n(m){m=b.call(this,m)||this;m.attributeTable=null;m.bandCount=null;m.colormap=null;m.extent=null;m.format=void 0;m.height=null;m.width=null;m.histograms=null;m.keyProperties={};m.multidimensionalInfo=null;m.noDataValue=null;m.pixelSize=null;m.pixelType=null;m.isPseudoSpatialReference=!1;m.spatialReference=null;m.statistics=null;m.storageInfo=null;m.transform=null;return m}R._inheritsLoose(n,b);R._createClass(n,[{key:"dataType",get:function(){var m,
q,v;const D=null!=(m=null==(q=this.keyProperties)?void 0:null==(v=q.DataType)?void 0:v.toLowerCase())?m:"generic";return"stdtime"===D?"standard-time":D}},{key:"nativeExtent",get:function(){return this._get("nativeExtent")||this.extent},set:function(m){m&&this._set("nativeExtent",m)}},{key:"nativePixelSize",get:function(){if(!N.isSome(this.transform)||!this.transform.affectsPixelSize)return this.pixelSize;const m=this.nativeExtent;return{x:m.width/this.width,y:m.height/this.height}}}]);return n}(K.JSONSupport);
r.__decorate([C.property({json:{write:!0}})],K.prototype,"attributeTable",void 0);r.__decorate([C.property({json:{write:!0}})],K.prototype,"bandCount",void 0);r.__decorate([C.property({json:{write:!0}})],K.prototype,"colormap",void 0);r.__decorate([C.property({type:String,readOnly:!0})],K.prototype,"dataType",null);r.__decorate([C.property({type:y,json:{write:!0}})],K.prototype,"extent",void 0);r.__decorate([C.property({type:y,json:{write:!0}})],K.prototype,"nativeExtent",null);r.__decorate([C.property({json:{write:!0}})],
K.prototype,"nativePixelSize",null);r.__decorate([C.property({json:{write:!0}})],K.prototype,"format",void 0);r.__decorate([C.property({json:{write:!0}})],K.prototype,"height",void 0);r.__decorate([C.property({json:{write:!0}})],K.prototype,"width",void 0);r.__decorate([C.property({json:{write:!0}})],K.prototype,"histograms",void 0);r.__decorate([C.property({json:{write:!0}})],K.prototype,"keyProperties",void 0);r.__decorate([C.property({json:{write:!0}})],K.prototype,"multidimensionalInfo",void 0);
r.__decorate([C.property()],K.prototype,"noDataValue",void 0);r.__decorate([C.property({json:{write:!0}})],K.prototype,"pixelSize",void 0);r.__decorate([C.property({json:{write:!0}})],K.prototype,"pixelType",void 0);r.__decorate([C.property()],K.prototype,"isPseudoSpatialReference",void 0);r.__decorate([C.property({type:H,json:{write:!0}})],K.prototype,"spatialReference",void 0);r.__decorate([C.property({json:{write:!0}})],K.prototype,"statistics",void 0);r.__decorate([C.property({type:F,json:{write:!0}})],
K.prototype,"storageInfo",void 0);r.__decorate([C.property({json:{write:!0}})],K.prototype,"transform",void 0);return K=r.__decorate([I.subclass("esri.layers.support.RasterInfo")],K)})},"esri/layers/support/RasterStorageInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../geometry/Point".split(" "),
function(R,r,K,N,C,Q,Y,W,U,I){K=function(y){function H(){var F=y.apply(this,arguments)||this;F.blockWidth=void 0;F.blockHeight=void 0;F.compression=null;F.origin=null;F.firstPyramidLevel=null;F.maximumPyramidLevel=null;F.pyramidScalingFactor=2;F.pyramidBlockWidth=null;F.pyramidBlockHeight=null;F.isVirtualTileInfo=!1;F.tileInfo=null;F.blockBoundary=null;return F}R._inheritsLoose(H,y);return H}(K.JSONSupport);r.__decorate([N.property({type:Number,json:{write:!0}})],K.prototype,"blockWidth",void 0);
r.__decorate([N.property({type:Number,json:{write:!0}})],K.prototype,"blockHeight",void 0);r.__decorate([N.property({type:String,json:{write:!0}})],K.prototype,"compression",void 0);r.__decorate([N.property({type:I,json:{write:!0}})],K.prototype,"origin",void 0);r.__decorate([N.property({type:Number,json:{write:!0}})],K.prototype,"firstPyramidLevel",void 0);r.__decorate([N.property({type:Number,json:{write:!0}})],K.prototype,"maximumPyramidLevel",void 0);r.__decorate([N.property({json:{write:!0}})],
K.prototype,"pyramidResolutions",void 0);r.__decorate([N.property({type:Number,json:{write:!0}})],K.prototype,"pyramidScalingFactor",void 0);r.__decorate([N.property({type:Number,json:{write:!0}})],K.prototype,"pyramidBlockWidth",void 0);r.__decorate([N.property({type:Number,json:{write:!0}})],K.prototype,"pyramidBlockHeight",void 0);r.__decorate([N.property({type:Boolean,json:{write:!0}})],K.prototype,"isVirtualTileInfo",void 0);r.__decorate([N.property({json:{write:!0}})],K.prototype,"tileInfo",
void 0);r.__decorate([N.property()],K.prototype,"blockBoundary",void 0);return K=r.__decorate([U.subclass("esri.layers.support.RasterStorageInfo")],K)})},"esri/rest/support/ClassBreaksDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass ./ClassificationDefinition".split(" "),function(R,
r,K,N,C,Q,Y,W,U){C=new K.JSONMap({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"});K=new K.JSONMap({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});U=function(I){function y(){var H=I.apply(this,arguments)||this;H.breakCount=null;H.classificationField=
null;H.classificationMethod=null;H.normalizationField=null;H.normalizationType=null;H.type="class-breaks-definition";return H}R._inheritsLoose(y,I);R._createClass(y,[{key:"standardDeviationInterval",set:function(H){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",H)}},{key:"definedInterval",set:function(H){"defined-interval"===this.classificationMethod&&this._set("definedInterval",H)}}]);return y}(U);r.__decorate([N.property({json:{write:!0}})],U.prototype,"breakCount",
void 0);r.__decorate([N.property({json:{write:!0}})],U.prototype,"classificationField",void 0);r.__decorate([N.property({type:String,json:{read:C.read,write:C.write}})],U.prototype,"classificationMethod",void 0);r.__decorate([N.property({json:{write:!0}})],U.prototype,"normalizationField",void 0);r.__decorate([N.property({json:{read:K.read,write:K.write}})],U.prototype,"normalizationType",void 0);r.__decorate([N.property({value:null,json:{write:!0}})],U.prototype,"standardDeviationInterval",null);
r.__decorate([N.property({value:null,json:{write:!0}})],U.prototype,"definedInterval",null);r.__decorate([N.property()],U.prototype,"type",void 0);return U=r.__decorate([W.subclass("esri.rest.support.ClassBreaksDefinition")],U)})},"esri/rest/support/ClassificationDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass ./colorRamps ../../symbols/Symbol".split(" "),
function(R,r,K,N,C,Q,Y,W,U,I,y){K=new K.JSONMap({classBreaksDef:"class-breaks-definition",uniqueValueDef:"unique-value-definition"});N=function(H){function F(){var b=H.apply(this,arguments)||this;b.baseSymbol=null;b.colorRamp=null;b.type=null;return b}R._inheritsLoose(F,H);return F}(N.JSONSupport);r.__decorate([C.property({type:y,json:{write:!0}})],N.prototype,"baseSymbol",void 0);r.__decorate([C.property({types:I.types,json:{read:{reader:I.fromJSON},write:!0}})],N.prototype,"colorRamp",void 0);r.__decorate([C.property({json:{read:K.read,
write:K.write}})],N.prototype,"type",void 0);return N=r.__decorate([U.subclass("esri.rest.support.ClassificationDefinition")],N)})},"esri/rest/support/generateRendererUtils":function(){define(["exports"],function(R){function r(y){const {classificationMethod:H,breakCount:F,normalizationType:b,definedInterval:n}=y.definition,m=[];var q=y.values;if(0===q.length)return[];q=q.sort((g,c)=>g-c);var v=q[0],D=q[q.length-1];if("equal-interval"===H)if(q.length>=F){q=(D-v)/F;y=v;for(var x=1;x<F;x++){var A=Number((v+
x*q).toFixed(6));m.push({minValue:y,maxValue:A,label:K(y,A,b)});y=A}m.push({minValue:y,maxValue:D,label:K(y,D,b)})}else q.forEach(g=>{m.push({minValue:g,maxValue:g,label:K(g,g,b)})});else if("natural-breaks"===H){q=N(q);y=C(q.uniqueValues,y.valueFrequency||q.valueFrequency,F);for(x=1;x<F;x++)q.uniqueValues.length>x&&(A=Number(q.uniqueValues[y[x]].toFixed(6)),m.push({minValue:v,maxValue:A,label:K(v,A,b)}),v=A);m.push({minValue:v,maxValue:D,label:K(v,D,b)})}else if("quantile"===H)if(q.length>=F&&v!==
D){y=Math.ceil(q.length/F);x=0;for(A=1;A<F;A++){var u=y+x-1;u>q.length&&(u=q.length-1);0>u&&(u=0);m.push({minValue:v,maxValue:q[u],label:K(v,q[u],b)});v=q[u];x+=y;y=Math.ceil((q.length-x)/(F-A))}m.push({minValue:v,maxValue:D,label:K(v,D,b)})}else for(D=-1,v=0;v<q.length;v++)y=q[v],y!==D&&(D=y,m.push({minValue:D,maxValue:y,label:K(D,y,b)}),D=y);else if("standard-deviation"===H)if(y=W(q),x=U(q,y),0===x)m.push({minValue:q[0],maxValue:q[0],label:K(q[0],q[0],b)});else{q=Y(v,D,F,y,x)*x;x=0;for(A=F;1<=A;A--)u=
Number((y-(A-.5)*q).toFixed(6)),m.push({minValue:v,maxValue:u,label:K(v,u,b)}),v=u,x++;A=Number((y+.5*q).toFixed(6));m.push({minValue:v,maxValue:A,label:K(v,A,b)});v=A;x++;for(u=1;u<=F;u++)A=x===2*F?D:Number((y+(u+.5)*q).toFixed(6)),m.push({minValue:v,maxValue:A,label:K(v,A,b)}),v=A,x++}else if("defined-interval"===H){if(!n)return m;D=q[0];q=q[q.length-1];v=Math.ceil((q-D)/n);y=D;for(x=1;x<v;x++)A=Number((D+x*n).toFixed(6)),m.push({minValue:y,maxValue:A,label:K(y,A,b)}),y=A;m.push({minValue:y,maxValue:q,
label:K(y,q,b)})}return m}function K(y,H,F){let b=null;return b=y===H?F&&"percent-of-total"===F?y+"%":y.toString():F&&"percent-of-total"===F?y+"% - "+H+"%":y+" - "+H}function N(y){const H=[],F=[];let b=Number.MIN_VALUE,n=1,m=-1;for(let q=0;q<y.length;q++){const v=y[q];v===b?(n++,F[m]=n):null!==v&&(H.push(v),b=v,n=1,F.push(n),m++)}return{uniqueValues:H,valueFrequency:F}}function C(y,H,F){var b=y.length;const n=[];F>b&&(F=b);for(var m=0;m<F;m++)n.push(Math.round(m*b/F-1));n.push(b-1);m=Q(n,y,H,F);{b=
m.mean;m=m.sdcm;var q=F,v=0,D=0;let A=0,u=0,g=!0;for(let c=0;2>c&&g;c++){0===c&&(g=!1);for(var x=0;x<q-1;x++)for(;n[x+1]+1!==n[x+2];)if(n[x+1]+=1,v=I(x,n,y,H),A=v.sbMean,v=v.sbSdcm,D=I(x+1,n,y,H),u=D.sbMean,D=D.sbSdcm,v+D<m[x]+m[x+1])m[x]=v,m[x+1]=D,b[x]=A,b[x+1]=u,g=!0;else{--n[x+1];break}for(x=q-1;0<x;x--)for(;n[x]!==n[x-1]+1;)if(--n[x],v=I(x-1,n,y,H),A=v.sbMean,v=v.sbSdcm,D=I(x,n,y,H),u=D.sbMean,D=D.sbSdcm,v+D<m[x-1]+m[x])m[x-1]=v,m[x]=D,b[x-1]=A,b[x]=u,g=!0;else{n[x]+=1;break}}b=g}b&&(m=Q(n,y,
H,F));return n}function Q(y,H,F,b){let n=[];var m=[],q=[];let v=0;const D=[],x=[];for(var A=0;A<b;A++){var u=I(A,y,H,F);D.push(u.sbMean);x.push(u.sbSdcm);v+=x[A]}u=v;for(A=!0;A||v<u;){A=!1;n=[];for(m=0;m<b;m++)n.push(y[m]);for(q=0;q<b;q++)for(u=y[q]+1;u<=y[q+1];u++)if(m=H[u],0<q&&u!==y[q+1]&&Math.abs(m-D[q])>Math.abs(m-D[q-1]))y[q]=u;else if(q<b-1&&y[q]!==u-1&&Math.abs(m-D[q])>Math.abs(m-D[q+1])){y[q+1]=u-1;break}u=v;v=0;m=[];q=[];for(let g=0;g<b;g++){m.push(D[g]);q.push(x[g]);const c=I(g,y,H,F);
D[g]=c.sbMean;x[g]=c.sbSdcm;v+=x[g]}}if(v>u){for(H=0;H<b;H++)y[H]=n[H],D[H]=m[H],x[H]=q[H];v=u}return{mean:D,sdcm:x}}function Y(y,H,F,b,n){y=Math.max(b-y,H-b)/n/F;return 1<=y?1:.5<=y?.5:.25}function W(y){let H=0;for(let F=0;F<y.length;F++)H+=y[F];return H/=y.length}function U(y,H){let F=0;for(let b=0;b<y.length;b++){const n=y[b];F+=(n-H)*(n-H)}F/=y.length;return Math.sqrt(F)}function I(y,H,F,b){var n=0,m=0;for(var q=H[y]+1;q<=H[y+1];q++){const v=b[q];n+=F[q]*v;m+=v}0>=m&&console.log("Exception in Natural Breaks calculation");
n/=m;m=0;for(q=H[y]+1;q<=H[y+1];q++)m+=b[q]*(F[q]-n)**2;return{sbMean:n,sbSdcm:m}}R.createGenerateRendererClassBreaks=function(y){const {normalizationTotal:H}=y;return{classBreaks:r(y),normalizationTotal:H}};R.createGenerateRendererUniqueValues=function(y){y=N(y);const H=[],F=y.uniqueValues.length;for(let b=0;b<F;b++){const n=y.uniqueValues[b];H.push({value:n,count:y.valueFrequency[b],label:n.toString()})}return{uniqueValues:H}};Object.defineProperty(R,"__esModule",{value:!0})})},"esri/renderers/support/RasterSymbolizer":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/colorUtils ../../core/JSONSupport ../../core/Logger ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../layers/support/RasterInfo ../../layers/support/rasterFunctions/pixelUtils ../../layers/support/rasterFunctions/surfaceUtils ./colorRampUtils".split(" "),
function(R,r,K,N,C,Q,Y,W,U,I,y,H,F,b,n){function m(x,A){const {attributeTable:u,bandCount:g}=x;return!Q.isSome(u)||1<g||A&&null==u.fields.find(c=>c.name.toLowerCase()===A.toLowerCase())?!1:!0}function q(x){const {bandCount:A,colormap:u}=x;return Q.isSome(u)&&u.length&&1===A}const v=C.getLogger("esri.renderers.support.RasterSymbolizer"),D={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767],u32:[0,4294967295],s32:[-2147483648,2147483647],f32:[-3.4*1E39,3.4*1E39],f64:[-Number.MAX_VALUE,
Number.MAX_VALUE]};N=function(x){function A(g){return x.call(this,g)||this}R._inheritsLoose(A,x);var u=A.prototype;u.bind=function(){const {rendererJSON:g}=this;if(!g)return!1;this.lookup={rendererJSON:{}};let c;switch(g.type){case "uniqueValue":c=this._updateUVRenderer(g);break;case "rasterColormap":c=this._updateColormapRenderer(g);break;case "rasterStretch":c=this._updateStretchRenderer(g);break;case "classBreaks":c=this._updateClassBreaksRenderer(g);break;case "rasterShadedRelief":c=this._updateShadedReliefRenderer(g)}return c};
u.symbolize=function(g){let c=g&&g.pixelBlock;if(!this.isValidPixelBlock(c))return c;if(g.simpleStretchParams&&"rasterStretch"===this.rendererJSON.type)return this.simpleStretch(c,g.simpleStretchParams);try{3<c.pixels.length&&(c=F.extractBands(c,[0,1,2]));let E;switch(this.rendererJSON.type){case "uniqueValue":case "rasterColormap":E=this._symbolize_colormap(c);break;case "classBreaks":E=this._symbolize_classBreaks(c);break;case "rasterStretch":E=this._symbolize_stretch(c,g.bandIds);break;case "rasterShadedRelief":({extent:g}=
g),E=this._symbolize_shadedRelief(c,{isGCS:g.spatialReference.isGeographic,resolution:{x:(g.xmax-g.xmin)/c.width,y:(g.ymax-g.ymin)/c.height}})}return E}catch(E){return v.error("symbolize",E.message),c}};u.simpleStretch=function(g,c){if(!this.isValidPixelBlock(g))return g;try{return 3<g.pixels.length&&(g=F.extractBands(g,[0,1,2])),F.stretch(g,c)}catch(E){return v.error("symbolize",E.message),g}};u.generateWebGLParameters=function(g){if(-1<["uniqueValue","rasterColormap","classBreaks"].indexOf(this.rendererJSON.type)){var c;
const {indexedColormap:d,offset:h}=(null==(c=this.lookup)?void 0:c.colormapLut)||{};return{colormap:d,colormapOffset:h,type:"lut"}}const {pixelBlock:E,isGCS:l,resolution:w,bandIds:G}=g;({rendererJSON:g}=this);return"rasterStretch"===g.type?this.generateStretchWebGLParams(E,g,G):"rasterShadedRelief"===g.type?this.generateShadedReliefWebGLParams(g,l,w):null};u._isLUTChanged=function(g){if(!this.lookup||!this.lookup.rendererJSON)return!0;if("colorRamp"in this.rendererJSON){const c=this.rendererJSON.colorRamp;
if(g)return JSON.stringify(c)!==JSON.stringify(this.lookup.rendererJSON.colorRamp);({...this.rendererJSON});({...this.lookup.rendererJSON})}return JSON.stringify(this.rendererJSON)!==JSON.stringify(this.lookup.rendererJSON)};u._symbolize_colormap=function(g){return this._isLUTChanged()&&!this.bind()?g:F.colorize(g,this.lookup.colormapLut)};u._symbolize_classBreaks=function(g){const c=-1<["u8","u16","s8","s16"].indexOf(this.rasterInfo.pixelType);return this._isLUTChanged()&&!this.bind()?g:c?F.colorize(g,
this.lookup.colormapLut):F.remapColor(g,this.lookup.remapLut)};u._symbolize_stretch=function(g,c){const {pixelType:E,bandCount:l}=this.rasterInfo,w=this.rendererJSON,G=-1<["u8","u16","s8","s16"].indexOf(E);let d;var {dra:h}=w;var p=w.useGamma?w.gamma:null;if("histogramEqualization"===w.stretchType){var k=h?null:this.lookup.histogramLut;c=this.getStretchCutoff(w,g,c,!k);p=F.stretch(g,{...c,gamma:p});p=F.lookupPixels(p,{lut:h?c.histogramLut:k,offset:0})}else if(G){if(h)h=this.getStretchCutoff(w,g,c),
d=F.createStretchLUT({pixelType:E,...h,gamma:p});else{if(this._isLUTChanged()&&!this.bind())return g;d=this.lookup?this.lookup.stretchLut:null}if(!d)return g;1<l&&(null==c?void 0:c.length)===g.pixels.length&&(null==(k=d)?void 0:k.lut.length)===l&&(d={lut:c.map(f=>d.lut[f]),offset:d.offset});p=F.lookupPixels(g,d)}else h=this.getStretchCutoff(w,g,c),p=F.stretch(g,{...h,gamma:p});if(w.colorRamp){if(this._isLUTChanged(!0)&&!this.bind())return g;p=F.colorize(p,this.lookup.colormapLut)}return p};u._symbolize_shadedRelief=
function(g,c){var E,l,w=this.rendererJSON;c=b.hillshade(g,{...w,...c});if(!w.colorRamp||this._isLUTChanged(!0)&&!this.bind())return c;w=this.lookup?this.lookup.hsvMap:null;if(!w)return c;const G=null!=(E=null==(l=Q.unwrap(this.rasterInfo.statistics))?void 0:l[0])?E:{min:0,max:8E3};b.tintHillshade(c,g,w,G);return c};u._updateUVRenderer=function(g){const {bandCount:c,attributeTable:E,pixelType:l}=this.rasterInfo,w=g.field1;if(!w)return!1;var G=1===c&&["u8","s8"].includes(l);if(!m(this.rasterInfo,w)&&
!G)return!1;const d=[];if(E){const h=E.fields.filter(p=>"value"===p.name.toLowerCase())[0];if(!h)return!1;E.features.forEach(p=>{var k,f=g.uniqueValueInfos.filter(B=>String(B.value)===String(p.attributes[w]))[0];(f=null==f?void 0:null==(k=f.symbol)?void 0:k.color)&&d.push([p.attributes[h.name]].concat(f))})}else{if("value"!==w.toLowerCase())return!1;g.uniqueValueInfos.forEach(h=>{var p;const k=null==h?void 0:null==(p=h.symbol)?void 0:p.color;k&&d.push([parseInt(""+h.value,10)].concat(k))})}if(0===
d.length)return!1;G=F.createColormapLUT({colormap:d});this.lookup={rendererJSON:g,colormapLut:G};return this.canRenderInWebGL=!0};u._updateColormapRenderer=function(g){if(!q(this.rasterInfo))return!1;var c=g.colormapInfos.map(E=>[E.value].concat(E.color)).sort((E,l)=>E[0]-l[0]);if(!c||0===c.length)return!1;c=F.createColormapLUT({colormap:c});this.lookup={rendererJSON:g,colormapLut:c};return this.canRenderInWebGL=!0};u._updateShadedReliefRenderer=function(g){if("elevation"!==this.rasterInfo.dataType)return!1;
if(g.colorRamp){var c=n.convertColorRampToColormap(g.colorRamp,256,!0);c=F.createColormapLUT({colormap:c});const E=[],l=c.indexedColormap;for(let w=0;w<l.length;w+=4){const G=K.toHSV({r:l[w],g:l[w+1],b:l[w+2]});E.push([G.h/60,G.s/100,255*G.v/100])}this.lookup={rendererJSON:g,colormapLut:c,hsvMap:E}}else this.lookup=null;return this.canRenderInWebGL=!0};u._updateClassBreaksRenderer=function(g){var c=-1<["u8","u16","s8","s16"].indexOf(this.rasterInfo.pixelType),E=g.classBreakInfos;if(null==E||!E.length)return!1;
E=E.sort((h,p)=>h.classMaxValue-p.classMaxValue);const l=E[E.length-1];var w=g.minValue;if(!c){c=[];for(var G=0;G<E.length;G++){var d;c.push({value:null!=(d=E[G].classMinValue)?d:w,mappedColor:E[G].symbol.color});w=E[G].classMaxValue}c.push({value:l.classMaxValue,mappedColor:l.symbol.color});this.lookup={rendererJSON:g,remapLut:c};this.canRenderInWebGL=!1;return!0}d=[];w=Math.floor(g.minValue);for(c=0;c<E.length;c++){for(G=E[c];w<G.classMaxValue;w++)d.push([w].concat(G.symbol.color));w=Math.ceil(G.classMaxValue)}l.classMaxValue===
w&&d.push([l.classMaxValue].concat(l.symbol.color));E=F.createColormapLUT({colormap:d,fillUnspecified:!1});this.lookup={rendererJSON:g,colormapLut:E};return this.canRenderInWebGL=!0};u._isHistogramRequired=function(g){return"percentClip"===g||"histogramEqualization"===g};u._isValidRasterStatistics=function(g){return Q.isSome(g)&&0<g.length&&null!=g[0].min&&null!=g[0].max};u._updateStretchRenderer=function(g){var c;let {stretchType:E,dra:l}=g;if(!("none"===E||null!=(c=g.statistics)&&c.length||this._isValidRasterStatistics(this.rasterInfo.statistics)||
l))return!1;var w=Q.unwrap(g.histograms||this.rasterInfo.histograms);!this._isHistogramRequired(g.stretchType)||null!=w&&w.length||l||(E="minMax");const {gamma:G,useGamma:d,colorRamp:h}=g;c=this.rasterInfo.pixelType;const p=!l&&-1<["u8","u16","s8","s16"].indexOf(c);"histogramEqualization"===E?(c=w.map(k=>F.createHistogramEqualizationLUT(k)),this.lookup={rendererJSON:g,histogramLut:c}):p&&(w=this.getStretchCutoff(g),c=F.createStretchLUT({pixelType:c,...w,gamma:d?G:null}),this.lookup={rendererJSON:g,
stretchLut:c});h&&(c=n.convertColorRampToColormap(h,256,!0),this.lookup||(this.lookup={rendererJSON:g}),this.lookup.colormapLut=F.createColormapLUT({colormap:c}),this.lookup.rendererJSON=g);return this.canRenderInWebGL=!0};u.getStretchCutoff=function(g,c,E,l){var w,G,d,h=g.stretchType;if(g.dra)if("minMax"===h&&c.statistics)c=c.statistics.map(V=>[V.minValue,V.maxValue,0,0]);else{var p=F.estimateStatisticsHistograms(c);c=p.statistics;p=p.histograms}else{var k;c=0<(null==(k=g.statistics)?void 0:k.length)?
g.statistics:Q.unwrap(this.rasterInfo.statistics);p=g.histograms||Q.unwrap(this.rasterInfo.histograms)}!this._isHistogramRequired(h)||null!=(w=p)&&w.length||(h="minMax");k=(null==(G=c)?void 0:G.length)||(null==(d=p)?void 0:d.length)||this.rasterInfo.bandCount;G=[];d=[];let f;let B,O,z;c&&!Array.isArray(c[0])&&(c=c.map(V=>[V.min,V.max,V.avg,V.stddev]));switch(h){case "none":c=D[this.rasterInfo.pixelType]||D.f32;for(w=0;w<k;w++)G[w]=c[0],d[w]=c[1];break;case "minMax":for(w=0;w<k;w++)G[w]=c[w][0],d[w]=
c[w][1];break;case "standardDeviation":for(w=0;w<k;w++)G[w]=c[w][2]-g.numberOfStandardDeviations*c[w][3],d[w]=c[w][2]+g.numberOfStandardDeviations*c[w][3],G[w]<c[w][0]&&(G[w]=c[w][0]),d[w]>c[w][1]&&(d[w]=c[w][1]);break;case "histogramEqualization":for(w=0;w<k;w++)G[w]=p[w].min,d[w]=p[w].max;break;case "percentClip":for(w=0;w<p.length;w++){c=p[w];B=new Uint32Array(c.size);var t=c.counts;f=0;k=(c.max-c.min)/c.size;O=-.5===c.min&&1===k?.5:0;for(z=0;z<c.size;z++)f+=t[z],B[z]=f;t=g.minPercent*f/100;for(z=
0;z<c.size;z++)if(B[z]>t){G[w]=c.min+k*(z+O);break}t=(1-g.maxPercent/100)*f;for(z=c.size-2;0<=z;z--)if(B[z]<t){d[w]=c.min+k*(z+2-O);break}}break;default:for(w=0;w<k;w++)G[w]=c[w][0],d[w]=c[w][1]}let J;"histogramEqualization"===h?(h=p[0].size||256,g=0,l&&(J=p.map(V=>F.createHistogramEqualizationLUT(V)))):(h=g.max||255,g=g.min||0);return this.getSelectedBandCutoffs({minCutOff:G,maxCutOff:d,outMax:h,outMin:g,histogramLut:J},E)};u.getSelectedBandCutoffs=function(g,c){if(null==c||0===c.length)return g;
const E=Math.max.apply(null,c),{minCutOff:l,maxCutOff:w,outMin:G,outMax:d,histogramLut:h}=g;return l.length===c.length||l.length<=E?g:{minCutOff:c.map(p=>l[p]),maxCutOff:c.map(p=>w[p]),histogramLut:h?c.map(p=>h[p]):null,outMin:G,outMax:d}};u.generateStretchWebGLParams=function(g,c,E){var l;let w=null,G=null;var d=this.lookup&&this.lookup.colormapLut;c.colorRamp&&d&&(w=d.indexedColormap,G=d.offset);"histogramEqualization"===c.stretchType&&(c={...c,stretchType:"minMax"});({gamma:d}=c);const h=!!(c.useGamma&&
d&&d.some(z=>1!==z)),{minCutOff:p,maxCutOff:k,outMin:f,outMax:B}=this.getStretchCutoff(c,g,E);c=null==(l=g)?void 0:l.getPlaneCount();2===c&&(g=g.clone(),g.statistics=[g.statistics[0]],g.pixels=[g.pixels[0]]);g=Math.min(3,(null==E?void 0:E.length)||c||this.rasterInfo.bandCount);E=new Float32Array(g);l=w||h?1:255;for(c=0;c<g;c++)E[c]=(B-f)/(k[c]-p[c])/l;const O=new Float32Array(g);if(h)for(c=0;c<g;c++)O[c]=1<d[c]?2<d[c]?6.5+(d[c]-2)**2.5:6.5+100*(2-d[c])**4:1;return{bandCount:g,outMin:f/l,outMax:B/
l,minCutOff:p,maxCutOff:k,factor:E,useGamma:h,gamma:h?d:[1,1,1],gammaCorrection:h?O:[1,1,1],colormap:w,colormapOffset:G,type:"stretch"}};u.generateShadedReliefWebGLParams=function(g,c,E){var l,w,G;let d=null,h=null;const p=this.lookup&&this.lookup.colormapLut;g.colorRamp&&p&&(d=p.indexedColormap,h=p.offset);c=b.calculateHillshadeParams({...g,isGCS:c,resolution:E});E=null==(l=Q.unwrap(this.rasterInfo.statistics))?void 0:l[0];return{...c,minValue:null!=(w=null==E?void 0:E.min)?w:0,maxValue:null!=(G=
null==E?void 0:E.max)?G:8E3,hillshadeType:"traditional"===g.hillshadeType?0:1,type:"hillshade",colormap:d,colormapOffset:h}};u.isValidPixelBlock=function(g){return!!(g&&g.pixels&&0<g.pixels.length&&0!==g.validPixelCount)};return A}(N.JSONSupport);r.__decorate([Y.property({json:{write:!0}})],N.prototype,"rendererJSON",void 0);r.__decorate([Y.property({type:H,json:{write:!0}})],N.prototype,"rasterInfo",void 0);r.__decorate([Y.property({json:{write:!0}})],N.prototype,"lookup",void 0);r.__decorate([Y.property()],
N.prototype,"canRenderInWebGL",void 0);return N=r.__decorate([y.subclass("esri.renderers.support.RasterSymbolizer")],N)})},"esri/layers/support/rasterFunctions/pixelUtils":function(){define(["exports","../PixelBlock"],function(R,r){function K(b,n){b=Math.min(Math.max(b,-100),100);n=Math.min(Math.max(n,-100),100);let m,q;const v=new Uint8Array(256);for(m=0;256>m;m++)0<b&&100>b?q=(200*m-25500+510*n)/(2*(100-b))+128:0>=b&&-100<b?q=(200*m-25500+510*n)*(100+b)/2E4+128:100===b?(q=200*m-25500+256*(100-b)+
510*n,q=0<q?255:0):-100===b&&(q=128),v[m]=255<q?255:0>q?0:q;return v}function N(b,n,m,q,v,D,x,A){return{xmin:v<=m*b?0:v<m*b+b?v-m*b:b,ymin:D<=q*n?0:D<q*n+n?D-q*n:n,xmax:v+x<=m*b?0:v+x<m*b+b?v+x-m*b:b,ymax:D+A<=q*n?0:D+A<q*n+n?D+A-q*n:n}}function C(b,n,m,q,v,D){const {width:x,height:A}=m.block,{x:u,y:g}=m.offset,{width:c,height:E}=m.mosaic;m=N(x,A,q,v,u,g,c,E);let l=0;var w=0;if(D){var G=D.hasGCSSShiftTransform?360:D.halfWorldWidth,d=x*D.resolutionX,h=D.startX+q*d;d=h+d;h<G&&d>G?w=D.rightPadding:h>=
G&&(l=D.leftMargin-D.rightPadding,w=0)}m.xmax-=w;if("number"===typeof n)for(D=m.ymin;D<m.ymax;D++)for(w=(v*A+D-g)*c+(q*x-u)+l,G=m.xmin;G<m.xmax;G++)b[w+G]=n;else for(D=m.ymin;D<m.ymax;D++)for(w=(v*A+D-g)*c+(q*x-u)+l,G=D*x,h=m.xmin;h<m.xmax;h++)b[w+h]=n[G+h]}function Q(b,n,m,q,v){var D=b.filter(d=>F(d))[0];if(null==D)return null;const x=q?q.width:n.width,A=q?q.height:n.height;var u=D.width,g=D.height;const c=n.width/u,E=n.height/g;n={offset:m||{x:0,y:0},mosaic:q||n,block:{width:u,height:g}};m=D.pixelType;
q=r.getPixelArrayConstructor(m);u=D.pixels.length;D=[];for(var l=0;l<u;l++){g=new q(x*A);for(let d=0;d<E;d++)for(let h=0;h<c;h++){var w=b[d*c+h];F(w)&&(w=w.pixels[l],C(g,w,n,h,d,v))}D.push(g)}let G;if(b.some(d=>null==d||d.mask&&0<d.mask.length))for(G=new Uint8Array(x*A),q=0;q<E;q++)for(u=0;u<c;u++)(l=(g=b[q*c+u])?g.mask:null)?C(G,l,n,u,q,v):g?C(G,1,n,u,q,v):C(G,0,n,u,q,v);b=new r({width:x,height:A,pixels:D,pixelType:m,mask:G});b.updateStatistics();return b}function Y(b){if(!F(b))return null;const n=
b.clone(),{width:m,height:q,pixels:v,mask:D}=b;var x=v[0];b=n.pixels[0];for(let g=2;g<q-1;g++){const c=new Map;for(var A=g-2;A<g+2;A++)for(var u=0;4>u;u++){const E=A*m+u;I(c,x[E],D?D[E]:1)}b[g*m]=W(c);b[g*m+1]=b[g*m+2]=b[g*m];for(A=3;A<m-1;A++)u=(g-2)*m+A+1,I(c,x[u],D?D[u]:1),u=(g-1)*m+A+1,I(c,x[u],D?D[u]:1),u=g*m+A+1,I(c,x[u],D?D[u]:1),u=(g+1)*m+A+1,I(c,x[u],D?D[u]:1),u=(g-2)*m+A-3,U(c,x[u],D?D[u]:1),u=(g-1)*m+A-3,U(c,x[u],D?D[u]:1),u=g*m+A-3,U(c,x[u],D?D[u]:1),u=(g+1)*m+A-3,U(c,x[u],D?D[u]:1),b[g*
m+A]=W(c);b[g*m+A+1]=b[g*m+A]}for(x=0;x<m;x++)b[x]=b[m+x]=b[2*m+x],b[(q-1)*m+x]=b[(q-2)*m+x];n.updateStatistics();return n}function W(b){if(0===b.size)return 0;let n=0,m=-1,q=0;const v=b.keys();let D=v.next();for(;!D.done;)q=b.get(D.value),q>n&&(m=D.value,n=q),D=v.next();return m}function U(b,n,m){0!==m&&(m=b.get(n),1===m?b.delete(n):b.set(n,m-1))}function I(b,n,m){0!==m&&b.set(n,b.has(n)?b.get(n)+1:1)}function y(b,n,m){let {x:q,y:v}=n;const {width:D,height:x}=m;if(0===q&&0===v&&x===b.height&&D===
b.width)return b;const {width:A,height:u}=b;n=Math.max(0,v);const g=Math.max(0,q),c=Math.min(q+D,A),E=Math.min(v+x,u);if(0>c||0>E||!F(b))return null;q=Math.max(0,-q);v=Math.max(0,-v);const {pixels:l,mask:w}=b;var G=D*x,d=l.length;const h=[];for(var p=0;p<d;p++){var k=l[p],f=r.createEmptyBand(b.pixelType,G);for(let B=n;B<E;B++){const O=B*A;let z=(B+v-n)*D+q;for(let t=g;t<c;t++)f[z++]=k[O+t]}h.push(f)}G=new Uint8Array(G);for(d=n;d<E;d++)for(p=d*A,k=(d+v-n)*D+q,f=g;f<c;f++)G[k++]=w?w[p+f]:1;b=new r({width:m.width,
height:m.height,pixelType:b.pixelType,pixels:h,mask:G});b.updateStatistics();return b}function H(b,n=!0){if(!F(b))return null;const {pixels:m,width:q,height:v,mask:D,pixelType:x}=b;b=[];const A=Math.round(q/2),u=Math.round(v/2),g=v-1,c=q-1;for(var E=0;E<m.length;E++){var l=m[E],w=r.createEmptyBand(x,A*u),G=0;for(var d=0;d<v;d+=2)for(var h=0;h<q;h+=2){var p=l[d*q+h];if(n){var k=h===c?p:l[d*q+h+1];const f=d===g?p:l[d*q+h+q],B=h===c?f:d===g?k:l[d*q+h+q+1];w[G++]=(p+k+f+B)/4}else w[G++]=p}b.push(w)}E=
null;if(D)for(E=new Uint8Array(A*u),l=0,w=0;w<v;w+=2)for(G=0;G<q;G+=2)d=D[w*q+G],n?(h=G===c?d:D[w*q+G+1],p=w===g?d:D[w*q+G+q],k=G===c?p:w===g?h:D[w*q+G+q+1],E[l++]=d*h*p*k?1:0):E[l++]=d;return new r({width:A,height:u,pixelType:x,pixels:b,mask:E})}const F=function(b){return b&&"esri.layers.support.PixelBlock"===b.declaredClass&&b.pixels&&0<b.pixels.length};R.approximateTransform=function(b,n,m,q,v="nearest"){if(!F(b))return null;"majority"===v&&(b=Y(b));const {pixels:D,mask:x,pixelType:A}=b,u=b.width;
var g=b.height;b=r.getPixelArrayConstructor(A);var c=D.length;const {width:E,height:l}=n;n=q.cols;var w=q.rows;const G=Math.ceil(E/n),d=Math.ceil(l/w);q=!1;for(var h=0;h<m.length;h+=3)-1===m[h]&&-1===m[h+1]&&-1===m[h+2]&&(q=!0);let p,k,f,B,O,z;const t=new Float32Array(E*l),J=new Float32Array(E*l);h=0;let V,T;const ba="majority"===v?0:.5;for(let S=0;S<d;S++)for(let X=0;X<G;X++){p=12*(S*G+X);v=m[p];k=m[p+1];f=m[p+2];B=m[p+3];O=m[p+4];z=m[p+5];for(var M=0;M<w;M++){h=(S*w+M)*E+X*n;T=(M+.5)/w;for(var L=
0;L<M;L++)V=(L+.5)/n,t[h+L]=Math.round((v*V+k*T+f)*u-ba),J[h+L]=Math.round((B*V+O*T+z)*g-ba)}p+=6;v=m[p];k=m[p+1];f=m[p+2];B=m[p+3];O=m[p+4];z=m[p+5];for(M=0;M<w;M++)for(h=(S*w+M)*E+X*n,T=(M+.5)/w,L=M;L<n;L++)V=(L+.5)/n,t[h+L]=Math.round((v*V+k*T+f)*u-ba),J[h+L]=Math.round((B*V+O*T+z)*g-ba)}m=(S,X)=>{for(let aa=0;aa<l;aa++){p=aa*E;for(let fa=0;fa<E;fa++)S[p]=0>t[p]||0>J[p]?0:X[t[p]+J[p]*u],p++}};g=[];for(w=0;w<c;w++)n=new b(E*l),m(n,D[w]),g.push(n);b=new r({width:E,height:l,pixelType:A,pixels:g});
if(x)b.mask=new Uint8Array(E*l),m(b.mask,x);else if(q)for(b.mask=new Uint8Array(E*l),c=0;c<E*l;c++)b.mask[c]=0>t[c]||0>J[c]?0:1;b.updateStatistics();return b};R.clip=y;R.colorize=function(b,n){if(!F(b)||!n&&(n.indexedColormap||n.indexed2DColormap))return b;const m=b.clone();var q=m.pixels;let v=m.mask;const D=m.width*m.height;if(1!==q.length)return b;const {indexedColormap:x,indexed2DColormap:A,offset:u,alphaSpecified:g}=n;n=x.length-1;b=0;q=q[0];const c=new Uint8Array(q.length),E=new Uint8Array(q.length),
l=new Uint8Array(q.length);let w=0;if(x)if(v)for(b=0;b<D;b++)v[b]&&(w=4*(q[b]-u),w<u||w>n?v[b]=0:(c[b]=x[w],E[b]=x[w+1],l[b]=x[w+2],v[b]=x[w+3]));else{v=new Uint8Array(D);for(b=0;b<D;b++)w=4*(q[b]-u),w<u||w>n?v[b]=0:(c[b]=x[w],E[b]=x[w+1],l[b]=x[w+2],v[b]=x[w+3]);m.mask=v}else if(v)for(b=0;b<D;b++)v[b]&&(n=A[q[b]],c[b]=n[0],E[b]=n[1],l[b]=n[2],v[b]=n[3]);else{v=new Uint8Array(D);for(b=0;b<D;b++)n=A[q[b]],c[b]=n[0],E[b]=n[1],l[b]=n[2],v[b]=n[3];m.mask=v}m.pixels=[c,E,l];m.statistics=null;m.pixelType=
"u8";m.maskIsAlpha=g;return m};R.createColormapLUT=function(b){if(b){var n=b.colormap;if(n&&0!==n.length){n=n.sort((g,c)=>g[0]-c[0]);var m=0;0>n[0][0]&&(m=n[0][0]);var q=Math.max(256,n[n.length-1][0]-m+1),v=new Uint8Array(4*q),D=[],x=0,A=0,u=5===n[0].length;if(65536<q)return n.forEach(g=>{D[g[0]-m]=u?g.slice(1):g.slice(1).concat([255])}),{indexed2DColormap:D,offset:m,alphaSpecified:u};if(b.fillUnspecified)for(b=n[A],x=b[0]-m;x<q;x++)v[4*x]=b[1],v[4*x+1]=b[2],v[4*x+2]=b[3],v[4*x+3]=u?b[4]:255,x===
b[0]-m&&(b=A===n.length-1?b:n[++A]);else for(x=0;x<n.length;x++)b=n[x],A=4*(b[0]-m),v[A]=b[1],v[A+1]=b[2],v[A+2]=b[3],v[A+3]=u?b[4]:255;return{indexedColormap:v,offset:m,alphaSpecified:u}}}};R.createContrastBrightnessLUT=K;R.createHistogramEqualizationLUT=function(b,n=256){n=Math.min(n,256);const {size:m,counts:q}=b;b=new Uint8Array(m);var v=q.reduce((g,c)=>g+c/n,0);let D=0;var x=0;let A=0,u=v;for(let g=0;g<m;g++)if(A+=q[g],!(g<m-1&&A+q[g+1]<u)){for(;D<n-1&&u<A;)D++,u+=v;for(;x<=g;x++)b[x]=D;x=g+
1}for(v=x;v<m;v++)b[v]=n-1;return b};R.createStretchLUT=function(b){const {minCutOff:n,maxCutOff:m,gamma:q,pixelType:v}=b,D=b.outMin||0,x=b.outMax||255;if(-1===["u8","u16","s8","s16"].indexOf(v))return null;const A=n.length;let u;let g=0;"s8"===v?g=-127:"s16"===v&&(g=-32767);let c=256;-1<["u16","s16"].indexOf(v)&&(c=65536);const E=[],l=x-D;for(u=0;u<A;u++)E[u]=m[u]-n[u];var w=q&&q.length>=A;const G=[];if(w)for(u=0;u<A;u++)G[u]=1<q[u]?2<q[u]?6.5+(q[u]-2)**2.5:6.5+100*(2-q[u])**4:1;let d;const h=[];
let p,k,f;if(w)for(u=0;u<A;u++){f=[];for(w=0;w<c;w++)p=w+g,d=(p-n[u])/E[u],k=1,1<q[u]&&(k-=(1/l)**(d*G[u])),f[w]=p<m[u]&&p>n[u]?Math.floor(k*l*d**(1/q[u]))+D:p>=m[u]?x:D;h[u]=f}else for(u=0;u<A;u++){f=[];for(w=0;w<c;w++)p=w+g,f[w]=p<=n[u]?D:p>=m[u]?x:Math.floor((p-n[u])/E[u]*l)+D;h[u]=f}if(null!=b.contrastOffset)for(b=K(b.contrastOffset,b.brightnessOffset),u=0;u<A;u++)for(f=h[u],w=0;w<c;w++)f[w]=b[f[w]];return{lut:h,offset:g}};R.estimateStatisticsFromHistograms=function(b){const n=[];for(let D=0;D<
b.length;D++){const {min:x,max:A,size:u,counts:g}=b[D];let c=0;var m=0;for(var q=0;q<u;q++)c+=g[q],m+=q*g[q];m/=c;q=0;for(var v=0;v<u;v++)q+=g[v]*(v-m)**2;v=(A-x)/u;n.push({min:x,max:A,avg:(m+.5)*v+x,stddev:Math.sqrt(q/(c-1))*v})}return n};R.estimateStatisticsHistograms=function(b){if(!F(b))return null;b.statistics||b.updateStatistics();const {pixels:n,mask:m,pixelType:q,statistics:v}=b;b=b.width*b.height;const D=n.length;let x,A;let u;var g;const c=[],E=[];for(u=0;u<D;u++){var l=new Uint32Array(256);
var w=n[u];if("u8"===q)if(x=-.5,A=255.5,m)for(g=0;g<b;g++)m[g]&&l[w[g]]++;else for(g=0;g<b;g++)l[w[g]]++;else{x=v[u].minValue;A=v[u].maxValue;var G=(A-x)/256;var d=new Uint32Array(257);if(m)for(g=0;g<b;g++)m[g]&&d[Math.floor((w[g]-x)/G)]++;else for(g=0;g<b;g++)d[Math.floor((w[g]-x)/G)]++;for(g=0;255>g;g++)l[g]=d[g];l[255]=d[255]+d[256]}c.push({min:x,max:A,size:256,counts:l});for(g=w=d=G=0;256>g;g++)G+=l[g],d+=g*l[g];d/=G;for(g=0;256>g;g++)w+=l[g]*(g-d)**2;l=Math.sqrt(w/(G-1));G=(A-x)/256;g=(d+.5)*
G+x;l*=G;E.push({min:x,max:A,avg:g,stddev:l})}return{statistics:E,histograms:c}};R.extractBands=function(b,n){if(null==n||!n.length||!F(b))return b;const m=b.pixels.length;return n&&n.some(q=>q>=m)||1===m&&1===n.length&&0===n[0]||m===n.length&&!n.some((q,v)=>q!==v)?b:new r({pixelType:b.pixelType,width:b.width,height:b.height,mask:b.mask,validPixelCount:b.validPixelCount,maskIsAlpha:b.maskIsAlpha,pixels:n.map(q=>b.pixels[q]),statistics:b.statistics&&n.map(q=>b.statistics[q])})};R.getClipBounds=N;R.lookupPixels=
function(b,n){if(!F(b))return null;const {pixels:m,mask:q}=b,v=b.width*b.height,D=m.length;let x=n.lut;({offset:n}=n);let A,u;x&&1===x[0].length&&(x=m.map(()=>x));const g=[];let c,E,l;if(n)if(null==q)for(A=0;A<D;A++){c=m[A];E=x[A];l=new Uint8Array(v);for(u=0;u<v;u++)l[u]=E[c[u]-n];g.push(l)}else for(A=0;A<D;A++){c=m[A];E=x[A];l=new Uint8Array(v);for(u=0;u<v;u++)q[u]&&(l[u]=E[c[u]-n]);g.push(l)}else if(null==q)for(A=0;A<D;A++){c=m[A];E=x[A];l=new Uint8Array(v);for(u=0;u<v;u++)l[u]=E[c[u]];g.push(l)}else for(A=
0;A<D;A++){c=m[A];E=x[A];l=new Uint8Array(v);for(u=0;u<v;u++)q[u]&&(l[u]=E[c[u]]);g.push(l)}b=new r({width:b.width,height:b.height,pixels:g,mask:q,pixelType:"u8"});b.updateStatistics();return b};R.mosaic=Q;R.mosaicPixelData=function(b,n){if(!b||0===b.length)return null;var m=b.filter(E=>E.pixelBlock)[0];if(!m)return null;var q=(m.extent.xmax-m.extent.xmin)/m.pixelBlock.width;const v=(m.extent.ymax-m.extent.ymin)/m.pixelBlock.height,D=.01*Math.min(q,v),x=b.sort((E,l)=>Math.abs(E.extent.ymax-l.extent.ymax)>
D?l.extent.ymax-E.extent.ymax:Math.abs(E.extent.xmin-l.extent.xmin)>D?E.extent.xmin-l.extent.xmin:0);var A=Math.min.apply(null,x.map(E=>E.extent.xmin));const u=Math.min.apply(null,x.map(E=>E.extent.ymin)),g=Math.max.apply(null,x.map(E=>E.extent.xmax)),c=Math.max.apply(null,x.map(E=>E.extent.ymax));b={x:Math.round((n.xmin-A)/q),y:Math.round((c-n.ymax)/v)};A={width:Math.round((g-A)/q),height:Math.round((c-u)/v)};q={width:Math.round((n.xmax-n.xmin)/q),height:Math.round((n.ymax-n.ymin)/v)};if(Math.round(A.width/
m.pixelBlock.width)*Math.round(A.height/m.pixelBlock.height)!==x.length||0>b.x||0>b.y||A.width<q.width||A.height<q.height)return null;m=x.map(E=>E.pixelBlock);m=Q(m,A,b,q);return{extent:n,pixelBlock:m}};R.remapColor=function(b,n){if(!F(b))return null;b=b.clone();var {pixels:m}=b;const q=b.width*b.height,v=n.length,D=Math.floor(v/2),x=n[Math.floor(D)];m=m[0];let A,u,g,c,E,l,w=!1;const G=new Uint8Array(q),d=new Uint8Array(q),h=new Uint8Array(q);let p=b.mask;const k=4===n[0].mappedColor.length;p||(p=
new Uint8Array(q),p.fill(k?255:1),b.mask=p);for(E=0;E<q;E++)if(p[E]){A=m[E];w=!1;l=D;u=x;g=0;for(c=v-1;1<c-g;){if(A===u.value){w=!0;break}A>u.value?g=l:c=l;l=Math.floor((g+c)/2);u=n[Math.floor(l)]}w||(A===n[g].value?(u=n[g],w=!0):A===n[c].value?(u=n[c],w=!0):A<n[g].value?(w=!1,u=null):A>n[g].value&&(A<n[c].value?(u=n[g],w=!0):c===v-1?(w=!1,u=null):(u=n[c],w=!0)));w?(G[E]=u.mappedColor[0],d[E]=u.mappedColor[1],h[E]=u.mappedColor[2],p[E]=u.mappedColor[3]):G[E]=d[E]=h[E]=p[E]=0}b.pixels=[G,d,h];b.mask=
p;b.pixelType="u8";b.maskIsAlpha=k;return b};R.resampleByMajority=Y;R.setValidBoundary=function(b,n,m){if(!F(b))return null;const {width:q,height:v}=b,D=n.x;n=n.y;const x=m.width+D;m=m.height+n;if(0>D||0>n||x>q||m>v||0===D&&0===n&&x===q&&m===v)return b;b.mask||(b.mask=new Uint8Array(q*v));const A=b.mask;for(let u=0;u<v;u++){const g=u*q;for(let c=0;c<q;c++)A[g+c]=u<n||u>=m||c<D||c>=x?0:1}b.updateStatistics();return b};R.split=function(b,n,m){if(!F(b))return null;const {width:q,height:v}=n;let {width:D,
height:x}=b;const A=new Map,u={x:0,y:0};m=null==m?1:1+m;for(let g=0;g<m;g++){const c=Math.ceil(D/q),E=Math.ceil(x/v);for(let l=0;l<E;l++){u.y=l*v;for(let w=0;w<c;w++){u.x=w*q;const G=y(b,u,n);A.set(`${g}/${l}/${w}`,G)}}g<m-1&&(b=H(b));D=Math.round(D/2);x=Math.round(x/2)}return A};R.stretch=function(b,n){if(!F(b))return null;b=b.clone();const {pixels:m,mask:q}=b,{minCutOff:v,maxCutOff:D,gamma:x}=n,A=n.outMin||0;n=n.outMax||255;const u=b.width*b.height,g=m.length;let c;let E,l,w;const G=n-A,d=[];for(c=
0;c<g;c++)d[c]=D[c]-v[c];var h=x&&x.length>=g;const p=[];if(h)for(c=0;c<g;c++)p[c]=1<x[c]?2<x[c]?6.5+(x[c]-2)**2.5:6.5+100*(2-x[c])**4:1;if(h)if(null!=q)for(h=0;h<u;h++){if(q[h])for(c=0;c<g;c++)E=m[c][h],w=(E-v[c])/d[c],l=1,1<x[c]&&(l-=(1/G)**(w*p[c])),m[c][h]=E<D[c]&&E>v[c]?Math.floor(l*G*w**(1/x[c]))+A:E>=D[c]?n:A}else for(h=0;h<u;h++)for(c=0;c<g;c++)E=m[c][h],w=(E-v[c])/d[c],l=1,1<x[c]&&(l-=(1/G)**(w*p[c])),m[c][h]=E<D[c]&&E>v[c]?Math.floor(l*G*w**(1/x[c]))+A:E>=D[c]?n:A;else if(null!=q)for(h=
0;h<u;h++){if(q[h])for(c=0;c<g;c++)E=m[c][h],m[c][h]=E<D[c]&&E>v[c]?Math.floor((E-v[c])/d[c]*G)+A:E>=D[c]?n:A}else for(h=0;h<u;h++)for(c=0;c<g;c++)E=m[c][h],m[c][h]=E<D[c]&&E>v[c]?Math.floor((E-v[c])/d[c]*G)+A:E>=D[c]?n:A;b.pixelType="u8";b.updateStatistics();return b};Object.defineProperty(R,"__esModule",{value:!0})})},"esri/layers/support/rasterFunctions/surfaceUtils":function(){define(["exports","../PixelBlock"],function(R,r){function K(C){let {altitude:Q,azimuth:Y}=C;const {hillshadeType:W,pixelSizePower:U,
pixelSizeFactor:I,scalingType:y,isGCS:H,resolution:F}=C;var b="multi-directional"===W?2*C.zFactor:C.zFactor;const {x:n,y:m}=F;C=b/(8*n);var q=b/(8*m);H&&.001<b&&(C/=111E3,q/=111E3);"adjusted"===y&&(H?(C=111E3*n,q=111E3*m,C=(b+C**U*I)/(8*C),q=(b+q**U*I)/(8*q)):(C=(b+n**U*I)/(8*n),q=(b+m**U*I)/(8*m)));var v=(90-Q)*Math.PI/180;b=Math.cos(v);let D=(360-Y+90)*Math.PI/180,x=Math.sin(v)*Math.cos(D);v=Math.sin(v)*Math.sin(D);const A=[315,270,225,360,180,0],u=[60,60,60,60,60,90];var g=new Float32Array([3,
5,3,2,1,4]);const c=g.reduce((d,h)=>d+h);g=g.map(d=>d/c);const E="multi-directional"===W?A.length:1,l=new Float32Array(6),w=new Float32Array(6),G=new Float32Array(6);if("multi-directional"===W)for(let d=0;d<E;d++)Q=u[d],Y=A[d],v=(90-Q)*Math.PI/180,b=Math.cos(v),D=(360-Y+90)*Math.PI/180,x=Math.sin(v)*Math.cos(D),v=Math.sin(v)*Math.sin(D),l[d]=b,w[d]=x,G[d]=v;else l.fill(b),w.fill(x),G.fill(v);return{resolution:F,factor:[C,q],sinZcosA:x,sinZsinA:v,cosZ:b,sinZcosAs:w,sinZsinAs:G,cosZs:l,weights:g,hillshadeType:["traditional",
"multi-directional"].indexOf(W)}}const N=function(C){return C&&"esri.layers.support.PixelBlock"===C.declaredClass&&C.pixels&&0<C.pixels.length};R.calculateHillshadeParams=K;R.hillshade=function(C,Q){if(!N(C))return C;const {width:Y,height:W,mask:U}=C,I=new Uint8Array(Y*W);U&&I.set(U);const {factor:y,sinZcosA:H,sinZsinA:F,cosZ:b,sinZcosAs:n,sinZsinAs:m,cosZs:q,weights:v}=K(Q),[D,x]=y;var {hillshadeType:A}=Q;const u=C.pixels[0];Q=new Uint8Array(Y*W);let g;for(let p=1;p<W-1;p++){const k=p*Y;for(let f=
1;f<Y-1;f++)if(U&&!U[k+f])Q[k+f]=0;else{var c=8;if(U&&(c=U[k-Y+f-1]+U[k-Y+f]+U[k-Y+f+1]+U[k+f-1]+U[k+f+1]+U[k+Y+f-1]+U[k+Y+f]+U[k+Y+f+1],7>c)){Q[k+f]=0;I[k+f]=0;continue}if(7===c){var E=U[k-Y+f-1]?u[k-Y+f-1]:u[k+f];var l=U[k-Y+f]?u[k-Y+f]:u[k+f];var w=U[k-Y+f+1]?u[k-Y+f+1]:u[k+f];c=U[k+f-1]?u[k+f-1]:u[k+f];g=U[k+f+1]?u[k+f+1]:u[k+f];var G=U[k+Y+f-1]?u[k+Y+f-1]:u[k+f];var d=U[k+Y+f]?u[k+Y+f]:u[k+f];var h=U[k+Y+f+1]?u[k+Y+f+1]:u[k+f]}else E=u[k-Y+f-1],l=u[k-Y+f],w=u[k-Y+f+1],c=u[k+f-1],g=u[k+f+1],G=
u[k+Y+f-1],d=u[k+Y+f],h=u[k+Y+f+1];c=(w+g+g+h-(E+c+c+G))*D;E=(G+d+d+h-(E+l+l+w))*x;l=Math.sqrt(1+c*c+E*E);w=0;if("traditional"===A)c=255*(b+F*E-H*c)/l,0>c&&(c=0),w=c;else for(G=m.length,d=0;d<G;d++)h=255*(q[d]+m[d]*E-n[d]*c)/l,0>h&&(h=0),w+=h*v[d];Q[k+f]=w&255}}for(A=0;A<W;A++)Q[A*Y]=Q[A*Y+1],Q[(A+1)*Y-1]=Q[(A+1)*Y-2];for(A=1;A<Y-1;A++)Q[A]=Q[A+Y],Q[A+(W-1)*Y]=Q[A+(W-2)*Y];return new r({width:Y,height:W,pixels:[Q],mask:U?I:null,pixelType:"u8",validPixelCount:C.validPixelCount,statistics:[{minValue:0,
maxValue:255}]})};R.tintHillshade=function(C,Q,Y,W){if(N(C)&&N(Q)){var {min:U,max:I}=W;W=C.pixels[0];var {pixels:y,mask:H}=Q;Q=y[0];var F=255.00001/(I-U),b=new Uint8ClampedArray(Q.length),n=new Uint8ClampedArray(Q.length),m=new Uint8ClampedArray(Q.length),q=Y.length-1;for(let x=0;x<Q.length;x++){if(H&&0===H[x])continue;var v=Math.floor((Q[x]-U)*F);const [A,u]=Y[0>v?0:v>q?q:v];var D=W[x];v=D*u;const g=v*(1-Math.abs(A%2-1));D-=v;switch(Math.floor(A)){case 0:b[x]=v+D;n[x]=g+D;m[x]=D;break;case 1:b[x]=
g+D;n[x]=v+D;m[x]=D;break;case 2:b[x]=D;n[x]=v+D;m[x]=g+D;break;case 3:b[x]=D;n[x]=g+D;m[x]=v+D;break;case 4:b[x]=g+D;n[x]=D;m[x]=v+D;break;case 5:case 6:b[x]=v+D,n[x]=D,m[x]=g+D}}C.pixels=[b,n,m];C.updateStatistics()}};Object.defineProperty(R,"__esModule",{value:!0})})},"esri/layers/support/rasterEnums":function(){define(["exports","../../core/jsonMap"],function(R,r){const K=r.strict()({RSP_NearestNeighbor:"nearest",RSP_BilinearInterpolation:"bilinear",RSP_CubicConvolution:"cubic",RSP_Majority:"majority"});
r=r.strict()({esriNoDataMatchAny:"any",esriNoDataMatchAll:"all"});R.interpolationKebab=K;R.noDataInterpretationKebab=r;Object.defineProperty(R,"__esModule",{value:!0})})},"esri/layers/support/rasterDatasets/RasterFactory":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ./CloudRaster ./ImageAuxRaster ./ImageServerRaster ./MRFRaster ./TIFFRaster".split(" "),function(R,r,K,N,C,Q,Y){const W=new Map;W.set("CRF",{desc:"Cloud Raster Format",constructor:K});W.set("MRF",{desc:"Meta Raster Format",
constructor:Q});W.set("TIFF",{desc:"GeoTIFF",constructor:Y});W.set("RasterTileServer",{desc:"Raster Tile Server",constructor:C});W.set("JPG",{desc:"JPG Raster Format",constructor:N});W.set("PNG",{desc:"PNG Raster Format",constructor:N});W.set("GIF",{desc:"GIF Raster Format",constructor:N});W.set("BMP",{desc:"BMP Raster Format",constructor:N});return function(){function U(){}U.open=function(){var I=R._asyncToGenerator(function*(y){const {url:H,ioConfig:F,sourceJSON:b}=y;let n=y.datasetFormat;null==
n&&H.lastIndexOf(".")&&(n=H.slice(H.lastIndexOf(".")+1).toUpperCase());if("OVR"===n||"TIF"===n)n="TIFF";else if("JPG"===n||"JPEG"===n||"JFIF"===n)n="JPG";-1<H.toLowerCase().indexOf("/imageserver")&&-1===H.toLowerCase().indexOf("/wcsserver")&&(n="RasterTileServer");const m={bandIds:null,sampling:null},q={url:H,sourceJSON:b,datasetFormat:n,ioConfig:F||m};let v,D;if(this.supportedFormats.has(n))return v=W.get(n).constructor,D=new v(q),yield D.open({signal:y.signal}),D;if(n)throw new r("rasterfactory:open",
"not a supported format "+n);const x=Array.from(W.keys());let A=0;const u=function(){n=x[A++];if(!n)return null;v=W.get(n).constructor;D=new v(q);return D.open({signal:y.signal}).then(()=>D).catch(()=>u())};return u()});return function(y){return I.apply(this,arguments)}}();U.register=function(I,y,H){W.has(I.toUpperCase())||W.set(I.toUpperCase(),{desc:y,constructor:H})};R._createClass(U,null,[{key:"supportedFormats",get:function(){const I=new Set;W.forEach((y,H)=>I.add(H));return I}}]);return U}()})},
"esri/layers/support/rasterDatasets/CloudRaster":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../geometry ../../../core/Error ../../../core/maybe ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/Logger ../../../core/jsonMap ../../../core/accessorSupport/decorators/subclass ../RasterInfo ../RasterStorageInfo ../TileInfo ./BaseRaster ./DBFParser ../rasterTransforms/utils ../../../rest/support/FeatureSet ../../../geometry/SpatialReference ../../../geometry/Extent ../../../geometry/Point".split(" "),
function(R,r,K,N,C,Q,Y,W,U,I,y,H,F,b,n,m,q,v,D,x,A){const u=new Map;u.set("int16","esriFieldTypeSmallInteger");u.set("int32","esriFieldTypeInteger");u.set("int64","esriFieldTypeInteger");u.set("float32","esriFieldTypeSingle");u.set("float64","esriFieldTypeDouble");u.set("text","esriFieldTypeString");K=function(g){function c(){var l=g.apply(this,arguments)||this;l.storageInfo=null;l.datasetFormat="CRF";return l}R._inheritsLoose(c,g);var E=c.prototype;E.open=function(){var l=R._asyncToGenerator(function*(w){yield this.init();
({data:w}=yield this.request(this.url+"/conf.json",{signal:null==w?void 0:w.signal}));if(!this._validateHeader(w))throw new N("cloudraster:open","Invalid or unsupported conf.json.");this.datasetName=this.url.slice(this.url.lastIndexOf("/")+1);const {storageInfo:G,rasterInfo:d}=this._parseHeader(w);"thematic"===d.dataType&&(w=yield this._fetchAuxiliaryInformation(),d.attributeTable=w);this._set("storageInfo",G);this._set("rasterInfo",d);this.ioConfig.retryCount=this.ioConfig.retryCount||0});return function(w){return l.apply(this,
arguments)}}();E.fetchRawTile=function(){var l=R._asyncToGenerator(function*(w,G,d,h={}){w=this.rasterInfo.storageInfo.maximumPyramidLevel-w;if(0>w)return null;w=this._buildCacheFilePath(w,G,d,h.multidimensionalDefinition);G=this._getIndexRecordFromBundle(G,d);d=yield this.request(w,{range:{from:0,to:this.storageInfo.headerSize-1},responseType:"array-buffer",signal:h.signal});if(!d)return null;d=new Uint8Array(d.data);G=this._getTileEndAndContentType(d,G);return 0===G.recordSize?null:(h=yield this.request(w,
{range:{from:G.position,to:G.position+G.recordSize},responseType:"array-buffer",signal:h.signal}))?this.decodePixelBlock(h.data,{width:this.rasterInfo.storageInfo.tileInfo.size[0],height:this.rasterInfo.storageInfo.tileInfo.size[1],planes:null,pixelType:null}):null});return function(w,G,d){return l.apply(this,arguments)}}();E._validateHeader=function(l){const w="origin extent geodataXform LODInfos blockWidth blockHeight bandCount pixelType pixelSizeX pixelSizeY format packetSize".split(" ");return l&&
"RasterInfo"===l.type&&!w.some(G=>!l[G])};E._parseHeader=function(l){var w,G;const d="u1 u2 u4 u8 s8 u16 s16 u32 s32 f32 f64".split(" ")[l.pixelType],{bandCount:h,histograms:p,colormap:k,blockWidth:f,blockHeight:B,firstPyramidLevel:O,maximumPyramidLevel:z}=l,t=l.statistics&&l.statistics.map(Z=>({min:Z.min,max:Z.max,avg:Z.mean,stddev:Z.standardDeviation,median:Z.median,mode:Z.mode}));var J=l.extent.spatialReference,V=null==(w=l.geodataXform)?void 0:w.spatialReference;w=new D(null!=J&&J.wkid||null!=
J&&J.wkt?J:V);J=new x({xmin:l.extent.xmin,ymin:l.extent.ymin,xmax:l.extent.xmax,ymax:l.extent.ymax,spatialReference:w});V=new A({x:l.pixelSizeX,y:l.pixelSizeY,spatialReference:w});const T=Math.round((J.xmax-J.xmin)/V.x),ba=Math.round((J.ymax-J.ymin)/V.y),M=this._parseTransform(l.geodataXform),L=M?J:null;M&&(J=M.forwardTransform(J),V.x=(J.xmax-J.xmin)/T,V.y=(J.ymax-J.ymin)/ba);const S=null!=(G=l.properties)?G:{};var X=l.format.toLowerCase().replace("cache/","");G=new A(l.origin.x,l.origin.y,w);let aa,
fa;if(k&&k.colors)for(aa=[],fa=0;fa<k.colors.length;fa++){var a=k.colors[fa];var e=k.values?k.values[fa]:fa;aa.push([e,a&255,a<<16>>>24,a<<8>>>24,a>>>24])}a=l.LODInfos;e=[];for(fa=0;fa<a.levels.length;fa++)e.push({level:a.levels[fa],resolution:a.resolutions[fa],scale:96/.0254*a.resolutions[fa]});a=new b({dpi:96,lods:e,format:X,origin:G,size:[f,B],spatialReference:w});X={recordSize:8,packetSize:l.packetSize,headerSize:l.packetSize*l.packetSize*8+64};e=[{maxCol:Math.ceil(T/f)-1,maxRow:Math.ceil(ba/
B)-1,minCol:0,minRow:0}];let P=2;if(0<z)for(fa=0;fa<z;fa++)e.push({maxCol:Math.ceil(T/P/f)-1,maxRow:Math.ceil(ba/P/B)-1,minCol:0,minRow:0}),P*=2;l=new H({width:T,height:ba,pixelType:d,bandCount:h,extent:J,nativeExtent:L,transform:M,spatialReference:w,pixelSize:V,keyProperties:S,statistics:t,histograms:p,multidimensionalInfo:l.mdInfo,colormap:aa,storageInfo:new F({blockWidth:f,blockHeight:B,pyramidBlockWidth:f,pyramidBlockHeight:B,origin:G,tileInfo:a,firstPyramidLevel:O,maximumPyramidLevel:z,blockBoundary:e})});
return{storageInfo:X,rasterInfo:l}};E._parseTransform=function(l){var w,G;if(!q.isTransformSupported(l))throw new N("cloudraster:open","the data contains unsupported geodata transform types");l=q.readTransform(l);if("identity"===l.type)return null;if("polynomial"!==l.type||null==(w=l.forwardCoefficients)||!w.length||null==(G=l.inverseCoefficients)||!G.length)throw new N("cloudraster:open","the data contains unsupported geodata transforms - both forward and inverse coefficients are required currently");
return l};E._fetchAuxiliaryInformation=function(){var l=R._asyncToGenerator(function*(w){var G=this.request(this.url+"/conf.vat.json",{signal:w}).then(h=>h.data).catch(()=>null);w=this.request(this.url+"/conf.vat.dbf",{responseType:"array-buffer",signal:w}).then(h=>h.data).catch(()=>null);G=yield Promise.all([G,w]);let d;if(G[0]){w=G[0].fields;const h=G[0].values;if(w&&h){w=w.map(k=>({type:"OID"===k.name?"esriFieldTypeOID":u.get(k.type),name:k.name,alias:k.alias||k.name}));const p=h.map(k=>({attributes:k}));
w&&h&&(d={fields:w,features:p})}}!d&&G[1]&&(d=m.parse(G[1]).recordSet);return v.fromJSON(d)});return function(w){return l.apply(this,arguments)}}();E._buildCacheFilePath=function(l,w,G,d){var h=this.storageInfo.packetSize;G=Math.floor(G/h)*h;w="R"+this._toHexString4(Math.floor(w/h)*h)+"C"+this._toHexString4(G);h="L";h=10<=l?h+l.toString():h+("0"+l.toString());({multidimensionalInfo:l}=this.rasterInfo);const p=null==d?void 0:d[0];if(!C.isSome(l)||!p)return`${this.url}/_alllayers/${h}/${w}.bundle`;
d=l.variables.filter(k=>k.name===p.variableName)[0].dimensions[0].values.indexOf(p.values[0]).toString(16);l=4-d.length;for(G=0;G<l;G++)d="0"+d;return`${this.url}/_alllayers/${p.variableName}/${"S"+d}/${h}/${w}.bundle`};E._getIndexRecordFromBundle=function(l,w){const G=this.storageInfo.packetSize;l=l%G*G+w%G;if(0>l)throw"Invalid level / row / col";return l*this.storageInfo.recordSize+64};E._getTileEndAndContentType=function(l,w){l=l.subarray(w,w+8);w=0;let G;for(G=0;5>G;G++)w|=(l[G]&255)<<8*G;const d=
w&0xffffffffff;w=0;for(G=5;8>G;G++)w|=(l[G]&255)<<8*(G-5);return{position:d,recordSize:w&0xffffffffff}};E._toHexString4=function(l){l=l.toString(16);if(4!==l.length){let w=4-l.length;for(;0<w--;)l="0"+l}return l};return c}(n);r.__decorate([Q.property({readOnly:!0})],K.prototype,"storageInfo",void 0);r.__decorate([Q.property({type:String,json:{write:!0}})],K.prototype,"datasetFormat",void 0);return K=r.__decorate([y.subclass("esri.layers.support.rasterDatasets.CloudRaster")],K)})},"esri/layers/support/rasterDatasets/BaseRaster":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../geometry ../../../request ../../../core/Error ../../../core/JSONSupport ../../../core/Logger ../../../core/maybe ../../../core/Promise ../../../core/promiseUtils ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/jsonMap ../../../core/accessorSupport/decorators/subclass ../arcgisLayerUrl ../commonProperties ../RasterStorageInfo ../TileInfo ./RawBlockCache ../rasterFormats/RasterCodec ../rasterFunctions/pixelUtils ../rasterFunctions/rasterProjectionHelper ../../../geometry/Point ../../../geometry/Extent".split(" "),
function(R,r,K,N,C,Q,Y,W,U,I,y,H,F,b,n,m,q,v,D,x,A,u,g,c,E){K=function(l){function w(){var d=l.apply(this,arguments)||this;d.rasterJobHandler=null;d.datasetName=null;d.datasetFormat=null;d.rasterInfo=null;d.ioConfig={sampling:"closest"};return d}R._inheritsLoose(w,l);var G=w.prototype;G.init=function(){var d=R._asyncToGenerator(function*(){const h=g.load();this.addResolvingPromise(h);yield this.when()});return function(){return d.apply(this,arguments)}}();G.normalizeCtorArgs=function(d){d&&d.ioConfig&&
(d={...d,ioConfig:{resolution:null,bandIds:null,sampling:"closest",tileInfo:D.create(),...d.ioConfig}});return d};G.open=function(){var d=R._asyncToGenerator(function*(h){throw new C("BaseRaster:open-not-implemented","open() is not implemented");});return function(h){return d.apply(this,arguments)}}();G.fetchTile=function(){var d=R._asyncToGenerator(function*(h,p,k,f={}){var B;const {tileInfo:O}=f;h=O.lodAt(h);p=this.getTileExtent({x:h.resolution,y:h.resolution},p,k,O.origin,O.spatialReference,O.size);
null!=(B=f.multidimensionalDefinition)&&B.length&&W.isSome(this.rasterInfo.multidimensionalInfo)&&null==f.sliceId&&(f={...f,sliceId:this.getSliceIndex(f.multidimensionalDefinition)||0});return this.fetchPixels(p,O.size[0],O.size[1],f)});return function(h,p,k){return d.apply(this,arguments)}}();G.identify=function(){var d=R._asyncToGenerator(function*(h,p={}){const {spatialReference:k,extent:f}=this.rasterInfo;var {datumTransformation:B}=p;B=g.projectPoint(h,k,B);if(!f.intersects(B)||W.isSome(this.rasterInfo.transform)&&
(B=this.rasterInfo.transform.inverseTransform(B),!this.rasterInfo.nativeExtent.intersects(B)))return{location:B,value:null};let O=0;if(p.srcResolution)O=g.snapPyramid(p.srcResolution,this.rasterInfo,this.ioConfig.sampling).pyramidLevel;else if(O=yield this.computeBestPyramidLevelForLocation(h,p),null==O)return{location:B,value:null};h=this.identifyPixelLocation(B,O,null);if(null===h)return{location:B,value:null};const {row:z,col:t,rowOffset:J,colOffset:V}=h;h=x.getRasterId(this.url,p.sliceId);const T=
`${O}/${z}/${t}`;let ba=x.getBlock(h,null,T);W.isSome(ba)||(ba=this.fetchRawTile(O,z,t,p),x.putBlock(h,null,T,ba));p=yield ba;if(!(p&&p.pixels&&0<p.pixels.length))return{location:B,value:null};const M=J*this.rasterInfo.storageInfo.blockHeight+V;p=!p.mask||p.mask[M]?p.pixels.map(L=>L[M]):null;return{location:B,value:p,pyramidLevel:O}});return function(h){return d.apply(this,arguments)}}();G.fetchPixels=function(){var d=R._asyncToGenerator(function*(h,p,k,f={}){h=g.snapExtent(h);var B=g.getWorldWrapCount(h),
O=this.rasterInfo.spatialReference,z=!h.spatialReference.equals(O),{datumTransformation:t}=f,J=new c({x:(h.xmax-h.xmin)/p,y:(h.ymax-h.ymin)/k,spatialReference:h.spatialReference});const V=f.srcResolution||(z?g.projectResolution(J,O,h,t):J);if(!V)return null;const {pyramidLevel:T,pyramidResolution:ba,excessiveReading:M}=g.snapPyramid(V,this.rasterInfo,this.ioConfig.sampling);if(M)return null;var L=this.rasterInfo.storageInfo;O=z?g.projectExtent(h,O,t):h;const S=W.unwrap(this.rasterInfo.transform);
S&&(O=S.inverseTransform(O));if(null==O)return null;var X=Math.ceil((O.xmax-O.xmin)/ba.x-.1),aa=Math.ceil((O.ymax-O.ymin)/ba.y-.1);if(8<X/p||8<aa/k||2<=B)return null;X=yield this.fetchRawPixels(T,{x:Math.floor((O.xmin-L.origin.x)/ba.x+.1),y:Math.floor((L.origin.y-O.ymax)/ba.y+.1)},{width:X,height:aa,wrapCount:B},f);if(!X)return null;aa=0<T?L.pyramidBlockWidth:L.blockWidth;L=0<T?L.pyramidBlockHeight:L.blockHeight;if(!z&&1===X.pixelBlocks.length&&aa===p&&L===k&&V.x===J.x&&V.y===J.y)return{extent:h,
srcExtent:O,pixelBlock:X.pixelBlocks[0]};B=g.getProjectionOffsetGrid(h,X.extent,J,t,S,0<B);z=!f.requestRawData;t={rows:B.spacing[0],cols:B.spacing[1]};J=W.unwrap(this._getRasterTileAlignmentInfo(T,X.extent.xmin));const {pixelBlocks:fa,mosaicSize:a,isPartiallyFilled:e}=X;this.rasterJobHandler?p=yield this.rasterJobHandler.mosaicAndTransform({srcPixelBlocks:fa,srcMosaicSize:a,destDimension:z?{width:p,height:k}:null,coefs:z?B.coefficients:null,sampleSpacing:z?t:null,interpolation:f.interpolation,alignmentInfo:J},
f):(X=u.mosaic(fa,a,null,null,J),p=z?u.approximateTransform(X,{width:p,height:k},B.coefficients,t,f.interpolation):X);return f.requestRawData?{srcExtent:O,pixelBlock:p,transformGrid:B,extent:h,isPartiallyFilled:e}:{srcExtent:O,extent:h,pixelBlock:p}});return function(h,p,k){return d.apply(this,arguments)}}();G.fetchRawPixels=function(){var d=R._asyncToGenerator(function*(h,p,k,f){const {origin:B,blockBoundary:O}=this.rasterInfo.storageInfo,{blockWidth:z,blockHeight:t}=this.getBlockWidthHeight(h);
let {x:J,y:V}=p,{width:T,height:ba,wrapCount:M}=k;var L=W.unwrap(this._getRasterTileAlignmentInfo(h,0));f.buffer&&(J-=f.buffer.cols,V-=f.buffer.rows,T+=2*f.buffer.cols,ba+=2*f.buffer.rows);p=Math.floor(J/z);k=Math.floor(V/t);const S=Math.floor((J+T-1)/z),X=Math.floor((V+ba-1)/t);var aa=O[h];if(!aa)return null;const {minRow:fa,minCol:a,maxCol:e,maxRow:P}=aa;if(X<fa||S<a||k>P||p>e)return null;aa=[];let Z,da=!1;for(let ia=k;ia<=X;ia++)for(let ja=p;ja<=S;ja++){const na=0===M||null==L||ja<L.worldColumnCountFromOrigin?
ja:ja%L.worldColumnCountFromOrigin-L.originColumnOffset;ia>=fa&&na>=a&&P>=ia&&e>=na?(Z=this._fetchRawTile(h,ia,na,f),this.ioConfig.allowPartialFill&&(Z=new Promise(ma=>{Z.then(pa=>ma(pa)).catch(()=>{da=!0;ma(null)})})),aa.push(Z)):aa.push(null)}if(0===aa.length)return null;f=yield Promise.all(aa);L={height:(X-k+1)*t,width:(S-p+1)*z};({spatialReference:aa}=this.rasterInfo);h=this.getPyramidPixelSize(h);const {x:ka,y:la}=h;return{extent:new E({xmin:B.x+p*z*ka,xmax:B.x+(S+1)*z*ka,ymin:B.y-(X+1)*t*la,
ymax:B.y-k*t*la,spatialReference:aa}),pixelBlocks:f,mosaicSize:L,isPartiallyFilled:da}});return function(h,p,k,f){return d.apply(this,arguments)}}();G.fetchRawTile=function(){var d=R._asyncToGenerator(function*(h,p,k,f){throw new C("BaseRaster:read-not-implemented","fetchRawTile() is not implemented");});return function(h,p,k,f){return d.apply(this,arguments)}}();G.computeExtent=function(d){return g.projectExtent(this.rasterInfo.extent,d)};G.decodePixelBlock=function(d,h){return!this.rasterJobHandler||
h.useCanvas?A.decode(d,h):this.rasterJobHandler.decode({data:d,options:h})};G.request=function(){var d=R._asyncToGenerator(function*(h,p,k){var f,B;const {customFetchParameters:O}=this.ioConfig,{range:z,query:t,headers:J}=p;k=null!=(f=null!=(B=k)?B:p.retryCount)?f:this.ioConfig.retryCount;f=z?{Range:`bytes=${z.from}-${z.to}`}:null;try{return yield N(h,{...p,query:{...t,...O},headers:{...J,...f}})}catch(V){if(0<k)return k--,this.request(h,p,k);throw V;}});return function(h,p,k){return d.apply(this,
arguments)}}();G.getSliceIndex=function(d){const {multidimensionalInfo:h}=this.rasterInfo;if(!W.isSome(h)||null==d||!d.length)return null;let p=0;const k=d[0].variableName;for(let O=0;O<h.variables.length;O++){var f=h.variables[O];const z=f.dimensions;if(f.name!==k){p+=z.map(J=>this._getDimensionValuesCount(J)).reduce((J,V)=>J+V);break}f=z.map(J=>this._getDimensionValuesCount(J));const t=z.length;for(let J=0;J<t;J++){var B=d.filter(V=>V.dimensionName===z[J].name)[0];if(null==B)return null;B=Array.isArray(B.values[0])?
B.values[0][0]:B.values[0];B=this._getIndexFromDimensions(B,z[J]);if(-1===B)return null;f.shift();p=J===t-1?p+B:p+B*f.reduce((V,T)=>V+T)}}return p};G.updateTileInfo=function(){const {storageInfo:d,spatialReference:h,extent:p,pixelSize:k}=this.rasterInfo;if(!d.tileInfo){const B=[];var f=d.maximumPyramidLevel||0;let O=Math.max(k.x,k.y),z=1/.0254*96*O;for(let t=0;t<=f;t++)B.push({level:f-t,resolution:O,scale:z}),O*=2,z*=2;f=new c({x:p.xmin,y:p.ymax,spatialReference:h});d.tileInfo=new D({origin:f,size:[d.blockWidth,
d.blockHeight],spatialReference:h,lods:B});d.isVirtualTileInfo=!0}};G.createRemoteDatasetStorageInfo=function(d,h=512,p=512,k){const {width:f,height:B,nativeExtent:O,pixelSize:z,spatialReference:t}=d,J=new c({x:O.xmin,y:O.ymax,spatialReference:t});null==k&&(k=Math.max(0,Math.round(Math.log(Math.max(f,B))/Math.LN2-8)));const V=this.computeBlockBoundary(O,512,512,{x:O.xmin,y:O.ymax},[z],k);d.storageInfo=new v({blockWidth:h,blockHeight:p,pyramidBlockWidth:h,pyramidBlockHeight:p,origin:J,firstPyramidLevel:1,
maximumPyramidLevel:k,blockBoundary:V})};G.computeBestPyramidLevelForLocation=function(){var d=R._asyncToGenerator(function*(h,p){return 0});return function(h){return d.apply(this,arguments)}}();G.computeBlockBoundary=function(d,h,p,k,f,B=0,O=2){if(1===f.length&&0<B){f=[...f];let {x:J,y:V}=f[0];for(let T=0;T<B;T++)J*=O,V*=O,f.push({x:J,y:V})}B=[];const {x:z,y:t}=k;for(k=0;k<f.length;k++){const {x:J,y:V}=f[k];B.push({minCol:Math.floor((d.xmin-z+.1*J)/h/J),maxCol:Math.floor((d.xmax-z-.1*J)/h/J),minRow:Math.floor((t-
d.ymax+.1*V)/p/V),maxRow:Math.floor((t-d.ymin-.1*V)/p/V)})}return B};G.getPyramidPixelSize=function(d){const {nativePixelSize:h}=this.rasterInfo,{pyramidResolutions:p,pyramidScalingFactor:k}=this.rasterInfo.storageInfo;if(0===d)return h;if(W.isSome(p)&&p.length)return p[d-1];d=k**d;return{x:h.x*d,y:h.y*d}};G.identifyPixelLocation=function(d,h,p){const {spatialReference:k,nativeExtent:f}=this.rasterInfo,{blockWidth:B,blockHeight:O,maximumPyramidLevel:z,origin:t}=this.rasterInfo.storageInfo;d=g.projectPoint(d,
k,p);if(!f.intersects(d)||0>h||h>z)return null;p=this.getPyramidPixelSize(h);const {x:J,y:V}=p;p=(t.y-d.y)/V/O;const T=(d.x-t.x)/J/B;return{pyramidLevel:h,row:Math.floor(p),col:Math.floor(T),rowOffset:Math.min(O-1,Math.floor((p-Math.floor(p))*O)),colOffset:Math.min(B-1,Math.floor((T-Math.floor(T))*B)),srcLocation:d}};G.getTileExtent=function(d,h,p,k,f,B){const [O,z]=B;p=k.x+p*O*d.x;h=k.y-h*z*d.y;return new E({xmin:p,xmax:p+O*d.x,ymin:h-z*d.y,ymax:h,spatialReference:f})};G.getBlockWidthHeight=function(d){return{blockWidth:0<
d?this.rasterInfo.storageInfo.pyramidBlockWidth:this.rasterInfo.storageInfo.blockWidth,blockHeight:0<d?this.rasterInfo.storageInfo.pyramidBlockHeight:this.rasterInfo.storageInfo.blockHeight}};G.isBlockOutside=function(d,h,p){d=this.rasterInfo.storageInfo.blockBoundary[d];return!d||d.maxRow<h||d.maxCol<p||d.minRow>h||d.minCol>p};G._fetchRawTile=function(d,h,p,k){var f=this.rasterInfo.storageInfo.blockBoundary[d];if(!f)return Promise.resolve(null);const {minRow:B,minCol:O,maxCol:z,maxRow:t}=f;if(h<
B||p<O||h>t||p>z)return Promise.resolve(null);const J=x.getRasterId(this.url,k.sliceId),V=`${d}/${h}/${p}`;f=x.getBlock(J,k.registryId,V);if(!W.isSome(f)){const T=I.createAbortController();f=this.fetchRawTile(d,h,p,{...k,signal:T.signal});x.putBlock(J,k.registryId,V,f,T);f.catch(()=>{x.deleteBlock(J,k.registryId,V)})}if(k.signal)I.onAbort(k,()=>{x.decreaseRefCount(J,k.registryId,V)});return f};G._getIndexFromDimensions=function(d,h){const {extent:p,interval:k,unit:f,values:B}=h;if(null!=B&&B.length)return Array.isArray(B[0])?
B.findIndex(J=>J[0]<=d&&J[1]>=d):B.indexOf(d);if(d>p[1])return-1;const O=p[0];let z=-1;if("ISO8601"===f){var t;switch((null==(t=h.intervalUnit)?void 0:t.toLowerCase())||"seconds"){case "seconds":z=Math.round((d-O)/1E3/k);break;case "minutes":z=Math.round((d-O)/6E4/k);break;case "hours":z=Math.round((d-O)/36E5/k);break;case "days":z=Math.round((d-O)/864E5/k);break;case "years":z=Math.round(((new Date(d)).getUTCFullYear()-(new Date(O)).getUTCFullYear())/k);break;case "decades":z=Math.round(((new Date(d)).getUTCFullYear()-
(new Date(O)).getUTCFullYear())/10/k)}return z}return Math.round((d-O)/k)};G._getDimensionValuesCount=function(d){const {extent:h,interval:p,unit:k,values:f}=d;let B=(null==f?void 0:f.length)||0;if(B)return B;const O=h[0];if(0===B&&"ISO8601"===k){var z;switch((null==(z=d.intervalUnit)?void 0:z.toLowerCase())||"seconds"){case "seconds":B=Math.round((h[1]-h[0])/1E3/p);break;case "minutes":B=Math.round((h[1]-h[0])/6E4/p);break;case "hours":B=Math.round((h[1]-h[0])/36E5/p);break;case "days":B=Math.round((h[1]-
h[0])/864E5/p);break;case "years":B=Math.round(((new Date(h[1])).getUTCFullYear()-(new Date(O)).getUTCFullYear())/p);break;case "decades":B=Math.round(((new Date(h[1])).getUTCFullYear()-(new Date(O)).getUTCFullYear())/10/p)}return B}return Math.round((h[1]-h[0])/p)};G._getRasterTileAlignmentInfo=function(d,h){null==this._rasterTileAlighmentInfo&&(this._rasterTileAlighmentInfo=g.getRasterDatasetAlignmentInfo(this.rasterInfo));return W.isSome(this._rasterTileAlighmentInfo.pyramidsInfo)?{startX:h,halfWorldWidth:this._rasterTileAlighmentInfo.halfWorldWidth,
hasGCSSShiftTransform:this._rasterTileAlighmentInfo.hasGCSSShiftTransform,...this._rasterTileAlighmentInfo.pyramidsInfo[d]}:null};R._createClass(w,[{key:"url",set:function(d){this._set("url",m.sanitizeUrl(d,Y.getLogger(this.declaredClass)))}}]);return w}(U.EsriPromiseMixin(Q.JSONSupport));r.__decorate([y.property()],K.prototype,"_rasterTileAlighmentInfo",void 0);r.__decorate([y.property(q.url)],K.prototype,"url",null);r.__decorate([y.property({type:String,json:{write:!0}})],K.prototype,"datasetName",
void 0);r.__decorate([y.property({type:String,json:{write:!0}})],K.prototype,"datasetFormat",void 0);r.__decorate([y.property()],K.prototype,"rasterInfo",void 0);r.__decorate([y.property()],K.prototype,"ioConfig",void 0);r.__decorate([y.property()],K.prototype,"sourceJSON",void 0);return K=r.__decorate([n.subclass("esri.layers.support.rasterDatasets.BaseRaster")],K)})},"esri/layers/support/rasterDatasets/RawBlockCache":function(){define("exports ../../../geometry ../../../core/maybe ./EphemeralBlockCache ../rasterFunctions/rasterProjectionHelper ../../../geometry/Point".split(" "),
function(R,r,K,N,C,Q){function Y(I,y){if(!W.has(I))return null;I=W.get(I);return null==I[y]?null:I[y]}const W=new Map,U=new N;R.decreaseRefCount=function(I,y,H){if(!W.has(I))return null==y?U.decreaseRefCount(I,H):0;const F=W.get(I);if(null==F[y])return U.decreaseRefCount(I,H);y=F[y].cache;if(y.has(H)){I=y.get(H);I.refCount--;if(0===I.refCount){y.delete(H);for(y=0;y<F.length;y++)F[y]&&F[y].cache.has(H)&&F[y].cache.delete(H);I.controller&&I.controller.abort()}return I.refCount}return 0};R.deleteBlock=
function(I,y,H){if(W.has(I)){var F=W.get(I);null==F[y]?U.deleteBlock(I,H):F[y].cache.delete(H)}else null==y&&U.deleteBlock(I,H)};R.deleteRaster=function(I){W.delete(I)};R.getBlock=function(I,y,H){if(!W.has(I))return null==y?U.getBlock(I,H):null;var F=W.get(I);if(null==F[y]){for(y=0;y<F.length;y++)if(F[y]&&F[y].cache.has(H))return H=F[y].cache.get(H),H.refCount++,H.block;return U.getBlock(I,H)}I=F[y].cache;if(I.has(H))return H=I.get(H),H.refCount++,H.block;for(let b=0;b<F.length;b++)if(b!==y&&F[b]&&
F[b]&&F[b].cache.has(H))return F=F[b].cache.get(H),F.refCount++,I.set(H,F),F.block;return null};R.getRasterId=function(I,y){return null==y?I:`${I}?sliceId=${y}`};R.putBlock=function(I,y,H,F,b=null){if(W.has(I)){var n=W.get(I);if(null==n[y])U.putBlock(I,H,F,b);else{var m={refCount:1,block:F,isResolved:!1,isRejected:!1,controller:b};F.then(()=>m.isResolved=!0).catch(()=>m.isRejected=!0);n[y].cache.set(H,m)}}else null==y&&U.putBlock(I,H,F,b)};R.register=function(I,y){y={extent:null,rasterInfo:y,cache:new Map};
if(W.has(I))return I=W.get(I),I.push(y),I.length-1;W.set(I,[y]);return 0};R.unregister=function(I,y){if(W.has(I)){const H=W.get(I);H[y]=null;H.some(F=>null!=F)||W.delete(I)}};R.update=function(I,y,H,F,b,n,m=null){I=Y(I,y);y=I.extent;const {cache:q,rasterInfo:v}=I;if(!y||y.xmin!==H.xmin||y.xmax!==H.xmax||y.ymin!==H.ymin||y.ymax!==H.ymax){y=H.clone().normalize();var {spatialReference:D,transform:x}=v,A=new Set;for(let w=0;w<y.length;w++){var u=y[w];if(u.xmax-u.xmin<=F||u.ymax-u.ymin<=F)continue;var g=
C.projectExtent(u,D,m);K.isSome(x)&&(g=x.inverseTransform(g));var c=new Q({x:F,y:F,spatialReference:u.spatialReference});if(null==b&&(b=C.projectResolution(c,D,u,m),!b))return;const {pyramidLevel:G,pyramidResolution:d,excessiveReading:h}=C.snapPyramid(b,v,n||"closest");if(h)return;({storageInfo:u}=v);var {origin:E}=u;c=Math.max(0,Math.floor((g.xmin-E.x)/d.x));E=Math.max(0,Math.floor((E.y-g.ymax)/d.y));const p=0<G?u.pyramidBlockWidth:u.blockWidth,k=0<G?u.pyramidBlockHeight:u.blockHeight;u=Math.max(0,
Math.floor(c/p)-1);var l=Math.max(0,Math.floor(E/k)-1);c=Math.floor((c+Math.ceil((g.xmax-g.xmin)/d.x-.1)-1)/p)+1;g=Math.floor((E+Math.ceil((g.ymax-g.ymin)/d.y-.1)-1)/k)+1;for(E=l;E<=g;E++)for(l=u;l<=c;l++)A.add(`${G}/${E}/${l}`)}q.forEach((w,G)=>{A.has(G)||(w=q.get(G),(null==w||w.isResolved||w.isRejected)&&q.delete(G))});I.extent={xmin:H.xmin,ymin:H.ymin,xmax:H.xmax,ymax:H.ymax}}};Object.defineProperty(R,"__esModule",{value:!0})})},"esri/layers/support/rasterDatasets/EphemeralBlockCache":function(){define(function(){return function(){function R(K=
15E3,N=5E3){this._timer=null;this._cachedBlocks=new Map;this._size=-1;this._duration=K;this._interval=Math.min(K,N)}var r=R.prototype;r.decreaseRefCount=function(K,N){K=K+"/"+N;N=this._cachedBlocks;if(N.has(K)){const C=N.get(K);C.refCount--;0>=C.refCount&&(N.delete(K),C.controller&&C.controller.abort());return C.refCount}return 0};r.getBlock=function(K,N){K=K+"/"+N;N=this._cachedBlocks;if(N.has(K)){const C=N.get(K);C.ts=Date.now();C.refCount++;N.delete(K);N.set(K,C);return C.block}return null};r.putBlock=
function(K,N,C,Q=null){const Y=this._cachedBlocks;K=K+"/"+N;Y.has(K)?(C=Y.get(K),C.ts=Date.now(),C.refCount++):Y.set(K,{block:C,ts:Date.now(),refCount:1,controller:Q});this.trim();this.updateTimer()};r.deleteBlock=function(K,N){const C=this._cachedBlocks;K=K+"/"+N;C.has(K)&&C.delete(K)};r.updateMaxSize=function(K){this._size=K;this.trim()};r.empty=function(){this._cachedBlocks.clear();this.clearTimer()};r.getCurrentSize=function(){return this._cachedBlocks.size};r.updateTimer=function(){if(null==
this._timer){var K=this._cachedBlocks;this._timer=setInterval(()=>{const N=Array.from(K),C=Date.now();for(let Q=0;Q<N.length;Q++)if(N[Q][1].ts<=C-this._duration)K.delete(N[Q][0]);else break;0===K.size&&this.clearTimer()},this._interval)}};r.trim=function(){const K=this._cachedBlocks;if(!(-1===this._size||this._size>=K.size)){var N=Array.from(K);for(let C=0;C<N.length-this._size;C++)K.delete(N[C][0])}};r.clearTimer=function(){null!=this._timer&&(clearInterval(this._timer),this._timer=null)};return R}()})},
"esri/layers/support/rasterFunctions/rasterProjectionHelper":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../geometry ../../../core/Error ../../../core/maybe ../../../core/unitUtils ../../../geometry/projection ../../../geometry/support/webMercatorUtils ../../../geometry/Extent ../../../geometry/Point".split(" "),function(R,r,K,N,C,Q,Y,W,U,I){function y(){y=r._asyncToGenerator(function*(){if(Y.isLoaded()||!Y.isSupported())return null;yield Y.load()});return y.apply(this,
arguments)}function H(c,E,l,w=null){if(c.spatialReference.equals(E))return c;const G=u(c.spatialReference,E);if(G&&!Y.isLoaded())throw new N("rasterprojectionhelper-projectResolution","projection engine is not loaded");l=l.center;c=new U({xmin:l.x-c.x/2,xmax:l.x+c.x/2,ymin:l.y-c.y/2,ymax:l.y+c.y/2,spatialReference:c.spatialReference});E=G?Y.project(c,E,w):W.project(c,E);return null==E?null:{x:E.xmax-E.xmin,y:E.ymax-E.ymin}}function F(c,E=.01){return Q.getMetersPerUnitForSR(c)?E/Q.getMetersPerUnitForSR(c):
0}function b(c,E,l=null,w=!0){const G=c.spatialReference;if(G.equals(E))return c;const d=u(G,E);if(d&&!Y.isLoaded())throw new N("rasterprojectionhelper-projectResolution","projection engine is not loaded");if((l=d?Y.project(c,E,l):W.project(c,E))&&w&&E.isGeographic){const [h,p]=D(G,!0);(E=F(G))&&null!=h&&null!=p&&(Math.abs(c.x-h)<E&&5E-4>Math.abs(180-l.x)?l.x-=360:Math.abs(c.x-p)<E&&5E-4>Math.abs(180+l.x)&&(l.x+=360))}return l}function n(c){const E=v(c[0].spatialReference);if(2>c.length||!C.isSome(E))return c[0];
let {xmin:l,xmax:w,ymin:G,ymax:d}=c[0];for(let h=1;h<c.length;h++){const p=c[h];w=p.xmax+E*h;G=Math.min(G,p.ymin);d=Math.max(d,p.ymax)}return new U({xmin:l,xmax:w,ymin:G,ymax:d,spatialReference:c[0].spatialReference})}function m(c,E,l=null,w=!0){if(c.spatialReference.equals(E))return c;const G=A(c),d=v(c.spatialReference,!0);if(!C.isSome(d)||0===G)return q(c,E,l,w);c=c.clone().normalize().map(h=>q(h,E,l,w));return n(c)}function q(c,E,l=null,w=!0){const G=c.spatialReference;if(G.equals(E))return c;
var d=u(G,E);if(d&&!Y.isLoaded())throw new N("rasterprojectionhelper-projectExtent","projection engine is not loaded");d=d?Y.project(c,E,l):W.project(c,E);let [h,p]=D(G,!0);d&&w&&G.isWebMercator&&E.isGeographic&&null!=h&&null!=p&&(.001>Math.abs(c.xmin-h)&&1E3<Math.abs(p-c.xmax)&&5E-4>Math.abs(180-d.xmax)&&(d.xmin=-180,w=[],w.push(new I(c.xmax,c.ymin,G)),w.push(new I(c.xmax,(c.ymin+c.ymax)/2,G)),w.push(new I(c.xmax,c.ymax,G)),w=w.map(k=>b(k,E,l)).filter(k=>!isNaN(null==k?void 0:k.x)).map(k=>k.x),d.xmax=
Math.max.apply(null,w)),.001>Math.abs(c.xmax-p)&&1E3<Math.abs(h-c.xmin)&&5E-4>Math.abs(180+d.xmin)&&(d.xmax=180,w=[],w.push(new I(c.xmin,c.ymin,G)),w.push(new I(c.xmin,(c.ymin+c.ymax)/2,G)),w.push(new I(c.xmin,c.ymax,G)),c=w.map(k=>b(k,E,l)).filter(k=>!isNaN(null==k?void 0:k.x)).map(k=>k.x),d.xmin=Math.min.apply(null,c)));[h,p]=D(E,!0);(c=F(E))&&null!=h&&null!=p&&(Math.abs(d.xmin-h)<c&&(d.xmin=h),Math.abs(d.xmax-p)<c&&(d.xmax=p));return d}function v(c,E=!1){return c.isWebMercator?2*(E?2.0037508342787E7:
2.0037508342788905E7):c.wkid&&c.isGeographic?360:2*g[c.wkid]||null}function D(c,E=!1){const l=[];c=v(c,E);C.isSome(c)&&(l.push(-c/2),l.push(c/2));return l}function x(c,E,l,w){c=(c-E)/l;0!==c-Math.floor(c)?c=Math.floor(c):w&&--c;return c}function A(c,E=!1){const l=v(c.spatialReference);if(!C.isSome(l))return 0;const w=E?0:-(l/2);E=x(c.xmax,w,l,!0);c=x(c.xmin,w,l,!1);return E-c}const u=function(c,E){const l=(c.isWGS84||c.isWebMercator)&&(E.isWGS84||E.isWebMercator);return!(c.equals(E)||l)},g={3395:2.0037508342789244E7,
3410:1.7334193943686873E7,3832:3339584.723798206,3857:2.0037508342788905E7,3975:1.7367530445161372E7,4087:2.0037508342789244E7,4088:2.0015108787169147E7,6933:1.7367530445161372E7,8858:7396237.374497803,8859:2465412.4581659334,32662:2.0037508342789244E7,53001:2.001508679602057E7,53002:1.000754339801029E7,53003:2.001508679602057E7,53004:2.001508679602057E7,53016:1.4152803599503474E7,53017:1.7333573624304302E7,53025:7276828.3848298555,53031:1.0384677558821043E7,53034:2.001508679602057E7,53036:7389443.187332862,
53037:2463147.729110953,53079:2.0015114352186374E7,53080:2.0015114352186374E7,54001:2.0037508342789244E7,54002:1.0018754171394624E7,54003:2.0037508342789244E7,54004:2.0037508342789244E7,54016:1.4168658027268292E7,54017:1.736753044516137E7,54025:7311399.09166516,54031:1.0396310810074743E7,54034:2.0037508342789244E7,54050:808820.9223376509,54053:1920897.3915568967,54079:2.0037508342789244E7,54080:2.0037508342789244E7,54099:1.3524439768288724E7,54100:2.0037508342789244E7,54101:2.0037508342789244E7,102038:4297258.582585486,
102299:5013965.117483125};R.computeProjectedScales=function(c,E,l=512,w=!0){const {extent:G,spatialReference:d,pixelSize:h}=c,p=H(new I({x:h.x,y:h.y,spatialReference:d}),E,G);if(null==p)return{projectedPixelSize:null,scales:null,srcResolutions:null,isCustomTilingScheme:!1};var k=(p.x+p.y)/2,f=Q.getMetersPerUnitForSR(E);k=k*f*96*39.37;const B=E.isGeographic?256/l*2.958287637958547E8:256/l*5.91657527591555E8;l=!1;const O=m(G,E);w&&(E.isGeographic||E.isWebMercator)&&(l=0>O.xmin*O.xmax);w=k;if(l)w=B,
c=E.isGeographic?1.341104507446289E-6:.29858214164761665,f=96*c*f*39.37,E=H(new I({x:c,y:c,spatialReference:{wkid:E.isGeographic?4326:3857}}),d,O),E.x*=w/f,E.y*=w/f;else{E={x:h.x,y:h.y};c=Math.ceil(Math.log(Math.min(c.width,c.height)/32)/Math.LN2);for(f=0;w<.5005*B&&f<c;)f++,w*=2,E.x*=2,E.y*=2;1.001>=Math.max(w,B)/Math.min(w,B)&&(w=B)}c=[w];f=[{x:E.x,y:E.y}];for(k=Math.min(70.5310735,k)/1.001;w>=k;)w/=2,E.x/=2,E.y/=2,c.push(w),f.push({x:E.x,y:E.y});return{projectedPixelSize:p,scales:c,srcResolutions:f,
isCustomTilingScheme:!l}};R.defaultGridSpacing=32;R.getDefaultDatumTransformationForDataset=function(c,E,l){if(!u(c.spatialReference,E))return null;if(!Y.isLoaded())throw new N("rasterprojectionhelper-projectResolution","projection engine is not loaded");return l?Y.getTransformation(E,c.spatialReference,c):Y.getTransformation(c.spatialReference,E,c)};R.getProjectionOffsetGrid=function(c,E,l,w=null,G=null,d=!1,h=[32,32]){if(u(c.spatialReference,E.spatialReference)&&!Y.isLoaded())throw new N("rasterprojectionhelper-projectResolution",
"projection engine is not loaded");if(!(c&&E&&l))return null;const {xmin:p,ymin:k,xmax:f,ymax:B}=c;var O=c.spatialReference,z=E.spatialReference,t=v(z);d=d||"gcs-shift"===(null==G?void 0:G.type);var J=h[0]*l.x,V=h[1]*l.y;l=Math.ceil((f-p)/J-.1)+1;c=Math.ceil((B-k)/V-.1)+1;const T=[];let ba=!1;for(var M=0;M<l;M++){var L=[];for(var S=0;S<c;S++){var X=new I({x:p+J*M,y:B-V*S,spatialReference:O});X=b(X,z,w);G&&(X=G.inverseTransform(X));L.push(X);0<M&&d&&X&&aa[S]&&C.isSome(t)&&X.x<aa[S].x&&(X.x+=t);X?(T.push((X.x-
E.xmin)/(E.xmax-E.xmin)),T.push((E.ymax-X.y)/(E.ymax-E.ymin))):(T.push(NaN),T.push(NaN),ba=!0)}var aa=L}E=[Math.abs((T[0]+T[4]+T[4*l]+T[4*l+4])/4-T[2*c+2]),Math.abs((T[1]+T[5]+T[4*c+1]+T[4*c+5])/4-T[2*c+3])];w=new Float32Array((l-1)*(c-1)*12);G=new Float32Array([-0,-1,1,-1,1,-0,1,-0,-0]);d=new Float32Array([-1,1,0,0,-1,1,1,0,0]);for(aa=0;aa<l-1;aa++){for(O=0;O<c-1;O++){L=aa*c*2+2*O;J=T[L];z=T[L+1];var fa=T[L+2],a=T[L+3];L+=2*c;V=T[L];t=T[L+1];M=T[L+2];L=T[L+3];S=0;X=12*(O*(l-1)+aa);for(let e=0;3>
e;e++)w[X++]=G[S++]*J+G[S++]*fa+G[S++]*M;S=0;for(fa=0;3>fa;fa++)w[X++]=G[S++]*z+G[S++]*a+G[S++]*L;S=0;for(a=0;3>a;a++)w[X++]=d[S++]*J+d[S++]*V+d[S++]*M;S=0;for(J=0;3>J;J++)w[X++]=d[S++]*z+d[S++]*t+d[S++]*L}if(ba)for(O=0;O<w.length;O++)isNaN(w[O])&&(w[O]=-1)}return{offsets:T,error:E,coefficients:w,spacing:h,size:[l-1,c-1]}};R.getRasterDatasetAlignmentInfo=function(c){const E=c.storageInfo.origin.x,l=v(c.spatialReference,!0);if(!C.isSome(l))return{originX:E,halfWorldWidth:null,pyramidsInfo:null};const w=
l/2,{nativePixelSize:G,storageInfo:d,extent:h}=c,{maximumPyramidLevel:p,blockWidth:k,pyramidScalingFactor:f}=d;let B=G.x;const O=[];c=C.isSome(c.transform)&&"gcs-shift"===c.transform.type;const z=E+w,t=c?l-E:w-E;for(let J=0;J<=p;J++){const V=(h.xmax-E)/B/k,T=(l/2-E)/B/k;O.push({resolutionX:B,blockWidth:k,datsetColumnCount:0===V-Math.floor(V)?V:Math.ceil(V),worldColumnCountFromOrigin:0===T-Math.floor(T)?T:Math.ceil(T),leftMargin:Math.round(z/B)%k,rightPadding:(k-Math.round(t/B)%k)%k,originColumnOffset:Math.floor(z/
B/k)});B*=f}return{originX:E,halfWorldWidth:w,pyramidsInfo:O,hasGCSSShiftTransform:c}};R.getWorldWrapCount=A;R.load=function(){return y.apply(this,arguments)};R.projectExtent=m;R.projectPoint=b;R.projectResolution=H;R.snapExtent=function(c){c=c.clone().normalize();return 1===c.length?c[0]:n(c)};R.snapPyramid=function(c,E,l){const {storageInfo:w,pixelSize:G}=E;let d=!1;var {pyramidResolutions:h}=w;if(C.isSome(h)&&h.length){c=(c.x+c.y)/2;var p=h[h.length-1];p=(p.x+p.y)/2;var k=(G.x+G.y)/2;if(c<=k)var f=
0;else if(c>=p)f=h.length,d=8<c/p;else{p=k;for(let B=1;B<=h.length;B++){k=(h[B-1].x+h[B-1].y)/2;if(c<=k){c===k?f=B:"down"===l?(f=B-1,d=8<c/p):f="up"===l?B:c-p>k-c||2<c/p?B:B-1;break}p=k}}l=0===f?G:h[f-1];return{pyramidLevel:f,pyramidResolution:new I({x:l.x,y:l.y,spatialReference:E.spatialReference}),excessiveReading:d}}f=Math.log(c.x/G.x)/Math.LN2;c=Math.log(c.y/G.y)/Math.LN2;h=E.storageInfo.maximumPyramidLevel||0;f="down"===l?Math.floor(Math.min(f,c)):"up"===l?Math.ceil(Math.max(f,c)):Math.round((f+
c)/2);0>f?f=0:f>h&&(d=f>h+3,f=h);l=2**f;E=new I({x:l*E.nativePixelSize.x,y:l*E.nativePixelSize.y,spatialReference:E.spatialReference});return{pyramidLevel:f,pyramidResolution:E,excessiveReading:d}};Object.defineProperty(R,"__esModule",{value:!0})})},"esri/geometry/projection":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../core/Error ../core/mathUtils ../core/maybe ../core/promiseUtils ../core/unitUtils ../chunks/mat4 ../chunks/vec3 ../chunks/vec3f64 ./Extent ./Multipoint ../chunks/pe ./Point ./Polygon ./Polyline ./projectionEllipsoid ./support/aaBoundingRect ./support/Ellipsoid ./support/geodesicConstants ./support/GeographicTransformation ./support/spatialReferenceUtils".split(" "),
function(R,r,K,N,C,Q,Y,W,U,I,y,H,F,b,n,m,q,v,D,x,A,u,g){function c(){return!!ya&&b.isLoaded()}function E(ca){Q.isNone(Ca)&&(Ca=Promise.all([b.load(),(new Promise(function(ha,ea){R(["../chunks/geometryEngineBase"],ha,ea)})).then(function(ha){return ha.geometryEngineBase}),new Promise(function(ha,ea){R(["./geometryAdapters/hydrated"],ha,ea)})]));return Ca.then(([,ha,{hydratedAdapter:ea}])=>{Y.throwIfAborted(ca);Ba=ea;ya=ha.default;ya._enableProjection(b.pe)})}function l(ca,ha,ea,oa,ra=null){if(Q.isNone(ea)||
Q.isNone(oa))return ha;if(G(ea,oa,ra))return ha.map(ua=>h(ua,ea,oa));if(Q.isNone(ra)){const ua=u.cacheKey(ea,oa);void 0!==Aa[ua]?ra=Aa[ua]:(ra=w(ea,oa,null),Q.isNone(ra)&&(ra=new u),Aa[ua]=ra)}if(Q.isNone(ya))throw new Ha;return ya._project(ca,ha,ea,oa,ra)}function w(ca,ha,ea=null){if(Q.isNone(ya))throw new Ha;if(Q.isNone(ca)||Q.isNone(ha))return null;ca=ya._getTransformation(Ba,ca,ha,ea,null==ea?void 0:ea.spatialReference);return null!==ca?u.fromGE(ca):null}function G(ca,ha,ea){return ea?!1:g.equals(ca,
ha)?!0:g.isValid(ca)&&g.isValid(ha)&&!!wa(ca,ha,Oa)}function d(){d=K._asyncToGenerator(function*(ca,ha,ea,oa){if(!c())if(Array.isArray(ca))for(const {source:ra,dest:ua,geographicTransformation:za}of ca){if(!G(ra,ua,za))return E(oa)}else if(!G(ca,ha,ea))return E(oa)});return d.apply(this,arguments)}function h(ca,ha,ea){if(!ca)return ca;if("x"in ca){var oa=new n;return p(ca,ha,oa,ea)?oa:null}return"xmin"in ca?(oa=new H,O(ca,ha,oa,ea)?oa:null):"rings"in ca?(oa=new m,B(ca,ha,oa,ea)?oa:null):"paths"in
ca?(oa=new q,f(ca,ha,oa,ea)?oa:null):"points"in ca?(oa=new F,k(ca,ha,oa,ea)?oa:null):null}function p(ca,ha,ea,oa,ra=0){Ea[0]=ca.x;Ea[1]=ca.y;const ua=ca.z;Ea[2]=void 0!==ua?ua:ra;if(!V(Ea,ha,0,Ea,oa,0,1))return!1;ea.x=Ea[0];ea.y=Ea[1];ea.spatialReference=oa;void 0===ua?(ea.z=void 0,ea.hasZ=!1):(ea.z=Ea[2],ea.hasZ=!0);void 0===ca.m?(ea.m=void 0,ea.hasM=!1):(ea.m=ca.m,ea.hasM=!0);return!0}function k(ca,ha,ea,oa,ra=0){const {points:ua,hasZ:za,hasM:Da}=ca;ca=[];const La=ua.length,Ja=[];for(var Ia of ua)Ja.push(Ia[0],
Ia[1],za?Ia[2]:ra);if(!V(Ja,ha,0,Ja,oa,0,La))return!1;for(ha=0;ha<La;++ha){ra=3*ha;Ia=Ja[ra];const Pa=Ja[ra+1];za&&Da?ca.push([Ia,Pa,Ja[ra+2],ua[ha][3]]):za?ca.push([Ia,Pa,Ja[ra+2]]):Da?ca.push([Ia,Pa,ua[ha][2]]):ca.push([Ia,Pa])}ea.points=ca;ea.spatialReference=oa;ea.hasZ=za;ea.hasM=Da;return!0}function f(ca,ha,ea,oa,ra=0){const {paths:ua,hasZ:za,hasM:Da}=ca;ca=[];if(!T(ua,za,Da,ha,ca,oa,ra))return!1;ea.paths=ca;ea.spatialReference=oa;ea.hasZ=za;ea.hasM=Da;return!0}function B(ca,ha,ea,oa,ra=0){const {rings:ua,
hasZ:za,hasM:Da}=ca;ca=[];if(!T(ua,za,Da,ha,ca,oa,ra))return!1;ea.rings=ca;ea.spatialReference=oa;ea.hasZ=za;ea.hasM=Da;return!0}function O(ca,ha,ea,oa,ra=0){const {xmin:ua,ymin:za,xmax:Da,ymax:La,hasZ:Ja,hasM:Ia}=ca;if(!z(ua,za,Ja?ca.zmin:ra,ha,Ea,oa))return!1;ea.xmin=Ea[0];ea.ymin=Ea[1];Ja&&(ea.zmin=Ea[2]);if(!z(Da,La,Ja?ca.zmax:ra,ha,Ea,oa))return!1;ea.xmax=Ea[0];ea.ymax=Ea[1];Ja&&(ea.zmax=Ea[2]);Ia&&(ea.mmin=ca.mmin,ea.mmax=ca.mmax);ea.spatialReference=oa;return!0}function z(ca,ha,ea,oa,ra,ua){Fa[0]=
ca;Fa[1]=ha;Fa[2]=ea;return V(Fa,oa,0,ra,ua,0,1)}function t(ca,ha,ea,oa){if(Q.isNone(ha)||Q.isNone(oa)||2>ca.length)return!1;2===ca.length&&(Fa[0]=ca[0],Fa[1]=ca[1],Fa[2]=0,ca=Fa);return V(ca,ha,0,ea,oa,0,1)}function J(ca,ha,ea){if(Q.isNone(ha))return!1;ha=M(ha,Na);ha=Ma[ha][6];if(Q.isNone(ha))return!1;ha(ca,0,Fa,0);ea!==Fa&&(ea[0]=Fa[0],ea[1]=Fa[1],2<ea.length&&(ea[2]=Fa[2]));return!0}function V(ca,ha,ea,oa,ra,ua,za=1){ha=wa(ha,ra,Oa);if(Q.isNone(ha))return!1;if(ha===L){if(ca===oa&&ea===ua)return!0;
za=ea+3*za;for(let Da=ea,La=ua;Da<za;Da++,La++)oa[La]=ca[Da];return!0}za=ea+3*za;for(let Da=ea,La=ua;Da<za;Da+=3,La+=3)ha(ca,Da,oa,La);return!0}function T(ca,ha,ea,oa,ra,ua,za=0){const Da=[];for(const La of ca)for(const Ja of La)Da.push(Ja[0],Ja[1],ha?Ja[2]:za);if(!V(Da,oa,0,Da,ua,0,Da.length/3))return!1;oa=0;ra.length=0;for(const La of ca){ca=[];for(const Ja of La)ha&&ea?ca.push([Da[oa++],Da[oa++],Da[oa++],Ja[3]]):ha?ca.push([Da[oa++],Da[oa++],Da[oa++]]):(ea?ca.push([Da[oa++],Da[oa++],Ja[2]]):ca.push([Da[oa++],
Da[oa++]]),oa++);ra.push(ca)}return!0}function ba(ca,ha,ea){const oa=Math.sin(ha);ha=Math.cos(ha);const ra=Math.sin(ca);ca=Math.cos(ca);ea[0]=-oa;ea[4]=-ra*ha;ea[8]=ca*ha;ea[12]=0;ea[1]=ha;ea[5]=-ra*oa;ea[9]=ca*oa;ea[13]=0;ea[2]=0;ea[6]=ca;ea[10]=ra;ea[14]=0;ea[3]=0;ea[7]=0;ea[11]=0;ea[15]=1;return ea}function M(ca,ha){if(ha.spatialReference===ca)return ha.spatialReferenceId;ha.spatialReference=ca;"metersPerUnit"in ha&&(ha.metersPerUnit=W.getMetersPerUnitForSR(ca,1));return ca.wkt===v.SphericalECEFSpatialReference.wkt?
ha.spatialReferenceId=1:g.isWGS84(ca)?ha.spatialReferenceId=2:g.isWebMercator(ca)?ha.spatialReferenceId=3:ca.wkt===v.WGS84ECEFSpatialReference.wkt?ha.spatialReferenceId=4:4490===ca.wkid?ha.spatialReferenceId=5:ca.wkt===v.SphericalPCPFMars.wkt?ha.spatialReferenceId=7:ca.wkt===v.SphericalPCPFMoon.wkt?ha.spatialReferenceId=9:g.isMars(ca)?ha.spatialReferenceId=8:g.isMoon(ca)?ha.spatialReferenceId=10:ha.spatialReferenceId=0}function L(ca,ha,ea,oa){ca!==ea&&(ea[oa++]=ca[ha++],ea[oa++]=ca[ha++],ea[oa]=ca[ha])}
function S(ca,ha,ea,oa){ea[oa++]=Ga*(ca[ha++]/x.earth.radius);ea[oa++]=Ga*(Math.PI/2-2*Math.atan(Math.exp(-1*ca[ha++]/x.earth.radius)));ea[oa]=ca[ha]}function X(ca,ha,ea,oa){S(ca,ha,ea,oa);da(ea,oa,ea,oa)}function aa(ca,ha,ea,oa){S(ca,ha,ea,oa);pa(ea,oa,ea,oa)}function fa(ca,ha,ea,oa,ra){var ua=.4999999*Math.PI;ua=C.clamp(Ka*ca[ha+1],-ua,ua);ua=Math.sin(ua);ea[oa++]=Ka*ca[ha]*ra.radius;ea[oa++]=ra.halfSemiMajorAxis*Math.log((1+ua)/(1-ua));ea[oa]=ca[ha+2]}function a(ca,ha,ea,oa){fa(ca,ha,ea,oa,x.earth)}
function e(ca,ha,ea,oa,ra){ra+=ca[ha+2];const ua=Ka*ca[ha+1];ca=Ka*ca[ha];ha=Math.cos(ua);ea[oa++]=Math.cos(ca)*ha*ra;ea[oa++]=Math.sin(ca)*ha*ra;ea[oa]=Math.sin(ua)*ra}function P(ca,ha,ea,oa){e(ca,ha,ea,oa,x.moon.radius)}function Z(ca,ha,ea,oa){e(ca,ha,ea,oa,x.mars.radius)}function da(ca,ha,ea,oa){e(ca,ha,ea,oa,x.earth.radius)}function ka(ca,ha,ea,oa,ra){var ua=ca[ha];const za=ca[ha+1];ha=ca[ha+2];ca=Math.sqrt(ua*ua+za*za+ha*ha);ha=C.asinClamped(ha/(0===ca?1:ca));ua=Math.atan2(za,ua);ea[oa++]=Ga*
ua;ea[oa++]=Ga*ha;ea[oa]=ca-ra}function la(ca,ha,ea,oa){ka(ca,ha,ea,oa,x.moon.radius)}function ia(ca,ha,ea,oa){ka(ca,ha,ea,oa,x.mars.radius)}function ja(ca,ha,ea,oa){ka(ca,ha,ea,oa,x.earth.radius)}function na(ca,ha,ea,oa){ja(ca,ha,ea,oa);a(ea,oa,ea,oa)}function ma(ca,ha,ea,oa){ja(ca,ha,ea,oa);pa(ea,oa,ea,oa)}function pa(ca,ha,ea,oa){{var ra=x.earth;const za=Ka*ca[ha];var ua=Ka*ca[ha+1];ca=ca[ha+2];ha=Math.sin(ua);ua=Math.cos(ua);const Da=ra.radius/Math.sqrt(1-ra.eccentricitySquared*ha*ha);ea[oa++]=
(Da+ca)*ua*Math.cos(za);ea[oa++]=(Da+ca)*ua*Math.sin(za);ea[oa++]=(Da*(1-ra.eccentricitySquared)+ca)*ha}}function qa(ca,ha,ea,oa){var ra=A.earthEllipsoidConstants,ua=ca[ha],za=ca[ha+1];ca=ca[ha+2];let Da;ha=Math.abs(ca);var La=ua*ua+za*za;var Ja=Math.sqrt(La);var Ia=La+ca*ca;var Pa=Math.sqrt(Ia);ua=Math.atan2(za,ua);var Ta=ca*ca/Ia;Ia=La/Ia;za=ra.a2/Pa;La=ra.a3-ra.a4/Pa;.3<Ia?(Ta=ha/Pa*(1+Ia*(ra.a1+za+Ta*La)/Pa),Pa=Math.asin(Ta),za=Ta*Ta,Ia=Math.sqrt(1-za)):(Ia=Ja/Pa*(1-Ta*(ra.a5-za-Ia*La)/Pa),Pa=
Math.acos(Ia),za=1-Ia*Ia,Ta=Math.sqrt(za));Da=1-x.earth.eccentricitySquared*za;za=x.earth.radius/Math.sqrt(Da);ra=ra.a6*za;za=Ja-za*Ia;La=ha-ra*Ta;ha=Ia*za+Ta*La;Ja=Ia*La-Ta*za;ra=Ja/(ra/Da+ha);Pa+=ra;0>ca&&(Pa=-Pa);ea[oa++]=Ga*ua;ea[oa++]=Ga*Pa;ea[oa]=ha+Ja*ra/2}function ta(ca,ha,ea,oa){qa(ca,ha,ea,oa);da(ea,oa,ea,oa)}function xa(ca,ha,ea,oa){qa(ca,ha,ea,oa);a(ea,oa,ea,oa)}function wa(ca,ha,ea=va()){return Q.isNone(ca)||Q.isNone(ha)?null:sa(ca,ha,ea).projector}function sa(ca,ha,ea){if(Q.isNone(ca)||
Q.isNone(ha)||ea.source.spatialReference===ca&&ea.dest.spatialReference===ha)return ea;const oa=M(ca,ea.source),ra=M(ha,ea.dest);0===oa&&0===ra?g.equals(ca,ha)?ea.projector=L:ea.projector=null:ea.projector=Ma[oa][ra];return ea}function va(){return{source:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},projector:L}}let ya=null,Ba=null,Ca=null,Aa={},Ha=function(ca){function ha(){return ca.call(this,"projection:not-loaded",
"projection engine not fully loaded yet, please call load()")||this}K._inheritsLoose(ha,ca);return ha}(N);const Ma={[2]:{[5]:null,[8]:null,[10]:null,[11]:L,[6]:L,[1]:da,[7]:null,[9]:null,[0]:null,[3]:a,[2]:L,[4]:pa},[5]:{[5]:L,[8]:null,[10]:null,[11]:L,[6]:L,[1]:da,[7]:null,[9]:null,[0]:null,[3]:null,[2]:null,[4]:pa},[8]:{[5]:null,[8]:L,[10]:null,[11]:L,[6]:null,[1]:null,[7]:Z,[9]:null,[0]:null,[3]:null,[2]:null,[4]:null},[10]:{[5]:null,[8]:null,[10]:L,[11]:L,[6]:null,[1]:null,[7]:null,[9]:P,[0]:null,
[3]:null,[2]:null,[4]:null},[3]:{[5]:null,[8]:null,[10]:null,[11]:S,[6]:S,[1]:X,[7]:null,[9]:null,[0]:null,[3]:L,[2]:S,[4]:aa},[4]:{[5]:qa,[8]:null,[10]:null,[11]:qa,[6]:qa,[1]:ta,[7]:null,[9]:null,[0]:null,[3]:xa,[2]:qa,[4]:L},[1]:{[5]:ja,[8]:null,[10]:null,[11]:ja,[6]:ja,[1]:L,[7]:null,[9]:null,[0]:null,[3]:na,[2]:ja,[4]:ma},[7]:{[5]:null,[8]:ia,[10]:null,[11]:ia,[6]:null,[1]:null,[7]:L,[9]:null,[0]:null,[3]:null,[2]:null,[4]:null},[9]:{[5]:null,[8]:null,[10]:la,[11]:la,[6]:null,[1]:null,[7]:null,
[9]:L,[0]:null,[3]:null,[2]:null,[4]:null},[0]:{[5]:null,[8]:null,[10]:null,[11]:null,[6]:null,[1]:null,[7]:null,[9]:null,[0]:L,[3]:null,[2]:null,[4]:null},[11]:{[5]:L,[8]:L,[10]:L,[11]:L,[6]:L,[1]:da,[7]:Z,[9]:P,[0]:null,[3]:a,[2]:L,[4]:pa},[6]:{[5]:null,[8]:null,[10]:null,[11]:L,[6]:L,[1]:da,[7]:null,[9]:null,[0]:null,[3]:null,[2]:L,[4]:pa}},Na={spatialReference:null,spatialReferenceId:0},Qa={spatialReference:null,spatialReferenceId:0},Oa=va(),Ra=va(),Ka=C.deg2rad(1),Ga=C.rad2deg(1),Fa=y.create(),
Sa=y.create(),Ua=y.create(),Ea=y.create(),Va=y.create();r.canProjectToWGS84ComparableLonLat=function(ca){if(Q.isNone(ca))return!1;ca=M(ca,Na);return!!Ma[ca][6]};r.canProjectWithoutEngine=G;r.computeLatLonToENURotation=ba;r.computeLinearTransformation=function(ca,ha,ea,oa){if(Q.isNone(ca)||Q.isNone(oa))return!1;var ra=M(ca,Na),ua=M(oa,Qa);if(ra===ua&&1!==ua&&7!==ua&&9!==ua&&(0!==ra||g.equals(ca,oa)))return U.identity(ea),U.translate(ea,ea,ha),!0;if(1===ua||7===ua||9===ua){oa=ca=0;ra=Ma[ra][11];ua=
Ma[11][ua];if(Q.isNone(ra)||Q.isNone(ua))return!1;ra(ha,0,Sa,0);ua(Sa,0,Ua,0);ca=Ka*Sa[0];oa=Ka*Sa[1];ba(oa,ca,ea);ea[12]=Ua[0];ea[13]=Ua[1];ea[14]=Ua[2];return!0}if(3===ua&&(2===ra||1===ra)){ua=Ma[ra][11];if(Q.isNone(ua))return!1;ua(ha,0,Sa,0);ha=Ka*Sa[1];a(Sa,0,Ua,0);U.identity(ea);U.translate(ea,ea,Ua);ha=1/Math.cos(ha);U.scale(ea,ea,[ha,ha,1]);return!0}return!1};r.getProjectorName=function(ca,ha){switch(wa(ca,ha,Oa)){case L:return"copy3";case da:return"wgs84ToSphericalECEF";case a:return"wgs84ToWebMercator";
case pa:return"wgs84ToWGS84ECEF";case S:return"webMercatorToWGS84";case X:return"webMercatorToSphericalECEF";case aa:return"webMercatorToWGS84ECEF";case qa:return"wgs84ECEFToWGS84";case ta:return"wgs84ECEFToSphericalECEF";case xa:return"wgs84ECEFToWebMercator";case ja:return"sphericalECEFToWGS84";case na:return"sphericalECEFToWebMercator";case ia:return"sphericalMarsPCPFToMars2000";case la:return"sphericalMoonPCPFToMoon2000";case ma:return"sphericalECEFToWGS84ECEF";case Z:return"mars2000ToSphericalPCPF";
case P:return"moon2000ToSphericalPCPF";default:return null}};r.getTransformation=w;r.getTransformations=function(ca,ha,ea=null){if(Q.isNone(ya))throw new Ha;ca=ya._getTransformationBySuitability(Ba,ca,ha,ea,null==ea?void 0:ea.spatialReference);if(null!==ca){ha=[];for(const oa of ca)ha.push(u.fromGE(oa));return ha}return[]};r.initializeProjection=function(ca,ha,ea,oa){return d.apply(this,arguments)};r.isLoaded=c;r.isSupported=function(){return!0};r.load=E;r.localLinearScaleFactors=function(ca,ha,ea,
oa){if(Q.isNone(ha)||Q.isNone(oa))return!1;const ra=M(ha,Na);var ua=M(oa,Qa);if(ra===ua&&0!==ra||g.equals(ha,oa))return ea[0]=1,ea[1]=1,ea[2]=1,!0;if(1===ra){ha=I.length(ca);ca=ha/Math.sqrt(ca[0]*ca[0]+ca[1]*ca[1]);ha/=x.earth.radius;if(3===ua)return ea[0]=ca*ha,ea[1]=ca*ha,ea[2]=1,!0;if(2===ua||5===ua)return ua=180/(x.earth.radius*Math.PI),ea[0]=ua*ca*ha,ea[1]=ua*ha,ea[2]=1,!0}return!1};r.lonLatToSphericalPCPF=function(ca,ha,ea,oa,ra=0){oa+=ra;ra=Math.cos(ea);ca[0]=Math.cos(ha)*ra*oa;ca[1]=Math.sin(ha)*
ra*oa;ca[2]=Math.sin(ea)*oa};r.lonLatToWebMercatorComparable=fa;r.project=function(ca,ha,ea=null){return Array.isArray(ca)?0===ca.length?[]:l(Ba,ca,ca[0].spatialReference,ha,ea):l(Ba,[ca],ca.spatialReference,ha,ea)[0]};r.projectBoundingRect=function(ca,ha,ea,oa){if(null==ca)return!1;if(g.equals(ha,oa))return D.set(ea,ca),!0;Fa[0]=ca[0];Fa[1]=ca[1];Fa[2]=0;if(!V(Fa,ha,0,Fa,oa,0,1))return!1;ea[0]=Fa[0];ea[1]=Fa[1];Fa[0]=ca[2];Fa[1]=ca[3];Fa[2]=0;if(!V(Fa,ha,0,Fa,oa,0,1))return!1;ea[2]=Fa[0];ea[3]=Fa[1];
return!0};r.projectBoundingSphere=function(ca,ha,ea,oa){if(Q.isNone(ha)||Q.isNone(oa))return!1;ha=sa(ha,oa,Ra);if(ha.projector===L)return ea[0]=ca[0],ea[1]=ca[1],ea[2]=ca[2],ea[3]=ca[3],!0;if(Q.isNone(ha.projector))return!1;const {source:ra,dest:ua}=ha;if(3===ua.spatialReferenceId){ha=Ma[ra.spatialReferenceId][2];if(Q.isNone(ha))return!1;ha(ca,0,Sa,0);ha=Math.abs(Ka*Sa[1])+Math.asin(ca[3]/(x.earth.radius+ca[2]));a(Sa,0,ea,0);ea[3]=ha>.9999*Math.PI?Number.MAX_VALUE:1/Math.cos(ha)*ca[3];return!0}ha.projector(ca,
0,ea,0);ea[3]=ca[3]*ra.metersPerUnit/ua.metersPerUnit;return!0};r.projectBuffer=V;r.projectDirection=function(ca,ha,ea,oa,ra){I.copy(Ea,ca);I.add(Va,ca,ha);t(Ea,ea,Ea,ra);t(Va,ea,Va,ra);I.subtract(oa,Va,Ea);I.normalize(oa,oa)};r.projectExtent=function(ca,ha,ea=ha.spatialReference,oa=0){return Q.isNone(ea)?!1:O(ca,ca.spatialReference,ha,ea,oa)};r.projectMany=l;r.projectMultipoint=function(ca,ha,ea=ha.spatialReference,oa=0){return Q.isNone(ea)?!1:k(ca,ca.spatialReference,ha,ea,oa)};r.projectPoint=function(ca,
ha,ea=ha.spatialReference,oa=0){return Q.isNone(ea)?!1:p(ca,ca.spatialReference,ha,ea,oa)};r.projectPointToVector=function(ca,ha,ea,oa=0){Ea[0]=ca.x;Ea[1]=ca.y;const ra=ca.z;Ea[2]=void 0!==ra?ra:oa;return V(Ea,ca.spatialReference,0,ha,ea,0,1)};r.projectPointToWGS84ComparableLonLat=function(ca,ha){Ea[0]=ca.x;Ea[1]=ca.y;const ea=ca.z;Ea[2]=void 0!==ea?ea:0;return J(Ea,ca.spatialReference,ha)};r.projectPolygon=function(ca,ha,ea=ha.spatialReference,oa=0){return Q.isNone(ea)?!1:B(ca,ca.spatialReference,
ha,ea,oa)};r.projectPolyline=function(ca,ha,ea=ha.spatialReference,oa=0){return Q.isNone(ea)?!1:f(ca,ca.spatialReference,ha,ea,oa)};r.projectVectorToDehydratedPoint=function(ca,ha,ea){return V(ca,ha,0,Ea,ea.spatialReference,0,1)?(ea.x=Ea[0],ea.y=Ea[1],ea.z=Ea[2],ea):null};r.projectVectorToPoint=function(ca,ha,ea){if(Q.isNone(ha)||Q.isNone(ea))return null;const oa=new n({spatialReference:ea});return V(ca,ha,0,Ea,ea,0,1)?(oa.x=Ea[0],oa.y=Ea[1],oa.z=Ea[2],oa):null};r.projectVectorToVector=t;r.projectVectorToWGS84ComparableLonLat=
function(ca,ha,ea){return J(ca,ha,ea)};r.projectXYZToVector=z;r.sphericalPCPFtoLonLatElevation=ka;r.unload=function(){Ca=Ba=ya=null;Aa={}};Object.defineProperty(r,"__esModule",{value:!0})})},"esri/chunks/mat4":function(){define(["exports","./vec3f64","./common"],function(R,r,K){function N(a,e){a[0]=e[0];a[1]=e[1];a[2]=e[2];a[3]=e[3];a[4]=e[4];a[5]=e[5];a[6]=e[6];a[7]=e[7];a[8]=e[8];a[9]=e[9];a[10]=e[10];a[11]=e[11];a[12]=e[12];a[13]=e[13];a[14]=e[14];a[15]=e[15];return a}function C(a,e,P,Z,da,ka,
la,ia,ja,na,ma,pa,qa,ta,xa,wa,sa){a[0]=e;a[1]=P;a[2]=Z;a[3]=da;a[4]=ka;a[5]=la;a[6]=ia;a[7]=ja;a[8]=na;a[9]=ma;a[10]=pa;a[11]=qa;a[12]=ta;a[13]=xa;a[14]=wa;a[15]=sa;return a}function Q(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function Y(a,e){if(a===e){const P=e[1],Z=e[2],da=e[3],ka=e[6],la=e[7],ia=e[11];a[1]=e[4];a[2]=e[8];a[3]=e[12];a[4]=P;a[6]=e[9];a[7]=e[13];a[8]=Z;a[9]=ka;a[11]=e[14];a[12]=da;a[13]=la;a[14]=
ia}else a[0]=e[0],a[1]=e[4],a[2]=e[8],a[3]=e[12],a[4]=e[1],a[5]=e[5],a[6]=e[9],a[7]=e[13],a[8]=e[2],a[9]=e[6],a[10]=e[10],a[11]=e[14],a[12]=e[3],a[13]=e[7],a[14]=e[11],a[15]=e[15];return a}function W(a,e){const P=e[0],Z=e[1],da=e[2],ka=e[3],la=e[4],ia=e[5],ja=e[6],na=e[7],ma=e[8],pa=e[9],qa=e[10],ta=e[11],xa=e[12],wa=e[13],sa=e[14];e=e[15];const va=P*ia-Z*la,ya=P*ja-da*la,Ba=P*na-ka*la,Ca=Z*ja-da*ia,Aa=Z*na-ka*ia,Ha=da*na-ka*ja,Ma=ma*wa-pa*xa,Na=ma*sa-qa*xa,Qa=ma*e-ta*xa,Oa=pa*sa-qa*wa,Ra=pa*e-ta*
wa,Ka=qa*e-ta*sa;let Ga=va*Ka-ya*Ra+Ba*Oa+Ca*Qa-Aa*Na+Ha*Ma;if(!Ga)return null;Ga=1/Ga;a[0]=(ia*Ka-ja*Ra+na*Oa)*Ga;a[1]=(da*Ra-Z*Ka-ka*Oa)*Ga;a[2]=(wa*Ha-sa*Aa+e*Ca)*Ga;a[3]=(qa*Aa-pa*Ha-ta*Ca)*Ga;a[4]=(ja*Qa-la*Ka-na*Na)*Ga;a[5]=(P*Ka-da*Qa+ka*Na)*Ga;a[6]=(sa*Ba-xa*Ha-e*ya)*Ga;a[7]=(ma*Ha-qa*Ba+ta*ya)*Ga;a[8]=(la*Ra-ia*Qa+na*Ma)*Ga;a[9]=(Z*Qa-P*Ra-ka*Ma)*Ga;a[10]=(xa*Aa-wa*Ba+e*va)*Ga;a[11]=(pa*Ba-ma*Aa-ta*va)*Ga;a[12]=(ia*Na-la*Oa-ja*Ma)*Ga;a[13]=(P*Oa-Z*Na+da*Ma)*Ga;a[14]=(wa*ya-xa*Ca-sa*va)*Ga;
a[15]=(ma*Ca-pa*ya+qa*va)*Ga;return a}function U(a,e){const P=e[0],Z=e[1],da=e[2],ka=e[3],la=e[4],ia=e[5],ja=e[6],na=e[7],ma=e[8],pa=e[9],qa=e[10],ta=e[11],xa=e[12],wa=e[13],sa=e[14];e=e[15];a[0]=ia*(qa*e-ta*sa)-pa*(ja*e-na*sa)+wa*(ja*ta-na*qa);a[1]=-(Z*(qa*e-ta*sa)-pa*(da*e-ka*sa)+wa*(da*ta-ka*qa));a[2]=Z*(ja*e-na*sa)-ia*(da*e-ka*sa)+wa*(da*na-ka*ja);a[3]=-(Z*(ja*ta-na*qa)-ia*(da*ta-ka*qa)+pa*(da*na-ka*ja));a[4]=-(la*(qa*e-ta*sa)-ma*(ja*e-na*sa)+xa*(ja*ta-na*qa));a[5]=P*(qa*e-ta*sa)-ma*(da*e-ka*
sa)+xa*(da*ta-ka*qa);a[6]=-(P*(ja*e-na*sa)-la*(da*e-ka*sa)+xa*(da*na-ka*ja));a[7]=P*(ja*ta-na*qa)-la*(da*ta-ka*qa)+ma*(da*na-ka*ja);a[8]=la*(pa*e-ta*wa)-ma*(ia*e-na*wa)+xa*(ia*ta-na*pa);a[9]=-(P*(pa*e-ta*wa)-ma*(Z*e-ka*wa)+xa*(Z*ta-ka*pa));a[10]=P*(ia*e-na*wa)-la*(Z*e-ka*wa)+xa*(Z*na-ka*ia);a[11]=-(P*(ia*ta-na*pa)-la*(Z*ta-ka*pa)+ma*(Z*na-ka*ia));a[12]=-(la*(pa*sa-qa*wa)-ma*(ia*sa-ja*wa)+xa*(ia*qa-ja*pa));a[13]=P*(pa*sa-qa*wa)-ma*(Z*sa-da*wa)+xa*(Z*qa-da*pa);a[14]=-(P*(ia*sa-ja*wa)-la*(Z*sa-da*wa)+
xa*(Z*ja-da*ia));a[15]=P*(ia*qa-ja*pa)-la*(Z*qa-da*pa)+ma*(Z*ja-da*ia);return a}function I(a){const e=a[0],P=a[1],Z=a[2],da=a[3],ka=a[4],la=a[5],ia=a[6],ja=a[7],na=a[8],ma=a[9],pa=a[10],qa=a[11],ta=a[12],xa=a[13],wa=a[14];a=a[15];return(e*la-P*ka)*(pa*a-qa*wa)-(e*ia-Z*ka)*(ma*a-qa*xa)+(e*ja-da*ka)*(ma*wa-pa*xa)+(P*ia-Z*la)*(na*a-qa*ta)-(P*ja-da*la)*(na*wa-pa*ta)+(Z*ja-da*ia)*(na*xa-ma*ta)}function y(a,e,P){const Z=e[0],da=e[1],ka=e[2],la=e[3],ia=e[4],ja=e[5],na=e[6],ma=e[7],pa=e[8],qa=e[9],ta=e[10],
xa=e[11],wa=e[12],sa=e[13],va=e[14];e=e[15];let ya=P[0],Ba=P[1],Ca=P[2],Aa=P[3];a[0]=ya*Z+Ba*ia+Ca*pa+Aa*wa;a[1]=ya*da+Ba*ja+Ca*qa+Aa*sa;a[2]=ya*ka+Ba*na+Ca*ta+Aa*va;a[3]=ya*la+Ba*ma+Ca*xa+Aa*e;ya=P[4];Ba=P[5];Ca=P[6];Aa=P[7];a[4]=ya*Z+Ba*ia+Ca*pa+Aa*wa;a[5]=ya*da+Ba*ja+Ca*qa+Aa*sa;a[6]=ya*ka+Ba*na+Ca*ta+Aa*va;a[7]=ya*la+Ba*ma+Ca*xa+Aa*e;ya=P[8];Ba=P[9];Ca=P[10];Aa=P[11];a[8]=ya*Z+Ba*ia+Ca*pa+Aa*wa;a[9]=ya*da+Ba*ja+Ca*qa+Aa*sa;a[10]=ya*ka+Ba*na+Ca*ta+Aa*va;a[11]=ya*la+Ba*ma+Ca*xa+Aa*e;ya=P[12];Ba=
P[13];Ca=P[14];Aa=P[15];a[12]=ya*Z+Ba*ia+Ca*pa+Aa*wa;a[13]=ya*da+Ba*ja+Ca*qa+Aa*sa;a[14]=ya*ka+Ba*na+Ca*ta+Aa*va;a[15]=ya*la+Ba*ma+Ca*xa+Aa*e;return a}function H(a,e,P){const Z=P[0],da=P[1];P=P[2];let ka=void 0,la=void 0,ia=void 0,ja=void 0,na=void 0,ma=void 0,pa=void 0,qa=void 0,ta=void 0,xa=void 0,wa=void 0,sa=void 0;e===a?(a[12]=e[0]*Z+e[4]*da+e[8]*P+e[12],a[13]=e[1]*Z+e[5]*da+e[9]*P+e[13],a[14]=e[2]*Z+e[6]*da+e[10]*P+e[14],a[15]=e[3]*Z+e[7]*da+e[11]*P+e[15]):(ka=e[0],la=e[1],ia=e[2],ja=e[3],na=
e[4],ma=e[5],pa=e[6],qa=e[7],ta=e[8],xa=e[9],wa=e[10],sa=e[11],a[0]=ka,a[1]=la,a[2]=ia,a[3]=ja,a[4]=na,a[5]=ma,a[6]=pa,a[7]=qa,a[8]=ta,a[9]=xa,a[10]=wa,a[11]=sa,a[12]=ka*Z+na*da+ta*P+e[12],a[13]=la*Z+ma*da+xa*P+e[13],a[14]=ia*Z+pa*da+wa*P+e[14],a[15]=ja*Z+qa*da+sa*P+e[15]);return a}function F(a,e,P){const Z=P[0],da=P[1];P=P[2];a[0]=e[0]*Z;a[1]=e[1]*Z;a[2]=e[2]*Z;a[3]=e[3]*Z;a[4]=e[4]*da;a[5]=e[5]*da;a[6]=e[6]*da;a[7]=e[7]*da;a[8]=e[8]*P;a[9]=e[9]*P;a[10]=e[10]*P;a[11]=e[11]*P;a[12]=e[12];a[13]=e[13];
a[14]=e[14];a[15]=e[15];return a}function b(a,e,P,Z){let da=Z[0],ka=Z[1];Z=Z[2];let la=Math.sqrt(da*da+ka*ka+Z*Z);var ia=void 0,ja=void 0;let na=void 0,ma=void 0,pa=void 0,qa=void 0,ta=void 0,xa=void 0,wa=void 0,sa=void 0,va=void 0,ya=void 0,Ba=void 0,Ca=void 0,Aa=void 0,Ha=void 0,Ma=void 0,Na=void 0,Qa=void 0,Oa=void 0,Ra=void 0,Ka=void 0;ja=ia=void 0;if(la<K.EPSILON)return null;la=1/la;da*=la;ka*=la;Z*=la;ia=Math.sin(P);ja=Math.cos(P);na=1-ja;ma=e[0];pa=e[1];qa=e[2];ta=e[3];xa=e[4];wa=e[5];sa=e[6];
va=e[7];ya=e[8];Ba=e[9];Ca=e[10];Aa=e[11];Ha=da*da*na+ja;Ma=ka*da*na+Z*ia;Na=Z*da*na-ka*ia;Qa=da*ka*na-Z*ia;Oa=ka*ka*na+ja;Ra=Z*ka*na+da*ia;Ka=da*Z*na+ka*ia;ia=ka*Z*na-da*ia;ja=Z*Z*na+ja;a[0]=ma*Ha+xa*Ma+ya*Na;a[1]=pa*Ha+wa*Ma+Ba*Na;a[2]=qa*Ha+sa*Ma+Ca*Na;a[3]=ta*Ha+va*Ma+Aa*Na;a[4]=ma*Qa+xa*Oa+ya*Ra;a[5]=pa*Qa+wa*Oa+Ba*Ra;a[6]=qa*Qa+sa*Oa+Ca*Ra;a[7]=ta*Qa+va*Oa+Aa*Ra;a[8]=ma*Ka+xa*ia+ya*ja;a[9]=pa*Ka+wa*ia+Ba*ja;a[10]=qa*Ka+sa*ia+Ca*ja;a[11]=ta*Ka+va*ia+Aa*ja;e!==a&&(a[12]=e[12],a[13]=e[13],a[14]=
e[14],a[15]=e[15]);return a}function n(a,e,P){const Z=Math.sin(P);P=Math.cos(P);const da=e[4],ka=e[5],la=e[6],ia=e[7],ja=e[8],na=e[9],ma=e[10],pa=e[11];e!==a&&(a[0]=e[0],a[1]=e[1],a[2]=e[2],a[3]=e[3],a[12]=e[12],a[13]=e[13],a[14]=e[14],a[15]=e[15]);a[4]=da*P+ja*Z;a[5]=ka*P+na*Z;a[6]=la*P+ma*Z;a[7]=ia*P+pa*Z;a[8]=ja*P-da*Z;a[9]=na*P-ka*Z;a[10]=ma*P-la*Z;a[11]=pa*P-ia*Z;return a}function m(a,e,P){const Z=Math.sin(P);P=Math.cos(P);const da=e[0],ka=e[1],la=e[2],ia=e[3],ja=e[8],na=e[9],ma=e[10],pa=e[11];
e!==a&&(a[4]=e[4],a[5]=e[5],a[6]=e[6],a[7]=e[7],a[12]=e[12],a[13]=e[13],a[14]=e[14],a[15]=e[15]);a[0]=da*P-ja*Z;a[1]=ka*P-na*Z;a[2]=la*P-ma*Z;a[3]=ia*P-pa*Z;a[8]=da*Z+ja*P;a[9]=ka*Z+na*P;a[10]=la*Z+ma*P;a[11]=ia*Z+pa*P;return a}function q(a,e,P){const Z=Math.sin(P);P=Math.cos(P);const da=e[0],ka=e[1],la=e[2],ia=e[3],ja=e[4],na=e[5],ma=e[6],pa=e[7];e!==a&&(a[8]=e[8],a[9]=e[9],a[10]=e[10],a[11]=e[11],a[12]=e[12],a[13]=e[13],a[14]=e[14],a[15]=e[15]);a[0]=da*P+ja*Z;a[1]=ka*P+na*Z;a[2]=la*P+ma*Z;a[3]=
ia*P+pa*Z;a[4]=ja*P-da*Z;a[5]=na*P-ka*Z;a[6]=ma*P-la*Z;a[7]=pa*P-ia*Z;return a}function v(a,e){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=e[0];a[13]=e[1];a[14]=e[2];a[15]=1;return a}function D(a,e){a[0]=e[0];a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=e[1];a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=e[2];a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function x(a,e,P){let Z=P[0],da=P[1];P=P[2];let ka=Math.sqrt(Z*Z+da*da+P*P),la=void 0,ia=void 0,ja=void 0;if(ka<K.EPSILON)return null;
ka=1/ka;Z*=ka;da*=ka;P*=ka;la=Math.sin(e);ia=Math.cos(e);ja=1-ia;a[0]=Z*Z*ja+ia;a[1]=da*Z*ja+P*la;a[2]=P*Z*ja-da*la;a[3]=0;a[4]=Z*da*ja-P*la;a[5]=da*da*ja+ia;a[6]=P*da*ja+Z*la;a[7]=0;a[8]=Z*P*ja+da*la;a[9]=da*P*ja-Z*la;a[10]=P*P*ja+ia;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function A(a,e){const P=Math.sin(e);e=Math.cos(e);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=e;a[6]=P;a[7]=0;a[8]=0;a[9]=-P;a[10]=e;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function u(a,e){const P=Math.sin(e);e=Math.cos(e);
a[0]=e;a[1]=0;a[2]=-P;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=P;a[9]=0;a[10]=e;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function g(a,e){const P=Math.sin(e);e=Math.cos(e);a[0]=e;a[1]=P;a[2]=0;a[3]=0;a[4]=-P;a[5]=e;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function c(a,e,P){var Z=e[0],da=e[1],ka=e[2],la=e[3],ia=Z+Z,ja=da+da;const na=ka+ka;e=Z*ia;const ma=Z*ja;Z*=na;const pa=da*ja;da*=na;ka*=na;ia*=la;ja*=la;la*=na;a[0]=1-(pa+ka);a[1]=ma+la;a[2]=Z-ja;
a[3]=0;a[4]=ma-la;a[5]=1-(e+ka);a[6]=da+ia;a[7]=0;a[8]=Z+ja;a[9]=da-ia;a[10]=1-(e+pa);a[11]=0;a[12]=P[0];a[13]=P[1];a[14]=P[2];a[15]=1;return a}function E(a,e){const P=fa,Z=-e[0],da=-e[1],ka=-e[2],la=e[3],ia=e[4],ja=e[5],na=e[6],ma=e[7],pa=Z*Z+da*da+ka*ka+la*la;0<pa?(P[0]=2*(ia*la+ma*Z+ja*ka-na*da)/pa,P[1]=2*(ja*la+ma*da+na*Z-ia*ka)/pa,P[2]=2*(na*la+ma*ka+ia*da-ja*Z)/pa):(P[0]=2*(ia*la+ma*Z+ja*ka-na*da),P[1]=2*(ja*la+ma*da+na*Z-ia*ka),P[2]=2*(na*la+ma*ka+ia*da-ja*Z));c(a,e,P);return a}function l(a,
e){a[0]=e[12];a[1]=e[13];a[2]=e[14];return a}function w(a,e){const P=e[0],Z=e[1],da=e[2],ka=e[4],la=e[5],ia=e[6],ja=e[8],na=e[9];e=e[10];a[0]=Math.sqrt(P*P+Z*Z+da*da);a[1]=Math.sqrt(ka*ka+la*la+ia*ia);a[2]=Math.sqrt(ja*ja+na*na+e*e);return a}function G(a,e){const P=e[0]+e[5]+e[10];let Z=0;0<P?(Z=2*Math.sqrt(P+1),a[3]=.25*Z,a[0]=(e[6]-e[9])/Z,a[1]=(e[8]-e[2])/Z,a[2]=(e[1]-e[4])/Z):e[0]>e[5]&&e[0]>e[10]?(Z=2*Math.sqrt(1+e[0]-e[5]-e[10]),a[3]=(e[6]-e[9])/Z,a[0]=.25*Z,a[1]=(e[1]+e[4])/Z,a[2]=(e[8]+e[2])/
Z):e[5]>e[10]?(Z=2*Math.sqrt(1+e[5]-e[0]-e[10]),a[3]=(e[8]-e[2])/Z,a[0]=(e[1]+e[4])/Z,a[1]=.25*Z,a[2]=(e[6]+e[9])/Z):(Z=2*Math.sqrt(1+e[10]-e[0]-e[5]),a[3]=(e[1]-e[4])/Z,a[0]=(e[8]+e[2])/Z,a[1]=(e[6]+e[9])/Z,a[2]=.25*Z);return a}function d(a,e,P,Z){var da=e[0],ka=e[1],la=e[2],ia=e[3],ja=da+da,na=ka+ka,ma=la+la;e=da*ja;const pa=da*na;da*=ma;const qa=ka*na;ka*=ma;la*=ma;ja*=ia;na*=ia;ia*=ma;ma=Z[0];const ta=Z[1];Z=Z[2];a[0]=(1-(qa+la))*ma;a[1]=(pa+ia)*ma;a[2]=(da-na)*ma;a[3]=0;a[4]=(pa-ia)*ta;a[5]=
(1-(e+la))*ta;a[6]=(ka+ja)*ta;a[7]=0;a[8]=(da+na)*Z;a[9]=(ka-ja)*Z;a[10]=(1-(e+qa))*Z;a[11]=0;a[12]=P[0];a[13]=P[1];a[14]=P[2];a[15]=1;return a}function h(a,e,P,Z,da){var ka=e[0],la=e[1],ia=e[2],ja=e[3],na=ka+ka,ma=la+la,pa=ia+ia;e=ka*na;var qa=ka*ma,ta=ka*pa;ka=la*ma;la*=pa;var xa=ia*pa;ia=ja*na;ma*=ja;const wa=ja*pa;var sa=Z[0],va=Z[1];pa=Z[2];Z=da[0];ja=da[1];da=da[2];na=(1-(ka+xa))*sa;const ya=(qa+wa)*sa;sa*=ta-ma;qa=(qa-wa)*va;xa=(1-(e+xa))*va;va*=la+ia;ta=(ta+ma)*pa;la=(la-ia)*pa;e=(1-(e+ka))*
pa;a[0]=na;a[1]=ya;a[2]=sa;a[3]=0;a[4]=qa;a[5]=xa;a[6]=va;a[7]=0;a[8]=ta;a[9]=la;a[10]=e;a[11]=0;a[12]=P[0]+Z-(na*Z+qa*ja+ta*da);a[13]=P[1]+ja-(ya*Z+xa*ja+la*da);a[14]=P[2]+da-(sa*Z+va*ja+e*da);a[15]=1;return a}function p(a,e){var P=e[0],Z=e[1],da=e[2];e=e[3];var ka=P+P,la=Z+Z;const ia=da+da;P*=ka;const ja=Z*ka;Z*=la;const na=da*ka,ma=da*la;da*=ia;ka*=e;la*=e;e*=ia;a[0]=1-Z-da;a[1]=ja+e;a[2]=na-la;a[3]=0;a[4]=ja-e;a[5]=1-P-da;a[6]=ma+ka;a[7]=0;a[8]=na+la;a[9]=ma-ka;a[10]=1-P-Z;a[11]=0;a[12]=0;a[13]=
0;a[14]=0;a[15]=1;return a}function k(a,e,P,Z,da,ka,la){const ia=1/(P-e),ja=1/(da-Z),na=1/(ka-la);a[0]=2*ka*ia;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=2*ka*ja;a[6]=0;a[7]=0;a[8]=(P+e)*ia;a[9]=(da+Z)*ja;a[10]=(la+ka)*na;a[11]=-1;a[12]=0;a[13]=0;a[14]=la*ka*2*na;a[15]=0;return a}function f(a,e,P,Z,da){e=1/Math.tan(e/2);let ka=void 0;a[0]=e/P;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=e;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[11]=-1;a[12]=0;a[13]=0;a[15]=0;null!=da&&Infinity!==da?(ka=1/(Z-da),a[10]=(da+Z)*ka,a[14]=2*da*Z*ka):
(a[10]=-1,a[14]=-2*Z);return a}function B(a,e,P,Z){const da=Math.tan(e.upDegrees*Math.PI/180),ka=Math.tan(e.downDegrees*Math.PI/180),la=Math.tan(e.leftDegrees*Math.PI/180);e=Math.tan(e.rightDegrees*Math.PI/180);const ia=2/(la+e),ja=2/(da+ka);a[0]=ia;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=ja;a[6]=0;a[7]=0;a[8]=-((la-e)*ia*.5);a[9]=(da-ka)*ja*.5;a[10]=Z/(P-Z);a[11]=-1;a[12]=0;a[13]=0;a[14]=Z*P/(P-Z);a[15]=0;return a}function O(a,e,P,Z,da,ka,la){const ia=1/(e-P),ja=1/(Z-da),na=1/(ka-la);a[0]=-2*ia;a[1]=0;
a[2]=0;a[3]=0;a[4]=0;a[5]=-2*ja;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=2*na;a[11]=0;a[12]=(e+P)*ia;a[13]=(da+Z)*ja;a[14]=(la+ka)*na;a[15]=1;return a}function z(a,e,P,Z){let da=void 0,ka=void 0;var la=void 0,ia=void 0;let ja=void 0,na=void 0;var ma=void 0,pa=void 0;let qa=void 0,ta=void 0;const xa=e[0],wa=e[1];e=e[2];la=Z[0];ia=Z[1];Z=Z[2];ma=P[0];pa=P[1];P=P[2];if(Math.abs(xa-ma)<K.EPSILON&&Math.abs(wa-pa)<K.EPSILON&&Math.abs(e-P)<K.EPSILON)return Q(a);ma=xa-ma;pa=wa-pa;qa=e-P;ta=1/Math.sqrt(ma*ma+pa*
pa+qa*qa);ma*=ta;pa*=ta;qa*=ta;da=ia*qa-Z*pa;ka=Z*ma-la*qa;la=la*pa-ia*ma;(ta=Math.sqrt(da*da+ka*ka+la*la))?(ta=1/ta,da*=ta,ka*=ta,la*=ta):la=ka=da=0;ia=pa*la-qa*ka;ja=qa*da-ma*la;na=ma*ka-pa*da;(ta=Math.sqrt(ia*ia+ja*ja+na*na))?(ta=1/ta,ia*=ta,ja*=ta,na*=ta):na=ja=ia=0;a[0]=da;a[1]=ia;a[2]=ma;a[3]=0;a[4]=ka;a[5]=ja;a[6]=pa;a[7]=0;a[8]=la;a[9]=na;a[10]=qa;a[11]=0;a[12]=-(da*xa+ka*wa+la*e);a[13]=-(ia*xa+ja*wa+na*e);a[14]=-(ma*xa+pa*wa+qa*e);a[15]=1;return a}function t(a,e,P,Z){const da=e[0],ka=e[1];
e=e[2];var la=Z[0];const ia=Z[1];var ja=Z[2];Z=da-P[0];let na=ka-P[1];P=e-P[2];let ma=Z*Z+na*na+P*P;0<ma&&(ma=1/Math.sqrt(ma),Z*=ma,na*=ma,P*=ma);let pa=ia*P-ja*na;ja=ja*Z-la*P;la=la*na-ia*Z;ma=pa*pa+ja*ja+la*la;0<ma&&(ma=1/Math.sqrt(ma),pa*=ma,ja*=ma,la*=ma);a[0]=pa;a[1]=ja;a[2]=la;a[3]=0;a[4]=na*la-P*ja;a[5]=P*pa-Z*la;a[6]=Z*ja-na*pa;a[7]=0;a[8]=Z;a[9]=na;a[10]=P;a[11]=0;a[12]=da;a[13]=ka;a[14]=e;a[15]=1;return a}function J(a){return"mat4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+
", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"}function V(a){return Math.sqrt(a[0]**2+a[1]**2+a[2]**2+a[3]**2+a[4]**2+a[5]**2+a[6]**2+a[7]**2+a[8]**2+a[9]**2+a[10]**2+a[11]**2+a[12]**2+a[13]**2+a[14]**2+a[15]**2)}function T(a,e,P){a[0]=e[0]+P[0];a[1]=e[1]+P[1];a[2]=e[2]+P[2];a[3]=e[3]+P[3];a[4]=e[4]+P[4];a[5]=e[5]+P[5];a[6]=e[6]+P[6];a[7]=e[7]+P[7];a[8]=e[8]+P[8];a[9]=e[9]+P[9];a[10]=e[10]+P[10];a[11]=e[11]+P[11];a[12]=e[12]+P[12];a[13]=
e[13]+P[13];a[14]=e[14]+P[14];a[15]=e[15]+P[15];return a}function ba(a,e,P){a[0]=e[0]-P[0];a[1]=e[1]-P[1];a[2]=e[2]-P[2];a[3]=e[3]-P[3];a[4]=e[4]-P[4];a[5]=e[5]-P[5];a[6]=e[6]-P[6];a[7]=e[7]-P[7];a[8]=e[8]-P[8];a[9]=e[9]-P[9];a[10]=e[10]-P[10];a[11]=e[11]-P[11];a[12]=e[12]-P[12];a[13]=e[13]-P[13];a[14]=e[14]-P[14];a[15]=e[15]-P[15];return a}function M(a,e,P){a[0]=e[0]*P;a[1]=e[1]*P;a[2]=e[2]*P;a[3]=e[3]*P;a[4]=e[4]*P;a[5]=e[5]*P;a[6]=e[6]*P;a[7]=e[7]*P;a[8]=e[8]*P;a[9]=e[9]*P;a[10]=e[10]*P;a[11]=
e[11]*P;a[12]=e[12]*P;a[13]=e[13]*P;a[14]=e[14]*P;a[15]=e[15]*P;return a}function L(a,e,P,Z){a[0]=e[0]+P[0]*Z;a[1]=e[1]+P[1]*Z;a[2]=e[2]+P[2]*Z;a[3]=e[3]+P[3]*Z;a[4]=e[4]+P[4]*Z;a[5]=e[5]+P[5]*Z;a[6]=e[6]+P[6]*Z;a[7]=e[7]+P[7]*Z;a[8]=e[8]+P[8]*Z;a[9]=e[9]+P[9]*Z;a[10]=e[10]+P[10]*Z;a[11]=e[11]+P[11]*Z;a[12]=e[12]+P[12]*Z;a[13]=e[13]+P[13]*Z;a[14]=e[14]+P[14]*Z;a[15]=e[15]+P[15]*Z;return a}function S(a,e){return a[0]===e[0]&&a[1]===e[1]&&a[2]===e[2]&&a[3]===e[3]&&a[4]===e[4]&&a[5]===e[5]&&a[6]===e[6]&&
a[7]===e[7]&&a[8]===e[8]&&a[9]===e[9]&&a[10]===e[10]&&a[11]===e[11]&&a[12]===e[12]&&a[13]===e[13]&&a[14]===e[14]&&a[15]===e[15]}function X(a,e){const P=a[0],Z=a[1],da=a[2],ka=a[3],la=a[4],ia=a[5],ja=a[6],na=a[7],ma=a[8],pa=a[9],qa=a[10],ta=a[11],xa=a[12],wa=a[13],sa=a[14];a=a[15];const va=e[0],ya=e[1],Ba=e[2],Ca=e[3],Aa=e[4],Ha=e[5],Ma=e[6],Na=e[7],Qa=e[8],Oa=e[9],Ra=e[10],Ka=e[11],Ga=e[12],Fa=e[13],Sa=e[14];e=e[15];return Math.abs(P-va)<=K.EPSILON*Math.max(1,Math.abs(P),Math.abs(va))&&Math.abs(Z-
ya)<=K.EPSILON*Math.max(1,Math.abs(Z),Math.abs(ya))&&Math.abs(da-Ba)<=K.EPSILON*Math.max(1,Math.abs(da),Math.abs(Ba))&&Math.abs(ka-Ca)<=K.EPSILON*Math.max(1,Math.abs(ka),Math.abs(Ca))&&Math.abs(la-Aa)<=K.EPSILON*Math.max(1,Math.abs(la),Math.abs(Aa))&&Math.abs(ia-Ha)<=K.EPSILON*Math.max(1,Math.abs(ia),Math.abs(Ha))&&Math.abs(ja-Ma)<=K.EPSILON*Math.max(1,Math.abs(ja),Math.abs(Ma))&&Math.abs(na-Na)<=K.EPSILON*Math.max(1,Math.abs(na),Math.abs(Na))&&Math.abs(ma-Qa)<=K.EPSILON*Math.max(1,Math.abs(ma),Math.abs(Qa))&&
Math.abs(pa-Oa)<=K.EPSILON*Math.max(1,Math.abs(pa),Math.abs(Oa))&&Math.abs(qa-Ra)<=K.EPSILON*Math.max(1,Math.abs(qa),Math.abs(Ra))&&Math.abs(ta-Ka)<=K.EPSILON*Math.max(1,Math.abs(ta),Math.abs(Ka))&&Math.abs(xa-Ga)<=K.EPSILON*Math.max(1,Math.abs(xa),Math.abs(Ga))&&Math.abs(wa-Fa)<=K.EPSILON*Math.max(1,Math.abs(wa),Math.abs(Fa))&&Math.abs(sa-Sa)<=K.EPSILON*Math.max(1,Math.abs(sa),Math.abs(Sa))&&Math.abs(a-e)<=K.EPSILON*Math.max(1,Math.abs(a),Math.abs(e))}function aa(a){const e=K.EPSILON,P=a[0],Z=a[1],
da=a[2],ka=a[4],la=a[5],ia=a[6],ja=a[8],na=a[9];a=a[10];return Math.abs(1-(P*P+ka*ka+ja*ja))<=e&&Math.abs(1-(Z*Z+la*la+na*na))<=e&&Math.abs(1-(da*da+ia*ia+a*a))<=e}const fa=r.create();r=Object.freeze({__proto__:null,copy:N,set:C,identity:Q,transpose:Y,invert:W,adjoint:U,determinant:I,multiply:y,translate:H,scale:F,rotate:b,rotateX:n,rotateY:m,rotateZ:q,fromTranslation:v,fromScaling:D,fromRotation:x,fromXRotation:A,fromYRotation:u,fromZRotation:g,fromRotationTranslation:c,fromQuat2:E,getTranslation:l,
getScaling:w,getRotation:G,fromRotationTranslationScale:d,fromRotationTranslationScaleOrigin:h,fromQuat:p,frustum:k,perspective:f,perspectiveFromFieldOfView:B,ortho:O,lookAt:z,targetTo:t,str:J,frob:V,add:T,subtract:ba,multiplyScalar:M,multiplyScalarAndAdd:L,exactEquals:S,equals:X,isOrthoNormal:aa,mul:y,sub:ba});R.add=T;R.adjoint=U;R.copy=N;R.determinant=I;R.equals=X;R.exactEquals=S;R.frob=V;R.fromQuat=p;R.fromQuat2=E;R.fromRotation=x;R.fromRotationTranslation=c;R.fromRotationTranslationScale=d;R.fromRotationTranslationScaleOrigin=
h;R.fromScaling=D;R.fromTranslation=v;R.fromXRotation=A;R.fromYRotation=u;R.fromZRotation=g;R.frustum=k;R.getRotation=G;R.getScaling=w;R.getTranslation=l;R.identity=Q;R.invert=W;R.isOrthoNormal=aa;R.lookAt=z;R.mat4=r;R.mul=y;R.multiply=y;R.multiplyScalar=M;R.multiplyScalarAndAdd=L;R.ortho=O;R.perspective=f;R.perspectiveFromFieldOfView=B;R.rotate=b;R.rotateX=n;R.rotateY=m;R.rotateZ=q;R.scale=F;R.set=C;R.str=J;R.sub=ba;R.subtract=ba;R.targetTo=t;R.translate=H;R.transpose=Y})},"esri/chunks/pe":function(){define(["require",
"exports","./_rollupPluginBabelHelpers","../assets","../core/has"],function(R,r,K,N,C){function Q(){return!!r._pe}function Y(){return!!C("esri-wasm")}function W(){return b?b:b=(new Promise(function(m,q){R(["./pe-wasm"],m,q)})).then(function(m){return m.peWasm}).then(({default:m})=>m({locateFile:q=>N.getAssetUrl(`esri/geometry/support/${q}`)})).then(m=>{U(m)})}function U(m){function q(x,A,u){x[A]=u(x[A])}r._pe=m;r.PeDefs.init();r.PeGTlistExtended.init();r.PeNotationMgrs.init();r.PeNotationUtm.init();
r.PePCSInfo.init();r.PeGCSExtent=function(x){function A(){return x.apply(this,arguments)||this}K._inheritsLoose(A,x);A.prototype.destroy=function(){r._pe.destroy(this)};return A}(r._pe.PeGCSExtent);m=[r._pe.PeDatum,r._pe.PeGeogcs,r._pe.PeGeogtran,r._pe.PeObject,r._pe.PeParameter,r._pe.PePrimem,r._pe.PeProjcs,r._pe.PeSpheroid,r._pe.PeUnit];for(var v of m)q(v.prototype,"getName",x=>function(){return x.call(this,Array(r.PeDefs.PE_NAME_MAX))});for(const x of[r._pe.PeGeogtran,r._pe.PeProjcs])q(x.prototype,
"getParameters",A=>function(){const u=Array(r.PeDefs.PE_PARM_MAX);let g=A.call(this);for(let c=0;c<u.length;c++){const E=r._pe.getValue(g,"*");u[c]=E?r._pe.wrapPointer(E,r._pe.PeParameter):null;g+=Int32Array.BYTES_PER_ELEMENT}return u});q(r._pe.PeHorizon.prototype,"getCoord",x=>function(){const A=this.getSize();if(!A)return null;const u=[],g=x.call(this);F(u,A,g);return u});q(r._pe.PeGTlistExtendedEntry.prototype,"getEntries",x=>{const A=r._pe._pe_getPeGTlistExtendedGTsSize();return function(){let u=
null;var g=x.call(this);if(!r._pe.compare(g,r._pe.NULL)){u=[g];const c=this.getSteps();if(1<c){g=r._pe.getPointer(g);for(let E=1;E<c;E++)u.push(r._pe.wrapPointer(g+A*E,r._pe.PeGTlistExtendedGTs))}}return u}});const D=r._pe._pe_getPeHorizonSize();v=x=>function(){let A=this._cache;A||(this._cache=A=new Map);if(A.has(x))return A.get(x);let u=null;var g=x.call(this);if(!r._pe.compare(g,r._pe.NULL)){u=[g];const c=g.getNump();if(1<c){g=r._pe.getPointer(g);for(let E=1;E<c;E++)u.push(r._pe.wrapPointer(g+
D*E,r._pe.PeHorizon))}}A.set(x,u);return u};q(r._pe.PeProjcs.prototype,"horizonGcsGenerate",v);q(r._pe.PeProjcs.prototype,"horizonPcsGenerate",v);r._pe.PeObject.prototype.toString=function(x=r.PeDefs.PE_STR_OPTS_NONE){r._pe.ensureCache.prepare();const A=r._pe.getPointer(this),u=r._pe.ensureInt8(Array(r.PeDefs.PE_BUFFER_MAX));return r._pe.UTF8ToString(r._pe._pe_object_to_string_ext(A,x,u))}}function I(m){if(m){var q=r._pe.getClass(m);q&&(q=r._pe.getCache(q))&&(m=r._pe.getPointer(m))&&delete q[m]}}
function y(m,q){const v=[];q=Array(q);for(let D=0;D<m;D++)v.push(r._pe.ensureInt8(q));return v}function H(m){let q;Array.isArray(m[0])?(q=[],m.forEach(v=>{q.push(v[0],v[1])})):q=m;return q}function F(m,q,v,D=!1){if(D)for(D=0;D<2*q;D++)m[D]=r._pe.getValue(v+D*Float64Array.BYTES_PER_ELEMENT,"double");else{D=0===m.length;for(let x=0;x<q;x++)D&&(m[x]=Array(2)),m[x][0]=r._pe.getValue(v,"double"),m[x][1]=r._pe.getValue(v+Float64Array.BYTES_PER_ELEMENT,"double"),v+=2*Float64Array.BYTES_PER_ELEMENT}}let b;
r._pe=null;r.PeCSTransformations=void 0;(function(m){function q(x,A,u){r._pe.ensureCache.prepare();var g=H(u);const c=u===g;g=r._pe.ensureFloat64(g);(x=r._pe._pe_geog_to_proj(r._pe.getPointer(x),A,g))&&F(u,A,g,c);return x}function v(x,A,u){return D(x,A,u,0)}function D(x,A,u,g){r._pe.ensureCache.prepare();var c=H(u);const E=u===c;c=r._pe.ensureFloat64(c);(x=r._pe._pe_proj_to_geog_center(r._pe.getPointer(x),A,c,g))&&F(u,A,c,E);return x}m.geogToProj=q;m.projGeog=function(x,A,u,g){switch(g){case r.PeDefs.PE_TRANSFORM_P_TO_G:return v(x,
A,u);case r.PeDefs.PE_TRANSFORM_G_TO_P:return q(x,A,u)}return 0};m.projToGeog=v;m.projToGeogCenter=D})(r.PeCSTransformations||(r.PeCSTransformations={}));r.PeDefs=void 0;(function(m){m.init=function(){m.PE_BUFFER_MAX=r._pe.PeDefs.prototype.PE_BUFFER_MAX;m.PE_NAME_MAX=r._pe.PeDefs.prototype.PE_NAME_MAX;m.PE_MGRS_MAX=r._pe.PeDefs.prototype.PE_MGRS_MAX;m.PE_USNG_MAX=r._pe.PeDefs.prototype.PE_USNG_MAX;m.PE_DD_MAX=r._pe.PeDefs.prototype.PE_DD_MAX;m.PE_DDM_MAX=r._pe.PeDefs.prototype.PE_DDM_MAX;m.PE_DMS_MAX=
r._pe.PeDefs.prototype.PE_DMS_MAX;m.PE_UTM_MAX=r._pe.PeDefs.prototype.PE_UTM_MAX;m.PE_PARM_MAX=r._pe.PeDefs.prototype.PE_PARM_MAX;m.PE_TYPE_NONE=r._pe.PeDefs.prototype.PE_TYPE_NONE;m.PE_TYPE_GEOGCS=r._pe.PeDefs.prototype.PE_TYPE_GEOGCS;m.PE_TYPE_PROJCS=r._pe.PeDefs.prototype.PE_TYPE_PROJCS;m.PE_TYPE_GEOGTRAN=r._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN;m.PE_TYPE_COORDSYS=r._pe.PeDefs.prototype.PE_TYPE_COORDSYS;m.PE_TYPE_UNIT=r._pe.PeDefs.prototype.PE_TYPE_UNIT;m.PE_TYPE_LINUNIT=r._pe.PeDefs.prototype.PE_TYPE_LINUNIT;
m.PE_STR_OPTS_NONE=r._pe.PeDefs.prototype.PE_STR_OPTS_NONE;m.PE_STR_AUTH_NONE=r._pe.PeDefs.prototype.PE_STR_AUTH_NONE;m.PE_STR_AUTH_TOP=r._pe.PeDefs.prototype.PE_STR_AUTH_TOP;m.PE_STR_NAME_CANON=r._pe.PeDefs.prototype.PE_STR_NAME_CANON;m.PE_PARM_X0=r._pe.PeDefs.prototype.PE_PARM_X0;m.PE_PARM_ND=r._pe.PeDefs.prototype.PE_PARM_ND;m.PE_TRANSFORM_1_TO_2=r._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2;m.PE_TRANSFORM_2_TO_1=r._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1;m.PE_TRANSFORM_P_TO_G=r._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G;
m.PE_TRANSFORM_G_TO_P=r._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P;m.PE_HORIZON_RECT=r._pe.PeDefs.prototype.PE_HORIZON_RECT;m.PE_HORIZON_POLY=r._pe.PeDefs.prototype.PE_HORIZON_POLY;m.PE_HORIZON_LINE=r._pe.PeDefs.prototype.PE_HORIZON_LINE;m.PE_HORIZON_DELTA=r._pe.PeDefs.prototype.PE_HORIZON_DELTA}})(r.PeDefs||(r.PeDefs={}));r.PeFactory=void 0;(function(m){function q(A,u){let g=null,c=v[A];c||(c={},v[A]=c);c.hasOwnProperty(String(u))?g=c[u]:(A=r._pe.PeFactory.prototype.factoryByType(A,u),r._pe.compare(A,
r._pe.NULL)||(g=A,c[u]=g));return g=x(g)}const v={},D={},x=A=>{if(A){const u=A.getType();switch(u){case r.PeDefs.PE_TYPE_GEOGCS:A=r._pe.castObject(A,r._pe.PeGeogcs);break;case r.PeDefs.PE_TYPE_PROJCS:A=r._pe.castObject(A,r._pe.PeProjcs);break;case r.PeDefs.PE_TYPE_GEOGTRAN:A=r._pe.castObject(A,r._pe.PeGeogtran);break;default:u&r.PeDefs.PE_TYPE_UNIT&&(A=r._pe.castObject(A,r._pe.PeUnit))}}return A};m.initialize=function(){r._pe.PeFactory.prototype.initialize(null)};m.coordsys=function(A){return q(r.PeDefs.PE_TYPE_COORDSYS,
A)};m.factoryByType=q;m.fromString=function(A,u){let g=null,c=D[A];c||(c={},D[A]=c);c.hasOwnProperty(u)?g=c[u]:(A=r._pe.PeFactory.prototype.fromString(A,u),r._pe.compare(A,r._pe.NULL)||(g=A,c[u]=g));return g=x(g)};m.geogcs=function(A){return q(r.PeDefs.PE_TYPE_GEOGCS,A)};m.geogtran=function(A){return q(r.PeDefs.PE_TYPE_GEOGTRAN,A)};m.getCode=function(A){return r._pe.PeFactory.prototype.getCode(A)};m.projcs=function(A){return q(r.PeDefs.PE_TYPE_PROJCS,A)};m.unit=function(A){return q(r.PeDefs.PE_TYPE_UNIT,
A)}})(r.PeFactory||(r.PeFactory={}));r.PeGCSExtent=null;r.PeGTlistExtended=void 0;(function(m){let q;m.init=function(){m.PE_GTLIST_OPTS_COMMON=r._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON;q=r._pe._pe_getPeGTlistExtendedEntrySize()};m.getGTlist=function(v,D,x,A,u,g){let c=null;const E=new r._pe.PeInteger(g);try{const l=r._pe.PeGTlistExtended.prototype.getGTlist(v,D,x,A,u,E);if(g=E.val)if(c=[l],1<g){const w=r._pe.getPointer(l);for(v=1;v<g;v++)c.push(r._pe.wrapPointer(w+q*v,r._pe.PeGTlistExtendedEntry))}}finally{r._pe.destroy(E)}return c}})(r.PeGTlistExtended||
(r.PeGTlistExtended={}));r.PeGTlistExtendedEntry=void 0;(function(m){m.destroy=function(q){if(q&&q.length){for(const v of q)I(v),v.getEntries().forEach(D=>{I(D);D=D.getGeogtran();I(D);D.getParameters().forEach(I);[D.getGeogcs1(),D.getGeogcs2()].forEach(x=>{I(x);const A=x.getDatum();I(A);I(A.getSpheroid());I(x.getPrimem());I(x.getUnit())})});r._pe.PeGTlistExtendedEntry.prototype.Delete(q[0])}}})(r.PeGTlistExtendedEntry||(r.PeGTlistExtendedEntry={}));r.PeGTTransformations=void 0;(function(m){m.geogToGeog=
function(q,v,D,x,A){r._pe.ensureCache.prepare();var u=H(D);const g=D===u;u=r._pe.ensureFloat64(u);let c=0;x&&(c=r._pe.ensureFloat64(x));(q=r._pe._pe_geog_to_geog(r._pe.getPointer(q),v,u,c,A))&&F(D,v,u,g);return q}})(r.PeGTTransformations||(r.PeGTTransformations={}));r.PeNotationDms=void 0;(function(m){const q=(D,x,A,u,g,c)=>{r._pe.ensureCache.prepare();switch(D){case "dd":var E=r._pe._pe_geog_to_dd;var l=r.PeDefs.PE_DD_MAX;break;case "ddm":E=r._pe._pe_geog_to_ddm;l=r.PeDefs.PE_DDM_MAX;break;case "dms":E=
r._pe._pe_geog_to_dms,l=r.PeDefs.PE_DMS_MAX}D=0;x&&(D=r._pe.getPointer(x));x=H(u);x=r._pe.ensureFloat64(x);l=y(A,l);u=r._pe.ensureInt32(l);if(g=E(D,A,x,g,u))for(E=0;E<A;E++)c[E]=r._pe.UTF8ToString(l[E]);return g},v=(D,x,A,u,g)=>{r._pe.ensureCache.prepare();switch(D){case "dd":var c=r._pe._pe_dd_to_geog;break;case "ddm":c=r._pe._pe_ddm_to_geog;break;case "dms":c=r._pe._pe_dms_to_geog}D=0;x&&(D=r._pe.getPointer(x));x=u.map(E=>r._pe.ensureString(E));u=r._pe.ensureInt32(x);x=r._pe.ensureFloat64(Array(2*
A));(c=c(D,A,u,x))&&F(g,A,x);return c};m.geog_to_dms=function(D,x,A,u,g){return q("dms",D,x,A,u,g)};m.dms_to_geog=function(D,x,A,u){return v("dms",D,x,A,u)};m.geog_to_ddm=function(D,x,A,u,g){return q("ddm",D,x,A,u,g)};m.ddm_to_geog=function(D,x,A,u){return v("ddm",D,x,A,u)};m.geog_to_dd=function(D,x,A,u,g){return q("dd",D,x,A,u,g)};m.dd_to_geog=function(D,x,A,u){return v("dd",D,x,A,u)}})(r.PeNotationDms||(r.PeNotationDms={}));r.PeNotationMgrs=void 0;(function(m){m.init=function(){m.PE_MGRS_STYLE_NEW=
r._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW;m.PE_MGRS_STYLE_OLD=r._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD;m.PE_MGRS_STYLE_AUTO=r._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO;m.PE_MGRS_180_ZONE_1_PLUS=r._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS;m.PE_MGRS_ADD_SPACES=r._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES};m.geog_to_mgrs_extended=function(q,v,D,x,A,u,g){r._pe.ensureCache.prepare();let c=0;q&&(c=r._pe.getPointer(q));q=H(D);D=r._pe.ensureFloat64(q);q=y(v,r.PeDefs.PE_MGRS_MAX);
const E=r._pe.ensureInt32(q);if(x=r._pe._pe_geog_to_mgrs_extended(c,v,D,x,A,u,E))for(A=0;A<v;A++)g[A]=r._pe.UTF8ToString(q[A]);return x};m.mgrs_to_geog_extended=function(q,v,D,x,A){r._pe.ensureCache.prepare();let u=0;q&&(u=r._pe.getPointer(q));q=D.map(g=>r._pe.ensureString(g));D=r._pe.ensureInt32(q);q=r._pe.ensureFloat64(Array(2*v));(x=r._pe._pe_mgrs_to_geog_extended(u,v,D,x,q))&&F(A,v,q);return x}})(r.PeNotationMgrs||(r.PeNotationMgrs={}));r.PeNotationUsng=void 0;(function(m){m.geog_to_usng=function(q,
v,D,x,A,u,g){r._pe.ensureCache.prepare();let c=0;q&&(c=r._pe.getPointer(q));q=H(D);D=r._pe.ensureFloat64(q);q=y(v,r.PeDefs.PE_MGRS_MAX);const E=r._pe.ensureInt32(q);if(x=r._pe._pe_geog_to_usng(c,v,D,x,A,u,E))for(A=0;A<v;A++)g[A]=r._pe.UTF8ToString(q[A]);return x};m.usng_to_geog=function(q,v,D,x){r._pe.ensureCache.prepare();var A=0;q&&(A=r._pe.getPointer(q));q=D.map(u=>r._pe.ensureString(u));D=r._pe.ensureInt32(q);q=r._pe.ensureFloat64(Array(2*v));(A=r._pe._pe_usng_to_geog(A,v,D,q))&&F(x,v,q);return A}})(r.PeNotationUsng||
(r.PeNotationUsng={}));r.PeNotationUtm=void 0;(function(m){m.init=function(){m.PE_UTM_OPTS_NONE=r._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE;m.PE_UTM_OPTS_ADD_SPACES=r._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES;m.PE_UTM_OPTS_NS=r._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS};m.geog_to_utm=function(q,v,D,x,A){r._pe.ensureCache.prepare();var u=0;q&&(u=r._pe.getPointer(q));q=H(D);D=r._pe.ensureFloat64(q);q=y(v,r.PeDefs.PE_UTM_MAX);const g=r._pe.ensureInt32(q);if(x=r._pe._pe_geog_to_utm(u,v,D,
x,g))for(u=0;u<v;u++)A[u]=r._pe.UTF8ToString(q[u]);return x};m.utm_to_geog=function(q,v,D,x,A){r._pe.ensureCache.prepare();let u=0;q&&(u=r._pe.getPointer(q));q=D.map(g=>r._pe.ensureString(g));D=r._pe.ensureInt32(q);q=r._pe.ensureFloat64(Array(2*v));(x=r._pe._pe_utm_to_geog(u,v,D,x,q))&&F(A,v,q);return x}})(r.PeNotationUtm||(r.PeNotationUtm={}));r.PePCSInfo=void 0;(function(m){const q=new Map;m.init=function(){m.PE_PCSINFO_OPTION_NONE=r._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE;m.PE_PCSINFO_OPTION_DOMAIN=
r._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN;m.PE_POLE_OUTSIDE_BOUNDARY=r._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY;m.PE_POLE_POINT=r._pe.PePCSInfo.prototype.PE_POLE_POINT};m.generate=function(v,D=m.PE_PCSINFO_OPTION_DOMAIN){let x,A;q.has(v)&&(A=q.get(v),A[D]&&(x=A[D]));x||(x=r._pe.PePCSInfo.prototype.generate(v,D),A||(A=[],q.set(v,A)),A[D]=x);return x}})(r.PePCSInfo||(r.PePCSInfo={}));r.PeVersion=void 0;(function(m){m.version_string=function(){return r._pe.PeVersion.prototype.version_string()}})(r.PeVersion||
(r.PeVersion={}));var n=Object.freeze({__proto__:null,get _pe(){return r._pe},isLoaded:Q,isSupported:Y,load:W,get PeCSTransformations(){return r.PeCSTransformations},get PeDefs(){return r.PeDefs},get PeFactory(){return r.PeFactory},get PeGCSExtent(){return r.PeGCSExtent},get PeGTlistExtended(){return r.PeGTlistExtended},get PeGTlistExtendedEntry(){return r.PeGTlistExtendedEntry},get PeGTTransformations(){return r.PeGTTransformations},get PeNotationDms(){return r.PeNotationDms},get PeNotationMgrs(){return r.PeNotationMgrs},
get PeNotationUsng(){return r.PeNotationUsng},get PeNotationUtm(){return r.PeNotationUtm},get PePCSInfo(){return r.PePCSInfo},get PeVersion(){return r.PeVersion},_init:U});r._init=U;r.isLoaded=Q;r.isSupported=Y;r.load=W;r.pe=n})},"esri/geometry/support/geodesicConstants":function(){define(["exports","./Ellipsoid"],function(R,r){const K=Math.PI/180;var N=r.earth.radius;const C=r.earth.eccentricitySquared;N={a1:N*C,a2:N*C*N*C,a3:N*C*C/2,a4:N*C*N*C*2.5,a5:N*C+N*C*C/2,a6:1-C};r={4267:{a:6378206.4,f:1/
294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:r.earth.radius,f:r.earth.flattening},104900:{a:2439700,f:0},104901:{a:6051E3,f:0},104902:{a:6051800,f:0},104903:{a:r.moon.radius,f:r.moon.flattening},104904:{a:3393400,f:.005207166853303471},104905:{a:r.mars.radius,f:r.mars.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492E3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1E4,f:0},104912:{a:2409300,f:0},104913:{a:15E3,f:0},104914:{a:4E4,f:0},104915:{a:1562090,
f:0},104916:{a:2632345,f:0},104917:{a:85E3,f:0},104918:{a:1821460,f:0},104919:{a:5E3,f:0},104920:{a:12E3,f:0},104921:{a:3E4,f:3},104922:{a:18E3,f:0},104923:{a:14E3,f:0},104924:{a:49300,f:0},104925:{a:60268E3,f:.09796243445941462},104926:{a:16E3,f:0},104927:{a:9500,f:0},104928:{a:56E4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16E3,f:0},104932:{a:133E3,f:0},104933:{a:718E3,f:0},104934:{a:888E3,f:0},104935:{a:1986300,f:0},104936:{a:1E4,f:0},104937:{a:41900,f:0},104938:{a:11E4,f:0},104939:{a:50100,
f:0},104940:{a:764E3,f:0},104941:{a:11E3,f:0},104942:{a:529800,f:0},104943:{a:2575E3,f:0},104944:{a:25559E3,f:.022927344575296365},104945:{a:578900,f:0},104946:{a:33E3,f:0},104947:{a:21E3,f:0},104948:{a:13E3,f:0},104949:{a:31E3,f:0},104950:{a:27E3,f:0},104951:{a:42E3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15E3,f:0},104955:{a:54E3,f:0},104956:{a:77E3,f:0},104957:{a:27E3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764E3,f:.01708124697141011},104961:{a:74E3,f:0},
104962:{a:79E3,f:0},104963:{a:104E3,f:.14423076923076922},104964:{a:29E3,f:0},104965:{a:17E4,f:0},104966:{a:208E3,f:0},104967:{a:4E4,f:0},104968:{a:1352600,f:0},104969:{a:1195E3,f:0},104970:{a:593E3,f:0},104971:{a:r.mars.radius,f:0},104972:{a:47E4,f:0},104973:{a:255E3,f:0},104974:{a:2439400,f:0}};R.WKT_SPHEROID_REGEX=/SPHEROID\[([^\]]+)]/i;R.earthEllipsoidConstants=N;R.spheroids=r;R.toRadians=K;Object.defineProperty(R,"__esModule",{value:!0})})},"esri/geometry/support/GeographicTransformation":function(){define(["./GeographicTransformationStep"],
function(R){return function(){function r(N){this.steps=[];this._cached_projection={};this._chain="";this._gtlistentry=null;if(N&&N.steps)for(const C of N.steps)C instanceof R?this.steps.push(C):this.steps.push(new R({wkid:C.wkid,wkt:C.wkt,isInverse:C.isInverse}))}r.cacheKey=function(N,C){return[void 0!==N.wkid&&null!==N.wkid?N.wkid.toString():"-1",void 0!==N.wkt&&null!==N.wkt?N.wkt.toString():"",void 0!==C.wkid&&null!==C.wkid?C.wkid.toString():"-1",void 0!==C.wkt&&null!==C.wkt?C.wkt.toString():""].join()};
r.fromGE=function(N){const C=new r;let Q="";for(const Y of N.steps)N=R.fromGE(Y),C.steps.push(N),Q+=N.uid.toString()+",";C._cached_projection={};C._gtlistentry=null;C._chain=Q;return C};var K=r.prototype;K.getInverse=function(){const N=new r;N.steps=[];for(let C=this.steps.length-1;0<=C;C--)N.steps.push(this.steps[C].getInverse());return N};K.getGTListEntry=function(){let N="";for(const C of this.steps)N+=C.uid.toString()+",";N!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=
N);return this._gtlistentry};K.assignCachedGe=function(N,C,Q){this._cached_projection[r.cacheKey(N,C)]=Q};K.getCachedGeTransformation=function(N,C){let Q="";for(const Y of this.steps)Q+=Y.uid.toString()+",";Q!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=Q);N=this._cached_projection[r.cacheKey(N,C)];return void 0===N?null:N};return r}()})},"esri/geometry/support/GeographicTransformationStep":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(R){let r=
0;return function(){function K(N=null){this.uid=r++;N?(this._wkt=void 0!==N.wkt?N.wkt:null,this._wkid=void 0!==N.wkid?N.wkid:-1,this._isInverse=void 0!==N.isInverse?!0===N.isInverse:!1):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}K.fromGE=function(N){const C=new K;C._wkt=N.wkt;C._wkid=N.wkid;C._isInverse=N.isInverse;return C};K.prototype.getInverse=function(){const N=new K;N._wkt=this.wkt;N._wkid=this._wkid;N._isInverse=!this.isInverse;return N};R._createClass(K,[{key:"wkt",get:function(){return this._wkt},
set:function(N){this._wkt=N;this.uid=r++}},{key:"wkid",get:function(){return this._wkid},set:function(N){this._wkid=N;this.uid=r++}},{key:"isInverse",get:function(){return this._isInverse},set:function(N){this._isInverse=N;this.uid=r++}}]);return K}()})},"esri/layers/support/rasterFormats/RasterCodec":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../PixelBlock ./ImageCanvasDecoder ./JpgPlus ../../../chunks/TiffDecoder ../../../chunks/LercCodec ../../../chunks/Zlib ./Raw ./utils".split(" "),
function(R,r,K,N,C,Q,Y,W,U,I,y){function H(l,w){if(!y.isPlatformLittleEndian)throw new K("rasterCoded:decode","lerc decoder is not supported on big endian platform");const {width:G,height:d,pixelType:h}=w;var p=A(h);const k=p.pixelTypeCtor;w=null==w.noDataValue?p.noDataValue:w.noDataValue;p=0;let f,B=0,O;const z=l.byteLength-10;for(;B<z;){var t=W.decode(l,{inputOffset:B,encodedMaskData:f,returnMask:0===p?!0:!1,returnEncodedMask:0===p?!0:!1,returnFileInfo:!0,pixelType:k,noDataValue:w});if(G&&d&&(t.width!==
G||t.height!==d))throw new K("rasterCoded:decode","lerc decoded result has width or height different from specified in options");B=t.fileInfo.eofOffset;0===p&&(f=t.encodedMaskData,O=new N({width:t.width,height:t.height,pixels:[],pixelType:h,mask:t.maskData,statistics:[]}));p++;O.addData({pixels:t.pixelData,statistics:{minValue:t.minValue,maxValue:t.maxValue,noDataValue:t.noDataValue}});10<z-B&&(t=String.fromCharCode.apply(null,new Uint8Array(l,B,10)),B+=-1<t.indexOf("CntZ")?t.indexOf("CntZ"):0)}return O}
function F(l,w){if(!y.isPlatformLittleEndian)throw new K("rasterCoded:decode","lerc decoder is not supported on big endian platform");var G=0,d=w.offset||0,h=0;let p;let k;const f=w.eof||l.byteLength-10,B=[],{width:O,height:z}=w;for(w=0;d<f;){var t;var J=Y.Lerc2Codec.decode(l,{inputOffset:d,maskData:p,returnFileInfo:!0});if(O&&z&&(J.width!==O||J.height!==z))throw new K("rasterCoded:decode","lerc2 decoded result has width or height different from what's specified in options");d=J.fileInfo.eofOffset;
p=J.maskData;0===G&&(h=J.fileInfo.numValidPixel,k=new N({width:J.width,height:J.height,pixels:[],pixelType:J.fileInfo.pixelType,mask:p,statistics:[]}));J.fileInfo.mask&&0<J.fileInfo.mask.numBytes&&w++;p&&B.push(p);if(1<J.dimCount&&(null==(t=J.pixelData)?void 0:t.length)===J.width*J.height*J.dimCount){var V,T,ba,M;J.pixelData=J.pixelData.slice(-J.width*J.height);const L=null==(V=J.dimStats)?void 0:null==(T=V.minValues)?void 0:T[J.dimCount-1],S=null==(ba=J.dimStats)?void 0:null==(M=ba.maxValues)?void 0:
M[J.dimCount-1];null!=L&&null!=S&&(J.minValue=L,J.maxValue=S)}G++;k.addData({pixels:J.pixelData,statistics:{minValue:J.minValue,maxValue:J.maxValue}});10<f-d&&(J=String.fromCharCode.apply(null,new Uint8Array(l,d,10)),d+=-1<J.indexOf("Lerc")?J.indexOf("Lerc"):0)}d=G=l=0;if(1<w){d=k.width*k.height;p=new Uint8Array(d);p.set(B[0]);for(l=1;l<B.length;l++)for(h=B[l],G=0;G<d;G++)p[G]&=h[G];for(G=h=0;G<d;G++)h+=p[G];k.mask=p}k.validPixelCount=h;return k}function b(l,w){l=Y.decode(l,w.pyramidLevel||0);l=new N({width:l.width,
height:l.height,pixels:l.pixels,pixelType:l.pixelType.toLowerCase(),mask:l.mask,statistics:null});l.updateStatistics();return l}function n(l){l=Q.decode(l);l=new N({width:l.width,height:l.height,pixels:l.pixels,pixelType:"U8",mask:l.mask,statistics:null});l.updateStatistics();return l}function m(l,w){l=new Uint8Array(l);l=new c(l);const {width:G,height:d}=w;w=G*d;l=l.decode();let h=0;var p=0;let k;p=new Uint8Array(w);for(h=0;h<w;h++)p[h]=l[4*h+3];const f=new N({width:G,height:d,pixels:[],pixelType:"U8",
mask:p,statistics:[]});for(h=0;3>h;h++){k=new Uint8Array(w);for(p=0;p<w;p++)k[p]=l[4*p+h];f.addData({pixels:k})}f.updateStatistics();return f}function q(l,w,G,d){return v.apply(this,arguments)}function v(){v=r._asyncToGenerator(function*(l,w,G,d){l=yield(new C).decode(l,{applyJpegMask:!1,format:w,...G},d);l=new N(l);l.updateStatistics();return l});return v.apply(this,arguments)}function D(l){if(null==l)throw new K("rasterCodec:decode","parameter encodeddata is required.");l=new Uint8Array(l,0,10);
let w="";255===l[0]&&216===l[1]?w="jpg":137===l[0]&&80===l[1]&&78===l[2]&&71===l[3]?w="png":67===l[0]&&110===l[1]&&116===l[2]&&90===l[3]&&73===l[4]&&109===l[5]&&97===l[6]&&103===l[7]&&101===l[8]&&32===l[9]?w="lerc":76===l[0]&&101===l[1]&&114===l[2]&&99===l[3]&&50===l[4]&&32===l[5]?w="lerc2":73===l[0]&&73===l[1]&&42===l[2]&&0===l[3]||77===l[0]&&77===l[1]&&0===l[2]&&42===l[3]||73===l[0]&&73===l[1]&&43===l[2]&&0===l[3]||77===l[0]&&77===l[1]&&0===l[2]&&43===l[3]?w="tiff":71===l[0]&&73===l[1]&&70===l[2]?
w="gif":66===l[0]&&77===l[1]?w="bmp":-1<String.fromCharCode.apply(null,l).toLowerCase().indexOf("error")&&(w="error");return w}function x(l){let w=null;switch(l){case "lerc":w=H;break;case "lerc2":w=F;break;case "jpg":w=n;break;case "png":w=m;break;case "bsq":case "bip":w=(G,d)=>{{const {pixelTypeCtor:h}=A(d.pixelType),p=I.decode;G=p(G,{width:d.width,height:d.height,pixelType:h,format:l});d=new N({width:d.width,height:d.height,pixels:G.pixels,pixelType:d.pixelType,mask:G.mask,statistics:null});d.updateStatistics()}return d};
break;case "tiff":w=b;break;case "error":w=()=>{throw new K("rasterCodec:decode","input data contains error");};break;default:w=()=>{throw new K("rasterCodec:decode","unsupported raster format");}}return w}function A(l){let w=null,G=null;switch(l?l.toLowerCase():"f32"){case "u1":case "u2":case "u4":case "u8":G=255;w=Uint8Array;break;case "u16":G=G||65535;w=Uint16Array;break;case "u32":G=G||2**32-1;w=Uint32Array;break;case "s8":G=G||-128;w=Int8Array;break;case "s16":G=G||-32768;w=Int16Array;break;
case "s32":G=G||-(2**31);w=Int32Array;break;default:w=Float32Array}return{pixelTypeCtor:w,noDataValue:G}}function u(l,w=1){if(l){var {pixels:G,width:d,height:h,mask:p}=l;if(G&&0!==G.length){var k=G.length,f=d-1,B=h-1,O=[],z,t,J=N.getPixelArrayConstructor(l.pixelType);if(0===w){for(w=0;w<k;w++){var V=G[w];var T=new J(f*B);for(z=0;z<B;z++){var ba=z*d;for(t=0;t<f;t++)T[z*f+t]=V[ba+t]}O.push(T)}if(p){var M=new Uint8Array(f*B);for(z=0;z<B;z++)for(ba=z*d,t=0;t<f;t++)M[z*f+t]=p[ba+t]}}else{for(w=0;w<k;w++){V=
G[w];T=new J(f*B);for(z=0;z<B;z++)for(ba=z*d,t=0;t<f;t++)T[z*f+t]=(V[ba+t]+V[ba+t+1]+V[ba+d+t]+V[ba+d+t+1])/4;O.push(T)}if(p)for(M=new Uint8Array(f*B),z=0;z<B;z++)for(ba=z*d,t=0;t<f;t++)M[z*f+t]=Math.min.apply(null,[p[ba+t],p[ba+t+1],p[ba+d+t],p[ba+d+t+1]])}l.width=f;l.height=B;l.mask=M;l.pixels=O}}}function g(){g=r._asyncToGenerator(function*(l,w={},G){if(null==l)throw new K("rasterCodec:decode","missing encodeddata parameter.");let d=w.format&&w.format.toLowerCase();if(!("bsq"!==d&&"bip"!==d||null!=
w.width&&null!=w.height))throw new K("rasterCodec:decode","requires width and height in options parameter.");if("tiff"===d&&w.customOptions)return w=Y.decodeTileOrStrip(l,w.customOptions),w=new N({width:w.width,height:w.height,pixels:w.pixels,pixelType:w.pixelType.toLowerCase(),mask:w.mask,statistics:null}),w.updateStatistics(),w;if(!d||"bsq"!==d&&"bip"!==d)d=D(l);w.useCanvas&&E.has(d)?l=yield q(l,d,w,G):(G=x(d),w.isPoint&&(w={...w},w.width++,w.height++),l=G(l,w),w.isPoint&&u(l));return l});return g.apply(this,
arguments)}var c=function(l){function w(p){var k,f;this.data=p;this.pos=8;this.palette=[];this.imgData=[];this.transparency={};this.animation=null;this.text={};for(f=null;;){var B=this.readUInt32();var O=p=void 0;p=[];for(O=0;4>O;++O)p.push(String.fromCharCode(this.data[this.pos++]));p=p.join("");switch(p){case "IHDR":this.width=this.readUInt32();this.height=this.readUInt32();this.bits=this.data[this.pos++];this.colorType=this.data[this.pos++];this.compressionMethod=this.data[this.pos++];this.filterMethod=
this.data[this.pos++];this.interlaceMethod=this.data[this.pos++];break;case "acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||Infinity,frames:[]};break;case "PLTE":this.palette=this.read(B);break;case "fcTL":f&&this.animation.frames.push(f);this.pos+=4;f={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()};p=this.readUInt16();B=this.readUInt16()||100;f.delay=1E3*p/B;f.disposeOp=this.data[this.pos++];f.blendOp=this.data[this.pos++];
f.data=[];break;case "IDAT":case "fdAT":"fdAT"===p&&(this.pos+=4,B-=4);p=(null!=f?f.data:void 0)||this.imgData;for(O=0;0<=B?O<B:O>B;0<=B?++O:--O)p.push(this.data[this.pos++]);break;case "tRNS":this.transparency={};switch(this.colorType){case 3:this.transparency.indexed=this.read(B);B=255-this.transparency.indexed.length;if(0<B)for(p=0;0<=B?p<B:p>B;0<=B?++p:--p)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(B)[0];break;case 2:this.transparency.rgb=this.read(B)}break;
case "tEXt":O=this.read(B);B=O.indexOf(0);p=String.fromCharCode.apply(String,O.slice(0,B));this.text[p]=String.fromCharCode.apply(String,O.slice(B+1));break;case "IEND":f&&this.animation.frames.push(f);a:{switch(this.colorType){case 0:case 3:case 4:f=1;break a;case 2:case 6:f=3;break a}f=void 0}this.colors=f;this.hasAlphaChannel=4===(k=this.colorType)||6===k;k=this.colors+(this.hasAlphaChannel?1:0);this.pixelBitlength=this.bits*k;a:{switch(this.colors){case 1:k="DeviceGray";break a;case 3:k="DeviceRGB";
break a}k=void 0}this.colorSpace=k;this.imgData=new Uint8Array(this.imgData);return;default:this.pos+=B}this.pos+=4;if(this.pos>this.data.length)throw Error("Incomplete or corrupt PNG file");}}var G;w.load=function(p,k,f){"function"===typeof k&&(f=k);var B=new XMLHttpRequest;B.open("GET",p,!0);B.responseType="arraybuffer";B.onload=function(){var O=new Uint8Array(B.response||B.mozResponseArrayBuffer);O=new w(O);"function"===typeof(null!=k?k.getContext:void 0)&&O.render(k);return"function"===typeof f?
f(O):void 0};return B.send(null)};w.prototype.read=function(p){var k;var f=[];for(k=0;0<=p?k<p:k>p;0<=p?++k:--k)f.push(this.data[this.pos++]);return f};w.prototype.readUInt32=function(){var p=this.data[this.pos++]<<24;var k=this.data[this.pos++]<<16;var f=this.data[this.pos++]<<8;var B=this.data[this.pos++];return p|k|f|B};w.prototype.readUInt16=function(){var p=this.data[this.pos++]<<8;var k=this.data[this.pos++];return p|k};w.prototype.decodePixels=function(p){var k,f,B,O,z,t,J,V;null==p&&(p=this.imgData);
if(0===p.length)return new Uint8Array(0);p=new U.Zlib(p);p=p.getBytes();var T=this.pixelBitlength/8;var ba=T*this.width;var M=new Uint8Array(ba*this.height);var L=p.length;for(f=O=z=0;O<L;){switch(p[O++]){case 0:for(B=k=0;k<ba;B=k+=1)M[f++]=p[O++];break;case 1:for(B=t=0;t<ba;B=t+=1){k=p[O++];var S=B<T?0:M[f-T];M[f++]=(k+S)%256}break;case 2:for(B=S=0;S<ba;B=S+=1){k=p[O++];var X=(B-B%T)/T;t=z&&M[(z-1)*ba+X*T+B%T];M[f++]=(t+k)%256}break;case 3:for(B=V=0;V<ba;B=V+=1)k=p[O++],X=(B-B%T)/T,S=B<T?0:M[f-T],
t=z&&M[(z-1)*ba+X*T+B%T],M[f++]=(k+Math.floor((S+t)/2))%256;break;case 4:for(B=V=0;V<ba;B=V+=1){k=p[O++];X=(B-B%T)/T;S=B<T?0:M[f-T];0===z?t=J=0:(t=M[(z-1)*ba+X*T+B%T],J=X&&M[(z-1)*ba+(X-1)*T+B%T]);var aa=S+t-J;B=Math.abs(aa-S);X=Math.abs(aa-t);aa=Math.abs(aa-J);S=B<=X&&B<=aa?S:X<=aa?t:J;M[f++]=(k+S)%256}break;default:throw Error("Invalid filter algorithm: "+p[O-1]);}z++}return M};w.prototype.decodePalette=function(){var p,k,f,B;var O=this.palette;var z=this.transparency.indexed||[];var t=new Uint8Array((z.length||
0)+O.length);var J=0;O.length;var V=k=p=0;for(f=O.length;k<f;V=k+=3)t[J++]=O[V],t[J++]=O[V+1],t[J++]=O[V+2],t[J++]=null!=(B=z[p++])?B:255;return t};w.prototype.copyToImageData=function(p,k){var f,B;var O=this.colors;var z=null;var t=this.hasAlphaChannel;this.palette.length&&(z=null!=(f=this._decodedPalette)?f:this._decodedPalette=this.decodePalette(),O=4,t=!0);p=p.data||p;var J=p.length;var V=z||k;f=B=0;if(1===O)for(;f<J;)O=z?4*k[f/4]:B,B=V[O++],p[f++]=B,p[f++]=B,p[f++]=B,p[f++]=t?V[O++]:this.transparency.grayscale&&
this.transparency.grayscale===B?0:255,B=O;else for(;f<J;)O=z?4*k[f/4]:B,p[f++]=V[O++],p[f++]=V[O++],p[f++]=V[O++],p[f++]=t?V[O++]:this.transparency.rgb&&this.transparency.rgb[1]===V[O-3]&&this.transparency.rgb[3]===V[O-2]&&this.transparency.rgb[5]===V[O-1]?0:255,B=O};w.prototype.decode=function(){var p=new Uint8Array(this.width*this.height*4);this.copyToImageData(p,this.decodePixels());return p};var d=(G=l.document&&l.document.createElement("canvas"))&&G.getContext("2d");var h=function(p){d.width=
p.width;d.height=p.height;d.clearRect(0,0,p.width,p.height);d.putImageData(p,0,0);p=new Image;p.src=G.toDataURL();return p};w.prototype.decodeFrames=function(p){var k,f;if(this.animation){var B=this.animation.frames;var O=[];var z=k=0;for(f=B.length;k<f;z=++k){z=B[z];var t=p.createImageData(z.width,z.height);var J=this.decodePixels(new Uint8Array(z.data));this.copyToImageData(t,J);z.imageData=t;O.push(z.image=h(t))}return O}};w.prototype.renderFrame=function(p,k){var f=this.animation.frames;var B=
f[k];f=f[k-1];0===k&&p.clearRect(0,0,this.width,this.height);1===(null!=f?f.disposeOp:void 0)?p.clearRect(f.xOffset,f.yOffset,f.width,f.height):2===(null!=f?f.disposeOp:void 0)&&p.putImageData(f.imageData,f.xOffset,f.yOffset);0===B.blendOp&&p.clearRect(B.xOffset,B.yOffset,B.width,B.height);return p.drawImage(B.image,B.xOffset,B.yOffset)};w.prototype.animate=function(p){var k,f=this;var B=0;var O=this.animation;var z=O.numFrames;var t=O.frames;var J=O.numPlays;return(k=function(){var V=B++%z;var T=
t[V];f.renderFrame(p,V);if(1<z&&B/z<J)return f.animation._timeout=setTimeout(k,T.delay)})()};w.prototype.stopAnimation=function(){var p;return clearTimeout(null!=(p=this.animation)?p._timeout:void 0)};w.prototype.render=function(p){p._png&&p._png.stopAnimation();p._png=this;p.width=this.width;p.height=this.height;p=p.getContext("2d");if(this.animation)return this.decodeFrames(p),this.animate(p);var k=p.createImageData(this.width,this.height);this.copyToImageData(k,this.decodePixels());return p.putImageData(k,
0,0)};return w}(self);const E=new Set(["jpg","png","bmp","gif"]);R.decode=function(l){return g.apply(this,arguments)};R.decodeLerc2=F;R.getFormat=function(l){l=D(l);"lerc2"===l?l="lerc":"error"===l&&(l="");return l};Object.defineProperty(R,"__esModule",{value:!0})})},"esri/layers/support/rasterFormats/ImageCanvasDecoder":function(){define(["../../../core/Error","../../../core/promiseUtils","../../../chunks/Zlib"],function(R,r,K){return function(){function N(C){C&&(this.canvas=C.canvas,this.ctx=C.ctx||
C.canvas&&C.canvas.getContext("2d"))}N.prototype.decode=function(C,Q,Y){if(!C||10>C.byteLength)throw new R("imagecanvasdecoder: decode","required a valid encoded data as input.");let {width:W,height:U,format:I}=Q;const {applyJpegMask:y}=Q;if(y&&(!W||!U))throw new R("imagecanvasdecoder: decode","image width and height are needed to apply jpeg mask directly to canvas");return new Promise((H,F)=>{let b=null;"jpg"===I&&y&&(b=N.getMask(C,{width:W,height:U}));const n=new Blob([new Uint8Array(C)],{type:"jpg"===
"image/"+I?"jpeg":I}),m=URL.createObjectURL(n),q=new Image;let v;q.src=m;q.onload=()=>{URL.revokeObjectURL(m);if(r.isAborted(Y))F(r.createAbortError());else{W=q.width;U=q.height;if(this.canvas){if(this.canvas.width!==W||this.canvas.height!==U)this.canvas.width=W,this.canvas.height=U;this.ctx.clearRect(0,0,W,U)}else this.canvas=document.createElement("canvas"),this.canvas.width=W,this.canvas.height=U,this.ctx=this.canvas.getContext("2d");this.ctx.drawImage(q,0,0);var D=this.ctx.getImageData(0,0,W,
U);v=D.data;var x;if(Q.renderOnCanvas){if(b)for(x=0;x<b.length;x++)v[4*x+3]=b[x]?255:0;this.ctx.putImageData(D,0,0);H(null)}else{D=W*U;var A=new Uint8Array(D),u=new Uint8Array(D),g=new Uint8Array(D);if(b)for(x=0;x<D;x++)A[x]=v[4*x],u[x]=v[4*x+1],g[x]=v[4*x+2];else for(b=new Uint8Array(D),x=0;x<D;x++)A[x]=v[4*x],u[x]=v[4*x+1],g[x]=v[4*x+2],b[x]=v[4*x+3];H({width:W,height:U,pixels:[A,u,g],mask:b,pixelType:"u8"})}}};q.onerror=()=>{URL.revokeObjectURL(m);F("cannot load image")}})};N.getMask=function(C,
Q){let Y=null;try{var W=new Uint8Array(C);C=0;var U=W.length-2;for(C=Math.ceil(W.length/2);C<U&&(255!==W[C]||217!==W[C+1]);C++);C+=2;if(C<W.length-1){const I=(new K.Zlib(W.subarray(C))).getBytes();Y=new Uint8Array(Q.width*Q.height);Q=0;for(W=0;W<I.length;W++)for(U=7;0<=U;U--)Y[Q++]=I[W]>>U&1}}catch(I){}return Y};return N}()})},"esri/chunks/Zlib":function(){define(["exports"],function(R){var r={exports:{}};(function(K){(function(N){N=N();void 0!==N&&(K.exports=N)})(function(){var N=function(){function C(){this.bufferLength=
this.pos=0;this.eof=!1;this.buffer=null}C.prototype={ensureBuffer:function(Q){var Y=this.buffer,W=Y?Y.byteLength:0;if(Q<W)return Y;for(var U=512;U<Q;)U<<=1;Q=new Uint8Array(U);for(U=0;U<W;++U)Q[U]=Y[U];return this.buffer=Q},getByte:function(){for(var Q=this.pos;this.bufferLength<=Q;){if(this.eof)return null;this.readBlock()}return this.buffer[this.pos++]},getBytes:function(Q){var Y=this.pos;if(Q){this.ensureBuffer(Y+Q);for(Q=Y+Q;!this.eof&&this.bufferLength<Q;)this.readBlock();var W=this.bufferLength;
Q>W&&(Q=W)}else{for(;!this.eof;)this.readBlock();Q=this.bufferLength}this.pos=Q;return this.buffer.subarray(Y,Q)},lookChar:function(){for(var Q=this.pos;this.bufferLength<=Q;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos])},getChar:function(){for(var Q=this.pos;this.bufferLength<=Q;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos++])},makeSubStream:function(Q,Y,W){for(var U=Q+Y;this.bufferLength<=U&&!this.eof;)this.readBlock();
return new Stream(this.buffer,Q,Y,W)},skip:function(Q){Q||(Q=1);this.pos+=Q},reset:function(){this.pos=0}};return C}();return function(){function C(H){throw Error(H);}function Q(H){var F=0,b=H[F++],n=H[F++];-1!=b&&-1!=n||C("Invalid header in flate stream");8!=(b&15)&&C("Unknown compression method in flate stream");0!=((b<<8)+n)%31&&C("Bad FCHECK in flate stream");n&32&&C("FDICT bit set in flate stream");this.bytes=H;this.bytesPos=F;this.codeBuf=this.codeSize=0;N.call(this)}if(!self||!self.Uint32Array)return null;
var Y=new Uint32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),W=new Uint32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),U=new Uint32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),I=[new Uint32Array([459008,524368,
524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59E4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,
524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,
524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,
524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,
524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,
524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,
524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,
524335,590015,524303,524431,524367,590079]),9],y=[new Uint32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5];Q.prototype=Object.create(N.prototype);Q.prototype.getBits=function(H){for(var F=this.codeSize,b=this.codeBuf,n=this.bytes,m=this.bytesPos,q;F<H;)"undefined"==typeof(q=n[m++])&&C("Bad encoding in flate stream"),b|=q<<
F,F+=8;this.codeBuf=b>>H;this.codeSize=F-=H;this.bytesPos=m;return b&(1<<H)-1};Q.prototype.getCode=function(H){var F=H[0],b=H[1];H=this.codeSize;for(var n=this.codeBuf,m=this.bytes,q=this.bytesPos;H<b;){var v;"undefined"==typeof(v=m[q++])&&C("Bad encoding in flate stream");n|=v<<H;H+=8}b=F[n&(1<<b)-1];F=b>>16;b&=65535;(0==H||H<F||0==F)&&C("Bad encoding in flate stream");this.codeBuf=n>>F;this.codeSize=H-F;this.bytesPos=q;return b};Q.prototype.generateHuffmanTable=function(H){for(var F=H.length,b=
0,n=0;n<F;++n)H[n]>b&&(b=H[n]);for(var m=1<<b,q=new Uint32Array(m),v=1,D=0,x=2;v<=b;++v,D<<=1,x<<=1)for(var A=0;A<F;++A)if(H[A]==v){var u=0,g=D;for(n=0;n<v;++n)u=u<<1|g&1,g>>=1;for(n=u;n<m;n+=x)q[n]=v<<16|A;++D}return[q,b]};Q.prototype.readBlock=function(){function H(u,g,c,E,l){for(u=u.getBits(c)+E;0<u--;)g[D++]=l}var F=this.getBits(3);F&1&&(this.eof=!0);F>>=1;if(0==F){var b=this.bytes,n=this.bytesPos,m;"undefined"==typeof(m=b[n++])&&C("Bad block header in flate stream");var q=m;"undefined"==typeof(m=
b[n++])&&C("Bad block header in flate stream");q|=m<<8;"undefined"==typeof(m=b[n++])&&C("Bad block header in flate stream");F=m;"undefined"==typeof(m=b[n++])&&C("Bad block header in flate stream");(F|m<<8)!=(~q&65535)&&C("Bad uncompressed block length in flate stream");this.codeSize=this.codeBuf=0;m=this.bufferLength;F=this.ensureBuffer(m+q);this.bufferLength=q=m+q;for(var v=m;v<q;++v){if("undefined"==typeof(m=b[n++])){this.eof=!0;break}F[v]=m}this.bytesPos=n}else{if(1==F)n=I,m=y;else if(2==F){F=
this.getBits(5)+257;m=this.getBits(5)+1;b=this.getBits(4)+4;n=Array(Y.length);for(var D=0;D<b;)n[Y[D++]]=this.getBits(3);n=this.generateHuffmanTable(n);D=b=0;m=F+m;for(q=Array(m);D<m;)v=this.getCode(n),16==v?H(this,q,2,3,b):17==v?H(this,q,3,3,b=0):18==v?H(this,q,7,11,b=0):q[D++]=b=v;n=this.generateHuffmanTable(q.slice(0,F));m=this.generateHuffmanTable(q.slice(F,m))}else C("Unknown block type in flate stream");q=(F=this.buffer)?F.length:0;for(v=this.bufferLength;;){var x=this.getCode(n);if(256>x)v+
1>=q&&(F=this.ensureBuffer(v+1),q=F.length),F[v++]=x;else{if(256==x){this.bufferLength=v;break}x-=257;x=W[x];var A=x>>16;0<A&&(A=this.getBits(A));b=(x&65535)+A;x=this.getCode(m);x=U[x];A=x>>16;0<A&&(A=this.getBits(A));x=(x&65535)+A;v+b>=q&&(F=this.ensureBuffer(v+b),q=F.length);for(A=0;A<b;++A,++v)F[v]=F[v-x]}}}};return Q}()})})(r);R.Zlib=r.exports})},"esri/layers/support/rasterFormats/JpgPlus":function(){define(["../../../chunks/Jpg","../../../chunks/Zlib"],function(R,r){return function(){function K(){}
K.decode=function(N){var C=new Uint8Array(N);N=new R.JpegImage;N.parse(C);const {width:Q,height:Y,numComponents:W,eof:U}=N;N=N.getData(Q,Y,!0);let I;const y=Q*Y;let H=0;var F=0,b=0;if(U<C.length-1)for(C=(new r.Zlib(C.subarray(U))).getBytes(),I=new Uint8Array(y),H=F=0;H<C.length;H++)for(b=7;0<=b;b--)I[F++]=C[H]>>b&1;C=null;if(1===W)C=[N,N,N];else{C=[];for(H=0;3>H;H++)b=new Uint8Array(y),C.push(b);for(F=b=0;F<y;F++)for(H=0;3>H;H++)C[H][F]=N[b++]}return{width:Q,height:Y,pixels:C,mask:I}};return K}()})},
"esri/chunks/Jpg":function(){define(["exports"],function(R){var r={exports:{}};(function(K){(function(N){N=N();void 0!==N&&(K.exports=N)})(function(){var N=function(){function C(Q){this.message="JPEG error: "+Q}C.prototype=Error();C.prototype.name="JpegError";return C.constructor=C}();return function(){function C(){this.decodeTransform=null;this.colorTransform=-1}function Q(y,H){for(var F=0,b=[],n,m,q=16;0<q&&!y[q-1];)q--;b.push({children:[],index:0});var v=b[0],D;for(n=0;n<q;n++){for(m=0;m<y[n];m++){v=
b.pop();for(v.children[v.index]=H[F];0<v.index;)v=b.pop();v.index++;for(b.push(v);b.length<=n;)b.push(D={children:[],index:0}),v.children[v.index]=D.children,v=D;F++}n+1<q&&(b.push(D={children:[],index:0}),v.children[v.index]=D.children,v=D)}return b[0].children}function Y(y,H,F,b,n,m,q,v,D){function x(){if(0<k)return k--,p>>k&1;p=y[H++];if(255===p){var aa=y[H++];if(aa)throw new N("unexpected marker "+(p<<8|aa).toString(16));}k=7;return p>>>7}function A(aa){for(;;){aa=aa[x()];if("number"===typeof aa)return aa;
if("object"!==typeof aa)throw new N("invalid huffman sequence");}}function u(aa){for(var fa=0;0<aa;)fa=fa<<1|x(),aa--;return fa}function g(aa){if(1===aa)return 1===x()?1:-1;var fa=u(aa);return fa>=1<<aa-1?fa:fa+(-1<<aa)+1}function c(aa,fa){var a=A(aa.huffmanTableDC);a=0===a?0:g(a);aa.blockData[fa]=aa.pred+=a;for(a=1;64>a;){var e=A(aa.huffmanTableAC),P=e&15;e>>=4;if(0===P){if(15>e)break;a+=16}else a+=e,aa.blockData[fa+I[a]]=g(P),a++}}function E(aa,fa){var a=A(aa.huffmanTableDC);a=0===a?0:g(a)<<D;aa.blockData[fa]=
aa.pred+=a}function l(aa,fa){aa.blockData[fa]|=x()<<D}function w(aa,fa){if(0<f)f--;else for(var a=m;a<=q;){var e=A(aa.huffmanTableAC),P=e&15;e>>=4;if(0===P){if(15>e){f=u(e)+(1<<e)-1;break}a+=16}else a+=e,aa.blockData[fa+I[a]]=g(P)*(1<<D),a++}}function G(aa,fa){for(var a=m,e=0,P;a<=q;){P=I[a];switch(B){case 0:e=A(aa.huffmanTableAC);P=e&15;e>>=4;if(0===P)15>e?(f=u(e)+(1<<e),B=4):(e=16,B=1);else{if(1!==P)throw new N("invalid ACn encoding");O=g(P);B=e?2:3}continue;case 1:case 2:aa.blockData[fa+P]?aa.blockData[fa+
P]+=x()<<D:(e--,0===e&&(B=2===B?3:0));break;case 3:aa.blockData[fa+P]?aa.blockData[fa+P]+=x()<<D:(aa.blockData[fa+P]=O<<D,B=0);break;case 4:aa.blockData[fa+P]&&(aa.blockData[fa+P]+=x()<<D)}a++}4===B&&(f--,0===f&&(B=0))}var d=F.mcusPerLine,h=H,p=0,k=0,f=0,B=0,O,z=b.length,t,J,V,T;v=F.progressive?0===m?0===v?E:l:0===v?w:G:c;var ba=0;F=1===z?b[0].blocksPerLine*b[0].blocksPerColumn:d*F.mcusPerColumn;for(var M,L;ba<F;){var S=n?Math.min(F-ba,n):F;for(t=0;t<z;t++)b[t].pred=0;f=0;if(1===z){var X=b[0];for(T=
0;T<S;T++)v(X,64*((X.blocksPerLine+1)*(ba/X.blocksPerLine|0)+ba%X.blocksPerLine)),ba++}else for(T=0;T<S;T++){for(t=0;t<z;t++)for(X=b[t],M=X.h,L=X.v,J=0;J<L;J++)for(V=0;V<M;V++)v(X,64*((X.blocksPerLine+1)*((ba/d|0)*X.v+J)+(ba%d*X.h+V)));ba++}k=0;(X=U(y,H))&&X.invalid&&(console.log("decodeScan - unexpected MCU data, next marker is: "+X.invalid),H=X.offset);X=X&&X.marker;if(!X||65280>=X)throw new N("marker was not found");if(65488<=X&&65495>=X)H+=2;else break}(X=U(y,H))&&X.invalid&&(console.log("decodeScan - unexpected Scan data, next marker is: "+
X.invalid),H=X.offset);return H-h}function W(y,H){y=H.blocksPerLine;for(var F=H.blocksPerColumn,b=new Int16Array(64),n=0;n<F;n++)for(var m=0;m<y;m++){var q=void 0,v=void 0,D=void 0,x=void 0,A=void 0,u=void 0,g=void 0,c=void 0,E=A=u=x=v=q=void 0,l=void 0,w=void 0,G=void 0,d=64*((H.blocksPerLine+1)*n+m),h=b,p=H.quantizationTable,k=H.blockData;if(!p)throw new N("missing required Quantization Table.");for(var f=0;64>f;f+=8)q=k[d+f],c=k[d+f+1],g=k[d+f+2],u=k[d+f+3],A=k[d+f+4],x=k[d+f+5],D=k[d+f+6],v=k[d+
f+7],q*=p[f],0===(c|g|u|A|x|D|v)?(q=5793*q+512>>10,h[f]=q,h[f+1]=q,h[f+2]=q,h[f+3]=q,h[f+4]=q,h[f+5]=q,h[f+6]=q,h[f+7]=q):(c*=p[f+1],g*=p[f+2],u*=p[f+3],A*=p[f+4],x*=p[f+5],D*=p[f+6],v*=p[f+7],G=5793*q+128>>8,w=5793*A+128>>8,l=g,E=D,A=2896*(c-v)+128>>8,v=2896*(c+v)+128>>8,u<<=4,x<<=4,G=G+w+1>>1,w=G-w,q=3784*l+1567*E+128>>8,l=1567*l-3784*E+128>>8,E=q,A=A+x+1>>1,x=A-x,v=v+u+1>>1,u=v-u,G=G+E+1>>1,E=G-E,w=w+l+1>>1,l=w-l,q=2276*A+3406*v+2048>>12,A=3406*A-2276*v+2048>>12,v=q,q=799*u+4017*x+2048>>12,u=4017*
u-799*x+2048>>12,x=q,h[f]=G+v,h[f+7]=G-v,h[f+1]=w+x,h[f+6]=w-x,h[f+2]=l+u,h[f+5]=l-u,h[f+3]=E+A,h[f+4]=E-A);for(p=0;8>p;++p)q=h[p],c=h[p+8],g=h[p+16],u=h[p+24],A=h[p+32],x=h[p+40],D=h[p+48],v=h[p+56],0===(c|g|u|A|x|D|v)?(q=5793*q+8192>>14,q=-2040>q?0:2024<=q?255:q+2056>>4,k[d+p]=q,k[d+p+8]=q,k[d+p+16]=q,k[d+p+24]=q,k[d+p+32]=q,k[d+p+40]=q,k[d+p+48]=q,k[d+p+56]=q):(G=5793*q+2048>>12,w=5793*A+2048>>12,l=g,E=D,A=2896*(c-v)+2048>>12,v=2896*(c+v)+2048>>12,G=(G+w+1>>1)+4112,w=G-w,q=3784*l+1567*E+2048>>
12,l=1567*l-3784*E+2048>>12,E=q,A=A+x+1>>1,x=A-x,v=v+u+1>>1,u=v-u,G=G+E+1>>1,E=G-E,w=w+l+1>>1,l=w-l,q=2276*A+3406*v+2048>>12,A=3406*A-2276*v+2048>>12,v=q,q=799*u+4017*x+2048>>12,u=4017*u-799*x+2048>>12,x=q,q=G+v,v=G-v,c=w+x,D=w-x,g=l+u,x=l-u,u=E+A,A=E-A,q=16>q?0:4080<=q?255:q>>4,c=16>c?0:4080<=c?255:c>>4,g=16>g?0:4080<=g?255:g>>4,u=16>u?0:4080<=u?255:u>>4,A=16>A?0:4080<=A?255:A>>4,x=16>x?0:4080<=x?255:x>>4,D=16>D?0:4080<=D?255:D>>4,v=16>v?0:4080<=v?255:v>>4,k[d+p]=q,k[d+p+8]=c,k[d+p+16]=g,k[d+p+24]=
u,k[d+p+32]=A,k[d+p+40]=x,k[d+p+48]=D,k[d+p+56]=v)}return H.blockData}function U(y,H,F){var b=y.length-1;F=F<H?F:H;if(H>=b)return null;var n=y[H]<<8|y[H+1];if(65472<=n&&65534>=n)return{invalid:null,marker:n,offset:H};for(H=y[F]<<8|y[F+1];!(65472<=H&&65534>=H);){if(++F>=b)return null;H=y[F]<<8|y[F+1]}return{invalid:n.toString(16),marker:H,offset:F}}if(!self||!self.Uint8ClampedArray)return null;var I=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,
28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]);C.prototype={parse:function(y){function H(){var p=y[n]<<8|y[n+1];n+=2;return p}function F(){var p=H();p=n+p-2;var k=U(y,p,n);k&&k.invalid&&(console.log("readDataBlock - incorrect length, next marker is: "+k.invalid),p=k.offset);p=y.subarray(n,p);n+=p.length;return p}function b(p){for(var k=Math.ceil(p.samplesPerLine/8/p.maxH),f=Math.ceil(p.scanLines/8/p.maxV),B=0;B<p.components.length;B++){h=p.components[B];
var O=Math.ceil(Math.ceil(p.samplesPerLine/8)*h.h/p.maxH),z=Math.ceil(Math.ceil(p.scanLines/8)*h.v/p.maxV);h.blockData=new Int16Array(64*f*h.v*(k*h.h+1));h.blocksPerLine=O;h.blocksPerColumn=z}p.mcusPerLine=k;p.mcusPerColumn=f}var n=0,m=null,q=null,v=[],D=[],x=[],A=H();if(65496!==A)throw new N("SOI not found");for(A=H();65497!==A;){switch(A){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var u=
F();65504===A&&74===u[0]&&70===u[1]&&73===u[2]&&70===u[3]&&0===u[4]&&(m={version:{major:u[5],minor:u[6]},densityUnits:u[7],xDensity:u[8]<<8|u[9],yDensity:u[10]<<8|u[11],thumbWidth:u[12],thumbHeight:u[13],thumbData:u.subarray(14,14+3*u[12]*u[13])});65518===A&&65===u[0]&&100===u[1]&&111===u[2]&&98===u[3]&&101===u[4]&&(q={version:u[5]<<8|u[6],flags0:u[7]<<8|u[8],flags1:u[9]<<8|u[10],transformCode:u[11]});break;case 65499:A=H()+n-2;for(var g;n<A;){var c=y[n++],E=new Uint16Array(64);if(0===c>>4)for(u=
0;64>u;u++)g=I[u],E[g]=y[n++];else if(1===c>>4)for(u=0;64>u;u++)g=I[u],E[g]=H();else throw new N("DQT - invalid table spec");v[c&15]=E}break;case 65472:case 65473:case 65474:if(l)throw new N("Only single frame JPEGs supported");H();var l={};l.extended=65473===A;l.progressive=65474===A;l.precision=y[n++];l.scanLines=H();l.samplesPerLine=H();l.components=[];l.componentIds={};u=y[n++];for(A=E=c=0;A<u;A++){g=y[n];var w=y[n+1]>>4;var G=y[n+1]&15;c<w&&(c=w);E<G&&(E=G);w=l.components.push({h:w,v:G,quantizationId:y[n+
2],quantizationTable:null});l.componentIds[g]=w-1;n+=3}l.maxH=c;l.maxV=E;b(l);break;case 65476:g=H();for(A=2;A<g;){c=y[n++];E=new Uint8Array(16);for(u=w=0;16>u;u++,n++)w+=E[u]=y[n];G=new Uint8Array(w);for(u=0;u<w;u++,n++)G[u]=y[n];A+=17+w;(0===c>>4?x:D)[c&15]=Q(E,G)}break;case 65501:H();var d=H();break;case 65498:H();g=y[n++];u=[];for(A=0;A<g;A++){c=l.componentIds[y[n++]];var h=l.components[c];c=y[n++];h.huffmanTableDC=x[c>>4];h.huffmanTableAC=D[c&15];u.push(h)}A=y[n++];g=y[n++];c=y[n++];A=Y(y,n,
l,u,d,A,g,c>>4,c&15);n+=A;break;case 65535:255!==y[n]&&n--;break;default:if(255===y[n-3]&&192<=y[n-2]&&254>=y[n-2])n-=3;else throw new N("unknown marker "+A.toString(16));}A=H()}this.width=l.samplesPerLine;this.height=l.scanLines;this.jfif=m;this.eof=n;this.adobe=q;this.components=[];for(A=0;A<l.components.length;A++){h=l.components[A];if(m=v[h.quantizationId])h.quantizationTable=m;this.components.push({output:W(l,h),scaleX:h.h/l.maxH,scaleY:h.v/l.maxV,blocksPerLine:h.blocksPerLine,blocksPerColumn:h.blocksPerColumn})}this.numComponents=
this.components.length},_getLinearizedBlockData:function(y,H){var F=this.width/y,b=this.height/H,n,m,q=0,v=this.components.length,D=y*H*v,x=new Uint8ClampedArray(D),A=new Uint32Array(y);for(m=0;m<v;m++){var u=this.components[m];var g=u.scaleX*F;var c=u.scaleY*b;q=m;var E=u.output;var l=u.blocksPerLine+1<<3;for(n=0;n<y;n++)u=0|n*g,A[n]=(u&4294967288)<<3|u&7;for(g=0;g<H;g++)for(u=0|g*c,u=l*(u&4294967288)|(u&7)<<3,n=0;n<y;n++)x[q]=E[u+A[n]],q+=v}if(H=this.decodeTransform)for(m=0;m<D;)for(y=u=0;u<v;u++,
m++,y+=2)x[m]=(x[m]*H[y]>>8)+H[y+1];return x},_isColorConversionNeeded:function(){return this.adobe?!!this.adobe.transformCode:3===this.numComponents?0===this.colorTransform?!1:!0:1===this.colorTransform?!0:!1},_convertYccToRgb:function(y){for(var H,F,b,n=0,m=y.length;n<m;n+=3)H=y[n],F=y[n+1],b=y[n+2],y[n]=H-179.456+1.402*b,y[n+1]=H+135.459-.344*F-.714*b,y[n+2]=H-226.816+1.772*F;return y},_convertYcckToRgb:function(y){for(var H,F,b,n,m=0,q=0,v=y.length;q<v;q+=4)H=y[q],F=y[q+1],b=y[q+2],n=y[q+3],y[m++]=
-122.67195406894+F*(-6.60635669420364E-5*F+4.37130475926232E-4*b-5.4080610064599E-5*H+4.8449797120281E-4*n-.154362151871126)+b*(-9.57964378445773E-4*b+8.17076911346625E-4*H-.00477271405408747*n+1.53380253221734)+H*(9.61250184130688E-4*H-.00266257332283933*n+.48357088451265)+n*(-3.36197177618394E-4*n+.484791561490776),y[m++]=107.268039397724+F*(2.19927104525741E-5*F-6.40992018297945E-4*b+6.59397001245577E-4*H+4.26105652938837E-4*n-.176491792462875)+b*(-7.78269941513683E-4*b+.00130872261408275*H+7.70482631801132E-4*
n-.151051492775562)+H*(.00126935368114843*H-.00265090189010898*n+.25802910206845)+n*(-3.18913117588328E-4*n-.213742400323665),y[m++]=-20.810012546947+F*(-5.70115196973677E-4*F-2.63409051004589E-5*b+.0020741088115012*H-.00288260236853442*n+.814272968359295)+b*(-1.53496057440975E-5*b-1.32689043961446E-4*H+5.60833691242812E-4*n-.195152027534049)+H*(.00174418132927582*H-.00255243321439347*n+.116935020465145)+n*(-3.43531996510555E-4*n+.24165260232407);return y},_convertYcckToCmyk:function(y){for(var H,
F,b,n=0,m=y.length;n<m;n+=4)H=y[n],F=y[n+1],b=y[n+2],y[n]=434.456-H-1.402*b,y[n+1]=119.541-H+.344*F+.714*b,y[n+2]=481.816-H-1.772*F;return y},_convertCmykToRgb:function(y){for(var H,F,b,n,m=0,q=1/255,v=0,D=y.length;v<D;v+=4)H=y[v]*q,F=y[v+1]*q,b=y[v+2]*q,n=y[v+3]*q,y[m++]=255+H*(-4.387332384609988*H+54.48615194189176*F+18.82290502165302*b+212.25662451639585*n-285.2331026137004)+F*(1.7149763477362134*F-5.6096736904047315*b-17.873870861415444*n-5.497006427196366)+b*(-2.5217340131683033*b-21.248923337353073*
n+17.5119270841813)-n*(21.86122147463605*n+189.48180835922747),y[m++]=255+H*(8.841041422036149*H+60.118027045597366*F+6.871425592049007*b+31.159100130055922*n-79.2970844816548)+F*(-15.310361306967817*F+17.575251261109482*b+131.35250912493976*n-190.9453302588951)+b*(4.444339102852739*b+9.8632861493405*n-24.86741582555878)-n*(20.737325471181034*n+187.80453709719578),y[m++]=255+H*(.8842522430003296*H+8.078677503112928*F+30.89978309703729*b-.23883238689178934*n-14.183576799673286)+F*(10.49593273432072*
F+63.02378494754052*b+50.606957656360734*n-112.23884253719248)+b*(.03296041114873217*b+115.60384449646641*n-193.58209356861505)-n*(22.33816807309886*n+180.12613974708367);return y},getData:function(y,H,F){if(4<this.numComponents)throw new N("Unsupported color mode");y=this._getLinearizedBlockData(y,H);if(1===this.numComponents&&F){F=y.length;H=new Uint8ClampedArray(3*F);for(var b=0,n=0;n<F;n++){var m=y[n];H[b++]=m;H[b++]=m;H[b++]=m}return H}if(3===this.numComponents&&this._isColorConversionNeeded())return this._convertYccToRgb(y);
if(4===this.numComponents){if(this._isColorConversionNeeded())return F?this._convertYcckToRgb(y):this._convertYcckToCmyk(y);if(F)return this._convertCmykToRgb(y)}return y}};return C}()})})(r);R.JpegImage=r.exports})},"esri/chunks/TiffDecoder":function(){define("exports ../layers/support/rasterDatasets/byteStreamUtils ./Jpg ../layers/support/rasterFormats/Lzw ../layers/support/rasterFormats/TiffTags ../layers/support/rasterFormats/utils ./Zlib".split(" "),function(R,r,K,N,C,Q,Y){function W(k,f){let B=
"unknown";3===k?B="f32":1===k?1===f?B="u1":2===f?B="u2":4===f?B="u4":8>=f?B="u8":16>=f?B="u16":32>=f&&(B="u32"):2===k&&(8>=f?B="s8":16>=f?B="s16":32>=f&&(B="s32"));return B}function U(k){let f=null;switch(k?k.toLowerCase():"f32"){case "u1":case "u2":case "u4":case "u8":f=Uint8Array;break;case "u16":f=Uint16Array;break;case "u32":f=Uint32Array;break;case "s8":f=Int8Array;break;case "s16":f=Int16Array;break;case "s32":f=Int32Array;break;default:f=Float32Array}return f}function I(k,f){return{x:f[0]*
k.x+f[1]*k.y+f[2],y:f[3]*k.x+f[4]*k.y+f[5]}}function y(k,f){var B;return null==(B=k.get(f))?void 0:B.values}function H(k,f){var B;return null==(B=k.get(f))?void 0:B.values}function F(k,f){var B;return null==(B=k.get(f))?void 0:B.values[0]}function b(k,f){var B;return null==(B=k.get(f))?void 0:B.values[0]}function n(k,f,B,O=0,z=C.TIFF_TAGS,t=4){var J=8===t;const V=J?x(new DataView(k,B,8),0,f):(new DataView(k,B,2)).getUint16(0,f),T=4+2*t;var ba=J?8:2;J=ba+V*T;if(B+J>k.byteLength)return{success:!1,ifd:null,
nextIFD:null,requiredBufferSize:J};const M=B+J+4<=k.byteLength?A(new DataView(k,B+J,8===t?8:4),0,f,8===t):null;B+=ba;ba=new Map;let L,S,X,aa,fa;for(let e=0;e<V;e++){var a=new DataView(k,B+T*e,T);L=a.getUint16(0,f);X=a.getUint16(2,f);S=C.getTagName(L,z);const P=[];2===t?(aa=a.getUint16(4,f),fa=a.getUint16(6,f)):4===t?(aa=a.getUint32(4,f),fa=a.getUint32(8,f)):8===t&&(aa=A(a,4,f,!0),fa=A(a,12,f,!0),P.push(a.getUint32(12,f)),P.push(a.getUint32(16,f)));a={id:L,type:X,valueCount:aa,valueOffset:fa,valueOffsets:P,
values:null};m(k,f,a,O,!1,t);ba.set(S,a)}return{success:!0,ifd:ba,nextIFD:M,requiredBufferSize:J}}function m(k,f,B,O=0,z=!1,t=4){if(B.values)return!0;var J=B.type,V=B.valueCount,T=B.valueOffset;let ba=[];var M=w[J],L=8*M,S=V*M,X=V*w[J]*8,aa=8===t?64:32;t=B.valueOffsets;if(X>aa&&S>(z?k.byteLength:k?k.byteLength-T+O:0))return B.offlineOffsetSize=[T,S],B.values=null,!1;if(X<=aa)if(f||(32>=aa?T>>>=32-X:(k=null!=t&&t.length?t[0]:T>>>0,f=null!=t&&t.length?t[1]:Math.round((T-k)/4294967296),32>=X?(T=k>>>
32-X,t[0]=T):(T=k*2**(32-X)+(f>>>32-X),t[0]=k,t[1]=f>>>32-X))),1===V&&L===aa)ba=[T];else if(64===aa)for(k=null!=t&&t.length?t[0]:T>>>0,T=null!=t&&t.length?t[1]:Math.round((T-k)/4294967296),f=k,M=32,k=1;k<=V;k++)S=32-L*k%32,M<L?(S=f<<S>>>32-M,X=T<<32-M>>>32-M,f=T,ba.push(S+X*2**(L-M)),M-=32-(L-M)):(ba.push(f<<S>>>32-L),M-=L),0===M&&(M=32,f=T);else for(k=1;k<=V;k++)ba.push(T<<32-L*k>>>32-L);else for(T-=O,z&&(T=0),V=T;V<T+S;V+=M){switch(J){case 1:L=(new DataView(k,V,1)).getUint8(0);break;case 2:L=(new DataView(k,
V,1)).getUint8(0);break;case 3:L=(new DataView(k,V,2)).getUint16(0,f);break;case 4:case 13:L=(new DataView(k,V,4)).getUint32(0,f);break;case 5:L=(new DataView(k,V,4)).getUint32(0,f)/(new DataView(k,V+4,4)).getUint32(0,f);break;case 6:L=(new DataView(k,V,1)).getInt8(0);break;case 7:L=(new DataView(k,V,1)).getUint8(0);break;case 8:L=(new DataView(k,V,2)).getInt16(0,f);break;case 9:L=(new DataView(k,V,4)).getInt32(0,f);break;case 10:L=(new DataView(k,V,4)).getInt32(0,f)/(new DataView(k,V+4,4)).getInt32(0,
f);break;case 11:L=(new DataView(k,V,4)).getFloat32(0,f);break;case 12:L=(new DataView(k,V,8)).getFloat64(0,f);break;case 16:case 18:L=x(new DataView(k,V,8),0,f);break;case 17:t=new DataView(k,V,8);X=(L=f)?t.getInt32(0,L):t.getUint32(0,L);t=L?t.getUint32(4,L):t.getInt32(4,L);aa=0<=(L?X:t)?1:-1;L?X*=aa:t*=aa;L=aa*(L?4294967296*t+X:4294967296*X+t);break;default:L=null}ba.push(L)}if(2===J){J="";T=ba;ba=[];for(k=0;k<T.length;k++)0===T[k]&&""!==J?(ba.push(J),J=""):J+=String.fromCharCode(T[k]);""===J&&
0!==ba.length||ba.push(J)}B.values=ba;return!0}function q(k){var f,B,O=k[0];const z=b(O,"TILEWIDTH"),t=b(O,"TILELENGTH"),J=b(O,"IMAGEWIDTH"),V=b(O,"IMAGELENGTH");var T=b(O,"BITSPERSAMPLE");const ba=b(O,"SAMPLESPERPIXEL");var M=null!=(f=b(O,"SAMPLEFORMAT"))?f:1;f=W(M,T);const L=v(O);var S=y(O,"GDAL_NODATA");let X;null!=S&&S.length&&(X=S.map(na=>parseFloat(na)),X.some(na=>isNaN(na))&&(X=null));var aa=null!=(B=b(O,"COMPRESSION"))?B:1;switch(aa){case 1:B="NONE";break;case 2:case 3:case 4:case 32771:B=
"CCITT";break;case 5:B="LZW";break;case 6:case 7:B="JPEG";break;case 32773:B="PACKBITS";break;case 8:case 32946:B="DEFLATE";break;case 34712:B="JPEG2000";break;case 34887:B="LERC";break;default:B=String(aa)}S=!0;let fa="";G.has(aa)||(S=!1,fa+="unsupported tag compression "+aa);3<M&&(S=!1,fa+="unsupported tag sampleFormat "+M);0!==T%8&&(S=!1,fa+="unsupported tag bitsPerSample "+T);T=F(O,"GEOASCIIPARAMS");if(T){var a=(a=T.split("|").filter(na=>-1<na.indexOf("ESRI PE String \x3d "))[0])?a.replace("ESRI PE String \x3d ",
""):"";a=a.startsWith("COMPD_CS")||a.startsWith("PROJCS")||a.startsWith("GEOGCS")?{wkid:null,wkt:a}:null}M=H(O,"GEOTIEPOINTS");T=H(O,"GEOPIXELSCALE");aa=H(O,"GEOTRANSMATRIX");var e=O.has("GEOKEYDIRECTORY")?O.get("GEOKEYDIRECTORY").data:null;O=!1;if(e){O=2===b(e,"GTRasterTypeGeoKey");var P=b(e,"GTModelTypeGeoKey");2===P?(e=b(e,"GeographicTypeGeoKey"),1024<=e&&32766>=e&&(a={wkid:e})):1===P&&(e=b(e,"ProjectedCSTypeGeoKey"),1024<=e&&32766>=e&&(a={wkid:e}))}let Z;T&&M&&6<=M.length?(Z=[T[0],0,M[3]-M[0]*
T[0],0,-Math.abs(T[1]),M[4]-M[1]*T[1]],O&&(Z[2]-=.5*Z[0]+.5*Z[1],Z[5]-=.5*Z[3]+.5*Z[4])):aa&&16===aa.length&&(Z=O?[aa[0],aa[1],aa[3]-.5*aa[0],aa[4],aa[5],aa[7]-.5*aa[5]]:[aa[0],aa[1],aa[3],aa[4],aa[5],aa[7]]);if(Z){O=[{x:0,y:V},{x:0,y:0},{x:J,y:V},{x:J,y:0}];e=aa=Number.POSITIVE_INFINITY;let na=P=Number.NEGATIVE_INFINITY;for(let ma=0;ma<O.length;ma++)M=I(O[ma],Z),aa=M.x>aa?aa:M.x,P=M.x<P?P:M.x,e=M.y>e?e:M.y,na=M.y<na?na:M.y;a={xmin:aa,xmax:P,ymin:e,ymax:na,spatialReference:a}}else a={xmin:-.5,ymin:.5-
V,xmax:J-.5,ymax:.5,spatialReference:a};O=k.filter(na=>1===F(na,"NEWSUBFILETYPE"));let da,ka,la;if(0<O.length){da=Math.round(Math.log(J/b(O[0],"IMAGEWIDTH"))/Math.LN2);var ia=O[O.length-1];ka=Math.round(Math.log(J/b(ia,"IMAGEWIDTH"))/Math.LN2);la=b(ia,"TILEWIDTH");ia=b(ia,"TILELENGTH")}la=0<ka?la||z:null;ia=0<ka?ia||t:null;let ja;z&&(ja=[{maxCol:Math.ceil(J/z)-1,maxRow:Math.ceil(V/t)-1,minRow:0,minCol:0}],O.forEach(na=>{ja.push({maxCol:Math.ceil(b(na,"IMAGEWIDTH")/b(na,"TILEWIDTH"))-1,maxRow:Math.ceil(b(na,
"IMAGELENGTH")/b(na,"TILELENGTH"))-1,minRow:0,minCol:0})}));O=F(k[0],"GDAL_METADATA");O=p(O);fa+=" "+c({width:J,height:V,tileWidth:z,tileHeight:t,planes:ba,ifds:k});return{width:J,height:V,tileWidth:z,tileHeight:t,planes:ba,isBSQ:L,pixelType:f,compression:B,noData:X,isSupported:S,message:fa,extent:a,affine:T?null:Z,firstPyramidLevel:da,maximumPyramidLevel:ka,pyramidBlockWidth:la,pyramidBlockHeight:ia,tileBoundary:ja,metadata:O}}function v(k,f){return(k=y(k,"PLANARCONFIGURATION"))?2===k[0]:f?f.isBSQ:
!1}function D(k){const {littleEndian:f,isBigTiff:B,firstIFD:O}=u(k);var z=O;const t=[];do if(z=g(k,f,z,0,C.TIFF_TAGS,B?8:4),z.success)t.push(z.ifd),z=z.nextIFD;else break;while(0<z);return{...q(t),littleEndian:f,isBigTiff:B,ifds:t}}function x(k,f,B){const O=k.getUint32(f,B);k=k.getUint32(f+4,B);return B?4294967296*k+O:4294967296*O+k}function A(k,f,B,O){return O?x(k,f,B):k.getUint32(f,B)}function u(k){var f=new DataView(k,0,16),B=f.getUint16(0,!1);k=null;if(18761===B)k=!0;else if(19789===B)k=!1;else throw"unexpected endianess byte";
var O=f.getUint16(2,k);if(42!==O&&43!==O)throw"unexpected tiff identifier";B=4;if(O=43===O){const z=f.getUint16(B,k);B+=2;if(8!==z)throw"unsupported bigtiff version";if(0!==f.getUint16(B,k))throw"unsupported bigtiff version";B+=2}f=A(f,B,k,O);return{littleEndian:k,isBigTiff:O,firstIFD:f}}function g(k,f,B,O=0,z=C.TIFF_TAGS,t=4){B=n(k,f,B,O,z,t);let J;const V=B.ifd;V&&(C.ifdTags.forEach((T,ba)=>{V.has(ba)&&(J=V.get(ba),J.data=n(k,f,J.valueOffset-O,O,T).ifd)}),V.has("GEOKEYDIRECTORY")&&(J=V.get("GEOKEYDIRECTORY"),
(z=J.values)&&4<z.length&&(z=z[0]+"."+z[1]+"."+z[2],J.data=n(k,f,J.valueOffset+6-O,O,C.GEO_KEYS,2).ifd,J.data&&J.data.set("GEOTIFFVersion",{id:0,type:2,valueCount:1,valueOffset:null,values:[z]}))),V.has("XMP")&&(J=V.get("XMP"),z=J.values,"number"===typeof z[0]&&7===J.type&&(J.values=[r.bytesToUTF8(new Uint8Array(z))])));return B}function c(k){const {width:f,height:B,tileHeight:O,tileWidth:z}=k,t=k.planes,J=z?z*O:f*B;k=b(k.ifds[0],"BITSPERSAMPLE");let V="";J*t>2**30/(8<k?k/8:1)&&(V=z?"tiled tiff exceeding 1 gigabits per tile is not supported":
"scanline tiff exceeding 1 gigabits is not supported");return V}var E={exports:{}};(function(k){(function(f){f=f();void 0!==f&&(k.exports=f)})(function(){var f={unstuff:function(z,t,J,V,T,ba,M,L){var S=(1<<J)-1,X=0,aa,fa=0;z[z.length-1]<<=8*(4*z.length-Math.ceil(J*V/8));if(T)for(aa=0;aa<V;aa++){if(0===fa){var a=z[X++];fa=32}if(fa>=J){var e=a>>>fa-J&S;fa-=J}else fa=J-fa,e=(a&S)<<fa&S,a=z[X++],fa=32-fa,e+=a>>>fa;t[aa]=T[e]}else for(T=Math.ceil((L-ba)/M),aa=0;aa<V;aa++)0===fa&&(a=z[X++],fa=32),fa>=J?
(e=a>>>fa-J&S,fa-=J):(fa=J-fa,e=(a&S)<<fa&S,a=z[X++],fa=32-fa,e+=a>>>fa),t[aa]=e<T?ba+e*M:L},unstuffLUT:function(z,t,J,V,T,ba){var M=(1<<t)-1,L=0,S=0,X=0,aa=X=0,fa=[];z[z.length-1]<<=8*(4*z.length-Math.ceil(t*J/8));var a=Math.ceil((ba-V)/T);for(S=0;S<J;S++){if(0===X){var e=z[L++];X=32}X>=t?(aa=e>>>X-t&M,X-=t):(X=t-X,aa=(e&M)<<X&M,e=z[L++],X=32-X,aa+=e>>>X);fa[S]=aa<a?V+aa*T:ba}fa.unshift(V);return fa},unstuff2:function(z,t,J,V,T,ba,M,L){var S=(1<<J)-1,X=0,aa,fa=0,a=0;if(T)for(aa=0;aa<V;aa++){if(0===
fa){var e=z[X++];fa=32;a=0}if(fa>=J){var P=e>>>a&S;fa-=J;a+=J}else{var Z=J-fa;P=e>>>a&S;e=z[X++];fa=32-Z;P|=(e&(1<<Z)-1)<<J-Z;a=Z}t[aa]=T[P]}else for(T=Math.ceil((L-ba)/M),aa=0;aa<V;aa++)0===fa&&(e=z[X++],fa=32,a=0),fa>=J?(P=e>>>a&S,fa-=J,a+=J):(Z=J-fa,P=e>>>a&S,e=z[X++],fa=32-Z,P|=(e&(1<<Z)-1)<<J-Z,a=Z),t[aa]=P<T?ba+P*M:L;return t},unstuffLUT2:function(z,t,J,V,T,ba){var M=(1<<t)-1,L=0,S=0,X=0,aa=0,fa=0,a=0,e=[],P=Math.ceil((ba-V)/T);for(S=0;S<J;S++){if(0===aa){var Z=z[L++];aa=32;a=0}aa>=t?(fa=Z>>>
a&M,aa-=t,a+=t):(X=t-aa,fa=Z>>>a&M,Z=z[L++],aa=32-X,fa|=(Z&(1<<X)-1)<<t-X,a=X);e[S]=fa<P?V+fa*T:ba}e.unshift(V);return e},originalUnstuff:function(z,t,J,V){var T=(1<<J)-1,ba=0,M,L=0;z[z.length-1]<<=8*(4*z.length-Math.ceil(J*V/8));for(M=0;M<V;M++){if(0===L){var S=z[ba++];L=32}if(L>=J){var X=S>>>L-J&T;L-=J}else L=J-L,X=(S&T)<<L&T,S=z[ba++],L=32-L,X+=S>>>L;t[M]=X}return t},originalUnstuff2:function(z,t,J,V){var T=(1<<J)-1,ba=0,M,L=0,S=0;for(M=0;M<V;M++){if(0===L){var X=z[ba++];L=32;S=0}if(L>=J){var aa=
X>>>S&T;L-=J;S+=J}else{var fa=J-L;aa=X>>>S&T;X=z[ba++];L=32-fa;aa|=(X&(1<<fa)-1)<<J-fa;S=fa}t[M]=aa}return t}},B={HUFFMAN_LUT_BITS_MAX:12,computeChecksumFletcher32:function(z){for(var t=65535,J=65535,V=z.length,T=Math.floor(V/2),ba=0;T;){var M=359<=T?359:T;T-=M;do t+=z[ba++]<<8,J+=t+=z[ba++];while(--M);t=(t&65535)+(t>>>16);J=(J&65535)+(J>>>16)}V&1&&(J+=t+=z[ba]<<8);return((J&65535)+(J>>>16)<<16|(t&65535)+(t>>>16))>>>0},readHeaderInfo:function(z,t){var J=t.ptr,V=new Uint8Array(z,J,6),T={};T.fileIdentifierString=
String.fromCharCode.apply(null,V);if(0!==T.fileIdentifierString.lastIndexOf("Lerc2",0))throw"Unexpected file identifier string (expect Lerc2 ): "+T.fileIdentifierString;J+=6;V=new DataView(z,J,8);var ba=V.getInt32(0,!0);T.fileVersion=ba;J+=4;3<=ba&&(T.checksum=V.getUint32(4,!0),J+=4);V=new DataView(z,J,12);T.height=V.getUint32(0,!0);T.width=V.getUint32(4,!0);J+=8;4<=ba?(T.numDims=V.getUint32(8,!0),J+=4):T.numDims=1;V=new DataView(z,J,40);T.numValidPixel=V.getUint32(0,!0);T.microBlockSize=V.getInt32(4,
!0);T.blobSize=V.getInt32(8,!0);T.imageType=V.getInt32(12,!0);T.maxZError=V.getFloat64(16,!0);T.zMin=V.getFloat64(24,!0);T.zMax=V.getFloat64(32,!0);J+=40;t.headerInfo=T;t.ptr=J;if(3<=ba&&(z=this.computeChecksumFletcher32(new Uint8Array(z,J-(4<=ba?52:48),T.blobSize-14)),z!==T.checksum))throw"Checksum failed.";return!0},checkMinMaxRanges:function(z,t){var J=t.headerInfo,V=this.getDataTypeArray(J.imageType),T=J.numDims*this.getDataTypeSize(J.imageType),ba=this.readSubArray(z,t.ptr,V,T);z=this.readSubArray(z,
t.ptr+T,V,T);t.ptr+=2*T;T=!0;for(t=0;t<J.numDims;t++)if(ba[t]!==z[t]){T=!1;break}J.minValues=ba;J.maxValues=z;return T},readSubArray:function(z,t,J,V){if(J===Uint8Array)z=new Uint8Array(z,t,V);else{var T=new ArrayBuffer(V);(new Uint8Array(T)).set(new Uint8Array(z,t,V));z=new J(T)}return z},readMask:function(z,t){var J=t.ptr,V=t.headerInfo,T=V.width*V.height,ba=V.numValidPixel,M=new DataView(z,J,4);V={};V.numBytes=M.getUint32(0,!0);J+=4;if((0===ba||T===ba)&&0!==V.numBytes)throw"invalid mask";if(0===
ba)ba=new Uint8Array(Math.ceil(T/8)),V.bitset=ba,M=new Uint8Array(T),t.pixels.resultMask=M,J+=V.numBytes;else if(0<V.numBytes){ba=new Uint8Array(Math.ceil(T/8));M=new DataView(z,J,V.numBytes);z=M.getInt16(0,!0);var L=2,S=0,X=0;do{if(0<z)for(;z--;)ba[S++]=M.getUint8(L++);else for(X=M.getUint8(L++),z=-z;z--;)ba[S++]=X;z=M.getInt16(L,!0);L+=2}while(L<V.numBytes);if(-32768!==z||S<ba.length)throw"Unexpected end of mask RLE encoding";M=new Uint8Array(T);for(L=L=z=0;L<T;L++)L&7?(z=ba[L>>3],z<<=L&7):z=ba[L>>
3],z&128&&(M[L]=1);t.pixels.resultMask=M;V.bitset=ba;J+=V.numBytes}t.ptr=J;t.mask=V;return!0},readDataOneSweep:function(z,t,J,V){var T=t.ptr,ba=t.headerInfo,M=ba.numDims,L=ba.width*ba.height;ba=ba.numValidPixel*B.getDataTypeSize(ba.imageType)*M;var S=t.pixels.resultMask;if(J===Uint8Array)z=new Uint8Array(z,T,ba);else{var X=new ArrayBuffer(ba);(new Uint8Array(X)).set(new Uint8Array(z,T,ba));z=new J(X)}if(z.length===L*M)t.pixels.resultPixels=V?B.swapDimensionOrder(z,L,M,J,!0):z;else{t.pixels.resultPixels=
new J(L*M);var aa=X=J=0,fa=0;if(1<M)if(V)for(X=0;X<L;X++){if(S[X])for(fa=X,aa=0;aa<M;aa++,fa+=L)t.pixels.resultPixels[fa]=z[J++]}else for(X=0;X<L;X++){if(S[X])for(fa=X*M,aa=0;aa<M;aa++)t.pixels.resultPixels[fa+aa]=z[J++]}else for(X=0;X<L;X++)S[X]&&(t.pixels.resultPixels[X]=z[J++])}t.ptr=T+ba;return!0},readHuffmanTree:function(z,t){var J=this.HUFFMAN_LUT_BITS_MAX,V=new DataView(z,t.ptr,16);t.ptr+=16;if(2>V.getInt32(0,!0))throw"unsupported Huffman version";var T=V.getInt32(4,!0),ba=V.getInt32(8,!0);
V=V.getInt32(12,!0);if(ba>=V)return!1;var M=new Uint32Array(V-ba);B.decodeBits(z,t,M);var L=[],S;for(S=ba;S<V;S++){var X=S-(S<T?0:T);L[X]={first:M[S-ba],second:null}}S=z.byteLength-t.ptr;M=new ArrayBuffer(4*Math.ceil(S/4));(new Uint8Array(M)).set(new Uint8Array(z,t.ptr,S));z=new Uint32Array(M);t=0;M=0;var aa=z[0];for(S=ba;S<V;S++){X=S-(S<T?0:T);var fa=L[X].first;0<fa&&(L[X].second=aa<<t>>>32-fa,32-t>=fa?(t+=fa,32===t&&(t=0,M++,aa=z[M])):(t+=fa-32,M++,aa=z[M],L[X].second|=aa>>>32-t))}var a=aa=0,e=
new O;for(S=0;S<L.length;S++)void 0!==L[S]&&(aa=Math.max(aa,L[S].first));a=aa>=J?J:aa;J=[];var P;for(S=ba;S<V;S++)if(X=S-(S<T?0:T),fa=L[X].first,0<fa)if(ba=[fa,X],fa<=a){X=L[X].second<<a-fa;var Z=1<<a-fa;for(fa=0;fa<Z;fa++)J[X|fa]=ba}else for(X=L[X].second,Z=e,--fa;0<=fa;fa--)(P=X>>>fa&1)?(Z.right||(Z.right=new O),Z=Z.right):(Z.left||(Z.left=new O),Z=Z.left),0!==fa||Z.val||(Z.val=ba[1]);return{decodeLut:J,numBitsLUTQick:a,numBitsLUT:aa,tree:e,stuffedData:z,srcPtr:M,bitPos:t}},readHuffman:function(z,
t,J,V){var T=t.headerInfo.numDims,ba=t.headerInfo.height,M=t.headerInfo.width,L=M*ba,S=this.readHuffmanTree(z,t);z=S.decodeLut;var X=S.tree,aa=S.stuffedData,fa=S.srcPtr,a=S.bitPos,e=S.numBitsLUTQick;S=S.numBitsLUT;var P=0===t.headerInfo.imageType?128:0,Z=t.pixels.resultMask,da,ka,la,ia,ja,na,ma=0;0<a&&(fa++,a=0);var pa=aa[fa],qa=1===t.encodeMode,ta=new J(L*T),xa=ta,wa;if(2>T||qa)for(wa=0;wa<T;wa++)if(1<T&&(xa=new J(ta.buffer,L*wa,L),ma=0),t.headerInfo.numValidPixel===M*ba)for(la=ja=0;la<ba;la++)for(ia=
0;ia<M;ia++,ja++){var sa=0;var va=da=pa<<a>>>32-e;32-a<e&&(va=da|=aa[fa+1]>>>64-a-e);if(z[va])sa=z[va][1],a+=z[va][0];else for(va=da=pa<<a>>>32-S,32-a<S&&(va=da|=aa[fa+1]>>>64-a-S),va=X,na=0;na<S;na++)if(va=(ka=da>>>S-na-1&1)?va.right:va.left,!va.left&&!va.right){sa=va.val;a=a+na+1;break}32<=a&&(a-=32,fa++,pa=aa[fa]);sa-=P;qa?(sa=0<ia?sa+ma:0<la?sa+xa[ja-M]:sa+ma,sa&=255,ma=xa[ja]=sa):xa[ja]=sa}else for(la=ja=0;la<ba;la++)for(ia=0;ia<M;ia++,ja++){if(Z[ja]){sa=0;va=da=pa<<a>>>32-e;32-a<e&&(va=da|=
aa[fa+1]>>>64-a-e);if(z[va])sa=z[va][1],a+=z[va][0];else for(va=da=pa<<a>>>32-S,32-a<S&&(va=da|=aa[fa+1]>>>64-a-S),va=X,na=0;na<S;na++)if(va=(ka=da>>>S-na-1&1)?va.right:va.left,!va.left&&!va.right){sa=va.val;a=a+na+1;break}32<=a&&(a-=32,fa++,pa=aa[fa]);sa-=P;qa?(sa=0<ia&&Z[ja-1]?sa+ma:0<la&&Z[ja-M]?sa+xa[ja-M]:sa+ma,sa&=255,ma=xa[ja]=sa):xa[ja]=sa}}else for(la=ja=0;la<ba;la++)for(ia=0;ia<M;ia++)if(ja=la*M+ia,!Z||Z[ja])for(wa=0;wa<T;wa++,ja+=L){sa=0;va=da=pa<<a>>>32-e;32-a<e&&(va=da|=aa[fa+1]>>>64-
a-e);if(z[va])sa=z[va][1],a+=z[va][0];else for(va=da=pa<<a>>>32-S,32-a<S&&(va=da|=aa[fa+1]>>>64-a-S),va=X,na=0;na<S;na++)if(va=(ka=da>>>S-na-1&1)?va.right:va.left,!va.left&&!va.right){sa=va.val;a=a+na+1;break}32<=a&&(a-=32,fa++,pa=aa[fa]);sa-=P;xa[ja]=sa}t.ptr=t.ptr+4*(fa+1)+(0<a?4:0);t.pixels.resultPixels=ta;1<T&&!V&&(t.pixels.resultPixels=B.swapDimensionOrder(ta,L,T,J))},decodeBits:function(z,t,J,V,T){var ba=t.headerInfo,M=ba.fileVersion,L=0,S=new DataView(z,t.ptr,5<=z.byteLength-t.ptr?5:z.byteLength-
t.ptr),X=S.getUint8(0);L++;var aa=X>>6,fa=0===aa?4:3-aa,a=0<(X&32)?!0:!1;aa=X&31;X=0;if(1===fa)X=S.getUint8(L),L++;else if(2===fa)X=S.getUint16(L,!0),L+=2;else if(4===fa)X=S.getUint32(L,!0),L+=4;else throw"Invalid valid pixel count type";fa=2*ba.maxZError;T=1<ba.numDims?ba.maxValues[T]:ba.zMax;if(a){t.counter.lut++;a=S.getUint8(L);L++;ba=Math.ceil((a-1)*aa/8);var e=Math.ceil(ba/4);e=new ArrayBuffer(4*e);var P=new Uint8Array(e);t.ptr+=L;P.set(new Uint8Array(z,t.ptr,ba));L=new Uint32Array(e);t.ptr+=
ba;for(S=0;a-1>>>S;)S++;ba=Math.ceil(X*S/8);e=Math.ceil(ba/4);e=new ArrayBuffer(4*e);P=new Uint8Array(e);P.set(new Uint8Array(z,t.ptr,ba));z=new Uint32Array(e);t.ptr+=ba;t=3<=M?f.unstuffLUT2(L,aa,a-1,V,fa,T):f.unstuffLUT(L,aa,a-1,V,fa,T);3<=M?f.unstuff2(z,J,S,X,t):f.unstuff(z,J,S,X,t)}else t.counter.bitstuffer++,S=aa,t.ptr+=L,0<S&&(ba=Math.ceil(X*S/8),e=Math.ceil(ba/4),e=new ArrayBuffer(4*e),P=new Uint8Array(e),P.set(new Uint8Array(z,t.ptr,ba)),z=new Uint32Array(e),t.ptr+=ba,3<=M?null==V?f.originalUnstuff2(z,
J,S,X):f.unstuff2(z,J,S,X,!1,V,fa,T):null==V?f.originalUnstuff(z,J,S,X):f.unstuff(z,J,S,X,!1,V,fa,T))},readTiles:function(z,t,J,V){var T=t.headerInfo,ba=T.width,M=T.height,L=ba*M,S=T.microBlockSize,X=T.imageType,aa=B.getDataTypeSize(X),fa=Math.ceil(ba/S),a=Math.ceil(M/S);t.pixels.numBlocksY=a;t.pixels.numBlocksX=fa;var e=t.pixels.ptr=0,P=0,Z=0,da=0,ka=0,la=0,ia=0,ja=0,na=e=0,ma=0,pa=0,qa=ia=0;ia=ia=0;var ta=new J(S*S);M=M%S||S;var xa=ba%S||S,wa=T.numDims,sa,va=t.pixels.resultMask,ya=t.pixels.resultPixels,
Ba=5<=T.fileVersion?14:15,Ca=T.zMax;for(Z=0;Z<a;Z++)for(ka=Z!==a-1?S:M,da=0;da<fa;da++)for(la=da!==fa-1?S:xa,ma=Z*ba*S+da*S,pa=ba-la,sa=0;sa<wa;sa++){1<wa?(qa=ya,ma=Z*ba*S+da*S,ya=new J(t.pixels.resultPixels.buffer,L*sa*aa,L),Ca=T.maxValues[sa]):qa=null;ia=z.byteLength-t.ptr;P=new DataView(z,t.ptr,Math.min(10,ia));var Aa={};ia=0;ja=P.getUint8(0);ia++;var Ha=5<=T.fileVersion?ja&4:0;e=ja>>6&255;na=ja>>2&Ba;if(na!==(da*S>>3&Ba))throw"integrity issue";if(Ha&&0===sa)throw"integrity issue";ja&=3;if(3<ja)throw t.ptr+=
ia,"Invalid block encoding ("+ja+")";if(2===ja){if(Ha)if(va)for(e=0;e<ka;e++)for(P=0;P<la;P++)va[ma]&&(ya[ma]=qa[ma]),ma++;else for(e=0;e<ka;e++)for(P=0;P<la;P++)ya[ma]=qa[ma],ma++;t.counter.constant++;t.ptr+=ia}else if(0===ja){if(Ha)throw"integrity issue";t.counter.uncompressed++;t.ptr+=ia;ia=ka*la*aa;qa=z.byteLength-t.ptr;ia=ia<qa?ia:qa;qa=new ArrayBuffer(0===ia%aa?ia:ia+aa-ia%aa);Ha=new Uint8Array(qa);Ha.set(new Uint8Array(z,t.ptr,ia));qa=new J(qa);ia=0;if(va)for(e=0;e<ka;e++){for(P=0;P<la;P++)va[ma]&&
(ya[ma]=qa[ia++]),ma++;ma+=pa}else for(e=0;e<ka;e++){for(P=0;P<la;P++)ya[ma++]=qa[ia++];ma+=pa}t.ptr+=ia*aa}else if(e=B.getDataTypeUsed(Ha&&6>X?4:X,e),Aa=B.getOnePixel(Aa,ia,e,P),ia+=B.getDataTypeSize(e),3===ja)if(t.ptr+=ia,t.counter.constantoffset++,va)for(e=0;e<ka;e++){for(P=0;P<la;P++)va[ma]&&(ya[ma]=Ha?Math.min(Ca,qa[ma]+Aa):Aa),ma++;ma+=pa}else for(e=0;e<ka;e++){for(P=0;P<la;P++)ya[ma]=Ha?Math.min(Ca,qa[ma]+Aa):Aa,ma++;ma+=pa}else if(t.ptr+=ia,B.decodeBits(z,t,ta,Aa,sa),ia=0,Ha)if(va)for(e=0;e<
ka;e++){for(P=0;P<la;P++)va[ma]&&(ya[ma]=ta[ia++]+qa[ma]),ma++;ma+=pa}else for(e=0;e<ka;e++){for(P=0;P<la;P++)ya[ma]=ta[ia++]+qa[ma],ma++;ma+=pa}else if(va)for(e=0;e<ka;e++){for(P=0;P<la;P++)va[ma]&&(ya[ma]=ta[ia++]),ma++;ma+=pa}else for(e=0;e<ka;e++){for(P=0;P<la;P++)ya[ma++]=ta[ia++];ma+=pa}}1<wa&&!V&&(t.pixels.resultPixels=B.swapDimensionOrder(t.pixels.resultPixels,L,wa,J))},formatFileInfo:function(z){return{fileIdentifierString:z.headerInfo.fileIdentifierString,fileVersion:z.headerInfo.fileVersion,
imageType:z.headerInfo.imageType,height:z.headerInfo.height,width:z.headerInfo.width,numValidPixel:z.headerInfo.numValidPixel,microBlockSize:z.headerInfo.microBlockSize,blobSize:z.headerInfo.blobSize,maxZError:z.headerInfo.maxZError,pixelType:B.getPixelType(z.headerInfo.imageType),eofOffset:z.eofOffset,mask:z.mask?{numBytes:z.mask.numBytes}:null,pixels:{numBlocksX:z.pixels.numBlocksX,numBlocksY:z.pixels.numBlocksY,maxValue:z.headerInfo.zMax,minValue:z.headerInfo.zMin,noDataValue:z.noDataValue}}},
constructConstantSurface:function(z,t){var J=z.headerInfo.zMax,V=z.headerInfo.zMin,T=z.headerInfo.maxValues,ba=z.headerInfo.numDims,M=z.headerInfo.height*z.headerInfo.width,L=0,S=0,X=0,aa=z.pixels.resultMask;z=z.pixels.resultPixels;if(aa)if(1<ba)if(t)for(L=0;L<ba;L++)for(X=L*M,J=T[L],S=0;S<M;S++)aa[S]&&(z[X+S]=J);else for(S=0;S<M;S++){if(aa[S])for(X=S*ba,L=0;L<ba;L++)z[X+ba]=T[L]}else for(S=0;S<M;S++)aa[S]&&(z[S]=J);else if(1<ba&&V!==J)if(t)for(L=0;L<ba;L++)for(X=L*M,J=T[L],S=0;S<M;S++)z[X+S]=J;else for(S=
0;S<M;S++)for(X=S*ba,L=0;L<ba;L++)z[X+L]=T[L];else for(S=0;S<M*ba;S++)z[S]=J},getDataTypeArray:function(z){switch(z){case 0:z=Int8Array;break;case 1:z=Uint8Array;break;case 2:z=Int16Array;break;case 3:z=Uint16Array;break;case 4:z=Int32Array;break;case 5:z=Uint32Array;break;case 6:z=Float32Array;break;case 7:z=Float64Array;break;default:z=Float32Array}return z},getPixelType:function(z){switch(z){case 0:z="S8";break;case 1:z="U8";break;case 2:z="S16";break;case 3:z="U16";break;case 4:z="S32";break;
case 5:z="U32";break;case 6:z="F32";break;case 7:z="F64";break;default:z="F32"}return z},isValidPixelValue:function(z,t){if(null==t)return!1;switch(z){case 0:z=-128<=t&&127>=t;break;case 1:z=0<=t&&255>=t;break;case 2:z=-32768<=t&&32767>=t;break;case 3:z=0<=t&&65536>=t;break;case 4:z=-2147483648<=t&&2147483647>=t;break;case 5:z=0<=t&&4294967296>=t;break;case 6:z=-3.4027999387901484E38<=t&&3.4027999387901484E38>=t;break;case 7:z=4.9E-324<=t&&1.7976931348623157E308>=t;break;default:z=!1}return z},getDataTypeSize:function(z){var t=
0;switch(z){case 0:case 1:t=1;break;case 2:case 3:t=2;break;case 4:case 5:case 6:t=4;break;case 7:t=8;break;default:t=z}return t},getDataTypeUsed:function(z,t){var J=z;switch(z){case 2:case 4:J=z-t;break;case 3:case 5:J=z-2*t;break;case 6:J=0===t?z:1===t?2:1;break;case 7:J=0===t?z:z-2*t+1;break;default:J=z}return J},getOnePixel:function(z,t,J,V){z=0;switch(J){case 0:z=V.getInt8(t);break;case 1:z=V.getUint8(t);break;case 2:z=V.getInt16(t,!0);break;case 3:z=V.getUint16(t,!0);break;case 4:z=V.getInt32(t,
!0);break;case 5:z=V.getUInt32(t,!0);break;case 6:z=V.getFloat32(t,!0);break;case 7:z=V.getFloat64(t,!0);break;default:throw"the decoder does not understand this pixel type";}return z},swapDimensionOrder:function(z,t,J,V,T){var ba=0,M=0,L=0,S=0,X=z;if(1<J)if(X=new V(t*J),T)for(ba=0;ba<t;ba++)for(S=ba,L=0;L<J;L++,S+=t)X[S]=z[M++];else for(ba=0;ba<t;ba++)for(S=ba,L=0;L<J;L++,S+=t)X[M++]=z[S];return X}},O=function(z,t,J){this.val=z;this.left=t;this.right=J};return{decode:function(z,t){t=t||{};var J=
t.noDataValue,V=0,T={};T.ptr=t.inputOffset||0;T.pixels={};if(B.readHeaderInfo(z,T)){V=T.headerInfo;var ba=V.fileVersion,M=B.getDataTypeArray(V.imageType);if(5<ba)throw"unsupported lerc version 2."+ba;B.readMask(z,T);V.numValidPixel===V.width*V.height||T.pixels.resultMask||(T.pixels.resultMask=t.maskData);var L=V.width*V.height;T.pixels.resultPixels=new M(L*V.numDims);T.counter={onesweep:0,uncompressed:0,lut:0,bitstuffer:0,constant:0,constantoffset:0};var S=!t.returnPixelInterleavedDims;if(0!==V.numValidPixel)if(V.zMax===
V.zMin)B.constructConstantSurface(T,S);else if(4<=ba&&B.checkMinMaxRanges(z,T))B.constructConstantSurface(T,S);else{var X=new DataView(z,T.ptr,2),aa=X.getUint8(0);T.ptr++;if(aa)B.readDataOneSweep(z,T,M,S);else if(1<ba&&1>=V.imageType&&1E-5>Math.abs(V.maxZError-.5)){X=X.getUint8(1);T.ptr++;T.encodeMode=X;if(2<X||4>ba&&1<X)throw"Invalid Huffman flag "+X;X?B.readHuffman(z,T,M,S):B.readTiles(z,T,M,S)}else B.readTiles(z,T,M,S)}T.eofOffset=T.ptr;t.inputOffset?(z=T.headerInfo.blobSize+t.inputOffset-T.ptr,
1<=Math.abs(z)&&(T.eofOffset=t.inputOffset+T.headerInfo.blobSize)):(z=T.headerInfo.blobSize-T.ptr,1<=Math.abs(z)&&(T.eofOffset=T.headerInfo.blobSize));z={width:V.width,height:V.height,pixelData:T.pixels.resultPixels,minValue:V.zMin,maxValue:V.zMax,validPixelCount:V.numValidPixel,dimCount:V.numDims,dimStats:{minValues:V.minValues,maxValues:V.maxValues},maskData:T.pixels.resultMask};if(T.pixels.resultMask&&B.isValidPixelValue(V.imageType,J)){ba=T.pixels.resultMask;for(V=0;V<L;V++)ba[V]||(z.pixelData[V]=
J);z.noDataValue=J}T.noDataValue=J;t.returnFileInfo&&(z.fileInfo=B.formatFileInfo(T));return z}},getBandCount:function(z){for(var t=0,J=0,V={ptr:0,pixels:{}};J<z.byteLength-58;)B.readHeaderInfo(z,V),J+=V.headerInfo.blobSize,t++,V.ptr=J;return t}}})})(E);var l=E.exports;const w=[0,1,1,2,4,8,1,1,2,4,8,4,8,-1,-1,-1,8,8,8],G=new Set([1,5,6,7,8,34712,34887]),d=function(k,f,B,O,z){var t,J,V=Q.isPlatformLittleEndian===f,T=b(B,"BITSPERSAMPLE");const ba=null!=(t=b(B,"SAMPLEFORMAT"))?t:1;t=W(ba,T);T=null!=
(J=b(B,"COMPRESSION"))?J:1;J=U(t);if(34887===T)return l.decode(k,{inputOffset:O,returnFileInfo:!0}).pixelData;if(1===T){var M=k.slice(O,O+z);var L=new Uint8Array(M)}else if(8===T||32946===T)L=new Uint8Array(k,O,z),L=new Y.Zlib(L),k=L.getBytes(),M=new ArrayBuffer(k.length),L=new Uint8Array(M),L.set(k);else if(6===T)L=new Uint8Array(k,O,z),M=new K.JpegImage,M.parse(L),k=M.getData(M.width,M.height,!0),M=new ArrayBuffer(k.length),L=new Uint8Array(M),L.set(k);else if(7===T){f=B.get("JPEGTABLES").values;
M=f.length-2;L=new Uint8Array(M+z-2);for(B=0;B<M;B++)L[B]=f[B];k=new Uint8Array(k,O+2,z-2);for(O=0;O<k.length;O++)L[M+O]=k[O];M=new K.JpegImage;M.parse(L);k=M.getData(M.width,M.height,!0);M=new ArrayBuffer(k.length);L=new Uint8Array(M);L.set(k)}else 5===T&&(L=N.decode(k,O,z,f),M=L.buffer);if("u8"!==t&&"s8"!==t&&!V)switch(M=new ArrayBuffer(L.length),V=new Uint8Array(M),t){case "u16":case "s16":for(t=0;t<L.length;t+=2)V[t]=L[t+1],V[t+1]=L[t];break;case "u32":case "s32":case "f32":for(t=0;t<L.length;t+=
4)V[t]=L[t+3],V[t+1]=L[t+2],V[t+2]=L[t+1],V[t+3]=L[t]}return new J(M)},h=function(k,f,B){if(!(k&&0<k.length&&f&&B))return null;let O,z,t;const J=k[0].length,V=k.length,T=new Uint8Array(J);for(let M=0;M<V;M++)if(O=k[M],z=f[M],t=B[M],0===M)for(var ba=0;ba<J;ba++)T[ba]=O[ba]<z||O[ba]>t?0:1;else for(ba=0;ba<J;ba++)T[ba]&&(T[ba]=O[ba]<z||O[ba]>t?0:1);return T},p=function(k){if(!k)return null;var f=k.match(/<Item(.*?)Item>/gi);if(!f||0===f.length)return null;k=new Map;var B;for(var O=0;O<f.length;O++){var z=
f[O];var t=z.slice(6,z.indexOf("\x3e"));var J=z.indexOf("sample\x3d");-1<J&&(B=z.slice(J+8,z.indexOf('"',J+8)));J=z.indexOf("name\x3d");-1<J&&(t=z.slice(J+6,z.indexOf('"',J+6)));t&&(z=z.slice(z.indexOf("\x3e")+1,z.indexOf("\x3c/Item\x3e")).trim(),null!=B?k.has(t)?k.get(t)[B]=z:k.set(t,[z]):k.set(t,z));B=null}f=k.get("STATISTICS_MINIMUM");t=k.get("STATISTICS_MAXIMUM");O=k.get("STATISTICS_MEAN");z=k.get("STATISTICS_STDDEV");B=null;if(f&&t)for(B=[],J=0;J<f.length;J++)B.push({min:parseFloat(f[J]),max:parseFloat(t[J]),
avg:O&&parseFloat(O[J]),stddev:z&&parseFloat(z[J])});t=k.get("BandName");O=k.get("WavelengthMin");z=k.get("WavelengthMax");f=null;if(t)for(f=[],J=0;J<t.length;J++)f.push({BandName:t[J],WavelengthMin:O&&parseFloat(O[J]),WavelengthMax:z&&parseFloat(z[J])});t=k.get("DataType");return{statistics:B,bandProperties:f,dataType:t,rawMetadata:k}};R.Lerc2Codec=l;R.decode=function(k,f=0,B){B=B||D(k);const {ifds:O,noData:z}=B;if(0===O.length)throw"no valid image file directory";var t=c(B);if(t)throw t;t=-1===
f?O[O.length-1]:O[f];f=z?z[0]:null;if(B.tileWidth){var J=B,V,T=H(t,"TILEOFFSETS");if(void 0===T)t=null;else{B=H(t,"TILEBYTECOUNTS");var {width:ba,height:M,pixelType:L,tileWidth:S,tileHeight:X}=q([t]),aa=v(t,J),fa=J.planes,a=ba*M,e=b(t,"BITSPERSAMPLE"),P=34887===(null!=(V=b(t,"COMPRESSION"))?V:1),Z=U(L);V=[];for(var da=0;da<fa;da++)V.push(new Z(a));var ka,la;a=Math.ceil(ba/S);if(0===e%8)if(P&&aa&&1<fa)for(aa=Math.round(T.length/fa),e=0;e<aa;e++){var ia=Math.floor(e/a)*X;var ja=e%a*S;Z=ia*ba+ja;for(P=
0;P<fa;P++){da=e*fa+P;da=d(k,J.littleEndian,t,T[da],B[da]);var na=0;var ma=Z;var pa=Math.min(S,ba-ja);var qa=Math.min(X,M-ia);var ta=V[P];for(ka=0;ka<qa;ka++)for(ma=Z+ka*ba,na=ka*S,la=0;la<pa;la++,ma++,na++)ta[ma]=da[na]}}else for(e=0;e<T.length;e++)for(ia=Math.floor(e/a)*X,ja=e%a*S,Z=ia*ba+ja,da=d(k,J.littleEndian,t,T[e],B[e]),na=0,ma=Z,pa=Math.min(S,ba-ja),qa=Math.min(X,M-ia),ia=0;ia<fa;ia++)if(ta=V[ia],aa||P)for(ka=0;ka<qa;ka++)for(ma=Z+ka*ba,na=S*X*ia+ka*S,la=0;la<pa;la++,ma++,na++)ta[ma]=da[na];
else for(ka=0;ka<qa;ka++)for(ma=Z+ka*ba,na=ka*S*fa+ia,la=0;la<pa;la++,ma++,na+=fa)ta[ma]=da[na];t={width:ba,height:M,pixelType:L,pixels:V}}}else if(a=B,ka=Q.isPlatformLittleEndian===a.littleEndian,la=H(t,"STRIPOFFSETS"),void 0===la)t=null;else{var {width:xa,height:wa,pixelType:sa}=q([t]);B=a.planes;fa=xa*wa;e=b(t,"BITSPERSAMPLE");T=U(sa);V=new T(fa*B);Z=H(t,"STRIPBYTECOUNTS");da=b(t,"ROWSPERSTRIP");ia=null!=(ja=b(t,"COMPRESSION"))?ja:1;ma=da;if(0===e%8)for(t=0;t<la.length;t++){ja=t*da*xa*B;ma=(t+
1)*da>wa?wa-t*da:da;if("u8"===sa||"s8"===sa||ka)8===ia||32946===ia?(aa=new Uint8Array(k,la[t],Z[t]),aa=new Y.Zlib(aa),na=aa.getBytes(),P=new ArrayBuffer(na.length),aa=new Uint8Array(P),aa.set(na),aa.length!==ma*xa*B*e/8&&console.log("strip byte counts is different than expected")):6===ia?(aa=new Uint8Array(k,la[t],Z[t]),P=new K.JpegImage,P.parse(aa),ma=P.getData(P.width,P.height,!0),P=new ArrayBuffer(ma.length),aa=new Uint8Array(P),aa.set(ma)):5===ia?(aa=N.decode(k,la[t],Z[t],a.littleEndian),P=aa.buffer):
1===ia&&(Z[t]!==ma*xa*B*e/8&&console.log("strip byte counts is different than expected"),P=k.slice(la[t],la[t]+Z[t]));else switch(6===ia||8===ia||32946===ia?(aa=new Uint8Array(k,la[t],Z[t]),aa=new Y.Zlib(aa),aa=aa.getBytes(),P=new ArrayBuffer(aa.length),J=new Uint8Array(P),aa.length!==ma*xa*B*e/8&&console.log("strip byte counts is different than expected")):1===ia&&(Z[t]!==ma*xa*B*e/8&&console.log("strip byte counts is different than expected"),P=new ArrayBuffer(Z[t]),aa=new Uint8Array(k,la[t],Z[t]),
J=new Uint8Array(P)),sa){case "u16":case "s16":for(ma=0;ma<aa.length;ma+=2)J[ma]=aa[ma+1],J[ma+1]=aa[ma];break;case "u32":case "s32":case "f32":for(ma=0;ma<aa.length;ma+=4)J[ma]=aa[ma+3],J[ma+1]=aa[ma+2],J[ma+2]=aa[ma+1],J[ma+3]=aa[ma]}ma=new T(P);V.set(ma,ja)}aa=[];if(1===B)aa.push(V);else for(t=0;t<B;t++){J=new T(fa);for(k=0;k<fa;k++)J[k]=V[k*B+t];aa.push(J)}t={width:xa,height:wa,pixelType:sa,pixels:aa}}if(null!==f){t.mask=new Uint8Array(t.width*t.height);if(1E24<Math.abs(f))for(k=0;k<t.width*t.height;k++)t.mask[k]=
1E-6>Math.abs((t.pixels[0][k]-f)/f)?0:1;else for(k=0;k<t.width*t.height;k++)t.mask[k]=t.pixels[0][k]===f?0:1;t.noDataValue=f}return t};R.decodeTileOrStrip=function(k,f){var B;const {headerInfo:O,ifd:z,offsets:t,sizes:J}=f;var V=t.map((da,ka)=>d(k,O.littleEndian,z,da,J[ka]||k.byteLength)),T=v(z,O);const {pixelType:ba,planes:M}=O;var L=U(ba);const S=b(z,"TILEWIDTH"),X=b(z,"TILELENGTH");var aa=null!=(B=b(z,"COMPRESSION"))?B:1;B=S*X;const fa=[];let a=V[0];const e=34887===aa;for(let da=0;da<M;da++){aa=
new L(B);if(T&&e){a=V[da];for(var P=0;P<B;P++)aa[P]=a[da][P+da]}else if(T||e&&!T)aa=a.slice(B*da,B*(da+1));else for(P=0;P<B;P++)aa[P]=a[P*M+da];fa.push(aa)}V=O.noData?O.noData[0]:null;T=(L=O.metadata?O.metadata.statistics:null)?L.map(da=>da.min):null;L=L?L.map(da=>da.max):null;let Z;if(null!=V)if(Z=new Uint8Array(B),1E24<Math.abs(V))for(f=0;f<B;f++)Z[f]=1E-6>Math.abs((fa[0][f]-V)/V)?0:1;else for(f=0;f<B;f++)Z[f]=fa[0][f]===V?0:1;else T&&L&&f.applyMinMaxConstraint&&(Z=h(fa,T,L));return{pixelType:ba,
width:S,height:X,pixels:fa,mask:Z,noDataValue:V}};R.getImageInfo=q;R.isBSQConfig=v;R.parseFieldValues=m;R.parseHeader=D;R.parseIFD=g;R.parseSignature=u})},"esri/layers/support/rasterDatasets/byteStreamUtils":function(){define(["exports"],function(R){R.bytesToUTF8=function(r,K){let N=0,C="",Q=0,Y=0;const W=r.length;for(;N<W;)if(Y=r[N++],Q=Y>>4,8>Q?Q=1:15===Q?(Q=4,Y=(Y&7)<<18|(r[N++]&63)<<12|(r[N++]&63)<<6|r[N++]&63):14===Q?(Q=3,Y=(Y&15)<<12|(r[N++]&63)<<6|r[N++]&63):(Q=2,Y=(Y&31)<<6|r[N++]&63),0!==
Y||K)C+=String.fromCharCode(Y);return C};Object.defineProperty(R,"__esModule",{value:!0})})},"esri/layers/support/rasterFormats/Lzw":function(){define(["exports"],function(R){function r(Q,Y,W,U=!0){if(0!==Y%4||0!==W%4){var I=new ArrayBuffer(4*Math.ceil(W/4));I=new Uint8Array(I);Q=new Uint8Array(Q,Y,W);if(U)for(U=0;U<I.length;U+=4)I[U]=Q[U+3],I[U+1]=Q[U+2],I[U+2]=Q[U+1],I[U+3]=Q[U];else I.set(Q);return new Uint32Array(I.buffer)}if(U){U=new Uint8Array(Q,Y,W);I=new Uint8Array(U.length);for(Q=0;Q<I.length;Q+=
4)I[Q]=U[Q+3],I[Q+1]=U[Q+2],I[Q+2]=U[Q+1],I[Q+3]=U[Q];return new Uint32Array(I.buffer)}return new Uint32Array(Q,Y,W/4)}function K(){const Q=[];for(let Y=0;257>=Y;Y++)Q[Y]=[Y];return Q}function N(Q,Y){for(let W=0;W<Y.length;W++)Q.push(Y[W])}const C=new Set;C.add(511);C.add(1023);C.add(2047);C.add(4095);C.add(8191);R.decode=function(Q,Y,W,U=!0){Q=r(Q,Y,W,U);Y=9;U=K();let I=32,y=U.length,H=[],F=1,b=Q[0],n=0;const m=Q.length;W=8*(4*m-W);const q=[];for(;null!=b;){if(I>=Y)I-=Y,n=b>>>32-Y,b<<=Y;else{n=b>>>
32-I;b=Q[F++];var v=Y-I;I=32-v;n=(n<<v)+(b>>>I);b<<=v}if(257===n)break;if(256===n)Y=9,U=K(),y=U.length,H=[];else{v=U[n];if(null==v){if(n>U.length)throw"data integrity issue: code does not exist on code page";H.push(H[0]);U[y++]=H.slice();N(q,H)}else N(q,v),H.push(v[0]),1<H.length&&(U[y++]=H.slice()),H=v.slice();C.has(y)&&Y++;0===I&&(b=Q[F++],I=32);if(F>m||F===m&&I<=W)break}}return new Uint8Array(q)};Object.defineProperty(R,"__esModule",{value:!0})})},"esri/layers/support/rasterFormats/TiffTags":function(){define(function(){const R=
(()=>{const C=[];C[254]="NEWSUBFILETYPE";C[255]="SUBFILETYPE";C[256]="IMAGEWIDTH";C[257]="IMAGELENGTH";C[258]="BITSPERSAMPLE";C[259]="COMPRESSION";C[262]="PHOTOMETRICINTERPRETATION";C[263]="THRESHHOLDING";C[264]="CELLWIDTH";C[265]="CELLLENGTH";C[266]="FILLORDER";C[269]="DOCUMENTNAME";C[270]="IMAGEDESCRIPTION";C[271]="MAKE";C[272]="MODEL";C[273]="STRIPOFFSETS";C[274]="ORIENTATION";C[277]="SAMPLESPERPIXEL";C[278]="ROWSPERSTRIP";C[279]="STRIPBYTECOUNTS";C[280]="MINSAMPLEVALUE";C[281]="MAXSAMPLEVALUE";
C[282]="XRESOLUTION";C[283]="YRESOLUTION";C[284]="PLANARCONFIGURATION";C[285]="PAGENAME";C[286]="XPOSITION";C[287]="YPOSITION";C[288]="FREEOFFSETS";C[289]="FREEBYTECOUNTS";C[290]="GRAYRESPONSEUNIT";C[291]="GRAYRESPONSECURVE";C[292]="T4OPTIONS";C[293]="T6OPTIONS";C[296]="RESOLUTIONUNIT";C[297]="PAGENUMBER";C[300]="COLORRESPONSEUNIT";C[301]="TRANSFERFUNCTION";C[305]="SOFTWARE";C[306]="DATETIME";C[315]="ARTIST";C[316]="HOSTCOMPUTER";C[317]="PREDICTOR";C[318]="WHITEPOINT";C[319]="PRIMARYCHROMATICITIES";
C[320]="COLORMAP";C[321]="HALFTONEHINTS";C[322]="TILEWIDTH";C[323]="TILELENGTH";C[324]="TILEOFFSETS";C[325]="TILEBYTECOUNTS";C[326]="BADFAXLINES";C[327]="CLEANFAXDATA";C[328]="CONSECUTIVEBADFAXLINES";C[330]="SUBIFD";C[332]="INKSET";C[333]="INKNAMES";C[334]="NUMBEROFINKS";C[336]="DOTRANGE";C[337]="TARGETPRINTER";C[338]="EXTRASAMPLES";C[339]="SAMPLEFORMAT";C[340]="SMINSAMPLEVALUE";C[341]="SMAXSAMPLEVALUE";C[342]="TRANSFERRANGE";C[347]="JPEGTABLES";C[512]="JPEGPROC";C[513]="JPEGIFOFFSET";C[514]="JPEGIFBYTECOUNT";
C[515]="JPEGRESTARTINTERVAL";C[517]="JPEGLOSSLESSPREDICTORS";C[518]="JPEGPOINTTRANSFORM";C[519]="JPEGQTABLES";C[520]="JPEGDCTABLES";C[521]="JPEGACTABLES";C[529]="YCBCRCOEFFICIENTS";C[530]="YCBCRSUBSAMPLING";C[531]="YCBCRPOSITIONING";C[532]="REFERENCEBLACKWHITE";C[700]="XMP";C[33550]="GEOPIXELSCALE";C[33922]="GEOTIEPOINTS";C[33432]="COPYRIGHT";C[42112]="GDAL_METADATA";C[42113]="GDAL_NODATA";C[50844]="RPCCOEFFICIENT";C[34264]="GEOTRANSMATRIX";C[34735]="GEOKEYDIRECTORY";C[34736]="GEODOUBLEPARAMS";C[34737]=
"GEOASCIIPARAMS";C[34665]="EXIFIFD";C[34853]="GPSIFD";C[40965]="INTEROPERABILITYIFD";return C})(),r=(()=>{const C=[].concat(R);C[36864]="ExifVersion";C[40960]="FlashpixVersion";C[40961]="ColorSpace";C[42240]="Gamma";C[37121]="ComponentsConfiguration";C[37122]="CompressedBitsPerPixel";C[40962]="PixelXDimension";C[40963]="PixelYDimension";C[37500]="MakerNote";C[37510]="UserComment";C[40964]="RelatedSoundFile";C[36867]="DateTimeOriginal";C[36868]="DateTimeDigitized";C[36880]="OffsetTime";C[36881]="OffsetTimeOriginal";
C[36882]="OffsetTimeDigitized";C[37520]="SubSecTime";C[37521]="SubSecTimeOriginal";C[37522]="SubSecTimeDigitized";C[37888]="Temperature";C[37889]="Humidity";C[37890]="Pressure";C[37891]="WaterDepth";C[37892]="Acceleration";C[37893]="CameraElevationAngle";C[42016]="ImageUniqueID";C[42032]="CameraOwnerName";C[42033]="BodySerialNumber";C[42034]="LensSpecification";C[42035]="LensMake";C[42036]="LensModel";C[42037]="LensSerialNumber";C[33434]="ExposureTime";C[33437]="FNumber";C[34850]="ExposureProgram";
C[34852]="SpectralSensitivity";C[34855]="PhotographicSensitivity";C[34856]="OECF";C[34864]="SensitivityType";C[34865]="StandardOutputSensitivity";C[34866]="RecommendedExposureIndex";C[34867]="ISOSpeed";C[34868]="ISOSpeedLatitudeyyy";C[34869]="ISOSpeedLatitudezzz";C[37377]="ShutterSpeedValue";C[37378]="ApertureValue";C[37379]="BrightnessValue";C[37380]="ExposureBiasValue";C[37381]="MaxApertureValue";C[37382]="SubjectDistance";C[37383]="MeteringMode";C[37384]="LightSource";C[37385]="Flash";C[37386]=
"FocalLength";C[37396]="SubjectArea";C[41483]="FlashEnergy";C[41484]="SpatialFrequencyResponse";C[41486]="FocalPlaneXResolution";C[41487]="FocalPlaneYResolution";C[41488]="FocalPlaneResolutionUnit";C[41492]="SubjectLocation";C[41493]="ExposureIndex";C[41495]="SensingMethod";C[41728]="FileSource";C[41729]="SceneType";C[41730]="CFAPattern";C[41985]="CustomRendered";C[41986]="ExposureMode";C[41987]="WhiteBalance";C[41988]="DigitalZoomRatio";C[41989]="FocalLengthIn35mmFilm";C[41990]="SceneCaptureType";
C[41991]="GainControl";C[41992]="Contrast";C[41993]="Saturation";C[41994]="Sharpness";C[41995]="DeviceSettingDescription";C[41996]="SubjectDistanceRange";return C})(),K=(()=>{const C=[];C[1024]="GTModelTypeGeoKey";C[1025]="GTRasterTypeGeoKey";C[1026]="GTCitationGeoKey";C[2048]="GeographicTypeGeoKey";C[2049]="GeogCitationGeoKey";C[2050]="GeogGeodeticDatumGeoKey";C[2051]="GeogPrimeMeridianGeoKey";C[2052]="GeogLinearUnitsGeoKey";C[2053]="GeogLinearUnitSizeGeoKey";C[2054]="GeogAngularUnitsGeoKey";C[2055]=
"GeogAngularUnitSizeGeoKey";C[2056]="GeogEllipsoidGeoKey";C[2057]="GeogSemiMajorAxisGeoKey";C[2058]="GeogSemiMinorAxisGeoKey";C[2059]="GeogInvFlatteningGeoKey";C[2061]="GeogPrimeMeridianLongGeoKey";C[2060]="GeogAzimuthUnitsGeoKey";C[3072]="ProjectedCSTypeGeoKey";C[3073]="PCSCitationGeoKey";C[3074]="ProjectionGeoKey";C[3075]="ProjCoordTransGeoKey";C[3076]="ProjLinearUnitsGeoKey";C[3077]="ProjLinearUnitSizeGeoKey";C[3078]="ProjStdParallel1GeoKey";C[3079]="ProjStdParallel2GeoKey";C[3080]="ProjNatOriginLongGeoKey";
C[3081]="ProjNatOriginLatGeoKey";C[3082]="ProjFalseEastingGeoKey";C[3083]="ProjFalseNorthingGeoKey";C[3084]="ProjFalseOriginLongGeoKey";C[3085]="ProjFalseOriginLatGeoKey";C[3086]="ProjFalseOriginEastingGeoKey";C[3087]="ProjFalseOriginNorthingGeoKey";C[3088]="ProjCenterLongGeoKey";C[3090]="ProjCenterEastingGeoKey";C[3091]="ProjCenterNorthingGeoKey";C[3092]="ProjScaleAtNatOriginGeoKey";C[3093]="ProjScaleAtCenterGeoKey";C[3094]="ProjAzimuthAngleGeoKey";C[3095]="ProjStraightVertPoleLongGeoKey";C[4096]=
"VerticalCSTypeGeoKey";C[4097]="VerticalCitationGeoKey";C[4098]="VerticalDatumGeoKey";C[4099]="VerticalUnitsGeoKey";return C})(),N=new Map;N.set("EXIFIFD",r);N.set("GPSIFD","GPSVersionID GPSLatitudeRef GPSLatitude GPSLongitudeRef GPSLongitude GPSAltitudeRef GPSAltitude GPSTimeStamp GPSSatellites GPSStatus GPSMeasureMode GPSDOP GPSSpeedRef GPSSpeed GPSTrackRef GPSTrack GPSImgDirectionRef GPSImgDirection GPSMapDatum GPSDestLatitudeRef GPSDestLatitude GPSDestLongitudeRef GPSDestLongitude GPSDestBearingRef GPSDestBearing GPSDestDistanceRef GPSDestDistance GPSProcessingMethod GPSAreaInformation GPSDateStamp GPSDifferential GPSHPositioningError".split(" "));
return{TIFF_TAGS:R,ifdTags:N,GEO_KEYS:K,getTagName:function(C,Q){Q=(Q||R)[C];void 0===Q&&(Q="unknown"+String(C));return Q}}})},"esri/layers/support/rasterFormats/utils":function(){define(["exports"],function(R){{var r=new ArrayBuffer(4);const K=new Uint8Array(r);(new Uint32Array(r))[0]=1;r=1===K[0]}R.isPlatformLittleEndian=r;Object.defineProperty(R,"__esModule",{value:!0})})},"esri/chunks/LercCodec":function(){define(["exports"],function(R){function r(Q){K[0]=Q;return K[0]}const K=new Float32Array(1),
N=r(3.4028234663852886E38);var C=r(Math.max(-N,Math.min(-Infinity,N)));R.decode=function(Q,Y){Y=Y||{};var W=Y.inputOffset||0;var U=Y.encodedMaskData||null===Y.encodedMaskData;var I=new Uint8Array(Q,W,10);I=String.fromCharCode.apply(null,I);if("CntZImage"!=I.trim())throw"Unexpected file identifier string: "+I;W+=10;var y=new DataView(Q,W,24);var H=y.getInt32(0,!0);var F=y.getInt32(4,!0);var b=y.getUint32(8,!0);var n=y.getUint32(12,!0);var m=y.getFloat64(16,!0);W+=24;if(!U){y=new DataView(Q,W,16);var q=
{};q.numBlocksY=y.getUint32(0,!0);q.numBlocksX=y.getUint32(4,!0);q.numBytes=y.getUint32(8,!0);q.maxValue=y.getFloat32(12,!0);W+=16;if(0<q.numBytes){U=new Uint8Array(Math.ceil(n*b/8));y=new DataView(Q,W,q.numBytes);var v=y.getInt16(0,!0);var D=2;var x=0;do{if(0<v)for(;v--;)U[x++]=y.getUint8(D++);else{var A=y.getUint8(D++);for(v=-v;v--;)U[x++]=A}v=y.getInt16(D,!0);D+=2}while(D<q.numBytes);if(-32768!==v||x<U.length)throw"Unexpected end of mask RLE encoding";q.bitset=U;W+=q.numBytes}else 0===(q.numBytes|
q.numBlocksY|q.maxValue)&&(U=new Uint8Array(Math.ceil(n*b/8)),q.bitset=U)}y=new DataView(Q,W,16);var u=U=A=x=D=v=void 0;v=y.getUint32(0,!0);D=y.getUint32(4,!0);x=y.getUint32(8,!0);A=y.getFloat32(12,!0);W+=16;u=D;U=v;u+=0<n%u?1:0;var g=U+(0<b%U?1:0);U=Array(u*g);for(var c=1E9,E=0,l=0;l<g;l++)for(var w=0;w<u;w++){var G=0;y=new DataView(Q,W,Math.min(10,Q.byteLength-W));var d={};U[E++]=d;var h=y.getUint8(0);G++;d.encoding=h&63;if(3<d.encoding)throw"Invalid block encoding ("+d.encoding+")";if(2===d.encoding)W++,
c=Math.min(c,0);else{if(0!==h&&2!==h){h>>=6;d.offsetType=h;if(2===h)d.offset=y.getInt8(1),G++;else if(1===h)d.offset=y.getInt16(1,!0),G+=2;else if(0===h)d.offset=y.getFloat32(1,!0),G+=4;else throw"Invalid block offset type";c=Math.min(d.offset,c);if(1===d.encoding)if(h=y.getUint8(G),G++,d.bitsPerPixel=h&63,h>>=6,d.numValidPixelsType=h,2===h)d.numValidPixels=y.getUint8(G),G++;else if(1===h)d.numValidPixels=y.getUint16(G,!0),G+=2;else if(0===h)d.numValidPixels=y.getUint32(G,!0),G+=4;else throw"Invalid valid pixel count type";
}W+=G;if(3!=d.encoding)if(0===d.encoding){y=(x-1)/4;if(y!==Math.floor(y))throw"uncompressed block has invalid length";G=new ArrayBuffer(4*y);h=new Uint8Array(G);h.set(new Uint8Array(Q,W,4*y));G=new Float32Array(G);for(h=0;h<G.length;h++)c=Math.min(c,G[h]);d.rawData=G;W+=4*y}else 1===d.encoding&&(y=Math.ceil(d.numValidPixels*d.bitsPerPixel/8),G=new ArrayBuffer(4*Math.ceil(y/4)),h=new Uint8Array(G),h.set(new Uint8Array(Q,W,y)),d.stuffedData=new Uint32Array(G),W+=y)}}u=c;Q=W;W=null!=Y.noDataValue?r(Math.max(-N,
Math.min(Y.noDataValue,N))):C;g=Y.encodedMaskData;h=Y.returnMask;c=0;E=D;l=v;w=Math.floor(n/E);d=Math.floor(b/l);G=2*m;g=g||(q?q.bitset:null);var p;y=new (Y.pixelType||Float32Array)(n*b);h&&g&&(p=new Uint8Array(n*b));h=new Float32Array(w*d);for(var k,f,B=0;B<=l;B++){var O=B!==l?d:b%l;if(0!==O)for(var z=0;z<=E;z++){var t=z!==E?w:n%E;if(0!==t){var J=B*n*d+z*w,V=n-t,T=U[c],ba;if(2>T.encoding){if(0===T.encoding)var M=T.rawData;else{k=ba=M=void 0;f=T.stuffedData;var L=T.bitsPerPixel,S=T.numValidPixels,
X=T.offset,aa=G,fa=h,a=A,e=(1<<L)-1,P=0,Z=0,da=Math.ceil((a-X)/aa);f[f.length-1]<<=8*(4*f.length-Math.ceil(L*S/8));for(k=0;k<S;k++)0===Z&&(M=f[P++],Z=32),Z>=L?(ba=M>>>Z-L&e,Z-=L):(Z=L-Z,ba=(M&e)<<Z&e,M=f[P++],Z=32-Z,ba+=M>>>Z),fa[k]=ba<da?X+ba*aa:a;M=h}ba=0}else var ka=2===T.encoding?0:T.offset;if(g)for(f=0;f<O;f++){if(J&7){var la=g[J>>3];la<<=J&7}for(k=0;k<t;k++)J&7||(la=g[J>>3]),la&128?(p&&(p[J]=1),y[J++]=2>T.encoding?M[ba++]:ka):(p&&(p[J]=0),y[J++]=W),la<<=1;J+=V}else if(2>T.encoding)for(f=0;f<
O;f++){for(k=0;k<t;k++)y[J++]=M[ba++];J+=V}else for(f=0;f<O;f++)if(y.fill)y.fill(ka,J,J+t),J+=t+V;else{for(k=0;k<t;k++)y[J++]=ka;J+=V}if(1===T.encoding&&ba!==T.numValidPixels)throw"Block and Mask do not match";c++}}}ka=p;p={width:n,height:b,pixelData:y,minValue:u,maxValue:A,noDataValue:W};ka&&(p.maskData=ka);Y.returnEncodedMask&&q&&(p.encodedMaskData=q.bitset?q.bitset:null);if(Y.returnFileInfo&&(p.fileInfo={fileIdentifierString:I,fileVersion:H,imageType:F,height:b,width:n,maxZError:m,eofOffset:Q,
mask:q?{numBlocksX:q.numBlocksX,numBlocksY:q.numBlocksY,numBytes:q.numBytes,maxValue:q.maxValue}:null,pixels:{numBlocksX:D,numBlocksY:v,numBytes:x,maxValue:A,minValue:u,noDataValue:W}},Y.computeUsedBitDepths)){Y=p.fileInfo;q=D*v;I={};for(H=0;H<q;H++)F=U[H],0===F.encoding?I.float32=!0:1===F.encoding?I[F.bitsPerPixel]=!0:I[0]=!0;q=Object.keys(I);Y.bitDepths=q}return p}})},"esri/layers/support/rasterFormats/Raw":function(){define(function(){const R=function(r){let K=1;switch(r){case Uint8Array:case Int8Array:K=
1;break;case Uint16Array:case Int16Array:K=2;break;case Uint32Array:case Int32Array:case Float32Array:K=4;break;case Float64Array:K=8}return K};return function(){function r(){}r.decode=function(K,N){var C=N.pixelType;const Q=[],Y=N.width*N.height;var W=Math.floor(K.byteLength/(N.width*N.height*R(N.pixelType)));const {bandIds:U,format:I}=N;N=U&&U.length||Math.floor(K.byteLength/(N.width*N.height*R(N.pixelType)));var y=K.byteLength-K.byteLength%(Y*R(C));const H=new C(K,0,Y*W);let F,b;let n,m;if("bip"===
I)for(F=0;F<N;F++){n=new C(Y);m=U?U[F]:F;for(b=0;b<Y;b++)n[b]=H[b*W+m];Q.push(n)}else if("bsq"===I)for(F=0;F<N;F++)m=U?U[F]:F,Q.push(H.subarray(m*Y,(m+1)*Y));if(y<K.byteLength-1)if(K=K.slice(y),8*K.byteLength<Y)var q=null;else{K=new Uint8Array(K,0,Math.ceil(Y/8));C=new Uint8Array(Y);for(N=y=N=q=W=0;N<K.length-1;N++)for(q=K[N],y=7;0<=y;y--)C[W++]=q>>y&1;for(y=7;W<Y-1;)q=K[K.length-1],C[W++]=q>>y&1,y--;q=C}return{pixels:Q,mask:q}};return r}()})},"esri/layers/support/rasterDatasets/DBFParser":function(){define(["../../../chunks/_rollupPluginBabelHelpers",
"./byteStreamUtils"],function(R,r){function K(N){var C=N.fields;N=N.records;const Q=C.some(y=>"oid"===y.name.toLowerCase())?"OBJECTID":"OID";C=[{name:Q,type:"esriFieldTypeOID",alias:"OID"}].concat(C.map(y=>({name:y.name,type:"esriFieldType"+y.typeName,alias:y.name})));const Y=C.map(y=>y.name),W=[];let U=0,I=0;N.forEach(y=>{const H={};H[Q]=U++;for(I=1;I<Y.length;I++)H[Y[I]]=y[I-1];W.push({attributes:H})});return{displayFieldName:"",fields:C,features:W}}return function(){function N(){}N.parse=function(C){var Q=
new DataView(C),Y=Q.getUint8(0)&3;if(3!==Y)return{header:{version:Y},recordSet:null};const W=Q.getUint32(4,!0);var U=Q.getUint16(8,!0);const I=Q.getUint16(10,!0);U={version:Y,recordCount:W,headerByteCount:U,recordByteCount:I};let y=32;const H=[],F=[];if(3===Y){for(;13!==Q.getUint8(y);)Y=String.fromCharCode(Q.getUint8(y+11)).trim(),H.push({name:r.bytesToUTF8(new Uint8Array(C,y,11)),type:Y,typeName:"String Date Double Boolean String Integer".split(" ")["CDFLMN".split("").indexOf(Y)],length:Q.getUint8(y+
16)}),y+=32;y+=1;if(0<H.length)for(;F.length<W&&C.byteLength-y>I;){const b=[];32===Q.getUint8(y)?(y+=1,H.forEach(n=>{if("C"===n.type)b.push(r.bytesToUTF8(new Uint8Array(C,y,n.length)).trim());else if("N"===n.type)b.push(parseInt(String.fromCharCode.apply(null,new Uint8Array(C,y,n.length)).trim(),10));else if("F"===n.type)b.push(parseFloat(String.fromCharCode.apply(null,new Uint8Array(C,y,n.length)).trim()));else if("D"===n.type){const m=String.fromCharCode.apply(null,new Uint8Array(C,y,n.length)).trim();
b.push(new Date(parseInt(m.substring(0,4),10),parseInt(m.substring(4,6),10)-1,parseInt(m.substring(6,8),10)))}y+=n.length}),F.push(b)):y+=I}}Q=K({fields:H,records:F});return{header:U,fields:H,records:F,recordSet:Q}};R._createClass(N,null,[{key:"supportedVersions",get:function(){return[5]}}]);return N}()})},"esri/layers/support/rasterTransforms/utils":function(){define(["exports","./IdentityTransform","./PolynomialTransform"],function(R,r,K){const N={PolynomialXform:K,IdentityXform:r},C=Object.keys(N);
R.isTransformSupported=function(Q){const Y=null==Q?void 0:Q.type;return!Q||C.includes(Y)};R.readTransform=function(Q){if(null==Q||!Q.type)return null;var Y=N[null==Q?void 0:Q.type];return Y?(Y=new Y,Y.read(Q),Y):null};Object.defineProperty(R,"__esModule",{value:!0})})},"esri/layers/support/rasterTransforms/IdentityTransform":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/Logger ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass ./BaseRasterTransform".split(" "),
function(R,r,K,N,C,Q,Y,W,U){K=function(I){function y(){var H=I.apply(this,arguments)||this;H.type="identity";return H}R._inheritsLoose(y,I);return y}(U);r.__decorate([Y.enumeration({IdentityXform:"identity"})],K.prototype,"type",void 0);return K=r.__decorate([W.subclass("esri.layers.support.rasterTransforms.IdentityTransform")],K)})},"esri/layers/support/rasterTransforms/BaseRasterTransform":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/Logger ../../../core/jsonMap ../../../core/accessorSupport/decorators/subclass".split(" "),
function(R,r,K,N,C,Q,Y,W,U){K=function(I){function y(){var F=I.apply(this,arguments)||this;F.affectsPixelSize=!1;return F}R._inheritsLoose(y,I);var H=y.prototype;H.forwardTransform=function(F){return F};H.inverseTransform=function(F){return F};return y}(K.JSONSupport);r.__decorate([N.property()],K.prototype,"affectsPixelSize",void 0);r.__decorate([N.property({json:{write:!0}})],K.prototype,"spatialReference",void 0);return K=r.__decorate([U.subclass("esri.layers.support.rasterTransforms.BaseRasterTransform")],
K)})},"esri/layers/support/rasterTransforms/PolynomialTransform":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../geometry ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/Logger ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/reader ../../../core/accessorSupport/decorators/subclass ../../../core/accessorSupport/decorators/writer ./BaseRasterTransform ../../../geometry/Point ../../../geometry/Extent".split(" "),
function(R,r,K,N,C,Q,Y,W,U,I,y,H,F,b){function n(q,v,D){const {x,y:A}=v;if(2>D)return{x:q[0]+x*q[2]+A*q[4],y:q[1]+x*q[3]+A*q[5]};if(2===D){v=x*x;D=A*A;var u=x*A;return{x:q[0]+x*q[2]+A*q[4]+v*q[6]+u*q[8]+D*q[10],y:q[1]+x*q[3]+A*q[5]+v*q[7]+u*q[9]+D*q[11]}}v=x*x;D=A*A;u=x*A;const g=v*x,c=v*A,E=x*D,l=A*D;return{x:q[0]+x*q[2]+A*q[4]+v*q[6]+u*q[8]+D*q[10]+g*q[12]+c*q[14]+E*q[16]+l*q[18],y:q[1]+x*q[3]+A*q[5]+v*q[7]+u*q[9]+D*q[11]+g*q[13]+c*q[15]+E*q[17]+l*q[19]}}function m(q,v,D){const {xmin:x,ymin:A,xmax:u,
ymax:g,spatialReference:c}=v;v=[];if(2>D)v.push({x,y:g}),v.push({x:u,y:g}),v.push({x,y:A}),v.push({x:u,y:A});else{var E=10;for(var l=0;l<E;l++)v.push({x,y:A+(g-A)*l/(E-1)}),v.push({x:u,y:A+(g-A)*l/(E-1)});E=8;for(l=1;l<=E;l++)v.push({x:x+(u-x)*l/E,y:A}),v.push({x:x+(u-x)*l/E,y:g})}v=v.map(w=>n(q,w,D));E=v.map(w=>w.x);v=v.map(w=>w.y);return new b({xmin:Math.min.apply(null,E),xmax:Math.max.apply(null,E),ymin:Math.min.apply(null,v),ymax:Math.max.apply(null,v),spatialReference:c})}K=function(q){function v(){var x=
q.apply(this,arguments)||this;x.polynomialOrder=1;x.type="polynomial";return x}R._inheritsLoose(v,q);var D=v.prototype;D.readForwardCoefficients=function(x,A){const {coeffX:u,coeffY:g}=A;if(null==u||!u.length||null==g||!g.length||u.length!==g.length)return null;x=[];for(A=0;A<u.length;A++)x.push(u[A]),x.push(g[A]);return x};D.writeForwardCoefficients=function(x,A,u){u=[];const g=[];for(let c=0;c<(null==x?void 0:x.length);c++)0===c%2?u.push(x[c]):g.push(x[c]);A.coeffX=u;A.coeffY=g};D.readInverseCoefficients=
function(x,A){const {inverseCoeffX:u,inverseCoeffY:g}=A;if(null==u||!u.length||null==g||!g.length||u.length!==g.length)return null;x=[];for(A=0;A<u.length;A++)x.push(u[A]),x.push(g[A]);return x};D.writeInverseCoefficients=function(x,A,u){u=[];const g=[];for(let c=0;c<(null==x?void 0:x.length);c++)0===c%2?u.push(x[c]):g.push(x[c]);A.inverseCoeffX=u;A.inverseCoeffY=g};D.forwardTransform=function(x){if("point"===x.type){const A=n(this.forwardCoefficients,x,this.polynomialOrder);return new F({x:A.x,y:A.y,
spatialReference:x.spatialReference})}return m(this.forwardCoefficients,x,this.polynomialOrder)};D.inverseTransform=function(x){if("point"===x.type){const A=n(this.inverseCoefficients,x,this.polynomialOrder);return new F({x:A.x,y:A.y,spatialReference:x.spatialReference})}return m(this.inverseCoefficients,x,this.polynomialOrder)};R._createClass(v,[{key:"inverseCoefficients",get:function(){var x=this._get("inverseCoefficients"),A=this._get("forwardCoefficients");if(!x&&A&&2>this.polynomialOrder){{const [u,
g,c,E,l,w]=A;x=c*w-l*E;A=l*E-c*w;x=[(l*g-u*w)/x,(c*g-u*E)/A,w/x,E/A,-l/x,-c/A]}}return x},set:function(x){this._set("inverseCoefficients",x)}}]);return v}(H);r.__decorate([N.property({json:{write:!0}})],K.prototype,"polynomialOrder",void 0);r.__decorate([N.property()],K.prototype,"forwardCoefficients",void 0);r.__decorate([U.reader("forwardCoefficients",["coeffX","coeffY"])],K.prototype,"readForwardCoefficients",null);r.__decorate([y.writer("forwardCoefficients")],K.prototype,"writeForwardCoefficients",
null);r.__decorate([N.property({json:{write:!0}})],K.prototype,"inverseCoefficients",null);r.__decorate([U.reader("inverseCoefficients",["inverseCoeffX","inverseCoeffY"])],K.prototype,"readInverseCoefficients",null);r.__decorate([y.writer("inverseCoefficients")],K.prototype,"writeInverseCoefficients",null);r.__decorate([N.property()],K.prototype,"affectsPixelSize",void 0);r.__decorate([W.enumeration({PolynomialXform:"polynomial"})],K.prototype,"type",void 0);return K=r.__decorate([I.subclass("esri.layers.support.rasterTransforms.PolynomialTransform")],
K)})},"esri/layers/support/rasterDatasets/ImageAuxRaster":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../geometry ../../../core/Error ../../../core/maybe ../../../core/promiseUtils ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/Logger ../../../core/jsonMap ../../../core/accessorSupport/decorators/subclass ./BaseRaster ./InMemoryRaster ./pamParser ../rasterFormats/RasterCodec ../rasterFunctions/pixelUtils ../rasterTransforms/PolynomialTransform ../../../geometry/SpatialReference ../../../geometry/Extent".split(" "),
function(R,r,K,N,C,Q,Y,W,U,I,y,H,F,b,n,m,q,v,D,x){K=function(A){function u(){return A.apply(this,arguments)||this}R._inheritsLoose(u,A);var g=u.prototype;g.open=function(){var c=R._asyncToGenerator(function*(E){yield this.init();var l=yield this._fetchData(E);let {spatialReference:w,statistics:G,histograms:d,transform:h}=yield this._fetchAuxiliaryData(E);(E=!w)&&(w=new D({wkid:3857}));null!=d&&d.length&&null==G&&(G=q.estimateStatisticsFromHistograms(d));const {width:p,height:k}=l;let f=new x({xmin:-.5,
ymin:.5-k,xmax:p-.5,ymax:.5,spatialReference:w});const B=h?h.forwardTransform(f):f;var O=!0;h&&(O=(O=h.forwardCoefficients)&&0===O[1]&&0===O[2])&&(h=null,f=B);l=new b({data:{extent:B,nativeExtent:f,transform:h,pixelBlock:l,statistics:G,histograms:d,keyProperties:{DateType:"Processed"},isPseudoSpatialReference:E}});yield l.open();this._set("rasterInfo",l.rasterInfo);this._inMemoryRaster=l});return function(E){return c.apply(this,arguments)}}();g.fetchRawTile=function(c,E,l,w={}){return this._inMemoryRaster.fetchRawTile(c,
E,l,w)};g._fetchData=function(){var c=R._asyncToGenerator(function*(E){({data:E}=yield this.request(this.url,{responseType:"array-buffer",signal:null==E?void 0:E.signal}));const l=m.getFormat(E).toUpperCase();if("JPG"===l||"PNG"===l||"GIF"===l||"BMP"===l)this._set("datasetFormat",l);else throw new N("image-aux-raster:open","the data is not a supported format");return yield this.decodePixelBlock(E,{format:"jpg",width:1,height:1,useCanvas:!0})});return function(E){return c.apply(this,arguments)}}();
g._fetchAuxiliaryData=function(){var c=R._asyncToGenerator(function*(E){var l,w;E=C.unwrap(null==E?void 0:E.signal);var G=null!=(l=this.ioConfig.skipExtensions)?l:[];l=-1<G.indexOf("aux.xml")?null:this.request(this.url+".aux.xml",{responseType:"xml",signal:E});var d=this.datasetFormat;d="JPG"===d?"jgw":"PNG"===d?"pgw":"BMP"===d?"bpw":null;G=-1<G.indexOf(d)?null:this.request(this.url.slice(0,this.url.lastIndexOf("."))+"."+d,{responseType:"text",signal:E});G=yield Q.eachAlways([l,G]);if(null!=E&&E.aborted)throw Q.createAbortError();
E=n.parsePAMInfo(null==(w=G[0].value)?void 0:w.data);E.transform||(w=G[1].value?G[1].value.data.split("\n").slice(0,6).map(h=>Number(h)):null,E.transform=6===(null==w?void 0:w.length)?new v({forwardCoefficients:[w[4],w[5],w[0],-w[1],w[2],-w[3]]}):null);return E});return function(E){return c.apply(this,arguments)}}();return u}(F);r.__decorate([Y.property({type:String,json:{write:!0}})],K.prototype,"datasetFormat",void 0);return K=r.__decorate([H.subclass("esri.layers.support.rasterDatasets.ImageAuxRaster")],
K)})},"esri/layers/support/rasterDatasets/InMemoryRaster":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../geometry ../../../core/Error ../../../core/maybe ../../../core/promiseUtils ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/Logger ../../../core/jsonMap ../../../core/accessorSupport/decorators/subclass ../RasterInfo ./BaseRaster ../rasterFunctions/pixelUtils ../../../geometry/Extent ../../../geometry/SpatialReference".split(" "),
function(R,r,K,N,C,Q,Y,W,U,I,y,H,F,b,n,m,q){K=function(v){function D(){var A=v.apply(this,arguments)||this;A.datasetFormat="MEMORY";return A}R._inheritsLoose(D,v);var x=D.prototype;x.open=function(){var A=R._asyncToGenerator(function*(u){var g;yield this.init();const {pixelBlock:c,statistics:E,histograms:l,name:w,keyProperties:G,nativeExtent:d,transform:h}=this.data,{width:p,height:k,pixelType:f}=c,B=this.data.extent||new m({xmin:-.5,ymin:.5,xmax:p-.5,ymax:k-.5,spatialReference:new q({wkid:3857})}),
O=null!=(g=this.data.isPseudoSpatialReference)?g:!this.data.extent;g=new F({width:p,height:k,pixelType:f,extent:B,nativeExtent:d,transform:h,pixelSize:{x:B.width/p,y:B.height/k},spatialReference:B.spatialReference,bandCount:3,keyProperties:G||{},statistics:E,isPseudoSpatialReference:O,histograms:l});this.createRemoteDatasetStorageInfo(g,512,512);this._set("rasterInfo",g);this.updateTileInfo();yield this._buildInMemoryRaster(c,{width:512,height:512},u);this.datasetName=w;this.url="/InMemory/"+w});
return function(u){return A.apply(this,arguments)}}();x.fetchRawTile=function(A,u,g,c){A=this._pixelBlockTiles.get(`${A}/${u}/${g}`);return Promise.resolve(A)};x._buildInMemoryRaster=function(){var A=R._asyncToGenerator(function*(u,g,c){var E=this.rasterInfo.storageInfo.maximumPyramidLevel;const l=this.rasterJobHandler?this.rasterJobHandler.split({pixelBlock:u,tileSize:g,maximumPyramidLevel:E},c):Promise.resolve(n.split(u,g,E));g=C.isSome(this.rasterInfo.statistics);E=C.isSome(this.rasterInfo.histograms);
u=g&&E?Promise.resolve({statistics:null,histograms:null}):this.rasterJobHandler?this.rasterJobHandler.estimateStatisticsHistograms({pixelBlock:u},c):Promise.resolve(n.estimateStatisticsHistograms(u));u=yield Q.eachAlways([l,u]);if(!u[0].value&&u[1].value)throw new N("inmemory-raster:open","failed to build in memory raster");this._pixelBlockTiles=u[0].value;if(!g){var w;this.rasterInfo.statistics=null==(w=u[1].value)?void 0:w.statistics}if(E){var G;this.rasterInfo.histograms=null==(G=u[1].value)?void 0:
G.histograms}});return function(u,g,c){return A.apply(this,arguments)}}();return D}(b);r.__decorate([Y.property({type:String,json:{write:!0}})],K.prototype,"datasetFormat",void 0);r.__decorate([Y.property()],K.prototype,"data",void 0);return K=r.__decorate([H.subclass("esri.layers.support.rasterDatasets.InMemoryRaster")],K)})},"esri/layers/support/rasterDatasets/pamParser":function(){define(["exports","../../../geometry","./xmlUtilities","../rasterTransforms/PolynomialTransform","../../../geometry/SpatialReference"],
function(R,r,K,N,C){function Q(y,H){if(!y||!H)return null;const F=[];for(let b=0;b<y.length;b++)F.push(y[b]),F.push(H[b]);return F}function Y(y){var H,F=K.getElement(y,"GeodataXform");y=K.getElementNumericValue(F,"SpatialReference/WKID")||K.getElementValue(F,"SpatialReference/WKT");y=U(y);if("typens:PolynomialXform"!==F.getAttribute("xsi:type"))return{spatialReference:y,transform:null};var b=null!=(H=K.getElementNumericValue(F,"PolynomialOrder"))?H:1,n=K.getElementNumericValues(F,"CoeffX/Double");
const m=K.getElementNumericValues(F,"CoeffY/Double");H=K.getElementNumericValues(F,"InverseCoeffX/Double");F=K.getElementNumericValues(F,"InverseCoeffY/Double");n=Q(n,m);F=Q(H,F);b=new N({spatialReference:y,polynomialOrder:b,forwardCoefficients:n,inverseCoefficients:F});return{spatialReference:y,transform:b}}function W(y){var H;const F=K.getElementNumericValue(y,"NoDataValue");var b=K.getElement(y,"Histograms/HistItem");const n=K.getElementNumericValue(b,"HistMin"),m=K.getElementNumericValue(b,"HistMax"),
q=K.getElementNumericValue(b,"BucketCount");b=null==(H=K.getElementValue(b,"HistCounts"))?void 0:H.split("|").map(u=>Number(u));let v,D,x,A;K.getElements(y,"Metadata/MDI").forEach(u=>{var g;const c=Number(null!=(g=u.textContent)?g:u.nodeValue);switch(u.getAttribute("key").toUpperCase()){case "STATISTICS_MINIMUM":v=c;break;case "STATISTICS_MAXIMUM":D=c;break;case "STATISTICS_MEAN":x=c;break;case "STATISTICS_STDDEV":A=c}});y=K.getElementNumericValue(y,"Metadata/SourceBandIndex");return{noDataValue:F,
histogram:null!=b&&b.length&&null!=v&&null!=D?{min:n,max:m,size:q||b.length,counts:b}:null,sourceBandIndex:y,statistics:null!=v&&null!=D?{min:v,max:D,avg:x,stddev:A}:null}}function U(y){if(!y)return null;var H=Number(y);if(!isNaN(H)&&0!==H)return new C({wkid:H});y=String(y);if(y.startsWith("COMPD_CS")){if(!y.includes("VERTCS")||!y.includes("GEOGCS")&&!y.startsWith("PROJCS"))return null;var F=y.indexOf("VERTCS");H=y.indexOf("PROJCS");H=-1<H?H:y.indexOf("GEOGCS");if(-1===H)return null;F=y.slice(H,y.lastIndexOf("]",
F)+1).trim();y=y.slice(H,y.lastIndexOf("]")).trim();F=(H=I(F))?new C({wkid:H}):new C({wkt:F});if(y=I(y))F.vcsWkid=y;return F}if(!y.startsWith("GEOGCS")&&!y.startsWith("PROJCS"))return null;H=I(y);return 0!==H?new C({wkid:H}):new C({wkt:y})}function I(y){var H=y.replace(/\]/g,"[").replace(/"/g,"").split("[").map(F=>F.trim()).filter(F=>""!==F);H=H[H.length-1].split(",");return"EPSG"===H[0]&&y.endsWith('"]]')&&(y=Number(H[1]),!isNaN(y)&&0!==y)?y:0}R.parsePAMInfo=function(y){var H;if("pamdataset"!==(null==
y?void 0:null==(H=y.documentElement.tagName)?void 0:H.toLowerCase()))return{};const F={spatialReference:null,transform:null,metadata:{},rasterBands:[],statistics:null,histograms:null};y.documentElement.childNodes.forEach(b=>{if(1===b.nodeType)if(K.isSameTagIgnoreNS(b,"SRS"))F.spatialReference||(b=K.getElementValue(b),F.spatialReference=U(b));else if(K.isSameTagIgnoreNS(b,"Metadata"))if("xml:ESRI"===b.getAttribute("domain")){const {spatialReference:n,transform:m}=Y(b);F.transform=m;F.spatialReference||
(F.spatialReference=n)}else K.getElements(b,"MDI").forEach(n=>F.metadata[n.getAttribute("key")]=K.getElementValue(n));else K.isSameTagIgnoreNS(b,"PAMRasterBand")&&(b=W(b),null!=b.sourceBandIndex&&null==F.rasterBands[b.sourceBandIndex]?F.rasterBands[b.sourceBandIndex]=b:F.rasterBands.push(b))});if(y=F.rasterBands)F.statistics=y[0].statistics?y.map(b=>b.statistics):null,F.histograms=y[0].histogram?y.map(b=>b.histogram):null;return F};R.parseSpatialReference=U;Object.defineProperty(R,"__esModule",{value:!0})})},
"esri/layers/support/rasterDatasets/xmlUtilities":function(){define(["exports"],function(R){function r(Q,Y){if(!Q||!Y)return[];var W=Y;-1<Y.indexOf("/")?(W=Y.slice(0,Y.indexOf("/")),Y=Y.slice(Y.indexOf("/")+1)):Y="";const U=[];if(Y){Q=r(Q,W);for(W=0;W<Q.length;W++)r(Q[W],Y).forEach(I=>U.push(I));return U}Y=Q.getElementsByTagNameNS("*",W);if(!Y||0===Y.length)return[];for(Q=0;Q<Y.length;Q++)U.push(Y[Q]||Y.item[Q]);return U}function K(Q,Y){if(!Q||!Y)return null;let W=Y;-1<Y.indexOf("/")?(W=Y.slice(0,
Y.indexOf("/")),Y=Y.slice(Y.indexOf("/")+1)):Y="";Q=r(Q,W);return 0<Q.length?Y?K(Q[0],Y):Q[0]:null}function N(Q,Y=null){if(Q=Y?K(Q,Y):Q)if(Q=Q.textContent||Q.nodeValue)return Q.trim();return null}function C(Q,Y){Q=r(Q,Y);Y=[];let W;for(let U=0;U<Q.length;U++)if(W=Q[U].textContent||Q[U].nodeValue)W=W.trim(),""!==W&&Y.push(W);return Y}R.getElement=K;R.getElementNumericValue=function(Q,Y){Q=N(Q,Y);return Number(Q)};R.getElementNumericValues=function(Q,Y){return C(Q,Y).map(W=>Number(W))};R.getElementValue=
N;R.getElementValues=C;R.getElements=r;R.getNodeNameIgnoreNS=function(Q){return Q.nodeName.slice(Q.nodeName.lastIndexOf(":")+1)};R.getSpaceDelimitedNumericValues=function(Q,Y=null){Q=N(Q,Y);return null==Q?void 0:Q.split(" ").map(W=>Number(W))};R.isSameTagIgnoreNS=function(Q,Y){var W;Q=null==Q?void 0:null==(W=Q.nodeName)?void 0:W.toLowerCase();Y=Y.toLowerCase();return Q.slice(Q.lastIndexOf(":")+1)===Y};Object.defineProperty(R,"__esModule",{value:!0})})},"esri/layers/support/rasterDatasets/ImageServerRaster":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../geometry ../../../core/Error ../../../core/maybe ../../../core/urlUtils ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/Logger ../../../core/jsonMap ../../../core/accessorSupport/decorators/subclass ../RasterInfo ../RasterStorageInfo ../serviceTileInfoProperty ../TileInfo ../TilemapCache ./BaseRaster ../rasterFunctions/pixelUtils ../rasterTransforms/GCSShiftTransform ../../../rest/support/FeatureSet ../../../geometry/SpatialReference ../../../geometry/Extent ../../../geometry/Point".split(" "),
function(R,r,K,N,C,Q,Y,W,U,I,y,H,F,b,n,m,q,v,D,x,A,u,g,c){K=function(E){function l(){var G=E.apply(this,arguments)||this;G._levelOffset=0;G._slices=null;G._tilemapCache=null;G.datasetFormat="RasterTileServer";return G}R._inheritsLoose(l,E);var w=l.prototype;w.open=function(){var G=R._asyncToGenerator(function*(d){yield this.init();d=d&&d.signal;var h=this.sourceJSON?{data:this.sourceJSON}:yield this.request(this.url,{query:{f:"json"},signal:d});h.ssl&&(this.url=this.url.replace(/^http:/i,"https:"));
const p=h.data;this.sourceJSON=p;if(!p)throw new N("imageserverraster:open","cannot initialize tiled image service, missing service info");if(!p.tileInfo)throw new N("imageserverraster:open","use ImageryLayer to open non-tiled image services");this._fixScaleInServiceInfo();h="jpg jpeg png png8 png24 png32 mixed".split(" ");this.tileType=p.cacheType;null==this.tileType&&(-1<h.indexOf(p.tileInfo.format.toLowerCase())?this.tileType="Map":"lerc"===p.tileInfo.format.toLowerCase()?this.tileType="Elevation":
this.tileType="Raster");this.datasetName=p.name.slice(p.name.indexOf("/")+1);d=yield this._fetchRasterInfo({signal:d});if(C.isSome(d)){h="Map"===this.tileType?n.readServiceTileInfo(p.tileInfo,p):m.fromJSON(p.tileInfo);const {extent:f,pixelSize:B}=d,O=.5/d.width*B.x;let z,t;var k=h.lodAt(Math.max.apply(null,h.lods.map(S=>S.level)));"Map"!==this.tileType&&0!==p.maxScale&&("Raster"===this.tileType?(z=h.lods.filter(S=>S.resolution===B.x)[0])||(z=h.lods[h.lods.length-1]):(z=h.lods.filter(S=>Math.abs(S.scale-
p.maxScale)<O)[0])||(z=h.lods.filter(S=>S.scale>p.maxScale).sort((S,X)=>S.scale>X.scale?1:-1)[0]),B.x=B.y=z.resolution,d.width=Math.ceil((f.xmax-f.xmin)/B.x-.1),d.height=Math.ceil((f.ymax-f.ymin)/B.y-.1));z||(z=k);k=h.lodAt(Math.min.apply(null,h.lods.map(S=>S.level)));"Map"===this.tileType?this._levelOffset=h.lods[0].level:0!==p.minScale&&"Elevation"===this.tileType&&(t=h.lods.filter(S=>Math.abs(S.scale-p.minScale)<O)[0],this._levelOffset=t.level-k.level);t||(t=k);const J=Math.max(B.x,B.y);if(Math.abs(B.x-
B.y)>O||!h.lods.some(S=>Math.abs(S.resolution-J)<O))B.x=B.y=z.resolution,d.width=Math.ceil((f.xmax-f.xmin)/B.x-.1),d.height=Math.ceil((f.ymax-f.ymin)/B.y-.1);k=z.level-t.level;const [V,T]=h.size,ba=[];h.lods.forEach(S=>{S.level>=t.level&&S.level<=z.level&&ba.push({x:S.resolution,y:S.resolution})});ba.sort((S,X)=>S.x-X.x);const M=this.computeBlockBoundary(f,V,T,h.origin,ba,k),L=1<ba.length?ba.slice(1):null;d.storageInfo=new b({blockWidth:h.size[0],blockHeight:h.size[1],pyramidBlockWidth:h.size[0],
pyramidBlockHeight:h.size[1],pyramidResolutions:L,compression:h.format,origin:h.origin,firstPyramidLevel:1,maximumPyramidLevel:k,tileInfo:h,blockBoundary:M});this._fixGCSShift(d);this._set("rasterInfo",d)}else throw new N("image-server-raster:open","cannot initialize image service");-1<p.capabilities.toLowerCase().indexOf("tilemap")&&(d={tileInfo:d.storageInfo.tileInfo,parsedUrl:Q.urlToObject(this.url),url:this.url,tileServers:[],type:"tile"},this._tilemapCache=new q.TilemapCache({layer:d}))});return function(d){return G.apply(this,
arguments)}}();w.fetchRawTile=function(){var G=R._asyncToGenerator(function*(d,h,p,k={}){const {storageInfo:f,extent:B}=this.rasterInfo;({data:k}=yield this.request(`${this.url}/tile/${f.maximumPyramidLevel-d+this._levelOffset}/${h}/${p}`,{query:this._slices?{sliceId:k.sliceId||0}:null,responseType:"array-buffer",signal:k.signal}));if(!k)return null;k=yield this.decodePixelBlock(k,{width:f.tileInfo.size[0],height:f.tileInfo.size[1],planes:null,pixelType:null,isPoint:"Elevation"===this.tileType});
const O=f.blockBoundary[d];if("jpg"!==f.compression||p>O.minCol&&p<O.maxCol&&h>O.minRow&&h<O.maxRow)return k;const {origin:z,blockWidth:t,blockHeight:J}=f,{x:V,y:T}=this.getPyramidPixelSize(d);var ba=Math.round((B.xmin-z.x)/V)%t;d=Math.round((B.xmax-z.x)/V)%t;var M=Math.round((z.y-B.ymax)/T)%J;const L=Math.round((z.y-B.ymin)/T)%J;ba=p===O.minCol?ba:0;M=h===O.minRow?M:0;D.setValidBoundary(k,{x:ba,y:M},{width:(p===O.maxCol?d:t)-ba,height:(h===O.maxRow?L:J)-M});return k});return function(d,h,p){return G.apply(this,
arguments)}}();w.getSliceIndex=function(G){if(null==G||!G.length||!this._slices)return null;for(let d=0;d<this._slices.length;d++){const h=this._slices[d].multidimensionalDefinition;if(h.length===G.length&&!h.some(p=>{var k=G.filter(B=>p.variableName===B.variableName&&B.dimensionName===p.dimensionName)[0];if(!k)return!0;const f=Array.isArray(p.values[0])?p.values[0][0]:p.values[0];k=Array.isArray(k.values[0])?k.values[0][0]:k.values[0];return f!==k}))return d}return null};w.fetchVariableStatisticsHistograms=
function(){var G=R._asyncToGenerator(function*(d,h){var p=this.request(this.url+"/statistics",{query:{variable:d,f:"json"},signal:h}).then(k=>{var f;return null==(f=k.data)?void 0:f.statistics});d=this.request(this.url+"/histograms",{query:{variable:d,f:"json"},signal:h}).then(k=>{var f;return null==(f=k.data)?void 0:f.histograms});p=yield Promise.all([p,d]);p[0]&&p[0].forEach(k=>{k.avg=k.mean;k.stddev=k.standardDeviation});return{statistics:p[0]||null,histograms:p[1]||null}});return function(d,h){return G.apply(this,
arguments)}}();w.computeBestPyramidLevelForLocation=function(){var G=R._asyncToGenerator(function*(d,h={}){if(!this._tilemapCache)return 0;d=this.identifyPixelLocation(d,0,C.unwrap(h.datumTransformation));if(null===d)return null;let p=0;var {maximumPyramidLevel:k}=this.rasterInfo.storageInfo;k=k-p+this._levelOffset;const f=d.srcLocation;for(;0<=k;){try{if("available"===(yield this._tilemapCache.fetchAvailability(k,d.row,d.col,h)))break}catch{}k--;p++;d=this.identifyPixelLocation(f,p,C.unwrap(h.datumTransformation));
if(null===d)return null}return-1===k||null==d?null:p});return function(d){return G.apply(this,arguments)}}();w._fetchRasterInfo=function(){var G=R._asyncToGenerator(function*(d){const h=this.sourceJSON,p=Math.ceil((h.extent.xmax-h.extent.xmin)/h.pixelSizeX-.1),k=Math.ceil((h.extent.ymax-h.extent.ymin)/h.pixelSizeY-.1),f=u.fromJSON(h.spatialReference||h.extent.spatialReference);if("Map"===this.tileType)return new F({width:p,height:k,bandCount:3,extent:g.fromJSON(h.extent),spatialReference:f,pixelSize:new c({x:h.pixelSizeX,
y:h.pixelSizeY,spatialReference:f}),pixelType:"u8",statistics:null,keyProperties:{DataType:"processed"}});const {slice:B,signal:O}=d;d=h.hasRasterAttributeTable?this.request(this.url+"/rasterAttributeTable",{query:{slice:B,f:"json"},signal:O}).then(ba=>A.fromJSON(ba.data)).catch(()=>null):!1;const z=h.hasColormap?this.request(this.url+"/colormap",{query:{slice:B,f:"json"},signal:O}).then(ba=>{var M;return null==(M=ba.data)?void 0:M.colormap}):!1,t=h.hasHistograms?this.request(this.url+"/histograms",
{query:{slice:B,f:"json"},signal:O}).then(ba=>{var M;return null==(M=ba.data)?void 0:M.histograms}):!1,J=this.request(this.url+"/keyProperties",{query:{f:"json"},signal:O}).then(ba=>ba.data).catch(()=>{}),V=h.hasMultidimensions?this._fetchMultidimensionalInfo():!1,T=h.hasMultidimensions?this.request(this.url+"/slices",{query:{f:"json"},signal:O}).then(ba=>ba.data&&ba.data.slices).catch(()=>{}):!1;return Promise.all([d,z,t,J,V,T]).then(ba=>{let M=null;if(h.minValues&&h.minValues.length===h.bandCount){M=
[];for(let L=0;L<h.minValues.length;L++)M.push({min:h.minValues[L],max:h.maxValues[L],avg:h.meanValues[L],stddev:h.stdvValues[L]})}this._slices=ba[5]||null;return new F({width:p,height:k,bandCount:h.bandCount,extent:g.fromJSON(h.extent),spatialReference:f,pixelSize:new c({x:h.pixelSizeX,y:h.pixelSizeY,spatialReference:f}),pixelType:h.pixelType.toLowerCase(),statistics:M,attributeTable:ba[0]||null,colormap:ba[1]||null,histograms:ba[2]||null,keyProperties:ba[3]||{},multidimensionalInfo:ba[4]||null})})});
return function(d){return G.apply(this,arguments)}}();w._fetchMultidimensionalInfo=function(){var G=R._asyncToGenerator(function*(d){var h;d=yield this.request(this.url+"/multidimensionalInfo",{query:{f:"json"},signal:d}).then(p=>{var k;return null==(k=p.data)?void 0:k.multidimensionalInfo});null!=(h=d.variables)&&h.length&&d.variables.forEach(p=>{var k;null!=(k=p.statistics)&&k.length&&p.statistics.forEach(f=>{f.avg=f.mean;f.stddev=f.standardDeviation})});return d});return function(d){return G.apply(this,
arguments)}}();w._fixScaleInServiceInfo=function(){const {sourceJSON:G}=this;G.minScale&&0>G.minScale&&(G.minScale=0);G.maxScale&&0>G.maxScale&&(G.maxScale=0)};w._fixGCSShift=function(G){const {extent:d,spatialReference:h}=G;0===d.xmin&&360===d.xmax&&h.wkid&&h.isGeographic&&(G.nativeExtent=G.extent,G.transform=new x,G.extent=G.transform.forwardTransform(d))};return l}(v);r.__decorate([Y.property({type:String,json:{write:!0}})],K.prototype,"datasetFormat",void 0);r.__decorate([Y.property()],K.prototype,
"tileType",void 0);return K=r.__decorate([H.subclass("esri.layers.support.rasterDatasets.ImageServerRaster")],K)})},"esri/layers/support/serviceTileInfoProperty":function(){define(["exports","./TileInfo"],function(R,r){function K(C,Q,Y,W){if(!C)return null;const {minScale:U,maxScale:I,minLOD:y,maxLOD:H}=Q;if(null!=y&&null!=H)return W&&W.ignoreMinMaxLOD?r.fromJSON(C):r.fromJSON({...C,lods:C.lods.filter(({level:F})=>null!=F&&F>=y&&F<=H)});if(0!==U&&0!==I){const F=U?Math.round(1E4*U)/1E4:Infinity,b=
I?Math.round(1E4*I)/1E4:-Infinity;return r.fromJSON({...C,lods:C.lods.filter(n=>{n=Math.round(1E4*n.scale)/1E4;return n<=F&&n>=b})})}return r.fromJSON(C)}const N={type:r,json:{origins:{service:{read:{source:["tileInfo","minScale","maxScale","minLOD","maxLOD"],reader:K}}}}};R.readServiceTileInfo=K;R.serviceTileInfoProperty=N;Object.defineProperty(R,"__esModule",{value:!0})})},"esri/layers/support/TilemapCache":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../request ../../core/Accessor ../../core/Error ../../core/Handles ../../core/Logger ../../core/LRUCache ../../core/PooledArray ../../core/promiseUtils ../../core/scheduling ../../core/urlUtils ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/decorators/cast ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ./Tilemap".split(" "),
function(R,r,K,N,C,Q,Y,W,U,I,y,H,F,b,n,m,q,v,D,x){var A;const u=W.getLogger("esri.layers.support.TilemapCache");R.TilemapCache=A=function(g){function c(l){l=g.call(this,l)||this;l._handles=new Y;l._pendingTilemapRequests={};l._availableLevels={};l.levels=5;l.cacheByteSize=2097152;l.request=N;l._prefetchingEnabled=!0;return l}r._inheritsLoose(c,g);var E=c.prototype;E.initialize=function(){this._tilemapCache=new U(this.cacheByteSize);this._handles.add([this.watch(["layer.parsedUrl","layer.tileServers?"],
()=>this._initializeTilemapDefinition()),b.init(this,"layer.tileInfo.lods",l=>this._initializeAvailableLevels(l),!0)]);this._initializeTilemapDefinition()};E.destroy=function(){this._handles&&(this._handles.destroy(),this._handles=null)};E.castLevels=function(l){return 2>=l?(u.error("Minimum levels for Tilemap is 3, but got ",l),3):l};E.fetchTilemap=function(l,w,G,d){if(!this._availableLevels[l])return Promise.reject(new Q("tilemap-cache:level-unavailable",`Level ${l} is unavailable in the service`));
const h=this._tmpTilemapDefinition;if(l=this._tilemapFromCache(l,w,G,h))return Promise.resolve(l);const p=d&&d.signal;d={...d,signal:null};return new Promise((k,f)=>{y.onAbort(p,()=>f(y.createAbortError()));const B=x.tilemapDefinitionId(h);let O=this._pendingTilemapRequests[B];if(!O){O=x.Tilemap.fromDefinition(h,d).then(t=>{this._tilemapCache.put(B,t,t.byteSize);return t});const z=()=>delete this._pendingTilemapRequests[B];this._pendingTilemapRequests[B]=O;O.then(z,z)}O.then(k,f)})};E.getAvailability=
function(l,w,G){return this._availableLevels[l]?(l=this._tilemapFromCache(l,w,G,this._tmpTilemapDefinition))?l.getAvailability(w,G):"unknown":"unavailable"};E.getAvailabilityUpsample=function(l,w,G,d){d.level=l;d.row=w;d.col=G;l=this.layer.tileInfo;for(l.updateTileInfo(d);;)if(w=this.getAvailability(d.level,d.row,d.col),"unavailable"===w){if(!l.upsampleTile(d))return"unavailable"}else return w};E.fetchAvailability=function(l,w,G,d){return this._availableLevels[l]?this.fetchTilemap(l,w,G,d).catch(h=>
h).then(h=>{if(h instanceof x.Tilemap)return h=h.getAvailability(w,G),"unavailable"===h?Promise.reject(new Q("tile-map:tile-unavailable","Tile is not available",{level:l,row:w,col:G})):h;if(y.isAbortError(h))throw h;return"unknown"}):Promise.reject(new Q("tilemap-cache:level-unavailable",`Level ${l} is unavailable in the service`))};E.fetchAvailabilityUpsample=function(l,w,G,d,h){d.level=l;d.row=w;d.col=G;const p=this.layer.tileInfo;p.updateTileInfo(d);const k=this.fetchAvailability(l,w,G,h).catch(f=>
{if(y.isAbortError(f))throw f;if(p.upsampleTile(d))return this.fetchAvailabilityUpsample(d.level,d.row,d.col,d);throw f;});this._fetchAvailabilityUpsamplePrefetch(d.id,l,w,G,h,k);return k};E._fetchAvailabilityUpsamplePrefetch=function(){var l=r._asyncToGenerator(function*(w,G,d,h,p,k){if(this._prefetchingEnabled){var f=`prefetch-${w}`;if(!this._handles.has(f)){var B=y.createAbortController();k.then(()=>B.abort(),()=>B.abort());var O=!1;this._handles.add({remove(){O||(O=!0,B.abort())}},f);yield H.waitTicks(10,
B.signal).catch(()=>{});O||(O=!0,this._handles.remove(f));if(!y.isAborted(B))for(w={id:w,level:G,row:d,col:h},p={...p,signal:B.signal},G=this.layer.tileInfo,d=0;A._prefetches.length<A._maxPrefetch&&G.upsampleTile(w);++d){const z=this.fetchAvailability(w.level,w.row,w.col,p);A._prefetches.push(z);h=()=>{A._prefetches.removeUnordered(z)};z.then(h,h)}}}});return function(w,G,d,h,p,k){return l.apply(this,arguments)}}();E._initializeTilemapDefinition=function(){if(this.layer.parsedUrl){var l=this.layer.parsedUrl,
w=l.query;this._tilemapCache.clear();this._tmpTilemapDefinition={service:{url:l.path,query:w?F.objectToQuery(w):null,tileServers:this.layer.tileServers,request:this.request,type:this.layer.type},width:this.size,height:this.size,level:0,row:0,col:0}}};E._tilemapFromCache=function(l,w,G,d){d.level=l;d.row=w-w%this.size;d.col=G-G%this.size;l=x.tilemapDefinitionId(d);return this._tilemapCache.get(l)};E._initializeAvailableLevels=function(l){this._availableLevels={};l&&l.forEach(w=>this._availableLevels[w.level]=
!0)};r._createClass(c,[{key:"size",get:function(){return 1<<this.levels}},{key:"test",get:function(){const l=this;return{get prefetchingEnabled(){return l._prefetchingEnabled},set prefetchingEnabled(w){l._prefetchingEnabled=w},hasTilemap(w,G,d){return!!l._tilemapFromCache(w,G,d,l._tmpTilemapDefinition)}}}}]);return c}(C);R.TilemapCache._maxPrefetch=4;R.TilemapCache._prefetches=new I({initialSize:A._maxPrefetch});K.__decorate([n.property({constructOnly:!0,type:Number})],R.TilemapCache.prototype,"levels",
void 0);K.__decorate([q.cast("levels")],R.TilemapCache.prototype,"castLevels",null);K.__decorate([n.property({readOnly:!0,type:Number})],R.TilemapCache.prototype,"size",null);K.__decorate([n.property({constructOnly:!0,type:Number})],R.TilemapCache.prototype,"cacheByteSize",void 0);K.__decorate([n.property({constructOnly:!0})],R.TilemapCache.prototype,"layer",void 0);K.__decorate([n.property({constructOnly:!0})],R.TilemapCache.prototype,"request",void 0);R.TilemapCache=A=K.__decorate([D.subclass("esri.layers.support.TilemapCache")],
R.TilemapCache);Object.defineProperty(R,"__esModule",{value:!0})})},"esri/layers/support/Tilemap":function(){define(["exports","../../request","../../core/arrayUtils","../../core/Error","../../core/lang"],function(R,r,K,N,C){function Q(W){if("vector-tile"===W.service.type)var U=`${W.service.url}/tilemap/${W.level}/${W.row}/${W.col}/${W.width}/${W.height}`;else U=W.service.tileServers,U=`${U&&U.length?U[W.row%U.length]:W.service.url}/tilemap/${W.level}/${W.row}/${W.col}/${W.width}/${W.height}`;(W=
W.service.query)&&(U=`${U}?${W}`);return U}let Y=function(){function W(){this.location={left:0,top:0,width:0,height:0};this._allAvailability="unknown";this.byteSize=40}var U=W.prototype;U.getAvailability=function(I,y){if("unknown"!==this._allAvailability)return this._allAvailability;I=(I-this.location.top)*this.location.width+(y-this.location.left);y=I>>3;const H=this._tileAvailabilityBitSet;return 0>y||y>H.length?"unknown":H[y]&1<<I%8?"available":"unavailable"};U._updateFromData=function(I){let y=
!0,H=!0;const F=new Uint8Array(Math.ceil(this.location.width*this.location.height/8));let b=0;for(let n=0;n<I.length;n++){const m=n%8;I[n]?(H=!1,F[b]|=1<<m):y=!1;7===m&&++b}H?this._allAvailability="unavailable":y?this._allAvailability="available":(this._allAvailability="unknown",this._tileAvailabilityBitSet=F,this.byteSize+=F.length)};W.fromDefinition=function(I,y){const H=I.service.request||r,{row:F,col:b,width:n,height:m}=I,q={query:{f:"json"}};y=y?{...q,...y}:q;return H(Q(I),y).then(v=>v.data).catch(v=>
{if(v&&v.details&&422===v.details.httpStatus)return{location:{top:F,left:b,width:n,height:m},valid:!0,data:K.constant(n*m,0)};throw v;}).then(v=>{if(v.location&&(v.location.top!==F||v.location.left!==b||v.location.width!==n||v.location.height!==m))throw new N("tilemap:location-mismatch","Tilemap response for different location than requested",{response:v,definition:{top:F,left:b,width:n,height:m}});return W.fromJSON(v)})};W.fromJSON=function(I){W.validateJSON(I);const y=new W;y.location=Object.freeze(C.clone(I.location));
y._updateFromData(I.data);return Object.freeze(y)};W.validateJSON=function(I){if(!I||!I.location)throw new N("tilemap:missing-location","Location missing from tilemap response");if(!1===I.valid)throw new N("tilemap:invalid","Tilemap response was marked as invalid");if(!I.data)throw new N("tilemap:missing-data","Data missing from tilemap response");if(!Array.isArray(I.data))throw new N("tilemap:data-mismatch","Data must be an array of numbers");if(I.data.length!==I.location.width*I.location.height)throw new N("tilemap:data-mismatch",
"Number of data items does not match width/height of tilemap");};return W}();R.Tilemap=Y;R.default=Y;R.tilemapDefinitionId=function(W){return`${W.level}/${W.row}/${W.col}/${W.width}/${W.height}`};Object.defineProperty(R,"__esModule",{value:!0})})},"esri/layers/support/rasterTransforms/GCSShiftTransform":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/Logger ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass ./BaseRasterTransform".split(" "),
function(R,r,K,N,C,Q,Y,W,U){N=function(I){function y(){var F=I.apply(this,arguments)||this;F.type="gcs-shift";F.tolerance=1E-8;return F}R._inheritsLoose(y,I);var H=y.prototype;H.forwardTransform=function(F){F=F.clone();if("point"===F.type)return F.x>180+this.tolerance&&(F.x-=360),F;F.xmin>=180-this.tolerance?(F.xmax-=360,F.xmin-=360):F.xmax>180+this.tolerance&&(F.xmin=-180,F.xmax=180);return F};H.inverseTransform=function(F){F=F.clone();if("point"===F.type)return F.x<-this.tolerance&&(F.x+=360),F;
F.xmin<-this.tolerance&&(F.xmin+=360,F.xmax+=360);return F};return y}(U);r.__decorate([Y.enumeration({GCSShiftXform:"gcs-shift"})],N.prototype,"type",void 0);r.__decorate([K.property()],N.prototype,"tolerance",void 0);return N=r.__decorate([W.subclass("esri.layers.support.rasterTransforms.GCSShiftTransform")],N)})},"esri/layers/support/rasterDatasets/MRFRaster":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../geometry ../../../core/Error ../../../core/maybe ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/Logger ../../../core/jsonMap ../../../core/accessorSupport/decorators/subclass ../PixelBlock ../RasterInfo ../RasterStorageInfo ./BaseRaster ./pamParser ./xmlUtilities ../rasterFormats/utils ../rasterFunctions/pixelUtils ../../../geometry/SpatialReference ../../../geometry/Extent ../../../geometry/Point".split(" "),
function(R,r,K,N,C,Q,Y,W,U,I,y,H,F,b,n,m,q,v,D,x,A,u){const g=new Map;g.set("Int8","s8");g.set("UInt8","u8");g.set("Int16","s16");g.set("UInt16","u16");g.set("Int32","s32");g.set("UInt32","u32");g.set("Float32","f32");g.set("Float64","f32");g.set("Double64","f32");const c=new Map;c.set("lerc",".lrc");c.set("none",".til");c.set("deflate",".pzp");c.set("jpeg",".jzp");K=function(E){function l(){var G=E.apply(this,arguments)||this;G._files=null;G._storageIndex=null;G.datasetFormat="MRF";return G}R._inheritsLoose(l,
E);var w=l.prototype;w.open=function(){var G=R._asyncToGenerator(function*(d){var h;yield this.init();this.datasetName=this.url.slice(this.url.lastIndexOf("/")+1);var p=d?C.unwrap(d.signal):null,k=yield this.request(this.url,{responseType:"xml",signal:p});const {rasterInfo:f,files:B}=this._parseHeader(k.data);if(-1===(null==(h=this.ioConfig.skipExtensions)?void 0:h.indexOf("aux.xml"))&&(d=yield this._fetchAuxiliaryData(d),null!=d)){var O;f.statistics=null!=(O=d.statistics)?O:f.statistics;(f.histograms=
d.histograms)&&!C.isSome(f.statistics)&&(f.statistics=D.estimateStatisticsFromHistograms(d.histograms))}this._set("rasterInfo",f);this._files=B;p=yield this.request(B.index,{responseType:"array-buffer",signal:p});this._storageIndex=this._parseIndex(p.data);p=0;O=-1;const {blockWidth:z,blockHeight:t,compression:J}=this.rasterInfo.storageInfo;k=this.rasterInfo.storageInfo.pyramidScalingFactor;const {width:V,height:T,bandCount:ba}=this.rasterInfo,M=[],L="none"===J?1:ba;for(;p<this._storageIndex.length;)O++,
d=Math.ceil(V/z/k**O),h=Math.ceil(T/t/k**O),p+=d*h*L*4,M.push({maxRow:h,maxCol:d,minCol:0,minRow:0});this.rasterInfo.storageInfo.blockBoundary=M;0<O&&(this.rasterInfo.storageInfo.firstPyramidLevel=1,this.rasterInfo.storageInfo.maximumPyramidLevel=O);this.updateTileInfo()});return function(d){return G.apply(this,arguments)}}();w.fetchRawTile=function(){var G=R._asyncToGenerator(function*(d,h,p,k={}){const {blockWidth:f,blockHeight:B,blockBoundary:O,compression:z}=this.rasterInfo.storageInfo;var t=
O[d];if(!t||t.maxRow<h||t.maxCol<p||t.minRow>h||t.minCol>p)return null;const {bandCount:J,pixelType:V}=this.rasterInfo,{ranges:T,actualTileWidth:ba,actualTileHeight:M}=this._getTileLocation(d,h,p);if(!T||0===T.length)return null;if(0===T[0].from&&0===T[0].to)return d=new Uint8Array(f*B),new H({width:f,height:B,pixels:null,mask:d,validPixelCount:0});({bandIds:p}=this.ioConfig);h="none"===z?1:J;t=[];for(d=d=0;d<h;d++)(!p||-1<p.indexOf[d])&&t.push(this.request(this._files.data,{range:{from:T[d].from,
to:T[d].to},responseType:"array-buffer",signal:k.signal}));k=yield Promise.all(t);d=k.map(L=>L.data.byteLength).reduce((L,S)=>L+S);p=new Uint8Array(d);for(d=t=0;d<h;d++)p.set(new Uint8Array(k[d].data),t),t+=k[d].data.byteLength;k=yield this.decodePixelBlock(p.buffer,{width:f,height:B,format:"lerc"===this.rasterInfo.storageInfo.compression?"lerc":"bip",pixelType:V});p=h=0;if(ba!==f||M!==B)if(t=k.mask)for(d=0;d<B;d++)for(p=d*f,h=d<M?ba:0;h<f;h++)t[p+h]=0;else for(t=new Uint8Array(f*B),k.mask=t,d=0;d<
M;d++)for(p=d*f,h=0;h<ba;h++)t[p+h]=1;return k});return function(d,h,p){return G.apply(this,arguments)}}();w._parseIndex=function(G){if(0<G.byteLength%16)throw"invalid array buffer must be multiples of 16";let d,h,p,k,f;if(v.isPlatformLittleEndian){d=new Uint8Array(G);p=new ArrayBuffer(G.byteLength);h=new Uint8Array(p);for(k=0;k<G.byteLength/4;k++)for(f=0;4>f;f++)h[4*k+f]=d[4*k+3-f];G=new Uint32Array(p)}else G=new Uint32Array(G);return G};w._getTileLocation=function(G,d,h){const {blockWidth:p,blockHeight:k,
pyramidScalingFactor:f,compression:B}=this.rasterInfo.storageInfo,{width:O,height:z,bandCount:t}=this.rasterInfo,J="none"===B?1:t;let V,T;var ba,M=0;let L=0;for(ba=0;ba<G;ba++)L=f**ba,V=Math.ceil(O/p/L),T=Math.ceil(z/k/L),M+=V*T;L=f**G;V=Math.ceil(O/p/L);T=Math.ceil(z/k/L);M=4*(M+(d*V+h))*J;G=this._storageIndex.subarray(M,M+4*J);M=ba=0;const S=[];for(let X=0;X<J;X++)ba=G[4*X]*2**32+G[4*X+1],M=ba+G[4*X+2]*2**32+G[4*X+3],S.push({from:ba,to:M});return{ranges:S,actualTileWidth:h<V-1?p:Math.ceil(O/L)-
p*(V-1),actualTileHeight:d<T-1?k:Math.ceil(z/L)-k*(T-1)}};w._parseHeader=function(G){var d=q.getElement(G,"MRF_META/Raster");if(!d)throw new N("mrf:open","not a valid MRF format");var h=q.getElement(d,"Size"),p=parseInt(h.getAttribute("x"),10),k=parseInt(h.getAttribute("y"),10);const f=parseInt(h.getAttribute("c"),10);h=(q.getElementValue(d,"Compression")||"none").toLowerCase();var B=["none","lerc"];if(!h||-1===B.indexOf(h))throw new N("mrf:open","currently does not support compression "+h);var O=
q.getElementValue(d,"DataType")||"UInt8";B=g.get(O);if(null==B)throw new N("mrf:open","currently does not support pixel type "+O);var z=q.getElement(d,"PageSize");O=parseInt(z.getAttribute("x"),10);z=parseInt(z.getAttribute("y"),10);d=q.getElement(d,"DataValues");let t;d&&(d=d.getAttribute("NoData"),null!=d&&(t=d.trim().split(" ").map(X=>parseFloat(X))));if(q.getElement(G,"MRF_META/CachedSource"))throw new N("mrf:open","currently does not support MRF referencing other data files");var J=q.getElement(G,
"MRF_META/GeoTags"),V=q.getElement(J,"BoundingBox");if(null==V)throw new N("mrf:open","missing node MRF_META/GeoTags/BoundingBox");d=parseFloat(V.getAttribute("minx"));const T=parseFloat(V.getAttribute("miny")),ba=parseFloat(V.getAttribute("maxx")),M=parseFloat(V.getAttribute("maxy"));var L=q.getElementValue(J,"Projection")||"";J=q.getElementValue(G,"datafile");V=q.getElementValue(G,"IndexFile");let S;"LOCAL_CS[]"!==L&&(L.toLowerCase().startsWith("epsg:")?(L=Number(L.slice(5)),isNaN(L)||0===L||(S=
new x({wkid:L}))):S=m.parseSpatialReference(L));L=new A(d,T,ba,M);L.spatialReference=S;G=q.getElement(G,"MRF_META/Rsets");G=parseInt(G&&G.getAttribute("scale")||"2",10);G=new b({origin:new u({x:L.xmin,y:L.ymax,spatialReference:S}),blockWidth:O,blockHeight:z,pyramidBlockWidth:O,pyramidBlockHeight:z,compression:h,pyramidScalingFactor:G});O=new u({x:(ba-d)/p,y:(M-T)/k,spatialReference:S});p=new F({width:p,height:k,extent:L,spatialReference:S,bandCount:f,pixelType:B,pixelSize:O,noDataValue:t,storageInfo:G});
k={mrf:this.url,index:V||this.url.replace(".mrf",".idx"),data:J||this.url.replace(".mrf",c.get(h))};return{rasterInfo:p,files:k}};w._fetchAuxiliaryData=function(){var G=R._asyncToGenerator(function*(d){try{const {data:h}=yield this.request(this.url+".aux.xml",{responseType:"xml",signal:null==d?void 0:d.signal});return m.parsePAMInfo(h)}catch{return null}});return function(d){return G.apply(this,arguments)}}();return l}(n);r.__decorate([Q.property()],K.prototype,"_files",void 0);r.__decorate([Q.property()],
K.prototype,"_storageIndex",void 0);r.__decorate([Q.property({type:String,json:{write:!0}})],K.prototype,"datasetFormat",void 0);return K=r.__decorate([y.subclass("esri.layers.support.rasterIO.MRFRaster")],K)})},"esri/layers/support/rasterDatasets/TIFFRaster":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../geometry ../../../core/Error ../../../core/maybe ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/Logger ../../../core/jsonMap ../../../core/accessorSupport/decorators/subclass ../RasterInfo ../RasterStorageInfo ./BaseRaster ./pamParser ../../../chunks/TiffDecoder ../rasterFormats/TiffTags ../rasterFunctions/pixelUtils ../rasterTransforms/PolynomialTransform ../../../geometry/SpatialReference ../../../geometry/Extent ../../../geometry/Point".split(" "),
function(R,r,K,N,C,Q,Y,W,U,I,y,H,F,b,n,m,q,v,D,x,A,u){const g=function(E,l){return(E=E.get(l))&&E.values},c=function(E,l){return(E=E.get(l))&&E.values[0]};K=function(E){function l(){var G=E.apply(this,arguments)||this;G._files=null;G._headerInfo=null;G._bufferSize=1048576;G.datasetFormat="TIFF";return G}R._inheritsLoose(l,E);var w=l.prototype;w.open=function(){var G=R._asyncToGenerator(function*(d){var h,p,k;yield this.init();var f=d?C.unwrap(d.signal):null,{data:B}=yield this.request(this.url,{range:{from:0,
to:this._bufferSize},responseType:"array-buffer",signal:f});if(!B)throw new N("tiffraster:open","failed to open url "+this.url);this.datasetName=this.url.slice(this.url.lastIndexOf("/")+1);const {littleEndian:O,firstIFD:z,isBigTiff:t}=m.parseSignature(B),J=[];yield this.readIFDs(J,B,O,z,0,t?8:4,f);f=m.getImageInfo(J);const {width:V,height:T,tileWidth:ba,tileHeight:M,planes:L,pixelType:S,compression:X,firstPyramidLevel:aa,maximumPyramidLevel:fa,pyramidBlockWidth:a,pyramidBlockHeight:e,tileBoundary:P,
affine:Z,metadata:da}=f;B=(null==(h=f.extent.spatialReference)?void 0:h.wkt)||(null==(p=f.extent.spatialReference)?void 0:p.wkid);h=n.parseSpatialReference(B);B=!1;null==h&&(B=!0,h=new x({wkid:3857}));var ka=(p=new A({...f.extent,spatialReference:h}),new u({x:p.xmin,y:p.ymax,spatialReference:h}));ka=new F({blockWidth:ba,blockHeight:M,pyramidBlockWidth:a,pyramidBlockHeight:e,compression:X,origin:ka,firstPyramidLevel:aa,maximumPyramidLevel:fa,blockBoundary:P});const la=new u({x:(p.xmax-p.xmin)/V,y:(p.ymax-
p.ymin)/T,spatialReference:h});B=new H({width:V,height:T,bandCount:L,pixelType:S,compression:X,pixelSize:la,storageInfo:ka,spatialReference:h,isPseudoSpatialReference:B,keyProperties:da?{BandProperties:da.bandProperties,DataType:da.dataType}:{},extent:p,statistics:da?da.statistics:null});null!=Z&&Z.length&&(B.nativeExtent=new A({xmin:-.5,ymin:.5-T,xmax:V-.5,ymax:.5,spatialReference:h}),B.transform=new D({polynomialOrder:1,forwardCoefficients:[Z[2]+Z[0]/2,Z[5]-Z[3]/2,Z[0],Z[3],-Z[1],-Z[4]]}),B.extent=
B.transform.forwardTransform(B.nativeExtent),B.pixelSize=new u({x:(p.xmax-p.xmin)/V,y:(p.ymax-p.ymin)/T,spatialReference:h}),ka.origin.x=-.5,ka.origin.y=.5);if(null==(k=this.ioConfig.skipExtensions)||!k.includes("aux.xml"))if(d=yield this._fetchAuxiliaryData(d),null!=d){var ia;B.statistics=null!=(ia=d.statistics)?ia:B.statistics;(B.histograms=d.histograms)&&!C.isSome(B.statistics)&&(B.statistics=v.estimateStatisticsFromHistograms(d.histograms));d.transform&&!Z&&(B.transform=d.transform,B.nativeExtent=
B.extent,ia=B.transform.forwardTransform(B.nativeExtent),B.pixelSize=new u({x:(ia.xmax-ia.xmin)/V,y:(ia.ymax-ia.ymin)/T,spatialReference:h}),B.extent=ia);B.spatialReference||(B.spatialReference=d.spatialReference)}this._set("rasterInfo",B);this._headerInfo={littleEndian:O,isBigTiff:t,ifds:J,...f};if(!this._headerInfo.isSupported)throw new N("tiffraster:open","this tiff is not supported: "+this._headerInfo.message);this.updateTileInfo()});return function(d){return G.apply(this,arguments)}}();w.fetchRawTile=
function(){var G=R._asyncToGenerator(function*(d,h,p,k={}){var f;if(null==(f=this._headerInfo)||!f.isSupported||this.isBlockOutside(d,h,p))return null;h=this.getTileLocation(d,h,p);if(!h)return null;const {ranges:B,actualTileWidth:O,actualTileHeight:z,ifd:t}=h;h=B.map(ba=>this.request(this.url,{range:ba,responseType:"array-buffer",signal:k.signal}));h=yield Promise.all(h);p=h.map(ba=>ba.data.byteLength).reduce((ba,M)=>ba+M);p=1===h.length?h[0].data:new ArrayBuffer(p);f=[0];var J=[0];if(1<h.length){const ba=
new Uint8Array(p);for(let M=0,L=0;M<h.length;M++){const S=h[M].data;ba.set(new Uint8Array(S),L);f[M]=L;L+=S.byteLength;J[M]=S.byteLength}}const {blockWidth:V,blockHeight:T}=this.getBlockWidthHeight(d);d=yield this.decodePixelBlock(p,{format:"tiff",customOptions:{headerInfo:this._headerInfo,ifd:t,offsets:f,sizes:J},width:V,height:T,planes:null,pixelType:null});if(O!==V||z!==T)if(J=d.mask)for(h=0;h<T;h++)for(f=h*V,p=h<z?O:0;p<V;p++)J[f+p]=0;else for(J=new Uint8Array(V*T),d.mask=J,h=0;h<z;h++)for(f=
h*V,p=0;p<O;p++)J[f+p]=1;return d});return function(d,h,p){return G.apply(this,arguments)}}();w.readIFDs=function(){var G=R._asyncToGenerator(function*(d,h,p,k,f,B=4,O){if(!k)return null;if(k>=h.byteLength||0>k)h=(yield this.request(this.url,{range:{from:k+f,to:k+f+this._bufferSize},responseType:"array-buffer",signal:O})).data,f=k+f,k=0;k=yield this.readIFD(h,p,k,f,q.TIFF_TAGS,B,O);d.push(k.ifd);if(!k.nextIFD)return null;yield this.readIFDs(d,h,p,k.nextIFD-f,f,B,O)});return function(d,h,p,k,f){return G.apply(this,
arguments)}}();w.readIFD=function(){var G=R._asyncToGenerator(function*(d,h,p,k,f=q.TIFF_TAGS,B=4,O){if(!d)return null;p=m.parseIFD(d,h,p,k,f,B);if(p.success){const z=[];p.ifd.forEach(t=>{t.values||z.push(t)});0<z.length&&(B=z.map(t=>t.offlineOffsetSize),f=Math.min.apply(null,B.map(t=>t[0])),Math.min.apply(null,B.map(t=>t[0]+t[1]))-f<=this._bufferSize&&({data:B}=yield this.request(this.url,{range:{from:f,to:f+this._bufferSize},responseType:"array-buffer",signal:O}),d=B,k=f,z.forEach(t=>m.parseFieldValues(d,
h,t,k))));p.ifd.has("GEOKEYDIRECTORY")&&(f=p.ifd.get("GEOKEYDIRECTORY"),(B=f.values)&&4<B.length&&(B=B[0]+"."+B[1]+"."+B[2],O=yield this.readIFD(d,h,f.valueOffset+6-k,k,q.GEO_KEYS,2,O),f.data=O.ifd,f.data&&f.data.set("GEOTIFFVersion",{id:0,type:2,valueCount:1,valueOffset:null,values:[B]})));return p}if(p.requiredBufferSize&&p.requiredBufferSize!==d.byteLength)return d=(yield this.request(this.url,{range:{from:k,to:k+p.requiredBufferSize+4},responseType:"array-buffer",signal:O})).data,d.byteLength<
p.requiredBufferSize?null:this.readIFD(d,h,0,k,q.TIFF_TAGS,4,O)});return function(d,h,p,k){return G.apply(this,arguments)}}();w.getTileLocation=function(G,d,h){const {firstPyramidLevel:p,blockBoundary:k}=this.rasterInfo.storageInfo;var f=0===G?0:G-(p-1);G=this._headerInfo.ifds[f];if(!G)return null;var B=m.isBSQConfig(G,this._headerInfo);const O=g(G,"TILEOFFSETS");if(void 0===O)return null;var z=g(G,"TILEBYTECOUNTS");const {minRow:t,minCol:J,maxRow:V,maxCol:T}=k[f];if(d>V||h>T||d<t||h<J)return null;
f=c(G,"IMAGEWIDTH");const ba=c(G,"IMAGELENGTH"),M=c(G,"TILEWIDTH"),L=c(G,"TILELENGTH"),S=B?this.rasterInfo.bandCount:1,X=S*d*(T+1)+h,aa=[{from:O[X],to:O[X+S-1]+z[X+S-1]-1}];if(B){B=!0;for(let fa=0;fa<S;fa++)if(O[X+fa]+z[X+fa]!==O[X+fa+1]){B=!1;break}if(!B)for(B=0;B<S;B++)aa[B]={from:O[X+B],to:O[X+B]+z[X+B]-1}}z=z[X];return null==O[X]||null==z?null:{ranges:aa,ifd:G,actualTileWidth:h===T?f%M:M,actualTileHeight:d===V?ba%L:L}};w._fetchAuxiliaryData=function(){var G=R._asyncToGenerator(function*(d){try{const {data:h}=
yield this.request(this.url+".aux.xml",{responseType:"xml",signal:null==d?void 0:d.signal});return n.parsePAMInfo(h)}catch{return null}});return function(d){return G.apply(this,arguments)}}();return l}(b);r.__decorate([Q.property()],K.prototype,"_files",void 0);r.__decorate([Q.property()],K.prototype,"_headerInfo",void 0);r.__decorate([Q.property()],K.prototype,"_bufferSize",void 0);r.__decorate([Q.property({type:String,json:{write:!0}})],K.prototype,"datasetFormat",void 0);return K=r.__decorate([y.subclass("esri.layers.support.rasterDatasets.TIFFRaster")],
K)})},"*noref":1}});
define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../PopupTemplate ../rasterRenderers ../core/Error ../core/maybe ../core/MultiOriginJSONSupport ../core/promiseUtils ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ./Layer ./mixins/BlendLayer ./mixins/CustomParametersMixin ./mixins/ImageryTileMixin ./mixins/OperationalLayer ./mixins/PortalLayer ./mixins/RefreshableLayer ./mixins/ScaleRangeLayer ./support/commonProperties ./support/Field ./support/rasterEnums ./support/rasterDatasets/RasterFactory ../support/popupUtils".split(" "),function(R,
r,K,N,C,Q,Y,W,U,I,y,H,F,b,n,m,q,v,D,x,A,u,g,c,E,l,w,G){function d(){return{enabled:this.loaded?"RasterTileServer"===this.raster.datasetFormat&&"Raster"===this.raster.tileType:!0}}Y=function(h){function p(...f){f=h.call(this,...f)||this;f.bandIds=null;f.interpolation=null;f.legendEnabled=!0;f.isReference=null;f.listMode="show";f.sourceJSON=null;f.version=null;f.title=null;f.type="imagery-tile";f.operationalLayerType="ArcGISTiledImageServiceLayer";f.popupEnabled=!0;f.popupTemplate=null;f.fields=null;
return f}R._inheritsLoose(p,h);var k=p.prototype;k.normalizeCtorArgs=function(f,B){return"string"===typeof f?{url:f,...B}:f};k.load=function(f){const B=Q.isSome(f)?f.signal:null;this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Image Service"]},f).catch(W.throwIfAbortError).then(()=>this._openRaster(B)));return Promise.resolve(this)};k.readRenderer=function(f,B,O){f=N.read(B&&B.layerDefinition&&B.layerDefinition.drawingInfo&&B.layerDefinition.drawingInfo.renderer,O)||void 0;if(null!=
f)return f};k.createPopupTemplate=function(f){return G.createPopupTemplate({fields:this.rasterFields,title:this.title},f)};k.write=function(f,B){const {raster:O}=this;if(this.loaded?"RasterTileServer"===O.datasetFormat&&("Raster"===O.tileType||"Map"===O.tileType):this.url&&/\/ImageServer(\/|\/?$)/i.test(this.url))return h.prototype.write.call(this,f,B);B&&B.messages&&B.messages.push(new C("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${`${B.origin}/${B.layerContainerType||
"operational-layers"}`}'`,{layer:this}));return null};k._openRaster=function(){var f=R._asyncToGenerator(function*(B){this.raster?(this.raster.rasterInfo||(yield this.raster.open()),this.url=this.raster.url):this.raster=yield w.open({url:this.url,sourceJSON:this.sourceJSON,ioConfig:{sampling:"closest",...this.ioConfig,customFetchParameters:this.customParameters},signal:B});({rasterInfo:B}=this.raster);if(!B)throw new C("imagery-tile-layer:load","cannot load resources on "+this.url);this.sourceJSON=
this.sourceJSON||this.raster.sourceJSON;null!=this.sourceJSON&&(this._set("version",this.sourceJSON.currentVersion),this._set("copyright",this.sourceJSON.copyrightText));null==this.title&&(this.title=this.raster.datasetName);"Map"===this.raster.tileType&&(this.popupEnabled=!1);this._configDefaultSettings();this.watch("customParameters",O=>this.raster.ioConfig.customFetchParameters=O)});return function(B){return f.apply(this,arguments)}}();R._createClass(p,[{key:"defaultPopupTemplate",get:function(){return this.createPopupTemplate()}},
{key:"rasterFields",get:function(){var f,B;let O=[new E({name:"Raster.ServicePixelValue",alias:"Pixel Value",domain:null,editable:!1,length:50,type:"string"})];const z=null==(f=this.rasterInfo)?void 0:null==(B=f.attributeTable)?void 0:B.fields;z&&(f=z.filter(t=>"oid"!==t.type&&"value"!==t.name.toLowerCase()).map(t=>{const J=t.clone();J.name="Raster."+t.name;return J}),O=O.concat(f));return O}},{key:"renderer",set:function(f){this._set("renderer",f);this.updateRenderer()}}]);return p}(q.BlendLayer(g.ScaleRangeLayer(u.RefreshableLayer(x.OperationalLayer(A.PortalLayer(v.CustomParametersMixin(D.ImageryTileMixin(Y.MultiOriginJSONMixin(m)))))))));
r.__decorate([U.property({type:[y.Integer],json:{write:{overridePolicy:d}}})],Y.prototype,"bandIds",void 0);r.__decorate([U.property({json:{write:{overridePolicy:d}}}),F.enumeration(l.interpolationKebab)],Y.prototype,"interpolation",void 0);r.__decorate([U.property({json:{write:!0}})],Y.prototype,"multidimensionalDefinition",void 0);r.__decorate([U.property(c.legendEnabled)],Y.prototype,"legendEnabled",void 0);r.__decorate([U.property({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>
({enabled:!1})}}})],Y.prototype,"isReference",void 0);r.__decorate([U.property({type:["show","hide"]})],Y.prototype,"listMode",void 0);r.__decorate([U.property()],Y.prototype,"sourceJSON",void 0);r.__decorate([U.property({readOnly:!0})],Y.prototype,"version",void 0);r.__decorate([U.property()],Y.prototype,"title",void 0);r.__decorate([U.property({readOnly:!0,json:{read:!1}})],Y.prototype,"type",void 0);r.__decorate([U.property({type:["ArcGISTiledImageServiceLayer"]})],Y.prototype,"operationalLayerType",
void 0);r.__decorate([U.property({type:Boolean,value:!0,json:{read:{source:"disablePopup",reader(h,p){return!p.disablePopup}},write:{target:"disablePopup",overridePolicy:d,writer(h,p,k){p[k]=!h}}}})],Y.prototype,"popupEnabled",void 0);r.__decorate([U.property({type:K,json:{read:{source:"popupInfo"},write:{target:"popupInfo",overridePolicy:d}}})],Y.prototype,"popupTemplate",void 0);r.__decorate([U.property({readOnly:!0})],Y.prototype,"defaultPopupTemplate",null);r.__decorate([U.property({readOnly:!0,
type:[E]})],Y.prototype,"fields",void 0);r.__decorate([U.property({readOnly:!0,type:[E]})],Y.prototype,"rasterFields",null);r.__decorate([U.property({types:N.rasterRendererTypes,json:{name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:d},origins:{"web-scene":{types:N.websceneRasterRendererTypes,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy(h){return{enabled:h&&"vector-field"!==h.type}}}}}}})],Y.prototype,"renderer",null);r.__decorate([b.reader("renderer")],Y.prototype,
"readRenderer",null);return Y=r.__decorate([n.subclass("esri.layers.ImageryTileLayer")],Y)});