// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.20/esri/copyright.txt for details.
//>>built
require({cache:{"esri/core/accessorSupport/originUtils":function(){define(["exports","../multiOriginJSONSupportUtils"],function(b,d){b.updateOrigins=function(m){m&&m.writtenProperties&&m.writtenProperties.forEach(u=>{const w=u.target;u.newOrigin&&u.oldOrigin!==u.newOrigin&&d.isMultiOriginJSONMixin(w)&&w.updateOrigin(u.propName,u.newOrigin)})};Object.defineProperty(b,"__esModule",{value:!0})})},"esri/core/multiOriginJSONSupportUtils":function(){define(["exports"],function(b){b.isMultiOriginJSONMixin=
function(d){return d&&"getAtOrigin"in d&&"originOf"in d};Object.defineProperty(b,"__esModule",{value:!0})})},"esri/geometry/projection":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../core/Error ../core/mathUtils ../core/maybe ../core/promiseUtils ../core/unitUtils ../chunks/mat4 ../chunks/vec3 ../chunks/vec3f64 ./Extent ./Multipoint ../chunks/pe ./Point ./Polygon ./Polyline ./projectionEllipsoid ./support/aaBoundingRect ./support/Ellipsoid ./support/geodesicConstants ./support/GeographicTransformation ./support/spatialReferenceUtils".split(" "),
function(b,d,m,u,w,A,K,v,U,F,L,G,V,q,n,c,g,h,p,l,t,I,X){function ha(){return!!aa&&q.isLoaded()}function N(S){A.isNone(ma)&&(ma=Promise.all([q.load(),(new Promise(function(Z,W){b(["../chunks/geometryEngineBase"],Z,W)})).then(function(Z){return Z.geometryEngineBase}),new Promise(function(Z,W){b(["./geometryAdapters/hydrated"],Z,W)})]));return ma.then(([,Z,{hydratedAdapter:W}])=>{K.throwIfAborted(S);ea=W;aa=Z.default;aa._enableProjection(q.pe)})}function r(S,Z,W,ka,xa=null){if(A.isNone(W)||A.isNone(ka))return Z;
if(pa(W,ka,xa))return Z.map(za=>ta(za,W,ka));if(A.isNone(xa)){const za=I.cacheKey(W,ka);void 0!==qa[za]?xa=qa[za]:(xa=da(W,ka,null),A.isNone(xa)&&(xa=new I),qa[za]=xa)}if(A.isNone(aa))throw new ua;return aa._project(S,Z,W,ka,xa)}function da(S,Z,W=null){if(A.isNone(aa))throw new ua;if(A.isNone(S)||A.isNone(Z))return null;S=aa._getTransformation(ea,S,Z,W,null==W?void 0:W.spatialReference);return null!==S?I.fromGE(S):null}function pa(S,Z,W){return W?!1:X.equals(S,Z)?!0:X.isValid(S)&&X.isValid(Z)&&!!Da(S,
Z,Na)}function ra(){ra=m._asyncToGenerator(function*(S,Z,W,ka){if(!ha())if(Array.isArray(S))for(const {source:xa,dest:za,geographicTransformation:Ea}of S){if(!pa(xa,za,Ea))return N(ka)}else if(!pa(S,Z,W))return N(ka)});return ra.apply(this,arguments)}function ta(S,Z,W){if(!S)return S;if("x"in S){var ka=new n;return oa(S,Z,ka,W)?ka:null}return"xmin"in S?(ka=new G,x(S,Z,ka,W)?ka:null):"rings"in S?(ka=new c,k(S,Z,ka,W)?ka:null):"paths"in S?(ka=new g,ca(S,Z,ka,W)?ka:null):"points"in S?(ka=new V,R(S,Z,
ka,W)?ka:null):null}function oa(S,Z,W,ka,xa=0){Ha[0]=S.x;Ha[1]=S.y;const za=S.z;Ha[2]=void 0!==za?za:xa;if(!P(Ha,Z,0,Ha,ka,0,1))return!1;W.x=Ha[0];W.y=Ha[1];W.spatialReference=ka;void 0===za?(W.z=void 0,W.hasZ=!1):(W.z=Ha[2],W.hasZ=!0);void 0===S.m?(W.m=void 0,W.hasM=!1):(W.m=S.m,W.hasM=!0);return!0}function R(S,Z,W,ka,xa=0){const {points:za,hasZ:Ea,hasM:Fa}=S;S=[];const Qa=za.length,Pa=[];for(var Oa of za)Pa.push(Oa[0],Oa[1],Ea?Oa[2]:xa);if(!P(Pa,Z,0,Pa,ka,0,Qa))return!1;for(Z=0;Z<Qa;++Z){xa=3*Z;
Oa=Pa[xa];const Ra=Pa[xa+1];Ea&&Fa?S.push([Oa,Ra,Pa[xa+2],za[Z][3]]):Ea?S.push([Oa,Ra,Pa[xa+2]]):Fa?S.push([Oa,Ra,za[Z][2]]):S.push([Oa,Ra])}W.points=S;W.spatialReference=ka;W.hasZ=Ea;W.hasM=Fa;return!0}function ca(S,Z,W,ka,xa=0){const {paths:za,hasZ:Ea,hasM:Fa}=S;S=[];if(!O(za,Ea,Fa,Z,S,ka,xa))return!1;W.paths=S;W.spatialReference=ka;W.hasZ=Ea;W.hasM=Fa;return!0}function k(S,Z,W,ka,xa=0){const {rings:za,hasZ:Ea,hasM:Fa}=S;S=[];if(!O(za,Ea,Fa,Z,S,ka,xa))return!1;W.rings=S;W.spatialReference=ka;W.hasZ=
Ea;W.hasM=Fa;return!0}function x(S,Z,W,ka,xa=0){const {xmin:za,ymin:Ea,xmax:Fa,ymax:Qa,hasZ:Pa,hasM:Oa}=S;if(!ba(za,Ea,Pa?S.zmin:xa,Z,Ha,ka))return!1;W.xmin=Ha[0];W.ymin=Ha[1];Pa&&(W.zmin=Ha[2]);if(!ba(Fa,Qa,Pa?S.zmax:xa,Z,Ha,ka))return!1;W.xmax=Ha[0];W.ymax=Ha[1];Pa&&(W.zmax=Ha[2]);Oa&&(W.mmin=S.mmin,W.mmax=S.mmax);W.spatialReference=ka;return!0}function ba(S,Z,W,ka,xa,za){Ia[0]=S;Ia[1]=Z;Ia[2]=W;return P(Ia,ka,0,xa,za,0,1)}function D(S,Z,W,ka){if(A.isNone(Z)||A.isNone(ka)||2>S.length)return!1;2===
S.length&&(Ia[0]=S[0],Ia[1]=S[1],Ia[2]=0,S=Ia);return P(S,Z,0,W,ka,0,1)}function H(S,Z,W){if(A.isNone(Z))return!1;Z=B(Z,Aa);Z=ya[Z][6];if(A.isNone(Z))return!1;Z(S,0,Ia,0);W!==Ia&&(W[0]=Ia[0],W[1]=Ia[1],2<W.length&&(W[2]=Ia[2]));return!0}function P(S,Z,W,ka,xa,za,Ea=1){Z=Da(Z,xa,Na);if(A.isNone(Z))return!1;if(Z===J){if(S===ka&&W===za)return!0;Ea=W+3*Ea;for(let Fa=W,Qa=za;Fa<Ea;Fa++,Qa++)ka[Qa]=S[Fa];return!0}Ea=W+3*Ea;for(let Fa=W,Qa=za;Fa<Ea;Fa+=3,Qa+=3)Z(S,Fa,ka,Qa);return!0}function O(S,Z,W,ka,
xa,za,Ea=0){const Fa=[];for(const Qa of S)for(const Pa of Qa)Fa.push(Pa[0],Pa[1],Z?Pa[2]:Ea);if(!P(Fa,ka,0,Fa,za,0,Fa.length/3))return!1;ka=0;xa.length=0;for(const Qa of S){S=[];for(const Pa of Qa)Z&&W?S.push([Fa[ka++],Fa[ka++],Fa[ka++],Pa[3]]):Z?S.push([Fa[ka++],Fa[ka++],Fa[ka++]]):(W?S.push([Fa[ka++],Fa[ka++],Pa[2]]):S.push([Fa[ka++],Fa[ka++]]),ka++);xa.push(S)}return!0}function ja(S,Z,W){const ka=Math.sin(Z);Z=Math.cos(Z);const xa=Math.sin(S);S=Math.cos(S);W[0]=-ka;W[4]=-xa*Z;W[8]=S*Z;W[12]=0;
W[1]=Z;W[5]=-xa*ka;W[9]=S*ka;W[13]=0;W[2]=0;W[6]=S;W[10]=xa;W[14]=0;W[3]=0;W[7]=0;W[11]=0;W[15]=1;return W}function B(S,Z){if(Z.spatialReference===S)return Z.spatialReferenceId;Z.spatialReference=S;"metersPerUnit"in Z&&(Z.metersPerUnit=v.getMetersPerUnitForSR(S,1));return S.wkt===h.SphericalECEFSpatialReference.wkt?Z.spatialReferenceId=1:X.isWGS84(S)?Z.spatialReferenceId=2:X.isWebMercator(S)?Z.spatialReferenceId=3:S.wkt===h.WGS84ECEFSpatialReference.wkt?Z.spatialReferenceId=4:4490===S.wkid?Z.spatialReferenceId=
5:S.wkt===h.SphericalPCPFMars.wkt?Z.spatialReferenceId=7:S.wkt===h.SphericalPCPFMoon.wkt?Z.spatialReferenceId=9:X.isMars(S)?Z.spatialReferenceId=8:X.isMoon(S)?Z.spatialReferenceId=10:Z.spatialReferenceId=0}function J(S,Z,W,ka){S!==W&&(W[ka++]=S[Z++],W[ka++]=S[Z++],W[ka]=S[Z])}function fa(S,Z,W,ka){W[ka++]=Ja*(S[Z++]/l.earth.radius);W[ka++]=Ja*(Math.PI/2-2*Math.atan(Math.exp(-1*S[Z++]/l.earth.radius)));W[ka]=S[Z]}function na(S,Z,W,ka){fa(S,Z,W,ka);Q(W,ka,W,ka)}function va(S,Z,W,ka){fa(S,Z,W,ka);la(W,
ka,W,ka)}function Y(S,Z,W,ka,xa){var za=.4999999*Math.PI;za=w.clamp(Ka*S[Z+1],-za,za);za=Math.sin(za);W[ka++]=Ka*S[Z]*xa.radius;W[ka++]=xa.halfSemiMajorAxis*Math.log((1+za)/(1-za));W[ka]=S[Z+2]}function a(S,Z,W,ka){Y(S,Z,W,ka,l.earth)}function e(S,Z,W,ka,xa){xa+=S[Z+2];const za=Ka*S[Z+1];S=Ka*S[Z];Z=Math.cos(za);W[ka++]=Math.cos(S)*Z*xa;W[ka++]=Math.sin(S)*Z*xa;W[ka]=Math.sin(za)*xa}function y(S,Z,W,ka){e(S,Z,W,ka,l.moon.radius)}function E(S,Z,W,ka){e(S,Z,W,ka,l.mars.radius)}function Q(S,Z,W,ka){e(S,
Z,W,ka,l.earth.radius)}function C(S,Z,W,ka,xa){var za=S[Z];const Ea=S[Z+1];Z=S[Z+2];S=Math.sqrt(za*za+Ea*Ea+Z*Z);Z=w.asinClamped(Z/(0===S?1:S));za=Math.atan2(Ea,za);W[ka++]=Ja*za;W[ka++]=Ja*Z;W[ka]=S-xa}function f(S,Z,W,ka){C(S,Z,W,ka,l.moon.radius)}function z(S,Z,W,ka){C(S,Z,W,ka,l.mars.radius)}function M(S,Z,W,ka){C(S,Z,W,ka,l.earth.radius)}function T(S,Z,W,ka){M(S,Z,W,ka);a(W,ka,W,ka)}function ia(S,Z,W,ka){M(S,Z,W,ka);la(W,ka,W,ka)}function la(S,Z,W,ka){{var xa=l.earth;const Ea=Ka*S[Z];var za=
Ka*S[Z+1];S=S[Z+2];Z=Math.sin(za);za=Math.cos(za);const Fa=xa.radius/Math.sqrt(1-xa.eccentricitySquared*Z*Z);W[ka++]=(Fa+S)*za*Math.cos(Ea);W[ka++]=(Fa+S)*za*Math.sin(Ea);W[ka++]=(Fa*(1-xa.eccentricitySquared)+S)*Z}}function sa(S,Z,W,ka){var xa=t.earthEllipsoidConstants,za=S[Z],Ea=S[Z+1];S=S[Z+2];let Fa;Z=Math.abs(S);var Qa=za*za+Ea*Ea;var Pa=Math.sqrt(Qa);var Oa=Qa+S*S;var Ra=Math.sqrt(Oa);za=Math.atan2(Ea,za);var Ta=S*S/Oa;Oa=Qa/Oa;Ea=xa.a2/Ra;Qa=xa.a3-xa.a4/Ra;.3<Oa?(Ta=Z/Ra*(1+Oa*(xa.a1+Ea+Ta*
Qa)/Ra),Ra=Math.asin(Ta),Ea=Ta*Ta,Oa=Math.sqrt(1-Ea)):(Oa=Pa/Ra*(1-Ta*(xa.a5-Ea-Oa*Qa)/Ra),Ra=Math.acos(Oa),Ea=1-Oa*Oa,Ta=Math.sqrt(Ea));Fa=1-l.earth.eccentricitySquared*Ea;Ea=l.earth.radius/Math.sqrt(Fa);xa=xa.a6*Ea;Ea=Pa-Ea*Oa;Qa=Z-xa*Ta;Z=Oa*Ea+Ta*Qa;Pa=Oa*Qa-Ta*Ea;xa=Pa/(xa/Fa+Z);Ra+=xa;0>S&&(Ra=-Ra);W[ka++]=Ja*za;W[ka++]=Ja*Ra;W[ka]=Z+Pa*xa/2}function wa(S,Z,W,ka){sa(S,Z,W,ka);Q(W,ka,W,ka)}function Ba(S,Z,W,ka){sa(S,Z,W,ka);a(W,ka,W,ka)}function Da(S,Z,W=La()){return A.isNone(S)||A.isNone(Z)?
null:Ca(S,Z,W).projector}function Ca(S,Z,W){if(A.isNone(S)||A.isNone(Z)||W.source.spatialReference===S&&W.dest.spatialReference===Z)return W;const ka=B(S,W.source),xa=B(Z,W.dest);0===ka&&0===xa?X.equals(S,Z)?W.projector=J:W.projector=null:W.projector=ya[ka][xa];return W}function La(){return{source:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},projector:J}}let aa=null,ea=null,ma=null,qa={},ua=function(S){function Z(){return S.call(this,
"projection:not-loaded","projection engine not fully loaded yet, please call load()")||this}m._inheritsLoose(Z,S);return Z}(u);const ya={[2]:{[5]:null,[8]:null,[10]:null,[11]:J,[6]:J,[1]:Q,[7]:null,[9]:null,[0]:null,[3]:a,[2]:J,[4]:la},[5]:{[5]:J,[8]:null,[10]:null,[11]:J,[6]:J,[1]:Q,[7]:null,[9]:null,[0]:null,[3]:null,[2]:null,[4]:la},[8]:{[5]:null,[8]:J,[10]:null,[11]:J,[6]:null,[1]:null,[7]:E,[9]:null,[0]:null,[3]:null,[2]:null,[4]:null},[10]:{[5]:null,[8]:null,[10]:J,[11]:J,[6]:null,[1]:null,
[7]:null,[9]:y,[0]:null,[3]:null,[2]:null,[4]:null},[3]:{[5]:null,[8]:null,[10]:null,[11]:fa,[6]:fa,[1]:na,[7]:null,[9]:null,[0]:null,[3]:J,[2]:fa,[4]:va},[4]:{[5]:sa,[8]:null,[10]:null,[11]:sa,[6]:sa,[1]:wa,[7]:null,[9]:null,[0]:null,[3]:Ba,[2]:sa,[4]:J},[1]:{[5]:M,[8]:null,[10]:null,[11]:M,[6]:M,[1]:J,[7]:null,[9]:null,[0]:null,[3]:T,[2]:M,[4]:ia},[7]:{[5]:null,[8]:z,[10]:null,[11]:z,[6]:null,[1]:null,[7]:J,[9]:null,[0]:null,[3]:null,[2]:null,[4]:null},[9]:{[5]:null,[8]:null,[10]:f,[11]:f,[6]:null,
[1]:null,[7]:null,[9]:J,[0]:null,[3]:null,[2]:null,[4]:null},[0]:{[5]:null,[8]:null,[10]:null,[11]:null,[6]:null,[1]:null,[7]:null,[9]:null,[0]:J,[3]:null,[2]:null,[4]:null},[11]:{[5]:J,[8]:J,[10]:J,[11]:J,[6]:J,[1]:Q,[7]:E,[9]:y,[0]:null,[3]:a,[2]:J,[4]:la},[6]:{[5]:null,[8]:null,[10]:null,[11]:J,[6]:J,[1]:Q,[7]:null,[9]:null,[0]:null,[3]:null,[2]:J,[4]:la}},Aa={spatialReference:null,spatialReferenceId:0},Ga={spatialReference:null,spatialReferenceId:0},Na=La(),Ma=La(),Ka=w.deg2rad(1),Ja=w.rad2deg(1),
Ia=L.create(),Sa=L.create(),Ua=L.create(),Ha=L.create(),Va=L.create();d.canProjectToWGS84ComparableLonLat=function(S){if(A.isNone(S))return!1;S=B(S,Aa);return!!ya[S][6]};d.canProjectWithoutEngine=pa;d.computeLatLonToENURotation=ja;d.computeLinearTransformation=function(S,Z,W,ka){if(A.isNone(S)||A.isNone(ka))return!1;var xa=B(S,Aa),za=B(ka,Ga);if(xa===za&&1!==za&&7!==za&&9!==za&&(0!==xa||X.equals(S,ka)))return U.identity(W),U.translate(W,W,Z),!0;if(1===za||7===za||9===za){ka=S=0;xa=ya[xa][11];za=ya[11][za];
if(A.isNone(xa)||A.isNone(za))return!1;xa(Z,0,Sa,0);za(Sa,0,Ua,0);S=Ka*Sa[0];ka=Ka*Sa[1];ja(ka,S,W);W[12]=Ua[0];W[13]=Ua[1];W[14]=Ua[2];return!0}if(3===za&&(2===xa||1===xa)){za=ya[xa][11];if(A.isNone(za))return!1;za(Z,0,Sa,0);Z=Ka*Sa[1];a(Sa,0,Ua,0);U.identity(W);U.translate(W,W,Ua);Z=1/Math.cos(Z);U.scale(W,W,[Z,Z,1]);return!0}return!1};d.getProjectorName=function(S,Z){switch(Da(S,Z,Na)){case J:return"copy3";case Q:return"wgs84ToSphericalECEF";case a:return"wgs84ToWebMercator";case la:return"wgs84ToWGS84ECEF";
case fa:return"webMercatorToWGS84";case na:return"webMercatorToSphericalECEF";case va:return"webMercatorToWGS84ECEF";case sa:return"wgs84ECEFToWGS84";case wa:return"wgs84ECEFToSphericalECEF";case Ba:return"wgs84ECEFToWebMercator";case M:return"sphericalECEFToWGS84";case T:return"sphericalECEFToWebMercator";case z:return"sphericalMarsPCPFToMars2000";case f:return"sphericalMoonPCPFToMoon2000";case ia:return"sphericalECEFToWGS84ECEF";case E:return"mars2000ToSphericalPCPF";case y:return"moon2000ToSphericalPCPF";
default:return null}};d.getTransformation=da;d.getTransformations=function(S,Z,W=null){if(A.isNone(aa))throw new ua;S=aa._getTransformationBySuitability(ea,S,Z,W,null==W?void 0:W.spatialReference);if(null!==S){Z=[];for(const ka of S)Z.push(I.fromGE(ka));return Z}return[]};d.initializeProjection=function(S,Z,W,ka){return ra.apply(this,arguments)};d.isLoaded=ha;d.isSupported=function(){return!0};d.load=N;d.localLinearScaleFactors=function(S,Z,W,ka){if(A.isNone(Z)||A.isNone(ka))return!1;const xa=B(Z,
Aa);var za=B(ka,Ga);if(xa===za&&0!==xa||X.equals(Z,ka))return W[0]=1,W[1]=1,W[2]=1,!0;if(1===xa){Z=F.length(S);S=Z/Math.sqrt(S[0]*S[0]+S[1]*S[1]);Z/=l.earth.radius;if(3===za)return W[0]=S*Z,W[1]=S*Z,W[2]=1,!0;if(2===za||5===za)return za=180/(l.earth.radius*Math.PI),W[0]=za*S*Z,W[1]=za*Z,W[2]=1,!0}return!1};d.lonLatToSphericalPCPF=function(S,Z,W,ka,xa=0){ka+=xa;xa=Math.cos(W);S[0]=Math.cos(Z)*xa*ka;S[1]=Math.sin(Z)*xa*ka;S[2]=Math.sin(W)*ka};d.lonLatToWebMercatorComparable=Y;d.project=function(S,Z,
W=null){return Array.isArray(S)?0===S.length?[]:r(ea,S,S[0].spatialReference,Z,W):r(ea,[S],S.spatialReference,Z,W)[0]};d.projectBoundingRect=function(S,Z,W,ka){if(null==S)return!1;if(X.equals(Z,ka))return p.set(W,S),!0;Ia[0]=S[0];Ia[1]=S[1];Ia[2]=0;if(!P(Ia,Z,0,Ia,ka,0,1))return!1;W[0]=Ia[0];W[1]=Ia[1];Ia[0]=S[2];Ia[1]=S[3];Ia[2]=0;if(!P(Ia,Z,0,Ia,ka,0,1))return!1;W[2]=Ia[0];W[3]=Ia[1];return!0};d.projectBoundingSphere=function(S,Z,W,ka){if(A.isNone(Z)||A.isNone(ka))return!1;Z=Ca(Z,ka,Ma);if(Z.projector===
J)return W[0]=S[0],W[1]=S[1],W[2]=S[2],W[3]=S[3],!0;if(A.isNone(Z.projector))return!1;const {source:xa,dest:za}=Z;if(3===za.spatialReferenceId){Z=ya[xa.spatialReferenceId][2];if(A.isNone(Z))return!1;Z(S,0,Sa,0);Z=Math.abs(Ka*Sa[1])+Math.asin(S[3]/(l.earth.radius+S[2]));a(Sa,0,W,0);W[3]=Z>.9999*Math.PI?Number.MAX_VALUE:1/Math.cos(Z)*S[3];return!0}Z.projector(S,0,W,0);W[3]=S[3]*xa.metersPerUnit/za.metersPerUnit;return!0};d.projectBuffer=P;d.projectDirection=function(S,Z,W,ka,xa){F.copy(Ha,S);F.add(Va,
S,Z);D(Ha,W,Ha,xa);D(Va,W,Va,xa);F.subtract(ka,Va,Ha);F.normalize(ka,ka)};d.projectExtent=function(S,Z,W=Z.spatialReference,ka=0){return A.isNone(W)?!1:x(S,S.spatialReference,Z,W,ka)};d.projectMany=r;d.projectMultipoint=function(S,Z,W=Z.spatialReference,ka=0){return A.isNone(W)?!1:R(S,S.spatialReference,Z,W,ka)};d.projectPoint=function(S,Z,W=Z.spatialReference,ka=0){return A.isNone(W)?!1:oa(S,S.spatialReference,Z,W,ka)};d.projectPointToVector=function(S,Z,W,ka=0){Ha[0]=S.x;Ha[1]=S.y;const xa=S.z;
Ha[2]=void 0!==xa?xa:ka;return P(Ha,S.spatialReference,0,Z,W,0,1)};d.projectPointToWGS84ComparableLonLat=function(S,Z){Ha[0]=S.x;Ha[1]=S.y;const W=S.z;Ha[2]=void 0!==W?W:0;return H(Ha,S.spatialReference,Z)};d.projectPolygon=function(S,Z,W=Z.spatialReference,ka=0){return A.isNone(W)?!1:k(S,S.spatialReference,Z,W,ka)};d.projectPolyline=function(S,Z,W=Z.spatialReference,ka=0){return A.isNone(W)?!1:ca(S,S.spatialReference,Z,W,ka)};d.projectVectorToDehydratedPoint=function(S,Z,W){return P(S,Z,0,Ha,W.spatialReference,
0,1)?(W.x=Ha[0],W.y=Ha[1],W.z=Ha[2],W):null};d.projectVectorToPoint=function(S,Z,W){if(A.isNone(Z)||A.isNone(W))return null;const ka=new n({spatialReference:W});return P(S,Z,0,Ha,W,0,1)?(ka.x=Ha[0],ka.y=Ha[1],ka.z=Ha[2],ka):null};d.projectVectorToVector=D;d.projectVectorToWGS84ComparableLonLat=function(S,Z,W){return H(S,Z,W)};d.projectXYZToVector=ba;d.sphericalPCPFtoLonLatElevation=C;d.unload=function(){ma=ea=aa=null;qa={}};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/chunks/mat4":function(){define(["exports",
"./vec3f64","./common"],function(b,d,m){function u(a,e){a[0]=e[0];a[1]=e[1];a[2]=e[2];a[3]=e[3];a[4]=e[4];a[5]=e[5];a[6]=e[6];a[7]=e[7];a[8]=e[8];a[9]=e[9];a[10]=e[10];a[11]=e[11];a[12]=e[12];a[13]=e[13];a[14]=e[14];a[15]=e[15];return a}function w(a,e,y,E,Q,C,f,z,M,T,ia,la,sa,wa,Ba,Da,Ca){a[0]=e;a[1]=y;a[2]=E;a[3]=Q;a[4]=C;a[5]=f;a[6]=z;a[7]=M;a[8]=T;a[9]=ia;a[10]=la;a[11]=sa;a[12]=wa;a[13]=Ba;a[14]=Da;a[15]=Ca;return a}function A(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;
a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function K(a,e){if(a===e){const y=e[1],E=e[2],Q=e[3],C=e[6],f=e[7],z=e[11];a[1]=e[4];a[2]=e[8];a[3]=e[12];a[4]=y;a[6]=e[9];a[7]=e[13];a[8]=E;a[9]=C;a[11]=e[14];a[12]=Q;a[13]=f;a[14]=z}else a[0]=e[0],a[1]=e[4],a[2]=e[8],a[3]=e[12],a[4]=e[1],a[5]=e[5],a[6]=e[9],a[7]=e[13],a[8]=e[2],a[9]=e[6],a[10]=e[10],a[11]=e[14],a[12]=e[3],a[13]=e[7],a[14]=e[11],a[15]=e[15];return a}function v(a,e){const y=e[0],E=e[1],Q=e[2],C=e[3],f=e[4],z=e[5],M=e[6],
T=e[7],ia=e[8],la=e[9],sa=e[10],wa=e[11],Ba=e[12],Da=e[13],Ca=e[14];e=e[15];const La=y*z-E*f,aa=y*M-Q*f,ea=y*T-C*f,ma=E*M-Q*z,qa=E*T-C*z,ua=Q*T-C*M,ya=ia*Da-la*Ba,Aa=ia*Ca-sa*Ba,Ga=ia*e-wa*Ba,Na=la*Ca-sa*Da,Ma=la*e-wa*Da,Ka=sa*e-wa*Ca;let Ja=La*Ka-aa*Ma+ea*Na+ma*Ga-qa*Aa+ua*ya;if(!Ja)return null;Ja=1/Ja;a[0]=(z*Ka-M*Ma+T*Na)*Ja;a[1]=(Q*Ma-E*Ka-C*Na)*Ja;a[2]=(Da*ua-Ca*qa+e*ma)*Ja;a[3]=(sa*qa-la*ua-wa*ma)*Ja;a[4]=(M*Ga-f*Ka-T*Aa)*Ja;a[5]=(y*Ka-Q*Ga+C*Aa)*Ja;a[6]=(Ca*ea-Ba*ua-e*aa)*Ja;a[7]=(ia*ua-sa*
ea+wa*aa)*Ja;a[8]=(f*Ma-z*Ga+T*ya)*Ja;a[9]=(E*Ga-y*Ma-C*ya)*Ja;a[10]=(Ba*qa-Da*ea+e*La)*Ja;a[11]=(la*ea-ia*qa-wa*La)*Ja;a[12]=(z*Aa-f*Na-M*ya)*Ja;a[13]=(y*Na-E*Aa+Q*ya)*Ja;a[14]=(Da*aa-Ba*ma-Ca*La)*Ja;a[15]=(ia*ma-la*aa+sa*La)*Ja;return a}function U(a,e){const y=e[0],E=e[1],Q=e[2],C=e[3],f=e[4],z=e[5],M=e[6],T=e[7],ia=e[8],la=e[9],sa=e[10],wa=e[11],Ba=e[12],Da=e[13],Ca=e[14];e=e[15];a[0]=z*(sa*e-wa*Ca)-la*(M*e-T*Ca)+Da*(M*wa-T*sa);a[1]=-(E*(sa*e-wa*Ca)-la*(Q*e-C*Ca)+Da*(Q*wa-C*sa));a[2]=E*(M*e-T*
Ca)-z*(Q*e-C*Ca)+Da*(Q*T-C*M);a[3]=-(E*(M*wa-T*sa)-z*(Q*wa-C*sa)+la*(Q*T-C*M));a[4]=-(f*(sa*e-wa*Ca)-ia*(M*e-T*Ca)+Ba*(M*wa-T*sa));a[5]=y*(sa*e-wa*Ca)-ia*(Q*e-C*Ca)+Ba*(Q*wa-C*sa);a[6]=-(y*(M*e-T*Ca)-f*(Q*e-C*Ca)+Ba*(Q*T-C*M));a[7]=y*(M*wa-T*sa)-f*(Q*wa-C*sa)+ia*(Q*T-C*M);a[8]=f*(la*e-wa*Da)-ia*(z*e-T*Da)+Ba*(z*wa-T*la);a[9]=-(y*(la*e-wa*Da)-ia*(E*e-C*Da)+Ba*(E*wa-C*la));a[10]=y*(z*e-T*Da)-f*(E*e-C*Da)+Ba*(E*T-C*z);a[11]=-(y*(z*wa-T*la)-f*(E*wa-C*la)+ia*(E*T-C*z));a[12]=-(f*(la*Ca-sa*Da)-ia*(z*Ca-
M*Da)+Ba*(z*sa-M*la));a[13]=y*(la*Ca-sa*Da)-ia*(E*Ca-Q*Da)+Ba*(E*sa-Q*la);a[14]=-(y*(z*Ca-M*Da)-f*(E*Ca-Q*Da)+Ba*(E*M-Q*z));a[15]=y*(z*sa-M*la)-f*(E*sa-Q*la)+ia*(E*M-Q*z);return a}function F(a){const e=a[0],y=a[1],E=a[2],Q=a[3],C=a[4],f=a[5],z=a[6],M=a[7],T=a[8],ia=a[9],la=a[10],sa=a[11],wa=a[12],Ba=a[13],Da=a[14];a=a[15];return(e*f-y*C)*(la*a-sa*Da)-(e*z-E*C)*(ia*a-sa*Ba)+(e*M-Q*C)*(ia*Da-la*Ba)+(y*z-E*f)*(T*a-sa*wa)-(y*M-Q*f)*(T*Da-la*wa)+(E*M-Q*z)*(T*Ba-ia*wa)}function L(a,e,y){const E=e[0],Q=
e[1],C=e[2],f=e[3],z=e[4],M=e[5],T=e[6],ia=e[7],la=e[8],sa=e[9],wa=e[10],Ba=e[11],Da=e[12],Ca=e[13],La=e[14];e=e[15];let aa=y[0],ea=y[1],ma=y[2],qa=y[3];a[0]=aa*E+ea*z+ma*la+qa*Da;a[1]=aa*Q+ea*M+ma*sa+qa*Ca;a[2]=aa*C+ea*T+ma*wa+qa*La;a[3]=aa*f+ea*ia+ma*Ba+qa*e;aa=y[4];ea=y[5];ma=y[6];qa=y[7];a[4]=aa*E+ea*z+ma*la+qa*Da;a[5]=aa*Q+ea*M+ma*sa+qa*Ca;a[6]=aa*C+ea*T+ma*wa+qa*La;a[7]=aa*f+ea*ia+ma*Ba+qa*e;aa=y[8];ea=y[9];ma=y[10];qa=y[11];a[8]=aa*E+ea*z+ma*la+qa*Da;a[9]=aa*Q+ea*M+ma*sa+qa*Ca;a[10]=aa*C+ea*
T+ma*wa+qa*La;a[11]=aa*f+ea*ia+ma*Ba+qa*e;aa=y[12];ea=y[13];ma=y[14];qa=y[15];a[12]=aa*E+ea*z+ma*la+qa*Da;a[13]=aa*Q+ea*M+ma*sa+qa*Ca;a[14]=aa*C+ea*T+ma*wa+qa*La;a[15]=aa*f+ea*ia+ma*Ba+qa*e;return a}function G(a,e,y){const E=y[0],Q=y[1];y=y[2];let C=void 0,f=void 0,z=void 0,M=void 0,T=void 0,ia=void 0,la=void 0,sa=void 0,wa=void 0,Ba=void 0,Da=void 0,Ca=void 0;e===a?(a[12]=e[0]*E+e[4]*Q+e[8]*y+e[12],a[13]=e[1]*E+e[5]*Q+e[9]*y+e[13],a[14]=e[2]*E+e[6]*Q+e[10]*y+e[14],a[15]=e[3]*E+e[7]*Q+e[11]*y+e[15]):
(C=e[0],f=e[1],z=e[2],M=e[3],T=e[4],ia=e[5],la=e[6],sa=e[7],wa=e[8],Ba=e[9],Da=e[10],Ca=e[11],a[0]=C,a[1]=f,a[2]=z,a[3]=M,a[4]=T,a[5]=ia,a[6]=la,a[7]=sa,a[8]=wa,a[9]=Ba,a[10]=Da,a[11]=Ca,a[12]=C*E+T*Q+wa*y+e[12],a[13]=f*E+ia*Q+Ba*y+e[13],a[14]=z*E+la*Q+Da*y+e[14],a[15]=M*E+sa*Q+Ca*y+e[15]);return a}function V(a,e,y){const E=y[0],Q=y[1];y=y[2];a[0]=e[0]*E;a[1]=e[1]*E;a[2]=e[2]*E;a[3]=e[3]*E;a[4]=e[4]*Q;a[5]=e[5]*Q;a[6]=e[6]*Q;a[7]=e[7]*Q;a[8]=e[8]*y;a[9]=e[9]*y;a[10]=e[10]*y;a[11]=e[11]*y;a[12]=e[12];
a[13]=e[13];a[14]=e[14];a[15]=e[15];return a}function q(a,e,y,E){let Q=E[0],C=E[1];E=E[2];let f=Math.sqrt(Q*Q+C*C+E*E);var z=void 0,M=void 0;let T=void 0,ia=void 0,la=void 0,sa=void 0,wa=void 0,Ba=void 0,Da=void 0,Ca=void 0,La=void 0,aa=void 0,ea=void 0,ma=void 0,qa=void 0,ua=void 0,ya=void 0,Aa=void 0,Ga=void 0,Na=void 0,Ma=void 0,Ka=void 0;M=z=void 0;if(f<m.EPSILON)return null;f=1/f;Q*=f;C*=f;E*=f;z=Math.sin(y);M=Math.cos(y);T=1-M;ia=e[0];la=e[1];sa=e[2];wa=e[3];Ba=e[4];Da=e[5];Ca=e[6];La=e[7];
aa=e[8];ea=e[9];ma=e[10];qa=e[11];ua=Q*Q*T+M;ya=C*Q*T+E*z;Aa=E*Q*T-C*z;Ga=Q*C*T-E*z;Na=C*C*T+M;Ma=E*C*T+Q*z;Ka=Q*E*T+C*z;z=C*E*T-Q*z;M=E*E*T+M;a[0]=ia*ua+Ba*ya+aa*Aa;a[1]=la*ua+Da*ya+ea*Aa;a[2]=sa*ua+Ca*ya+ma*Aa;a[3]=wa*ua+La*ya+qa*Aa;a[4]=ia*Ga+Ba*Na+aa*Ma;a[5]=la*Ga+Da*Na+ea*Ma;a[6]=sa*Ga+Ca*Na+ma*Ma;a[7]=wa*Ga+La*Na+qa*Ma;a[8]=ia*Ka+Ba*z+aa*M;a[9]=la*Ka+Da*z+ea*M;a[10]=sa*Ka+Ca*z+ma*M;a[11]=wa*Ka+La*z+qa*M;e!==a&&(a[12]=e[12],a[13]=e[13],a[14]=e[14],a[15]=e[15]);return a}function n(a,e,y){const E=
Math.sin(y);y=Math.cos(y);const Q=e[4],C=e[5],f=e[6],z=e[7],M=e[8],T=e[9],ia=e[10],la=e[11];e!==a&&(a[0]=e[0],a[1]=e[1],a[2]=e[2],a[3]=e[3],a[12]=e[12],a[13]=e[13],a[14]=e[14],a[15]=e[15]);a[4]=Q*y+M*E;a[5]=C*y+T*E;a[6]=f*y+ia*E;a[7]=z*y+la*E;a[8]=M*y-Q*E;a[9]=T*y-C*E;a[10]=ia*y-f*E;a[11]=la*y-z*E;return a}function c(a,e,y){const E=Math.sin(y);y=Math.cos(y);const Q=e[0],C=e[1],f=e[2],z=e[3],M=e[8],T=e[9],ia=e[10],la=e[11];e!==a&&(a[4]=e[4],a[5]=e[5],a[6]=e[6],a[7]=e[7],a[12]=e[12],a[13]=e[13],a[14]=
e[14],a[15]=e[15]);a[0]=Q*y-M*E;a[1]=C*y-T*E;a[2]=f*y-ia*E;a[3]=z*y-la*E;a[8]=Q*E+M*y;a[9]=C*E+T*y;a[10]=f*E+ia*y;a[11]=z*E+la*y;return a}function g(a,e,y){const E=Math.sin(y);y=Math.cos(y);const Q=e[0],C=e[1],f=e[2],z=e[3],M=e[4],T=e[5],ia=e[6],la=e[7];e!==a&&(a[8]=e[8],a[9]=e[9],a[10]=e[10],a[11]=e[11],a[12]=e[12],a[13]=e[13],a[14]=e[14],a[15]=e[15]);a[0]=Q*y+M*E;a[1]=C*y+T*E;a[2]=f*y+ia*E;a[3]=z*y+la*E;a[4]=M*y-Q*E;a[5]=T*y-C*E;a[6]=ia*y-f*E;a[7]=la*y-z*E;return a}function h(a,e){a[0]=1;a[1]=0;
a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=e[0];a[13]=e[1];a[14]=e[2];a[15]=1;return a}function p(a,e){a[0]=e[0];a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=e[1];a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=e[2];a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function l(a,e,y){let E=y[0],Q=y[1];y=y[2];let C=Math.sqrt(E*E+Q*Q+y*y),f=void 0,z=void 0,M=void 0;if(C<m.EPSILON)return null;C=1/C;E*=C;Q*=C;y*=C;f=Math.sin(e);z=Math.cos(e);M=1-z;a[0]=E*E*M+z;a[1]=Q*E*M+y*f;a[2]=y*E*M-Q*f;a[3]=
0;a[4]=E*Q*M-y*f;a[5]=Q*Q*M+z;a[6]=y*Q*M+E*f;a[7]=0;a[8]=E*y*M+Q*f;a[9]=Q*y*M-E*f;a[10]=y*y*M+z;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function t(a,e){const y=Math.sin(e);e=Math.cos(e);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=e;a[6]=y;a[7]=0;a[8]=0;a[9]=-y;a[10]=e;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function I(a,e){const y=Math.sin(e);e=Math.cos(e);a[0]=e;a[1]=0;a[2]=-y;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=y;a[9]=0;a[10]=e;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}
function X(a,e){const y=Math.sin(e);e=Math.cos(e);a[0]=e;a[1]=y;a[2]=0;a[3]=0;a[4]=-y;a[5]=e;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function ha(a,e,y){var E=e[0],Q=e[1],C=e[2],f=e[3],z=E+E,M=Q+Q;const T=C+C;e=E*z;const ia=E*M;E*=T;const la=Q*M;Q*=T;C*=T;z*=f;M*=f;f*=T;a[0]=1-(la+C);a[1]=ia+f;a[2]=E-M;a[3]=0;a[4]=ia-f;a[5]=1-(e+C);a[6]=Q+z;a[7]=0;a[8]=E+M;a[9]=Q-z;a[10]=1-(e+la);a[11]=0;a[12]=y[0];a[13]=y[1];a[14]=y[2];a[15]=1;return a}function N(a,e){const y=
Y,E=-e[0],Q=-e[1],C=-e[2],f=e[3],z=e[4],M=e[5],T=e[6],ia=e[7],la=E*E+Q*Q+C*C+f*f;0<la?(y[0]=2*(z*f+ia*E+M*C-T*Q)/la,y[1]=2*(M*f+ia*Q+T*E-z*C)/la,y[2]=2*(T*f+ia*C+z*Q-M*E)/la):(y[0]=2*(z*f+ia*E+M*C-T*Q),y[1]=2*(M*f+ia*Q+T*E-z*C),y[2]=2*(T*f+ia*C+z*Q-M*E));ha(a,e,y);return a}function r(a,e){a[0]=e[12];a[1]=e[13];a[2]=e[14];return a}function da(a,e){const y=e[0],E=e[1],Q=e[2],C=e[4],f=e[5],z=e[6],M=e[8],T=e[9];e=e[10];a[0]=Math.sqrt(y*y+E*E+Q*Q);a[1]=Math.sqrt(C*C+f*f+z*z);a[2]=Math.sqrt(M*M+T*T+e*e);
return a}function pa(a,e){const y=e[0]+e[5]+e[10];let E=0;0<y?(E=2*Math.sqrt(y+1),a[3]=.25*E,a[0]=(e[6]-e[9])/E,a[1]=(e[8]-e[2])/E,a[2]=(e[1]-e[4])/E):e[0]>e[5]&&e[0]>e[10]?(E=2*Math.sqrt(1+e[0]-e[5]-e[10]),a[3]=(e[6]-e[9])/E,a[0]=.25*E,a[1]=(e[1]+e[4])/E,a[2]=(e[8]+e[2])/E):e[5]>e[10]?(E=2*Math.sqrt(1+e[5]-e[0]-e[10]),a[3]=(e[8]-e[2])/E,a[0]=(e[1]+e[4])/E,a[1]=.25*E,a[2]=(e[6]+e[9])/E):(E=2*Math.sqrt(1+e[10]-e[0]-e[5]),a[3]=(e[1]-e[4])/E,a[0]=(e[8]+e[2])/E,a[1]=(e[6]+e[9])/E,a[2]=.25*E);return a}
function ra(a,e,y,E){var Q=e[0],C=e[1],f=e[2],z=e[3],M=Q+Q,T=C+C,ia=f+f;e=Q*M;const la=Q*T;Q*=ia;const sa=C*T;C*=ia;f*=ia;M*=z;T*=z;z*=ia;ia=E[0];const wa=E[1];E=E[2];a[0]=(1-(sa+f))*ia;a[1]=(la+z)*ia;a[2]=(Q-T)*ia;a[3]=0;a[4]=(la-z)*wa;a[5]=(1-(e+f))*wa;a[6]=(C+M)*wa;a[7]=0;a[8]=(Q+T)*E;a[9]=(C-M)*E;a[10]=(1-(e+sa))*E;a[11]=0;a[12]=y[0];a[13]=y[1];a[14]=y[2];a[15]=1;return a}function ta(a,e,y,E,Q){var C=e[0],f=e[1],z=e[2],M=e[3],T=C+C,ia=f+f,la=z+z;e=C*T;var sa=C*ia,wa=C*la;C=f*ia;f*=la;var Ba=z*
la;z=M*T;ia*=M;const Da=M*la;var Ca=E[0],La=E[1];la=E[2];E=Q[0];M=Q[1];Q=Q[2];T=(1-(C+Ba))*Ca;const aa=(sa+Da)*Ca;Ca*=wa-ia;sa=(sa-Da)*La;Ba=(1-(e+Ba))*La;La*=f+z;wa=(wa+ia)*la;f=(f-z)*la;e=(1-(e+C))*la;a[0]=T;a[1]=aa;a[2]=Ca;a[3]=0;a[4]=sa;a[5]=Ba;a[6]=La;a[7]=0;a[8]=wa;a[9]=f;a[10]=e;a[11]=0;a[12]=y[0]+E-(T*E+sa*M+wa*Q);a[13]=y[1]+M-(aa*E+Ba*M+f*Q);a[14]=y[2]+Q-(Ca*E+La*M+e*Q);a[15]=1;return a}function oa(a,e){var y=e[0],E=e[1],Q=e[2];e=e[3];var C=y+y,f=E+E;const z=Q+Q;y*=C;const M=E*C;E*=f;const T=
Q*C,ia=Q*f;Q*=z;C*=e;f*=e;e*=z;a[0]=1-E-Q;a[1]=M+e;a[2]=T-f;a[3]=0;a[4]=M-e;a[5]=1-y-Q;a[6]=ia+C;a[7]=0;a[8]=T+f;a[9]=ia-C;a[10]=1-y-E;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function R(a,e,y,E,Q,C,f){const z=1/(y-e),M=1/(Q-E),T=1/(C-f);a[0]=2*C*z;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=2*C*M;a[6]=0;a[7]=0;a[8]=(y+e)*z;a[9]=(Q+E)*M;a[10]=(f+C)*T;a[11]=-1;a[12]=0;a[13]=0;a[14]=f*C*2*T;a[15]=0;return a}function ca(a,e,y,E,Q){e=1/Math.tan(e/2);let C=void 0;a[0]=e/y;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=
e;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[11]=-1;a[12]=0;a[13]=0;a[15]=0;null!=Q&&Infinity!==Q?(C=1/(E-Q),a[10]=(Q+E)*C,a[14]=2*Q*E*C):(a[10]=-1,a[14]=-2*E);return a}function k(a,e,y,E){const Q=Math.tan(e.upDegrees*Math.PI/180),C=Math.tan(e.downDegrees*Math.PI/180),f=Math.tan(e.leftDegrees*Math.PI/180);e=Math.tan(e.rightDegrees*Math.PI/180);const z=2/(f+e),M=2/(Q+C);a[0]=z;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=M;a[6]=0;a[7]=0;a[8]=-((f-e)*z*.5);a[9]=(Q-C)*M*.5;a[10]=E/(y-E);a[11]=-1;a[12]=0;a[13]=0;a[14]=E*y/(y-
E);a[15]=0;return a}function x(a,e,y,E,Q,C,f){const z=1/(e-y),M=1/(E-Q),T=1/(C-f);a[0]=-2*z;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=-2*M;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=2*T;a[11]=0;a[12]=(e+y)*z;a[13]=(Q+E)*M;a[14]=(f+C)*T;a[15]=1;return a}function ba(a,e,y,E){let Q=void 0,C=void 0;var f=void 0,z=void 0;let M=void 0,T=void 0;var ia=void 0,la=void 0;let sa=void 0,wa=void 0;const Ba=e[0],Da=e[1];e=e[2];f=E[0];z=E[1];E=E[2];ia=y[0];la=y[1];y=y[2];if(Math.abs(Ba-ia)<m.EPSILON&&Math.abs(Da-la)<m.EPSILON&&Math.abs(e-
y)<m.EPSILON)return A(a);ia=Ba-ia;la=Da-la;sa=e-y;wa=1/Math.sqrt(ia*ia+la*la+sa*sa);ia*=wa;la*=wa;sa*=wa;Q=z*sa-E*la;C=E*ia-f*sa;f=f*la-z*ia;(wa=Math.sqrt(Q*Q+C*C+f*f))?(wa=1/wa,Q*=wa,C*=wa,f*=wa):f=C=Q=0;z=la*f-sa*C;M=sa*Q-ia*f;T=ia*C-la*Q;(wa=Math.sqrt(z*z+M*M+T*T))?(wa=1/wa,z*=wa,M*=wa,T*=wa):T=M=z=0;a[0]=Q;a[1]=z;a[2]=ia;a[3]=0;a[4]=C;a[5]=M;a[6]=la;a[7]=0;a[8]=f;a[9]=T;a[10]=sa;a[11]=0;a[12]=-(Q*Ba+C*Da+f*e);a[13]=-(z*Ba+M*Da+T*e);a[14]=-(ia*Ba+la*Da+sa*e);a[15]=1;return a}function D(a,e,y,E){const Q=
e[0],C=e[1];e=e[2];var f=E[0];const z=E[1];var M=E[2];E=Q-y[0];let T=C-y[1];y=e-y[2];let ia=E*E+T*T+y*y;0<ia&&(ia=1/Math.sqrt(ia),E*=ia,T*=ia,y*=ia);let la=z*y-M*T;M=M*E-f*y;f=f*T-z*E;ia=la*la+M*M+f*f;0<ia&&(ia=1/Math.sqrt(ia),la*=ia,M*=ia,f*=ia);a[0]=la;a[1]=M;a[2]=f;a[3]=0;a[4]=T*f-y*M;a[5]=y*la-E*f;a[6]=E*M-T*la;a[7]=0;a[8]=E;a[9]=T;a[10]=y;a[11]=0;a[12]=Q;a[13]=C;a[14]=e;a[15]=1;return a}function H(a){return"mat4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+
a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"}function P(a){return Math.sqrt(a[0]**2+a[1]**2+a[2]**2+a[3]**2+a[4]**2+a[5]**2+a[6]**2+a[7]**2+a[8]**2+a[9]**2+a[10]**2+a[11]**2+a[12]**2+a[13]**2+a[14]**2+a[15]**2)}function O(a,e,y){a[0]=e[0]+y[0];a[1]=e[1]+y[1];a[2]=e[2]+y[2];a[3]=e[3]+y[3];a[4]=e[4]+y[4];a[5]=e[5]+y[5];a[6]=e[6]+y[6];a[7]=e[7]+y[7];a[8]=e[8]+y[8];a[9]=e[9]+y[9];a[10]=e[10]+y[10];a[11]=e[11]+y[11];a[12]=e[12]+y[12];a[13]=e[13]+y[13];a[14]=e[14]+
y[14];a[15]=e[15]+y[15];return a}function ja(a,e,y){a[0]=e[0]-y[0];a[1]=e[1]-y[1];a[2]=e[2]-y[2];a[3]=e[3]-y[3];a[4]=e[4]-y[4];a[5]=e[5]-y[5];a[6]=e[6]-y[6];a[7]=e[7]-y[7];a[8]=e[8]-y[8];a[9]=e[9]-y[9];a[10]=e[10]-y[10];a[11]=e[11]-y[11];a[12]=e[12]-y[12];a[13]=e[13]-y[13];a[14]=e[14]-y[14];a[15]=e[15]-y[15];return a}function B(a,e,y){a[0]=e[0]*y;a[1]=e[1]*y;a[2]=e[2]*y;a[3]=e[3]*y;a[4]=e[4]*y;a[5]=e[5]*y;a[6]=e[6]*y;a[7]=e[7]*y;a[8]=e[8]*y;a[9]=e[9]*y;a[10]=e[10]*y;a[11]=e[11]*y;a[12]=e[12]*y;a[13]=
e[13]*y;a[14]=e[14]*y;a[15]=e[15]*y;return a}function J(a,e,y,E){a[0]=e[0]+y[0]*E;a[1]=e[1]+y[1]*E;a[2]=e[2]+y[2]*E;a[3]=e[3]+y[3]*E;a[4]=e[4]+y[4]*E;a[5]=e[5]+y[5]*E;a[6]=e[6]+y[6]*E;a[7]=e[7]+y[7]*E;a[8]=e[8]+y[8]*E;a[9]=e[9]+y[9]*E;a[10]=e[10]+y[10]*E;a[11]=e[11]+y[11]*E;a[12]=e[12]+y[12]*E;a[13]=e[13]+y[13]*E;a[14]=e[14]+y[14]*E;a[15]=e[15]+y[15]*E;return a}function fa(a,e){return a[0]===e[0]&&a[1]===e[1]&&a[2]===e[2]&&a[3]===e[3]&&a[4]===e[4]&&a[5]===e[5]&&a[6]===e[6]&&a[7]===e[7]&&a[8]===e[8]&&
a[9]===e[9]&&a[10]===e[10]&&a[11]===e[11]&&a[12]===e[12]&&a[13]===e[13]&&a[14]===e[14]&&a[15]===e[15]}function na(a,e){const y=a[0],E=a[1],Q=a[2],C=a[3],f=a[4],z=a[5],M=a[6],T=a[7],ia=a[8],la=a[9],sa=a[10],wa=a[11],Ba=a[12],Da=a[13],Ca=a[14];a=a[15];const La=e[0],aa=e[1],ea=e[2],ma=e[3],qa=e[4],ua=e[5],ya=e[6],Aa=e[7],Ga=e[8],Na=e[9],Ma=e[10],Ka=e[11],Ja=e[12],Ia=e[13],Sa=e[14];e=e[15];return Math.abs(y-La)<=m.EPSILON*Math.max(1,Math.abs(y),Math.abs(La))&&Math.abs(E-aa)<=m.EPSILON*Math.max(1,Math.abs(E),
Math.abs(aa))&&Math.abs(Q-ea)<=m.EPSILON*Math.max(1,Math.abs(Q),Math.abs(ea))&&Math.abs(C-ma)<=m.EPSILON*Math.max(1,Math.abs(C),Math.abs(ma))&&Math.abs(f-qa)<=m.EPSILON*Math.max(1,Math.abs(f),Math.abs(qa))&&Math.abs(z-ua)<=m.EPSILON*Math.max(1,Math.abs(z),Math.abs(ua))&&Math.abs(M-ya)<=m.EPSILON*Math.max(1,Math.abs(M),Math.abs(ya))&&Math.abs(T-Aa)<=m.EPSILON*Math.max(1,Math.abs(T),Math.abs(Aa))&&Math.abs(ia-Ga)<=m.EPSILON*Math.max(1,Math.abs(ia),Math.abs(Ga))&&Math.abs(la-Na)<=m.EPSILON*Math.max(1,
Math.abs(la),Math.abs(Na))&&Math.abs(sa-Ma)<=m.EPSILON*Math.max(1,Math.abs(sa),Math.abs(Ma))&&Math.abs(wa-Ka)<=m.EPSILON*Math.max(1,Math.abs(wa),Math.abs(Ka))&&Math.abs(Ba-Ja)<=m.EPSILON*Math.max(1,Math.abs(Ba),Math.abs(Ja))&&Math.abs(Da-Ia)<=m.EPSILON*Math.max(1,Math.abs(Da),Math.abs(Ia))&&Math.abs(Ca-Sa)<=m.EPSILON*Math.max(1,Math.abs(Ca),Math.abs(Sa))&&Math.abs(a-e)<=m.EPSILON*Math.max(1,Math.abs(a),Math.abs(e))}function va(a){const e=m.EPSILON,y=a[0],E=a[1],Q=a[2],C=a[4],f=a[5],z=a[6],M=a[8],
T=a[9];a=a[10];return Math.abs(1-(y*y+C*C+M*M))<=e&&Math.abs(1-(E*E+f*f+T*T))<=e&&Math.abs(1-(Q*Q+z*z+a*a))<=e}const Y=d.create();d=Object.freeze({__proto__:null,copy:u,set:w,identity:A,transpose:K,invert:v,adjoint:U,determinant:F,multiply:L,translate:G,scale:V,rotate:q,rotateX:n,rotateY:c,rotateZ:g,fromTranslation:h,fromScaling:p,fromRotation:l,fromXRotation:t,fromYRotation:I,fromZRotation:X,fromRotationTranslation:ha,fromQuat2:N,getTranslation:r,getScaling:da,getRotation:pa,fromRotationTranslationScale:ra,
fromRotationTranslationScaleOrigin:ta,fromQuat:oa,frustum:R,perspective:ca,perspectiveFromFieldOfView:k,ortho:x,lookAt:ba,targetTo:D,str:H,frob:P,add:O,subtract:ja,multiplyScalar:B,multiplyScalarAndAdd:J,exactEquals:fa,equals:na,isOrthoNormal:va,mul:L,sub:ja});b.add=O;b.adjoint=U;b.copy=u;b.determinant=F;b.equals=na;b.exactEquals=fa;b.frob=P;b.fromQuat=oa;b.fromQuat2=N;b.fromRotation=l;b.fromRotationTranslation=ha;b.fromRotationTranslationScale=ra;b.fromRotationTranslationScaleOrigin=ta;b.fromScaling=
p;b.fromTranslation=h;b.fromXRotation=t;b.fromYRotation=I;b.fromZRotation=X;b.frustum=R;b.getRotation=pa;b.getScaling=da;b.getTranslation=r;b.identity=A;b.invert=v;b.isOrthoNormal=va;b.lookAt=ba;b.mat4=d;b.mul=L;b.multiply=L;b.multiplyScalar=B;b.multiplyScalarAndAdd=J;b.ortho=x;b.perspective=ca;b.perspectiveFromFieldOfView=k;b.rotate=q;b.rotateX=n;b.rotateY=c;b.rotateZ=g;b.scale=V;b.set=w;b.str=H;b.sub=ja;b.subtract=ja;b.targetTo=D;b.translate=G;b.transpose=K})},"esri/chunks/pe":function(){define(["require",
"exports","./_rollupPluginBabelHelpers","../assets","../core/has"],function(b,d,m,u,w){function A(){return!!d._pe}function K(){return!!w("esri-wasm")}function v(){return q?q:q=(new Promise(function(c,g){b(["./pe-wasm"],c,g)})).then(function(c){return c.peWasm}).then(({default:c})=>c({locateFile:g=>u.getAssetUrl(`esri/geometry/support/${g}`)})).then(c=>{U(c)})}function U(c){function g(l,t,I){l[t]=I(l[t])}d._pe=c;d.PeDefs.init();d.PeGTlistExtended.init();d.PeNotationMgrs.init();d.PeNotationUtm.init();
d.PePCSInfo.init();d.PeGCSExtent=function(l){function t(){return l.apply(this,arguments)||this}m._inheritsLoose(t,l);t.prototype.destroy=function(){d._pe.destroy(this)};return t}(d._pe.PeGCSExtent);c=[d._pe.PeDatum,d._pe.PeGeogcs,d._pe.PeGeogtran,d._pe.PeObject,d._pe.PeParameter,d._pe.PePrimem,d._pe.PeProjcs,d._pe.PeSpheroid,d._pe.PeUnit];for(var h of c)g(h.prototype,"getName",l=>function(){return l.call(this,Array(d.PeDefs.PE_NAME_MAX))});for(const l of[d._pe.PeGeogtran,d._pe.PeProjcs])g(l.prototype,
"getParameters",t=>function(){const I=Array(d.PeDefs.PE_PARM_MAX);let X=t.call(this);for(let ha=0;ha<I.length;ha++){const N=d._pe.getValue(X,"*");I[ha]=N?d._pe.wrapPointer(N,d._pe.PeParameter):null;X+=Int32Array.BYTES_PER_ELEMENT}return I});g(d._pe.PeHorizon.prototype,"getCoord",l=>function(){const t=this.getSize();if(!t)return null;const I=[],X=l.call(this);V(I,t,X);return I});g(d._pe.PeGTlistExtendedEntry.prototype,"getEntries",l=>{const t=d._pe._pe_getPeGTlistExtendedGTsSize();return function(){let I=
null;var X=l.call(this);if(!d._pe.compare(X,d._pe.NULL)){I=[X];const ha=this.getSteps();if(1<ha){X=d._pe.getPointer(X);for(let N=1;N<ha;N++)I.push(d._pe.wrapPointer(X+t*N,d._pe.PeGTlistExtendedGTs))}}return I}});const p=d._pe._pe_getPeHorizonSize();h=l=>function(){let t=this._cache;t||(this._cache=t=new Map);if(t.has(l))return t.get(l);let I=null;var X=l.call(this);if(!d._pe.compare(X,d._pe.NULL)){I=[X];const ha=X.getNump();if(1<ha){X=d._pe.getPointer(X);for(let N=1;N<ha;N++)I.push(d._pe.wrapPointer(X+
p*N,d._pe.PeHorizon))}}t.set(l,I);return I};g(d._pe.PeProjcs.prototype,"horizonGcsGenerate",h);g(d._pe.PeProjcs.prototype,"horizonPcsGenerate",h);d._pe.PeObject.prototype.toString=function(l=d.PeDefs.PE_STR_OPTS_NONE){d._pe.ensureCache.prepare();const t=d._pe.getPointer(this),I=d._pe.ensureInt8(Array(d.PeDefs.PE_BUFFER_MAX));return d._pe.UTF8ToString(d._pe._pe_object_to_string_ext(t,l,I))}}function F(c){if(c){var g=d._pe.getClass(c);g&&(g=d._pe.getCache(g))&&(c=d._pe.getPointer(c))&&delete g[c]}}
function L(c,g){const h=[];g=Array(g);for(let p=0;p<c;p++)h.push(d._pe.ensureInt8(g));return h}function G(c){let g;Array.isArray(c[0])?(g=[],c.forEach(h=>{g.push(h[0],h[1])})):g=c;return g}function V(c,g,h,p=!1){if(p)for(p=0;p<2*g;p++)c[p]=d._pe.getValue(h+p*Float64Array.BYTES_PER_ELEMENT,"double");else{p=0===c.length;for(let l=0;l<g;l++)p&&(c[l]=Array(2)),c[l][0]=d._pe.getValue(h,"double"),c[l][1]=d._pe.getValue(h+Float64Array.BYTES_PER_ELEMENT,"double"),h+=2*Float64Array.BYTES_PER_ELEMENT}}let q;
d._pe=null;d.PeCSTransformations=void 0;(function(c){function g(l,t,I){d._pe.ensureCache.prepare();var X=G(I);const ha=I===X;X=d._pe.ensureFloat64(X);(l=d._pe._pe_geog_to_proj(d._pe.getPointer(l),t,X))&&V(I,t,X,ha);return l}function h(l,t,I){return p(l,t,I,0)}function p(l,t,I,X){d._pe.ensureCache.prepare();var ha=G(I);const N=I===ha;ha=d._pe.ensureFloat64(ha);(l=d._pe._pe_proj_to_geog_center(d._pe.getPointer(l),t,ha,X))&&V(I,t,ha,N);return l}c.geogToProj=g;c.projGeog=function(l,t,I,X){switch(X){case d.PeDefs.PE_TRANSFORM_P_TO_G:return h(l,
t,I);case d.PeDefs.PE_TRANSFORM_G_TO_P:return g(l,t,I)}return 0};c.projToGeog=h;c.projToGeogCenter=p})(d.PeCSTransformations||(d.PeCSTransformations={}));d.PeDefs=void 0;(function(c){c.init=function(){c.PE_BUFFER_MAX=d._pe.PeDefs.prototype.PE_BUFFER_MAX;c.PE_NAME_MAX=d._pe.PeDefs.prototype.PE_NAME_MAX;c.PE_MGRS_MAX=d._pe.PeDefs.prototype.PE_MGRS_MAX;c.PE_USNG_MAX=d._pe.PeDefs.prototype.PE_USNG_MAX;c.PE_DD_MAX=d._pe.PeDefs.prototype.PE_DD_MAX;c.PE_DDM_MAX=d._pe.PeDefs.prototype.PE_DDM_MAX;c.PE_DMS_MAX=
d._pe.PeDefs.prototype.PE_DMS_MAX;c.PE_UTM_MAX=d._pe.PeDefs.prototype.PE_UTM_MAX;c.PE_PARM_MAX=d._pe.PeDefs.prototype.PE_PARM_MAX;c.PE_TYPE_NONE=d._pe.PeDefs.prototype.PE_TYPE_NONE;c.PE_TYPE_GEOGCS=d._pe.PeDefs.prototype.PE_TYPE_GEOGCS;c.PE_TYPE_PROJCS=d._pe.PeDefs.prototype.PE_TYPE_PROJCS;c.PE_TYPE_GEOGTRAN=d._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN;c.PE_TYPE_COORDSYS=d._pe.PeDefs.prototype.PE_TYPE_COORDSYS;c.PE_TYPE_UNIT=d._pe.PeDefs.prototype.PE_TYPE_UNIT;c.PE_TYPE_LINUNIT=d._pe.PeDefs.prototype.PE_TYPE_LINUNIT;
c.PE_STR_OPTS_NONE=d._pe.PeDefs.prototype.PE_STR_OPTS_NONE;c.PE_STR_AUTH_NONE=d._pe.PeDefs.prototype.PE_STR_AUTH_NONE;c.PE_STR_AUTH_TOP=d._pe.PeDefs.prototype.PE_STR_AUTH_TOP;c.PE_STR_NAME_CANON=d._pe.PeDefs.prototype.PE_STR_NAME_CANON;c.PE_PARM_X0=d._pe.PeDefs.prototype.PE_PARM_X0;c.PE_PARM_ND=d._pe.PeDefs.prototype.PE_PARM_ND;c.PE_TRANSFORM_1_TO_2=d._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2;c.PE_TRANSFORM_2_TO_1=d._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1;c.PE_TRANSFORM_P_TO_G=d._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G;
c.PE_TRANSFORM_G_TO_P=d._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P;c.PE_HORIZON_RECT=d._pe.PeDefs.prototype.PE_HORIZON_RECT;c.PE_HORIZON_POLY=d._pe.PeDefs.prototype.PE_HORIZON_POLY;c.PE_HORIZON_LINE=d._pe.PeDefs.prototype.PE_HORIZON_LINE;c.PE_HORIZON_DELTA=d._pe.PeDefs.prototype.PE_HORIZON_DELTA}})(d.PeDefs||(d.PeDefs={}));d.PeFactory=void 0;(function(c){function g(t,I){let X=null,ha=h[t];ha||(ha={},h[t]=ha);ha.hasOwnProperty(String(I))?X=ha[I]:(t=d._pe.PeFactory.prototype.factoryByType(t,I),d._pe.compare(t,
d._pe.NULL)||(X=t,ha[I]=X));return X=l(X)}const h={},p={},l=t=>{if(t){const I=t.getType();switch(I){case d.PeDefs.PE_TYPE_GEOGCS:t=d._pe.castObject(t,d._pe.PeGeogcs);break;case d.PeDefs.PE_TYPE_PROJCS:t=d._pe.castObject(t,d._pe.PeProjcs);break;case d.PeDefs.PE_TYPE_GEOGTRAN:t=d._pe.castObject(t,d._pe.PeGeogtran);break;default:I&d.PeDefs.PE_TYPE_UNIT&&(t=d._pe.castObject(t,d._pe.PeUnit))}}return t};c.initialize=function(){d._pe.PeFactory.prototype.initialize(null)};c.coordsys=function(t){return g(d.PeDefs.PE_TYPE_COORDSYS,
t)};c.factoryByType=g;c.fromString=function(t,I){let X=null,ha=p[t];ha||(ha={},p[t]=ha);ha.hasOwnProperty(I)?X=ha[I]:(t=d._pe.PeFactory.prototype.fromString(t,I),d._pe.compare(t,d._pe.NULL)||(X=t,ha[I]=X));return X=l(X)};c.geogcs=function(t){return g(d.PeDefs.PE_TYPE_GEOGCS,t)};c.geogtran=function(t){return g(d.PeDefs.PE_TYPE_GEOGTRAN,t)};c.getCode=function(t){return d._pe.PeFactory.prototype.getCode(t)};c.projcs=function(t){return g(d.PeDefs.PE_TYPE_PROJCS,t)};c.unit=function(t){return g(d.PeDefs.PE_TYPE_UNIT,
t)}})(d.PeFactory||(d.PeFactory={}));d.PeGCSExtent=null;d.PeGTlistExtended=void 0;(function(c){let g;c.init=function(){c.PE_GTLIST_OPTS_COMMON=d._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON;g=d._pe._pe_getPeGTlistExtendedEntrySize()};c.getGTlist=function(h,p,l,t,I,X){let ha=null;const N=new d._pe.PeInteger(X);try{const r=d._pe.PeGTlistExtended.prototype.getGTlist(h,p,l,t,I,N);if(X=N.val)if(ha=[r],1<X){const da=d._pe.getPointer(r);for(h=1;h<X;h++)ha.push(d._pe.wrapPointer(da+g*h,d._pe.PeGTlistExtendedEntry))}}finally{d._pe.destroy(N)}return ha}})(d.PeGTlistExtended||
(d.PeGTlistExtended={}));d.PeGTlistExtendedEntry=void 0;(function(c){c.destroy=function(g){if(g&&g.length){for(const h of g)F(h),h.getEntries().forEach(p=>{F(p);p=p.getGeogtran();F(p);p.getParameters().forEach(F);[p.getGeogcs1(),p.getGeogcs2()].forEach(l=>{F(l);const t=l.getDatum();F(t);F(t.getSpheroid());F(l.getPrimem());F(l.getUnit())})});d._pe.PeGTlistExtendedEntry.prototype.Delete(g[0])}}})(d.PeGTlistExtendedEntry||(d.PeGTlistExtendedEntry={}));d.PeGTTransformations=void 0;(function(c){c.geogToGeog=
function(g,h,p,l,t){d._pe.ensureCache.prepare();var I=G(p);const X=p===I;I=d._pe.ensureFloat64(I);let ha=0;l&&(ha=d._pe.ensureFloat64(l));(g=d._pe._pe_geog_to_geog(d._pe.getPointer(g),h,I,ha,t))&&V(p,h,I,X);return g}})(d.PeGTTransformations||(d.PeGTTransformations={}));d.PeNotationDms=void 0;(function(c){const g=(p,l,t,I,X,ha)=>{d._pe.ensureCache.prepare();switch(p){case "dd":var N=d._pe._pe_geog_to_dd;var r=d.PeDefs.PE_DD_MAX;break;case "ddm":N=d._pe._pe_geog_to_ddm;r=d.PeDefs.PE_DDM_MAX;break;case "dms":N=
d._pe._pe_geog_to_dms,r=d.PeDefs.PE_DMS_MAX}p=0;l&&(p=d._pe.getPointer(l));l=G(I);l=d._pe.ensureFloat64(l);r=L(t,r);I=d._pe.ensureInt32(r);if(X=N(p,t,l,X,I))for(N=0;N<t;N++)ha[N]=d._pe.UTF8ToString(r[N]);return X},h=(p,l,t,I,X)=>{d._pe.ensureCache.prepare();switch(p){case "dd":var ha=d._pe._pe_dd_to_geog;break;case "ddm":ha=d._pe._pe_ddm_to_geog;break;case "dms":ha=d._pe._pe_dms_to_geog}p=0;l&&(p=d._pe.getPointer(l));l=I.map(N=>d._pe.ensureString(N));I=d._pe.ensureInt32(l);l=d._pe.ensureFloat64(Array(2*
t));(ha=ha(p,t,I,l))&&V(X,t,l);return ha};c.geog_to_dms=function(p,l,t,I,X){return g("dms",p,l,t,I,X)};c.dms_to_geog=function(p,l,t,I){return h("dms",p,l,t,I)};c.geog_to_ddm=function(p,l,t,I,X){return g("ddm",p,l,t,I,X)};c.ddm_to_geog=function(p,l,t,I){return h("ddm",p,l,t,I)};c.geog_to_dd=function(p,l,t,I,X){return g("dd",p,l,t,I,X)};c.dd_to_geog=function(p,l,t,I){return h("dd",p,l,t,I)}})(d.PeNotationDms||(d.PeNotationDms={}));d.PeNotationMgrs=void 0;(function(c){c.init=function(){c.PE_MGRS_STYLE_NEW=
d._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW;c.PE_MGRS_STYLE_OLD=d._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD;c.PE_MGRS_STYLE_AUTO=d._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO;c.PE_MGRS_180_ZONE_1_PLUS=d._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS;c.PE_MGRS_ADD_SPACES=d._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES};c.geog_to_mgrs_extended=function(g,h,p,l,t,I,X){d._pe.ensureCache.prepare();let ha=0;g&&(ha=d._pe.getPointer(g));g=G(p);p=d._pe.ensureFloat64(g);g=L(h,d.PeDefs.PE_MGRS_MAX);
const N=d._pe.ensureInt32(g);if(l=d._pe._pe_geog_to_mgrs_extended(ha,h,p,l,t,I,N))for(t=0;t<h;t++)X[t]=d._pe.UTF8ToString(g[t]);return l};c.mgrs_to_geog_extended=function(g,h,p,l,t){d._pe.ensureCache.prepare();let I=0;g&&(I=d._pe.getPointer(g));g=p.map(X=>d._pe.ensureString(X));p=d._pe.ensureInt32(g);g=d._pe.ensureFloat64(Array(2*h));(l=d._pe._pe_mgrs_to_geog_extended(I,h,p,l,g))&&V(t,h,g);return l}})(d.PeNotationMgrs||(d.PeNotationMgrs={}));d.PeNotationUsng=void 0;(function(c){c.geog_to_usng=function(g,
h,p,l,t,I,X){d._pe.ensureCache.prepare();let ha=0;g&&(ha=d._pe.getPointer(g));g=G(p);p=d._pe.ensureFloat64(g);g=L(h,d.PeDefs.PE_MGRS_MAX);const N=d._pe.ensureInt32(g);if(l=d._pe._pe_geog_to_usng(ha,h,p,l,t,I,N))for(t=0;t<h;t++)X[t]=d._pe.UTF8ToString(g[t]);return l};c.usng_to_geog=function(g,h,p,l){d._pe.ensureCache.prepare();var t=0;g&&(t=d._pe.getPointer(g));g=p.map(I=>d._pe.ensureString(I));p=d._pe.ensureInt32(g);g=d._pe.ensureFloat64(Array(2*h));(t=d._pe._pe_usng_to_geog(t,h,p,g))&&V(l,h,g);return t}})(d.PeNotationUsng||
(d.PeNotationUsng={}));d.PeNotationUtm=void 0;(function(c){c.init=function(){c.PE_UTM_OPTS_NONE=d._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE;c.PE_UTM_OPTS_ADD_SPACES=d._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES;c.PE_UTM_OPTS_NS=d._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS};c.geog_to_utm=function(g,h,p,l,t){d._pe.ensureCache.prepare();var I=0;g&&(I=d._pe.getPointer(g));g=G(p);p=d._pe.ensureFloat64(g);g=L(h,d.PeDefs.PE_UTM_MAX);const X=d._pe.ensureInt32(g);if(l=d._pe._pe_geog_to_utm(I,h,p,
l,X))for(I=0;I<h;I++)t[I]=d._pe.UTF8ToString(g[I]);return l};c.utm_to_geog=function(g,h,p,l,t){d._pe.ensureCache.prepare();let I=0;g&&(I=d._pe.getPointer(g));g=p.map(X=>d._pe.ensureString(X));p=d._pe.ensureInt32(g);g=d._pe.ensureFloat64(Array(2*h));(l=d._pe._pe_utm_to_geog(I,h,p,l,g))&&V(t,h,g);return l}})(d.PeNotationUtm||(d.PeNotationUtm={}));d.PePCSInfo=void 0;(function(c){const g=new Map;c.init=function(){c.PE_PCSINFO_OPTION_NONE=d._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE;c.PE_PCSINFO_OPTION_DOMAIN=
d._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN;c.PE_POLE_OUTSIDE_BOUNDARY=d._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY;c.PE_POLE_POINT=d._pe.PePCSInfo.prototype.PE_POLE_POINT};c.generate=function(h,p=c.PE_PCSINFO_OPTION_DOMAIN){let l,t;g.has(h)&&(t=g.get(h),t[p]&&(l=t[p]));l||(l=d._pe.PePCSInfo.prototype.generate(h,p),t||(t=[],g.set(h,t)),t[p]=l);return l}})(d.PePCSInfo||(d.PePCSInfo={}));d.PeVersion=void 0;(function(c){c.version_string=function(){return d._pe.PeVersion.prototype.version_string()}})(d.PeVersion||
(d.PeVersion={}));var n=Object.freeze({__proto__:null,get _pe(){return d._pe},isLoaded:A,isSupported:K,load:v,get PeCSTransformations(){return d.PeCSTransformations},get PeDefs(){return d.PeDefs},get PeFactory(){return d.PeFactory},get PeGCSExtent(){return d.PeGCSExtent},get PeGTlistExtended(){return d.PeGTlistExtended},get PeGTlistExtendedEntry(){return d.PeGTlistExtendedEntry},get PeGTTransformations(){return d.PeGTTransformations},get PeNotationDms(){return d.PeNotationDms},get PeNotationMgrs(){return d.PeNotationMgrs},
get PeNotationUsng(){return d.PeNotationUsng},get PeNotationUtm(){return d.PeNotationUtm},get PePCSInfo(){return d.PePCSInfo},get PeVersion(){return d.PeVersion},_init:U});d._init=U;d.isLoaded=A;d.isSupported=K;d.load=v;d.pe=n})},"esri/geometry/support/aaBoundingRect":function(){define(["exports","../../core/has","../../core/maybe","../Extent"],function(b,d,m,u){function w(q=V){return[q[0],q[1],q[2],q[3]]}function A(q){return q[0]>=q[2]?0:q[2]-q[0]}function K(q){return q[1]>=q[3]?0:q[3]-q[1]}function v(q,
n,c){return n>=q[0]&&c>=q[1]&&n<=q[2]&&c<=q[3]}function U(q,n){q[0]=n[0];q[1]=n[1];q[2]=n[2];q[3]=n[3];return q}function F(q){return 4===q.length}function L(q,n,c){return q<n?n:q>c?c:q}const G=[Infinity,Infinity,-Infinity,-Infinity],V=[0,0,0,0];b.NEGATIVE_INFINITY=G;b.POSITIVE_INFINITY=[-Infinity,-Infinity,Infinity,Infinity];b.UNIT=[0,0,1,1];b.ZERO=V;b.allFinite=function(q){for(let n=0;4>n;n++)if(!isFinite(q[n]))return!1;return!0};b.area=function(q){return A(q)*K(q)};b.center=function(q,n=[0,0]){n[0]=
(q[0]+q[2])/2;n[1]=(q[1]+q[3])/2;return n};b.clone=function(q){return[q[0],q[1],q[2],q[3]]};b.contains=function(q,n){return n[0]>=q[0]&&n[2]<=q[2]&&n[1]>=q[1]&&n[3]<=q[3]};b.containsPoint=function(q,n){return v(q,n[0],n[1])};b.containsPointObject=function(q,n){return v(q,n.x,n.y)};b.containsPointWithMargin=function(q,n,c){return n[0]>=q[0]-c&&n[1]>=q[1]-c&&n[0]<=q[2]+c&&n[1]<=q[3]+c};b.containsXY=v;b.create=w;b.diameter=function(q){const n=A(q);q=K(q);return Math.sqrt(n*n+q*q)};b.distance=function(q,
n){const c=(q[1]+q[3])/2,g=Math.max(Math.abs(n[0]-(q[0]+q[2])/2)-A(q)/2,0);q=Math.max(Math.abs(n[1]-c)-K(q)/2,0);return Math.sqrt(g*g+q*q)};b.empty=function(q){return q?U(q,G):w(G)};b.equals=function(q,n,c){if(m.isNone(q)||m.isNone(n))return q===n;if(!F(q)||!F(n))return!1;if(c)for(let g=0;g<q.length;g++){if(!c(q[g],n[g]))return!1}else for(c=0;c<q.length;c++)if(q[c]!==n[c])return!1;return!0};b.expand=function(q,n,c=q){if("length"in n)if(F(n))c[0]=Math.min(q[0],n[0]),c[1]=Math.min(q[1],n[1]),c[2]=Math.max(q[2],
n[2]),c[3]=Math.max(q[3],n[3]);else{if(2===n.length||3===n.length)c[0]=Math.min(q[0],n[0]),c[1]=Math.min(q[1],n[1]),c[2]=Math.max(q[2],n[0]),c[3]=Math.max(q[3],n[1])}else switch(n.type){case "extent":c[0]=Math.min(q[0],n.xmin);c[1]=Math.min(q[1],n.ymin);c[2]=Math.max(q[2],n.xmax);c[3]=Math.max(q[3],n.ymax);break;case "point":c[0]=Math.min(q[0],n.x),c[1]=Math.min(q[1],n.y),c[2]=Math.max(q[2],n.x),c[3]=Math.max(q[3],n.y)}return c};b.expandPointInPlace=function(q,n){n[0]<q[0]&&(q[0]=n[0]);n[0]>q[2]&&
(q[2]=n[0]);n[1]<q[1]&&(q[1]=n[1]);n[1]>q[3]&&(q[3]=n[1])};b.expandWithNestedArray=function(q,n,c=q){const g=n.length;let h=q[0],p=q[1],l=q[2];q=q[3];for(let t=0;t<g;t++){const I=n[t];h=Math.min(h,I[0]);p=Math.min(p,I[1]);l=Math.max(l,I[0]);q=Math.max(q,I[1])}c[0]=h;c[1]=p;c[2]=l;c[3]=q;return c};b.fromExtent=function(q,n=w()){n[0]=q.xmin;n[1]=q.ymin;n[2]=q.xmax;n[3]=q.ymax;return n};b.fromValues=function(q,n,c,g,h=w()){h[0]=q;h[1]=n;h[2]=c;h[3]=g;return h};b.height=K;b.intersection=function(q,n,
c=q){const g=n[0],h=n[1],p=n[2];n=n[3];c[0]=L(q[0],g,p);c[1]=L(q[1],h,n);c[2]=L(q[2],g,p);c[3]=L(q[3],h,n);return c};b.intersects=function(q,n){return Math.max(n[0],q[0])<=Math.min(n[2],q[2])&&Math.max(n[1],q[1])<=Math.min(n[3],q[3])};b.is=F;b.isPoint=function(q){return(0===A(q)||!isFinite(q[0]))&&(0===K(q)||!isFinite(q[1]))};b.offset=function(q,n,c,g=q){g[0]=q[0]+n;g[1]=q[1]+c;g[2]=q[2]+n;g[3]=q[3]+c;return g};b.pad=function(q,n,c=q){c[0]=q[0]-n;c[1]=q[1]-n;c[2]=q[2]+n;c[3]=q[3]+n;return c};b.set=
U;b.setMax=function(q,n,c=q){c[2]=n[0];c[3]=n[1];c!==q&&(c[0]=q[0],c[1]=q[1]);return q};b.setMin=function(q,n,c=q){c[0]=n[0];c[1]=n[1];c!==q&&(c[2]=q[2],c[3]=q[3]);return c};b.size=function(q,n){n[0]=q[2]-q[0];n[1]=q[3]-q[1]};b.toExtent=function(q,n){return new u({xmin:q[0],ymin:q[1],xmax:q[2],ymax:q[3],spatialReference:n})};b.width=A;Object.defineProperty(b,"__esModule",{value:!0})})},"esri/geometry/support/geodesicConstants":function(){define(["exports","./Ellipsoid"],function(b,d){const m=Math.PI/
180;var u=d.earth.radius;const w=d.earth.eccentricitySquared;u={a1:u*w,a2:u*w*u*w,a3:u*w*w/2,a4:u*w*u*w*2.5,a5:u*w+u*w*w/2,a6:1-w};d={4267:{a:6378206.4,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:d.earth.radius,f:d.earth.flattening},104900:{a:2439700,f:0},104901:{a:6051E3,f:0},104902:{a:6051800,f:0},104903:{a:d.moon.radius,f:d.moon.flattening},104904:{a:3393400,f:.005207166853303471},104905:{a:d.mars.radius,f:d.mars.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492E3,
f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1E4,f:0},104912:{a:2409300,f:0},104913:{a:15E3,f:0},104914:{a:4E4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85E3,f:0},104918:{a:1821460,f:0},104919:{a:5E3,f:0},104920:{a:12E3,f:0},104921:{a:3E4,f:3},104922:{a:18E3,f:0},104923:{a:14E3,f:0},104924:{a:49300,f:0},104925:{a:60268E3,f:.09796243445941462},104926:{a:16E3,f:0},104927:{a:9500,f:0},104928:{a:56E4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16E3,
f:0},104932:{a:133E3,f:0},104933:{a:718E3,f:0},104934:{a:888E3,f:0},104935:{a:1986300,f:0},104936:{a:1E4,f:0},104937:{a:41900,f:0},104938:{a:11E4,f:0},104939:{a:50100,f:0},104940:{a:764E3,f:0},104941:{a:11E3,f:0},104942:{a:529800,f:0},104943:{a:2575E3,f:0},104944:{a:25559E3,f:.022927344575296365},104945:{a:578900,f:0},104946:{a:33E3,f:0},104947:{a:21E3,f:0},104948:{a:13E3,f:0},104949:{a:31E3,f:0},104950:{a:27E3,f:0},104951:{a:42E3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15E3,f:0},
104955:{a:54E3,f:0},104956:{a:77E3,f:0},104957:{a:27E3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764E3,f:.01708124697141011},104961:{a:74E3,f:0},104962:{a:79E3,f:0},104963:{a:104E3,f:.14423076923076922},104964:{a:29E3,f:0},104965:{a:17E4,f:0},104966:{a:208E3,f:0},104967:{a:4E4,f:0},104968:{a:1352600,f:0},104969:{a:1195E3,f:0},104970:{a:593E3,f:0},104971:{a:d.mars.radius,f:0},104972:{a:47E4,f:0},104973:{a:255E3,f:0},104974:{a:2439400,f:0}};b.WKT_SPHEROID_REGEX=/SPHEROID\[([^\]]+)]/i;
b.earthEllipsoidConstants=u;b.spheroids=d;b.toRadians=m;Object.defineProperty(b,"__esModule",{value:!0})})},"esri/geometry/support/GeographicTransformation":function(){define(["./GeographicTransformationStep"],function(b){return function(){function d(u){this.steps=[];this._cached_projection={};this._chain="";this._gtlistentry=null;if(u&&u.steps)for(const w of u.steps)w instanceof b?this.steps.push(w):this.steps.push(new b({wkid:w.wkid,wkt:w.wkt,isInverse:w.isInverse}))}d.cacheKey=function(u,w){return[void 0!==
u.wkid&&null!==u.wkid?u.wkid.toString():"-1",void 0!==u.wkt&&null!==u.wkt?u.wkt.toString():"",void 0!==w.wkid&&null!==w.wkid?w.wkid.toString():"-1",void 0!==w.wkt&&null!==w.wkt?w.wkt.toString():""].join()};d.fromGE=function(u){const w=new d;let A="";for(const K of u.steps)u=b.fromGE(K),w.steps.push(u),A+=u.uid.toString()+",";w._cached_projection={};w._gtlistentry=null;w._chain=A;return w};var m=d.prototype;m.getInverse=function(){const u=new d;u.steps=[];for(let w=this.steps.length-1;0<=w;w--)u.steps.push(this.steps[w].getInverse());
return u};m.getGTListEntry=function(){let u="";for(const w of this.steps)u+=w.uid.toString()+",";u!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=u);return this._gtlistentry};m.assignCachedGe=function(u,w,A){this._cached_projection[d.cacheKey(u,w)]=A};m.getCachedGeTransformation=function(u,w){let A="";for(const K of this.steps)A+=K.uid.toString()+",";A!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=A);u=this._cached_projection[d.cacheKey(u,
w)];return void 0===u?null:u};return d}()})},"esri/geometry/support/GeographicTransformationStep":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(b){let d=0;return function(){function m(u=null){this.uid=d++;u?(this._wkt=void 0!==u.wkt?u.wkt:null,this._wkid=void 0!==u.wkid?u.wkid:-1,this._isInverse=void 0!==u.isInverse?!0===u.isInverse:!1):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}m.fromGE=function(u){const w=new m;w._wkt=u.wkt;w._wkid=u.wkid;w._isInverse=u.isInverse;
return w};m.prototype.getInverse=function(){const u=new m;u._wkt=this.wkt;u._wkid=this._wkid;u._isInverse=!this.isInverse;return u};b._createClass(m,[{key:"wkt",get:function(){return this._wkt},set:function(u){this._wkt=u;this.uid=d++}},{key:"wkid",get:function(){return this._wkid},set:function(u){this._wkid=u;this.uid=d++}},{key:"isInverse",get:function(){return this._isInverse},set:function(u){this._isInverse=u;this.uid=d++}}]);return m}()})},"esri/support/MapFloorInfo":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/jsonMap ../core/accessorSupport/decorators/subclass ../layers/support/FacilityLayerInfo ../layers/support/LevelLayerInfo ../layers/support/SiteLayerInfo".split(" "),
function(b,d,m,u,w,A,K,v,U,F,L,G){m=function(V){function q(n){n=V.call(this,n)||this;n.levelLayer=null;n.facilityLayer=null;n.siteLayer=null;return n}b._inheritsLoose(q,V);return q}(m.JSONSupport);d.__decorate([u.property({type:L,json:{write:!0}})],m.prototype,"levelLayer",void 0);d.__decorate([u.property({type:F,json:{write:!0}})],m.prototype,"facilityLayer",void 0);d.__decorate([u.property({type:G,json:{write:!0}})],m.prototype,"siteLayer",void 0);return m=d.__decorate([U.subclass("esri.support.MapFloorInfo")],
m)})},"esri/layers/support/FacilityLayerInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass".split(" "),function(b,d,m,u,w,A,K,v,U){m=function(F){function L(G){G=F.call(this,G)||this;G.layerId=null;G.facilityIdField=null;G.siteIdField=null;G.nameField=null;return G}
b._inheritsLoose(L,F);return L}(m.JSONSupport);d.__decorate([u.property({type:String,json:{write:!0}})],m.prototype,"layerId",void 0);d.__decorate([u.property({type:String,json:{write:!0}})],m.prototype,"facilityIdField",void 0);d.__decorate([u.property({type:String,json:{write:!0}})],m.prototype,"siteIdField",void 0);d.__decorate([u.property({type:String,json:{write:!0}})],m.prototype,"nameField",void 0);return m=d.__decorate([U.subclass("esri.layers.support.FacilityLayerInfo")],m)})},"esri/layers/support/LevelLayerInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass".split(" "),
function(b,d,m,u,w,A,K,v,U){m=function(F){function L(G){G=F.call(this,G)||this;G.layerId=null;G.levelIdField=null;G.facilityIdField=null;G.longNameField=null;G.shortNameField=null;G.levelNumberField=null;G.verticalOrderField=null;return G}b._inheritsLoose(L,F);return L}(m.JSONSupport);d.__decorate([u.property({type:String,json:{write:!0}})],m.prototype,"layerId",void 0);d.__decorate([u.property({type:String,json:{write:!0}})],m.prototype,"levelIdField",void 0);d.__decorate([u.property({type:String,
json:{write:!0}})],m.prototype,"facilityIdField",void 0);d.__decorate([u.property({type:String,json:{write:!0}})],m.prototype,"longNameField",void 0);d.__decorate([u.property({type:String,json:{write:!0}})],m.prototype,"shortNameField",void 0);d.__decorate([u.property({type:String,json:{write:!0}})],m.prototype,"levelNumberField",void 0);d.__decorate([u.property({type:String,json:{write:!0}})],m.prototype,"verticalOrderField",void 0);return m=d.__decorate([U.subclass("esri.layers.support.LevelLayerInfo")],
m)})},"esri/layers/support/SiteLayerInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass".split(" "),function(b,d,m,u,w,A,K,v,U){m=function(F){function L(G){G=F.call(this,G)||this;G.layerId=null;G.siteIdField=null;G.nameField=null;return G}b._inheritsLoose(L,F);
return L}(m.JSONSupport);d.__decorate([u.property({type:String,json:{write:!0}})],m.prototype,"layerId",void 0);d.__decorate([u.property({type:String,json:{write:!0}})],m.prototype,"siteIdField",void 0);d.__decorate([u.property({type:String,json:{write:!0}})],m.prototype,"nameField",void 0);return m=d.__decorate([U.subclass("esri.layers.support.SiteLayerInfo")],m)})},"esri/support/webSceneUtils":function(){define(["exports","../core/Error"],function(b,d){b.createCopyError=function(){return new d("webscene:failed-to-copy-embedded-resources",
"Copying of embedded resources is currently not supported")};b.createSchemaValidationError=function(m){return new d("webscene:schema-validation","Failed to save webscene due to schema validation errors. See 'details.errors' for more detailed information",{errors:m})};b.isCopyError=function(m){return m&&"webscene:failed-to-copy-embedded-resources"===m.name};b.isSchemaValidationError=function(m){return m&&"webscene:schema-validation"===m.name};Object.defineProperty(b,"__esModule",{value:!0})})},"esri/views/support/spatialReferenceSupport":function(){define(["exports"],
function(b){b.isSpatialReferenceSupported=function(d,m){return null==d?!1:"2d"===m?!0:"local"===m?!d.isGeographic:d.isWebMercator||d.isWGS84||4490===d.wkid||104971===d.wkid||104905===d.wkid||104903===d.wkid};Object.defineProperty(b,"__esModule",{value:!0})})},"esri/webdoc/support/saveUtils":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/asyncUtils ../../core/Error ../../core/promiseUtils ../../core/uuid ../../portal/support/resourceUtils".split(" "),function(b,d,m,u,
w,A,K){function v(){v=d._asyncToGenerator(function*(V,q,n){if(q&&q.resources){var c=q.portalItem===V.portalItem?new Set(V.paths):new Set;V.paths.length=0;V.portalItem=q.portalItem;var g=new Set(q.resources.toKeep.map(l=>l.resource.path)),h=new Set,p=[];g.forEach(l=>{c.delete(l);V.paths.push(l)});for(const l of q.resources.toUpdate)if(c.delete(l.resource.path),g.has(l.resource.path)||h.has(l.resource.path)){const {resource:t,content:I,finish:X,error:ha}=l,N=K.getSiblingOfSameTypeI(t,A.generateUUID());
V.paths.push(N.path);p.push(U({resource:N,content:I,finish:X,error:ha},n))}else V.paths.push(l.resource.path),p.push(L(l,n)),h.add(l.resource.path);for(const l of q.resources.toAdd)p.push(U(l,n)),V.paths.push(l.resource.path);c.forEach(l=>{l=q.portalItem.resourceFromPath(l);p.push(l.portalItem.removeResource(l).catch(()=>{}))});if(0!==p.length&&(g=yield w.eachAlways(p),w.throwIfAborted(n),n=g.filter(l=>"error"in l).map(l=>l.error),0<n.length))throw new u("save:resources","Failed to save one or more resources",
{errors:n});}});return v.apply(this,arguments)}function U(V,q){return F.apply(this,arguments)}function F(){F=d._asyncToGenerator(function*(V,q){q=yield m.result(V.resource.portalItem.addResource(V.resource,V.content,q));if(!0===q.ok)V.finish&&V.finish(V.resource);else throw V.error&&V.error(q.error),q.error;});return F.apply(this,arguments)}function L(V,q){return G.apply(this,arguments)}function G(){G=d._asyncToGenerator(function*(V,q){q=yield m.result(V.resource.update(V.content,q));if(!0===q.ok)V.finish(V.resource);
else throw V.error(q.error),q.error;});return G.apply(this,arguments)}b.saveResources=function(V,q,n){return v.apply(this,arguments)};Object.defineProperty(b,"__esModule",{value:!0})})},"esri/portal/support/resourceUtils":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../request ../../core/Error ../../core/maybe ../../core/urlUtils".split(" "),function(b,d,m,u,w,A){function K(){K=d._asyncToGenerator(function*(n,c={},g){yield n.load(g);var h=A.join(n.itemUrl,"resources");const {start:p=
1,num:l=10,sortOrder:t="asc",sortField:I="created"}=c;c={query:{start:p,num:l,sortOrder:t,sortField:I,token:n.apiKey},signal:w.get(g,"signal")};h=yield n.portal._request(h,c);return{total:h.total,nextStart:h.nextStart,resources:h.resources.map(({created:X,size:ha,resource:N})=>({created:new Date(X),size:ha,resource:n.resourceFromPath(N)}))}});return K.apply(this,arguments)}function v(){v=d._asyncToGenerator(function*(n,c,g,h){if(!n.hasPath())throw new u(`portal-item-resource-${c}:invalid-path`,"Resource does not have a valid path");
const p=n.portalItem;yield p.load(h);c=A.join(p.userItemUrl,"add"===c?"addResources":"updateResources");const [l,t]=L(n.path);g=yield V(g);const I=new FormData;l&&"."!==l&&I.append("resourcesPrefix",l);I.append("fileName",t);I.append("file",g,t);I.append("f","json");w.isSome(h)&&h.access&&I.append("access",h.access);yield p.portal._request(c,{method:"post",body:I,signal:w.get(h,"signal")});return n});return v.apply(this,arguments)}function U(){U=d._asyncToGenerator(function*(n,c,g){if(!c.hasPath())throw new u("portal-item-resources-remove:invalid-path",
"Resource does not have a valid path");yield n.load(g);const h=A.join(n.userItemUrl,"removeResources");yield n.portal._request(h,{method:"post",query:{resource:c.path},signal:w.get(g,"signal")});c.portalItem=null});return U.apply(this,arguments)}function F(){F=d._asyncToGenerator(function*(n,c){yield n.load(c);const g=A.join(n.userItemUrl,"removeResources");return n.portal._request(g,{method:"post",query:{deleteAll:!0},signal:w.get(c,"signal")})});return F.apply(this,arguments)}function L(n){const c=
n.lastIndexOf("/");return-1===c?[".",n]:[n.slice(0,c),n.slice(c+1)]}function G(n){{const l=A.getPathExtension(n);n=w.isNone(l)?[n,""]:[n.slice(0,n.length-l.length-1),`.${l}`]}const [c,g]=n,[h,p]=L(c);return[h,p,g]}function V(n){return q.apply(this,arguments)}function q(){q=d._asyncToGenerator(function*(n){return n instanceof Blob?n:(yield m(n.url,{responseType:"blob"})).data});return q.apply(this,arguments)}b.addOrUpdateResource=function(n,c,g,h){return v.apply(this,arguments)};b.contentToBlob=V;
b.fetchResources=function(n){return K.apply(this,arguments)};b.getSiblingOfSameType=function(n,c){if(!n.hasPath())return null;const [g,,h]=G(n.path);return n.portalItem.resourceFromPath(A.join(g,c+h))};b.getSiblingOfSameTypeI=function(n,c){if(!n.hasPath())return null;const [g,,h]=G(n.path);return n.portalItem.resourceFromPath(A.join(g,c+h))};b.removeAllResources=function(n,c){return F.apply(this,arguments)};b.removeResource=function(n,c,g){return U.apply(this,arguments)};b.splitPrefixFileNameAndExtension=
G;Object.defineProperty(b,"__esModule",{value:!0})})},"esri/webdoc/support/thumbnailUtils":function(){define(["exports"],function(b){const d={width:600,height:400};b.getOptimalThumbnailSize=function(m,u){u=u||d;let {width:w,height:A}=u;u=w/A;1.5>u?A=w/1.5:1.5<u&&(w=1.5*A);w>m.width&&(A*=m.width/w,w=m.width);A>m.height&&(w*=m.height/A,A=m.height);return{width:Math.round(w),height:Math.round(A)}};Object.defineProperty(b,"__esModule",{value:!0})})},"esri/webscene/ApplicationProperties":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/jsonMap ../core/accessorSupport/decorators/subclass ../webdoc/applicationProperties/Viewing".split(" "),
function(b,d,m,u,w,A,K,v,U,F){var L;m=L=function(G){function V(q){q=G.call(this,q)||this;q.viewing=null;return q}b._inheritsLoose(V,G);V.prototype.clone=function(){return new L({viewing:this.viewing?this.viewing.clone():null})};return V}(m.JSONSupport);d.__decorate([u.property({type:F,json:{write:!0}})],m.prototype,"viewing",void 0);return m=L=d.__decorate([U.subclass("esri.webscene.ApplicationProperties")],m)})},"esri/webdoc/applicationProperties/Viewing":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/has ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ./Search".split(" "),
function(b,d,m,u,w,A,K,v,U,F,L){var G;m=G=function(V){function q(n){n=V.call(this,n)||this;n.search=null;return n}b._inheritsLoose(q,V);q.prototype.clone=function(){return new G(u.clone({search:this.search}))};return q}(m.JSONSupport);d.__decorate([w.property({type:L,json:{write:!0}})],m.prototype,"search",void 0);return m=G=d.__decorate([F.subclass("esri.webdoc.applicationProperties.Viewing")],m)})},"esri/webdoc/applicationProperties/Search":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Collection ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/has ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../core/accessorSupport/extensions/serializableProperty/writePolicyUtils ./SearchLayer ./SearchTable".split(" "),
function(b,d,m,u,w,A,K,v,U,F,L,G,V,q,n,c){var g;const h=m.ofType(n),p=m.ofType(c);m=g=function(l){function t(X){X=l.call(this,X)||this;X.addressSearchEnabled=!0;X.enabled=!0;X.hintText=null;X.layers=new h;X.tables=new p;return X}b._inheritsLoose(t,l);var I=t.prototype;I.readAddressSearchEnabled=function(X){return!X};I.writeAddressSearchEnabled=function(X,ha,N){ha[N]=!X};I.clone=function(){return new g(w.clone({addressSearchEnabled:this.addressSearchEnabled,enabled:this.enabled,hintText:this.hintText,
layers:this.layers,tables:this.tables}))};return t}(u.JSONSupport);d.__decorate([A.property({type:Boolean,nonNullable:!0,json:{read:{source:"disablePlaceFinder"},write:{target:"disablePlaceFinder",isRequired:!0},origins:{"web-scene":{read:!1,write:!1}}}})],m.prototype,"addressSearchEnabled",void 0);d.__decorate([L.reader("addressSearchEnabled")],m.prototype,"readAddressSearchEnabled",null);d.__decorate([V.writer("addressSearchEnabled")],m.prototype,"writeAddressSearchEnabled",null);d.__decorate([A.property({type:Boolean,
nonNullable:!0,json:{write:!0,origins:{"web-map":{write:{isRequired:!0}},"web-scene":{default:!0,write:!0}}}})],m.prototype,"enabled",void 0);d.__decorate([A.property({type:String,json:{write:!0}})],m.prototype,"hintText",void 0);d.__decorate([A.property({type:h,json:{write:{overridePolicy:q.writeNonEmptyCollectionPolicy},origins:{"web-scene":{write:{isRequired:!0}}}}})],m.prototype,"layers",void 0);d.__decorate([A.property({type:p,json:{read:!0,write:{overridePolicy:q.writeNonEmptyCollectionPolicy},
origins:{"web-scene":{read:!1,write:!1}}}})],m.prototype,"tables",void 0);return m=g=d.__decorate([G.subclass("esri.webdoc.applicationProperties.Search")],m)})},"esri/core/accessorSupport/extensions/serializableProperty/writePolicyUtils":function(){define(["exports"],function(b){b.writeNonEmptyCollectionPolicy=function(d){return{enabled:!(null==d||!d.length)}};Object.defineProperty(b,"__esModule",{value:!0})})},"esri/webdoc/applicationProperties/SearchLayer":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/has ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ./SearchLayerField".split(" "),
function(b,d,m,u,w,A,K,v,U,F,L){var G;m=G=function(V){function q(n){n=V.call(this,n)||this;n.field=null;n.id=null;n.subLayer=null;return n}b._inheritsLoose(q,V);q.prototype.clone=function(){return new G(u.clone({field:this.field,id:this.id,subLayer:this.subLayer}))};return q}(m.JSONSupport);d.__decorate([w.property({type:L,json:{write:{isRequired:!0}}})],m.prototype,"field",void 0);d.__decorate([w.property({type:String,json:{write:{isRequired:!0}}})],m.prototype,"id",void 0);d.__decorate([w.property({type:A.Integer,
json:{write:!0}})],m.prototype,"subLayer",void 0);return m=G=d.__decorate([F.subclass("esri.webdoc.applicationProperties.SearchLayer")],m)})},"esri/webdoc/applicationProperties/SearchLayerField":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../layers/support/fieldType".split(" "),
function(b,d,m,u,w,A,K,v,U,F){var L;m=L=function(G){function V(q){q=G.call(this,q)||this;q.exactMatch=!1;q.name=null;q.type=null;return q}b._inheritsLoose(V,G);V.prototype.clone=function(){return new L({exactMatch:this.exactMatch,type:this.type,name:this.name})};return V}(m.JSONSupport);d.__decorate([u.property({type:Boolean,json:{write:!0}})],m.prototype,"exactMatch",void 0);d.__decorate([u.property({type:String,json:{write:!0}})],m.prototype,"name",void 0);d.__decorate([v.enumeration(F.kebabDict)],
m.prototype,"type",void 0);return m=L=d.__decorate([U.subclass("esri.webdoc.applicationProperties.SearchLayerField")],m)})},"esri/webdoc/applicationProperties/SearchTable":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/has ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ./SearchTableField".split(" "),
function(b,d,m,u,w,A,K,v,U,F,L){var G;m=G=function(V){function q(n){n=V.call(this,n)||this;n.field=null;n.id=null;return n}b._inheritsLoose(q,V);q.prototype.clone=function(){return new G(u.clone({field:this.field,id:this.id}))};return q}(m.JSONSupport);d.__decorate([w.property({type:L,json:{write:{isRequired:!0}}})],m.prototype,"field",void 0);d.__decorate([w.property({type:String,json:{write:{isRequired:!0}}})],m.prototype,"id",void 0);return m=G=d.__decorate([F.subclass("esri.webdoc.applicationProperties.SearchTable")],
m)})},"esri/webdoc/applicationProperties/SearchTableField":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../layers/support/fieldType".split(" "),function(b,d,m,u,w,A,K,v,U,F){var L;m=L=function(G){function V(q){q=G.call(this,
q)||this;q.exactMatch=!1;q.name=null;q.type=null;return q}b._inheritsLoose(V,G);V.prototype.clone=function(){return new L({exactMatch:this.exactMatch,type:this.type,name:this.name})};return V}(m.JSONSupport);d.__decorate([u.property({type:Boolean,json:{write:!0}})],m.prototype,"exactMatch",void 0);d.__decorate([u.property({type:String,json:{write:!0}})],m.prototype,"name",void 0);d.__decorate([v.enumeration(F.kebabDict)],m.prototype,"type",void 0);return m=L=d.__decorate([U.subclass("esri.webdoc.applicationProperties.SearchTableField")],
m)})},"esri/webscene/Environment":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/has ../core/Logger ../core/jsonMap ../core/accessorSupport/decorators/subclass ./Lighting ./background/utils".split(" "),function(b,d,m,u,w,A,K,v,U,F,L,G){var V;A=(q,n,c)=>({enabled:!c||!c.isPresentation});m=V=function(q){function n(g){g=q.call(this,g)||this;g.lighting=new L;
g.background=null;g.atmosphereEnabled=!0;g.starsEnabled=!0;return g}b._inheritsLoose(n,q);var c=n.prototype;c.clone=function(){return new V(this.cloneConstructProperties())};c.cloneConstructProperties=function(){return{lighting:L.prototype.clone.call(this.lighting),background:u.clone(this.background),atmosphereEnabled:this.atmosphereEnabled,starsEnabled:this.starsEnabled}};return n}(m.JSONSupport);d.__decorate([w.property({type:L,json:{write:!0}})],m.prototype,"lighting",void 0);d.__decorate([w.property(G.backgroundProperty)],
m.prototype,"background",void 0);d.__decorate([w.property({type:Boolean,nonNullable:!0,json:{write:{overridePolicy:A}}})],m.prototype,"atmosphereEnabled",void 0);d.__decorate([w.property({type:Boolean,nonNullable:!0,json:{write:{overridePolicy:A}}})],m.prototype,"starsEnabled",void 0);return m=V=d.__decorate([F.subclass("esri.webscene.Environment")],m)})},"esri/webscene/Lighting":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/jsonMap ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer".split(" "),
function(b,d,m,u,w,A,K,v,U,F,L){var G;m=G=function(V){function q(c){c=V.call(this,c)||this;c.date=null;c.directShadowsEnabled=!1;c.displayUTCOffset=null;return c}b._inheritsLoose(q,V);var n=q.prototype;n.readDate=function(c,g){return null!=g.datetime&&new Date(g.datetime)||null};n.writeDate=function(c,g,h){g[h]=c.getTime()};n.readDirectShadowsEnabled=function(c,g){return!!g.directShadows};n.writedirectShadowsEnabled=function(c,g,h){c&&(g[h]=c)};n.writeDisplayUTCOffset=function(c,g){null!=c&&(g.displayUTCOffset=
c)};n.clone=function(){return new G(this.cloneConstructProperties())};n.cloneConstructProperties=function(){const c={directShadowsEnabled:this.directShadowsEnabled,displayUTCOffset:null!=this.displayUTCOffset?this.displayUTCOffset:null};null!=this.date&&(c.date=new Date(this.date.getTime()));return c};return q}(m.JSONSupport);d.__decorate([u.property({type:Date,json:{type:Number,write:{target:"datetime"}}})],m.prototype,"date",void 0);d.__decorate([U.reader("date",["datetime"])],m.prototype,"readDate",
null);d.__decorate([L.writer("date")],m.prototype,"writeDate",null);d.__decorate([u.property({type:Boolean,json:{default:!1,write:{target:"directShadows"}}})],m.prototype,"directShadowsEnabled",void 0);d.__decorate([U.reader("directShadowsEnabled",["directShadows"])],m.prototype,"readDirectShadowsEnabled",null);d.__decorate([L.writer("directShadowsEnabled")],m.prototype,"writedirectShadowsEnabled",null);d.__decorate([u.property({type:Number,json:{write:!0}})],m.prototype,"displayUTCOffset",void 0);
d.__decorate([L.writer("displayUTCOffset")],m.prototype,"writeDisplayUTCOffset",null);return m=G=d.__decorate([F.subclass("esri.webscene.Lighting")],m)})},"esri/webscene/background/utils":function(){define(["exports","./Background","./ColorBackground"],function(b,d,m){d={base:d,key:"type",typeMap:{color:m}};d={types:d,json:{read:function(u){return(w,A,K)=>{if(!w)return w;for(const v in u.typeMap)if(w.type===v)return A=new u.typeMap[v],A.read(w,K),A}}(d),write:{overridePolicy:(u,w,A)=>({enabled:!A||
!A.isPresentation})}}};b.backgroundProperty=d;Object.defineProperty(b,"__esModule",{value:!0})})},"esri/webscene/background/Background":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass".split(" "),function(b,d,m,u,w,A,K,v,U){m=function(F){function L(G){return F.call(this,
G)||this}b._inheritsLoose(L,F);L.prototype.clone=function(){};return L}(m.JSONSupport);d.__decorate([u.property({readOnly:!0,json:{read:!1}})],m.prototype,"type",void 0);return m=d.__decorate([U.subclass("esri.webscene.background.Background")],m)})},"esri/webscene/background/ColorBackground":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Color ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../symbols/support/materialUtils ./Background".split(" "),
function(b,d,m,u,w,A,K,v,U,F,L){var G;w={...F.colorAndTransparencyProperty,nonNullable:!0};L=G=function(V){function q(c){c=V.call(this,c)||this;c.type="color";c.color=new m([0,0,0,1]);return c}b._inheritsLoose(q,V);var n=q.prototype;n.clone=function(){return new G(this.cloneProperties())};n.cloneProperties=function(){return{color:this.color.clone()}};return q}(L);d.__decorate([v.enumeration({color:"color"},{readOnly:!0})],L.prototype,"type",void 0);d.__decorate([u.property(w)],L.prototype,"color",
void 0);return L=G=d.__decorate([U.subclass("esri.webscene.background.ColorBackground")],L)})},"esri/webscene/InitialViewProperties":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Viewpoint ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/jsonMap ../core/accessorSupport/decorators/subclass ../geometry/SpatialReference ./Environment".split(" "),function(b,d,m,u,w,A,K,v,U,F,L,G){var V;
u=V=function(q){function n(c){c=q.call(this,c)||this;c.environment=new G;c.spatialReference=null;c.viewpoint=null;return c}b._inheritsLoose(n,q);n.prototype.clone=function(){return new V({environment:this.environment.clone(),spatialReference:this.spatialReference?this.spatialReference.clone():null,viewingMode:this.viewingMode,viewpoint:this.viewpoint?this.viewpoint.clone():null})};b._createClass(n,[{key:"viewingMode",set:function(c){this._set("viewingMode",c)}}]);return n}(u.JSONSupport);d.__decorate([w.property({type:G,
json:{write:{isRequired:!0}}})],u.prototype,"environment",void 0);d.__decorate([w.property({type:L})],u.prototype,"spatialReference",void 0);d.__decorate([w.property({type:["local","global"]})],u.prototype,"viewingMode",null);d.__decorate([w.property({type:m,json:{write:{isRequired:!0}}})],u.prototype,"viewpoint",void 0);return u=V=d.__decorate([F.subclass("esri.webscene.InitialViewProperties")],u)})},"esri/webscene/Presentation":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Collection ../core/collectionUtils ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/decorators/cast ../core/Logger ../core/jsonMap ../core/accessorSupport/decorators/subclass ./Slide".split(" "),
function(b,d,m,u,w,A,K,v,U,F,L,G){const V=m.ofType(G);m=function(q){function n(g){g=q.call(this,g)||this;g.slides=new V;return g}b._inheritsLoose(n,q);var c=n.prototype;c.destroy=function(){this.slides.forEach(g=>g.destroy());this.slides.removeAll()};c.clone=function(){return new this.constructor({slides:this.slides.clone()})};b._createClass(n,[{key:"slides",set:function(g){g&&(g=g.filter(h=>!!h.viewpoint));this._set("slides",u.referenceSetter(g,this._get("slides"),V))}}]);return n}(w.JSONSupport);
d.__decorate([A.property({type:V,nonNullable:!0,json:{write:!0}}),v.cast(u.castForReferenceSetter)],m.prototype,"slides",null);return m=d.__decorate([L.subclass("esri.webscene.Presentation")],m)})},"esri/webscene/Slide":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Basemap ../Viewpoint ../core/asyncUtils ../core/Collection ../core/collectionUtils ../core/JSONSupport ../core/Logger ../core/maybe ../core/promiseUtils ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/decorators/cast ../core/jsonMap ../core/accessorSupport/decorators/subclass ../core/accessorSupport/ensureType ../chunks/vec3 ../chunks/vec3f64 ../layers/Layer ../layers/mixins/OperationalLayer ../support/basemapUtils ../views/3d/support/mathUtils ../views/3d/support/viewpointUtils ../views/support/Scheduler ../webdoc/support/Thumbnail ./Lighting ./support/Description ./support/SlideEnvironment ./support/SlideGround ./support/SlideVisibleLayer ./support/Title".split(" "),
function(b,d,m,u,w,A,K,v,U,F,L,G,V,q,n,c,g,h,p,l,t,I,X,ha,N,r,da,pa,ra,ta,oa,R){function ca(P){if("building-scene"===P.type||"map-image"===P.type)return P.allSublayers.toArray()}function k(P){if(P=ca(P))return P.filter(O=>O.visible).map(O=>O.id)}function x(P,O){P=O-P;43200<P&&(P-=86400);-43200>P&&(P+=86400);return P}let ba=0;const D=A.ofType(oa["default"]),H=U.getLogger("esri.webscene.Slide");v=function(P){function O(B){B=P.call(this,B)||this;B.id=Date.now().toString(16)+"-slide-"+ba++;B.title=new R;
B.description=new pa;B.thumbnail=new r;B.viewpoint=null;B.basemap=null;B.ground=null;B.environment=new ra.SlideEnvironment;B.visibleLayers=new D;return B}b._inheritsLoose(O,P);var ja=O.prototype;ja.destroy=function(){this.visibleLayers.removeAll();this.basemap=null;this.thumbnail&&this.thumbnail.destroy();this.thumbnail=this.title=this.description=null};ja.castTitle=function(B){return"string"===typeof B?new R({text:B}):g.ensureType(R,B)};ja.castDescription=function(B){return"string"===typeof B?new pa({text:B}):
g.ensureType(pa,B)};ja.castThumbnail=function(B){return"string"===typeof B?new r({url:B}):g.ensureType(r,B)};ja.castBasemap=function(B){return I.ensureType(B)};ja.castVisibleLayers=function(B){return B&&"function"===typeof B.map?B.map(J=>{if("string"===typeof J)return{id:J};if(J instanceof l){const fa=k(J);return{id:J.id,sublayerIds:fa}}if(J.id)return{id:J.id,sublayerIds:J.sublayerIds};H.warn('Invalid visible layer, expected { id }, Layer or "id"');return J}):null};ja.clone=function(){return new this.constructor({id:this.id,
title:this.title.clone(),thumbnail:this.thumbnail.clone(),description:this.description&&this.description.clone()||null,viewpoint:this.viewpoint&&this.viewpoint.clone()||null,basemap:this.basemap&&this.basemap.clone()||null,ground:this.ground&&this.ground.clone()||null,visibleLayers:this.visibleLayers.clone(),environment:this.environment&&this.environment.clone()||null})};ja._updateVisibleLayersFrom=function(B){const J=[];return L.eachAlways(this._getLayers(B.map).map(fa=>B.whenLayerView(fa).then(na=>
{if(na.visible){const va=k(fa);J.push(new oa["default"]({id:na.layer.id,sublayerIds:va}))}})).toArray()).then(()=>{this.visibleLayers.removeAll();this.visibleLayers.addMany(J)})};ja.updateFrom=function(B,J){J={screenshot:{format:"png",quality:80,width:120,height:75,disableDecorations:!0,...J&&J.screenshot}};return B.when(()=>{this.viewpoint=B.viewpoint.clone();this.environment.lighting=da.prototype.clone.apply(B.environment.lighting);this.basemap=B.map.basemap&&B.map.basemap.clone()||null;this.ground=
B.map.ground?ta.fromGround(B.map.ground):null;return this._updateVisibleLayersFrom(B)}).then(()=>B.takeScreenshot(J.screenshot)).then(fa=>{this.thumbnail=new r({url:fa.dataUrl});return this})};ja.applyTo=function(){var B=b._asyncToGenerator(function*(J,fa){var na=this;F.isSome(this._applyToController)&&this._applyToController.abort();let va=L.createAbortController();this._applyToController=va;const Y=L.onAbortOrThrow(fa,()=>va.abort()),a=J.resourceController.scheduler.registerTask(N.TaskPriority.SLIDE);
let e=!1;fa={animate:!0,...fa,signal:this._applyToController.signal};var y=function(){var E=b._asyncToGenerator(function*(){a.schedule(()=>e=na._setViewpointOfInterest(J,fa));yield a.schedule(()=>na._applyBasemap(J,fa),fa.signal);a.schedule(()=>na._applyLayerVisibility(J),fa.signal);a.schedule(()=>na._applyGround(J),fa.signal);yield a.schedule(()=>na._applyViewpoint(J,fa),fa.signal)});return function(){return E.apply(this,arguments)}}();y=yield w.result(J.addUpdatingPromise(y()));e&&(J.contentCamera=
null);a.remove();this._applyToController===va&&(this._applyToController=null);va=null;null==Y?void 0:Y.remove();if(!1===y.ok)throw y.error;return this});return function(J,fa){return B.apply(this,arguments)}}();ja._applyBasemap=function(){var B=b._asyncToGenerator(function*(J,fa){if(this.basemap){try{yield this.basemap.load(fa)}catch(na){if(L.isAbortError(na))throw na;}J.map.basemap=I.clonePreservingTiledLayers(this.basemap,J.map.basemap)}});return function(J,fa){return B.apply(this,arguments)}}();
ja._applyGround=function(B){this.ground&&(B.map.ground=this.ground.cloneAndApplyTo(B.map.ground))};ja._getLayers=function(B){const J=new A;this._collectLayers(B,J);this._collectLayers(B.ground,J);return J};ja._collectLayers=function(B,J){B.layers.forEach(fa=>{t.isOperationalLayer(fa)&&(J.add(fa),"layers"in fa&&this._collectLayers(fa,J))})};ja._applyLayerVisibility=function(B){this.visibleLayers&&this._getLayers(B.map).forEach(J=>{var fa=this.visibleLayers.find(va=>va.id===J.id);J.visible=null!=fa;
const na=fa&&fa.sublayerIds;fa=ca(J);na&&fa&&fa.forEach(va=>va.visible=0<=na.indexOf(va.id))})};ja._setViewpointOfInterest=function(B,J){if(B.state.fixedContentCamera||!this.viewpoint||J.ignoreViewpoint||!J.useDestinationCamera)return!1;J=ha.toCamera(B,this.viewpoint);B.contentCamera=J;return F.isSome(J)};ja._applyViewpoint=function(){var B=b._asyncToGenerator(function*(J,fa){if(this.viewpoint&&!fa.ignoreViewpoint){F.isSome(this.viewpoint.camera)&&(this.viewpoint.camera.fov=J.camera.fov);if(fa.animate&&
this.get("environment.lighting.date")){yield this._animateToLighting(J,fa);return}fa.animate&&(J.environment.applyLighting(this.environment.lighting.clone()),yield J.goTo(this.viewpoint,fa));J.viewpoint=this.viewpoint}J.environment.applyLighting(this.environment.lighting.clone())});return function(J,fa){return B.apply(this,arguments)}}();ja._animateToLighting=function(){var B=b._asyncToGenerator(function*(J,fa){let na=null;"global"===J.viewingMode&&(na=this._animateLightingWithCamera(J));J.environment.lighting.cameraTrackingEnabled=
!1;J.environment.lighting.directShadowsEnabled=this.environment.lighting.directShadowsEnabled;null!=this.environment.lighting.displayUTCOffset&&(J.environment.lighting.displayUTCOffset=this.environment.lighting.displayUTCOffset);return J.goTo(this.viewpoint,fa).then(()=>{J.environment.applyLighting(this.environment.lighting.clone());na&&na.remove();J.environment.lighting.cameraTrackingEnabled=!0},va=>{na&&na.remove();J.environment.lighting.cameraTrackingEnabled=!0;throw va;})});return function(J,
fa){return B.apply(this,arguments)}}();ja._getTime=function(B){const J=B.getTime();B=3600*B.getUTCHours()+60*B.getUTCMinutes()+B.getUTCSeconds();return[J,B]};ja._setTime=function(B,J,fa){B.setTime(J);B.setUTCHours(fa/3600);B.setUTCMinutes(fa%3600/60);B.setUTCSeconds(fa%3600%60);return B};ja._animateLightingWithCamera=function(B){const [J,fa]=this._getTime(new Date(B.environment.lighting.date.toString())),[na,va]=this._getTime(this.environment.lighting.date),Y=x(fa,va),a=B.renderCoordsHelper,e=p.create();
a.toRenderCoords(B.camera.position,e);const y=p.create(),E=p.create();F.isSome(this.viewpoint.camera)&&a.toRenderCoords(this.viewpoint.camera.position,y);const Q=new Date;return B.watch("camera",C=>{a.toRenderCoords(C.position,E);var f=h.squaredDistance(e,E);const z=h.squaredDistance(y,E);C=0;0!==f+z&&(C=f/(f+z));f=J+(na-J)*C;C=X.moduloPositive(fa+Y*C,86400);B.environment.lighting.date=this._setTime(Q,f,C)})};O.createFrom=function(B,J){return(new this).updateFrom(B,J)};b._createClass(O,[{key:"visibleLayers",
set:function(B){this._set("visibleLayers",K.referenceSetter(B,this._get("visibleLayers"),D))}}]);return O}(v.JSONSupport);d.__decorate([G.property({type:String,json:{write:{isRequired:!0}}})],v.prototype,"id",void 0);d.__decorate([G.property({type:R,json:{default:()=>new R({text:""}),write:{isRequired:!0}}})],v.prototype,"title",void 0);d.__decorate([q.cast("title")],v.prototype,"castTitle",null);d.__decorate([G.property({type:pa,json:{write:{overridePolicy(P){return{enabled:!(!P||!P.text)}}}}})],
v.prototype,"description",void 0);d.__decorate([q.cast("description")],v.prototype,"castDescription",null);d.__decorate([G.property({type:r,json:{default:()=>new r({url:""}),write:{isRequired:!0}}})],v.prototype,"thumbnail",void 0);d.__decorate([q.cast("thumbnail")],v.prototype,"castThumbnail",null);d.__decorate([G.property({type:u,nonNullable:!0,json:{write:{isRequired:!0}}})],v.prototype,"viewpoint",void 0);d.__decorate([G.property({type:m,json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],
v.prototype,"basemap",void 0);d.__decorate([q.cast("basemap")],v.prototype,"castBasemap",null);d.__decorate([G.property({type:ta,json:{write:!0}})],v.prototype,"ground",void 0);d.__decorate([G.property({type:D,json:{write:{isRequired:!0}}})],v.prototype,"visibleLayers",null);d.__decorate([q.cast("visibleLayers")],v.prototype,"castVisibleLayers",null);d.__decorate([G.property({type:ra.SlideEnvironment,json:{write:!0}})],v.prototype,"environment",void 0);return v=d.__decorate([c.subclass("esri.webscene.Slide")],
v)})},"esri/views/3d/support/viewpointUtils":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../Camera ../../../geometry ../../../Graphic ../../../Viewpoint ../../../core/asyncUtils ../../../core/has ../../../core/Error ../../../core/maybe ../../../core/promiseUtils ../../../chunks/mat3 ../../../chunks/mat3f64 ../../../chunks/mat4f64 ../../../chunks/vec3 ../../../chunks/vec3f64 ../../../geometry/projection ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../../../geometry/support/frustum ../../../geometry/support/webMercatorUtils ../camera/intersectionUtils ./cameraUtils ./ElevationProvider ./mathUtils ../../../geometry/SpatialReference ../../../geometry/Extent ../../../geometry/Geometry ../../../geometry/Point".split(" "),
function(b,d,m,u,w,A,K,v,U,F,L,G,V,q,n,c,g,h,p,l,t,I,X,ha,N,r,da,pa,ra){function ta(aa){return 360-N.cyclicalDeg.normalize(aa)}function oa(aa){return N.cyclicalDeg.normalize(360-aa)}function R(aa){F.isSome(aa)&&aa.resolver&&aa.resolver.reject();return null}function ca(aa,ea,ma,qa=null){if(!ea)return R(qa);var ua=aa.spatialReference||r.WGS84;if(F.isSome(ea.camera)){aa=ea.get("camera.position.spatialReference");if(!t.canProject(aa,ua))return R(qa);ea=ea.camera.clone();aa.equals(ua)||(ea.position=t.project(ea.position,
ua));aa=ea;F.isSome(qa)&&qa.resolver&&qa.resolver.resolve(aa);return aa}if(F.isNone(ea.targetGeometry))return R(qa);var ya=ea.get("targetGeometry.spatialReference");if(ya&&!t.canProject(ya,ua))return R(qa);ua=X.internalToExternal(aa,aa.state.camera);ya=1;null!=ea.rotation&&(ua.heading=ta(ea.rotation),ya=0);null!=ma&&(ua.tilt=ma);if("point"===ea.targetGeometry.type){const Aa=ea.targetGeometry;ma=ea.targetGeometry.clone();ea=null!=ea.scale?X.scaleToDistance(aa,ea.scale,Aa.latitude):aa.state.camera.distance;
return X.fromCenterDistance(aa,ma,ea,ua,ya,qa)}return X.fromExtent(aa,ea.targetGeometry.extent,ua.heading,ua.tilt,ya,qa)}function k(){k=d._asyncToGenerator(function*(aa,ea,ma){if(ea&&aa.spatialReference){var qa={target:null};if("declaredClass"in ea||Array.isArray(ea))qa.target=ea;else{for(var ua in ea)qa[ua]=ea[ua];ea.center&&!qa.target&&(qa.target=ea.center)}ea=qa}else ea=null;if(!ea)throw new U("viewpointutils-create:no-target","Missing target for creating viewpoint");qa=new m({fov:aa.camera.fov});
ua=new A({camera:qa});if(ea.target instanceof A)return aa=yield J(aa,ea.target,ea,ma,ua),f(aa);if(ea.target instanceof m)return f(na(aa,ea.target,ua));var ya=null!=ea.scale||null!=ea.zoom;if(ea.target instanceof da){var Aa=ea.target.xmin===ea.target.xmax||ea.target.ymin===ea.target.ymax;return ya||Aa?f(yield va(aa,ea,ea.target.center,qa,ma,ua)):f(yield y(aa,ea,ea.target,qa,ma,ua))}Aa={boundingBox:h.empty(),hasZ:!1,screenSpaceObjects:[]};var Ga=ya?X.scaleToResolution(aa,x(aa,ea)):void 0;yield ja(aa,
ea.target,Ga,Aa);if(isFinite(Aa.boundingBox[0])){h.center(Aa.boundingBox,z);Ca.x=z[0];Ca.y=z[1];Ca.z=z[2];Ca.spatialReference=aa.spatialReference;isFinite(Ca.z)&&Aa.hasZ?Ga=h.isPoint(Aa.boundingBox):(Ca.z=void 0,Ga=p.isPoint(h.toRect(Aa.boundingBox,la)));if(ya||Ga)return f(yield va(aa,ea,Ca,qa,ma,ua));ya=Aa.screenSpaceObjects;if(ya.length){Ga=Number.NEGATIVE_INFINITY;for(let Na=0;Na<ya.length;Na++){const Ma=ya[Na].screenSpaceBoundingRect;Ga=Math.max(Ga,Math.abs(Ma[0]),Math.abs(Ma[1]),Math.abs(Ma[2]),
Math.abs(Ma[3]))}ya=.66-Ga/Math.min(aa.width,aa.height)*2}else ya=.66;return f(yield Q(aa,ea,Ca,Aa.boundingBox,ya,qa,ma,ua))}return ea.position?(ma=I.cameraOnContentAlongViewDirection(aa),n.copy(sa,ma.viewForward),X.directionToHeadingTilt(aa,ma.eye,sa,ma.up,Da),qa.position=new ra(ea.position),qa.heading=null!=ea.heading?ea.heading:Da.heading,qa.tilt=null!=ea.tilt?ea.tilt:Da.tilt,aa=D(aa,null,qa,ua),f(aa)):f(yield a(aa,ea,qa,ma,ua))});return k.apply(this,arguments)}function x(aa,ea){return null==ea.scale&&
null!=ea.zoom?X.zoomToScale(aa,ea.zoom):ea.scale}function ba(aa,ea){let ma=!1;null!=ea.heading?(aa.heading=ea.heading,ma=!0):null!=ea.rotation&&(aa.heading=ta(ea.rotation),ma=!0);null!=ea.tilt&&(aa.tilt=ea.tilt,ma=!0);null!=ea.fov&&(aa.fov=ea.fov);return ma}function D(aa,ea,ma,qa){const ua=aa.spatialReference||r.WGS84;ea=F.isSome(ea)?ea:X.externalToInternal(aa,ma);if(F.isNone(ea))return qa;qa.targetGeometry=g.projectVectorToPoint(ea.center,aa.renderSpatialReference,ua);qa.scale=X.computeScale(aa,
ea);qa.rotation=oa(ma.heading);qa.camera=ma;return qa}function H(aa,ea,ma){if(ea){if(!t.canProject(ea.spatialReference,aa.spatialReference))throw new U("viewpointutils:incompatible-spatialreference",`Spatial reference (${ea.spatialReference?ea.spatialReference.wkid:"unknown"}) is incompatible with the view (${aa.spatialReference.wkid})`,{geometry:ea});var qa=[];if(!ea.hasZ&&aa.basemapTerrain){switch(ea.type){case "point":var ua=ea;break;case "multipoint":case "polyline":ua=ea.extent.center;break;
case "mesh":ua=ea.origin;break;case "extent":ua=ea.center;break;case "polygon":ua=ea.centroid}ua&&t.canProject(ua,aa.basemapTerrain.spatialReference)?z[2]=F.unwrapOr(ha.getElevationAtPoint(aa.elevationProvider,ua),0):z[2]=0}(0,La[ea.type])(ea,Aa=>{qa.push(Aa[0],Aa[1],Aa[2])},z);var ya=qa.length/3;if(0!==ya&&(ua=Array(qa.length),g.projectBuffer(qa,ea.spatialReference,0,ua,aa.spatialReference,0,ya)))for(ea.hasZ&&(ma.hasZ=!0),aa=0;aa<ua.length;aa+=3)ea.hasZ?(z[0]=ua[aa+0],z[1]=ua[aa+1],z[2]=ua[aa+2]):
(z[0]=ua[aa+0],z[1]=ua[aa+1]),h.expandWithVec3(ma.boundingBox,z)}}function P(aa,ea,ma,qa){return O.apply(this,arguments)}function O(){O=d._asyncToGenerator(function*(aa,ea,ma,qa){const ua=yield K.result(aa.whenViewForGraphic(ea));if(!1!==ua.ok&&!F.isNone(ua.value)&&"whenGraphicBounds"in ua.value)if(ma=yield K.result(ua.value.whenGraphicBounds(ea,{minDemResolution:ma})),!1===ma.ok)H(aa,ea.geometry,qa);else{var {screenSpaceObjects:ya,boundingBox:Aa}=ma.value;h.expandWithAABB(qa.boundingBox,Aa);ya&&
ya.forEach(Ga=>{qa.screenSpaceObjects.push(Ga)});isFinite(Aa[2])&&(qa.hasZ=!0)}else H(aa,ea.geometry,qa)});return O.apply(this,arguments)}function ja(aa,ea,ma,qa){return B.apply(this,arguments)}function B(){B=d._asyncToGenerator(function*(aa,ea,ma,qa){if(Array.isArray(ea)&&2===ea.length){const ua=ea[0],ya=ea[1];if("number"===typeof ua&&"number"===typeof ya){Ca.x=ua;Ca.y=ya;Ca.z=void 0;Ca.spatialReference=aa.spatialReference.isGeographic?aa.spatialReference:r.WGS84;H(aa,Ca,qa);return}}ea&&"function"===
typeof ea.map?yield L.eachAlways(ea.map(ua=>ja(aa,ua,ma,qa))):ea instanceof pa?H(aa,ea,qa):ea instanceof w&&(yield P(aa,ea,ma,qa))});return B.apply(this,arguments)}function J(aa,ea,ma,qa,ua){return fa.apply(this,arguments)}function fa(){fa=d._asyncToGenerator(function*(aa,ea,ma,qa,ua){if(F.isSome(ea.camera))return na(aa,ea.camera,ua);ua.scale=ea.scale;ua.rotation=ea.rotation;ua.targetGeometry=F.isSome(ea.targetGeometry)?ea.targetGeometry.clone():null;ua.camera=null;null!=ma.heading?ua.rotation=oa(ma.heading):
null!=ma.rotation&&(ua.rotation=ma.rotation);ea=x(aa,ma);null!=ea&&(ua.scale=ea);qa=new X.AsyncContext(qa);ca(aa,ua,ma.tilt,qa);ua.camera=yield qa.resolver.promise;return ua});return fa.apply(this,arguments)}function na(aa,ea,ma){const qa=aa.spatialReference,ua=ea.position.spatialReference;if(!t.canProject(ua,qa))return null;ea=ea.clone();ea.fov=aa.camera.fov;ua.equals(qa)||(ea.position=t.project(ea.position,qa));return D(aa,null,ea,ma)}function va(aa,ea,ma,qa,ua,ya){return Y.apply(this,arguments)}
function Y(){Y=d._asyncToGenerator(function*(aa,ea,ma,qa,ua,ya){if(F.isNone(ma))throw new U("createfromcenter","invalid point");ya.targetGeometry=ma.clone();const Aa=I.cameraOnContentAlongViewDirection(aa);if(ea.position)return ma=ya.targetGeometry,ua=aa.renderSpatialReference,g.projectPointToVector(ea.position,wa,ua),g.projectPointToVector(ma,Ba,ua),ya.targetGeometry=new ra(ma),qa.position=new ra(ea.position),n.subtract(sa,Ba,wa),X.directionToHeadingTilt(aa,wa,sa,Aa.up,qa),ya.scale=X.distanceToScale(aa,
n.distance(wa,Ba),ya.targetGeometry.latitude),ya.rotation=oa(qa.heading),ya.camera=qa,ya;if(ea.zoomFactor){var Ga=Aa.distance/ea.zoomFactor;const Na=n.scale(z,Aa.viewForward,-Ga);Aa.eye=n.add(z,Aa.center,Na);ya.scale=X.distanceToScale(aa,Ga,ma.latitude)}X.internalToExternal(aa,Aa,qa);Ga=ba(qa,ea)?0:1;ea.zoomFactor||(ya.scale=x(aa,ea),null==ya.scale&&(g.projectPointToVector(ma,z,aa.renderSpatialReference),l.intersectsPoint(Aa.frustum,z)?ya.scale=X.distanceToScale(aa,n.distance(Aa.eye,z),ma.latitude):
ya.scale=X.computeScale(aa,Aa)),ea=new X.AsyncContext(ua),X.fromCenterScale(aa,ya.targetGeometry,ya.scale,qa,Ga,ea),ya.camera=yield ea.resolver.promise);return ya});return Y.apply(this,arguments)}function a(aa,ea,ma,qa,ua){return e.apply(this,arguments)}function e(){e=d._asyncToGenerator(function*(aa,ea,ma,qa,ua){var ya=I.cameraOnContentAlongViewDirection(aa);ya=g.projectVectorToPoint(ya.center,aa.renderSpatialReference,aa.spatialReference);return va(aa,ea,ya,ma,qa,ua)});return e.apply(this,arguments)}
function y(aa,ea,ma,qa,ua,ya){return E.apply(this,arguments)}function E(){E=d._asyncToGenerator(function*(aa,ea,ma,qa,ua,ya){ya.targetGeometry=ma.clone();const Aa=I.cameraOnContentAlongViewDirection(aa);X.internalToExternal(aa,Aa,qa);ea=ba(qa,ea)?0:1;ua=new X.AsyncContext(ua);X.fromExtent(aa,ma,qa.heading,qa.tilt,ea,ua);ya.camera=yield ua.resolver.promise;return ya});return E.apply(this,arguments)}function Q(aa,ea,ma,qa,ua,ya,Aa,Ga){return C.apply(this,arguments)}function C(){C=d._asyncToGenerator(function*(aa,
ea,ma,qa,ua,ya,Aa,Ga){Ga.targetGeometry=ma.clone();const Na=I.cameraOnContentAlongViewDirection(aa);var Ma=0;ma.hasZ?Ma=ma.z:aa.basemapTerrain&&(Ma=F.unwrap(ha.getElevationAtPoint(aa.elevationProvider,ma)));n.set(z,ma.x,ma.y,Ma);g.computeLinearTransformation(aa.spatialReference,z,M,aa.renderSpatialReference);G.fromMat4(T,M);G.transpose(T,T);h.empty(ia);ma=[[0,1,2],[3,1,2],[0,4,2],[3,4,2],[0,1,5],[3,1,5],[0,4,5],[3,4,5]];for(var Ka=0;Ka<ma.length;Ka++){const Ja=ma[Ka];let Ia=qa[Ja[2]];isFinite(Ia)||
(Ia=Ma);n.set(z,qa[Ja[0]],qa[Ja[1]],Ia);g.projectVectorToVector(z,aa.spatialReference,z,aa.renderSpatialReference);h.expandWithVec3(ia,n.transformMat3(z,z,T))}qa=h.width(ia);Ma=h.height(ia);ma=h.depth(ia);Ka=1/Math.tan(Na.fovY/2);ua=Math.max(.5*Math.sqrt(qa*qa+ma*ma)*Math.max(Ka,1/Math.tan(Na.fovX/2))+.5*Ma,.5*Ma*Ka+.5*Math.max(qa,ma))/ua;X.internalToExternal(aa,Na,ya);ea=ba(ya,ea)?0:1;Ga.scale=X.distanceToScale(aa,ua,Ga.targetGeometry.latitude);Aa=new X.AsyncContext(Aa);X.fromCenterScale(aa,Ga.targetGeometry,
Ga.scale,ya,ea,Aa);Ga.camera=yield Aa.resolver.promise;return Ga});return C.apply(this,arguments)}function f(aa){aa&&F.isSome(aa.camera)&&(aa.rotation=oa(aa.camera.heading));return aa}const z=c.create(),M=q.create(),T=V.create(),ia=h.create(),la=p.create(),sa=c.create(),wa=c.create(),Ba=c.create(),Da={heading:0,tilt:0},Ca=new ra,La={point(aa,ea,ma){ma[0]=aa.x;ma[1]=aa.y;aa.hasZ&&(ma[2]=aa.z);ea(ma)},polygon(aa,ea,ma){const qa=aa.hasZ;for(let ua=0;ua<aa.rings.length;ua++){const ya=aa.rings[ua];for(let Aa=
0;Aa<ya.length;Aa++)ma[0]=ya[Aa][0],ma[1]=ya[Aa][1],qa&&(ma[2]=ya[Aa][2]),ea(ma)}},polyline(aa,ea,ma){const qa=aa.hasZ;for(let ua=0;ua<aa.paths.length;ua++){const ya=aa.paths[ua];for(let Aa=0;Aa<ya.length;Aa++)ma[0]=ya[Aa][0],ma[1]=ya[Aa][1],qa&&(ma[2]=ya[Aa][2]),ea(ma)}},multipoint(aa,ea,ma){const qa=aa.points;aa=aa.hasZ;for(let ua=0;ua<qa.length;ua++)ma[0]=qa[ua][0],ma[1]=qa[ua][1],aa&&(ma[2]=qa[ua][2]),ea(ma)},extent(aa,ea,ma){aa.hasZ?(ea(n.set(ma,aa.xmin,aa.ymin,aa.zmin)),ea(n.set(ma,aa.xmax,
aa.ymin,aa.zmin)),ea(n.set(ma,aa.xmin,aa.ymax,aa.zmin)),ea(n.set(ma,aa.xmax,aa.ymax,aa.zmin)),ea(n.set(ma,aa.xmin,aa.ymin,aa.zmax)),ea(n.set(ma,aa.xmax,aa.ymin,aa.zmax)),ea(n.set(ma,aa.xmin,aa.ymax,aa.zmax)),ea(n.set(ma,aa.xmax,aa.ymax,aa.zmax))):(ea(n.set(ma,aa.xmin,aa.ymin,ma[2])),ea(n.set(ma,aa.xmax,aa.ymin,ma[2])),ea(n.set(ma,aa.xmin,aa.ymax,ma[2])),ea(n.set(ma,aa.xmax,aa.ymax,ma[2])))},mesh(aa,ea,ma){if(aa=aa.vertexAttributes&&aa.vertexAttributes.position)for(let qa=0;qa<aa.length;qa+=3)ea(n.set(ma,
aa[qa+0],aa[qa+1],aa[qa+2]))}};b.create=function(aa,ea,ma){return k.apply(this,arguments)};b.fromCamera=function(aa,ea,ma=null){F.isNone(ma)&&(ma=new A);return D(aa,null,ea.clone(),ma)};b.headingToRotation=oa;b.rotationToHeading=ta;b.toCamera=ca;Object.defineProperty(b,"__esModule",{value:!0})})},"esri/chunks/mat3":function(){define(["exports","./common"],function(b,d){function m(k,x){k[0]=x[0];k[1]=x[1];k[2]=x[2];k[3]=x[4];k[4]=x[5];k[5]=x[6];k[6]=x[8];k[7]=x[9];k[8]=x[10];return k}function u(k,
x){k[0]=x[0];k[1]=x[1];k[2]=x[2];k[3]=x[3];k[4]=x[4];k[5]=x[5];k[6]=x[6];k[7]=x[7];k[8]=x[8];return k}function w(k,x,ba,D,H,P,O,ja,B,J){k[0]=x;k[1]=ba;k[2]=D;k[3]=H;k[4]=P;k[5]=O;k[6]=ja;k[7]=B;k[8]=J;return k}function A(k){k[0]=1;k[1]=0;k[2]=0;k[3]=0;k[4]=1;k[5]=0;k[6]=0;k[7]=0;k[8]=1;return k}function K(k,x){if(k===x){const ba=x[1],D=x[2],H=x[5];k[1]=x[3];k[2]=x[6];k[3]=ba;k[5]=x[7];k[6]=D;k[7]=H}else k[0]=x[0],k[1]=x[3],k[2]=x[6],k[3]=x[1],k[4]=x[4],k[5]=x[7],k[6]=x[2],k[7]=x[5],k[8]=x[8];return k}
function v(k,x){const ba=x[0],D=x[1],H=x[2],P=x[3],O=x[4],ja=x[5],B=x[6],J=x[7];x=x[8];const fa=x*O-ja*J,na=-x*P+ja*B,va=J*P-O*B;let Y=ba*fa+D*na+H*va;if(!Y)return null;Y=1/Y;k[0]=fa*Y;k[1]=(-x*D+H*J)*Y;k[2]=(ja*D-H*O)*Y;k[3]=na*Y;k[4]=(x*ba-H*B)*Y;k[5]=(-ja*ba+H*P)*Y;k[6]=va*Y;k[7]=(-J*ba+D*B)*Y;k[8]=(O*ba-D*P)*Y;return k}function U(k,x){const ba=x[0],D=x[1],H=x[2],P=x[3],O=x[4],ja=x[5],B=x[6],J=x[7];x=x[8];k[0]=O*x-ja*J;k[1]=H*J-D*x;k[2]=D*ja-H*O;k[3]=ja*B-P*x;k[4]=ba*x-H*B;k[5]=H*P-ba*ja;k[6]=
P*J-O*B;k[7]=D*B-ba*J;k[8]=ba*O-D*P;return k}function F(k){const x=k[3],ba=k[4],D=k[5],H=k[6],P=k[7],O=k[8];return k[0]*(O*ba-D*P)+k[1]*(-O*x+D*H)+k[2]*(P*x-ba*H)}function L(k,x,ba){const D=x[0],H=x[1],P=x[2],O=x[3],ja=x[4],B=x[5],J=x[6],fa=x[7];x=x[8];const na=ba[0],va=ba[1],Y=ba[2],a=ba[3],e=ba[4],y=ba[5],E=ba[6],Q=ba[7];ba=ba[8];k[0]=na*D+va*O+Y*J;k[1]=na*H+va*ja+Y*fa;k[2]=na*P+va*B+Y*x;k[3]=a*D+e*O+y*J;k[4]=a*H+e*ja+y*fa;k[5]=a*P+e*B+y*x;k[6]=E*D+Q*O+ba*J;k[7]=E*H+Q*ja+ba*fa;k[8]=E*P+Q*B+ba*x;
return k}function G(k,x,ba){const D=x[0],H=x[1],P=x[2],O=x[3],ja=x[4],B=x[5],J=x[6],fa=x[7];x=x[8];const na=ba[0];ba=ba[1];k[0]=D;k[1]=H;k[2]=P;k[3]=O;k[4]=ja;k[5]=B;k[6]=na*D+ba*O+J;k[7]=na*H+ba*ja+fa;k[8]=na*P+ba*B+x;return k}function V(k,x,ba){const D=x[0],H=x[1],P=x[2],O=x[3],ja=x[4],B=x[5],J=x[6],fa=x[7];x=x[8];const na=Math.sin(ba);ba=Math.cos(ba);k[0]=ba*D+na*O;k[1]=ba*H+na*ja;k[2]=ba*P+na*B;k[3]=ba*O-na*D;k[4]=ba*ja-na*H;k[5]=ba*B-na*P;k[6]=J;k[7]=fa;k[8]=x;return k}function q(k,x,ba){const D=
ba[0],H=ba[1];ba=ba[2];k[0]=D*x[0];k[1]=D*x[1];k[2]=D*x[2];k[3]=H*x[3];k[4]=H*x[4];k[5]=H*x[5];k[6]=ba*x[6];k[7]=ba*x[7];k[8]=ba*x[8];return k}function n(k,x,ba){const D=ba[0];ba=ba[1];k[0]=D*x[0];k[1]=D*x[1];k[2]=D*x[2];k[3]=ba*x[3];k[4]=ba*x[4];k[5]=ba*x[5];return k}function c(k,x){k[0]=1;k[1]=0;k[2]=0;k[3]=0;k[4]=1;k[5]=0;k[6]=x[0];k[7]=x[1];k[8]=1;return k}function g(k,x){const ba=Math.sin(x);x=Math.cos(x);k[0]=x;k[1]=ba;k[2]=0;k[3]=-ba;k[4]=x;k[5]=0;k[6]=0;k[7]=0;k[8]=1;return k}function h(k,
x){k[0]=x[0];k[1]=0;k[2]=0;k[3]=0;k[4]=x[1];k[5]=0;k[6]=0;k[7]=0;k[8]=1;return k}function p(k,x){k[0]=x[0];k[1]=x[1];k[2]=0;k[3]=x[2];k[4]=x[3];k[5]=0;k[6]=x[4];k[7]=x[5];k[8]=1;return k}function l(k,x){var ba=x[0],D=x[1],H=x[2];x=x[3];var P=ba+ba,O=D+D;const ja=H+H;ba*=P;const B=D*P;D*=O;const J=H*P,fa=H*O;H*=ja;P*=x;O*=x;x*=ja;k[0]=1-D-H;k[3]=B-x;k[6]=J+O;k[1]=B+x;k[4]=1-ba-H;k[7]=fa-P;k[2]=J-O;k[5]=fa+P;k[8]=1-ba-D;return k}function t(k,x){const ba=x[0],D=x[1],H=x[2],P=x[4],O=x[5],ja=x[6],B=x[8],
J=x[9];x=x[10];const fa=x*O-ja*J,na=-x*P+ja*B,va=J*P-O*B;var Y=ba*fa+D*na+H*va;if(!Y)return null;Y=1/Y;k[0]=fa*Y;k[1]=(-x*D+H*J)*Y;k[2]=(ja*D-H*O)*Y;k[3]=na*Y;k[4]=(x*ba-H*B)*Y;k[5]=(-ja*ba+H*P)*Y;k[6]=va*Y;k[7]=(-J*ba+D*B)*Y;k[8]=(O*ba-D*P)*Y;return k}function I(k,x){const ba=x[0],D=x[1],H=x[2],P=x[3],O=x[4],ja=x[5],B=x[6],J=x[7];var fa=x[8],na=x[9],va=x[10],Y=x[11];const a=x[12],e=x[13],y=x[14];x=x[15];const E=ba*ja-D*O,Q=ba*B-H*O,C=ba*J-P*O,f=D*B-H*ja,z=D*J-P*ja,M=H*J-P*B,T=fa*e-na*a,ia=fa*y-va*
a;fa=fa*x-Y*a;const la=na*y-va*e;na=na*x-Y*e;va=va*x-Y*y;Y=E*va-Q*na+C*la+f*fa-z*ia+M*T;if(!Y)return null;Y=1/Y;k[0]=(ja*va-B*na+J*la)*Y;k[1]=(B*fa-O*va-J*ia)*Y;k[2]=(O*na-ja*fa+J*T)*Y;k[3]=(H*na-D*va-P*la)*Y;k[4]=(ba*va-H*fa+P*ia)*Y;k[5]=(D*fa-ba*na-P*T)*Y;k[6]=(e*M-y*z+x*f)*Y;k[7]=(y*C-a*M-x*Q)*Y;k[8]=(a*z-e*C+x*E)*Y;return k}function X(k,x,ba){k[0]=2/x;k[1]=0;k[2]=0;k[3]=0;k[4]=-2/ba;k[5]=0;k[6]=-1;k[7]=1;k[8]=1;return k}function ha(k){return"mat3("+k[0]+", "+k[1]+", "+k[2]+", "+k[3]+", "+k[4]+
", "+k[5]+", "+k[6]+", "+k[7]+", "+k[8]+")"}function N(k){return Math.sqrt(k[0]**2+k[1]**2+k[2]**2+k[3]**2+k[4]**2+k[5]**2+k[6]**2+k[7]**2+k[8]**2)}function r(k,x,ba){k[0]=x[0]+ba[0];k[1]=x[1]+ba[1];k[2]=x[2]+ba[2];k[3]=x[3]+ba[3];k[4]=x[4]+ba[4];k[5]=x[5]+ba[5];k[6]=x[6]+ba[6];k[7]=x[7]+ba[7];k[8]=x[8]+ba[8];return k}function da(k,x,ba){k[0]=x[0]-ba[0];k[1]=x[1]-ba[1];k[2]=x[2]-ba[2];k[3]=x[3]-ba[3];k[4]=x[4]-ba[4];k[5]=x[5]-ba[5];k[6]=x[6]-ba[6];k[7]=x[7]-ba[7];k[8]=x[8]-ba[8];return k}function pa(k,
x,ba){k[0]=x[0]*ba;k[1]=x[1]*ba;k[2]=x[2]*ba;k[3]=x[3]*ba;k[4]=x[4]*ba;k[5]=x[5]*ba;k[6]=x[6]*ba;k[7]=x[7]*ba;k[8]=x[8]*ba;return k}function ra(k,x,ba,D){k[0]=x[0]+ba[0]*D;k[1]=x[1]+ba[1]*D;k[2]=x[2]+ba[2]*D;k[3]=x[3]+ba[3]*D;k[4]=x[4]+ba[4]*D;k[5]=x[5]+ba[5]*D;k[6]=x[6]+ba[6]*D;k[7]=x[7]+ba[7]*D;k[8]=x[8]+ba[8]*D;return k}function ta(k,x){return k[0]===x[0]&&k[1]===x[1]&&k[2]===x[2]&&k[3]===x[3]&&k[4]===x[4]&&k[5]===x[5]&&k[6]===x[6]&&k[7]===x[7]&&k[8]===x[8]}function oa(k,x){const ba=k[0],D=k[1],
H=k[2],P=k[3],O=k[4],ja=k[5],B=k[6],J=k[7];k=k[8];const fa=x[0],na=x[1],va=x[2],Y=x[3],a=x[4],e=x[5],y=x[6],E=x[7];x=x[8];return Math.abs(ba-fa)<=d.EPSILON*Math.max(1,Math.abs(ba),Math.abs(fa))&&Math.abs(D-na)<=d.EPSILON*Math.max(1,Math.abs(D),Math.abs(na))&&Math.abs(H-va)<=d.EPSILON*Math.max(1,Math.abs(H),Math.abs(va))&&Math.abs(P-Y)<=d.EPSILON*Math.max(1,Math.abs(P),Math.abs(Y))&&Math.abs(O-a)<=d.EPSILON*Math.max(1,Math.abs(O),Math.abs(a))&&Math.abs(ja-e)<=d.EPSILON*Math.max(1,Math.abs(ja),Math.abs(e))&&
Math.abs(B-y)<=d.EPSILON*Math.max(1,Math.abs(B),Math.abs(y))&&Math.abs(J-E)<=d.EPSILON*Math.max(1,Math.abs(J),Math.abs(E))&&Math.abs(k-x)<=d.EPSILON*Math.max(1,Math.abs(k),Math.abs(x))}function R(k){const x=d.EPSILON,ba=k[0],D=k[1],H=k[2],P=k[3],O=k[4],ja=k[5],B=k[6],J=k[7];k=k[8];return Math.abs(1-(ba*ba+P*P+B*B))<=x&&Math.abs(1-(D*D+O*O+J*J))<=x&&Math.abs(1-(H*H+ja*ja+k*k))<=x}var ca=Object.freeze({__proto__:null,fromMat4:m,copy:u,set:w,identity:A,transpose:K,invert:v,adjoint:U,determinant:F,multiply:L,
translate:G,rotate:V,scale:q,scaleByVec2:n,fromTranslation:c,fromRotation:g,fromScaling:h,fromMat2d:p,fromQuat:l,normalFromMat4Legacy:t,normalFromMat4:I,projection:X,str:ha,frob:N,add:r,subtract:da,multiplyScalar:pa,multiplyScalarAndAdd:ra,exactEquals:ta,equals:oa,isOrthoNormal:R,mul:L,sub:da});b.add=r;b.adjoint=U;b.copy=u;b.determinant=F;b.equals=oa;b.exactEquals=ta;b.frob=N;b.fromMat2d=p;b.fromMat4=m;b.fromQuat=l;b.fromRotation=g;b.fromScaling=h;b.fromTranslation=c;b.identity=A;b.invert=v;b.isOrthoNormal=
R;b.mat3=ca;b.mul=L;b.multiply=L;b.multiplyScalar=pa;b.multiplyScalarAndAdd=ra;b.normalFromMat4=I;b.normalFromMat4Legacy=t;b.projection=X;b.rotate=V;b.scale=q;b.scaleByVec2=n;b.set=w;b.str=ha;b.sub=da;b.subtract=da;b.translate=G;b.transpose=K})},"esri/chunks/mat3f64":function(){define(["exports"],function(b){function d(){return[1,0,0,0,1,0,0,0,1]}function m(K){return[K[0],K[1],K[2],K[3],K[4],K[5],K[6],K[7],K[8]]}function u(K,v,U,F,L,G,V,q,n){return[K,v,U,F,L,G,V,q,n]}function w(K,v){return new Float64Array(K,
v,9)}var A=Object.freeze({__proto__:null,create:d,clone:m,fromValues:u,createView:w});b.clone=m;b.create=d;b.createView=w;b.fromValues=u;b.mat3f64=A})},"esri/chunks/mat4f64":function(){define(["exports"],function(b){function d(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function m(v){return[v[0],v[1],v[2],v[3],v[4],v[5],v[6],v[7],v[8],v[9],v[10],v[11],v[12],v[13],v[14],v[15]]}function u(v,U,F,L,G,V,q,n,c,g,h,p,l,t,I,X){return[v,U,F,L,G,V,q,n,c,g,h,p,l,t,I,X]}function w(v,U){return new Float64Array(v,
U,16)}const A=d();var K=Object.freeze({__proto__:null,create:d,clone:m,fromValues:u,createView:w,IDENTITY:A});b.IDENTITY=A;b.clone=m;b.create=d;b.createView=w;b.fromValues=u;b.mat4f64=K})},"esri/geometry/support/aaBoundingBox":function(){define(["exports","../../core/maybe","../Extent","./aaBoundingRect"],function(b,d,m,u){function w(c=q){return[c[0],c[1],c[2],c[3],c[4],c[5]]}function A(c,g,h,p,l,t,I=w()){I[0]=c;I[1]=g;I[2]=h;I[3]=p;I[4]=l;I[5]=t;return I}function K(c){return c[0]>=c[3]?0:c[3]-c[0]}
function v(c){return c[1]>=c[4]?0:c[4]-c[1]}function U(c){return c[2]>=c[5]?0:c[5]-c[2]}function F(c,g){return Math.max(g[0],c[0])<=Math.min(g[3],c[3])&&Math.max(g[1],c[1])<=Math.min(g[4],c[4])&&Math.max(g[2],c[2])<=Math.min(g[5],c[5])}function L(c,g){c[0]=g[0];c[1]=g[1];c[2]=g[2];c[3]=g[3];c[4]=g[4];c[5]=g[5];return c}function G(c){return 6===c.length}const V=[Infinity,Infinity,Infinity,-Infinity,-Infinity,-Infinity],q=[0,0,0,0,0,0],n=w();b.NEGATIVE_INFINITY=V;b.POSITIVE_INFINITY=[-Infinity,-Infinity,
-Infinity,Infinity,Infinity,Infinity];b.ZERO=q;b.allFinite=function(c){for(let g=0;6>g;g++)if(!isFinite(c[g]))return!1;return!0};b.center=function(c,g=[0,0,0]){g[0]=c[0]+K(c)/2;g[1]=c[1]+v(c)/2;g[2]=c[2]+U(c)/2;return g};b.contains=function(c,g){return g[0]>=c[0]&&g[1]>=c[1]&&g[2]>=c[2]&&g[3]<=c[3]&&g[4]<=c[4]&&g[5]<=c[5]};b.containsPoint=function(c,g){return g[0]>=c[0]&&g[1]>=c[1]&&g[2]>=c[2]&&g[0]<=c[3]&&g[1]<=c[4]&&g[2]<=c[5]};b.containsPointWithMargin=function(c,g,h){return g[0]>=c[0]-h&&g[1]>=
c[1]-h&&g[2]>=c[2]-h&&g[0]<=c[3]+h&&g[1]<=c[4]+h&&g[2]<=c[5]+h};b.create=w;b.depth=v;b.diameter=function(c){const g=K(c),h=U(c);c=v(c);return Math.sqrt(g*g+h*h+c*c)};b.empty=function(c){return c?L(c,V):w(V)};b.equals=function(c,g,h){if(d.isNone(c)||d.isNone(g))return c===g;if(!G(c)||!G(g))return!1;if(h)for(let p=0;p<c.length;p++){if(!h(c[p],g[p]))return!1}else for(h=0;h<c.length;h++)if(c[h]!==g[h])return!1;return!0};b.expandWithAABB=function(c,g){c[0]=Math.min(c[0],g[0]);c[1]=Math.min(c[1],g[1]);
c[2]=Math.min(c[2],g[2]);c[3]=Math.max(c[3],g[3]);c[4]=Math.max(c[4],g[4]);c[5]=Math.max(c[5],g[5])};b.expandWithBuffer=function(c,g,h=0,p=g.length/3){let l=c[0],t=c[1],I=c[2],X=c[3],ha=c[4],N=c[5];for(let r=0;r<p;r++)l=Math.min(l,g[h+3*r]),t=Math.min(t,g[h+3*r+1]),I=Math.min(I,g[h+3*r+2]),X=Math.max(X,g[h+3*r]),ha=Math.max(ha,g[h+3*r+1]),N=Math.max(N,g[h+3*r+2]);c[0]=l;c[1]=t;c[2]=I;c[3]=X;c[4]=ha;c[5]=N};b.expandWithNestedArray=function(c,g,h){const p=g.length;let l=c[0],t=c[1],I=c[2],X=c[3],ha=
c[4],N=c[5];if(h)for(h=0;h<p;h++){var r=g[h];l=Math.min(l,r[0]);t=Math.min(t,r[1]);I=Math.min(I,r[2]);X=Math.max(X,r[0]);ha=Math.max(ha,r[1]);N=Math.max(N,r[2])}else for(h=0;h<p;h++)r=g[h],l=Math.min(l,r[0]),t=Math.min(t,r[1]),X=Math.max(X,r[0]),ha=Math.max(ha,r[1]);c[0]=l;c[1]=t;c[2]=I;c[3]=X;c[4]=ha;c[5]=N};b.expandWithOffset=function(c,g,h,p){c[0]=Math.min(c[0],c[0]+g);c[3]=Math.max(c[3],c[3]+g);c[1]=Math.min(c[1],c[1]+h);c[4]=Math.max(c[4],c[4]+h);c[2]=Math.min(c[2],c[2]+p);c[5]=Math.max(c[5],
c[5]+p)};b.expandWithRect=function(c,g){c[0]=Math.min(c[0],g[0]);c[1]=Math.min(c[1],g[1]);c[3]=Math.max(c[3],g[2]);c[4]=Math.max(c[4],g[3])};b.expandWithVec3=function(c,g){c[0]=Math.min(c[0],g[0]);c[1]=Math.min(c[1],g[1]);c[2]=Math.min(c[2],g[2]);c[3]=Math.max(c[3],g[0]);c[4]=Math.max(c[4],g[1]);c[5]=Math.max(c[5],g[2])};b.fromExtent=function(c,g=w()){g[0]=c.xmin;g[1]=c.ymin;g[2]=c.zmin;g[3]=c.xmax;g[4]=c.ymax;g[5]=c.zmax;return g};b.fromMinMax=function(c,g,h=w()){h[0]=c[0];h[1]=c[1];h[2]=c[2];h[3]=
g[0];h[4]=g[1];h[5]=g[2];return h};b.fromRect=function(c,g){c[0]=g[0];c[1]=g[1];c[2]=Number.NEGATIVE_INFINITY;c[3]=g[2];c[4]=g[3];c[5]=Number.POSITIVE_INFINITY;return c};b.fromValues=A;b.getMax=function(c,g){g[0]=c[3];g[1]=c[4];g[2]=c[5];return g};b.getMin=function(c,g){g[0]=c[0];g[1]=c[1];g[2]=c[2];return g};b.height=U;b.intersects=F;b.intersectsClippingArea=function(c,g){return d.isNone(g)?!0:F(c,g)};b.is=G;b.isPoint=function(c){return 0===K(c)&&0===v(c)&&0===U(c)};b.maximumDimension=function(c){return Math.max(K(c),
U(c),v(c))};b.offset=function(c,g,h,p,l=c){l[0]=c[0]+g;l[1]=c[1]+h;l[2]=c[2]+p;l[3]=c[3]+g;l[4]=c[4]+h;l[5]=c[5]+p;return l};b.scale=function(c,g,h=c){const p=c[0]+K(c)/2,l=c[1]+v(c)/2,t=c[2]+U(c)/2;h[0]=p+(c[0]-p)*g;h[1]=l+(c[1]-l)*g;h[2]=t+(c[2]-t)*g;h[3]=p+(c[3]-p)*g;h[4]=l+(c[4]-l)*g;h[5]=t+(c[5]-t)*g;return h};b.set=L;b.setMax=function(c,g,h=c){h[3]=g[0];h[4]=g[1];h[5]=g[2];h!==c&&(h[0]=c[0],h[1]=c[1],h[2]=c[2]);return c};b.setMin=function(c,g,h=c){h[0]=g[0];h[1]=g[1];h[2]=g[2];h!==c&&(h[3]=
c[3],h[4]=c[4],h[5]=c[5]);return h};b.size=function(c,g=[0,0,0]){g[0]=K(c);g[1]=v(c);g[2]=U(c);return g};b.toExtent=function(c,g){return isFinite(c[2])||isFinite(c[5])?new m({xmin:c[0],xmax:c[3],ymin:c[1],ymax:c[4],zmin:c[2],zmax:c[5],spatialReference:g}):new m({xmin:c[0],xmax:c[3],ymin:c[1],ymax:c[4],spatialReference:g})};b.toRect=function(c,g){g||(g=u.create());g[0]=c[0];g[1]=c[1];g[2]=c[3];g[3]=c[4];return g};b.width=K;b.wrap=function(c,g,h,p,l,t){return A(c,g,h,p,l,t,n)};Object.defineProperty(b,
"__esModule",{value:!0})})},"esri/geometry/support/frustum":function(){define("exports ../../core/ObjectStack ../../chunks/mat4 ../../chunks/vec3 ../../chunks/vec3f64 ../../chunks/vec4 ../../chunks/vec4f64 ./clipRay ./plane ./vectorStacks".split(" "),function(b,d,m,u,w,A,K,v,U,F){function L(h){return h?[U.create(h[0]),U.create(h[1]),U.create(h[2]),U.create(h[3]),U.create(h[4]),U.create(h[5])]:[U.create(),U.create(),U.create(),U.create(),U.create(),U.create()]}function G(){return[w.create(),w.create(),
w.create(),w.create(),w.create(),w.create(),w.create(),w.create()]}function V(h,p){U.fromPoints(p[4],p[0],p[3],h[0]);U.fromPoints(p[1],p[5],p[6],h[1]);U.fromPoints(p[4],p[5],p[1],h[2]);U.fromPoints(p[3],p[2],p[6],h[3]);U.fromPoints(p[0],p[1],p[2],h[4]);U.fromPoints(p[5],p[4],p[7],h[5])}function q(h,p){for(let l=0;6>l;l++)if(!U.clip(h[l],p))return!1;return!0}const n=[K.fromValues(-1,-1,-1,1),K.fromValues(1,-1,-1,1),K.fromValues(1,1,-1,1),K.fromValues(-1,1,-1,1),K.fromValues(-1,-1,1,1),K.fromValues(1,
-1,1,1),K.fromValues(1,1,1,1),K.fromValues(-1,1,1,1)],c=new d.ObjectStack(v.create),g=G();b.computePlanes=V;b.copy=function(h,p=L()){for(let l=0;6>l;l++)U.copy(h[l],p[l])};b.create=L;b.createPoints=G;b.fromMatrix=function(h,p,l,t=g){h=m.multiply(F.sm4d.get(),p,h);m.invert(h,h);for(p=0;8>p;++p){const I=A.transformMat4(F.sv4d.get(),n[p],h);u.set(t[p],I[0]/I[3],I[1]/I[3],I[2]/I[3])}V(l,t)};b.intersectClipRay=function(h,p){for(let l=0;6>l;l++)if(!U.clipInfinite(h[l],p))return!1;return!0};b.intersectsAABB=
function(h,p){for(let l=0;6>l;l++)if(U.isAABBFullyInside(h[l],p))return!1;return!0};b.intersectsLineSegment=function(h,p,l){return q(h,v.fromLineSegmentAndDirection(p,l,c.get()))};b.intersectsPoint=function(h,p){for(let l=0;6>l;l++)if(0<U.signedDistance(h[l],p))return!1;return!0};b.intersectsRay=function(h,p){return q(h,v.fromRay(p,c.get()))};b.intersectsSphere=function(h,p){for(let l=0;6>l;l++)if(U.isSphereFullyInside(h[l],p))return!1;return!0};b.planePointIndices={bottom:[5,1,0,4],near:[0,1,2,3],
far:[5,4,7,6],right:[1,5,6,2],left:[4,0,3,7],top:[7,3,2,6]};Object.defineProperty(b,"__esModule",{value:!0})})},"esri/core/ObjectStack":function(){define(["exports","./maybe","./nextTick"],function(b,d,m){let u=function(){function w(K){this.allocator=K;this.items=[];this.itemsPtr=0;this.tickHandle=m.before(()=>this.reset());this.grow()}var A=w.prototype;A.destroy=function(){this.tickHandle&&(this.tickHandle.remove(),this.tickHandle=d.nullifyNonnullableForDispose(this.tickHandle));this.items=d.nullifyNonnullableForDispose(this.items)};
A.get=function(){0===this.itemsPtr&&m(()=>{});this.itemsPtr===this.items.length&&this.grow();return this.items[this.itemsPtr++]};A.reset=function(){this.items.length=Math.min(Math.min(3*Math.max(8,this.itemsPtr),this.itemsPtr+3072),this.items.length);this.itemsPtr=0};A.grow=function(){for(let K=0;K<Math.max(8,Math.min(this.items.length,1024));K++)this.items.push(this.allocator())};return w}();b.ObjectStack=u;b.default=u;Object.defineProperty(b,"__esModule",{value:!0})})},"esri/chunks/vec4":function(){define(["exports",
"./common"],function(b,d){function m(R,ca){R[0]=ca[0];R[1]=ca[1];R[2]=ca[2];R[3]=ca[3];return R}function u(R,ca,k,x,ba){R[0]=ca;R[1]=k;R[2]=x;R[3]=ba;return R}function w(R,ca,k){R[0]=ca[0]+k[0];R[1]=ca[1]+k[1];R[2]=ca[2]+k[2];R[3]=ca[3]+k[3];return R}function A(R,ca,k){R[0]=ca[0]-k[0];R[1]=ca[1]-k[1];R[2]=ca[2]-k[2];R[3]=ca[3]-k[3];return R}function K(R,ca,k){R[0]=ca[0]*k[0];R[1]=ca[1]*k[1];R[2]=ca[2]*k[2];R[3]=ca[3]*k[3];return R}function v(R,ca,k){R[0]=ca[0]/k[0];R[1]=ca[1]/k[1];R[2]=ca[2]/k[2];
R[3]=ca[3]/k[3];return R}function U(R,ca){R[0]=Math.ceil(ca[0]);R[1]=Math.ceil(ca[1]);R[2]=Math.ceil(ca[2]);R[3]=Math.ceil(ca[3]);return R}function F(R,ca){R[0]=Math.floor(ca[0]);R[1]=Math.floor(ca[1]);R[2]=Math.floor(ca[2]);R[3]=Math.floor(ca[3]);return R}function L(R,ca,k){R[0]=Math.min(ca[0],k[0]);R[1]=Math.min(ca[1],k[1]);R[2]=Math.min(ca[2],k[2]);R[3]=Math.min(ca[3],k[3]);return R}function G(R,ca,k){R[0]=Math.max(ca[0],k[0]);R[1]=Math.max(ca[1],k[1]);R[2]=Math.max(ca[2],k[2]);R[3]=Math.max(ca[3],
k[3]);return R}function V(R,ca){R[0]=Math.round(ca[0]);R[1]=Math.round(ca[1]);R[2]=Math.round(ca[2]);R[3]=Math.round(ca[3]);return R}function q(R,ca,k){R[0]=ca[0]*k;R[1]=ca[1]*k;R[2]=ca[2]*k;R[3]=ca[3]*k;return R}function n(R,ca,k,x){R[0]=ca[0]+k[0]*x;R[1]=ca[1]+k[1]*x;R[2]=ca[2]+k[2]*x;R[3]=ca[3]+k[3]*x;return R}function c(R,ca){const k=ca[0]-R[0],x=ca[1]-R[1],ba=ca[2]-R[2];R=ca[3]-R[3];return Math.sqrt(k*k+x*x+ba*ba+R*R)}function g(R,ca){const k=ca[0]-R[0],x=ca[1]-R[1],ba=ca[2]-R[2];R=ca[3]-R[3];
return k*k+x*x+ba*ba+R*R}function h(R){const ca=R[0],k=R[1],x=R[2];R=R[3];return Math.sqrt(ca*ca+k*k+x*x+R*R)}function p(R){const ca=R[0],k=R[1],x=R[2];R=R[3];return ca*ca+k*k+x*x+R*R}function l(R,ca){R[0]=-ca[0];R[1]=-ca[1];R[2]=-ca[2];R[3]=-ca[3];return R}function t(R,ca){R[0]=1/ca[0];R[1]=1/ca[1];R[2]=1/ca[2];R[3]=1/ca[3];return R}function I(R,ca){const k=ca[0],x=ca[1],ba=ca[2];ca=ca[3];let D=k*k+x*x+ba*ba+ca*ca;0<D&&(D=1/Math.sqrt(D),R[0]=k*D,R[1]=x*D,R[2]=ba*D,R[3]=ca*D);return R}function X(R,
ca){return R[0]*ca[0]+R[1]*ca[1]+R[2]*ca[2]+R[3]*ca[3]}function ha(R,ca,k,x){const ba=ca[0],D=ca[1],H=ca[2];ca=ca[3];R[0]=ba+x*(k[0]-ba);R[1]=D+x*(k[1]-D);R[2]=H+x*(k[2]-H);R[3]=ca+x*(k[3]-ca);return R}function N(R,ca){ca=ca||1;let k,x,ba,D;let H;do{k=2*d.RANDOM()-1;x=2*d.RANDOM()-1;var P=k*k+x*x}while(1<=P);do ba=2*d.RANDOM()-1,D=2*d.RANDOM()-1,H=ba*ba+D*D;while(1<=H);P=Math.sqrt((1-P)/H);R[0]=ca*k;R[1]=ca*x;R[2]=ca*ba*P;R[3]=ca*D*P;return R}function r(R,ca,k){const x=ca[0],ba=ca[1],D=ca[2];ca=ca[3];
R[0]=k[0]*x+k[4]*ba+k[8]*D+k[12]*ca;R[1]=k[1]*x+k[5]*ba+k[9]*D+k[13]*ca;R[2]=k[2]*x+k[6]*ba+k[10]*D+k[14]*ca;R[3]=k[3]*x+k[7]*ba+k[11]*D+k[15]*ca;return R}function da(R,ca,k){var x=ca[0];const ba=ca[1],D=ca[2],H=k[0],P=k[1],O=k[2];k=k[3];const ja=k*x+P*D-O*ba,B=k*ba+O*x-H*D,J=k*D+H*ba-P*x;x=-H*x-P*ba-O*D;R[0]=ja*k+x*-H+B*-O-J*-P;R[1]=B*k+x*-P+J*-H-ja*-O;R[2]=J*k+x*-O+ja*-P-B*-H;R[3]=ca[3];return R}function pa(R){return"vec4("+R[0]+", "+R[1]+", "+R[2]+", "+R[3]+")"}function ra(R,ca){return R[0]===
ca[0]&&R[1]===ca[1]&&R[2]===ca[2]&&R[3]===ca[3]}function ta(R,ca){const k=R[0],x=R[1],ba=R[2];R=R[3];const D=ca[0],H=ca[1],P=ca[2];ca=ca[3];return Math.abs(k-D)<=d.EPSILON*Math.max(1,Math.abs(k),Math.abs(D))&&Math.abs(x-H)<=d.EPSILON*Math.max(1,Math.abs(x),Math.abs(H))&&Math.abs(ba-P)<=d.EPSILON*Math.max(1,Math.abs(ba),Math.abs(P))&&Math.abs(R-ca)<=d.EPSILON*Math.max(1,Math.abs(R),Math.abs(ca))}var oa=Object.freeze({__proto__:null,copy:m,set:u,add:w,subtract:A,multiply:K,divide:v,ceil:U,floor:F,min:L,
max:G,round:V,scale:q,scaleAndAdd:n,distance:c,squaredDistance:g,length:h,squaredLength:p,negate:l,inverse:t,normalize:I,dot:X,lerp:ha,random:N,transformMat4:r,transformQuat:da,str:pa,exactEquals:ra,equals:ta,sub:A,mul:K,div:v,dist:c,sqrDist:g,len:h,sqrLen:p});b.add=w;b.ceil=U;b.copy=m;b.dist=c;b.distance=c;b.div=v;b.divide=v;b.dot=X;b.equals=ta;b.exactEquals=ra;b.floor=F;b.inverse=t;b.len=h;b.length=h;b.lerp=ha;b.max=G;b.min=L;b.mul=K;b.multiply=K;b.negate=l;b.normalize=I;b.random=N;b.round=V;b.scale=
q;b.scaleAndAdd=n;b.set=u;b.sqrDist=g;b.sqrLen=p;b.squaredDistance=g;b.squaredLength=p;b.str=pa;b.sub=A;b.subtract=A;b.transformMat4=r;b.transformQuat=da;b.vec4=oa})},"esri/chunks/vec4f64":function(){define(["exports"],function(b){function d(){return[0,0,0,0]}function m(l){return[l[0],l[1],l[2],l[3]]}function u(l,t,I,X){return[l,t,I,X]}function w(l){const t=d(),I=Math.min(4,l.length);for(let X=0;X<I;++X)t[X]=l[X];return t}function A(l,t){return new Float64Array(l,t,4)}function K(){return d()}function v(){return[1,
1,1,1]}function U(){return[1,0,0,0]}function F(){return[0,1,0,0]}function L(){return[0,0,1,0]}function G(){return[0,0,0,1]}const V=d(),q=v(),n=U(),c=F(),g=L(),h=G();var p=Object.freeze({__proto__:null,create:d,clone:m,fromValues:u,fromArray:w,createView:A,zeros:K,ones:v,unitX:U,unitY:F,unitZ:L,unitW:G,ZEROS:V,ONES:q,UNIT_X:n,UNIT_Y:c,UNIT_Z:g,UNIT_W:h});b.ONES=q;b.UNIT_W=h;b.UNIT_X=n;b.UNIT_Y=c;b.UNIT_Z=g;b.ZEROS=V;b.clone=m;b.create=d;b.createView=A;b.fromArray=w;b.fromValues=u;b.ones=v;b.unitW=
G;b.unitX=U;b.unitY=F;b.unitZ=L;b.vec4f64=p;b.zeros=K})},"esri/geometry/support/clipRay":function(){define(["exports","../../core/ObjectStack","../../chunks/vec3","./ray","./vectorStacks"],function(b,d,m,u,w){function A(L){return L?{ray:u.create(L.ray),c0:L.c0,c1:L.c1}:{ray:u.create(),c0:0,c1:Number.MAX_VALUE}}function K(L,G,V,q=A()){u.copy(L,q.ray);q.c0=G;q.c1=V;return q}function v(L,G,V=A()){const q=m.length(L.vector);u.fromValues(L.origin,G,V.ray);V.c0=0;V.c1=q;return V}function U(L,G,V){return m.add(V,
L.ray.origin,m.scale(V,L.ray.direction,G))}const F=new d.ObjectStack(()=>({c0:0,c1:0,ray:null}));b.copy=function(L,G=A()){return K(L.ray,L.c0,L.c1,G)};b.create=A;b.fromLineSegment=function(L,G=A()){const V=m.normalize(w.sv3d.get(),L.vector);return v(L,V,G)};b.fromLineSegmentAndDirection=v;b.fromRay=function(L,G=A()){u.copy(L,G.ray);G.c0=0;G.c1=Number.MAX_VALUE;return G};b.fromValues=K;b.getAt=U;b.getEnd=function(L,G){return U(L,L.c1,G)};b.getStart=function(L,G){return U(L,L.c0,G)};b.wrap=function(L,
G,V){const q=F.get();q.ray=L;q.c0=G;q.c1=V;return q};Object.defineProperty(b,"__esModule",{value:!0})})},"esri/geometry/support/ray":function(){define(["exports","../../core/ObjectStack","../../chunks/vec3","../../chunks/vec3f64","./vectorStacks"],function(b,d,m,u,w){function A(F){return F?{origin:u.clone(F.origin),direction:u.clone(F.direction)}:{origin:u.create(),direction:u.create()}}function K(F,L,G=A()){m.copy(G.origin,F);m.copy(G.direction,L);return G}function v(F,L){F=m.cross(w.sv3d.get(),
m.normalize(w.sv3d.get(),F.direction),m.subtract(w.sv3d.get(),L,F.origin));return m.dot(F,F)}const U=new d.ObjectStack(function(){return{origin:null,direction:null}});b.closestPoint=function(F,L,G){L=m.dot(F.direction,m.subtract(G,L,F.origin));m.add(G,F.origin,m.scale(G,F.direction,L));return G};b.copy=function(F,L=A()){return K(F.origin,F.direction,L)};b.create=A;b.distance=function(F,L){return Math.sqrt(v(F,L))};b.distance2=v;b.fromPoints=function(F,L,G=A()){m.copy(G.origin,F);m.subtract(G.direction,
L,F);return G};b.fromValues=K;b.wrap=function(F,L){const G=U.get();G.origin=F;G.direction=L;return G};Object.defineProperty(b,"__esModule",{value:!0})})},"esri/geometry/support/vectorStacks":function(){define(["exports","../../core/VectorStack"],function(b,d){const m=d.VectorStack.createVec2f64(),u=d.VectorStack.createVec3f64(),w=d.VectorStack.createVec4f64(),A=d.VectorStack.createMat3f64(),K=d.VectorStack.createMat4f64();d=d.VectorStack.createQuatf64();b.sm3d=A;b.sm4d=K;b.sq4d=d;b.sv2d=m;b.sv3d=
u;b.sv4d=w;Object.defineProperty(b,"__esModule",{value:!0})})},"esri/core/VectorStack":function(){define("exports ../chunks/_rollupPluginBabelHelpers ./maybe ./nextTick ../chunks/mat3f64 ../chunks/mat4f64 ../chunks/quatf64 ../chunks/vec2f64 ../chunks/vec3f64 ../chunks/vec4f64".split(" "),function(b,d,m,u,w,A,K,v,U,F){let L=function(){function G(q,n,c){this.itemByteSize=q;this.itemCreate=n;this.buffers=[];this.items=[];this.itemsPtr=this.itemsPerBuffer=0;this.itemsPerBuffer=Math.ceil(c/this.itemByteSize);
this.tickHandle=u.before(()=>this.reset())}var V=G.prototype;V.destroy=function(){this.tickHandle&&(this.tickHandle.remove(),this.tickHandle=m.nullifyNonnullableForDispose(this.tickHandle));this.itemsPtr=0;this.items=m.nullifyNonnullableForDispose(this.items);this.buffers=m.nullifyNonnullableForDispose(this.buffers)};V.get=function(){0===this.itemsPtr&&u(()=>{});const q=Math.floor(this.itemsPtr/this.itemsPerBuffer);for(;this.buffers.length<=q;){const n=new ArrayBuffer(this.itemsPerBuffer*this.itemByteSize);
for(let c=0;c<this.itemsPerBuffer;++c)this.items.push(this.itemCreate(n,c*this.itemByteSize));this.buffers.push(n)}return this.items[this.itemsPtr++]};V.reset=function(){const q=2*(Math.floor(this.itemsPtr/this.itemsPerBuffer)+1);for(;this.buffers.length>q;)this.buffers.pop(),this.items.length=this.buffers.length*this.itemsPerBuffer;this.itemsPtr=0};G.createVec2f64=function(q=4096){return new G(16,v.createView,q)};G.createVec3f64=function(q=4096){return new G(24,U.createView,q)};G.createVec4f64=function(q=
4096){return new G(32,F.createView,q)};G.createMat3f64=function(q=4096){return new G(72,w.createView,q)};G.createMat4f64=function(q=4096){return new G(128,A.createView,q)};G.createQuatf64=function(q=4096){return new G(32,K.createView,q)};d._createClass(G,[{key:"test",get:function(){return{size:this.buffers.length*this.itemsPerBuffer*this.itemByteSize}}}]);return G}();b.VectorStack=L;Object.defineProperty(b,"__esModule",{value:!0})})},"esri/chunks/quatf64":function(){define(["exports"],function(b){function d(){return[0,
0,0,1]}function m(v){return[v[0],v[1],v[2],v[3]]}function u(v,U,F,L){return[v,U,F,L]}function w(v,U){return new Float64Array(v,U,4)}const A=d();var K=Object.freeze({__proto__:null,create:d,clone:m,fromValues:u,createView:w,IDENTITY:A});b.IDENTITY=A;b.clone=m;b.create=d;b.createView=w;b.fromValues=u;b.quatf64=K})},"esri/chunks/vec2f64":function(){define(["exports"],function(b){function d(){return[0,0]}function m(c){return[c[0],c[1]]}function u(c,g){return[c,g]}function w(c){const g=[0,0],h=Math.min(2,
c.length);for(let p=0;p<h;++p)g[p]=c[p];return g}function A(c,g){return new Float64Array(c,g,2)}function K(){return[0,0]}function v(){return[1,1]}function U(){return[1,0]}function F(){return[0,1]}const L=[0,0],G=[1,1],V=[1,0],q=[0,1];var n=Object.freeze({__proto__:null,create:d,clone:m,fromValues:u,fromArray:w,createView:A,zeros:K,ones:v,unitX:U,unitY:F,ZEROS:L,ONES:G,UNIT_X:V,UNIT_Y:q});b.ONES=G;b.UNIT_X=V;b.UNIT_Y=q;b.ZEROS=L;b.clone=m;b.create=d;b.createView=A;b.fromArray=w;b.fromValues=u;b.ones=
v;b.unitX=U;b.unitY=F;b.vec2f64=n;b.zeros=K})},"esri/geometry/support/plane":function(){define("exports ../../core/mathUtils ../../core/maybe ../../chunks/vec3 ../../chunks/vec3f64 ../../chunks/sphere ./vectorStacks".split(" "),function(b,d,m,u,w,A,K){function v(N=ha){return[N[0],N[1],N[2],N[3]]}function U(N,r=v()){return F(N[0],N[1],N[2],N[3],r)}function F(N,r,da,pa,ra=v()){ra[0]=N;ra[1]=r;ra[2]=da;ra[3]=pa;return ra}function L(N,r,da){u.copy(da,r);r=u.dot(r,r);1E-5<Math.abs(r-1)&&1E-12<r&&u.scale(da,
da,1/Math.sqrt(r));return q(da,N,da)}function G(N,r,da,pa=v()){return n(u.subtract(K.sv3d.get(),N,r),u.subtract(K.sv3d.get(),da,r),N,pa)}function V(N,r,da,pa,ra){if(3>N.count)return!1;N.getVec(da,p);let ta=pa,oa=!1;for(;ta<N.count-1&&!oa;)N.getVec(ta,l),ta++,oa=!u.exactEquals(p,l);if(!oa)return!1;ta=Math.max(ta,ra);for(oa=!1;ta<N.count&&!oa;)N.getVec(ta,t),ta++,u.subtract(I,p,l),u.normalize(I,I),u.subtract(X,l,t),u.normalize(X,X),oa=!u.exactEquals(p,t)&&!u.exactEquals(l,t)&&.99619469809>Math.abs(u.dot(I,
X));if(!oa)return 0===da&&1===pa&&2===ra?!1:V(N,r,0,1,2);G(p,l,t,r);return!0}function q(N,r,da){N!==da&&U(N,da);da[3]=-u.dot(da,r);return da}function n(N,r,da,pa){N=u.cross(t,r,N);return L(da,N,pa)}function c(N,r,da){N=u.scale(K.sv3d.get(),N,u.dot(N,r));u.subtract(da,r,N);return da}function g(N,r){return u.dot(N,r)+N[3]}function h(N,r,da,pa,ra){const ta=u.dot(N,da);if(0===ta)return!1;N=-(u.dot(N,r)+N[3])/ta;pa&1&&(N=d.clamp(N,0,1));if(!(pa&4)&&0>N||!(pa&8)&&1<N)return!1;u.add(ra,r,u.scale(ra,da,N));
return!0}const p=w.create(),l=w.create(),t=w.create(),I=w.create(),X=w.create(),ha=[0,0,1,0];b.UP=ha;b.clip=function(N,r){const da=u.dot(N,r.ray.direction);N=-g(N,r.ray.origin);if(0>N&&0<=da)return!1;if(-1E-6<da&&1E-6>da)return 0<N;if((0>N||0>da)&&!(0>N&&0>da))return!0;N/=da;0<da?N<r.c1&&(r.c1=N):N>r.c0&&(r.c0=N);return r.c0<=r.c1};b.clipInfinite=function(N,r){const da=u.dot(N,r.ray.direction);N=-g(N,r.ray.origin);if(-1E-6<da&&1E-6>da)return 0<N;N/=da;0<da?N<r.c1&&(r.c1=N):N>r.c0&&(r.c0=N);return r.c0<=
r.c1};b.copy=U;b.create=v;b.distance=function(N,r){return Math.abs(g(N,r))};b.fromManyPoints=function(N,r){return V(N,r,0,1,2)};b.fromManyPointsSampleAt=V;b.fromNormalAndOffset=function(N,r,da){u.copy(da,N);da[3]=r;return da};b.fromPoints=G;b.fromPositionAndNormal=L;b.fromValues=F;b.fromVectorsAndPoint=n;b.intersectLine=function(N,r,da,pa){da=u.subtract(K.sv3d.get(),da,r);return h(N,r,da,12,pa)};b.intersectLineSegment=function(N,r,da){return h(N,r.origin,r.vector,0,da)};b.intersectLineSegmentClamp=
function(N,r,da){return h(N,r.origin,r.vector,1,da)};b.intersectRay=function(N,r,da){return m.isSome(r)?h(N,r.origin,r.direction,8,da):!1};b.isAABBFullyInside=function(N,r){const da=r[0],pa=r[1],ra=r[2],ta=r[3],oa=r[4];r=r[5];return 0<=N[0]*(0<N[0]?da:ta)+N[1]*(0<N[1]?pa:oa)+N[2]*(0<N[2]?ra:r)+N[3]};b.isPointInside=function(N,r){return 0<=g(N,r)};b.isPointOutside=function(N,r){return 0>g(N,r)};b.isSphereFullyInside=function(N,r){return 0<=g(N,A.getCenter(r))-r[3]};b.isSphereFullyOutside=function(N,
r){return 0>g(N,A.getCenter(r))+r[3]};b.negate=function(N,r){r[0]=-N[0];r[1]=-N[1];r[2]=-N[2];r[3]=-N[3];return r};b.normal=function(N){return N};b.projectPoint=function(N,r,da){const pa=u.scale(K.sv3d.get(),N,-N[3]);r=u.subtract(K.sv3d.get(),r,pa);N=c(N,r,K.sv3d.get());u.add(da,N,pa);return da};b.projectVector=c;b.setOffsetFromPoint=q;b.signedDistance=g;b.wrap=function(N,r,da,pa){return F(N,r,da,pa,K.sv4d.get())};Object.defineProperty(b,"__esModule",{value:!0})})},"esri/chunks/sphere":function(){define("exports ../core/has ../core/Logger ../core/mathUtils ../core/maybe ./mat4 ./vec3 ./vec3f64 ./vec4 ./vec4f64 ../geometry/support/ray ../geometry/support/vector ../geometry/support/vectorStacks".split(" "),
function(b,d,m,u,w,A,K,v,U,F,L,G,V){function q(){return F.create()}function n(O,ja=q()){return U.copy(ja,O)}function c(O,ja){return F.fromValues(O[0],O[1],O[2],ja)}function g(O){return O}function h(O){O[0]=O[1]=O[2]=O[3]=0}function p(O){return O}function l(O){return Array.isArray(O)?O[3]:O}function t(O){return Array.isArray(O)?O:H}function I(O,ja,B,J){return F.fromValues(O,ja,B,J)}function X(O,ja,B){O!==B&&K.copy(B,O);B[3]=O[3]+ja;return B}function ha(O,ja,B){ba.error("sphere.setExtent is not yet supported");
return O===B?B:n(O,B)}function N(O,ja,B){if(w.isNone(ja))return!1;var J=K.subtract(V.sv3d.get(),ja.origin,t(O)),fa=K.dot(ja.direction,ja.direction);const na=2*K.dot(ja.direction,J);O=K.dot(J,J)-O[3]*O[3];O=na*na-4*fa*O;if(0>O)return!1;J=Math.sqrt(O);O=(-na-J)/(2*fa);fa=(-na+J)/(2*fa);if(0>O||fa<O&&0<fa)O=fa;if(0>O)return!1;B&&K.add(B,ja.origin,K.scale(V.sv3d.get(),ja.direction,O));return!0}function r(O,ja){return N(O,ja,null)}function da(O,ja,B){if(N(O,ja,B))return B;O=pa(O,ja,V.sv3d.get());K.add(B,
ja.origin,K.scale(V.sv3d.get(),ja.direction,K.distance(ja.origin,O)/K.length(ja.direction)));return B}function pa(O,ja,B){const J=V.sv3d.get(),fa=V.sm4d.get();K.cross(J,ja.origin,ja.direction);const na=l(O);K.cross(B,J,ja.origin);K.scale(B,B,1/K.length(B)*na);O=R(O,ja.origin);ja=G.angle(ja.origin,B);A.identity(fa);A.rotate(fa,fa,ja+O,J);K.transformMat4(B,B,fa);return B}function ra(O,ja,B){if(N(O,ja,B))return B;L.closestPoint(ja,t(O),B);return ta(O,B,B)}function ta(O,ja,B){ja=K.subtract(V.sv3d.get(),
ja,t(O));ja=K.scale(V.sv3d.get(),ja,O[3]/K.length(ja));return K.add(B,ja,t(O))}function oa(O,ja){ja=K.subtract(V.sv3d.get(),ja,t(O));ja=K.squaredLength(ja);return Math.sqrt(Math.abs(ja-O[3]*O[3]))}function R(O,ja){ja=K.subtract(V.sv3d.get(),ja,t(O));ja=K.length(ja);O=l(O);return u.acosClamped(O/(O+Math.abs(O-ja)))}function ca(O,ja,B,J){O=K.subtract(D,ja,t(O));switch(B){case 0:return B=u.cartesianToSpherical(O,D)[2],K.set(J,-Math.sin(B),Math.cos(B),0);case 1:return O=u.cartesianToSpherical(O,D),B=
O[1],O=O[2],ja=Math.sin(B),K.set(J,-ja*Math.cos(O),-ja*Math.sin(O),Math.cos(B));case 2:return K.normalize(J,O)}}function k(O,ja){ja=K.subtract(P,ja,t(O));return K.length(ja)-O[3]}function x(O,ja,B,J){const fa=k(O,ja);O=ca(O,ja,2,P);B=K.scale(P,O,B-fa);return K.add(J,ja,B)}const ba=m.getLogger("esri.geometry.support.sphere"),D=v.create(),H=v.create(),P=v.create();d=Object.freeze({__proto__:null,create:q,copy:n,fromCenterAndRadius:c,wrap:g,clear:h,fromRadius:p,getRadius:l,getCenter:t,fromValues:I,elevate:X,
setExtent:ha,intersectRay:N,intersectsRay:r,intersectRayClosestSilhouette:da,closestPointOnSilhouette:pa,closestPoint:ra,projectPoint:ta,distanceToSilhouette:oa,angleToSilhouette:R,axisAt:ca,altitudeAt:k,setAltitudeAt:x});b.altitudeAt=k;b.angleToSilhouette=R;b.axisAt=ca;b.clear=h;b.closestPoint=ra;b.closestPointOnSilhouette=pa;b.copy=n;b.create=q;b.distanceToSilhouette=oa;b.elevate=X;b.fromCenterAndRadius=c;b.fromRadius=p;b.fromValues=I;b.getCenter=t;b.getRadius=l;b.intersectRay=N;b.intersectRayClosestSilhouette=
da;b.intersectsRay=r;b.projectPoint=ta;b.setAltitudeAt=x;b.setExtent=ha;b.sphere=d;b.wrap=g})},"esri/geometry/support/vector":function(){define(["exports","../../core/mathUtils","../../chunks/vec3","../../chunks/vec3f64"],function(b,d,m,u){const w=u.create(),A=u.create();b.angle=function(K,v){K=m.dot(K,v)/(m.length(K)*m.length(v));return-d.acosClamped(K)};b.angleAroundAxis=function(K,v,U){m.normalize(w,K);m.normalize(A,v);K=m.dot(w,A);K=d.acosClamped(K);v=m.cross(w,w,A);return 0>m.dot(v,U)?2*Math.PI-
K:K};b.projectPoint=function(K,v,U){v=m.dot(K,v)/m.dot(K,K);return m.scale(U,K,v)};b.projectPointSignedLength=function(K,v){return m.dot(K,v)/m.length(K)};Object.defineProperty(b,"__esModule",{value:!0})})},"esri/views/3d/camera/intersectionUtils":function(){define("exports ../../../core/maybe ../../../chunks/vec3 ../../../chunks/vec3f64 ../../../geometry/projectionEllipsoid ../../../geometry/support/aaBoundingRect ../webgl-engine/lib/Intersector".split(" "),function(b,d,m,u,w,A,K){function v(n,c){return n.elevationProvider?
d.unwrapOr(n.elevationProvider.getElevation(c[0],c[1],c[2],n.renderCoordsHelper.spatialReference,"ground"),0):0}function U(n,c,g){if(!n.state.isGlobal)return!1;const h=v(n,c);({far:n}=n.stateManager.constraintsManager.nearFarHeuristic.compute(c,g,n.dataExtent,h,q));n*=n;return m.squaredDistance(c,g)>n}const F={},L=u.create(),G=u.create(),V=u.create(),q={near:0,far:0};b.cameraOnContentAlongViewDirection=function(n,c,g,h){const p=n.state.camera.clone();c&&(p.eye=c,p.center=g,p.up=h);c=p.ray;g=F[n.viewingMode];
g||(g=new K.Intersector(n.state.viewingMode),g.options.backfacesTerrain=!n.state.isGlobal,g.options.invisibleTerrain=!0,F[n.viewingMode]=g);({isGlobal:h}=n.state);n.sceneIntersectionHelper.intersectRay(c,g,G)&&!U(n,c.origin,G)?c=!0:!n.renderCoordsHelper.intersectManifold(c,0,G)||U(n,c.origin,G)?h?(g=w.getReferenceEllipsoid(n.spatialReference).radius,g=m.dot(c.origin,c.origin)-g*g,m.scale(G,c.direction,(0<g?Math.sqrt(g)/3:1)/m.length(c.direction)),m.add(G,G,c.origin),c=!0):c=!1:c=!0;c||m.copy(G,p.center);
g=n.state.constraints;h=g.minimumPoiDistance;m.squaredDistance(p.eye,G)<h&&(c=g.collision.enabled,m.copy(V,p.viewForward),m.scale(V,V,h),c?p.eye=m.subtract(L,G,V):m.add(G,p.eye,V),n=n.renderCoordsHelper,h=n.getAltitude(p.eye),g=g.collision.elevationMargin,c&&h<g&&(m.subtract(V,G,p.eye),p.eye=n.setAltitude(L,g,p.eye),m.add(G,p.eye,V)));p.center=G;return p};b.eyeWithinExtent=function(n,c,g,h){return d.isSome(n.renderCoordsHelper.fromRenderCoords(c.eye,L,h))&&A.containsPoint(g,L)};b.surfaceElevationBelowRenderLocation=
v;Object.defineProperty(b,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/Intersector":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/has ../../../../core/maybe ../../../../chunks/mat4f64 ../../../../chunks/vec3 ../../../../chunks/vec3f64 ../../../../geometry/support/ray ./IntersectorInterfaces ./intersectorUtils ./verticalOffsetUtils ../materials/renderers/utils".split(" "),function(b,d,m,u,w,A,K,v,U,F,L,G){m=function(){function V(n){this.options=
new U.IntersectorOptions;this.results=new F.IntersectorResults;this.transform=new L.IntersectorTransform;this.performanceInfo={queryDuration:0,numObjectsTested:0};this.tolerance=1E-5;this.verticalOffset=null;this._ray={origin:K.create(),direction:K.create()};this._rayEndPoint=K.create();this._rayStartPointTransformed=K.create();this._rayEndPointTransformed=K.create();this.viewingMode=null==n?1:n}var q=V.prototype;q.reset=function(n,c){this.resetWithRay(v.fromPoints(n,c,this._ray))};q.resetWithRay=
function(n){n!==this._ray&&v.copy(n,this._ray);0!==this.options.verticalOffset?2===this.viewingMode?this._ray.origin[2]-=this.options.verticalOffset:this.verticalOffset=this.options.verticalOffset:this.verticalOffset=null;A.add(this._rayEndPoint,this._ray.origin,this._ray.direction);this._numObjectsTested=0;this.results.init(this._ray)};q.intersect=function(n=null,c,g,h,p,l){this.point=c;this.camera=g;this.filterPredicate=p;this.tolerance=null==h?1E-5:h;c=L.getVerticalOffsetObject3D(this.verticalOffset);
if(u.isSome(n)&&0<n.length){const t=l?I=>{l(I)&&this.intersectObject(I)}:I=>{this.intersectObject(I)};for(const I of n)n=I.getSpatialQueryAccelerator&&I.getSpatialQueryAccelerator(),u.isSome(n)?(u.isSome(c)?n.forEachAlongRayWithVerticalOffset(this._ray.origin,this._ray.direction,t,c):n.forEachAlongRay(this._ray.origin,this._ray.direction,t),this.options.selectionMode&&this.options.hud&&n.forEachDegenerateObject(t)):I.objects.forAll(X=>t(X))}this.sortResults()};q.intersectObject=function(n){this._numObjectsTested++;
const c=n.geometryRecords;if(c){var g=n.id,h=n.transformation,p=L.getVerticalOffsetObject3D(this.verticalOffset);for(const t of c){const {geometry:I,material:X,instanceParameters:ha}=t;if(G.isInstanceHidden(ha))continue;var l=I.id;this.transform.setAndInvalidateLazyTransforms(h,t.getShaderTransformation());A.transformMat4(this._rayStartPointTransformed,this._ray.origin,this.transform.inverse);A.transformMat4(this._rayEndPointTransformed,this._rayEndPoint,this.transform.inverse);const N=this.transform.transform;
u.isSome(p)&&(p.objectTransform=this.transform);X.intersect(I,ha,this.transform.transform,this,this._rayStartPointTransformed,this._rayEndPointTransformed,(r,da,pa,ra,ta,oa)=>{if(0<=r&&(!u.isSome(this.filterPredicate)||this.filterPredicate(this._ray.origin,this._rayEndPoint,r))){var R=`Object3D ${g}`;ta?(null==this.results.hud.dist||r<this.results.hud.dist)&&this.results.hud.set(n,R,r,da,w.IDENTITY,ra,oa,l,pa):((null==this.results.min.drapedLayerOrder||ra>=this.results.min.drapedLayerOrder)&&(null==
this.results.min.dist||r<this.results.min.dist)&&this.results.min.set(n,R,r,da,N,ra,null,l,pa),0!==this.options.store&&(null==this.results.max.drapedLayerOrder||ra<this.results.max.drapedLayerOrder)&&(null==this.results.max.dist||r>this.results.max.dist)&&this.results.max.set(n,R,r,da,N,ra,null,l,pa),2===this.options.store&&(ta=new F.IntersectorResult(this._ray),ta.set(n,R,r,da,N,ra,null,l,pa),this.results.all.push(ta)))}},t.shaderTransformation)}}};q.sortResults=function(){this.results.all.sort((n,
c)=>n.dist!==c.dist?n.dist-c.dist:n.drapedLayerOrder!==c.drapedLayerOrder?(void 0!==n.drapedLayerOrder?n.drapedLayerOrder:Number.MAX_VALUE)-(void 0!==c.drapedLayerOrder?c.drapedLayerOrder:Number.MAX_VALUE):(void 0!==c.drapedLayerGraphicOrder?c.drapedLayerGraphicOrder:Number.MIN_VALUE)-(void 0!==n.drapedLayerGraphicOrder?n.drapedLayerGraphicOrder:Number.MIN_VALUE))};d._createClass(V,[{key:"ray",get:function(){return this._ray}},{key:"rayBeginPoint",get:function(){return this._ray.origin}},{key:"rayEndPoint",
get:function(){return this._rayEndPoint}}]);return V}();m.DEFAULT_TOLERANCE=1E-5;b.Intersector=m;Object.defineProperty(b,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/IntersectorInterfaces":function(){define(["exports"],function(b){b.IntersectorOptions=function(){this.verticalOffset=0;this.selectionMode=!1;this.selectOpaqueTerrainOnly=this.hud=!0;this.invisibleTerrain=!1;this.backfacesTerrain=!0;this.isFiltered=!1;this.store=2};Object.defineProperty(b,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/intersectorUtils":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/mat4 ../../../../chunks/mat4f64 ../../../../chunks/vec3 ../../../../chunks/vec3f64 ../../../../chunks/vec4 ../../../../chunks/vec4f64 ../../../../chunks/boundedPlane ../../../../geometry/support/ray ./Object3D".split(" "),
function(b,d,m,u,w,A,K,v,U,F,L){let G=function(){function g(){this.min=new V;this.max=new V;this.hud=new V;this.ground=new V}g.prototype.init=function(h){this.min.init(h);this.max.init(h);this.hud.init(h);this.ground.init(h);this.all=[]};return g}(),V=function(){function g(p){this.normal=A.create();this.transformation=u.create();this._ray=F.create();this.init(p)}var h=g.prototype;h.getIntersectionPoint=function(p){if(!this.hasIntersectionPoint)return!1;w.scale(n,this.ray.direction,this.dist);w.add(p,
this.ray.origin,n);return!0};h.getTransformedNormal=function(p){w.copy(c,this.normal);c[3]=0;K.transformMat4(c,c,this.transformation);w.copy(p,c);w.normalize(p,p);return p};h.init=function(p){this.drapedLayerGraphicOrder=this.drapedLayerOrder=this.name=this.target=this.dist=void 0;this.triangleNr=this.geometryId=this.center=null;this.intersector="Stage";p?F.copy(p,this._ray):this._ray=F.create()};h.set=function(p,l,t,I,X,ha,N,r,da,pa){p instanceof L.Object3D&&(p={type:"stage",obj:p});this.dist=t;
w.copy(this.normal,I);m.copy(this.transformation,X);this.target=p;this.name=l;this.drapedLayerOrder=ha;this.center=N?A.clone(N):null;this.geometryId=r;this.triangleNr=da;this.drapedLayerGraphicOrder=pa};h.copyFrom=function(p){F.copy(p.ray,this._ray);this.dist=p.dist;this.target=p.target;this.name=p.name;this.drapedLayerOrder=p.drapedLayerOrder;this.center=p.center?A.clone(p.center):null;this.geometryId=p.geometryId;this.triangleNr=p.triangleNr;this.intersector=p.intersector;this.drapedLayerGraphicOrder=
p.drapedLayerGraphicOrder;w.copy(this.normal,p.normal);m.copy(this.transformation,p.transformation)};d._createClass(g,[{key:"ray",get:function(){return this._ray}},{key:"hasIntersectionPoint",get:function(){return null!=this.dist}},{key:"distanceInRenderSpace",get:function(){if(null!=this.dist)return w.scale(n,this.ray.direction,this.dist),w.length(n)}}]);return g}();const q=A.create(),n=A.create(),c=v.create();b.IntersectorResult=V;b.IntersectorResults=G;b.sliceFilterPredicate=function(g){return(h,
p,l)=>{w.lerp(q,h,p,l);return!U.extrusionContainsPoint(g,q)}};Object.defineProperty(b,"__esModule",{value:!0})})},"esri/chunks/boundedPlane":function(){define("exports ../core/has ../core/Logger ../core/mathUtils ../core/ObjectStack ./mat4 ./mat4f64 ./vec3 ./vec3f64 ../geometry/support/lineSegment ../geometry/support/plane ../geometry/support/ray ../geometry/support/vector ../geometry/support/vectorStacks".split(" "),function(b,d,m,u,w,A,K,v,U,F,L,G,V,q){function n(f=va){return{plane:L.create(f.plane),
origin:U.clone(f.origin),basis1:U.clone(f.basis1),basis2:U.clone(f.basis2)}}function c(f,z,M){const T=y.get();T.origin=f;T.basis1=z;T.basis2=M;T.plane=L.wrap(0,0,0,0);l(T);return T}function g(f,z=n()){return p(f.origin,f.basis1,f.basis2,z)}function h(f,z){v.copy(z.origin,f.origin);v.copy(z.basis1,f.basis1);v.copy(z.basis2,f.basis2);L.copy(f.plane,z.plane)}function p(f,z,M,T=n()){v.copy(T.origin,f);v.copy(T.basis1,z);v.copy(T.basis2,M);l(T);1E-6<Math.abs(v.dot(T.basis1,T.basis2)/(v.length(T.basis1)*
v.length(T.basis2)))&&na.warn("fromValues()","Provided basis vectors are not perpendicular");1E-6<Math.abs(v.dot(T.basis1,O(T)))&&na.warn("fromValues()","Basis vectors and plane normal are not perpendicular");1E-6<Math.abs(-v.dot(O(T),T.origin)-T.plane[3])&&na.warn("fromValues()","Plane offset is not consistent with plane origin");return T}function l(f){L.fromVectorsAndPoint(f.basis2,f.basis1,f.origin,f.plane)}function t(f,z,M){f!==M&&g(f,M);f=v.scale(q.sv3d.get(),O(f),z);v.add(M.origin,M.origin,
f);M.plane[3]-=z;return M}function I(f,z,M){X(z,M);t(M,x(f,f.origin),M);return M}function X(f,z=n()){const M=(f[2]-f[0])/2,T=(f[3]-f[1])/2;v.set(z.origin,f[0]+M,f[1]+T,0);v.set(z.basis1,M,0,0);v.set(z.basis2,0,T,0);L.fromValues(0,0,1,0,z.plane);return z}function ha(f,z,M){return L.intersectRay(f.plane,z,M)?ja(f,M):!1}function N(f,z,M){if(ha(f,z,M))return M;f=r(f,z,q.sv3d.get());v.add(M,z.origin,v.scale(q.sv3d.get(),z.direction,v.distance(z.origin,f)/v.length(z.direction)));return M}function r(f,z,
M){const T=Y.get();var ia=Y.get();fa(f,z,T,ia);ia=Number.POSITIVE_INFINITY;for(const sa of E){var la=J(f,sa,a.get());const wa=q.sv3d.get();L.intersectLineSegment(T,la,wa)&&(la=v.direction(q.sv3d.get(),z.origin,wa),la=Math.abs(u.acosClamped(v.dot(z.direction,la))),la<ia&&(ia=la,v.copy(M,wa)))}return ia===Number.POSITIVE_INFINITY?da(f,z,M):M}function da(f,z,M){if(ha(f,z,M))return M;const T=Y.get(),ia=Y.get();fa(f,z,T,ia);let la=Number.POSITIVE_INFINITY;for(const wa of E){var sa=J(f,wa,a.get());const Ba=
q.sv3d.get();L.intersectLineSegmentClamp(T,sa,Ba)&&(sa=G.distance2(z,Ba),L.isPointInside(ia,Ba)&&sa<la&&(la=sa,v.copy(M,Ba)))}ta(f,z.origin)<la&&pa(f,z.origin,M);return M}function pa(f,z,M){var T=L.projectPoint(f.plane,z,q.sv3d.get());z=F.projectPointClamp(B(f,f.basis1),T,-1,1,q.sv3d.get());T=F.projectPointClamp(B(f,f.basis2),T,-1,1,q.sv3d.get());v.subtract(M,v.add(q.sv3d.get(),z,T),f.origin);return M}function ra(f,z,M){const {origin:T,basis1:ia,basis2:la}=f,sa=v.subtract(q.sv3d.get(),z,T);z=V.projectPointSignedLength(ia,
sa);const wa=V.projectPointSignedLength(la,sa);f=V.projectPointSignedLength(O(f),sa);return v.set(M,z,wa,f)}function ta(f,z){z=ra(f,z,q.sv3d.get());const {basis1:M,basis2:T}=f;f=v.length(M);var ia=v.length(T);f=Math.max(Math.abs(z[0])-f,0);ia=Math.max(Math.abs(z[1])-ia,0);z=z[2];return f*f+ia*ia+z*z}function oa(f,z){return Math.sqrt(ta(f,z))}function R(f,z){let M=Number.NEGATIVE_INFINITY;for(const ia of E){var T=J(f,ia,a.get());T=F.distance2(T,z);T>M&&(M=T)}return Math.sqrt(M)}function ca(f,z){return L.isPointInside(f.plane,
z)&&ja(f,z)}function k(f,z,M,T){switch(M){case 0:v.copy(T,f.basis1);v.normalize(T,T);break;case 1:v.copy(T,f.basis2);v.normalize(T,T);break;case 2:v.copy(T,O(f))}return T}function x(f,z){const M=-f.plane[3];return V.projectPointSignedLength(O(f),z)-M}function ba(f,z,M,T){const ia=x(f,z);f=v.scale(e,O(f),M-ia);v.add(T,z,f);return T}function D(f,z){return v.exactEquals(f.basis1,z.basis1)&&v.exactEquals(f.basis2,z.basis2)&&v.exactEquals(f.origin,z.origin)}function H(f,z,M){f!==M&&g(f,M);A.invert(Q,z);
A.transpose(Q,Q);v.transformMat4(M.basis1,f.basis1,Q);v.transformMat4(M.basis2,f.basis2,Q);v.transformMat4(L.normal(M.plane),L.normal(f.plane),Q);v.transformMat4(M.origin,f.origin,z);L.setOffsetFromPoint(M.plane,M.origin,M.plane);return M}function P(f,z,M,T){f!==T&&g(f,T);A.rotate(C,A.identity(C),z,M);v.transformMat4(T.basis1,f.basis1,C);v.transformMat4(T.basis2,f.basis2,C);l(T);return T}function O(f){return L.normal(f.plane)}function ja(f,z){const M=v.subtract(q.sv3d.get(),z,f.origin);z=v.squaredLength(f.basis1);
const T=v.squaredLength(f.basis2),ia=v.dot(f.basis1,M);f=v.dot(f.basis2,M);return 0>-ia-z&&0>ia-z&&0>-f-T&&0>f-T}function B(f,z){const M=a.get();v.copy(M.origin,f.origin);v.copy(M.vector,z);return M}function J(f,z,M){const {basis1:T,basis2:ia,origin:la}=f;f=v.scale(q.sv3d.get(),T,z.origin[0]);const sa=v.scale(q.sv3d.get(),ia,z.origin[1]);v.add(M.origin,f,sa);v.add(M.origin,M.origin,la);f=v.scale(q.sv3d.get(),T,z.direction[0]);z=v.scale(q.sv3d.get(),ia,z.direction[1]);v.scale(M.vector,v.add(f,f,z),
2);return M}function fa(f,z,M,T){f=O(f);L.fromVectorsAndPoint(f,z.direction,z.origin,M);L.fromVectorsAndPoint(L.normal(M),f,z.origin,T)}const na=m.getLogger("esri.views.3d.support.geometryUtils.boundedPlane");d=function(){this.plane=L.create();this.origin=U.create();this.basis1=U.create();this.basis2=U.create()};const va={plane:L.create(),origin:U.fromValues(0,0,0),basis1:U.fromValues(1,0,0),basis2:U.fromValues(0,1,0)},Y=new w.ObjectStack(L.create),a=new w.ObjectStack(F.create),e=U.create(),y=new w.ObjectStack(()=>
({origin:null,basis1:null,basis2:null,plane:null})),E=[{origin:[-1,-1],direction:[1,0]},{origin:[1,-1],direction:[0,1]},{origin:[1,1],direction:[-1,0]},{origin:[-1,1],direction:[0,-1]}],Q=K.create(),C=K.create();w=Object.freeze({__proto__:null,BoundedPlaneClass:d,create:n,wrap:c,copy:g,copyWithoutVerify:h,fromValues:p,updateUnboundedPlane:l,elevate:t,setExtent:I,fromAABoundingRect:X,intersectRay:ha,intersectRayClosestSilhouette:N,closestPointOnSilhouette:r,closestPoint:da,projectPoint:pa,projectPointLocal:ra,
distance2:ta,distance:oa,distanceToSilhouette:R,extrusionContainsPoint:ca,axisAt:k,altitudeAt:x,setAltitudeAt:ba,equals:D,transform:H,rotate:P,normal:O,UP:va});b.BoundedPlaneClass=d;b.UP=va;b.altitudeAt=x;b.axisAt=k;b.boundedPlane=w;b.closestPoint=da;b.closestPointOnSilhouette=r;b.copy=g;b.copyWithoutVerify=h;b.create=n;b.distance=oa;b.distance2=ta;b.distanceToSilhouette=R;b.elevate=t;b.equals=D;b.extrusionContainsPoint=ca;b.fromAABoundingRect=X;b.fromValues=p;b.intersectRay=ha;b.intersectRayClosestSilhouette=
N;b.normal=O;b.projectPoint=pa;b.projectPointLocal=ra;b.rotate=P;b.setAltitudeAt=ba;b.setExtent=I;b.transform=H;b.updateUnboundedPlane=l;b.wrap=c})},"esri/geometry/support/lineSegment":function(){define("exports ../../core/mathUtils ../../core/ObjectStack ../../chunks/vec3 ../../chunks/vec3f64 ./vectorStacks".split(" "),function(b,d,m,u,w,A){function K(n){return n?{origin:w.clone(n.origin),vector:w.clone(n.vector)}:{origin:w.create(),vector:w.create()}}function v(n,c){const g=q.get();g.origin=n;g.vector=
c;return g}function U(n,c,g=K()){u.copy(g.origin,n);u.copy(g.vector,c);return g}function F(n,c){c=u.subtract(A.sv3d.get(),c,n.origin);var g=u.dot(n.vector,c);const h=u.dot(n.vector,n.vector);g=d.clamp(g/h,0,1);n=u.subtract(A.sv3d.get(),u.scale(A.sv3d.get(),n.vector,g),c);return u.dot(n,n)}function L(n,c,g,h,p){const {vector:l,origin:t}=n;c=u.subtract(A.sv3d.get(),c,t);c=u.dot(l,c)/u.squaredLength(l);u.scale(p,l,d.clamp(c,g,h));return u.add(p,p,n.origin)}function G(n,c,g,h){const p=n.origin;var l=
u.add(A.sv3d.get(),p,n.vector);n=c.origin;var t=u.add(A.sv3d.get(),n,c.vector),I=A.sv3d.get();c=A.sv3d.get();I[0]=p[0]-n[0];I[1]=p[1]-n[1];I[2]=p[2]-n[2];c[0]=t[0]-n[0];c[1]=t[1]-n[1];c[2]=t[2]-n[2];if(1E-6>Math.abs(c[0])&&1E-6>Math.abs(c[1])&&1E-6>Math.abs(c[2]))return!1;t=A.sv3d.get();t[0]=l[0]-p[0];t[1]=l[1]-p[1];t[2]=l[2]-p[2];if(1E-6>Math.abs(t[0])&&1E-6>Math.abs(t[1])&&1E-6>Math.abs(t[2]))return!1;l=I[0]*c[0]+I[1]*c[1]+I[2]*c[2];var X=c[0]*t[0]+c[1]*t[1]+c[2]*t[2];const ha=c[0]*c[0]+c[1]*c[1]+
c[2]*c[2],N=(t[0]*t[0]+t[1]*t[1]+t[2]*t[2])*ha-X*X;if(1E-6>Math.abs(N))return!1;I=(l*X-(I[0]*t[0]+I[1]*t[1]+I[2]*t[2])*ha)/N;l=(l+X*I)/ha;g&&(I=d.clamp(I,0,1),l=d.clamp(l,0,1));g=A.sv3d.get();X=A.sv3d.get();g[0]=p[0]+I*t[0];g[1]=p[1]+I*t[1];g[2]=p[2]+I*t[2];X[0]=n[0]+l*c[0];X[1]=n[1]+l*c[1];X[2]=n[2]+l*c[2];h.tA=I;h.tB=l;h.pA=g;h.pB=X;h.distance2=u.squaredDistance(g,X);return!0}const V={tA:0,tB:0,pA:w.create(),pB:w.create(),distance2:0},q=new m.ObjectStack(()=>({origin:null,vector:null}));b.closestLineSegmentDistance2=
function(n,c){return G(n,c,!0,V)?V.distance2:null};b.closestLineSegmentPoint=function(n,c,g){return G(n,c,!0,V)?(u.copy(g,V.pA),!0):!1};b.closestRayDistance2=function(n,c){if(G(n,v(c.origin,c.direction),!1,V)){const {tA:g,pB:h,distance2:p}=V;if(0<=g&&1>=g)return p;if(0>g)return u.squaredDistance(n.origin,h);if(1<g)return u.squaredDistance(u.add(A.sv3d.get(),n.origin,n.vector),h)}return null};b.copy=function(n,c=K()){return U(n.origin,n.vector,c)};b.create=K;b.distance=function(n,c){return Math.sqrt(F(n,
c))};b.distance2=F;b.fromPoints=function(n,c,g=K()){u.copy(g.origin,n);u.subtract(g.vector,c,n);return g};b.fromValues=U;b.pointAt=function(n,c,g){return u.add(g,n.origin,u.scale(g,n.vector,c))};b.projectPoint=function(n,c,g){return L(n,c,0,1,g)};b.projectPointClamp=L;b.wrap=v;Object.defineProperty(b,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/Object3D":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../chunks/mat4 ../../../../chunks/mat4f64 ../../../../chunks/vec3 ../../../../chunks/vec3f64 ../../../../chunks/sphere ../../support/mathUtils ./ContentObject ./GeometryRecord ./Object3DStateID ./Util ../materials/renderers/utils".split(" "),
function(b,d,m,u,w,A,K,v,U,F,L,G,V,q){F=function(g){function h(l={}){var t=g.call(this)||this;t.type=1;t._geometryRecords=[];t._geometries=[];t._objectTransformation=w.create();t._bvObjectSpace=new c;t._bvWorldSpace=new c;t._bvDirty=!0;t._hasVolatileTransformation=!1;t._visible=!0;t.castShadow=null!=l.castShadow?l.castShadow:!0;t.metadata=l.metadata;t.metadata&&t.metadata.isElevationSource&&(t.metadata.lastValidElevationBB=new n);t.transformation=w.create();const {geometries:I,materials:X,transformations:ha,
origins:N}=l;if(!Array.isArray(I))return d._assertThisInitialized(t);V.assert(X.length===I.length,"Object3D: materials don't match geometries");V.assert(ha.length===I.length,"Object3D: transformations don't match geometries");t._geometryRecords.length=I.length;t._geometries.length=I.length;for(l=0;l<I.length;l++)t._geometries[l]=I[l],t._geometryRecords[l]=L.GeometryRecord.pool.acquire(I[l],X[l],w.clone(ha[l]),{highlights:null,occludees:null,visible:!0},N&&N[l]);return t}d._inheritsLoose(h,g);var p=
h.prototype;p.dispose=function(){this._geometryRecords.length=0;this._geometries.length=0};p.getNumGeometryRecords=function(){return this._geometryRecords.length};p.getGeometryRecord=function(l){V.assert(0<=l&&l<this._geometryRecords.length,"Object3d.getGeometryDataByIndex: index out of range");return this._geometryRecords[l]};p.addGeometry=function(l,t,I,X,ha,N){I=I?I:w.IDENTITY;this._geometries.push(l);l=L.GeometryRecord.pool.acquire(l,t,I,X||{highlights:null,occludees:null,visible:!0},ha,N);this._geometryRecords.push(l);
this._hasVolatileTransformation=this._hasVolatileTransformation||m.isSome(l.shaderTransformation);this._emit("objectGeometryAdded",{object:this,record:l});this._invalidateBoundingVolume();return l};p.removeGeometry=function(l){const t=this._geometryRecords.splice(l,1)[0];this._hasVolatileTransformation=m.isSome(t.shaderTransformation)?this._geometryRecords.some(I=>m.isSome(I.shaderTransformation)):this._hasVolatileTransformation;t.dispose();this._geometries.splice(l,1);this._emit("objectGeometryRemoved",
{object:this,record:t});this._invalidateBoundingVolume();return t};p.removeAllGeometries=function(){for(;0<this.getNumGeometryRecords();)this.removeGeometry(0)};p.geometryVertexAttrsUpdated=function(l){this._emit("vertexAttrsUpdated",{object:this,record:this._geometryRecords[l]});this._invalidateBoundingVolume()};p.setVisible=function(l){this._visible=l;for(const t of this._geometryRecords)t.instanceParameters.visible=this._visible;this._emit("visibilityChanged",this)};p.maskOccludee=function(){const l=
new G.Object3DStateID(1);for(const t of this._geometryRecords)t.instanceParameters.occludees=q.addObject3DStateID(t.instanceParameters.occludees,l);this._emit("occlusionChanged",this);return l};p.removeOcclude=function(l){for(const t of this._geometryRecords)t.instanceParameters.occludees=q.removeObject3DStateID(t.instanceParameters.occludees,l);this._emit("occlusionChanged",this)};p.highlight=function(){const l=new G.Object3DStateID(0);for(const t of this._geometryRecords)t.instanceParameters.highlights=
q.addObject3DStateID(t.instanceParameters.highlights,l);this._emit("highlightChanged",this);return l};p.removeHighlight=function(l){for(const t of this._geometryRecords)t.instanceParameters.highlights=q.removeObject3DStateID(t.instanceParameters.highlights,l);this._emit("highlightChanged",this)};p.getCombinedStaticTransformation=function(l,t){return u.multiply(m.unwrapOr(t,w.create()),this.transformation,l.getStaticTransformation())};p.getCombinedShaderTransformation=function(l,t){t=t||w.create();
u.multiply(t,this.transformation,l.getShaderTransformation());return t};p.hasVolativeTransformation=function(){return this._hasVolatileTransformation};p._validateBoundingVolume=function(){if(this._bvDirty||this._hasVolatileTransformation){this._bvObjectSpace.init();this._bvWorldSpace.init();for(var l=0;l<this._geometryRecords.length;++l){var t=this._geometryRecords[l],I=this._geometries[l].boundingInfo;m.isSome(I)&&(this._calculateTransformedBoundingVolume(I,this._bvObjectSpace,t.getShaderTransformation()),
this._calculateTransformedBoundingVolume(I,this._bvWorldSpace,this.getCombinedShaderTransformation(t)))}A.lerp(this._bvObjectSpace.bounds,this._bvObjectSpace.min,this._bvObjectSpace.max,.5);A.lerp(this._bvWorldSpace.bounds,this._bvWorldSpace.min,this._bvWorldSpace.max,.5);l=K.create();t=K.create();I=U.maxScale(this.transformation);for(let r=0;r<this._geometryRecords.length;++r){var X=this._geometries[r].boundingInfo;if(!m.isNone(X)){var ha=this._geometryRecords[r].getShaderTransformation(),N=U.maxScale(ha);
A.transformMat4(l,X.getCenter(),ha);ha=A.distance(l,this._bvObjectSpace.bounds);X=X.getBSRadius()*N;this._bvObjectSpace.bounds[3]=Math.max(this._bvObjectSpace.bounds[3],ha+X);A.transformMat4(t,l,this.transformation);N=A.distance(t,this._bvWorldSpace.bounds);this._bvWorldSpace.bounds[3]=Math.max(this._bvWorldSpace.bounds[3],N+X*I)}}this._bvDirty=!1}};p._calculateTransformedBoundingVolume=function(l,t,I){const X=l.getBBMin();l=l.getBBMax();const ha=K.clone(X),N=K.clone(l);A.transformMat4(ha,ha,I);A.transformMat4(N,
N,I);for(var r=0;3>r;++r)t.min[r]=Math.min(t.min[r],ha[r],N[r]),t.max[r]=Math.max(t.max[r],ha[r],N[r]);for(r=0;3>r;++r){A.copy(ha,X);A.copy(N,l);ha[r]=l[r];N[r]=X[r];A.transformMat4(ha,ha,I);A.transformMat4(N,N,I);for(let da=0;3>da;++da)t.min[da]=Math.min(t.min[da],ha[da],N[da]),t.max[da]=Math.max(t.max[da],ha[da],N[da])}};p._invalidateBoundingVolume=function(){this._bvDirty=!0;m.isSome(this._parentLayer)&&this._parentLayer.notifyObjectBBChanged(this,this._bvWorldSpace.bounds)};p._emit=function(l,
t){m.isSome(this._parentLayer)&&this._parentLayer.events.emit(l,t)};d._createClass(h,[{key:"geometryRecords",get:function(){return this._geometryRecords}},{key:"geometries",get:function(){return this._geometries}},{key:"transformation",get:function(){return this._objectTransformation},set:function(l){u.copy(this._objectTransformation,l);this._invalidateBoundingVolume();this._emit("objectTransformation",this)}},{key:"parentLayer",get:function(){return this._parentLayer},set:function(l){V.assert(null==
this._parentLayer||null==l,"Object3D can only be added to a single Layer");this._parentLayer=l}},{key:"isVisible",get:function(){return this._visible}},{key:"boundingVolumeWorldSpace",get:function(){this._validateBoundingVolume();return this._bvWorldSpace}},{key:"boundingVolumeObjectSpace",get:function(){this._validateBoundingVolume();return this._bvObjectSpace}},{key:"test",get:function(){const l=this;return{hasGeometry:t=>-1<l._geometries.indexOf(t),getGeometryIndex:t=>l._geometries.indexOf(t)}}}]);
return h}(F.ContentObject);let n=function(){function g(){this.min=K.fromValues(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE);this.max=K.fromValues(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE)}g.prototype.isEmpty=function(){return this.max[0]<this.min[0]&&this.max[1]<this.min[1]&&this.max[2]<this.min[2]};return g}(),c=function(g){function h(){var p=g.apply(this,arguments)||this;p.bounds=v.create();return p}d._inheritsLoose(h,g);h.prototype.init=function(){A.set(this.min,Number.MAX_VALUE,
Number.MAX_VALUE,Number.MAX_VALUE);A.set(this.max,-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);v.clear(this.bounds)};return h}(n);b.Object3D=F;Object.defineProperty(b,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/ContentObject":function(){define(["exports","../../../../core/uid"],function(b,d){let m=function(){function u(){this.id=d.generateUID()}u.prototype.unload=function(){};return u}();b.ContentObject=m;Object.defineProperty(b,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/GeometryRecord":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../core/ObjectPool ../../../../core/uid ../../../../chunks/vec3".split(" "),
function(b,d,m,u,w,A){let K=function(){function v(){this._disposed=!1}var U=v.prototype;U.acquire=function(F,L,G,V,q,n){this.id=w.generateUID();this.geometry=F;this.material=L;this.transformation=G;this.instanceParameters=V;this.origin=q;this._shaderTransformation=n;this._disposed=!1};U.release=function(){this._disposed=!1};U.dispose=function(){this._disposed=!0};U.getStaticTransformation=function(){return this.transformation};U.getShaderTransformation=function(){return m.isSome(this._shaderTransformation)?
this._shaderTransformation(this.transformation):this.transformation};U.computeAttachmentOrigin=function(F){return(this.material.computeAttachmentOrigin?this.material.computeAttachmentOrigin(this.geometry,F):this.geometry.computeAttachmentOrigin(F))?(A.transformMat4(F,F,this.getStaticTransformation()),!0):!1};d._createClass(v,[{key:"disposed",get:function(){return this._disposed}},{key:"shaderTransformation",get:function(){return this._shaderTransformation}}]);return v}();K.pool=new u(K);b.GeometryRecord=
K;Object.defineProperty(b,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/Object3DStateID":function(){define(["exports","../../../../core/uid"],function(b,d){b.Object3DStateID=function(m){this.channel=m;this.id=d.generateUID()};Object.defineProperty(b,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/Util":function(){define("exports ../../../../core/mathUtils ../../../../chunks/mat4 ../../../../chunks/vec2 ../../../../chunks/vec2f64 ../../../../chunks/vec3f64 ../../../../chunks/vec4 ../../../../chunks/vec4f64".split(" "),
function(b,d,m,u,w,A,K,v){function U(h,p){if(!h)throw p=p||"assert",h=Error(p),h.stack&&console.log(h.stack),new q(p);}function F(h,p){h[12]=p[0];h[13]=p[1];h[14]=p[2]}function L(h,p=0){let l=0;for(let t=0;4>t;t++)l+=h[p+t]*c[t];return l}function G(h){return h-Math.floor(h)}const V=v.create();let q=function(){function h(p){this.message=p}h.prototype.toString=function(){return`AssertException: ${this.message}`};return h}();const n=[1,256,65536,16777216],c=[1/256,1/65536,1/16777216,1/4294967296],g=
L(new Uint8ClampedArray([255,255,255,255]));b.AssertException=q;b.assert=U;b.createTranslationMatrix=function(h,p){h=m.identity(h);F(h,p);return h};b.dec2hex=function(h){h=h.toString(16);return"00000000".substr(0,8-h.length)+h};b.encodeInt16=function(h){return d.clamp(Math.round(32767*h),-32767,32767)};b.encodeNormal=function(h,p){const l=Math.abs(h[0]),t=Math.abs(h[1]),I=1/(l+t+Math.abs(h[2])),X=Math.min(h[2]*I,0);p[0]=(0>h[0]?-1:1)*(l*I-X);p[1]=(0>h[1]?-1:1)*(t*I-X)};b.fallbackIfUndefined=function(h,
p){return void 0===h?p:h};b.fovd2fovx=function(h,p,l){return 2*Math.atan(p*Math.tan(.5*h)/Math.sqrt(p*p+l*l))};b.fovd2fovy=function(h,p,l){return 2*Math.atan(l*Math.tan(.5*h)/Math.sqrt(p*p+l*l))};b.fovx2fovd=function(h,p,l){return 2*Math.atan(Math.sqrt(p*p+l*l)*Math.tan(.5*h)/p)};b.fovx2fovy=function(h,p,l){return 2*Math.atan(l*Math.tan(.5*h)/p)};b.fovy2fovd=function(h,p,l){return 2*Math.atan(Math.sqrt(p*p+l*l)*Math.tan(.5*h)/l)};b.fovy2fovx=function(h,p,l){return 2*Math.atan(p*Math.tan(.5*h)/l)};
b.getFirstObjectKey=function(h){for(const p in h)return p};b.getMatrixTranslation=function(h,p=A.create()){p[0]=h[12];p[1]=h[13];p[2]=h[14];return p};b.hex2rgb=function(h){h=Math.floor(h);return[(h>>16&255)/255,(h>>8&255)/255,(h&255)/255]};b.inverseProjectionInfo=function(h,p,l,t,I){0===h[11]?(t[0]=2/(p*h[0]),t[1]=2/(l*h[5]),t[2]=(1+h[12])/h[0],t[3]=(1+h[13])/h[5],u.set(I,0,1)):(t[0]=-2/(p*h[0]),t[1]=-2/(l*h[5]),t[2]=(1-h[8])/h[0],t[3]=(1-h[9])/h[5],u.set(I,1,0))};b.isTranslationMatrix=function(h){return 1===
h[0]&&0===h[1]&&0===h[2]&&0===h[3]&&0===h[4]&&1===h[5]&&0===h[6]&&0===h[7]&&0===h[8]&&0===h[9]&&1===h[10]&&0===h[11]&&1===h[15]};b.logWithBase=function(h,p){return Math.log(h)/Math.log(p)};b.objectEmpty=function(h){for(const p in h)return!1;return!0};b.packFloatRGBA=function(h,p,l=0){h=d.clamp(h,0,g);for(let t=0;4>t;t++)p[l+t]=Math.floor(256*G(h*n[t]))};b.project=function(h,p,l,t,I){I||(I=h);V[0]=h[0];V[1]=h[1];V[2]=h[2];V[3]=1;K.transformMat4(V,V,p);2<I.length&&(I[2]=-V[2]);K.transformMat4(V,V,l);
U(0!==V[3]);I[0]=V[0]/V[3];I[1]=V[1]/V[3];I[2]=V[2]/V[3];I[0]=(.5*I[0]+.5)*t[2]+t[0];I[1]=(.5*I[1]+.5)*t[3]+t[1]};b.rayBoxTest=function(h,p,l,t){let I,X=(l[0]-h[0])/p[0],ha=(t[0]-h[0])/p[0];X>ha&&(I=X,X=ha,ha=I);let N=(l[1]-h[1])/p[1],r=(t[1]-h[1])/p[1];N>r&&(I=N,N=r,r=I);if(X>r||N>ha)return!1;N>X&&(X=N);r<ha&&(ha=r);l=(l[2]-h[2])/p[2];h=(t[2]-h[2])/p[2];l>h&&(I=l,l=h,h=I);if(X>h||l>ha)return!1;h<ha&&(ha=h);return 0>ha?!1:!0};b.rayRay2D=function(h,p,l,t,I,X=w.create()){const ha=(t[I]-l[I])*(p[0]-
h[0])-(t[0]-l[0])*(p[I]-h[I]);if(0===ha)return!1;l=((t[0]-l[0])*(h[I]-l[I])-(t[I]-l[I])*(h[0]-l[0]))/ha;X[0]=h[0]+l*(p[0]-h[0]);X[1]=h[I]+l*(p[I]-h[I]);return!0};b.rayTriangle3D=function(h,p,l,t,I,X,ha,N,r=A.create()){var da=t[ha]-l[X];const pa=t[ha+1]-l[X+1],ra=t[ha+2]-l[X+2];t=I[N]-l[X];ha=I[N+1]-l[X+1];I=I[N+2]-l[X+2];const ta=p[1]*I-ha*p[2],oa=p[2]*t-I*p[0],R=p[0]*ha-t*p[1];N=da*ta+pa*oa+ra*R;if(-1E-5<N&&1E-5>N)return!1;N=1/N;const ca=h[0]-l[X],k=h[1]-l[X+1];h=h[2]-l[X+2];r[1]=N*(ca*ta+k*oa+h*
R);if(0>r[1]||1<r[1])return!1;l=k*ra-pa*h;h=h*da-ra*ca;da=ca*pa-da*k;r[2]=N*(p[0]*l+p[1]*h+p[2]*da);if(0>r[2]||1<r[1]+r[2])return!1;r[0]=N*(t*l+ha*h+I*da);return!0};b.rgb2hex=function(h){const p=d.clamp(Math.round(255*h[0]),0,255),l=d.clamp(Math.round(255*h[1]),0,255);h=d.clamp(Math.round(255*h[2]),0,255);return"0x"+((p<<16)+(l<<8)+h).toString(16)};b.setMatrixTranslation=F;b.setMatrixTranslation3=function(h,p,l,t){h[12]=p;h[13]=l;h[14]=t};b.unpackFloatRGBA=L;b.verify=function(h,p){h||console.warn("Verify failed: "+
(p||"")+"\n"+Error("verify").stack)};Object.defineProperty(b,"__esModule",{value:!0})})},"esri/chunks/vec2":function(){define(["exports","./common"],function(b,d){function m(D,H){D[0]=H[0];D[1]=H[1];return D}function u(D,H,P){D[0]=H;D[1]=P;return D}function w(D,H,P){D[0]=H[0]+P[0];D[1]=H[1]+P[1];return D}function A(D,H,P){D[0]=H[0]-P[0];D[1]=H[1]-P[1];return D}function K(D,H,P){D[0]=H[0]*P[0];D[1]=H[1]*P[1];return D}function v(D,H,P){D[0]=H[0]/P[0];D[1]=H[1]/P[1];return D}function U(D,H){D[0]=Math.ceil(H[0]);
D[1]=Math.ceil(H[1]);return D}function F(D,H){D[0]=Math.floor(H[0]);D[1]=Math.floor(H[1]);return D}function L(D,H,P){D[0]=Math.min(H[0],P[0]);D[1]=Math.min(H[1],P[1]);return D}function G(D,H,P){D[0]=Math.max(H[0],P[0]);D[1]=Math.max(H[1],P[1]);return D}function V(D,H){D[0]=Math.round(H[0]);D[1]=Math.round(H[1]);return D}function q(D,H,P){D[0]=H[0]*P;D[1]=H[1]*P;return D}function n(D,H,P,O){D[0]=H[0]+P[0]*O;D[1]=H[1]+P[1]*O;return D}function c(D,H){const P=H[0]-D[0];D=H[1]-D[1];return Math.sqrt(P*
P+D*D)}function g(D,H){const P=H[0]-D[0];D=H[1]-D[1];return P*P+D*D}function h(D){const H=D[0];D=D[1];return Math.sqrt(H*H+D*D)}function p(D){const H=D[0];D=D[1];return H*H+D*D}function l(D,H){D[0]=-H[0];D[1]=-H[1];return D}function t(D,H){D[0]=1/H[0];D[1]=1/H[1];return D}function I(D,H){var P=H[0];const O=H[1];P=P*P+O*O;0<P&&(P=1/Math.sqrt(P),D[0]=H[0]*P,D[1]=H[1]*P);return D}function X(D,H){return D[0]*H[0]+D[1]*H[1]}function ha(D,H,P){H=H[0]*P[1]-H[1]*P[0];D[0]=D[1]=0;D[2]=H;return D}function N(D,
H,P,O){const ja=H[0];H=H[1];D[0]=ja+O*(P[0]-ja);D[1]=H+O*(P[1]-H);return D}function r(D,H){H=H||1;const P=2*d.RANDOM()*Math.PI;D[0]=Math.cos(P)*H;D[1]=Math.sin(P)*H;return D}function da(D,H,P){const O=H[0];H=H[1];D[0]=P[0]*O+P[2]*H;D[1]=P[1]*O+P[3]*H;return D}function pa(D,H,P){const O=H[0];H=H[1];D[0]=P[0]*O+P[2]*H+P[4];D[1]=P[1]*O+P[3]*H+P[5];return D}function ra(D,H,P){const O=H[0];H=H[1];D[0]=P[0]*O+P[3]*H+P[6];D[1]=P[1]*O+P[4]*H+P[7];return D}function ta(D,H,P){const O=H[0];H=H[1];D[0]=P[0]*
O+P[4]*H+P[12];D[1]=P[1]*O+P[5]*H+P[13];return D}function oa(D,H,P,O){const ja=H[0]-P[0];H=H[1]-P[1];const B=Math.sin(O);O=Math.cos(O);D[0]=ja*O-H*B+P[0];D[1]=ja*B+H*O+P[1];return D}function R(D,H){var P=D[0];D=D[1];const O=H[0];H=H[1];let ja=P*P+D*D;0<ja&&(ja=1/Math.sqrt(ja));let B=O*O+H*H;0<B&&(B=1/Math.sqrt(B));P=(P*O+D*H)*ja*B;return 1<P?0:-1>P?Math.PI:Math.acos(P)}function ca(D){return"vec2("+D[0]+", "+D[1]+")"}function k(D,H){return D[0]===H[0]&&D[1]===H[1]}function x(D,H){const P=D[0];D=D[1];
const O=H[0];H=H[1];return Math.abs(P-O)<=d.EPSILON*Math.max(1,Math.abs(P),Math.abs(O))&&Math.abs(D-H)<=d.EPSILON*Math.max(1,Math.abs(D),Math.abs(H))}var ba=Object.freeze({__proto__:null,copy:m,set:u,add:w,subtract:A,multiply:K,divide:v,ceil:U,floor:F,min:L,max:G,round:V,scale:q,scaleAndAdd:n,distance:c,squaredDistance:g,length:h,squaredLength:p,negate:l,inverse:t,normalize:I,dot:X,cross:ha,lerp:N,random:r,transformMat2:da,transformMat2d:pa,transformMat3:ra,transformMat4:ta,rotate:oa,angle:R,str:ca,
exactEquals:k,equals:x,len:h,sub:A,mul:K,div:v,dist:c,sqrDist:g,sqrLen:p});b.add=w;b.angle=R;b.ceil=U;b.copy=m;b.cross=ha;b.dist=c;b.distance=c;b.div=v;b.divide=v;b.dot=X;b.equals=x;b.exactEquals=k;b.floor=F;b.inverse=t;b.len=h;b.length=h;b.lerp=N;b.max=G;b.min=L;b.mul=K;b.multiply=K;b.negate=l;b.normalize=I;b.random=r;b.rotate=oa;b.round=V;b.scale=q;b.scaleAndAdd=n;b.set=u;b.sqrDist=g;b.sqrLen=p;b.squaredDistance=g;b.squaredLength=p;b.str=ca;b.sub=A;b.subtract=A;b.transformMat2=da;b.transformMat2d=
pa;b.transformMat3=ra;b.transformMat4=ta;b.vec2=ba})},"esri/views/3d/webgl-engine/materials/renderers/utils":function(){define("exports ../../../../../core/maybe ../../../../../chunks/mat4 ../../../../../chunks/mat4f64 ../../lib/doublePrecisionUtils ../../lib/Util".split(" "),function(b,d,m,u,w,A){const K=new Float64Array(3),v=new Float32Array(6),U=u.create();b.acquireMaterials=function(F,L){const G=new Map;G.set(0,L.acquire(F,0));G.set(1,L.acquire(F,7));G.set(4,L.acquire(F,3));G.set(3,L.acquire(F,
2));G.set(2,L.acquire(F,1));G.set(5,L.acquire(F,4));G.set(7,L.acquire(F,3));G.set(6,L.acquire(F,3));return G};b.addObject3DStateID=function(F,L){d.isNone(F)&&(F=[]);F.push(L);return F};b.calculateTransformRelativeToOrigin=function(F,L,G){const V=F.origin.vec3;A.setMatrixTranslation3(U,-V[0],-V[1],-V[2]);d.isSome(F.transformation)?m.multiply(L,U,F.transformation):m.copy(L,U);G&&(m.invert(G,L),m.transpose(G,G))};b.encodeDoubleVec3=function(F,L,G,V,q){K[0]=F.get(L,0);K[1]=F.get(L,1);K[2]=F.get(L,2);
w.encodeDoubleArray(K,v,3);G.set(q,0,v[0]);V.set(q,0,v[1]);G.set(q,1,v[2]);V.set(q,1,v[3]);G.set(q,2,v[4]);V.set(q,2,v[5])};b.isInstanceHidden=function(F){return d.isSome(F)?!F.visible:!1};b.releaseMaterials=function(F,L){L.release(F,0);L.release(F,7);L.release(F,3);L.release(F,2);L.release(F,1);L.release(F,4)};b.removeObject3DStateID=function(F,L){if(d.isNone(F))return F;F=F.filter(G=>G!==L);return 0===F.length?null:F};Object.defineProperty(b,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/doublePrecisionUtils":function(){define(["exports"],
function(b){function d(w,A,K){for(let v=0;v<K;++v)A[2*v]=w[v],A[2*v+1]=w[v]-A[2*v]}const m=new Float64Array(1),u=new Float32Array(2);b.decodeDoubleArray=function(w,A,K){for(let v=0;v<K;++v)A[v]=w[2*v]+w[2*v+1]};b.encodeDouble=function(w,A){u[0]=w;u[1]=w-u[0];A[0]=u[0];A[1]=u[1]};b.encodeDoubleArray=d;b.encodeDoubleArraySplit=function(w,A,K,v){for(let U=0;U<v;++U)m[0]=w[U],d(m,u,1),A[U]=u[0],K[U]=u[1]};Object.defineProperty(b,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/verticalOffsetUtils":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../chunks/mat3 ../../../../chunks/mat3f64 ../../../../chunks/mat4 ../../../../chunks/mat4f64 ../../../../chunks/quat ../../../../chunks/quatf64 ../../../../chunks/vec3 ../../../../chunks/vec3f32 ../../../../chunks/vec3f64 ../../../../chunks/vec4f64 ../../../../chunks/sphere".split(" "),
function(b,d,m,u,w,A,K,v,U,F,L,G,V,q){let n=function(){function ha(){this._transform=K.create();this._transformInverse=new c({value:this._transform},A.invert,K.create);this._transformInverseTranspose=new c(this._transformInverse,A.transpose,K.create);this._transformTranspose=new c({value:this._transform},A.transpose,K.create);this._transformInverseRotation=new c({value:this._transform},u.normalFromMat4Legacy,w.create)}var N=ha.prototype;N.invalidateLazyTransforms=function(){this._transformInverse.invalidate();
this._transformInverseTranspose.invalidate();this._transformTranspose.invalidate();this._transformInverseRotation.invalidate()};N.setTransformMatrix=function(r){A.copy(this._transform,r)};N.multiplyTransform=function(r){A.multiply(this._transform,this._transform,r)};N.set=function(r){A.copy(this._transform,r);this.invalidateLazyTransforms()};N.setAndInvalidateLazyTransforms=function(r,da){this.setTransformMatrix(r);this.multiplyTransform(da);this.invalidateLazyTransforms()};d._createClass(ha,[{key:"transform",
get:function(){return this._transform}},{key:"inverse",get:function(){return this._transformInverse.value}},{key:"inverseTranspose",get:function(){return this._transformInverseTranspose.value}},{key:"inverseRotation",get:function(){return this._transformInverseRotation.value}},{key:"transpose",get:function(){return this._transformTranspose.value}}]);return ha}(),c=function(){function ha(N,r,da){this.original=N;this.update=r;this.dirty=!0;this.transform=da()}ha.prototype.invalidate=function(){this.dirty=
!0};d._createClass(ha,[{key:"value",get:function(){this.dirty&&(this.update(this.transform,this.original.value),this.dirty=!1);return this.transform}}]);return ha}(),g=function(){function ha(r=0){this.offset=r;this.tmpVertex=G.create()}var N=ha.prototype;N.applyToVertex=function(r,da,pa){const ra=r+this.localOrigin[0],ta=da+this.localOrigin[1],oa=pa+this.localOrigin[2],R=this.offset/Math.sqrt(ra*ra+ta*ta+oa*oa);this.tmpVertex[0]=r+ra*R;this.tmpVertex[1]=da+ta*R;this.tmpVertex[2]=pa+oa*R;return this.tmpVertex};
N.applyToAabb=function(r){var da=r[0]+this.localOrigin[0];const pa=r[1]+this.localOrigin[1],ra=r[2]+this.localOrigin[2],ta=r[3]+this.localOrigin[0],oa=r[4]+this.localOrigin[1],R=r[5]+this.localOrigin[2],ca=this.offset/Math.sqrt(da*da+pa*pa+ra*ra);r[0]+=da*ca;r[1]+=pa*ca;r[2]+=ra*ca;da=this.offset/Math.sqrt(ta*ta+oa*oa+R*R);r[3]+=ta*da;r[4]+=oa*da;r[5]+=R*da;return r};return ha}(),h=function(){function ha(r=0){this.offset=r;this.componentLocalOriginLength=0;this.tmpVertex=G.create();this.mbs=V.create();
this.obb={center:G.create(),halfSize:L.create(),quaternion:null}}var N=ha.prototype;N.applyToVertex=function(r,da,pa){const ra=pa+this.componentLocalOriginLength,ta=this.offset/Math.sqrt(r*r+da*da+ra*ra);this.tmpVertex[0]=r+r*ta;this.tmpVertex[1]=da+da*ta;this.tmpVertex[2]=pa+ra*ta;return this.tmpVertex};N.applyToAabb=function(r){var da=r[0];const pa=r[1],ra=r[2]+this.componentLocalOriginLength,ta=r[3],oa=r[4],R=r[5]+this.componentLocalOriginLength,ca=this.offset/Math.sqrt(da*da+pa*pa+ra*ra);r[0]+=
da*ca;r[1]+=pa*ca;r[2]+=ra*ca;da=this.offset/Math.sqrt(ta*ta+oa*oa+R*R);r[3]+=ta*da;r[4]+=oa*da;r[5]+=R*da;return r};N.applyToMbs=function(r){const da=Math.sqrt(r[0]*r[0]+r[1]*r[1]+r[2]*r[2]),pa=this.offset/da;this.mbs[0]=r[0]+r[0]*pa;this.mbs[1]=r[1]+r[1]*pa;this.mbs[2]=r[2]+r[2]*pa;this.mbs[3]=r[3]+r[3]*this.offset/da;return this.mbs};N.applyToObb=function(r){var da=r.center;const pa=this.offset/Math.sqrt(da[0]*da[0]+da[1]*da[1]+da[2]*da[2]);this.obb.center[0]=da[0]+da[0]*pa;this.obb.center[1]=
da[1]+da[1]*pa;this.obb.center[2]=da[2]+da[2]*pa;F.transformQuat(this.obb.halfSize,r.halfSize,r.quaternion);F.add(this.obb.halfSize,this.obb.halfSize,r.center);da=this.offset/Math.sqrt(this.obb.halfSize[0]*this.obb.halfSize[0]+this.obb.halfSize[1]*this.obb.halfSize[1]+this.obb.halfSize[2]*this.obb.halfSize[2]);this.obb.halfSize[0]+=this.obb.halfSize[0]*da;this.obb.halfSize[1]+=this.obb.halfSize[1]*da;this.obb.halfSize[2]+=this.obb.halfSize[2]*da;F.subtract(this.obb.halfSize,this.obb.halfSize,r.center);
v.conjugate(X,r.quaternion);F.transformQuat(this.obb.halfSize,this.obb.halfSize,X);this.obb.halfSize[0]*=0>this.obb.halfSize[0]?-1:1;this.obb.halfSize[1]*=0>this.obb.halfSize[1]?-1:1;this.obb.halfSize[2]*=0>this.obb.halfSize[2]?-1:1;this.obb.quaternion=r.quaternion;return this.obb};d._createClass(ha,[{key:"localOrigin",set:function(r){this.componentLocalOriginLength=Math.sqrt(r[0]*r[0]+r[1]*r[1]+r[2]*r[2])}}]);return ha}(),p=function(){function ha(r=0){this.offset=r;this.sphere=q.create();this.tmpVertex=
G.create()}var N=ha.prototype;N.applyToVertex=function(r,da,pa){const ra=this.objectTransform.transform;let ta=ra[0]*r+ra[4]*da+ra[8]*pa+ra[12],oa=ra[1]*r+ra[5]*da+ra[9]*pa+ra[13];r=ra[2]*r+ra[6]*da+ra[10]*pa+ra[14];da=this.offset/Math.sqrt(ta*ta+oa*oa+r*r);ta+=ta*da;oa+=oa*da;r+=r*da;da=this.objectTransform.inverse;this.tmpVertex[0]=da[0]*ta+da[4]*oa+da[8]*r+da[12];this.tmpVertex[1]=da[1]*ta+da[5]*oa+da[9]*r+da[13];this.tmpVertex[2]=da[2]*ta+da[6]*oa+da[10]*r+da[14];return this.tmpVertex};N.applyToMinMax=
function(r,da){const pa=this.offset/Math.sqrt(r[0]*r[0]+r[1]*r[1]+r[2]*r[2]);r[0]+=r[0]*pa;r[1]+=r[1]*pa;r[2]+=r[2]*pa;r=this.offset/Math.sqrt(da[0]*da[0]+da[1]*da[1]+da[2]*da[2]);da[0]+=da[0]*r;da[1]+=da[1]*r;da[2]+=da[2]*r};N.applyToAabb=function(r){var da=this.offset/Math.sqrt(r[0]*r[0]+r[1]*r[1]+r[2]*r[2]);r[0]+=r[0]*da;r[1]+=r[1]*da;r[2]+=r[2]*da;da=this.offset/Math.sqrt(r[3]*r[3]+r[4]*r[4]+r[5]*r[5]);r[3]+=r[3]*da;r[4]+=r[4]*da;r[5]+=r[5]*da;return r};N.applyToBoundingSphere=function(r){const da=
Math.sqrt(r[0]*r[0]+r[1]*r[1]+r[2]*r[2]),pa=this.offset/da;this.sphere[0]=r[0]+r[0]*pa;this.sphere[1]=r[1]+r[1]*pa;this.sphere[2]=r[2]+r[2]*pa;this.sphere[3]=r[3]+r[3]*this.offset/da;return this.sphere};return ha}();const l=new p,t=new h,I=new g,X=U.create();b.I3SVerticalOffsetGlobalViewingMode=h;b.IntersectorTransform=n;b.Object3DVerticalOffsetGlobalViewingMode=p;b.TERRAIN_ID="terrain";b.TerrainVerticalOffsetGlobalViewingMode=g;b.getVerticalOffsetI3S=function(ha){return m.isSome(ha)?(t.offset=ha,
t):null};b.getVerticalOffsetObject3D=function(ha){return m.isSome(ha)?(l.offset=ha,l):null};b.getVerticalOffsetTerrain=function(ha){return m.isSome(ha)?(I.offset=ha,I):null};Object.defineProperty(b,"__esModule",{value:!0})})},"esri/chunks/quat":function(){define("exports ./mat3f64 ./quatf64 ./vec3f64 ./common ./vec3 ./vec4".split(" "),function(b,d,m,u,w,A,K){function v(B){B[0]=0;B[1]=0;B[2]=0;B[3]=1;return B}function U(B,J,fa){fa*=.5;const na=Math.sin(fa);B[0]=na*J[0];B[1]=na*J[1];B[2]=na*J[2];B[3]=
Math.cos(fa);return B}function F(B,J){const fa=2*Math.acos(J[3]),na=Math.sin(fa/2);na>w.EPSILON?(B[0]=J[0]/na,B[1]=J[1]/na,B[2]=J[2]/na):(B[0]=1,B[1]=0,B[2]=0);return fa}function L(B,J,fa){const na=J[0],va=J[1],Y=J[2];J=J[3];const a=fa[0],e=fa[1],y=fa[2];fa=fa[3];B[0]=na*fa+J*a+va*y-Y*e;B[1]=va*fa+J*e+Y*a-na*y;B[2]=Y*fa+J*y+na*e-va*a;B[3]=J*fa-na*a-va*e-Y*y;return B}function G(B,J,fa){fa*=.5;const na=J[0],va=J[1],Y=J[2];J=J[3];const a=Math.sin(fa);fa=Math.cos(fa);B[0]=na*fa+J*a;B[1]=va*fa+Y*a;B[2]=
Y*fa-va*a;B[3]=J*fa-na*a;return B}function V(B,J,fa){fa*=.5;const na=J[0],va=J[1],Y=J[2];J=J[3];const a=Math.sin(fa);fa=Math.cos(fa);B[0]=na*fa-Y*a;B[1]=va*fa+J*a;B[2]=Y*fa+na*a;B[3]=J*fa-va*a;return B}function q(B,J,fa){fa*=.5;const na=J[0],va=J[1],Y=J[2];J=J[3];const a=Math.sin(fa);fa=Math.cos(fa);B[0]=na*fa+va*a;B[1]=va*fa-na*a;B[2]=Y*fa+J*a;B[3]=J*fa-Y*a;return B}function n(B,J){const fa=J[0],na=J[1];J=J[2];B[0]=fa;B[1]=na;B[2]=J;B[3]=Math.sqrt(Math.abs(1-fa*fa-na*na-J*J));return B}function c(B,
J,fa,na){const va=J[0],Y=J[1],a=J[2];J=J[3];let e=fa[0],y=fa[1],E=fa[2];fa=fa[3];let Q;let C;var f=va*e+Y*y+a*E+J*fa;0>f&&(f=-f,e=-e,y=-y,E=-E,fa=-fa);1-f>w.EPSILON?(Q=Math.acos(f),C=Math.sin(Q),f=Math.sin((1-na)*Q)/C,na=Math.sin(na*Q)/C):f=1-na;B[0]=f*va+na*e;B[1]=f*Y+na*y;B[2]=f*a+na*E;B[3]=f*J+na*fa;return B}function g(B){var J=w.RANDOM();const fa=w.RANDOM(),na=w.RANDOM(),va=Math.sqrt(1-J);J=Math.sqrt(J);B[0]=va*Math.sin(2*Math.PI*fa);B[1]=va*Math.cos(2*Math.PI*fa);B[2]=J*Math.sin(2*Math.PI*na);
B[3]=J*Math.cos(2*Math.PI*na);return B}function h(B,J){const fa=J[0],na=J[1],va=J[2];J=J[3];var Y=fa*fa+na*na+va*va+J*J;Y=Y?1/Y:0;B[0]=-fa*Y;B[1]=-na*Y;B[2]=-va*Y;B[3]=J*Y;return B}function p(B,J){B[0]=-J[0];B[1]=-J[1];B[2]=-J[2];B[3]=J[3];return B}function l(B,J){var fa=J[0]+J[4]+J[8];if(0<fa)fa=Math.sqrt(fa+1),B[3]=.5*fa,fa=.5/fa,B[0]=(J[5]-J[7])*fa,B[1]=(J[6]-J[2])*fa,B[2]=(J[1]-J[3])*fa;else{let na=0;J[4]>J[0]&&(na=1);J[8]>J[3*na+na]&&(na=2);const va=(na+1)%3,Y=(na+2)%3;fa=Math.sqrt(J[3*na+na]-
J[3*va+va]-J[3*Y+Y]+1);B[na]=.5*fa;fa=.5/fa;B[3]=(J[3*va+Y]-J[3*Y+va])*fa;B[va]=(J[3*va+na]+J[3*na+va])*fa;B[Y]=(J[3*Y+na]+J[3*na+Y])*fa}return B}function t(B,J,fa,na){var va=.5*Math.PI/180;J*=va;fa*=va;na*=va;va=Math.sin(J);J=Math.cos(J);const Y=Math.sin(fa);fa=Math.cos(fa);const a=Math.sin(na);na=Math.cos(na);B[0]=va*fa*na-J*Y*a;B[1]=J*Y*na+va*fa*a;B[2]=J*fa*a-va*Y*na;B[3]=J*fa*na+va*Y*a;return B}function I(B){return"quat("+B[0]+", "+B[1]+", "+B[2]+", "+B[3]+")"}function X(B,J,fa){const na=A.dot(J,
fa);if(-.999999>na)return A.cross(ba,D,J),1E-6>A.len(ba)&&A.cross(ba,H,J),A.normalize(ba,ba),U(B,ba,Math.PI),B;if(.999999<na)return B[0]=0,B[1]=0,B[2]=0,B[3]=1,B;A.cross(ba,J,fa);B[0]=ba[0];B[1]=ba[1];B[2]=ba[2];B[3]=1+na;return k(B,B)}function ha(B,J,fa,na,va,Y){c(P,J,va,Y);c(O,fa,na,Y);c(B,P,O,2*Y*(1-Y));return B}function N(B,J,fa,na){const va=ja;va[0]=fa[0];va[3]=fa[1];va[6]=fa[2];va[1]=na[0];va[4]=na[1];va[7]=na[2];va[2]=-J[0];va[5]=-J[1];va[8]=-J[2];return k(B,l(B,va))}const r=K.copy,da=K.set,
pa=K.add,ra=K.scale,ta=K.dot,oa=K.lerp,R=K.length,ca=K.squaredLength,k=K.normalize,x=K.exactEquals;K=K.equals;const ba=u.create(),D=u.fromValues(1,0,0),H=u.fromValues(0,1,0),P=m.create(),O=m.create(),ja=d.create();d=Object.freeze({__proto__:null,identity:v,setAxisAngle:U,getAxisAngle:F,multiply:L,rotateX:G,rotateY:V,rotateZ:q,calculateW:n,slerp:c,random:g,invert:h,conjugate:p,fromMat3:l,fromEuler:t,str:I,copy:r,set:da,add:pa,mul:L,scale:ra,dot:ta,lerp:oa,length:R,len:R,squaredLength:ca,sqrLen:ca,
normalize:k,exactEquals:x,equals:K,rotationTo:X,sqlerp:ha,setAxes:N});b.add=pa;b.calculateW=n;b.conjugate=p;b.copy=r;b.dot=ta;b.equals=K;b.exactEquals=x;b.fromEuler=t;b.fromMat3=l;b.getAxisAngle=F;b.identity=v;b.invert=h;b.len=R;b.length=R;b.lerp=oa;b.mul=L;b.multiply=L;b.normalize=k;b.quat=d;b.random=g;b.rotateX=G;b.rotateY=V;b.rotateZ=q;b.rotationTo=X;b.scale=ra;b.set=da;b.setAxes=N;b.setAxisAngle=U;b.slerp=c;b.sqlerp=ha;b.sqrLen=ca;b.squaredLength=ca;b.str=I})},"esri/chunks/vec3f32":function(){define(["exports"],
function(b){function d(){return new Float32Array(3)}function m(g){const h=new Float32Array(3);h[0]=g[0];h[1]=g[1];h[2]=g[2];return h}function u(g,h,p){const l=new Float32Array(3);l[0]=g;l[1]=h;l[2]=p;return l}function w(g,h){return new Float32Array(g,h,3)}function A(){return d()}function K(){return u(1,1,1)}function v(){return u(1,0,0)}function U(){return u(0,1,0)}function F(){return u(0,0,1)}const L=d(),G=K(),V=v(),q=U(),n=F();var c=Object.freeze({__proto__:null,create:d,clone:m,fromValues:u,createView:w,
zeros:A,ones:K,unitX:v,unitY:U,unitZ:F,ZEROS:L,ONES:G,UNIT_X:V,UNIT_Y:q,UNIT_Z:n});b.ONES=G;b.UNIT_X=V;b.UNIT_Y=q;b.UNIT_Z=n;b.ZEROS=L;b.clone=m;b.create=d;b.createView=w;b.fromValues=u;b.ones=K;b.unitX=v;b.unitY=U;b.unitZ=F;b.vec3f32=c;b.zeros=A})},"esri/views/3d/support/cameraUtils":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../Camera ../../../core/Logger ../../../core/mathUtils ../../../core/maybe ../../../core/promiseUtils ../../../chunks/vec3 ../../../chunks/vec3f64 ../../../geometry/Point ../../../geometry/projection ../../../geometry/projectionEllipsoid ../../../geometry/SpatialReference ../../../geometry/support/scaleUtils ../camera/intersectionUtils ../../../chunks/cameraUtilsPlanar ../../../chunks/cameraUtilsSpherical ./earthUtils ./ElevationProvider ./mathUtils ../../support/spatialReferenceSupport".split(" "),
function(b,d,m,u,w,A,K,v,U,F,L,G,V,q,n,c,g,h,p,l,t){function I(Y){return"global"===Y.viewingMode?g.cameraUtilsSpherical:c.cameraUtilsPlanar}function X(Y,a,e){const y=Y.state.camera,E=y.width/2/y.pixelRatio;1===Y.renderCoordsHelper.viewingMode&&null!=e&&(a*=Math.cos(w.deg2rad(e)));a/=Y.renderCoordsHelper.unitInMeters;return E/(96*39.37/a)/Math.tan(y.fovX/2)}function ha(Y,a,e){const y=Y.state.camera;a=96*39.37/(y.width/2/y.pixelRatio/(a*Math.tan(y.fovX/2)));1===Y.renderCoordsHelper.viewingMode&&(a/=
Math.cos(w.deg2rad(e)));return a*=Y.renderCoordsHelper.unitInMeters}function N(Y,a,e,y,E,Q){if(D(Q)){const C=new va(Q.signal);ca(Y,y.heading,y.tilt,a,e,E,C);C.resolver.promise.then(f=>{f=ba(Y,f,y.fov);if(A.isNone(f))Q.resolver.reject();else return Q.resolver.resolve(f)},f=>Q.resolver.reject(f))}else return a=ca(Y,y.heading,y.tilt,a,e,E),ba(Y,a,y.fov,Q)}function r(Y,a,e,y,E){return I(Y).directionToHeadingTilt(a,e,y,E)}function da(Y,a){return!!(Y.basemapTerrain&&Y.renderCoordsHelper.fromRenderCoords(a,
B,Y.spatialReference)&&A.unwrapOr(p.getElevationAtPoint(Y.elevationProvider,B),0)>B.z-1)}function pa(Y,a,e){return ra.apply(this,arguments)}function ra(){ra=d._asyncToGenerator(function*(Y,a,e){if(!Y.renderCoordsHelper.fromRenderCoords(a,B,Y.spatialReference))return!1;Y=yield Y.elevationProvider.queryElevation(B.x,B.y,B.z,B.spatialReference,"ground",e);return A.unwrapOr(Y,0)>B.z-1});return ra.apply(this,arguments)}function ta(Y,a,e){return oa.apply(this,arguments)}function oa(){oa=d._asyncToGenerator(function*(Y,
a,e){const y=U.create();a?a instanceof F?(L.projectPointToVector(a,y,Y.renderSpatialReference),null==a.z&&null!=Y.basemapTerrain&&(a=yield Y.elevationProvider.queryElevation(a.x,a.y,a.z,a.spatialReference,"ground",e),A.isSome(a)&&Y.renderCoordsHelper.setAltitude(y,a))):v.copy(y,a):v.copy(y,Y.state.camera.center);return y});return oa.apply(this,arguments)}function R(Y,a){const e=U.create();a&&a instanceof F?(L.projectPointToVector(a,e,Y.renderSpatialReference),null==a.z&&null!=Y.basemapTerrain&&(a=
p.getElevationAtPoint(Y.elevationProvider,a),A.isSome(a)&&Y.renderCoordsHelper.setAltitude(e,a))):a?v.copy(e,a):v.copy(e,Y.state.camera.center);return e}function ca(Y,a,e,y,E,Q,C){const f=y&&y instanceof F?y:null;if(D(C))return ta(Y,y,C.signal).then(z=>{k(Y,a,e,f,z,E,Q,C)},z=>C.resolver.reject(z)),null;y=R(Y,y);return k(Y,a,e,f,y,E,Q,C)}function k(Y,a,e,y,E,Q,C,f){if(A.isNone(y)&&(y=L.projectVectorToPoint(E,Y.renderSpatialReference,Y.spatialReference||V.WGS84),A.isNone(y)))return null;Q=Math.max(Q,
Y.state.constraints.minimumPoiDistance);var z=x(Y,a,e,E,Q,C);const M=I(Y).eyeForCenterWithHeadingTilt,T=M(E,Q,z.heading,z.tilt);if(1===C&&"global"===Y.viewingMode&&0<e){const ia=()=>{var la=Q,sa=Q,wa=e;var Ba=Y.state.constraints.tilt(sa);sa=I(Y).eyeTiltToLookAtTilt(wa,E,sa);sa=Math.min(sa,.5*Math.PI);Ba=Ba.min*(1-.7)+.7*sa;la=I(Y).lookAtTiltToEyeTilt(Ba,E,la);C=1>e-la?0:1;return k(Y,a,la,y,E,Q,C,f)};z=Y.map.ground.navigationConstraint;if(!z||"stay-above"===z.type){if(da(Y,T.eye))return ia();if(D(f))return pa(Y,
T.eye,f.signal).then(la=>{if(la)return ia();f.resolver.resolve({eye:T.eye,up:T.up,center:U.clone(E),heading:T.heading,tilt:T.tilt});return null}),null}}z=!f||D(f)?{center:U.create(),eye:U.create(),up:U.create(),tilt:0,heading:0}:f;z.eye=T.eye;z.up=T.up;z.center=U.clone(E);z.heading=T.heading;z.tilt=T.tilt;D(f)&&f.resolver.resolve(z);return z}function x(Y,a,e,y,E,Q){var C=0;if(Q=1===Q)if(C=Y.pointsOfInterest.centerOnSurfaceFrequent.distance,8<Math.log(E/C)/Math.LN2)Q=!0;else{var f=Y.renderSpatialReference,
z=Y.spatialReference||V.WGS84;Q=L.projectVectorToPoint(y,f,z);f=L.projectVectorToPoint(Y.pointsOfInterest.centerOnSurfaceFrequent.renderLocation,f,z);A.isNone(Q)||A.isNone(f)?Q=!1:(C*=Math.tan(.5*Y.state.camera.fov),Q=5<f.distance(Q)/C)}Q?(a=0,Q=Y.state.constraints.tilt(E),Q.max=Math.min(Q.max,.5*Math.PI),Q=Q.min*(1-.7)+.7*Q.max,e=I(Y).eyeTiltToLookAtTilt(e,y,E),C=Math.min(e,Q)):C=I(Y).eyeTiltToLookAtTilt(e,y,E);e=C=Y.state.constraints.clampTilt(E,C);e=I(Y).lookAtTiltToEyeTilt(e,y,E);return{heading:a,
tilt:e}}function ba(Y,a,e,y){if(A.isNone(a))return null;Y=L.projectVectorToPoint(a.eye,Y.renderSpatialReference,Y.spatialReference||V.WGS84);return A.isNone(Y)?null:A.isSome(y)?(y.position=Y,y.heading=a.heading,y.tilt=a.tilt,y.fov=e,y):new m(Y,a.heading,a.tilt,e)}function D(Y){return Y&&"resolver"in Y}const H=u.getLogger("esri.views.3d.support.cameraUtils"),P=U.create(),O=U.create(),ja={heading:0,tilt:0},B=new F,J=new l.Cyclical(-2.0037508342788905E7,2.0037508342788905E7),fa=new l.Cyclical(-180,180),
na=U.create();let va=function(Y){this.signal=Y;this.resolver=K.createResolver()};b.AsyncContext=va;b.computeScale=function(Y,a,e){const y=Y.renderSpatialReference;a||(a=Y.state.camera);var E=V.WGS84;a instanceof m?(E=a.position.latitude,L.projectPointToVector(a.position,P,y),L.projectPointToVector(e,O,y),a=v.distance(P,O)):(L.projectVectorToVector(a.center,y,O,E),E=O[1],a=a.distance);return ha(Y,a,E)};b.directionToHeadingTilt=r;b.distanceToScale=ha;b.externalToInternal=function(Y,a){if(A.isNone(a))return null;
var e=Y.renderSpatialReference;const y=I(Y).headingTiltToDirectionUp,E=U.create();if(!L.projectPointToVector(a.position,E,e))return null;e=y(E,a.heading,a.tilt);v.scale(e.direction,e.direction,Y.state.camera.distance);v.add(e.direction,e.direction,E);Y=n.cameraOnContentAlongViewDirection(Y,E,e.direction,e.up);Y.fov=w.deg2rad(a.fov);return Y};b.fromCenterDistance=N;b.fromCenterScale=function(Y,a,e,y,E,Q){e=X(Y,e,a.latitude);return N(Y,a,e,y,E,Q)};b.fromExtent=function(Y,a,e,y,E,Q=null){let C;var f=
0;null!=a.zmax&&null!=a.zmin&&(C=(a.zmax+a.zmin)/2,f=a.zmax-a.zmin);if("global"===Y.viewingMode){if(!t.isSpatialReferenceSupported(a.spatialReference,"global"))return D(Q)&&Q.resolver.reject(),null;var z=new F(a.xmin,a.ymin,a.spatialReference);const la=new F(a.xmax,a.ymax,a.spatialReference),sa=a.spatialReference.isGeographic?fa:J;var M=new F(sa.center(z.x,la.x),(la.y+z.y)/2,a.spatialReference);null!=C&&(M.z=C);a=G.getReferenceEllipsoid(a.spatialReference);var T=h.getGreatCircleSpanAt(M,z,la);var ia=
T.lon;T=T.lat;sa.diff(z.x,la.x)>sa.range/2&&(ia+=a.halfCircumference);ia=Math.min(ia,a.halfCircumference);T=Math.min(T,a.halfCircumference)}else M=Y.spatialReference||V.WGS84,ia=a.xmax-a.xmin,T=a.ymax-a.ymin,M=new F({x:a.xmin+.5*ia,y:a.ymin+.5*T,z:C,spatialReference:M});z=Y.state.camera;f=Math.max(1/Math.tan(z.fovX/2)*ia*.5,1/Math.tan(z.fovY/2)*T*.5,1/Math.tan(z.fov/2)*f*.5)/1;if(D(Q))ia=new va(Q.signal),ca(Y,e,y,M,f,E,ia),ia.resolver.promise.then(la=>{la=ba(Y,la,Y.camera.fov);if(A.isNone(la))Q.resolver.reject();
else return Q.resolver.resolve(la)},la=>Q.resolver.reject(la));else return e=ca(Y,e,y,M,f,E),ba(Y,e,Y.camera.fov,Q)};b.getObserverForPointAtDistance=ca;b.headingTiltToDirectionUp=function(Y,a,e,y,E){return I(Y).headingTiltToDirectionUp(a,e,y,E)};b.internalToExternal=function(Y,a,e){const y=Y.renderSpatialReference,E=r(Y,a.eye,a.viewForward,a.up,ja);Y=Y.spatialReference||V.WGS84;L.projectVectorToVector(a.eye,y,na,Y)||(Y=V.WGS84,L.projectVectorToVector(a.eye,y,na,Y));if(A.isNone(e))return new m(new F(na,
Y),E.heading,E.tilt,w.rad2deg(a.fov));e.position.x=na[0];e.position.y=na[1];e.position.z=na[2];e.position.spatialReference=Y;e.heading=E.heading;e.tilt=E.tilt;e.fov=w.rad2deg(a.fov);return e};b.observerToCamera=ba;b.scaleToDistance=X;b.scaleToResolution=function(Y,a){return Y.spatialReference?q.getResolutionForScale(a,Y.spatialReference):void 0};b.scaleToZoom=function(Y,a){var e;if(Y=null==(e=Y.basemapTerrain)?void 0:e.tilingScheme)return Y.levelAtScale(a);H.error("#scaleToZoom()","Cannot compute zoom from scale without a tiling scheme")};
b.toExtent=function(Y,a,e){const y=L.projectVectorToPoint(e,Y.renderSpatialReference,Y.spatialReference||V.WGS84);if(A.isNone(y))return null;var E=Math.tan(a.fovX/2),Q=Math.tan(a.fovY/2);a=v.dist(a.eye,e);E*=2*a;Q*=2*a;return"global"===Y.viewingMode?g.toExtent(Y,y,E,Q):c.toExtent(Y,y,E,Q)};b.zoomToScale=function(Y,a){var e;if(Y=null==(e=Y.basemapTerrain)?void 0:e.tilingScheme)return Y.scaleAtLevel(a);H.error("#zoomToScale()","Cannot compute scale from zoom without a tiling scheme")};Object.defineProperty(b,
"__esModule",{value:!0})})},"esri/geometry/support/scaleUtils":function(){define(["exports","../../core/unitUtils"],function(b,d){function m(u,w){w=d.getMetersPerUnitForSR(w);return u/(w*d.inchesPerMeter*96)}b.getExtentForScale=function(u,w){const A=u.extent;u=u.width;w=m(w,A.spatialReference);return A.clone().expand(w*u/A.width)};b.getResolutionForScale=m;b.getScale=function(u,w){w=w||u.extent;u=u.width;const A=d.getMetersPerUnitForSR(w&&w.spatialReference);return w&&u?w.width/u*A*d.inchesPerMeter*
96:0};b.getScaleForResolution=function(u,w){w=d.getMetersPerUnitForSR(w);return u*w*d.inchesPerMeter*96};Object.defineProperty(b,"__esModule",{value:!0})})},"esri/chunks/cameraUtilsPlanar":function(){define("exports ../core/mathUtils ./mat4 ./mat4f64 ./vec3 ./vec3f64 ../geometry/Extent ../geometry/projection ../views/3d/support/cameraUtilsInternal".split(" "),function(b,d,m,u,w,A,K,v,U){function F(t,I,X,ha=U.createDirectionUp()){m.identity(h);const {direction:N,up:r}=ha;m.rotateZ(h,h,-d.deg2rad(I));
m.rotateX(h,h,d.deg2rad(X));w.transformMat4(N,g,h);w.scale(N,N,-1);w.transformMat4(r,c,h);return ha}function L(t,I,X,ha){return U.directionToHeadingTilt(I,X,ha,g,c)}function G(t,I,X,ha){const N=F(t,X,ha),r=A.create();w.scale(r,N.direction,-I);w.add(r,r,t);return{up:N.up,eye:r,heading:X,tilt:ha}}function V(t){return d.rad2deg(t)}function q(t){return d.deg2rad(t)}function n(t,I,X,ha,N){const r=t.renderSpatialReference;t=t.map&&t.spatialReference||I.spatialReference;v.projectPointToVector(I,p,r);v.projectPointToVector(I,
l,r);p[0]-=X/2;l[0]+=X/2;p[1]-=ha/2;l[1]+=ha/2;v.projectVectorToVector(p,r,p,t);v.projectVectorToVector(l,r,l,t);N?(N.xmin=p[0],N.ymin=p[1],N.xmax=l[0],N.ymax=l[1],N.spatialReference=t):N=new K(p[0],p[1],l[0],l[1],t);return N}const c=A.fromValues(0,1,0),g=A.fromValues(0,0,1),h=u.create(),p=A.create(),l=A.create();u=Object.freeze({__proto__:null,headingTiltToDirectionUp:F,directionToHeadingTilt:L,eyeForCenterWithHeadingTilt:G,lookAtTiltToEyeTilt:V,eyeTiltToLookAtTilt:q,toExtent:n});b.cameraUtilsPlanar=
u;b.directionToHeadingTilt=L;b.eyeForCenterWithHeadingTilt=G;b.eyeTiltToLookAtTilt=q;b.headingTiltToDirectionUp=F;b.lookAtTiltToEyeTilt=V;b.toExtent=n})},"esri/views/3d/support/cameraUtilsInternal":function(){define(["exports","../../../core/mathUtils","../../../chunks/vec3","../../../chunks/vec3f64"],function(b,d,m,u){const w=u.create(),A=u.create();b.createDirectionUp=function(){return{direction:u.create(),up:u.create()}};b.directionToHeadingTilt=function(K,v,U,F,L){let G=m.normalize(w,K),V=m.dot(G,
F);const q=0<V;V=Math.abs(V);.99<V&&(V=Math.abs(m.dot(v,F)),.99>V?(m.copy(G,v),q&&m.scale(G,G,-1)):G=null);v=0;G&&(m.scale(A,F,m.dot(F,G)),m.subtract(G,G,A),v=m.dot(G,L)/(m.length(G)*m.length(L)),m.cross(A,G,L),v=(0<m.dot(A,F)?1:-1)*d.rad2deg(d.acosClamped(v)));K=d.rad2deg(d.acosClamped(-m.dot(F,K)/m.length(K)));if(!U)return{heading:v,tilt:K};U.heading=v;U.tilt=K;return U};Object.defineProperty(b,"__esModule",{value:!0})})},"esri/chunks/cameraUtilsSpherical":function(){define("exports ../core/mathUtils ./mat4 ./mat4f64 ./vec3 ./vec3f64 ../geometry/Extent ../geometry/projectionEllipsoid ../geometry/SpatialReference ../geometry/support/webMercatorUtils ../views/3d/support/cameraUtilsInternal ../views/3d/support/earthUtils ../views/3d/support/mathUtils".split(" "),
function(b,d,m,u,w,A,K,v,U,F,L,G,V){function q(pa,ra,ta,oa=L.createDirectionUp()){w.cross(r,pa,I);0===w.dot(r,r)&&w.cross(r,pa,X);m.identity(N);m.rotate(N,N,-d.deg2rad(ra),pa);m.rotate(N,N,-d.deg2rad(ta),r);const {up:R,direction:ca}=oa;w.cross(R,r,pa);w.normalize(R,R);w.transformMat4(R,R,N);w.normalize(ca,pa);w.negate(ca,ca);w.transformMat4(ca,ca,N);return oa}function n(pa,ra,ta,oa){const R=r,ca=da;w.normalize(R,pa);w.cross(da,R,I);0===w.dot(da,da)&&w.cross(da,R,X);w.cross(ca,da,R);return L.directionToHeadingTilt(ra,
ta,oa,R,ca)}function c(pa,ra,ta,oa){const R={eye:A.create(),up:null,tilt:oa,heading:ta},ca=r;ca[0]=pa[0];ca[1]=pa[2];ca[2]=-pa[1];ta=d.deg2rad(ta);var k=d.deg2rad(oa);oa=Math.sin(ta);ta=Math.cos(ta);var x=Math.sin(k),ba=Math.cos(k);const D=w.length(ca);if(1E-8>Math.abs(k))k=ra+D;else{var H=D/x,P=d.asinClamped(ra/H);k=H*Math.sin(Math.PI-k-P)}ba*=ra;H=ra*ra*x*x;P=ta*ta*H;const O=k-ba,ja=O*O;var B=P*(P+ja-ca[1]*ca[1]);if(0>B)return w.scale(R.eye,ca,k/D),R.tilt=0,R;var J=Math.sqrt(B);const fa=ca[1]*O;
B=P+ja;J=0<ta?-J+fa:J+fa;if(1E-8>Math.abs(B))return 1E-8>D?(R.eye[0]=0,R.eye[1]=0,R.eye[2]=ra):w.scale(R.eye,ca,k/D),R.tilt=0,g(R.eye),h(R,pa);R.eye[1]=J/B;ra*=x;J=R.eye[1]*R.eye[1];x=1-J;B=Math.sqrt(x);H=P*J+oa*oa*H-2*ta*ra*R.eye[1]*B*O+x*ja;if(1E-8>Math.abs(H))return w.scale(R.eye,ca,k/D),R.tilt=0,g(R.eye),h(R,pa);R.eye[0]=(x*(k*ca[0]-ba*ca[0])-ra*B*(ca[0]*R.eye[1]*ta+ca[2]*oa))/H;R.eye[2]=(x*(k*ca[2]-ba*ca[2])-ra*B*(ca[2]*R.eye[1]*ta-ca[0]*oa))/H;w.scale(R.eye,R.eye,k);g(R.eye);return h(R,pa)}
function g(pa){const ra=pa[1];pa[1]=-pa[2];pa[2]=ra}function h(pa,ra){ra=q(ra,pa.heading,pa.tilt);pa.up=ra.up;return pa}function p(pa,ra,ta){ra=w.length(ra);ta=d.asinClamped(ta/(Math.sqrt(ta*ta+ra*ra-2*ta*ra*Math.cos(Math.PI-pa))/Math.sin(pa)));return d.rad2deg(pa-ta)}function l(pa,ra,ta){pa=d.deg2rad(pa);ra=w.length(ra);return d.asinClamped(ta/(ra/Math.sin(pa)))+pa}function t(pa,ra,ta,oa,R){function ca(D){const H=Math.PI/2;D=V.cyclical2PI.normalize(D,-H);D>H&&(D=Math.PI-D);return D}var k=ra.latitude;
ra=ra.longitude;var x=G.getLonDeltaForDistance(k,ta,v.getReferenceEllipsoid(pa.spatialReference).radius)/2;ta=ra-x;ra+=x;k=d.deg2rad(k);x=v.getReferenceEllipsoid(pa.spatialReference).radius;k=(1+Math.sin(k))/(1-Math.sin(k));const ba=(k+1)*Math.tan(oa/x/2);k=1.5*Math.PI-2*Math.atan(.5*(ba+Math.sqrt(4*k+ba*ba)));oa=k+oa/x;k=ca(k);oa=ca(oa);oa<k&&(x=oa,oa=k,k=x);k=Math.max(d.rad2deg(k),-90);oa=Math.min(d.rad2deg(oa),90);ra=ha.monotonic(ta,ra);180<ra-ta&&(x=(ra-ta-180)/2,ta+=x,ra-=x);x=pa.spatialReference&&
pa.spatialReference.isGeographic?pa.spatialReference:U.WGS84;R?(R.xmin=ta,R.ymin=k,R.xmax=ra,R.ymax=oa,R.spatialReference=x):R=new K(ta,k,ra,oa,x);pa.spatialReference&&pa.spatialReference.isWebMercator&&F.geographicToWebMercator(R,!1,R);return R}const I=A.fromValues(0,0,1),X=w.normalize(A.create(),A.fromValues(1,1,1)),ha=new V.Cyclical(-180,180),N=u.create(),r=A.create(),da=A.create();u=Object.freeze({__proto__:null,headingTiltToDirectionUp:q,directionToHeadingTilt:n,eyeForCenterWithHeadingTilt:c,
lookAtTiltToEyeTilt:p,eyeTiltToLookAtTilt:l,toExtent:t});b.cameraUtilsSpherical=u;b.directionToHeadingTilt=n;b.eyeForCenterWithHeadingTilt=c;b.eyeTiltToLookAtTilt=l;b.headingTiltToDirectionUp=q;b.lookAtTiltToEyeTilt=p;b.toExtent=t})},"esri/views/3d/support/earthUtils":function(){define(["exports","../../../core/mathUtils","../../../geometry/Point","../../../geometry/projectionEllipsoid"],function(b,d,m,u){function w(v,U,F){return A(v,U.longitude,U.latitude,F.longitude,F.latitude)}function A(v,U,F,
L,G){F=d.deg2rad(F);G=d.deg2rad(G);U=d.deg2rad(U);const V=d.deg2rad(L);L=Math.sin((F-G)/2);U=Math.sin((U-V)/2);F=2*d.asinClamped(Math.sqrt(L*L+Math.cos(F)*Math.cos(G)*U*U));return Math.round(F*v*1E4)/1E4}function K(v,U){v/=15;U||(v=Math.round(v));return v}b.getGreatCircleDistance=A;b.getGreatCircleDistanceFromPoints=w;b.getGreatCircleSpanAt=function(v,U,F){const L=U.spatialReference,G=u.getReferenceEllipsoid(L),V=new m(U.x,v.y,L),q=new m(F.x,v.y,L);U=new m(v.x,U.y,L);v=new m(v.x,F.y,L);return{lon:w(G.radius,
V,q),lat:w(G.radius,U,v)}};b.getLatDeltaForDistance=function(v,U){return d.rad2deg(v/U)};b.getLonDeltaForDistance=function(v,U,F){U/=F;v=d.deg2rad(v);U=Math.sin(U/2);v=Math.cos(v);v=2*d.asinClamped(Math.sqrt(U*U/(v*v)));return d.rad2deg(v)};b.getMaxCameraAltitude=function(v,U){v=d.deg2rad(v/2);return(1-Math.sin(v))*U/Math.sin(v)};b.longitudeToTimezone=K;b.pointToTimezone=function(v,U){return K(v.longitude,U)};b.positionToTimezoneInfo=function(v,U){U||(U={hours:0,minutes:0,seconds:0});U.hours=K(v[0],
!0);v=U.hours%1;U.hours-=v;U.minutes=60*v;v=U.minutes%1;U.minutes-=v;U.seconds=Math.round(60*v);return U};Object.defineProperty(b,"__esModule",{value:!0})})},"esri/views/3d/support/ElevationProvider":function(){define(["exports","../../../core/maybe","../../../layers/graphics/dehydratedFeatureUtils"],function(b,d,m){function u(w){return"array"in w}b.SamplePosition=function(w,A=null,K=0){this.array=w;this.spatialReference=A;this.offset=K};b.getElevationAtPoint=function(w,A,K="ground"){if(m.isDehydratedPoint(A))return w.getElevation(A.x,
A.y,A.z||0,A.spatialReference,K);if(u(A)){let v=A.offset;return w.getElevation(A.array[v++],A.array[v++],A.array[v]||0,d.unwrapOr(A.spatialReference,w.spatialReference),K)}return w.getElevation(A[0],A[1],A[2]||0,w.spatialReference,K)};b.isSamplePosition=u;Object.defineProperty(b,"__esModule",{value:!0})})},"esri/layers/graphics/dehydratedFeatureUtils":function(){define(["exports"],function(b){b.isDehydratedPoint=function(d){return"point"===d.type};Object.defineProperty(b,"__esModule",{value:!0})})},
"esri/views/support/Scheduler":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Logger ../../core/maybe ../../core/PerformanceSampler ../../core/PooledArray ../../core/promiseUtils ../../core/time ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../layers/support/PromiseQueue ./debugFlags".split(" "),
function(b,d,m,u,w,A,K,v,U,F,L,G,V,q,n,c,g,h){function p(oa){return t.has(oa)?t.get(oa):"number"===typeof oa?oa:1}const l=w.getLogger("esri.views.support.Scheduler");b.TaskPriority=void 0;(function(oa){oa.RESOURCE_CONTROLLER="schedule";oa.SLIDE="slide";oa.STREAM_DATA_LOADER="stream loader";oa.ELEVATION_QUERY="elevation query";oa.TERRAIN_SURFACE="terrain";oa.SURFACE_GEOMETRY_UPDATES="surface geometry updates";oa.GRAPHICS_CORE="Graphics3D";oa.I3S_CONTROLLER="I3S";oa.POINT_CLOUD_LAYER="point cloud";
oa.FEATURE_TILE_FETCHER="feature fetcher";oa.STAGE="stage";oa.GRAPHICS_DECONFLICTOR="graphics deconflictor";oa.FILTER_VISIBILITY="Graphics3D filter visibility";oa.SCALE_VISIBILITY="Graphics3D scale visibility";oa.FRUSTUM_VISIBILITY="Graphics3D frustum visibility";oa.POINT_OF_INTEREST_FREQUENT="POI frequent";oa.POINT_OF_INTEREST_INFREQUENT="POI infrequent";oa.LABELER="labeler";oa.FEATURE_QUERY_ENGINE="feature query";oa.FEATURE_TILE_TREE="feature tile tree";oa.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree";
oa.ELEVATION_ALIGNMENT="elevation alignment";oa.TEXT_TEXTURE_ATLAS="text texture atlas";oa.TEXTURE_UNLOAD="texture unload";oa.OVERLAY_MANAGER="overlay manager";oa.LINE_OF_SIGHT_TOOL="line of sight tool";oa.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool";oa.ELEVATION_PROFILE="elevation profile";oa.SNAPPING="snapping";oa.SHADOW_ACCUMULATOR="shadow accumulator";oa[oa.TEST_PRIO=1]="TEST_PRIO"})(b.TaskPriority||(b.TaskPriority={}));const t=new Map([[b.TaskPriority.RESOURCE_CONTROLLER,0],
[b.TaskPriority.SLIDE,0],[b.TaskPriority.STREAM_DATA_LOADER,0],[b.TaskPriority.ELEVATION_QUERY,0],[b.TaskPriority.TERRAIN_SURFACE,1],[b.TaskPriority.SURFACE_GEOMETRY_UPDATES,1],[b.TaskPriority.GRAPHICS_CORE,2],[b.TaskPriority.I3S_CONTROLLER,2],[b.TaskPriority.POINT_CLOUD_LAYER,2],[b.TaskPriority.FEATURE_TILE_FETCHER,2],[b.TaskPriority.STAGE,4],[b.TaskPriority.GRAPHICS_DECONFLICTOR,4],[b.TaskPriority.FILTER_VISIBILITY,4],[b.TaskPriority.SCALE_VISIBILITY,4],[b.TaskPriority.FRUSTUM_VISIBILITY,4],[b.TaskPriority.POINT_OF_INTEREST_FREQUENT,
6],[b.TaskPriority.POINT_OF_INTEREST_INFREQUENT,30],[b.TaskPriority.LABELER,8],[b.TaskPriority.FEATURE_QUERY_ENGINE,8],[b.TaskPriority.FEATURE_TILE_TREE,16],[b.TaskPriority.FEATURE_TILE_TREE_ACTIVE,0],[b.TaskPriority.ELEVATION_ALIGNMENT,12],[b.TaskPriority.TEXT_TEXTURE_ATLAS,12],[b.TaskPriority.TEXTURE_UNLOAD,12],[b.TaskPriority.OVERLAY_MANAGER,12],[b.TaskPriority.LINE_OF_SIGHT_TOOL,16],[b.TaskPriority.LINE_OF_SIGHT_TOOL_INTERACTIVE,0],[b.TaskPriority.SNAPPING,0],[b.TaskPriority.SHADOW_ACCUMULATOR,
30]]),I=F.Milliseconds(6.5),X=F.Milliseconds(1),ha=F.Milliseconds(30),N=F.Milliseconds(1E3/30),r=F.Milliseconds(100);var da;(function(oa){let R=function(x){function ba(H){var P=x.call(this,H)||this;P.updating=!0;P.performanceInfo={total:new K("total"),tasks:new Map};P._frameTaskTimes=new Map;P._budget=null;P._state=1;P._tasks=new v;P._runQueue=new v;P._load=0;P._idleStateCallbacks=new v;P._idleUpdatesStartFired=!1;P._maxReschedule=ta;P._forceTask=!1;P._debug=!1;P._debugHandle=L.init(h,"SCHEDULER_LOG_SLOW_TASKS",
B=>P._debug=B);P._budget=new k(H.nowFunc);for(const B of Object.keys(b.TaskPriority))P.performanceInfo.tasks.set(b.TaskPriority[B],new K(b.TaskPriority[B]));let O;const ja=d._assertThisInitialized(P);P._test={get state(){return A.isNone(O)?ja._state:O},set state(B){O=B},FRAME_SAFETY_BUDGET:I,INTERACTING_BUDGET:N,IDLE_BUDGET:r,get budget(){return ja._budget.budget},usedBudget:0,updateTask:B=>P._updateTask(B),getState:B=>P._getState(B),getRuntime:B=>P._getRuntime(B),resetRuntimes:()=>P._resetRuntimes(),
getRunning:()=>P._getRunning()};return P}d._inheritsLoose(ba,x);var D=ba.prototype;D.destroy=function(){this._debugHandle&&this._debugHandle.remove()};D.registerTask=function(H,P){const O=p(H);P=new ca(this,H,P,O);this._tasks.push(P);this.performanceInfo.tasks.has(H)||this.performanceInfo.tasks.set(H,new K(H));return P};D.registerIdleStateCallbacks=function(H,P){const O={idleBegin:H,idleEnd:P};this._idleStateCallbacks.push(O);2===this.state&&this._idleUpdatesStartFired&&O.idleBegin();const ja=this;
return{remove:()=>this._removeIdleStateCallbacks(O),set idleBegin(B){ja._idleUpdatesStartFired&&(O.idleEnd(),2===ja._state&&B());O.idleBegin=B},set idleEnd(B){O.idleEnd=B}}};D.updateBudget=function(H){this._test.usedBudget=0;let P=I,O=H.frameDuration,ja=X;switch(this.state){case 2:P=F.Milliseconds(0);O=F.Milliseconds(Math.max(r,H.frameDuration));ja=ha;break;case 1:O=F.Milliseconds(Math.max(N,H.frameDuration))}O=F.Milliseconds(O-H.elapsedFrameTime-P);if(2!==this.state&&O<X&&!this._forceTask)return this._forceTask=
!0,!1;O=F.Milliseconds(Math.max(O,ja));this._budget.reset(O,this.state);this._maxReschedule=ta;this._updateLoad();return this._schedule()};D.frame=function(){this._forceTask=!1;switch(this.state){case 2:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(H=>H.idleBegin()));this._runIdle();break;case 1:this._runInteracting();break;default:this._runAnimating()}this._test.usedBudget=this._budget.elapsed};D.stopFrame=function(){this._budget.reset(F.Milliseconds(0),
this._state);this._budget.madeProgress()};D._removeIdleStateCallbacks=function(H){this._idleUpdatesStartFired&&H.idleEnd();this._idleStateCallbacks.removeUnordered(H)};D.removeTask=function(H){this._tasks.removeUnordered(H);this._runQueue.removeUnordered(H)};D._updateTask=function(H){this._tasks.forAll(P=>{P.name===H&&P.setPriority(H)})};D._getState=function(H){if(this._runQueue.some(O=>O.name===H))return b.TaskState.SCHEDULED;let P=b.TaskState.IDLE;this._tasks.forAll(O=>{O.name===H&&O.needsUpdate&&
(1>=O.schedulePriority?P=b.TaskState.READY:P!==b.TaskState.READY&&(P=b.TaskState.WAITING))});return P};D._getRuntime=function(H){let P=0;this._tasks.forAll(O=>{O.name===H&&(P+=O.runtime)});return P};D._resetRuntimes=function(){this._tasks.forAll(H=>H.runtime=0)};D._getRunning=function(){const H=new Map;this._tasks.forAll(O=>{O.needsUpdate&&H.set(O.name,(H.get(O.name)||0)+1)});if(0===H.size)return null;let P="";H.forEach((O,ja)=>{P=1<O?P+` ${O}x ${ja}`:P+` ${ja}`});return P};D._runIdle=function(){this._run()};
D._runInteracting=function(){this._run()};D._runAnimating=function(){this._run()};D._updateLoad=function(){const H=this._tasks.reduce((P,O)=>O.needsUpdate?++P:P,0);this._load=.9*this._load+H*(1-.9)};D._schedule=function(){if(0>=this._maxReschedule)return!1;this._runQueue.filterInPlace(H=>{if(H.needsUpdate)return!0;H.schedulePriority=H.basePriority;return!1});for(this._tasks.forAll(H=>{0===H.basePriority&&H.needsUpdate&&!this._runQueue.some(P=>P===H)&&this._runQueue.unshift(H)});0===this._runQueue.length;){let H=
!1,P=0;this._tasks.forAll(O=>{if(O.needsUpdate&&0!==O.schedulePriority&&0!==O.basePriority)switch(H=!0,P=Math.max(P,O.basePriority),O.schedulePriority){case 1:O.schedulePriority=0;this._runQueue.push(O);break;default:--O.schedulePriority}});if(!H)return this.updating=!1;this._maxReschedule===ta&&(this._maxReschedule=P);--this._maxReschedule}return this.updating=!0};D._run=function(){const H=this._budget.now();this._startFrameTaskTimes();do for(;0<this._runQueue.length;){var P=this._budget.now();const O=
this._runQueue.pop();this._budget.resetProgress();try{O.task.runTask(this._budget)}catch(ja){l.error(`Exception in task "${O.name}"`,ja)}O.schedulePriority=O.basePriority;P=this._budget.now()-P;O.runtime+=P;this._frameTaskTimes.set(O.priority,this._frameTaskTimes.get(O.priority)+P);this._debug&&this._budget.elapsed>2*this._budget.budget&&console.log("Task",O.name,"used",this._budget.elapsed,"of max",this._budget.budget,"ms");if(0>=this._budget.remaining){this._recordFrameTaskTimes(this._budget.now()-
H);return}}while(this._schedule());this._recordFrameTaskTimes(this._budget.now()-H)};D._startFrameTaskTimes=function(){for(const H of Object.keys(b.TaskPriority))this._frameTaskTimes.set(b.TaskPriority[H],0)};D._recordFrameTaskTimes=function(H){this._frameTaskTimes.forEach((P,O)=>this.performanceInfo.tasks.get(O).record(P));this.performanceInfo.total.record(H)};d._createClass(ba,[{key:"now",get:function(){return this.nowFunc()}},{key:"load",get:function(){return this._load}},{key:"state",get:function(){return A.isNone(this._test.state)?
this._state:this._test.state},set:function(H){this._state!==H&&(this._state=H,2!==this.state&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(P=>P.idleEnd())))}},{key:"test",get:function(){return this._test}}]);return ba}(u);m.__decorate([G.property()],R.prototype,"updating",void 0);m.__decorate([G.property()],R.prototype,"nowFunc",void 0);R=m.__decorate([c.subclass("esri.views.support.Scheduler")],R);oa.Scheduler=R;let ca=function(x){function ba(H,P,O,
ja){var B=x.call(this,{})||this;B._scheduler=H;B.name=P;B._basePriority=ja;B.runtime=0;B._queue=new g;B.updating=!1;B.schedulePriority=B._basePriority;B.task=A.isSome(O)?O:{running:!1,runTask:J=>B.processQueue(J)};return B}d._inheritsLoose(ba,x);var D=ba.prototype;D.normalizeCtorArgs=function(){return{}};D.remove=function(){this.processQueue(pa);this._scheduler.removeTask(this);this.schedule=ra.schedule;this.reschedule=ra.reschedule};D.setPriority=function(H){this.name=H;H=p(H);if(0===this._basePriority||
0!==this.schedulePriority)this.schedulePriority=H;this._basePriority=H};D.schedule=function(H,P,O){this.updating=!0;return this._queue.push(H,P,O)};D.reschedule=function(H,P,O){this.updating=!0;return this._queue.unshift(H,P,O)};D.processQueue=function(H){for(;!H.done&&this._queue.process();)H.madeProgress();this.updating=0<this._queue.length};d._createClass(ba,[{key:"basePriority",get:function(){return this._basePriority}},{key:"priority",get:function(){return this.name},set:function(H){this.setPriority(H)}},
{key:"needsUpdate",get:function(){return this.updating||this.task.running}}]);return ba}(u);m.__decorate([G.property()],ca.prototype,"updating",void 0);ca=m.__decorate([c.subclass("esri.views.support.SchedulerTask")],ca);let k=function(){function x(D){this.now=D;this._budget=this._begin=0;this._state=2;this._didWork=!1;this._enabled=!0}var ba=x.prototype;ba.run=function(D){if(this.done)return!1;!0===D()&&(this._didWork=!0);return!0};ba.madeProgress=function(){this._didWork=!0};ba.reset=function(D,
H){this._begin=this.now();this._budget=D;this._state=H;this._didWork=!1};ba.resetProgress=function(){this._didWork=!1};d._createClass(x,[{key:"done",get:function(){return this._didWork&&this.elapsed>=this._budget&&this._enabled}},{key:"budget",get:function(){return this._budget}},{key:"state",get:function(){return this._state}},{key:"enabled",get:function(){return this._enabled},set:function(D){this._enabled=D}},{key:"remaining",get:function(){return Math.max(this._budget-this.elapsed,0)}},{key:"elapsed",
get:function(){return this.now()-this._begin}},{key:"hasProgressed",get:function(){return this._didWork}}]);return x}();oa.Budget=k})(da||(da={}));b.TaskState=void 0;(function(oa){oa.SCHEDULED="s";oa.READY="r";oa.WAITING="w";oa.IDLE="i"})(b.TaskState||(b.TaskState={}));const pa=(()=>{const oa=new da.Budget(()=>performance.now());oa.enabled=!1;return oa})(),ra=new (function(){function oa(){}var R=oa.prototype;R.remove=function(){};R.processQueue=function(){};R.schedule=function(ca,k,x){try{if(U.isAborted(k)){const ba=
U.createAbortError();return x?Promise.resolve(x(ba)):Promise.reject(ba)}return U.when(ca())}catch(ba){return Promise.reject(ba)}};R.reschedule=function(ca,k,x){return this.schedule(ca,k,x)};return oa}()),ta=Number.MAX_SAFE_INTEGER;b.ImmediateTask=ra;b.getTaskPriority=p;b.newScheduler=function(oa){return new da.Scheduler({nowFunc:oa})};b.noBudget=pa;b.taskPriorities=t;Object.defineProperty(b,"__esModule",{value:!0})})},"esri/layers/support/PromiseQueue":function(){define(["../../chunks/_rollupPluginBabelHelpers",
"../../core/promiseUtils"],function(b,d){let m=function(u,w,A,K,v){this.resolve=u;this.reject=w;this.callback=A;this.signal=K;this.abortCallback=v};return function(){function u(){this._tasks=[]}var w=u.prototype;w.push=function(A,K,v){return new Promise((U,F)=>this._tasks.push(new m(U,F,A,K,v)))};w.unshift=function(A,K,v){return new Promise((U,F)=>this._tasks.unshift(new m(U,F,A,K,v)))};w.process=function(){if(0===this._tasks.length)return!1;const A=this._tasks.shift();try{const K=d.isAborted(A.signal);
if(K&&!A.abortCallback)A.reject(d.createAbortError());else{const v=K?A.abortCallback(d.createAbortError()):A.callback();d.isPromise(v)?v.then(A.resolve,A.reject):A.resolve(v)}}catch(K){A.reject(K)}return!0};w.cancelAll=function(){const A=d.createAbortError();for(const K of this._tasks)if(K.abortCallback){const v=K.abortCallback(A);K.resolve(v)}else K.reject(A);this._tasks.length=0};b._createClass(u,[{key:"length",get:function(){return this._tasks.length}}]);return u}()})},"esri/views/support/debugFlags":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass".split(" "),
function(b,d,m,u,w,A,K,v,U){m=function(F){function L(){var G=F.apply(this,arguments)||this;G.SCHEDULER_LOG_SLOW_TASKS=!1;G.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1;return G}b._inheritsLoose(L,F);return L}(m);d.__decorate([u.property()],m.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0);d.__decorate([u.property()],m.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0);m=d.__decorate([U.subclass("esri.views.support.DebugFlags")],m);return new m})},"esri/webdoc/support/Thumbnail":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass".split(" "),
function(b,d,m,u,w,A,K,v,U){var F;m=F=function(L){function G(){var q=L.apply(this,arguments)||this;q.url="";return q}b._inheritsLoose(G,L);var V=G.prototype;V.destroy=function(){this.url=""};V.clone=function(){return new F({url:this.url})};return G}(m.JSONSupport);d.__decorate([u.property({type:String,json:{write:{isRequired:!0}}})],m.prototype,"url",void 0);return m=F=d.__decorate([U.subclass("esri.webdoc.support.Thumbnail")],m)})},"esri/webscene/support/Description":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass".split(" "),
function(b,d,m,u,w,A,K,v,U){var F;m=F=function(L){function G(){var V=L.apply(this,arguments)||this;V.text="";return V}b._inheritsLoose(G,L);G.prototype.clone=function(){return new F({text:this.text})};return G}(m.JSONSupport);d.__decorate([u.property({type:String,json:{write:!0}})],m.prototype,"text",void 0);return m=F=d.__decorate([U.subclass("esri.webscene.support.Description")],m)})},"esri/webscene/support/SlideEnvironment":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../Lighting".split(" "),
function(b,d,m,u,w,A,K,v,U,F,L){var G;b.SlideEnvironment=G=function(V){function q(){var n=V.apply(this,arguments)||this;n.lighting=new L;return n}d._inheritsLoose(q,V);q.prototype.clone=function(){return new G({lighting:L.prototype.clone.call(this.lighting)})};return q}(u.JSONSupport);m.__decorate([w.property({type:L,json:{write:!0}})],b.SlideEnvironment.prototype,"lighting",void 0);b.SlideEnvironment=G=m.__decorate([F.subclass("esri.webscene.Environment")],b.SlideEnvironment);Object.defineProperty(b,
"__esModule",{value:!0})})},"esri/webscene/support/SlideGround":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Ground ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../webdoc/support/opacityUtils".split(" "),function(b,d,m,u,w,A,K,v,U,F,L){var G;u=G=function(V){function q(){var c=V.apply(this,arguments)||
this;c.opacity=null;return c}b._inheritsLoose(q,V);var n=q.prototype;n.clone=function(){return new G({opacity:this.opacity})};n.cloneAndApplyTo=function(c){if(null==this.opacity)return c;c=null!=c?c.clone():new m;c.opacity=this.opacity;return c};q.fromGround=function(c){return new G({opacity:c.opacity})};return q}(u.JSONSupport);d.__decorate([w.property({type:Number,json:{type:K.Integer,read:{reader:L.transparencyToOpacity,source:"transparency"},write:{writer:(V,q)=>{q.transparency=L.opacityToTransparency(V)},
target:"transparency"}}})],u.prototype,"opacity",void 0);return u=G=d.__decorate([F.subclass("esri.webscene.support.SlideGround")],u)})},"esri/webscene/support/SlideVisibleLayer":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/has ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass".split(" "),
function(b,d,m,u,w,A,K,v,U,F,L){var G;b.SlideVisibleLayer=G=function(V){function q(n){n=V.call(this,n)||this;n.id="";n.sublayerIds=null;return n}d._inheritsLoose(q,V);q.prototype.clone=function(){return new G({id:this.id,sublayerIds:w.clone(this.sublayerIds)})};return q}(u.JSONSupport);m.__decorate([A.property({type:String,json:{write:!0}})],b.SlideVisibleLayer.prototype,"id",void 0);m.__decorate([A.property({type:[K.Integer],json:{read:{source:"subLayerIds"},write:{target:"subLayerIds"}}})],b.SlideVisibleLayer.prototype,
"sublayerIds",void 0);b.SlideVisibleLayer=G=m.__decorate([L.subclass("esri.webscene.support.SlideVisibleLayer")],b.SlideVisibleLayer);b.default=b.SlideVisibleLayer;Object.defineProperty(b,"__esModule",{value:!0})})},"esri/webscene/support/Title":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass".split(" "),
function(b,d,m,u,w,A,K,v,U){var F;m=F=function(L){function G(){var V=L.apply(this,arguments)||this;V.text="";return V}b._inheritsLoose(G,L);G.prototype.clone=function(){return new F({text:this.text})};return G}(m.JSONSupport);d.__decorate([u.property({type:String,json:{write:{isRequired:!0}}})],m.prototype,"text",void 0);return m=F=d.__decorate([U.subclass("esri.webscene.support.Title")],m)})},"esri/webscene/TransportationNetwork":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/jsonMap ../core/accessorSupport/decorators/subclass".split(" "),
function(b,d,m,u,w,A,K,v,U){var F;m=F=function(L){function G(V){return L.call(this,V)||this}b._inheritsLoose(G,L);G.prototype.clone=function(){return new F({name:this.name,path:this.path,title:this.title})};return G}(m.JSONSupport);d.__decorate([u.property({type:String,json:{write:!0}})],m.prototype,"name",void 0);d.__decorate([u.property({type:String,json:{write:!0}})],m.prototype,"path",void 0);d.__decorate([u.property({type:String,json:{write:!0}})],m.prototype,"title",void 0);return m=F=d.__decorate([U.subclass("esri.webscene.TransportationNetwork")],
m)})},"esri/webscene/Version":function(){define(["exports","../chunks/_rollupPluginBabelHelpers","../core/Version"],function(b,d,m){m=function(u){function w(A,K){return u.call(this,A,K,"webscene")||this}d._inheritsLoose(w,u);d._createClass(w,[{key:"supportsGround",get:function(){return this.since(1,8)}},{key:"supportsVisibleElevationLayersInSlides",get:function(){return this.lessThan(1,8)}}]);return w}(m.Version);b.Version=m;b.default=m;Object.defineProperty(b,"__esModule",{value:!0})})},"esri/core/Version":function(){define(["exports",
"./Error"],function(b,d){let m=function(){function u(A,K,v=""){this.major=A;this.minor=K;this._context=v}var w=u.prototype;w.lessThan=function(A,K){return this.major<A||A===this.major&&this.minor<K};w.since=function(A,K){return!this.lessThan(A,K)};w.validate=function(A){if(this.major!==A.major)throw new d((this._context&&this._context+":")+"unsupported-version",`Required major ${this._context&&this._context+" "}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:A});
};w.clone=function(){return new u(this.major,this.minor,this._context)};u.parse=function(A,K=""){const [v,U]=A.split(".");var F=/^\s*\d+\s*$/;if(!v||!v.match||!v.match(F))throw new d((K&&K+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:A});if(!U||!U.match||!U.match(F))throw new d((K&&K+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:A});A=parseInt(v,10);F=parseInt(U,10);return new u(A,F,K)};return u}();b.Version=
m;Object.defineProperty(b,"__esModule",{value:!0})})},"*noref":1}});
define("require ./chunks/_rollupPluginBabelHelpers ./chunks/tslib.es6 ./kernel ./Map ./Viewpoint ./core/Collection ./core/Error ./core/Handles ./core/has ./core/lang ./core/Loadable ./core/loadAll ./core/Logger ./core/maybe ./core/MultiOriginJSONSupport ./core/Promise ./core/promiseUtils ./core/urlUtils ./core/accessorSupport/decorators/property ./core/accessorSupport/ensureType ./core/jsonMap ./core/accessorSupport/decorators/reader ./core/accessorSupport/decorators/subclass ./core/accessorSupport/decorators/writer ./core/accessorSupport/originUtils ./core/accessorSupport/read ./geometry/Extent ./geometry/HeightModelInfo ./geometry/projection ./geometry/SpatialReference ./geometry/support/heightModelInfoUtils ./geometry/support/jsonUtils ./geometry/support/spatialReferenceUtils ./portal/Portal ./portal/PortalItem ./support/MapFloorInfo ./support/webSceneUtils ./views/support/spatialReferenceSupport ./webdoc/support/saveUtils ./webdoc/support/thumbnailUtils ./webscene/ApplicationProperties ./webscene/Environment ./webscene/InitialViewProperties ./webscene/Presentation ./webscene/TransportationNetwork ./webscene/Version".split(" "),function(b,
d,m,u,w,A,K,v,U,F,L,G,V,q,n,c,g,h,p,l,t,I,X,ha,N,r,da,pa,ra,ta,oa,R,ca,k,x,ba,D,H,P,O,ja,B,J,fa,na,va,Y){const a=q.getLogger("esri.WebScene"),e=new Y.Version(1,24);w=function(y){function E(C){var f=y.call(this,C)||this;f._handles=new U;f.applicationProperties=null;f.clippingArea=null;f.clippingEnabled=!1;f.floorInfo=null;f.heightModelInfo=null;f.sourceVersion=null;f.supportsHeightModelInfo=!0;f.transportationNetworks=null;f.presentation=new na;f.initialViewProperties=new fa;f.portalItem=null;f.resourceInfo=
null;f.debouncedSaveOperations=h.debounce(function(){var z=d._asyncToGenerator(function*(M,T,ia){switch(M){case 0:return f._saveImpl(T);case 1:return f._saveAsImpl(ia,T)}});return function(M,T,ia){return z.apply(this,arguments)}}());f.resourceReferences={portalItem:null,paths:[]};f.authoringApp=null;f.authoringAppVersion=null;f._isAuthoringAppSetByUser=!1;f._isAuthoringAppVersionSetByUser=!1;return f}d._inheritsLoose(E,y);var Q=E.prototype;Q.initialize=function(){this.when().catch(C=>{a.error("#load()",
"Failed to load web scene",C)});if(this.resourceInfo){let C;try{C=this._validateJSON(this.resourceInfo)}catch(f){this.addResolvingPromise(Promise.reject(f));return}this.read(C);this.addResolvingPromise(this._validateSpatialReference());this.addResolvingPromise(this._validateHeightModelInfo())}this._handles.add(this.allLayers.on("change",()=>this._scheduleLayersIdGC()))};Q.destroy=function(){this._unscheduleLayersIdGC();this._handles.destroy();this.presentation&&this.presentation.destroy();const C=
this.portalItem;this.portalItem=null;null==C?void 0:C.destroy()};Q.writeClippingArea=function(C,f){f.clippingArea||(f.clippingArea={});f.clippingArea.geometry=C.toJSON()};Q.readClippingEnabled=function(C,f){return f.clippingArea?!!f.clippingArea.clip:!1};Q.writeClippingEnabled=function(C,f){this.clippingArea&&(f.clippingArea||(f.clippingArea={}),f.clippingArea.clip=C)};Q.writeLayers=function(C,f,z,M){const T={...M,layerContainerType:"operational-layers"};C=C.map(ia=>this.verifyWriteLayer(ia,M)?ia.write(null,
T):null).filter(ia=>!!ia);f[z]=C.toArray()};Q.verifyWriteLayer=function(C,f){return"write"in C?!0:(f&&f.messages&&f.messages.push(new v("layer:unsupported",`Layers (${C.title}, ${C.id}) of type '${C.declaredClass}' cannot be persisted in web scenes`,{layer:C})),!1)};Q.readSourceVersion=function(C,f){const [z,M]=f.version.split(".");return new Y.Version(parseInt(z,10),parseInt(M,10))};Q.writeSourceVersion=function(C,f,z){f[z]=`${e.major}.${e.minor}`};Q.writeAuthoringApp=function(C,f){f.authoringApp=
C&&this._isAuthoringAppSetByUser?C:"ArcGIS API for JavaScript"};Q.writeAuthoringAppVersion=function(C,f){f.authoringAppVersion=C&&this._isAuthoringAppVersionSetByUser?C:u.version};Q.writeGround=function(C,f,z,M){f[z]=C?C.write(null,M):{transparency:0,layers:[]}};Q.readInitialViewProperties=function(C,f){C={};f.initialState&&f.initialState.environment&&(C.environment=J.fromJSON(f.initialState.environment));C.spatialReference=f.spatialReference?oa.fromJSON(f.spatialReference):oa.WebMercator;C.viewingMode=
f.viewingMode||"global";f.initialState&&f.initialState.viewpoint&&(C.viewpoint=A.fromJSON(f.initialState.viewpoint));return new fa(C)};Q.load=function(C){this.addResolvingPromise(this._loadFromSource());return Promise.resolve(this)};Q.loadAll=function(){return V.loadAll(this,C=>{const f=this.presentation&&this.presentation.slides;C(this.ground,this.basemap,this.layers,f&&f.map(z=>z.basemap))})};Q.read=function(C,f){f={...f,origin:"web-scene"};const z=this._isAuthoringAppVersionSetByUser,M=this._isAuthoringAppSetByUser;
da.readLoadable(this,C,T=>y.prototype.read.call(this,C,T),f);M||(this._isAuthoringAppSetByUser=!1);z||(this._isAuthoringAppVersionSetByUser=!1);if(C.baseMap&&Array.isArray(C.baseMap.elevationLayers)&&this.sourceVersion.supportsVisibleElevationLayersInSlides){f=C.baseMap.elevationLayers.map(sa=>({id:sa.id}));const T=this.presentation.slides,ia=(sa,wa)=>sa.visibleLayers.some(Ba=>Ba.id===wa),la=f.filter(sa=>!T.some(wa=>ia(wa,sa.id)));T.forEach(sa=>{sa.visibleLayers.addMany(la)})}};Q._writeBasemapElevationLayers=
function(C){const f=C.ground&&C.ground.layers;!C.baseMap&&f&&f.length&&(C.baseMap={title:"Basemap",baseMapLayers:[]});C.baseMap&&(C.baseMap.elevationLayers=L.clone(f))};Q.write=function(C,f){var z;if("loaded"!==this.loadStatus)throw f=new v("webscene:not-loaded","Web scene must be loaded before it can be serialized"),a.error("#toJSON()","Web scene must be loaded before it can be serialized",this.loadError||this.loadStatus),f;this._runLayersIdGC();var M=!(null!=(z=f)&&z.messages);f={messages:[],...f,
origin:"web-scene"};C=y.prototype.write.call(this,C,f);if(M&&(f=f.messages.filter(T=>"web-document-write:property-required"===T.name),f.length))throw M=new v("web-document:property-required","One or more properties that are required in the webscene JSON are missing, see details for the specific errors",{errors:f}),a.error("#toJSON()","One or more properties that are required in the webscene JSON are missing",f),M;this._writeBasemapElevationLayers(C);return C};Q.save=function(){var C=d._asyncToGenerator(function*(f){return this.debouncedSaveOperations(0,
f)});return function(f){return C.apply(this,arguments)}}();Q._saveImpl=function(){var C=d._asyncToGenerator(function*(f){this.portalItem||(a.error("save(): requires the .portalItem property to be set"),yield Promise.reject(new v("webscene:portal-item-not-set","Portal item to save to has not been set on the WebScene")));"Web Scene"!==this.portalItem.type&&(yield Promise.reject(new v("webscene:portal-item-wrong-type",'Portal item needs to have type "Web Scene"')));const z=this._updateFromPromise;yield this._ensureLoadBeforeSave();
const M=this._enableVerifyItemRelativeUrls({origin:"web-scene",url:this.portalItem.itemUrl&&p.urlToObject(this.portalItem.itemUrl),messages:[],portal:this.portalItem.portal||x.getDefault(),portalItem:this.portalItem,writtenProperties:[],blockedRelativeUrls:[],resources:{toAdd:[],toUpdate:[],toKeep:[],pendingOperations:[]}}),T=this.write(null,M);yield Promise.all(M.resources.pendingOperations);yield this._verifySave(T,M,f);this._updateTypeKeywords(this.portalItem);yield this.portalItem.update({data:T});
yield O.saveResources(this.resourceReferences,M,null);r.updateOrigins(M);z&&(yield z);yield this._saveThumbnail();return this.portalItem});return function(f){return C.apply(this,arguments)}}();Q.saveAs=function(){var C=d._asyncToGenerator(function*(f,z){return this.debouncedSaveOperations(1,z,f)});return function(f,z){return C.apply(this,arguments)}}();Q._saveAsImpl=function(){var C=d._asyncToGenerator(function*(f,z){f=ba.from(f);f||(a.error("saveAs(portalItem): requires a portal item parameter"),
yield Promise.reject(new v("webscene:portal-item-required","saveAs requires a portal item to save to")));f.id&&(f=f.clone(),f.id=null);const M=f.portal||x.getDefault();yield this._ensureLoadBeforeSave();f.type="Web Scene";f.portal=M;const T=this._enableVerifyItemRelativeUrls({origin:"web-scene",url:null,messages:[],portal:M,portalItem:f,writtenProperties:[],blockedRelativeUrls:[],resources:{toAdd:[],toUpdate:[],toKeep:[],pendingOperations:[]}}),ia=this.write(null,T);yield Promise.all(T.resources.pendingOperations);
yield this._verifySaveAs(ia,T,z);const la=this.thumbnailUrl,sa=!this._isOverridden("thumbnailUrl");this._updateTypeKeywords(f);yield M._signIn();yield M.user.addItem({item:f,folder:z&&z.folder,data:ia});yield O.saveResources(this.resourceReferences,T,null);this.portalItem=f;c.MultiOriginJSONSupport.prototype.read.call(this,{version:ia.version,authoringApp:ia.authoringApp,authoringAppVersion:ia.authoringAppVersion},{name:"web-scene",ignoreDefaults:!0,url:f.itemUrl&&p.urlToObject(f.itemUrl)});r.updateOrigins(T);
la&&(this.thumbnailUrl=sa?p.addQueryParameter(la,"w","8192"):la);T.portalItem=f;yield this._saveThumbnail();return f});return function(f,z){return C.apply(this,arguments)}}();Q._saveThumbnail=function(){var C=d._asyncToGenerator(function*(){this._isOverridden("thumbnailUrl")&&(yield this.portalItem.updateThumbnail({thumbnail:this.thumbnailUrl}),this._clearOverride("thumbnailUrl"),this.clear("thumbnailUrl","user"))});return function(){return C.apply(this,arguments)}}();Q._verifySave=function(C,f,z,
M=!1){if(!k.isEarth(this.spatialReference))return Promise.reject(new v("webscene:unsupported-spatial-reference","Webscenes using spatial reference systems from Mars or Moon can not be saved currently."));let T=f.messages.filter(la=>"error"===la.type).map(la=>new v(la.name,la.message,la.details));f.blockedRelativeUrls&&(T=T.concat(f.blockedRelativeUrls.map(la=>new v("url:unsupported",`Relative url '${la}' is not supported in Web Scene`))));z&&z.ignoreUnsupported&&(T=T.filter(la=>"layer:unsupported"!==
la.name&&"symbol:unsupported"!==la.name&&"symbol-layer:unsupported"!==la.name&&"property:unsupported"!==la.name&&"url:unsupported"!==la.name&&"scenemodification:unsupported"!==la.name));null!=z&&z.requiredPropertyChecksDisabled&&(T=T.filter(la=>"web-document-write:property-required"!==la.name));const ia=z&&z.strictSchemaValidationEnabled;return(ia?(new Promise(function(la,sa){b(["./webscene/support/schemaValidator"],la,sa)})).then(la=>{la=la.validate(C);if(0<la.length){const sa=`webscene did not validate:\n${la.join("\n")}`;
a.error(`${M?"saveAs":"save"}(): ${sa}`)}return la.map(sa=>new v("webscene:schema-validation",sa))}).then(la=>{if(ia&&0<la.length)throw H.createSchemaValidationError(la.concat(T));return T}):Promise.resolve(T)).then(la=>{if(0<la.length)return Promise.reject(new v("webscene:save","Failed to save webscene due to unsupported or invalid content. See 'details.errors' for more detailed information",{errors:la}))})};Q._verifySaveAs=function(C,f,z){return this.canSaveAs(f)?Promise.reject(H.createCopyError()):
this._verifySave(C,f,z,!0)};Q.verifySaveAs=function(C){const f=this._enableVerifyItemRelativeUrls({origin:"web-scene",messages:[]}),z=this.write(null,f);return this._verifySaveAs(z,f,C)};Q.canSaveAs=function(C){C||(C=this._enableVerifyItemRelativeUrls({origin:"web-scene",messages:[]}),this.write(null,C));return C.verifyItemRelativeUrls&&0<C.verifyItemRelativeUrls.writtenUrls.length};Q.updateFrom=function(){var C=d._asyncToGenerator(function*(f,z={}){this._updateFromPromise=f=this._updateFromInternal(f,
z);yield f;this._updateFromPromise===f&&(this._updateFromPromise=null)});return function(f){return C.apply(this,arguments)}}();Q._updateFromInternal=function(){var C=d._asyncToGenerator(function*(f,z={}){yield f.whenReady();!z.environmentExcluded&&f.environment&&(this.initialViewProperties.environment=J.prototype.clone.apply(f.environment));!z.viewpointExcluded&&f.viewpoint&&(this.initialViewProperties.viewpoint=f.viewpoint.clone());this.initialViewProperties.spatialReference=f.spatialReference.clone();
this.initialViewProperties.viewingMode=f.viewingMode;f.clippingArea?f.clippingArea!==this.clippingArea&&(this.clippingArea=f.clippingArea.clone(),this.clippingEnabled=!0):this.clippingEnabled=!1;f.heightModelInfo&&(this.heightModelInfo=f.heightModelInfo.clone());f.map===this&&f.allLayerViews.forEach(M=>{M.layer.visible=M.visible});if(!1===z.thumbnailExcluded||null==z.thumbnailExcluded&&!z.viewpointExcluded)yield this._updateFromThumbnail(f,z.thumbnailSize||void 0)});return function(f){return C.apply(this,
arguments)}}();Q._updateFromThumbnail=function(){var C=d._asyncToGenerator(function*(f,z){z=ja.getOptimalThumbnailSize(f,z);this.thumbnailUrl=(yield f.takeScreenshot({format:"jpg",width:z.width,height:z.height,disableDecorations:!0})).dataUrl});return function(f,z){return C.apply(this,arguments)}}();Q._loadFromSource=function(){return this.resourceInfo?this._loadFromJSON(this.resourceInfo,{origin:"web-scene"}):this.portalItem&&this.portalItem.id?this._loadFromItem(this.portalItem):this._loadObjectsWithLayers()};
Q._readAndLoadFromJSON=function(C,f){C=this._validateJSON(C);this.read(C,f);return this._loadFromJSON(C,f)};Q._extractOperationalLayers=function(C){const f=[];if(!this.sourceVersion.supportsGround&&C.baseMap&&Array.isArray(C.baseMap.elevationLayers))for(const T of C.baseMap.elevationLayers)f.push(T);const z=[],M=T=>{T.layers&&(T.layers=T.layers.filter(M));return"ArcGISTiledElevationServiceLayer"===T.layerType?(this.sourceVersion.supportsGround||z.push(T),!1):!0};return{operationalLayers:C.operationalLayers?
C.operationalLayers.filter(M):[],operationalElevationLayers:z,basemapElevationLayers:f}};Q._loadFromJSON=function(C,f){const z=new K;return this._validateSpatialReference().then(()=>this._validateHeightModelInfo()).then(()=>new Promise(function(M,T){b(["./layers/support/layersCreator"],M,T)})).then(({populateOperationalLayers:M})=>{const {operationalLayers:T,operationalElevationLayers:ia,basemapElevationLayers:la}=this._extractOperationalLayers(C),sa=[],wa={context:{...f,layerContainerType:"operational-layers"}};
this.portalItem&&(wa.context.portal=this.portalItem.portal||x.getDefault());0<la.length&&sa.push(M(this.ground.layers,la,{...wa,context:{...wa.context,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"}));0<ia.length&&sa.push(M(z,ia,{...wa,context:{...wa.context,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"}));T&&0<T.length&&sa.push(M(this.layers,T,wa));return h.eachAlways(sa).then(()=>{})}).then(()=>this._loadObjectsWithLayers()).then(()=>
{this.ground.layers.addMany(z)})};Q._ensureLoadBeforeSave=function(){var C=d._asyncToGenerator(function*(){yield this.load();yield this._loadObjectsWithLayers();const f=[];for(const z of this.allLayers.items)if("beforeSave"in z&&"function"===typeof z.beforeSave){const M=z.beforeSave();M&&f.push(M)}yield h.eachAlways(f)});return function(){return C.apply(this,arguments)}}();Q._loadObjectsWithLayers=function(){var C=d._asyncToGenerator(function*(){const f=[];this.ground&&f.push(this.ground.load());
this.basemap&&f.push(this.basemap.load());this.presentation.slides.forEach(z=>{z.basemap&&f.push(z.basemap.load())});yield h.eachAlways(f)});return function(){return C.apply(this,arguments)}}();Q._loadFromItem=function(){var C=d._asyncToGenerator(function*(f){yield f.load().catch(T=>{throw new v("webscene:load-portal-item","Failed to load portal item",{error:T});});if("Web Scene"!==f.type)throw new v("webscene:invalid-portal-item","Invalid portal item type '${type}', expected 'Web Scene'",{type:f.type});
const z=yield f.fetchData();this.resourceInfo=z;const M={origin:"web-scene",url:p.urlToObject(f.itemUrl),portal:f.portal||x.getDefault(),portalItem:f,readResourcePaths:[]};yield this._readAndLoadFromJSON(z,M);this.resourceReferences={portalItem:f,paths:M.readResourcePaths}});return function(f){return C.apply(this,arguments)}}();Q._validateSpatialReference=function(){const C=this.initialViewProperties,f=this._sceneSpatialReference;let z;if("local"!==C.viewingMode){if(!P.isSpatialReferenceSupported(f,
"global"))return Promise.reject(new v("webscene:unsupported-spatial-reference","Unsupported spatial reference (${spatialReference.wkid}) in global mode, only Web Mercator, WGS84 GCS or CGCS2000 are supported",{spatialReference:f,viewingMode:C.viewingMode}));z=ia=>!ia||ta.canProjectWithoutEngine(ia,f)}else{if(!P.isSpatialReferenceSupported(f,"local"))return Promise.reject(new v("webscene:unsupported-spatial-reference","Unsupported spatial reference (${spatialReference.wkid}) in local mode, only projected coordinate systems are supported",
{spatialReference:f,viewingMode:C.viewingMode}));z=ia=>!ia||ia.equals(f)}const M=ia=>ia&&(n.isSome(ia.camera)&&ia.camera.position&&ia.camera.position.spatialReference||n.isSome(ia.targetGeometry)&&ia.targetGeometry.spatialReference);var T=M(C.viewpoint);return T&&!z(T)?Promise.reject(new v("webscene:incompatible-camera-spatial-reference","Camera spatial reference (${cameraSpatialReference.wkid}) is incompatible with the scene spatial reference (${sceneSpatialReference.wkid})",{cameraSpatialReference:T,
sceneSpatialReference:f,viewingMode:C.viewingMode})):(T=this.presentation.slides.find(ia=>!z(M(ia.viewpoint))))?(T=M(T.viewpoint),Promise.reject(new v("webscene:incompatible-slide-spatial-reference","Slide spatial reference (${slideSpatialReference.wkid}) is incompatible with the scene spatial reference (${sceneSpatialReference.wkid})",{slideSpatialReference:T,sceneSpatialReference:f,viewingMode:C.viewingMode}))):Promise.resolve()};Q._validateHeightModelInfo=function(){const C=R.validateWebSceneError(this.heightModelInfo,
this._sceneSpatialReference);return C?Promise.reject(C):Promise.resolve()};Q._validateJSON=function(C){const f=Y.Version.parse(C.version||"","webscene");e.validate(f);C.version=`${f.major}.${f.minor}`;1===f.major&&2>=f.minor&&(C.spatialReference=oa.WebMercator.toJSON());return C};Q._updateTypeKeywords=function(C){"local"===this.initialViewProperties.viewingMode?C.typeKeywords?-1===C.typeKeywords.indexOf("ViewingMode-Local")&&C.typeKeywords.push("ViewingMode-Local"):C.typeKeywords=["ViewingMode-Local"]:
"global"===this.initialViewProperties.viewingMode&&C.typeKeywords&&(C.typeKeywords=C.typeKeywords.filter(f=>"ViewingMode-Local"!==f));C.typeKeywords&&(C.typeKeywords=C.typeKeywords.filter((f,z,M)=>M.indexOf(f)===z))};Q._enableVerifyItemRelativeUrls=function(C){const f=this._verifyItemRelativeRootPath;f&&(C.verifyItemRelativeUrls={rootPath:f,writtenUrls:[]});return C};Q._unscheduleLayersIdGC=function(){this._layersIdGCTimeoutId&&(clearTimeout(this._layersIdGCTimeoutId),this._layersIdGCTimeoutId=0)};
Q._scheduleLayersIdGC=function(){this._unscheduleLayersIdGC();this._layersIdGCTimeoutId=setTimeout(()=>{this._layersIdGCTimeoutId=0;this._runLayersIdGC()},3E3)};Q._runLayersIdGC=function(){this._unscheduleLayersIdGC();var C=this.applicationProperties&&this.applicationProperties.viewing&&this.applicationProperties.viewing.search;const f=z=>!!this.allLayers.find(M=>M.id===z);C&&C.layers&&(C.layers=C.layers.filter(z=>f(z.id)));(C=this.presentation&&this.presentation.slides)&&C.forEach(z=>{z.visibleLayers&&
(z.visibleLayers=z.visibleLayers.filter(M=>f(M.id)))})};E.fromJSON=function(C){if(!C)throw new v("webscene:empty-resource","Expected a JSON resource but got nothing");return new this({resourceInfo:C})};d._createClass(E,[{key:"thumbnailUrl",get:function(){return this.portalItem&&this.portalItem.thumbnailUrl||null},set:function(C){C?this._override("thumbnailUrl",C):(this._clearOverride("thumbnailUrl"),this.clear("thumbnailUrl","user"))}},{key:"authoringApp",set:function(C){this._isAuthoringAppSetByUser=
!0;this._set("authoringApp",C)}},{key:"authoringAppVersion",set:function(C){this._isAuthoringAppVersionSetByUser=!0;this._set("authoringAppVersion",C)}},{key:"spatialReference",get:function(){var C,f;return null!=(C=null==(f=this.initialViewProperties)?void 0:f.spatialReference)?C:oa.WebMercator}},{key:"viewingMode",get:function(){var C,f;return null!=(C=null==(f=this.initialViewProperties)?void 0:f.viewingMode)?C:"global"}},{key:"_sceneSpatialReference",get:function(){return this.initialViewProperties.spatialReference||
oa.WebMercator}},{key:"_verifyItemRelativeRootPath",get:function(){return this.portalItem&&this.portalItem.itemUrl?p.urlToObject(this.portalItem.itemUrl).path:null}}]);return E}(G.LoadableMixin(g.EsriPromiseMixin(c.MultiOriginJSONMixin(w))));w.VERSION=e;m.__decorate([l.property({type:B,json:{write:!0}})],w.prototype,"applicationProperties",void 0);m.__decorate([l.property({json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],w.prototype,"basemap",void 0);m.__decorate([l.property({type:pa,json:{read:{source:"clippingArea.geometry",
reader:ca.fromJSON},write:{target:"clippingArea.geometry"}}})],w.prototype,"clippingArea",void 0);m.__decorate([N.writer("clippingArea")],w.prototype,"writeClippingArea",null);m.__decorate([l.property({type:Boolean,json:{write:{target:"clippingArea.clip"}}})],w.prototype,"clippingEnabled",void 0);m.__decorate([X.reader("clippingEnabled",["clippingArea"])],w.prototype,"readClippingEnabled",null);m.__decorate([N.writer("clippingEnabled")],w.prototype,"writeClippingEnabled",null);m.__decorate([l.property({type:D,
json:{read:{source:"mapFloorInfo"},write:{target:"mapFloorInfo"}}})],w.prototype,"floorInfo",void 0);m.__decorate([l.property({type:ra,json:{write:!0}})],w.prototype,"heightModelInfo",void 0);m.__decorate([l.property({json:{write:{target:"operationalLayers",ignoreOrigin:!0}}})],w.prototype,"layers",void 0);m.__decorate([N.writer("layers")],w.prototype,"writeLayers",null);m.__decorate([l.property({readOnly:!0,type:Y.Version,json:{type:(()=>{const y=[],E=e.major;for(let Q=8;Q<=e.minor;Q++)y.push(`${E}.${Q}`);
return y})(),write:{ignoreOrigin:!0,target:"version",isRequired:!0,overridePolicy:()=>({enabled:!0,allowNull:!0,ignoreOrigin:!0})}}})],w.prototype,"sourceVersion",void 0);m.__decorate([X.reader("sourceVersion",["version"])],w.prototype,"readSourceVersion",null);m.__decorate([N.writer("sourceVersion")],w.prototype,"writeSourceVersion",null);m.__decorate([l.property({json:{read:!1,write:!1}})],w.prototype,"tables",void 0);m.__decorate([l.property()],w.prototype,"thumbnailUrl",null);m.__decorate([l.property({type:String,
json:{write:{allowNull:!0,ignoreOrigin:!0}}})],w.prototype,"authoringApp",null);m.__decorate([N.writer("authoringApp")],w.prototype,"writeAuthoringApp",null);m.__decorate([l.property({type:String,json:{write:{allowNull:!0,ignoreOrigin:!0}}})],w.prototype,"authoringAppVersion",null);m.__decorate([N.writer("authoringAppVersion")],w.prototype,"writeAuthoringAppVersion",null);m.__decorate([l.property({json:{write:{isRequired:!0,allowNull:!0,ignoreOrigin:!0,enabled:!0}}})],w.prototype,"ground",void 0);
m.__decorate([N.writer("ground")],w.prototype,"writeGround",null);m.__decorate([l.property({type:K.ofType(va),json:{write:!0}})],w.prototype,"transportationNetworks",void 0);m.__decorate([l.property({type:na,nonNullable:!0,json:{write:{ignoreOrigin:!0,writer:(y,E,Q,C)=>{y.slides&&0<y.slides.length&&(E.presentation=y.write(null,{...C,isPresentation:!0}))}}}})],w.prototype,"presentation",void 0);m.__decorate([l.property({type:fa,nonNullable:!0,json:{write:{target:"initialState",isRequired:!0,ignoreOrigin:!0},
default:()=>new fa({viewingMode:"global",spatialReference:oa.WebMercator})}})],w.prototype,"initialViewProperties",void 0);m.__decorate([X.reader("initialViewProperties",["initialState.environment","spatialReference","viewingMode","initialState.viewpoint"])],w.prototype,"readInitialViewProperties",null);m.__decorate([l.property({type:oa,json:{read:!1,write:{isRequired:!0,ignoreOrigin:!0}}})],w.prototype,"spatialReference",null);m.__decorate([l.property({type:["local","global"],json:{read:!1,write:{isRequired:!0,
ignoreOrigin:!0}}})],w.prototype,"viewingMode",null);m.__decorate([l.property({type:ba})],w.prototype,"portalItem",void 0);m.__decorate([l.property()],w.prototype,"resourceInfo",void 0);return w=m.__decorate([ha.subclass("esri.WebScene")],w)});