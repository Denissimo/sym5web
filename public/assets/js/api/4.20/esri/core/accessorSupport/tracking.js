// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.20/esri/copyright.txt for details.
//>>built
define(["exports","../has","../Logger","./utils"],function(e,z,w,p){function q(a){if(void 0!==h)h.onObservableAccessed(a)}function k(a,b,d){const c=l;l=!0;h=a;f.push(a);a=null;try{a=b.call(d)}catch(g){m&&x.error(g)}r();l=c;return a}function r(){const a=f.pop();h=0<f.length?f[f.length-1]:void 0;if(void 0!==a)a.onTrackingEnd()}function t(a,b){if(!(b.flags&32)){var d=m;m=!1;b.flags&64?k(b,b.metadata.get,a):u(a,b);m=d}}function u(a,b){b.flags&128||(b.flags|=128,k(b,()=>{var d=b.metadata.dependsOn||y;
for(const c of d)if("string"===typeof c&&-1===c.indexOf("."))v(a,c,!1);else{d=p.pathToArray(c);for(let g=0,n=a;g<d.length&&null!=n&&"object"===typeof n;++g)n=v(n,d[g],g!==d.length-1)}}),b.flags&=-129)}function v(a,b,d){b="?"===b[b.length-1]?b.slice(0,-1):b;if(null!=a.getItemAt||Array.isArray(a)){var c=parseInt(b,10);if(!isNaN(c))return Array.isArray(a)?a[c]:a.getItemAt(c)}c=p.getProperties(a);if(c=null==c?void 0:c.properties.get(b))q(c),t(a,c);return d?a[b]:void 0}let f=[],h=void 0;const x=w.getLogger("esri.core.Accessor");
let l=!1,m=!1;const y=[];e.initializeDependencyTracking=t;e.resetGlobalTarget=function(){f=[]};e.runTracked=function(a,b,d){if(l)return k(a,b,d);h=a;f.push(a);a=b.call(d);r();return a};e.runTrackedNoThrow=k;e.trackAccess=q;e.trackExplicitDependencies=u;Object.defineProperty(e,"__esModule",{value:!0})});