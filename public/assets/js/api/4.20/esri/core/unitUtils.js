// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.20/esri/copyright.txt for details.
//>>built
define("exports ./has ./jsonMap ../geometry/projectionEllipsoid ../geometry/SpatialReference ../geometry/support/Ellipsoid ../geometry/support/spatialReferenceUtils ../geometry/support/WKIDUnitConversion".split(" "),function(c,n,g,H,I,p,r,l){function m(a){if(a=J[a])return a;throw Error("unknown measure");}function w(a){return h[a].baseUnit}function t(a,b=null){b=b||m(a);return h[b].baseUnit===a}function f(a,b,d){if(b===d)return a;const e=m(b);if(e!==m(d))throw Error("incompatible units");a=t(b,e)?
a:a*h[e].units[b].inBaseUnits;return t(d,e)?a:a/h[e].units[d].inBaseUnits}function x(a,b){return 3E3>f(a,b,"meters")?"meters":"kilometers"}function y(a,b){return 1E5>f(a,b,"meters")?"meters":"kilometers"}function z(a,b){return 1E3>f(a,b,"feet")?"feet":"miles"}function A(a,b){return 1E5>f(a,b,"feet")?"feet":"miles"}function B(a){return C.fromJSON(a.toLowerCase())||null}function u(a,b=p.earth.metersPerDegree){return D(a,!0)||b}function D(a,b=!1){let d,e,k=null;null!=a&&("object"===typeof a?(d=a.wkid,
e=a.wkt):"number"===typeof a?d=a:"string"===typeof a&&(e=a));if(d){if(r.isWKIDFromMars(d))return p.mars.metersPerDegree;if(r.isWKIDFromMoon(d))return p.moon.metersPerDegree;k=q.values[q[d]];!k&&b&&K.has(d)&&(k=L)}else e&&(-1!==e.search(/^PROJCS/i)?(a=E.exec(e))&&a[1]&&(k=parseFloat(a[1].split(",")[1])):-1!==e.search(/^GEOCCS/i)&&(a=M.exec(e))&&a[1]&&(k=parseFloat(a[1].split(",")[1])));return k}function v(a){let b,d,e=null;null!=a&&("object"===typeof a?(b=a.wkid,d=a.wkt):"number"===typeof a?b=a:"string"===
typeof a&&(d=a));b?e=q.units[q[b]]:d&&-1!==d.search(/^PROJCS/i)&&(a=E.exec(d))&&a[1]&&(e=(a=/[\\"\\']{1}([^\\"\\']+)/.exec(a[1]))&&a[1]);return e?B(e):null}const L=p.earth.radius*Math.PI/200,E=/UNIT\[([^\]]+)\]\]$/i,q=l,M=/UNIT\[([^\]]+)\]/i,K=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),C=g.strict()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",
chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"});n={millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1E3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},
miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}};l={"square-millimeters":{inBaseUnits:1E-6},"square-centimeters":{inBaseUnits:1E-4},"square-decimeters":{inBaseUnits:.1*.1},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:1E6},"square-inches":{inBaseUnits:6.4516E-4},"square-feet":{inBaseUnits:.09290304},"square-yards":{inBaseUnits:.83612736},"square-miles":{inBaseUnits:2589988.110336},"square-us-feet":{inBaseUnits:(a=>a*a)(1200/3937)},
acres:{inBaseUnits:4046.8564224},ares:{inBaseUnits:100},hectares:{inBaseUnits:1E4}};const h={length:{baseUnit:"meters",units:n},area:{baseUnit:"square-meters",units:l},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1E3*1E-9},"cubic-centimeters":{inBaseUnits:.001},"cubic-decimeters":{inBaseUnits:1},"cubic-meters":{inBaseUnits:1E3},"cubic-kilometers":{inBaseUnits:1E12},"cubic-inches":{inBaseUnits:.016387064},"cubic-feet":{inBaseUnits:.09290304*304.8},"cubic-yards":{inBaseUnits:764.554857984},
"cubic-miles":{inBaseUnits:4.16818182544058E12}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},J=function(){const a={};for(const b in h)for(const d in h[b].units)a[d]=b;return a}(),F={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",
esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},G={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"};n=g.strict()(F);l=g.strict()(G);g=g.strict()({...F,...G});c.areaUnitsJSONMap=n;c.baseUnitForMeasure=w;c.baseUnitForUnit=
function(a){return w(m(a))};c.convertUnit=f;c.getDefaultUnitSystem=function(a){if(!a)return null;switch(v(a)){case "feet":case "us-feet":case "clarke-feet":case "clarke-yards":case "clarke-links":case "sears-yards":case "sears-feet":case "sears-chains":case "benoit-1895-b-chains":case "indian-yards":case "indian-1937-yards":case "gold-coast-feet":case "sears-1922-truncated-chains":return"imperial";case "50-kilometers":case "150-kilometers":case "meters":return"metric"}return null};c.getMetersPerUnit=
D;c.getMetersPerUnitForSR=u;c.getMetersPerVerticalUnitForSR=function(a){if(a&&"object"===typeof a&&!r.isEarth(a))return 1;a=u(a);return 1E5<a?1:a};c.getUnitString=v;c.getVerticalUnitStringForSR=function(a){const b=u(a),d=a instanceof I?H.getReferenceEllipsoid(a).metersPerDegree:1E5;return b>=d?"meters":v(a)};c.inchesPerMeter=39.37;c.isBaseUnit=t;c.isMeasurementSystem=function(a){return"imperial"===a||"metric"===a};c.lengthToDegrees=function(a,b,d){return f(a,b,"meters")/(d*Math.PI/180)};c.lengthUnitsJSONMap=
l;c.measureForUnit=m;c.measurementAreaUnits="metric imperial square-inches square-feet square-yards square-miles square-us-feet square-meters square-kilometers acres ares hectares".split(" ");c.measurementLengthUnits="metric imperial inches feet yards miles nautical-miles us-feet meters kilometers".split(" ");c.preferredImperialAreaUnit=function(a,b){return 1E6>f(a,b,"square-feet")?"square-feet":"square-miles"};c.preferredImperialLengthUnit=z;c.preferredImperialVerticalLengthUnit=A;c.preferredLengthUnit=
function(a,b,d){switch(d){case "metric":return x(a,b);case "imperial":return z(a,b);default:return d}};c.preferredMetricAreaUnit=function(a,b){return 3E6>f(a,b,"square-meters")?"square-meters":"square-kilometers"};c.preferredMetricLengthUnit=x;c.preferredMetricVerticalLengthUnit=y;c.preferredVerticalLengthUnit=function(a,b,d){switch(d){case "metric":return y(a,b);case "imperial":return A(a,b);default:return d}};c.unitFromRESTJSON=B;c.unitToRESTJSON=function(a){return C.toJSON(a)||null};c.unitsJSONMap=
g;Object.defineProperty(c,"__esModule",{value:!0})});