// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.20/esri/copyright.txt for details.
//>>built
define(["exports","../../../../../core/Logger","../../../../../core/screenUtils"],function(q,w,t){function u(a){return("size"===a.type||"color"===a.type||"opacity"===a.type)&&null!=a.stops}function v(a){var g=a.type;var b=a.stops;if(8>=b.length)g=b;else if(x.warn(`Found ${b.length} Visual Variable stops, but MapView only supports ${8}. Displayed stops will be simplified.`),16<b.length){{const [r,...c]=b;var m=c.pop(),k=c[0].value,l=c[c.length-1].value,n=(l-k)/6;const p=[];for(;k<l;k+=n){for(var d=
0;k>=c[d].value;)d++;var e=c[d],h=b[d-1],f=k-h.value;e=e.value===h.value?1:f/(e.value-h.value);"color"===g?(h=c[d],d=b[d-1],f=h.color.clone(),f.r=(1-e)*d.color.r+e*f.r,f.g=(1-e)*d.color.g+e*f.g,f.b=(1-e)*d.color.b+e*f.b,f.a=(1-e)*d.color.a+e*f.a,p.push({value:k,color:f,label:h.label})):"size"===g?(h=c[d],f=b[d-1],d=t.toPt(h.size),f=t.toPt(f.size),p.push({value:k,size:(1-e)*f+e*d,label:h.label})):(h=c[d],p.push({value:k,opacity:(1-e)*b[d-1].opacity+e*h.opacity,label:h.label}))}g=[r,...p,m]}}else{{const [r,
...c]=b;for(g=c.pop();6<c.length;){m=b=0;for(l=1;l<c.length;l++)n=Math.abs(c[l].value-c[l-1].value),n>m&&(m=n,b=l);c.splice(b,1)}g=[r,...c,g]}}a.stops=g;return a}const x=w.getLogger("esri.renderers.visualVariables.support.utils");q.simplifyVVRenderer=a=>{if(!("visualVariables"in a&&a.visualVariables&&a.visualVariables.length))return a;a=a.clone();const g=a.visualVariables.map(b=>u(b)?v(b):b);a.visualVariables=g;return a};q.simplifyVisualVariables=function(a){return a.map(g=>u(g)?v(g.clone()):g)};
Object.defineProperty(q,"__esModule",{value:!0})});