// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.20/esri/copyright.txt for details.
//>>built
require({cache:{"esri/core/HandleOwner":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./Accessor ./Handles ./accessorSupport/decorators/property ./accessorSupport/decorators/subclass ../views/support/WatchUpdatingTracking".split(" "),function(p,c,z,y,r,t,l,v){const q=g=>{g=function(k){function n(){return k.apply(this,arguments)||this}c._inheritsLoose(n,k);n.prototype.destroy=function(){this.destroyed||(this.handles.destroy(),this.updatingHandles.destroy())};c._createClass(n,
[{key:"handles",get:function(){return this._get("handles")||new r}},{key:"updatingHandles",get:function(){return this._get("updatingHandles")||new v.WatchUpdatingTracking}}]);return n}(g);z.__decorate([t.property({readOnly:!0})],g.prototype,"handles",null);z.__decorate([t.property({readOnly:!0})],g.prototype,"updatingHandles",null);return g=z.__decorate([l.subclass("esri.core.HandleOwner")],g)};p.HandleOwner=function(g){function k(){return g.apply(this,arguments)||this}c._inheritsLoose(k,g);return k}(q(y));
p.HandleOwner=z.__decorate([l.subclass("esri.core.HandleOwner")],p.HandleOwner);p.HandleOwnerMixin=q;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/core/Handles":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./Accessor ./Collection ./maybe ./accessorSupport/decorators/property ./accessorSupport/decorators/subclass".split(" "),function(p,c,z,y,r,t,l){z=function(v){function q(k){k=v.call(this,k)||this;k._groups=new Map;return k}p._inheritsLoose(q,v);var g=q.prototype;
g.destroy=function(){this.removeAll()};g.add=function(k,n){if(!this._isHandle(k)&&!Array.isArray(k)&&!y.isCollection(k))return this;const h=this._getOrCreateGroup(n);Array.isArray(k)||y.isCollection(k)?k.forEach(f=>this._isHandle(f)&&h.push(f)):h.push(k);this.notifyChange("size");return this};g.forEach=function(k,n){if("function"===typeof k)this._groups.forEach(h=>h.forEach(k));else{const h=this._getGroup(k);h&&n&&h.forEach(n)}};g.has=function(k){return this._groups.has(this._ensureGroupKey(k))};
g.remove=function(k){if(Array.isArray(k)||y.isCollection(k))return k.forEach(this.remove,this),this;if(!this.has(k))return this;const n=this._getGroup(k);for(let h=0;h<n.length;h++)n[h].remove();this._deleteGroup(k);this.notifyChange("size");return this};g.removeAll=function(){this._groups.forEach(k=>{for(let n=0;n<k.length;n++)k[n].remove()});this._groups.clear();this.notifyChange("size");return this};g._isHandle=function(k){return k&&!!k.remove};g._getOrCreateGroup=function(k){if(this.has(k))return this._getGroup(k);
const n=[];this._groups.set(this._ensureGroupKey(k),n);return n};g._getGroup=function(k){return r.assumeNonNull(this._groups.get(this._ensureGroupKey(k)))};g._deleteGroup=function(k){return this._groups.delete(this._ensureGroupKey(k))};g._ensureGroupKey=function(k){return k||"_default_"};p._createClass(q,[{key:"size",get:function(){let k=0;this._groups.forEach(n=>{k+=n.length});return k}}]);return q}(z);c.__decorate([t.property({readOnly:!0})],z.prototype,"size",null);return z=c.__decorate([l.subclass("esri.core.Handles")],
z)})},"esri/core/Collection":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./ArrayPool ./Evented ./lang ./maybe ./ObjectPool ./scheduling ./accessorSupport/ensureType ./accessorSupport/tracking ./accessorSupport/decorators/property ./accessorSupport/decorators/subclass ./accessorSupport/tracking/SimpleObservable".split(" "),function(p,c,z,y,r,t,l,v,q,g,k,n,h){function f(E){return E?E instanceof w?E.toArray():E.length?Array.prototype.slice.apply(E):[]:[]}function b(E){if(E&&
E.length)return E[0]}function a(E,I,F,H){I&&I.forEach((K,G,L)=>{E.push(K);a(E,F.call(H,K,G,L),F,H)})}var d;let e=function(){function E(){this.target=null;this.defaultPrevented=this.cancellable=!1;this.type=this.item=void 0}var I=E.prototype;I.preventDefault=function(){this.cancellable&&(this.defaultPrevented=!0)};I.reset=function(F){this.defaultPrevented=!1;this.item=F};return E}();const u=new l(e,void 0,E=>{E.item=null;E.target=null;E.defaultPrevented=!1;E.cancellable=!1}),m=()=>{},x=new Set,A=new Set,
D=new Set,B=new Map;let C=0,w=d=function(E){function I(H){H=E.call(this,H)||this;H._chgListeners=[];H._notifications=null;H._timer=null;H._observable=new h.SimpleObservable;H.length=0;H._items=[];Object.defineProperty(p._assertThisInitialized(H),"uid",{value:C++});return H}p._inheritsLoose(I,E);I.isCollection=function(H){return null!=H&&H instanceof d};var F=I.prototype;F.normalizeCtorArgs=function(H){return H?Array.isArray(H)||H instanceof d?{items:H}:H:{}};F[Symbol.iterator]=function*(){yield*this.items};
F.hasEventListener=function(H){return"change"===H?0<this._chgListeners.length:this._emitter.hasEventListener(H)};F.on=function(H,K){if("change"===H){const G=this._chgListeners,L={removed:!1,callback:K};G.push(L);this._notifications&&this._notifications.push({listeners:G.slice(),items:this._items.slice(),changes:[]});return{remove(){this.remove=m;L.removed=!0;G.splice(G.indexOf(L),1)}}}return this._emitter.on(H,K)};F.once=function(H,K){const G=this.on(H,K);return{remove(){G.remove()}}};F.add=function(H,
K){g.trackAccess(this._observable);if(this._emitBeforeChanges(1))return this;K=this.getNextIndex(null!=K?K:null);this._splice(K,0,H);this._emitAfterChanges(1);return this};F.addMany=function(H,K=this._items.length){g.trackAccess(this._observable);if(!H||!H.length||this._emitBeforeChanges(1))return this;K=this.getNextIndex(K);this._splice(K,0,...f(H));this._emitAfterChanges(1);return this};F.removeAll=function(){g.trackAccess(this._observable);if(!this.length||this._emitBeforeChanges(2))return[];const H=
this._splice(0,this.length)||[];this._emitAfterChanges(2);return H};F.clone=function(){g.trackAccess(this._observable);return this._createNewInstance({items:this._items.map(r.clone)})};F.concat=function(...H){g.trackAccess(this._observable);H=H.map(f);return this._createNewInstance({items:this._items.concat(...H)})};F.drain=function(H,K){g.trackAccess(this._observable);if(this.length&&!this._emitBeforeChanges(2)){var G=t.assumeNonNull(this._splice(0,this.length)),L=G.length;for(let P=0;P<L;P++)H.call(K,
G[P],P,G);this._emitAfterChanges(2)}};F.every=function(H,K){g.trackAccess(this._observable);return this._items.every(H,K)};F.filter=function(H,K){g.trackAccess(this._observable);let G;G=2===arguments.length?this._items.filter(H,K):this._items.filter(H);return this._createNewInstance({items:G})};F.find=function(H,K){g.trackAccess(this._observable);return this._items.find(H,K)};F.findIndex=function(H,K){g.trackAccess(this._observable);return this._items.findIndex(H,K)};F.flatten=function(H,K){g.trackAccess(this._observable);
const G=[];a(G,this,H,K);return new d(G)};F.forEach=function(H,K){g.trackAccess(this._observable);return this._items.forEach(H,K)};F.getItemAt=function(H){g.trackAccess(this._observable);return this._items[H]};F.getNextIndex=function(H){g.trackAccess(this._observable);const K=this.length;H=null==H?K:H;0>H?H=0:H>K&&(H=K);return H};F.includes=function(H,K=0){g.trackAccess(this._observable);return this._items.includes(H,K)};F.indexOf=function(H,K=0){g.trackAccess(this._observable);return this._items.indexOf(H,
K)};F.join=function(H=","){g.trackAccess(this._observable);return this._items.join(H)};F.lastIndexOf=function(H,K=this.length-1){g.trackAccess(this._observable);return this._items.lastIndexOf(H,K)};F.map=function(H,K){g.trackAccess(this._observable);H=this._items.map(H,K);return new d({items:H})};F.reorder=function(H,K=this.length-1){g.trackAccess(this._observable);const G=this.indexOf(H);if(-1!==G){0>K?K=0:K>=this.length&&(K=this.length-1);if(G!==K){if(this._emitBeforeChanges(4))return H;this._splice(G,
1);this._splice(K,0,H);this._emitAfterChanges(4)}return H}};F.pop=function(){g.trackAccess(this._observable);if(this.length&&!this._emitBeforeChanges(2)){var H=b(this._splice(this.length-1,1));this._emitAfterChanges(2);return H}};F.push=function(...H){g.trackAccess(this._observable);if(this._emitBeforeChanges(1))return this.length;this._splice(this.length,0,...H);this._emitAfterChanges(1);return this.length};F.reduce=function(H,K){g.trackAccess(this._observable);const G=this._items;return 2===arguments.length?
G.reduce(H,K):G.reduce(H)};F.reduceRight=function(H,K){g.trackAccess(this._observable);const G=this._items;return 2===arguments.length?G.reduceRight(H,K):G.reduceRight(H)};F.remove=function(H){g.trackAccess(this._observable);return this.removeAt(this.indexOf(H))};F.removeAt=function(H){g.trackAccess(this._observable);if(!(0>H||H>=this.length||this._emitBeforeChanges(2)))return H=b(this._splice(H,1)),this._emitAfterChanges(2),H};F.removeMany=function(H){g.trackAccess(this._observable);if(!H||!H.length||
this._emitBeforeChanges(2))return[];H=H instanceof d?H.toArray():H;const K=this._items,G=[],L=H.length;for(let M=0;M<L;M++){var P=K.indexOf(H[M]);if(-1<P){{var R=M+1;var S=P+1;const V=Math.min(H.length-R,K.length-S);let W=0;for(;W<V&&H[R+W]===K[S+W];)W++;R=W}R=1+R;(P=this._splice(P,R))&&0<P.length&&G.push.apply(G,P);M+=R-1}}this._emitAfterChanges(2);return G};F.reverse=function(){g.trackAccess(this._observable);if(this._emitBeforeChanges(4))return this;const H=this._splice(0,this.length);H&&(H.reverse(),
this._splice(0,0,...H));this._emitAfterChanges(4);return this};F.shift=function(){g.trackAccess(this._observable);if(this.length&&!this._emitBeforeChanges(2)){var H=b(this._splice(0,1));this._emitAfterChanges(2);return H}};F.slice=function(H=0,K=this.length){g.trackAccess(this._observable);return this._createNewInstance({items:this._items.slice(H,K)})};F.some=function(H,K){g.trackAccess(this._observable);return this._items.some(H,K)};F.sort=function(H){g.trackAccess(this._observable);if(!this.length||
this._emitBeforeChanges(4))return this;const K=t.assumeNonNull(this._splice(0,this.length));arguments.length?K.sort(H):K.sort();this._splice(0,0,...K);this._emitAfterChanges(4);return this};F.splice=function(H,K,...G){g.trackAccess(this._observable);const L=(K?2:0)|(G.length?1:0);if(this._emitBeforeChanges(L))return[];H=this._splice(H,K,...G)||[];this._emitAfterChanges(L);return H};F.toArray=function(){g.trackAccess(this._observable);return this._items.slice()};F.toJSON=function(){g.trackAccess(this._observable);
return this.toArray()};F.toLocaleString=function(){g.trackAccess(this._observable);return this._items.toLocaleString()};F.toString=function(){g.trackAccess(this._observable);return this._items.toString()};F.unshift=function(...H){g.trackAccess(this._observable);if(!H.length||this._emitBeforeChanges(1))return this.length;this._splice(0,0,...H);this._emitAfterChanges(1);return this.length};F._createNewInstance=function(H){return new this.constructor(H)};F._splice=function(H,K,...G){const L=this._items;
var P=this.constructor.prototype.itemType;let R=void 0;!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=v.schedule(()=>this._dispatchChange()));if(K){R=L.splice(H,K);if(this.hasEventListener("before-remove")){var S=u.acquire();S.target=this;S.cancellable=!0;for(let W=0,ea=R.length;W<ea;W++)K=R[W],S.reset(K),this.emit("before-remove",S),S.defaultPrevented&&
(R.splice(W,1),L.splice(H,0,K),H+=1,--W,--ea);u.release(S)}this.length=this._items.length;if(this.hasEventListener("after-remove")){K=u.acquire();K.target=this;K.cancellable=!1;S=R.length;for(let W=0;W<S;W++)K.reset(R[W]),this.emit("after-remove",K);u.release(K)}}if(G&&G.length){if(P){K=[];for(var M of G)G=P.ensureType(M),null==G&&null!=M||K.push(G);G=K}P=this.hasEventListener("before-add");M=this.hasEventListener("after-add");K=H===this.length;if(P||M){var V=u.acquire();V.target=this;V.cancellable=
!0;S=u.acquire();S.target=this;S.cancellable=!1;for(const W of G)P?(V.reset(W),this.emit("before-add",V),V.defaultPrevented||(K?L.push(W):L.splice(H++,0,W),this._set("length",L.length),M&&(S.reset(W),this.emit("after-add",S)))):(K?L.push(W):L.splice(H++,0,W),this._set("length",L.length),S.reset(W),this.emit("after-add",S));u.release(S);u.release(V)}else{if(K)for(V of G)L.push(V);else L.splice(H,0,...G);this._set("length",L.length)}}(G&&G.length||R&&R.length)&&this._notifyChangeEvent(G,R);return R};
F._emitBeforeChanges=function(H){let K=!1;if(this.hasEventListener("before-changes")){const G=u.acquire();G.target=this;G.cancellable=!0;G.type=H;this.emit("before-changes",G);K=G.defaultPrevented;u.release(G)}return K};F._emitAfterChanges=function(H){if(this.hasEventListener("after-changes")){const K=u.acquire();K.target=this;K.cancellable=!1;K.type=H;this.emit("after-changes",K);u.release(K)}this._observable.notify()};F._notifyChangeEvent=function(H,K){this.hasEventListener("change")&&this._notifications&&
this._notifications[this._notifications.length-1].changes.push({added:H,removed:K})};F._dispatchChange=function(){this._timer&&(this._timer.remove(),this._timer=null);if(this._notifications){var H=this._notifications;this._notifications=null;for(const K of H){H=K.changes;x.clear();A.clear();D.clear();for(const {added:M,removed:V}of H){if(M)if(0===D.size&&0===A.size)for(const W of M)x.add(W);else for(const W of M)A.has(W)?(D.add(W),A.delete(W)):D.has(W)||x.add(W);if(V)if(0===D.size&&0===x.size)for(const W of V)A.add(W);
else for(const W of V)x.has(W)?x.delete(W):(D.delete(W),A.add(W))}const G=z.acquire();x.forEach(M=>{G.push(M)});const L=z.acquire();A.forEach(M=>{L.push(M)});const P=this._items,R=K.items,S=z.acquire();D.forEach(M=>{R.indexOf(M)!==P.indexOf(M)&&S.push(M)});if(K.listeners&&(G.length||L.length||S.length)){H={target:this,added:G,removed:L,moved:S};const M=K.listeners.length;for(let V=0;V<M;V++){const W=K.listeners[V];W.removed||W.callback.call(this,H)}}z.release(G);z.release(L);z.release(S)}x.clear();
A.clear();D.clear()}};p._createClass(I,[{key:"items",get:function(){g.trackAccess(this._observable);return this._items},set:function(H){this._emitBeforeChanges(1)||(this._splice(0,this.length,...f(H)),this._emitAfterChanges(1))}}]);return I}(y.EventedAccessor);w.ofType=E=>{if(!E)return d;if(B.has(E))return B.get(E);var I=null;if("function"===typeof E)I=E.prototype.declaredClass;else if(E.base)I=E.base.prototype.declaredClass;else for(var F in E.typeMap){const H=E.typeMap[F].prototype.declaredClass;
I=I?I+` | ${H}`:H}F=function(H){function K(){return H.apply(this,arguments)||this}p._inheritsLoose(K,H);return K}(d);F=c.__decorate([n.subclass(`esri.core.Collection<${I}>`)],F);I={Type:E,ensureType:"function"===typeof E?q.ensureType(E):q.ensureOneOfType(E)};Object.defineProperty(F.prototype,"itemType",{value:I});B.set(E,F);return F};c.__decorate([k.property()],w.prototype,"length",void 0);c.__decorate([k.property()],w.prototype,"items",null);return w=d=c.__decorate([n.subclass("esri.core.Collection")],
w)})},"esri/core/Evented":function(){define(["../chunks/_rollupPluginBabelHelpers","../chunks/tslib.es6","./Accessor","./handleUtils","./accessorSupport/decorators/subclass"],function(p,c,z,y,r){let t=function(){function l(){this._emitter=new l.EventEmitter(this)}var v=l.prototype;v.emit=function(q,g){return this._emitter.emit(q,g)};v.on=function(q,g){return this._emitter.on(q,g)};v.once=function(q,g){return this._emitter.once(q,g)};v.hasEventListener=function(q){return this._emitter.hasEventListener(q)};
return l}();(function(l){let v=function(){function g(n=null){this.target=n;this._listenersMap=null}var k=g.prototype;k.clear=function(){this._listenersMap&&this._listenersMap.clear()};k.emit=function(n,h){n=this._listenersMap&&this._listenersMap.get(n);if(!n)return!1;const f=this.target||this;[...n].forEach(b=>{b.call(f,h)});return 0<n.length};k.on=function(n,h){if(Array.isArray(n)){var f=n.map(b=>this.on(b,h));return y.handlesGroup(f)}if(-1<n.indexOf(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");
this._listenersMap||(this._listenersMap=new Map);f=this._listenersMap.get(n)||[];f.push(h);this._listenersMap.set(n,f);return{remove:()=>{const b=this._listenersMap&&this._listenersMap.get(n)||[],a=b.indexOf(h);0<=a&&b.splice(a,1)}}};k.once=function(n,h){const f=this.on(n,b=>{f.remove();h.call(null,b)});return f};k.hasEventListener=function(n){n=this._listenersMap&&this._listenersMap.get(n);return null!=n&&0<n.length};return g}();l.EventEmitter=v;l.EventedMixin=g=>{g=function(k){function n(){var f=
k.apply(this,arguments)||this;f._emitter=new v;return f}p._inheritsLoose(n,k);var h=n.prototype;h.destroy=function(){this._emitter.clear()};h.emit=function(f,b){return this._emitter.emit(f,b)};h.on=function(f,b){return this._emitter.on(f,b)};h.once=function(f,b){return this._emitter.once(f,b)};h.hasEventListener=function(f){return this._emitter.hasEventListener(f)};return n}(g);return g=c.__decorate([r.subclass("esri.core.Evented")],g)};let q=function(g){function k(){var h=g.apply(this,arguments)||
this;h._emitter=new t.EventEmitter(p._assertThisInitialized(h));return h}p._inheritsLoose(k,g);var n=k.prototype;n.emit=function(h,f){return this._emitter.emit(h,f)};n.on=function(h,f){return this._emitter.on(h,f)};n.once=function(h,f){return this._emitter.once(h,f)};n.hasEventListener=function(h){return this._emitter.hasEventListener(h)};return k}(z);q=c.__decorate([r.subclass("esri.core.Evented")],q);l.EventedAccessor=q})(t||(t={}));return t})},"esri/core/accessorSupport/tracking/SimpleObservable":function(){define(["exports",
"./ObservationHandle"],function(p,c){let z=function(){function y(){this._observers=[]}var r=y.prototype;r.observe=function(t){this._observers.includes(t)||this._observers.push(t);return new c.ObservationHandle(this._observers,t)};r.notify=function(){const t=this._observers.slice();for(let l=0;l<t.length;++l){const v=t[l];v.onInvalidated();v.onCommitted()}};return y}();p.SimpleObservable=z;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/views/support/WatchUpdatingTracking":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Handles ../../core/maybe ../../core/scheduling ../../core/watchUtils ../../core/accessorSupport/get ../../core/accessorSupport/trackingUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k,n){p.WatchUpdatingTracking=function(h){function f(){var a=h.apply(this,arguments)||this;a.updating=!1;a.handleId=0;a.handles=new r;a.scheduleHandleId=0;a.pendingPromises=new Set;return a}c._inheritsLoose(f,h);var b=f.prototype;b.destroy=function(){this.removeAll();this.handles.destroy()};b.add=function(a,d,e,u=0){const m=0!==(u&1),x=++this.handleId;m||this.installSyncUpdatingWatch(a,d,x);a=0!==(u&2)?v.init(a,d,e,m):a.watch(d,e,m);this.handles.add(a,x);return{remove:()=>
this.handles.remove(x)}};b.addOnCollectionPropertyChange=function(a,d,e,u=0){u=0!==(u&2);const m=++this.handleId;this.handles.add([v.on(a,d,"after-changes",this.createSyncUpdatingCallback()),v.on(a,d,"change",e,u?x=>{e({added:x.items,removed:[],moved:[],target:x})}:void 0)],m);return{remove:()=>{this.handles.remove(m)}}};b.addOnCollectionChange=function(a,d,e=0){e=0!==(e&2);const u=++this.handleId;this.handles.add([a.on("after-changes",this.createSyncUpdatingCallback()),a.on("change",d)],u);e&&d({added:a.items,
removed:[],moved:[],target:a});return{remove:()=>{this.handles.remove(u)}}};b.addPromise=function(a){if(t.isNone(a))return a;const d=++this.handleId;this.handles.add({remove:()=>{this.pendingPromises.delete(a)&&(0!==this.pendingPromises.size||this.handles.has(-42)||this._set("updating",!1))}},d);this.pendingPromises.add(a);this._set("updating",!0);const e=()=>this.handles.remove(d);a.then(e,e);return a};b.removeAll=function(){this.pendingPromises.clear();this.handles.removeAll();this._set("updating",
!1)};b.installSyncUpdatingWatch=function(a,d,e){var u=this.createSyncUpdatingCallback();u=g.reaction(()=>q.valueOf(a,d),u);this.handles.add(u,e);return u};b.createSyncUpdatingCallback=function(){return()=>{this.handles.remove(-42);++this.scheduleHandleId;const a=this.scheduleHandleId;this._get("updating")||this._set("updating",!0);this.handles.add(l.schedule(()=>{a===this.scheduleHandleId&&(this._set("updating",0<this.pendingPromises.size),this.handles.remove(-42))}),-42)}};return f}(y);z.__decorate([k.property({readOnly:!0})],
p.WatchUpdatingTracking.prototype,"updating",void 0);p.WatchUpdatingTracking=z.__decorate([n.subclass("esri.views.support.WatchUpdatingTracking")],p.WatchUpdatingTracking);Object.defineProperty(p,"__esModule",{value:!0})})},"esri/core/watchUtils":function(){define(["exports","./events","./lang","./promiseUtils"],function(p,c,z,y){function r(b,a,d,e,u){u=b.watch(a,(x,A,D,B)=>{if(!d||d(x))null==e?void 0:e.call(b,x,A,D,B)},u);if(Array.isArray(a))for(var m of a){const x=b.get(m);d&&d(x)&&(null==e?void 0:
e.call(b,x,x,a,b))}else m=b.get(a),d&&d(m)&&(null==e?void 0:e.call(b,m,m,a,b));return u}function t(b,a,d,e,u){function m(){B&&(B.remove(),B=null)}const x="function"===typeof e?e:null,A="object"===typeof e?e:null;"boolean"===typeof e&&(u=e);let D=!1,B;const C=y.createDeferred();y.onAbort(A,()=>{m();C.reject(y.createAbortError())});e={then:C.promise.then.bind(C.promise),catch:C.promise.catch.bind(C.promise),remove:m};Object.freeze(e);B=r(b,a,d,(w,E,I,F)=>{D=!0;m();x&&x.call(b,w,E,I,F);C.resolve({value:w,
oldValue:E,propertyName:I,target:F})},u);D&&m();return e}function l(b){return!!b}function v(b){return!b}function q(b){return!0===b}function g(b){return!1===b}function k(b){return void 0!==b}function n(b){return void 0===b}function h(b,a,d,e){var u=Array.isArray(a)?a:-1<a.indexOf(",")?a.split(","):[a];a=b.watch(a,d,e);for(const m of u)u=m.trim().replace(f,"$1"),e=b.get(u),d.call(b,e,e,u,b);return a}const f=/\?(\.|$)/g;p.init=h;p.on=function(b,a,d,e,u,m,x){function A(C){const w=D[C];w&&(m&&m(w.target,
C,b,d),w.handle.remove(),delete D[C])}const D={},B=h(b,a,(C,w,E)=>{A(E);c.isEventTarget(C)&&(D[E]={handle:c.on(C,d,e),target:C},u&&u(C,E,b,d))},x);return{remove(){B.remove();for(const C in D)A(C)}}};p.once=function(b,a,d,e){return t(b,a,null,d,e)};p.pausable=function(b,a,d,e){let u=!1;const m=b.watch(a,(x,A,D,B)=>{u||d.call(b,x,A,D,B)},e);return{remove(){m.remove()},pause(){u=!0},resume(){u=!1}}};p.watch=function(b,a,d,e){return b.watch(a,d,e)};p.when=function(b,a,d,e){return r(b,a,l,d,e)};p.whenDefined=
function(b,a,d,e){return r(b,a,k,d,e)};p.whenDefinedOnce=function(b,a,d,e){return t(b,a,k,d,e)};p.whenEqual=function(b,a,d,e,u){return r(b,a,m=>z.equals(d,m),e,u)};p.whenEqualOnce=function(b,a,d,e,u){return t(b,a,m=>z.equals(d,m),e,u)};p.whenFalse=function(b,a,d,e){return r(b,a,g,d,e)};p.whenFalseOnce=function(b,a,d,e){return t(b,a,g,d,e)};p.whenNot=function(b,a,d,e){return r(b,a,v,d,e)};p.whenNotOnce=function(b,a,d,e){return t(b,a,v,d,e)};p.whenOnce=function(b,a,d,e){return t(b,a,l,d,e)};p.whenTrue=
function(b,a,d,e){return r(b,a,q,d,e)};p.whenTrueOnce=function(b,a,d,e){return t(b,a,q,d,e)};p.whenUndefined=function(b,a,d,e){return r(b,a,n,d,e)};p.whenUndefinedOnce=function(b,a,d,e){return t(b,a,n,d,e)};p.whenValidOnce=t;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/support/TileInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/unitUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/Point ../../geometry/SpatialReference ../../geometry/support/aaBoundingRect ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ./LOD".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k,n,h,f,b,a,d,e){var u;z=new z.JSONMap({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});y=u=function(m){function x(D){D=m.call(this,D)||this;D.dpi=96;D.format=null;D.origin=null;D.minScale=0;D.maxScale=0;D.size=null;D.spatialReference=null;return D}p._inheritsLoose(x,m);x.create=function(D=
{}){const {resolutionFactor:B=1,scales:C,size:w=256,spatialReference:E=f.WebMercator,numLODs:I=24}=D;if(!a.isValid(E)){D=[];if(C)for(var F=0;F<C.length;F++){var H=C[F];D.push({level:F,scale:H,resolution:H})}else for(F=5E-4,H=I-1;0<=H;H--)D.unshift({level:H,scale:F,resolution:F}),F*=2;return new u({dpi:96,lods:D,origin:new h(0,0,E),size:[w,w],spatialReference:E})}F=a.getInfo(E);D=D.origin?new h({x:D.origin.x,y:D.origin.y,spatialReference:E}):F?new h({x:F.origin[0],y:F.origin[1],spatialReference:E}):
new h({x:0,y:0,spatialReference:E});F=1/(39.37*r.getMetersPerUnitForSR(E)*96);H=[];if(C)for(var K=0;K<C.length;K++){var G=C[K];H.push({level:K,scale:G,resolution:G*F})}else{var L=a.isGeographic(E)?512/w*5.916575275917094E8:256/w*5.91657527591555E8;K=Math.ceil(I/B);H.push({level:0,scale:L,resolution:L*F});for(G=1;G<K;G++)L/=2**B,H.push({level:G,scale:L,resolution:L*F})}return new u({dpi:96,lods:H,origin:D,size:[w,w],spatialReference:E})};var A=x.prototype;A.readOrigin=function(D,B){return h.fromJSON({spatialReference:B.spatialReference,
...D})};A.readSize=function(D,B){return[B.cols,B.rows]};A.writeSize=function(D,B){B.cols=D[0];B.rows=D[0]};A.zoomToScale=function(D){const B=this.scales;if(0>=D)return B[0];if(D>=B.length-1)return B[B.length-1];{const C=Math.floor(D);return B[C]/(B[C]/B[C+1])**(D-C)}};A.scaleToZoom=function(D){const B=this.scales,C=B.length-1;let w=0;for(;w<C;w++){const E=B[w],I=B[w+1];if(E<=D)break;if(I===D)return w+1;if(E>D&&I<D)return w+Math.log(E/D)/Math.log(E/I)}return w};A.snapScale=function(D,B=.95){D=this.scaleToZoom(D);
return D%Math.floor(D)>=B?this.zoomToScale(Math.ceil(D)):this.zoomToScale(Math.floor(D))};A.tileAt=function(D,B,C,w){var E=this.lodAt(D);if(!E)return null;let I;if("number"===typeof B)I=B,B=C;else{if(a.equals(B.spatialReference,this.spatialReference))I=B.x,B=B.y;else{w=d.project(B,this.spatialReference);if(!w)return null;I=w.x;B=w.y}w=C}C=E.resolution*this.size[0];E=E.resolution*this.size[1];w||(w={id:null,level:0,row:0,col:0,extent:b.create()});w.level=D;w.row=Math.floor((this.origin.y-B)/E+.001);
w.col=Math.floor((I-this.origin.x)/C+.001);this.updateTileInfo(w);return w};A.updateTileInfo=function(D,B=0){var C=this.lodAt(D.level);C||1!==B||(B=this.lods[this.lods.length-1],B.level<D.level&&(C=B));if(C){var w=D.level-C.level;B=C.resolution*this.size[0]/2**w;C=C.resolution*this.size[1]/2**w;D.id=`${D.level}/${D.row}/${D.col}`;D.extent||(D.extent=b.create());D.extent[0]=this.origin.x+D.col*B;D.extent[1]=this.origin.y-(D.row+1)*C;D.extent[2]=D.extent[0]+B;D.extent[3]=D.extent[1]+C}};A.upsampleTile=
function(D){const B=this._upsampleLevels[D.level];if(!B||-1===B.parentLevel)return!1;D.level=B.parentLevel;D.row=Math.floor(D.row/B.factor+.001);D.col=Math.floor(D.col/B.factor+.001);this.updateTileInfo(D);return!0};A.getTileBounds=function(D,B){var {resolution:C}=this.lodAt(B.level);const w=C*this.size[0];C*=this.size[1];D[0]=this.origin.x+B.col*w;D[1]=this.origin.y-(B.row+1)*C;D[2]=D[0]+w;D[3]=D[1]+C;return D};A.lodAt=function(D){return this._levelToLOD&&this._levelToLOD[D]||null};A.clone=function(){return u.fromJSON(this.write({}))};
A._initializeUpsampleLevels=function(){const D=this.lods;this._upsampleLevels=[];let B=null;for(let C=0;C<D.length;C++){const w=D[C];this._upsampleLevels[w.level]={parentLevel:B?B.level:-1,factor:B?B.resolution/w.resolution:0};B=w}};p._createClass(x,[{key:"isWrappable",get:function(){const {spatialReference:D,origin:B}=this;if(D&&B){const C=a.getInfo(D);return D.isWrappable&&Math.abs(C.origin[0]-B.x)<=C.dx}return!1}},{key:"lods",set:function(D){let B=0,C=0;const w=[];this._levelToLOD={};D&&(B=-Infinity,
C=Infinity,D.forEach(E=>{w.push(E.scale);B=E.scale>B?E.scale:B;C=E.scale<C?E.scale:C;this._levelToLOD[E.level]=E}));this._set("scales",w);this._set("minScale",B);this._set("maxScale",C);this._set("lods",D);this._initializeUpsampleLevels()}}]);return x}(y.JSONSupport);c.__decorate([t.property({type:Number,json:{write:!0}})],y.prototype,"compressionQuality",void 0);c.__decorate([t.property({type:Number,json:{write:!0}})],y.prototype,"dpi",void 0);c.__decorate([t.property({type:String,json:{read:z.read,
write:z.write,origins:{"web-scene":{read:!1,write:!1}}}})],y.prototype,"format",void 0);c.__decorate([t.property({readOnly:!0})],y.prototype,"isWrappable",null);c.__decorate([t.property({type:h,json:{write:!0}})],y.prototype,"origin",void 0);c.__decorate([g.reader("origin")],y.prototype,"readOrigin",null);c.__decorate([t.property({type:[e],value:null,json:{write:!0}})],y.prototype,"lods",null);c.__decorate([t.property({readOnly:!0})],y.prototype,"minScale",void 0);c.__decorate([t.property({readOnly:!0})],
y.prototype,"maxScale",void 0);c.__decorate([t.property({readOnly:!0})],y.prototype,"scales",void 0);c.__decorate([t.property({cast:m=>Array.isArray(m)?m:"number"===typeof m?[m,m]:[256,256]})],y.prototype,"size",void 0);c.__decorate([g.reader("size",["rows","cols"])],y.prototype,"readSize",null);c.__decorate([n.writer("size",{cols:{type:v.Integer},rows:{type:v.Integer}})],y.prototype,"writeSize",null);c.__decorate([t.property({type:f,json:{write:!0}})],y.prototype,"spatialReference",void 0);return y=
u=c.__decorate([k.subclass("esri.layers.support.TileInfo")],y)})},"esri/core/unitUtils":function(){define("exports ./has ./jsonMap ../geometry/projectionEllipsoid ../geometry/SpatialReference ../geometry/support/Ellipsoid ../geometry/support/spatialReferenceUtils ../geometry/support/WKIDUnitConversion".split(" "),function(p,c,z,y,r,t,l,v){function q(K){if(K=I[K])return K;throw Error("unknown measure");}function g(K){return E[K].baseUnit}function k(K,G=null){G=G||q(K);return E[G].baseUnit===K}function n(K,
G,L){if(G===L)return K;const P=q(G);if(P!==q(L))throw Error("incompatible units");K=k(G,P)?K:K*E[P].units[G].inBaseUnits;return k(L,P)?K:K/E[P].units[L].inBaseUnits}function h(K,G){return 3E3>n(K,G,"meters")?"meters":"kilometers"}function f(K,G){return 1E5>n(K,G,"meters")?"meters":"kilometers"}function b(K,G){return 1E3>n(K,G,"feet")?"feet":"miles"}function a(K,G){return 1E5>n(K,G,"feet")?"feet":"miles"}function d(K){return w.fromJSON(K.toLowerCase())||null}function e(K,G=t.earth.metersPerDegree){return u(K,
!0)||G}function u(K,G=!1){let L,P,R=null;null!=K&&("object"===typeof K?(L=K.wkid,P=K.wkt):"number"===typeof K?L=K:"string"===typeof K&&(P=K));if(L){if(l.isWKIDFromMars(L))return t.mars.metersPerDegree;if(l.isWKIDFromMoon(L))return t.moon.metersPerDegree;R=D.values[D[L]];!R&&G&&C.has(L)&&(R=x)}else P&&(-1!==P.search(/^PROJCS/i)?(K=A.exec(P))&&K[1]&&(R=parseFloat(K[1].split(",")[1])):-1!==P.search(/^GEOCCS/i)&&(K=B.exec(P))&&K[1]&&(R=parseFloat(K[1].split(",")[1])));return R}function m(K){let G,L,P=
null;null!=K&&("object"===typeof K?(G=K.wkid,L=K.wkt):"number"===typeof K?G=K:"string"===typeof K&&(L=K));G?P=D.units[D[G]]:L&&-1!==L.search(/^PROJCS/i)&&(K=A.exec(L))&&K[1]&&(P=(K=/[\\"\\']{1}([^\\"\\']+)/.exec(K[1]))&&K[1]);return P?d(P):null}const x=t.earth.radius*Math.PI/200,A=/UNIT\[([^\]]+)\]\]$/i,D=v,B=/UNIT\[([^\]]+)\]/i,C=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),w=z.strict()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",
yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"});c={millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},
kilometers:{inBaseUnits:1E3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}};v={"square-millimeters":{inBaseUnits:1E-6},"square-centimeters":{inBaseUnits:1E-4},"square-decimeters":{inBaseUnits:.1*.1},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:1E6},"square-inches":{inBaseUnits:6.4516E-4},"square-feet":{inBaseUnits:.09290304},"square-yards":{inBaseUnits:.83612736},
"square-miles":{inBaseUnits:2589988.110336},"square-us-feet":{inBaseUnits:(K=>K*K)(1200/3937)},acres:{inBaseUnits:4046.8564224},ares:{inBaseUnits:100},hectares:{inBaseUnits:1E4}};const E={length:{baseUnit:"meters",units:c},area:{baseUnit:"square-meters",units:v},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1E3*1E-9},"cubic-centimeters":{inBaseUnits:.001},"cubic-decimeters":{inBaseUnits:1},"cubic-meters":{inBaseUnits:1E3},"cubic-kilometers":{inBaseUnits:1E12},
"cubic-inches":{inBaseUnits:.016387064},"cubic-feet":{inBaseUnits:.09290304*304.8},"cubic-yards":{inBaseUnits:764.554857984},"cubic-miles":{inBaseUnits:4.16818182544058E12}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},I=function(){const K={};for(const G in E)for(const L in E[G].units)K[L]=G;return K}(),F={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",
esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},H={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"};c=z.strict()(F);
v=z.strict()(H);z=z.strict()({...F,...H});p.areaUnitsJSONMap=c;p.baseUnitForMeasure=g;p.baseUnitForUnit=function(K){return g(q(K))};p.convertUnit=n;p.getDefaultUnitSystem=function(K){if(!K)return null;switch(m(K)){case "feet":case "us-feet":case "clarke-feet":case "clarke-yards":case "clarke-links":case "sears-yards":case "sears-feet":case "sears-chains":case "benoit-1895-b-chains":case "indian-yards":case "indian-1937-yards":case "gold-coast-feet":case "sears-1922-truncated-chains":return"imperial";
case "50-kilometers":case "150-kilometers":case "meters":return"metric"}return null};p.getMetersPerUnit=u;p.getMetersPerUnitForSR=e;p.getMetersPerVerticalUnitForSR=function(K){if(K&&"object"===typeof K&&!l.isEarth(K))return 1;K=e(K);return 1E5<K?1:K};p.getUnitString=m;p.getVerticalUnitStringForSR=function(K){const G=e(K),L=K instanceof r?y.getReferenceEllipsoid(K).metersPerDegree:1E5;return G>=L?"meters":m(K)};p.inchesPerMeter=39.37;p.isBaseUnit=k;p.isMeasurementSystem=function(K){return"imperial"===
K||"metric"===K};p.lengthToDegrees=function(K,G,L){return n(K,G,"meters")/(L*Math.PI/180)};p.lengthUnitsJSONMap=v;p.measureForUnit=q;p.measurementAreaUnits="metric imperial square-inches square-feet square-yards square-miles square-us-feet square-meters square-kilometers acres ares hectares".split(" ");p.measurementLengthUnits="metric imperial inches feet yards miles nautical-miles us-feet meters kilometers".split(" ");p.preferredImperialAreaUnit=function(K,G){return 1E6>n(K,G,"square-feet")?"square-feet":
"square-miles"};p.preferredImperialLengthUnit=b;p.preferredImperialVerticalLengthUnit=a;p.preferredLengthUnit=function(K,G,L){switch(L){case "metric":return h(K,G);case "imperial":return b(K,G);default:return L}};p.preferredMetricAreaUnit=function(K,G){return 3E6>n(K,G,"square-meters")?"square-meters":"square-kilometers"};p.preferredMetricLengthUnit=h;p.preferredMetricVerticalLengthUnit=f;p.preferredVerticalLengthUnit=function(K,G,L){switch(L){case "metric":return f(K,G);case "imperial":return a(K,
G);default:return L}};p.unitFromRESTJSON=d;p.unitToRESTJSON=function(K){return w.toJSON(K)||null};p.unitsJSONMap=z;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/geometry/projectionEllipsoid":function(){define(["exports","./SpatialReference","./support/Ellipsoid","./support/spatialReferenceUtils"],function(p,c,z,y){function r(g){return new c({wkt:`GEOCCS["Spherical geocentric",
    DATUM["Not specified",
      SPHEROID["Sphere",${g.radius},0]],
    PRIMEM["Greenwich",0.0,
      AUTHORITY["EPSG","8901"]],
    UNIT["m",1.0],
    AXIS["Geocentric X",OTHER],
    AXIS["Geocentric Y",EAST],
    AXIS["Geocentric Z",NORTH]
  ]`})}const t=r(z.earth),l=r(z.mars),v=r(z.moon),q=new c({wkt:`GEOCCS["WGS 84",
  DATUM["WGS_1984",
    SPHEROID["WGS 84",${z.earth.radius},298.257223563,
      AUTHORITY["EPSG","7030"]],
    AUTHORITY["EPSG","6326"]],
  PRIMEM["Greenwich",0,
    AUTHORITY["EPSG","8901"]],
  UNIT["m",1.0,
    AUTHORITY["EPSG","9001"]],
  AXIS["Geocentric X",OTHER],
  AXIS["Geocentric Y",OTHER],
  AXIS["Geocentric Z",NORTH],
  AUTHORITY["EPSG","4978"]
]`});p.SphericalECEFSpatialReference=t;p.SphericalPCPFMars=l;p.SphericalPCPFMoon=v;p.WGS84ECEFSpatialReference=q;p.createSphericalPCPF=r;p.getReferenceEllipsoid=function(g){return g&&(y.isMars(g)||g===l)?z.mars:g&&(y.isMoon(g)||g===v)?z.moon:z.earth};p.getReferenceEllipsoidFromWKID=function(g){return y.isWKIDFromMars(g)?z.mars:y.isWKIDFromMoon(g)?z.moon:z.earth};p.getSphericalPCPF=function(g){return g&&(y.isMars(g)||g===l)?l:g&&(y.isMoon(g)||g===v)?v:t};p.getSphericalPCPFForEllipsoid=function(g){return g&&
g===z.mars?l:g&&g===z.moon?v:t};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/geometry/support/aaBoundingRect":function(){define(["exports","../../core/has","../../core/maybe","../Extent"],function(p,c,z,y){function r(f=h){return[f[0],f[1],f[2],f[3]]}function t(f){return f[0]>=f[2]?0:f[2]-f[0]}function l(f){return f[1]>=f[3]?0:f[3]-f[1]}function v(f,b,a){return b>=f[0]&&a>=f[1]&&b<=f[2]&&a<=f[3]}function q(f,b){f[0]=b[0];f[1]=b[1];f[2]=b[2];f[3]=b[3];return f}function g(f){return 4===
f.length}function k(f,b,a){return f<b?b:f>a?a:f}const n=[Infinity,Infinity,-Infinity,-Infinity],h=[0,0,0,0];p.NEGATIVE_INFINITY=n;p.POSITIVE_INFINITY=[-Infinity,-Infinity,Infinity,Infinity];p.UNIT=[0,0,1,1];p.ZERO=h;p.allFinite=function(f){for(let b=0;4>b;b++)if(!isFinite(f[b]))return!1;return!0};p.area=function(f){return t(f)*l(f)};p.center=function(f,b=[0,0]){b[0]=(f[0]+f[2])/2;b[1]=(f[1]+f[3])/2;return b};p.clone=function(f){return[f[0],f[1],f[2],f[3]]};p.contains=function(f,b){return b[0]>=f[0]&&
b[2]<=f[2]&&b[1]>=f[1]&&b[3]<=f[3]};p.containsPoint=function(f,b){return v(f,b[0],b[1])};p.containsPointObject=function(f,b){return v(f,b.x,b.y)};p.containsPointWithMargin=function(f,b,a){return b[0]>=f[0]-a&&b[1]>=f[1]-a&&b[0]<=f[2]+a&&b[1]<=f[3]+a};p.containsXY=v;p.create=r;p.diameter=function(f){const b=t(f);f=l(f);return Math.sqrt(b*b+f*f)};p.distance=function(f,b){const a=(f[1]+f[3])/2,d=Math.max(Math.abs(b[0]-(f[0]+f[2])/2)-t(f)/2,0);f=Math.max(Math.abs(b[1]-a)-l(f)/2,0);return Math.sqrt(d*
d+f*f)};p.empty=function(f){return f?q(f,n):r(n)};p.equals=function(f,b,a){if(z.isNone(f)||z.isNone(b))return f===b;if(!g(f)||!g(b))return!1;if(a)for(let d=0;d<f.length;d++){if(!a(f[d],b[d]))return!1}else for(a=0;a<f.length;a++)if(f[a]!==b[a])return!1;return!0};p.expand=function(f,b,a=f){if("length"in b)if(g(b))a[0]=Math.min(f[0],b[0]),a[1]=Math.min(f[1],b[1]),a[2]=Math.max(f[2],b[2]),a[3]=Math.max(f[3],b[3]);else{if(2===b.length||3===b.length)a[0]=Math.min(f[0],b[0]),a[1]=Math.min(f[1],b[1]),a[2]=
Math.max(f[2],b[0]),a[3]=Math.max(f[3],b[1])}else switch(b.type){case "extent":a[0]=Math.min(f[0],b.xmin);a[1]=Math.min(f[1],b.ymin);a[2]=Math.max(f[2],b.xmax);a[3]=Math.max(f[3],b.ymax);break;case "point":a[0]=Math.min(f[0],b.x),a[1]=Math.min(f[1],b.y),a[2]=Math.max(f[2],b.x),a[3]=Math.max(f[3],b.y)}return a};p.expandPointInPlace=function(f,b){b[0]<f[0]&&(f[0]=b[0]);b[0]>f[2]&&(f[2]=b[0]);b[1]<f[1]&&(f[1]=b[1]);b[1]>f[3]&&(f[3]=b[1])};p.expandWithNestedArray=function(f,b,a=f){const d=b.length;let e=
f[0],u=f[1],m=f[2];f=f[3];for(let x=0;x<d;x++){const A=b[x];e=Math.min(e,A[0]);u=Math.min(u,A[1]);m=Math.max(m,A[0]);f=Math.max(f,A[1])}a[0]=e;a[1]=u;a[2]=m;a[3]=f;return a};p.fromExtent=function(f,b=r()){b[0]=f.xmin;b[1]=f.ymin;b[2]=f.xmax;b[3]=f.ymax;return b};p.fromValues=function(f,b,a,d,e=r()){e[0]=f;e[1]=b;e[2]=a;e[3]=d;return e};p.height=l;p.intersection=function(f,b,a=f){const d=b[0],e=b[1],u=b[2];b=b[3];a[0]=k(f[0],d,u);a[1]=k(f[1],e,b);a[2]=k(f[2],d,u);a[3]=k(f[3],e,b);return a};p.intersects=
function(f,b){return Math.max(b[0],f[0])<=Math.min(b[2],f[2])&&Math.max(b[1],f[1])<=Math.min(b[3],f[3])};p.is=g;p.isPoint=function(f){return(0===t(f)||!isFinite(f[0]))&&(0===l(f)||!isFinite(f[1]))};p.offset=function(f,b,a,d=f){d[0]=f[0]+b;d[1]=f[1]+a;d[2]=f[2]+b;d[3]=f[3]+a;return d};p.pad=function(f,b,a=f){a[0]=f[0]-b;a[1]=f[1]-b;a[2]=f[2]+b;a[3]=f[3]+b;return a};p.set=q;p.setMax=function(f,b,a=f){a[2]=b[0];a[3]=b[1];a!==f&&(a[0]=f[0],a[1]=f[1]);return f};p.setMin=function(f,b,a=f){a[0]=b[0];a[1]=
b[1];a!==f&&(a[2]=f[2],a[3]=f[3]);return a};p.size=function(f,b){b[0]=f[2]-f[0];b[1]=f[3]-f[1]};p.toExtent=function(f,b){return new y({xmin:f[0],ymin:f[1],xmax:f[2],ymax:f[3],spatialReference:b})};p.width=t;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/support/LOD":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass".split(" "),
function(p,c,z,y,r,t,l,v,q){var g;z=g=function(k){function n(h){h=k.call(this,h)||this;h.level=0;h.levelValue=null;h.resolution=0;h.scale=0;return h}p._inheritsLoose(n,k);n.prototype.clone=function(){return new g({level:this.level,levelValue:this.levelValue,resolution:this.resolution,scale:this.scale})};return n}(z.JSONSupport);c.__decorate([y.property({type:t.Integer,json:{write:!0}})],z.prototype,"level",void 0);c.__decorate([y.property({type:String,json:{write:!0}})],z.prototype,"levelValue",void 0);
c.__decorate([y.property({type:Number,json:{write:!0}})],z.prototype,"resolution",void 0);c.__decorate([y.property({type:Number,json:{write:!0}})],z.prototype,"scale",void 0);return z=g=c.__decorate([q.subclass("esri.layers.support.LOD")],z)})},"esri/views/2d/layers/features/processors":function(){define(["require","exports"],function(p,c){c.loadProcessorModule=function(z){return"heatmap"===z?new Promise(function(y,r){p(["./processors/HeatmapProcessor"],function(t){y(Object.freeze({__proto__:null,
"default":t}))},r)}):new Promise(function(y,r){p(["./processors/SymbolProcessor"],function(t){y(Object.freeze({__proto__:null,"default":t}))},r)})};Object.defineProperty(c,"__esModule",{value:!0})})},"esri/views/2d/layers/features/controllers/FeatureController2D":function(){define("../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/tslib.es6 ../../../../../core/HandleOwner ../../../../../core/has ../../../../../core/maybe ../../../../../core/promiseUtils ../../../../../core/watchUtils ../../../../../core/accessorSupport/decorators/property ../../../../../core/accessorSupport/ensureType ../../../../../core/Logger ../../../../../core/jsonMap ../../../../../core/accessorSupport/decorators/subclass ../../../../../layers/graphics/featureConversionUtils ../../../../../layers/graphics/data/QueryEngine ../../../../../layers/support/FieldsIndex ../FeatureStore2D ../sources/createSource ../support/AttributeStore ../support/ClusterStore ../support/ComputedAttributeStorage ../support/FeatureSetReaderJSON ../support/UpdateToken ../../../../support/QueueProcessor".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k,n,h,f,b,a,d,e,u,m,x,A,D){function B(w){if(!t.isAbortError(w)&&"worker:port-closed"!==w.name)throw w;}function C(w){return"feature"===w.type&&"snapshot"===w.mode}z=function(w){function E(){var F=w.apply(this,arguments)||this;F._storage=new m.ComputedAttributeStorage;F._markedIdsBufId=F._storage.createBitset();F._lastCleanup=performance.now();F._cleanupNeeded=!1;F._invalidated=!1;F._tileToResolver=new Map;F._didEdit=!1;F.tileStore=null;F.config=null;F.processor=null;F.remoteClient=
null;F.service=null;return F}p._inheritsLoose(E,w);var I=E.prototype;I.initialize=function(){this._initAttributeStore();this._initStores();this._initQueryEngine();this._initSource();this._updateQueue=new D.QueueProcessor({concurrency:"geoevent"===this._source.type?1:4,process:(F,H)=>this._onTileMessage(F,{signal:H})});this.handles.add([this.tileStore.on("update",this.onTileUpdate.bind(this)),this.watch("updating",F=>!F&&this.onIdle())]);this._checkUpdating=setInterval(()=>this.notifyChange("updating"),
300)};I.startup=function(){var F=p._asyncToGenerator(function*(){this._initAttributeStore();this.tileStore.tiles.forEach(H=>this._source.subscribe(H))});return function(){return F.apply(this,arguments)}}();I._initSource=function(){this._source=d.createSource(this.service,this.spatialReference,this.tileStore.tileScheme,(F,H)=>{this._invalidated=!0;return this._patchTile(F,H)},()=>50>this._updateQueue.length,this.featureStore);this._proxyEvents()};I._proxyEvents=function(){if("geoevent"===this._source.type){const F=
this._source.events;this.handles.add([F.on("connectionStatus",H=>this.remoteClient.invoke("setProperty",{propertyName:"connectionStatus",value:H}).catch(B)),F.on("errorString",H=>this.remoteClient.invoke("setProperty",{propertyName:"errorString",value:H}).catch(B)),F.on("feature",H=>this.remoteClient.invoke("emitEvent",{name:"data-received",event:{attributes:H.attributes,centroid:H.centroid,geometry:H.geometry}}).catch(B)),F.on("updateRate",H=>this.remoteClient.invoke("emitEvent",{name:"update-rate",
event:{...H}}).catch(B))])}};I._initAttributeStore=function(){this.attributeStore?this.attributeStore.invalidateResources():this.attributeStore=new e["default"]({type:"remote",initialize:(F,H)=>t.ignoreAbortErrors(this.remoteClient.invoke("tileRenderer.featuresView.attributeView.initialize",F,{signal:H}).catch(B)),update:(F,H)=>t.ignoreAbortErrors(this.remoteClient.invoke("tileRenderer.featuresView.attributeView.requestUpdate",F,{signal:H}).catch(B)),render:F=>t.ignoreAbortErrors(this.remoteClient.invoke("tileRenderer.featuresView.requestRender",
void 0,{signal:F}).catch(B))},this.config)};I._initStores=function(){const F={geometryInfo:{geometryType:this.service.geometryType,hasM:!1,hasZ:!1},spatialReference:this.spatialReference,fieldsIndex:this.fieldsIndex,fields:this.service.fields};this.featureStore=new a.FeatureStore2D(F,this._storage,"snapshot"===this.service.type?"snapshot":"on-demand");this.aggregateStore=new u.ClusterStore(F,this.spatialReference,this._storage);this.handles.add(this.aggregateStore.events.on("valueRangesChanged",H=>
{this.remoteClient.invoke("emitEvent",{name:"valueRangesChanged",event:{valueRanges:H.valueRanges}}).catch(B)}))};I._initQueryEngine=function(){var F;const H=this;null==(F=this.queryEngine)?void 0:F.destroy();this.queryEngine=new f["default"]({definitionExpression:this.config.definitionExpression,fields:this.service.fields,geometryType:this.service.geometryType,objectIdField:this.service.objectIdField,hasM:!1,hasZ:!1,spatialReference:this.spatialReference.toJSON(),cacheSpatialQueries:!0,featureStore:this.featureStore,
aggregateAdapter:{getFeatureObjectIds(K){return H.aggregateStore.getFeatureDisplayIdsForAggregate(K).map(G=>H.getObjectId(G))}},timeInfo:this.service.timeInfo})};I.destroy=function(){this._updateQueue.destroy();this._source.destroy();this.queryEngine.destroy();this.attributeStore&&this.attributeStore.destroy();clearInterval(this._checkUpdating)};I.isUpdating=function(){return this._source.updating||!!this._updateQueue.length};I.enableEvent=function(F){this._source.enableEvent(F.name,F.value)};I.pause=
function(){this._updateQueue.pause();this._updateQueue.clear()};I.update=function(){var F=p._asyncToGenerator(function*(H,K){this._set("config",K);this._schema=K.schema;this._initQueryEngine();yield Promise.all([this._source.update(H,K.schema.source),this.featureStore.updateSchema(H,K.schema.targets.feature),this.attributeStore.update(H,K),this.attributeStore.updateFilters(H,this)]);yield this.aggregateStore.updateSchema(H,K.schema.targets.aggregate);y("esri-2d-update-debug")&&H.describe()});return function(H,
K){return F.apply(this,arguments)}}();I.applyUpdate=function(){var F=p._asyncToGenerator(function*(H){H.mesh&&this.clearTiles();this._updateQueue.resume();yield this._source.applyUpdate(H);this.notifyChange("updating");yield l.whenFalseOnce(this,"updating",!0);this.hasAggregates&&(yield t.after(10),yield l.whenFalseOnce(this,"updating",!0))});return function(H){return F.apply(this,arguments)}}();I.onEdits=function(){var F=p._asyncToGenerator(function*({edits:H}){y("esri-2d-update-debug")&&console.debug("Applying Edit:",
H);this._didEdit=!0;try{const K=H.removed.map(L=>L.objectId&&-1!==L.objectId?L.objectId:this._lookupObjectIdByGlobalId(L.globalId)),G=H.addOrModified.map(({objectId:L})=>L);this.featureStore.invalidate();yield this._source.edit(G,K);this.clearTiles();this.notifyChange("updating");yield this._source.resend();yield l.whenFalseOnce(this,"updating",!0)}catch(K){}});return function(H){return F.apply(this,arguments)}}();I.refresh=function(){var F=p._asyncToGenerator(function*(){this.featureStore.invalidate();
this.clearTiles();this._source.refresh();this._cleanupNeeded=!0;this.notifyChange("updating");yield l.whenFalseOnce(this,"updating",!0)});return function(){return F.apply(this,arguments)}}();I.clearTiles=function(){for(const F of this.tileStore.tiles)this.processor.onTileClear(F)};I.onTileUpdate=function(F){this.aggregateStore.onTileUpdate(F);for(const H of F.added)this._source.subscribe(H),this._level=H.level;for(const H of F.removed)this._source.unsubscribe(H),this._cleanupNeeded=!0,this._tileToResolver.has(H.id)&&
(this._tileToResolver.get(H.id).resolve(),this._tileToResolver.delete(H.id));this.notifyChange("updating")};I.onIdle=function(){this._invalidated&&((this.hasAggregates||"heatmap"===this.processor.type)&&this._repushCurrentLevelTiles(),this._invalidated=!1);this._markAndSweep()};I.querySummaryStatistics=function(){var F=p._asyncToGenerator(function*({query:H,params:K}){return this.queryEngine.executeQueryForSummaryStatistics(H,K)});return function(H){return F.apply(this,arguments)}}();I.queryExtent=
function(F){return this.queryEngine.executeQueryForExtent(F)};I.queryFeatures=function(F){return this.queryEngine.executeQuery(F)};I.queryFeatureCount=function(F){return this.queryEngine.executeQueryForCount(F)};I.queryLatestObservations=function(F){return this.queryEngine.executeQueryForLatestObservations(F)};I.queryObjectIds=function(F){return this.queryEngine.executeQueryForIds(F)};I.queryStatistics=function(){var F=p._asyncToGenerator(function*(){return{...this.featureStore.storeStatistics,displayedFeatureCount:0,
displayedVertexCount:0,displayPreProcessTime:0}});return function(){return F.apply(this,arguments)}}();I.getObjectId=function(F){return this.featureStore.lookupObjectId(F,this._storage)};I.getDisplayId=function(F){if(this._schema.targets.aggregate){const H=this.aggregateStore.getDisplayId(F);return r.isNone(H)?(F=this.featureStore.lookupDisplayId(F),this.aggregateStore.getDisplayIdForReferenceId(F)):H}return this.featureStore.lookupDisplayId(F)};I.getFeature=function(F){F=this.featureStore.lookupFeatureByDisplayId(F,
this._storage);if(r.isNone(F))return null;var H=F.readHydratedGeometry();H=h.convertToGeometry(H,F.geometryType,F.hasZ,F.hasM);return{attributes:F.readAttributes(),geometry:H}};I.getAggregate=function(F){return this.aggregateStore.getAggregate(F)};I.setHighlight=function(){var F=p._asyncToGenerator(function*(H){const K=H.map(G=>this.getDisplayId(G));return this.attributeStore.setHighlight(H,K)});return function(H){return F.apply(this,arguments)}}();I._lookupObjectIdByGlobalId=function(F){const H=
this.service.globalIdField;if(r.isNone(H))throw Error("Expected globalIdField to be defined");let K=null;this.featureStore.forEach(G=>{F===G.readAttribute(H)&&(K=G.getObjectId())});if(r.isNone(K))throw Error(`Expected to find a feature with globalId ${F}`);return K};I._repushCurrentLevelTiles=function(){const F=this.tileStore.tiles.filter(H=>H.level===this._level);for(const H of F)this._patchTile({type:"append",id:H.key.id,addOrUpdate:x.FeatureSetReaderJSON.fromOptimizedFeatures([],this.service.geometryType),
remove:[],end:!0,status:A.UpdateToken.empty()})};I._maybeForceCleanup=function(){5E3<performance.now()-this._lastCleanup&&this._markAndSweep()};I._patchTile=function(F,H){F=this._updateQueue.push(F,H).then(()=>{this.notifyChange("updating")}).catch(K=>{this.notifyChange("updating")});this.notifyChange("updating");return F};I._onTileMessage=function(){var F=p._asyncToGenerator(function*(H,K){t.throwIfAborted(K);const G=this.tileStore.get(H.id);if(G){if(H.clear)return this.processor.onTileClear(G);
var L=H.status;this._cleanupNeeded=!0;var P=[];for(const R of H.remove){const S=this.featureStore.lookupDisplayId(R);S&&P.push(S)}H.remove=P;try{if(r.isNone(H.addOrUpdate))this.processor.onTileMessage(G,{...H,addOrUpdate:null},this.hasAggregates,K).catch(t.throwIfNotAbortError);else{H.addOrUpdate.setArcadeSpatialReference(this.spatialReference);this.featureStore.hasInstance(H.addOrUpdate.instance)&&L.targets.feature||(L.targets.feature=!0,this.featureStore.onTileData(G,H));L.storage.data&&L.storage.filters||
(L.storage.data=!0,L.storage.filters=!0,this.attributeStore.onTileData(G,H),"geoevent"===this._source.type||this._didEdit?(yield this.attributeStore.sendUpdates(),t.throwIfAborted(K)):this.attributeStore.sendUpdates());if(this.hasAggregates&&!L.targets.aggregate){L.targets.aggregate=!0;const R=C(this._source)&&this._source.loading,S=!C(this._source)||R||H.end;this.aggregateStore.onTileData(G,H,this._storage,this.attributeStore,S);if(!S)return;L.mesh||(this.attributeStore.onTileData(G,H),yield this.attributeStore.sendUpdates(),
this.processor.onTileClear(G))}L.mesh||(L.mesh=!0,yield this.processor.onTileMessage(G,H,this.hasAggregates,K),t.throwIfAborted(K));this._maybeForceCleanup()}}catch(R){t.throwIfNotAbortError(R)}}});return function(H,K){return F.apply(this,arguments)}}();I._mark=function(F,H,K){const G=this._storage.getInstanceId(F);F&&(H.add((4294901760&G)>>>16),K.set(F))};I._markAndSweep=function(){this._lastCleanup=performance.now();if(!("feature"===this._source.type&&"snapshot"===this._source.mode||"geoevent"!==
this._source.type&&!this._cleanupNeeded)){this._cleanupNeeded=!1;var F=this._storage.getBitset(this._markedIdsBufId),H=new Set;F.clear();for(const G of this.tileStore.tiles)for(const L of this._source.readers(G.id)){const P=L.getCursor();for(;P.next();){var K=P.getDisplayId();K||(K=P.getObjectId(),K=this.featureStore.lookupDisplayId(K));this._mark(K,H,F)}}this._updateQueue.forEach(G=>{for(const L of G.remove)G=this.featureStore.lookupDisplayId(L),this._mark(G,H,F)});this.config.schema.targets.aggregate&&
(this.aggregateStore.sweepFeatures(F,this.featureStore),this.aggregateStore.sweepClusters(this._storage,this.attributeStore,this._level));this.featureStore.sweepFeatures(F,this._storage,this.attributeStore);this.featureStore.sweepFeatureSets(H)}};p._createClass(E,[{key:"fieldsIndex",get:function(){return new b(this.service.fields)}},{key:"hasAggregates",get:function(){return!!this.config.schema.targets.aggregate}},{key:"spatialReference",get:function(){return this.tileStore.tileScheme.spatialReference}},
{key:"updating",get:function(){return this.isUpdating()}}]);return E}(z.HandleOwner);c.__decorate([v.property({constructOnly:!0})],z.prototype,"tileStore",void 0);c.__decorate([v.property()],z.prototype,"config",void 0);c.__decorate([v.property({readOnly:!0})],z.prototype,"fieldsIndex",null);c.__decorate([v.property()],z.prototype,"processor",void 0);c.__decorate([v.property({constructOnly:!0})],z.prototype,"remoteClient",void 0);c.__decorate([v.property({constructOnly:!0})],z.prototype,"service",
void 0);c.__decorate([v.property()],z.prototype,"spatialReference",null);c.__decorate([v.property()],z.prototype,"updating",null);return z=c.__decorate([n.subclass("esri.views.2d.layers.features.controllers.FeatureController2D")],z)})},"esri/layers/graphics/featureConversionUtils":function(){define("exports ../../core/Error ../../core/Logger ../../geometry/support/jsonUtils ./OptimizedFeature ./OptimizedFeatureSet ./OptimizedGeometry".split(" "),function(p,c,z,y,r,t,l){function v(O,T){return O?T?
4:3:T?3:2}function q(O,T,Z,aa){if(O){if(Z)return T&&aa?pa:oa;if(T&&aa)return ra}else if(T&&aa)return oa;return xa}function g({scale:O,translate:T},Z){return Math.round((Z-T[0])/O[0])}function k({scale:O,translate:T},Z){return Math.round((T[1]-Z)/O[1])}function n({scale:O,translate:T},Z){return Z*O[0]+T[0]}function h({scale:O,translate:T},Z){return T[1]-Z*O[1]}function f(O){O=O.coords;return{x:O[0],y:O[1]}}function b(O,T){O.coords[0]=T.x;O.coords[1]=T.y;return O}function a(O){O=O.coords;return{x:O[0],
y:O[1],z:O[2]}}function d(O,T){O.coords[0]=T.x;O.coords[1]=T.y;O.coords[2]=T.z;return O}function e(O){O=O.coords;return{x:O[0],y:O[1],m:O[2]}}function u(O,T){O.coords[0]=T.x;O.coords[1]=T.y;O.coords[2]=T.m;return O}function m(O){O=O.coords;return{x:O[0],y:O[1],z:O[2],m:O[3]}}function x(O,T){O.coords[0]=T.x;O.coords[1]=T.y;O.coords[2]=T.z;O.coords[3]=T.m;return O}function A(O,T){return O&&T?x:O?d:T?u:b}function D(O,T,Z,aa,Y){Z=A(Z,aa);for(const ba of T){const {geometry:fa,attributes:ha}=ba;let la;
fa&&(la=Z(new l,fa));O.push(new r(la,ha,null,ha[Y]))}return O}function B(O,T,Z,aa){for(const Y of T){const {geometry:ba,attributes:fa}=Y;let ha;ba&&(ha=C(ba,Z,aa));O.push({attributes:fa,geometry:ha})}return O}function C(O,T,Z){if(!O)return null;const aa=v(T,Z),Y=[];for(let ba=0;ba<O.coords.length;ba+=aa){const fa=[];for(let ha=0;ha<aa;ha++)fa.push(O.coords[ba+ha]);Y.push(fa)}return T?Z?{points:Y,hasZ:T,hasM:Z}:{points:Y,hasZ:T}:Z?{points:Y,hasM:Z}:{points:Y}}function w(O,T,Z,aa,Y){Z=v(Z,aa);for(const ba of T){T=
ba.geometry;aa=ba.attributes;let fa;T&&(fa=E(new l,T,Z));O.push(new r(fa,aa,null,aa[Y]))}return O}function E(O,T,Z=v(T.hasZ,T.hasM)){O.lengths[0]=T.points.length;const aa=O.coords;let Y=0;for(const ba of T.points)for(T=0;T<Z;T++)aa[Y++]=ba[T];return O}function I(O,T,Z){if(!O)return null;const aa=v(T,Z),{coords:Y,lengths:ba}=O;O=[];let fa=0;for(const ha of ba){const la=[];for(let qa=0;qa<ha;qa++){const va=[];for(let wa=0;wa<aa;wa++)va.push(Y[fa++]);la.push(va)}O.push(la)}return T?Z?{paths:O,hasZ:T,
hasM:Z}:{paths:O,hasZ:T}:Z?{paths:O,hasM:Z}:{paths:O}}function F(O,T,Z,aa,Y){Z=v(Z,aa);for(const ba of T){T=ba.geometry;aa=ba.attributes;let fa;T&&(fa=H(new l,T,Z));O.push(new r(fa,aa,null,aa[Y]))}return O}function H(O,T,Z=v(T.hasZ,T.hasM)){const {lengths:aa,coords:Y}=O;let ba=0;for(const fa of T.paths){for(const ha of fa)for(T=0;T<Z;T++)Y[ba++]=ha[T];aa.push(fa.length)}return O}function K(O,T,Z){if(!O)return null;const aa=v(T,Z),{coords:Y,lengths:ba}=O;O=[];let fa=0;for(const ha of ba){const la=
[];for(let qa=0;qa<ha;qa++){const va=[];for(let wa=0;wa<aa;wa++)va.push(Y[fa++]);la.push(va)}O.push(la)}return T?Z?{rings:O,hasZ:T,hasM:Z}:{rings:O,hasZ:T}:Z?{rings:O,hasM:Z}:{rings:O}}function G(O,T,Z,aa,Y){for(const ba of T){T=ba.geometry;const fa=ba.centroid,ha=ba.attributes;let la;T&&(la=L(new l,T,Z,aa));fa?O.push(new r(la,ha,b(new l,fa),ha[Y])):O.push(new r(la,ha,null,ha[Y]))}return O}function L(O,T,Z=T.hasZ,aa=T.hasM){P(O,T.rings,Z,aa);return O}function P(O,T,Z,aa){Z=v(Z,aa);const {lengths:Y,
coords:ba}=O;aa=0;Y.length=ba.length=0;for(const fa of T){for(const ha of fa)for(T=0;T<Z;T++)ba[aa++]=ha[T];Y.push(fa.length)}return O}function R(O,T,Z,aa,Y,ba){O.length=0;if(!Z){for(const fa of T)O.push(new r(null,fa.attributes,null,fa.attributes[ba]));return O}switch(Z){case "esriGeometryPoint":return D(O,T,aa,Y,ba);case "esriGeometryMultipoint":return w(O,T,aa,Y,ba);case "esriGeometryPolyline":return F(O,T,aa,Y,ba);case "esriGeometryPolygon":return G(O,T,aa,Y,ba);default:sa.error("convertToFeatureSet:unknown-geometry",
new c(`Unable to parse unknown geometry type '${Z}'`)),O.length=0}return O}function S(O,T,Z,aa){O=O&&("coords"in O?O:O.geometry);if(!O)return null;switch(T){case "esriGeometryPoint":return T=f,Z&&aa?T=m:Z?T=a:aa&&(T=e),T(O);case "esriGeometryMultipoint":return C(O,Z,aa);case "esriGeometryPolyline":return I(O,Z,aa);case "esriGeometryPolygon":return K(O,Z,aa);default:sa.error("convertToGeometry:unknown-geometry",new c(`Unable to parse unknown geometry type '${T}'`))}}function M(O,T,Z,aa,Y){O.length=
0;switch(Z){case "esriGeometryPoint":var ba=f;aa&&Y?ba=m:aa?ba=a:Y&&(ba=e);for(var fa of T){const {geometry:ha,attributes:la}=fa;aa=ha?ba(ha):null;O.push({attributes:la,geometry:aa})}break;case "esriGeometryMultipoint":return B(O,T,aa,Y);case "esriGeometryPolyline":for(const ha of T){const {geometry:la,attributes:qa}=ha;let va;la&&(va=I(la,aa,Y));O.push({attributes:qa,geometry:va})}break;case "esriGeometryPolygon":for(ba of T){const {geometry:ha,attributes:la,centroid:qa}=ba;let va;ha&&(va=K(ha,aa,
Y));qa?(fa=f(qa),O.push({attributes:la,centroid:fa,geometry:va})):O.push({attributes:la,geometry:va})}break;default:sa.error("convertToFeatureSet:unknown-geometry",new c(`Unable to parse unknown geometry type '${Z}'`))}return O}function V(O,T,Z,aa,Y,ba,fa=Z,ha=aa){O.lengths.length&&(O.lengths.length=0);O.coords.length&&(O.coords.length=0);if(!T||!T.coords.length)return null;Y=ua[Y];const {coords:la,lengths:qa}=T;T=v(Z,aa);const va=v(Z&&fa,aa&&ha);Z=q(Z,aa,fa,ha);if(!qa.length)return Z(O.coords,la,
0,0,g(ba,la[0]),k(ba,la[1])),O.lengths.length&&(O.lengths.length=0),O.coords.length=T,O;let wa,Ca=0,Ba,Fa=0;for(const Ma of qa){if(Ma<Y)continue;let Ga=0;Ba=Fa;ha=aa=g(ba,la[Ca]);wa=fa=k(ba,la[Ca+1]);Z(O.coords,la,Ba,Ca,ha,wa);Ga++;Ca+=T;Ba+=va;for(let Ia=1;Ia<Ma;Ia++,Ca+=T)if(ha=g(ba,la[Ca]),wa=k(ba,la[Ca+1]),ha!==aa||wa!==fa)Z(O.coords,la,Ba,Ca,ha-aa,wa-fa),Ba+=va,Ga++,aa=ha,fa=wa;Ga>=Y&&(O.lengths.push(Ga),Fa=Ba)}O.coords.length=Fa;return O.coords.length?O:null}function W(O,T,Z,aa,Y,ba,fa){let ha=
aa,la=0;for(let va=ba+Z;va<fa;va+=Z){{var qa=T[va];const wa=T[va+1],Ca=T[fa],Ba=T[fa+1];let Fa=T[ba],Ma=T[ba+1],Ga=Ca-Fa,Ia=Ba-Ma;if(0!==Ga||0!==Ia){const Ja=((qa-Fa)*Ga+(wa-Ma)*Ia)/(Ga*Ga+Ia*Ia);1<Ja?(Fa=Ca,Ma=Ba):0<Ja&&(Fa+=Ga*Ja,Ma+=Ia*Ja)}Ga=qa-Fa;Ia=wa-Ma;qa=Ga*Ga+Ia*Ia}qa>ha&&(la=va,ha=qa)}ha>aa&&(la-ba>Z&&W(O,T,Z,aa,Y,ba,la),Y(O,T,O.length,la,T[la],T[la+1]),fa-la>Z&&W(O,T,Z,aa,Y,la,fa))}function ea(O,T,Z,aa,Y){const {coords:ba,lengths:fa}=T,ha=Z?aa?pa:oa:aa?oa:xa;Z=v(Z,aa);if(!ba.length)return O!==
T&&(O.lengths.length=0,O.coords.length=0),O;if(!fa.length)return ha(O.coords,ba,0,0,n(Y,ba[0]),h(Y,ba[1])),O!==T&&(O.lengths.length=0,O.coords.length=Z),O;const [la,qa]=Y.scale;aa=0;for(let va=0;va<fa.length;va++){const wa=fa[va];O.lengths[va]=wa;let Ca=n(Y,ba[aa]),Ba=h(Y,ba[aa+1]);ha(O.coords,ba,aa,aa,Ca,Ba);aa+=Z;for(let Fa=1;Fa<wa;Fa++,aa+=Z)Ca+=ba[aa]*la,Ba-=ba[aa+1]*qa,ha(O.coords,ba,aa,aa,Ca,Ba)}O!==T&&(O.lengths.length=fa.length,O.coords.length=ba.length);return O}function ka(O,T,Z,aa){let Y=
0,ba=O[aa*T],fa=O[aa*(T+1)];for(let ha=1;ha<Z;ha++){const la=ba+O[aa*(T+ha)],qa=fa+O[aa*(T+ha)+1],va=(la-ba)*(qa+fa);ba=la;fa=qa;Y+=va}return.5*Y}const sa=z.getLogger("esri.tasks.support.optimizedFeatureSet"),ua={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},xa=(O,T,Z,aa,Y,ba)=>{O[Z]=Y;O[Z+1]=ba},oa=(O,T,Z,aa,Y,ba)=>{O[Z]=Y;O[Z+1]=ba;O[Z+2]=T[aa+2]},ra=(O,T,Z,aa,Y,ba)=>{O[Z]=Y;O[Z+1]=ba;O[Z+2]=T[aa+3]},pa=(O,T,Z,aa,Y,ba)=>{O[Z]=Y;O[Z+1]=ba;O[Z+2]=T[aa+
2];O[Z+3]=T[aa+3]},N=[],U=[];p.convertFromFeature=function(O,T,Z,aa,Y){N[0]=O;[O]=R(U,N,T,Z,aa,Y);N.length=U.length=0;return O};p.convertFromFeatureSet=function(O,T){const Z=new t,{hasM:aa,hasZ:Y,features:ba,objectIdFieldName:fa,spatialReference:ha,geometryType:la,exceededTransferLimit:qa,transform:va,fields:wa}=O;wa&&(Z.fields=wa);Z.geometryType=la;Z.objectIdFieldName=fa||T;Z.spatialReference=ha;if(!Z.objectIdFieldName)return sa.error(new c("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),
Z;ba&&R(Z.features,ba,la,Y,aa,Z.objectIdFieldName);qa&&(Z.exceededTransferLimit=qa);aa&&(Z.hasM=aa);Y&&(Z.hasZ=Y);va&&(Z.transform=va);return Z};p.convertFromFeatures=R;p.convertFromGeometry=function(O,T,Z){if(!O)return null;const aa=new l;"hasZ"in O&&null==T&&(T=O.hasZ);"hasM"in O&&null==Z&&(Z=O.hasM);if(y.isPoint(O))return A(null!=T?T:null!=O.z,null!=Z?Z:null!=O.m)(aa,O);if(y.isPolygon(O))return L(aa,O,T,Z);if(y.isPolyline(O))return H(aa,O,v(T,Z));if(y.isMultipoint(O))return E(aa,O,v(T,Z));sa.error("convertFromGeometry:unknown-geometry",
new c(`Unable to parse unknown geometry type '${O}'`))};p.convertFromGraphics=function(O,T,Z,aa,Y,ba){const fa=O.length;switch(Z){case "esriGeometryPoint":D(O,T,aa,Y,ba);break;case "esriGeometryMultipoint":w(O,T,aa,Y,ba);break;case "esriGeometryPolyline":F(O,T,aa,Y,ba);break;case "esriGeometryPolygon":G(O,T,aa,Y,ba);break;default:sa.error("convertToFeatureSet:unknown-geometry",new c(`Unable to parse unknown geometry type '${Z}'`))}for(aa=0;aa<T.length;aa++)O[aa+fa].geometryType=Z,O[aa+fa].insertAfter=
T[aa].insertAfter,O[aa+fa].groupId=T[aa].groupId;return O};p.convertFromMultipoint=E;p.convertFromMultipointFeatures=w;p.convertFromNestedArray=P;p.convertFromPoint=function(O,T,Z=A(null!=T.z,null!=T.m)){return Z(O,T)};p.convertFromPointFeatures=D;p.convertFromPolygon=L;p.convertFromPolyline=H;p.convertFromPolylineFeatures=F;p.convertToFeature=function(O,T,Z,aa){U[0]=O;M(N,U,T,Z,aa);O=N[0];N.length=U.length=0;return O};p.convertToFeatureSet=function(O){const {objectIdFieldName:T,spatialReference:Z,
transform:aa,fields:Y,hasM:ba,hasZ:fa,features:ha,geometryType:la,exceededTransferLimit:qa,uniqueIdField:va,queryGeometry:wa,queryGeometryType:Ca}=O;O=M([],ha,la,fa,ba);const Ba=S(wa,Ca,!1,!1);O={features:O,fields:Y,geometryType:la,objectIdFieldName:T,spatialReference:Z,uniqueIdField:va,queryGeometry:Ba};aa&&(O.transform=aa);qa&&(O.exceededTransferLimit=qa);ba&&(O.hasM=ba);fa&&(O.hasZ=fa);return O};p.convertToFeatures=M;p.convertToGeometry=S;p.convertToMultipoint=C;p.convertToMultipointFeatures=B;
p.convertToPoint=function(O,T,Z){return O?T?Z?m(O):a(O):Z?e(O):f(O):null};p.convertToPolygon=K;p.convertToPolyline=I;p.deltaDecodeGeometry=function(O,T){const Z=O.clone(),aa=O.coords;O=O.lengths;let Y=0;for(let ha=0;ha<O.length;ha++){const la=O[ha];var ba=aa[T*Y],fa=aa[T*Y+1];for(let qa=1;qa<la;qa++)ba+=aa[T*(Y+qa)],fa+=aa[T*(Y+qa)+1],Z.coords[T*(Y+qa)]=ba,Z.coords[T*(Y+qa)+1]=fa;Y+=la}return Z};p.deltaEncodeGeometry=function(O,T){const Z=O.clone(),aa=O.coords;O=O.lengths;let Y=0;for(let fa=0;fa<
O.length;fa++){const ha=O[fa];let la=aa[T*Y];var ba=aa[T*Y+1];for(let qa=1;qa<ha;qa++){const va=aa[T*(Y+qa)],wa=aa[T*(Y+qa)+1];ba=wa-ba;Z.coords[T*(Y+qa)]=va-la;Z.coords[T*(Y+qa)+1]=ba;la=va;ba=wa}Y+=ha}return Z};p.generalizeOptimizedGeometry=function(O,T,Z,aa,Y,ba,fa=Z,ha=aa){O.lengths.length&&(O.lengths.length=0);O.coords.length&&(O.coords.length=0);if(!T||!T.coords.length)return null;Y=ua[Y];const {coords:la,lengths:qa}=T;T=v(Z,aa);const va=v(Z&&fa,aa&&ha);Z=q(Z,aa,fa,ha);if(!qa.length)return Z(O.coords,
la,0,0,la[0],la[1]),O.lengths.length&&(O.lengths.length=0),O.coords.length=T,O;aa=0;ba*=ba;for(const wa of qa){if(wa<Y){aa+=wa*T;continue}fa=O.coords.length/va;ha=aa;const Ca=aa+(wa-1)*T;Z(O.coords,la,O.coords.length,ha,la[ha],la[ha+1]);W(O.coords,la,T,ba,Z,ha,Ca);Z(O.coords,la,O.coords.length,Ca,la[Ca],la[Ca+1]);ha=O.coords.length/va-fa;ha>=Y?O.lengths.push(ha):O.coords.length=fa*va;aa+=wa*T}return O.coords.length?O:null};p.getBoundsOptimizedGeometry=function(O,T,Z,aa){if(!T||!T.coords||!T.coords.length)return null;
Z=v(Z,aa);let Y=aa=Number.POSITIVE_INFINITY,ba=Number.NEGATIVE_INFINITY,fa=Number.NEGATIVE_INFINITY;if(T&&T.coords){T=T.coords;for(let ha=0;ha<T.length;ha+=Z){const la=T[ha],qa=T[ha+1];aa=Math.min(aa,la);ba=Math.max(ba,la);Y=Math.min(Y,qa);fa=Math.max(fa,qa)}}O[0]=aa;O[1]=Y;O[2]=ba;O[3]=fa;return O};p.getQuantizedArea=function(O,T){const {coords:Z,lengths:aa}=O;let Y=O=0;for(let ba=0;ba<aa.length;ba++)Y+=ka(Z,O,aa[ba],T),O+=ba;return Math.abs(Y)};p.getQuantizedBoundsOptimizedGeometry=function(O,T,
Z,aa){Z=v(Z,aa);const {lengths:Y,coords:ba}=T;aa=T=Number.POSITIVE_INFINITY;let fa=Number.NEGATIVE_INFINITY,ha=Number.NEGATIVE_INFINITY,la=0;for(const qa of Y){let va=ba[la],wa=ba[la+1];T=Math.min(va,T);aa=Math.min(wa,aa);fa=Math.max(va,fa);ha=Math.max(wa,ha);la+=Z;for(let Ca=1;Ca<qa;Ca++,la+=Z){const Ba=ba[la],Fa=ba[la+1];va+=Ba;wa+=Fa;0>Ba&&(T=Math.min(T,va));0<Ba&&(fa=Math.max(fa,va));0>Fa?aa=Math.min(aa,wa):0<Fa&&(ha=Math.max(ha,wa))}}O[0]=T;O[1]=aa;O[2]=fa;O[3]=ha;return O};p.getSignedQuantizedRingArea=
ka;p.quantizeOptimizedFeatureSet=function(O,T){const {geometryType:Z,features:aa,hasM:Y,hasZ:ba}=T;if(!O)return T;for(let fa=0;fa<aa.length;fa++){const ha=aa[fa],la=ha.weakClone();la.geometry=new l;V(la.geometry,ha.geometry,Y,ba,Z,O);ha.centroid&&(la.centroid=new l,V(la.centroid,ha.centroid,Y,ba,"esriGeometryPoint",O));aa[fa]=la}T.transform=O;return T};p.quantizeOptimizedGeometry=V;p.quantizeX=g;p.quantizeY=k;p.removeCollinearVectices=function(O,T,Z,aa,Y){if(!T||!T.coords||!T.coords.length)return null;
Z=ua[Z];const {coords:ba,lengths:fa}=T;T=q(aa,Y,aa,Y);aa=v(aa,Y);let ha=Y=0,la=0,qa=0;for(const Ca of fa){ha=qa;T(O.coords,ba,ha,Y,ba[Y],ba[Y+1]);Y+=aa;var va=ba[Y];let Ba=ba[Y+1],Fa=va,Ma=Ba;var wa=Ba/va;ha+=aa;T(O.coords,ba,ha,Y,Fa,Ma);Y+=aa;for(let Ga=2;Ga<Ca;Ga++){va=ba[Y];Ba=ba[Y+1];const Ia=Ba/va,Ja=wa===Ia||!isFinite(wa)&&!isFinite(Ia);wa=Ja&&isFinite(Ia)?0<=wa&&0<=Ia||0>=wa&&0>=Ia:0<=Ma&&0<=Ba||0>=Ma&&0>=Ba;Ja&&wa?(Fa+=va,Ma+=Ba):(Fa=va,Ma=Ba,ha+=aa);T(O.coords,ba,ha,Y,Fa,Ma);Y+=aa;wa=Ia}ha+=
aa;va=(ha-qa)/aa;va>=Z&&(O.lengths[la]=va,qa=ha,la++)}O.coords.length>qa&&(O.coords.length=qa);O.lengths.length>la&&(O.lengths.length=la);return O.coords.length&&O.lengths.length?O:null};p.removeZMValues=function(O,T,Z,aa,Y,ba){const fa=v(Z,aa);Z=q(Z,aa,Y,ba);aa=T.coords;O.coords.length=0;O.lengths.length=0;O.lengths.push(...T.lengths);for(T=0;T<aa.length;T+=fa)Z(O.coords,aa,O.coords.length,T,aa[T],aa[T+1]);return O};p.unquantizeOptimizedFeatureSet=function(O){const {transform:T,features:Z,hasM:aa,
hasZ:Y}=O;if(!T)return O;for(const ba of Z)ba.geometry&&ea(ba.geometry,ba.geometry,aa,Y,T),ba.centroid&&ea(ba.centroid,ba.centroid,aa,Y,T);O.transform=null;return O};p.unquantizeOptimizedGeometry=ea;p.unquantizeX=n;p.unquantizeY=h;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/graphics/OptimizedFeature":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(p){return function(){function c(z=null,y={},r,t){this.geohashY=this.geohashX=this.displayId=0;this.geometry=
z;y&&(this.attributes=y);r&&(this.centroid=r);null!=t&&(this.objectId=t)}c.prototype.weakClone=function(){const z=new c(this.geometry,this.attributes,this.centroid,this.objectId);z.displayId=this.displayId;z.geohashX=this.geohashX;z.geohashY=this.geohashY;return z};p._createClass(c,[{key:"hasGeometry",get:function(){return!(!this.geometry||!this.geometry.coords||!this.geometry.coords.length)}}]);return c}()})},"esri/layers/graphics/OptimizedFeatureSet":function(){define(function(){return function(){function p(){this.spatialReference=
this.geometryType=this.geometryProperties=this.geohashFieldName=this.globalIdFieldName=this.objectIdFieldName=null;this.hasM=this.hasZ=!1;this.features=[];this.fields=[];this.transform=null;this.exceededTransferLimit=!1;this.queryGeometry=this.queryGeometryType=this.uniqueIdField=null}p.prototype.weakClone=function(){const c=new p;c.objectIdFieldName=this.objectIdFieldName;c.globalIdFieldName=this.globalIdFieldName;c.geohashFieldName=this.geohashFieldName;c.geometryProperties=this.geometryProperties;
c.geometryType=this.geometryType;c.spatialReference=this.spatialReference;c.hasZ=this.hasZ;c.hasM=this.hasM;c.features=this.features;c.fields=this.fields;c.transform=this.transform;c.exceededTransferLimit=this.exceededTransferLimit;c.uniqueIdField=this.uniqueIdField;c.queryGeometry=this.queryGeometry;c.queryGeometryType=this.queryGeometryType;return c};return p}()})},"esri/layers/graphics/OptimizedGeometry":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(p){return function(){function c(y=
[],r=[],t=!1){this.lengths=null!=y?y:[];this.coords=null!=r?r:[];this.hasIndeterminateRingOrder=t}var z=c.prototype;z.forEachVertex=function(y){let r=0;this.lengths.length||y(this.coords[0],this.coords[1]);for(let t=0;t<this.lengths.length;t++){const l=this.lengths[t];for(let v=0;v<l;v++)y(this.coords[2*(v+r)],this.coords[2*(v+r)+1]);r+=l}};z.clone=function(){return new c(this.lengths.slice(),this.coords.slice(),this.hasIndeterminateRingOrder)};p._createClass(c,[{key:"isPoint",get:function(){return 0===
this.lengths.length}}]);return c}()})},"esri/layers/graphics/data/QueryEngine":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../core/lang ../../../core/maybe ../../../core/MemCache ../../../core/unitUtils ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../../../geometry/support/boundsUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ./attributeSupport ./projectionSupport ./QueryEngineCapabilities ./QueryEngineResult ./spatialQuerySupport ./timeSupport ./utils ../../support/FieldsIndex ../../support/PromiseQueue ../../../smartMapping/support/utils".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k,n,h,f,b,a,d,e,u,m,x,A,D){function B(K){return K.every(G=>"exceedslimit"!==G.statisticType)}const C=new Set,w=new t.MemCacheStorage(2E6);let E=0,I=function(){function K(L){this.capabilities={query:a.queryCapabilities};this.geometryType=L.geometryType;this.hasM=L.hasM;this.hasZ=L.hasZ;this.objectIdField=L.objectIdField;this.spatialReference=L.spatialReference;this.definitionExpression=L.definitionExpression;this.featureStore=L.featureStore;this.aggregateAdapter=L.aggregateAdapter;
this._changeHandle=this.featureStore.events.on("changed",()=>this.clearCache());this.timeInfo=L.timeInfo;L.cacheSpatialQueries&&(this._geometryQueryCache=new t.MemCache(E++ +"$$",w));this.fieldsIndex=new x(L.fields);L.scheduler&&L.priority&&(this._frameQueue=new A,this._frameTask=L.scheduler.registerTask(L.priority,this))}var G=K.prototype;G.destroy=function(){this._frameTask&&(this._frameTask.remove(),this._frameTask=null,this._frameQueue.cancelAll(),this._frameQueue=null);this.clearCache();this._geometryQueryCache&&
this._geometryQueryCache.destroy();this._changeHandle&&(this._changeHandle.remove(),this._changeHandle=null);this.fieldsIndex.destroy()};G.clearCache=function(){this._geometryQueryCache&&this._geometryQueryCache.clear();this._timeExtent=this._allItems=null};G.executeQuery=function(){var L=c._asyncToGenerator(function*(P={},R){let S=y.clone(P),M;try{S=yield this._schedule(()=>m.normalizeQuery(S,this.definitionExpression,this.spatialReference),R),S=yield this._reschedule(()=>this._checkQuerySupport(S),
R),M=yield this._reschedule(()=>this._executeGeometryQuery(S,R),R),M=yield this._reschedule(()=>M.executeAggregateIdsQuery(S),R),M=yield this._reschedule(()=>M.executeObjectIdsQuery(S),R),M=yield this._reschedule(()=>M.executeTimeQuery(S),R),M=yield this._reschedule(()=>M.executeAttributesQuery(S),R)}catch(V){if(V!==m.QUERY_ENGINE_EMPTY_RESULT)throw V;M=new d([],null,this)}return M.createQueryResponse(S)});return function(){return L.apply(this,arguments)}}();G.executeQueryForCount=function(){var L=
c._asyncToGenerator(function*(P={},R){let S=y.clone(P),M;S.returnGeometry=!1;S.returnCentroid=!1;S.outSR=null;try{S=yield this._schedule(()=>m.normalizeQuery(S,this.definitionExpression,this.spatialReference),R),S=yield this._reschedule(()=>this._checkQuerySupport(S),R),M=yield this._reschedule(()=>this._executeGeometryQuery(S,R),R),M=yield this._reschedule(()=>M.executeAggregateIdsQuery(S),R),M=yield this._reschedule(()=>M.executeObjectIdsQuery(S),R),M=yield this._reschedule(()=>M.executeTimeQuery(S),
R),M=yield this._reschedule(()=>M.executeAttributesQuery(S),R)}catch(V){if(V!==m.QUERY_ENGINE_EMPTY_RESULT)throw V;return 0}return M.createQueryResponseForCount(S)});return function(){return L.apply(this,arguments)}}();G.executeQueryForExtent=function(){var L=c._asyncToGenerator(function*(P={},R){let S=y.clone(P),M;P=S.outSR;try{S=yield this._schedule(()=>m.normalizeQuery(S,this.definitionExpression,this.spatialReference),R);S=yield this._reschedule(()=>this._checkQuerySupport(S),R);S.returnGeometry=
!0;S.returnCentroid=!1;S.outSR=null;M=yield this._reschedule(()=>this._executeGeometryQuery(S,R),R);M=yield this._reschedule(()=>M.executeAggregateIdsQuery(S),R);M=yield this._reschedule(()=>M.executeObjectIdsQuery(S),R);M=yield this._reschedule(()=>M.executeTimeQuery(S),R);M=yield this._reschedule(()=>M.executeAttributesQuery(S),R);const V=M.size;if(!V)return{count:V,extent:null};v.set(H,v.NEGATIVE_INFINITY);this.featureStore.forEachBounds(M.items,ka=>v.expandWithAABB(H,ka),F);const W={xmin:H[0],
ymin:H[1],xmax:H[3],ymax:H[4],spatialReference:m.cleanFromGeometryEngine(this.spatialReference)};this.hasZ&&isFinite(H[2])&&isFinite(H[5])&&(W.zmin=H[2],W.zmax=H[5]);const ea=b.project(W,M.spatialReference,P);ea.spatialReference=m.cleanFromGeometryEngine(P||this.spatialReference);if(0===ea.xmax-ea.xmin){const ka=l.getMetersPerUnitForSR(ea.spatialReference);ea.xmin-=ka;ea.xmax+=ka}if(0===ea.ymax-ea.ymin){const ka=l.getMetersPerUnitForSR(ea.spatialReference);ea.ymin-=ka;ea.ymax+=ka}if(this.hasZ&&null!=
ea.zmin&&null!=ea.zmax&&0===ea.zmax-ea.zmin){const ka=l.getMetersPerUnitForSR(ea.spatialReference);ea.zmin-=ka;ea.zmax+=ka}return{count:V,extent:ea}}catch(V){if(V===m.QUERY_ENGINE_EMPTY_RESULT)return{count:0,extent:null};throw V;}});return function(){return L.apply(this,arguments)}}();G.executeQueryForIds=function(){var L=c._asyncToGenerator(function*(P={},R){return this.executeQueryForIdSet(P,R).then(S=>Array.from(S))});return function(){return L.apply(this,arguments)}}();G.executeQueryForIdSet=
function(){var L=c._asyncToGenerator(function*(P={},R){let S=y.clone(P),M;S.returnGeometry=!1;S.returnCentroid=!1;S.outSR=null;try{S=yield this._schedule(()=>m.normalizeQuery(S,this.definitionExpression,this.spatialReference),R);S=yield this._reschedule(()=>this._checkQuerySupport(S),R);M=yield this._reschedule(()=>this._executeGeometryQuery(S,R),R);M=yield this._reschedule(()=>M.executeAggregateIdsQuery(S),R);M=yield this._reschedule(()=>M.executeObjectIdsQuery(S),R);M=yield this._reschedule(()=>
M.executeTimeQuery(S),R);M=yield this._reschedule(()=>M.executeAttributesQuery(S),R);const V=M.items,W=new Set;yield this._reschedule(()=>{for(const ea of V)W.add(M.featureAdapter.getObjectId(ea))},R);return W}catch(V){if(V===m.QUERY_ENGINE_EMPTY_RESULT)return new Set;throw V;}});return function(){return L.apply(this,arguments)}}();G.executeQueryForSnapping=function(){var L=c._asyncToGenerator(function*(P,R){const {point:S,distance:M,types:V}=P;if(0===V)return{candidates:[]};const W=yield this._reschedule(()=>
this._checkQuerySupport(P.query),R),ea=!h.equals(S.spatialReference,this.spatialReference);ea&&(yield b.checkProjectionSupport(S.spatialReference,this.spatialReference));var ka="number"===typeof M?M:M.x,sa="number"===typeof M?M:M.y;ka={xmin:S.x-ka,xmax:S.x+ka,ymin:S.y-sa,ymax:S.y+sa,spatialReference:S.spatialReference};ka=ea?b.project(ka,this.spatialReference):ka;if(!ka)return{candidates:[]};sa=(yield n.normalizeCentralMeridian(k.fromJSON(S),null,{signal:R}))[0];const ua=(yield n.normalizeCentralMeridian(k.fromJSON(ka),
null,{signal:R}))[0];if(r.isNone(sa)||r.isNone(ua))return{candidates:[]};let xa=new d(this._searchFeatures(this._getQueryBBoxes(ua.toJSON())),null,this);xa=yield this._reschedule(()=>xa.executeObjectIdsQuery(W),R);xa=yield this._reschedule(()=>xa.executeTimeQuery(W),R);xa=yield this._reschedule(()=>xa.executeAttributesQuery(W),R);R=sa.toJSON();R=ea?b.project(R,this.spatialReference):R;return xa.createSnappingResponse({...P,point:R,distance:ea?Math.max(ka.xmax-ka.xmin,ka.ymax-ka.ymin)/2:M},S.spatialReference)});
return function(P,R){return L.apply(this,arguments)}}();G.executeQueryForLatestObservations=function(){var L=c._asyncToGenerator(function*(P={},R){if(!this.timeInfo||!this.timeInfo.trackIdField)throw new z("feature-store:unsupported-query","Missing timeInfo or timeInfo.trackIdField",{query:P,timeInfo:this.timeInfo});let S=y.clone(P),M;try{S=yield this._schedule(()=>m.normalizeQuery(S,this.definitionExpression,this.spatialReference),R),S=yield this._reschedule(()=>this._checkQuerySupport(S),R),M=yield this._reschedule(()=>
this._executeGeometryQuery(S,R),R),M=yield this._reschedule(()=>M.executeAggregateIdsQuery(S),R),M=yield this._reschedule(()=>M.executeObjectIdsQuery(S),R),M=yield this._reschedule(()=>M.executeTimeQuery(S),R),M=yield this._reschedule(()=>M.executeAttributesQuery(S),R),M=yield this._reschedule(()=>M.filterLatest(),R)}catch(V){if(V!==m.QUERY_ENGINE_EMPTY_RESULT)throw V;M=new d([],null,this)}return M.createQueryResponse(S)});return function(){return L.apply(this,arguments)}}();G.executeQueryForSummaryStatistics=
function(){var L=c._asyncToGenerator(function*(P={},R,S){P=y.clone(P);let M;try{P=yield this._schedule(()=>m.normalizeQuery(P,this.definitionExpression,this.spatialReference),S),P=yield this._reschedule(()=>this._checkSummaryStatisticsSupport(P,R),S),M=yield this._reschedule(()=>this._executeGeometryQuery(P,S),S),M=yield this._reschedule(()=>M.executeAggregateIdsQuery(P),S),M=yield this._reschedule(()=>M.executeObjectIdsQuery(P),S),M=yield this._reschedule(()=>M.executeTimeQuery(P),S),M=yield this._reschedule(()=>
M.executeAttributesQuery(P),S)}catch(V){if(V!==m.QUERY_ENGINE_EMPTY_RESULT)throw V;M=new d([],null,this)}return M.createSummaryStatisticsResponse(P,R)});return function(){return L.apply(this,arguments)}}();G._schedule=function(){var L=c._asyncToGenerator(function*(P,R){return this._frameQueue?this._frameQueue.push(P,R):P()});return function(P,R){return L.apply(this,arguments)}}();G._reschedule=function(){var L=c._asyncToGenerator(function*(P,R){return this._frameQueue?this._frameQueue.unshift(P,R):
P()});return function(P,R){return L.apply(this,arguments)}}();G.runTask=function(L){for(this._budget=L;!L.done&&this._frameQueue&&this._frameQueue.process();)L.madeProgress();this._budget=null};G._getAll=function(){if(!this._allItems){const L=[];this.featureStore.forEach(P=>L.push(P));this._allItems=new d(L,null,this)}return this._allItems};G._executeGeometryQuery=function(){var L=c._asyncToGenerator(function*(P,R){var S=this;const {geometry:M,outSR:V,spatialRel:W,returnGeometry:ea,returnCentroid:ka}=
P,sa=ea||ka,ua=h.isValid(V)&&!h.equals(this.spatialReference,V),xa=this._geometryQueryCache?ua&&sa?JSON.stringify({geometry:M,spatialRelationship:W,outSpatialReference:V}):JSON.stringify({geometry:M,spatialRelationship:W}):null;if(xa){var oa=this._geometryQueryCache.get(xa);if(!r.isUndefined(oa))return oa}oa=function(){var U=c._asyncToGenerator(function*(O){if(ua&&sa)return O=yield O.project(V),xa&&S._geometryQueryCache.put(xa,O,O.size||1),O;xa&&S._geometryQueryCache.put(xa,O,O.size||1);return O});
return function(O){return U.apply(this,arguments)}}();if(!M)return oa(this._getAll());const ra=this.featureAdapter;if("esriSpatialRelDisjoint"===W){P=this._searchFeatures(this._getQueryBBoxes(M));if(!P.length)return oa(this._getAll());let U,O;const T=new Set;for(var pa of P)T.add(ra.getObjectId(pa));yield this._reschedule(()=>{let Z=0;U=Array(T.size);this.featureStore.forEach(aa=>U[Z++]=aa);O=T},R);P=yield this._reschedule(c._asyncToGenerator(function*(){const Z=yield e.getSpatialQueryOperator(W,
M,S.geometryType,S.hasZ,S.hasM);return new d(yield S._runSpatialFilter(U,aa=>!O.has(ra.getObjectId(aa))||Z(ra.getGeometry(aa)),R),M,S)}),R);return oa(P)}pa=this._searchFeatures(this._getQueryBBoxes(M));if(!pa.length)return oa=new d([],M,this),xa&&this._geometryQueryCache.put(xa,oa,oa.size||1),oa;if(this._canExecuteSoloPass(M,P))return oa(new d(pa,M,this));const N=yield e.getSpatialQueryOperator(W,M,this.geometryType,this.hasZ,this.hasM);P=yield this._runSpatialFilter(pa,U=>N(ra.getGeometry(U)),R);
return oa(new d(P,M,this))});return function(P,R){return L.apply(this,arguments)}}();G._runSpatialFilter=function(){var L=c._asyncToGenerator(function*(P,R,S){var M=this;if(!R)return P;if(!this._budget)return P.filter(ka=>R(ka));let V=0;const W=[],ea=function(){var ka=c._asyncToGenerator(function*(){for(;V<P.length;){const sa=P[V];R(sa)&&W.push(sa);M._budget.done&&(yield M._reschedule(()=>ea(),S));++V}});return function(){return ka.apply(this,arguments)}}();return this._reschedule(()=>ea(),S).then(()=>
W)});return function(P,R,S){return L.apply(this,arguments)}}();G._canExecuteSoloPass=function(L,P){const {geometryType:R}=this;({spatialRel:P}=P);return e.canQueryWithRBush(L)&&("esriSpatialRelEnvelopeIntersects"===P||"esriGeometryPoint"===R&&("esriSpatialRelIntersects"===P||"esriSpatialRelContains"===P||"esriSpatialRelWithin"===P))};G._getQueryBBoxes=function(L){if(e.canQueryWithRBush(L)){if(k.isExtent(L))return[q.fromValues(L.xmin,L.ymin,L.xmax,L.ymax)];if(k.isPolygon(L))return L.rings.map(P=>q.fromValues(Math.min(P[0][0],
P[2][0]),Math.min(P[0][1],P[2][1]),Math.max(P[0][0],P[2][0]),Math.max(P[0][1],P[2][1])))}return[g.getBoundsXY(q.create(),L)]};G._searchFeatures=function(L){for(const S of L)this.featureStore.forEachInBounds(S,M=>{C.add(M)});const P=Array(C.size);let R=0;C.forEach(S=>P[R++]=S);C.clear();return P};G._checkSummaryStatisticsSupport=function(){var L=c._asyncToGenerator(function*(P,R){if(0>P.distance||null!=P.geometryPrecision||P.multipatchOption||P.pixelSize||P.relationParam||P.text||P.outStatistics||
P.groupByFieldsForStatistics||P.having||P.orderByFields)throw new z("feature-store:unsupported-query","Unsupported query options",{query:P});return Promise.all([this._checkAttributesQuerySupport(P),this._checkSummaryStatisticsParamsSupport(R),e.checkSpatialQuerySupport(P,this.geometryType,this.spatialReference),b.checkProjectionSupport(this.spatialReference,P.outSR)]).then(()=>P)});return function(P,R){return L.apply(this,arguments)}}();G._checkSummaryStatisticsParamsSupport=function(){var L=c._asyncToGenerator(function*(P){const R=
yield D.getFieldsList({field:P.field,normalizationField:P.normalizationField,valueExpression:P.valueExpression});if(!R.length)throw new z("feature-store:unsupported-query","params should have atleast a field or valueExpression",{params:P});f.validateFields(this.fieldsIndex,R,"params contains missing fields")});return function(P){return L.apply(this,arguments)}}();G._checkQuerySupport=function(){var L=c._asyncToGenerator(function*(P){if(0>P.distance||null!=P.geometryPrecision||P.multipatchOption||
P.pixelSize||P.relationParam||P.text)throw new z("feature-store:unsupported-query","Unsupported query options",{query:P});return Promise.all([this._checkAttributesQuerySupport(P),this._checkStatisticsQuerySupport(P),e.checkSpatialQuerySupport(P,this.geometryType,this.spatialReference),b.checkProjectionSupport(this.spatialReference,P.outSR)]).then(()=>P)});return function(P){return L.apply(this,arguments)}}();G._checkAttributesQuerySupport=function(L){const {outFields:P,orderByFields:R,returnDistinctValues:S,
outStatistics:M}=L,V=M?M.map(W=>W.outStatisticFieldName&&W.outStatisticFieldName.toLowerCase()):[];if(R&&0<R.length){const W=R.map(ea=>{const ka=ea.toLowerCase();return-1<ka.indexOf(" asc")?ka.split(" asc")[0]:-1<ka.indexOf(" desc")?ka.split(" desc")[0]:ea}).filter(ea=>-1===V.indexOf(ea));f.validateFields(this.fieldsIndex,W,"orderByFields contains missing fields")}if(P&&0<P.length)f.validateFields(this.fieldsIndex,P,"outFields contains missing fields");else if(S)throw new z("feature-store:unsupported-query",
"outFields should be specified for returnDistinctValues",{query:L});f.validateWhere(this.fieldsIndex,L.where)};G._checkStatisticsQuerySupport=function(){var L=c._asyncToGenerator(function*(P){const {outStatistics:R,groupByFieldsForStatistics:S,having:M}=P;var V=S&&S.length,W=R&&R.length;if(M){if(!V||!W)throw new z("feature-store:unsupported-query","outStatistics and groupByFieldsForStatistics should be specified with having",{query:P});f.validateHaving(this.fieldsIndex,M,R)}if(W&&B(R)){W=R.map(ea=>
ea.onStatisticField);f.validateFields(this.fieldsIndex,W,"onStatisticFields contains missing fields");V&&f.validateFields(this.fieldsIndex,S,"groupByFieldsForStatistics contains missing fields");for(const ea of R){const {onStatisticField:ka,statisticType:sa}=ea;if(("percentile_disc"===sa||"percentile_cont"===sa)&&"statisticParameters"in ea){if({statisticParameters:V}=ea,!V)throw new z("feature-store:unsupported-query","statisticParamters should be set for percentile type",{definition:ea,query:P});
}else if("count"!==sa&&ka&&f.hasInvalidFieldType(ka,this.fieldsIndex))throw new z("feature-store:unsupported-query","outStatistics contains non-numeric fields",{definition:ea,query:P});}}});return function(P){return L.apply(this,arguments)}}();c._createClass(K,[{key:"featureAdapter",get:function(){return this.featureStore.featureAdapter}},{key:"fullExtent",get:function(){const L=this.featureStore.fullBounds;return L?{xmin:L[0],ymin:L[1],xmax:L[2],ymax:L[3],spatialReference:m.cleanFromGeometryEngine(this.spatialReference)}:
null}},{key:"timeExtent",get:function(){return this.timeInfo?this._timeExtent?this._timeExtent:this._timeExtent=u.getTimeExtent(this.timeInfo,this.featureStore):null}},{key:"running",get:function(){return 0<this._frameQueue.length}}]);return K}();const F=v.create(),H=v.create();p.Feature=function(K,G=null,L,P,R){this.attributes=K;this.geometry=L;this.centroid=P;this.filterFlags=R;this.groupId=-1;this.displayId=G};p.default=I;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/core/MemCache":function(){define(["exports",
"../chunks/_rollupPluginBabelHelpers","./PooledArray"],function(p,c,z){let y=function(){function t(v,q,g){this._namespace=v;this._storage=q;this._removeFunc=!1;this._miss=this._hit=0;this._storage.register(this);this._namespace+=":";g&&(this._storage.registerRemoveFunc(this._namespace,g),this._removeFunc=!0)}var l=t.prototype;l.destroy=function(){this._storage.clear(this._namespace);this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace);this._storage.deregister(this);this._storage=
null};l.resetHitRate=function(){this._hit=this._miss=0};l.put=function(v,q,g,k=0){this._storage.put(this._namespace+v,q,g,k)};l.get=function(v){v=this._storage.get(this._namespace+v);void 0===v?++this._miss:++this._hit;return v};l.pop=function(v){v=this._storage.pop(this._namespace+v);void 0===v?++this._miss:++this._hit;return v};l.updateSize=function(v,q,g){this._storage.updateSize(this._namespace+v,q,g)};l.clear=function(){this._storage.clear(this._namespace)};l.clearAll=function(){this._storage.clearAll()};
l.getStats=function(){return this._storage.getStats()};l.resetStats=function(){this._storage.resetStats()};c._createClass(t,[{key:"namespace",get:function(){return this._namespace.slice(0,-1)}},{key:"hitRate",get:function(){return this._hit/(this._hit+this._miss)}},{key:"size",get:function(){return this._storage.size}},{key:"maxSize",get:function(){return this._storage.maxSize}}]);return t}(),r=function(){function t(v=10485760){this._maxSize=v;this._db=new Map;this._miss=this._hit=this._size=0;this._removeFuncs=
new z;this._users=new z}var l=t.prototype;l.destroy=function(){this.clearAll();this._removeFuncs.clear();this._users.clear();this._db=null};l.register=function(v){this._users.push(v)};l.deregister=function(v){this._users.removeUnordered(v)};l.registerRemoveFunc=function(v,q){this._removeFuncs.push([v,q])};l.deregisterRemoveFunc=function(v){this._removeFuncs.filterInPlace(q=>q[0]!==v)};l.put=function(v,q,g,k){const n=this._db.get(v);n&&(this._size-=n.size,this._db.delete(v),n.entry!==q&&this._notifyRemoved(v,
n.entry));g>this._maxSize?this._notifyRemoved(v,q):void 0===q?console.warn("Refusing to cache undefined entry "):!g||0>g?console.warn("Refusing to cache entry with invalid size "+g):(k=1+Math.max(k,-3)- -3,this._db.set(v,{entry:q,size:g,lifetime:k,lives:k}),this._size+=g,this._checkSizeLimit())};l.updateSize=function(v,q,g){const k=this._db.get(v);k&&k.entry===q&&(this._size-=k.size,g>this._maxSize?(this._db.delete(v),this._notifyRemoved(v,q)):(k.size=g,this._size+=g,this._checkSizeLimit()))};l.pop=
function(v){const q=this._db.get(v);if(q)return this._size-=q.size,this._db.delete(v),++this._hit,q.entry;++this._miss};l.get=function(v){const q=this._db.get(v);if(void 0===q)++this._miss;else return this._db.delete(v),q.lives=q.lifetime,this._db.set(v,q),++this._hit,q.entry};l.getStats=function(){const v={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},q={},g=[];this._db.forEach((h,
f)=>{const b=h.lifetime;g[b]=(g[b]||0)+h.size;this._users.forAll(a=>{a=a.namespace;f.startsWith(a)&&(q[a]=(q[a]||0)+h.size)})});const k={};this._users.forAll(h=>{const f=h.namespace;!isNaN(h.hitRate)&&0<h.hitRate?(q[f]=q[f]||0,k[f]=Math.round(100*h.hitRate)+"%"):k[f]="0%"});var n=Object.keys(q);n.forEach(h=>q[h]=q[h]/this._size*100);n.sort((h,f)=>q[f]-q[h]);n.forEach(h=>v[h]=Math.round(q[h])+"% / "+k[h]);for(n=g.length-1;0<=n;--n){const h=g[n];h&&(v["Priority "+(n+-3-1)]=Math.round(h/this.size*100)+
"%")}return v};l.resetStats=function(){this._hit=this._miss=0;this._users.forAll(v=>v.resetHitRate())};l.clear=function(v){this._db.forEach((q,g)=>{g.startsWith(v)&&(this._size-=q.size,this._db.delete(g),this._notifyRemoved(g,q.entry))})};l.clearAll=function(){this._db.forEach((v,q)=>this._notifyRemoved(q,v.entry));this._size=0;this._db.clear()};l._getHitRate=function(){return this._hit/(this._hit+this._miss)};l._notifyRemoved=function(v,q){this._removeFuncs.forAll(g=>{if(v.startsWith(g[0]))g[1](q)})};
l._checkSizeLimit=function(){if(!(this._size<=this._maxSize))for(const [v,q]of this._db)if(this._db.delete(v),1>=q.lives?(this._size-=q.size,this._notifyRemoved(v,q.entry)):(--q.lives,this._db.set(v,q)),this._size<=.9*this.maxSize)break};c._createClass(t,[{key:"size",get:function(){return this._size}},{key:"maxSize",get:function(){return this._maxSize},set:function(v){this._maxSize=Math.max(v,0);this._checkSizeLimit()}}]);return t}();p.MIN_PRIORITY=-3;p.MemCache=y;p.MemCacheStorage=r;Object.defineProperty(p,
"__esModule",{value:!0})})},"esri/geometry/support/aaBoundingBox":function(){define(["exports","../../core/maybe","../Extent","./aaBoundingRect"],function(p,c,z,y){function r(a=f){return[a[0],a[1],a[2],a[3],a[4],a[5]]}function t(a,d,e,u,m,x,A=r()){A[0]=a;A[1]=d;A[2]=e;A[3]=u;A[4]=m;A[5]=x;return A}function l(a){return a[0]>=a[3]?0:a[3]-a[0]}function v(a){return a[1]>=a[4]?0:a[4]-a[1]}function q(a){return a[2]>=a[5]?0:a[5]-a[2]}function g(a,d){return Math.max(d[0],a[0])<=Math.min(d[3],a[3])&&Math.max(d[1],
a[1])<=Math.min(d[4],a[4])&&Math.max(d[2],a[2])<=Math.min(d[5],a[5])}function k(a,d){a[0]=d[0];a[1]=d[1];a[2]=d[2];a[3]=d[3];a[4]=d[4];a[5]=d[5];return a}function n(a){return 6===a.length}const h=[Infinity,Infinity,Infinity,-Infinity,-Infinity,-Infinity],f=[0,0,0,0,0,0],b=r();p.NEGATIVE_INFINITY=h;p.POSITIVE_INFINITY=[-Infinity,-Infinity,-Infinity,Infinity,Infinity,Infinity];p.ZERO=f;p.allFinite=function(a){for(let d=0;6>d;d++)if(!isFinite(a[d]))return!1;return!0};p.center=function(a,d=[0,0,0]){d[0]=
a[0]+l(a)/2;d[1]=a[1]+v(a)/2;d[2]=a[2]+q(a)/2;return d};p.contains=function(a,d){return d[0]>=a[0]&&d[1]>=a[1]&&d[2]>=a[2]&&d[3]<=a[3]&&d[4]<=a[4]&&d[5]<=a[5]};p.containsPoint=function(a,d){return d[0]>=a[0]&&d[1]>=a[1]&&d[2]>=a[2]&&d[0]<=a[3]&&d[1]<=a[4]&&d[2]<=a[5]};p.containsPointWithMargin=function(a,d,e){return d[0]>=a[0]-e&&d[1]>=a[1]-e&&d[2]>=a[2]-e&&d[0]<=a[3]+e&&d[1]<=a[4]+e&&d[2]<=a[5]+e};p.create=r;p.depth=v;p.diameter=function(a){const d=l(a),e=q(a);a=v(a);return Math.sqrt(d*d+e*e+a*a)};
p.empty=function(a){return a?k(a,h):r(h)};p.equals=function(a,d,e){if(c.isNone(a)||c.isNone(d))return a===d;if(!n(a)||!n(d))return!1;if(e)for(let u=0;u<a.length;u++){if(!e(a[u],d[u]))return!1}else for(e=0;e<a.length;e++)if(a[e]!==d[e])return!1;return!0};p.expandWithAABB=function(a,d){a[0]=Math.min(a[0],d[0]);a[1]=Math.min(a[1],d[1]);a[2]=Math.min(a[2],d[2]);a[3]=Math.max(a[3],d[3]);a[4]=Math.max(a[4],d[4]);a[5]=Math.max(a[5],d[5])};p.expandWithBuffer=function(a,d,e=0,u=d.length/3){let m=a[0],x=a[1],
A=a[2],D=a[3],B=a[4],C=a[5];for(let w=0;w<u;w++)m=Math.min(m,d[e+3*w]),x=Math.min(x,d[e+3*w+1]),A=Math.min(A,d[e+3*w+2]),D=Math.max(D,d[e+3*w]),B=Math.max(B,d[e+3*w+1]),C=Math.max(C,d[e+3*w+2]);a[0]=m;a[1]=x;a[2]=A;a[3]=D;a[4]=B;a[5]=C};p.expandWithNestedArray=function(a,d,e){const u=d.length;let m=a[0],x=a[1],A=a[2],D=a[3],B=a[4],C=a[5];if(e)for(e=0;e<u;e++){var w=d[e];m=Math.min(m,w[0]);x=Math.min(x,w[1]);A=Math.min(A,w[2]);D=Math.max(D,w[0]);B=Math.max(B,w[1]);C=Math.max(C,w[2])}else for(e=0;e<
u;e++)w=d[e],m=Math.min(m,w[0]),x=Math.min(x,w[1]),D=Math.max(D,w[0]),B=Math.max(B,w[1]);a[0]=m;a[1]=x;a[2]=A;a[3]=D;a[4]=B;a[5]=C};p.expandWithOffset=function(a,d,e,u){a[0]=Math.min(a[0],a[0]+d);a[3]=Math.max(a[3],a[3]+d);a[1]=Math.min(a[1],a[1]+e);a[4]=Math.max(a[4],a[4]+e);a[2]=Math.min(a[2],a[2]+u);a[5]=Math.max(a[5],a[5]+u)};p.expandWithRect=function(a,d){a[0]=Math.min(a[0],d[0]);a[1]=Math.min(a[1],d[1]);a[3]=Math.max(a[3],d[2]);a[4]=Math.max(a[4],d[3])};p.expandWithVec3=function(a,d){a[0]=Math.min(a[0],
d[0]);a[1]=Math.min(a[1],d[1]);a[2]=Math.min(a[2],d[2]);a[3]=Math.max(a[3],d[0]);a[4]=Math.max(a[4],d[1]);a[5]=Math.max(a[5],d[2])};p.fromExtent=function(a,d=r()){d[0]=a.xmin;d[1]=a.ymin;d[2]=a.zmin;d[3]=a.xmax;d[4]=a.ymax;d[5]=a.zmax;return d};p.fromMinMax=function(a,d,e=r()){e[0]=a[0];e[1]=a[1];e[2]=a[2];e[3]=d[0];e[4]=d[1];e[5]=d[2];return e};p.fromRect=function(a,d){a[0]=d[0];a[1]=d[1];a[2]=Number.NEGATIVE_INFINITY;a[3]=d[2];a[4]=d[3];a[5]=Number.POSITIVE_INFINITY;return a};p.fromValues=t;p.getMax=
function(a,d){d[0]=a[3];d[1]=a[4];d[2]=a[5];return d};p.getMin=function(a,d){d[0]=a[0];d[1]=a[1];d[2]=a[2];return d};p.height=q;p.intersects=g;p.intersectsClippingArea=function(a,d){return c.isNone(d)?!0:g(a,d)};p.is=n;p.isPoint=function(a){return 0===l(a)&&0===v(a)&&0===q(a)};p.maximumDimension=function(a){return Math.max(l(a),q(a),v(a))};p.offset=function(a,d,e,u,m=a){m[0]=a[0]+d;m[1]=a[1]+e;m[2]=a[2]+u;m[3]=a[3]+d;m[4]=a[4]+e;m[5]=a[5]+u;return m};p.scale=function(a,d,e=a){const u=a[0]+l(a)/2,
m=a[1]+v(a)/2,x=a[2]+q(a)/2;e[0]=u+(a[0]-u)*d;e[1]=m+(a[1]-m)*d;e[2]=x+(a[2]-x)*d;e[3]=u+(a[3]-u)*d;e[4]=m+(a[4]-m)*d;e[5]=x+(a[5]-x)*d;return e};p.set=k;p.setMax=function(a,d,e=a){e[3]=d[0];e[4]=d[1];e[5]=d[2];e!==a&&(e[0]=a[0],e[1]=a[1],e[2]=a[2]);return a};p.setMin=function(a,d,e=a){e[0]=d[0];e[1]=d[1];e[2]=d[2];e!==a&&(e[3]=a[3],e[4]=a[4],e[5]=a[5]);return e};p.size=function(a,d=[0,0,0]){d[0]=l(a);d[1]=v(a);d[2]=q(a);return d};p.toExtent=function(a,d){return isFinite(a[2])||isFinite(a[5])?new z({xmin:a[0],
xmax:a[3],ymin:a[1],ymax:a[4],zmin:a[2],zmax:a[5],spatialReference:d}):new z({xmin:a[0],xmax:a[3],ymin:a[1],ymax:a[4],spatialReference:d})};p.toRect=function(a,d){d||(d=y.create());d[0]=a[0];d[1]=a[1];d[2]=a[3];d[3]=a[4];return d};p.width=l;p.wrap=function(a,d,e,u,m,x){return t(a,d,e,u,m,x,b)};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/geometry/support/normalizeUtils":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../config ../../core/Error ../../core/Logger ../../core/maybe ../Polygon ../Polyline ./normalizeUtilsCommon ./spatialReferenceUtils ./webMercatorUtils ../../tasks/geometry/cut ../../tasks/geometry/simplify".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k,n,h){function f(A){const D=[];let B=0,C=0;for(let w=0;w<A.length;w++){const E=A[w];let I=null;for(let F=0;F<E.length;F++)I=E[F],D.push(I),0===F?C=B=I[0]:(B=Math.min(B,I[0]),C=Math.max(C,I[0]));I&&D.push([(B+C)/2,0])}return D}function b(A,D){if(!(A instanceof v||A instanceof l))throw x.error("straightLineDensify: the input geometry is neither polyline nor polygon"),new y("straightLineDensify: the input geometry is neither polyline nor polygon");var B=q.getGeometryParts(A);
const C=[];for(const E of B){B=[];C.push(B);B.push([E[0][0],E[0][1]]);for(let I=0;I<E.length-1;I++){const F=E[I][0],H=E[I][1],K=E[I+1][0],G=E[I+1][1];var w=Math.sqrt((K-F)*(K-F)+(G-H)*(G-H));const L=(G-H)/w,P=(K-F)/w,R=w/D;if(1<R){for(let S=1;S<=R-1;S++){const M=S*D;B.push([P*M+F,L*M+H])}w=(w+Math.floor(R-1)*D)/2;B.push([P*w+F,L*w+H])}B.push([K,G])}}return"polygon"===A.type?new l({rings:C,spatialReference:A.spatialReference}):new v({paths:C,spatialReference:A.spatialReference})}function a(A,D,B){D&&
(A=b(A,1E6),A=k.webMercatorToGeographic(A,!0));B&&(A=q.updatePolyGeometry(A,B));return A}function d(A,D,B){if(Array.isArray(A)){var C=A[0];C>D?(B=q.offsetMagnitude(C,D),A[0]=C+-2*B*D):C<B&&(D=q.offsetMagnitude(C,B),A[0]=C+-2*D*B)}else C=A.x,C>D?(B=q.offsetMagnitude(C,D),A=A.clone().offset(-2*B*D,0)):C<B&&(D=q.offsetMagnitude(C,B),A=A.clone().offset(-2*D*B,0));return A}function e(A,D){let B=-1;for(let C=0;C<D.cutIndexes.length;C++){const w=D.cutIndexes[C],E=D.geometries[C],I=q.getGeometryParts(E);
for(let F=0;F<I.length;F++){const H=I[F];H.some(K=>{if(180>K[0])return!0;K=0;for(var G=0;G<H.length;G++){var L=H[G][0];K=L>K?L:K}K=Number(K.toFixed(9));K=-360*q.offsetMagnitude(K,180);for(G=0;G<H.length;G++)L=E.getPoint(F,G),E.setPoint(F,G,L.clone().offset(K,0));return!0})}if(w===B)if("polygon"===A[0].type)for(const F of q.getGeometryParts(E))A[w]=A[w].addRing(F);else{if("polyline"===A[0].type)for(const F of q.getGeometryParts(E))A[w]=A[w].addPath(F)}else B=w,A[w]=E}return A}function u(A,D,B){return m.apply(this,
arguments)}function m(){m=c._asyncToGenerator(function*(A,D,B){if(!Array.isArray(A))return u([A],D);var C=D?D.url:z.geometryServiceUrl;let w,E,I;let F=0;var H=[];D=[];for(var K of A)if(t.isNone(K))D.push(K);else{if(!G){var G=K.spatialReference;var L=g.getInfo(G);var P=(w=G.isWebMercator)?102100:4326;E=q.cutParams[P].maxX;I=q.cutParams[P].minX;var R=q.cutParams[P].plus180Line;P=q.cutParams[P].minus180Line}if(L)if("mesh"===K.type)D.push(K);else if("point"===K.type)D.push(d(K.clone(),E,I));else if("multipoint"===
K.type){var S=K.clone();S.points=S.points.map(M=>d(M,E,I));D.push(S)}else if("extent"===K.type)S=K.clone()._normalize(!1,!1,L),D.push(S.rings?new l(S):S);else if(K.extent){S=K.extent;const M=2*q.offsetMagnitude(S.xmin,I)*E;let V=0===M?K.clone():q.updatePolyGeometry(K.clone(),M);S.offset(M,0);S.intersects(R)&&S.xmax!==E?(F=S.xmax>F?S.xmax:F,V=a(V,w),H.push(V),D.push("cut")):S.intersects(P)&&S.xmin!==I?(F=2*S.xmax*E>F?2*S.xmax*E:F,V=a(V,w,360),H.push(V),D.push("cut")):D.push(V)}else D.push(K.clone());
else D.push(K)}G=q.offsetMagnitude(F,E);L=-90;R=G;for(K=new v;0<G;)P=-180+360*G,K.addPath([[P,L],[P,-1*L]]),L*=-1,G--;if(0<H.length&&0<R){G=yield n.cut(C,H,K,B);G=e(H,G);L=[];H=[];for(R=0;R<D.length;R++)K=D[R],"cut"!==K?H.push(K):(K=G.shift(),P=A[R],t.isSome(P)&&"polygon"===P.type&&P.rings&&1<P.rings.length&&K.rings.length>=P.rings.length?(L.push(K),H.push("simplify")):H.push(w?k.geographicToWebMercator(K):K));if(!L.length)return H;D=yield h.simplify(C,L,B);A=[];for(B=0;B<H.length;B++)C=H[B],"simplify"!==
C?A.push(C):A.push(w?k.geographicToWebMercator(D.shift()):D.shift());return A}A=[];for(B=0;B<D.length;B++)C=D[B],"cut"!==C?A.push(C):(C=H.shift(),A.push(!0===w?k.geographicToWebMercator(C):C));return Promise.resolve(A)});return m.apply(this,arguments)}const x=r.getLogger("esri.geometry.support.normalizeUtils");p.getDenormalizedExtent=function(A){if(!A)return null;const D=A.extent;if(!D)return null;var B=A.spatialReference&&g.getInfo(A.spatialReference);if(!B)return D;const [C,w]=B.valid;({width:B}=
D);let {xmin:E,xmax:I}=D;[E,I]=[I,E];if("extent"===A.type||0===B||B<=w||B>2*w||E<C||I>w)return D;let F;switch(A.type){case "polygon":if(1<A.rings.length)F=f(A.rings);else return D;break;case "polyline":if(1<A.paths.length)F=f(A.paths);else return D;break;case "multipoint":F=A.points}A=D.clone();for(let H=0;H<F.length;H++){let K=F[H][0];0>K?(K+=w,I=Math.max(K,I)):(K-=w,E=Math.min(K,E))}A.xmin=E;A.xmax=I;return A.width<B?(A.xmin-=w,A.xmax-=w,A):D};p.normalizeCentralMeridian=u;p.normalizeMapX=function(A,
D){if(D=g.getInfo(D)){const [B,C]=D.valid;D=C-B;if(A<B)for(;A<B;)A+=D;if(A>C)for(;A>C;)A-=D}return A};p.straightLineDensify=b;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/geometry/support/normalizeUtilsCommon":function(){define(["exports","../Polyline","../SpatialReference","./jsonUtils"],function(p,c,z,y){function r(l){return y.isPolygon(l)?l.rings:l.paths}const t={102100:{maxX:2.0037508342788905E7,minX:-2.0037508342788905E7,plus180Line:new c({paths:[[[2.0037508342788905E7,-2.0037508342788905E7],
[2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:z.WebMercator}),minus180Line:new c({paths:[[[-2.0037508342788905E7,-2.0037508342788905E7],[-2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:z.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new c({paths:[[[180,-180],[180,180]]],spatialReference:z.WGS84}),minus180Line:new c({paths:[[[-180,-180],[-180,180]]],spatialReference:z.WGS84})}};p.cutParams=t;p.getGeometryParts=r;p.getSpatialReferenceMinMaxX=function(l){l=(null==
l?0:l.isWebMercator)?102100:4326;return[t[l].minX,t[l].maxX]};p.offsetMagnitude=function(l,v){return Math.ceil((l-v)/(2*v))};p.updatePolyGeometry=function(l,v){const q=r(l);for(const g of q)for(const k of g)k[0]+=v;return l};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/tasks/geometry/cut":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../geometry ../../request ../../core/urlUtils ../../geometry/support/jsonUtils".split(" "),function(p,c,z,y,r,t){function l(){l=c._asyncToGenerator(function*(v,
q,g,k){v="string"===typeof v?r.urlToObject(v):v;const n=q[0].spatialReference;q={...k,query:{...v.query,f:"json",sr:JSON.stringify(n),target:JSON.stringify({geometryType:t.getJsonType(q[0]),geometries:q}),cutter:JSON.stringify(g)}};q=yield y(v.path+"/cut",q);const {cutIndexes:h,geometries:f=[]}=q.data;return{cutIndexes:h,geometries:f.map(b=>{b=t.fromJSON(b);b.spatialReference=n;return b})}});return l.apply(this,arguments)}p.cut=function(v,q,g,k){return l.apply(this,arguments)};Object.defineProperty(p,
"__esModule",{value:!0})})},"esri/request":function(){define("require ./chunks/_rollupPluginBabelHelpers ./config ./kernel ./core/Error ./core/global ./core/has ./core/lang ./core/maybe ./core/promiseUtils ./core/urlUtils ./support/apiKeyUtils ./support/requestUtils".split(" "),function(p,c,z,y,r,t,l,v,q,g,k,n,h){function f(oa,ra){return b.apply(this,arguments)}function b(){b=c._asyncToGenerator(function*(oa,ra){var pa=k.isDataProtocol(oa);const N=k.isBlobProtocol(oa);N||pa||(oa=k.normalize(oa));
const U={url:oa,requestOptions:{...q.unwrap(ra)}};let O=k.getInterceptor(oa);if(O){oa=yield I(O,U);if(null!=oa)return{data:oa,getHeader:ua,requestOptions:U.requestOptions,url:U.url};O.after||O.error||(O=null)}oa=U.url;ra=U.requestOptions;if("image"===ra.responseType){if(l("host-webworker")||l("host-node"))throw e("request:invalid-parameters",Error("responseType 'image' is not supported in Web Workers or Node environment"),U);}else if(pa)throw e("request:invalid-parameters",Error("Data URLs are not supported for responseType \x3d "+
ra.responseType),U);if("head"===ra.method){if(ra.body)throw e("request:invalid-parameters",Error("body parameter cannot be set when method is 'head'"),U);if(pa||N)throw e("request:invalid-parameters",Error("data and blob URLs are not supported for method 'head'"),U);}yield u();if(M)return M.execute(oa,ra);const T=g.createAbortController();g.onAbort(ra,()=>T.abort());pa=yield G({controller:T,credential:null,credentialToken:null,fetchOptions:null,hasToken:!1,interceptor:O,params:U,redoRequest:!1,useIdentity:V.useIdentity,
useProxy:!1,useSSL:!1,withCredentials:!1});O&&O.after&&O.after(pa);return pa});return b.apply(this,arguments)}function a(oa){(oa=k.getOrigin(oa))&&!f._corsServers.includes(oa)&&f._corsServers.push(oa)}function d(oa){oa=k.getOrigin(oa);return!oa||oa.endsWith(".arcgis.com")||f._corsServers.includes(oa)||k.isTrustedServer(oa)}function e(oa,ra,pa,N){let U="Error";const O={url:pa.url,requestOptions:pa.requestOptions,getHeader:ua,ssl:!1};if(ra instanceof r)return ra.details?(ra.details=v.clone(ra.details),
ra.details.url=pa.url,ra.details.requestOptions=pa.requestOptions):ra.details=O,ra;if(ra){pa=N&&(aa=>N.headers.get(aa));const T=N&&N.status,Z=ra.message;Z&&(U=Z);pa&&(O.getHeader=pa);O.httpStatus=(null!=ra.httpCode?ra.httpCode:ra.code)||T||0;O.subCode=ra.subcode;O.messageCode=ra.messageCode;O.messages="string"===typeof ra.details?[ra.details]:ra.details;O.raw=xa in ra?ra[xa]:ra}return g.isAbortError(ra)?g.createAbortError():new r(oa,U,O)}function u(){return m.apply(this,arguments)}function m(){m=
c._asyncToGenerator(function*(){l("host-webworker")?M||(M=yield new Promise(function(oa,ra){p(["./core/workers/request"],oa,ra)})):f._abortableFetch||(f._abortableFetch=t.fetch.bind(t))});return m.apply(this,arguments)}function x(){return A.apply(this,arguments)}function A(){A=c._asyncToGenerator(function*(){y.id||(yield new Promise(function(oa,ra){p(["./identity/IdentityManager"],function(pa){oa(Object.freeze({__proto__:null,"default":pa}))},ra)}))});return A.apply(this,arguments)}function D(oa){return B.apply(this,
arguments)}function B(){B=c._asyncToGenerator(function*(oa){const ra=oa.params.url,pa=oa.params.requestOptions,N=oa.controller.signal,U=pa.body;let O=null,T=null,Z=null;W&&"HTMLFormElement"in t&&(U instanceof FormData?O=U:U instanceof HTMLFormElement&&(T=U,O=new FormData(T)));"string"===typeof U&&(Z=U);oa.fetchOptions={cache:pa.cacheBust&&!f._abortableFetch.polyfill?"no-cache":"default",credentials:"same-origin",headers:pa.headers||{},method:"head"===pa.method?"HEAD":"GET",mode:"cors",redirect:"follow",
signal:N};if(O||Z)oa.fetchOptions.body=O||Z;"anonymous"===pa.authMode&&(oa.useIdentity=!1);oa.hasToken=!!(/token=/i.test(ra)||pa.query&&pa.query.token||O&&O.get&&O.get("token")||T&&T.elements.token);!oa.hasToken&&z.apiKey&&n.supportsApiKey(ra)&&(pa.query||(pa.query={}),pa.query.token=z.apiKey,oa.hasToken=!0);if(oa.useIdentity&&!oa.hasToken&&!oa.credentialToken&&!C(ra)&&!g.isAborted(N)){let aa;"immediate"===pa.authMode?(yield x(),aa=yield y.id.getCredential(ra,{signal:N}),oa.credential=aa):"no-prompt"===
pa.authMode?(yield x(),aa=yield y.id.getCredential(ra,{prompt:!1,signal:N}).catch(()=>{}),oa.credential=aa):y.id&&(aa=y.id.findCredential(ra));aa&&(oa.credentialToken=aa.token,oa.useSSL=!!aa.ssl)}});return B.apply(this,arguments)}function C(oa){return sa.some(ra=>ra.test(oa))}function w(oa){return E.apply(this,arguments)}function E(){E=c._asyncToGenerator(function*(oa){let ra=oa.params.url;const pa=oa.params.requestOptions,N=oa.fetchOptions,U=k.isBlobProtocol(ra)||k.isDataProtocol(ra),O=pa.responseType||
"json",T=U?0:null!=pa.timeout?pa.timeout:V.timeout;var Z=!1;if(!U){oa.useSSL&&(ra=k.toHTTPS(ra));pa.cacheBust&&"default"===N.cache&&(ra=k.addQueryParameter(ra,"request.preventCache",Date.now()));var aa={...pa.query};oa.credentialToken&&(aa.token=oa.credentialToken);Z=k.objectToQuery(aa);l("esri-url-encodes-apostrophe")&&(Z=Z.replace(/'/g,"%27"));const la=ra.length+1+Z.length;Z="delete"===pa.method||"post"===pa.method||"put"===pa.method||!!pa.body||la>V.maxUrlLength;const qa=pa.useProxy||!!k.getProxyRule(ra);
if(qa){const va=k.getProxyUrl(ra);var Y=va.path;!Z&&Y.length+1+la>V.maxUrlLength&&(Z=!0);va.query&&(aa={...va.query,...aa})}if("HEAD"===N.method&&(Z||qa)){if(Z){if(la>V.maxUrlLength)throw e("request:invalid-parameters",Error("URL exceeds maximum length"),oa.params);throw e("request:invalid-parameters",Error("cannot use POST request when method is 'head'"),oa.params);}if(qa)throw e("request:invalid-parameters",Error("cannot use proxy when method is 'head'"),oa.params);}Z?(N.method="delete"===pa.method?
"DELETE":"put"===pa.method?"PUT":"POST",pa.body?ra=k.addQueryParameters(ra,aa):(N.body=k.objectToQuery(aa),N.headers["Content-Type"]="application/x-www-form-urlencoded")):ra=k.addQueryParameters(ra,aa);qa&&(oa.useProxy=!0,ra=`${Y}?${ra}`);aa.token&&W&&N.body instanceof FormData&&(Y=N.body,Y.set?Y.set("token",aa.token):Y.append("token",aa.token));pa.hasOwnProperty("withCredentials")?oa.withCredentials=pa.withCredentials:k.hasSameOrigin(ra,k.appUrl)||(k.isTrustedServer(ra)?oa.withCredentials=!0:y.id&&
(aa=y.id.findServerInfo(ra))&&aa.webTierAuth&&(oa.withCredentials=!0));oa.withCredentials&&(N.credentials="include")}aa=0;let ba=!1;0<T&&(aa=setTimeout(()=>{ba=!0;oa.controller.abort()},T));let fa,ha;try{if("native-request-init"===pa.responseType)ha=N,ha.url=ra;else if("image"!==pa.responseType||"default"!==N.cache||"GET"!==N.method||Z||H(pa.headers)||!U&&!oa.useProxy&&V.proxyUrl&&!d(ra))if(fa=yield f._abortableFetch(ra,N),oa.useProxy||a(ra),"native"===pa.responseType)ha=fa;else{if("HEAD"!==N.method)if(fa.ok){switch(O){case "array-buffer":ha=
yield fa.arrayBuffer();break;case "blob":case "image":ha=yield fa.blob();break;default:ha=yield fa.text()}aa&&(clearTimeout(aa),aa=0);if("json"===O||"xml"===O||"document"===O)if(ha)switch(O){case "json":ha=JSON.parse(ha);break;case "xml":ha=K(ha,"application/xml");break;case "document":ha=K(ha,"text/html")}else ha=null;if(ha){if("array-buffer"===O||"blob"===O){const la=fa.headers.get("Content-Type");if(/application\/json|text\/plain/i.test(la)&&750>=ha["blob"===O?"size":"byteLength"])try{const qa=
yield(new Response(ha)).json();qa.error&&(ha=qa)}catch{}}"image"===O&&ha instanceof Blob&&(ha=yield S(URL.createObjectURL(ha),oa,!0))}}else ha=yield fa.text()}else ha=yield S(ra,oa)}catch(la){if("AbortError"===la.name){if(ba)throw Error("Timeout exceeded");throw g.createAbortError("Request canceled");}if(!fa&&la instanceof TypeError&&V.proxyUrl&&!pa.body&&"delete"!==pa.method&&"head"!==pa.method&&"post"!==pa.method&&"put"!==pa.method&&!oa.useProxy&&!d(ra))oa.redoRequest=!0,k.addProxyRule({proxyUrl:V.proxyUrl,
urlPrefix:k.getOrigin(ra)});else throw la;}finally{aa&&clearTimeout(aa)}return[fa,ha]});return E.apply(this,arguments)}function I(oa,ra){return F.apply(this,arguments)}function F(){F=c._asyncToGenerator(function*(oa,ra){if(null!=oa.responseData)return oa.responseData;oa.headers&&(ra.requestOptions.headers={...ra.requestOptions.headers,...oa.headers});oa.query&&(ra.requestOptions.query={...ra.requestOptions.query,...oa.query});if(oa.before){let pa,N;try{N=yield oa.before(ra)}catch(U){pa=e("request:interceptor",
U,ra)}if(N instanceof Error||N instanceof r)pa=e("request:interceptor",N,ra);if(pa)throw oa.error&&oa.error(pa),pa;return N}});return F.apply(this,arguments)}function H(oa){if(oa)for(const ra of Object.getOwnPropertyNames(oa))if(oa[ra])return!0;return!1}function K(oa,ra){let pa;try{pa=(new DOMParser).parseFromString(oa,ra)}catch{}if(!pa||pa.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return pa}function G(oa){return L.apply(this,arguments)}function L(){L=c._asyncToGenerator(function*(oa){var ra,
pa;yield D(oa);let N;try{do[N,U]=yield w(oa);while(!(yield P(oa,N,U)))}catch(T){var U=e("request:server",T,oa.params,N);U.details.ssl=oa.useSSL;oa.interceptor&&oa.interceptor.error&&oa.interceptor.error(U);throw U;}const O=oa.params.url;!/\/sharing\/rest\/(accounts|portals)\/self/i.test(O)||oa.hasToken||oa.credentialToken||null==(ra=U)||null==(pa=ra.user)||!pa.username||k.isTrustedServer(O)||(ra=k.getOrigin(O,!0))&&V.trustedServers.push(ra);(ra=oa.credential)&&y.id&&(pa=(pa=y.id.findServerInfo(ra.server))&&
pa.owningSystemUrl)&&(pa=pa.replace(/\/?$/,"/sharing"),(ra=y.id.findCredential(pa,ra.userId))&&-1===y.id._getIdenticalSvcIdx(pa,ra)&&ra.resources.unshift(pa));return{data:U,getHeader:N?T=>N.headers.get(T):ua,requestOptions:oa.params.requestOptions,ssl:oa.useSSL,url:oa.params.url}});return L.apply(this,arguments)}function P(oa,ra,pa){return R.apply(this,arguments)}function R(){R=c._asyncToGenerator(function*(oa,ra,pa){if(oa.redoRequest)return oa.redoRequest=!1;const N=oa.params.requestOptions;if(!ra||
"native"===N.responseType||"native-request-init"===N.responseType)return!0;let U;if(!ra.ok)throw U=Error(`Unable to load ${ra.url} status: ${ra.status}`),U[xa]=pa,U;null!=pa&&pa.error&&(U=pa.error);let O,T,Z;U&&(O=Number(U.code),T=U.hasOwnProperty("subcode")?Number(U.subcode):null,Z=(Z=U.messageCode)&&Z.toUpperCase());ra=N.authMode;if(403===O&&(4===T||U.message&&-1<U.message.toLowerCase().indexOf("ssl")&&-1===U.message.toLowerCase().indexOf("permission"))){if(!oa.useSSL)return oa.useSSL=!0,!1}else if(!oa.hasToken&&
oa.useIdentity&&("no-prompt"!==ra||498===O)&&-1!==ea.indexOf(O)&&!C(oa.params.url)&&(403!==O||-1===ka.indexOf(Z)&&(null==T||2===T&&oa.credentialToken))){yield x();try{const aa=yield y.id.getCredential(oa.params.url,{error:e("request:server",U,oa.params),prompt:"no-prompt"!==ra,signal:oa.controller.signal,token:oa.credentialToken});oa.credential=aa;oa.credentialToken=aa.token;oa.useSSL=oa.useSSL||aa.ssl;return!1}catch(aa){if("no-prompt"===ra)return oa.credential=null,oa.credentialToken=null,!1;U=aa}}if(U)throw U;
return!0});return R.apply(this,arguments)}function S(oa,ra,pa=!1){const N=ra.controller.signal,U=new Image;U.crossOrigin=ra.withCredentials?"use-credentials":"anonymous";U.alt="";U.src=oa;return h.loadImageAsync(U,oa,pa,N)}let M;const V=z.request,W="FormData"in t,ea=[499,498,403,401],ka=["COM_0056","COM_0057","SB_0008"],sa=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],ua=()=>null,xa=Symbol();f._abortableFetch=null;f._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"];
return f})},"esri/support/apiKeyUtils":function(){define(["exports","../core/urlUtils"],function(p,c){const z=["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"];p.isApiKey=function(y){return y&&4<y.length&&y.startsWith("AAPK")};p.supportsApiKey=function(y){const r=c.getOrigin(y,!0);return r&&r.endsWith(".arcgis.com")&&!z.includes(r)&&!y.endsWith("/sharing/rest/generateToken")};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/support/requestUtils":function(){define(["exports",
"../core/has","../core/maybe","../core/promiseUtils"],function(p,c,z,y){function r(){try{return new DOMException("Aborted","AbortError")}catch{const t=Error();t.name="AbortError";return t}}p.loadImageAsync=function(t,l,v=!1,q){return new Promise((g,k)=>{if(y.isAborted(q))k(r());else{var n=()=>{b();k(Error(`Unable to load ${l}`))},h=()=>{const a=t;b();g(a)},f=()=>{if(t){var a=t;b();a.src="";k(r())}},b=()=>{c("esri-image-decode")||(t.removeEventListener("error",n),t.removeEventListener("load",h));t=
h=n=null;z.isSome(q)&&q.removeEventListener("abort",f);f=null;v&&URL.revokeObjectURL(l)};z.isSome(q)&&q.addEventListener("abort",f);c("esri-image-decode")?t.decode().then(h,n):(t.addEventListener("error",n),t.addEventListener("load",h))}})};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/tasks/geometry/simplify":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../request","../../core/urlUtils","../../geometry/support/jsonUtils"],function(p,c,z,y,r){function t(){t=
c._asyncToGenerator(function*(q,g,k){const n="string"===typeof q?y.urlToObject(q):q;q=g[0].spatialReference;const h=r.getJsonType(g[0]);g={...k,query:{...n.query,f:"json",sr:q.wkid?q.wkid:JSON.stringify(q),geometries:JSON.stringify(l(g))}};g=yield z(n.path+"/simplify",g);return v(g.data,h,q)});return t.apply(this,arguments)}function l(q){return{geometryType:r.getJsonType(q[0]),geometries:q.map(g=>g.toJSON())}}function v(q,g,k){const n=r.getGeometryType(g);return q.map(h=>{h=n.fromJSON(h);h.spatialReference=
k;return h})}p.simplify=function(q,g,k){return t.apply(this,arguments)};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/graphics/data/attributeSupport":function(){define(["exports","../../../core/Error","../../../core/sql/WhereClauseCache"],function(p,c,z){function y(q,g){return q?l.get(q,g):null}function r(q,g,k,n=!0){const h=[];for(const f of g)if("*"!==f&&!q.has(f))if(n){g=t(f);try{const b=y(g,q);if(!b)throw new c("feature-store:unsupported-query","invalid SQL expression",{where:g});
if(!b.isStandardized)throw new c("feature-store:unsupported-query","expression is not standard",{clause:b});r(q,b.fieldNames,"expression contains missing fields")}catch(b){if((g=b&&b.details)&&(g.clause||g.where))throw b;g&&g.missingFields?h.push(...g.missingFields):h.push(f)}}else h.push(f);if(h.length)throw new c("feature-store:unsupported-query",k,{missingFields:h});}function t(q){return q.split(" as ")[0]}const l=new z.WhereClauseCache(50,500),v=new Set("esriFieldTypeOID esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeLong esriFieldTypeDate".split(" "));
p.getAliasFromFieldName=function(q){return q.split(" as ")[1]};p.getExpressionFromFieldName=t;p.getWhereClause=y;p.hasInvalidFieldType=function(q,g){return(q=g.get(q))?!v.has(q.type):!1};p.validateFields=r;p.validateHaving=function(q,g,k){if(!g)return!0;const n=l.get(g,q);if(!n)throw new c("feature-store:unsupported-query","invalid SQL expression",{having:g});if(!n.isAggregate)throw new c("feature-store:unsupported-query","having does not contain a valid aggregate function",{having:g});r(q,n.fieldNames,
"having contains missing fields");if(!n.getExpressions().every(h=>{const {aggregateType:f,field:b}=h,a=q.has(b)&&q.get(b).name;return k.some(d=>{const {onStatisticField:e,statisticType:u}=d;return(q.has(e)&&q.get(e).name)===a&&u.toLowerCase().trim()===f})}))throw new c("feature-store:unsupported-query","expressions in having should also exist in outStatistics",{having:g});return!0};p.validateWhere=function(q,g){if(!g)return!0;const k=l.get(g,q);if(!k)throw new c("feature-store:unsupported-query",
"invalid SQL expression",{where:g});if(!k.isStandardized)throw new c("feature-store:unsupported-query","where clause is not standard",{where:g});r(q,k.fieldNames,"where clause contains missing fields");return!0};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/core/sql/WhereClauseCache":function(){define(["exports","../ItemCache","./WhereClause"],function(p,c,z){let y=function(){function r(t,l){this._cache=new c(t);this._invalidCache=new c(l)}r.prototype.get=function(t,l){const v=`${l.uid}:${t}`,
q=this._cache.get(v);if(q)return q;if(void 0!==this._invalidCache.get(v))return null;try{const g=z.WhereClause.create(t,l);this._cache.put(v,g);return g}catch{return this._invalidCache.put(v,null),null}};return r}();p.WhereClauseCache=y;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/core/ItemCache":function(){define(["./MemCache"],function(p){return function(){function c(y,r){this._storage=new p.MemCacheStorage;this._storage.maxSize=y;r&&this._storage.registerRemoveFunc("",r)}var z=c.prototype;
z.put=function(y,r){this._storage.put(y,r,1,1)};z.pop=function(y){return this._storage.pop(y)};z.get=function(y){return this._storage.get(y)};z.clear=function(){this._storage.clearAll()};z.destroy=function(){this._storage.destroy()};return c}()})},"esri/core/sql/WhereClause":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../has ./AggregateFunctions ./StandardizedFunctions ./WhereGrammar".split(" "),function(p,c,z,y,r,t){function l(H,K){H+="";return H.length>=K?H:Array(K-H.length+
1).join("0")+H}function v(H,K,G="0",L="0",P="0",R="0",S="",M="0",V="0"){return"+"===S||"-"===S?(H=`${l(parseInt(H,10),4)}-${l(parseInt(K,10),2)}-${l(parseInt(G,10),2)}`,K="",10>parseFloat(R)&&(K="0"),L=`${l(parseInt(L,10),2)}:${l(parseInt(P,10),2)}:${K+parseFloat(R).toString()}`,S=`${S}${l(parseInt(M,10),2)}:${l(parseInt(V,10),2)}`,new Date(H+"T"+L+S)):new Date(parseInt(H,10),parseInt(K,10)-1,parseInt(G,10),parseInt(L,10),parseInt(P,10),parseFloat(R))}function q(H){let K=D.exec(H);if(null!==K){const [,
G,L,P,R,S,M]=K;return v(G,L,P,R,S,M)}K=B.exec(H);if(null!==K){const [,G,L,P,R,S,M,V,W,ea]=K;return v(G,L,P,R,S,M,V,W,ea)}K=C.exec(H);if(null!==K){const [,G,L,P,R,S,M,V,W]=K;return v(G,L,P,R,S,"0",M,V,W)}K=w.exec(H);if(null!==K){const [,G,L,P,R,S]=K;return v(G,L,P,R,S)}K=A.exec(H);if(null!==K){const [,G,L,P]=K;return v(G,L,P)}throw Error("SQL Invalid Timestamp");}function g(H){H=A.exec(H);if(null===H)throw Error("SQL Invalid Date");const [,K,G,L]=H;return new Date(parseInt(K,10),parseInt(G,10)-1,parseInt(L,
10))}function k(H){return Array.isArray(H)?H:[H]}function n(H){return null!==H?!0!==H:null}function h(H,K){return null!=H&&null!=K?!0===H&&!0===K:!1===H||!1===K?!1:null}function f(H,K){return null!=H&&null!=K?!0===H||!0===K:!0===H||!0===K?!0:null}function b(H,K){if(null==H)return null;let G=!1;for(const L of K)if(null==L)G=null;else if(H===L){G=!0;break}return G}function a(H,K,G){if(null==H)return null;let L="",P=0;for(let R=0;R<K.length;R++){const S=K.charAt(R);switch(P){case 0:S===G?P=1:L=0<="-[]/{}()*+?.\\^$|".indexOf(S)?
L+("\\"+S):"%"===S?L+".*":"_"===S?L+".":L+S;break;case 1:L=0<="-[]/{}()*+?.\\^$|".indexOf(S)?L+("\\"+S):L+S,P=0}}return(new RegExp("^"+L+"$")).test(H)}function d(H){return H instanceof Date?H.valueOf():H}function e(H,K,G){if(null==K||null==G)return null;K=d(K);G=d(G);switch(H){case "\x3c\x3e":return K!==G;case "\x3d":return K===G;case "\x3e":return K>G;case "\x3c":return K<G;case "\x3e\x3d":return K>=G;case "\x3c\x3d":return K<=G}}function u(H){const K=[],G={};for(const L of H)H=L.toLowerCase(),void 0===
G[H]&&(K.push(L),G[H]=1);return K}function m(H,K,G){if(K instanceof r.SqlInterval)if(G instanceof Date)switch(H){case "+":return new Date(K.valueInMilliseconds()+G.getTime());case "-":return K.valueInMilliseconds()-G.getTime();case "*":return K.valueInMilliseconds()*G.getTime();case "/":return K.valueInMilliseconds()/G.getTime()}else if(G instanceof r.SqlInterval)switch(H){case "+":return r.SqlInterval.createFromMilliseconds(K.valueInMilliseconds()+G.valueInMilliseconds());case "-":return r.SqlInterval.createFromMilliseconds(K.valueInMilliseconds()-
G.valueInMilliseconds());case "*":return K.valueInMilliseconds()*G.valueInMilliseconds();case "/":return K.valueInMilliseconds()/G.valueInMilliseconds()}else K=K.valueInMilliseconds();else if(G instanceof r.SqlInterval)if(K instanceof Date)switch(H){case "+":return new Date(G.valueInMilliseconds()+K.getTime());case "-":return new Date(K.getTime()-G.valueInMilliseconds());case "*":return K.getTime()*G.valueInMilliseconds();case "/":return K.getTime()/G.valueInMilliseconds()}else G=G.valueInMilliseconds();
else if(K instanceof Date&&"number"===typeof G)switch(G*=864E5,K=K.getTime(),H){case "+":return new Date(K+G);case "-":return new Date(K-G);case "*":return new Date(K*G);case "/":return new Date(K/G)}else if(G instanceof Date&&"number"===typeof K)switch(K*=864E5,G=G.getTime(),H){case "+":return new Date(K+G);case "-":return new Date(K-G);case "*":return new Date(K*G);case "/":return new Date(K/G)}switch(H){case "+":return K+G;case "-":return K-G;case "*":return K*G;case "/":return K/G}}function x(H,
K,G,L){H=L.getAttribute(H,K);return null!=H&&1===G[K]?new Date(H):H}const A=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,D=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)$/,B=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)(\+|\-)(\d{1,2}):(\d{1,2})$/,C=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})(\+|\-)(\d{1,2}):(\d{1,2})$/,w=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/;let E=function(){function H(){}H.makeBool=function(K){return!0===K};H.featureValue=
function(K,G,L,P){return x(K,G,L,P)};H.equalsNull=function(K){return null===K};H.applyLike=function(K,G,L){return a(K,G,L)};H.ensureArray=function(K){return k(K)};H.applyIn=function(K,G){return b(K,G)};H.currentDate=function(){const K=new Date;K.setHours(0,0,0,0);return K};H.makeSqlInterval=function(K,G,L){return r.SqlInterval.createFromValueAndQualifer(K,G,L)};H.convertInterval=function(K){return K instanceof r.SqlInterval?K.valueInMilliseconds():K};H.currentTimestamp=function(){return new Date};
H.compare=function(K,G,L){return e(K,G,L)};H.calculate=function(K,G,L){return m(K,G,L)};H.makeComparable=function(K){return d(K)};H.evaluateFunction=function(K,G){return r.evaluateFunction(K,G)};H.lookup=function(K,G){K=G[K];return void 0===K?null:K};H.between=function(K,G){return null==K||null==G[0]||null==G[1]?null:K>=G[0]&&K<=G[1]};H.notbetween=function(K,G){return null==K||null==G[0]||null==G[1]?null:K<G[0]||K>G[1]};H.ternaryNot=function(K){return n(K)};H.ternaryAnd=function(K,G){return h(K,G)};
H.ternaryOr=function(K,G){return f(K,G)};return H}(),I=function(){function H(G,L){this.fieldsIndex=L;this.datefields={};this.parameters={};this.parseTree=t.WhereGrammar.parse(G);const {isStandardized:P,isAggregate:R,referencedFieldNames:S}=this.extractExpressionInfo(L);this.referencedFieldNames=S;this.isStandardized=P;this.isAggregate=R}H.create=function(G,L){return new H(G,L)};var K=H.prototype;K.testSet=function(G,L=F){const P={};for(const R of this.fieldNames)P[R]=G.map(S=>L.getAttribute(S,R));
return!!this.evaluateNode(this.parseTree,{attributes:P},F)};K.calculateValue=function(G,L=F){G=this.evaluateNode(this.parseTree,G,L);return G instanceof r.SqlInterval?G.valueInMilliseconds()/864E5:G};K.calculateValueCompiled=function(G,L=F){if(null!=this.parseTree._compiledVersion)return this.parseTree._compiledVersion(G,this.parameters,L,this.datefields);if(z("csp-restrictions"))return this.calculateValue(G,L);this.compileMe();return this.parseTree._compiledVersion(G,this.parameters,L,this.datefields)};
K.testFeature=function(G,L=F){return!!this.evaluateNode(this.parseTree,G,L)};K.testFeatureCompiled=function(G,L=F){if(null!=this.parseTree._compiledVersion)return!!this.parseTree._compiledVersion(G,this.parameters,L,this.datefields);if(z("csp-restrictions"))return this.testFeature(G,L);this.compileMe();return!!this.parseTree._compiledVersion(G,this.parameters,L,this.datefields)};K.getFunctions=function(){const G=[];this.visitAll(this.parseTree,L=>{"function"===L.type&&G.push(L.name.toLowerCase())});
return u(G)};K.getExpressions=function(){const G=new Map;this.visitAll(this.parseTree,L=>{if("function"===L.type){const P=L.name.toLowerCase();L=L.args.value[0];if("column_ref"===L.type){L=L.column;const R=`${P}-${L}`;G.has(R)||G.set(R,{aggregateType:P,field:L})}}});return[...G.values()]};K.getVariables=function(){const G=[];this.visitAll(this.parseTree,L=>{"param"===L.type&&G.push(L.value.toLowerCase())});return u(G)};K.compileMe=function(){const G="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+
")";this.parseTree._compiledVersion=(new Function("feature","lookups","attributeAdapter","datefields",G)).bind(E)};K.extractExpressionInfo=function(G){const L=[];let P=!0,R=!0;this.visitAll(this.parseTree,S=>{switch(S.type){case "column_ref":{const M=G.get(S.column),V=M&&M.name;!M||"date"!==M.type&&"esriFieldTypeDate"!==M.type||(this.datefields[M.name]=1);void 0!==V?(L.push(V),S.column=V):L.push(S.column);break}case "function":{const {name:M,args:V}=S;S=V.value.length;P&&(P=r.isStandardized(M,S));
R&&(R=y.isAggregate(M,S))}}});return{referencedFieldNames:u(L),isStandardized:P,isAggregate:R}};K.visitAll=function(G,L){if(null!=G)switch(L(G),G.type){case "when_clause":this.visitAll(G.operand,L);this.visitAll(G.value,L);break;case "case_expression":for(const P of G.clauses)this.visitAll(P,L);"simple"===G.format&&this.visitAll(G.operand,L);null!==G.else&&this.visitAll(G.else,L);break;case "expr_list":for(const P of G.value)this.visitAll(P,L);break;case "unary_expr":this.visitAll(G.expr,L);break;
case "binary_expr":this.visitAll(G.left,L);this.visitAll(G.right,L);break;case "function":this.visitAll(G.args,L)}};K.evaluateNodeToJavaScript=function(G){switch(G.type){case "interval":return"this.makeSqlInterval("+this.evaluateNodeToJavaScript(G.value)+", "+JSON.stringify(G.qualifier)+","+JSON.stringify(G.op)+")";case "case_expression":var L="";if("simple"===G.format){var P="this.makeComparable("+this.evaluateNodeToJavaScript(G.operand)+")";L="( ";for(let R=0;R<G.clauses.length;R++)L+=" ("+P+" \x3d\x3d\x3d this.makeComparable("+
this.evaluateNodeToJavaScript(G.clauses[R].operand)+")) ? ("+this.evaluateNodeToJavaScript(G.clauses[R].value)+") : "}else for(L="( ",P=0;P<G.clauses.length;P++)L+=" this.makeBool("+this.evaluateNodeToJavaScript(G.clauses[P].operand)+")\x3d\x3d\x3dtrue ? ("+this.evaluateNodeToJavaScript(G.clauses[P].value)+") : ";L=null!==G.else?L+this.evaluateNodeToJavaScript(G.else):L+"null";return L+=" )";case "param":return"this.lookup("+JSON.stringify(G.value.toLowerCase())+",lookups)";case "expr_list":L="[";
for(P of G.value)"["!==L&&(L+=","),L+=this.evaluateNodeToJavaScript(P);return L+="]";case "unary_expr":return"this.ternaryNot("+this.evaluateNodeToJavaScript(G.expr)+")";case "binary_expr":switch(G.operator){case "AND":return"this.ternaryAnd("+this.evaluateNodeToJavaScript(G.left)+","+this.evaluateNodeToJavaScript(G.right)+" )";case "OR":return"this.ternaryOr("+this.evaluateNodeToJavaScript(G.left)+","+this.evaluateNodeToJavaScript(G.right)+" )";case "IS":if("null"!==G.right.type)throw Error("Unsupported RHS for IS");
return"this.equalsNull("+this.evaluateNodeToJavaScript(G.left)+")";case "ISNOT":if("null"!==G.right.type)throw Error("Unsupported RHS for IS");return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(G.left)+")))";case "IN":return"this.applyIn("+this.evaluateNodeToJavaScript(G.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(G.right)+"))";case "NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(G.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(G.right)+")))";
case "BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(G.left)+","+this.evaluateNodeToJavaScript(G.right)+")";case "NOTBETWEEN":return"this.notbetween("+this.evaluateNodeToJavaScript(G.left)+","+this.evaluateNodeToJavaScript(G.right)+")";case "LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(G.left)+","+this.evaluateNodeToJavaScript(G.right)+","+JSON.stringify(G.escape)+")";case "NOT LIKE":return"this.ternaryNot(this.applyLike("+this.evaluateNodeToJavaScript(G.left)+","+this.evaluateNodeToJavaScript(G.right)+
","+JSON.stringify(G.escape)+"))";case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return"this.compare("+JSON.stringify(G.operator)+","+this.evaluateNodeToJavaScript(G.left)+","+this.evaluateNodeToJavaScript(G.right)+")";case "*":case "-":case "+":case "/":return"this.calculate("+JSON.stringify(G.operator)+","+this.evaluateNodeToJavaScript(G.left)+","+this.evaluateNodeToJavaScript(G.right)+")"}throw Error("Not Supported Operator "+G.operator);case "null":case "bool":case "string":case "number":return JSON.stringify(G.value);
case "date":return"(new Date("+g(G.value).getTime().toString()+"))";case "timestamp":return"(new Date("+q(G.value).getTime().toString()+"))";case "current_time":return"date"===G.mode?"this.currentDate()":"this.currentTimestamp()";case "column_ref":return"this.featureValue(feature,"+JSON.stringify(G.column)+",datefields,attributeAdapter)";case "function":return"this.evaluateFunction("+JSON.stringify(G.name)+","+this.evaluateNodeToJavaScript(G.args)+")"}throw Error("Unsupported sql syntax "+G.type);
};K.evaluateNode=function(G,L,P){switch(G.type){case "interval":return L=this.evaluateNode(G.value,L,P),r.SqlInterval.createFromValueAndQualifer(L,G.qualifier,G.op);case "case_expression":if("simple"===G.format){var R=d(this.evaluateNode(G.operand,L,P));for(var S=0;S<G.clauses.length;S++)if(R===d(this.evaluateNode(G.clauses[S].operand,L,P)))return this.evaluateNode(G.clauses[S].value,L,P)}else for(R=0;R<G.clauses.length;R++)if(!0===this.evaluateNode(G.clauses[R].operand,L,P))return this.evaluateNode(G.clauses[R].value,
L,P);return null!==G.else?this.evaluateNode(G.else,L,P):null;case "param":return this.parameters[G.value.toLowerCase()];case "expr_list":R=[];for(S of G.value)R.push(this.evaluateNode(S,L,P));return R;case "unary_expr":return n(this.evaluateNode(G.expr,L,P));case "binary_expr":switch(G.operator){case "AND":return h(this.evaluateNode(G.left,L,P),this.evaluateNode(G.right,L,P));case "OR":return f(this.evaluateNode(G.left,L,P),this.evaluateNode(G.right,L,P));case "IS":if("null"!==G.right.type)throw Error("Unsupported RHS for IS");
return null===this.evaluateNode(G.left,L,P);case "ISNOT":if("null"!==G.right.type)throw Error("Unsupported RHS for IS");return null!==this.evaluateNode(G.left,L,P);case "IN":return R=k(this.evaluateNode(G.right,L,P)),b(this.evaluateNode(G.left,L,P),R);case "NOT IN":return R=k(this.evaluateNode(G.right,L,P)),n(b(this.evaluateNode(G.left,L,P),R));case "BETWEEN":return R=this.evaluateNode(G.left,L,P),G=this.evaluateNode(G.right,L,P),null==R||null==G[0]||null==G[1]?null:R>=d(G[0])&&R<=d(G[1]);case "NOTBETWEEN":return R=
this.evaluateNode(G.left,L,P),G=this.evaluateNode(G.right,L,P),null==R||null==G[0]||null==G[1]?null:R<d(G[0])||R>d(G[1]);case "LIKE":return a(this.evaluateNode(G.left,L,P),this.evaluateNode(G.right,L,P),G.escape);case "NOT LIKE":return n(a(this.evaluateNode(G.left,L,P),this.evaluateNode(G.right,L,P),G.escape));case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return e(G.operator,this.evaluateNode(G.left,L,P),this.evaluateNode(G.right,L,P));case "-":case "+":case "*":case "/":return m(G.operator,
this.evaluateNode(G.left,L,P),this.evaluateNode(G.right,L,P))}case "null":case "bool":case "string":case "number":return G.value;case "date":return g(G.value);case "timestamp":return q(G.value);case "current_time":return L=new Date,"date"===G.mode&&L.setHours(0,0,0,0),L;case "column_ref":return x(L,G.column,this.datefields,P);case "function":return L=this.evaluateNode(G.args,L,P),this.isAggregate?y.aggregateFunction(G.name,L):r.evaluateFunction(G.name,L)}throw Error("Unsupported sql syntax "+G.type);
};c._createClass(H,[{key:"fieldNames",get:function(){return this.referencedFieldNames}}]);return H}();const F={getAttribute(H,K){return(H&&"object"===typeof H.attributes?H.attributes:H)[K]}};p.WhereClause=I;p.defaultAttributeAdapter=F;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/core/sql/AggregateFunctions":function(){define(["exports"],function(p){function c(r){let t=0;for(let l=0;l<r.length;l++)t+=r[l];return t/r.length}function z(r){const t=c(r),l=r.length;let v=0;for(const q of r)v+=
(q-t)**2;return 1<l?v/(l-1):0}const y={min:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:Math.min.apply(Math,r[0])},max:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:Math.max.apply(Math,r[0])},avg:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:c(r[0])},sum:{minParams:1,maxParams:1,evaluate:r=>{if(null==r[0])r=null;else{{r=r[0];let t=0;for(let l=0;l<r.length;l++)t+=r[l];r=t}}return r}},stddev:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:Math.sqrt(z(r[0]))},count:{minParams:1,
maxParams:1,evaluate:r=>null==r[0]?null:r[0].length},var:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:z(r[0])}};p.aggregateFunction=function(r,t){const l=y[r.toLowerCase()];if(null==l)throw Error("Function Not Recognised");if(t.length<l.minParams||t.length>l.maxParams)throw Error(`Invalid Parameter count for call to ${r.toUpperCase()}`);return l.evaluate(t)};p.isAggregate=function(r,t){r=y[r.toLowerCase()];return null!=r&&t>=r.minParams&&t<=r.maxParams};Object.defineProperty(p,"__esModule",
{value:!0})})},"esri/core/sql/StandardizedFunctions":function(){define(["exports","../string"],function(p,c){let z=function(){function r(){this.op="+";this.minute=this.year=this.month=this.hour=this.second=this.day=0}r.fixDefaults=function(t){if(null!==t.precision||null!==t.secondary)throw Error("Primary and Secondary SqlInterval qualifiers not supported");};r.createFromMilliseconds=function(t){const l=new r;l.second=t/1E3;return l};r.createFromValueAndQualifer=function(t,l,v){let q=null;const g=
new r;g.op="-"===v?"-":"+";if("interval-period"===l.type){r.fixDefaults(l);if("year"===l.period||"month"===l.period)throw Error("Year-Month Intervals not supported");if(/^[0-9]{1,}$/.test(t))g[l.period]=parseFloat(t);else throw Error("Illegal Interval");}else{r.fixDefaults(l.start);r.fixDefaults(l.end);if("year"===l.start.period||"month"===l.start.period)throw Error("Year-Month Intervals not supported");if("year"===l.end.period||"month"===l.end.period)throw Error("Year-Month Intervals not supported");
switch(l.start.period){case "day":switch(l.end.period){case "hour":q=/^[0-9]{1,} [0-9]{1,}$/;if(q.test(t))g[l.start.period]=parseFloat(t.split(" ")[0]),g[l.end.period]=parseFloat(t.split(" ")[1]);else throw Error("Illegal Interval");break;case "minute":q=/^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$/;if(q.test(t))g[l.start.period]=parseFloat(t.split(" ")[0]),t=t.split(" ")[1].split(":"),g.hour=parseFloat(t[0]),g.minute=parseFloat(t[1]);else throw Error("Illegal Interval");break;case "second":q=/^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;
if(q.test(t))g[l.start.period]=parseFloat(t.split(" ")[0]),t=t.split(" ")[1].split(":"),g.hour=parseFloat(t[0]),g.minute=parseFloat(t[1]),g.second=parseFloat(t[2]);else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;case "hour":switch(l.end.period){case "minute":q=/^[0-9]{1,}:[0-9]{1,}$/;if(q.test(t))g.hour=parseFloat(t.split(":")[0]),g.minute=parseFloat(t.split(":")[1]);else throw Error("Illegal Interval");break;case "second":q=/^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;
if(q.test(t))t=t.split(":"),g.hour=parseFloat(t[0]),g.minute=parseFloat(t[1]),g.second=parseFloat(t[2]);else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;case "minute":switch(l.end.period){case "second":q=/^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(q.test(t))t=t.split(":"),g.minute=parseFloat(t[0]),g.second=parseFloat(t[1]);else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;default:throw"Invalid Interval.";}}return g};r.prototype.valueInMilliseconds=
function(){return("-"===this.op?-1:1)*(1E3*this.second+6E4*this.minute+36E5*this.hour+864E5*this.day+365/12*this.month*864E5+31536E6*this.year)};return r}();const y={extract:{minParams:2,maxParams:2,evaluate:([r,t])=>{if(null==t)return null;if(t instanceof Date)switch(r.toUpperCase()){case "SECOND":return t.getSeconds();case "MINUTE":return t.getMinutes();case "HOUR":return t.getHours();case "DAY":return t.getDate();case "MONTH":return t.getMonth()+1;case "YEAR":return t.getFullYear()}throw Error("Invalid Parameter for call to EXTRACT");
}},substring:{minParams:2,maxParams:3,evaluate:r=>{if(2===r.length){const [t,l]=r;return null==t||null==l?null:t.toString().substring(l-1)}if(3===r.length){const [t,l,v]=r;return null==t||null==l||null==v?null:0>=v?"":t.toString().substring(l-1,l+v-1)}}},position:{minParams:2,maxParams:2,evaluate:([r,t])=>null==r||null==t?null:t.indexOf(r)+1},trim:{minParams:2,maxParams:3,evaluate:r=>{var t=3===r.length,l=t?r[1]:" ";t=t?r[2]:r[1];if(null==l||null==t)return null;l=`(${c.escapeRegExpString(l)})`;switch(r[0]){case "BOTH":return t.replace(new RegExp(`^${l}*|${l}*$`,
"g"),"");case "LEADING":return t.replace(new RegExp(`^${l}*`,"g"),"");case "TRAILING":return t.replace(new RegExp(`${l}*$`,"g"),"")}throw Error("Invalid Parameter for call to TRIM");}},abs:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:Math.abs(r[0])},ceiling:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:Math.ceil(r[0])},floor:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:Math.floor(r[0])},log:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:Math.log(r[0])},log10:{minParams:1,
maxParams:1,evaluate:r=>null==r[0]?null:Math.log(r[0])*Math.LOG10E},sin:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:Math.sin(r[0])},cos:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:Math.cos(r[0])},tan:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:Math.tan(r[0])},asin:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:Math.asin(r[0])},acos:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:Math.acos(r[0])},atan:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:Math.atan(r[0])},
sign:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:0<r[0]?1:0>r[1]?-1:0},power:{minParams:2,maxParams:2,evaluate:r=>null==r[0]||null==r[1]?null:r[0]**r[1]},mod:{minParams:2,maxParams:2,evaluate:r=>null==r[0]||null==r[1]?null:r[0]%r[1]},round:{minParams:1,maxParams:2,evaluate:r=>{const t=r[0];r=2===r.length?10**r[1]:1;return null==t?null:Math.round(t*r)/r}},truncate:{minParams:1,maxParams:2,evaluate:r=>null==r[0]?null:1===r.length?parseInt(r[0].toFixed(0),10):parseFloat(r[0].toFixed(r[1]))},
char_length:{minParams:1,maxParams:1,evaluate:r=>"string"===typeof r[0]||r[0]instanceof String?r[0].length:0},concat:{minParams:1,maxParams:Infinity,evaluate:r=>{let t="";for(let l=0;l<r.length;l++){if(null==r[l])return null;t+=r[l].toString()}return t}},lower:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:r[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:r[0].toString().toUpperCase()}};p.SqlInterval=z;p.evaluateFunction=function(r,t){const l=y[r.toLowerCase()];
if(null==l)throw Error("Function Not Recognised");if(t.length<l.minParams||t.length>l.maxParams)throw Error(`Invalid Parameter count for call to ${r.toUpperCase()}`);return l.evaluate(t)};p.isStandardized=function(r,t){r=y[r.toLowerCase()];return null!=r&&t>=r.minParams&&t<=r.maxParams};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/core/sql/WhereGrammar":function(){define(["exports","../../chunks/_commonjsHelpers"],function(p,c){var z={exports:{}};(function(r){(function(t,l){r.exports&&
(r.exports=l())})(c.commonjsGlobal,function(){function t(l,v,q,g){this.message=l;this.expected=v;this.found=q;this.location=g;this.name="SyntaxError";"function"===typeof Error.captureStackTrace&&Error.captureStackTrace(this,t)}(function(l,v){function q(){this.constructor=l}q.prototype=v.prototype;l.prototype=new q})(t,Error);t.buildMessage=function(l,v){function q(h){return h.charCodeAt(0).toString(16).toUpperCase()}function g(h){return h.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,
"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(f){return"\\x0"+q(f)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(f){return"\\x"+q(f)})}function k(h){return h.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(f){return"\\x0"+q(f)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(f){return"\\x"+q(f)})}var n={literal:function(h){return'"'+
g(h.text)+'"'},"class":function(h){var f="",b;for(b=0;b<h.parts.length;b++)f+=h.parts[b]instanceof Array?k(h.parts[b][0])+"-"+k(h.parts[b][1]):k(h.parts[b]);return"["+(h.inverted?"^":"")+f+"]"},any:function(h){return"any character"},end:function(h){return"end of input"},other:function(h){return h.description}};return"Expected "+function(h){var f=Array(h.length),b;for(b=0;b<h.length;b++){var a=b;var d=h[b];d=n[d.type](d);f[a]=d}f.sort();if(0<f.length){for(h=b=1;b<f.length;b++)f[b-1]!==f[b]&&(f[h]=
f[b],h++);f.length=h}switch(f.length){case 1:return f[0];case 2:return f[0]+" or "+f[1];default:return f.slice(0,-1).join(", ")+", or "+f[f.length-1]}}(l)+" but "+(v?'"'+g(v)+'"':"end of input")+" found."};return{SyntaxError:t,parse:function(l,v){function q(X,da){return{type:"literal",text:X,ignoreCase:da}}function g(X,da,ca){return{type:"class",parts:X,inverted:da,ignoreCase:ca}}function k(X){var da=$b[X],ca;if(!da){for(ca=X-1;!$b[ca];)ca--;da=$b[ca];for(da={line:da.line,column:da.column};ca<X;)10===
l.charCodeAt(ca)?(da.line++,da.column=1):da.column++,ca++;$b[X]=da}return da}function n(X,da){var ca=k(X),ia=k(da);return{start:{offset:X,line:ca.line,column:ca.column},end:{offset:da,line:ia.line,column:ia.column}}}function h(X){Q<sb||(Q>sb&&(sb=Q,pc=[]),pc.push(X))}function f(){var X=Q;var da=ya();if(da!==J)if(da=a(),da!==J){var ca=ya();ca!==J?X=da:(Q=X,X=J)}else Q=X,X=J;else Q=X,X=J;return X}function b(){var X=Q;var da=a();if(da!==J){var ca=[];var ia=Q;var Aa=ya();if(Aa!==J){var Ha=Ia();if(Ha!==
J){var Ka=ya();if(Ka!==J){var Qa=a();Qa!==J?ia=Aa=[Aa,Ha,Ka,Qa]:(Q=ia,ia=J)}else Q=ia,ia=J}else Q=ia,ia=J}else Q=ia,ia=J;for(;ia!==J;)ca.push(ia),ia=Q,Aa=ya(),Aa!==J?(Ha=Ia(),Ha!==J?(Ka=ya(),Ka!==J?(Qa=a(),Qa!==J?ia=Aa=[Aa,Ha,Ka,Qa]:(Q=ia,ia=J)):(Q=ia,ia=J)):(Q=ia,ia=J)):(Q=ia,ia=J);if(ca!==J){X={type:"expr_list"};da=[da];for(ia=0;ia<ca.length;ia++)da.push(ca[ia][3]);X.value=da}else Q=X,X=J}else Q=X,X=J;return X}function a(){var X=Q;var da=d();if(da!==J){var ca=[];var ia=Q;var Aa=ya();if(Aa!==J){var Ha=
Z();if(Ha!==J){var Ka=ya();if(Ka!==J){var Qa=d();Qa!==J?ia=Aa=[Aa,Ha,Ka,Qa]:(Q=ia,ia=J)}else Q=ia,ia=J}else Q=ia,ia=J}else Q=ia,ia=J;for(;ia!==J;)ca.push(ia),ia=Q,Aa=ya(),Aa!==J?(Ha=Z(),Ha!==J?(Ka=ya(),Ka!==J?(Qa=d(),Qa!==J?ia=Aa=[Aa,Ha,Ka,Qa]:(Q=ia,ia=J)):(Q=ia,ia=J)):(Q=ia,ia=J)):(Q=ia,ia=J);ca!==J?X=da=fb(da,ca):(Q=X,X=J)}else Q=X,X=J;return X}function d(){var X=Q;var da=e();if(da!==J){var ca=[];var ia=Q;var Aa=ya();if(Aa!==J){var Ha=T();if(Ha!==J){var Ka=ya();if(Ka!==J){var Qa=e();Qa!==J?ia=Aa=
[Aa,Ha,Ka,Qa]:(Q=ia,ia=J)}else Q=ia,ia=J}else Q=ia,ia=J}else Q=ia,ia=J;for(;ia!==J;)ca.push(ia),ia=Q,Aa=ya(),Aa!==J?(Ha=T(),Ha!==J?(Ka=ya(),Ka!==J?(Qa=e(),Qa!==J?ia=Aa=[Aa,Ha,Ka,Qa]:(Q=ia,ia=J)):(Q=ia,ia=J)):(Q=ia,ia=J)):(Q=ia,ia=J);ca!==J?X=da=fb(da,ca):(Q=X,X=J)}else Q=X,X=J;return X}function e(){var X=Q;var da=O();if(da===J){da=Q;if(33===l.charCodeAt(Q)){var ca=Ua;Q++}else ca=J,0===za&&h(Ta);if(ca!==J){var ia=Q;za++;if(61===l.charCodeAt(Q)){var Aa=jb;Q++}else Aa=J,0===za&&h(tb);za--;Aa===J?ia=
void 0:(Q=ia,ia=J);ia!==J?da=ca=[ca,ia]:(Q=da,da=J)}else Q=da,da=J}da!==J?(ca=ya(),ca!==J?(ia=e(),ia!==J?X=da={type:"unary_expr",operator:"NOT",expr:ia}:(Q=X,X=J)):(Q=X,X=J)):(Q=X,X=J);if(X===J)if(X=Q,da=A(),da!==J)if(ca=ya(),ca!==J){ca=[];ia=Q;Aa=ya();if(Aa!==J){var Ha=u();if(Ha!==J){var Ka=ya();if(Ka!==J){var Qa=A();Qa!==J?ia=Aa=[Aa,Ha,Ka,Qa]:(Q=ia,ia=J)}else Q=ia,ia=J}else Q=ia,ia=J}else Q=ia,ia=J;if(ia!==J)for(;ia!==J;)ca.push(ia),ia=Q,Aa=ya(),Aa!==J?(Ha=u(),Ha!==J?(Ka=ya(),Ka!==J?(Qa=A(),Qa!==
J?ia=Aa=[Aa,Ha,Ka,Qa]:(Q=ia,ia=J)):(Q=ia,ia=J)):(Q=ia,ia=J)):(Q=ia,ia=J);else ca=J;ca!==J&&(ca={type:"arithmetic",tail:ca});ca===J&&(ca=Q,ia=x(),ia!==J?(Aa=ya(),Aa!==J?(Aa=Ja(),Aa!==J?(Aa=ya(),Aa!==J?(Aa=b(),Aa!==J?(Ha=ya(),Ha!==J?(Ha=La(),Ha!==J?ca=ia={op:ia,right:Aa}:(Q=ca,ca=J)):(Q=ca,ca=J)):(Q=ca,ca=J)):(Q=ca,ca=J)):(Q=ca,ca=J)):(Q=ca,ca=J)):(Q=ca,ca=J),ca===J&&(ca=Q,ia=x(),ia!==J?(Aa=ya(),Aa!==J?(Aa=Ja(),Aa!==J?(Aa=ya(),Aa!==J?(Aa=La(),Aa!==J?ca=ia={op:ia,right:{type:"expr_list",value:[]}}:(Q=
ca,ca=J)):(Q=ca,ca=J)):(Q=ca,ca=J)):(Q=ca,ca=J)):(Q=ca,ca=J),ca===J&&(ca=Q,ia=x(),ia!==J?(Aa=ya(),Aa!==J?(Aa=K(),Aa!==J?ca=ia={op:ia,right:Aa}:(Q=ca,ca=J)):(Q=ca,ca=J)):(Q=ca,ca=J))),ca===J&&(ca=Q,Aa=O(),Aa!==J?(ia=ya(),ia!==J?(ia=aa(),ia!==J?(Ha=ya(),Ha!==J?(Ha=A(),Ha!==J?(Ka=ya(),Ka!==J?(Ka=T(),Ka!==J?(Aa=ya(),Aa!==J?(Aa=A(),Aa!==J?ca=Aa={op:"NOT"+ia,right:{type:"expr_list",value:[Ha,Aa]}}:(Q=ca,ca=J)):(Q=ca,ca=J)):(Q=ca,ca=J)):(Q=ca,ca=J)):(Q=ca,ca=J)):(Q=ca,ca=J)):(Q=ca,ca=J)):(Q=ca,ca=J)):(Q=
ca,ca=J),ca===J&&(ca=Q,Aa=aa(),Aa!==J?(ia=ya(),ia!==J?(ia=A(),ia!==J?(Ha=ya(),Ha!==J?(Ha=T(),Ha!==J?(Ka=ya(),Ka!==J?(Ka=A(),Ka!==J?ca=Aa={op:Aa,right:{type:"expr_list",value:[ia,Ka]}}:(Q=ca,ca=J)):(Q=ca,ca=J)):(Q=ca,ca=J)):(Q=ca,ca=J)):(Q=ca,ca=J)):(Q=ca,ca=J)):(Q=ca,ca=J)),ca===J&&(ca=Q,ia=N(),ia!==J?(Aa=ya(),Aa!==J?(Aa=O(),Aa!==J?(Aa=ya(),Aa!==J?(Aa=A(),Aa!==J?ca=ia={op:ia+"NOT",right:Aa}:(Q=ca,ca=J)):(Q=ca,ca=J)):(Q=ca,ca=J)):(Q=ca,ca=J)):(Q=ca,ca=J),ca===J&&(ca=Q,ia=N(),ia!==J?(Aa=ya(),Aa!==J?
(Aa=A(),Aa!==J?ca=ia={op:ia,right:Aa}:(Q=ca,ca=J)):(Q=ca,ca=J)):(Q=ca,ca=J)),ca===J&&(ca=Q,ia=m(),ia!==J?(Aa=ya(),Aa!==J?(Aa=M(),Aa!==J?(Ha=ya(),Ha!==J?(Ha=Q,l.substr(Q,6).toLowerCase()===ud?(Ka=l.substr(Q,6),Q+=6):(Ka=J,0===za&&h(vd)),Ka!==J?(Ka=Q,za++,Qa=F(),za--,Qa===J?Ka=void 0:(Q=Ka,Ka=J),Ka!==J?Ha="ESCAPE":(Q=Ha,Ha=J)):(Q=Ha,Ha=J),Ha!==J?(Ha=ya(),Ha!==J?(Ha=V(),Ha!==J?ca=ia={op:ia,right:Aa,escape:Ha.value}:(Q=ca,ca=J)):(Q=ca,ca=J)):(Q=ca,ca=J)):(Q=ca,ca=J)):(Q=ca,ca=J)):(Q=ca,ca=J)):(Q=ca,ca=
J),ca===J&&(ca=Q,ia=m(),ia!==J?(Aa=ya(),Aa!==J?(Aa=M(),Aa!==J?ca=ia={op:ia,right:Aa,escape:""}:(Q=ca,ca=J)):(Q=ca,ca=J)):(Q=ca,ca=J))))));ca===J&&(ca=null);ca!==J?(X=da,da=ca,""==da||void 0==da||null==da?da=X:(ca=null,da=ca="arithmetic"==da.type?fb(X,da.tail):gb(da.op,X,da.right,da.escape)),X=da):(Q=X,X=J)}else Q=X,X=J;else Q=X,X=J;return X}function u(){if(l.substr(Q,2)===Ra){var X=Ra;Q+=2}else X=J,0===za&&h(Bb);X===J&&(62===l.charCodeAt(Q)?(X=ja,Q++):(X=J,0===za&&h(na)),X===J&&(l.substr(Q,2)===ma?
(X=ma,Q+=2):(X=J,0===za&&h(ta)),X===J&&(l.substr(Q,2)===Da?(X=Da,Q+=2):(X=J,0===za&&h(Ea)),X===J&&(60===l.charCodeAt(Q)?(X=Na,Q++):(X=J,0===za&&h(Pa)),X===J&&(61===l.charCodeAt(Q)?(X=jb,Q++):(X=J,0===za&&h(tb)),X===J&&(l.substr(Q,2)===$a?(X=$a,Q+=2):(X=J,0===za&&h(ab))))))));return X}function m(){var X=X=Q;var da=O();if(da!==J){var ca=ya();if(ca!==J){var ia=U();ia!==J?X=da=[da,ca,ia]:(Q=X,X=J)}else Q=X,X=J}else Q=X,X=J;X!==J&&(X=X[0]+" "+X[2]);X===J&&(X=U());return X}function x(){var X=X=Q;var da=
O();if(da!==J){var ca=ya();if(ca!==J){var ia=pa();ia!==J?X=da=[da,ca,ia]:(Q=X,X=J)}else Q=X,X=J}else Q=X,X=J;X!==J&&(X=X[0]+" "+X[2]);X===J&&(X=pa());return X}function A(){var X=Q;var da=B();if(da!==J){var ca=[];var ia=Q;var Aa=ya();if(Aa!==J){var Ha=D();if(Ha!==J){var Ka=ya();if(Ka!==J){var Qa=B();Qa!==J?ia=Aa=[Aa,Ha,Ka,Qa]:(Q=ia,ia=J)}else Q=ia,ia=J}else Q=ia,ia=J}else Q=ia,ia=J;for(;ia!==J;)ca.push(ia),ia=Q,Aa=ya(),Aa!==J?(Ha=D(),Ha!==J?(Ka=ya(),Ka!==J?(Qa=B(),Qa!==J?ia=Aa=[Aa,Ha,Ka,Qa]:(Q=ia,
ia=J)):(Q=ia,ia=J)):(Q=ia,ia=J)):(Q=ia,ia=J);ca!==J?X=da=fb(da,ca):(Q=X,X=J)}else Q=X,X=J;return X}function D(){if(43===l.charCodeAt(Q)){var X=Va;Q++}else X=J,0===za&&h(hb);X===J&&(45===l.charCodeAt(Q)?(X=lb,Q++):(X=J,0===za&&h(qc)));return X}function B(){var X=Q;var da=w();if(da!==J){var ca=[];var ia=Q;var Aa=ya();if(Aa!==J){var Ha=C();if(Ha!==J){var Ka=ya();if(Ka!==J){var Qa=w();Qa!==J?ia=Aa=[Aa,Ha,Ka,Qa]:(Q=ia,ia=J)}else Q=ia,ia=J}else Q=ia,ia=J}else Q=ia,ia=J;for(;ia!==J;)ca.push(ia),ia=Q,Aa=
ya(),Aa!==J?(Ha=C(),Ha!==J?(Ka=ya(),Ka!==J?(Qa=w(),Qa!==J?ia=Aa=[Aa,Ha,Ka,Qa]:(Q=ia,ia=J)):(Q=ia,ia=J)):(Q=ia,ia=J)):(Q=ia,ia=J);ca!==J?X=da=fb(da,ca):(Q=X,X=J)}else Q=X,X=J;return X}function C(){if(42===l.charCodeAt(Q)){var X=wd;Q++}else X=J,0===za&&h(xd);X===J&&(47===l.charCodeAt(Q)?(X=yd,Q++):(X=J,0===za&&h(zd)));return X}function w(){var X=V();if(X===J){var da=Q;var ca=Q;var ia=sa();if(ia!==J){var Aa=ua();if(Aa!==J){var Ha=xa();Ha!==J?ca=ia=parseFloat(ia+Aa+Ha):(Q=ca,ca=J)}else Q=ca,ca=J}else Q=
ca,ca=J;ca===J&&(ca=Q,ia=sa(),ia!==J?(Aa=ua(),Aa!==J?ca=ia=parseFloat(ia+Aa):(Q=ca,ca=J)):(Q=ca,ca=J),ca===J&&(ca=Q,ia=sa(),ia!==J?(Aa=xa(),Aa!==J?ca=ia=parseFloat(ia+Aa):(Q=ca,ca=J)):(Q=ca,ca=J),ca===J&&(ca=Q,ia=sa(),ia!==J&&(ia=parseFloat(ia)),ca=ia)));var Ka=ca;if(Ka!==J){var Qa=Q;za++;var Ad=I();za--;Ad===J?Qa=void 0:(Q=Qa,Qa=J);Qa!==J?da=Ka={type:"number",value:Ka}:(Q=da,da=J)}else Q=da,da=J;X=da;if(X===J){var Mb=Q;var Cb=Q;if(l.substr(Q,4).toLowerCase()===Bd){var ac=l.substr(Q,4);Q+=4}else ac=
J,0===za&&h(Cd);if(ac!==J){var Nb=Q;za++;var Dd=F();za--;Dd===J?Nb=void 0:(Q=Nb,Nb=J);Nb!==J?Cb=ac=[ac,Nb]:(Q=Cb,Cb=J)}else Q=Cb,Cb=J;var yb=Cb;yb!==J&&(yb={type:"bool",value:!0});Mb=yb;if(Mb===J){Mb=Q;var Db=Q;if(l.substr(Q,5).toLowerCase()===Ed){var bc=l.substr(Q,5);Q+=5}else bc=J,0===za&&h(Fd);if(bc!==J){var Ob=Q;za++;var Gd=F();za--;Gd===J?Ob=void 0:(Q=Ob,Ob=J);Ob!==J?Db=bc=[bc,Ob]:(Q=Db,Db=J)}else Q=Db,Db=J;yb=Db;yb!==J&&(yb={type:"bool",value:!1});Mb=yb}X=Mb;if(X===J){var Eb=Q;if(l.substr(Q,
4).toLowerCase()===Hd){var cc=l.substr(Q,4);Q+=4}else cc=J,0===za&&h(Id);if(cc!==J){var Pb=Q;za++;var Jd=F();za--;Jd===J?Pb=void 0:(Q=Pb,Pb=J);Pb!==J?Eb=cc=[cc,Pb]:(Q=Eb,Eb=J)}else Q=Eb,Eb=J;var rc=Eb;rc!==J&&(rc={type:"null",value:null});X=rc;if(X===J){var wb=Q;var Fb=Q;if(l.substr(Q,4).toLowerCase()===Kd){var sc=l.substr(Q,4);Q+=4}else sc=J,0===za&&h(Ld);if(sc!==J){var dc=Q;za++;var Md=F();za--;Md===J?dc=void 0:(Q=dc,dc=J);dc!==J?Fb=sc="DATE":(Q=Fb,Fb=J)}else Q=Fb,Fb=J;var Rc=Fb;if(Rc!==J){var Nd=
ya();if(Nd!==J){var Sc=M();Sc!==J?wb=Rc={type:"date",value:Sc.value}:(Q=wb,wb=J)}else Q=wb,wb=J}else Q=wb,wb=J;X=wb;if(X===J){var xb=Q;var Gb=Q;if(l.substr(Q,9).toLowerCase()===Od){var tc=l.substr(Q,9);Q+=9}else tc=J,0===za&&h(Pd);if(tc!==J){var ec=Q;za++;var Qd=F();za--;Qd===J?ec=void 0:(Q=ec,ec=J);ec!==J?Gb=tc="TIMESTAMP":(Q=Gb,Gb=J)}else Q=Gb,Gb=J;var Tc=Gb;if(Tc!==J){var Rd=ya();if(Rd!==J){var Uc=M();Uc!==J?xb=Tc={type:"timestamp",value:Uc.value}:(Q=xb,xb=J)}else Q=xb,xb=J}else Q=xb,xb=J;X=xb;
if(X===J){var Xa=Q;var Qb=fa();if(Qb!==J){var uc=ya();if(uc!==J){if(45===l.charCodeAt(Q)){var ub=lb;Q++}else ub=J,0===za&&h(qc);ub===J&&(43===l.charCodeAt(Q)?(ub=Va,Q++):(ub=J,0===za&&h(hb)));if(ub!==J){var vc=ya();if(vc!==J){var Rb=M();if(Rb!==J){var Sd=ya();if(Sd!==J){var Vc=L();Vc!==J?Xa=Qb={type:"interval",value:Rb,qualifier:Vc,op:ub}:(Q=Xa,Xa=J)}else Q=Xa,Xa=J}else Q=Xa,Xa=J}else Q=Xa,Xa=J}else Q=Xa,Xa=J}else Q=Xa,Xa=J}else Q=Xa,Xa=J;Xa===J&&(Xa=Q,Qb=fa(),Qb!==J?(uc=ya(),uc!==J?(ub=M(),ub!==
J?(vc=ya(),vc!==J?(Rb=L(),Rb!==J?Xa=Qb={type:"interval",value:ub,qualifier:Rb,op:""}:(Q=Xa,Xa=J)):(Q=Xa,Xa=J)):(Q=Xa,Xa=J)):(Q=Xa,Xa=J)):(Q=Xa,Xa=J));X=Xa}}}}}}var Wa=X;if(Wa===J){var db=Q;var Hb=Q;if(l.substr(Q,7).toLowerCase()===Td){var wc=l.substr(Q,7);Q+=7}else wc=J,0===za&&h(Ud);if(wc!==J){var fc=Q;za++;var Vd=F();za--;Vd===J?fc=void 0:(Q=fc,fc=J);fc!==J?Hb=wc="EXTRACT":(Q=Hb,Hb=J)}else Q=Hb,Hb=J;var Wc=Hb;if(Wc!==J){var Wd=ya();if(Wd!==J){var Xd=Ja();if(Xd!==J){var Yd=ya();if(Yd!==J){var pb=
ha();pb===J&&(pb=la(),pb===J&&(pb=qa(),pb===J&&(pb=va(),pb===J&&(pb=wa(),pb===J&&(pb=Ca())))));var Xc=pb;if(Xc!==J){var Zd=ya();if(Zd!==J){var $d=Y();if($d!==J){var ae=ya();if(ae!==J){var Yc=a();if(Yc!==J){var be=ya();if(be!==J){var ce=La();ce!==J?db=Wc={type:"function",name:"extract",args:{type:"expr_list",value:[{type:"string",value:Xc},Yc]}}:(Q=db,db=J)}else Q=db,db=J}else Q=db,db=J}else Q=db,db=J}else Q=db,db=J}else Q=db,db=J}else Q=db,db=J}else Q=db,db=J}else Q=db,db=J}else Q=db,db=J}else Q=
db,db=J;Wa=db;if(Wa===J){var bb=Q;var Ib=Q;if(l.substr(Q,9).toLowerCase()===de){var xc=l.substr(Q,9);Q+=9}else xc=J,0===za&&h(ee);if(xc!==J){var gc=Q;za++;var fe=F();za--;fe===J?gc=void 0:(Q=gc,gc=J);gc!==J?Ib=xc="SUBSTRING":(Q=Ib,Ib=J)}else Q=Ib,Ib=J;var Zc=Ib;if(Zc!==J){var ge=ya();if(ge!==J){var he=Ja();if(he!==J){var ie=ya();if(ie!==J){var yc=a();if(yc!==J){var je=ya();if(je!==J){var ke=Y();if(ke!==J){var le=ya();if(le!==J){var zc=a();if(zc!==J){var me=ya();if(me!==J){var mb=Q;var Jb=Q;if(l.substr(Q,
3).toLowerCase()===ne){var Ac=l.substr(Q,3);Q+=3}else Ac=J,0===za&&h(oe);if(Ac!==J){var hc=Q;za++;var pe=F();za--;pe===J?hc=void 0:(Q=hc,hc=J);hc!==J?Jb=Ac="FOR":(Q=Jb,Jb=J)}else Q=Jb,Jb=J;var Sb=Jb;if(Sb!==J){var $c=ya();if($c!==J){var ad=a();if(ad!==J){var bd=ya();bd!==J?mb=Sb=[Sb,$c,ad,bd]:(Q=mb,mb=J)}else Q=mb,mb=J}else Q=mb,mb=J}else Q=mb,mb=J;mb===J&&(mb=null);mb!==J?(Sb=La(),Sb!==J?bb=Zc={type:"function",name:"substring",args:{type:"expr_list",value:mb?[yc,zc,mb[2]]:[yc,zc]}}:(Q=bb,bb=J)):
(Q=bb,bb=J)}else Q=bb,bb=J}else Q=bb,bb=J}else Q=bb,bb=J}else Q=bb,bb=J}else Q=bb,bb=J}else Q=bb,bb=J}else Q=bb,bb=J}else Q=bb,bb=J}else Q=bb,bb=J}else Q=bb,bb=J;Wa=bb;if(Wa===J){var Oa=Q;var Tb=ba();if(Tb!==J){var Bc=ya();if(Bc!==J){var Cc=Ja();if(Cc!==J){var Dc=ya();if(Dc!==J){var qb=G();qb===J&&(qb=null);if(qb!==J){var Ec=ya();if(Ec!==J){var Ub=a();if(Ub!==J){var Fc=ya();if(Fc!==J){var Gc=Y();if(Gc!==J){var qe=ya();if(qe!==J){var cd=a();if(cd!==J){var re=ya();if(re!==J){var se=La();se!==J?Oa=Tb=
{type:"function",name:"trim",args:{type:"expr_list",value:[{type:"string",value:null==qb?"BOTH":qb},Ub,cd]}}:(Q=Oa,Oa=J)}else Q=Oa,Oa=J}else Q=Oa,Oa=J}else Q=Oa,Oa=J}else Q=Oa,Oa=J}else Q=Oa,Oa=J}else Q=Oa,Oa=J}else Q=Oa,Oa=J}else Q=Oa,Oa=J}else Q=Oa,Oa=J}else Q=Oa,Oa=J}else Q=Oa,Oa=J}else Q=Oa,Oa=J;Oa===J&&(Oa=Q,Tb=ba(),Tb!==J?(Bc=ya(),Bc!==J?(Cc=Ja(),Cc!==J?(Dc=ya(),Dc!==J?(qb=G(),qb===J&&(qb=null),qb!==J?(Ec=ya(),Ec!==J?(Ub=a(),Ub!==J?(Fc=ya(),Fc!==J?(Gc=La(),Gc!==J?Oa=Tb={type:"function",name:"trim",
args:{type:"expr_list",value:[{type:"string",value:null==qb?"BOTH":qb},Ub]}}:(Q=Oa,Oa=J)):(Q=Oa,Oa=J)):(Q=Oa,Oa=J)):(Q=Oa,Oa=J)):(Q=Oa,Oa=J)):(Q=Oa,Oa=J)):(Q=Oa,Oa=J)):(Q=Oa,Oa=J)):(Q=Oa,Oa=J));Wa=Oa;if(Wa===J){var eb=Q;var Kb=Q;if(l.substr(Q,8).toLowerCase()===te){var Hc=l.substr(Q,8);Q+=8}else Hc=J,0===za&&h(ue);if(Hc!==J){var ic=Q;za++;var ve=F();za--;ve===J?ic=void 0:(Q=ic,ic=J);ic!==J?Kb=Hc="POSITION":(Q=Kb,Kb=J)}else Q=Kb,Kb=J;var dd=Kb;if(dd!==J){var we=ya();if(we!==J){var xe=Ja();if(xe!==
J){var ye=ya();if(ye!==J){var ed=a();if(ed!==J){var ze=ya();if(ze!==J){var Ae=pa();if(Ae!==J){var Be=ya();if(Be!==J){var fd=a();if(fd!==J){var Ce=ya();if(Ce!==J){var De=La();De!==J?eb=dd={type:"function",name:"position",args:{type:"expr_list",value:[ed,fd]}}:(Q=eb,eb=J)}else Q=eb,eb=J}else Q=eb,eb=J}else Q=eb,eb=J}else Q=eb,eb=J}else Q=eb,eb=J}else Q=eb,eb=J}else Q=eb,eb=J}else Q=eb,eb=J}else Q=eb,eb=J}else Q=eb,eb=J;Wa=eb;if(Wa===J){var kb=Q;var Vb;var rb=Q;rb=Vb=E();if(rb===J)if(rb=Q,96===l.charCodeAt(Q)?
(Vb=gd,Q++):(Vb=J,0===za&&h(hd)),Vb!==J){var jc=[];if(id.test(l.charAt(Q))){var vb=l.charAt(Q);Q++}else vb=J,0===za&&h(jd);if(vb!==J)for(;vb!==J;)jc.push(vb),id.test(l.charAt(Q))?(vb=l.charAt(Q),Q++):(vb=J,0===za&&h(jd));else jc=J;jc!==J?(96===l.charCodeAt(Q)?(vb=gd,Q++):(vb=J,0===za&&h(hd)),vb!==J?rb=Vb=jc.join(""):(Q=rb,rb=J)):(Q=rb,rb=J)}else Q=rb,rb=J;var Ic=rb;if(Ic!==J){var Ee=ya();if(Ee!==J){var Fe=Ja();if(Fe!==J){var Ge=ya();if(Ge!==J){var Wb=b();Wb===J&&(Wb=null);if(Wb!==J){var He=ya();if(He!==
J){var Ie=La();Ie!==J?kb=Ic={type:"function",name:Ic,args:Wb?Wb:{type:"expr_list",value:[]}}:(Q=kb,kb=J)}else Q=kb,kb=J}else Q=kb,kb=J}else Q=kb,kb=J}else Q=kb,kb=J}else Q=kb,kb=J}else Q=kb,kb=J;Wa=kb;if(Wa===J){var nb;var Sa=Q;var Xb=Ba();if(Xb!==J){var Jc=ya();if(Jc!==J){var Yb=a();if(Yb!==J){var Kc=ya();if(Kc!==J){var zb=[];for(nb=ea();nb!==J;)zb.push(nb),nb=ea();if(zb!==J)if(nb=ya(),nb!==J){var kc=Fa();kc!==J?Sa=Xb={type:"case_expression",format:"simple",operand:Yb,clauses:zb,else:null}:(Q=Sa,
Sa=J)}else Q=Sa,Sa=J;else Q=Sa,Sa=J}else Q=Sa,Sa=J}else Q=Sa,Sa=J}else Q=Sa,Sa=J}else Q=Sa,Sa=J;if(Sa===J)if(Sa=Q,Xb=Ba(),Xb!==J)if(Jc=ya(),Jc!==J)if(Yb=a(),Yb!==J)if(Kc=ya(),Kc!==J){zb=[];for(nb=ea();nb!==J;)zb.push(nb),nb=ea();if(zb!==J)if(nb=ya(),nb!==J)if(kc=ka(),kc!==J){var Je=ya();if(Je!==J){var Ke=Fa();Ke!==J?Sa=Xb={type:"case_expression",format:"simple",operand:Yb,clauses:zb,else:kc.value}:(Q=Sa,Sa=J)}else Q=Sa,Sa=J}else Q=Sa,Sa=J;else Q=Sa,Sa=J;else Q=Sa,Sa=J}else Q=Sa,Sa=J;else Q=Sa,Sa=
J;else Q=Sa,Sa=J;else Q=Sa,Sa=J;var Lc=Sa;if(Lc===J){var ob;var Ya=Q;var Zb=Ba();if(Zb!==J){var Mc=ya();if(Mc!==J){var Ab=[];for(ob=W();ob!==J;)Ab.push(ob),ob=W();if(Ab!==J)if(ob=ya(),ob!==J){var lc=Fa();lc!==J?Ya=Zb={type:"case_expression",format:"searched",clauses:Ab,else:null}:(Q=Ya,Ya=J)}else Q=Ya,Ya=J;else Q=Ya,Ya=J}else Q=Ya,Ya=J}else Q=Ya,Ya=J;if(Ya===J)if(Ya=Q,Zb=Ba(),Zb!==J)if(Mc=ya(),Mc!==J){Ab=[];for(ob=W();ob!==J;)Ab.push(ob),ob=W();if(Ab!==J)if(ob=ya(),ob!==J)if(lc=ka(),lc!==J){var Le=
ya();if(Le!==J){var Me=Fa();Me!==J?Ya=Zb={type:"case_expression",format:"searched",clauses:Ab,else:lc.value}:(Q=Ya,Ya=J)}else Q=Ya,Ya=J}else Q=Ya,Ya=J;else Q=Ya,Ya=J;else Q=Ya,Ya=J}else Q=Ya,Ya=J;else Q=Ya,Ya=J;Lc=Ya}Wa=Lc;if(Wa===J){var mc;var Lb=Q;var kd=I();if(kd!==J){var Nc=[];for(mc=H();mc!==J;)Nc.push(mc),mc=H();Nc!==J?Lb=kd+=Nc.join(""):(Q=Lb,Lb=J)}else Q=Lb,Lb=J;var nc=Lb;if(nc!==J){var Oc=nc;nc=/^CURRENT_DATE$/i.test(Oc)?{type:"current_time",mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(Oc)?{type:"current_time",
mode:"timestamp"}:{type:"column_ref",table:"",column:Oc}}Wa=nc;if(Wa===J&&(Wa=K(),Wa===J)){Wa=Q;var ld=Ja();if(ld!==J){var Ne=ya();if(Ne!==J){var Pc=a();if(Pc!==J){var Oe=ya();if(Oe!==J){var Pe=La();Pe!==J?(Pc.paren=!0,Wa=ld=Pc):(Q=Wa,Wa=J)}else Q=Wa,Wa=J}else Q=Wa,Wa=J}else Q=Wa,Wa=J}else Q=Wa,Wa=J}}}}}}}}return Wa}function E(){var X;var da=Q;var ca=I();if(ca!==J){var ia=[];for(X=F();X!==J;)ia.push(X),X=F();ia!==J?da=ca+=ia.join(""):(Q=da,da=J)}else Q=da,da=J;return da}function I(){if(Qe.test(l.charAt(Q))){var X=
l.charAt(Q);Q++}else X=J,0===za&&h(Re);return X}function F(){if(Se.test(l.charAt(Q))){var X=l.charAt(Q);Q++}else X=J,0===za&&h(Te);return X}function H(){if(Ue.test(l.charAt(Q))){var X=l.charAt(Q);Q++}else X=J,0===za&&h(Ve);return X}function K(){var X=Q;if(64===l.charCodeAt(Q)){var da=We;Q++}else da=J,0===za&&h(Xe);if(da!==J){var ca=E();ca!==J?X=da=[da,ca]:(Q=X,X=J)}else Q=X,X=J;X!==J&&(X={type:"param",value:X[1]});return X}function G(){var X=Q;if(l.substr(Q,7).toLowerCase()===Ye){var da=l.substr(Q,
7);Q+=7}else da=J,0===za&&h(Ze);if(da!==J){da=Q;za++;var ca=F();za--;ca===J?da=void 0:(Q=da,da=J);da!==J?X="LEADING":(Q=X,X=J)}else Q=X,X=J;X===J&&(X=Q,l.substr(Q,8).toLowerCase()===$e?(da=l.substr(Q,8),Q+=8):(da=J,0===za&&h(af)),da!==J?(da=Q,za++,ca=F(),za--,ca===J?da=void 0:(Q=da,da=J),da!==J?X="TRAILING":(Q=X,X=J)):(Q=X,X=J),X===J&&(X=Q,l.substr(Q,4).toLowerCase()===bf?(da=l.substr(Q,4),Q+=4):(da=J,0===za&&h(cf)),da!==J?(da=Q,za++,ca=F(),za--,ca===J?da=void 0:(Q=da,da=J),da!==J?X="BOTH":(Q=X,X=
J)):(Q=X,X=J)));return X}function L(){var X=Q;var da=Q;var ca=P();if(ca!==J){var ia=ya();if(ia!==J)if(ia=Ja(),ia!==J)if(ia=ya(),ia!==J)if(ia=S(),ia!==J){var Aa=ya();Aa!==J?(Aa=La(),Aa!==J?da=ca={type:"interval-period",period:ca.value,precision:ia,secondary:null}:(Q=da,da=J)):(Q=da,da=J)}else Q=da,da=J;else Q=da,da=J;else Q=da,da=J;else Q=da,da=J}else Q=da,da=J;da===J&&(da=Q,ca=P(),ca!==J&&(ca=md(ca)),da=ca);if(da!==J)if(ca=ya(),ca!==J)if(ca=Q,l.substr(Q,2).toLowerCase()===df?(ia=l.substr(Q,2),Q+=
2):(ia=J,0===za&&h(ef)),ia!==J?(ia=Q,za++,Aa=F(),za--,Aa===J?ia=void 0:(Q=ia,ia=J),ia!==J?ca="TO":(Q=ca,ca=J)):(Q=ca,ca=J),ca!==J)if(ca=ya(),ca!==J){ca=Q;ia=P();ia!==J&&(ia={type:"interval-period",period:ia.value,precision:null,secondary:null});ca=ia;if(ca===J){ca=Q;ia=Ca();if(ia!==J)if(ia=ya(),ia!==J)if(ia=Ja(),ia!==J)if(ia=ya(),ia!==J)if(ia=S(),ia!==J)if(Aa=ya(),Aa!==J)if(Aa=Ia(),Aa!==J)if(Aa=ya(),Aa!==J)if(Aa=R(),Aa!==J){var Ha=ya();Ha!==J?(Ha=La(),Ha!==J?ca=ia=nd(ia,Aa):(Q=ca,ca=J)):(Q=ca,ca=
J)}else Q=ca,ca=J;else Q=ca,ca=J;else Q=ca,ca=J;else Q=ca,ca=J;else Q=ca,ca=J;else Q=ca,ca=J;else Q=ca,ca=J;else Q=ca,ca=J;else Q=ca,ca=J;ca===J&&(ca=Q,ia=Ca(),ia!==J?(ia=ya(),ia!==J?(ia=Ja(),ia!==J?(ia=ya(),ia!==J?(ia=S(),ia!==J?(Aa=ya(),Aa!==J?(Aa=La(),Aa!==J?ca=ia={type:"interval-period",period:"second",precision:ia,secondary:null}:(Q=ca,ca=J)):(Q=ca,ca=J)):(Q=ca,ca=J)):(Q=ca,ca=J)):(Q=ca,ca=J)):(Q=ca,ca=J)):(Q=ca,ca=J),ca===J&&(ca=Q,ia=Ca(),ia!==J&&(ia={type:"interval-period",period:"second",
precision:null,secondary:null}),ca=ia))}ca!==J?X=da={type:"interval-qualifier",start:da,end:ca}:(Q=X,X=J)}else Q=X,X=J;else Q=X,X=J;else Q=X,X=J;else Q=X,X=J;X===J&&(X=Q,ca=P(),ca!==J?(da=ya(),da!==J?(da=Ja(),da!==J?(da=ya(),da!==J?(da=R(),da!==J?(ia=ya(),ia!==J?(ia=La(),ia!==J?X=ca={type:"interval-period",period:ca.value,precision:da,secondary:null}:(Q=X,X=J)):(Q=X,X=J)):(Q=X,X=J)):(Q=X,X=J)):(Q=X,X=J)):(Q=X,X=J)):(Q=X,X=J),X===J&&(X=Q,ca=P(),ca!==J&&(ca=md(ca)),X=ca,X===J&&(X=Q,ca=Ca(),ca!==J?(da=
ya(),da!==J?(da=Ja(),da!==J?(da=ya(),da!==J?(da=S(),da!==J?(ia=ya(),ia!==J?(ia=Ia(),ia!==J?(ca=ya(),ca!==J?(ca=R(),ca!==J?(ia=ya(),ia!==J?(ia=La(),ia!==J?X=ca=nd(da,ca):(Q=X,X=J)):(Q=X,X=J)):(Q=X,X=J)):(Q=X,X=J)):(Q=X,X=J)):(Q=X,X=J)):(Q=X,X=J)):(Q=X,X=J)):(Q=X,X=J)):(Q=X,X=J)):(Q=X,X=J),X===J&&(X=Q,ca=Ca(),ca!==J?(da=ya(),da!==J?(da=Ja(),da!==J?(da=ya(),da!==J?(da=R(),da!==J?(ia=ya(),ia!==J?(ia=La(),ia!==J?X=ca={type:"interval-period",period:"second",precision:da,secondary:null}:(Q=X,X=J)):(Q=X,
X=J)):(Q=X,X=J)):(Q=X,X=J)):(Q=X,X=J)):(Q=X,X=J)):(Q=X,X=J),X===J&&(X=Q,ca=Ca(),ca!==J&&(ca={type:"interval-period",period:"second",precision:null,secondary:null}),X=ca)))));return X}function P(){var X=Q;X=qa();X!==J&&(X={type:"string",value:"day"});X===J&&(X=Q,X=va(),X!==J&&(X={type:"string",value:"hour"}),X===J&&(X=Q,X=wa(),X!==J&&(X={type:"string",value:"minute"}),X===J&&(X=Q,X=la(),X!==J&&(X={type:"string",value:"month"}),X===J&&(X=Q,X=ha(),X!==J&&(X={type:"string",value:"year"})))));return X}
function R(){var X=oa();X!==J&&(X=parseFloat(X));return X}function S(){var X=oa();X!==J&&(X=parseFloat(X));return X}function M(){var X=V();X===J&&(X=K());return X}function V(){var X=Q;if(39===l.charCodeAt(Q)){var da=od;Q++}else da=J,0===za&&h(pd);da===J&&(l.substr(Q,2)===qd?(da=qd,Q+=2):(da=J,0===za&&h(ff)));if(da!==J){da=[];var ca=Q;l.substr(Q,2)===oc?(ca=oc,Q+=2):(ca=J,0===za&&h(rd));ca!==J&&(ca="'");ca===J&&(sd.test(l.charAt(Q))?(ca=l.charAt(Q),Q++):(ca=J,0===za&&h(td)));for(;ca!==J;)da.push(ca),
ca=Q,l.substr(Q,2)===oc?(ca=oc,Q+=2):(ca=J,0===za&&h(rd)),ca!==J&&(ca="'"),ca===J&&(sd.test(l.charAt(Q))?(ca=l.charAt(Q),Q++):(ca=J,0===za&&h(td)));da!==J?(39===l.charCodeAt(Q)?(ca=od,Q++):(ca=J,0===za&&h(pd)),ca!==J?X=da={type:"string",value:da.join("")}:(Q=X,X=J)):(Q=X,X=J)}else Q=X,X=J;return X}function W(){var X=Q;var da=Ma();if(da!==J)if(da=ya(),da!==J)if(da=a(),da!==J){var ca=ya();ca!==J?(ca=Ga(),ca!==J?(ca=ya(),ca!==J?(ca=a(),ca!==J?X=da={type:"when_clause",operand:da,value:ca}:(Q=X,X=J)):
(Q=X,X=J)):(Q=X,X=J)):(Q=X,X=J)}else Q=X,X=J;else Q=X,X=J;else Q=X,X=J;return X}function ea(){var X=Q;var da=Ma();if(da!==J)if(da=ya(),da!==J)if(da=a(),da!==J){var ca=ya();ca!==J?(ca=Ga(),ca!==J?(ca=ya(),ca!==J?(ca=a(),ca!==J?X=da={type:"when_clause",operand:da,value:ca}:(Q=X,X=J)):(Q=X,X=J)):(Q=X,X=J)):(Q=X,X=J)}else Q=X,X=J;else Q=X,X=J;else Q=X,X=J;return X}function ka(){var X=Q;var da=Q;if(l.substr(Q,4).toLowerCase()===gf){var ca=l.substr(Q,4);Q+=4}else ca=J,0===za&&h(hf);if(ca!==J){ca=Q;za++;
var ia=F();za--;ia===J?ca=void 0:(Q=ca,ca=J);ca!==J?da="ELSE":(Q=da,da=J)}else Q=da,da=J;da!==J?(da=ya(),da!==J?(da=a(),da!==J?X={type:"else_clause",value:da}:(Q=X,X=J)):(Q=X,X=J)):(Q=X,X=J);return X}function sa(){var X=oa();if(X===J){X=Q;if(45===l.charCodeAt(Q)){var da=lb;Q++}else da=J,0===za&&h(qc);da===J&&(43===l.charCodeAt(Q)?(da=Va,Q++):(da=J,0===za&&h(hb)));if(da!==J){var ca=oa();ca!==J?X=da=da[0]+ca:(Q=X,X=J)}else Q=X,X=J}return X}function ua(){var X=Q;if(46===l.charCodeAt(Q)){var da=jf;Q++}else da=
J,0===za&&h(kf);da!==J?(da=oa(),da===J&&(da=null),da!==J?X="."+(null!=da?da:""):(Q=X,X=J)):(Q=X,X=J);return X}function xa(){var X;var da=X=Q;if(lf.test(l.charAt(Q))){var ca=l.charAt(Q);Q++}else ca=J,0===za&&h(mf);ca!==J?(nf.test(l.charAt(Q))?(ca=l.charAt(Q),Q++):(ca=J,0===za&&h(of)),ca===J&&(ca=null),ca!==J?da="e"+(null===ca?"":ca):(Q=da,da=J)):(Q=da,da=J);da!==J?(ca=oa(),ca!==J?X=da+ca:(Q=X,X=J)):(Q=X,X=J);return X}function oa(){var X=[];var da=ra();if(da!==J)for(;da!==J;)X.push(da),da=ra();else X=
J;X!==J&&(X=X.join(""));return X}function ra(){if(pf.test(l.charAt(Q))){var X=l.charAt(Q);Q++}else X=J,0===za&&h(qf);return X}function pa(){var X=Q;if(l.substr(Q,2).toLowerCase()===rf){var da=l.substr(Q,2);Q+=2}else da=J,0===za&&h(sf);if(da!==J){da=Q;za++;var ca=F();za--;ca===J?da=void 0:(Q=da,da=J);da!==J?X="IN":(Q=X,X=J)}else Q=X,X=J;return X}function N(){var X=Q;if(l.substr(Q,2).toLowerCase()===tf){var da=l.substr(Q,2);Q+=2}else da=J,0===za&&h(uf);if(da!==J){da=Q;za++;var ca=F();za--;ca===J?da=
void 0:(Q=da,da=J);da!==J?X="IS":(Q=X,X=J)}else Q=X,X=J;return X}function U(){var X=Q;if(l.substr(Q,4).toLowerCase()===vf){var da=l.substr(Q,4);Q+=4}else da=J,0===za&&h(wf);if(da!==J){da=Q;za++;var ca=F();za--;ca===J?da=void 0:(Q=da,da=J);da!==J?X="LIKE":(Q=X,X=J)}else Q=X,X=J;return X}function O(){var X=Q;if(l.substr(Q,3).toLowerCase()===xf){var da=l.substr(Q,3);Q+=3}else da=J,0===za&&h(yf);if(da!==J){da=Q;za++;var ca=F();za--;ca===J?da=void 0:(Q=da,da=J);da!==J?X="NOT":(Q=X,X=J)}else Q=X,X=J;return X}
function T(){var X=Q;if(l.substr(Q,3).toLowerCase()===zf){var da=l.substr(Q,3);Q+=3}else da=J,0===za&&h(Af);if(da!==J){da=Q;za++;var ca=F();za--;ca===J?da=void 0:(Q=da,da=J);da!==J?X="AND":(Q=X,X=J)}else Q=X,X=J;return X}function Z(){var X=Q;if(l.substr(Q,2).toLowerCase()===Bf){var da=l.substr(Q,2);Q+=2}else da=J,0===za&&h(Cf);if(da!==J){da=Q;za++;var ca=F();za--;ca===J?da=void 0:(Q=da,da=J);da!==J?X="OR":(Q=X,X=J)}else Q=X,X=J;return X}function aa(){var X=Q;if(l.substr(Q,7).toLowerCase()===Df){var da=
l.substr(Q,7);Q+=7}else da=J,0===za&&h(Ef);if(da!==J){da=Q;za++;var ca=F();za--;ca===J?da=void 0:(Q=da,da=J);da!==J?X="BETWEEN":(Q=X,X=J)}else Q=X,X=J;return X}function Y(){var X=Q;if(l.substr(Q,4).toLowerCase()===Ff){var da=l.substr(Q,4);Q+=4}else da=J,0===za&&h(Gf);if(da!==J){da=Q;za++;var ca=F();za--;ca===J?da=void 0:(Q=da,da=J);da!==J?X="FROM":(Q=X,X=J)}else Q=X,X=J;return X}function ba(){var X=Q;if(l.substr(Q,4).toLowerCase()===Hf){var da=l.substr(Q,4);Q+=4}else da=J,0===za&&h(If);if(da!==J){da=
Q;za++;var ca=F();za--;ca===J?da=void 0:(Q=da,da=J);da!==J?X="TRIM":(Q=X,X=J)}else Q=X,X=J;return X}function fa(){var X=Q;if(l.substr(Q,8).toLowerCase()===Jf){var da=l.substr(Q,8);Q+=8}else da=J,0===za&&h(Kf);if(da!==J){da=Q;za++;var ca=F();za--;ca===J?da=void 0:(Q=da,da=J);da!==J?X="INTERVAL":(Q=X,X=J)}else Q=X,X=J;return X}function ha(){var X=Q;if(l.substr(Q,4).toLowerCase()===Lf){var da=l.substr(Q,4);Q+=4}else da=J,0===za&&h(Mf);if(da!==J){da=Q;za++;var ca=F();za--;ca===J?da=void 0:(Q=da,da=J);
da!==J?X="YEAR":(Q=X,X=J)}else Q=X,X=J;return X}function la(){var X=Q;if(l.substr(Q,5).toLowerCase()===Nf){var da=l.substr(Q,5);Q+=5}else da=J,0===za&&h(Of);if(da!==J){da=Q;za++;var ca=F();za--;ca===J?da=void 0:(Q=da,da=J);da!==J?X="MONTH":(Q=X,X=J)}else Q=X,X=J;return X}function qa(){var X=Q;if(l.substr(Q,3).toLowerCase()===Pf){var da=l.substr(Q,3);Q+=3}else da=J,0===za&&h(Qf);if(da!==J){da=Q;za++;var ca=F();za--;ca===J?da=void 0:(Q=da,da=J);da!==J?X="DAY":(Q=X,X=J)}else Q=X,X=J;return X}function va(){var X=
Q;if(l.substr(Q,4).toLowerCase()===Rf){var da=l.substr(Q,4);Q+=4}else da=J,0===za&&h(Sf);if(da!==J){da=Q;za++;var ca=F();za--;ca===J?da=void 0:(Q=da,da=J);da!==J?X="HOUR":(Q=X,X=J)}else Q=X,X=J;return X}function wa(){var X=Q;if(l.substr(Q,6).toLowerCase()===Tf){var da=l.substr(Q,6);Q+=6}else da=J,0===za&&h(Uf);if(da!==J){da=Q;za++;var ca=F();za--;ca===J?da=void 0:(Q=da,da=J);da!==J?X="MINUTE":(Q=X,X=J)}else Q=X,X=J;return X}function Ca(){var X=Q;if(l.substr(Q,6).toLowerCase()===Vf){var da=l.substr(Q,
6);Q+=6}else da=J,0===za&&h(Wf);if(da!==J){da=Q;za++;var ca=F();za--;ca===J?da=void 0:(Q=da,da=J);da!==J?X="SECOND":(Q=X,X=J)}else Q=X,X=J;return X}function Ba(){var X=Q;if(l.substr(Q,4).toLowerCase()===Xf){var da=l.substr(Q,4);Q+=4}else da=J,0===za&&h(Yf);if(da!==J){da=Q;za++;var ca=F();za--;ca===J?da=void 0:(Q=da,da=J);da!==J?X="CASE":(Q=X,X=J)}else Q=X,X=J;return X}function Fa(){var X=Q;if(l.substr(Q,3).toLowerCase()===Zf){var da=l.substr(Q,3);Q+=3}else da=J,0===za&&h($f);if(da!==J){da=Q;za++;
var ca=F();za--;ca===J?da=void 0:(Q=da,da=J);da!==J?X="END":(Q=X,X=J)}else Q=X,X=J;return X}function Ma(){var X=Q;if(l.substr(Q,4).toLowerCase()===ag){var da=l.substr(Q,4);Q+=4}else da=J,0===za&&h(bg);if(da!==J){da=Q;za++;var ca=F();za--;ca===J?da=void 0:(Q=da,da=J);da!==J?X="WHEN":(Q=X,X=J)}else Q=X,X=J;return X}function Ga(){var X=Q;if(l.substr(Q,4).toLowerCase()===cg){var da=l.substr(Q,4);Q+=4}else da=J,0===za&&h(dg);if(da!==J){da=Q;za++;var ca=F();za--;ca===J?da=void 0:(Q=da,da=J);da!==J?X="THEN":
(Q=X,X=J)}else Q=X,X=J;return X}function Ia(){if(44===l.charCodeAt(Q)){var X=eg;Q++}else X=J,0===za&&h(fg);return X}function Ja(){if(40===l.charCodeAt(Q)){var X=gg;Q++}else X=J,0===za&&h(hg);return X}function La(){if(41===l.charCodeAt(Q)){var X=ig;Q++}else X=J,0===za&&h(jg);return X}function ya(){var X;var da=[];for(X=cb();X!==J;)da.push(X),X=cb();return da}function cb(){if(kg.test(l.charAt(Q))){var X=l.charAt(Q);Q++}else X=J,0===za&&h(lg);return X}function gb(X,da,ca,ia){X={type:"binary_expr",operator:X,
left:da,right:ca};void 0!==ia&&(X.escape=ia);return X}function fb(X,da){for(var ca=0;ca<da.length;ca++)X=gb(da[ca][1],X,da[ca][3]);return X}v=void 0!==v?v:{};var J={},ib={start:f},Za=f,Ua="!",Ta=q("!",!1),jb="\x3d",tb=q("\x3d",!1),Ra="\x3e\x3d",Bb=q("\x3e\x3d",!1),ja="\x3e",na=q("\x3e",!1),ma="\x3c\x3d",ta=q("\x3c\x3d",!1),Da="\x3c\x3e",Ea=q("\x3c\x3e",!1),Na="\x3c",Pa=q("\x3c",!1),$a="!\x3d",ab=q("!\x3d",!1),Va="+",hb=q("+",!1),lb="-",qc=q("-",!1),wd="*",xd=q("*",!1),yd="/",zd=q("/",!1),Qe=/^[A-Za-z_\x80-\uFFFF]/,
Re=g([["A","Z"],["a","z"],"_",["\u0080","\uffff"]],!1,!1),Se=/^[A-Za-z0-9_]/,Te=g([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),Ue=/^[A-Za-z0-9_.\x80-\uFFFF]/,Ve=g([["A","Z"],["a","z"],["0","9"],"_",".",["\u0080","\uffff"]],!1,!1),We="@",Xe=q("@",!1),md=function(X){return{type:"interval-period",period:X.value,precision:null,secondary:null}},nd=function(X,da){return{type:"interval-period",period:"second",precision:X,secondary:da}},od="'",pd=q("'",!1),qd="N'",ff=q("N'",!1),oc="''",rd=q("''",!1),sd=/^[^']/,
td=g(["'"],!0,!1),jf=".",kf=q(".",!1),pf=/^[0-9]/,qf=g([["0","9"]],!1,!1),lf=/^[eE]/,mf=g(["e","E"],!1,!1),nf=/^[+\-]/,of=g(["+","-"],!1,!1),Hd="null",Id=q("NULL",!0),Bd="true",Cd=q("TRUE",!0),Ed="false",Fd=q("FALSE",!0),rf="in",sf=q("IN",!0),tf="is",uf=q("IS",!0),vf="like",wf=q("LIKE",!0),ud="escape",vd=q("ESCAPE",!0),xf="not",yf=q("NOT",!0),zf="and",Af=q("AND",!0),Bf="or",Cf=q("OR",!0),Df="between",Ef=q("BETWEEN",!0),Ff="from",Gf=q("FROM",!0),ne="for",oe=q("FOR",!0),de="substring",ee=q("SUBSTRING",
!0),Td="extract",Ud=q("EXTRACT",!0),Hf="trim",If=q("TRIM",!0),te="position",ue=q("POSITION",!0),Od="timestamp",Pd=q("TIMESTAMP",!0),Kd="date",Ld=q("DATE",!0),Ye="leading",Ze=q("LEADING",!0),$e="trailing",af=q("TRAILING",!0),bf="both",cf=q("BOTH",!0),df="to",ef=q("TO",!0),Jf="interval",Kf=q("INTERVAL",!0),Lf="year",Mf=q("YEAR",!0),Nf="month",Of=q("MONTH",!0),Pf="day",Qf=q("DAY",!0),Rf="hour",Sf=q("HOUR",!0),Tf="minute",Uf=q("MINUTE",!0),Vf="second",Wf=q("SECOND",!0),Xf="case",Yf=q("CASE",!0),Zf="end",
$f=q("END",!0),ag="when",bg=q("WHEN",!0),cg="then",dg=q("THEN",!0),gf="else",hf=q("ELSE",!0),eg=",",fg=q(",",!1),gg="(",hg=q("(",!1),ig=")",jg=q(")",!1),kg=/^[ \t\n\r]/,lg=g([" ","\t","\n","\r"],!1,!1),gd="`",hd=q("`",!1),id=/^[^`]/,jd=g(["`"],!0,!1),Q=0,$b=[{line:1,column:1}],sb=0,pc=[],za=0;if("startRule"in v){if(!(v.startRule in ib))throw Error("Can't start parsing from rule \""+v.startRule+'".');Za=ib[v.startRule]}var Qc=Za();if(Qc!==J&&Q===l.length)return Qc;Qc!==J&&Q<l.length&&h({type:"end"});
throw function(X,da,ca){return new t(t.buildMessage(X,da),X,da,ca)}(pc,sb<l.length?l.charAt(sb):null,sb<l.length?n(sb,sb+1):n(sb,sb));}}})})(z);let y=function(){function r(){}r.parse=function(t){return z.exports.parse(t)};return r}();p.WhereGrammar=y;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/chunks/_commonjsHelpers":function(){define(["exports"],function(p){p.commonjsGlobal="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:
"undefined"!==typeof self?self:{};p.commonjsRequire=function(c){throw Error('Could not dynamically require "'+c+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.');};p.getDefaultExportFromCjs=function(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c["default"]:c}})},"esri/layers/graphics/data/projectionSupport":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../geometry/projection ../../../geometry/geometryAdapters/json ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/webMercatorUtils".split(" "),
function(p,c,z,y,r,t){function l(b,a){if(!a)return null;if("x"in a){var d={x:0,y:0};[d.x,d.y]=b(a.x,a.y,k);null!=a.z&&(d.z=a.z);null!=a.m&&(d.m=a.m);return d}if("xmin"in a)return d={xmin:0,ymin:0,xmax:0,ymax:0},[d.xmin,d.ymin]=b(a.xmin,a.ymin,k),[d.xmax,d.ymax]=b(a.xmax,a.ymax,k),a.hasZ&&(d.zmin=a.zmin,d.zmax=a.zmax,d.hasZ=!0),a.hasM&&(d.mmin=a.mmin,d.mmax=a.mmax,d.hasM=!0),d;if("rings"in a)return{rings:v(a.rings,b),hasM:a.hasM,hasZ:a.hasZ};if("paths"in a)return{paths:v(a.paths,b),hasM:a.hasM,hasZ:a.hasZ};
if("points"in a)return{points:q(a.points,b),hasM:a.hasM,hasZ:a.hasZ}}function v(b,a){const d=[];for(const e of b)d.push(q(e,a));return d}function q(b,a){const d=[];for(const e of b)b=a(e[0],e[1],[0,0]),d.push(b),2<e.length&&b.push(e[2]),3<e.length&&b.push(e[3]);return d}function g(){g=c._asyncToGenerator(function*(b,a){a&&(b=Array.isArray(b)?b.map(d=>{var e;return null==(e=d.geometry)?void 0:e.spatialReference}):[b],yield z.initializeProjection(b.map(d=>({source:d,dest:a}))))});return g.apply(this,
arguments)}const k=[0,0],n=l.bind(null,t.lngLatToXY),h=l.bind(null,t.xyToLngLat),f=new (function(){function b(){this._jobs=[];this._timer=null;this._process=this._process.bind(this)}var a=b.prototype;a.push=function(){var d=c._asyncToGenerator(function*(e,u,m){if(!(e&&e.length&&u&&m)||r.equals(u,m))return e;const x={geometries:e,inSpatialReference:u,outSpatialReference:m,resolve:null};this._jobs.push(x);return new Promise(A=>{x.resolve=A;null===this._timer&&(this._timer=setTimeout(this._process,10))})});
return function(e,u,m){return d.apply(this,arguments)}}();a._process=function(){this._timer=null;const d=this._jobs.shift();if(d){var {geometries:e,inSpatialReference:u,outSpatialReference:m,resolve:x}=d;t.canProject(u,m)?r.isWebMercator(m)?x(e.map(n)):x(e.map(h)):x(z.projectMany(y.jsonAdapter,e,u,m,null));0<this._jobs.length&&(this._timer=setTimeout(this._process,10))}};return b}());p.checkProjectionSupport=function(b,a){return g.apply(this,arguments)};p.project=function(b,a,d){if(!b)return b;d||
(d=a,a=b.spatialReference);return r.isValid(a)&&r.isValid(d)&&!r.equals(a,d)?t.canProject(a,d)?r.isWebMercator(d)?n(b):h(b):z.projectMany(y.jsonAdapter,[b],a,d,null)[0]:b};p.projectMany=function(b,a,d){return f.push(b,a,d)};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/geometry/projection":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../core/Error ../core/mathUtils ../core/maybe ../core/promiseUtils ../core/unitUtils ../chunks/mat4 ../chunks/vec3 ../chunks/vec3f64 ./Extent ./Multipoint ../chunks/pe ./Point ./Polygon ./Polyline ./projectionEllipsoid ./support/aaBoundingRect ./support/Ellipsoid ./support/geodesicConstants ./support/GeographicTransformation ./support/spatialReferenceUtils".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k,n,h,f,b,a,d,e,u,m,x,A,D){function B(){return!!Ga&&f.isLoaded()}function C(ja){t.isNone(Ja)&&(Ja=Promise.all([f.load(),(new Promise(function(na,ma){p(["../chunks/geometryEngineBase"],na,ma)})).then(function(na){return na.geometryEngineBase}),new Promise(function(na,ma){p(["./geometryAdapters/hydrated"],na,ma)})]));return Ja.then(([,na,{hydratedAdapter:ma}])=>{l.throwIfAborted(ja);Ia=ma;Ga=na.default;Ga._enableProjection(f.pe)})}function w(ja,na,ma,ta,Da=null){if(t.isNone(ma)||
t.isNone(ta))return na;if(I(ma,ta,Da))return na.map(Ea=>H(Ea,ma,ta));if(t.isNone(Da)){const Ea=A.cacheKey(ma,ta);void 0!==La[Ea]?Da=La[Ea]:(Da=E(ma,ta,null),t.isNone(Da)&&(Da=new A),La[Ea]=Da)}if(t.isNone(Ga))throw new ya;return Ga._project(ja,na,ma,ta,Da)}function E(ja,na,ma=null){if(t.isNone(Ga))throw new ya;if(t.isNone(ja)||t.isNone(na))return null;ja=Ga._getTransformation(Ia,ja,na,ma,null==ma?void 0:ma.spatialReference);return null!==ja?A.fromGE(ja):null}function I(ja,na,ma){return ma?!1:D.equals(ja,
na)?!0:D.isValid(ja)&&D.isValid(na)&&!!Ba(ja,na,J)}function F(){F=z._asyncToGenerator(function*(ja,na,ma,ta){if(!B())if(Array.isArray(ja))for(const {source:Da,dest:Ea,geographicTransformation:Na}of ja){if(!I(Da,Ea,Na))return C(ta)}else if(!I(ja,na,ma))return C(ta)});return F.apply(this,arguments)}function H(ja,na,ma){if(!ja)return ja;if("x"in ja){var ta=new b;return K(ja,na,ta,ma)?ta:null}return"xmin"in ja?(ta=new n,R(ja,na,ta,ma)?ta:null):"rings"in ja?(ta=new a,P(ja,na,ta,ma)?ta:null):"paths"in ja?
(ta=new d,L(ja,na,ta,ma)?ta:null):"points"in ja?(ta=new h,G(ja,na,ta,ma)?ta:null):null}function K(ja,na,ma,ta,Da=0){Ra[0]=ja.x;Ra[1]=ja.y;const Ea=ja.z;Ra[2]=void 0!==Ea?Ea:Da;if(!W(Ra,na,0,Ra,ta,0,1))return!1;ma.x=Ra[0];ma.y=Ra[1];ma.spatialReference=ta;void 0===Ea?(ma.z=void 0,ma.hasZ=!1):(ma.z=Ra[2],ma.hasZ=!0);void 0===ja.m?(ma.m=void 0,ma.hasM=!1):(ma.m=ja.m,ma.hasM=!0);return!0}function G(ja,na,ma,ta,Da=0){const {points:Ea,hasZ:Na,hasM:Pa}=ja;ja=[];const $a=Ea.length,ab=[];for(var Va of Ea)ab.push(Va[0],
Va[1],Na?Va[2]:Da);if(!W(ab,na,0,ab,ta,0,$a))return!1;for(na=0;na<$a;++na){Da=3*na;Va=ab[Da];const hb=ab[Da+1];Na&&Pa?ja.push([Va,hb,ab[Da+2],Ea[na][3]]):Na?ja.push([Va,hb,ab[Da+2]]):Pa?ja.push([Va,hb,Ea[na][2]]):ja.push([Va,hb])}ma.points=ja;ma.spatialReference=ta;ma.hasZ=Na;ma.hasM=Pa;return!0}function L(ja,na,ma,ta,Da=0){const {paths:Ea,hasZ:Na,hasM:Pa}=ja;ja=[];if(!ea(Ea,Na,Pa,na,ja,ta,Da))return!1;ma.paths=ja;ma.spatialReference=ta;ma.hasZ=Na;ma.hasM=Pa;return!0}function P(ja,na,ma,ta,Da=0){const {rings:Ea,
hasZ:Na,hasM:Pa}=ja;ja=[];if(!ea(Ea,Na,Pa,na,ja,ta,Da))return!1;ma.rings=ja;ma.spatialReference=ta;ma.hasZ=Na;ma.hasM=Pa;return!0}function R(ja,na,ma,ta,Da=0){const {xmin:Ea,ymin:Na,xmax:Pa,ymax:$a,hasZ:ab,hasM:Va}=ja;if(!S(Ea,Na,ab?ja.zmin:Da,na,Ra,ta))return!1;ma.xmin=Ra[0];ma.ymin=Ra[1];ab&&(ma.zmin=Ra[2]);if(!S(Pa,$a,ab?ja.zmax:Da,na,Ra,ta))return!1;ma.xmax=Ra[0];ma.ymax=Ra[1];ab&&(ma.zmax=Ra[2]);Va&&(ma.mmin=ja.mmin,ma.mmax=ja.mmax);ma.spatialReference=ta;return!0}function S(ja,na,ma,ta,Da,Ea){Ta[0]=
ja;Ta[1]=na;Ta[2]=ma;return W(Ta,ta,0,Da,Ea,0,1)}function M(ja,na,ma,ta){if(t.isNone(na)||t.isNone(ta)||2>ja.length)return!1;2===ja.length&&(Ta[0]=ja[0],Ta[1]=ja[1],Ta[2]=0,ja=Ta);return W(ja,na,0,ma,ta,0,1)}function V(ja,na,ma){if(t.isNone(na))return!1;na=sa(na,gb);na=cb[na][6];if(t.isNone(na))return!1;na(ja,0,Ta,0);ma!==Ta&&(ma[0]=Ta[0],ma[1]=Ta[1],2<ma.length&&(ma[2]=Ta[2]));return!0}function W(ja,na,ma,ta,Da,Ea,Na=1){na=Ba(na,Da,J);if(t.isNone(na))return!1;if(na===ua){if(ja===ta&&ma===Ea)return!0;
Na=ma+3*Na;for(let Pa=ma,$a=Ea;Pa<Na;Pa++,$a++)ta[$a]=ja[Pa];return!0}Na=ma+3*Na;for(let Pa=ma,$a=Ea;Pa<Na;Pa+=3,$a+=3)na(ja,Pa,ta,$a);return!0}function ea(ja,na,ma,ta,Da,Ea,Na=0){const Pa=[];for(const $a of ja)for(const ab of $a)Pa.push(ab[0],ab[1],na?ab[2]:Na);if(!W(Pa,ta,0,Pa,Ea,0,Pa.length/3))return!1;ta=0;Da.length=0;for(const $a of ja){ja=[];for(const ab of $a)na&&ma?ja.push([Pa[ta++],Pa[ta++],Pa[ta++],ab[3]]):na?ja.push([Pa[ta++],Pa[ta++],Pa[ta++]]):(ma?ja.push([Pa[ta++],Pa[ta++],ab[2]]):ja.push([Pa[ta++],
Pa[ta++]]),ta++);Da.push(ja)}return!0}function ka(ja,na,ma){const ta=Math.sin(na);na=Math.cos(na);const Da=Math.sin(ja);ja=Math.cos(ja);ma[0]=-ta;ma[4]=-Da*na;ma[8]=ja*na;ma[12]=0;ma[1]=na;ma[5]=-Da*ta;ma[9]=ja*ta;ma[13]=0;ma[2]=0;ma[6]=ja;ma[10]=Da;ma[14]=0;ma[3]=0;ma[7]=0;ma[11]=0;ma[15]=1;return ma}function sa(ja,na){if(na.spatialReference===ja)return na.spatialReferenceId;na.spatialReference=ja;"metersPerUnit"in na&&(na.metersPerUnit=v.getMetersPerUnitForSR(ja,1));return ja.wkt===e.SphericalECEFSpatialReference.wkt?
na.spatialReferenceId=1:D.isWGS84(ja)?na.spatialReferenceId=2:D.isWebMercator(ja)?na.spatialReferenceId=3:ja.wkt===e.WGS84ECEFSpatialReference.wkt?na.spatialReferenceId=4:4490===ja.wkid?na.spatialReferenceId=5:ja.wkt===e.SphericalPCPFMars.wkt?na.spatialReferenceId=7:ja.wkt===e.SphericalPCPFMoon.wkt?na.spatialReferenceId=9:D.isMars(ja)?na.spatialReferenceId=8:D.isMoon(ja)?na.spatialReferenceId=10:na.spatialReferenceId=0}function ua(ja,na,ma,ta){ja!==ma&&(ma[ta++]=ja[na++],ma[ta++]=ja[na++],ma[ta]=
ja[na])}function xa(ja,na,ma,ta){ma[ta++]=Ua*(ja[na++]/m.earth.radius);ma[ta++]=Ua*(Math.PI/2-2*Math.atan(Math.exp(-1*ja[na++]/m.earth.radius)));ma[ta]=ja[na]}function oa(ja,na,ma,ta){xa(ja,na,ma,ta);Z(ma,ta,ma,ta)}function ra(ja,na,ma,ta){xa(ja,na,ma,ta);qa(ma,ta,ma,ta)}function pa(ja,na,ma,ta,Da){var Ea=.4999999*Math.PI;Ea=r.clamp(Za*ja[na+1],-Ea,Ea);Ea=Math.sin(Ea);ma[ta++]=Za*ja[na]*Da.radius;ma[ta++]=Da.halfSemiMajorAxis*Math.log((1+Ea)/(1-Ea));ma[ta]=ja[na+2]}function N(ja,na,ma,ta){pa(ja,na,
ma,ta,m.earth)}function U(ja,na,ma,ta,Da){Da+=ja[na+2];const Ea=Za*ja[na+1];ja=Za*ja[na];na=Math.cos(Ea);ma[ta++]=Math.cos(ja)*na*Da;ma[ta++]=Math.sin(ja)*na*Da;ma[ta]=Math.sin(Ea)*Da}function O(ja,na,ma,ta){U(ja,na,ma,ta,m.moon.radius)}function T(ja,na,ma,ta){U(ja,na,ma,ta,m.mars.radius)}function Z(ja,na,ma,ta){U(ja,na,ma,ta,m.earth.radius)}function aa(ja,na,ma,ta,Da){var Ea=ja[na];const Na=ja[na+1];na=ja[na+2];ja=Math.sqrt(Ea*Ea+Na*Na+na*na);na=r.asinClamped(na/(0===ja?1:ja));Ea=Math.atan2(Na,Ea);
ma[ta++]=Ua*Ea;ma[ta++]=Ua*na;ma[ta]=ja-Da}function Y(ja,na,ma,ta){aa(ja,na,ma,ta,m.moon.radius)}function ba(ja,na,ma,ta){aa(ja,na,ma,ta,m.mars.radius)}function fa(ja,na,ma,ta){aa(ja,na,ma,ta,m.earth.radius)}function ha(ja,na,ma,ta){fa(ja,na,ma,ta);N(ma,ta,ma,ta)}function la(ja,na,ma,ta){fa(ja,na,ma,ta);qa(ma,ta,ma,ta)}function qa(ja,na,ma,ta){{var Da=m.earth;const Na=Za*ja[na];var Ea=Za*ja[na+1];ja=ja[na+2];na=Math.sin(Ea);Ea=Math.cos(Ea);const Pa=Da.radius/Math.sqrt(1-Da.eccentricitySquared*na*
na);ma[ta++]=(Pa+ja)*Ea*Math.cos(Na);ma[ta++]=(Pa+ja)*Ea*Math.sin(Na);ma[ta++]=(Pa*(1-Da.eccentricitySquared)+ja)*na}}function va(ja,na,ma,ta){var Da=x.earthEllipsoidConstants,Ea=ja[na],Na=ja[na+1];ja=ja[na+2];let Pa;na=Math.abs(ja);var $a=Ea*Ea+Na*Na;var ab=Math.sqrt($a);var Va=$a+ja*ja;var hb=Math.sqrt(Va);Ea=Math.atan2(Na,Ea);var lb=ja*ja/Va;Va=$a/Va;Na=Da.a2/hb;$a=Da.a3-Da.a4/hb;.3<Va?(lb=na/hb*(1+Va*(Da.a1+Na+lb*$a)/hb),hb=Math.asin(lb),Na=lb*lb,Va=Math.sqrt(1-Na)):(Va=ab/hb*(1-lb*(Da.a5-Na-
Va*$a)/hb),hb=Math.acos(Va),Na=1-Va*Va,lb=Math.sqrt(Na));Pa=1-m.earth.eccentricitySquared*Na;Na=m.earth.radius/Math.sqrt(Pa);Da=Da.a6*Na;Na=ab-Na*Va;$a=na-Da*lb;na=Va*Na+lb*$a;ab=Va*$a-lb*Na;Da=ab/(Da/Pa+na);hb+=Da;0>ja&&(hb=-hb);ma[ta++]=Ua*Ea;ma[ta++]=Ua*hb;ma[ta]=na+ab*Da/2}function wa(ja,na,ma,ta){va(ja,na,ma,ta);Z(ma,ta,ma,ta)}function Ca(ja,na,ma,ta){va(ja,na,ma,ta);N(ma,ta,ma,ta)}function Ba(ja,na,ma=Ma()){return t.isNone(ja)||t.isNone(na)?null:Fa(ja,na,ma).projector}function Fa(ja,na,ma){if(t.isNone(ja)||
t.isNone(na)||ma.source.spatialReference===ja&&ma.dest.spatialReference===na)return ma;const ta=sa(ja,ma.source),Da=sa(na,ma.dest);0===ta&&0===Da?D.equals(ja,na)?ma.projector=ua:ma.projector=null:ma.projector=cb[ta][Da];return ma}function Ma(){return{source:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},projector:ua}}let Ga=null,Ia=null,Ja=null,La={},ya=function(ja){function na(){return ja.call(this,"projection:not-loaded",
"projection engine not fully loaded yet, please call load()")||this}z._inheritsLoose(na,ja);return na}(y);const cb={[2]:{[5]:null,[8]:null,[10]:null,[11]:ua,[6]:ua,[1]:Z,[7]:null,[9]:null,[0]:null,[3]:N,[2]:ua,[4]:qa},[5]:{[5]:ua,[8]:null,[10]:null,[11]:ua,[6]:ua,[1]:Z,[7]:null,[9]:null,[0]:null,[3]:null,[2]:null,[4]:qa},[8]:{[5]:null,[8]:ua,[10]:null,[11]:ua,[6]:null,[1]:null,[7]:T,[9]:null,[0]:null,[3]:null,[2]:null,[4]:null},[10]:{[5]:null,[8]:null,[10]:ua,[11]:ua,[6]:null,[1]:null,[7]:null,[9]:O,
[0]:null,[3]:null,[2]:null,[4]:null},[3]:{[5]:null,[8]:null,[10]:null,[11]:xa,[6]:xa,[1]:oa,[7]:null,[9]:null,[0]:null,[3]:ua,[2]:xa,[4]:ra},[4]:{[5]:va,[8]:null,[10]:null,[11]:va,[6]:va,[1]:wa,[7]:null,[9]:null,[0]:null,[3]:Ca,[2]:va,[4]:ua},[1]:{[5]:fa,[8]:null,[10]:null,[11]:fa,[6]:fa,[1]:ua,[7]:null,[9]:null,[0]:null,[3]:ha,[2]:fa,[4]:la},[7]:{[5]:null,[8]:ba,[10]:null,[11]:ba,[6]:null,[1]:null,[7]:ua,[9]:null,[0]:null,[3]:null,[2]:null,[4]:null},[9]:{[5]:null,[8]:null,[10]:Y,[11]:Y,[6]:null,
[1]:null,[7]:null,[9]:ua,[0]:null,[3]:null,[2]:null,[4]:null},[0]:{[5]:null,[8]:null,[10]:null,[11]:null,[6]:null,[1]:null,[7]:null,[9]:null,[0]:ua,[3]:null,[2]:null,[4]:null},[11]:{[5]:ua,[8]:ua,[10]:ua,[11]:ua,[6]:ua,[1]:Z,[7]:T,[9]:O,[0]:null,[3]:N,[2]:ua,[4]:qa},[6]:{[5]:null,[8]:null,[10]:null,[11]:ua,[6]:ua,[1]:Z,[7]:null,[9]:null,[0]:null,[3]:null,[2]:ua,[4]:qa}},gb={spatialReference:null,spatialReferenceId:0},fb={spatialReference:null,spatialReferenceId:0},J=Ma(),ib=Ma(),Za=r.deg2rad(1),Ua=
r.rad2deg(1),Ta=k.create(),jb=k.create(),tb=k.create(),Ra=k.create(),Bb=k.create();c.canProjectToWGS84ComparableLonLat=function(ja){if(t.isNone(ja))return!1;ja=sa(ja,gb);return!!cb[ja][6]};c.canProjectWithoutEngine=I;c.computeLatLonToENURotation=ka;c.computeLinearTransformation=function(ja,na,ma,ta){if(t.isNone(ja)||t.isNone(ta))return!1;var Da=sa(ja,gb),Ea=sa(ta,fb);if(Da===Ea&&1!==Ea&&7!==Ea&&9!==Ea&&(0!==Da||D.equals(ja,ta)))return q.identity(ma),q.translate(ma,ma,na),!0;if(1===Ea||7===Ea||9===
Ea){ta=ja=0;Da=cb[Da][11];Ea=cb[11][Ea];if(t.isNone(Da)||t.isNone(Ea))return!1;Da(na,0,jb,0);Ea(jb,0,tb,0);ja=Za*jb[0];ta=Za*jb[1];ka(ta,ja,ma);ma[12]=tb[0];ma[13]=tb[1];ma[14]=tb[2];return!0}if(3===Ea&&(2===Da||1===Da)){Ea=cb[Da][11];if(t.isNone(Ea))return!1;Ea(na,0,jb,0);na=Za*jb[1];N(jb,0,tb,0);q.identity(ma);q.translate(ma,ma,tb);na=1/Math.cos(na);q.scale(ma,ma,[na,na,1]);return!0}return!1};c.getProjectorName=function(ja,na){switch(Ba(ja,na,J)){case ua:return"copy3";case Z:return"wgs84ToSphericalECEF";
case N:return"wgs84ToWebMercator";case qa:return"wgs84ToWGS84ECEF";case xa:return"webMercatorToWGS84";case oa:return"webMercatorToSphericalECEF";case ra:return"webMercatorToWGS84ECEF";case va:return"wgs84ECEFToWGS84";case wa:return"wgs84ECEFToSphericalECEF";case Ca:return"wgs84ECEFToWebMercator";case fa:return"sphericalECEFToWGS84";case ha:return"sphericalECEFToWebMercator";case ba:return"sphericalMarsPCPFToMars2000";case Y:return"sphericalMoonPCPFToMoon2000";case la:return"sphericalECEFToWGS84ECEF";
case T:return"mars2000ToSphericalPCPF";case O:return"moon2000ToSphericalPCPF";default:return null}};c.getTransformation=E;c.getTransformations=function(ja,na,ma=null){if(t.isNone(Ga))throw new ya;ja=Ga._getTransformationBySuitability(Ia,ja,na,ma,null==ma?void 0:ma.spatialReference);if(null!==ja){na=[];for(const ta of ja)na.push(A.fromGE(ta));return na}return[]};c.initializeProjection=function(ja,na,ma,ta){return F.apply(this,arguments)};c.isLoaded=B;c.isSupported=function(){return!0};c.load=C;c.localLinearScaleFactors=
function(ja,na,ma,ta){if(t.isNone(na)||t.isNone(ta))return!1;const Da=sa(na,gb);var Ea=sa(ta,fb);if(Da===Ea&&0!==Da||D.equals(na,ta))return ma[0]=1,ma[1]=1,ma[2]=1,!0;if(1===Da){na=g.length(ja);ja=na/Math.sqrt(ja[0]*ja[0]+ja[1]*ja[1]);na/=m.earth.radius;if(3===Ea)return ma[0]=ja*na,ma[1]=ja*na,ma[2]=1,!0;if(2===Ea||5===Ea)return Ea=180/(m.earth.radius*Math.PI),ma[0]=Ea*ja*na,ma[1]=Ea*na,ma[2]=1,!0}return!1};c.lonLatToSphericalPCPF=function(ja,na,ma,ta,Da=0){ta+=Da;Da=Math.cos(ma);ja[0]=Math.cos(na)*
Da*ta;ja[1]=Math.sin(na)*Da*ta;ja[2]=Math.sin(ma)*ta};c.lonLatToWebMercatorComparable=pa;c.project=function(ja,na,ma=null){return Array.isArray(ja)?0===ja.length?[]:w(Ia,ja,ja[0].spatialReference,na,ma):w(Ia,[ja],ja.spatialReference,na,ma)[0]};c.projectBoundingRect=function(ja,na,ma,ta){if(null==ja)return!1;if(D.equals(na,ta))return u.set(ma,ja),!0;Ta[0]=ja[0];Ta[1]=ja[1];Ta[2]=0;if(!W(Ta,na,0,Ta,ta,0,1))return!1;ma[0]=Ta[0];ma[1]=Ta[1];Ta[0]=ja[2];Ta[1]=ja[3];Ta[2]=0;if(!W(Ta,na,0,Ta,ta,0,1))return!1;
ma[2]=Ta[0];ma[3]=Ta[1];return!0};c.projectBoundingSphere=function(ja,na,ma,ta){if(t.isNone(na)||t.isNone(ta))return!1;na=Fa(na,ta,ib);if(na.projector===ua)return ma[0]=ja[0],ma[1]=ja[1],ma[2]=ja[2],ma[3]=ja[3],!0;if(t.isNone(na.projector))return!1;const {source:Da,dest:Ea}=na;if(3===Ea.spatialReferenceId){na=cb[Da.spatialReferenceId][2];if(t.isNone(na))return!1;na(ja,0,jb,0);na=Math.abs(Za*jb[1])+Math.asin(ja[3]/(m.earth.radius+ja[2]));N(jb,0,ma,0);ma[3]=na>.9999*Math.PI?Number.MAX_VALUE:1/Math.cos(na)*
ja[3];return!0}na.projector(ja,0,ma,0);ma[3]=ja[3]*Da.metersPerUnit/Ea.metersPerUnit;return!0};c.projectBuffer=W;c.projectDirection=function(ja,na,ma,ta,Da){g.copy(Ra,ja);g.add(Bb,ja,na);M(Ra,ma,Ra,Da);M(Bb,ma,Bb,Da);g.subtract(ta,Bb,Ra);g.normalize(ta,ta)};c.projectExtent=function(ja,na,ma=na.spatialReference,ta=0){return t.isNone(ma)?!1:R(ja,ja.spatialReference,na,ma,ta)};c.projectMany=w;c.projectMultipoint=function(ja,na,ma=na.spatialReference,ta=0){return t.isNone(ma)?!1:G(ja,ja.spatialReference,
na,ma,ta)};c.projectPoint=function(ja,na,ma=na.spatialReference,ta=0){return t.isNone(ma)?!1:K(ja,ja.spatialReference,na,ma,ta)};c.projectPointToVector=function(ja,na,ma,ta=0){Ra[0]=ja.x;Ra[1]=ja.y;const Da=ja.z;Ra[2]=void 0!==Da?Da:ta;return W(Ra,ja.spatialReference,0,na,ma,0,1)};c.projectPointToWGS84ComparableLonLat=function(ja,na){Ra[0]=ja.x;Ra[1]=ja.y;const ma=ja.z;Ra[2]=void 0!==ma?ma:0;return V(Ra,ja.spatialReference,na)};c.projectPolygon=function(ja,na,ma=na.spatialReference,ta=0){return t.isNone(ma)?
!1:P(ja,ja.spatialReference,na,ma,ta)};c.projectPolyline=function(ja,na,ma=na.spatialReference,ta=0){return t.isNone(ma)?!1:L(ja,ja.spatialReference,na,ma,ta)};c.projectVectorToDehydratedPoint=function(ja,na,ma){return W(ja,na,0,Ra,ma.spatialReference,0,1)?(ma.x=Ra[0],ma.y=Ra[1],ma.z=Ra[2],ma):null};c.projectVectorToPoint=function(ja,na,ma){if(t.isNone(na)||t.isNone(ma))return null;const ta=new b({spatialReference:ma});return W(ja,na,0,Ra,ma,0,1)?(ta.x=Ra[0],ta.y=Ra[1],ta.z=Ra[2],ta):null};c.projectVectorToVector=
M;c.projectVectorToWGS84ComparableLonLat=function(ja,na,ma){return V(ja,na,ma)};c.projectXYZToVector=S;c.sphericalPCPFtoLonLatElevation=aa;c.unload=function(){Ja=Ia=Ga=null;La={}};Object.defineProperty(c,"__esModule",{value:!0})})},"esri/chunks/mat4":function(){define(["exports","./vec3f64","./common"],function(p,c,z){function y(N,U){N[0]=U[0];N[1]=U[1];N[2]=U[2];N[3]=U[3];N[4]=U[4];N[5]=U[5];N[6]=U[6];N[7]=U[7];N[8]=U[8];N[9]=U[9];N[10]=U[10];N[11]=U[11];N[12]=U[12];N[13]=U[13];N[14]=U[14];N[15]=
U[15];return N}function r(N,U,O,T,Z,aa,Y,ba,fa,ha,la,qa,va,wa,Ca,Ba,Fa){N[0]=U;N[1]=O;N[2]=T;N[3]=Z;N[4]=aa;N[5]=Y;N[6]=ba;N[7]=fa;N[8]=ha;N[9]=la;N[10]=qa;N[11]=va;N[12]=wa;N[13]=Ca;N[14]=Ba;N[15]=Fa;return N}function t(N){N[0]=1;N[1]=0;N[2]=0;N[3]=0;N[4]=0;N[5]=1;N[6]=0;N[7]=0;N[8]=0;N[9]=0;N[10]=1;N[11]=0;N[12]=0;N[13]=0;N[14]=0;N[15]=1;return N}function l(N,U){if(N===U){const O=U[1],T=U[2],Z=U[3],aa=U[6],Y=U[7],ba=U[11];N[1]=U[4];N[2]=U[8];N[3]=U[12];N[4]=O;N[6]=U[9];N[7]=U[13];N[8]=T;N[9]=aa;
N[11]=U[14];N[12]=Z;N[13]=Y;N[14]=ba}else N[0]=U[0],N[1]=U[4],N[2]=U[8],N[3]=U[12],N[4]=U[1],N[5]=U[5],N[6]=U[9],N[7]=U[13],N[8]=U[2],N[9]=U[6],N[10]=U[10],N[11]=U[14],N[12]=U[3],N[13]=U[7],N[14]=U[11],N[15]=U[15];return N}function v(N,U){const O=U[0],T=U[1],Z=U[2],aa=U[3],Y=U[4],ba=U[5],fa=U[6],ha=U[7],la=U[8],qa=U[9],va=U[10],wa=U[11],Ca=U[12],Ba=U[13],Fa=U[14];U=U[15];const Ma=O*ba-T*Y,Ga=O*fa-Z*Y,Ia=O*ha-aa*Y,Ja=T*fa-Z*ba,La=T*ha-aa*ba,ya=Z*ha-aa*fa,cb=la*Ba-qa*Ca,gb=la*Fa-va*Ca,fb=la*U-wa*Ca,
J=qa*Fa-va*Ba,ib=qa*U-wa*Ba,Za=va*U-wa*Fa;let Ua=Ma*Za-Ga*ib+Ia*J+Ja*fb-La*gb+ya*cb;if(!Ua)return null;Ua=1/Ua;N[0]=(ba*Za-fa*ib+ha*J)*Ua;N[1]=(Z*ib-T*Za-aa*J)*Ua;N[2]=(Ba*ya-Fa*La+U*Ja)*Ua;N[3]=(va*La-qa*ya-wa*Ja)*Ua;N[4]=(fa*fb-Y*Za-ha*gb)*Ua;N[5]=(O*Za-Z*fb+aa*gb)*Ua;N[6]=(Fa*Ia-Ca*ya-U*Ga)*Ua;N[7]=(la*ya-va*Ia+wa*Ga)*Ua;N[8]=(Y*ib-ba*fb+ha*cb)*Ua;N[9]=(T*fb-O*ib-aa*cb)*Ua;N[10]=(Ca*La-Ba*Ia+U*Ma)*Ua;N[11]=(qa*Ia-la*La-wa*Ma)*Ua;N[12]=(ba*gb-Y*J-fa*cb)*Ua;N[13]=(O*J-T*gb+Z*cb)*Ua;N[14]=(Ba*Ga-
Ca*Ja-Fa*Ma)*Ua;N[15]=(la*Ja-qa*Ga+va*Ma)*Ua;return N}function q(N,U){const O=U[0],T=U[1],Z=U[2],aa=U[3],Y=U[4],ba=U[5],fa=U[6],ha=U[7],la=U[8],qa=U[9],va=U[10],wa=U[11],Ca=U[12],Ba=U[13],Fa=U[14];U=U[15];N[0]=ba*(va*U-wa*Fa)-qa*(fa*U-ha*Fa)+Ba*(fa*wa-ha*va);N[1]=-(T*(va*U-wa*Fa)-qa*(Z*U-aa*Fa)+Ba*(Z*wa-aa*va));N[2]=T*(fa*U-ha*Fa)-ba*(Z*U-aa*Fa)+Ba*(Z*ha-aa*fa);N[3]=-(T*(fa*wa-ha*va)-ba*(Z*wa-aa*va)+qa*(Z*ha-aa*fa));N[4]=-(Y*(va*U-wa*Fa)-la*(fa*U-ha*Fa)+Ca*(fa*wa-ha*va));N[5]=O*(va*U-wa*Fa)-la*(Z*
U-aa*Fa)+Ca*(Z*wa-aa*va);N[6]=-(O*(fa*U-ha*Fa)-Y*(Z*U-aa*Fa)+Ca*(Z*ha-aa*fa));N[7]=O*(fa*wa-ha*va)-Y*(Z*wa-aa*va)+la*(Z*ha-aa*fa);N[8]=Y*(qa*U-wa*Ba)-la*(ba*U-ha*Ba)+Ca*(ba*wa-ha*qa);N[9]=-(O*(qa*U-wa*Ba)-la*(T*U-aa*Ba)+Ca*(T*wa-aa*qa));N[10]=O*(ba*U-ha*Ba)-Y*(T*U-aa*Ba)+Ca*(T*ha-aa*ba);N[11]=-(O*(ba*wa-ha*qa)-Y*(T*wa-aa*qa)+la*(T*ha-aa*ba));N[12]=-(Y*(qa*Fa-va*Ba)-la*(ba*Fa-fa*Ba)+Ca*(ba*va-fa*qa));N[13]=O*(qa*Fa-va*Ba)-la*(T*Fa-Z*Ba)+Ca*(T*va-Z*qa);N[14]=-(O*(ba*Fa-fa*Ba)-Y*(T*Fa-Z*Ba)+Ca*(T*fa-
Z*ba));N[15]=O*(ba*va-fa*qa)-Y*(T*va-Z*qa)+la*(T*fa-Z*ba);return N}function g(N){const U=N[0],O=N[1],T=N[2],Z=N[3],aa=N[4],Y=N[5],ba=N[6],fa=N[7],ha=N[8],la=N[9],qa=N[10],va=N[11],wa=N[12],Ca=N[13],Ba=N[14];N=N[15];return(U*Y-O*aa)*(qa*N-va*Ba)-(U*ba-T*aa)*(la*N-va*Ca)+(U*fa-Z*aa)*(la*Ba-qa*Ca)+(O*ba-T*Y)*(ha*N-va*wa)-(O*fa-Z*Y)*(ha*Ba-qa*wa)+(T*fa-Z*ba)*(ha*Ca-la*wa)}function k(N,U,O){const T=U[0],Z=U[1],aa=U[2],Y=U[3],ba=U[4],fa=U[5],ha=U[6],la=U[7],qa=U[8],va=U[9],wa=U[10],Ca=U[11],Ba=U[12],Fa=
U[13],Ma=U[14];U=U[15];let Ga=O[0],Ia=O[1],Ja=O[2],La=O[3];N[0]=Ga*T+Ia*ba+Ja*qa+La*Ba;N[1]=Ga*Z+Ia*fa+Ja*va+La*Fa;N[2]=Ga*aa+Ia*ha+Ja*wa+La*Ma;N[3]=Ga*Y+Ia*la+Ja*Ca+La*U;Ga=O[4];Ia=O[5];Ja=O[6];La=O[7];N[4]=Ga*T+Ia*ba+Ja*qa+La*Ba;N[5]=Ga*Z+Ia*fa+Ja*va+La*Fa;N[6]=Ga*aa+Ia*ha+Ja*wa+La*Ma;N[7]=Ga*Y+Ia*la+Ja*Ca+La*U;Ga=O[8];Ia=O[9];Ja=O[10];La=O[11];N[8]=Ga*T+Ia*ba+Ja*qa+La*Ba;N[9]=Ga*Z+Ia*fa+Ja*va+La*Fa;N[10]=Ga*aa+Ia*ha+Ja*wa+La*Ma;N[11]=Ga*Y+Ia*la+Ja*Ca+La*U;Ga=O[12];Ia=O[13];Ja=O[14];La=O[15];N[12]=
Ga*T+Ia*ba+Ja*qa+La*Ba;N[13]=Ga*Z+Ia*fa+Ja*va+La*Fa;N[14]=Ga*aa+Ia*ha+Ja*wa+La*Ma;N[15]=Ga*Y+Ia*la+Ja*Ca+La*U;return N}function n(N,U,O){const T=O[0],Z=O[1];O=O[2];let aa=void 0,Y=void 0,ba=void 0,fa=void 0,ha=void 0,la=void 0,qa=void 0,va=void 0,wa=void 0,Ca=void 0,Ba=void 0,Fa=void 0;U===N?(N[12]=U[0]*T+U[4]*Z+U[8]*O+U[12],N[13]=U[1]*T+U[5]*Z+U[9]*O+U[13],N[14]=U[2]*T+U[6]*Z+U[10]*O+U[14],N[15]=U[3]*T+U[7]*Z+U[11]*O+U[15]):(aa=U[0],Y=U[1],ba=U[2],fa=U[3],ha=U[4],la=U[5],qa=U[6],va=U[7],wa=U[8],
Ca=U[9],Ba=U[10],Fa=U[11],N[0]=aa,N[1]=Y,N[2]=ba,N[3]=fa,N[4]=ha,N[5]=la,N[6]=qa,N[7]=va,N[8]=wa,N[9]=Ca,N[10]=Ba,N[11]=Fa,N[12]=aa*T+ha*Z+wa*O+U[12],N[13]=Y*T+la*Z+Ca*O+U[13],N[14]=ba*T+qa*Z+Ba*O+U[14],N[15]=fa*T+va*Z+Fa*O+U[15]);return N}function h(N,U,O){const T=O[0],Z=O[1];O=O[2];N[0]=U[0]*T;N[1]=U[1]*T;N[2]=U[2]*T;N[3]=U[3]*T;N[4]=U[4]*Z;N[5]=U[5]*Z;N[6]=U[6]*Z;N[7]=U[7]*Z;N[8]=U[8]*O;N[9]=U[9]*O;N[10]=U[10]*O;N[11]=U[11]*O;N[12]=U[12];N[13]=U[13];N[14]=U[14];N[15]=U[15];return N}function f(N,
U,O,T){let Z=T[0],aa=T[1];T=T[2];let Y=Math.sqrt(Z*Z+aa*aa+T*T);var ba=void 0,fa=void 0;let ha=void 0,la=void 0,qa=void 0,va=void 0,wa=void 0,Ca=void 0,Ba=void 0,Fa=void 0,Ma=void 0,Ga=void 0,Ia=void 0,Ja=void 0,La=void 0,ya=void 0,cb=void 0,gb=void 0,fb=void 0,J=void 0,ib=void 0,Za=void 0;fa=ba=void 0;if(Y<z.EPSILON)return null;Y=1/Y;Z*=Y;aa*=Y;T*=Y;ba=Math.sin(O);fa=Math.cos(O);ha=1-fa;la=U[0];qa=U[1];va=U[2];wa=U[3];Ca=U[4];Ba=U[5];Fa=U[6];Ma=U[7];Ga=U[8];Ia=U[9];Ja=U[10];La=U[11];ya=Z*Z*ha+fa;
cb=aa*Z*ha+T*ba;gb=T*Z*ha-aa*ba;fb=Z*aa*ha-T*ba;J=aa*aa*ha+fa;ib=T*aa*ha+Z*ba;Za=Z*T*ha+aa*ba;ba=aa*T*ha-Z*ba;fa=T*T*ha+fa;N[0]=la*ya+Ca*cb+Ga*gb;N[1]=qa*ya+Ba*cb+Ia*gb;N[2]=va*ya+Fa*cb+Ja*gb;N[3]=wa*ya+Ma*cb+La*gb;N[4]=la*fb+Ca*J+Ga*ib;N[5]=qa*fb+Ba*J+Ia*ib;N[6]=va*fb+Fa*J+Ja*ib;N[7]=wa*fb+Ma*J+La*ib;N[8]=la*Za+Ca*ba+Ga*fa;N[9]=qa*Za+Ba*ba+Ia*fa;N[10]=va*Za+Fa*ba+Ja*fa;N[11]=wa*Za+Ma*ba+La*fa;U!==N&&(N[12]=U[12],N[13]=U[13],N[14]=U[14],N[15]=U[15]);return N}function b(N,U,O){const T=Math.sin(O);
O=Math.cos(O);const Z=U[4],aa=U[5],Y=U[6],ba=U[7],fa=U[8],ha=U[9],la=U[10],qa=U[11];U!==N&&(N[0]=U[0],N[1]=U[1],N[2]=U[2],N[3]=U[3],N[12]=U[12],N[13]=U[13],N[14]=U[14],N[15]=U[15]);N[4]=Z*O+fa*T;N[5]=aa*O+ha*T;N[6]=Y*O+la*T;N[7]=ba*O+qa*T;N[8]=fa*O-Z*T;N[9]=ha*O-aa*T;N[10]=la*O-Y*T;N[11]=qa*O-ba*T;return N}function a(N,U,O){const T=Math.sin(O);O=Math.cos(O);const Z=U[0],aa=U[1],Y=U[2],ba=U[3],fa=U[8],ha=U[9],la=U[10],qa=U[11];U!==N&&(N[4]=U[4],N[5]=U[5],N[6]=U[6],N[7]=U[7],N[12]=U[12],N[13]=U[13],
N[14]=U[14],N[15]=U[15]);N[0]=Z*O-fa*T;N[1]=aa*O-ha*T;N[2]=Y*O-la*T;N[3]=ba*O-qa*T;N[8]=Z*T+fa*O;N[9]=aa*T+ha*O;N[10]=Y*T+la*O;N[11]=ba*T+qa*O;return N}function d(N,U,O){const T=Math.sin(O);O=Math.cos(O);const Z=U[0],aa=U[1],Y=U[2],ba=U[3],fa=U[4],ha=U[5],la=U[6],qa=U[7];U!==N&&(N[8]=U[8],N[9]=U[9],N[10]=U[10],N[11]=U[11],N[12]=U[12],N[13]=U[13],N[14]=U[14],N[15]=U[15]);N[0]=Z*O+fa*T;N[1]=aa*O+ha*T;N[2]=Y*O+la*T;N[3]=ba*O+qa*T;N[4]=fa*O-Z*T;N[5]=ha*O-aa*T;N[6]=la*O-Y*T;N[7]=qa*O-ba*T;return N}function e(N,
U){N[0]=1;N[1]=0;N[2]=0;N[3]=0;N[4]=0;N[5]=1;N[6]=0;N[7]=0;N[8]=0;N[9]=0;N[10]=1;N[11]=0;N[12]=U[0];N[13]=U[1];N[14]=U[2];N[15]=1;return N}function u(N,U){N[0]=U[0];N[1]=0;N[2]=0;N[3]=0;N[4]=0;N[5]=U[1];N[6]=0;N[7]=0;N[8]=0;N[9]=0;N[10]=U[2];N[11]=0;N[12]=0;N[13]=0;N[14]=0;N[15]=1;return N}function m(N,U,O){let T=O[0],Z=O[1];O=O[2];let aa=Math.sqrt(T*T+Z*Z+O*O),Y=void 0,ba=void 0,fa=void 0;if(aa<z.EPSILON)return null;aa=1/aa;T*=aa;Z*=aa;O*=aa;Y=Math.sin(U);ba=Math.cos(U);fa=1-ba;N[0]=T*T*fa+ba;N[1]=
Z*T*fa+O*Y;N[2]=O*T*fa-Z*Y;N[3]=0;N[4]=T*Z*fa-O*Y;N[5]=Z*Z*fa+ba;N[6]=O*Z*fa+T*Y;N[7]=0;N[8]=T*O*fa+Z*Y;N[9]=Z*O*fa-T*Y;N[10]=O*O*fa+ba;N[11]=0;N[12]=0;N[13]=0;N[14]=0;N[15]=1;return N}function x(N,U){const O=Math.sin(U);U=Math.cos(U);N[0]=1;N[1]=0;N[2]=0;N[3]=0;N[4]=0;N[5]=U;N[6]=O;N[7]=0;N[8]=0;N[9]=-O;N[10]=U;N[11]=0;N[12]=0;N[13]=0;N[14]=0;N[15]=1;return N}function A(N,U){const O=Math.sin(U);U=Math.cos(U);N[0]=U;N[1]=0;N[2]=-O;N[3]=0;N[4]=0;N[5]=1;N[6]=0;N[7]=0;N[8]=O;N[9]=0;N[10]=U;N[11]=0;N[12]=
0;N[13]=0;N[14]=0;N[15]=1;return N}function D(N,U){const O=Math.sin(U);U=Math.cos(U);N[0]=U;N[1]=O;N[2]=0;N[3]=0;N[4]=-O;N[5]=U;N[6]=0;N[7]=0;N[8]=0;N[9]=0;N[10]=1;N[11]=0;N[12]=0;N[13]=0;N[14]=0;N[15]=1;return N}function B(N,U,O){var T=U[0],Z=U[1],aa=U[2],Y=U[3],ba=T+T,fa=Z+Z;const ha=aa+aa;U=T*ba;const la=T*fa;T*=ha;const qa=Z*fa;Z*=ha;aa*=ha;ba*=Y;fa*=Y;Y*=ha;N[0]=1-(qa+aa);N[1]=la+Y;N[2]=T-fa;N[3]=0;N[4]=la-Y;N[5]=1-(U+aa);N[6]=Z+ba;N[7]=0;N[8]=T+fa;N[9]=Z-ba;N[10]=1-(U+qa);N[11]=0;N[12]=O[0];
N[13]=O[1];N[14]=O[2];N[15]=1;return N}function C(N,U){const O=pa,T=-U[0],Z=-U[1],aa=-U[2],Y=U[3],ba=U[4],fa=U[5],ha=U[6],la=U[7],qa=T*T+Z*Z+aa*aa+Y*Y;0<qa?(O[0]=2*(ba*Y+la*T+fa*aa-ha*Z)/qa,O[1]=2*(fa*Y+la*Z+ha*T-ba*aa)/qa,O[2]=2*(ha*Y+la*aa+ba*Z-fa*T)/qa):(O[0]=2*(ba*Y+la*T+fa*aa-ha*Z),O[1]=2*(fa*Y+la*Z+ha*T-ba*aa),O[2]=2*(ha*Y+la*aa+ba*Z-fa*T));B(N,U,O);return N}function w(N,U){N[0]=U[12];N[1]=U[13];N[2]=U[14];return N}function E(N,U){const O=U[0],T=U[1],Z=U[2],aa=U[4],Y=U[5],ba=U[6],fa=U[8],ha=
U[9];U=U[10];N[0]=Math.sqrt(O*O+T*T+Z*Z);N[1]=Math.sqrt(aa*aa+Y*Y+ba*ba);N[2]=Math.sqrt(fa*fa+ha*ha+U*U);return N}function I(N,U){const O=U[0]+U[5]+U[10];let T=0;0<O?(T=2*Math.sqrt(O+1),N[3]=.25*T,N[0]=(U[6]-U[9])/T,N[1]=(U[8]-U[2])/T,N[2]=(U[1]-U[4])/T):U[0]>U[5]&&U[0]>U[10]?(T=2*Math.sqrt(1+U[0]-U[5]-U[10]),N[3]=(U[6]-U[9])/T,N[0]=.25*T,N[1]=(U[1]+U[4])/T,N[2]=(U[8]+U[2])/T):U[5]>U[10]?(T=2*Math.sqrt(1+U[5]-U[0]-U[10]),N[3]=(U[8]-U[2])/T,N[0]=(U[1]+U[4])/T,N[1]=.25*T,N[2]=(U[6]+U[9])/T):(T=2*Math.sqrt(1+
U[10]-U[0]-U[5]),N[3]=(U[1]-U[4])/T,N[0]=(U[8]+U[2])/T,N[1]=(U[6]+U[9])/T,N[2]=.25*T);return N}function F(N,U,O,T){var Z=U[0],aa=U[1],Y=U[2],ba=U[3],fa=Z+Z,ha=aa+aa,la=Y+Y;U=Z*fa;const qa=Z*ha;Z*=la;const va=aa*ha;aa*=la;Y*=la;fa*=ba;ha*=ba;ba*=la;la=T[0];const wa=T[1];T=T[2];N[0]=(1-(va+Y))*la;N[1]=(qa+ba)*la;N[2]=(Z-ha)*la;N[3]=0;N[4]=(qa-ba)*wa;N[5]=(1-(U+Y))*wa;N[6]=(aa+fa)*wa;N[7]=0;N[8]=(Z+ha)*T;N[9]=(aa-fa)*T;N[10]=(1-(U+va))*T;N[11]=0;N[12]=O[0];N[13]=O[1];N[14]=O[2];N[15]=1;return N}function H(N,
U,O,T,Z){var aa=U[0],Y=U[1],ba=U[2],fa=U[3],ha=aa+aa,la=Y+Y,qa=ba+ba;U=aa*ha;var va=aa*la,wa=aa*qa;aa=Y*la;Y*=qa;var Ca=ba*qa;ba=fa*ha;la*=fa;const Ba=fa*qa;var Fa=T[0],Ma=T[1];qa=T[2];T=Z[0];fa=Z[1];Z=Z[2];ha=(1-(aa+Ca))*Fa;const Ga=(va+Ba)*Fa;Fa*=wa-la;va=(va-Ba)*Ma;Ca=(1-(U+Ca))*Ma;Ma*=Y+ba;wa=(wa+la)*qa;Y=(Y-ba)*qa;U=(1-(U+aa))*qa;N[0]=ha;N[1]=Ga;N[2]=Fa;N[3]=0;N[4]=va;N[5]=Ca;N[6]=Ma;N[7]=0;N[8]=wa;N[9]=Y;N[10]=U;N[11]=0;N[12]=O[0]+T-(ha*T+va*fa+wa*Z);N[13]=O[1]+fa-(Ga*T+Ca*fa+Y*Z);N[14]=O[2]+
Z-(Fa*T+Ma*fa+U*Z);N[15]=1;return N}function K(N,U){var O=U[0],T=U[1],Z=U[2];U=U[3];var aa=O+O,Y=T+T;const ba=Z+Z;O*=aa;const fa=T*aa;T*=Y;const ha=Z*aa,la=Z*Y;Z*=ba;aa*=U;Y*=U;U*=ba;N[0]=1-T-Z;N[1]=fa+U;N[2]=ha-Y;N[3]=0;N[4]=fa-U;N[5]=1-O-Z;N[6]=la+aa;N[7]=0;N[8]=ha+Y;N[9]=la-aa;N[10]=1-O-T;N[11]=0;N[12]=0;N[13]=0;N[14]=0;N[15]=1;return N}function G(N,U,O,T,Z,aa,Y){const ba=1/(O-U),fa=1/(Z-T),ha=1/(aa-Y);N[0]=2*aa*ba;N[1]=0;N[2]=0;N[3]=0;N[4]=0;N[5]=2*aa*fa;N[6]=0;N[7]=0;N[8]=(O+U)*ba;N[9]=(Z+T)*
fa;N[10]=(Y+aa)*ha;N[11]=-1;N[12]=0;N[13]=0;N[14]=Y*aa*2*ha;N[15]=0;return N}function L(N,U,O,T,Z){U=1/Math.tan(U/2);let aa=void 0;N[0]=U/O;N[1]=0;N[2]=0;N[3]=0;N[4]=0;N[5]=U;N[6]=0;N[7]=0;N[8]=0;N[9]=0;N[11]=-1;N[12]=0;N[13]=0;N[15]=0;null!=Z&&Infinity!==Z?(aa=1/(T-Z),N[10]=(Z+T)*aa,N[14]=2*Z*T*aa):(N[10]=-1,N[14]=-2*T);return N}function P(N,U,O,T){const Z=Math.tan(U.upDegrees*Math.PI/180),aa=Math.tan(U.downDegrees*Math.PI/180),Y=Math.tan(U.leftDegrees*Math.PI/180);U=Math.tan(U.rightDegrees*Math.PI/
180);const ba=2/(Y+U),fa=2/(Z+aa);N[0]=ba;N[1]=0;N[2]=0;N[3]=0;N[4]=0;N[5]=fa;N[6]=0;N[7]=0;N[8]=-((Y-U)*ba*.5);N[9]=(Z-aa)*fa*.5;N[10]=T/(O-T);N[11]=-1;N[12]=0;N[13]=0;N[14]=T*O/(O-T);N[15]=0;return N}function R(N,U,O,T,Z,aa,Y){const ba=1/(U-O),fa=1/(T-Z),ha=1/(aa-Y);N[0]=-2*ba;N[1]=0;N[2]=0;N[3]=0;N[4]=0;N[5]=-2*fa;N[6]=0;N[7]=0;N[8]=0;N[9]=0;N[10]=2*ha;N[11]=0;N[12]=(U+O)*ba;N[13]=(Z+T)*fa;N[14]=(Y+aa)*ha;N[15]=1;return N}function S(N,U,O,T){let Z=void 0,aa=void 0;var Y=void 0,ba=void 0;let fa=
void 0,ha=void 0;var la=void 0,qa=void 0;let va=void 0,wa=void 0;const Ca=U[0],Ba=U[1];U=U[2];Y=T[0];ba=T[1];T=T[2];la=O[0];qa=O[1];O=O[2];if(Math.abs(Ca-la)<z.EPSILON&&Math.abs(Ba-qa)<z.EPSILON&&Math.abs(U-O)<z.EPSILON)return t(N);la=Ca-la;qa=Ba-qa;va=U-O;wa=1/Math.sqrt(la*la+qa*qa+va*va);la*=wa;qa*=wa;va*=wa;Z=ba*va-T*qa;aa=T*la-Y*va;Y=Y*qa-ba*la;(wa=Math.sqrt(Z*Z+aa*aa+Y*Y))?(wa=1/wa,Z*=wa,aa*=wa,Y*=wa):Y=aa=Z=0;ba=qa*Y-va*aa;fa=va*Z-la*Y;ha=la*aa-qa*Z;(wa=Math.sqrt(ba*ba+fa*fa+ha*ha))?(wa=1/wa,
ba*=wa,fa*=wa,ha*=wa):ha=fa=ba=0;N[0]=Z;N[1]=ba;N[2]=la;N[3]=0;N[4]=aa;N[5]=fa;N[6]=qa;N[7]=0;N[8]=Y;N[9]=ha;N[10]=va;N[11]=0;N[12]=-(Z*Ca+aa*Ba+Y*U);N[13]=-(ba*Ca+fa*Ba+ha*U);N[14]=-(la*Ca+qa*Ba+va*U);N[15]=1;return N}function M(N,U,O,T){const Z=U[0],aa=U[1];U=U[2];var Y=T[0];const ba=T[1];var fa=T[2];T=Z-O[0];let ha=aa-O[1];O=U-O[2];let la=T*T+ha*ha+O*O;0<la&&(la=1/Math.sqrt(la),T*=la,ha*=la,O*=la);let qa=ba*O-fa*ha;fa=fa*T-Y*O;Y=Y*ha-ba*T;la=qa*qa+fa*fa+Y*Y;0<la&&(la=1/Math.sqrt(la),qa*=la,fa*=
la,Y*=la);N[0]=qa;N[1]=fa;N[2]=Y;N[3]=0;N[4]=ha*Y-O*fa;N[5]=O*qa-T*Y;N[6]=T*fa-ha*qa;N[7]=0;N[8]=T;N[9]=ha;N[10]=O;N[11]=0;N[12]=Z;N[13]=aa;N[14]=U;N[15]=1;return N}function V(N){return"mat4("+N[0]+", "+N[1]+", "+N[2]+", "+N[3]+", "+N[4]+", "+N[5]+", "+N[6]+", "+N[7]+", "+N[8]+", "+N[9]+", "+N[10]+", "+N[11]+", "+N[12]+", "+N[13]+", "+N[14]+", "+N[15]+")"}function W(N){return Math.sqrt(N[0]**2+N[1]**2+N[2]**2+N[3]**2+N[4]**2+N[5]**2+N[6]**2+N[7]**2+N[8]**2+N[9]**2+N[10]**2+N[11]**2+N[12]**2+N[13]**
2+N[14]**2+N[15]**2)}function ea(N,U,O){N[0]=U[0]+O[0];N[1]=U[1]+O[1];N[2]=U[2]+O[2];N[3]=U[3]+O[3];N[4]=U[4]+O[4];N[5]=U[5]+O[5];N[6]=U[6]+O[6];N[7]=U[7]+O[7];N[8]=U[8]+O[8];N[9]=U[9]+O[9];N[10]=U[10]+O[10];N[11]=U[11]+O[11];N[12]=U[12]+O[12];N[13]=U[13]+O[13];N[14]=U[14]+O[14];N[15]=U[15]+O[15];return N}function ka(N,U,O){N[0]=U[0]-O[0];N[1]=U[1]-O[1];N[2]=U[2]-O[2];N[3]=U[3]-O[3];N[4]=U[4]-O[4];N[5]=U[5]-O[5];N[6]=U[6]-O[6];N[7]=U[7]-O[7];N[8]=U[8]-O[8];N[9]=U[9]-O[9];N[10]=U[10]-O[10];N[11]=U[11]-
O[11];N[12]=U[12]-O[12];N[13]=U[13]-O[13];N[14]=U[14]-O[14];N[15]=U[15]-O[15];return N}function sa(N,U,O){N[0]=U[0]*O;N[1]=U[1]*O;N[2]=U[2]*O;N[3]=U[3]*O;N[4]=U[4]*O;N[5]=U[5]*O;N[6]=U[6]*O;N[7]=U[7]*O;N[8]=U[8]*O;N[9]=U[9]*O;N[10]=U[10]*O;N[11]=U[11]*O;N[12]=U[12]*O;N[13]=U[13]*O;N[14]=U[14]*O;N[15]=U[15]*O;return N}function ua(N,U,O,T){N[0]=U[0]+O[0]*T;N[1]=U[1]+O[1]*T;N[2]=U[2]+O[2]*T;N[3]=U[3]+O[3]*T;N[4]=U[4]+O[4]*T;N[5]=U[5]+O[5]*T;N[6]=U[6]+O[6]*T;N[7]=U[7]+O[7]*T;N[8]=U[8]+O[8]*T;N[9]=U[9]+
O[9]*T;N[10]=U[10]+O[10]*T;N[11]=U[11]+O[11]*T;N[12]=U[12]+O[12]*T;N[13]=U[13]+O[13]*T;N[14]=U[14]+O[14]*T;N[15]=U[15]+O[15]*T;return N}function xa(N,U){return N[0]===U[0]&&N[1]===U[1]&&N[2]===U[2]&&N[3]===U[3]&&N[4]===U[4]&&N[5]===U[5]&&N[6]===U[6]&&N[7]===U[7]&&N[8]===U[8]&&N[9]===U[9]&&N[10]===U[10]&&N[11]===U[11]&&N[12]===U[12]&&N[13]===U[13]&&N[14]===U[14]&&N[15]===U[15]}function oa(N,U){const O=N[0],T=N[1],Z=N[2],aa=N[3],Y=N[4],ba=N[5],fa=N[6],ha=N[7],la=N[8],qa=N[9],va=N[10],wa=N[11],Ca=N[12],
Ba=N[13],Fa=N[14];N=N[15];const Ma=U[0],Ga=U[1],Ia=U[2],Ja=U[3],La=U[4],ya=U[5],cb=U[6],gb=U[7],fb=U[8],J=U[9],ib=U[10],Za=U[11],Ua=U[12],Ta=U[13],jb=U[14];U=U[15];return Math.abs(O-Ma)<=z.EPSILON*Math.max(1,Math.abs(O),Math.abs(Ma))&&Math.abs(T-Ga)<=z.EPSILON*Math.max(1,Math.abs(T),Math.abs(Ga))&&Math.abs(Z-Ia)<=z.EPSILON*Math.max(1,Math.abs(Z),Math.abs(Ia))&&Math.abs(aa-Ja)<=z.EPSILON*Math.max(1,Math.abs(aa),Math.abs(Ja))&&Math.abs(Y-La)<=z.EPSILON*Math.max(1,Math.abs(Y),Math.abs(La))&&Math.abs(ba-
ya)<=z.EPSILON*Math.max(1,Math.abs(ba),Math.abs(ya))&&Math.abs(fa-cb)<=z.EPSILON*Math.max(1,Math.abs(fa),Math.abs(cb))&&Math.abs(ha-gb)<=z.EPSILON*Math.max(1,Math.abs(ha),Math.abs(gb))&&Math.abs(la-fb)<=z.EPSILON*Math.max(1,Math.abs(la),Math.abs(fb))&&Math.abs(qa-J)<=z.EPSILON*Math.max(1,Math.abs(qa),Math.abs(J))&&Math.abs(va-ib)<=z.EPSILON*Math.max(1,Math.abs(va),Math.abs(ib))&&Math.abs(wa-Za)<=z.EPSILON*Math.max(1,Math.abs(wa),Math.abs(Za))&&Math.abs(Ca-Ua)<=z.EPSILON*Math.max(1,Math.abs(Ca),Math.abs(Ua))&&
Math.abs(Ba-Ta)<=z.EPSILON*Math.max(1,Math.abs(Ba),Math.abs(Ta))&&Math.abs(Fa-jb)<=z.EPSILON*Math.max(1,Math.abs(Fa),Math.abs(jb))&&Math.abs(N-U)<=z.EPSILON*Math.max(1,Math.abs(N),Math.abs(U))}function ra(N){const U=z.EPSILON,O=N[0],T=N[1],Z=N[2],aa=N[4],Y=N[5],ba=N[6],fa=N[8],ha=N[9];N=N[10];return Math.abs(1-(O*O+aa*aa+fa*fa))<=U&&Math.abs(1-(T*T+Y*Y+ha*ha))<=U&&Math.abs(1-(Z*Z+ba*ba+N*N))<=U}const pa=c.create();c=Object.freeze({__proto__:null,copy:y,set:r,identity:t,transpose:l,invert:v,adjoint:q,
determinant:g,multiply:k,translate:n,scale:h,rotate:f,rotateX:b,rotateY:a,rotateZ:d,fromTranslation:e,fromScaling:u,fromRotation:m,fromXRotation:x,fromYRotation:A,fromZRotation:D,fromRotationTranslation:B,fromQuat2:C,getTranslation:w,getScaling:E,getRotation:I,fromRotationTranslationScale:F,fromRotationTranslationScaleOrigin:H,fromQuat:K,frustum:G,perspective:L,perspectiveFromFieldOfView:P,ortho:R,lookAt:S,targetTo:M,str:V,frob:W,add:ea,subtract:ka,multiplyScalar:sa,multiplyScalarAndAdd:ua,exactEquals:xa,
equals:oa,isOrthoNormal:ra,mul:k,sub:ka});p.add=ea;p.adjoint=q;p.copy=y;p.determinant=g;p.equals=oa;p.exactEquals=xa;p.frob=W;p.fromQuat=K;p.fromQuat2=C;p.fromRotation=m;p.fromRotationTranslation=B;p.fromRotationTranslationScale=F;p.fromRotationTranslationScaleOrigin=H;p.fromScaling=u;p.fromTranslation=e;p.fromXRotation=x;p.fromYRotation=A;p.fromZRotation=D;p.frustum=G;p.getRotation=I;p.getScaling=E;p.getTranslation=w;p.identity=t;p.invert=v;p.isOrthoNormal=ra;p.lookAt=S;p.mat4=c;p.mul=k;p.multiply=
k;p.multiplyScalar=sa;p.multiplyScalarAndAdd=ua;p.ortho=R;p.perspective=L;p.perspectiveFromFieldOfView=P;p.rotate=f;p.rotateX=b;p.rotateY=a;p.rotateZ=d;p.scale=h;p.set=r;p.str=V;p.sub=ka;p.subtract=ka;p.targetTo=M;p.translate=n;p.transpose=l})},"esri/chunks/pe":function(){define(["require","exports","./_rollupPluginBabelHelpers","../assets","../core/has"],function(p,c,z,y,r){function t(){return!!c._pe}function l(){return!!r("esri-wasm")}function v(){return f?f:f=(new Promise(function(a,d){p(["./pe-wasm"],
a,d)})).then(function(a){return a.peWasm}).then(({default:a})=>a({locateFile:d=>y.getAssetUrl(`esri/geometry/support/${d}`)})).then(a=>{q(a)})}function q(a){function d(m,x,A){m[x]=A(m[x])}c._pe=a;c.PeDefs.init();c.PeGTlistExtended.init();c.PeNotationMgrs.init();c.PeNotationUtm.init();c.PePCSInfo.init();c.PeGCSExtent=function(m){function x(){return m.apply(this,arguments)||this}z._inheritsLoose(x,m);x.prototype.destroy=function(){c._pe.destroy(this)};return x}(c._pe.PeGCSExtent);a=[c._pe.PeDatum,c._pe.PeGeogcs,
c._pe.PeGeogtran,c._pe.PeObject,c._pe.PeParameter,c._pe.PePrimem,c._pe.PeProjcs,c._pe.PeSpheroid,c._pe.PeUnit];for(var e of a)d(e.prototype,"getName",m=>function(){return m.call(this,Array(c.PeDefs.PE_NAME_MAX))});for(const m of[c._pe.PeGeogtran,c._pe.PeProjcs])d(m.prototype,"getParameters",x=>function(){const A=Array(c.PeDefs.PE_PARM_MAX);let D=x.call(this);for(let B=0;B<A.length;B++){const C=c._pe.getValue(D,"*");A[B]=C?c._pe.wrapPointer(C,c._pe.PeParameter):null;D+=Int32Array.BYTES_PER_ELEMENT}return A});
d(c._pe.PeHorizon.prototype,"getCoord",m=>function(){const x=this.getSize();if(!x)return null;const A=[],D=m.call(this);h(A,x,D);return A});d(c._pe.PeGTlistExtendedEntry.prototype,"getEntries",m=>{const x=c._pe._pe_getPeGTlistExtendedGTsSize();return function(){let A=null;var D=m.call(this);if(!c._pe.compare(D,c._pe.NULL)){A=[D];const B=this.getSteps();if(1<B){D=c._pe.getPointer(D);for(let C=1;C<B;C++)A.push(c._pe.wrapPointer(D+x*C,c._pe.PeGTlistExtendedGTs))}}return A}});const u=c._pe._pe_getPeHorizonSize();
e=m=>function(){let x=this._cache;x||(this._cache=x=new Map);if(x.has(m))return x.get(m);let A=null;var D=m.call(this);if(!c._pe.compare(D,c._pe.NULL)){A=[D];const B=D.getNump();if(1<B){D=c._pe.getPointer(D);for(let C=1;C<B;C++)A.push(c._pe.wrapPointer(D+u*C,c._pe.PeHorizon))}}x.set(m,A);return A};d(c._pe.PeProjcs.prototype,"horizonGcsGenerate",e);d(c._pe.PeProjcs.prototype,"horizonPcsGenerate",e);c._pe.PeObject.prototype.toString=function(m=c.PeDefs.PE_STR_OPTS_NONE){c._pe.ensureCache.prepare();
const x=c._pe.getPointer(this),A=c._pe.ensureInt8(Array(c.PeDefs.PE_BUFFER_MAX));return c._pe.UTF8ToString(c._pe._pe_object_to_string_ext(x,m,A))}}function g(a){if(a){var d=c._pe.getClass(a);d&&(d=c._pe.getCache(d))&&(a=c._pe.getPointer(a))&&delete d[a]}}function k(a,d){const e=[];d=Array(d);for(let u=0;u<a;u++)e.push(c._pe.ensureInt8(d));return e}function n(a){let d;Array.isArray(a[0])?(d=[],a.forEach(e=>{d.push(e[0],e[1])})):d=a;return d}function h(a,d,e,u=!1){if(u)for(u=0;u<2*d;u++)a[u]=c._pe.getValue(e+
u*Float64Array.BYTES_PER_ELEMENT,"double");else{u=0===a.length;for(let m=0;m<d;m++)u&&(a[m]=Array(2)),a[m][0]=c._pe.getValue(e,"double"),a[m][1]=c._pe.getValue(e+Float64Array.BYTES_PER_ELEMENT,"double"),e+=2*Float64Array.BYTES_PER_ELEMENT}}let f;c._pe=null;c.PeCSTransformations=void 0;(function(a){function d(m,x,A){c._pe.ensureCache.prepare();var D=n(A);const B=A===D;D=c._pe.ensureFloat64(D);(m=c._pe._pe_geog_to_proj(c._pe.getPointer(m),x,D))&&h(A,x,D,B);return m}function e(m,x,A){return u(m,x,A,
0)}function u(m,x,A,D){c._pe.ensureCache.prepare();var B=n(A);const C=A===B;B=c._pe.ensureFloat64(B);(m=c._pe._pe_proj_to_geog_center(c._pe.getPointer(m),x,B,D))&&h(A,x,B,C);return m}a.geogToProj=d;a.projGeog=function(m,x,A,D){switch(D){case c.PeDefs.PE_TRANSFORM_P_TO_G:return e(m,x,A);case c.PeDefs.PE_TRANSFORM_G_TO_P:return d(m,x,A)}return 0};a.projToGeog=e;a.projToGeogCenter=u})(c.PeCSTransformations||(c.PeCSTransformations={}));c.PeDefs=void 0;(function(a){a.init=function(){a.PE_BUFFER_MAX=c._pe.PeDefs.prototype.PE_BUFFER_MAX;
a.PE_NAME_MAX=c._pe.PeDefs.prototype.PE_NAME_MAX;a.PE_MGRS_MAX=c._pe.PeDefs.prototype.PE_MGRS_MAX;a.PE_USNG_MAX=c._pe.PeDefs.prototype.PE_USNG_MAX;a.PE_DD_MAX=c._pe.PeDefs.prototype.PE_DD_MAX;a.PE_DDM_MAX=c._pe.PeDefs.prototype.PE_DDM_MAX;a.PE_DMS_MAX=c._pe.PeDefs.prototype.PE_DMS_MAX;a.PE_UTM_MAX=c._pe.PeDefs.prototype.PE_UTM_MAX;a.PE_PARM_MAX=c._pe.PeDefs.prototype.PE_PARM_MAX;a.PE_TYPE_NONE=c._pe.PeDefs.prototype.PE_TYPE_NONE;a.PE_TYPE_GEOGCS=c._pe.PeDefs.prototype.PE_TYPE_GEOGCS;a.PE_TYPE_PROJCS=
c._pe.PeDefs.prototype.PE_TYPE_PROJCS;a.PE_TYPE_GEOGTRAN=c._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN;a.PE_TYPE_COORDSYS=c._pe.PeDefs.prototype.PE_TYPE_COORDSYS;a.PE_TYPE_UNIT=c._pe.PeDefs.prototype.PE_TYPE_UNIT;a.PE_TYPE_LINUNIT=c._pe.PeDefs.prototype.PE_TYPE_LINUNIT;a.PE_STR_OPTS_NONE=c._pe.PeDefs.prototype.PE_STR_OPTS_NONE;a.PE_STR_AUTH_NONE=c._pe.PeDefs.prototype.PE_STR_AUTH_NONE;a.PE_STR_AUTH_TOP=c._pe.PeDefs.prototype.PE_STR_AUTH_TOP;a.PE_STR_NAME_CANON=c._pe.PeDefs.prototype.PE_STR_NAME_CANON;a.PE_PARM_X0=
c._pe.PeDefs.prototype.PE_PARM_X0;a.PE_PARM_ND=c._pe.PeDefs.prototype.PE_PARM_ND;a.PE_TRANSFORM_1_TO_2=c._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2;a.PE_TRANSFORM_2_TO_1=c._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1;a.PE_TRANSFORM_P_TO_G=c._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G;a.PE_TRANSFORM_G_TO_P=c._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P;a.PE_HORIZON_RECT=c._pe.PeDefs.prototype.PE_HORIZON_RECT;a.PE_HORIZON_POLY=c._pe.PeDefs.prototype.PE_HORIZON_POLY;a.PE_HORIZON_LINE=c._pe.PeDefs.prototype.PE_HORIZON_LINE;
a.PE_HORIZON_DELTA=c._pe.PeDefs.prototype.PE_HORIZON_DELTA}})(c.PeDefs||(c.PeDefs={}));c.PeFactory=void 0;(function(a){function d(x,A){let D=null,B=e[x];B||(B={},e[x]=B);B.hasOwnProperty(String(A))?D=B[A]:(x=c._pe.PeFactory.prototype.factoryByType(x,A),c._pe.compare(x,c._pe.NULL)||(D=x,B[A]=D));return D=m(D)}const e={},u={},m=x=>{if(x){const A=x.getType();switch(A){case c.PeDefs.PE_TYPE_GEOGCS:x=c._pe.castObject(x,c._pe.PeGeogcs);break;case c.PeDefs.PE_TYPE_PROJCS:x=c._pe.castObject(x,c._pe.PeProjcs);
break;case c.PeDefs.PE_TYPE_GEOGTRAN:x=c._pe.castObject(x,c._pe.PeGeogtran);break;default:A&c.PeDefs.PE_TYPE_UNIT&&(x=c._pe.castObject(x,c._pe.PeUnit))}}return x};a.initialize=function(){c._pe.PeFactory.prototype.initialize(null)};a.coordsys=function(x){return d(c.PeDefs.PE_TYPE_COORDSYS,x)};a.factoryByType=d;a.fromString=function(x,A){let D=null,B=u[x];B||(B={},u[x]=B);B.hasOwnProperty(A)?D=B[A]:(x=c._pe.PeFactory.prototype.fromString(x,A),c._pe.compare(x,c._pe.NULL)||(D=x,B[A]=D));return D=m(D)};
a.geogcs=function(x){return d(c.PeDefs.PE_TYPE_GEOGCS,x)};a.geogtran=function(x){return d(c.PeDefs.PE_TYPE_GEOGTRAN,x)};a.getCode=function(x){return c._pe.PeFactory.prototype.getCode(x)};a.projcs=function(x){return d(c.PeDefs.PE_TYPE_PROJCS,x)};a.unit=function(x){return d(c.PeDefs.PE_TYPE_UNIT,x)}})(c.PeFactory||(c.PeFactory={}));c.PeGCSExtent=null;c.PeGTlistExtended=void 0;(function(a){let d;a.init=function(){a.PE_GTLIST_OPTS_COMMON=c._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON;d=c._pe._pe_getPeGTlistExtendedEntrySize()};
a.getGTlist=function(e,u,m,x,A,D){let B=null;const C=new c._pe.PeInteger(D);try{const w=c._pe.PeGTlistExtended.prototype.getGTlist(e,u,m,x,A,C);if(D=C.val)if(B=[w],1<D){const E=c._pe.getPointer(w);for(e=1;e<D;e++)B.push(c._pe.wrapPointer(E+d*e,c._pe.PeGTlistExtendedEntry))}}finally{c._pe.destroy(C)}return B}})(c.PeGTlistExtended||(c.PeGTlistExtended={}));c.PeGTlistExtendedEntry=void 0;(function(a){a.destroy=function(d){if(d&&d.length){for(const e of d)g(e),e.getEntries().forEach(u=>{g(u);u=u.getGeogtran();
g(u);u.getParameters().forEach(g);[u.getGeogcs1(),u.getGeogcs2()].forEach(m=>{g(m);const x=m.getDatum();g(x);g(x.getSpheroid());g(m.getPrimem());g(m.getUnit())})});c._pe.PeGTlistExtendedEntry.prototype.Delete(d[0])}}})(c.PeGTlistExtendedEntry||(c.PeGTlistExtendedEntry={}));c.PeGTTransformations=void 0;(function(a){a.geogToGeog=function(d,e,u,m,x){c._pe.ensureCache.prepare();var A=n(u);const D=u===A;A=c._pe.ensureFloat64(A);let B=0;m&&(B=c._pe.ensureFloat64(m));(d=c._pe._pe_geog_to_geog(c._pe.getPointer(d),
e,A,B,x))&&h(u,e,A,D);return d}})(c.PeGTTransformations||(c.PeGTTransformations={}));c.PeNotationDms=void 0;(function(a){const d=(u,m,x,A,D,B)=>{c._pe.ensureCache.prepare();switch(u){case "dd":var C=c._pe._pe_geog_to_dd;var w=c.PeDefs.PE_DD_MAX;break;case "ddm":C=c._pe._pe_geog_to_ddm;w=c.PeDefs.PE_DDM_MAX;break;case "dms":C=c._pe._pe_geog_to_dms,w=c.PeDefs.PE_DMS_MAX}u=0;m&&(u=c._pe.getPointer(m));m=n(A);m=c._pe.ensureFloat64(m);w=k(x,w);A=c._pe.ensureInt32(w);if(D=C(u,x,m,D,A))for(C=0;C<x;C++)B[C]=
c._pe.UTF8ToString(w[C]);return D},e=(u,m,x,A,D)=>{c._pe.ensureCache.prepare();switch(u){case "dd":var B=c._pe._pe_dd_to_geog;break;case "ddm":B=c._pe._pe_ddm_to_geog;break;case "dms":B=c._pe._pe_dms_to_geog}u=0;m&&(u=c._pe.getPointer(m));m=A.map(C=>c._pe.ensureString(C));A=c._pe.ensureInt32(m);m=c._pe.ensureFloat64(Array(2*x));(B=B(u,x,A,m))&&h(D,x,m);return B};a.geog_to_dms=function(u,m,x,A,D){return d("dms",u,m,x,A,D)};a.dms_to_geog=function(u,m,x,A){return e("dms",u,m,x,A)};a.geog_to_ddm=function(u,
m,x,A,D){return d("ddm",u,m,x,A,D)};a.ddm_to_geog=function(u,m,x,A){return e("ddm",u,m,x,A)};a.geog_to_dd=function(u,m,x,A,D){return d("dd",u,m,x,A,D)};a.dd_to_geog=function(u,m,x,A){return e("dd",u,m,x,A)}})(c.PeNotationDms||(c.PeNotationDms={}));c.PeNotationMgrs=void 0;(function(a){a.init=function(){a.PE_MGRS_STYLE_NEW=c._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW;a.PE_MGRS_STYLE_OLD=c._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD;a.PE_MGRS_STYLE_AUTO=c._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO;
a.PE_MGRS_180_ZONE_1_PLUS=c._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS;a.PE_MGRS_ADD_SPACES=c._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES};a.geog_to_mgrs_extended=function(d,e,u,m,x,A,D){c._pe.ensureCache.prepare();let B=0;d&&(B=c._pe.getPointer(d));d=n(u);u=c._pe.ensureFloat64(d);d=k(e,c.PeDefs.PE_MGRS_MAX);const C=c._pe.ensureInt32(d);if(m=c._pe._pe_geog_to_mgrs_extended(B,e,u,m,x,A,C))for(x=0;x<e;x++)D[x]=c._pe.UTF8ToString(d[x]);return m};a.mgrs_to_geog_extended=function(d,e,u,m,
x){c._pe.ensureCache.prepare();let A=0;d&&(A=c._pe.getPointer(d));d=u.map(D=>c._pe.ensureString(D));u=c._pe.ensureInt32(d);d=c._pe.ensureFloat64(Array(2*e));(m=c._pe._pe_mgrs_to_geog_extended(A,e,u,m,d))&&h(x,e,d);return m}})(c.PeNotationMgrs||(c.PeNotationMgrs={}));c.PeNotationUsng=void 0;(function(a){a.geog_to_usng=function(d,e,u,m,x,A,D){c._pe.ensureCache.prepare();let B=0;d&&(B=c._pe.getPointer(d));d=n(u);u=c._pe.ensureFloat64(d);d=k(e,c.PeDefs.PE_MGRS_MAX);const C=c._pe.ensureInt32(d);if(m=c._pe._pe_geog_to_usng(B,
e,u,m,x,A,C))for(x=0;x<e;x++)D[x]=c._pe.UTF8ToString(d[x]);return m};a.usng_to_geog=function(d,e,u,m){c._pe.ensureCache.prepare();var x=0;d&&(x=c._pe.getPointer(d));d=u.map(A=>c._pe.ensureString(A));u=c._pe.ensureInt32(d);d=c._pe.ensureFloat64(Array(2*e));(x=c._pe._pe_usng_to_geog(x,e,u,d))&&h(m,e,d);return x}})(c.PeNotationUsng||(c.PeNotationUsng={}));c.PeNotationUtm=void 0;(function(a){a.init=function(){a.PE_UTM_OPTS_NONE=c._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE;a.PE_UTM_OPTS_ADD_SPACES=c._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES;
a.PE_UTM_OPTS_NS=c._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS};a.geog_to_utm=function(d,e,u,m,x){c._pe.ensureCache.prepare();var A=0;d&&(A=c._pe.getPointer(d));d=n(u);u=c._pe.ensureFloat64(d);d=k(e,c.PeDefs.PE_UTM_MAX);const D=c._pe.ensureInt32(d);if(m=c._pe._pe_geog_to_utm(A,e,u,m,D))for(A=0;A<e;A++)x[A]=c._pe.UTF8ToString(d[A]);return m};a.utm_to_geog=function(d,e,u,m,x){c._pe.ensureCache.prepare();let A=0;d&&(A=c._pe.getPointer(d));d=u.map(D=>c._pe.ensureString(D));u=c._pe.ensureInt32(d);d=c._pe.ensureFloat64(Array(2*
e));(m=c._pe._pe_utm_to_geog(A,e,u,m,d))&&h(x,e,d);return m}})(c.PeNotationUtm||(c.PeNotationUtm={}));c.PePCSInfo=void 0;(function(a){const d=new Map;a.init=function(){a.PE_PCSINFO_OPTION_NONE=c._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE;a.PE_PCSINFO_OPTION_DOMAIN=c._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN;a.PE_POLE_OUTSIDE_BOUNDARY=c._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY;a.PE_POLE_POINT=c._pe.PePCSInfo.prototype.PE_POLE_POINT};a.generate=function(e,u=a.PE_PCSINFO_OPTION_DOMAIN){let m,
x;d.has(e)&&(x=d.get(e),x[u]&&(m=x[u]));m||(m=c._pe.PePCSInfo.prototype.generate(e,u),x||(x=[],d.set(e,x)),x[u]=m);return m}})(c.PePCSInfo||(c.PePCSInfo={}));c.PeVersion=void 0;(function(a){a.version_string=function(){return c._pe.PeVersion.prototype.version_string()}})(c.PeVersion||(c.PeVersion={}));var b=Object.freeze({__proto__:null,get _pe(){return c._pe},isLoaded:t,isSupported:l,load:v,get PeCSTransformations(){return c.PeCSTransformations},get PeDefs(){return c.PeDefs},get PeFactory(){return c.PeFactory},
get PeGCSExtent(){return c.PeGCSExtent},get PeGTlistExtended(){return c.PeGTlistExtended},get PeGTlistExtendedEntry(){return c.PeGTlistExtendedEntry},get PeGTTransformations(){return c.PeGTTransformations},get PeNotationDms(){return c.PeNotationDms},get PeNotationMgrs(){return c.PeNotationMgrs},get PeNotationUsng(){return c.PeNotationUsng},get PeNotationUtm(){return c.PeNotationUtm},get PePCSInfo(){return c.PePCSInfo},get PeVersion(){return c.PeVersion},_init:q});c._init=q;c.isLoaded=t;c.isSupported=
l;c.load=v;c.pe=b})},"esri/assets":function(){define("exports ./config ./request ./core/Error ./core/Logger ./core/urlUtils".split(" "),function(p,c,z,y,r,t){function l(q){if(!c.assetsPath)throw v.errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new y("assets:path-not-set","config.assetsPath is not set");return t.join(c.assetsPath,q)}const v=r.getLogger("esri.assets");p.fetchAsset=function(q,g){return z(l(q),g)};p.getAssetUrl=
l;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/geometry/support/geodesicConstants":function(){define(["exports","./Ellipsoid"],function(p,c){const z=Math.PI/180;var y=c.earth.radius;const r=c.earth.eccentricitySquared;y={a1:y*r,a2:y*r*y*r,a3:y*r*r/2,a4:y*r*y*r*2.5,a5:y*r+y*r*r/2,a6:1-r};c={4267:{a:6378206.4,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:c.earth.radius,f:c.earth.flattening},104900:{a:2439700,f:0},104901:{a:6051E3,f:0},104902:{a:6051800,f:0},104903:{a:c.moon.radius,
f:c.moon.flattening},104904:{a:3393400,f:.005207166853303471},104905:{a:c.mars.radius,f:c.mars.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492E3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1E4,f:0},104912:{a:2409300,f:0},104913:{a:15E3,f:0},104914:{a:4E4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85E3,f:0},104918:{a:1821460,f:0},104919:{a:5E3,f:0},104920:{a:12E3,f:0},104921:{a:3E4,f:3},104922:{a:18E3,f:0},104923:{a:14E3,f:0},104924:{a:49300,
f:0},104925:{a:60268E3,f:.09796243445941462},104926:{a:16E3,f:0},104927:{a:9500,f:0},104928:{a:56E4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16E3,f:0},104932:{a:133E3,f:0},104933:{a:718E3,f:0},104934:{a:888E3,f:0},104935:{a:1986300,f:0},104936:{a:1E4,f:0},104937:{a:41900,f:0},104938:{a:11E4,f:0},104939:{a:50100,f:0},104940:{a:764E3,f:0},104941:{a:11E3,f:0},104942:{a:529800,f:0},104943:{a:2575E3,f:0},104944:{a:25559E3,f:.022927344575296365},104945:{a:578900,f:0},104946:{a:33E3,f:0},
104947:{a:21E3,f:0},104948:{a:13E3,f:0},104949:{a:31E3,f:0},104950:{a:27E3,f:0},104951:{a:42E3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15E3,f:0},104955:{a:54E3,f:0},104956:{a:77E3,f:0},104957:{a:27E3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764E3,f:.01708124697141011},104961:{a:74E3,f:0},104962:{a:79E3,f:0},104963:{a:104E3,f:.14423076923076922},104964:{a:29E3,f:0},104965:{a:17E4,f:0},104966:{a:208E3,f:0},104967:{a:4E4,f:0},104968:{a:1352600,f:0},104969:{a:1195E3,
f:0},104970:{a:593E3,f:0},104971:{a:c.mars.radius,f:0},104972:{a:47E4,f:0},104973:{a:255E3,f:0},104974:{a:2439400,f:0}};p.WKT_SPHEROID_REGEX=/SPHEROID\[([^\]]+)]/i;p.earthEllipsoidConstants=y;p.spheroids=c;p.toRadians=z;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/geometry/support/GeographicTransformation":function(){define(["./GeographicTransformationStep"],function(p){return function(){function c(y){this.steps=[];this._cached_projection={};this._chain="";this._gtlistentry=null;if(y&&
y.steps)for(const r of y.steps)r instanceof p?this.steps.push(r):this.steps.push(new p({wkid:r.wkid,wkt:r.wkt,isInverse:r.isInverse}))}c.cacheKey=function(y,r){return[void 0!==y.wkid&&null!==y.wkid?y.wkid.toString():"-1",void 0!==y.wkt&&null!==y.wkt?y.wkt.toString():"",void 0!==r.wkid&&null!==r.wkid?r.wkid.toString():"-1",void 0!==r.wkt&&null!==r.wkt?r.wkt.toString():""].join()};c.fromGE=function(y){const r=new c;let t="";for(const l of y.steps)y=p.fromGE(l),r.steps.push(y),t+=y.uid.toString()+",";
r._cached_projection={};r._gtlistentry=null;r._chain=t;return r};var z=c.prototype;z.getInverse=function(){const y=new c;y.steps=[];for(let r=this.steps.length-1;0<=r;r--)y.steps.push(this.steps[r].getInverse());return y};z.getGTListEntry=function(){let y="";for(const r of this.steps)y+=r.uid.toString()+",";y!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=y);return this._gtlistentry};z.assignCachedGe=function(y,r,t){this._cached_projection[c.cacheKey(y,r)]=t};z.getCachedGeTransformation=
function(y,r){let t="";for(const l of this.steps)t+=l.uid.toString()+",";t!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=t);y=this._cached_projection[c.cacheKey(y,r)];return void 0===y?null:y};return c}()})},"esri/geometry/support/GeographicTransformationStep":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(p){let c=0;return function(){function z(y=null){this.uid=c++;y?(this._wkt=void 0!==y.wkt?y.wkt:null,this._wkid=void 0!==y.wkid?y.wkid:-1,this._isInverse=
void 0!==y.isInverse?!0===y.isInverse:!1):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}z.fromGE=function(y){const r=new z;r._wkt=y.wkt;r._wkid=y.wkid;r._isInverse=y.isInverse;return r};z.prototype.getInverse=function(){const y=new z;y._wkt=this.wkt;y._wkid=this._wkid;y._isInverse=!this.isInverse;return y};p._createClass(z,[{key:"wkt",get:function(){return this._wkt},set:function(y){this._wkt=y;this.uid=c++}},{key:"wkid",get:function(){return this._wkid},set:function(y){this._wkid=y;this.uid=
c++}},{key:"isInverse",get:function(){return this._isInverse},set:function(y){this._isInverse=y;this.uid=c++}}]);return z}()})},"esri/geometry/geometryAdapters/json":function(){define(["exports"],function(p){let c=function(l,v,q){this.x=l;this.y=v;this.spatialReference=q;this.m=this.z=void 0},z=function(l,v,q,g){this.rings=l;this.spatialReference=v;this.hasM=this.hasZ=void 0;q&&(this.hasZ=q);g&&(this.hasM=g)},y=function(l,v,q,g){this.paths=l;this.spatialReference=v;this.hasM=this.hasZ=void 0;q&&(this.hasZ=
q);g&&(this.hasM=g)},r=function(l,v,q,g){this.points=l;this.spatialReference=v;this.hasM=this.hasZ=void 0;q&&(this.hasZ=q);g&&(this.hasM=g)},t=function(l,v,q,g,k){this.xmin=l;this.ymin=v;this.xmax=q;this.ymax=g;this.spatialReference=k;this.mmax=this.mmin=this.zmax=this.zmin=void 0};p.jsonAdapter={convertToGEGeometry:function(l,v){return null==v?null:l.convertJSONToGeometry(v)},exportPoint:function(l,v,q){q=new c(l.getPointX(v),l.getPointY(v),q);const g=l.hasZ(v),k=l.hasM(v);g&&(q.z=l.getPointZ(v));
k&&(q.m=l.getPointM(v));return q},exportPolygon:function(l,v,q){return new z(l.exportPaths(v),q,l.hasZ(v),l.hasM(v))},exportPolyline:function(l,v,q){return new y(l.exportPaths(v),q,l.hasZ(v),l.hasM(v))},exportMultipoint:function(l,v,q){return new r(l.exportPoints(v),q,l.hasZ(v),l.hasM(v))},exportExtent:function(l,v,q){var g=l.hasZ(v);const k=l.hasM(v);q=new t(l.getXMin(v),l.getYMin(v),l.getXMax(v),l.getYMax(v),q);g&&(g=l.getZExtent(v),q.zmin=g.vmin,q.zmax=g.vmax);k&&(l=l.getMExtent(v),q.mmin=l.vmin,
q.mmax=l.vmax);return q}};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/graphics/data/QueryEngineCapabilities":function(){define(["exports"],function(p){p.queryCapabilities={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,
supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/graphics/data/QueryEngineResult":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../geometry/support/quantizationUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ./AttributesBuilder ./attributeSupport ./projectionSupport ./timeSupport ./utils ../../support/fieldUtils ../../../smartMapping/statistics/support/utils ../../../support/arcadeOnDemand".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k,n,h){function f(e){return e.substr(24,12)+e.substr(19,4)+e.substr(16,2)+e.substr(14,2)+e.substr(11,2)+e.substr(9,2)+e.substr(6,2)+e.substr(4,2)+e.substr(2,2)+e.substr(0,2)}function b(e,u,m,x){if(m&&"esriFieldTypeDate"===m.type){const A=(new Date(e)).getTime(),D=(new Date(u)).getTime();if(!isNaN(A)&&!isNaN(D))return x?D-A:A-D}return"number"===typeof e&&"number"===typeof u?x?u-e:e-u:"string"===typeof e&&"string"===typeof u?(e=e.toUpperCase(),u=u.toUpperCase(),!m||"esriFieldTypeGUID"!==
m.type&&"esriFieldTypeGlobalID"!==m.type?x=(x?e>u:e<u)?-1:(x?e<u:e>u)?1:0:(m=f(e),u=f(u),x=(x?m>u:m<u)?-1:(x?m<u:m>u)?1:0),x):x?1:-1}function a(e,u,m,x,A,D){A-=m;D-=x;e=Math.min(1,Math.max(0,((e-m)*A+(u-x)*D)/(A*A+D*D)));return{x:m+A*e,y:x+D*e}}function d(e,u){return e?u?4:3:u?3:2}return function(){function e(m,x,A){this.items=m;this.queryGeometry=x;this.definitionExpression=A.definitionExpression;this.geometryType=A.geometryType;this.hasM=A.hasM;this.hasZ=A.hasZ;this.objectIdField=A.objectIdField;
this.spatialReference=A.spatialReference;this.fieldsIndex=A.fieldsIndex;this.timeInfo=A.timeInfo;this.featureAdapter=A.featureAdapter;this.aggregateAdapter=A.aggregateAdapter}var u=e.prototype;u.createQueryResponseForCount=function(m){const x=new t(m,this.featureAdapter,this.fieldsIndex);if(!m.outStatistics)return x.countDistinctValues(this.items);const {groupByFieldsForStatistics:A,having:D}=m;if(null==A||!A.length)return 1;const B=new Map,C=new Map,w=new Set;m=m.outStatistics;for(const I of m){({statisticType:m}=
I);m="exceedslimit"!==m?I.onStatisticField:void 0;if(!C.has(m)){var E=[];for(const F of A){const H=this._getAttributeValues(x,F,B);E.push(H)}C.set(m,this._calculateUniqueValues(E))}m=C.get(m);for(const F in m){const {data:H,items:K}=m[F];E=H.join(",");D&&!x.validateItems(K,D)||w.add(E)}}return w.size};u.createQueryResponse=function(m){let x;x=m.outStatistics?m.outStatistics.some(A=>"exceedslimit"===A.statisticType)?this._createExceedsLimitQueryResponse(m):this._createStatisticsQueryResponse(m):this._createFeatureQueryResponse(m);
m.returnQueryGeometry&&(y.isValid(m.outSR)&&!y.equals(this.queryGeometry.spatialReference,m.outSR)?x.queryGeometry=g.cleanFromGeometryEngine({spatialReference:m.outSR,...v.project(this.queryGeometry,this.queryGeometry.spatialReference,m.outSR)}):x.queryGeometry=g.cleanFromGeometryEngine({spatialReference:m.outSR,...this.queryGeometry}));return x};u.createSnappingResponse=function(m,x){const A=this.featureAdapter,D=d(this.hasZ,this.hasM),{x:B,y:C}=m.point,w="number"===typeof m.distance?m.distance:
m.distance.x,E="number"===typeof m.distance?m.distance:m.distance.y,I={candidates:[]},F="esriGeometryPolygon"===this.geometryType;x=this.getPointCreator(m.point,this.spatialReference,x);for(const M of this.items){var H=A.getGeometry(M);if(!H)continue;const {coords:V,lengths:W}=H;if(m.types&1){H=0;for(var K=0;K<W.length;K++){var G=W[K];for(var L=0;L<G;L++,H+=D){var P=V[H],R=V[H+1];if(L!==G-1){const ea=V[H+D],ka=V[H+D+1],{x:sa,y:ua}=a(B,C,P,R,ea,ka);var S=(B-sa)/w;const xa=(C-ua)/E;S=S*S+xa*xa;1>=S&&
I.candidates.push({type:"edge",objectId:A.getObjectId(M),distance:Math.sqrt(S),target:x(sa,ua),start:x(P,R),end:x(ea,ka)})}}}}if(m.types&2)for(H=F?V.length-D:V.length,K=0;K<H;K+=D)G=V[K],L=V[K+1],P=(B-G)/w,R=(C-L)/E,P=P*P+R*R,1>=P&&I.candidates.push({type:"vertex",objectId:A.getObjectId(M),distance:Math.sqrt(P),target:x(G,L)})}I.candidates.sort((M,V)=>M.distance-V.distance);return I};u.getPointCreator=function(m,x,A){const D=c.isSome(A)&&!y.equals(x,A)?B=>v.project(B,x,A):B=>B;return null!=m.z&&null!=
m.m?(B,C)=>D({x:B,y:C,z:m.z,m:m.m}):null!=m.z?(B,C)=>D({x:B,y:C,z:m.z}):null!=m.m?(B,C)=>D({x:B,y:C,m:m.m}):(B,C)=>D({x:B,y:C})};u.executeAttributesQuery=function(m){var x=l.getWhereClause(m.where,this.fieldsIndex);if(!x)return Promise.resolve(this);if(x.isStandardized){let A=0;const D=[];for(const B of this.items)x.testFeature(B,this.featureAdapter)&&(D[A++]=B);x=new e(D,this.queryGeometry,this);x.definitionExpression=m.where;return Promise.resolve(x)}return Promise.reject(new TypeError("Where clause is not standardized"))};
u.executeAggregateIdsQuery=function(m){if(!m.aggregateIds||!m.aggregateIds.length||c.isNone(this.aggregateAdapter))return Promise.resolve(this);const x=new Set;for(const D of m.aggregateIds)this.aggregateAdapter.getFeatureObjectIds(D).forEach(B=>x.add(B));const A=this.featureAdapter.getObjectId;return Promise.resolve(new e(this.items.filter(D=>x.has(A(D))),this.queryGeometry,this))};u.executeObjectIdsQuery=function(m){if(!m.objectIds||!m.objectIds.length)return Promise.resolve(this);const x=new Set(m.objectIds),
A=this.featureAdapter.getObjectId;return Promise.resolve(new e(this.items.filter(D=>x.has(A(D))),this.queryGeometry,this))};u.executeTimeQuery=function(m){m=q.getTimeOperator(this.timeInfo,m.timeExtent,this.featureAdapter);if(!c.isSome(m))return Promise.resolve(this);m=this.items.filter(m);return Promise.resolve(new e(m,this.queryGeometry,this))};u.filterLatest=function(){const {trackIdField:m,startTimeField:x,endTimeField:A}=this.timeInfo;var D=A||x;const B=new Map,C=this.featureAdapter.getAttribute;
for(const w of this.items){const E=C(w,m),I=C(w,D),F=B.get(E);(!F||I>C(F,D))&&B.set(E,w)}D=Array.from(B.values());return Promise.resolve(new e(D,this.queryGeometry,this))};u.project=function(){var m=p._asyncToGenerator(function*(x){if(!x||y.equals(this.spatialReference,x))return this;const A=this.featureAdapter,D=(yield v.projectMany(this.items.map(B=>g.getGeometry(this.geometryType,this.hasZ,this.hasM,A.getGeometry(B))),this.spatialReference,x)).map((B,C)=>A.cloneWithGeometry(this.items[C],r.convertFromGeometry(B,
this.hasZ,this.hasM)));return new e(D,this.queryGeometry,{definitionExpression:this.definitionExpression,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,objectIdField:this.objectIdField,spatialReference:x,fieldsIndex:this.fieldsIndex,timeInfo:this.timeInfo,featureAdapter:this.featureAdapter})});return function(x){return m.apply(this,arguments)}}();u.createSummaryStatisticsResponse=function(){var m=p._asyncToGenerator(function*(x,A){const {field:D,normalizationField:B,normalizationType:C,
normalizationTotal:w,minValue:E,maxValue:I}=A;var F=new t(x,this.featureAdapter,this.fieldsIndex);x=this.fieldsIndex.isDateField(D);A=A.valueExpression?yield this._getAttributeExpressionValues(F,A.valueExpression,A.viewInfoParams):this._getAttributeNormalizedValues(F,{field:D,normalizationField:B,normalizationType:C,normalizationTotal:w});F=n.isNullCountSupported({normalizationType:C,normalizationField:B,minValue:E,maxValue:I});A=k.isStringField(this.fieldsIndex.get(D))?n.calculateStringStatistics({values:A,
supportsNullCount:F}):n.calculateStatistics({values:A,minValue:E,maxValue:I,useSampleStdDev:!C,supportsNullCount:F});return n.processStatsResult(A,x)});return function(x,A){return m.apply(this,arguments)}}();u._sortFeatures=function(m,x,A){if(1<m.length&&x&&x.length)for(const D of x.reverse()){x=D.split(" ");const B=x[0],C=this.fieldsIndex.get(B),w=x[1]&&"desc"===x[1].toLowerCase();m.sort((E,I)=>{E=A(E,B,C);I=A(I,B,C);return b(E,I,C,w)})}};u._createFeatureQueryResponse=function(m){const x=this.items,
{geometryType:A,hasM:D,hasZ:B,objectIdField:C,spatialReference:w}=this,{outFields:E,outSR:I,quantizationParameters:F,resultRecordCount:H,resultOffset:K,returnZ:G,returnM:L}=m,P=null!=H?x.length>(K||0)+H:!1,R=E&&(-1<E.indexOf("*")?[...this.fieldsIndex.fields]:E.map(S=>this.fieldsIndex.get(S)));return{exceededTransferLimit:P,features:this._createFeatures(m,x),fields:R,geometryType:A,hasM:D&&L,hasZ:B&&G,objectIdFieldName:C,spatialReference:g.cleanFromGeometryEngine(I?I:w),transform:F&&z.toQuantizationTransform(F)||
null}};u._createFeatures=function(m,x){const A=new t(m,this.featureAdapter,this.fieldsIndex),{hasM:D,hasZ:B}=this,{orderByFields:C,quantizationParameters:w,returnGeometry:E,returnCentroid:I,maxAllowableOffset:F,resultOffset:H,resultRecordCount:K,returnZ:G=!1,returnM:L=!1}=m,P=B&&G,R=D&&L;m=[];var S=0;x=[...x];this._sortFeatures(x,C,(W,ea,ka)=>A.getFieldValue(W,ea,ka));if(E||I){var M=z.toQuantizationTransform(w);if(E&&!I)for(var V of x)m[S++]={attributes:A.getAttributes(V),geometry:g.getGeometry(this.geometryType,
this.hasZ,this.hasM,this.featureAdapter.getGeometry(V),F,M,P,R)};else if(!E&&I)for(const W of x)m[S++]={attributes:A.getAttributes(W),centroid:g.transformCentroid(this,this.featureAdapter.getCentroid(W,this),M)};else for(const W of x)m[S++]={attributes:A.getAttributes(W),centroid:g.transformCentroid(this,this.featureAdapter.getCentroid(W,this),M),geometry:g.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(W),F,M,P,R)}}else for(M of x)(V=A.getAttributes(M))&&(m[S++]=
{attributes:V});S=H||0;null!=K&&(m=m.slice(S,Math.min(m.length,S+K)));return m};u._createExceedsLimitQueryResponse=function(m){var x=!1;let A=Number.POSITIVE_INFINITY,D=Number.POSITIVE_INFINITY;x=Number.POSITIVE_INFINITY;for(const B of m.outStatistics)if("exceedslimit"===B.statisticType){A=null!=B.maxPointCount?B.maxPointCount:Number.POSITIVE_INFINITY;D=null!=B.maxRecordCount?B.maxRecordCount:Number.POSITIVE_INFINITY;x=null!=B.maxVertexCount?B.maxVertexCount:Number.POSITIVE_INFINITY;break}if("esriGeometryPoint"===
this.geometryType)x=this.items.length>A;else if(this.items.length>D)x=!0;else{m=this.hasZ?this.hasM?4:3:this.hasM?3:2;const B=this.featureAdapter;x=this.items.reduce((C,w)=>{w=B.getGeometry(w);return C+(w&&w.coords.length||0)},0)/m>x}return{fields:[{name:"exceedslimit",type:"esriFieldTypeInteger",alias:"exceedslimit",sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],features:[{attributes:{exceedslimit:Number(x)}}]}};u._createStatisticsQueryResponse=function(m){var x={attributes:{}};const A=
[],D=new Map,B=new Map,C=new Map,w=new Map,E=new t(m,this.featureAdapter,this.fieldsIndex);var I=m.outStatistics;const {groupByFieldsForStatistics:F,having:H,orderByFields:K}=m;m=F&&F.length;const G=!!m,L=G&&F[0],P=G&&!this.fieldsIndex.get(L);for(const W of I){const {outStatisticFieldName:ea,statisticType:ka}=W;I=W;var R="exceedslimit"!==ka?W.onStatisticField:void 0;const sa="percentile_disc"===ka||"percentile_cont"===ka,ua=G&&1===m&&(R===L||P)&&"count"===ka;if(G){if(!C.has(R)){var S=[];for(const xa of F){var M=
this._getAttributeValues(E,xa,D);S.push(M)}C.set(R,this._calculateUniqueValues(S,E.returnDistinctValues))}S=C.get(R);for(const xa in S){const {count:oa,data:ra,items:pa,itemPositions:N}=S[xa];M=ra.join(",");if(!H||E.validateItems(pa,H)){const U=w.get(M)||{attributes:{}};var V=null;if(ua)V=oa;else{const O=this._getAttributeValues(E,R,D);V=N.map(T=>O[T]);V=sa&&"statisticParameters"in I?this._getPercentileValue(I,V):this._getStatisticValue(I,V)}U.attributes[ea]=V;F.forEach((O,T)=>U.attributes[this.fieldsIndex.get(O)?
O:`EXPR_${T+1}`]=ra[T]);w.set(M,U)}}}else R=this._getAttributeValues(E,R,D),x.attributes[ea]=sa&&"statisticParameters"in I?this._getPercentileValue(I,R):this._getStatisticValue(I,R,B);A.push({name:ea,alias:ea,type:"esriFieldTypeDouble"})}x=G?Array.from(w.values()):[x];this._sortFeatures(x,K,(W,ea)=>W.attributes[ea]);return{fields:A,features:x}};u._getStatisticValue=function(m,x,A){const {onStatisticField:D,statisticType:B}=m;m=null;m=null!=A&&A.has(D)?A.get(D):k.isStringField(this.fieldsIndex.get(D))?
n.calculateStringStatistics({values:x}):n.calculateStatistics({values:x,minValue:null,maxValue:null,useSampleStdDev:!0});A&&A.set(D,m);return m["var"===B?"variance":B]};u._getPercentileValue=function(m,x){const {onStatisticField:A,statisticParameters:D,statisticType:B}=m,{value:C,orderBy:w}=D,E="desc"===w,I=this.fieldsIndex.get(A);m=[...x].filter(F=>null!=F).sort((F,H)=>b(F,H,I,E));return this._calculatePercentile(m,C,"percentile_disc"===B)};u._getAttributeValues=function(m,x,A){if(A.has(x))return A.get(x);
const D=this.fieldsIndex.get(x),B=this.items.map(C=>m.getFieldValue(C,x,D));A.set(x,B);return B};u._getAttributeNormalizedValues=function(m,x){return this.items.map(A=>m.getNormalizedValue(A,{field:x.field,fieldInfo:this.fieldsIndex.get(x.field),normalizationField:x.normalizationField,normalizationFieldInfo:this.fieldsIndex.get(x.normalizationField),normalizationType:x.normalizationType,normalizationTotal:x.normalizationTotal}))};u._getAttributeExpressionValues=function(){var m=p._asyncToGenerator(function*(x,
A,D){const {arcadeUtils:B}=yield h.loadArcade(),C=B.createFunction(A),w=D&&B.getViewInfo(D);return this.items.map(E=>x.getExpressionValue(E,{compiledFunc:C,viewInfo:w},B))});return function(x,A,D){return m.apply(this,arguments)}}();u._calculateUniqueValues=function(m,x){const A={},D=this.items,B=D.length;for(let C=0;C<B;C++){const w=D[C],E=[];for(const F of m)E.push(F[C]);const I=E.join(",");x?null==A[I]&&(A[I]={count:1,data:E,items:[w],itemPositions:[C]}):null==A[I]?A[I]={count:1,data:E,items:[w],
itemPositions:[C]}:(A[I].count++,A[I].items.push(w),A[I].itemPositions.push(C))}return A};u._calculatePercentile=function(m,x,A){if(0===m.length)return null;if(0>=x)return m[0];if(1<=x)return m[m.length-1];var D=(m.length-1)*x,B=Math.floor(D);x=B+1;D%=1;B=m[B];const C=m[x];return x>=m.length||A||"string"===typeof B||"string"===typeof C?B:B*(1-D)+C*D};p._createClass(e,[{key:"size",get:function(){return this.items.length}}]);return e}()})},"esri/geometry/support/quantizationUtils":function(){define(["exports",
"./jsonUtils"],function(p,c){function z({scale:w,translate:E},I){return Math.round((I-E[0])/w[0])}function y({scale:w,translate:E},I){return Math.round((E[1]-I)/w[1])}function r(w,E,I){const F=[];let H,K,G,L;for(let P=0;P<I.length;P++){const R=I[P];if(0<P){if(G=z(w,R[0]),L=y(w,R[1]),G!==H||L!==K)F.push(E(R,G-H,L-K)),H=G,K=L}else H=z(w,R[0]),K=y(w,R[1]),F.push(E(R,H,K))}return 0<F.length?F:null}function t(w,E,I,F){return r(w,I?F?C:B:F?B:D,E)}function l(w,E,I,F){const H=[];I=I?F?C:B:F?B:D;for(F=0;F<
E.length;F++){const K=r(w,I,E[F]);K&&3<=K.length&&H.push(K)}return H.length?H:null}function v(w,E,I,F){const H=[];I=I?F?C:B:F?B:D;for(F=0;F<E.length;F++){const K=r(w,I,E[F]);K&&2<=K.length&&H.push(K)}return H.length?H:null}function q({scale:w,translate:E},I){return I*w[0]+E[0]}function g({scale:w,translate:E},I){return E[1]-I*w[1]}function k(w,E,I){const F=Array(I.length);if(!I.length)return F;const [H,K]=w.scale;let G=q(w,I[0][0]);w=g(w,I[0][1]);F[0]=E(I[0],G,w);for(let L=1;L<I.length;L++){const P=
I[L];G+=P[0]*H;w-=P[1]*K;F[L]=E(P,G,w)}return F}function n(w,E,I){const F=Array(I.length);for(let H=0;H<I.length;H++)F[H]=k(w,E,I[H]);return F}function h(w,E,I,F){return k(w,I?F?C:B:F?B:D,E)}function f(w,E,I,F){return n(w,I?F?C:B:F?B:D,E)}function b(w,E,I,F){return n(w,I?F?C:B:F?B:D,E)}function a(w,E,I){let [F,H]=I[0],K=Math.min(F,E[0]),G=Math.min(H,E[1]),L=Math.max(F,E[2]);E=Math.max(H,E[3]);for(let P=1;P<I.length;P++){const [R,S]=I[P];F+=R;H+=S;0>R&&(K=Math.min(K,F));0<R&&(L=Math.max(L,F));0>S?
G=Math.min(G,H):0<S&&(E=Math.max(E,H))}w[0]=K;w[1]=G;w[2]=L;w[3]=E;return w}function d(w,E){if(!E.length)return null;w[0]=w[1]=Number.POSITIVE_INFINITY;w[2]=w[3]=Number.NEGATIVE_INFINITY;for(let I=0;I<E.length;I++)a(w,w,E[I]);return w}function e(w,E,I,F,H){E.xmin=z(w,I.xmin);E.ymin=y(w,I.ymin);E.xmax=z(w,I.xmax);E.ymax=y(w,I.ymax);E!==I&&(F&&(E.zmin=I.zmin,E.zmax=I.zmax),H&&(E.mmin=I.mmin,E.mmax=I.mmax));return E}function u(w,E,I,F,H){E.points=t(w,I.points,F,H);return E}function m(w,E,I,F,H){E.x=
z(w,I.x);E.y=y(w,I.y);E!==I&&(F&&(E.z=I.z),H&&(E.m=I.m));return E}function x(w,E,I,F,H){w=l(w,I.rings,F,H);if(!w)return null;E.rings=w;return E}function A(w,E,I,F,H){w=v(w,I.paths,F,H);if(!w)return null;E.paths=w;return E}const D=(w,E,I)=>[E,I],B=(w,E,I)=>[E,I,w[2]],C=(w,E,I)=>[E,I,w[2],w[3]];p.equals=function(w,E){if(w===E||null==w&&null==E)return!0;if(null==w||null==E)return!1;let I,F,H,K;w&&"upperLeft"===w.originPosition?(I=w.translate[0],F=w.translate[1],w=w.scale[0]):(I=w.extent.xmin,F=w.extent.ymax,
w=w.tolerance);E&&"upperLeft"===E.originPosition?(H=E.translate[0],K=E.translate[1],E=E.scale[0]):(H=E.extent.xmin,K=E.extent.ymax,E=E.tolerance);return I===H&&F===K&&w===E};p.getQuantizedBoundsCoordsArray=a;p.getQuantizedBoundsCoordsArrayArray=d;p.getQuantizedBoundsPaths=function(w){return d([0,0,0,0],w)};p.getQuantizedBoundsPoints=function(w){const E=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return a(E,E,w)};p.getQuantizedBoundsRings=function(w){return d([0,
0,0,0],w)};p.quantizeBounds=function(w,E,I){E[0]=z(w,I[0]);E[3]=y(w,I[1]);E[2]=z(w,I[2]);E[1]=y(w,I[3]);return E};p.quantizeExtent=e;p.quantizeGeometry=function(w,E){return w&&E?c.isPoint(E)?m(w,{},E,!1,!1):c.isPolyline(E)?A(w,{},E,!1,!1):c.isPolygon(E)?x(w,{},E,!1,!1):c.isMultipoint(E)?u(w,{},E,!1,!1):c.isExtent(E)?e(w,{},E,!1,!1):null:null};p.quantizeMultipoint=u;p.quantizePaths=v;p.quantizePoint=m;p.quantizePoints=t;p.quantizePolygon=x;p.quantizePolyline=A;p.quantizeRings=l;p.quantizeX=z;p.quantizeY=
y;p.toQuantizationTransform=function(w){return w?{originPosition:"upper-left"===w.originPosition?"upperLeft":"lower-left"===w.originPosition?"lowerLeft":w.originPosition,scale:w.tolerance?[w.tolerance,w.tolerance]:[1,1],translate:w.extent?[w.extent.xmin,w.extent.ymax]:[0,0]}:null};p.unquantizeBounds=function(w,E,I){return I?(E[0]=q(w,I[0]),E[1]=g(w,I[3]),E[2]=q(w,I[2]),E[3]=g(w,I[1]),E):[q(w,E[0]),g(w,E[3]),q(w,E[2]),g(w,E[1])]};p.unquantizeCoordsArray=k;p.unquantizeCoordsArrayArray=n;p.unquantizeExtent=
function(w,E,I,F,H){E.xmin=q(w,I.xmin);E.ymin=g(w,I.ymin);E.xmax=q(w,I.xmax);E.ymax=g(w,I.ymax);E!==I&&(F&&(E.zmin=I.zmin,E.zmax=I.zmax),H&&(E.mmin=I.mmin,E.mmax=I.mmax));return E};p.unquantizeMultipoint=function(w,E,I,F,H){E.points=h(w,I.points,F,H);return E};p.unquantizePaths=f;p.unquantizePoint=function(w,E,I,F,H){E.x=q(w,I.x);E.y=g(w,I.y);E!==I&&(F&&(E.z=I.z),H&&(E.m=I.m));return E};p.unquantizePoints=h;p.unquantizePolygon=function(w,E,I,F,H){E.rings=b(w,I.rings,F,H);return E};p.unquantizePolyline=
function(w,E,I,F,H){E.paths=f(w,I.paths,F,H);return E};p.unquantizeRings=b;p.unquantizeX=q;p.unquantizeY=g;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/graphics/data/AttributesBuilder":function(){define(["../../../core/maybe","./attributeSupport","../../../smartMapping/statistics/support/utils"],function(p,c,z){return function(){function y(t,l,v){this._fieldDataCache=new Map;this._returnDistinctMap=new Map;this.returnDistinctValues=t.returnDistinctValues;this.fieldsIndex=v;this.featureAdapter=
l;if((l=t.outFields)&&-1===l.indexOf("*")){this.outFields=l;t=0;for(const g of l){var q=c.getExpressionFromFieldName(g);q=(l=this.fieldsIndex.get(q))?null:c.getWhereClause(q,v);l=l?l.name:c.getAliasFromFieldName(g)||`FIELD_EXP_${t++}`;this._fieldDataCache.set(g,{alias:l,clause:q})}}}var r=y.prototype;r.countDistinctValues=function(t){if(!this.returnDistinctValues)return t.length;t.forEach(l=>this.getAttributes(l));return this._returnDistinctMap.size};r.getAttributes=function(t){t=this._processAttributesForOutFields(t);
return this._processAttributesForDistinctValues(t)};r.getFieldValue=function(t,l,v){const q=v?v.name:l;let g=null;this._fieldDataCache.has(q)?g=this._fieldDataCache.get(q).clause:v||(g=c.getWhereClause(l,this.fieldsIndex),this._fieldDataCache.set(q,{alias:q,clause:g}));return v?this.featureAdapter.getAttribute(t,q):g.calculateValue(t,this.featureAdapter)};r.getNormalizedValue=function(t,l){const v=l.normalizationType,q=l.normalizationTotal;let g=this.getFieldValue(t,l.field,l.fieldInfo);v&&Number.isFinite(g)&&
(t=this.getFieldValue(t,l.normalizationField,l.normalizationFieldInfo),g=z.getNormalizedValue(g,v,t,q));return g};r.getExpressionValue=function(t,l,v){t={attributes:this.featureAdapter.getAttributes(t)};t=v.createExecContext(t,l.viewInfo);return v.executeFunction(l.compiledFunc,t)};r.validateItem=function(t,l){this._fieldDataCache.has(l)||this._fieldDataCache.set(l,{alias:l,clause:c.getWhereClause(l,this.fieldsIndex)});return this._fieldDataCache.get(l).clause.testFeature(t,this.featureAdapter)};
r.validateItems=function(t,l){this._fieldDataCache.has(l)||this._fieldDataCache.set(l,{alias:l,clause:c.getWhereClause(l,this.fieldsIndex)});return this._fieldDataCache.get(l).clause.testSet(t,this.featureAdapter)};r._processAttributesForOutFields=function(t){const l=this.outFields;if(!l||!l.length)return this.featureAdapter.getAttributes(t);const v={};for(const q of l){const {alias:g,clause:k}=this._fieldDataCache.get(q);v[g]=k?k.calculateValue(t,this.featureAdapter):this.featureAdapter.getAttribute(t,
g)}return v};r._processAttributesForDistinctValues=function(t){if(p.isNone(t)||!this.returnDistinctValues)return t;var l=this.outFields,v=[];if(l)for(const g of l){var {alias:q}=this._fieldDataCache.get(g);v.push(t[q])}else for(q in t)v.push(t[q]);l=`${(l||["*"]).join(",")}=${v.join(",")}`;v=this._returnDistinctMap.get(l)||0;this._returnDistinctMap.set(l,++v);return 1<v?null:t};return y}()})},"esri/smartMapping/statistics/support/utils":function(){define(["exports","../../../core/Error","../../../core/maybe",
"../../../layers/support/fieldUtils"],function(p,c,z,y){function r(q,g){return new c(q,g)}function t(q,g){q=z.isSome(q)?q:"";z.isSome(g)&&g&&(q=q?"("+q+") AND ("+g+")":g);return q}function l(q){const g=q.layer;return q.fields.filter(k=>!g.getField(k))}function v(q){const g=q.layer;return q.fields.filter(k=>{k=g.getFieldUsageInfo(k);return!k||!k.supportsStatistics})}p.calculateStatistics=function(q){const {values:g,useSampleStdDev:k,supportsNullCount:n}=q;var h=Number.POSITIVE_INFINITY;let f=Number.NEGATIVE_INFINITY,
b=null,a=null;var d=null;let e=null,u=0;const m=null==q.minValue?-Infinity:q.minValue;q=null==q.maxValue?Infinity:q.maxValue;for(const x of g)Number.isFinite(x)?x>=m&&x<=q&&(b+=x,h=Math.min(h,x),f=Math.max(f,x),u++):"string"===typeof x&&u++;if(u&&null!=b){a=b/u;d=0;for(const x of g)Number.isFinite(x)&&x>=m&&x<=q&&(d+=(x-a)**2);e=k?1<u?d/(u-1):0:0<u?d/u:0;d=Math.sqrt(e)}else f=h=null;h={avg:a,count:u,max:f,min:h,stddev:d,sum:b,variance:e};n&&(h.nullcount=g.length-u);return h};p.calculateStringStatistics=
function(q){const {values:g,supportsNullCount:k}=q;q=g.filter(h=>null!=h).length;const n={count:q};k&&(n.nullcount=g.length-q);return n};p.createError=r;p.getNormalizedValue=function(q,g,k,n){let h=null;switch(g){case "log":0!==q&&(h=Math.log(q)*Math.LOG10E);break;case "percent-of-total":Number.isFinite(n)&&0!==n&&(h=q/n*100);break;case "field":Number.isFinite(k)&&0!==k&&(h=q/k);break;case "natural-log":0<q&&(h=Math.log(q));break;case "square-root":0<q&&(h=q**.5)}return h};p.getRangeExpr=function(q,
g,k){g=null!=g?q+" \x3e\x3d "+g:"";q=null!=k?q+" \x3c\x3d "+k:"";k="";return(k=g&&q?t(g,q):g||q)?"("+k+")":""};p.getSQLFilterForNormalization=function(q){const g=q.field,k=q.normalizationType;q=q.normalizationField;let n;if("log"===k)n="(NOT "+g+" \x3d 0)";else if("field"===k)n="(NOT "+q+" \x3d 0)";else if("natural-log"===k||"square-root"===k)n=`(${g} > 0)`;return n};p.isNullCountSupported=function(q){const g=null!=q.minValue||null!=q.maxValue,k=!!q.sqlExpression&&q.supportsSQLExpression;return!(null!=
q.normalizationField||null!=q.normalizationType)&&!g&&!k};p.mergeWhereClauses=t;p.processStatsResult=function(q,g){if(!g)return q;["avg","stddev","variance"].forEach(k=>{null!=q[k]&&(q[k]=Math.ceil(q[k]))});return q};p.verifyBasicFieldValidity=function(q,g,k){const n=l({layer:q,fields:g});if(n.length)return r(k,"Unknown fields: "+n.join(", ")+". You can only use fields defined in the layer schema");q=v({layer:q,fields:g});if(q.length)return r(k,"Unsupported fields: "+q.join(", ")+". You can only use fields that can be fetched i.e. AdapterFieldUsageInfo.supportsStatistics must be true")};
p.verifyFieldType=function(q,g,k,n){let h=null;if(!g)h=r(k,"'field' is not defined in the layer schema");else if(g.name===q.objectIdField||-1===n.indexOf(g.type))h=r(k,"'field' should be one of these types: "+n.join(","));return h};p.verifyNumericField=function(q,g,k){let n;g?g.name!==q.objectIdField&&y.isNumericField(g)||(n=r(k,"'field' should be one of these numeric types: "+y.numericTypes.join(","))):n=r(k,"'field' is not defined in the layer schema");return n};Object.defineProperty(p,"__esModule",
{value:!0})})},"esri/layers/support/fieldUtils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../core/Error ../../core/maybe ../../core/object ./domains ../../support/arcadeOnDemand".split(" "),function(p,c,z,y,r,t,l,v){function q(Y,ba,fa){if(Y)for(const ha of Y)(Y=(Y=t.getDeepValue(ha,ba))&&"function"!==typeof Y&&fa.get(Y))&&t.setDeepValue(ha,Y.name,ba)}function g(Y,ba){if(!Y||!ba)return[];ra.clear();k(ra,Y,ba);return Array.from(ra).sort()}function k(Y,ba,fa){var ha;
if(fa)if(null!=ba&&null!=(ha=ba.fields)&&ha.length)if(fa.includes("*"))for(const {name:la}of ba.fields)Y.add(la);else for(const la of fa)n(Y,ba,la);else if(fa.includes("*"))Y.clear(),Y.add("*");else for(const la of fa)Y.add(la)}function n(Y,ba,fa){"string"===typeof fa&&(ba?(ba=ba.get(fa))&&Y.add(ba.name):Y.add(fa))}function h(Y,ba,fa){return f.apply(this,arguments)}function f(){f=z._asyncToGenerator(function*(Y,ba,fa){if(fa){var {arcadeUtils:ha}=yield v.loadArcade();fa=ha.extractFieldNames(fa);for(const la of fa)n(Y,
ba,la)}});return f.apply(this,arguments)}function b(Y,ba,fa){return a.apply(this,arguments)}function a(){a=z._asyncToGenerator(function*(Y,ba,fa){if(fa&&"1\x3d1"!==fa){fa=(yield new Promise(function(ha,la){p(["../../core/sql/WhereClause"],ha,la)})).WhereClause.create(fa,ba);if(!fa.isStandardized)throw new y("fieldUtils:collectFilterFields","Where clause is not standardized");k(Y,ba,fa.fieldNames)}});return a.apply(this,arguments)}function d(Y,ba){for(const fa of Y)if(fa&&fa.valueType&&fa.valueType===
ba)return fa.name;return null}function e(){e=z._asyncToGenerator(function*(Y){if(!Y)return[];const ba=new Set;yield u(ba,Y);return Array.from(ba).sort()});return e.apply(this,arguments)}function u(Y,ba){return m.apply(this,arguments)}function m(){m=z._asyncToGenerator(function*(Y,ba){if(ba){var fa=t.getDeepValue("elevationInfo.featureExpressionInfo",ba);if(fa)return fa.collectRequiredFields(Y,ba.fieldsIndex)}});return m.apply(this,arguments)}function x(Y,ba,fa){return A.apply(this,arguments)}function A(){A=
z._asyncToGenerator(function*(Y,ba,fa){fa.outStatistic.onStatisticValueExpression?h(Y,ba,fa.outStatistic.onStatisticValueExpression):Y.add(fa.outStatistic.onStatisticField)});return A.apply(this,arguments)}function D(){D=z._asyncToGenerator(function*(Y,ba,fa){ba&&fa&&"cluster"===fa.type&&fa.fields&&(yield Promise.all(fa.fields.map(ha=>x(Y,ba.fieldsIndex,ha))))});return D.apply(this,arguments)}function B(){B=z._asyncToGenerator(function*(Y,ba,fa){ba&&(ba.timeInfo&&r.isSome(fa)&&fa.timeExtent&&k(Y,
ba.fieldsIndex,[ba.timeInfo.startField,ba.timeInfo.endField]),ba.floorInfo&&k(Y,ba.fieldsIndex,[ba.floorInfo.floorField]),r.isSome(fa)&&r.isSome(fa.where)&&(yield b(Y,ba.fieldsIndex,fa.where)))});return B.apply(this,arguments)}function C(){C=z._asyncToGenerator(function*(Y){if(!Y)return[];const ba="timeInfo"in Y&&Y.timeInfo;return ba?g(Y.fieldsIndex,[Y.trackIdField,ba.startField,ba.endField]):[]});return C.apply(this,arguments)}function w(){w=z._asyncToGenerator(function*(Y){if(!Y)return[];const ba=
new Set;yield E(ba,Y);return Array.from(ba).sort()});return w.apply(this,arguments)}function E(Y,ba){return I.apply(this,arguments)}function I(){I=z._asyncToGenerator(function*(Y,ba){const {labelingInfo:fa,fieldsIndex:ha}=ba;fa&&fa.length&&(yield Promise.all(fa.map(la=>F(Y,ha,la))))});return I.apply(this,arguments)}function F(Y,ba,fa){return H.apply(this,arguments)}function H(){H=z._asyncToGenerator(function*(Y,ba,fa){if(fa){var ha=fa.getLabelExpression();fa=fa.where;"arcade"===ha.type?yield h(Y,
ba,ha.expression):(ha=ha.expression.match(/{[^}]*}/g))&&ha.forEach(la=>{n(Y,ba,la.slice(1,-1))});yield b(Y,ba,fa)}});return H.apply(this,arguments)}function K(Y){return"number"===typeof Y&&!isNaN(Y)&&isFinite(Y)}function G(Y){return null===Y||K(Y)}function L(Y){return null===Y||pa(Y)}function P(Y){return null!=Y&&"string"===typeof Y}function R(Y){return null===Y||P(Y)}function S(){return!0}function M(Y,ba){let fa;switch(Y.type){case "date":case "integer":case "long":case "small-integer":case "esriFieldTypeDate":case "esriFieldTypeInteger":case "esriFieldTypeLong":case "esriFieldTypeSmallInteger":fa=
Y.nullable?L:pa;break;case "double":case "single":case "esriFieldTypeSingle":case "esriFieldTypeDouble":fa=Y.nullable?G:K;break;case "string":case "esriFieldTypeString":fa=Y.nullable?R:P;break;default:fa=S}return 1===arguments.length?fa:fa(ba)}function V(Y){return null!=Y&&U.has(Y.type)}function W(Y,ba){return Y.nullable&&null===ba?null:V(Y)&&!ea(Y.type,Number(ba))?c.NumericRangeValidationError.OUT_OF_RANGE:M(Y,ba)?Y.domain?l.validateDomainValue(Y.domain,ba):null:c.TypeValidationError.INVALID_TYPE}
function ea(Y,ba){return(Y="string"===typeof Y?ka(Y):Y)?Y.isInteger?pa(ba)&&ba>=Y.min&&ba<=Y.max:ba>=Y.min&&ba<=Y.max:!1}function ka(Y){switch(Y){case "esriFieldTypeSmallInteger":case "small-integer":return O;case "esriFieldTypeInteger":case "integer":return T;case "esriFieldTypeSingle":case "single":return Z;case "esriFieldTypeDouble":case "double":return aa}}function sa(Y,ba,fa){if(!ba||!ba.attributes||!Y){if(r.isSome(fa))for(var ha of Y)fa.add(ha);return!0}ba=ba.attributes;ha=!1;for(const la of Y)if(!(la in
ba))if(ha=!0,r.isSome(fa))fa.add(la);else break;return ha}function ua(){ua=z._asyncToGenerator(function*(Y,ba){const fa=new Set;for(const ha of ba)yield h(fa,Y.fieldsIndex,ha);return Array.from(fa).sort()});return ua.apply(this,arguments)}const xa="field field2 field3 normalizationField rotationInfo.field proportionalSymbolInfo.field proportionalSymbolInfo.normalizationField colorInfo.field colorInfo.normalizationField".split(" "),oa=["field","normalizationField"],ra=new Set,pa=(()=>"isInteger"in
Number?Number.isInteger:Y=>"number"===typeof Y&&isFinite(Y)&&Math.floor(Y)===Y)(),N=["integer","small-integer","single","double"],U=new Set([...N,"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);c.NumericRangeValidationError=void 0;(c.NumericRangeValidationError||(c.NumericRangeValidationError={})).OUT_OF_RANGE="numeric-range-validation-error::out-of-range";c.TypeValidationError=void 0;(c.TypeValidationError||(c.TypeValidationError={})).INVALID_TYPE=
"type-validation-error::invalid-type";const O={min:-32768,max:32767,isInteger:!0},T={min:-2147483648,max:2147483647,isInteger:!0},Z={min:-3.4E38,max:1.2E38,isInteger:!1},aa={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};c.collectArcadeFieldNames=h;c.collectElevationFields=u;c.collectFeatureReductionFields=function(Y,ba,fa){return D.apply(this,arguments)};c.collectField=n;c.collectFields=k;c.collectFilterFields=function(Y,ba,fa){return B.apply(this,arguments)};c.collectLabelingFields=E;
c.doubleRange=aa;c.featureHasFields=function(Y,ba){return!sa(Y,ba,null)};c.fixFields=g;c.fixRendererFields=function(Y,ba){if(null!=Y&&null!=ba)for(const fa of Array.isArray(Y)?Y:[Y])if(q(xa,fa,ba),"visualVariables"in fa&&fa.visualVariables)for(const ha of fa.visualVariables)q(oa,ha,ba)};c.fixTimeInfoFields=function(Y,ba){if(null!=Y&&null!=ba&&ba.fields.length)if("startField"in Y){var fa=ba.get(Y.startField);ba=ba.get(Y.endField);Y.startField=fa&&fa.name||null;Y.endField=ba&&ba.name||null}else fa=
ba.get(Y.startTimeField),ba=ba.get(Y.endTimeField),Y.startTimeField=fa&&fa.name||null,Y.endTimeField=ba&&ba.name||null};c.getDisplayFieldName=function({displayField:Y,fields:ba}){if(Y)return Y;if(!ba||!ba.length)return null;if(!(Y=d(ba,"name-or-title")||d(ba,"unique-identifier")||d(ba,"type-or-category")))a:{for(const fa of ba)if(fa&&fa.name&&(ba=fa.name.toLowerCase(),-1<ba.indexOf("name")||-1<ba.indexOf("title"))){Y=fa.name;break a}Y=null}return Y};c.getElevationFields=function(Y){return e.apply(this,
arguments)};c.getExpressionFields=function(Y,ba){return ua.apply(this,arguments)};c.getFeatureEditFields=function(Y){if(!Y)return[];const ba="editFieldsInfo"in Y&&Y.editFieldsInfo;return ba?g(Y.fieldsIndex,[ba&&ba.creatorField,ba&&ba.creationDateField,ba&&ba.editorField,ba&&ba.editDateField]):[]};c.getFeatureGeometryFields=function(Y){if(!Y)return[];const ba=Y.geometryFieldsInfo;return ba?g(Y.fieldsIndex,[ba.shapeAreaField,ba.shapeLengthField]):[]};c.getFieldDefaultValue=function(Y){const ba=Y.defaultValue;
if(void 0!==ba&&M(Y,ba))return ba;if(Y.nullable)return null};c.getFieldRange=function(Y){const ba=l.getDomainRange(Y.domain);if(ba)return ba;if(V(Y))return ka(Y.type)};c.getLabelingFields=function(Y){return w.apply(this,arguments)};c.getNumericTypeForValue=function(Y){if(!K(Y))return null;if(pa(Y)){if(Y>=O.min&&Y<=O.max)return"esriFieldTypeSmallInteger";if(Y>=T.min&&Y<=T.max)return"esriFieldTypeInteger"}return Y>=Z.min&&Y<=Z.max?"esriFieldTypeSingle":"esriFieldTypeDouble"};c.getTimeFields=function(Y){return C.apply(this,
arguments)};c.integerRange=T;c.isDateField=function(Y){return null!=Y&&("date"===Y.type||"esriFieldTypeDate"===Y.type)};c.isNumberInRange=ea;c.isNumericField=V;c.isStringField=function(Y){return null!=Y&&("string"===Y.type||"esriFieldTypeString"===Y.type)};c.isValidFieldValue=function(Y,ba){return null===W(Y,ba)};c.isValueMatchingFieldType=M;c.numericTypes=N;c.packFields=function(Y,ba,fa=1){if(!ba||!Y)return[];if(ba.includes("*"))return["*"];ba=g(Y,ba);return ba.length/Y.fields.length>=fa?["*"]:ba};
c.populateMissingFields=sa;c.rendererFields=xa;c.sanitizeNullFieldValue=function(Y){return null==Y||"number"===typeof Y&&isNaN(Y)?null:Y};c.singleRange=Z;c.smallIntegerRange=O;c.unpackFieldNames=function(Y,ba){return r.isNone(ba)||r.isNone(Y)?[]:ba.includes("*")?Y.fields.map(fa=>fa.name):ba};c.validateFieldValue=W;c.validationErrorToString=function(Y,ba,fa){switch(Y){case l.DomainValidationError.INVALID_CODED_VALUE:return`Value ${fa} is not in the coded domain - field: ${ba.name}, domain: ${JSON.stringify(ba.domain)}`;
case l.DomainValidationError.VALUE_OUT_OF_RANGE:return`Value ${fa} is out of the range of valid values - field: ${ba.name}, domain: ${JSON.stringify(ba.domain)}`;case c.TypeValidationError.INVALID_TYPE:return`Value ${fa} is not a valid value for the field type - field: ${ba.name}, type: ${ba.type}, nullable: ${ba.nullable}`;case c.NumericRangeValidationError.OUT_OF_RANGE:{const {min:ha,max:la}=ka(ba.type);return`Value ${fa} is out of range for the number type - field: ${ba.name}, type: ${ba.type}, value range is ${ha} to ${la}`}}};
c.visualVariableFields=oa;Object.defineProperty(c,"__esModule",{value:!0})})},"esri/layers/support/domains":function(){define("exports ../../core/has ./CodedValueDomain ./Domain ./InheritedDomain ./RangeDomain".split(" "),function(p,c,z,y,r,t){function l(v,q){switch(v.type){case "range":{const g="range"in v?v.range[1]:v.maxValue;if(+q<("range"in v?v.range[0]:v.minValue)||+q>g)return p.DomainValidationError.VALUE_OUT_OF_RANGE;break}case "coded-value":case "codedValue":if(null==v.codedValues||v.codedValues.every(g=>
null==g||g.code!==q))return p.DomainValidationError.INVALID_CODED_VALUE}return null}p.DomainValidationError=void 0;(function(v){v.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range";v.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(p.DomainValidationError||(p.DomainValidationError={}));c={key:"type",base:y,typeMap:{range:t,"coded-value":z,inherited:r}};p.CodedValueDomain=z;p.DomainBase=y;p.InheritedDomain=r;p.RangeDomain=t;p.fromJSON=function(v){if(!v||!v.type)return null;
switch(v.type){case "range":return t.fromJSON(v);case "codedValue":return z.fromJSON(v);case "inherited":return r.fromJSON(v)}return null};p.getDomainRange=function(v){if(v&&"range"===v.type)return{min:"range"in v?v.range[0]:v.minValue,max:"range"in v?v.range[1]:v.maxValue}};p.isValidDomainValue=function(v,q){return null===l(v,q)};p.types=c;p.validateDomainValue=l;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/support/CodedValueDomain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./CodedValue ./Domain".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k){var n;r=n=function(h){function f(a){a=h.call(this,a)||this;a.codedValues=null;a.type="coded-value";return a}p._inheritsLoose(f,h);var b=f.prototype;b.getName=function(a){let d=null;if(this.codedValues){const e=String(a);this.codedValues.some(u=>{String(u.code)===e&&(d=u.name);return!!d})}return d};b.clone=function(){return new n({codedValues:z.clone(this.codedValues),name:this.name})};return f}(k);c.__decorate([y.property({type:[g["default"]],json:{write:!0}})],r.prototype,
"codedValues",void 0);c.__decorate([v.enumeration({codedValue:"coded-value"})],r.prototype,"type",void 0);return r=n=c.__decorate([q.subclass("esri.layers.support.CodedValueDomain")],r)})},"esri/core/accessorSupport/decorators/enumeration":function(){define(["exports","../../jsonMap","./property"],function(p,c,z){p.enumeration=function(y,r={}){var t;y=y instanceof c.JSONMap?y:new c.JSONMap(y,r);y={type:(null!=(t=null==r?void 0:r.ignoreUnknown)?t:1)?y.apiValues:String,readOnly:null==r?void 0:r.readOnly,
json:{type:y.jsonValues,read:null!=r&&r.readOnly?!1:{reader:y.read},write:{writer:y.write}}};void 0!==(null==r?void 0:r.default)&&(y.json.default=r.default);void 0!==(null==r?void 0:r.name)&&(y.json.name=r.name);return z.property(y)};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/support/CodedValue":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass".split(" "),
function(p,c,z,y,r,t,l,v,q,g){var k;p.CodedValue=k=function(n){function h(f){f=n.call(this,f)||this;f.name=null;f.code=null;return f}c._inheritsLoose(h,n);h.prototype.clone=function(){return new k({name:this.name,code:this.code})};return h}(y.JSONSupport);z.__decorate([r.property({type:String,json:{write:!0}})],p.CodedValue.prototype,"name",void 0);z.__decorate([r.property({type:[String,Number],json:{write:!0}})],p.CodedValue.prototype,"code",void 0);p.CodedValue=k=z.__decorate([g.subclass("esri.layers.support.CodedValue")],
p.CodedValue);p.default=p.CodedValue;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/support/Domain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass".split(" "),function(p,c,z,y,r,t,l,v,q,g){z=new z.JSONMap({inherited:"inherited",
codedValue:"coded-value",range:"range"});y=function(k){function n(h){h=k.call(this,h)||this;h.name=null;h.type=null;return h}p._inheritsLoose(n,k);return n}(y.JSONSupport);c.__decorate([r.property({type:String,json:{write:!0}})],y.prototype,"name",void 0);c.__decorate([q.enumeration(z)],y.prototype,"type",void 0);return y=c.__decorate([g.subclass("esri.layers.support.Domain")],y)})},"esri/layers/support/InheritedDomain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./Domain".split(" "),
function(p,c,z,y,r,t,l,v,q){var g;z=g=function(k){function n(h){h=k.call(this,h)||this;h.type="inherited";return h}p._inheritsLoose(n,k);n.prototype.clone=function(){return new g};return n}(q);c.__decorate([l.enumeration({inherited:"inherited"})],z.prototype,"type",void 0);return z=g=c.__decorate([v.subclass("esri.layers.support.InheritedDomain")],z)})},"esri/layers/support/RangeDomain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./Domain".split(" "),
function(p,c,z,y,r,t,l,v,q){var g;y=g=function(k){function n(h){h=k.call(this,h)||this;h.maxValue=null;h.minValue=null;h.type="range";return h}p._inheritsLoose(n,k);n.prototype.clone=function(){return new g({maxValue:this.maxValue,minValue:this.minValue,name:this.name})};return n}(q);c.__decorate([z.property({type:Number,json:{type:[Number],read:{source:"range",reader(k,n){return n.range&&n.range[1]}},write:{enabled:!1,overridePolicy(){return{enabled:null!=this.maxValue&&null==this.minValue}},target:"range",
writer(k,n,h){n[h]=[this.minValue||0,k]}}}})],y.prototype,"maxValue",void 0);c.__decorate([z.property({type:Number,json:{type:[Number],read:{source:"range",reader(k,n){return n.range&&n.range[0]}},write:{target:"range",writer(k,n,h){n[h]=[k,this.maxValue||0]}}}})],y.prototype,"minValue",void 0);c.__decorate([l.enumeration({range:"range"})],y.prototype,"type",void 0);return y=g=c.__decorate([v.subclass("esri.layers.support.RangeDomain")],y)})},"esri/support/arcadeOnDemand":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../geometry ../core/maybe ../geometry/SpatialReference".split(" "),
function(p,c,z,y,r,t){function l(){return v.apply(this,arguments)}function v(){v=z._asyncToGenerator(function*(){q||(q=z._asyncToGenerator(function*(){const k=yield new Promise(function(n,h){p(["./arcadeUtils"],n,h)});yield k.arcade.load();return{arcade:k.arcade,arcadeUtils:k,Dictionary:k.Dictionary,Feature:k.arcadeFeature}})());return q});return v.apply(this,arguments)}let q;y=(k,n,h)=>g.create(k,n,h,null,["$feature","$view"]);let g=function(){function k(h,f,b,a,d,e,u,m){this.script=h;this.evaluate=
d;this.fields=Array.isArray(u)?u:u.fields;this._syntaxTree=a;this._arcade=f;this._arcadeDictionary=b;this._arcadeFeature=e;this._spatialReference=m;this._referencesGeometry=f.scriptTouchesGeometry(this._syntaxTree);this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}k.create=function(){var h=z._asyncToGenerator(function*(f,b,a,d,e,u){const {arcade:m,Feature:x,Dictionary:A}=yield l(),D=t.fromJSON(b);b=m.parseScript(f,u);e=e.reduce((I,F)=>({...I,[F]:null}),{});let B=null;r.isSome(d)&&
(B=new A(d),B.immutable=!0,e.$config=null);d=m.scriptUsesGeometryEngine(b)&&m.enableGeometrySupport();u=m.scriptUsesFeatureSet(b)&&m.enableFeatureSetSupport();const C=m.scriptIsAsync(b)&&m.enableAsyncSupport();e={vars:e,spatialReference:D,useAsync:!!C};const w=new A;w.immutable=!1;w.setField("scale",0);const E=m.compileScript(b,e);yield Promise.all([d,u,C]);return new k(f,m,A,b,I=>{"$view"in I&&I.$view&&(w.setField("scale",I.$view.scale),I.$view=w);B&&(I.$config=B);return E({vars:I,spatialReference:D})},
new x,a,D)});return function(f,b,a,d,e,u){return h.apply(this,arguments)}}();var n=k.prototype;n.repurposeFeature=function(h){h.geometry&&!h.geometry.spatialReference&&(h.geometry.spatialReference=this._spatialReference);this._arcadeFeature.repurposeFromGraphicLikeObject(h.geometry,h.attributes,{fields:this.fields});return this._arcadeFeature};n.repurposeAdapter=function(h){this._arcadeFeature.repurposeFromAdapter(h,{fields:this.fields});return this._arcadeFeature};n.createDictionary=function(){return new this._arcadeDictionary};
n.referencesMember=function(h){return this._arcade.referencesMember(this._syntaxTree,h)};n.referencesFunction=function(h){return this._arcade.referencesFunction(this._syntaxTree,h)};n.referencesGeometry=function(){return this._referencesGeometry};n.referencesScale=function(){return this._referencesScale};n.extractFieldLiterals=function(h){return this._arcade.extractFieldLiterals(this._syntaxTree,h)};return k}();c.ArcadeExpression=g;c.createDictionaryExpression=(k,n,h,f)=>g.create(k,n,h,f,["$feature",
"$view"]);c.createLabelExpression=(k,n,h)=>g.create(k,n,h,null,["$feature"]);c.createRendererExpression=y;c.createVVExpression=y;c.default=g;c.loadArcade=l;Object.defineProperty(c,"__esModule",{value:!0})})},"esri/layers/graphics/data/timeSupport":function(){define(["exports"],function(p){function c(r,t,l,v,q){if(null!=v&&null!=q)return g=>{const k=r.getAttribute(g,t);g=r.getAttribute(g,l);return(null==k||k<=q)&&(null==g||g>=v)};if(null!=v)return g=>{g=r.getAttribute(g,l);return null==g||g>=v};if(null!=
q)return g=>{g=r.getAttribute(g,t);return null==g||g<=q}}function z(r,t,l,v){if(null!=l&&null!=v&&l===v)return q=>r.getAttribute(q,t)===l;if(null!=l&&null!=v)return q=>{q=r.getAttribute(q,t);return q>=l&&q<=v};if(null!=l)return q=>r.getAttribute(q,t)>=l;if(null!=v)return q=>r.getAttribute(q,t)<=v}function y(){return()=>!1}p.getTimeExtent=function(r,t){if(!r)return null;const l=t.featureAdapter,{startTimeField:v,endTimeField:q}=r;let g=Number.POSITIVE_INFINITY,k=Number.NEGATIVE_INFINITY;if(v&&q)t.forEach(n=>
{const h=l.getAttribute(n,v);n=l.getAttribute(n,q);null==h||isNaN(h)||(g=Math.min(g,h));null==n||isNaN(n)||(k=Math.max(k,n))});else{const n=v||q;t.forEach(h=>{h=l.getAttribute(h,n);null==h||isNaN(h)||(g=Math.min(g,h),k=Math.max(k,h))})}return{start:g,end:k}};p.getTimeOperator=function(r,t,l){if(!t||!r)return null;const {startTimeField:v,endTimeField:q}=r;if(!v&&!q)return null;const {start:g,end:k}=t;return null===g&&null===k?null:void 0===g&&void 0===k?y():v&&q?c(l,v,q,g,k):z(l,v||q,g,k)};Object.defineProperty(p,
"__esModule",{value:!0})})},"esri/layers/graphics/data/utils":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/jsonMap ../../../core/maybe ../../../core/unitUtils ../../../geometry/support/extentUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ../centroid ../featureConversionUtils ../OptimizedGeometry ./projectionSupport".split(" "),function(p,c,z,y,r,t,l,v,q,g,k,n,h,f){function b(K,
G,L,P=K.hasZ,R=K.hasM){const S=K.hasZ&&P,M=K.hasM&&R;return L?(K=n.quantizeOptimizedGeometry(I,G,K.hasZ,K.hasM,"esriGeometryPoint",L,P,R),n.convertToPoint(K,S,M)):n.convertToPoint(G,S,M)}function a(){a=z._asyncToGenerator(function*(K,G,L){const {outFields:P,orderByFields:R,groupByFieldsForStatistics:S,outStatistics:M}=K;if(P)for(var V=0;V<P.length;V++)P[V]=P[V].trim();if(R)for(V=0;V<R.length;V++)R[V]=R[V].trim();if(S)for(V=0;V<S.length;V++)S[V]=S[V].trim();if(M)for(V=0;V<M.length;V++)M[V].onStatisticField&&
(M[V].onStatisticField=M[V].onStatisticField.trim());K.geometry&&!K.outSR&&(K.outSR=K.geometry.spatialReference);return e(K,G,L)});return a.apply(this,arguments)}function d(){d=z._asyncToGenerator(function*(K,G,L){return e(K,G,L)});return d.apply(this,arguments)}function e(K,G,L){return u.apply(this,arguments)}function u(){u=z._asyncToGenerator(function*(K,G,L){if(!K)return null;var {where:P}=K;K.where=P=P&&P.trim();if(!P||/^1 *= *1$/.test(P)||G&&G===P)K.where=null;if(!K.geometry)return K;G=yield m(K);
K.distance=0;K.units=null;"esriSpatialRelEnvelopeIntersects"===K.spatialRel&&({spatialReference:P}=K.geometry,G=l.getGeometryExtent(G),G.spatialReference=P);K.geometry=G;yield f.checkProjectionSupport(G.spatialReference,L);G=(yield q.normalizeCentralMeridian(v.fromJSON(G)))[0];if(r.isNone(G))throw C;G=G.toJSON();G=yield f.project(G,G.spatialReference,L);if(!G)throw C;G.spatialReference=L;K.geometry=G;return K});return u.apply(this,arguments)}function m(K){return x.apply(this,arguments)}function x(){x=
z._asyncToGenerator(function*(K){const {geometry:G,distance:L,units:P}=K;if(null==L||"vertexAttributes"in G)return G;var R=G.spatialReference;K=P?B.fromJSON(P):t.getUnitString(R);R=R&&(g.isGeographic(R)||g.isWebMercator(R))?G:yield f.checkProjectionSupport(R,g.WGS84).then(()=>f.project(G,g.WGS84));return(yield A())(R.spatialReference,R,L,K)});return x.apply(this,arguments)}function A(){return D.apply(this,arguments)}function D(){D=z._asyncToGenerator(function*(){return(yield new Promise(function(K,
G){p(["../../../geometry/geometryEngineJSON"],K,G)})).geodesicBuffer});return D.apply(this,arguments)}const B=new y.JSONMap({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),C=Object.freeze({}),w=new h,E=new h,I=new h,F={esriGeometryPoint:n.convertToPoint,esriGeometryPolyline:n.convertToPolyline,esriGeometryPolygon:n.convertToPolygon,esriGeometryMultipoint:n.convertToMultipoint},
H=(K,G)=>"_geVersion"!==K?G:void 0;c.QUERY_ENGINE_EMPTY_RESULT=C;c.cleanFromGeometryEngine=function(K){return K&&"_geVersion"in K?JSON.parse(JSON.stringify(K,H)):K};c.getCentroid=function(K,G,L){if("esriGeometryPolygon"!==K.geometryType||!G||!G.centroid&&!G.geometry)return null;G.centroid||(G.centroid=k.getCentroidOptimizedGeometry(new h,G.geometry,K.hasZ,K.hasM));return b(K,G.centroid,L)};c.getGeometry=function(K,G,L,P,R,S,M=G,V=L){const W=G&&M,ea=L&&V;P=P?"coords"in P?P:P.geometry:null;if(!P)return null;
if(R)return G=n.generalizeOptimizedGeometry(E,P,G,L,K,R,M,V),S&&(G=n.quantizeOptimizedGeometry(I,G,W,ea,K,S)),F[K](G,W,ea);if(S)return S=n.quantizeOptimizedGeometry(I,P,G,L,K,S,M,V),F[K](S,W,ea);n.removeZMValues(w,P,G,L,M,V);return F[K](w,W,ea)};c.normalizeFilter=function(K,G,L){return d.apply(this,arguments)};c.normalizeQuery=function(K,G,L){return a.apply(this,arguments)};c.normalizeQueryLike=e;c.transformCentroid=b;Object.defineProperty(c,"__esModule",{value:!0})})},"esri/layers/graphics/centroid":function(){define(["exports"],
function(p){function c(y,r,t,l,v,q,g=1){q=v?q?4:3:q?3:2;let k=t,n=t+q,h=0,f=0,b=t=0,a=0;for(let d=0,e=l-1;d<e;d++,k+=q,n+=q){l=r[k];const u=r[k+1],m=r[k+2],x=r[n],A=r[n+1],D=r[n+2];let B=l*A-x*u;b+=B;h+=(l+x)*B;f+=(u+A)*B;v&&(B=l*D-x*m,t+=(m+D)*B,a+=B);l<y[0]&&(y[0]=l);l>y[1]&&(y[1]=l);u<y[2]&&(y[2]=u);u>y[3]&&(y[3]=u);v&&(m<y[4]&&(y[4]=m),m>y[5]&&(y[5]=m))}0<b*g&&(b*=-1);0<a*g&&(a*=-1);if(!b)return null;y=[h,f,.5*b];v&&(y[3]=t,y[4]=.5*a);return y}function z(y,r,t,l,v){v=l?v?4:3:v?3:2;let q=r,g=r+
v,k=0,n=0,h=0,f=0;for(let e=0,u=t-1;e<u;e++,q+=v,g+=v){var b=y[q];const m=y[q+1],x=y[q+2],A=y[g],D=y[g+1],B=y[g+2];if(l){{var a=A-b;var d=D-m;const C=B-x;a=Math.sqrt(a*a+d*d+C*C)}}else a=A-b,d=D-m,a=Math.sqrt(a*a+d*d);a&&(k+=a,l?(b=[b+.5*(A-b),m+.5*(D-m),x+.5*(B-x)],n+=a*b[0],h+=a*b[1],f+=a*b[2]):(b=[b+.5*(A-b),m+.5*(D-m)],n+=a*b[0],h+=a*b[1]))}return 0<k?l?[n/k,h/k,f/k]:[n/k,h/k]:0<t?l?[y[r],y[r+1],y[r+2]]:[y[r],y[r+1]]:null}p.getCentroidOptimizedGeometry=function(y,r,t,l,v){if(!r||!r.lengths.length)return null;
const q="upperLeft"===(null==v?void 0:v.originPosition)?-1:1;y.lengths.length&&(y.lengths.length=0);y.coords.length&&(y.coords.length=0);v=y.coords;const g=[],k=t?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:n,coords:h}=r,f=t?l?4:3:l?3:2;let b=0;for(var a of n){const d=c(k,h,b,a,t,l,
q);d&&g.push(d);b+=a*f}g.sort((d,e)=>{let u=q*d[2]-q*e[2];0===u&&t&&(u=d[4]-e[4]);return u});g.length&&(a=6*g[0][2],v[0]=g[0][0]/a,v[1]=g[0][1]/a,t&&(a=6*g[0][4],v[2]=0!==a?g[0][3]/a:0),v[0]<k[0]||v[0]>k[1]||v[1]<k[2]||v[1]>k[3]||t&&(v[2]<k[4]||v[2]>k[5]))&&(v.length=0);if(!v.length)if(r=r.lengths[0]?z(h,0,n[0],t,l):null)v[0]=r[0],v[1]=r[1],t&&2<r.length&&(v[2]=r[2]);else return null;return y};p.lineCentroid=z;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/graphics/data/spatialQuerySupport":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../geometry/support/contains ../../../geometry/support/intersects ../../../geometry/support/jsonUtils ../../../geometry/support/spatialReferenceUtils ../contains ../featureConversionUtils ../OptimizedGeometry ./projectionSupport ./utils".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k,n,h){function f(){return new Promise(function(e,u){p(["../../../geometry/geometryEngineJSON"],e,u)})}function b(){b=z._asyncToGenerator(function*(e,u,m){const {spatialRel:x,geometry:A}=e;if(A){if(!0!==d.spatialRelationship[x])throw new y("feature-store:unsupported-query","Unsupported query spatial relationship",{query:e});if(v.isValid(A.spatialReference)&&v.isValid(m)){if(!0!==d.queryGeometry[l.getJsonType(A)])throw new y("feature-store:unsupported-query","Unsupported query geometry type",
{query:e});if(!0!==d.layerGeometry[u])throw new y("feature-store:unsupported-query","Unsupported layer geometry type",{query:e});if(e.outSR)return n.checkProjectionSupport(e.geometry&&e.geometry.spatialReference,e.outSR)}}});return b.apply(this,arguments)}const a={esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"intersects",esriSpatialRelIndexIntersects:null,esriSpatialRelOverlaps:"overlaps",
esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:null},d={spatialRelationship:{esriSpatialRelIntersects:!0,esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},queryGeometry:{esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!0},
layerGeometry:{esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!1}};c.canQueryWithRBush=function(e){if(l.isExtent(e))return!0;if(l.isPolygon(e)){for(const u of e.rings)if(5!==u.length||u[0][0]!==u[1][0]||u[0][0]!==u[4][0]||u[2][0]!==u[3][0]||u[0][1]!==u[3][1]||u[0][1]!==u[4][1]||u[1][1]!==u[2][1])return!1;return!0}return!1};c.checkSpatialQuerySupport=function(e,u,m){return b.apply(this,arguments)};c.getSpatialQueryOperator=function(e,
u,m,x,A){if(l.isPolygon(u)&&"esriGeometryPoint"===m&&("esriSpatialRelIntersects"===e||"esriSpatialRelContains"===e)){const D=g.convertFromPolygon(new k,u,!1,!1);return Promise.resolve(B=>q.polygonContainsPoint(D,!1,!1,B))}if(l.isPolygon(u)&&"esriGeometryMultipoint"===m){const D=g.convertFromPolygon(new k,u,!1,!1);if("esriSpatialRelContains"===e)return Promise.resolve(B=>q.polygonContainsMultipoint(D,!1,!1,B,x,A))}if(l.isExtent(u)&&"esriGeometryPoint"===m&&("esriSpatialRelIntersects"===e||"esriSpatialRelContains"===
e))return Promise.resolve(D=>r.extentContainsPoint(u,h.getGeometry(m,x,A,D)));if(l.isExtent(u)&&"esriGeometryMultipoint"===m&&"esriSpatialRelContains"===e)return Promise.resolve(D=>r.extentContainsMultipoint(u,h.getGeometry(m,x,A,D)));if(l.isExtent(u)&&"esriSpatialRelIntersects"===e){const D=t.getExtentIntersector(m);return Promise.resolve(B=>D(u,h.getGeometry(m,x,A,B)))}return f().then(D=>{const B=D[a[e]].bind(null,u.spatialReference,u);return C=>B(h.getGeometry(m,x,A,C))})};Object.defineProperty(c,
"__esModule",{value:!0})})},"esri/geometry/support/intersects":function(){define(["exports","./intersectsBase"],function(p,c){p.extentIntersectsExtent=c.extentIntersectsExtent;p.extentIntersectsMultipoint=c.extentIntersectsMultipoint;p.extentIntersectsPoint=c.extentIntersectsPoint;p.extentIntersectsPolygon=c.extentIntersectsPolygon;p.extentIntersectsPolyline=c.extentIntersectsPolyline;p.getFeatureExtentIntersector=c.getFeatureExtentIntersector;p.isSelfIntersecting=c.isSelfIntersecting;p.segmentIntersects=
c.segmentIntersects;p.getExtentIntersector=function(z){return"mesh"===z?c.extentIntersectsExtent:c.getFeatureExtentIntersector(z)};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/graphics/contains":function(){define(["exports"],function(p){function c(z,y,r,t,l){if(!z)return!1;y=y?r?4:3:r?3:2;const {coords:v,lengths:q}=z;r=!1;z=0;for(const k of q){var g=z;for(let n=z,h=z+k*y;n<h;n+=y){g=n+y;g===h&&(g=z);const f=v[n],b=v[n+1],a=v[g];g=v[g+1];(b<l&&g>=l||g<l&&b>=l)&&f+(l-b)/(g-b)*(a-
f)<t&&(r=!r)}z+=k*y}return r}p.polygonContainsCoords=c;p.polygonContainsMultipoint=function(z,y,r,t,l,v){l=l?v?4:3:v?3:2;const {coords:q,lengths:g}=t;if(!g)return!1;for(let k=0,n=0;k<g.length;k++,n+=l)if(!c(z,y,r,q[n],q[n+1]))return!1;return!0};p.polygonContainsPoint=function(z,y,r,t){return c(z,y,r,t.coords[0],t.coords[1])};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/support/FieldsIndex":function(){define(function(){return function(){function p(z){this.fields=z;this._fieldsMap=
new Map;this._dateFieldsSet=new Set;this.dateFields=[];if(z){var y=[];for(const r of z)if(z=r&&r.name){const t=z.toLowerCase().trim();this._fieldsMap.set(z,r);this._fieldsMap.set(t,r);y.push(t);if("date"===r.type||"esriFieldTypeDate"===r.type)this.dateFields.push(r),this._dateFieldsSet.add(r)}y.sort();this.uid=y.join(",")}}var c=p.prototype;c.destroy=function(){this._fieldsMap.clear()};c.has=function(z){return null!=this.get(z)};c.get=function(z){return null!=z?this._fieldsMap.get(z)||this._fieldsMap.get(z.toLowerCase().trim()):
void 0};c.isDateField=function(z){return this._dateFieldsSet.has(this.get(z))};c.normalizeFieldName=function(z){if(z=this.get(z))return z.name};return p}()})},"esri/layers/support/PromiseQueue":function(){define(["../../chunks/_rollupPluginBabelHelpers","../../core/promiseUtils"],function(p,c){let z=function(y,r,t,l,v){this.resolve=y;this.reject=r;this.callback=t;this.signal=l;this.abortCallback=v};return function(){function y(){this._tasks=[]}var r=y.prototype;r.push=function(t,l,v){return new Promise((q,
g)=>this._tasks.push(new z(q,g,t,l,v)))};r.unshift=function(t,l,v){return new Promise((q,g)=>this._tasks.unshift(new z(q,g,t,l,v)))};r.process=function(){if(0===this._tasks.length)return!1;const t=this._tasks.shift();try{const l=c.isAborted(t.signal);if(l&&!t.abortCallback)t.reject(c.createAbortError());else{const v=l?t.abortCallback(c.createAbortError()):t.callback();c.isPromise(v)?v.then(t.resolve,t.reject):t.resolve(v)}}catch(l){t.reject(l)}return!0};r.cancelAll=function(){const t=c.createAbortError();
for(const l of this._tasks)if(l.abortCallback){const v=l.abortCallback(t);l.resolve(v)}else l.reject(t);this._tasks.length=0};p._createClass(y,[{key:"length",get:function(){return this._tasks.length}}]);return y}()})},"esri/smartMapping/support/utils":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../support/arcadeOnDemand","../../support/basemapUtils"],function(p,c,z,y){function r(){r=c._asyncToGenerator(function*(h){const f=h.field,b=h.normalizationField;h=h.valueExpression;
var a=[];h&&(n||({arcadeUtils:a}=yield z.loadArcade(),n=a),a=n.extractFieldNames(h));f&&a.push(f);b&&a.push(b);return a});return r.apply(this,arguments)}function t(h){return String(h).padStart(2,"0")}function l(h,f,b){if("date"===f||"number"===f){"number"===f&&(h=new Date(h));f=b?h.getFullYear():h.getUTCFullYear();const a=t((b?h.getMonth():h.getUTCMonth())+1),d=t(b?h.getDate():h.getUTCDate()),e=t(b?h.getHours():h.getUTCHours()),u=t(b?h.getMinutes():h.getUTCMinutes());h=t(b?h.getSeconds():h.getUTCSeconds());
h=`TIMESTAMP'${f}-${a}-${d} ${e}:${u}:${h}'`}return h}function v(h,f){if(f instanceof Date)return"date";if("number"===typeof f)return"number";if("string"===typeof f&&(h=h.getField(f),"\x3cnow\x3e"!==f.toLowerCase()&&h&&"date"===h.type))return"field"}const q={light:"streets gray topo terrain national-geographic oceans osm gray-vector streets-vector topo-vector streets-relief-vector streets-navigation-vector".split(" "),dark:["satellite","hybrid","dark-gray","dark-gray-vector","streets-night-vector"]},
g={years:365,months:30,days:1,hours:1/24,minutes:1/1440,seconds:1/86400,milliseconds:1/864E5},k=["integer","small-integer"];let n=null;p.castIntegerFieldToFloat=function(h){return`cast(${h} as float)`};p.defaultBasemapGroups=q;p.getBasemapGroup=function(h,f=q){for(const b in f)if(-1<f[b].indexOf(h))return b};p.getBasemapId=function(h,f,b=!0){let a=null;h&&("string"===typeof h?f.includes(h)&&(a=h):a=y.getWellKnownBasemapId(h));return b?a||"gray":a};p.getDateDiffSQL=function(h,f,b,a){var {hasQueryEngine:d}=
h;b=l(b,v(h,b),d);h=l(f,v(h,f),d);h=`(${b} - ${h})`;d&&(h=`(${h} * ${g.milliseconds})`);a=g[a];d="/";1>a&&(a=1/a,d="*");return{sqlExpression:1===a?h:`(${h} ${d} ${a})`,sqlWhere:null}};p.getDateType=v;p.getFieldsList=function(h){return r.apply(this,arguments)};p.getNormalizationType=function(h){let f=h.normalizationType;f||(h.normalizationField?f="field":null!=h.normalizationTotal&&(f="percent-of-total"));return f};p.isIntegerField=function(h,f){return(h=f&&h.getField(f))&&-1<k.indexOf(h.type)};p.unitValueInDays=
g;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/support/basemapUtils":function(){define("exports ../Basemap ../core/Collection ../core/Logger ../core/urlUtils ../core/accessorSupport/ensureType ./basemapDefinitions".split(" "),function(p,c,z,y,r,t,l){function v(D,B){var C;let w;if("string"===typeof D){if(!(D in l.esriBasemapDefinitions))return B=Object.keys(l.esriBasemapDefinitions).map(E=>`"${E}"`).join(", "),x.warn(`Unable to find basemap definition for: ${D}. Try one of these: ${B}`),
null;B&&(w=B[D]);w||(w=c.fromId(D),B&&(B[D]=w))}else w=t.ensureType(c,D);null!=(C=w)&&C.destroyed&&(x.warn("The provided basemap is already destroyed",{basemap:w}),w=null);return w}function q(D,B){const C=new z;D.forEach(w=>{const E=B.find(I=>u(f(w),f(I)))||w;C.some(I=>I===E)?C.push(w):C.push(E)});return C}function g(D){if(k(D.url))return!0;if("vector-tile"===D.type)for(const B in D.sourceNameToSource){const C=D.sourceNameToSource[B];if(k(null==C?void 0:C.sourceUrl))return!0}return!1}function k(D){if(!D)return!1;
D=new r.Url(r.makeAbsolute(D));return A.test(D.authority)}function n(D){return D?!D.loaded&&D.resourceInfo?b(D.resourceInfo.data):{baseLayers:h(D.baseLayers),referenceLayers:h(D.referenceLayers)}:null}function h(D){return(z.isCollection(D)?D.toArray():D).map(f)}function f(D){return{type:D.type,url:m("urlTemplate"in D&&D.urlTemplate||D.url||"styleUrl"in D&&D.styleUrl),minScale:"minScale"in D&&null!=D.minScale?D.minScale:0,maxScale:"maxScale"in D&&null!=D.maxScale?D.maxScale:0,opacity:null!=D.opacity?
D.opacity:1,visible:null!=D.visible?!!D.visible:!0}}function b(D){return D?{baseLayers:a(D.baseMapLayers.filter(B=>!B.isReference)),referenceLayers:a(D.baseMapLayers.filter(B=>B.isReference))}:null}function a(D){return D.map(B=>{{let C;switch(B.layerType){case "VectorTileLayer":C="vector-tile";break;case "ArcGISTiledMapServiceLayer":C="tile";break;default:C="unknown"}B={type:C,url:m(B.templateUrl||B.urlTemplate||B.styleUrl||B.url),minScale:null!=B.minScale?B.minScale:0,maxScale:null!=B.maxScale?B.maxScale:
0,opacity:null!=B.opacity?B.opacity:1,visible:null!=B.visibility?!!B.visibility:!0}}return B})}function d(D,B,C){return null!=D!==(null!=B)?"not-equal":D?e(D.baseLayers,B.baseLayers)?e(D.referenceLayers,B.referenceLayers)?"equal":C.mustMatchReferences?"not-equal":"base-layers-equal":"not-equal":"equal"}function e(D,B){if(D.length!==B.length)return!1;for(let C=0;C<D.length;C++)if(!u(D[C],B[C]))return!1;return!0}function u(D,B){return D.type===B.type&&D.url===B.url&&D.minScale===B.minScale&&D.maxScale===
B.maxScale&&D.visible===B.visible&&D.opacity===B.opacity}function m(D){return D?r.normalize(D).replace(/^\s*https?:/i,"").toLowerCase():""}const x=y.getLogger("esri.support.basemapUtils"),A=/^(basemaps|ibasemaps).*-api\.arcgis\.com$/i;p.clonePreservingTiledLayers=function(D,B=null){D=v(D);if(!D)return null;const C=new c({id:D.id,title:D.title,baseLayers:D.baseLayers.slice(),referenceLayers:D.referenceLayers.slice()});B&&(C.baseLayers=q(C.baseLayers,B.baseLayers),C.referenceLayers=q(C.referenceLayers,
B.referenceLayers));C.load().catch(()=>{});C.portalItem=D.portalItem;return C};p.contentEquals=function(D,B){if(D===B)return!0;D=n(D);B=n(B);return"equal"===d(D,B,{mustMatchReferences:!0})};p.createCache=function(){return{}};p.destroyCache=function(D){for(const B in D){const C=D[B];!1===(null==C?void 0:C.destroyed)&&C.destroy();delete D[B]}};p.ensureType=v;p.getWellKnownBasemapId=function(D){let B=null;D=n(D);const C=!D.baseLayers.length;for(const E in l.esriBasemapDefinitions){var w=b(l.esriBasemapDefinitions[E]);
w=d(D,w,{mustMatchReferences:C});if("equal"===w){B=E;break}"base-layers-equal"===w&&(B=E)}return B};p.hasDeveloperBasemapLayer=function(D){return!(null==D||!D.baseLayers.concat(D.referenceLayers).some(g))};p.isDeveloperBasemapLayer=g;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/Basemap":function(){define("require ./chunks/_rollupPluginBabelHelpers ./chunks/tslib.es6 ./core/Collection ./core/collectionUtils ./core/JSONSupport ./core/lang ./core/Loadable ./core/loadAll ./core/Logger ./core/maybe ./core/promiseUtils ./core/urlUtils ./core/accessorSupport/decorators/property ./core/accessorSupport/ensureType ./core/has ./core/jsonMap ./core/accessorSupport/decorators/subclass ./core/accessorSupport/decorators/writer ./geometry/SpatialReference ./portal/Portal ./portal/PortalItem ./support/basemapDefinitions ./webdoc/support/writeUtils".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k,n,h,f,b,a,d,e,u,m,x,A,D,B){var C;let w=0;const E=g.getLogger("esri.Basemap");t=C=function(I){function F(K){var G=I.call(this,K)||this;G.id=null;G.portalItem=null;G.spatialReference=null;G.thumbnailUrl=null;G.title="Basemap";G.id=Date.now().toString(16)+"-basemap-"+w++;G.baseLayers=new y;G.referenceLayers=new y;const L=P=>{P.parent&&P.parent!==c._assertThisInitialized(G)&&"remove"in P.parent&&P.parent.remove(P);P.parent=c._assertThisInitialized(G);"elevation"===P.type&&
E.error(`Layer '${P.title}, id:${P.id}' of type '${P.type}' is not supported as a basemap layer and will therefore be ignored.`)};G.baseLayers.on("after-add",P=>L(P.item));G.referenceLayers.on("after-add",P=>L(P.item));G.baseLayers.on("after-remove",P=>{P.item.parent=null});G.referenceLayers.on("after-remove",P=>{P.item.parent=null});return G}c._inheritsLoose(F,I);var H=F.prototype;H.initialize=function(){this.when().catch(K=>{E.error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,
K)});this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)};H.destroy=function(){var K,G=this.baseLayers.removeAll();for(const L of G)L.destroy();G=this.referenceLayers.removeAll();for(const L of G)L.destroy();this.baseLayers.destroy();this.referenceLayers.destroy();null==(K=this.portalItem)?void 0:K.destroy();this.portalItem=null};H.normalizeCtorArgs=function(K){K&&"resourceInfo"in K&&(this._set("resourceInfo",K.resourceInfo),K={...K},delete K.resourceInfo);return K};H._writeBaseLayers=
function(K,G,L){const P=[];K&&(L={...L,layerContainerType:"basemap"},this.baseLayers.forEach(R=>{R=B.getLayerJSON(R,L.webmap?L.webmap.getLayerJSONFromResourceInfo(R):null,L);k.isSome(R)&&P.push(R)}),this.referenceLayers.forEach(R=>{R=B.getLayerJSON(R,L.webmap?L.webmap.getLayerJSONFromResourceInfo(R):null,L);k.isSome(R)&&(R.isReference=!0,P.push(R))}));G.baseMapLayers=P};H.writeTitle=function(K,G){G.title=K||"Basemap"};H.load=function(K){this.addResolvingPromise(this._loadFromSource(K));return Promise.resolve(this)};
H.loadAll=function(){return q.loadAll(this,K=>{K(this.baseLayers,this.referenceLayers)})};H.clone=function(){const K={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.slice(),referenceLayers:this.referenceLayers.slice()};this.loaded&&(K.loadStatus="loaded");return(new C({resourceInfo:this.resourceInfo})).set(K)};H.read=function(K,G){this.resourceInfo||this._set("resourceInfo",{data:K,context:G});I.prototype.read.call(this,K,G)};H.write=function(K,G){K=K||{};G&&G.origin||
(G={origin:"web-map",...G});I.prototype.write.call(this,K,G);!this.loaded&&this.resourceInfo&&this.resourceInfo.data.baseMapLayers&&(K.baseMapLayers=this.resourceInfo.data.baseMapLayers.map(L=>{L=l.clone(L);L.url&&h.isProtocolRelative(L.url)&&(L.url=`https:${L.url}`);L.templateUrl&&h.isProtocolRelative(L.templateUrl)&&(L.templateUrl=`https:${L.templateUrl}`);return L}));return K};H._loadFromSource=function(){var K=c._asyncToGenerator(function*(G){const {resourceInfo:L,portalItem:P}=this;n.throwIfAborted(G);
const R=[];L?(R.push(this._loadLayersFromJSON(L.data,L.context?L.context.url:null,G)),L.data.id&&!L.data.title&&R.push(D.getBasemapTitle(L.data.id).then(S=>{S&&this.read({title:S},L.context)}))):P&&R.push(this._loadFromItem(P,G));yield Promise.all(R)});return function(G){return K.apply(this,arguments)}}();H._loadLayersFromJSON=function(){var K=c._asyncToGenerator(function*(G,L,P){var R=this.resourceInfo&&this.resourceInfo.context;const S=this.portalItem&&this.portalItem.portal||R&&R.portal||null,
M=R&&"web-scene"===R.origin?"web-scene":"web-map",{populateOperationalLayers:V}=yield new Promise(function(W,ea){p(["./layers/support/layersCreator"],W,ea)});R=[];n.throwIfAborted(P);G.baseMapLayers&&Array.isArray(G.baseMapLayers)&&(L={context:{origin:M,url:L,portal:S,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"},P=V(this.baseLayers,G.baseMapLayers.filter(W=>!W.isReference),L),R.push(P),G=V(this.referenceLayers,G.baseMapLayers.filter(W=>W.isReference),L),R.push(G));yield n.eachAlways(R)});
return function(G,L,P){return K.apply(this,arguments)}}();H._loadFromItem=function(){var K=c._asyncToGenerator(function*(G,L){const P=yield(yield G.load(L)).fetchData("json",L),R=h.urlToObject(G.itemUrl);this._set("resourceInfo",{data:P.baseMap,context:{origin:"web-map",portal:G.portal||x.getDefault(),url:R}});this.read(this.resourceInfo.data,this.resourceInfo.context);this.read({spatialReference:P.spatialReference},this.resourceInfo.context);this.read({title:G.title,thumbnailUrl:G.thumbnailUrl},
{origin:"portal-item",portal:G.portal||x.getDefault(),url:R});return this._loadLayersFromJSON(this.resourceInfo.data,R,L)});return function(G,L){return K.apply(this,arguments)}}();F.fromId=function(K){return(K=D.esriBasemapDefinitions[K])?C.fromJSON(K):null};c._createClass(F,[{key:"baseLayers",set:function(K){this._set("baseLayers",r.referenceSetter(K,this._get("baseLayers")))}},{key:"referenceLayers",set:function(K){this._set("referenceLayers",r.referenceSetter(K,this._get("referenceLayers")))}}]);
return F}(t.JSONSupportMixin(v));z.__decorate([f.property({json:{write:{ignoreOrigin:!0,target:"baseMapLayers",writer(I,F,H,K){this._writeBaseLayers(I,F,K)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:y}},writer(I,F,H,K){this._writeBaseLayers(I,F,K)}}}}}})],t.prototype,"baseLayers",null);z.__decorate([f.property({type:String,json:{origins:{"web-scene":{write:!0}}}})],t.prototype,"id",void 0);z.__decorate([f.property({type:A})],t.prototype,"portalItem",void 0);z.__decorate([f.property()],
t.prototype,"referenceLayers",null);z.__decorate([f.property({readOnly:!0})],t.prototype,"resourceInfo",void 0);z.__decorate([f.property({type:m})],t.prototype,"spatialReference",void 0);z.__decorate([f.property()],t.prototype,"thumbnailUrl",void 0);z.__decorate([f.property({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],t.prototype,"title",void 0);z.__decorate([u.writer("title")],t.prototype,"writeTitle",null);return t=C=z.__decorate([e.subclass("esri.Basemap")],t)})},"esri/core/collectionUtils":function(){define(["exports",
"./Collection"],function(p,c){p.castForReferenceSetter=function(z){return z};p.referenceSetter=function(z,y,r=c){y||(y=new r);if(y===z)return y;y.removeAll();z&&(Array.isArray(z)||"items"in z&&Array.isArray(z.items))?y.addMany(z):z&&y.add(z);return y};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/core/Loadable":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./Error ./Promise ./promiseUtils ./Warning ./accessorSupport/decorators/property ./accessorSupport/decorators/subclass".split(" "),
function(p,c,z,y,r,t,l,v){const q=g=>{g=function(k){function n(...f){var b=k.call(this,...f)||this;b._loadController=null;b.loadError=null;b.loadStatus="not-loaded";b._set("loadWarnings",[]);b.addResolvingPromise(new Promise(a=>{const d=b.load.bind(p._assertThisInitialized(b));b.load=e=>{const u=new Promise((m,x)=>{const A=r.onAbortOrThrow(e,x);b.destroyed&&x(new z("load:instance-destroyed",`Instance of '${b.declaredClass||b.constructor.name}' is already destroyed`,{instance:p._assertThisInitialized(b)}));
b._promiseProps.when(m,x).finally(()=>{A&&A.remove()})});if("not-loaded"===b.loadStatus){b._set("loadStatus","loading");const m=b._loadController=r.createAbortController();d({signal:m.signal});r.onAbort(m.signal,()=>{b._promiseProps.abort()})}a();return u}}));b.when(()=>{b._set("loadStatus","loaded");b._loadController=null},a=>{b._set("loadStatus","failed");b._set("loadError",a);b._loadController=null});return b}p._inheritsLoose(n,k);var h=n.prototype;h.load=function(){return null};h.cancelLoad=function(){var f;
if(this.isFulfilled())return this;this._set("loadError",new z("load:cancelled","Cancelled"));null==(f=this._loadController)?void 0:f.abort();return this};p._createClass(n,[{key:"loaded",get:function(){return"loaded"===this.loadStatus}},{key:"loadWarnings",get:function(){return this._get("loadWarnings")}}]);return n}(g);c.__decorate([l.property({readOnly:!0})],g.prototype,"loaded",null);c.__decorate([l.property({readOnly:!0})],g.prototype,"loadError",void 0);c.__decorate([l.property()],g.prototype,
"loadStatus",void 0);c.__decorate([l.property({type:[t],readOnly:!0})],g.prototype,"loadWarnings",null);return g=c.__decorate([v.subclass("esri.core.Loadable")],g)};y=function(g){function k(){return g.apply(this,arguments)||this}p._inheritsLoose(k,g);return k}(q(y.EsriPromise));y=c.__decorate([v.subclass("esri.core.Loadable")],y);(function(g){g.LoadableMixin=q;g.isLoadable=function(k){return!(!k||!k.load)}})(y||(y={}));return y})},"esri/core/Promise":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./Accessor ./maybe ./promiseUtils ./accessorSupport/decorators/subclass".split(" "),
function(p,c,z,y,r,t,l){let v=function(){function g(n){this.instance=n;this._resolver=t.createDeferred();this._status=0;this._resolvingPromises=[];this._resolver.promise.then(()=>{this._status=1;this._cleanUp()},()=>{this._status=2;this._cleanUp()})}var k=g.prototype;k.addResolvingPromise=function(n){this._resolvingPromises.push(n);this._tryResolve()};k.isResolved=function(){return 1===this._status};k.isRejected=function(){return 2===this._status};k.isFulfilled=function(){return 0!==this._status};
k.abort=function(){this._resolver.reject(t.createAbortError())};k.when=function(n,h){return this._resolver.promise.then(n,h)};k._cleanUp=function(){this._allPromise=this._resolvingPromises=this._allPromise=null};k._tryResolve=function(){if(!this.isFulfilled()){var n=t.createDeferred(),h=[...this._resolvingPromises,r.assumeNonNull(n.promise)],f=this._allPromise=Promise.all(h);f.then(()=>{this.isFulfilled()||this._allPromise!==f||this._resolver.resolve(this.instance)},b=>{this.isFulfilled()||this._allPromise!==
f||t.isAbortError(b)||this._resolver.reject(b)});n.resolve()}};return g}();const q=g=>{g=function(k){function n(...f){f=k.call(this,...f)||this;f._promiseProps=new v(c._assertThisInitialized(f));f.addResolvingPromise(Promise.resolve());return f}c._inheritsLoose(n,k);var h=n.prototype;h.isResolved=function(){return this._promiseProps.isResolved()};h.isRejected=function(){return this._promiseProps.isRejected()};h.isFulfilled=function(){return this._promiseProps.isFulfilled()};h.when=function(f,b){return(new Promise((a,
d)=>{this._promiseProps.when(a,d)})).then(f,b)};h.catch=function(f){return this.when(null,f)};h.addResolvingPromise=function(f){f&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in f?f.when():f)};return n}(g);return g=z.__decorate([l.subclass("esri.core.Promise")],g)};p.EsriPromise=function(g){function k(){return g.apply(this,arguments)||this}c._inheritsLoose(k,g);return k}(q(y));p.EsriPromise=z.__decorate([l.subclass("esri.core.Promise")],p.EsriPromise);
p.EsriPromiseMixin=q;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/core/loadAll":function(){define("exports ../chunks/_rollupPluginBabelHelpers ./asyncUtils ./Collection ./Loadable ./maybe".split(" "),function(p,c,z,y,r,t){function l(k,n){return v.apply(this,arguments)}function v(){v=c._asyncToGenerator(function*(k,n){yield k.load();return q(k,n)});return v.apply(this,arguments)}function q(k,n){return g.apply(this,arguments)}function g(){g=c._asyncToGenerator(function*(k,n){const h=[],
f=(...a)=>{for(const d of a)t.isNone(d)||(Array.isArray(d)?f(...d):y.isCollection(d)?d.forEach(e=>f(e)):r.isLoadable(d)&&h.push(d))};n(f);let b=null;yield z.map(h,function(){var a=c._asyncToGenerator(function*(d){!1!==(yield z.result("loadAll"in d&&"function"===typeof d.loadAll?d.loadAll():d.load())).ok||b||(b=d)});return function(d){return a.apply(this,arguments)}}());if(b)throw b.loadError;return k});return g.apply(this,arguments)}p.default=l;p.loadAll=l;p.loadAllChildren=q;Object.defineProperty(p,
"__esModule",{value:!0})})},"esri/core/asyncUtils":function(){define(["exports","./maybe","./promiseUtils"],function(p,c,z){p.assertResult=function(y){if(!0===y.ok)return y.value;throw y.error;};p.forEach=function(y,r,t){return z.eachAlways(y.map((l,v)=>r.apply(t,[l,v])))};p.map=function(y,r,t){return z.eachAlways(y.map((l,v)=>r.apply(t,[l,v]))).then(l=>l.map(v=>v.value))};p.result=function(y){return c.isNone(y)?z.resolve():y.then(r=>({ok:!0,value:r})).catch(r=>({ok:!1,error:r}))};p.resultOrAbort=
function(y){return y.then(r=>({ok:!0,value:r})).catch(r=>{z.throwIfAbortError(r);return{ok:!1,error:r}})};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/portal/Portal":function(){define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../config ../intl ../kernel ../request ../core/Error ../core/JSONSupport ../core/Loadable ../core/maybe ../core/promiseUtils ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/jsonMap ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../geometry/Extent ./PortalQueryParams ./PortalQueryResult ./PortalUser ../intl/locale".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k,n,h,f,b,a,d,e,u,m,x,A,D,B){function C(F){return Object.freeze({__proto__:null,"default":F})}var w;let E;const I={PortalGroup:()=>new Promise(function(F,H){p(["./PortalGroup"],function(K){F(C(K))},H)}),PortalItem:()=>new Promise(function(F,H){p(["./PortalItem"],function(K){F(C(K))},H)}),PortalUser:()=>new Promise(function(F,H){p(["./PortalUser"],function(K){F(C(K))},H)})};r=w=function(F){function H(G){G=F.call(this,G)||this;G.access=null;G.allSSL=!1;G.authMode="auto";
G.authorizedCrossOriginDomains=null;G.basemapGalleryGroupQuery=null;G.bingKey=null;G.canListApps=!1;G.canListData=!1;G.canListPreProvisionedItems=!1;G.canProvisionDirectPurchase=!1;G.canSearchPublic=!0;G.canShareBingPublic=!1;G.canSharePublic=!1;G.canSignInArcGIS=!1;G.canSignInIDP=!1;G.colorSetsGroupQuery=null;G.commentsEnabled=!1;G.created=null;G.culture=null;G.customBaseUrl=null;G.defaultBasemap=null;G.defaultExtent=null;G.defaultVectorBasemap=null;G.description=null;G.eueiEnabled=null;G.featuredGroups=
null;G.featuredItemsGroupQuery=null;G.galleryTemplatesGroupQuery=null;G.livingAtlasGroupQuery=null;G.hasCategorySchema=!1;G.helperServices=null;G.homePageFeaturedContent=null;G.homePageFeaturedContentCount=null;G.httpPort=null;G.httpsPort=null;G.id=null;G.ipCntryCode=null;G.isPortal=!1;G.isReadOnly=!1;G.layerTemplatesGroupQuery=null;G.maxTokenExpirationMinutes=null;G.modified=null;G.name=null;G.portalHostname=null;G.portalMode=null;G.portalProperties=null;G.region=null;G.rotatorPanels=null;G.showHomePageDescription=
!1;G.sourceJSON=null;G.supportsHostedServices=!1;G.symbolSetsGroupQuery=null;G.templatesGroupQuery=null;G.units=null;G.url=y.portalUrl;G.urlKey=null;G.user=null;G.useStandardizedQuery=!1;G.useVectorBasemaps=!1;G.vectorBasemapGalleryGroupQuery=null;return G}c._inheritsLoose(H,F);var K=H.prototype;K.normalizeCtorArgs=function(G){return"string"===typeof G?{url:G}:G};K.destroy=function(){this._esriId_credentialCreateHandle&&(this._esriId_credentialCreateHandle.remove(),this._esriId_credentialCreateHandle=
null)};K.readAuthorizedCrossOriginDomains=function(G){if(G)for(const L of G)-1===y.request.trustedServers.indexOf(L)&&y.request.trustedServers.push(L);return G};K.readDefaultBasemap=function(G){return G?(G=E.fromJSON(G),G.portalItem={portal:this},G):null};K.readDefaultVectorBasemap=function(G){return G?(G=E.fromJSON(G),G.portalItem={portal:this},G):null};K.readUrlKey=function(G){return G?G.toLowerCase():G};K.readUser=function(G){let L=null;G&&(L=D.fromJSON(G),L.portal=this);return L};K.load=function(G){const L=
(new Promise(function(P,R){p(["../Basemap"],function(S){P(C(S))},R)})).then(({default:P})=>{n.throwIfAborted(G);E=P}).then(()=>this.sourceJSON?this.sourceJSON:this._fetchSelf(this.authMode,!1,G)).then(P=>{if(t.id){const R=t.id;this.credential=R.findCredential(this.restUrl);this.credential||this.authMode!==w.AUTH_MODE_AUTO||(this._esriId_credentialCreateHandle=R.on("credential-create",()=>{R.findCredential(this.restUrl)&&this._signIn()}))}this.sourceJSON=P;this.read(P)});this.addResolvingPromise(L);
return Promise.resolve(this)};K.createClosestFacilityTask=function(){var G=c._asyncToGenerator(function*(){yield this.load();const L=this._getHelperServiceUrl("closestFacility");return new (yield new Promise(function(P,R){p(["../tasks/ClosestFacilityTask"],function(S){P(C(S))},R)})).default(L)});return function(){return G.apply(this,arguments)}}();K.createElevationLayers=function(){var G=c._asyncToGenerator(function*(){yield this.load();const L=this._getHelperService("defaultElevationLayers"),P=(yield new Promise(function(R,
S){p(["../layers/ElevationLayer"],function(M){R(C(M))},S)})).default;return L?L.map(R=>new P({id:R.id,url:R.url})):[]});return function(){return G.apply(this,arguments)}}();K.createGeometryService=function(){var G=c._asyncToGenerator(function*(){yield this.load();const L=this._getHelperServiceUrl("geometry");return new (yield new Promise(function(P,R){p(["../tasks/GeometryService"],function(S){P(C(S))},R)})).default({url:L})});return function(){return G.apply(this,arguments)}}();K.createPrintTask=
function(){var G=c._asyncToGenerator(function*(){yield this.load();const L=this._getHelperServiceUrl("printTask");return new (yield new Promise(function(P,R){p(["../tasks/PrintTask"],function(S){P(C(S))},R)})).default(L)});return function(){return G.apply(this,arguments)}}();K.createRouteTask=function(){var G=c._asyncToGenerator(function*(){yield this.load();const L=this._getHelperServiceUrl("route");return new (yield new Promise(function(P,R){p(["../tasks/RouteTask"],function(S){P(C(S))},R)})).default(L)});
return function(){return G.apply(this,arguments)}}();K.createServiceAreaTask=function(){var G=c._asyncToGenerator(function*(){yield this.load();const L=this._getHelperServiceUrl("serviceArea");return new (yield new Promise(function(P,R){p(["../tasks/ServiceAreaTask"],function(S){P(C(S))},R)})).default(L)});return function(){return G.apply(this,arguments)}}();K.fetchBasemaps=function(G,L){const P=new x;P.query=G||(this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery);
P.disableExtraQuery=!0;return this.queryGroups(P,L).then(R=>{P.num=100;P.query='type:"Web Map" -type:"Web Application"';return R.total?(R=R.results[0],P.sortField=R.sortField||"name",P.sortOrder=R.sortOrder||"desc",R.queryItems(P,L)):null}).then(R=>R&&R.total?R.results.filter(S=>"Web Map"===S.type).map(S=>new E({portalItem:S})):[])};K.fetchCategorySchema=function(G){return this.hasCategorySchema?this._request(this.restUrl+"/portals/self/categorySchema",G).then(L=>L.categorySchema):n.isAborted(G)?
Promise.reject(n.createAbortError()):Promise.resolve([])};K.fetchFeaturedGroups=function(G){const L=this.featuredGroups,P=new x;P.num=100;P.sortField="title";if(L&&L.length){const R=[];for(const S of L)R.push(`(title:"${S.title}" AND owner:${S.owner})`);P.query=R.join(" OR ");return this.queryGroups(P,G).then(S=>S.results)}return n.isAborted(G)?Promise.reject(n.createAbortError()):Promise.resolve([])};K.fetchRegions=function(G){const L=this.user&&this.user.culture||this.culture||B.getLocale();return this._request(this.restUrl+
"/portals/regions",{...G,query:{culture:L}})};H.getDefault=function(){if(!w._default||w._default.destroyed)w._default=new w;return w._default};K.queryGroups=function(G,L){return this._queryPortal("/community/groups",G,"PortalGroup",L)};K.queryItems=function(G,L){return this._queryPortal("/search",G,"PortalItem",L)};K.queryUsers=function(G,L){G.sortField||(G.sortField="username");return this._queryPortal("/community/users",G,"PortalUser",L)};K.toJSON=function(){throw new v("internal:not-yet-implemented",
"Portal.toJSON is not yet implemented");};H.fromJSON=function(G){if(!G)return null;if(G.declaredClass)throw Error("JSON object is already hydrated");return new w({sourceJSON:G})};K._getHelperService=function(G){const L=this.helperServices&&this.helperServices[G];if(!L)throw new v("portal:service-not-found",`The \`helperServices\` do not include an entry named "${G}"`);return L};K._getHelperServiceUrl=function(G){const L=this._getHelperService(G);if(!L.url)throw new v("portal:service-url-not-found",
`The \`helperServices\` entry "${G}" does not include a \`url\` value`);return L.url};K._fetchSelf=function(G=this.authMode,L=!1,P){const R=this.restUrl+"/portals/self";G={authMode:G,query:{culture:B.getLocale().toLowerCase()},...P};"auto"===G.authMode&&(G.authMode="no-prompt");L&&(G.query.default=!0);return this._request(R,G)};K._queryPortal=function(G,L,P,R){const S=b.ensureType(x,L),M=V=>this._request(this.restUrl+G,{...S.toRequestOptions(this),...R}).then(W=>{const ea=S.clone();ea.start=W.nextStart;
return new A({nextQueryParams:ea,queryParams:S,total:W.total,results:w._resultsToTypedArray(V,{portal:this},W,R)})}).then(W=>Promise.all(W.results.map(ea=>"function"===typeof ea.when?ea.when():W)).then(()=>W,ea=>{n.throwIfAbortError(ea);return W}));return P&&I[P]?I[P]().then(({default:V})=>{n.throwIfAborted(R);return M(V)}):M()};K._signIn=function(){if(this.authMode===w.AUTH_MODE_ANONYMOUS)return Promise.reject(new v("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if("failed"===
this.loadStatus)return Promise.reject(this.loadError);const G=L=>Promise.resolve().then(()=>{if("not-loaded"===this.loadStatus)return L||(this.authMode="immediate"),this.load().then(()=>null);if("loading"===this.loadStatus)return this.load().then(()=>{if(this.credential)return null;this.credential=L;return this._fetchSelf("immediate")});if(this.user&&this.credential===L)return null;this.credential=L;return this._fetchSelf("immediate")}).then(P=>{P&&(this.sourceJSON=P,this.read(P))});return t.id?t.id.getCredential(this.restUrl).then(L=>
G(L)):G(this.credential)};K._normalizeSSL=function(G){return G.replace(/^http:/i,"https:").replace(":7080",":7443")};K._normalizeUrl=function(G){const L=this.credential&&this.credential.token;return this._normalizeSSL(L?G+(-1<G.indexOf("?")?"\x26":"?")+"token\x3d"+L:G)};K._requestToTypedArray=function(G,L,P){return this._request(G,L).then(R=>{const S=w._resultsToTypedArray(P,{portal:this},R);return Promise.all(S.map(M=>"function"===typeof M.when?M.when():R)).then(()=>S,()=>S)})};K._request=function(G,
L={}){const P={f:"json",...L.query},{authMode:R=this.authMode===w.AUTH_MODE_ANONYMOUS?"anonymous":"auto",body:S=null,cacheBust:M=!1,method:V="auto",responseType:W="json",signal:ea}=L;L={authMode:R,body:S,cacheBust:M,method:V,query:P,responseType:W,timeout:0,signal:ea};return l(this._normalizeSSL(G),L).then(ka=>ka.data)};H._resultsToTypedArray=function(G,L,P,R){if(P){const S=k.isSome(R)?R.signal:null;P=P.listings||P.notifications||P.userInvitations||P.tags||P.items||P.groups||P.comments||P.provisions||
P.results||P.relatedItems||P;if(G||L)P=P.map(M=>{M=Object.assign(G?G.fromJSON(M):M,L);"function"===typeof M.load&&M.load(S);return M})}else P=[];return P};c._createClass(H,[{key:"extraQuery",get:function(){const G=!(this.user&&this.user.orgId)||this.canSearchPublic;return this.id&&!G?` AND orgid:${this.id}`:null}},{key:"isOrganization",get:function(){return!!this.access}},{key:"restUrl",get:function(){let G=this.url;if(G){const L=G.indexOf("/sharing");G=0<L?G.substring(0,L):this.url.replace(/\/+$/,
"");G+="/sharing/rest"}return G}},{key:"thumbnailUrl",get:function(){const G=this.restUrl,L=this.thumbnail;return G&&L?this._normalizeSSL(G+"/portals/self/resources/"+L):null}}]);return H}(q.JSONSupportMixin(g));r.AUTH_MODE_ANONYMOUS="anonymous";r.AUTH_MODE_AUTO="auto";r.AUTH_MODE_IMMEDIATE="immediate";z.__decorate([h.property()],r.prototype,"access",void 0);z.__decorate([h.property()],r.prototype,"allSSL",void 0);z.__decorate([h.property()],r.prototype,"authMode",void 0);z.__decorate([h.property()],
r.prototype,"authorizedCrossOriginDomains",void 0);z.__decorate([e.reader("authorizedCrossOriginDomains")],r.prototype,"readAuthorizedCrossOriginDomains",null);z.__decorate([h.property()],r.prototype,"basemapGalleryGroupQuery",void 0);z.__decorate([h.property()],r.prototype,"bingKey",void 0);z.__decorate([h.property()],r.prototype,"canListApps",void 0);z.__decorate([h.property()],r.prototype,"canListData",void 0);z.__decorate([h.property()],r.prototype,"canListPreProvisionedItems",void 0);z.__decorate([h.property()],
r.prototype,"canProvisionDirectPurchase",void 0);z.__decorate([h.property()],r.prototype,"canSearchPublic",void 0);z.__decorate([h.property()],r.prototype,"canShareBingPublic",void 0);z.__decorate([h.property()],r.prototype,"canSharePublic",void 0);z.__decorate([h.property()],r.prototype,"canSignInArcGIS",void 0);z.__decorate([h.property()],r.prototype,"canSignInIDP",void 0);z.__decorate([h.property()],r.prototype,"colorSetsGroupQuery",void 0);z.__decorate([h.property()],r.prototype,"commentsEnabled",
void 0);z.__decorate([h.property({type:Date})],r.prototype,"created",void 0);z.__decorate([h.property()],r.prototype,"credential",void 0);z.__decorate([h.property()],r.prototype,"culture",void 0);z.__decorate([h.property()],r.prototype,"currentVersion",void 0);z.__decorate([h.property()],r.prototype,"customBaseUrl",void 0);z.__decorate([h.property()],r.prototype,"defaultBasemap",void 0);z.__decorate([e.reader("defaultBasemap")],r.prototype,"readDefaultBasemap",null);z.__decorate([h.property({type:m})],
r.prototype,"defaultExtent",void 0);z.__decorate([h.property()],r.prototype,"defaultVectorBasemap",void 0);z.__decorate([e.reader("defaultVectorBasemap")],r.prototype,"readDefaultVectorBasemap",null);z.__decorate([h.property()],r.prototype,"description",void 0);z.__decorate([h.property()],r.prototype,"eueiEnabled",void 0);z.__decorate([h.property({readOnly:!0})],r.prototype,"extraQuery",null);z.__decorate([h.property()],r.prototype,"featuredGroups",void 0);z.__decorate([h.property()],r.prototype,
"featuredItemsGroupQuery",void 0);z.__decorate([h.property()],r.prototype,"galleryTemplatesGroupQuery",void 0);z.__decorate([h.property()],r.prototype,"livingAtlasGroupQuery",void 0);z.__decorate([h.property()],r.prototype,"hasCategorySchema",void 0);z.__decorate([h.property()],r.prototype,"helpBase",void 0);z.__decorate([h.property()],r.prototype,"helperServices",void 0);z.__decorate([h.property()],r.prototype,"helpMap",void 0);z.__decorate([h.property()],r.prototype,"homePageFeaturedContent",void 0);
z.__decorate([h.property()],r.prototype,"homePageFeaturedContentCount",void 0);z.__decorate([h.property()],r.prototype,"httpPort",void 0);z.__decorate([h.property()],r.prototype,"httpsPort",void 0);z.__decorate([h.property()],r.prototype,"id",void 0);z.__decorate([h.property()],r.prototype,"ipCntryCode",void 0);z.__decorate([h.property({readOnly:!0})],r.prototype,"isOrganization",null);z.__decorate([h.property()],r.prototype,"isPortal",void 0);z.__decorate([h.property()],r.prototype,"isReadOnly",
void 0);z.__decorate([h.property()],r.prototype,"layerTemplatesGroupQuery",void 0);z.__decorate([h.property()],r.prototype,"maxTokenExpirationMinutes",void 0);z.__decorate([h.property({type:Date})],r.prototype,"modified",void 0);z.__decorate([h.property()],r.prototype,"name",void 0);z.__decorate([h.property()],r.prototype,"portalHostname",void 0);z.__decorate([h.property()],r.prototype,"portalMode",void 0);z.__decorate([h.property()],r.prototype,"portalProperties",void 0);z.__decorate([h.property()],
r.prototype,"region",void 0);z.__decorate([h.property({readOnly:!0})],r.prototype,"restUrl",null);z.__decorate([h.property()],r.prototype,"rotatorPanels",void 0);z.__decorate([h.property()],r.prototype,"showHomePageDescription",void 0);z.__decorate([h.property()],r.prototype,"sourceJSON",void 0);z.__decorate([h.property()],r.prototype,"staticImagesUrl",void 0);z.__decorate([h.property()],r.prototype,"stylesGroupQuery",void 0);z.__decorate([h.property()],r.prototype,"supportsHostedServices",void 0);
z.__decorate([h.property()],r.prototype,"symbolSetsGroupQuery",void 0);z.__decorate([h.property()],r.prototype,"templatesGroupQuery",void 0);z.__decorate([h.property()],r.prototype,"thumbnail",void 0);z.__decorate([h.property({readOnly:!0})],r.prototype,"thumbnailUrl",null);z.__decorate([h.property()],r.prototype,"units",void 0);z.__decorate([h.property()],r.prototype,"url",void 0);z.__decorate([h.property()],r.prototype,"urlKey",void 0);z.__decorate([e.reader("urlKey")],r.prototype,"readUrlKey",
null);z.__decorate([h.property()],r.prototype,"user",void 0);z.__decorate([e.reader("user")],r.prototype,"readUser",null);z.__decorate([h.property()],r.prototype,"useStandardizedQuery",void 0);z.__decorate([h.property()],r.prototype,"useVectorBasemaps",void 0);z.__decorate([h.property()],r.prototype,"vectorBasemapGalleryGroupQuery",void 0);return r=w=z.__decorate([u.subclass("esri.portal.Portal")],r)})},"esri/intl":function(){define("exports ./intl/date ./intl/number ./intl/substitute ./intl/locale ./intl/messages ./intl/t9n ./assets".split(" "),
function(p,c,z,y,r,t,l,v){t.registerMessageBundleLoader(l.createJSONLoader({pattern:"esri/",location:v.getAssetUrl}));p.convertDateFormatToIntlOptions=c.convertDateFormatToIntlOptions;p.formatDate=c.formatDate;p.convertNumberFormatToIntlOptions=z.convertNumberFormatToIntlOptions;p.formatNumber=z.formatNumber;p.substitute=y.substitute;p.getLocale=r.getLocale;p.onLocaleChange=r.onLocaleChange;p.prefersRTL=r.prefersRTL;p.setLocale=r.setLocale;p.fetchMessageBundle=t.fetchMessageBundle;p.normalizeMessageBundleLocale=
t.normalizeMessageBundleLocale;p.registerMessageBundleLoader=t.registerMessageBundleLoader;p.createJSONLoader=l.createJSONLoader;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/intl/date":function(){define(["exports","../core/jsonMap","./locale"],function(p,c,z){function y(b){b=b||f;if(!h.has(b)){var a=z.getLocale();a=n[z.getLocale()]||a;h.set(b,new Intl.DateTimeFormat(a,b))}return h.get(b)}var r={year:"numeric",month:"numeric",day:"numeric"},t={year:"numeric",month:"long",day:"numeric"},
l={year:"numeric",month:"short",day:"numeric"};const v={year:"numeric",month:"long",weekday:"long",day:"numeric"},q={hour:"numeric",minute:"numeric"},g={...q,second:"numeric"},k={"short-date":r,"short-date-short-time":{...r,...q},"short-date-short-time-24":{...r,...q,hour12:!1},"short-date-long-time":{...r,...g},"short-date-long-time-24":{...r,...g,hour12:!1},"short-date-le":r,"short-date-le-short-time":{...r,...q},"short-date-le-short-time-24":{...r,...q,hour12:!1},"short-date-le-long-time":{...r,
...g},"short-date-le-long-time-24":{...r,...g,hour12:!1},"long-month-day-year":t,"long-month-day-year-short-time":{...t,...q},"long-month-day-year-short-time-24":{...t,...q,hour12:!1},"long-month-day-year-long-time":{...t,...g},"long-month-day-year-long-time-24":{...t,...g,hour12:!1},"day-short-month-year":l,"day-short-month-year-short-time":{...l,...q},"day-short-month-year-short-time-24":{...l,...q,hour12:!1},"day-short-month-year-long-time":{...l,...g},"day-short-month-year-long-time-24":{...l,
...g,hour12:!1},"long-date":v,"long-date-short-time":{...v,...q},"long-date-short-time-24":{...v,...q,hour12:!1},"long-date-long-time":{...v,...g},"long-date-long-time-24":{...v,...g,hour12:!1},"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":q,"long-time":g};c=c.strict()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",
shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",
dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",
shortMonthYear:"short-month-year",year:"year"});r=c.apiValues;t=c.toJSON.bind(c);l=c.fromJSON.bind(c);const n={ar:"ar-u-nu-latn-ca-gregory"};let h=new WeakMap,f=k["short-date-short-time"];z.beforeLocaleChange(()=>{h=new WeakMap;f=k["short-date-short-time"]});p.convertDateFormatToIntlOptions=function(b){return k[b]||null};p.dateFormats=r;p.dictionary=c;p.formatDate=function(b,a){return y(a).format(b)};p.fromJSON=l;p.getDateTimeFormatter=y;p.toJSON=t;Object.defineProperty(p,"__esModule",{value:!0})})},
"esri/intl/locale":function(){define(["exports","../core/global"],function(p,c){function z(){var a,d;return null!=(a=null!=n?n:null==(d=c.navigator)?void 0:d.language)?a:"en"}function y(){void 0===k&&(k=z());return k}function r(a=y()){a=/^([a-zA-Z]{2,3})(?:[_\-]\w+)*$/.exec(a);return null==a?void 0:a[1].toLowerCase()}function t(){var a;const d=null!=(a=g)?a:z();k!==d&&(k=d,[...b].forEach(e=>{e.call(null,d)}),[...f].forEach(e=>{e.call(null,d)}))}var l,v,q;let g=void 0,k=void 0;const n=null!=(l=null==
(v=c.esriConfig)?void 0:v.locale)?l:null==(q=c.dojoConfig)?void 0:q.locale,h={he:!0,ar:!0},f=[],b=[];null==c.addEventListener?void 0:c.addEventListener("languagechange",t);p.beforeLocaleChange=function(a){b.push(a);return{remove(){f.splice(b.indexOf(a),1)}}};p.getDefaultLocale=z;p.getLanguage=r;p.getLocale=y;p.onLocaleChange=function(a){f.push(a);return{remove(){f.splice(f.indexOf(a),1)}}};p.prefersRTL=function(a=y()){a=r(a);return void 0!==a&&(h[a]||!1)};p.setLocale=function(a){g=a?a:void 0;t()};
Object.defineProperty(p,"__esModule",{value:!0})})},"esri/intl/number":function(){define(["exports","../core/maybe","./locale"],function(p,c,z){function y(v){const q=v||l;if(!t.has(q)){var g=z.getLocale();g=r[z.getLocale()]||g;t.set(q,new Intl.NumberFormat(g,v))}return c.assumeNonNull(t.get(q))}const r={ar:"ar-u-nu-latn"};let t=new WeakMap,l={};z.beforeLocaleChange(()=>{t=new WeakMap;l={}});p.convertNumberFormatToIntlOptions=function(v={}){const q={};null!=v.digitSeparator&&(q.useGrouping=v.digitSeparator);
null!=v.places&&(q.minimumFractionDigits=q.maximumFractionDigits=v.places);return q};p.formatNumber=function(v,q){return y(q).format(v)};p.getFormatter=y;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/intl/substitute":function(){define("exports ../core/Logger ../core/object ../core/string ./date ./number".split(" "),function(p,c,z,y,r,t){function l(q){switch(typeof q){case "string":return q;case "number":return t.formatNumber(q);case "boolean":return""+q;default:return q instanceof Date?
r.formatDate(q):""}}const v=c.getLogger("esri.intl");p.substitute=function(q,g,k={}){const {format:n={}}=k;return y.replace(q,h=>{{const a=h.indexOf(":");if(-1===a)var f=h.trim();else{f=h.slice(0,a).trim();var b=h.slice(a+1).trim()}if(f)if(h=z.getDeepValue(f,g),null==h)b="";else if(f=n[b]||n[f])b:switch(f.type){case "date":b=r.formatDate(h,f.intlOptions);break b;case "number":b=t.formatNumber(h,f.intlOptions);break b;default:v.warn("missing format descriptor for key {key}"),b=l(h)}else if(b)b:switch(b.toLowerCase()){case "dateformat":b=
r.formatDate(h);break b;case "numberformat":b=t.formatNumber(h);break b;default:v.warn(`inline format is unsupported since 4.12: ${b}`),b=/^(dateformat|datestring)/i.test(b)?r.formatDate(h):/^numberformat/i.test(b)?t.formatNumber(h):l(h)}else b=l(h);else b=""}return b})};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/intl/messages":function(){define(["exports","../chunks/_rollupPluginBabelHelpers","../core/Error","../core/promiseUtils","./locale"],function(p,c,z,y,r){function t(e){var u;
return null!=(u=h[e])?u:!1}function l(e){for(const u of b.keys())k(e.pattern,u)&&b.delete(u)}function v(){v=c._asyncToGenerator(function*(e){const u=r.getLocale();b.has(e)||b.set(e,q(e,u));e=b.get(e);yield a.add(e);return e});return v.apply(this,arguments)}function q(e,u){return g.apply(this,arguments)}function g(){g=c._asyncToGenerator(function*(e,u){const m=[];for(const x of f)if(k(x.pattern,e))try{return yield x.fetchMessageBundle(e,u)}catch(A){m.push(A)}if(m.length)throw new z("intl:message-bundle-error",
`Errors occurred while loading "${e}"`,{errors:m});throw new z("intl:no-message-bundle-loader",`No loader found for message bundle "${e}"`);});return g.apply(this,arguments)}function k(e,u){return"string"===typeof e?u.startsWith(e):e.test(u)}const n=/^([a-z]{2})(?:[-_]([A-Za-z]{2}))?$/,h={ar:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:!0,nl:!0,pl:!0,"pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,
uk:!0,vi:!0,"zh-CN":!0,"zh-HK":!0,"zh-TW":!0},f=[],b=new Map;r.beforeLocaleChange(()=>{b.clear()});const a=new (function(){function e(){this._numLoading=0}var u=e.prototype;u.waitForAll=function(){var m=c._asyncToGenerator(function*(){this._dfd&&(yield this._dfd.promise)});return function(){return m.apply(this,arguments)}}();u.add=function(m){this._increase();m.then(()=>this._decrease(),()=>this._decrease());return this.waitForAll()};u._increase=function(){this._numLoading++;this._dfd||(this._dfd=
y.createDeferred())};u._decrease=function(){this._numLoading=Math.max(this._numLoading-1,0);this._dfd&&0===this._numLoading&&(this._dfd.resolve(),this._dfd=null)};return e}()),d={cache:b,loaders:f};p.fetchMessageBundle=function(e){return v.apply(this,arguments)};p.normalizeMessageBundleLocale=function(e){if(!n.test(e))return null;const [,u,m]=n.exec(e);e=u+(m?"-"+m.toUpperCase():"");return t(e)?e:t(u)?u:null};p.registerMessageBundleLoader=function(e){f.includes(e)||(l(e),f.unshift(e));return{remove(){const u=
f.indexOf(e);-1<u&&(f.splice(u,1),l(e))}}};p.test=d;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/intl/t9n":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../request ../core/Error ../core/global ../core/maybe ./messages".split(" "),function(p,c,z,y,r,t,l){function v(f,b,a,d){return q.apply(this,arguments)}function q(){q=c._asyncToGenerator(function*(f,b,a,d){var e=b.exec(a);if(!e)throw new y("esri-intl:invalid-bundle",`Bundle id "${a}" is not compatible with the pattern "${b}"`);
b=e[1]?`${e[1]}/`:"";e=e[2];const u=l.normalizeMessageBundleLocale(d);d=`${b}${e}.json`;b=u?`${b}${e}_${u}.json`:d;let m;try{m=yield g(f(b))}catch(x){if(b===d)throw new y("intl:unknown-bundle",`Bundle "${a}" cannot be loaded`,{error:x});try{m=yield g(f(d))}catch(A){throw new y("intl:unknown-bundle",`Bundle "${a}" cannot be loaded`,{error:A});}}return m});return q.apply(this,arguments)}function g(f){return k.apply(this,arguments)}function k(){k=c._asyncToGenerator(function*(f){if(t.isSome(h.fetchBundleAsset))return h.fetchBundleAsset(f);
f=yield z(f,{responseType:"text"});return JSON.parse(f.data)});return k.apply(this,arguments)}let n=function(){function f({base:b="",pattern:a,location:d=new URL(window.location.href)}){let e;e="string"===typeof d?u=>(new URL(u,new URL(d,r.location))).href:d instanceof URL?u=>(new URL(u,d)).href:d;this.pattern="string"===typeof a?new RegExp(`^${a}`):a;this.getAssetUrl=e;b=b?b.endsWith("/")?b:b+"/":"";this.matcher=new RegExp(`^${b}(?:(.*)\/)?(.*)$`)}f.prototype.fetchMessageBundle=function(b,a){return v(this.getAssetUrl,
this.matcher,b,a)};return f}();const h={};p.JSONLoader=n;p.createJSONLoader=function(f){return new n(f)};p.test=h;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/portal/PortalQueryParams":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Accessor ../core/jsonMap ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/has ../core/Logger ../core/accessorSupport/decorators/subclass ../geometry/Extent ../geometry/SpatialReference ../geometry/support/webMercatorUtils".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k,n,h){var f;const b=new y.JSONMap({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});z=f=function(a){function d(u){u=a.call(this,u)||this;u.categories=null;u.disableExtraQuery=!1;u.extent=null;u.num=10;u.query=null;u.sortField=null;u.start=1;return u}p._inheritsLoose(d,a);var e=d.prototype;e.clone=function(){return new f({categories:this.categories?r.clone(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?
this.extent.clone():null,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})};e.toRequestOptions=function(u,m){let x;this.categories&&(x=this.categories.map(B=>Array.isArray(B)?JSON.stringify(B):B));let A;if(this.extent){var D=h.project(this.extent,n.WGS84);D&&(A=`${D.xmin},${D.ymin},${D.xmax},${D.ymax}`)}D=this.query;!this.disableExtraQuery&&u.extraQuery&&(D="("+D+")"+u.extraQuery);u={categories:x,bbox:A,q:D,num:this.num,sortField:null,sortOrder:null,
start:this.start};this.sortField&&(u.sortField=this.sortField.split(",").map(B=>b.toJSON(B.trim())).join(","),u.sortOrder=this.sortOrder);return{query:{...m,...u}}};p._createClass(d,[{key:"sortOrder",get:function(){return this._get("sortOrder")||"asc"},set:function(u){"asc"!==u&&"desc"!==u||this._set("sortOrder",u)}}]);return d}(z);c.__decorate([t.property()],z.prototype,"categories",void 0);c.__decorate([t.property()],z.prototype,"disableExtraQuery",void 0);c.__decorate([t.property({type:k})],z.prototype,
"extent",void 0);c.__decorate([t.property()],z.prototype,"num",void 0);c.__decorate([t.property()],z.prototype,"query",void 0);c.__decorate([t.property()],z.prototype,"sortField",void 0);c.__decorate([t.property()],z.prototype,"sortOrder",null);c.__decorate([t.property()],z.prototype,"start",void 0);return z=f=c.__decorate([g.subclass("esri.portal.PortalQueryParams")],z)})},"esri/portal/PortalQueryResult":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Accessor ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/jsonMap ../core/accessorSupport/decorators/subclass".split(" "),
function(p,c,z,y,r,t,l,v,q){z=function(g){function k(n){n=g.call(this,n)||this;n.nextQueryParams=null;n.queryParams=null;n.results=null;n.total=null;return n}p._inheritsLoose(k,g);return k}(z);c.__decorate([y.property()],z.prototype,"nextQueryParams",void 0);c.__decorate([y.property()],z.prototype,"queryParams",void 0);c.__decorate([y.property()],z.prototype,"results",void 0);c.__decorate([y.property()],z.prototype,"total",void 0);return z=c.__decorate([q.subclass("esri.portal.PortalQueryResult")],
z)})},"esri/portal/PortalUser":function(){define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Error ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/jsonMap ../core/accessorSupport/decorators/subclass ./PortalFolder ./PortalGroup".split(" "),function(p,c,z,y,r,t,l,v,q,g,k,n,h){var f;r=f=function(b){function a(...e){e=b.call(this,...e)||this;e.access=null;e.created=null;e.culture=null;e.description=
null;e.email=null;e.fullName=null;e.modified=null;e.orgId=null;e.portal=null;e.preferredView=null;e.privileges=null;e.region=null;e.role=null;e.roleId=null;e.sourceJSON=null;e.units=null;e.username=null;e.userType=null;return e}c._inheritsLoose(a,b);var d=a.prototype;d.addItem=function(e){const u=e&&e.item;var m=e&&e.data;e=e&&e.folder;const x={method:"post"};u&&(x.query=u.createPostQuery(),null!=m&&("string"===typeof m?x.query.text=m:"object"===typeof m&&(x.query.text=JSON.stringify(m))));m=this.userContentUrl;
e&&(m+="/"+("string"===typeof e?e:e.id));return this.portal._request(m+"/addItem",x).then(A=>{u.id=A.id;u.portal=this.portal;return u.loaded?u.reload():u.load()})};d.deleteItem=function(e){let u=this.userContentUrl;e.ownerFolder&&(u+="/"+e.ownerFolder);return this.portal._request(u+`/items/${e.id}/delete`,{method:"post"}).then(()=>{e.id=null;e.portal=null})};d.deleteItems=function(e){const u=this.userContentUrl+"/deleteItems";var m=e.map(x=>x.id);return m.length?(m={method:"post",query:{items:m.join(",")}},
this.portal._request(u,m).then(()=>{e.forEach(x=>{x.id=null;x.portal=null})})):Promise.resolve(void 0)};d.fetchFolders=function(){return this.portal._request(this.userContentUrl,{query:{num:1}}).then(e=>e&&e.folders?e.folders.map(u=>{u=n.fromJSON(u);u.portal=this.portal;return u}):[])};d.fetchGroups=function(){return this.portal._request(this.url).then(e=>e&&e.groups?e.groups.map(u=>{u=h.fromJSON(u);u.portal=this.portal;return u}):[])};d.fetchItems=function(e){e||(e={});let u=this.userContentUrl;
e.folder&&(u+="/"+e.folder.id);let m;return(new Promise(function(x,A){p(["./PortalItem"],function(D){x(Object.freeze({__proto__:null,"default":D}))},A)})).then(({default:x})=>{m=x;return this.portal._request(u,{query:{folders:!1,num:e.num||10,start:e.start||1,sortField:e.sortField||"created",sortOrder:e.sortOrder||"asc"}})}).then(x=>{let A;return x&&x.items?(A=x.items.map(D=>{D=m.fromJSON(D);D.portal=this.portal;return D}),Promise.all(A.map(D=>D.load())).catch(D=>D).then(()=>({items:A,nextStart:x.nextStart,
total:x.total}))):{items:[],nextStart:-1,total:0}})};d.fetchTags=function(){return this.portal._request(this.url+"/tags").then(e=>e.tags)};d.getThumbnailUrl=function(e){let u=this.thumbnailUrl;u&&e&&(u+=`&w=${e}`);return u};d.queryFavorites=function(e){return this.favGroupId?(this._favGroup||(this._favGroup=new h({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(e)):Promise.reject(new y("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))};d.toJSON=
function(){throw new y("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented");};a.fromJSON=function(e){if(!e)return null;if(e.declaredClass)throw Error("JSON object is already hydrated");const u=new f;u.sourceJSON=e;u.read(e);return u};c._createClass(a,[{key:"thumbnailUrl",get:function(){const e=this.url,u=this.thumbnail;return e&&u?this.portal._normalizeUrl(`${e}/info/${u}?f=json`):null}},{key:"userContentUrl",get:function(){const e=this.get("portal.restUrl");return e?`${e}/content/users/${this.username}`:
null}},{key:"url",get:function(){const e=this.get("portal.restUrl");return e?`${e}/community/users/${this.username}`:null}}]);return a}(r.JSONSupport);z.__decorate([t.property()],r.prototype,"access",void 0);z.__decorate([t.property({type:Date})],r.prototype,"created",void 0);z.__decorate([t.property()],r.prototype,"culture",void 0);z.__decorate([t.property()],r.prototype,"description",void 0);z.__decorate([t.property()],r.prototype,"email",void 0);z.__decorate([t.property()],r.prototype,"favGroupId",
void 0);z.__decorate([t.property()],r.prototype,"fullName",void 0);z.__decorate([t.property({type:Date})],r.prototype,"modified",void 0);z.__decorate([t.property()],r.prototype,"orgId",void 0);z.__decorate([t.property()],r.prototype,"portal",void 0);z.__decorate([t.property()],r.prototype,"preferredView",void 0);z.__decorate([t.property()],r.prototype,"privileges",void 0);z.__decorate([t.property()],r.prototype,"region",void 0);z.__decorate([t.property()],r.prototype,"role",void 0);z.__decorate([t.property()],
r.prototype,"roleId",void 0);z.__decorate([t.property()],r.prototype,"sourceJSON",void 0);z.__decorate([t.property()],r.prototype,"thumbnail",void 0);z.__decorate([t.property({readOnly:!0})],r.prototype,"thumbnailUrl",null);z.__decorate([t.property()],r.prototype,"units",void 0);z.__decorate([t.property({readOnly:!0})],r.prototype,"userContentUrl",null);z.__decorate([t.property({readOnly:!0})],r.prototype,"url",null);z.__decorate([t.property()],r.prototype,"username",void 0);z.__decorate([t.property()],
r.prototype,"userType",void 0);return r=f=z.__decorate([k.subclass("esri.portal.PortalUser")],r)})},"esri/portal/PortalFolder":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Error ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/jsonMap ../core/accessorSupport/decorators/subclass".split(" "),function(p,c,z,y,r,t,l,v,q,g){y=function(k){function n(h){h=k.call(this,h)||this;h.created=
null;h.id=null;h.portal=null;h.title=null;h.username=null;return h}p._inheritsLoose(n,k);n.prototype.toJSON=function(){throw new z("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented");};p._createClass(n,[{key:"url",get:function(){const h=this.get("portal.restUrl");return h?`${h}/content/users/${this.username}/${this.id}`:null}}]);return n}(y.JSONSupport);c.__decorate([r.property({type:Date})],y.prototype,"created",void 0);c.__decorate([r.property()],y.prototype,"id",void 0);
c.__decorate([r.property()],y.prototype,"portal",void 0);c.__decorate([r.property()],y.prototype,"title",void 0);c.__decorate([r.property({readOnly:!0})],y.prototype,"url",null);c.__decorate([r.property()],y.prototype,"username",void 0);return y=c.__decorate([g.subclass("esri.portal.PortalFolder")],y)})},"esri/portal/PortalGroup":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Error ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/jsonMap ../core/accessorSupport/decorators/subclass ./PortalQueryParams".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k){y=function(n){function h(b){b=n.call(this,b)||this;b.access=null;b.created=null;b.description=null;b.id=null;b.isInvitationOnly=!1;b.modified=null;b.owner=null;b.portal=null;b.snippet=null;b.sortField=null;b.sortOrder=null;b.tags=null;b.title=null;return b}p._inheritsLoose(h,n);var f=h.prototype;f.fetchCategorySchema=function(b){return this.portal._request(this.url+"/categorySchema",b).then(a=>{a=a.categorySchema||[];return a.some(d=>"contentCategorySetsGroupQuery.LivingAtlas"===
d.source)?this._fetchCategorySchemaSet("LivingAtlas",b):a})};f.fetchMembers=function(b){return this.portal._request(this.url+"/users",b)};f.getThumbnailUrl=function(b){let a=this.thumbnailUrl;a&&b&&(a+=`&w=${b}`);return a};f.toJSON=function(){throw new z("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented");};f.queryItems=function(b,a){b=l.ensureType(k,b);if(5<parseFloat(this.portal.currentVersion))return b=b||new k,this.portal._queryPortal(`/content/groups/${this.id}/search`,
b,"PortalItem",a);b=b?b.clone():new k;b.query="group:"+this.id+(b.query?" "+b.query:"");return this.portal.queryItems(b,a)};f._fetchCategorySchemaSet=function(b,a){return this.portal._fetchSelf(this.portal.authMode,!0,a).then(d=>{if(d=d.contentCategorySetsGroupQuery){const e=new k;e.disableExtraQuery=!0;e.num=1;e.query=d;return this.portal.queryGroups(e,a)}throw new z("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found");}).then(d=>{if(d.total){d=d.results[0];const e=
new k;e.num=1;e.query=`typekeywords:"${b}"`;return d.queryItems(e,a)}throw new z("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found");}).then(d=>d.total?d.results[0].fetchData("json",a).then(e=>(e=e&&e.categorySchema)&&e.length?e:[]):[])};p._createClass(h,[{key:"thumbnailUrl",get:function(){const b=this.url,a=this.thumbnail;return b&&a?this.portal._normalizeUrl(`${b}/info/${a}?f=json`):null}},{key:"url",get:function(){const b=this.get("portal.restUrl");return b?b+"/community/groups/"+
this.id:null}}]);return h}(y.JSONSupport);c.__decorate([r.property()],y.prototype,"access",void 0);c.__decorate([r.property({type:Date})],y.prototype,"created",void 0);c.__decorate([r.property()],y.prototype,"description",void 0);c.__decorate([r.property()],y.prototype,"id",void 0);c.__decorate([r.property()],y.prototype,"isInvitationOnly",void 0);c.__decorate([r.property({type:Date})],y.prototype,"modified",void 0);c.__decorate([r.property()],y.prototype,"owner",void 0);c.__decorate([r.property()],
y.prototype,"portal",void 0);c.__decorate([r.property()],y.prototype,"snippet",void 0);c.__decorate([r.property()],y.prototype,"sortField",void 0);c.__decorate([r.property()],y.prototype,"sortOrder",void 0);c.__decorate([r.property()],y.prototype,"tags",void 0);c.__decorate([r.property()],y.prototype,"thumbnail",void 0);c.__decorate([r.property({readOnly:!0})],y.prototype,"thumbnailUrl",null);c.__decorate([r.property()],y.prototype,"title",void 0);c.__decorate([r.property({readOnly:!0})],y.prototype,
"url",null);return y=c.__decorate([g.subclass("esri.portal.PortalGroup")],y)})},"esri/portal/PortalItem":function(){define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../assets ../core/Error ../core/JSONSupport ../core/lang ../core/Loadable ../core/maybe ../core/urlUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/has ../core/Logger ../core/jsonMap ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../geometry/Extent ./Portal ./PortalItemResource ./PortalRating".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k,n,h,f,b,a,d,e,u,m,x){var A;t=A=function(D){function B(w){w=D.call(this,w)||this;w.access=null;w.accessInformation=null;w.apiKey=null;w.applicationProxies=null;w.avgRating=null;w.categories=null;w.created=null;w.culture=null;w.description=null;w.extent=null;w.groupCategories=null;w.id=null;w.itemControl=null;w.licenseInfo=null;w.modified=null;w.name=null;w.numComments=null;w.numRatings=null;w.numViews=null;w.owner=null;w.ownerFolder=null;w.portal=null;w.screenshots=null;
w.size=null;w.snippet=null;w.sourceJSON=null;w.tags=null;w.title=null;w.type=null;w.typeKeywords=null;w.url=null;return w}c._inheritsLoose(B,D);B.from=function(w){return n.ensureClass(A,w)};var C=B.prototype;C.destroy=function(){this.portal=null};C.readExtent=function(w){return w&&w.length?new e(w[0][0],w[0][1],w[1][0],w[1][1]):null};C.load=function(w){this.portal||(this.portal=u.getDefault());const E=this.portal.load(w).then(()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?this.portal._request(this.itemUrl,
{signal:q.isSome(w)?w.signal:null,query:{token:this.apiKey}}):{}).then(I=>{this.sourceJSON=I;this.read(I)});this.addResolvingPromise(E);return Promise.resolve(this)};C.addRating=function(w){const E={method:"post",query:{}};w instanceof x&&(w=w.rating);isNaN(w)||"number"!==typeof w||(E.query.rating=w);return this.portal._request(this.itemUrl+"/addRating",E).then(()=>new x({rating:w,created:new Date}))};C.clone=function(){const w={access:this.access,accessInformation:this.accessInformation,applicationProxies:l.clone(this.applicationProxies),
avgRating:this.avgRating,categories:l.clone(this.categories),created:l.clone(this.created),culture:this.culture,description:this.description,extent:l.clone(this.extent),groupCategories:l.clone(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:l.clone(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:l.clone(this.screenshots),
size:this.size,snippet:this.snippet,tags:l.clone(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:l.clone(this.typeKeywords),url:this.url};this.loaded&&(w.loadStatus="loaded");return(new A({sourceJSON:this.sourceJSON})).set(w)};C.createPostQuery=function(){const w=this.toJSON();for(const E in w)"tags"===E&&null!==w[E]&&(w[E]=w[E].join(", ")),"typeKeywords"===E&&null!==w[E]&&(w[E]=w[E].join(", ")),"extent"===E&&w[E]&&(w[E]=JSON.stringify(w[E]));return w};C.deleteRating=
function(){return this.portal._request(this.itemUrl+"/deleteRating",{method:"post"}).then(()=>{})};C.fetchData=function(w="json",E){return this.portal._request(this.itemUrl+"/data",{responseType:w,...E,query:{token:this.apiKey}})};C.fetchRating=function(w){return this.portal._request(this.itemUrl+"/rating",{query:{token:this.apiKey},...w}).then(E=>null!=E.rating?(E.created=new Date(E.created),new x(E)):null)};C.fetchRelatedItems=function(w,E){return this.portal._requestToTypedArray(this.itemUrl+"/relatedItems",
{query:{...w,token:this.apiKey},...E},A)};C.getThumbnailUrl=function(w){let E=this.thumbnailUrl;E&&w&&(E+=`&w=${w}`);return E};C.reload=function(){return this.portal._request(this.itemUrl,{cacheBust:!0,query:{token:this.apiKey}}).then(w=>{this.sourceJSON=w;this.read(w);return this})};C.update=function(w){return this.id?this.load().then(()=>this.portal._signIn()).then(()=>{const E=w&&w.data,I={method:"post"};I.query=this.createPostQuery();for(const F in I.query)null===I.query[F]&&(I.query[F]="");I.query.clearEmptyFields=
!0;null!=E&&("string"===typeof E?I.query.text=E:"object"===typeof E&&(I.query.text=JSON.stringify(E)));return this.portal._request(`${this.userItemUrl}/update`,I).then(()=>this.reload())}):Promise.reject(new r("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))};C.updateThumbnail=function(w){return this.id?this.load().then(()=>this.portal._signIn()).then(()=>{const E=w.thumbnail,I=w.filename,F={method:"post"};if("string"===typeof E)g.isDataProtocol(E)?F.query={data:E}:
F.query={url:g.makeAbsolute(E)},q.isSome(I)&&(F.query.filename=I);else{const H=new FormData;q.isSome(I)?H.append("file",E,I):H.append("file",E);F.body=H}return this.portal._request(`${this.userItemUrl}/updateThumbnail`,F).then(()=>this.reload())}):Promise.reject(new r("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))};C.fetchResources=function(){var w=c._asyncToGenerator(function*(E={},I){return(yield new Promise(function(F,H){p(["./support/resourceUtils"],F,H)})).fetchResources(this,
E,I)});return function(){return w.apply(this,arguments)}}();C.addResource=function(){var w=c._asyncToGenerator(function*(E,I,F){const H=yield new Promise(function(K,G){p(["./support/resourceUtils"],K,G)});E.portalItem=this;return H.addOrUpdateResource(E,"add",I,F)});return function(E,I,F){return w.apply(this,arguments)}}();C.removeResource=function(){var w=c._asyncToGenerator(function*(E,I){const F=yield new Promise(function(H,K){p(["./support/resourceUtils"],H,K)});if(E.portalItem&&E.portalItem.itemUrl!==
this.itemUrl)throw new r("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return F.removeResource(this,E,I)});return function(E,I){return w.apply(this,arguments)}}();C.removeAllResources=function(){var w=c._asyncToGenerator(function*(E){return(yield new Promise(function(I,F){p(["./support/resourceUtils"],I,F)})).removeAllResources(this,E)});return function(E){return w.apply(this,arguments)}}();C.resourceFromPath=function(w){return new m({portalItem:this,
path:w})};C.toJSON=function(){var w=this.extent;w={created:this.created&&this.created.getTime(),description:this.description,extent:w&&[[w.xmin,w.ymin],[w.xmax,w.ymax]],id:this.id,modified:this.modified&&this.modified.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,tags:this.tags,thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:this.typeKeywords,url:this.url};return l.fixJson(w)};B.fromJSON=function(w){if(!w)return null;if(w.declaredClass)throw Error("JSON object is already hydrated");
return new A({sourceJSON:w})};C._getPostQuery=function(){const w=this.toJSON();for(const E in w)"tags"===E&&null!==w[E]&&(w[E]=w[E].join(", ")),"typeKeywords"===E&&null!==w[E]&&(w[E]=w[E].join(", ")),"extent"===E&&w[E]&&(w[E]=JSON.stringify(w[E]));return w};c._createClass(B,[{key:"displayName",get:function(){const w=this.type,E=this.typeKeywords||[];let I=w;"Feature Service"===w||"Feature Collection"===w?I=-1<E.indexOf("Table")?"Table":-1<E.indexOf("Route Layer")?"Route Layer":-1<E.indexOf("Markup")?
"Markup":"Feature Layer":"Image Service"===w?I=-1<E.indexOf("Elevation 3D Layer")?"Elevation Layer":-1<E.indexOf("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":"Scene Service"===w?I="Scene Layer":"Scene Package"===w?I="Scene Layer Package":"Stream Service"===w?I="Feature Layer":"Geoprocessing Service"===w&&this.portal&&this.portal.isPortal?I=-1<E.indexOf("Web Tool")?"Tool":"Geoprocessing Service":"Geocoding Service"===w?I="Locator":"Geoenrichment Service"===w?I="GeoEnrichment Service":"Microsoft Powerpoint"===
w?I="Microsoft PowerPoint":"GeoJson"===w?I="GeoJSON":"Globe Service"===w?I="Globe Layer":"Vector Tile Service"===w?I="Tile Layer":"netCDF"===w?I="NetCDF":"Map Service"===w?I=-1===E.indexOf("Spatiotemporal")&&(-1<E.indexOf("Hosted Service")||-1<E.indexOf("Tiled"))&&-1===E.indexOf("Relational")?"Tile Layer":"Map Image Layer":w&&-1<w.toLowerCase().indexOf("add in")?I=w.replace(/(add in)/gi,"Add-In"):"datastore catalog service"===w?I="Big Data File Share":"Compact Tile Package"===w?I="Tile Package (tpkx)":
"OGCFeatureServer"===w&&(I="OGC Feature Layer");return I}},{key:"iconUrl",get:function(){var w=this.type&&this.type.toLowerCase()||"";const E=this.typeKeywords||[];let I=!1,F=!1,H=!1,K=!1,G=!1,L=!1;0<w.indexOf("service")||"feature collection"===w||"kml"===w||"wms"===w||"wmts"===w||"wfs"===w?(I=-1<E.indexOf("Hosted Service"),"feature service"===w||"feature collection"===w||"kml"===w||"wfs"===w?(F=-1<E.indexOf("Table"),H=-1<E.indexOf("Route Layer"),K=-1<E.indexOf("Markup"),G=-1!==E.indexOf("Spatiotemporal"),
L=-1!==E.indexOf("UtilityNetwork"),w=G&&F?"spatiotemporaltable":F?"table":H?"routelayer":K?"markup":G?"spatiotemporal":I?"featureshosted":L?"utilitynetwork":"features"):w="map service"===w||"wms"===w||"wmts"===w?I||-1<E.indexOf("Tiled")||"wmts"===w?"maptiles":"mapimages":"scene service"===w?-1<E.indexOf("Line")?"sceneweblayerline":-1<E.indexOf("3DObject")?"sceneweblayermultipatch":-1<E.indexOf("Point")?"sceneweblayerpoint":-1<E.indexOf("IntegratedMesh")?"sceneweblayermesh":-1<E.indexOf("PointCloud")?
"sceneweblayerpointcloud":-1<E.indexOf("Polygon")?"sceneweblayerpolygon":-1<E.indexOf("Building")?"sceneweblayerbuilding":-1<E.indexOf("Voxel")?"sceneweblayervoxel":"sceneweblayer":"image service"===w?-1<E.indexOf("Elevation 3D Layer")?"elevationlayer":-1<E.indexOf("Tiled Imagery")?"tiledimagerylayer":"imagery":"stream service"===w?"streamlayer":"vector tile service"===w?"vectortile":"datastore catalog service"===w?"datastorecollection":"geocoding service"===w?"geocodeservice":"geoprocessing service"===
w?-1<E.indexOf("Web Tool")&&this.portal&&this.portal.isPortal?"tool":"layers":"layers"):w="web map"===w||"cityengine web scene"===w?"maps":"web scene"===w?-1<E.indexOf("ViewingMode-Local")?"webscenelocal":"websceneglobal":"web mapping application"===w||"mobile application"===w||"application"===w||"operation view"===w||"desktop application"===w?"apps":"map document"===w||"map package"===w||"published map"===w||"scene document"===w||"globe document"===w||"basemap package"===w||"mobile basemap package"===
w||"mobile map package"===w||"project package"===w||"project template"===w||"pro map"===w||"layout"===w||"layer"===w&&-1<E.indexOf("ArcGIS Pro")||"explorer map"===w&&E.indexOf("Explorer Document")?"mapsgray":"service definition"===w||"csv"===w||"shapefile"===w||"cad drawing"===w||"geojson"===w||"360 vr experience"===w||"netcdf"===w||"administrative report"===w?"datafiles":"explorer add in"===w||"desktop add in"===w||"windows viewer add in"===w||"windows viewer configuration"===w?"appsgray":"arcgis pro add in"===
w||"arcgis pro configuration"===w?"addindesktop":"rule package"===w||"file geodatabase"===w||"sqlite geodatabase"===w||"csv collection"===w||"kml collection"===w||"windows mobile package"===w||"map template"===w||"desktop application template"===w||"gml"===w||"arcpad package"===w||"code sample"===w||"form"===w||"document link"===w||"earth configuration"===w||"operations dashboard add in"===w||"rules package"===w||"image"===w||"workflow manager package"===w||"explorer map"===w&&-1<E.indexOf("Explorer Mapping Application")||
-1<E.indexOf("Document")?"datafilesgray":"network analysis service"===w||"geoprocessing service"===w||"geodata service"===w||"geometry service"===w||"geoprocessing package"===w||"locator package"===w||"geoprocessing sample"===w||"workflow manager service"===w?"toolsgray":"layer"===w||"layer package"===w||"explorer layer"===w?"layersgray":"scene package"===w?"scenepackage":"mobile scene package"===w?"mobilescenepackage":"tile package"===w||"compact tile package"===w?"tilepackage":"task file"===w?"taskfile":
"report template"===w?"report-template":"statistical data collection"===w?"statisticaldatacollection":"insights workbook"===w?"workbook":"insights model"===w?"insightsmodel":"insights page"===w?"insightspage":"insights theme"===w?"insightstheme":"hub initiative"===w?"hubinitiative":"hubpage"===w?"hubpage":"hub event"===w?"hubevent":"hub site application"===w?"hubsite":"relational database connection"===w?"relationaldatabaseconnection":"big data file share"===w?"datastorecollection":"image collection"===
w?"imagecollection":"style"===w?"style":"desktop style"===w?"desktopstyle":"dashboard"===w?"dashboard":"raster function template"===w?"rasterprocessingtemplate":"vector tile package"===w?"vectortilepackage":"ortho mapping project"===w?"orthomappingproject":"ortho mapping template"===w?"orthomappingtemplate":"solution"===w?"solutions":"geopackage"===w?"geopackage":"deep learning package"===w?"deeplearningpackage":"real time analytic"===w?"realtimeanalytics":"big data analytic"===w?"bigdataanalytics":
"feed"===w?"feed":"excalibur imagery project"===w?"excaliburimageryproject":"notebook"===w?"notebook":"storymap"===w?"storymap":"survey123 add in"===w?"survey123addin":"mission"===w?"mission":"mission report"===w?"missionreport":"quickcapture project"===w?"quickcaptureproject":"pro report"===w?"proreport":"urban model"===w?"urbanmodel":"web experience"===w?"experiencebuilder":"web experience template"===w?"webexperiencetemplate":"workflow"===w?"workflow":"insights script"===w?"insightsscript":"kernel gateway connection"===
w?"kernelgatewayconnection":"hub initiative template"===w?"hubinitiativetemplate":"storymap theme"===w?"storymaptheme":"knowledge graph"===w?"knowledgegraph":"native application"===w?"nativeapp":"native application installer"===w?"nativeappinstaller":"link chart"===w?"linkchart":"investigation"===w?"investigation":"ogcfeatureserver"===w?"features":"pro project"===w?"proproject":"insights workbook package"===w?"insightsworkbookpackage":"maps";return w?y.getAssetUrl("esri/images/portal/"+w+"16.png"):
null}},{key:"isLayer",get:function(){return-1<"Map Service;Feature Service;Feature Collection;Scene Service;Image Service;Stream Service;Vector Tile Service;WMTS;WMS".split(";").indexOf(this.type)}},{key:"itemUrl",get:function(){const w=this.get("portal.restUrl");return w?w+"/content/items/"+this.id:null}},{key:"thumbnailUrl",get:function(){const w=this.itemUrl,E=this.thumbnail;return w&&E?this.portal._normalizeUrl(`${w}/info/${E}?f=json`):null}},{key:"userItemUrl",get:function(){const w=this.get("portal.restUrl");
if(!w)return null;const E=this.owner||this.get("portal.user.username");return E?`${w}/content/users/${this.ownerFolder?`${E}/${this.ownerFolder}`:E}/items/${this.id}`:null}}]);return B}(t.JSONSupportMixin(v));z.__decorate([k.property({type:["private","shared","org","public"]})],t.prototype,"access",void 0);z.__decorate([k.property()],t.prototype,"accessInformation",void 0);z.__decorate([k.property({type:String})],t.prototype,"apiKey",void 0);z.__decorate([k.property({json:{read:{source:"appProxies"}}})],
t.prototype,"applicationProxies",void 0);z.__decorate([k.property()],t.prototype,"avgRating",void 0);z.__decorate([k.property()],t.prototype,"categories",void 0);z.__decorate([k.property({type:Date})],t.prototype,"created",void 0);z.__decorate([k.property()],t.prototype,"culture",void 0);z.__decorate([k.property()],t.prototype,"description",void 0);z.__decorate([k.property({readOnly:!0})],t.prototype,"displayName",null);z.__decorate([k.property({type:e})],t.prototype,"extent",void 0);z.__decorate([a.reader("extent")],
t.prototype,"readExtent",null);z.__decorate([k.property()],t.prototype,"groupCategories",void 0);z.__decorate([k.property({readOnly:!0})],t.prototype,"iconUrl",null);z.__decorate([k.property()],t.prototype,"id",void 0);z.__decorate([k.property({readOnly:!0})],t.prototype,"isLayer",null);z.__decorate([k.property()],t.prototype,"itemControl",void 0);z.__decorate([k.property({readOnly:!0})],t.prototype,"itemUrl",null);z.__decorate([k.property()],t.prototype,"licenseInfo",void 0);z.__decorate([k.property({type:Date})],
t.prototype,"modified",void 0);z.__decorate([k.property()],t.prototype,"name",void 0);z.__decorate([k.property()],t.prototype,"numComments",void 0);z.__decorate([k.property()],t.prototype,"numRatings",void 0);z.__decorate([k.property()],t.prototype,"numViews",void 0);z.__decorate([k.property()],t.prototype,"owner",void 0);z.__decorate([k.property()],t.prototype,"ownerFolder",void 0);z.__decorate([k.property({type:u})],t.prototype,"portal",void 0);z.__decorate([k.property()],t.prototype,"screenshots",
void 0);z.__decorate([k.property()],t.prototype,"size",void 0);z.__decorate([k.property()],t.prototype,"snippet",void 0);z.__decorate([k.property()],t.prototype,"sourceJSON",void 0);z.__decorate([k.property()],t.prototype,"tags",void 0);z.__decorate([k.property()],t.prototype,"thumbnail",void 0);z.__decorate([k.property({readOnly:!0})],t.prototype,"thumbnailUrl",null);z.__decorate([k.property()],t.prototype,"title",void 0);z.__decorate([k.property()],t.prototype,"type",void 0);z.__decorate([k.property()],
t.prototype,"typeKeywords",void 0);z.__decorate([k.property()],t.prototype,"url",void 0);z.__decorate([k.property({readOnly:!0})],t.prototype,"userItemUrl",null);return t=A=z.__decorate([d.subclass("esri.portal.PortalItem")],t)})},"esri/portal/PortalItemResource":function(){define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Accessor ../core/Error ../core/Logger ../core/maybe ../core/urlUtils ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/decorators/cast ../core/jsonMap ../core/accessorSupport/decorators/subclass".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k,n,h){const f=t.getLogger("esri.portal.PortalItemResource");y=function(b){function a(e){e=b.call(this,e)||this;e.portalItem=null;return e}c._inheritsLoose(a,b);var d=a.prototype;d.normalizeCtorArgs=function(e){return e&&e.portalItem&&e.path?{...e,path:this.normalizePath(e.path,e.portalItem)}:e};d._castPath=function(e){return this.normalizePath(e,this.portalItem)};d.fetch=function(e="json",u){const m=this.url;if(l.isNone(m))throw new r("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");
return this.portalItem.portal._request(m,{responseType:e,query:{token:this.portalItem.apiKey},signal:l.get(u,"signal")})};d.update=function(){var e=c._asyncToGenerator(function*(u,m){return(yield new Promise(function(x,A){p(["./support/resourceUtils"],x,A)})).addOrUpdateResource(this,"update",u,m)});return function(u,m){return e.apply(this,arguments)}}();d.hasPath=function(){return l.isSome(this.path)};d.normalizePath=function(e,u){if(l.isNone(e))return e;e=e.replace(/^\/+/,"");l.isSome(u)&&v.isAbsolute(e)&&
(e=v.makeRelative(e,u.itemUrl));return e.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,"")};c._createClass(a,[{key:"path",set:function(e){l.isSome(e)&&v.isAbsolute(e)?f.error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",e)}},{key:"url",get:function(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}},{key:"itemRelativeUrl",get:function(){return this.portalItem&&this.path?`./resources/${this.path}`:null}}]);
return a}(y);z.__decorate([q.property()],y.prototype,"portalItem",void 0);z.__decorate([q.property({type:String,value:null})],y.prototype,"path",null);z.__decorate([k.cast("path")],y.prototype,"_castPath",null);z.__decorate([q.property({type:String,readOnly:!0})],y.prototype,"url",null);z.__decorate([q.property({type:String,readOnly:!0})],y.prototype,"itemRelativeUrl",null);return y=z.__decorate([h.subclass("esri.portal.PortalItemResource")],y)})},"esri/portal/PortalRating":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Accessor ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/jsonMap ../core/accessorSupport/decorators/subclass".split(" "),
function(p,c,z,y,r,t,l,v,q){z=function(g){function k(n){n=g.call(this,n)||this;n.created=null;n.rating=null;return n}p._inheritsLoose(k,g);return k}(z);c.__decorate([y.property()],z.prototype,"created",void 0);c.__decorate([y.property()],z.prototype,"rating",void 0);return z=c.__decorate([q.subclass("esri.portal.PortalRating")],z)})},"esri/support/basemapDefinitions":function(){define(["exports","../chunks/_rollupPluginBabelHelpers","../assets","../intl/messages"],function(p,c,z,y){function r(){r=
c._asyncToGenerator(function*(t){if(t){var l=-1<t.indexOf("-vector")?t.slice(0,t.indexOf("-vector")):t,v=yield y.fetchMessageBundle("esri/t9n/basemaps");return v[t]||v[l]}});return r.apply(this,arguments)}p.esriBasemapDefinitions={streets:{id:"streets",get thumbnailUrl(){return z.getAssetUrl("esri/images/basemap/streets.jpg")},baseMapLayers:[{id:"streets-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Street Map",
showLegend:!1,visibility:!0,opacity:1}]},satellite:{id:"satellite",get thumbnailUrl(){return z.getAssetUrl("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",get thumbnailUrl(){return z.getAssetUrl("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",
url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Boundaries and Places",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",get thumbnailUrl(){return z.getAssetUrl("esri/images/basemap/terrain.jpg")},
baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},topo:{id:"topo",
get thumbnailUrl(){return z.getAssetUrl("esri/images/basemap/topo.jpg")},baseMapLayers:[{id:"topo-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Topo Map",showLegend:!1,visibility:!0,opacity:1}]},gray:{id:"gray",get thumbnailUrl(){return z.getAssetUrl("esri/images/basemap/gray.jpg")},baseMapLayers:[{id:"gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer",
layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"dark-gray":{id:"dark-gray",get thumbnailUrl(){return z.getAssetUrl("esri/images/basemap/dark-gray.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",
url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"dark-gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",get thumbnailUrl(){return z.getAssetUrl("esri/images/basemap/oceans.jpg")},
baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"national-geographic":{id:"national-geographic",
get thumbnailUrl(){return z.getAssetUrl("esri/images/basemap/national-geographic.jpg")},baseMapLayers:[{id:"national-geographic-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer",title:"NatGeo World Map",showLegend:!1,layerType:"ArcGISTiledMapServiceLayer",visibility:!0,opacity:1}]},osm:{id:"osm",get thumbnailUrl(){return z.getAssetUrl("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,
visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",get thumbnailUrl(){return z.getAssetUrl("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",
layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},"gray-vector":{id:"gray-vector",get thumbnailUrl(){return z.getAssetUrl("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",
layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},"streets-vector":{id:"streets-vector",get thumbnailUrl(){return z.getAssetUrl("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},"topo-vector":{id:"topo-vector",get thumbnailUrl(){return z.getAssetUrl("esri/images/basemap/topo-vector.jpg")},
baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},"streets-night-vector":{id:"streets-night-vector",
get thumbnailUrl(){return z.getAssetUrl("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",get thumbnailUrl(){return z.getAssetUrl("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",
url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",get thumbnailUrl(){return z.getAssetUrl("esri/images/basemap/streets-navigation.jpg")},
baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"arcgis-imagery":{get thumbnailUrl(){return z.getAssetUrl("esri/images/basemap/hybrid.jpg")},title:"Imagery Hybrid",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"},
{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-imagery-standard":{get thumbnailUrl(){return z.getAssetUrl("esri/images/basemap/satellite.jpg")},title:"Imagery",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"}]},"arcgis-imagery-labels":{title:"Hybrid [Reference]",
baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-light-gray":{get thumbnailUrl(){return z.getAssetUrl("esri/images/basemap/gray-vector.jpg")},title:"Light Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Base",title:"Light Gray Canvas Base"},{layerType:"VectorTileLayer",
styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Labels",title:"Light Gray Canvas Labels",isReference:!0}]},"arcgis-dark-gray":{get thumbnailUrl(){return z.getAssetUrl("esri/images/basemap/dark-gray.jpg")},title:"Dark Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Base",title:"Dark Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Labels",
title:"Dark Gray Canvas Labels",isReference:!0}]},"arcgis-navigation":{get thumbnailUrl(){return z.getAssetUrl("esri/images/basemap/streets-navigation.jpg")},title:"Navigation",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Navigation",title:"World Navigation Map"}]},"arcgis-navigation-night":{title:"Navigation (Dark Mode)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:NavigationNight",
title:"World Navigation Map (Dark Mode)"}]},"arcgis-streets":{get thumbnailUrl(){return z.getAssetUrl("esri/images/basemap/streets-vector.jpg")},title:"Streets",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Streets",title:"World Street Map"}]},"arcgis-streets-night":{get thumbnailUrl(){return z.getAssetUrl("esri/images/basemap/streets-night.jpg")},title:"Streets (Night)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsNight",
title:"World Street Map (Night)"}]},"arcgis-streets-relief":{get thumbnailUrl(){return z.getAssetUrl("esri/images/basemap/streets-relief.jpg")},title:"Streets (with Relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsRelief:Base",title:"World Street Map (with Relief)"}]},
"arcgis-topographic":{get thumbnailUrl(){return z.getAssetUrl("esri/images/basemap/topo.jpg")},title:"Topographic",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Topographic:Base",title:"World Topographic Map"}]},"arcgis-oceans":{get thumbnailUrl(){return z.getAssetUrl("esri/images/basemap/oceans.jpg")},
title:"Oceans",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Ocean Base",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Oceans:Labels",title:"World Ocean Reference",isReference:!0}]},"osm-standard":{title:"OpenStreetMap",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Standard",
title:"OpenStreetMap"}]},"osm-standard-relief":{title:"OpenStreetMap (with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StandardRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-streets":{title:"OpenStreetMap (Streets)",baseMapLayers:[{layerType:"VectorTileLayer",
styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Streets",title:"OpenStreetMap (Streets)"}]},"osm-streets-relief":{title:"OpenStreetMap (Streets with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StreetsRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},
"osm-light-gray":{title:"OpenStreetMap (Light Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Base",title:"OSM (Light Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Labels",title:"OSM (Light Gray Reference)",isReference:!0}]},"osm-dark-gray":{title:"OpenStreetMap (Dark Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",
styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Base",title:"OSM (Dark Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Labels",title:"OSM (Dark Gray Reference)",isReference:!0}]},"arcgis-terrain":{title:"Terrain with Labels",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},
{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Base",title:"World Terrain Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Detail",title:"World Terrain Reference",isReference:!0}]},"arcgis-community":{title:"Community",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Community",title:"Community"}]},
"arcgis-charted-territory":{title:"Charted Territory",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ChartedTerritory:Base",title:"Charted Territory"}]},"arcgis-colored-pencil":{title:"Colored Pencil",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ColoredPencil",
title:"Colored Pencil"}]},"arcgis-nova":{title:"Nova",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Nova",title:"Nova"}]},"arcgis-modern-antique":{title:"Modern Antique",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ModernAntique:Base",
title:"Modern Antique"}]},"arcgis-midcentury":{title:"Mid-Century",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Midcentury",title:"Mid-Century"}]},"arcgis-newspaper":{title:"Newspaper",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Newspaper",title:"Newspaper"}]},"arcgis-hillshade-light":{title:"Hillshade",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",
showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"}]},"arcgis-hillshade-dark":{title:"Hillshade (Dark)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade (Dark)",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade_Dark/MapServer"}]}};p.getBasemapTitle=function(t){return r.apply(this,arguments)};Object.defineProperty(p,"__esModule",{value:!0})})},
"esri/webdoc/support/writeUtils":function(){define("exports ../../core/Error ../../core/lang ../../core/maybe ../../core/object ../../core/accessorSupport/extensions/serializableProperty/writer".split(" "),function(p,c,z,y,r,t){function l(k){return!("feature"!==k.type||k.url||!k.source||"memory"!==k.source.type)}function v(k,n){"maxScale"in k&&(n.maxScale=t.numberToJSON(k.maxScale));"minScale"in k&&(n.minScale=t.numberToJSON(k.minScale))}const q=new Set("bing-maps imagery imagery-tile map-image open-street-map tile unknown unsupported vector-tile web-tile".split(" ")),
g=new Set("csv feature geo-rss group imagery imagery-tile kml map-image map-notes ogc-feature tile unknown unsupported vector-tile web-tile wfs".split(" "));p.disableRestrictedWriting=function(k){q.add(k);g.add(k)};p.enableRestrictedWriting=function(k){q.delete(k);g.delete(k)};p.getLayerJSON=function(k,n,h){if(!("write"in k&&k.write))return h&&h.messages&&h.messages.push(new c("layer:unsupported",`Layers (${k.title}, ${k.id}) of type '${k.declaredClass}' cannot be persisted`,{layer:k})),null;if(h.restrictedWebMapWriting){var f=
"basemap"===h.layerContainerType?q:"operational-layers"===h.layerContainerType?g:null;f=y.isSome(f)?f.has(k.type)&&!l(k):!0}else f=!0;if(f)return n={},k.write(n,h)?n:null;if(y.isSome(n)&&(h=n=z.clone(n),l(k)?(f=(f=r.getDeepValue("featureCollection.layers",h))&&f[0]&&f[0].layerDefinition)&&v(k,f):"stream"===k.type?(f=h.layerDefinition=h.layerDefinition||{},v(k,f)):"group"!==k.type&&v(k,h),"blendMode"in k&&(h.blendMode=k.blendMode,"normal"===h.blendMode&&delete h.blendMode),h.opacity=t.numberToJSON(k.opacity),
h.title=k.title||"Layer",h.visibility=k.visible,"legendEnabled"in k&&"wmts"!==k.type))if(l(k)){if(h=h.featureCollection)h.showLegend=k.legendEnabled}else h.showLegend=k.legendEnabled;return n};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/views/2d/layers/features/FeatureStore2D":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/CircularArray ../../../../core/Evented ../../../../core/has ../../../../core/maybe ../../../../chunks/rbush ../../../../geometry/support/aaBoundingBox ./Store2D ./support/FeatureSetReaderPBFIndirect".split(" "),
function(p,c,z,y,r,t,l,v,q,g){const k={getObjectId(n){return n.getObjectId()},getAttributes(n){return n.readAttributes()},getAttribute(n,h){return n.readAttribute(h)},cloneWithGeometry(n,h){return n},getGeometry(n){return n.readHydratedGeometry()},getCentroid(n,h){return n.readCentroid()}};r=function(n){function h(b,a,d){var e=n.call(this,b,a)||this;e.featureAdapter=k;e.events=new y;e._featureSetsByInstance=new Map;e._objectIdToDisplayId=new Map;e._spatialIndexInvalid=!0;e._indexSearchCache=new z(50);
e._index=l.rbush(9,u=>({minX:e._storage.getXMin(u),minY:e._storage.getYMin(u),maxX:e._storage.getXMax(u),maxY:e._storage.getYMax(u)}));e._storage=a;e.mode=d;return e}c._inheritsLoose(h,n);var f=h.prototype;f.hasInstance=function(b){return this._featureSetsByInstance.has(b)};f.onTileData=function(b,a){if(t.isNone(a.addOrUpdate))return a;a.addOrUpdate.attachStorage(this._storage);if("snapshot"===this.mode){for(var d=a.addOrUpdate.getCursor();d.next();){const e=d.getDisplayId();this.setComputedAttributes(this._storage,
d,e,b.scale)}return a}this._featureSetsByInstance.set(a.addOrUpdate.instance,a.addOrUpdate);for(d=a.addOrUpdate.getCursor();d.next();)this._insertFeature(d,b.scale);this._spatialIndexInvalid=!0;this.events.emit("changed");return a};f.search=function(b){this._rebuildIndex();const a=b.id;var d=this._indexSearchCache.find(m=>m.tileId===a);if(t.isSome(d))return d.readers;d=new Map;b=this._searchIndex(b.bounds);const e=[];for(const m of b){var u=this._storage.getInstanceId(m);b=(4294901760&u)>>>16;u&=
65535;d.has(b)||d.set(b,[]);d.get(b).push(u)}d.forEach((m,x)=>{x=this._featureSetsByInstance.get(x);e.push(g.FeatureSetReaderIndirect.from(x,m))});this._indexSearchCache.enqueue({tileId:a,readers:e});return e};f.insert=function(b){const a=b.getCursor(),d=this._storage;for(;a.next();){var e,u=a.getIndex();u|=a.instance<<16;const m=a.getObjectId(),x=null!=(e=this._objectIdToDisplayId.get(m))?e:this._storage.createDisplayId();a.setDisplayId(x);d.setInstanceId(x,u);this._objectIdToDisplayId.set(m,x)}this._featureSetsByInstance.set(b.instance,
b);this._spatialIndexInvalid=!0};f.remove=function(b){const a=this._objectIdToDisplayId.get(b);if(a){var d=this._storage.getInstanceId(a),e=65535&d;d=(4294901760&d)>>>16;var u=this._featureSetsByInstance.get(d);this._objectIdToDisplayId.delete(b);this._storage.releaseDisplayId(a);u.removeAtIndex(e);u.isEmpty&&this._featureSetsByInstance.delete(d);this._spatialIndexInvalid=!0}};f.forEach=function(b){this._objectIdToDisplayId.forEach(a=>{a=this._storage.getInstanceId(a);a=this._lookupFeature(a);b(a)})};
f.forEachUnsafe=function(b){this._objectIdToDisplayId.forEach(a=>{var d=this._storage.getInstanceId(a);a=65535&d;d=this._getFeatureSet((4294901760&d)>>>16);d.setIndex(a);b(d)})};f.forEachInBounds=function(b,a){b=this._searchIndex(b);for(const d of b)b=this.lookupFeatureByDisplayId(d,this._storage),a(t.unwrap(b))};f.forEachBounds=function(b,a,d){this._rebuildIndex();const e=[0,0,0,0];for(const u of b)u.readGeometry()&&(b=u.getDisplayId(),e[0]=this._storage.getXMin(b),e[1]=this._storage.getYMin(b),
e[2]=this._storage.getXMax(b),e[3]=this._storage.getYMax(b),a(v.fromRect(d,e)))};f.sweepFeatures=function(b,a,d){this._spatialIndexInvalid=!0;this._objectIdToDisplayId.forEach((e,u)=>{b.has(e)||(a.releaseDisplayId(e),d&&d.unsetAttributeData(e),this._objectIdToDisplayId.delete(u))});this.events.emit("changed")};f.sweepFeatureSets=function(b){this._spatialIndexInvalid=!0;this._featureSetsByInstance.forEach((a,d)=>{b.has(d)||this._featureSetsByInstance.delete(d)})};f.lookupObjectId=function(b,a){b=this.lookupFeatureByDisplayId(b,
a);return t.isNone(b)?null:b.getObjectId()};f.lookupDisplayId=function(b){return this._objectIdToDisplayId.get(b)};f.lookupFeatureByDisplayId=function(b,a){b=a.getInstanceId(b);return this._lookupFeature(b)};f.lookupByDisplayIdUnsafe=function(b){var a=this._storage.getInstanceId(b);b=65535&a;a=this._getFeatureSet((4294901760&a)>>>16);if(!a)return null;a.setIndex(b);return a};f._insertFeature=function(b,a){const d=this._storage,e=b.getObjectId();var u=b.getIndex();u|=b.instance<<16;d.getInstanceId(b.getDisplayId());
let m=this._objectIdToDisplayId.get(e);m||(m=d.createDisplayId(),this._objectIdToDisplayId.set(e,m),this._spatialIndexInvalid=!0);b.setDisplayId(m);d.setInstanceId(m,u);this.setComputedAttributes(d,b,m,a)};f._searchIndex=function(b){this._rebuildIndex();return this._index.search({minX:b[0],minY:b[1],maxX:b[2],maxY:b[3]})};f._rebuildIndex=function(){if(this._spatialIndexInvalid){var b=[];"snapshot"===this.mode?this._featureSetsByInstance.forEach(a=>{for(a=a.getCursor();a.next();){const d=a.getDisplayId();
this._storage.setBounds(d,a)&&b.push(d)}}):this._objectIdToDisplayId.forEach(a=>{const d=this._storage.getInstanceId(a);this._storage.setBounds(a,this._lookupFeature(d))&&b.push(a)});this._index.clear();this._index.load(b);this._indexSearchCache.clear();this._spatialIndexInvalid=!1}};f._lookupFeature=function(b){const a=65535&b;b=this._getFeatureSet((4294901760&b)>>>16);if(!b)return null;b=b.getCursor();b.setIndex(a);return b};f._getFeatureSet=function(b){return this._featureSetsByInstance.get(b)};
c._createClass(h,[{key:"storage",get:function(){return this._storage}},{key:"storeStatistics",get:function(){return{featureCount:0,vertexCount:0}}}]);return h}(q.Store2D);p.FeatureStore2D=r;p.featureAdapter=k;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/core/CircularArray":function(){define(["../chunks/_rollupPluginBabelHelpers","./maybe"],function(p,c){return function(){function z(r=Number.POSITIVE_INFINITY){this._start=this.size=0;this.maxSize=r;this._buffer=isFinite(r)?Array(r):[]}
var y=z.prototype;y.enqueue=function(r){if(this.size===this.maxSize){const t=this._buffer[this._start];this._buffer[this._start]=r;this._start=(this._start+1)%this.maxSize;return t}isFinite(this.maxSize)?this._buffer[(this._start+this.size++)%this.maxSize]=r:this._buffer[this._start+this.size++]=r;return null};y.dequeue=function(){if(0===this.size)return null;const r=this._buffer[this._start];this._buffer[this._start]=null;this.size--;this._start=(this._start+1)%this.maxSize;return r};y.peek=function(){return 0===
this.size?null:this._buffer[this._start]};y.find=function(r){if(0===this.size)return null;for(const t of this._buffer)if(c.isSome(t)&&r(t))return t;return null};y.clear=function(r){let t=this.dequeue();for(;c.isSome(t);)r&&r(t),t=this.dequeue()};p._createClass(z,[{key:"entries",get:function(){return this._buffer}}]);return z}()})},"esri/chunks/rbush":function(){define(["exports","./quickselect"],function(p,c){function z(b,a){if(!(this instanceof z))return new z(b,a);this._maxEntries=Math.max(4,b||
9);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));a&&("function"===typeof a?this.toBBox=a:this._initFormat(a));this.clear()}function y(b,a){r(b,0,b.children.length,a,b)}function r(b,a,d,e,u){u||(u=h(null));u.minX=Infinity;u.minY=Infinity;u.maxX=-Infinity;u.maxY=-Infinity;for(var m;a<d;a++)m=b.children[a],t(u,b.leaf?e(m):m);return u}function t(b,a){b.minX=Math.min(b.minX,a.minX);b.minY=Math.min(b.minY,a.minY);b.maxX=Math.max(b.maxX,a.maxX);b.maxY=Math.max(b.maxY,a.maxY);return b}function l(b,
a){return b.minX-a.minX}function v(b,a){return b.minY-a.minY}function q(b){return(b.maxX-b.minX)*(b.maxY-b.minY)}function g(b){return b.maxX-b.minX+(b.maxY-b.minY)}function k(b,a){return b.minX<=a.minX&&b.minY<=a.minY&&a.maxX<=b.maxX&&a.maxY<=b.maxY}function n(b,a){return a.minX<=b.maxX&&a.minY<=b.maxY&&a.maxX>=b.minX&&a.maxY>=b.minY}function h(b){return{children:b,height:1,leaf:!0,minX:Infinity,minY:Infinity,maxX:-Infinity,maxY:-Infinity}}function f(b,a,d,e,u){for(var m=[a,d],x;m.length;)d=m.pop(),
a=m.pop(),d-a<=e||(x=a+Math.ceil((d-a)/e/2)*e,c.quickselect(b,x,a,d,u),m.push(a,x,x,d))}z.prototype={all:function(){return this._all(this.data,[])},search:function(b){var a=this.data,d=[],e=this.toBBox;if(!n(b,a))return d;for(var u=[],m,x,A,D;a;){m=0;for(x=a.children.length;m<x;m++)A=a.children[m],D=a.leaf?e(A):A,n(b,D)&&(a.leaf?d.push(A):k(b,D)?this._all(A,d):u.push(A));a=u.pop()}return d},collides:function(b){var a=this.data,d=this.toBBox;if(!n(b,a))return!1;for(var e=[],u,m,x,A;a;){u=0;for(m=a.children.length;u<
m;u++)if(x=a.children[u],A=a.leaf?d(x):x,n(b,A)){if(a.leaf||k(b,A))return!0;e.push(x)}a=e.pop()}return!1},load:function(b){if(!b||!b.length)return this;if(b.length<this._minEntries){for(var a=0,d=b.length;a<d;a++)this.insert(b[a]);return this}b=this._build(b.slice(),0,b.length-1,0);this.data.children.length?this.data.height===b.height?this._splitRoot(this.data,b):(this.data.height<b.height&&(a=this.data,this.data=b,b=a),this._insert(b,this.data.height-b.height-1,!0)):this.data=b;return this},insert:function(b){b&&
this._insert(b,this.data.height-1);return this},clear:function(){this.data=h([]);return this},remove:function(b,a){if(!b)return this;for(var d=this.data,e=this.toBBox(b),u=[],m=[],x,A,D,B;d||u.length;){d||(d=u.pop(),A=u[u.length-1],x=m.pop(),B=!0);if(d.leaf){a:{D=b;var C=d.children,w=a;if(w){for(var E=0;E<C.length;E++)if(w(D,C[E])){D=E;break a}D=-1}else D=C.indexOf(D)}if(-1!==D){d.children.splice(D,1);u.push(d);this._condense(u);break}}B||d.leaf||!k(d,e)?A?(x++,d=A.children[x],B=!1):d=null:(u.push(d),
m.push(x),x=0,A=d,d=d.children[0])}return this},toBBox:function(b){return b},compareMinX:l,compareMinY:v,toJSON:function(){return this.data},fromJSON:function(b){this.data=b;return this},_all:function(b,a){for(var d=[];b;)b.leaf?a.push.apply(a,b.children):d.push.apply(d,b.children),b=d.pop();return a},_build:function(b,a,d,e){var u=d-a+1,m=this._maxEntries;if(u<=m){var x=h(b.slice(a,d+1));y(x,this.toBBox);return x}e||(e=Math.ceil(Math.log(u)/Math.log(m)),m=Math.ceil(u/Math.pow(m,e-1)));x=h([]);x.leaf=
!1;x.height=e;u=Math.ceil(u/m);m=u*Math.ceil(Math.sqrt(m));var A;for(f(b,a,d,m,this.compareMinX);a<=d;a+=m){var D=Math.min(a+m-1,d);f(b,a,D,u,this.compareMinY);for(A=a;A<=D;A+=u){var B=Math.min(A+u-1,D);x.children.push(this._build(b,A,B,e-1))}}y(x,this.toBBox);return x},_chooseSubtree:function(b,a,d,e){for(var u,m,x,A,D,B,C,w;;){e.push(a);if(a.leaf||e.length-1===d)break;C=w=Infinity;u=0;for(m=a.children.length;u<m;u++)x=a.children[u],D=q(x),B=(Math.max(x.maxX,b.maxX)-Math.min(x.minX,b.minX))*(Math.max(x.maxY,
b.maxY)-Math.min(x.minY,b.minY))-D,B<w?(w=B,C=D<C?D:C,A=x):B===w&&D<C&&(C=D,A=x);a=A||a.children[0]}return a},_insert:function(b,a,d){var e=this.toBBox;d=d?b:e(b);e=[];var u=this._chooseSubtree(d,this.data,a,e);u.children.push(b);for(t(u,d);0<=a;)if(e[a].children.length>this._maxEntries)this._split(e,a),a--;else break;this._adjustParentBBoxes(d,e,a)},_split:function(b,a){var d=b[a],e=d.children.length,u=this._minEntries;this._chooseSplitAxis(d,u,e);e=this._chooseSplitIndex(d,u,e);e=h(d.children.splice(e,
d.children.length-e));e.height=d.height;e.leaf=d.leaf;y(d,this.toBBox);y(e,this.toBBox);a?b[a-1].children.push(e):this._splitRoot(d,e)},_splitRoot:function(b,a){this.data=h([b,a]);this.data.height=b.height+1;this.data.leaf=!1;y(this.data,this.toBBox)},_chooseSplitIndex:function(b,a,d){var e,u;var m=u=Infinity;for(e=a;e<=d-a;e++){var x=r(b,0,e,this.toBBox);var A=r(b,e,d,this.toBBox);var D=Math.max(0,Math.min(x.maxX,A.maxX)-Math.max(x.minX,A.minX))*Math.max(0,Math.min(x.maxY,A.maxY)-Math.max(x.minY,
A.minY));x=q(x)+q(A);if(D<m){m=D;var B=e;u=x<u?x:u}else D===m&&x<u&&(u=x,B=e)}return B},_chooseSplitAxis:function(b,a,d){var e=b.leaf?this.compareMinX:l,u=b.leaf?this.compareMinY:v,m=this._allDistMargin(b,a,d,e);a=this._allDistMargin(b,a,d,u);m<a&&b.children.sort(e)},_allDistMargin:function(b,a,d,e){b.children.sort(e);e=this.toBBox;var u=r(b,0,a,e),m=r(b,d-a,d,e),x=g(u)+g(m),A;for(A=a;A<d-a;A++){var D=b.children[A];t(u,b.leaf?e(D):D);x+=g(u)}for(A=d-a-1;A>=a;A--)D=b.children[A],t(m,b.leaf?e(D):D),
x+=g(m);return x},_adjustParentBBoxes:function(b,a,d){for(;0<=d;d--)t(a[d],b)},_condense:function(b){for(var a=b.length-1,d;0<=a;a--)0===b[a].children.length?0<a?(d=b[a-1].children,d.splice(d.indexOf(b[a]),1)):this.clear():y(b[a],this.toBBox)},_initFormat:function(b){var a=["return a"," - b",";"];this.compareMinX=new Function("a","b",a.join(b[0]));this.compareMinY=new Function("a","b",a.join(b[1]));this.toBBox=new Function("a","return {minX: a"+b[0]+", minY: a"+b[1]+", maxX: a"+b[2]+", maxY: a"+b[3]+
"};")}};p.rbush=z})},"esri/chunks/quickselect":function(){define(["exports"],function(p){var c={exports:{}};(function(z){(function(y){y=y();void 0!==y&&(z.exports=y)})(function(){function y(l,v,q,g,k){for(;g>q;){if(600<g-q){var n=g-q+1,h=v-q+1,f=Math.log(n),b=.5*Math.exp(2*f/3);f=.5*Math.sqrt(f*b*(n-b)/n)*(0>h-n/2?-1:1);y(l,v,Math.max(q,Math.floor(v-h*b/n+f)),Math.min(g,Math.floor(v+(n-h)*b/n+f)),k)}n=l[v];h=q;b=g;r(l,q,v);for(0<k(l[g],n)&&r(l,q,g);h<b;){r(l,h,b);h++;for(b--;0>k(l[h],n);)h++;for(;0<
k(l[b],n);)b--}0===k(l[q],n)?r(l,q,b):(b++,r(l,b,g));b<=v&&(q=b+1);v<=b&&(g=b-1)}}function r(l,v,q){var g=l[v];l[v]=l[q];l[q]=g}function t(l,v){return l<v?-1:l>v?1:0}return function(l,v,q,g,k){y(l,v,q||0,g||l.length-1,k||t)}})})(c);p.quickselect=c.exports})},"esri/views/2d/layers/features/Store2D":function(){define("require exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/has ../../../../core/maybe ../../../../core/accessorSupport/diffUtils ../../../../support/arcadeOnDemand ../../arcade/callExpressionWithCursor".split(" "),
function(p,c,z,y,r,t,l,v){const q=new Promise(function(k,n){p(["../../../../layers/support/labelFormatUtils"],k,n)});let g=function(){function k(h,f){this._canCacheExpressionValue=!1;this._sourceInfo=h;this._bitsets={computed:f.getBitset(f.createBitset())}}var n=k.prototype;n.invalidate=function(){this._bitsets.computed.clear()};n.updateSchema=function(){var h=z._asyncToGenerator(function*(f,b){var a=t.diff(this._schema,b);if((this._schema=b)&&!r.isNone(a)&&t.hasDiff(a,"attributes")){y("esri-2d-update-debug")&&
console.debug("Applying Update - Store:",a);this._bitsets.computed.clear();f.targets[b.name]=!0;f=b.attributes;b=[];a=[];for(const d in f){const e=f[d];switch(e.type){case "expression":b.push(this._createArcadeComputedField(e));break;case "label-expression":b.push(this._createLabelArcadeComputedField(e));break;case "statistic":a.push(e)}}this._computedFields=yield Promise.all(b);this._canCacheExpressionValue=!this._computedFields.some(d=>"expression"===d.type&&d.expression.referencesScale());this._statisticFields=
a}});return function(f,b){return h.apply(this,arguments)}}();n.setComputedAttributes=function(h,f,b,a){var d=this._bitsets.computed;if(!this._canCacheExpressionValue||!d.has(b)){d.set(b);for(const e of this._computedFields)switch(d=this._evaluateField(f,e,a),e.resultType){case "numeric":h.setComputedNumericAtIndex(b,e.fieldIndex,d);break;case "string":h.setComputedStringAtIndex(b,e.fieldIndex,d)}}};n._createArcadeComputedField=function(){var h=z._asyncToGenerator(function*(f){return{...f,expression:yield l.createRendererExpression(f.valueExpression,
this._sourceInfo.spatialReference,this._sourceInfo.fieldsIndex)}});return function(f){return h.apply(this,arguments)}}();n._createLabelArcadeComputedField=function(){var h=z._asyncToGenerator(function*(f){var b=this._sourceInfo.spatialReference;const a=this._sourceInfo.fieldsIndex,{createLabelFunction:d}=yield q;b=yield d(f.label,a,b);return{...f,builder:b}});return function(f){return h.apply(this,arguments)}}();n._evaluateField=function(h,f,b){switch(f.type){case "label-expression":return h=h.readArcadeFeature(),
f.builder.evaluate(h)||"";case "expression":return{expression:f}=f,v(f,h,{$view:{scale:b}})}};return k}();c.Store2D=g;Object.defineProperty(c,"__esModule",{value:!0})})},"esri/core/accessorSupport/diffUtils":function(){define(["exports","../Accessor","../Collection","../maybe","./utils"],function(p,c,z,y,r){function t(f){return f instanceof z?Object.keys(f.items):f instanceof c?r.getProperties(f).keys():f?Object.keys(f):[]}function l(f,b){return f instanceof z?f.items[b]:f[b]}function v(f,b){return Array.isArray(f)&&
Array.isArray(b)?f.length!==b.length:!1}function q(f){return f?f.declaredClass:null}function g(f,b){const a=f.diff;if(a&&"function"===typeof a)return a(f,b);const d=t(f),e=t(b);if(0!==d.length||0!==e.length){if(!d.length||!e.length||v(f,b))return{type:"complete",oldValue:f,newValue:b};var u=e.filter(A=>-1===d.indexOf(A)),m=d.filter(A=>-1===e.indexOf(A));m=d.filter(A=>-1<e.indexOf(A)&&l(f,A)!==l(b,A)).concat(u,m).sort();if((u=q(f))&&-1<h.indexOf(u)&&m.length)return{type:"complete",oldValue:f,newValue:b};
var x;u=f instanceof c&&b instanceof c;for(const A of m){m=l(f,A);const D=l(b,A);!(u||"function"!==typeof m&&"function"!==typeof D)||m===D||null==m&&null==D||(m=a&&a[A]&&"function"===typeof a[A]?a[A](m,D):"object"===typeof m&&"object"===typeof D&&q(m)===q(D)?g(m,D):{type:"complete",oldValue:m,newValue:D},y.isSome(m)&&(y.isSome(x)?x.diff[A]=m:x={type:"partial",diff:{[A]:m}}))}return x}}function k(f,b){if(y.isNone(f))return!1;b=b.split(".");for(const a of b){if("complete"===f.type)break;if("partial"===
f.type){if(f=f.diff[a],!f)return!1}else return!1}return!0}function n(f){if(y.isNone(f))return!0;switch(f.type){case "complete":return!1;case "collection":for(const b of f.added)if(!n(b))return!1;for(const b of f.removed)if(!n(b))return!1;for(const b of f.changed)if(!n(b))return!1;return!0;case "partial":for(const b in f.diff)if(!n(f.diff[b]))return!1;return!0}}const h=["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"];
p.diff=function(f,b){if("function"!==typeof f&&"function"!==typeof b&&(f||b))return!f||!b||"object"===typeof f&&"object"===typeof b&&q(f)!==q(b)?{type:"complete",oldValue:f,newValue:b}:g(f,b)};p.hasDiff=k;p.hasDiffAny=function(f,b){for(const a of b)if(k(f,a))return!0;return!1};p.isEmpty=n;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/views/2d/arcade/callExpressionWithCursor":function(){define(["../../../core/Logger"],function(p){return function(c,z,y){c.referencesGeometry();z=z.readArcadeFeature();
try{return c.evaluate({...y,$feature:z})}catch(r){return p.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",r),null}}})},"esri/views/2d/layers/features/support/FeatureSetReaderPBFIndirect":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","./FeatureSetReader"],function(p,c,z){let y=function(r){function t(v,q){var g=r.call(this,z.FeatureSetReader.createInstance())||this;g._currentIndex=-1;g._reader=v;g._indices=q;return g}c._inheritsLoose(t,
r);t.from=function(v,q){return new t(v.copy(),q)};var l=t.prototype;l.getSize=function(){return this._indices.length};l.getCursor=function(){return this.copy()};l.copy=function(){const v=new t(this._reader.copy(),this._indices);v._currentIndex=this._currentIndex;return v};l.next=function(){for(;this._nextIndex()&&!this._reader._getExists(););return this._currentIndex<this._indices.length};l._nextIndex=function(){return++this._currentIndex<this._indices.length?(this._reader.setIndex(this._indices[this._currentIndex]),
!0):!1};l.setArcadeSpatialReference=function(v){this._reader.setArcadeSpatialReference(v)};l.attachStorage=function(v){this._reader.attachStorage(v)};l.getStorage=function(){return this._reader.getStorage()};l.getComputedNumeric=function(v){return this._reader.getComputedNumericAtIndex(0)};l.setComputedNumeric=function(v,q){return this._reader.setComputedNumericAtIndex(q,0)};l.getComputedString=function(v){return this._reader.getComputedStringAtIndex(0)};l.setComputedString=function(v,q){return this._reader.setComputedStringAtIndex(0,
q)};l.getComputedNumericAtIndex=function(v){return this._reader.getComputedNumericAtIndex(v)};l.setComputedNumericAtIndex=function(v,q){this._reader.setComputedNumericAtIndex(v,q)};l.getComputedStringAtIndex=function(v){return this._reader.getComputedStringAtIndex(v)};l.setComputedStringAtIndex=function(v,q){return this._reader.setComputedStringAtIndex(v,q)};l.transform=function(v,q,g,k){const n=this.copy();n._reader=this._reader.transform(v,q,g,k);return n};l.readAttribute=function(v,q=!1){return this._reader.readAttribute(v,
q)};l.readAttributes=function(){return this._reader.readAttributes()};l.joinAttributes=function(v){return this._reader.joinAttributes(v)};l.readArcadeFeature=function(){return this._reader.readArcadeFeature()};l.geometry=function(){return this._reader.geometry()};l.field=function(v){return this.readAttribute(v,!0)};l.hasField=function(v){return this._reader.hasField(v)};l.setField=function(v,q){return this._reader.setField(v,q)};l.keys=function(){return this._reader.keys()};l.castToText=function(){return this._reader.castToText()};
l.getQuantizationTransform=function(){return this._reader.getQuantizationTransform()};l.getAttributeHash=function(){return this._reader.getAttributeHash()};l.getObjectId=function(){return this._reader.getObjectId()};l.getDisplayId=function(){return this._reader.getDisplayId()};l.setDisplayId=function(v){return this._reader.setDisplayId(v)};l.getGroupId=function(){return this._reader.getGroupId()};l.setGroupId=function(v){return this._reader.setGroupId(v)};l.getXHydrate=function(){return this._reader.getXHydrate()};
l.getYHydrate=function(){return this._reader.getYHydrate()};l.getX=function(){return this._reader.getX()};l.getY=function(){return this._reader.getY()};l.setIndex=function(v){return this._reader.setIndex(v)};l.getIndex=function(){return this._reader.getIndex()};l.readLegacyFeature=function(){return this._reader.readLegacyFeature()};l.readOptimizedFeature=function(){return this._reader.readOptimizedFeature()};l.readLegacyPointGeometry=function(){return this._reader.readLegacyPointGeometry()};l.readLegacyGeometry=
function(){return this._reader.readLegacyGeometry()};l.readLegacyCentroid=function(){return this._reader.readLegacyCentroid()};l.readGeometryArea=function(){return this._reader.readGeometryArea()};l.readUnquantizedGeometry=function(){return this._reader.readUnquantizedGeometry()};l.readHydratedGeometry=function(){return this._reader.readHydratedGeometry()};l.readGeometry=function(){return this._reader.readGeometry()};l.readCentroid=function(){return this._reader.readCentroid()};l._readAttribute=function(v,
q){throw Error("Error: Should not be called. Underlying _reader should be used instead");};l._readAttributes=function(){throw Error("Error: Should not be called. Underlying _reader should be used instead");};c._createClass(t,[{key:"hasNext",get:function(){return this._currentIndex+1<this._indices.length}},{key:"geometryType",get:function(){return this._reader.geometryType}},{key:"hasFeatures",get:function(){return this._reader.hasFeatures}},{key:"exceededTransferLimit",get:function(){return this._reader.exceededTransferLimit}},
{key:"hasZ",get:function(){return this._reader.hasZ}},{key:"hasM",get:function(){return this._reader.hasM}}]);return t}(z.FeatureSetReader);p.FeatureSetReaderIndirect=y;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/views/2d/layers/features/support/FeatureSetReader":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../geometry ../../../../../core/has ../../../../../core/maybe ../../../../../layers/graphics/centroid ../../../../../layers/graphics/featureConversionUtils ../../../../../layers/graphics/OptimizedGeometry ./StaticBitSet ../../../../../geometry/support/jsonUtils".split(" "),
function(p,c,z,y,r,t,l,v,q,g){let k=0;z=function(){function n(f){this.type="FeatureSetReader";this.seen=!1;this._ty=this._tx=this.instance=0;this._sy=this._sx=1;this._deleted=null;this._joined=[];this._objectIdToIndex=null;this.instance=f}n.createInstance=function(){k++;return k=65535<k?0:k};var h=n.prototype;h.setArcadeSpatialReference=function(f){this._arcadeSpatialReference=f};h.attachStorage=function(f){this._storage=f};h.getQuantizationTransform=function(){throw Error("Unable to find transform for featureSet");
};h.getStorage=function(){return this._storage};h.getComputedNumeric=function(f){return this.getComputedNumericAtIndex(0)};h.setComputedNumeric=function(f,b){return this.setComputedNumericAtIndex(b,0)};h.getComputedString=function(f){return this.getComputedStringAtIndex(0)};h.setComputedString=function(f,b){return this.setComputedStringAtIndex(0,b)};h.getComputedNumericAtIndex=function(f){return this._storage.getComputedNumericAtIndex(this.getDisplayId(),f)};h.setComputedNumericAtIndex=function(f,
b){this._storage.setComputedNumericAtIndex(this.getDisplayId(),f,b)};h.getComputedStringAtIndex=function(f){return this._storage.getComputedStringAtIndex(this.getDisplayId(),f)};h.setComputedStringAtIndex=function(f,b){return this._storage.setComputedStringAtIndex(this.getDisplayId(),f,b)};h.transform=function(f,b,a,d){const e=this.copy();e._tx+=f;e._ty+=b;e._sx*=a;e._sy*=d;return e};h.readAttribute=function(f,b=!1){var a=this._readAttribute(f,b);if(void 0!==a)return a;for(const d of this._joined)if(d.setIndex(this.getIndex()),
a=d._readAttribute(f,b),void 0!==a)return a};h.readAttributes=function(){const f=this._readAttributes();for(const b of this._joined){b.setIndex(this.getIndex());const a=b._readAttributes();for(const d of Object.keys(a))f[d]=a[d]}return f};h.joinAttributes=function(f){this._joined.push(f)};h.readArcadeFeature=function(){return this};h.geometry=function(){var f=this.readHydratedGeometry();f=l.convertToGeometry(f,this.geometryType,this.hasZ,this.hasM);if(f=g.fromJSON(f))f.spatialReference=this._arcadeSpatialReference;
return f};h.field=function(f){return this.readAttribute(f,!0)};h.hasField=function(f){return!0};h.setField=function(f,b){};h.keys=function(){return[]};h.castToText=function(){return""};h.removeIds=function(f){if(r.isNone(this._objectIdToIndex)){var b=new Map;const a=this.getCursor();for(;a.next();)b.set(a.getObjectId(),a.getIndex());this._objectIdToIndex=b}b=this._objectIdToIndex;for(const a of f)b.has(a)&&this.removeAtIndex(b.get(a))};h.removeAtIndex=function(f){r.isNone(this._deleted)&&(this._deleted=
q.StaticBitSet.create(this.getSize()));this._deleted.set(f)};h.features=function*(){const f=this.getCursor();for(;f.next();)yield f.readOptimizedFeature()};h._getExists=function(){return r.isNone(this._deleted)||!this._deleted.has(this.getIndex())};h._computeCentroid=function(){if("esriGeometryPolygon"!==this.geometryType)return null;const f=this.readUnquantizedGeometry();if(!f||f.hasIndeterminateRingOrder)return null;const b=r.unwrapOr(this.getQuantizationTransform(),null);return t.getCentroidOptimizedGeometry(new v,
f,this.hasM,this.hasZ,b)};h.copyInto=function(f){f.seen=this.seen;f._storage=this._storage;f._arcadeSpatialReference=this._arcadeSpatialReference;f._joined=this._joined;f._tx=this._tx;f._ty=this._ty;f._sx=this._sx;f._sy=this._sy;f._deleted=this._deleted;f._objectIdToIndex=this._objectIdToIndex};c._createClass(n,[{key:"isEmpty",get:function(){return r.isSome(this._deleted)&&this._deleted.countSet()===this.getSize()}}]);return n}();p.FeatureSetReader=z;Object.defineProperty(p,"__esModule",{value:!0})})},
"esri/views/2d/layers/features/support/StaticBitSet":function(){define(["exports"],function(p){let c=function(){function z(r,t){this._mask=0;this._buf=r;this._mask=t}z.fromBuffer=function(r,t){return new z(r,t)};z.create=function(r,t=4294967295){r=new Uint32Array(Math.ceil(r/32));return new z(r,t)};var y=z.prototype;y._getIndex=function(r){return Math.floor(r/32)};y.has=function(r){r&=this._mask;return!!(this._buf[this._getIndex(r)]&1<<r%32)};y.hasRange=function(r,t){for(;r%32&&r!==t;){if(this.has(r))return!0;
r++}for(;t%32&&r!==t;){if(this.has(r))return!0;t--}if(r===t)return!1;for(r/=32;r!==t/32;r++)if(this._buf[r])return!0;return!1};y.set=function(r){r&=this._mask;const t=this._getIndex(r);this._buf[t]|=1<<r%32};y.setRange=function(r,t){for(;r%32&&r!==t;)this.set(r++);for(;t%32&&r!==t;)this.set(t--);if(r!==t)for(r/=32;r!==t/32;r++)this._buf[r]=4294967295};y.unset=function(r){r&=this._mask;const t=this._getIndex(r);this._buf[t]&=4294967295^1<<r%32};y.resize=function(r){const t=this._buf;r=new Uint32Array(Math.ceil(r/
32));r.set(t);this._buf=r};y.or=function(r){for(let t=0;t<this._buf.length;t++)this._buf[t]|=r._buf[t];return this};y.and=function(r){for(let t=0;t<this._buf.length;t++)this._buf[t]&=r._buf[t];return this};y.xor=function(r){for(let t=0;t<this._buf.length;t++)this._buf[t]^=r._buf[t];return this};y.ior=function(r){for(let t=0;t<this._buf.length;t++)this._buf[t]|=~r._buf[t];return this};y.iand=function(r){for(let t=0;t<this._buf.length;t++)this._buf[t]&=~r._buf[t];return this};y.ixor=function(r){for(let t=
0;t<this._buf.length;t++)this._buf[t]^=~r._buf[t];return this};y.any=function(){for(let r=0;r<this._buf.length;r++)if(this._buf[r])return!0;return!1};y.copy=function(r){for(let t=0;t<this._buf.length;t++)this._buf[t]=r._buf[t];return this};y.clone=function(){return new z(this._buf.slice(),this._mask)};y.clear=function(){for(let r=0;r<this._buf.length;r++)this._buf[r]=0};y.forEachSet=function(r){for(let t=0;t<this._buf.length;t++){let l=this._buf[t],v=32*t;if(l)for(;l;)l&1&&r(v),l>>>=1,v++}};y.countSet=
function(){let r=0;this.forEachSet(t=>{r++});return r};return z}();p.StaticBitSet=c;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/views/2d/layers/features/sources/createSource":function(){define("exports ../../../../../core/maybe ../../../../../layers/support/arcgisLayerUrl ./DrillDownFeatureSource ./GeoEventSource ./PagedFeatureSource ./SnapshotFeatureSource".split(" "),function(p,c,z,y,r,t,l){p.createSource=function(v,q,g,k,n,h){a:{switch(v.type){case "snapshot":v={type:"feature",origin:"snapshot",
featureCount:c.unwrapOr(v.featureCount,0),serviceInfo:v,onMessage:k,outSR:q,tileInfoView:g,canAcceptRequest:n,store:h};break a;case "stream":v={type:"geoevent",serviceInfo:v,onMessage:k,outSR:q,canAcceptRequest:n};break a;case "memory":case "on-demand":h=v.source;h=Array.isArray(h)?"local":"path"in h&&z.isHostedAgolService(h.path)?"hosted":"unknown";v={type:"feature",serviceInfo:v,onMessage:k,outSR:q,origin:h,tileInfoView:g,canAcceptRequest:n};break a}v=void 0}switch(v.type){case "feature":switch(v.origin){case "hosted":case "local":return new t.PagedFeatureSource(v);
case "snapshot":return new l.SnapshotFeatureSource(v);case "unknown":return new y.DrillDownFeatureSource(v)}case "geoevent":return new r.GeoEventSource(v)}};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/support/arcgisLayerUrl":function(){define(["exports","../../core/maybe","../../core/urlUtils","../../chunks/persistableUrlUtils"],function(p,c,z,y){function r(n){n=z.urlToObject(n);n=n.path.match(q)||n.path.match(g);if(!n)return null;const [,h,f,b,a]=n;n=f.indexOf("/");return{title:l(-1!==
n?f.slice(n+1):f),serverType:b,sublayer:null!=a&&""!==a?parseInt(a,10):null,url:{path:h}}}function t(n){return(n=z.urlToObject(n).path.match(k))?{serviceUrl:n[1],sublayerId:Number(n[2])}:null}function l(n){n=n.replace(/\s*[/_]+\s*/g," ");return n[0].toUpperCase()+n.slice(1)}const v="MapServer ImageServer FeatureServer SceneServer StreamServer VectorTileServer".split(" "),q=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${v.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),g=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^\\/\\n]+)\\/(${v.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,
"i"),k=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;p.cleanTitle=l;p.isArcGISUrl=function(n){return!!q.test(n)};p.isHostedAgolService=function(n){if(!n)return!1;n=n.toLowerCase();const h=-1!==n.indexOf(".arcgis.com/");n=-1!==n.indexOf("//services")||-1!==n.indexOf("//tiles")||-1!==n.indexOf("//features");return h&&n};p.isHostedSecuredProxyService=function(n,h){return h&&n&&-1!==n.toLowerCase().indexOf(h.toLowerCase())};p.isServerOrServicesAGOLUrl=function(n){if(!n)return!1;n=(new z.Url(z.makeAbsolute(n))).authority.toLowerCase();
return"server.arcgisonline.com"===n||"services.arcgisonline.com"===n};p.isWmsServer=function(n){if(!n)return!1;var h=n.toLowerCase();n=-1!==h.indexOf("/services/");const f=-1!==h.indexOf("/mapserver/wmsserver"),b=-1!==h.indexOf("/imageserver/wmsserver");h=-1!==h.indexOf("/wmsserver");return n&&(f||b||h)};p.parse=r;p.parseNonStandardSublayerUrl=t;p.sanitizeUrl=function(n,h){return n?z.removeTrailingSlash(z.removeQueryParameters(n,h)):n};p.sanitizeUrlWithLayerId=function(n){let {url:h}=n;if(!h)return{url:h};
h=z.removeQueryParameters(h,n.logger);const f=z.urlToObject(h),b=r(f.path);let a;c.isSome(b)?(null!=b.sublayer&&null==n.layer.layerId&&(a=b.sublayer),h=b.url.path):n.nonStandardUrlAllowed&&(n=t(f.path),c.isSome(n)&&(h=n.serviceUrl,a=n.sublayerId));return{url:z.removeTrailingSlash(h),layerId:a}};p.serverTypes=v;p.titleFromUrlAndName=function(n,h){const f=[];n&&(n=r(n),c.isSome(n)&&n.title&&f.push(n.title));h&&(h=l(h),f.push(h));if(2===f.length){if(-1!==f[0].toLowerCase().indexOf(f[1].toLowerCase()))return f[0];
if(-1!==f[1].toLowerCase().indexOf(f[0].toLowerCase()))return f[1]}return f.join(" - ")};p.writeUrlWithLayerId=function(n,h,f,b,a){y.write(h,b,"url",a);b.url&&null!=n.layerId&&(b.url=z.join(b.url,f,n.layerId.toString()))};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/chunks/persistableUrlUtils":function(){define(["exports","../core/maybe","../core/urlUtils"],function(p,c,z){function y(h,f){var b=f&&f.url&&f.url.path;h&&b&&(h=z.makeAbsolute(h,b,{preserveProtocolRelative:!0}),f.portalItem&&
f.readResourcePaths&&(b=z.makeRelative(h,f.portalItem.itemUrl),k.test(b)&&f.readResourcePaths.push(f.portalItem.resourceFromPath(b).path)));return q(h,f&&f.portal)}function r(h,f,b=0){if(!h)return h;!z.isAbsolute(h)&&f&&f.blockedRelativeUrls&&f.blockedRelativeUrls.push(h);var a=z.makeAbsolute(h);if(f){var d=f.verifyItemRelativeUrls&&f.verifyItemRelativeUrls.rootPath||f.url&&f.url.path;d&&(d=q(d,f.portal),a=z.makeRelative(q(a,f.portal),d,d),a!==h&&f.verifyItemRelativeUrls&&f.verifyItemRelativeUrls.writtenUrls.push(a))}h=
a;a=(a=f&&f.portal)&&!a.isPortal&&a.urlKey&&a.customBaseUrl?z.changeDomain(h,`${a.urlKey}.${a.customBaseUrl}`,a.portalHostname):h;z.isAbsolute(a)&&(a=z.normalize(a));null!=f&&f.resources&&null!=f&&f.portalItem&&!z.isAbsolute(a)&&!z.isDataProtocol(a)&&0===b&&f.resources.toKeep.push({resource:f.portalItem.resourceFromPath(a)});return a}function t(h,f,b){return y(h,b)}function l(h,f,b,a){h=r(h,a);void 0!==h&&(f[b]=h)}function v(h){h=c.isSome(h)?h.match(g):null;return c.isSome(h)?h[1]:null}function q(h,
f){if(!f||f.isPortal||!f.urlKey||!f.customBaseUrl)return h;const b=`${f.urlKey}.${f.customBaseUrl}`;return z.hasSameOrigin(z.appUrl,`${z.appUrl.scheme}://${b}`)?z.changeDomain(h,f.portalHostname,b):z.changeDomain(h,b,f.portalHostname)}const g=/\/items\/([^\/]+)\/resources\//,k=/^\.\/resources\//;var n=Object.freeze({__proto__:null,fromJSON:y,toJSON:r,read:t,write:l,itemIdFromResourceUrl:v});p.fromJSON=y;p.itemIdFromResourceUrl=v;p.persistableUrlUtils=n;p.read=t;p.toJSON=r;p.write=l})},"esri/views/2d/layers/features/sources/DrillDownFeatureSource":function(){define(["exports",
"../../../../../chunks/_rollupPluginBabelHelpers","../../../../../core/has","../../../../../core/promiseUtils","./BaseFeatureSource"],function(p,c,z,y,r){var t=(z=z("esri-mobile"))?1:4,l=z?1:3;r=function(v){function q(g){return v.call(this,g)||this}c._inheritsLoose(q,v);q.prototype._fetchDataTile=function(){var g=c._asyncToGenerator(function*(k){var n=this;const h=this._serviceInfo.capabilities.query.supportsMaxRecordCountFactor,f=this._subscriptions.get(k.key.id),b=f.signal,a=k.getQuantizationParameters();
let d=0;const e=function(){var u=c._asyncToGenerator(function*(m,x){const A=n._queryInfo,D=n._createQuery(m,{maxRecordCountFactor:h?l:void 0,returnExceededLimitFeatures:!1,quantizationParameters:a});d++;try{const C=yield n._queue.push({tile:k,query:D,signal:b,depth:x});d--;y.throwIfAborted(b);if(C)if(A!==n._queryInfo)e(m,x);else if(C.exceededTransferLimit&&x<t)for(const w of m.createChildTiles())e(w,x+1);else{var B={id:k.id,addOrUpdate:C,end:0===d,type:"append"};f.add({query:D,message:B});n._onMessage(B)}}catch(C){y.isAbortError(C)||
n._onMessage({id:k.id,addOrUpdate:null,end:!0,type:"append"})}});return function(m,x){return u.apply(this,arguments)}}();e(k,0)});return function(k){return g.apply(this,arguments)}}();return q}(r.BaseFeatureSource);p.DrillDownFeatureSource=r;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/views/2d/layers/features/sources/BaseFeatureSource":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../request ../../../../../core/Error ../../../../../core/has ../../../../../core/Logger ../../../../../core/maybe ../../../../../core/promiseUtils ../../../../../rest/support/Query ../controllers/support/sourceAdapters ./DataTileSource ../../../../support/QueueProcessor".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k,n){const h=t.getLogger("esri.views.2d.layers.features.sources.BaseFeatureSource");t=function(f){function b(d){var e=f.call(this,d)||this;e.type="feature";e.mode="on-demand";e._adapter=g.createSourceAdapter(d.serviceInfo);e._queue=new n.QueueProcessor({concurrency:8,process:function(){var u=c._asyncToGenerator(function*(m){v.throwIfAborted(m);if(l.isSome(m.tile)){var x=m.tile.key.id;const {signal:A}=m;x=r("esri-tiles-debug")?{tile:x.replace(/\//g,"."),depth:m.depth}:
void 0;return e._adapter.executeQuery(m.query,{query:x,signal:A})}return e._adapter.executeQuery(m.query,m)});return function(m){return u.apply(this,arguments)}}()});e._patchQueue=new n.QueueProcessor({concurrency:8,process:function(){var u=c._asyncToGenerator(function*(m){v.throwIfAborted(m);if(l.isSome(m.tile)){var x=m.tile.key.id;const {signal:A}=m;x=r("esri-tiles-debug")?{tile:x.replace(/\//g,"."),depth:m.depth}:void 0;return e._adapter.executeQuery(m.query,{query:x,signal:A})}return e._adapter.executeQuery(m.query,
m)});return function(m){return u.apply(this,arguments)}}()});return e}c._inheritsLoose(b,f);var a=b.prototype;a.destroy=function(){f.prototype.destroy.call(this);this._adapter.destroy();this._queue.destroy();this._patchQueue.destroy()};a.enableEvent=function(d,e){};a.subscribe=function(d){f.prototype.subscribe.call(this,d);const e=this._subscriptions.get(d.id);this._fetchDataTile(d).catch(u=>{v.isAbortError(u)||h.error(new y("mapview-query-error","Encountered error when fetching tile",{tile:d,error:u}))}).then(()=>
e.end())};a.unsubscribe=function(d){f.prototype.unsubscribe.call(this,d)};a.readers=function(d){return this._subscriptions.get(d).readers()};a.query=function(){var d=c._asyncToGenerator(function*(e){return this._adapter.executeQuery(e)});return function(e){return d.apply(this,arguments)}}();a.queryLastEditDate=function(){var d=c._asyncToGenerator(function*(){const e=this._serviceInfo.source;return(yield z(e.path,{query:{...e.query,f:"json"},responseType:"json"})).data.editingInfo.lastEditDate});return function(){return d.apply(this,
arguments)}}();a.createTileQuery=function(d){const e=this.createQuery();e.quantizationParameters=d.getQuantizationParameters();e.resultType="tile";e.geometry=d.extent;"esriGeometryPolyline"===this._serviceInfo.geometryType&&(e.maxAllowableOffset=d.resolution);this._serviceInfo.capabilities.query.supportsQuantization||(e.quantizationParameters=null,e.maxAllowableOffset=d.resolution);return e};a._createQuery=function(d,e){const u=new q({...this._queryInfo,historicMoment:this._queryInfo.historicMoment?
new Date(this._queryInfo.historicMoment):null,...e});this._serviceInfo.capabilities.query.supportsQuantization||(e.quantizationParameters=null,u.maxAllowableOffset=d.resolution);e.quantizationParameters&&"esriGeometryPolyline"===this._serviceInfo.geometryType&&(u.maxAllowableOffset=d.resolution);u.resultType="tile";u.geometry=d.extent;return u};a._executePatchQuery=function(){var d=c._asyncToGenerator(function*(e,u,m,x){u=u.clone();u.outFields=[this._serviceInfo.objectIdField,...m];u.returnCentroid=
!1;u.returnGeometry=!1;m=l.isSome(u.start)?u.start/8E3:0;return this._patchQueue.push({tile:e,query:u,signal:x.signal,depth:m})});return function(e,u,m,x){return d.apply(this,arguments)}}();a._resend=function(){var d=c._asyncToGenerator(function*(e,u){const {query:m,message:x}=e,A=l.isSome(m.outFields)?m.outFields:[];e=this._queryInfo.outFields;const D=e.filter(B=>-1===A.indexOf(B));if(l.isNone(x.addOrUpdate))this._onMessage({...x,type:"append"});else if(D.length)try{const B=this._subscriptions.get(x.id).tile,
C=yield this._executePatchQuery(B,m,D,u);v.throwIfAborted(u);m.outFields=e;x.addOrUpdate.joinAttributes(C);this._onMessage({...x,end:x.end,type:"append"})}catch(B){}else this._onMessage({...x,type:"append"})});return function(e,u){return d.apply(this,arguments)}}();a._resendSubscription=function(){var d=c._asyncToGenerator(function*(e){if(e.empty)return this._onMessage({id:e.tile.id,addOrUpdate:null,end:!1,type:"append"});const u=e.signal;for(const m of e.requests.done)yield this._resend(m,{signal:u});
if(l.isSome(e.edits))return this._onMessage(e.edits)});return function(e){return d.apply(this,arguments)}}();a.resend=function(){var d=c._asyncToGenerator(function*(){const e=Array.from(this._subscriptions.values());yield Promise.all(e.map(u=>this._resendSubscription(u)))});return function(){return d.apply(this,arguments)}}();c._createClass(b,[{key:"updating",get:function(){return!!this._queue.length||Array.from(this._subscriptions.values()).some(d=>!d.done)}},{key:"maxRecordCountFactor",get:function(){const {query:d}=
this._serviceInfo.capabilities;return d.supportsMaxRecordCountFactor?4:null}},{key:"maxPageSize",get:function(){var d,{query:e}=this._serviceInfo.capabilities;e=null!=(d=e.maxRecordCount)?d:8E3;d=l.unwrapOr(this.maxRecordCountFactor,1);return e*d}},{key:"pageSize",get:function(){return Math.min(8E3,this.maxPageSize)}}]);return b}(k.DataTileSource);p.BaseFeatureSource=t;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/rest/support/Query":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../TimeExtent ../../core/jsonMap ../../core/JSONSupport ../../core/lang ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../core/accessorSupport/ensureType ../../geometry/support/jsonUtils ../../layers/support/source/DataLayerSource ./QuantizationParameters ./StatisticDefinition ../../geometry/SpatialReference ../../geometry/Point".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k,n,h,f,b,a,d,e,u,m,x,A){var D;k=new r.JSONMap({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"});r=new r.JSONMap({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",
esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});t=D=function(B){function C(E){E=B.call(this,E)||this;E.aggregateIds=null;E.cacheHint=void 0;E.datumTransformation=null;E.distance=void 0;E.dynamicDataSource=void 0;E.formatOf3DObjects=null;E.gdbVersion=null;E.geometry=null;E.geometryPrecision=void 0;E.groupByFieldsForStatistics=null;E.having=null;E.historicMoment=null;E.maxAllowableOffset=void 0;E.maxRecordCountFactor=
1;E.multipatchOption=null;E.num=void 0;E.objectIds=null;E.orderByFields=null;E.outFields=null;E.outSpatialReference=null;E.outStatistics=null;E.parameterValues=null;E.pixelSize=null;E.quantizationParameters=null;E.rangeValues=null;E.relationParameter=null;E.resultType=null;E.returnCentroid=!1;E.returnDistinctValues=!1;E.returnExceededLimitFeatures=!0;E.returnGeometry=!1;E.returnQueryGeometry=!1;E.returnM=void 0;E.returnZ=void 0;E.sourceSpatialReference=null;E.spatialRelationship="intersects";E.start=
void 0;E.sqlFormat=null;E.text=null;E.timeExtent=null;E.units=null;E.where=null;return E}p._inheritsLoose(C,B);C.from=function(E){return a.ensureClass(D,E)};var w=C.prototype;w.castDatumTransformation=function(E){return"number"===typeof E||"object"===typeof E?E:null};w.writeHistoricMoment=function(E,I){I.historicMoment=E&&E.getTime()};w.writeParameterValues=function(E,I){if(E){const F={};for(const H in E){const K=E[H];Array.isArray(K)?F[H]=K.map(G=>G instanceof Date?G.getTime():G):F[H]=K instanceof
Date?K.getTime():K}I.parameterValues=F}};w.writeStart=function(E,I){I.resultOffset=this.start;I.resultRecordCount=this.num||10;I.where="1\x3d1"};w.writeWhere=function(E,I){I.where=E||"1\x3d1"};w.clone=function(){return new D(l.clone({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,datumTransformation:this.datumTransformation,distance:this.distance,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,
having:this.having,historicMoment:v.isSome(this.historicMoment)?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,
rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,
sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,units:this.units,where:this.where}))};return C}(t.JSONSupport);t.MAX_MAX_RECORD_COUNT_FACTOR=5;c.__decorate([q.property({json:{write:!0}})],t.prototype,"aggregateIds",void 0);c.__decorate([q.property({type:Boolean,json:{write:!0}})],t.prototype,"cacheHint",void 0);c.__decorate([q.property({json:{write:!0}})],t.prototype,"datumTransformation",void 0);c.__decorate([g.cast("datumTransformation")],t.prototype,"castDatumTransformation",
null);c.__decorate([q.property({type:Number,json:{write:{overridePolicy(B){return{enabled:0<B}}}}})],t.prototype,"distance",void 0);c.__decorate([q.property({type:e.DataLayerSource,json:{write:!0}})],t.prototype,"dynamicDataSource",void 0);c.__decorate([q.property({type:String,json:{write:!0}})],t.prototype,"formatOf3DObjects",void 0);c.__decorate([q.property({type:String,json:{write:!0}})],t.prototype,"gdbVersion",void 0);c.__decorate([q.property({types:z.geometryTypes,json:{read:d.fromJSON,write:!0}})],
t.prototype,"geometry",void 0);c.__decorate([q.property({type:Number,json:{write:!0}})],t.prototype,"geometryPrecision",void 0);c.__decorate([q.property({type:[String],json:{write:!0}})],t.prototype,"groupByFieldsForStatistics",void 0);c.__decorate([q.property({type:String,json:{write:!0}})],t.prototype,"having",void 0);c.__decorate([q.property({type:Date})],t.prototype,"historicMoment",void 0);c.__decorate([b.writer("historicMoment")],t.prototype,"writeHistoricMoment",null);c.__decorate([q.property({type:Number,
json:{write:!0}})],t.prototype,"maxAllowableOffset",void 0);c.__decorate([q.property({type:Number,cast(B){return 1>B?1:B>D.MAX_MAX_RECORD_COUNT_FACTOR?D.MAX_MAX_RECORD_COUNT_FACTOR:B},json:{write:{overridePolicy(B){return{enabled:1<B}}}}})],t.prototype,"maxRecordCountFactor",void 0);c.__decorate([q.property({type:["xyFootprint"],json:{write:!0}})],t.prototype,"multipatchOption",void 0);c.__decorate([q.property({type:Number,json:{read:{source:"resultRecordCount"}}})],t.prototype,"num",void 0);c.__decorate([q.property({json:{write:!0}})],
t.prototype,"objectIds",void 0);c.__decorate([q.property({type:[String],json:{write:!0}})],t.prototype,"orderByFields",void 0);c.__decorate([q.property({type:[String],json:{write:!0}})],t.prototype,"outFields",void 0);c.__decorate([q.property({type:x,json:{name:"outSR",write:!0}})],t.prototype,"outSpatialReference",void 0);c.__decorate([q.property({type:[m],json:{write:{enabled:!0,overridePolicy(){return{enabled:v.isSome(this.outStatistics)&&0<this.outStatistics.length}}}}})],t.prototype,"outStatistics",
void 0);c.__decorate([q.property({json:{write:!0}})],t.prototype,"parameterValues",void 0);c.__decorate([b.writer("parameterValues")],t.prototype,"writeParameterValues",null);c.__decorate([q.property({type:A,json:{write:!0}})],t.prototype,"pixelSize",void 0);c.__decorate([q.property({type:u,json:{write:!0}})],t.prototype,"quantizationParameters",void 0);c.__decorate([q.property({type:[Object],json:{write:!0}})],t.prototype,"rangeValues",void 0);c.__decorate([q.property({type:String,json:{read:{source:"relationParam"},
write:{target:"relationParam",overridePolicy(){return{enabled:"relation"===this.spatialRelationship}}}}})],t.prototype,"relationParameter",void 0);c.__decorate([q.property({type:String,json:{write:!0}})],t.prototype,"resultType",void 0);c.__decorate([q.property({type:Boolean,json:{default:!1,write:!0}})],t.prototype,"returnCentroid",void 0);c.__decorate([q.property({type:Boolean,json:{default:!1,write:!0}})],t.prototype,"returnDistinctValues",void 0);c.__decorate([q.property({type:Boolean,json:{default:!0,
write:!0}})],t.prototype,"returnExceededLimitFeatures",void 0);c.__decorate([q.property({type:Boolean,json:{write:!0}})],t.prototype,"returnGeometry",void 0);c.__decorate([q.property({type:Boolean,json:{default:!1,write:!0}})],t.prototype,"returnQueryGeometry",void 0);c.__decorate([q.property({type:Boolean,json:{default:!1,write:!0}})],t.prototype,"returnM",void 0);c.__decorate([q.property({type:Boolean,json:{write:{overridePolicy(B){return{enabled:B}}}}})],t.prototype,"returnZ",void 0);c.__decorate([q.property({type:x,
json:{write:!0}})],t.prototype,"sourceSpatialReference",void 0);c.__decorate([h.enumeration(k,{ignoreUnknown:!1,name:"spatialRel"})],t.prototype,"spatialRelationship",void 0);c.__decorate([q.property({type:Number,json:{read:{source:"resultOffset"}}})],t.prototype,"start",void 0);c.__decorate([b.writer("start"),b.writer("num")],t.prototype,"writeStart",null);c.__decorate([q.property({type:String,json:{write:!0}})],t.prototype,"sqlFormat",void 0);c.__decorate([q.property({type:String,json:{write:!0}})],
t.prototype,"text",void 0);c.__decorate([q.property({type:y,json:{write:!0}})],t.prototype,"timeExtent",void 0);c.__decorate([h.enumeration(r,{ignoreUnknown:!1}),q.property({json:{write:{overridePolicy(B){return{enabled:B&&0<this.distance}}}}})],t.prototype,"units",void 0);c.__decorate([q.property({type:String,json:{write:{overridePolicy(B){return{enabled:null!=B||0<this.start}}}}})],t.prototype,"where",void 0);c.__decorate([b.writer("where")],t.prototype,"writeWhere",null);return t=D=c.__decorate([f.subclass("esri.rest.support.Query")],
t)})},"esri/TimeExtent":function(){define("./chunks/_rollupPluginBabelHelpers ./chunks/tslib.es6 ./core/JSONSupport ./core/maybe ./core/timeUtils ./core/accessorSupport/decorators/property ./core/has ./core/accessorSupport/ensureType ./core/Logger ./core/jsonMap ./core/accessorSupport/decorators/reader ./core/accessorSupport/decorators/subclass ./core/accessorSupport/decorators/writer".split(" "),function(p,c,z,y,r,t,l,v,q,g,k,n,h){var f;z=f=function(d){function e(m){m=d.call(this,m)||this;m.end=
null;m.start=null;return m}p._inheritsLoose(e,d);var u=e.prototype;u.readEnd=function(m,x){return null!=x.end?new Date(x.end):null};u.writeEnd=function(m,x){x.end=m?m.getTime():null};u.readStart=function(m,x){return null!=x.start?new Date(x.start):null};u.writeStart=function(m,x){x.start=m?m.getTime():null};u.clone=function(){return new f({end:this.end,start:this.start})};u.expandTo=function(m){if(this.isEmpty||this.isAllTime)return this.clone();const x=y.andThen(this.start,D=>r.truncateDate(D,m)),
A=y.andThen(this.end,D=>r.offsetDate(r.truncateDate(D,m),1,m));return new f({start:x,end:A})};u.intersection=function(m){if(!m)return this.clone();if(this.isEmpty||m.isEmpty)return f.empty;if(this.isAllTime)return m.clone();if(m.isAllTime)return this.clone();var x=y.mapOr(this.start,-Infinity,w=>w.getTime());const A=y.mapOr(this.end,Infinity,w=>w.getTime()),D=y.mapOr(m.start,-Infinity,w=>w.getTime());m=y.mapOr(m.end,Infinity,w=>w.getTime());let B,C;D>=x&&D<=A?B=D:x>=D&&x<=m&&(B=x);A>=D&&A<=m?C=A:
m>=x&&m<=A&&(C=m);return isNaN(B)||isNaN(C)?f.empty:(x=new f,x.start=-Infinity===B?null:new Date(B),x.end=Infinity===C?null:new Date(C),x)};u.offset=function(m,x){if(this.isEmpty||this.isAllTime)return this.clone();const A=new f,{start:D,end:B}=this;y.isSome(D)&&(A.start=r.offsetDate(D,m,x));y.isSome(B)&&(A.end=r.offsetDate(B,m,x));return A};u.equals=function(m){if(!m)return!1;const x=y.isSome(this.start)?this.start.getTime():this.start,A=y.isSome(this.end)?this.end.getTime():this.end,D=y.isSome(m.start)?
m.start.getTime():m.start;m=y.isSome(m.end)?m.end.getTime():m.end;return x===D&&A===m};u.union=function(m){if(!m||m.isEmpty)return this.clone();if(this.isEmpty)return m.clone();if(this.isAllTime||m.isAllTime)return b.clone();const x=y.isSome(this.start)&&y.isSome(m.start)?new Date(Math.min(this.start.getTime(),m.start.getTime())):null;m=y.isSome(this.end)&&y.isSome(m.end)?new Date(Math.max(this.end.getTime(),m.end.getTime())):null;return new f({start:x,end:m})};p._createClass(e,[{key:"isAllTime",
get:function(){return this.equals(f.allTime)}},{key:"isEmpty",get:function(){return this.equals(f.empty)}}],[{key:"allTime",get:function(){return b}},{key:"empty",get:function(){return a}}]);return e}(z.JSONSupport);c.__decorate([t.property({type:Date,json:{write:{allowNull:!0}}})],z.prototype,"end",void 0);c.__decorate([k.reader("end")],z.prototype,"readEnd",null);c.__decorate([h.writer("end")],z.prototype,"writeEnd",null);c.__decorate([t.property({readOnly:!0,json:{read:!1}})],z.prototype,"isAllTime",
null);c.__decorate([t.property({readOnly:!0,json:{read:!1}})],z.prototype,"isEmpty",null);c.__decorate([t.property({type:Date,json:{write:{allowNull:!0}}})],z.prototype,"start",void 0);c.__decorate([k.reader("start")],z.prototype,"readStart",null);c.__decorate([h.writer("start")],z.prototype,"writeStart",null);z=f=c.__decorate([n.subclass("esri.TimeExtent")],z);const b=new z,a=new z({start:void 0,end:void 0});return z})},"esri/core/timeUtils":function(){define(["exports","./has"],function(p,c){function z(t,
l,v){return 0===t?0:t*y[l]/y[v]}const y={milliseconds:1,seconds:1E3,minutes:6E4,hours:36E5,days:864E5,weeks:6048E5,months:26784E5,years:31536E6,decades:31536E7,centuries:31536E8},r={milliseconds:{getter:"getMilliseconds",setter:"setMilliseconds",multiplier:1},seconds:{getter:"getSeconds",setter:"setSeconds",multiplier:1},minutes:{getter:"getMinutes",setter:"setMinutes",multiplier:1},hours:{getter:"getHours",setter:"setHours",multiplier:1},days:{getter:"getDate",setter:"setDate",multiplier:1},weeks:{getter:"getDate",
setter:"setDate",multiplier:7},months:{getter:"getMonth",setter:"setMonth",multiplier:1},years:{getter:"getFullYear",setter:"setFullYear",multiplier:1},decades:{getter:"getFullYear",setter:"setFullYear",multiplier:10},centuries:{getter:"getFullYear",setter:"setFullYear",multiplier:100}};p.convertTime=z;p.makeUTCTime=function(t,l,v="milliseconds"){l=new Date(z(l,v,"milliseconds"));l.setUTCFullYear(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate());return l};p.offsetDate=function(t,l,v){t=new Date(t.getTime());
if(l&&v){const {getter:q,setter:g,multiplier:k}=r[v];t[g](t[q]()+l*k)}return t};p.offsetDateUTC=function(t,l,v="milliseconds"){t=t.getTime();l=z(l,v,"milliseconds");return new Date(t+l)};p.resetUTCDate=function(t,l){t=new Date(t.getTime());t.setUTCFullYear(l.getFullYear(),l.getMonth(),l.getDate());return t};p.timeSinceUTCMidnight=function(t,l="milliseconds"){const v=z(t.getUTCHours(),"hours","milliseconds"),q=z(t.getUTCMinutes(),"minutes","milliseconds"),g=z(t.getUTCSeconds(),"seconds","milliseconds");
t=t.getUTCMilliseconds();return z(v+q+g+t,"milliseconds",l)};p.truncateDate=function(t,l){switch(l){case "milliseconds":return new Date(t.getTime());case "seconds":return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds());case "minutes":return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes());case "hours":return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours());case "days":return new Date(t.getFullYear(),t.getMonth(),
t.getDate());case "weeks":return new Date(t.getFullYear(),t.getMonth(),t.getDate()-t.getDay());case "months":return new Date(t.getFullYear(),t.getMonth(),1);case "years":return new Date(t.getFullYear(),0,1);case "decades":return new Date(t.getFullYear()-t.getFullYear()%10,0,1);case "centuries":return new Date(t.getFullYear()-t.getFullYear()%100,0,1);default:return new Date}};p.truncateLocalTime=function(t){const l=new Date(0);l.setHours(0);l.setMinutes(0);l.setSeconds(0);l.setMilliseconds(0);l.setFullYear(t.getUTCFullYear(),
t.getUTCMonth(),t.getUTCDate());return l};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/support/source/DataLayerSource":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/jsonMap ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/decorators/cast ../../../core/Logger ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/reader ../../../core/accessorSupport/decorators/subclass ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/extensions/serializableProperty/reader ../Field ./MapLayerSource ./QueryTableDataSource ./RasterDataSource ./TableDataSource".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k,n,h,f,b,a,d,e,u){function m(){B||(B=f.createTypeReader({types:x()}));return B}function x(){C||(C={key:"type",base:null,typeMap:{"data-layer":p.DataLayerSource,"map-layer":a.MapLayerSource}});return C}var A,D;y=y.strict()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});p.JoinTableDataSource=A=function(w){function E(F){F=w.call(this,F)||this;F.type="join-table";return F}c._inheritsLoose(E,w);var I=E.prototype;I.readLeftTableSource=function(F,
H,K){return m()(F,H,K)};I.castLeftTableSource=function(F){return h.ensureOneOfType(x(),F)};I.readRightTableSource=function(F,H,K){return m()(F,H,K)};I.castRightTableSource=function(F){return h.ensureOneOfType(x(),F)};I.clone=function(){var F,H;const {leftTableKey:K,rightTableKey:G,leftTableSource:L,rightTableSource:P,joinType:R}=this,S={leftTableKey:K,rightTableKey:G,leftTableSource:null!=(F=null==L?void 0:L.clone())?F:void 0,rightTableSource:null!=(H=null==P?void 0:P.clone())?H:void 0,joinType:R};
return new A(S)};return E}(r.JSONSupport);z.__decorate([g.enumeration({joinTable:"join-table"})],p.JoinTableDataSource.prototype,"type",void 0);z.__decorate([t.property({type:String,json:{write:!0}})],p.JoinTableDataSource.prototype,"leftTableKey",void 0);z.__decorate([t.property({type:String,json:{write:!0}})],p.JoinTableDataSource.prototype,"rightTableKey",void 0);z.__decorate([t.property({json:{write:!0}})],p.JoinTableDataSource.prototype,"leftTableSource",void 0);z.__decorate([k.reader("leftTableSource")],
p.JoinTableDataSource.prototype,"readLeftTableSource",null);z.__decorate([v.cast("leftTableSource")],p.JoinTableDataSource.prototype,"castLeftTableSource",null);z.__decorate([t.property({json:{write:!0}})],p.JoinTableDataSource.prototype,"rightTableSource",void 0);z.__decorate([k.reader("rightTableSource")],p.JoinTableDataSource.prototype,"readRightTableSource",null);z.__decorate([v.cast("rightTableSource")],p.JoinTableDataSource.prototype,"castRightTableSource",null);z.__decorate([g.enumeration(y)],
p.JoinTableDataSource.prototype,"joinType",void 0);p.JoinTableDataSource=A=z.__decorate([n.subclass("esri.layers.support.source.JoinTableDataSource")],p.JoinTableDataSource);let B=null,C=null;v={key:"type",base:null,typeMap:{"join-table":p.JoinTableDataSource,"query-table":d.QueryTableDataSource,raster:e.RasterDataSource,table:u.TableDataSource}};p.DataLayerSource=D=function(w){function E(I){I=w.call(this,I)||this;I.type="data-layer";return I}c._inheritsLoose(E,w);E.prototype.clone=function(){const {fields:I,
dataSource:F}=this;return new D({fields:I,dataSource:F})};return E}(r.JSONSupport);z.__decorate([g.enumeration({dataLayer:"data-layer"})],p.DataLayerSource.prototype,"type",void 0);z.__decorate([t.property({type:[b],json:{write:!0}})],p.DataLayerSource.prototype,"fields",void 0);z.__decorate([t.property({types:v,json:{write:!0}})],p.DataLayerSource.prototype,"dataSource",void 0);p.DataLayerSource=D=z.__decorate([n.subclass("esri.layers.support.source.DataLayerSource")],p.DataLayerSource);p.DataLayerSource.from=
h.ensureType(p.DataLayerSource);Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/support/Field":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ./domains ./fieldType".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k,n,h){var f;const b=new z.JSONMap({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});z=f=function(a){function d(u){u=a.call(this,u)||this;
u.alias=null;u.defaultValue=void 0;u.description=null;u.domain=null;u.editable=!0;u.length=-1;u.name=null;u.nullable=!0;u.type=null;u.valueType=null;return u}p._inheritsLoose(d,a);var e=d.prototype;e.readDescription=function(u,{description:m}){let x;try{x=JSON.parse(m)}catch(A){}return x?x.value:null};e.readValueType=function(u,{description:m}){let x;try{x=JSON.parse(m)}catch(A){}return x?b.fromJSON(x.fieldValueType):null};e.clone=function(){return new f({alias:this.alias,defaultValue:this.defaultValue,
description:this.description,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType})};return d}(y.JSONSupport);c.__decorate([r.property({type:String,json:{write:!0}})],z.prototype,"alias",void 0);c.__decorate([r.property({type:[String,Number],json:{write:{allowNull:!0}}})],z.prototype,"defaultValue",void 0);c.__decorate([r.property()],z.prototype,"description",void 0);c.__decorate([g.reader("description")],
z.prototype,"readDescription",null);c.__decorate([r.property({types:n.types,json:{read:{reader:n.fromJSON},write:!0}})],z.prototype,"domain",void 0);c.__decorate([r.property({type:Boolean,json:{write:!0}})],z.prototype,"editable",void 0);c.__decorate([r.property({type:l.Integer,json:{write:!0}})],z.prototype,"length",void 0);c.__decorate([r.property({type:String,json:{write:!0}})],z.prototype,"name",void 0);c.__decorate([r.property({type:Boolean,json:{write:!0}})],z.prototype,"nullable",void 0);c.__decorate([q.enumeration(h.kebabDict)],
z.prototype,"type",void 0);c.__decorate([r.property()],z.prototype,"valueType",void 0);c.__decorate([g.reader("valueType",["description"])],z.prototype,"readValueType",null);return z=f=c.__decorate([k.subclass("esri.layers.support.Field")],z)})},"esri/layers/support/fieldType":function(){define(["exports","../../core/jsonMap"],function(p,c){c=new c.JSONMap({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",
esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"});p.kebabDict=c;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/support/source/MapLayerSource":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/Logger ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass".split(" "),
function(p,c,z,y,r,t,l,v,q,g){var k;p.MapLayerSource=k=function(n){function h(f){f=n.call(this,f)||this;f.type="map-layer";return f}c._inheritsLoose(h,n);h.prototype.clone=function(){const {mapLayerId:f,gdbVersion:b}=this;return new k({mapLayerId:f,gdbVersion:b})};return h}(y.JSONSupport);z.__decorate([q.enumeration({mapLayer:"map-layer"})],p.MapLayerSource.prototype,"type",void 0);z.__decorate([r.property({type:l.Integer,json:{write:!0}})],p.MapLayerSource.prototype,"mapLayerId",void 0);z.__decorate([r.property({type:String,
json:{write:!0}})],p.MapLayerSource.prototype,"gdbVersion",void 0);p.MapLayerSource=k=z.__decorate([g.subclass("esri.layers.support.source.MapLayerSource")],p.MapLayerSource);Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/support/source/QueryTableDataSource":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../geometry ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/Logger ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass ../../../geometry/SpatialReference ../../../geometry/support/typeUtils".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k,n,h){var f;p.QueryTableDataSource=f=function(b){function a(d){d=b.call(this,d)||this;d.type="query-table";return d}c._inheritsLoose(a,b);a.prototype.clone=function(){var d;const {workspaceId:e,query:u,oidFields:m,spatialReference:x,geometryType:A}=this,D={workspaceId:e,query:u,oidFields:m,spatialReference:null!=(d=null==x?void 0:x.clone())?d:void 0,geometryType:A};return new f(D)};return a}(r.JSONSupport);z.__decorate([g.enumeration({queryTable:"query-table"})],p.QueryTableDataSource.prototype,
"type",void 0);z.__decorate([t.property({type:String,json:{write:!0}})],p.QueryTableDataSource.prototype,"workspaceId",void 0);z.__decorate([t.property({type:String,json:{write:!0}})],p.QueryTableDataSource.prototype,"query",void 0);z.__decorate([t.property({type:String,json:{write:!0}})],p.QueryTableDataSource.prototype,"oidFields",void 0);z.__decorate([t.property({type:n,json:{write:!0}})],p.QueryTableDataSource.prototype,"spatialReference",void 0);z.__decorate([g.enumeration(h.featureGeometryTypeKebabDictionary)],
p.QueryTableDataSource.prototype,"geometryType",void 0);p.QueryTableDataSource=f=z.__decorate([k.subclass("esri.layers.support.source.QueryTableDataSource")],p.QueryTableDataSource);Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/support/source/RasterDataSource":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/Logger ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass".split(" "),
function(p,c,z,y,r,t,l,v,q,g){var k;p.RasterDataSource=k=function(n){function h(f){f=n.call(this,f)||this;f.type="raster";return f}c._inheritsLoose(h,n);h.prototype.clone=function(){const {workspaceId:f,dataSourceName:b}=this;return new k({workspaceId:f,dataSourceName:b})};return h}(y.JSONSupport);z.__decorate([q.enumeration({raster:"raster"})],p.RasterDataSource.prototype,"type",void 0);z.__decorate([r.property({type:String,json:{write:!0}})],p.RasterDataSource.prototype,"dataSourceName",void 0);
z.__decorate([r.property({type:String,json:{write:!0}})],p.RasterDataSource.prototype,"workspaceId",void 0);p.RasterDataSource=k=z.__decorate([g.subclass("esri.layers.support.source.RasterDataSource")],p.RasterDataSource);Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/support/source/TableDataSource":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/Logger ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass".split(" "),
function(p,c,z,y,r,t,l,v,q,g){var k;p.TableDataSource=k=function(n){function h(f){f=n.call(this,f)||this;f.type="table";return f}c._inheritsLoose(h,n);h.prototype.clone=function(){const {workspaceId:f,gdbVersion:b,dataSourceName:a}=this;return new k({workspaceId:f,gdbVersion:b,dataSourceName:a})};return h}(y.JSONSupport);z.__decorate([q.enumeration({table:"table"})],p.TableDataSource.prototype,"type",void 0);z.__decorate([r.property({type:String,json:{write:!0}})],p.TableDataSource.prototype,"workspaceId",
void 0);z.__decorate([r.property({type:String,json:{write:!0}})],p.TableDataSource.prototype,"gdbVersion",void 0);z.__decorate([r.property({type:String,json:{write:!0}})],p.TableDataSource.prototype,"dataSourceName",void 0);p.TableDataSource=k=z.__decorate([g.subclass("esri.layers.support.source.TableDataSource")],p.TableDataSource);Object.defineProperty(p,"__esModule",{value:!0})})},"esri/rest/support/QuantizationParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/jsonMap ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/subclass ../../geometry/Extent".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k,n){var h;z=new y.JSONMap({upperLeft:"upper-left",lowerLeft:"lower-left"});r=h=function(f){function b(a){a=f.call(this,a)||this;a.extent=null;a.mode="view";a.originPosition="upper-left";a.tolerance=1;return a}p._inheritsLoose(b,f);b.prototype.clone=function(){return new h(t.clone({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))};return b}(r.JSONSupport);c.__decorate([l.property({type:n,json:{write:{overridePolicy(){return{enabled:"view"===
this.mode}}}}})],r.prototype,"extent",void 0);c.__decorate([l.property({type:["view","edit"],json:{write:!0}})],r.prototype,"mode",void 0);c.__decorate([l.property({type:String,json:{read:z.read,write:z.write}})],r.prototype,"originPosition",void 0);c.__decorate([l.property({type:Number,json:{write:{overridePolicy(){return{enabled:"view"===this.mode}}}}})],r.prototype,"tolerance",void 0);return r=h=c.__decorate([k.subclass("esri.rest.support.QuantizationParameters")],r)})},"esri/rest/support/StatisticDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k){var n;z=new z.JSONMap({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete"});y=n=function(h){function f(a){a=h.call(this,a)||this;a.maxPointCount=void 0;a.maxRecordCount=void 0;a.maxVertexCount=void 0;a.onStatisticField=null;a.outStatisticFieldName=null;a.statisticType=null;a.statisticParameters=null;return a}p._inheritsLoose(f,h);var b=
f.prototype;b.writeStatisticParameters=function(a,d){if("percentile-continuous"===this.statisticType||"percentile-discrete"===this.statisticType)d.statisticParameters=r.clone(a)};b.clone=function(){return new n({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:r.clone(this.statisticParameters)})};return f}(y.JSONSupport);
c.__decorate([t.property({type:Number,json:{write:!0}})],y.prototype,"maxPointCount",void 0);c.__decorate([t.property({type:Number,json:{write:!0}})],y.prototype,"maxRecordCount",void 0);c.__decorate([t.property({type:Number,json:{write:!0}})],y.prototype,"maxVertexCount",void 0);c.__decorate([t.property({type:String,json:{write:!0}})],y.prototype,"onStatisticField",void 0);c.__decorate([t.property({type:String,json:{write:!0}})],y.prototype,"outStatisticFieldName",void 0);c.__decorate([t.property({type:String,
json:{read:{source:"statisticType",reader:z.read},write:{target:"statisticType",writer:z.write}}})],y.prototype,"statisticType",void 0);c.__decorate([t.property({type:Object})],y.prototype,"statisticParameters",void 0);c.__decorate([k.writer("statisticParameters")],y.prototype,"writeStatisticParameters",null);return y=n=c.__decorate([g.subclass("esri.rest.support.StatisticDefinition")],y)})},"esri/views/2d/layers/features/controllers/support/sourceAdapters":function(){define("exports ../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/has ../../../../../../core/maybe ../../../../../../core/workers/workers ../../../../../../geometry/support/quantizationUtils ../../../../../../layers/graphics/featureConversionUtils ../../../../../../layers/ogc/ogcFeatureUtils ../../../../../../rest/query/operations/query ../../support/FeatureSetReaderJSON ../../support/FeatureSetReaderPBF".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k){let n=function(){function d(e){this.service=e}d.prototype.destroy=function(){};return d}(),h=function(d){function e(m){var x=d.call(this,m)||this;x._portsOpen=r.openWithPorts(m.source).then(A=>x.client=A);return x}c._inheritsLoose(e,d);var u=e.prototype;u.destroy=function(){this.client.close();this.client=null};u.executeQuery=function(){var m=c._asyncToGenerator(function*(x,A){yield this._portsOpen;x=yield this.client.invoke("queryFeatures",x.toJSON(),A);return g.FeatureSetReaderJSON.fromFeatureSet(x,
this.service.objectIdField)});return function(x,A){return m.apply(this,arguments)}}();return e}(n),f=function(d){function e(){return d.apply(this,arguments)||this}c._inheritsLoose(e,d);e.prototype.executeQuery=function(){var u=c._asyncToGenerator(function*(m,x){({data:x}=yield q.executeQueryPBFBuffer(this.service.source,m,{signal:null==x?void 0:x.signal,query:{...null==x?void 0:x.query,...this.service.customParameters}}));return k.FeatureSetReaderPBF.fromBuffer(x,this.service.geometryType,!m.quantizationParameters)});
return function(m,x){return u.apply(this,arguments)}}();return e}(n),b=function(d){function e(){return d.apply(this,arguments)||this}c._inheritsLoose(e,d);e.prototype.executeQuery=function(){var u=c._asyncToGenerator(function*(m,x){const {source:A,capabilities:D,spatialReference:B,objectIdField:C}=this.service;if(y.isSome(m.quantizationParameters)&&!D.query.supportsQuantization){const w=m.clone();m=t.toQuantizationTransform(y.unwrap(w.quantizationParameters));w.quantizationParameters=null;({data:x}=
yield q.executeQuery(A,w,B,{signal:null==x?void 0:x.signal,query:{...null==x?void 0:x.query,...this.service.customParameters}}));x=l.convertFromFeatureSet(x,C);l.quantizeOptimizedFeatureSet(m,x);return g.FeatureSetReaderJSON.fromOptimizedFeatureSet(x)}({data:m}=yield q.executeQuery(A,m,this.service.spatialReference,{...x,query:{...null==x?void 0:x.query,...this.service.customParameters}}));return g.FeatureSetReaderJSON.fromFeatureSet(m,this.service.objectIdField)});return function(m,x){return u.apply(this,
arguments)}}();return e}(n),a=function(d){function e(){return d.apply(this,arguments)||this}c._inheritsLoose(e,d);e.prototype.executeQuery=function(){var u=c._asyncToGenerator(function*(m,x){var {capabilities:A}=this.service;if(m.quantizationParameters&&!A.query.supportsQuantization){const D=m.clone();A=t.toQuantizationTransform(y.unwrap(D.quantizationParameters));D.quantizationParameters=null;m=yield v.queryOptimizedFeatureSet(this.service.source,m,x);l.quantizeOptimizedFeatureSet(A,m);return g.FeatureSetReaderJSON.fromOptimizedFeatureSet(m)}m=
yield v.queryOptimizedFeatureSet(this.service.source,m,x);return g.FeatureSetReaderJSON.fromOptimizedFeatureSet(m)});return function(m,x){return u.apply(this,arguments)}}();return e}(n);p.SourceAdapter=n;p.createSourceAdapter=function(d){const {capabilities:e}=d;var u=d.source;return u&&u.capabilities&&u.collection&&u.layerDefinition?new a(d):Array.isArray(d.source)?new h(d):e.query.supportsFormatPBF&&z("featurelayer-pbf")?new f(d):new b(d)};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/core/workers/workers":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../Error ../has ../promiseUtils ./Connection ./RemoteClient ./WorkerOwner".split(" "),
function(p,c,z,y,r,t,l,v,q){function g(x){if(x&&x.__esModule)return x;var A=Object.create(null);x&&Object.keys(x).forEach(function(D){if("default"!==D){var B=Object.getOwnPropertyDescriptor(x,D);Object.defineProperty(A,D,B.get?B:{enumerable:!0,get:function(){return x[D]}})}});A["default"]=x;return Object.freeze(A)}function k(x,A){return n.apply(this,arguments)}function n(){n=z._asyncToGenerator(function*(x,A){const D=new l;yield D.open(x,A);return D});return n.apply(this,arguments)}function h(){h=
z._asyncToGenerator(function*(x,A={}){if("string"!==typeof x)throw new y("workers:undefined-module","modulePath is missing");var D=A.strategy||"distributed";r("host-webworker")&&!r("esri-workers")&&(D="local");if("local"===D){var B=yield v.loadWorker(x);B||(B=yield new Promise(function(C,w){p([x],function(E){C(g(E))},w)}));t.throwIfAborted(A.signal);D=A.client||B;B=v.connect(B);return k([B],{...A,client:D})}yield f();t.throwIfAborted(A.signal);if("dedicated"===D)return D=d++%a,D=yield e[D].open(x,
A),k([D],A);if(A.maxNumWorkers&&0<A.maxNumWorkers&&(D=Math.min(A.maxNumWorkers,a),D<a)){B=Array(D);for(let C=0;C<D;++C){const w=d++%a;B[C]=e[w].open(x,A)}return k(B,A)}D=e.map(C=>C.open(x,A));return k(D,A)});return h.apply(this,arguments)}function f(){return b.apply(this,arguments)}function b(){b=z._asyncToGenerator(function*(){if(u)return u;m=t.createAbortController();const x=[];for(let A=0;A<a;A++){const D=q.create(A).then(B=>e[A]=B);x.push(D)}return u=Promise.all(x)});return b.apply(this,arguments)}
let a=r("esri-workers-debug")?1:r("host-browser")?navigator.hardwareConcurrency-1:0;a||(a=r("safari")&&r("mac")||r("trident")?7:2);let d=0;const e=[];let u=null,m;c.Connection=l;c.RemoteClient=v;c.initialize=function(){f()};c.open=function(x){return h.apply(this,arguments)};c.openWithPorts=function(x,A){return k(x,{client:A})};c.terminate=function(){u&&(m.abort(),u=null);for(let x=0;x<e.length;x++)e[x]&&e[x].terminate();e.length=0};Object.defineProperty(c,"__esModule",{value:!0})})},"esri/core/workers/Connection":function(){define(["../../chunks/_rollupPluginBabelHelpers",
"../handleUtils","../Logger","../promiseUtils","./RemoteClient"],function(p,c,z,y,r){const t=z.getLogger("esri.core.workers.Connection");return function(){function l(){this._clients=[];this._clientPromises=[];this._clientIdx=0}var v=l.prototype;v.destroy=function(){this.close()};v.open=function(q,g){return new Promise((k,n)=>{let h=!0;const f=b=>{y.throwIfAborted(g.signal);h&&(h=!1,b())};this._clients.length=q.length;this._clientPromises.length=q.length;for(let b=0;b<q.length;++b){const a=q[b];y.isPromiseLike(a)?
this._clientPromises[b]=a.then(d=>{this._clients[b]=new r(d,g);f(k);return this._clients[b]},()=>{f(n);return null}):(this._clients[b]=new r(a,g),this._clientPromises[b]=Promise.resolve(this._clients[b]),f(k))}})};v.broadcast=function(q,g,k){const n=Array(this._clientPromises.length);for(let h=0;h<this._clientPromises.length;++h)n[h]=this._clientPromises[h].then(f=>f.invoke(q,g,k));return n};v.close=function(){for(const q of this._clientPromises)q.then(g=>g.close());this._clients.length=0;this._clientPromises.length=
0};v.getAvailableClient=function(){let q;for(let g=0;g<this._clients.length;++g){const k=this._clients[g];if(!k)q=q||[],q.push(this._clientPromises[g]);else if(!k.isBusy())return Promise.resolve(k)}return q?Promise.race(q):(this._clientIdx=(this._clientIdx+1)%this._clients.length,Promise.resolve(this._clients[this._clientIdx]))};v.invoke=function(q,g,k){let n=null;Array.isArray(k)?(t.warn("invoke()","The transferList parameter is deprecated, use the options object instead"),n={transferList:k}):n=
k;return this.closed?Promise.reject(Error("Connection closed")):this.getAvailableClient().then(h=>h.invoke(q,g,n))};v.on=function(q,g){return Promise.all(this._clientPromises).then(()=>c.handlesGroup(this._clients.map(k=>k.on(q,g))))};v.openPorts=function(){return new Promise(q=>{const g=Array(this._clientPromises.length);let k=g.length;for(let n=0;n<this._clientPromises.length;++n)this._clientPromises[n].then(h=>{g[n]=h.openPort();0===--k&&q(g)})})};p._createClass(l,[{key:"closed",get:function(){return!this._clients||
!this._clients.length}},{key:"test",get:function(){return{numClients:this._clients.length}}}]);return l}()})},"esri/core/workers/WorkerOwner":function(){define("../../chunks/_rollupPluginBabelHelpers ../../kernel ../Error ../Logger ../promiseUtils ./utils ./workerFactory".split(" "),function(p,c,z,y,r,t,l){const v=y.getLogger("esri.core.workers"),{ABORT:q,INVOKE:g,OPEN:k,OPENED:n,RESPONSE:h}=t.MessageType;return function(){function f(a,d){this._outJobs=new Map;this._inJobs=new Map;this.worker=a;this.id=
d;a.addEventListener("message",this._onMessage.bind(this));a.addEventListener("error",e=>{e.preventDefault();v.error(e)})}f.create=function(){var a=p._asyncToGenerator(function*(d){const e=yield l.createWorker();return new f(e,d)});return function(d){return a.apply(this,arguments)}}();var b=f.prototype;b.terminate=function(){this.worker.terminate()};b.open=function(){var a=p._asyncToGenerator(function*(d,e={}){const {signal:u}=e,m=t.newJobId();return new Promise((x,A)=>{const D=r.onAbortOrThrow(u,
()=>{this._outJobs.delete(m);this._post({type:q,jobId:m})});this._outJobs.set(m,{resolve:x,reject:A,abortHandle:D});this._post({type:k,jobId:m,modulePath:d})})});return function(d){return a.apply(this,arguments)}}();b._onMessage=function(a){if(a=t.receiveMessage(a))switch(a.type){case n:this._onOpenedMessage(a);break;case h:this._onResponseMessage(a);break;case q:this._onAbortMessage(a);break;case g:this._onInvokeMessage(a)}};b._onAbortMessage=function(a){const d=this._inJobs;a=a.jobId;const e=d.get(a);
e&&(e.controller&&e.controller.abort(),d.delete(a))};b._onInvokeMessage=function(a){const {methodName:d,jobId:e,data:u,abortable:m}=a;a=m?r.createAbortController():null;const x=this._inJobs,A=c.workerMessages[d];let D;try{if("function"!==typeof A)throw new TypeError(`${d} is not a function`);D=A.call(null,u,{signal:a?a.signal:null})}catch(B){this._post({type:h,jobId:e,error:t.toInvokeError(B)});return}r.isPromiseLike(D)?(x.set(e,{controller:a,promise:D}),D.then(B=>{x.has(e)&&(x.delete(e),this._post({type:h,
jobId:e},B))},B=>{x.has(e)&&(x.delete(e),B||(B={message:"Error encountered at method"+d}),r.isAbortError(B)||this._post({type:h,jobId:e,error:t.toInvokeError(B||{message:`Error encountered at method ${d}`})}))})):this._post({type:h,jobId:e},D)};b._onOpenedMessage=function(a){var d;const {jobId:e,data:u}=a;if(a=this._outJobs.get(e))this._outJobs.delete(e),null==(d=a.abortHandle)?void 0:d.remove(),a.resolve(u)};b._onResponseMessage=function(a){var d;const {jobId:e,error:u,data:m}=a;if(a=this._outJobs.get(e))this._outJobs.delete(e),
null==(d=a.abortHandle)?void 0:d.remove(),u?a.reject(z.fromJSON(JSON.parse(u))):a.resolve(m)};b._post=function(a,d,e){return t.postMessage(this.worker,a,d,e)};return f}()})},"esri/core/workers/workerFactory":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../assets ../../config ../../intl ../../kernel ../has ../Logger ../urlUtils ./loaderConfig ./utils ./WorkerFallback ../../intl/locale ../../support/revision".split(" "),function(p,c,z,y,r,t,l,v,q,g,k,n,h,f){function b(){b=c._asyncToGenerator(function*(){if(!l("esri-workers"))return a(new n);
if(!x&&!A)try{const C='let globalId\x3d0;const outgoing\x3dnew Map,configuration\x3dJSON.parse("{CONFIGURATION}");self.esriConfig\x3dconfiguration.esriConfig;const workerPath\x3dself.esriConfig.workers.workerPath,HANDSHAKE\x3d0,OPEN\x3d1,OPENED\x3d2,RESPONSE\x3d3,INVOKE\x3d4,ABORT\x3d5;function createAbortError(){const e\x3dnew Error("Aborted");return e.name\x3d"AbortError",e}function receiveMessage(e){return e\x26\x26e.data?"string"\x3d\x3dtypeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t\x3dr\x26\x26r.signal,n\x3dglobalId++;return new Promise(((r,i)\x3d\x3e{if(t){if(t.aborted)return i(createAbortError());t.addEventListener("abort",(()\x3d\x3e{outgoing.get(n)\x26\x26(outgoing.delete(n),self.postMessage({type:5,jobId:n}),i(createAbortError()))}))}outgoing.set(n,{resolve:r,reject:i}),self.postMessage({type:4,jobId:n,methodName:e,abortable:null!\x3dt,data:o})}))}let workerRevisionChecked\x3d!1;function checkWorkerRevision(e){if(!workerRevisionChecked\x26\x26e.kernelInfo){workerRevisionChecked\x3d!0;const{revision:o,buildDate:r,version:t}\x3dconfiguration.kernelInfo,{revision:n,buildDate:i,version:s}\x3de.kernelInfo;o!\x3d\x3dn\x26\x26console.warn(`[esri.core.workers] Version mismatch detected between ArcGIS API for JavaScript and assets:\nAPI version: ${t} [Date: ${r}, Revision: ${o.slice(0,8)}]\nAssets version: ${s} [Date: ${i}, Revision: ${n.slice(0,8)}]`)}}function messageHandler(e){const o\x3dreceiveMessage(e);if(!o)return;const r\x3do.jobId;switch(o.type){case 1:let e;function t(o){const t\x3de.connect(o);self.postMessage({type:2,jobId:r,data:t},[t])}"function"\x3d\x3dtypeof define\x26\x26define.amd?require([workerPath],(r\x3d\x3e{e\x3dr.default||r,checkWorkerRevision(e),e.loadWorker(o.modulePath).then((e\x3d\x3ee||new Promise((e\x3d\x3e{require([o.modulePath],e)})))).then(t)})):"System"in self\x26\x26"function"\x3d\x3dtypeof System.import?System.import(workerPath).then((r\x3d\x3e(e\x3dr.default,checkWorkerRevision(e),e.loadWorker(o.modulePath)))).then((e\x3d\x3ee||System.import(o.modulePath))).then(t):(self.RemoteClient||importScripts(workerPath),e\x3dself.RemoteClient.default||self.RemoteClient,checkWorkerRevision(e),e.loadWorker(o.modulePath).then(t));break;case 3:if(outgoing.has(r)){const e\x3doutgoing.get(r);outgoing.delete(r),o.error?e.reject(JSON.parse(o.error)):e.resolve(o.data)}}}self.dojoConfig\x3dconfiguration.loaderConfig,esriConfig.workers.loaderUrl\x26\x26(self.importScripts(esriConfig.workers.loaderUrl),"function"\x3d\x3dtypeof require\x26\x26"function"\x3d\x3dtypeof require.config\x26\x26require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});'.replace('"{CONFIGURATION}"',
`'${e()}'`);x=URL.createObjectURL(new Blob([C],{type:"text/javascript"}))}catch(C){A=C||{}}let B;if(x)try{B=new Worker(x,{name:`esri-worker-${D++}`})}catch(C){u.warn("Failed to create Worker. Fallback to execute module in main thread",A),B=new n}else u.warn("Failed to create Worker. Fallback to execute module in main thread",A),B=new n;return a(B)});return b.apply(this,arguments)}function a(B){return d.apply(this,arguments)}function d(){d=c._asyncToGenerator(function*(B){return new Promise(C=>{function w(I){(I=
k.receiveMessage(I))&&I.type===m&&(B.removeEventListener("message",w),B.removeEventListener("error",E),C(B))}function E(I){I.preventDefault();B.removeEventListener("message",w);B.removeEventListener("error",E);u.warn("Failed to create Worker. Fallback to execute module in main thread",I);B=new n;B.addEventListener("message",w);B.addEventListener("error",E)}B.addEventListener("message",w);B.addEventListener("error",E)})});return d.apply(this,arguments)}function e(){if(null!=y["default"]){var B={...y};
delete B["default"];B=JSON.parse(JSON.stringify(B))}else B=JSON.parse(JSON.stringify(y));B.assetsPath=q.makeAbsolute(B.assetsPath);B.request.interceptors=[];B.log.interceptors=[];B.locale=h.getLocale();B.has={"csp-restrictions":l("csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":l("esri-2d-update-debug"),"esri-2d-query-centroid-enabled":l("esri-2d-query-centroid-enabled"),"featurelayer-pbf":l("featurelayer-pbf"),"esri-atomics":l("esri-atomics"),"esri-shared-array-buffer":l("esri-shared-array-buffer"),
"esri-tiles-debug":l("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":l("esri-workers-arraybuffer-transfer"),"host-webworker":1};B.workers.loaderUrl?B.workers.loaderUrl=q.makeAbsolute(B.workers.loaderUrl):g.DEFAULT_LOADER_URL&&(B.workers.loaderUrl=g.DEFAULT_LOADER_URL);B.workers.workerPath=B.workers.workerPath?q.makeAbsolute(B.workers.workerPath):"esri/core/workers/RemoteClient";var C=y.workers.loaderConfig;C=g["default"]({baseUrl:null==C?void 0:C.baseUrl,locale:h.getLocale(),has:{"csp-restrictions":l("csp-restrictions"),
"dojo-test-sniff":0,"host-webworker":1,...null==C?void 0:C.has},map:{...null==C?void 0:C.map},paths:{...null==C?void 0:C.paths},packages:(null==C?void 0:C.packages)||[]});return JSON.stringify({esriConfig:B,loaderConfig:C,kernelInfo:{version:t.version,buildDate:f.buildDate,revision:f.commitHash}})}const u=v.getLogger("esri.core.workers"),{HANDSHAKE:m}=k.MessageType;let x,A,D=0;p.createWorker=function(){return b.apply(this,arguments)};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/core/workers/loaderConfig":function(){define(["exports",
"../../assets","../has","../urlUtils"],function(p,c,z,y){p.DEFAULT_LOADER_URL=null;p.DEFAULT_LOADER_URL=y.makeAbsolute(c.getAssetUrl("esri/core/workers/init.js"));var r=y.makeAbsolute(c.getAssetUrl("dojo/"));var t=[{name:"esri",location:"../esri"}];p.default=function(l){const v={async:l.async,isDebug:l.isDebug,locale:l.locale,baseUrl:l.baseUrl,has:{...l.has},map:{...l.map},packages:l.packages&&l.packages.concat()||[],paths:{...l.paths}};l.hasOwnProperty("async")||(v.async=!0);l.hasOwnProperty("isDebug")||
(v.isDebug=!1);l.baseUrl||(v.baseUrl=r);null==t?void 0:t.forEach(q=>{a:{var g=v.packages;for(const k of g)if(k.name===q.name)break a;g.push(q)}});return v};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/core/workers/WorkerFallback":function(){define(["require","../../chunks/_rollupPluginBabelHelpers","../global","./RemoteClient","./utils"],function(p,c,z,y,r){function t(k){if(k&&k.__esModule)return k;var n=Object.create(null);k&&Object.keys(k).forEach(function(h){if("default"!==h){var f=
Object.getOwnPropertyDescriptor(k,h);Object.defineProperty(n,h,f.get?f:{enumerable:!0,get:function(){return k[h]}})}});n["default"]=k;return Object.freeze(n)}let l=function(){const k=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(n=>{this[n]=(...h)=>k[n](...h)})};const v=z.MutationObserver||z.WebKitMutationObserver,q=function(){let k;if(z.process&&z.process.nextTick)k=n=>{z.process.nextTick(n)};else if(z.Promise)k=n=>{z.Promise.resolve().then(n)};
else if(v){const n=[],h=document.createElement("div");(new v(()=>{for(;0<n.length;)n.shift()()})).observe(h,{attributes:!0});k=f=>{n.push(f);h.setAttribute("queueStatus","1")}}return k}(),g=(()=>{const k=z.MessageEvent;try{new k("message",{data:null})}catch{return(n,h={})=>{const {data:f,bubbles:b=!1,cancelable:a=!1}=h;h=document.createEvent("Event");h.initEvent(n,b,a);h.data=f;return h}}return(n,h)=>new k(n,h)})();return function(){function k(){this._dispatcher=new l;this._workerPostMessage({type:r.MessageType.HANDSHAKE})}
var n=k.prototype;n.terminate=function(){};n.postMessage=function(h){q(()=>{this._workerMessageHandler(g("message",{data:h}))})};n.dispatchEvent=function(h){return this._dispatcher.dispatchEvent(h)};n.addEventListener=function(h,f,b){this._dispatcher.addEventListener(h,f,b)};n.removeEventListener=function(h,f,b){this._dispatcher.removeEventListener(h,f,b)};n._workerPostMessage=function(h){q(()=>{this.dispatchEvent(g("message",{data:h}))})};n._workerMessageHandler=function(){var h=c._asyncToGenerator(function*(f){if((f=
r.receiveMessage(f))&&f.type===r.MessageType.OPEN){const {modulePath:b,jobId:a}=f;(f=yield y.loadWorker(b))||(f=yield new Promise(function(d,e){p([b],function(u){d(t(u))},e)}));f=y.connect(f);this._workerPostMessage({type:r.MessageType.OPENED,jobId:a,data:f})}});return function(f){return h.apply(this,arguments)}}();c._createClass(k,[{key:"onmessage",get:function(){return this._onmessageHandler},set:function(h){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler);(this._onmessageHandler=
h)&&this.addEventListener("message",h)}},{key:"onmessageerror",get:function(){return this._onmessageerrorHandler},set:function(h){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler);(this._onmessageerrorHandler=h)&&this.addEventListener("messageerror",h)}},{key:"onerror",get:function(){return this._onerrorHandler},set:function(h){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler);(this._onerrorHandler=h)&&this.addEventListener("error",
h)}}]);return k}()})},"esri/layers/ogc/ogcFeatureUtils":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../geometry ../../request ../../core/Error ../../core/Logger ../../core/maybe ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ../graphics/featureConversionUtils ../graphics/OptimizedFeatureSet ../graphics/sources/geojson/geojson ../graphics/sources/support/clientSideDefaults ../support/FieldsIndex ../support/fieldType ../../rest/support/FeatureSet ../../geometry/SpatialReference".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k,n,h,f,b,a,d){function e(){e=c._asyncToGenerator(function*(S,M,V={},W=5){({links:S}=S);S=P(S,"items","application/geo+json")||P(S,"http://www.opengis.net/def/rel/ogc/1.0/items","application/geo+json");if(l.isNone(S))throw new r("ogc-feature-layer:missing-items-page","Missing items url");({data:V}=yield y(S.href,{signal:V.signal,query:{limit:W,...V.customParameters,token:V.apiKey},headers:{accept:"application/geo+json"}}));yield n.validateGeoJSON(V);const ea=n.inferLayerProperties(V,
{geometryType:M.geometryType});V=M.fields||ea.fields||[];W=null!=M.hasZ?M.hasZ:ea.hasZ;S=ea.geometryType;const ka=M.objectIdField||ea.objectIdFieldName||"OBJECTID";M=M.timeInfo;var sa=V.find(xa=>xa.name===ka);if(sa)sa.type="esriFieldTypeOID",sa.editable=!1,sa.nullable=!1;else{if(!ea.objectIdFieldType)throw new r("ogc-feature-layer:missing-feature-id","Collection geojson require a feature id as a unique identifier");V.unshift({name:ka,alias:ka,type:"esriFieldTypeOID",editable:!1,nullable:!1})}ka!==
ea.objectIdFieldName&&(sa=V.find(xa=>xa.name===ea.objectIdFieldName))&&(sa.type="esriFieldTypeInteger");if(!S)throw new r("ogc-feature-layer:missing-property","geometryType not set and couldn't be inferred from the provided features");V===ea.fields&&0<ea.unknownFields.length&&R.warn({name:"ogc-feature-layer:unknown-field-types",message:"Some fields types couldn't be inferred from the features and were dropped",details:{unknownFields:ea.unknownFields}});for(var ua of V){null==ua.name&&(ua.name=ua.alias);
null==ua.alias&&(ua.alias=ua.name);"esriFieldTypeOID"!==ua.type&&"esriFieldTypeGlobalID"!==ua.type&&(ua.editable=null==ua.editable?!0:!!ua.editable,ua.nullable=null==ua.nullable?!0:!!ua.nullable);if(!ua.name)throw new r("ogc-feature-layer:invalid-field-name","field name is missing",{field:ua});if(-1===b.kebabDict.jsonValues.indexOf(ua.type))throw new r("ogc-feature-layer:invalid-field-type",`invalid type for field "${ua.name}"`,{field:ua});}M&&(ua=new f(V),M.startTimeField&&((sa=ua.get(M.startTimeField))?
(M.startTimeField=sa.name,sa.type="esriFieldTypeDate"):M.startTimeField=null),M.endTimeField&&((sa=ua.get(M.endTimeField))?(M.endTimeField=sa.name,sa.type="esriFieldTypeDate"):M.endTimeField=null),M.trackIdField&&((ua=ua.get(M.trackIdField))?M.trackIdField=ua.name:(M.trackIdField=null,R.warn({name:"ogc-feature-layer:invalid-timeInfo-trackIdField",message:"trackIdField is missing",details:{timeInfo:M}}))),M.startTimeField||M.endTimeField||(R.warn({name:"ogc-feature-layer:invalid-timeInfo",message:"startTimeField and endTimeField are missing",
details:{timeInfo:M}}),M=null));return{drawingInfo:h.createDrawingInfo(S),geometryType:S,fields:V,hasZ:!!W,objectIdField:ka,timeInfo:M}});return e.apply(this,arguments)}function u(){u=c._asyncToGenerator(function*(S,M={}){({links:S}=S);S=P(S,"data","application/json")||P(S,"http://www.opengis.net/def/rel/ogc/1.0/data","application/json");if(l.isNone(S))throw new r("ogc-feature-layer:missing-collections-page","Missing collections url");const {apiKey:V,customParameters:W,signal:ea}=M;({data:M}=yield y(S.href,
{signal:ea,headers:{accept:"application/json"},query:{...W,token:V}}));return M});return u.apply(this,arguments)}function m(){m=c._asyncToGenerator(function*(S,M={}){({links:S}=S);S=P(S,"conformance","application/json")||P(S,"http://www.opengis.net/def/rel/ogc/1.0/conformance","application/json");if(l.isNone(S))throw new r("ogc-feature-layer:missing-conformance-page","Missing conformance url");const {apiKey:V,customParameters:W,signal:ea}=M;({data:M}=yield y(S.href,{signal:ea,headers:{accept:"application/json"},
query:{...W,token:V}}));return M});return m.apply(this,arguments)}function x(){x=c._asyncToGenerator(function*(S,M={}){const {apiKey:V,customParameters:W,signal:ea}=M;({data:S}=yield y(S,{signal:ea,headers:{accept:"application/json"},query:{...W,token:V}}));return S});return x.apply(this,arguments)}function A(){A=c._asyncToGenerator(function*(S,M={}){S=P(S.links,"service-desc","application/vnd.oai.openapi+json;version\x3d3.0");if(l.isNone(S))return R.warn("ogc-feature-layer:missing-openapi-page",
"The OGC API-Features server does not have an OpenAPI page."),null;const {apiKey:V,customParameters:W,signal:ea}=M;({data:M}=yield y(S.href,{signal:ea,headers:{accept:"application/vnd.oai.openapi+json;version\x3d3.0"},query:{...W,token:V}}));return M});return A.apply(this,arguments)}function D(S){S=c._wrapRegExp(/^http:\/\/www\.opengis.net\/def\/crs\/(.*)\/(.*)\/(.*)$/i,{authority:1,version:2,code:3}).exec(S);S=null==S?void 0:S.groups;if(!S)return null;const {authority:M,code:V}=S;switch(M.toLowerCase()){case "ogc":switch(V.toLowerCase()){case "crs27":return d.GCS_NAD_1927;
case "crs83":return new d({wkid:4269});case "crs84":case "crs84h":return d.WGS84;default:return null}case "esri":case "epsg":return S=Number.parseInt(V,10),Number.isNaN(S)?null:900913===S?d.WebMercator:new d({wkid:S});default:return null}}function B(){B=c._asyncToGenerator(function*(S,M,V){S=yield C(S,M,V);return a.fromJSON(S)});return B.apply(this,arguments)}function C(S,M,V){return w.apply(this,arguments)}function w(){w=c._asyncToGenerator(function*(S,M,V){S=yield E(S,M,V);return g.convertToFeatureSet(S)});
return w.apply(this,arguments)}function E(S,M,V){return I.apply(this,arguments)}function I(){I=c._asyncToGenerator(function*(S,M,V){const {capabilities:{query:{maxRecordCount:W}},collection:ea,layerDefinition:ka,queryParameters:{apiKey:sa,customParameters:ua},spatialReference:xa,supportedCrs:oa}=S;({links:S}=ea);var ra=P(S,"items","application/geo+json")||P(S,"http://www.opengis.net/def/rel/ogc/1.0/items","application/geo+json");if(l.isNone(ra))throw new r("ogc-feature-layer:missing-items-page","Missing items url");
const {geometry:pa,num:N,start:U,timeExtent:O,where:T}=M;if(M.objectIds)throw new r("ogc-feature-layer:query-by-objectids-not-supported","Queries with objectids are not supported");S=d.fromJSON(xa);M=l.unwrapOr(M.outSpatialReference,S);S=M.isWGS84?null:F(M,oa);var Z=L(pa,oa),aa=K(O);const Y=G(T);({data:Z}=yield y(ra.href,{...V,query:{...ua,...Z,crs:S,datetime:aa,query:Y,limit:null!=N?N:null!=U&&void 0!==U?10:W,startindex:U,token:sa},headers:{accept:"application/geo+json"}}));V=!1;Z.links&&(V=!!Z.links.find(Ca=>
"next"===Ca.rel));!V&&Number.isInteger(Z.numberMatched)&&Number.isInteger(Z.numberReturned)&&(V=Z.numberReturned<Z.numberMatched);const {fields:ba,globalIdField:fa,hasM:ha,hasZ:la,objectIdField:qa}=ka;ra=ka.geometryType;Z=n.createOptimizedFeatures(Z,{geometryType:ra,hasZ:la,objectIdField:qa});if(!S&&M.isWebMercator)for(var va of Z)va.geometry&&(aa=g.convertToGeometry(va.geometry,ra,la,!1),aa.spatialReference=d.WGS84,va.geometry=g.convertFromGeometry(q.project(aa,M)));for(var wa of Z)wa.objectId=wa.attributes[qa];
va=S||!S&&M.isWebMercator?M.toJSON():v.WGS84;wa=new k;wa.exceededTransferLimit=V;wa.features=Z;wa.fields=ba;wa.geometryType=ra;wa.globalIdFieldName=fa;wa.hasM=ha;wa.hasZ=la;wa.objectIdFieldName=qa;wa.spatialReference=va;return wa});return I.apply(this,arguments)}function F(S,M){return M.find(V=>{V=D(V);return v.equals(V,S)})}function H(S){const {xmin:M,ymin:V,xmax:W,ymax:ea}=S;return`${M},${V},${W},${ea}`}function K(S){if(l.isNone(S))return null;const {start:M,end:V}=S;return`${l.isSome(M)?M.toISOString():
".."}/${l.isSome(V)?V.toISOString():".."}`}function G(S){return l.isNone(S)||!S||"1\x3d1"===S?null:S}function L(S,M){if(!l.isSome(S)||"extent"!==S.type)return null;const {spatialReference:V}=S;return!V||V.isWGS84?{bbox:H(S)}:(M=F(V,M))?{bbox:H(S),"bbox-crs":M}:V.isWebMercator?{bbox:H(q.project(S,d.WGS84))}:null}function P(S,M,V){return S.find(W=>W.rel===M&&W.type===V)||S.find(W=>W.rel===M&&!W.type)}const R=t.getLogger("esri.layers.graphics.sources.ogcfeature");p.getCollectionDefinition=function(S,
M){return e.apply(this,arguments)};p.getServerCollections=function(S){return u.apply(this,arguments)};p.getServerConformance=function(S){return m.apply(this,arguments)};p.getServerLandingPage=function(S){return x.apply(this,arguments)};p.getServerOpenApi=function(S){return A.apply(this,arguments)};p.getSpatialReference=D;p.queryFeatureSet=function(S,M,V){return B.apply(this,arguments)};p.queryFeatureSetJSON=C;p.queryOptimizedFeatureSet=E;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/graphics/sources/geojson/geojson":function(){define(["exports",
"../../../../core/Error","../../OptimizedFeature","../../OptimizedGeometry"],function(p,c,z,y){function*r(e){switch(e.type){case "Feature":yield e;break;case "FeatureCollection":for(const u of e.features)u&&(yield u)}}function*t(e){if(!e)return null;switch(e.type){case "Point":yield e.coordinates;break;case "LineString":case "MultiPoint":yield*e.coordinates;break;case "MultiLineString":case "Polygon":for(const u of e.coordinates)yield*u;break;case "MultiPolygon":for(const u of e.coordinates)for(const m of u)yield*m}}
function*l(e,u={}){const {geometryType:m,objectIdField:x}=u;for(const D of e){var A;const {geometry:B,properties:C,id:w}=D;if(B&&d[B.type]!==m)continue;e=C||{};let E=null!=(A=e[x])?A:null;x&&null!=w&&!e[x]&&(e[x]=E=w);yield new z(B?k(new y,B,u):null,e,null,E)}}function v(e){for(const u of e)if(2<u.length)return!0;return!1}function q(e){let u=0;for(let m=0;m<e.length;m++){const x=e[m],A=e[(m+1)%e.length];u+=x[0]*A[1]-A[0]*x[1]}return 0>=u}function g(e){const u=e[0],m=e[e.length-1];u[0]===m[0]&&u[1]===
m[1]&&u[2]===m[2]||e.push(u);return e}function k(e,u,m){switch(u.type){case "LineString":return f(e,u.coordinates,m),e;case "MultiLineString":for(const A of u.coordinates)f(e,A,m);return e;case "MultiPoint":return f(e,u.coordinates,m),e;case "MultiPolygon":for(var x of u.coordinates)for(n(e,x[0],m),u=1;u<x.length;u++)h(e,x[u],m);return e;case "Point":return a(e,u.coordinates,m),e;case "Polygon":x=u.coordinates;n(e,x[0],m);for(u=1;u<x.length;u++)h(e,x[u],m);return e}}function n(e,u,m){u=g(u);q(u)?
f(e,u,m):b(e,u,m)}function h(e,u,m){u=g(u);q(u)?b(e,u,m):f(e,u,m)}function f(e,u,m){for(const x of u)a(e,x,m);e.lengths.push(u.length)}function b(e,u,m){for(let x=u.length-1;0<=x;x--)a(e,u[x],m);e.lengths.push(u.length)}function a(e,u,m){const [x,A,D]=u;e.coords.push(x,A);m.hasZ&&e.coords.push(D||0)}const d={LineString:"esriGeometryPolyline",MultiLineString:"esriGeometryPolyline",MultiPoint:"esriGeometryMultipoint",Point:"esriGeometryPoint",Polygon:"esriGeometryPolygon",MultiPolygon:"esriGeometryPolygon"};
p.createOptimizedFeatures=function(e,u){return Array.from(l(r(e),u))};p.getGeometryType=function(e){return d[e]};p.inferLayerProperties=function(e,u={}){const m=[];var x=new Set;const A=new Set;var D=!1;let B=Number.NEGATIVE_INFINITY,C=null,w=!1,E=void 0;({geometryType:u=null}=u);var I=!1;for(const F of r(e)){const {geometry:H,properties:K,id:G}=F;if(H&&(u||(u=d[H.type]),d[H.type]!==u))continue;D||(D=t(H),D=v(D));!w&&(w=null!=G)&&(E=typeof G,"number"===E&&(C=Object.keys(K).filter(L=>K[L]===G)));w&&
"number"===E&&null!=G&&(B=Math.max(B,G),1<C.length?C=C.filter(L=>K[L]===G):1===C.length&&(C=K[C[0]]===G?C:[]));if(!I&&K){e=!0;for(const L in K)if(!x.has(L))if(I=K[L],null==I)e=!1,A.add(L);else{a:switch(typeof I){case "string":I="esriFieldTypeString";break a;case "number":I="esriFieldTypeDouble";break a;default:I="unknown"}"unknown"===I?A.add(L):(A.delete(L),x.add(L),m.push({name:L,alias:L,type:I}))}I=e}}if(x=C&&1===C.length&&C[0]||null)for(const F of m)F.name===x&&(F.type="esriFieldTypeOID");return{fields:m,
geometryType:u,hasZ:D,maxObjectId:Math.max(0,B),objectIdFieldName:x,objectIdFieldType:E,unknownFields:Array.from(A)}};p.validateGeoJSON=function(e){if(!e)throw new c("geojson-layer:empty","GeoJSON data is empty");if("Feature"!==e.type&&"FeatureCollection"!==e.type)throw new c("geojson-layer:unsupported-geojson-object","missing or not supported GeoJSON object type",{data:e});({crs:e}=e);if(e){var u="string"===typeof e?e:"name"===e.type?e.properties.name:"EPSG"===e.type?e.properties.code:null,m=/.*(CRS84H?|4326)$/i;
if(!u||!m.test(u))throw new c("geojson-layer:unsupported-crs","unsupported GeoJSON 'crs' member",{crs:e});}};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/graphics/sources/support/clientSideDefaults":function(){define(["exports","../../../../core/has","../../../../core/lang","../../data/QueryEngineCapabilities","../../../../symbols/support/defaultsJSON"],function(p,c,z,y,r){p.createCapabilities=function(t,l){return{attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,
supportsZ:t},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:l,supportsDelete:l,supportsEditing:l,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAttachments:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:l,supportsExceedsLimitStatistics:!0},query:y.queryCapabilities,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0},editing:{supportsGeometryUpdate:l,supportsGlobalId:!1,
supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1}}};p.createDefaultAttributesFunction=function(t,l){if(c("csp-restrictions"))return()=>({[l]:null,...t});try{let v=`this.${l} = null;`;for(const g in t){const k=g.indexOf(".")?`["${g}"]`:`.${g}`;v+=`this${k} = ${JSON.stringify(t[g])};`}const q=new Function(v);
return()=>new q}catch(v){return()=>({[l]:null,...t})}};p.createDefaultTemplate=function(t={}){return[{name:"New Feature",description:"",prototype:{attributes:z.clone(t)}}]};p.createDrawingInfo=function(t){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===t||"esriGeometryMultipoint"===t?r.defaultPointSymbolJSON:"esriGeometryPolyline"===t?r.defaultPolylineSymbolJSON:r.defaultPolygonSymbolJSON}}};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/symbols/support/defaultsJSON":function(){define(["exports"],
function(p){const c=[252,146,31,255],z={type:"esriSMS",style:"esriSMSCircle",size:6,color:c,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},y={type:"esriSLS",style:"esriSLSSolid",width:.75,color:c};p.defaultColor=c;p.defaultOutlineColor=[153,153,153,255];p.defaultPointSymbolJSON=z;p.defaultPolygonSymbolJSON={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}};p.defaultPolylineSymbolJSON=
y;p.defaultTextSymbolJSON={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0};p.errorPointSymbolJSON={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5};p.errorPolygonSymbolJSON={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null};p.errorPolylineSymbolJSON={type:"esriSLS",style:"esriSLSSolid",
color:[0,0,0,255],width:1.5};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/rest/support/FeatureSet":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../Graphic ../../core/jsonMap ../../core/JSONSupport ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/SpatialReference ../../geometry/support/jsonUtils ../../layers/support/Field".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k,n,h,f,b,a,d){const e=new r.JSONMap({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});r=function(u){function m(A){A=u.call(this,A)||this;A.displayFieldName=null;A.exceededTransferLimit=!1;A.features=[];A.fields=null;A.geometryType=null;A.hasM=!1;A.hasZ=!1;A.queryGeometry=null;A.spatialReference=null;return A}p._inheritsLoose(m,u);var x=m.prototype;
x.readFeatures=function(A,D){D=b.fromJSON(D.spatialReference);const B=[];for(let w=0;w<A.length;w++){var C=A[w];const E=y.fromJSON(C);C=C.geometry&&C.geometry.spatialReference;l.isSome(E.geometry)&&!C&&(E.geometry.spatialReference=D);B.push(E)}return B};x.writeGeometryType=function(A,D,B,C){if(A)e.write(A,D,B,C);else if({features:A}=this,A)for(const w of A)if(w&&l.isSome(w.geometry)){e.write(w.geometry.type,D,B,C);break}};x.readQueryGeometry=function(A,D){if(!A)return null;const B=!!A.spatialReference;
A=a.fromJSON(A);!B&&D.spatialReference&&(A.spatialReference=b.fromJSON(D.spatialReference));return A};x.writeSpatialReference=function(A,D){if(A)D.spatialReference=A.toJSON();else if({features:A}=this,A)for(const B of A)if(B&&l.isSome(B.geometry)&&B.geometry.spatialReference){D.spatialReference=B.geometry.spatialReference.toJSON();break}};x.toJSON=function(A){const D=this.write(null);if(D.features&&Array.isArray(A)&&0<A.length)for(let B=0;B<D.features.length;B++){const C=D.features[B];if(C.geometry){const w=
A&&A[B];C.geometry=w&&w.toJSON()||C.geometry}}return D};x.quantize=function(A){const {scale:[D,B],translate:[C,w]}=A,E=this.features,I=this._getQuantizationFunction(this.geometryType,F=>Math.round((F-C)/D),F=>Math.round((w-F)/B));for(let F=0,H=E.length;F<H;F++)I(l.unwrap(E[F].geometry))||(E.splice(F,1),F--,H--);this.transform=A;return this};x.unquantize=function(){const {geometryType:A,features:D,transform:B}=this;if(!B)return this;const {translate:[C,w],scale:[E,I]}=B,F=this._getHydrationFunction(A,
H=>H*E+C,H=>w-H*I);for(const {geometry:H}of D)l.isSome(H)&&F(H);this.transform=null;return this};x._quantizePoints=function(A,D,B){let C,w;const E=[];for(let F=0,H=A.length;F<H;F++){var I=A[F];if(0<F){const K=D(I[0]);I=B(I[1]);if(K!==C||I!==w)E.push([K-C,I-w]),C=K,w=I}else C=D(I[0]),w=B(I[1]),E.push([C,w])}return 0<E.length?E:null};x._getQuantizationFunction=function(A,D,B){return"point"===A?C=>{C.x=D(C.x);C.y=B(C.y);return C}:"polyline"===A||"polygon"===A?C=>{const w=a.isPolygon(C)?C.rings:C.paths,
E=[];for(let I=0,F=w.length;I<F;I++){const H=this._quantizePoints(w[I],D,B);H&&E.push(H)}return 0<E.length?(a.isPolygon(C)?C.rings=E:C.paths=E,C):null}:"multipoint"===A?C=>{const w=this._quantizePoints(C.points,D,B);return 0<w.length?(C.points=w,C):null}:"extent"===A?C=>C:null};x._getHydrationFunction=function(A,D,B){if("point"===A)return C=>{C.x=D(C.x);C.y=B(C.y)};if("polyline"===A||"polygon"===A)return C=>{C=a.isPolygon(C)?C.rings:C.paths;let w,E;for(let I=0,F=C.length;I<F;I++){const H=C[I];for(let K=
0,G=H.length;K<G;K++){const L=H[K];0<K?(w+=L[0],E+=L[1]):(w=L[0],E=L[1]);L[0]=D(w);L[1]=B(E)}}};if("extent"===A)return C=>{C.xmin=D(C.xmin);C.ymin=B(C.ymin);C.xmax=D(C.xmax);C.ymax=B(C.ymax)};if("multipoint"===A)return C=>{C=C.points;let w,E;for(let I=0,F=C.length;I<F;I++){const H=C[I];0<I?(w+=H[0],E+=H[1]):(w=H[0],E=H[1]);H[0]=D(w);H[1]=B(E)}}};return m}(t.JSONSupport);c.__decorate([v.property({type:String,json:{write:!0}})],r.prototype,"displayFieldName",void 0);c.__decorate([v.property({type:Boolean,
json:{write:{overridePolicy(u){return{enabled:u}}}}})],r.prototype,"exceededTransferLimit",void 0);c.__decorate([v.property({type:[y],json:{write:!0}})],r.prototype,"features",void 0);c.__decorate([n.reader("features")],r.prototype,"readFeatures",null);c.__decorate([v.property({type:[d],json:{write:!0}})],r.prototype,"fields",void 0);c.__decorate([v.property({type:"point multipoint polyline polygon extent mesh".split(" "),json:{read:{reader:e.read}}})],r.prototype,"geometryType",void 0);c.__decorate([f.writer("geometryType")],
r.prototype,"writeGeometryType",null);c.__decorate([v.property({type:Boolean,json:{write:{overridePolicy(u){return{enabled:u}}}}})],r.prototype,"hasM",void 0);c.__decorate([v.property({type:Boolean,json:{write:{overridePolicy(u){return{enabled:u}}}}})],r.prototype,"hasZ",void 0);c.__decorate([v.property({types:z.geometryTypes,json:{write:!0}})],r.prototype,"queryGeometry",void 0);c.__decorate([n.reader("queryGeometry")],r.prototype,"readQueryGeometry",null);c.__decorate([v.property({type:b,json:{write:!0}})],
r.prototype,"spatialReference",void 0);c.__decorate([f.writer("spatialReference")],r.prototype,"writeSpatialReference",null);c.__decorate([v.property({json:{write:!0}})],r.prototype,"transform",void 0);r=c.__decorate([h.subclass("esri.rest.support.FeatureSet")],r);r.prototype.toJSON.isDefaultToJSON=!0;(function(u){})(r||(r={}));return r})},"esri/Graphic":function(){define("./chunks/_rollupPluginBabelHelpers ./chunks/tslib.es6 ./geometry ./PopupTemplate ./symbols ./core/JSONSupport ./core/lang ./core/maybe ./core/uid ./core/accessorSupport/decorators/property ./core/accessorSupport/ensureType ./core/has ./core/Logger ./core/jsonMap ./core/accessorSupport/decorators/subclass ./geometry/support/jsonUtils".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k,n,h,f,b,a){var d;t=d=function(e){function u(...x){x=e.call(this,...x)||this;x.isAggregate=!1;x.layer=null;x.popupTemplate=null;x.sourceLayer=null;Object.defineProperty(p._assertThisInitialized(x),"uid",{value:q.generateUID(),configurable:!0});return x}p._inheritsLoose(u,e);var m=u.prototype;m.normalizeCtorArgs=function(x,A,D,B){return x&&!x.declaredClass?x:{geometry:x,symbol:A,attributes:D,popupTemplate:B}};m.getEffectivePopupTemplate=function(x=!1){if(this.popupTemplate)return this.popupTemplate;
for(const A of[this.sourceLayer,this.layer])if(A){if("popupTemplate"in A&&A.popupTemplate)return A.popupTemplate;if(x&&"defaultPopupTemplate"in A&&v.isSome(A.defaultPopupTemplate))return A.defaultPopupTemplate}return null};m.getAttribute=function(x){return this.attributes&&this.attributes[x]};m.setAttribute=function(x,A){if(this.attributes){const D=this.getAttribute(x);this.attributes[x]=A;this._notifyLayer("attributes",D,A,x)}else this.attributes={[x]:A},this._notifyLayer("attributes",void 0,A,x)};
m.getObjectId=function(){return this.sourceLayer?"objectIdField"in this.sourceLayer&&this.sourceLayer.objectIdField?this.getAttribute(this.sourceLayer.objectIdField):null:null};m.toJSON=function(){return{geometry:v.isSome(this.geometry)?this.geometry.toJSON():null,symbol:v.isSome(this.symbol)?this.symbol.toJSON():null,attributes:{...this.attributes},popupTemplate:this.popupTemplate&&this.popupTemplate.toJSON()}};m.clone=function(){return new d(this.cloneProperties())};m.notifyGeometryChanged=function(){this._notifyLayer("geometry",
this.geometry,this.geometry)};m.cloneProperties=function(){return{attributes:l.clone(this.attributes),geometry:l.clone(this.geometry),layer:this.layer,popupTemplate:this.popupTemplate&&this.popupTemplate.clone(),sourceLayer:this.sourceLayer,symbol:l.clone(this.symbol),visible:this.visible}};m._notifyLayer=function(x,A,D,B){this.layer&&"graphicChanged"in this.layer&&(A={graphic:this,property:x,oldValue:A,newValue:D},"attributes"===x&&(A.attributeName=B),this.layer.graphicChanged(A))};p._createClass(u,
[{key:"attributes",set:function(x){const A=this._get("attributes");A!==x&&(this._set("attributes",x),this._notifyLayer("attributes",A,x))}},{key:"geometry",set:function(x){const A=this._get("geometry");A!==x&&(this._set("geometry",x),this._notifyLayer("geometry",A,x))}},{key:"symbol",set:function(x){const A=this._get("symbol");A!==x&&(this._set("symbol",x),this._notifyLayer("symbol",A,x))}},{key:"visible",set:function(x){const A=this._get("visible");A!==x&&(this._set("visible",x),this._notifyLayer("visible",
A,x))}}]);return u}(t.JSONSupport);c.__decorate([g.property({value:null})],t.prototype,"attributes",null);c.__decorate([g.property({value:null,types:z.geometryTypes,json:{read:a.fromJSON}})],t.prototype,"geometry",null);c.__decorate([g.property({type:Boolean})],t.prototype,"isAggregate",void 0);c.__decorate([g.property()],t.prototype,"layer",void 0);c.__decorate([g.property({type:y})],t.prototype,"popupTemplate",void 0);c.__decorate([g.property()],t.prototype,"sourceLayer",void 0);c.__decorate([g.property({value:null,
types:r.symbolTypes})],t.prototype,"symbol",null);c.__decorate([g.property({type:Boolean,value:!0})],t.prototype,"visible",null);t=d=c.__decorate([b.subclass("esri.Graphic")],t);(t||(t={})).generateUID=q.generateUID;return t})},"esri/PopupTemplate":function(){define("./chunks/_rollupPluginBabelHelpers ./chunks/tslib.es6 ./core/Collection ./core/JSONSupport ./core/lang ./core/Logger ./core/promiseUtils ./core/accessorSupport/decorators/property ./core/accessorSupport/decorators/cast ./core/has ./core/jsonMap ./core/accessorSupport/decorators/reader ./core/accessorSupport/decorators/subclass ./core/accessorSupport/decorators/writer ./core/accessorSupport/ensureType ./layers/support/fieldUtils ./popup/content ./popup/ExpressionInfo ./popup/FieldInfo ./popup/LayerOptions ./popup/RelatedRecordsInfo ./popup/content/AttachmentsContent ./popup/content/Content ./popup/content/CustomContent ./popup/content/FieldsContent ./popup/content/MediaContent ./popup/content/TextContent ./popup/content/support/mediaInfoTypes ./support/actions/ActionBase ./support/actions/ActionButton ./support/actions/ActionToggle".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k,n,h,f,b,a,d,e,u,m,x,A,D,B,C,w,E,I,F,H,K){var G;g=z.ofType({key:"type",defaultKeyValue:"button",base:F,typeMap:{button:H,toggle:K}});const L={base:D,key:"type",typeMap:{media:w,custom:B,text:E,attachments:A,fields:C}},P=t.getLogger("esri.PopupTemplate"),R=["attachments","fields","media","text"];y=G=function(S){function M(){var W=S.apply(this,arguments)||this;W.actions=null;W.content="";W.expressionInfos=null;W.fieldInfos=null;W.layerOptions=null;W.lastEditInfoEnabled=
!0;W.outFields=null;W.overwriteActions=!1;W.returnGeometry=!1;W.title="";W.relatedRecordsInfo=null;return W}p._inheritsLoose(M,S);var V=M.prototype;V.castContent=function(W){if(Array.isArray(W))return W.map(ea=>b.ensureOneOfType(L,ea));if("string"===typeof W||"function"===typeof W||W instanceof HTMLElement||l.isPromiseLike(W))return W;P.error("content error","unsupported content value",{value:W});return null};V.readContent=function(W,ea){({popupElements:W}=ea);return Array.isArray(W)&&0<W.length?
this._readPopupInfoElements(ea):this._readPopupInfo(ea)};V.writeContent=function(W,ea,ka,sa){"string"===typeof W?ea.description=W:Array.isArray(W)&&(ea.popupElements=W.filter(ua=>-1!==R.indexOf(ua.type)).map(ua=>ua&&ua.toJSON(sa)),ea.popupElements.forEach(ua=>{"attachments"===ua.type?this._writeAttachmentContent(ea):"media"===ua.type?this._writeMediaContent(ua,ea):"text"===ua.type&&this._writeTextContent(ua,ea)}))};V.writeFieldInfos=function(W,ea,ka,sa){({content:ka}=this);ka=Array.isArray(ka)?ka:
null;if(W){const ua=ka?ka.filter(oa=>"fields"===oa.type):[],xa=ua.length&&ua.every(oa=>{var ra;return null==(ra=oa.fieldInfos)?void 0:ra.length});ea.fieldInfos=W.filter(Boolean).map(oa=>{oa=oa.toJSON(sa);xa&&(oa.visible=!1);return oa})}if(ka)for(const ua of ka)"fields"===ua.type&&this._writeFieldsContent(ua,ea)};V.writeLayerOptions=function(W,ea,ka,sa){ea[ka]=!W||null===W.showNoDataRecords&&null===W.returnTopmostRaster?null:W.toJSON(sa)};V.writeTitle=function(W,ea){ea.title=W||""};V.clone=function(){var {actions:W}=
this;W=W?r.clone(W.toArray()):[];return new G({actions:W,content:Array.isArray(this.content)?r.clone(this.content):this.content,expressionInfos:Array.isArray(this.expressionInfos)?r.clone(this.expressionInfos):null,fieldInfos:Array.isArray(this.fieldInfos)?r.clone(this.fieldInfos):null,layerOptions:this.layerOptions?r.clone(this.layerOptions):null,lastEditInfoEnabled:this.lastEditInfoEnabled,outFields:Array.isArray(this.outFields)?r.clone(this.outFields):null,overwriteActions:this.overwriteActions,
returnGeometry:this.returnGeometry,title:this.title,relatedRecordsInfo:this.relatedRecordsInfo?r.clone(this.relatedRecordsInfo):null})};V.collectRequiredFields=function(){var W=p._asyncToGenerator(function*(ea,ka){yield this._collectExpressionInfoFields(ea,ka,this.expressionInfos);a.collectFields(ea,ka,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)])});return function(ea,ka){return W.apply(this,arguments)}}();
V.getRequiredFields=function(){var W=p._asyncToGenerator(function*(ea){const ka=new Set;yield this.collectRequiredFields(ka,ea);return[...ka].sort()});return function(ea){return W.apply(this,arguments)}}();V._writeFieldsContent=function(W,ea){Array.isArray(W.fieldInfos)&&W.fieldInfos.length&&(W=r.clone(W.fieldInfos),Array.isArray(ea.fieldInfos)?W.forEach(ka=>{const sa=ea.fieldInfos.find(ua=>ua.fieldName.toLowerCase()===ka.fieldName.toLowerCase());sa?sa.visible=!0:ea.fieldInfos.push(ka)}):ea.fieldInfos=
W)};V._writeAttachmentContent=function(W){W.showAttachments||(W.showAttachments=!0)};V._writeTextContent=function(W,ea){!ea.description&&W.text&&(ea.description=W.text)};V._writeMediaContent=function(W,ea){Array.isArray(W.mediaInfos)&&W.mediaInfos.length&&(W=r.clone(W.mediaInfos),Array.isArray(ea.mediaInfos)?ea.mediaInfos=[...ea.mediaInfos,...W]:ea.mediaInfos=W)};V._readPopupInfoElements=function({description:W,mediaInfos:ea,popupElements:ka}){var sa=!1,ua=!1;return ka.map(xa=>{if("media"===xa.type)return xa.mediaInfos||
!ea||ua||(xa.mediaInfos=ea,ua=!0),w.fromJSON(xa);if("text"===xa.type)return xa.text||!W||sa||(xa.text=W,sa=!0),E.fromJSON(xa);if("attachments"===xa.type)return A.fromJSON(xa);if("fields"===xa.type)return C.fromJSON(xa)}).filter(Boolean)};V._readPopupInfo=function({description:W,mediaInfos:ea,showAttachments:ka}){const sa=[];W?sa.push(new E({text:W})):sa.push(new C);Array.isArray(ea)&&ea.length&&sa.push(w.fromJSON({mediaInfos:ea}));ka&&sa.push(A.fromJSON({displayType:"list"}));return sa.length?sa:
W};V._getContentElementFields=function(W){if(!W||"attachments"===W.type)return[];if("custom"===W.type)return W.outFields||[];if("fields"===W.type)return this._getFieldInfoFields(W.fieldInfos||this.fieldInfos);if("media"===W.type)return(W.mediaInfos||[]).reduce((ea,ka)=>[...ea,...this._getMediaInfoFields(ka)],[]);if("text"===W.type)return this._extractFieldNames(W.text)};V._getMediaInfoFields=function(W){const {caption:ea,title:ka,value:sa}=W,{fields:ua=[],normalizeField:xa,tooltipField:oa,sourceURL:ra,
linkURL:pa}=sa||{};W=[...this._extractFieldNames(ka),...this._extractFieldNames(ea),...this._extractFieldNames(ra),...this._extractFieldNames(pa),...ua];xa&&W.push(xa);oa&&W.push(oa);return W};V._getContentFields=function(W){return"string"===typeof W?this._extractFieldNames(W):Array.isArray(W)?W.reduce((ea,ka)=>[...ea,...this._getContentElementFields(ka)],[]):[]};V._collectExpressionInfoFields=function(){var W=p._asyncToGenerator(function*(ea,ka,sa){sa&&(yield Promise.all(sa.map(ua=>a.collectArcadeFieldNames(ea,
ka,ua.expression))))});return function(ea,ka,sa){return W.apply(this,arguments)}}();V._getFieldInfoFields=function(W){return W?W.filter(ea=>"undefined"===typeof ea.visible?!0:!!ea.visible).map(ea=>ea.fieldName).filter(ea=>-1===ea.indexOf("relationships/")&&-1===ea.indexOf("expression/")):[]};V._getActionsFields=function(W){return W?W.toArray().reduce((ea,ka)=>[...ea,...this._getActionFields(ka)],[]):[]};V._getActionFields=function(W){const {className:ea,title:ka,type:sa}=W;W="button"===sa||"toggle"===
sa?W.image:"";return[...this._extractFieldNames(ka),...this._extractFieldNames(ea),...this._extractFieldNames(W)]};V._getTitleFields=function(W){return"string"===typeof W?this._extractFieldNames(W):[]};V._extractFieldNames=function(W){if(!W||"string"!==typeof W)return[];W=W.match(/{[^}]*}/g);if(!W)return[];const ea=/\{(\w+):.+\}/;return(W=W.filter(ka=>!(0===ka.indexOf("{relationships/")||0===ka.indexOf("{expression/"))).map(ka=>ka.replace(ea,"{$1}")))?W.map(ka=>ka.slice(1,-1)):[]};return M}(y.JSONSupport);
c.__decorate([v.property({type:g})],y.prototype,"actions",void 0);c.__decorate([v.property()],y.prototype,"content",void 0);c.__decorate([q.cast("content")],y.prototype,"castContent",null);c.__decorate([n.reader("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments"])],y.prototype,"readContent",null);c.__decorate([f.writer("content",{popupElements:{type:z.ofType(d.persistableTypes)},showAttachments:{type:Boolean},mediaInfos:{type:z.ofType(I.types)},description:{type:String}})],
y.prototype,"writeContent",null);c.__decorate([v.property({type:[e],json:{write:!0}})],y.prototype,"expressionInfos",void 0);c.__decorate([v.property({type:[u]})],y.prototype,"fieldInfos",void 0);c.__decorate([f.writer("fieldInfos")],y.prototype,"writeFieldInfos",null);c.__decorate([v.property({type:m})],y.prototype,"layerOptions",void 0);c.__decorate([f.writer("layerOptions")],y.prototype,"writeLayerOptions",null);c.__decorate([v.property({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},
default:!0}})],y.prototype,"lastEditInfoEnabled",void 0);c.__decorate([v.property()],y.prototype,"outFields",void 0);c.__decorate([v.property()],y.prototype,"overwriteActions",void 0);c.__decorate([v.property()],y.prototype,"returnGeometry",void 0);c.__decorate([v.property({json:{type:String}})],y.prototype,"title",void 0);c.__decorate([f.writer("title")],y.prototype,"writeTitle",null);c.__decorate([v.property({type:x,json:{write:!0}})],y.prototype,"relatedRecordsInfo",void 0);return y=G=c.__decorate([h.subclass("esri.PopupTemplate")],
y)})},"esri/popup/content":function(){define("exports ./content/AttachmentsContent ./content/Content ./content/CustomContent ./content/FieldsContent ./content/MediaContent ./content/TextContent".split(" "),function(p,c,z,y,r,t,l){const v={base:null,key:"type",typeMap:{attachment:c,media:t,text:l,field:r}};p.AttachmentsContent=c;p.BaseContent=z;p.CustomContent=y;p.FieldsContent=r;p.MediaContent=t;p.TextContent=l;p.isContent=function(q){return q instanceof z};p.persistableTypes=v;Object.defineProperty(p,
"__esModule",{value:!0})})},"esri/popup/content/AttachmentsContent":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ./Content".split(" "),function(p,c,z,y,r,t,l,v,q){var g;y=g=function(k){function n(h){h=k.call(this,h)||this;h.description=null;h.displayType=null;h.title=null;h.type="attachments";
return h}p._inheritsLoose(n,k);n.prototype.clone=function(){return new g({description:this.description,displayType:this.displayType,title:this.title})};return n}(q);c.__decorate([z.property({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],y.prototype,"description",void 0);c.__decorate([z.property({type:["preview","list"],json:{write:!0}})],y.prototype,"displayType",void 0);c.__decorate([z.property({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],y.prototype,"title",void 0);
c.__decorate([z.property({type:["attachments"],readOnly:!0,json:{read:!1,write:!0}})],y.prototype,"type",void 0);return y=g=c.__decorate([v.subclass("esri.popup.content.AttachmentsContent")],y)})},"esri/popup/content/Content":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass".split(" "),
function(p,c,z,y,r,t,l,v,q){z=function(g){function k(n){n=g.call(this,n)||this;n.type=null;return n}p._inheritsLoose(k,g);return k}(z.JSONSupport);c.__decorate([y.property({type:["attachments","custom","fields","media","text"],readOnly:!0,json:{read:!1,write:!0}})],z.prototype,"type",void 0);return z=c.__decorate([q.subclass("esri.popup.content.Content")],z)})},"esri/popup/content/CustomContent":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/has ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ./Content".split(" "),
function(p,c,z,y,r,t,l,v,q,g){var k;r=k=function(n){function h(f){f=n.call(this,f)||this;f.creator=null;f.destroyer=null;f.outFields=null;f.type="custom";return f}p._inheritsLoose(h,n);h.prototype.clone=function(){return new k({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?z.clone(this.outFields):null})};return h}(g);c.__decorate([y.property()],r.prototype,"creator",void 0);c.__decorate([y.property()],r.prototype,"destroyer",void 0);c.__decorate([y.property()],
r.prototype,"outFields",void 0);c.__decorate([y.property({type:["custom"],readOnly:!0})],r.prototype,"type",void 0);return r=k=c.__decorate([q.subclass("esri.popup.content.CustomContent")],r)})},"esri/popup/content/FieldsContent":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/has ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../FieldInfo ./Content".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k,n){var h;r=h=function(f){function b(d){d=f.call(this,d)||this;d.description=null;d.fieldInfos=null;d.title=null;d.type="fields";return d}p._inheritsLoose(b,f);var a=b.prototype;a.writeFieldInfos=function(d,e){e.fieldInfos=d&&d.map(u=>u.toJSON())};a.clone=function(){return new h({description:this.description,fieldInfos:Array.isArray(this.fieldInfos)?z.clone(this.fieldInfos):null,title:this.title})};return b}(n);c.__decorate([y.property({json:{write:!0,origins:{"web-scene":{write:!1,
read:!1}}}})],r.prototype,"description",void 0);c.__decorate([y.property({type:[k]})],r.prototype,"fieldInfos",void 0);c.__decorate([g.writer("fieldInfos")],r.prototype,"writeFieldInfos",null);c.__decorate([y.property({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],r.prototype,"title",void 0);c.__decorate([y.property({type:["fields"],readOnly:!0,json:{read:!1,write:!0}})],r.prototype,"type",void 0);return r=h=c.__decorate([q.subclass("esri.popup.content.FieldsContent")],r)})},"esri/popup/FieldInfo":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/jsonMap ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/has ../core/Logger ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ./support/FieldInfoFormat".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k,n){var h;y=h=function(f){function b(a){a=f.call(this,a)||this;a.fieldName=null;a.format=null;a.isEditable=!1;a.label=null;a.stringFieldOption="text-box";a.statisticType=null;a.tooltip=null;a.visible=!0;return a}p._inheritsLoose(b,f);b.prototype.clone=function(){return new h({fieldName:this.fieldName,format:this.format?r.clone(this.format):null,isEditable:this.isEditable,label:this.label,stringFieldOption:this.stringFieldOption,statisticType:this.statisticType,tooltip:this.tooltip,
visible:this.visible})};return b}(y.JSONSupport);c.__decorate([t.property({type:String,json:{write:!0}})],y.prototype,"fieldName",void 0);c.__decorate([t.property({type:n,json:{write:!0}})],y.prototype,"format",void 0);c.__decorate([t.property({type:Boolean,json:{write:!0,default:!1}})],y.prototype,"isEditable",void 0);c.__decorate([t.property({type:String,json:{write:!0}})],y.prototype,"label",void 0);c.__decorate([g.enumeration(new z.JSONMap({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),
{default:"text-box"})],y.prototype,"stringFieldOption",void 0);c.__decorate([t.property({type:"count sum min max avg stddev var".split(" "),json:{write:!0}})],y.prototype,"statisticType",void 0);c.__decorate([t.property({type:String,json:{write:!0}})],y.prototype,"tooltip",void 0);c.__decorate([t.property({type:Boolean,json:{write:!0}})],y.prototype,"visible",void 0);return y=h=c.__decorate([k.subclass("esri.popup.FieldInfo")],y)})},"esri/popup/support/FieldInfoFormat":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/date ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../intl/date ../../intl/number".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k,n){var h;y=h=function(f){function b(d){d=f.call(this,d)||this;d.dateFormat=null;d.digitSeparator=!1;d.places=null;return d}p._inheritsLoose(b,f);var a=b.prototype;a.clone=function(){return new h({dateFormat:this.dateFormat,digitSeparator:this.digitSeparator,places:this.places})};a.format=function(d){return this.dateFormat?k.formatDate(d,k.convertDateFormatToIntlOptions(this.dateFormat)):n.formatNumber(d,n.convertNumberFormatToIntlOptions(this))};return b}(y.JSONSupport);
c.__decorate([q.enumeration(z.dictionary)],y.prototype,"dateFormat",void 0);c.__decorate([r.property({type:Boolean,json:{write:!0}})],y.prototype,"digitSeparator",void 0);c.__decorate([r.property({type:l.Integer,json:{write:!0}})],y.prototype,"places",void 0);return y=h=c.__decorate([g.subclass("esri.popup.support.FieldInfoFormat")],y)})},"esri/core/date":function(){define(["exports","./jsonMap"],function(p,c){const z={"short-date":"(datePattern: 'M/d/y', selector: 'date')","short-date-short-time":"(datePattern: 'M/d/y', timePattern: 'h:mm a', selector: 'date and time')",
"short-date-short-time-24":"(datePattern: 'M/d/y', timePattern: 'H:mm', selector: 'date and time')","short-date-long-time":"(datePattern: 'M/d/y', timePattern: 'h:mm:ss a', selector: 'date and time')","short-date-long-time-24":"(datePattern: 'M/d/y', timePattern: 'H:mm:ss', selector: 'date and time')","short-date-le":"(datePattern: 'd/M/y', selector: 'date')","short-date-le-short-time":"(datePattern: 'd/M/y', timePattern: 'h:mm a', selector: 'date and time')","short-date-le-short-time-24":"(datePattern: 'd/M/y', timePattern: 'H:mm', selector: 'date and time')",
"short-date-le-long-time":"(datePattern: 'd/M/y', timePattern: 'h:mm:ss a', selector: 'date and time')","short-date-le-long-time-24":"(datePattern: 'd/M/y', timePattern: 'H:mm:ss', selector: 'date and time')","long-month-day-year":"(datePattern: 'MMMM d, y', selector: 'date')","long-month-day-year-short-time":"(datePattern: 'MMMM d, y', timePattern: 'h:mm a', selector: 'date and time')","long-month-day-year-short-time-24":"(datePattern: 'MMMM d, y', timePattern: 'H:mm', selector: 'date and time')",
"long-month-day-year-long-time":"(datePattern: 'MMMM d, y', timePattern: 'h:mm:ss a', selector: 'date and time')","long-month-day-year-long-time-24":"(datePattern: 'MMMM d, y', timePattern: 'H:mm:ss', selector: 'date and time')","day-short-month-year":"(datePattern: 'd MMM y', selector: 'date')","day-short-month-year-short-time":"(datePattern: 'd MMM y', timePattern: 'h:mm a', selector: 'date and time')","day-short-month-year-short-time-24":"(datePattern: 'd MMM y', timePattern: 'H:mm', selector: 'date and time')",
"day-short-month-year-long-time":"(datePattern: 'd MMM y', timePattern: 'h:mm:ss a', selector: 'date and time')","day-short-month-year-long-time-24":"(datePattern: 'd MMM y', timePattern: 'H:mm:ss', selector: 'date and time')","long-date":"(datePattern: 'EEEE, MMMM d, y', selector: 'date')","long-date-short-time":"(datePattern: 'EEEE, MMMM d, y', timePattern: 'h:mm a', selector: 'date and time')","long-date-short-time-24":"(datePattern: 'EEEE, MMMM d, y', timePattern: 'H:mm', selector: 'date and time')",
"long-date-long-time":"(datePattern: 'EEEE, MMMM d, y', timePattern: 'h:mm:ss a', selector: 'date and time')","long-date-long-time-24":"(datePattern: 'EEEE, MMMM d, y', timePattern: 'H:mm:ss', selector: 'date and time')","long-month-year":"(datePattern: 'MMMM y', selector: 'date')","short-month-year":"(datePattern: 'MMM y', selector: 'date')",year:"(datePattern: 'y', selector: 'date')"};c=c.strict()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",
shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",
longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",
longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"});const y=c.toJSON.bind(c),r=c.fromJSON.bind(c);p.dictionary=c;p.formats=z;p.fromJSON=r;p.getFormat=function(t){return z[t]};p.toJSON=y;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/popup/content/MediaContent":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/has ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ./BarChartMediaInfo ./ColumnChartMediaInfo ./Content ./ImageMediaInfo ./LineChartMediaInfo ./PieChartMediaInfo ./support/mediaInfoTypes".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k,n,h,f,b,a,d,e){var u;r=u=function(m){function x(D){D=m.call(this,D)||this;D.activeMediaInfoIndex=null;D.description=null;D.mediaInfos=null;D.title=null;D.type="media";return D}p._inheritsLoose(x,m);var A=x.prototype;A.readMediaInfos=function(D){return D&&D.map(B=>{if("image"===B.type)return b.fromJSON(B);if("barchart"===B.type)return n.fromJSON(B);if("columnchart"===B.type)return h.fromJSON(B);if("linechart"===B.type)return a.fromJSON(B);if("piechart"===B.type)return d.fromJSON(B)}).filter(Boolean)};
A.writeMediaInfos=function(D,B){B.mediaInfos=D&&D.map(C=>C.toJSON())};A.clone=function(){return new u({activeMediaInfoIndex:this.activeMediaInfoIndex,description:this.description,mediaInfos:this.mediaInfos?z.clone(this.mediaInfos):null,title:this.title})};return x}(f);c.__decorate([y.property()],r.prototype,"activeMediaInfoIndex",void 0);c.__decorate([y.property({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],r.prototype,"description",void 0);c.__decorate([y.property({types:[e.types]})],
r.prototype,"mediaInfos",void 0);c.__decorate([q.reader("mediaInfos")],r.prototype,"readMediaInfos",null);c.__decorate([k.writer("mediaInfos")],r.prototype,"writeMediaInfos",null);c.__decorate([y.property({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],r.prototype,"title",void 0);c.__decorate([y.property({type:["media"],readOnly:!0,json:{read:!1,write:!0}})],r.prototype,"type",void 0);return r=u=c.__decorate([g.subclass("esri.popup.content.MediaContent")],r)})},"esri/popup/content/BarChartMediaInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ./mixins/ChartMediaInfo ./support/chartMediaInfoUtils".split(" "),
function(p,c,z,y,r,t,l,v,q,g){var k;y=k=function(n){function h(f){f=n.call(this,f)||this;f.type="bar-chart";return f}p._inheritsLoose(h,n);h.prototype.clone=function(){return new k({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})};return h}(q);c.__decorate([z.property({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:g.chartTypeKebabDict.write}})],y.prototype,"type",void 0);return y=k=c.__decorate([v.subclass("esri.popup.content.BarChartMediaInfo")],
y)})},"esri/popup/content/mixins/ChartMediaInfo":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/Logger ../../../core/jsonMap ../../../core/accessorSupport/decorators/subclass ./MediaInfo ../support/ChartMediaInfoValue".split(" "),function(p,c,z,y,r,t,l,v,q,g){y=function(k){function n(h){h=k.call(this,h)||this;h.type=null;h.value=null;return h}
p._inheritsLoose(n,k);return n}(q);c.__decorate([z.property({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],y.prototype,"type",void 0);c.__decorate([z.property({type:g,json:{write:!0}})],y.prototype,"value",void 0);return y=c.__decorate([v.subclass("esri.popup.content.mixins.ChartMediaInfo")],y)})},"esri/popup/content/mixins/MediaInfo":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/Logger ../../../core/jsonMap ../../../core/accessorSupport/decorators/subclass".split(" "),
function(p,c,z,y,r,t,l,v,q){z=function(g){function k(n){n=g.call(this,n)||this;n.altText=null;n.caption="";n.title="";n.type=null;return n}p._inheritsLoose(k,g);return k}(z.JSONSupport);c.__decorate([y.property({type:String,json:{write:!0}})],z.prototype,"altText",void 0);c.__decorate([y.property({type:String,json:{write:!0}})],z.prototype,"caption",void 0);c.__decorate([y.property({type:String,json:{write:!0}})],z.prototype,"title",void 0);c.__decorate([y.property({type:["image","bar-chart","column-chart",
"line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],z.prototype,"type",void 0);return z=c.__decorate([q.subclass("esri.popup.content.mixins.MediaInfo")],z)})},"esri/popup/content/support/ChartMediaInfoValue":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/lang ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/has ../../../core/Logger ../../../core/jsonMap ../../../core/accessorSupport/decorators/subclass ./ChartMediaInfoValueSeries".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k){var n;z=n=function(h){function f(b){b=h.call(this,b)||this;b.fields=[];b.normalizeField=null;b.series=[];b.tooltipField=null;return b}p._inheritsLoose(f,h);f.prototype.clone=function(){return new n({fields:y.clone(this.fields),normalizeField:this.normalizeField,tooltipField:this.tooltipField})};return f}(z.JSONSupport);c.__decorate([r.property({type:[String],json:{write:!0}})],z.prototype,"fields",void 0);c.__decorate([r.property({type:String,json:{write:!0}})],z.prototype,
"normalizeField",void 0);c.__decorate([r.property({type:[k],json:{read:!1}})],z.prototype,"series",void 0);c.__decorate([r.property({type:String,json:{write:!0}})],z.prototype,"tooltipField",void 0);return z=n=c.__decorate([g.subclass("esri.popup.content.support.ChartMediaInfoValue")],z)})},"esri/popup/content/support/ChartMediaInfoValueSeries":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/aliasOf ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/Logger ../../../core/jsonMap ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/decorators/subclass".split(" "),
function(p,c,z,y,r,t,l,v,q,g){var k;z=k=function(n){function h(f){f=n.call(this,f)||this;f.tooltip=null;f.value=null;f.x=null;f.y=null;return f}p._inheritsLoose(h,n);h.prototype.clone=function(){return new k({tooltip:this.tooltip,value:this.value})};return h}(z);c.__decorate([q.property()],z.prototype,"tooltip",void 0);c.__decorate([q.property()],z.prototype,"value",void 0);c.__decorate([y.aliasOf("value")],z.prototype,"x",void 0);c.__decorate([y.aliasOf("tooltip")],z.prototype,"y",void 0);return z=
k=c.__decorate([g.subclass("esri.popup.content.support.ChartMediaInfoValueSeries")],z)})},"esri/core/accessorSupport/decorators/aliasOf":function(){define(["exports","./property"],function(p,c){p.aliasOf=function(z,y){return c.property({aliasOf:y?{...y,source:z}:z})};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/popup/content/support/chartMediaInfoUtils":function(){define(["exports","../../../core/jsonMap"],function(p,c){c=c.strict()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",
piechart:"pie-chart"});p.chartTypeKebabDict=c;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/popup/content/ColumnChartMediaInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ./mixins/ChartMediaInfo ./support/chartMediaInfoUtils".split(" "),function(p,c,z,y,r,t,l,v,q,g){var k;
y=k=function(n){function h(f){f=n.call(this,f)||this;f.type="column-chart";return f}p._inheritsLoose(h,n);h.prototype.clone=function(){return new k({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})};return h}(q);c.__decorate([z.property({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:g.chartTypeKebabDict.write}})],y.prototype,"type",void 0);return y=k=c.__decorate([v.subclass("esri.popup.content.ColumnChartMediaInfo")],
y)})},"esri/popup/content/ImageMediaInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ./mixins/MediaInfo ./support/ImageMediaInfoValue".split(" "),function(p,c,z,y,r,t,l,v,q,g){var k;y=k=function(n){function h(f){f=n.call(this,f)||this;f.refreshInterval=null;f.type="image";f.value=
null;return f}p._inheritsLoose(h,n);h.prototype.clone=function(){return new k({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:this.value?this.value.clone():null})};return h}(q);c.__decorate([z.property({type:Number,json:{write:!0}})],y.prototype,"refreshInterval",void 0);c.__decorate([z.property({type:["image"],readOnly:!0,json:{read:!1,write:!0}})],y.prototype,"type",void 0);c.__decorate([z.property({type:g,json:{write:!0}})],y.prototype,"value",
void 0);return y=k=c.__decorate([v.subclass("esri.popup.content.ImageMediaInfo")],y)})},"esri/popup/content/support/ImageMediaInfoValue":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/Logger ../../../core/jsonMap ../../../core/accessorSupport/decorators/subclass".split(" "),function(p,c,z,y,r,t,l,v,q){var g;z=g=
function(k){function n(h){h=k.call(this,h)||this;h.linkURL=null;h.sourceURL=null;return h}p._inheritsLoose(n,k);n.prototype.clone=function(){return new g({linkURL:this.linkURL,sourceURL:this.sourceURL})};return n}(z.JSONSupport);c.__decorate([y.property({type:String,json:{write:!0}})],z.prototype,"linkURL",void 0);c.__decorate([y.property({type:String,json:{write:!0}})],z.prototype,"sourceURL",void 0);return z=g=c.__decorate([q.subclass("esri.popup.content.support.ImageMediaInfoValue")],z)})},"esri/popup/content/LineChartMediaInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ./mixins/ChartMediaInfo ./support/chartMediaInfoUtils".split(" "),
function(p,c,z,y,r,t,l,v,q,g){var k;y=k=function(n){function h(f){f=n.call(this,f)||this;f.type="line-chart";return f}p._inheritsLoose(h,n);h.prototype.clone=function(){return new k({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})};return h}(q);c.__decorate([z.property({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:g.chartTypeKebabDict.write}})],y.prototype,"type",void 0);return y=k=c.__decorate([v.subclass("esri.popup.content.LineChartMediaInfo")],
y)})},"esri/popup/content/PieChartMediaInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ./mixins/ChartMediaInfo ./support/chartMediaInfoUtils".split(" "),function(p,c,z,y,r,t,l,v,q,g){var k;y=k=function(n){function h(f){f=n.call(this,f)||this;f.type="pie-chart";return f}p._inheritsLoose(h,
n);h.prototype.clone=function(){return new k({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})};return h}(q);c.__decorate([z.property({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:g.chartTypeKebabDict.write}})],y.prototype,"type",void 0);return y=k=c.__decorate([v.subclass("esri.popup.content.PieChartMediaInfo")],y)})},"esri/popup/content/support/mediaInfoTypes":function(){define("exports ../BarChartMediaInfo ../ColumnChartMediaInfo ../ImageMediaInfo ../LineChartMediaInfo ../PieChartMediaInfo ../mixins/MediaInfo".split(" "),
function(p,c,z,y,r,t,l){c={base:l,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":c,"column-chart":z,"line-chart":r,"pie-chart":t,image:y}};p.default=c;p.types=c;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/popup/content/TextContent":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ./Content".split(" "),
function(p,c,z,y,r,t,l,v,q){var g;y=g=function(k){function n(h){h=k.call(this,h)||this;h.text=null;h.type="text";return h}p._inheritsLoose(n,k);n.prototype.clone=function(){return new g({text:this.text})};return n}(q);c.__decorate([z.property({type:String,json:{write:!0}})],y.prototype,"text",void 0);c.__decorate([z.property({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],y.prototype,"type",void 0);return y=g=c.__decorate([v.subclass("esri.popup.content.TextContent")],y)})},"esri/popup/ExpressionInfo":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/jsonMap ../core/accessorSupport/decorators/subclass".split(" "),
function(p,c,z,y,r,t,l,v,q){var g;z=g=function(k){function n(h){h=k.call(this,h)||this;h.name=null;h.title=null;h.expression=null;h.returnType=null;return h}p._inheritsLoose(n,k);n.prototype.clone=function(){return new g({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})};return n}(z.JSONSupport);c.__decorate([y.property({type:String,json:{write:!0}})],z.prototype,"name",void 0);c.__decorate([y.property({type:String,json:{write:!0}})],z.prototype,"title",void 0);
c.__decorate([y.property({type:String,json:{write:!0}})],z.prototype,"expression",void 0);c.__decorate([y.property({type:["string","number"],json:{write:!0}})],z.prototype,"returnType",void 0);return z=g=c.__decorate([q.subclass("esri.popup.ExpressionInfo")],z)})},"esri/popup/LayerOptions":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/jsonMap ../core/accessorSupport/decorators/subclass".split(" "),
function(p,c,z,y,r,t,l,v,q){var g;z=g=function(k){function n(h){h=k.call(this,h)||this;h.returnTopmostRaster=null;h.showNoDataRecords=null;return h}p._inheritsLoose(n,k);n.prototype.clone=function(){return new g({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})};return n}(z.JSONSupport);c.__decorate([y.property({type:Boolean,json:{write:!0}})],z.prototype,"returnTopmostRaster",void 0);c.__decorate([y.property({type:Boolean,json:{write:!0}})],z.prototype,"showNoDataRecords",
void 0);return z=g=c.__decorate([q.subclass("esri.popup.LayerOptions")],z)})},"esri/popup/RelatedRecordsInfo":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/has ../core/Logger ../core/jsonMap ../core/accessorSupport/decorators/subclass ./support/RelatedRecordsInfoFieldOrder".split(" "),function(p,c,z,y,r,t,l,v,q,g,k){var n;z=n=function(h){function f(b){b=
h.call(this,b)||this;b.showRelatedRecords=null;b.orderByFields=null;return b}p._inheritsLoose(f,h);f.prototype.clone=function(){return new n({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?y.clone(this.orderByFields):null})};return f}(z.JSONSupport);c.__decorate([r.property({type:Boolean,json:{write:!0}})],z.prototype,"showRelatedRecords",void 0);c.__decorate([r.property({type:[k],json:{write:!0}})],z.prototype,"orderByFields",void 0);return z=n=c.__decorate([g.subclass("esri.popup.RelatedRecordsInfo")],
z)})},"esri/popup/support/RelatedRecordsInfoFieldOrder":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass".split(" "),function(p,c,z,y,r,t,l,v,q){var g;z=g=function(k){function n(h){h=k.call(this,h)||this;h.field=null;h.order=null;return h}p._inheritsLoose(n,k);n.prototype.clone=
function(){return new g({field:this.field,order:this.order})};return n}(z.JSONSupport);c.__decorate([y.property({type:String,json:{write:!0}})],z.prototype,"field",void 0);c.__decorate([y.property({type:["asc","desc"],json:{write:!0}})],z.prototype,"order",void 0);return z=g=c.__decorate([q.subclass("esri.popup.support.RelatedRecordsInfoFieldOrder")],z)})},"esri/support/actions/ActionBase":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Identifiable ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass".split(" "),
function(p,c,z,y,r,t,l,v,q,g){var k;z=k=function(n){function h(f){f=n.call(this,f)||this;f.active=!1;f.className=null;f.disabled=!1;f.id=null;f.indicator=!1;f.title=null;f.type=null;f.visible=!0;return f}p._inheritsLoose(h,n);h.prototype.clone=function(){return new k({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})};return h}(y.IdentifiableMixin(z));c.__decorate([r.property()],z.prototype,"active",void 0);
c.__decorate([r.property()],z.prototype,"className",void 0);c.__decorate([r.property()],z.prototype,"disabled",void 0);c.__decorate([r.property()],z.prototype,"id",void 0);c.__decorate([r.property()],z.prototype,"indicator",void 0);c.__decorate([r.property()],z.prototype,"title",void 0);c.__decorate([r.property()],z.prototype,"type",void 0);c.__decorate([r.property()],z.prototype,"visible",void 0);return z=k=c.__decorate([g.subclass("esri.support.actions.ActionBase")],z)})},"esri/core/Identifiable":function(){define(["exports",
"../chunks/_rollupPluginBabelHelpers","../chunks/tslib.es6","./accessorSupport/decorators/subclass"],function(p,c,z,y){let r=0;const t=l=>{l=function(v){function q(...g){g=v.call(this,...g)||this;Object.defineProperty(c._assertThisInitialized(g),"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+r++});return g}c._inheritsLoose(q,v);return q}(l);return l=z.__decorate([y.subclass("esri.core.Identifiable")],l)};p.Identifiable=function(l){function v(){return l.apply(this,arguments)||
this}c._inheritsLoose(v,l);return v}(t(function(){return function(){}}()));p.Identifiable=z.__decorate([y.subclass("esri.core.Identifiable")],p.Identifiable);p.IdentifiableMixin=t;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/support/actions/ActionButton":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ./ActionBase".split(" "),
function(p,c,z,y,r,t,l,v,q){var g;y=g=function(k){function n(h){h=k.call(this,h)||this;h.image=null;h.type="button";return h}p._inheritsLoose(n,k);n.prototype.clone=function(){return new g({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})};return n}(q);c.__decorate([z.property()],y.prototype,"image",void 0);return y=g=c.__decorate([v.subclass("esri.support.Action.ActionButton")],y)})},"esri/support/actions/ActionToggle":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ./ActionBase".split(" "),
function(p,c,z,y,r,t,l,v,q){var g;y=g=function(k){function n(h){h=k.call(this,h)||this;h.image=null;h.type="toggle";h.value=!1;return h}p._inheritsLoose(n,k);n.prototype.clone=function(){return new g({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})};return n}(q);c.__decorate([z.property()],y.prototype,"image",void 0);c.__decorate([z.property()],y.prototype,"value",void 0);
return y=g=c.__decorate([v.subclass("esri.support.Action.ActionToggle")],y)})},"esri/symbols":function(){define("exports ./core/accessorSupport/ensureType ./core/accessorSupport/extensions/serializableProperty/reader ./symbols/CIMSymbol ./symbols/ExtrudeSymbol3DLayer ./symbols/FillSymbol ./symbols/FillSymbol3DLayer ./symbols/Font ./symbols/IconSymbol3DLayer ./symbols/LabelSymbol3D ./symbols/LineSymbol3D ./symbols/LineSymbol3DLayer ./symbols/MarkerSymbol ./symbols/MeshSymbol3D ./symbols/ObjectSymbol3DLayer ./symbols/PathSymbol3DLayer ./symbols/PictureFillSymbol ./symbols/PictureMarkerSymbol ./symbols/PointSymbol3D ./symbols/PolygonSymbol3D ./symbols/SimpleFillSymbol ./symbols/SimpleLineSymbol ./symbols/SimpleMarkerSymbol ./symbols/Symbol ./symbols/Symbol3D ./symbols/Symbol3DLayer ./symbols/TextSymbol ./symbols/TextSymbol3DLayer ./symbols/WaterSymbol3DLayer ./symbols/WebStyleSymbol ./symbols/callouts/LineCallout3D ./chunks/LineCallout3DBorder ./symbols/support/Symbol3DVerticalOffset".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k,n,h,f,b,a,d,e,u,m,x,A,D,B,C,w,E,I,F,H,K,G,L){const P={base:B,key:"type",typeMap:{"simple-fill":x,"picture-fill":d,"picture-marker":e,"simple-line":A,"simple-marker":D,text:E,"label-3d":g,"line-3d":k,"mesh-3d":f,"point-3d":u,"polygon-3d":m,"web-style":H,cim:y},errorContext:"symbol"},R={base:B,key:"type",typeMap:{"picture-marker":e,"simple-marker":D,text:E,"web-style":H,cim:y},errorContext:"symbol"};z=z.createTypeReader({types:P});const S={base:B,key:"type",typeMap:{"simple-fill":x,
"picture-fill":d,"picture-marker":e,"simple-line":A,"simple-marker":D,text:E,"line-3d":k,"mesh-3d":f,"point-3d":u,"polygon-3d":m,"web-style":H,cim:y},errorContext:"symbol"},M={base:B,key:"type",typeMap:{text:E,"label-3d":g},errorContext:"symbol"},V={base:B,key:"type",typeMap:{"label-3d":g,"line-3d":k,"mesh-3d":f,"point-3d":u,"polygon-3d":m,"web-style":H},errorContext:"symbol"},W={base:B,key:"type",typeMap:{"line-3d":k,"mesh-3d":f,"point-3d":u,"polygon-3d":m,"web-style":H},errorContext:"symbol"},ea=
{base:B,key:"type",typeMap:{"label-3d":g},errorContext:"symbol"};c=c.ensureOneOfType(P);p.CIMSymbol=y;p.ExtrudeSymbol3DLayer=r;p.BaseFillSymbol=t;p.FillSymbol3DLayer=l;p.Font=v;p.IconSymbol3DLayer=q;p.LabelSymbol3D=g;p.LineSymbol3D=k;p.LineSymbol3DLayer=n;p.BaseMarkerSymbol=h;p.MeshSymbol3D=f;p.ObjectSymbol3DLayer=b;p.PathSymbol3DLayer=a;p.PictureFillSymbol=d;p.PictureMarkerSymbol=e;p.PointSymbol3D=u;p.PolygonSymbol3D=m;p.SimpleFillSymbol=x;p.SimpleLineSymbol=A;p.SimpleMarkerSymbol=D;p.BaseSymbol=
B;p.BaseSymbol3D=C;p.BaseSymbol3DLayer=w;p.TextSymbol=E;p.TextSymbol3DLayer=I;p.WaterSymbol3DLayer=F;p.WebStyleSymbol=H;p.LineCallout3D=K;p.LineCallout3DBorder=G.LineCallout3DBorder;Object.defineProperty(p,"Symbol3DVerticalOffset",{enumerable:!0,get:function(){return L.Symbol3DVerticalOffset}});p.ensureType=c;p.isSymbol=function(ka){return ka instanceof B};p.isSymbol2D=function(ka){if(!ka)return!1;switch(ka.type){case "picture-fill":case "picture-marker":case "simple-fill":case "simple-line":case "simple-marker":case "text":case "cim":return!0;
default:return!1}};p.isSymbol3D=function(ka){if(!ka)return!1;switch(ka.type){case "label-3d":case "line-3d":case "mesh-3d":case "point-3d":case "polygon-3d":return!0;default:return!1}};p.readSymbol=z;p.symbolTypes=P;p.symbolTypes3D=V;p.symbolTypesCluster=R;p.symbolTypesLabel=M;p.symbolTypesLabel3D=ea;p.symbolTypesRenderer=S;p.symbolTypesRenderer3D=W;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/symbols/CIMSymbol":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/lang ../core/string ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/has ../core/Logger ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ../layers/support/fieldUtils ./Symbol".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k,n,h,f){var b;t=b=function(a){function d(u){u=a.call(this,u)||this;u.data=null;u.type="cim";return u}p._inheritsLoose(d,a);var e=d.prototype;e.readData=function(u,m){return m};e.writeData=function(u,m){if(u)for(const x in u)m[x]=u[x]};e.collectRequiredFields=function(){var u=p._asyncToGenerator(function*(m,x){if("CIMSymbolReference"===this.data.type){var A=this.data.primitiveOverrides;A&&(A=A.map(D=>h.collectArcadeFieldNames(m,x,D.valueExpressionInfo.expression)),yield Promise.all(A))}});
return function(m,x){return u.apply(this,arguments)}}();e.clone=function(){return new b({data:z.clone(this.data)})};e.hash=function(){return y.numericHash(JSON.stringify(this.data)).toString()};return d}(f);c.__decorate([r.property({json:{write:!1}})],t.prototype,"color",void 0);c.__decorate([r.property({json:{write:!0}})],t.prototype,"data",void 0);c.__decorate([g.reader("data",["symbol"])],t.prototype,"readData",null);c.__decorate([n.writer("data")],t.prototype,"writeData",null);c.__decorate([q.enumeration({CIMSymbolReference:"cim"},
{readOnly:!0})],t.prototype,"type",void 0);return t=b=c.__decorate([k.subclass("esri.symbols.CIMSymbol")],t)})},"esri/symbols/Symbol":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Color ../core/jsonMap ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass".split(" "),function(p,c,z,y,r,t,l,v,q,g,k){y=new y.JSONMap({esriSMS:"simple-marker",
esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let n=0;r=function(h){function f(a){a=h.call(this,a)||this;a.id=`sym${n++}`;a.type=null;return a}p._inheritsLoose(f,h);var b=f.prototype;b.readColor=function(a){return a&&null!=a[0]?[a[0],
a[1],a[2],a[3]/255]:a};b.collectRequiredFields=function(){var a=p._asyncToGenerator(function*(d,e){});return function(d,e){return a.apply(this,arguments)}}();b.hash=function(){return JSON.stringify(this.toJSON())};b.clone=function(){};p._createClass(f,[{key:"color",set:function(a){this._set("color",a)}}]);return f}(r.JSONSupport);c.__decorate([t.property({type:y.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:y.write}}})],r.prototype,"type",void 0);c.__decorate([t.property({type:z,
value:new z([0,0,0,1]),json:{write:{allowNull:!0}}})],r.prototype,"color",null);c.__decorate([g.reader("color")],r.prototype,"readColor",null);return r=c.__decorate([k.subclass("esri.symbols.Symbol")],r)})},"esri/symbols/ExtrudeSymbol3DLayer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/maybe ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ./Symbol3DLayer ./edges/utils ./support/Symbol3DMaterial".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k,n){var h;r=h=function(f){function b(a){a=f.call(this,a)||this;a.type="extrude";a.size=1;a.material=null;a.castShadows=!0;a.edges=null;return a}p._inheritsLoose(b,f);b.prototype.clone=function(){return new h({edges:this.edges&&this.edges.clone(),enabled:this.enabled,material:z.isSome(this.material)?this.material.clone():null,castShadows:this.castShadows,size:this.size})};return b}(g);c.__decorate([v.enumeration({Extrude:"extrude"},{readOnly:!0})],r.prototype,"type",void 0);
c.__decorate([y.property({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],r.prototype,"size",void 0);c.__decorate([y.property({type:n["default"],json:{write:!0}})],r.prototype,"material",void 0);c.__decorate([y.property({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],r.prototype,"castShadows",void 0);c.__decorate([y.property(k.symbol3dEdgesProperty)],r.prototype,"edges",void 0);return r=h=c.__decorate([q.subclass("esri.symbols.ExtrudeSymbol3DLayer")],r)})},"esri/symbols/Symbol3DLayer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/jsonMap ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer".split(" "),
function(p,c,z,y,r,t,l,v,q,g){z=function(k){function n(h){h=k.call(this,h)||this;h.enabled=!0;h.type=null;return h}p._inheritsLoose(n,k);n.prototype.writeEnabled=function(h,f,b){h||(f[b]=h)};return n}(z.JSONSupport);c.__decorate([y.property({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],z.prototype,"enabled",void 0);c.__decorate([g.writer("enabled")],z.prototype,"writeEnabled",null);c.__decorate([y.property({type:"icon object line path fill water extrude text".split(" "),readOnly:!0})],
z.prototype,"type",void 0);return z=c.__decorate([q.subclass("esri.symbols.Symbol3DLayer")],z)})},"esri/symbols/edges/utils":function(){define(["exports","./Edges3D","./SketchEdges3D","./SolidEdges3D"],function(p,c,z,y){p.symbol3dEdgesProperty={types:{key:"type",base:c,typeMap:{solid:y,sketch:z}},json:{write:!0}};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/symbols/edges/Edges3D":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Color ../../core/JSONSupport ../../core/lang ../../core/screenUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/has ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../support/materialUtils".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k,n,h){y=function(f){function b(d){d=f.call(this,d)||this;d.color=new z([0,0,0,1]);d.extensionLength=0;d.size=t.px2pt(1);return d}p._inheritsLoose(b,f);var a=b.prototype;a.clone=function(){};a.cloneProperties=function(){return{color:r.clone(this.color),size:this.size,extensionLength:this.extensionLength}};return b}(y.JSONSupport);c.__decorate([l.property({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],y.prototype,"type",void 0);c.__decorate([l.property(h.colorAndTransparencyProperty)],
y.prototype,"color",void 0);c.__decorate([l.property({...h.screenSizeProperty,json:{write:{overridePolicy(f){return{enabled:!!f}}}}})],y.prototype,"extensionLength",void 0);c.__decorate([l.property(h.screenSizeProperty)],y.prototype,"size",void 0);return y=c.__decorate([n.subclass("esri.symbols.edges.Edges3D")],y)})},"esri/core/screenUtils":function(){define(["exports"],function(p){function c(y){return y?72*y/96:0}const z=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i;p.castRenderScreenPointArray=function(y){return y};
p.castRenderScreenPointArray3=function(y){return y};p.castScreenPointArray=function(y){return y};p.createRenderScreenPoint=function(y=0,r=0){return{x:y,y:r}};p.createRenderScreenPointArray=function(y=0,r=0){return[y,r]};p.createRenderScreenPointArray3=function(y=0,r=0,t=0){return[y,r,t]};p.createScreenPoint=function(y=0,r=0){return{x:y,y:r}};p.createScreenPointArray=function(y=0,r=0){return[y,r]};p.pt2px=function(y){return y?y/72*96:0};p.px2pt=c;p.screenPointArrayToObject=function(y,r){return r?(r.x=
y[0],r.y=y[1],r):{x:y[0],y:y[1]}};p.screenPointObjectToArray=function(y,r){return r?(r[0]=y.x,r[1]=y.y,2<r.length&&(r[2]=0),r):[y.x,y.y]};p.toPt=function(y){if("string"===typeof y){if(z.test(y)){var r=y.match(z),t=Number(r[1]);r=r[3]&&r[3].toLowerCase();y="-"===y.charAt(0);t="px"===r?c(t):t;return y?-t:t}console.warn("screenUtils.toPt: input not recognized!");return null}return y};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/symbols/support/materialUtils":function(){define(["exports",
"../../Color","../../core/screenUtils","../../core/accessorSupport/ensureType","../../webdoc/support/opacityUtils"],function(p,c,z,y,r){const t={type:Number,cast:z.toPt,json:{write:!0}},l={type:[Number],cast(v){return null!=v?v:Array.isArray(v)?v.map(z.toPt):null},json:{read:!1,write:!1}};p.colorAndTransparencyProperty={type:c,json:{type:[y.Integer],default:null,read:{source:["color","transparency"],reader:function(v,q){v=null!=q.transparency?r.transparencyToOpacity(q.transparency):1;return(q=q.color)&&
Array.isArray(q)?new c([q[0]||0,q[1]||0,q[2]||0,v]):null}},write:{target:{color:{type:[y.Integer]},transparency:{type:y.Integer}},writer:function(v,q){q.color=v.toJSON().slice(0,3);v=r.opacityToTransparency(v.a);0!==v&&(q.transparency=v)}}}};p.screenSizeProperty=t;p.stipplePatternProperty=l;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/webdoc/support/opacityUtils":function(){define(["exports","../../core/accessorSupport/ensureType"],function(p,c){p.opacityToTransparency=function(z){z=
c.ensureInteger(100*(1-z));return Math.max(0,Math.min(z,100))};p.transparencyToOpacity=function(z){return Math.max(0,Math.min(1-z/100,1))};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/symbols/edges/SketchEdges3D":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./Edges3D".split(" "),
function(p,c,z,y,r,t,l,v,q){var g;z=g=function(k){function n(h){h=k.call(this,h)||this;h.type="sketch";return h}p._inheritsLoose(n,k);n.prototype.clone=function(){return new g(this.cloneProperties())};return n}(q);c.__decorate([l.enumeration({sketch:"sketch"},{readOnly:!0})],z.prototype,"type",void 0);return z=g=c.__decorate([v.subclass("esri.symbols.edges.SketchEdges3D")],z)})},"esri/symbols/edges/SolidEdges3D":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./Edges3D".split(" "),
function(p,c,z,y,r,t,l,v,q){var g;z=g=function(k){function n(h){h=k.call(this,h)||this;h.type="solid";return h}p._inheritsLoose(n,k);n.prototype.clone=function(){return new g(this.cloneProperties())};return n}(q);c.__decorate([l.enumeration({solid:"solid"},{readOnly:!0})],z.prototype,"type",void 0);return z=g=c.__decorate([v.subclass("esri.symbols.support.SolidEdges3D")],z)})},"esri/symbols/support/Symbol3DMaterial":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ./materialUtils".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k,n){var h;p.Symbol3DMaterial=h=function(f){function b(){var a=f.apply(this,arguments)||this;a.color=null;return a}c._inheritsLoose(b,f);b.prototype.clone=function(){return new h({color:r.isSome(this.color)?this.color.clone():null})};return b}(y.JSONSupport);z.__decorate([t.property(n.colorAndTransparencyProperty)],p.Symbol3DMaterial.prototype,"color",void 0);p.Symbol3DMaterial=h=z.__decorate([k.subclass("esri.symbols.support.Symbol3DMaterial")],p.Symbol3DMaterial);p.default=
p.Symbol3DMaterial;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/symbols/FillSymbol":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/jsonMap ../core/accessorSupport/decorators/subclass ./SimpleLineSymbol ./Symbol".split(" "),function(p,c,z,y,r,t,l,v,q,g){y=function(k){function n(h){h=k.call(this,h)||this;h.outline=null;h.type=null;return h}p._inheritsLoose(n,
k);n.prototype.hash=function(){return`${this.type}.${this.outline&&this.outline.hash()}`};return n}(g);c.__decorate([z.property({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":q}},json:{default:null,write:!0}})],y.prototype,"outline",void 0);c.__decorate([z.property({type:["simple-fill","picture-fill"],readOnly:!0})],y.prototype,"type",void 0);return y=c.__decorate([v.subclass("esri.symbols.FillSymbol")],y)})},"esri/symbols/SimpleLineSymbol":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/jsonMap ../core/lang ../core/screenUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/has ../core/Logger ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ./LineSymbol ./LineSymbolMarker".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k,n,h){var f;z=new z.JSONMap({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSInsideFrame:"inside-frame",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});n=f=function(b){function a(...e){e=b.call(this,...e)||this;e.type=
"simple-line";e.style="solid";e.cap="round";e.join="round";e.marker=null;e.miterLimit=2;return e}p._inheritsLoose(a,b);var d=a.prototype;d.normalizeCtorArgs=function(e,u,m,x,A,D){if(e&&"string"!==typeof e)return e;const B={};null!=e&&(B.style=e);null!=u&&(B.color=u);null!=m&&(B.width=r.toPt(m));null!=x&&(B.cap=x);null!=A&&(B.join=A);null!=D&&(B.miterLimit=r.toPt(D));return B};d.clone=function(){var e;return new f({color:y.clone(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,
miterLimit:this.miterLimit,marker:null==(e=this.marker)?void 0:e.clone()})};d.hash=function(){var e,u;return`${b.prototype.hash.call(this)}.${null==(e=this.color)?void 0:e.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${null==(u=this.marker)?void 0:u.hash()}`};return a}(n);c.__decorate([g.enumeration({esriSLS:"simple-line"},{readOnly:!0})],n.prototype,"type",void 0);c.__decorate([t.property({type:z.apiValues,json:{read:z.read,write:z.write}})],n.prototype,"style",void 0);c.__decorate([t.property({type:["butt",
"round","square"],json:{write:{overridePolicy:(b,a,d)=>({enabled:"round"!==b&&(null==d||null==d.origin)})}}})],n.prototype,"cap",void 0);c.__decorate([t.property({type:["miter","round","bevel"],json:{write:{overridePolicy:(b,a,d)=>({enabled:"round"!==b&&(null==d||null==d.origin)})}}})],n.prototype,"join",void 0);c.__decorate([t.property({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":h}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],n.prototype,"marker",void 0);
c.__decorate([t.property({type:Number,json:{read:!1,write:!1}})],n.prototype,"miterLimit",void 0);return n=f=c.__decorate([k.subclass("esri.symbols.SimpleLineSymbol")],n)})},"esri/symbols/LineSymbol":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/screenUtils ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ./Symbol".split(" "),
function(p,c,z,y,r,t,l,v,q,g){r=function(k){function n(h){h=k.call(this,h)||this;h.type="simple-line";h.width=.75;return h}p._inheritsLoose(n,k);n.prototype.hash=function(){return`${this.type}.${this.width}`};return n}(g);c.__decorate([v.enumeration({esriSLS:"simple-line"},{readOnly:!0})],r.prototype,"type",void 0);c.__decorate([y.property({type:Number,cast:z.toPt,json:{write:!0}})],r.prototype,"width",void 0);return r=c.__decorate([q.subclass("esri.symbols.LineSymbol")],r)})},"esri/symbols/LineSymbolMarker":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Color ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/has ../core/Logger ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k,n,h){var f;y=f=function(b){function a(e){e=b.call(this,e)||this;e.placement="begin-end";e.type="line-marker";e.style="arrow";return e}p._inheritsLoose(a,b);var d=a.prototype;d.writeStyle=function(e,u,m,x){u[m]="web-map"===(null==x?void 0:x.origin)?"arrow":e};d.readColor=function(e){return e&&null!=e[0]?[e[0],e[1],e[2],e[3]/255]:e};d.writeColor=function(e,u,m,x){"web-map"!==(null==x?void 0:x.origin)&&(u[m]=e)};d.clone=function(){return new f({color:r.clone(this.color),
placement:this.placement,style:this.style})};d.hash=function(){var e;return`${this.placement}.${null==(e=this.color)?void 0:e.hash()}.${this.style}`};p._createClass(a,[{key:"color",set:function(e){this._set("color",e)}}]);return a}(y.JSONSupport);c.__decorate([t.property({type:["begin","end","begin-end"],json:{write:!0}})],y.prototype,"placement",void 0);c.__decorate([g.enumeration({"line-marker":"line-marker"},{readOnly:!0}),t.property({json:{origins:{"web-map":{write:!1}}}})],y.prototype,"type",
void 0);c.__decorate([t.property({type:"arrow circle square diamond cross x".split(" ")})],y.prototype,"style",void 0);c.__decorate([h.writer("style")],y.prototype,"writeStyle",null);c.__decorate([t.property({type:z,value:null,json:{write:{allowNull:!0}}})],y.prototype,"color",null);c.__decorate([k.reader("color")],y.prototype,"readColor",null);c.__decorate([h.writer("color")],y.prototype,"writeColor",null);return y=f=c.__decorate([n.subclass("esri.symbols.LineSymbolMarker")],y)})},"esri/symbols/FillSymbol3DLayer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/maybe ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ./Symbol3DLayer ./edges/utils ./patterns/StylePattern3D ./patterns/utils ./support/colors ./support/Symbol3DFillMaterial ./support/Symbol3DOutline".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k,n,h,f,b,a){var d;r=d=function(e){function u(m){m=e.call(this,m)||this;m.type="fill";m.material=null;m.pattern=null;m.castShadows=!0;m.outline=null;m.edges=null;return m}p._inheritsLoose(u,e);u.prototype.clone=function(){return new d({edges:z.isSome(this.edges)?this.edges.clone():null,enabled:this.enabled,material:z.isSome(this.material)?this.material.clone():null,pattern:z.isSome(this.pattern)?this.pattern.clone():null,castShadows:this.castShadows,outline:z.isSome(this.outline)?
this.outline.clone():null})};u.fromSimpleFillSymbol=function(m){return new d({material:{color:(m.color||f.transparentWhite).clone()},pattern:m.style&&"solid"!==m.style?new n({style:m.style}):null,outline:m.outline?new a["default"]({size:m.outline.width||0,color:(m.outline.color||f.white).clone()}):null})};return u}(g);c.__decorate([v.enumeration({Fill:"fill"},{readOnly:!0})],r.prototype,"type",void 0);c.__decorate([y.property({type:b["default"],json:{write:!0}})],r.prototype,"material",void 0);c.__decorate([y.property(h.symbol3dPatternProperty)],
r.prototype,"pattern",void 0);c.__decorate([y.property({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],r.prototype,"castShadows",void 0);c.__decorate([y.property({type:a["default"],json:{write:!0}})],r.prototype,"outline",void 0);c.__decorate([y.property(k.symbol3dEdgesProperty)],r.prototype,"edges",void 0);return r=d=c.__decorate([q.subclass("esri.symbols.FillSymbol3DLayer")],r)})},"esri/symbols/patterns/StylePattern3D":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ./Pattern3D ./styles".split(" "),
function(p,c,z,y,r,t,l,v,q,g){var k;y=k=function(n){function h(f){f=n.call(this,f)||this;f.type="style";f.style="solid";return f}p._inheritsLoose(h,n);h.prototype.clone=function(){return new k({style:this.style})};return h}(q);c.__decorate([z.property({type:["style"]})],y.prototype,"type",void 0);c.__decorate([z.property({type:g,json:{read:!0,write:!0}})],y.prototype,"style",void 0);return y=k=c.__decorate([v.subclass("esri.symbols.patterns.StylePattern3D")],y)})},"esri/symbols/patterns/Pattern3D":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass".split(" "),
function(p,c,z,y,r,t,l,v,q){z=function(g){function k(n){return g.call(this,n)||this}p._inheritsLoose(k,g);k.prototype.clone=function(){};return k}(z.JSONSupport);c.__decorate([y.property({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],z.prototype,"type",void 0);return z=c.__decorate([q.subclass("esri.symbols.patterns.Pattern3D")],z)})},"esri/symbols/patterns/styles":function(){define(function(){return"backward-diagonal cross diagonal-cross forward-diagonal horizontal none solid vertical".split(" ")})},
"esri/symbols/patterns/utils":function(){define(["exports","./Pattern3D","./StylePattern3D"],function(p,c,z){function y(r,t,l){if(!r)return r;switch(r.type){case "style":return t=new z,t.read(r,l),t}}c={types:{key:"type",base:c,typeMap:{style:z}},json:{read:y,write:!0}};p.read=y;p.symbol3dPatternProperty=c;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/symbols/support/colors":function(){define(["exports","../../Color"],function(p,c){const z=new c("white"),y=new c("black");c=new c([255,
255,255,0]);p.black=y;p.isBlack=function(r){return 0===r.r&&0===r.g&&0===r.b};p.transparentWhite=c;p.white=z;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/symbols/support/Symbol3DFillMaterial":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./Symbol3DMaterial".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k){var n;p.Symbol3DFillMaterial=n=function(h){function f(){return h.apply(this,arguments)||this}c._inheritsLoose(f,h);f.prototype.clone=function(){return new n({color:y.isSome(this.color)?this.color.clone():null,colorMixMode:this.colorMixMode})};return f}(k["default"]);z.__decorate([q.enumeration({multiply:"multiply",replace:"replace",tint:"tint"})],p.Symbol3DFillMaterial.prototype,"colorMixMode",void 0);p.Symbol3DFillMaterial=n=z.__decorate([g.subclass("esri.symbols.support.Symbol3DFillMaterial")],
p.Symbol3DFillMaterial);p.default=p.Symbol3DFillMaterial;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/symbols/support/Symbol3DOutline":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Color ../../core/JSONSupport ../../core/maybe ../../core/screenUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ./materialUtils".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k,n,h,f){var b;p.Symbol3DOutline=b=function(a){function d(){var e=a.apply(this,arguments)||this;e.color=new y([0,0,0,1]);e.size=l.px2pt(1);e.stipplePattern=null;e.stippleOffColor=null;return e}c._inheritsLoose(d,a);d.prototype.clone=function(){return new b({color:t.isSome(this.color)?this.color.clone():null,size:this.size,stipplePattern:this.stipplePattern?this.stipplePattern.slice():null,stippleOffColor:this.stippleOffColor?this.stippleOffColor.clone():null})};return d}(r.JSONSupport);
z.__decorate([v.property(f.colorAndTransparencyProperty)],p.Symbol3DOutline.prototype,"color",void 0);z.__decorate([v.property(f.screenSizeProperty)],p.Symbol3DOutline.prototype,"size",void 0);z.__decorate([v.property(f.stipplePatternProperty)],p.Symbol3DOutline.prototype,"stipplePattern",void 0);z.__decorate([v.property({type:y})],p.Symbol3DOutline.prototype,"stippleOffColor",void 0);p.Symbol3DOutline=b=z.__decorate([h.subclass("esri.symbols.support.Symbol3DOutline")],p.Symbol3DOutline);p.default=
p.Symbol3DOutline;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/symbols/Font":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/screenUtils ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/decorators/cast ../core/Logger ../core/jsonMap ../core/accessorSupport/decorators/subclass".split(" "),function(p,c,z,y,r,t,l,v,q,g){var k;z=k=function(n){function h(b){b=n.call(this,b)||this;b.decoration="none";b.family=
"sans-serif";b.size=9;b.style="normal";b.weight="normal";return b}p._inheritsLoose(h,n);var f=h.prototype;f.castSize=function(b){return y.toPt(b)};f.clone=function(){return new k({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})};f.hash=function(){return`${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`};return h}(z.JSONSupport);c.__decorate([r.property({type:["underline","line-through","none"],json:{default:"none",write:!0}})],
z.prototype,"decoration",void 0);c.__decorate([r.property({type:String,json:{write:!0}})],z.prototype,"family",void 0);c.__decorate([r.property({type:Number,json:{write:{overridePolicy(n,h,f){return{enabled:!f||!f.textSymbol3D}}}}})],z.prototype,"size",void 0);c.__decorate([l.cast("size")],z.prototype,"castSize",null);c.__decorate([r.property({type:["normal","italic","oblique"],json:{default:"normal",write:!0}})],z.prototype,"style",void 0);c.__decorate([r.property({type:["normal","bold","bolder",
"lighter"],json:{default:"normal",write:!0}})],z.prototype,"weight",void 0);return z=k=c.__decorate([g.subclass("esri.symbols.Font")],z)})},"esri/symbols/IconSymbol3DLayer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Logger ../core/maybe ../core/urlUtils ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ./Symbol3DLayer ./support/colors ./support/IconSymbol3DLayerResource ./support/materialUtils ./support/Symbol3DAnchorPosition2D ./support/Symbol3DMaterial ./support/Symbol3DOutline".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k,n,h,f,b,a,d){function e(D){const B="width"in D?D.width:D.size,C="height"in D?D.height:D.size,w=u(D.xoffset);D=u(D.yoffset);return(w||D)&&B&&C?{x:-w/B,y:D/C}:null}function u(D){return isFinite(D)?D:0}var m;const x=z.getLogger("esri.symbols.IconSymbol3DLayer");z=m=function(D){function B(C){C=D.call(this,C)||this;C.material=null;C.resource=null;C.type="icon";C.size=12;C.anchor="center";C.anchorPosition=void 0;C.outline=void 0;return C}p._inheritsLoose(B,D);B.prototype.clone=
function(){return new m({anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),enabled:this.enabled,material:y.isSome(this.material)?this.material.clone():null,outline:y.isSome(this.outline)?this.outline.clone():null,resource:this.resource&&this.resource.clone(),size:this.size})};B.fromSimpleMarkerSymbol=function(C){const w=C.color||n.white,E=e(C),I=C.outline&&0<C.outline.width?{size:C.outline.width,color:(C.outline.color||n.white).clone()}:null;var F=m,H=C.size;{C=C.style;
const K=A[C];K?C=K:(x.warn(`${C} cannot be mapped to Icon symbol. Fallback to "circle"`),C="circle")}return new F({size:H,resource:{primitive:C},material:{color:w},outline:I,anchor:E?"relative":void 0,anchorPosition:E})};B.fromPictureMarkerSymbol=function(C){const w=!C.color||n.isBlack(C.color)?n.white:C.color,E=e(C);return new m({size:C.width<=C.height?C.height:C.width,resource:{href:C.url},material:{color:w.clone()},anchor:E?"relative":void 0,anchorPosition:E})};B.fromCIMSymbol=function(C){return new m({resource:{href:r.makeData({mediaType:"application/json",
data:JSON.stringify(C.data)})}})};return B}(k);c.__decorate([t.property({type:a["default"],json:{write:!0}})],z.prototype,"material",void 0);c.__decorate([t.property({type:h["default"],json:{write:!0}})],z.prototype,"resource",void 0);c.__decorate([q.enumeration({Icon:"icon"},{readOnly:!0})],z.prototype,"type",void 0);c.__decorate([t.property(f.screenSizeProperty)],z.prototype,"size",void 0);c.__decorate([q.enumeration({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",
topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"}),t.property({json:{default:"center"}})],z.prototype,"anchor",void 0);c.__decorate([t.property({type:b.Symbol3DAnchorPosition2D,json:{type:[Number],read:{reader:D=>new b.Symbol3DAnchorPosition2D({x:D[0],y:D[1]})},write:{writer:(D,B)=>{B.anchorPosition=[D.x,D.y]},overridePolicy(){return{enabled:"relative"===this.anchor}}}}})],z.prototype,"anchorPosition",void 0);c.__decorate([t.property({type:d["default"],
json:{write:!0}})],z.prototype,"outline",void 0);z=m=c.__decorate([g.subclass("esri.symbols.IconSymbol3DLayer")],z);const A={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};return z})},"esri/symbols/support/IconSymbol3DLayerResource":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/urlUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../chunks/persistableUrlUtils".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k,n,h,f,b){var a;y=y.strict()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});p.IconSymbol3DLayerResource=a=function(d){function e(m){return d.call(this,m)||this}c._inheritsLoose(e,d);var u=e.prototype;u.readHref=function(m,x,A){return m?b.fromJSON(m,A):x.dataURI};u.writeHref=function(m,x,A,D){m&&(t.isDataProtocol(m)?x.dataURI=m:(x.href=b.toJSON(m,D),t.isAbsolute(x.href)&&(x.href=t.normalize(x.href))))};u.clone=function(){return new a({href:this.href,
primitive:this.primitive})};return e}(r.JSONSupport);z.__decorate([l.property({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],p.IconSymbol3DLayerResource.prototype,"href",void 0);z.__decorate([n.reader("href")],p.IconSymbol3DLayerResource.prototype,"readHref",null);z.__decorate([f.writer("href",{href:{type:String},dataURI:{type:String}})],p.IconSymbol3DLayerResource.prototype,"writeHref",null);z.__decorate([k.enumeration(y)],p.IconSymbol3DLayerResource.prototype,"primitive",void 0);
p.IconSymbol3DLayerResource=a=z.__decorate([h.subclass("esri.symbols.support.IconSymbol3DLayerResource")],p.IconSymbol3DLayerResource);p.default=p.IconSymbol3DLayerResource;p.defaultPrimitive="circle";Object.defineProperty(p,"__esModule",{value:!0})})},"esri/symbols/support/Symbol3DAnchorPosition2D":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass".split(" "),
function(p,c,z,y,r,t,l,v,q,g){var k;p.Symbol3DAnchorPosition2D=k=function(n){function h(){var f=n.apply(this,arguments)||this;f.x=0;f.y=0;return f}c._inheritsLoose(h,n);h.prototype.clone=function(){return new k({x:this.x,y:this.y})};return h}(y);z.__decorate([r.property({type:Number})],p.Symbol3DAnchorPosition2D.prototype,"x",void 0);z.__decorate([r.property({type:Number})],p.Symbol3DAnchorPosition2D.prototype,"y",void 0);p.Symbol3DAnchorPosition2D=k=z.__decorate([g.subclass("esri.symbols.support.Symbol3DAnchorPosition2D")],
p.Symbol3DAnchorPosition2D);p.default=p.Symbol3DAnchorPosition2D;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/symbols/LabelSymbol3D":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Collection ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/has ../core/Logger ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ./Symbol3D ./TextSymbol3DLayer ./callouts/calloutUtils ./support/Symbol3DVerticalOffset".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k,n,h,f){var b;const a=z.ofType({base:null,key:"type",typeMap:{text:n}});z=b=function(d){function e(m){m=d.call(this,m)||this;m.verticalOffset=null;m.callout=null;m.styleOrigin=null;m.symbolLayers=new a;m.type="label-3d";return m}p._inheritsLoose(e,d);var u=e.prototype;u.supportsCallout=function(){return!0};u.hasVisibleCallout=function(){return h.hasVisibleCallout(this)};u.hasVisibleVerticalOffset=function(){return h.hasVisibleVerticalOffset(this)};u.clone=function(){return new b({styleOrigin:y.clone(this.styleOrigin),
symbolLayers:y.clone(this.symbolLayers),thumbnail:y.clone(this.thumbnail),callout:y.clone(this.callout),verticalOffset:y.clone(this.verticalOffset)})};e.fromTextSymbol=function(m){return new b({symbolLayers:[n.fromTextSymbol(m)]})};return e}(k);c.__decorate([r.property({type:f["default"],json:{write:!0}})],z.prototype,"verticalOffset",void 0);c.__decorate([r.property(h.calloutProperty)],z.prototype,"callout",void 0);c.__decorate([r.property({json:{read:!1,write:!1}})],z.prototype,"styleOrigin",void 0);
c.__decorate([r.property({type:a})],z.prototype,"symbolLayers",void 0);c.__decorate([q.enumeration({LabelSymbol3D:"label-3d"},{readOnly:!0})],z.prototype,"type",void 0);return z=b=c.__decorate([g.subclass("esri.symbols.LabelSymbol3D")],z)})},"esri/symbols/Symbol3D":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Collection ../core/collectionUtils ../core/Logger ../core/urlUtils ../core/Warning ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/decorators/cast ../core/jsonMap ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ../portal/Portal ../chunks/persistableUrlUtils ./ExtrudeSymbol3DLayer ./FillSymbol3DLayer ./IconSymbol3DLayer ./LineSymbol3DLayer ./ObjectSymbol3DLayer ./PathSymbol3DLayer ./Symbol ./Symbol3DLayer ./TextSymbol3DLayer ./WaterSymbol3DLayer ./support/StyleOrigin ./support/Thumbnail".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k,n,h,f,b,a,d,e,u,m,x,A,D,B,C,w,E,I){const F={icon:u,object:x,line:m,path:A,fill:e,extrude:d,text:C,water:w};q=z.ofType({base:B,key:"type",typeMap:F,errorContext:"symbol-layer"});const H=r.getLogger("esri.symbols.Symbol3D");r=function(K){function G(P){P=K.call(this,P)||this;P.styleOrigin=null;P.thumbnail=null;P.type=null;const R=P.__accessor__&&P.__accessor__.metadatas&&P.__accessor__.metadatas.symbolLayers;P._set("symbolLayers",new (R&&R.type||z));return P}p._inheritsLoose(G,
K);var L=G.prototype;L.readStyleOrigin=function(P,R,S){if(P.styleUrl&&P.name)return R=a.fromJSON(P.styleUrl,S),new E({styleUrl:R,name:P.name});if(P.styleName&&P.name)return new E({portal:S&&S.portal||b.getDefault(),styleName:P.styleName,name:P.name});S&&S.messages&&S.messages.push(new l("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:S,definition:P}))};L.writeStyleOrigin=function(P,R,S,M){P.styleUrl&&P.name?(S=a.toJSON(P.styleUrl,
M),t.isAbsolute(S)&&(S=t.normalize(S)),R.styleOrigin={styleUrl:S,name:P.name}):P.styleName&&P.name&&(P.portal&&M&&M.portal&&!t.hasSamePortal(P.portal.restUrl,M.portal.restUrl)?M&&M.messages&&M.messages.push(new l("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):R.styleOrigin={styleName:P.styleName,name:P.name})};L.normalizeCtorArgs=function(P){return P instanceof B||P&&F[P.type]?{symbolLayers:[P]}:
Array.isArray(P)?{symbolLayers:P}:P};p._createClass(G,[{key:"color",get:function(){return null},set:function(P){H.error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}},{key:"symbolLayers",set:function(P){y.referenceSetter(P,this._get("symbolLayers"))}}]);return G}(D);c.__decorate([v.property({json:{read:!1,write:!1}})],r.prototype,"color",null);c.__decorate([v.property({type:q,nonNullable:!0,json:{write:!0}}),g.cast(y.castForReferenceSetter)],
r.prototype,"symbolLayers",null);c.__decorate([v.property({type:E})],r.prototype,"styleOrigin",void 0);c.__decorate([n.reader("styleOrigin")],r.prototype,"readStyleOrigin",null);c.__decorate([f.writer("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],r.prototype,"writeStyleOrigin",null);c.__decorate([v.property({type:I["default"],json:{read:!1}})],r.prototype,"thumbnail",void 0);c.__decorate([v.property({type:["point-3d",
"line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],r.prototype,"type",void 0);return r=c.__decorate([h.subclass("esri.symbols.Symbol3D")],r)})},"esri/symbols/LineSymbol3DLayer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Color ../core/maybe ../core/screenUtils ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ./Symbol3DLayer ./support/colors ./support/materialUtils ./support/Symbol3DMaterial".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k,n,h,f,b){var a;l=a=function(d){function e(u){u=d.call(this,u)||this;u.material=null;u.type="line";u.join="miter";u.cap="butt";u.size=r.px2pt(1);u.stipplePattern=null;u.stippleOffColor=null;return u}p._inheritsLoose(e,d);e.prototype.clone=function(){return new a({enabled:this.enabled,material:y.isSome(this.material)?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,stipplePattern:this.stipplePattern?this.stipplePattern.slice():null,stippleOffColor:this.stippleOffColor?
this.stippleOffColor.clone():null})};e.fromSimpleLineSymbol=function(u){return new a({size:u.width||1,cap:u.cap||"butt",join:u.join||"miter",material:{color:(u.color||h.white).clone()}})};return e}(n);c.__decorate([t.property({type:b["default"],json:{write:!0}})],l.prototype,"material",void 0);c.__decorate([g.enumeration({Line:"line"},{readOnly:!0})],l.prototype,"type",void 0);c.__decorate([t.property({type:["miter","bevel","round"],json:{write:!0,default:"miter"}})],l.prototype,"join",void 0);c.__decorate([t.property({type:["butt",
"square","round"],json:{write:!0,default:"butt"}})],l.prototype,"cap",void 0);c.__decorate([t.property(f.screenSizeProperty)],l.prototype,"size",void 0);c.__decorate([t.property(f.stipplePatternProperty)],l.prototype,"stipplePattern",void 0);c.__decorate([t.property({type:z})],l.prototype,"stippleOffColor",void 0);return l=a=c.__decorate([k.subclass("esri.symbols.LineSymbol3DLayer")],l)})},"esri/symbols/ObjectSymbol3DLayer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/maybe ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ./Symbol3DLayer ./support/ObjectSymbol3DLayerResource ./support/Symbol3DAnchorPosition3D ./support/Symbol3DMaterial".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k,n,h){var f;r=f=function(b){function a(d){d=b.call(this,d)||this;d.material=null;d.castShadows=!0;d.resource=null;d.type="object";d.width=void 0;d.height=void 0;d.depth=void 0;d.anchor=void 0;d.anchorPosition=void 0;d.heading=void 0;d.tilt=void 0;d.roll=void 0;return d}p._inheritsLoose(a,b);a.prototype.clone=function(){return new f({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),depth:this.depth,
enabled:this.enabled,height:this.height,material:z.isSome(this.material)?this.material.clone():null,castShadows:this.castShadows,resource:this.resource&&this.resource.clone(),width:this.width})};p._createClass(a,[{key:"isPrimitive",get:function(){return!this.resource||"string"!==typeof this.resource.href}}]);return a}(g);c.__decorate([y.property({type:h["default"],json:{write:!0}})],r.prototype,"material",void 0);c.__decorate([y.property({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],
r.prototype,"castShadows",void 0);c.__decorate([y.property({type:k["default"],json:{write:!0}})],r.prototype,"resource",void 0);c.__decorate([v.enumeration({Object:"object"},{readOnly:!0})],r.prototype,"type",void 0);c.__decorate([y.property({type:Number,json:{write:!0}})],r.prototype,"width",void 0);c.__decorate([y.property({type:Number,json:{write:!0}})],r.prototype,"height",void 0);c.__decorate([y.property({type:Number,json:{write:!0}})],r.prototype,"depth",void 0);c.__decorate([v.enumeration({center:"center",
top:"top",bottom:"bottom",origin:"origin",relative:"relative"}),y.property({json:{default:"origin"}})],r.prototype,"anchor",void 0);c.__decorate([y.property({type:n.Symbol3DAnchorPosition3D,json:{type:[Number],read:{reader:b=>new n.Symbol3DAnchorPosition3D({x:b[0],y:b[1],z:b[2]})},write:{writer:(b,a)=>{a.anchorPosition=[b.x,b.y,b.z]},overridePolicy(){return{enabled:"relative"===this.anchor}}}}})],r.prototype,"anchorPosition",void 0);c.__decorate([y.property({type:Number,json:{write:!0}})],r.prototype,
"heading",void 0);c.__decorate([y.property({type:Number,json:{write:!0}})],r.prototype,"tilt",void 0);c.__decorate([y.property({type:Number,json:{write:!0}})],r.prototype,"roll",void 0);c.__decorate([y.property({readOnly:!0})],r.prototype,"isPrimitive",null);return r=f=c.__decorate([q.subclass("esri.symbols.ObjectSymbol3DLayer")],r)})},"esri/symbols/support/ObjectSymbol3DLayerResource":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../chunks/persistableUrlUtils".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k,n){var h;y=y.strict()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});p.ObjectSymbol3DLayerResource=h=function(f){function b(){return f.apply(this,arguments)||this}c._inheritsLoose(b,f);b.prototype.clone=function(){return new h({href:this.href,primitive:this.primitive})};return b}(r.JSONSupport);z.__decorate([t.property({type:String,json:{read:n.read,write:n.write}})],p.ObjectSymbol3DLayerResource.prototype,
"href",void 0);z.__decorate([g.enumeration(y)],p.ObjectSymbol3DLayerResource.prototype,"primitive",void 0);p.ObjectSymbol3DLayerResource=h=z.__decorate([k.subclass("esri.symbols.support.ObjectSymbol3DLayerResource")],p.ObjectSymbol3DLayerResource);p.default=p.ObjectSymbol3DLayerResource;p.defaultPrimitive="sphere";Object.defineProperty(p,"__esModule",{value:!0})})},"esri/symbols/support/Symbol3DAnchorPosition3D":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass".split(" "),
function(p,c,z,y,r,t,l,v,q,g){var k;p.Symbol3DAnchorPosition3D=k=function(n){function h(){var f=n.apply(this,arguments)||this;f.x=0;f.y=0;f.z=0;return f}c._inheritsLoose(h,n);h.prototype.clone=function(){return new k({x:this.x,y:this.y,z:this.z})};return h}(y);z.__decorate([r.property({type:Number})],p.Symbol3DAnchorPosition3D.prototype,"x",void 0);z.__decorate([r.property({type:Number})],p.Symbol3DAnchorPosition3D.prototype,"y",void 0);z.__decorate([r.property({type:Number})],p.Symbol3DAnchorPosition3D.prototype,
"z",void 0);p.Symbol3DAnchorPosition3D=k=z.__decorate([g.subclass("esri.symbols.support.Symbol3DAnchorPosition3D")],p.Symbol3DAnchorPosition3D);p.default=p.Symbol3DAnchorPosition3D;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/symbols/PathSymbol3DLayer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/maybe ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ./Symbol3DLayer ./support/Symbol3DMaterial".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k,n){var h;r=h=function(f){function b(d){d=f.call(this,d)||this;d.material=null;d.castShadows=!0;d.type="path";d.profile="circle";d.join="miter";d.cap="butt";d.width=void 0;d.height=void 0;d.anchor="center";d.profileRotation="all";return d}p._inheritsLoose(b,f);var a=b.prototype;a.readSize=function(d,e){return e.height||e.width?d:e.size};a.clone=function(){return new h({enabled:this.enabled,material:z.isSome(this.material)?this.material.clone():null,castShadows:this.castShadows,
size:this.size,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})};p._createClass(b,[{key:"size",get:function(){if(this.width&&this.height){if(this.width===this.height)return this.width}else{if(this.width)return this.width;if(this.height)return this.height}},set:function(d){this.height=this.width=d}}]);return b}(k);c.__decorate([y.property({type:n["default"],json:{write:!0}})],r.prototype,"material",void 0);
c.__decorate([y.property({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],r.prototype,"castShadows",void 0);c.__decorate([v.enumeration({Path:"path"},{readOnly:!0})],r.prototype,"type",void 0);c.__decorate([y.property({type:Number})],r.prototype,"size",null);c.__decorate([q.reader("size")],r.prototype,"readSize",null);c.__decorate([y.property({type:["circle","quad"],json:{write:!0,default:"circle"}})],r.prototype,"profile",void 0);c.__decorate([y.property({type:["miter","bevel","round"],
json:{write:!0,default:"miter"}})],r.prototype,"join",void 0);c.__decorate([y.property({type:["none","butt","square","round"],json:{write:!0,default:"butt"}})],r.prototype,"cap",void 0);c.__decorate([y.property({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],r.prototype,"width",void 0);c.__decorate([y.property({type:Number,json:{write:!0}})],r.prototype,"height",void 0);c.__decorate([y.property({type:["center","bottom","top"],json:{write:!0,default:"center"}})],
r.prototype,"anchor",void 0);c.__decorate([y.property({type:["heading","all"],json:{write:!0,default:"all"}})],r.prototype,"profileRotation",void 0);return r=h=c.__decorate([g.subclass("esri.symbols.PathSymbol3DLayer")],r)})},"esri/symbols/TextSymbol3DLayer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/lang ../core/maybe ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/has ../core/Logger ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ./Font ./Symbol3DLayer ./support/materialUtils ./support/Symbol3DHalo ./support/Symbol3DMaterial".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k,n,h,f,b,a){var d;t=d=function(e){function u(x){x=e.call(this,x)||this;x._userSize=void 0;x.halo=null;x.material=null;x.text=void 0;x.type="text";return x}p._inheritsLoose(u,e);var m=u.prototype;m.writeFont=function(x,A,D,B){A.font=x.write({},{...B,textSymbol3D:!0});delete A.font.size};m.clone=function(){return new d({enabled:this.enabled,font:this.font&&z.clone(this.font),halo:this.halo&&z.clone(this.halo),material:y.isSome(this.material)?this.material.clone():null,
size:this.size,text:this.text})};u.fromTextSymbol=function(x){var A=x.haloColor;var D=x.haloSize;A=A&&0<D?{color:z.clone(A),size:D}:null;D=x.font?x.font.clone():new n;return new d({size:D.size,font:D,halo:A,material:x.color?{color:x.color.clone()}:null,text:x.text})};p._createClass(u,[{key:"font",get:function(){return this._get("font")||null},set:function(x){x&&this._userSize&&(x.size=this._userSize);this._set("font",x)}},{key:"size",get:function(){return null!=this._userSize?this._userSize:this.font&&
null!=this.font.size?this.font.size:9},set:function(x){this._userSize=x;this.font&&(this.font.size=this._userSize);this.notifyChange("size")}}]);return u}(h);c.__decorate([r.property({type:n,json:{write:!0}})],t.prototype,"font",null);c.__decorate([k.writer("font")],t.prototype,"writeFont",null);c.__decorate([r.property({type:b["default"],json:{write:!0}})],t.prototype,"halo",void 0);c.__decorate([r.property({type:a["default"],json:{write:!0}})],t.prototype,"material",void 0);c.__decorate([r.property(f.screenSizeProperty),
r.property()],t.prototype,"size",null);c.__decorate([r.property({type:String,json:{write:!0}})],t.prototype,"text",void 0);c.__decorate([q.enumeration({Text:"text"},{readOnly:!0})],t.prototype,"type",void 0);return t=d=c.__decorate([g.subclass("esri.symbols.TextSymbol3DLayer")],t)})},"esri/symbols/support/Symbol3DHalo":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Color ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/has ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ./materialUtils".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k,n,h){var f;p.Symbol3DHalo=f=function(b){function a(){var d=b.apply(this,arguments)||this;d.color=new y([0,0,0,1]);d.size=0;return d}c._inheritsLoose(a,b);a.prototype.clone=function(){return new f({color:t.clone(this.color),size:this.size})};return a}(r.JSONSupport);z.__decorate([l.property(h.colorAndTransparencyProperty)],p.Symbol3DHalo.prototype,"color",void 0);z.__decorate([l.property(h.screenSizeProperty)],p.Symbol3DHalo.prototype,"size",void 0);p.Symbol3DHalo=f=
z.__decorate([n.subclass("esri.symbols.support.Symbol3DHalo")],p.Symbol3DHalo);p.default=p.Symbol3DHalo;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/symbols/WaterSymbol3DLayer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Color ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/has ../core/Logger ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ./Symbol3DLayer".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k){var n;l=n=function(f){function b(a){a=f.call(this,a)||this;a.color=h.clone();a.type="water";a.waterbodySize="medium";a.waveDirection=null;a.waveStrength="moderate";return a}p._inheritsLoose(b,f);b.prototype.clone=function(){return new n({color:y.clone(this.color),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})};return b}(k);c.__decorate([r.property({type:z,nonNullable:!0,json:{type:[t.Integer],write:(f,b,a)=>b[a]=f.toArray(1),
default:()=>h.clone(),defaultEquals:f=>f.toCss(!0)===h.toCss(!0)}})],l.prototype,"color",void 0);c.__decorate([q.enumeration({Water:"water"},{readOnly:!0})],l.prototype,"type",void 0);c.__decorate([r.property({type:["small","medium","large"],json:{write:!0,default:"medium"}})],l.prototype,"waterbodySize",void 0);c.__decorate([r.property({type:Number,json:{write:!0,default:null}})],l.prototype,"waveDirection",void 0);c.__decorate([r.property({type:["calm","rippled","slight","moderate"],json:{write:!0,
default:"moderate"}})],l.prototype,"waveStrength",void 0);l=n=c.__decorate([g.subclass("esri.symbols.WaterSymbol3DLayer")],l);const h=new z([0,119,190]);return l})},"esri/symbols/support/StyleOrigin":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../portal/Portal".split(" "),
function(p,c,z,y,r,t,l,v,q,g){var k;z=k=function(n){function h(){var f=n.apply(this,arguments)||this;f.portal=null;return f}p._inheritsLoose(h,n);h.prototype.clone=function(){return new k({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})};return h}(z);c.__decorate([y.property({type:String})],z.prototype,"name",void 0);c.__decorate([y.property({type:String})],z.prototype,"styleUrl",void 0);c.__decorate([y.property({type:String})],z.prototype,"styleName",void 0);c.__decorate([y.property({type:g})],
z.prototype,"portal",void 0);return z=k=c.__decorate([q.subclass("esri.symbols.support.StyleOrigin")],z)})},"esri/symbols/support/Thumbnail":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass".split(" "),function(p,c,z,y,r,t,l,v,q,g){var k;p.Thumbnail=k=function(n){function h(){return n.apply(this,
arguments)||this}c._inheritsLoose(h,n);h.prototype.clone=function(){return new k({url:this.url})};return h}(y);z.__decorate([r.property({type:String})],p.Thumbnail.prototype,"url",void 0);p.Thumbnail=k=z.__decorate([g.subclass("esri.symbols.support.Thumbnail")],p.Thumbnail);p.default=p.Thumbnail;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/symbols/callouts/calloutUtils":function(){define(["exports","./Callout3D","./LineCallout3D"],function(p,c,z){function y(r){if(!r)return!1;r=r.verticalOffset;
return!r||0>=r.screenLength||0>=r.maxWorldLength?!1:!0}p.calloutProperty={types:{key:"type",base:c,typeMap:{line:z}},json:{write:!0}};p.hasVisibleCallout=function(r){if(!r||!r.supportsCallout||!r.supportsCallout())return!1;const t=r.callout;return t&&t.visible?y(r)?!0:!1:!1};p.hasVisibleVerticalOffset=y;p.isCalloutSupport=function(r){return"point-3d"===r.type||"label-3d"===r.type};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/symbols/callouts/Callout3D":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass".split(" "),
function(p,c,z,y,r,t,l,v,q){z=function(g){function k(n){n=g.call(this,n)||this;n.visible=!0;return n}p._inheritsLoose(k,g);k.prototype.clone=function(){};return k}(z.JSONSupport);c.__decorate([y.property({type:["line"],readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],z.prototype,"type",void 0);c.__decorate([y.property({readOnly:!0})],z.prototype,"visible",void 0);return z=c.__decorate([q.subclass("esri.symbols.callouts.Callout3D")],z)})},"esri/symbols/callouts/LineCallout3D":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Color ../../core/lang ../../core/maybe ../../core/screenUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./Callout3D ../../chunks/LineCallout3DBorder ../support/materialUtils".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k,n,h,f,b){var a;v=a=function(d){function e(u){u=d.call(this,u)||this;u.type="line";u.color=new z([0,0,0,1]);u.size=t.px2pt(1);u.border=null;return u}p._inheritsLoose(e,d);e.prototype.clone=function(){return new a({color:y.clone(this.color),size:this.size,border:y.clone(this.border)})};p._createClass(e,[{key:"visible",get:function(){return 0<this.size&&r.isSome(this.color)&&0<this.color.a}}]);return e}(h);c.__decorate([k.enumeration({line:"line"},{readOnly:!0})],v.prototype,
"type",void 0);c.__decorate([l.property(b.colorAndTransparencyProperty)],v.prototype,"color",void 0);c.__decorate([l.property(b.screenSizeProperty)],v.prototype,"size",void 0);c.__decorate([l.property({type:f.LineCallout3DBorder$1,json:{write:!0}})],v.prototype,"border",void 0);c.__decorate([l.property({readOnly:!0})],v.prototype,"visible",null);return v=a=c.__decorate([n.subclass("esri.symbols.callouts.LineCallout3D")],v)})},"esri/chunks/LineCallout3DBorder":function(){define("exports ./_rollupPluginBabelHelpers ./tslib.es6 ../Color ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/has ../core/Logger ../core/jsonMap ../core/accessorSupport/decorators/subclass ../symbols/support/materialUtils".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k,n,h){var f;p.LineCallout3DBorder$2=f=function(b){function a(){var d=b.apply(this,arguments)||this;d.color=new y("white");return d}c._inheritsLoose(a,b);a.prototype.clone=function(){return new f({color:t.clone(this.color)})};return a}(r.JSONSupport);z.__decorate([l.property(h.colorAndTransparencyProperty)],p.LineCallout3DBorder$2.prototype,"color",void 0);p.LineCallout3DBorder$2=f=z.__decorate([n.subclass("esri.symbols.callouts.LineCallout3DBorder")],p.LineCallout3DBorder$2);
z=p.LineCallout3DBorder$2;r=Object.freeze({__proto__:null,get LineCallout3DBorder(){return p.LineCallout3DBorder$2},"default":z});p.LineCallout3DBorder=r;p.LineCallout3DBorder$1=z})},"esri/symbols/support/Symbol3DVerticalOffset":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ./materialUtils".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k){var n;p.Symbol3DVerticalOffset=n=function(h){function f(){var b=h.apply(this,arguments)||this;b.screenLength=0;b.minWorldLength=0;return b}c._inheritsLoose(f,h);f.prototype.clone=function(){return new n({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})};return f}(y.JSONSupport);z.__decorate([r.property(k.screenSizeProperty)],p.Symbol3DVerticalOffset.prototype,"screenLength",void 0);z.__decorate([r.property({type:Number,
json:{write:!0,default:0}})],p.Symbol3DVerticalOffset.prototype,"minWorldLength",void 0);z.__decorate([r.property({type:Number,json:{write:!0}})],p.Symbol3DVerticalOffset.prototype,"maxWorldLength",void 0);p.Symbol3DVerticalOffset=n=z.__decorate([g.subclass("esri.symbols.support.Symbol3DVerticalOffset")],p.Symbol3DVerticalOffset);p.default=p.Symbol3DVerticalOffset;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/symbols/LineSymbol3D":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Collection ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/has ../core/Logger ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ./LineSymbol3DLayer ./PathSymbol3DLayer ./Symbol3D".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k,n,h){var f;const b=z.ofType({base:null,key:"type",typeMap:{line:k,path:n}});z=z.ofType({base:null,key:"type",typeMap:{line:k,path:n}});h=f=function(a){function d(e){e=a.call(this,e)||this;e.symbolLayers=new b;e.type="line-3d";return e}p._inheritsLoose(d,a);d.prototype.clone=function(){return new f({styleOrigin:y.clone(this.styleOrigin),symbolLayers:y.clone(this.symbolLayers),thumbnail:y.clone(this.thumbnail)})};d.fromSimpleLineSymbol=function(e){return new f({symbolLayers:[k.fromSimpleLineSymbol(e)]})};
return d}(h);c.__decorate([r.property({type:b,json:{type:z}})],h.prototype,"symbolLayers",void 0);c.__decorate([q.enumeration({LineSymbol3D:"line-3d"},{readOnly:!0})],h.prototype,"type",void 0);return h=f=c.__decorate([g.subclass("esri.symbols.LineSymbol3D")],h)})},"esri/symbols/MarkerSymbol":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/screenUtils ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/jsonMap ../core/accessorSupport/decorators/subclass ./Symbol".split(" "),
function(p,c,z,y,r,t,l,v,q,g){r=function(k){function n(h){h=k.call(this,h)||this;h.angle=0;h.type=null;h.xoffset=0;h.yoffset=0;h.size=9;return h}p._inheritsLoose(n,k);n.prototype.hash=function(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`};return n}(g);c.__decorate([y.property({type:Number,json:{read:k=>k&&-1*k,write:(k,n)=>n.angle=k&&-1*k}})],r.prototype,"angle",void 0);c.__decorate([y.property({type:["simple-marker","picture-marker"],readOnly:!0})],r.prototype,
"type",void 0);c.__decorate([y.property({type:Number,cast:z.toPt,json:{write:!0}})],r.prototype,"xoffset",void 0);c.__decorate([y.property({type:Number,cast:z.toPt,json:{write:!0}})],r.prototype,"yoffset",void 0);c.__decorate([y.property({type:Number,cast:k=>"auto"===k?k:z.toPt(k),json:{write:!0}})],r.prototype,"size",void 0);return r=c.__decorate([q.subclass("esri.symbols.MarkerSymbol")],r)})},"esri/symbols/MeshSymbol3D":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Collection ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/has ../core/Logger ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ./FillSymbol3DLayer ./Symbol3D".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k,n){var h;const f=z.ofType({base:null,key:"type",typeMap:{fill:k}});z=h=function(b){function a(d){d=b.call(this,d)||this;d.symbolLayers=new f;d.type="mesh-3d";return d}p._inheritsLoose(a,b);a.prototype.clone=function(){return new h({styleOrigin:y.clone(this.styleOrigin),symbolLayers:y.clone(this.symbolLayers),thumbnail:y.clone(this.thumbnail)})};return a}(n);c.__decorate([r.property({type:f})],z.prototype,"symbolLayers",void 0);c.__decorate([q.enumeration({MeshSymbol3D:"mesh-3d"},
{readOnly:!0})],z.prototype,"type",void 0);return z=h=c.__decorate([g.subclass("esri.symbols.MeshSymbol3D")],z)})},"esri/symbols/PictureFillSymbol":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/lang ../core/screenUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/has ../core/Logger ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ./FillSymbol ./support/urlUtils".split(" "),function(p,
c,z,y,r,t,l,v,q,g,k,n){var h;t=h=function(f){function b(...d){d=f.call(this,...d)||this;d.type="picture-fill";d.url=null;d.xscale=1;d.yscale=1;d.width=12;d.height=12;d.xoffset=0;d.yoffset=0;d.source=null;return d}p._inheritsLoose(b,f);var a=b.prototype;a.normalizeCtorArgs=function(d,e,u,m){if(d&&"string"!==typeof d&&null==d.imageData)return d;const x={};d&&(x.url=d);e&&(x.outline=e);null!=u&&(x.width=y.toPt(u));null!=m&&(x.height=y.toPt(m));return x};a.clone=function(){const d=new h({color:z.clone(this.color),
height:this.height,outline:this.outline&&this.outline.clone(),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});d._set("source",z.clone(this.source));return d};a.hash=function(){var d;return`${f.prototype.hash.call(this)}.${null==(d=this.color)?void 0:d.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`};return b}(k);c.__decorate([q.enumeration({esriPFS:"picture-fill"},{readOnly:!0})],
t.prototype,"type",void 0);c.__decorate([r.property(n.urlPropertyDefinition)],t.prototype,"url",void 0);c.__decorate([r.property({type:Number,json:{write:!0}})],t.prototype,"xscale",void 0);c.__decorate([r.property({type:Number,json:{write:!0}})],t.prototype,"yscale",void 0);c.__decorate([r.property({type:Number,cast:y.toPt,json:{write:!0}})],t.prototype,"width",void 0);c.__decorate([r.property({type:Number,cast:y.toPt,json:{write:!0}})],t.prototype,"height",void 0);c.__decorate([r.property({type:Number,
cast:y.toPt,json:{write:!0}})],t.prototype,"xoffset",void 0);c.__decorate([r.property({type:Number,cast:y.toPt,json:{write:!0}})],t.prototype,"yoffset",void 0);c.__decorate([r.property(n.sourcePropertyDefinition)],t.prototype,"source",void 0);return t=h=c.__decorate([g.subclass("esri.symbols.PictureFillSymbol")],t)})},"esri/symbols/support/urlUtils":function(){define(["exports","../../core/urlUtils","../../chunks/persistableUrlUtils"],function(p,c,z){function y(v,q,g){return q.imageData?c.makeData({mediaType:q.contentType||
"image/png",isBase64:!0,data:q.imageData}):r(q.url,g)}function r(v,q){return!q||"service"!==q.origin&&"portal-item"!==q.origin||!q.layer||"feature"!==q.layer.type&&"stream"!==q.layer.type||c.isAbsolute(v)||!q.layer.parsedUrl?z.fromJSON(v,q):c.join(q.layer.parsedUrl.path,"images",v)}function t(v,q,g,k){c.isDataProtocol(v)?(v=c.dataComponents(v),q.contentType=v.mediaType,q.imageData=v.data,g&&g.imageData===q.imageData&&g.url&&z.write(g.url,q,"url",k)):z.write(v,q,"url",k)}const l={json:{read:{source:["imageData",
"url"],reader:y},write:{writer(v,q,g,k){t(v,q,this.source,k)}}}};p.read=r;p.readImageDataOrUrl=y;p.sourcePropertyDefinition={readOnly:!0,json:{read:{source:["imageData","url"],reader(v,q,g){v={};q.imageData&&(v.imageData=q.imageData);q.contentType&&(v.contentType=q.contentType);q.url&&(v.url=r(q.url,g));return v}}}};p.urlPropertyDefinition=l;p.writeImageDataAndUrl=t;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/symbols/PictureMarkerSymbol":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/lang ../core/screenUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/has ../core/Logger ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ./MarkerSymbol ./support/urlUtils".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k,n,h){var f;t=f=function(b){function a(...e){e=b.call(this,...e)||this;e.color=null;e.type="picture-marker";e.url=null;e.source=null;e.height=12;e.width=12;e.size=null;return e}p._inheritsLoose(a,b);var d=a.prototype;d.normalizeCtorArgs=function(e,u,m){if(e&&"string"!==typeof e&&null==e.imageData)return e;const x={};e&&(x.url=e);null!=u&&(x.width=y.toPt(u));null!=m&&(x.height=y.toPt(m));return x};d.readHeight=function(e,u){return u.size||e};d.readWidth=function(e,u){return u.size||
e};d.clone=function(){const e=new f({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});e._set("source",z.clone(this.source));return e};d.hash=function(){return`${b.prototype.hash.call(this)}.${this.height}.${this.url}.${this.width}`};return a}(n);c.__decorate([r.property({json:{write:!1}})],t.prototype,"color",void 0);c.__decorate([q.enumeration({esriPMS:"picture-marker"},{readOnly:!0})],t.prototype,"type",void 0);c.__decorate([r.property(h.urlPropertyDefinition)],
t.prototype,"url",void 0);c.__decorate([r.property(h.sourcePropertyDefinition)],t.prototype,"source",void 0);c.__decorate([r.property({type:Number,cast:y.toPt,json:{write:!0}})],t.prototype,"height",void 0);c.__decorate([g.reader("height",["height","size"])],t.prototype,"readHeight",null);c.__decorate([r.property({type:Number,cast:y.toPt,json:{write:!0}})],t.prototype,"width",void 0);c.__decorate([r.property({json:{write:!1}})],t.prototype,"size",void 0);return t=f=c.__decorate([k.subclass("esri.symbols.PictureMarkerSymbol")],
t)})},"esri/symbols/PointSymbol3D":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Collection ../core/Error ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/has ../core/Logger ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ./IconSymbol3DLayer ./ObjectSymbol3DLayer ./Symbol3D ./TextSymbol3DLayer ./callouts/calloutUtils ./support/Symbol3DVerticalOffset".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k,n,h,f,b,a,d,e){var u;const m=z.ofType({base:null,key:"type",typeMap:{icon:h,object:f,text:a}});z=z.ofType({base:null,key:"type",typeMap:{icon:h,object:f}});b=u=function(x){function A(B){B=x.call(this,B)||this;B.verticalOffset=null;B.callout=null;B.symbolLayers=new m;B.type="point-3d";return B}p._inheritsLoose(A,x);var D=A.prototype;D.writeSymbolLayers=function(B,C,w,E){const I=B.filter(F=>"text"!==F.type);E&&E.messages&&I.length<B.length&&(B=B.find(F=>"text"===F.type),
E.messages.push(new y("symbol-layer:unsupported","Symbol layers of type 'text' cannot be persisted in PointSymbol3D",{symbolLayer:B})));C[w]=I.map(F=>F.write({},E)).toArray()};D.supportsCallout=function(){if(1>(this.symbolLayers?this.symbolLayers.length:0))return!1;for(const B of this.symbolLayers.items)switch(B.type){case "icon":case "text":case "object":continue;default:return!1}return!0};D.hasVisibleCallout=function(){return d.hasVisibleCallout(this)};D.hasVisibleVerticalOffset=function(){return d.hasVisibleVerticalOffset(this)};
D.clone=function(){return new u({verticalOffset:r.clone(this.verticalOffset),callout:r.clone(this.callout),styleOrigin:r.clone(this.styleOrigin),symbolLayers:r.clone(this.symbolLayers),thumbnail:r.clone(this.thumbnail)})};A.fromSimpleMarkerSymbol=function(B){return new u({symbolLayers:[h.fromSimpleMarkerSymbol(B)]})};A.fromPictureMarkerSymbol=function(B){return new u({symbolLayers:[h.fromPictureMarkerSymbol(B)]})};A.fromCIMSymbol=function(B){if(B.data&&B.data.symbol){const C=B.data.symbol;if("CIMPointSymbol"===
C.type&&C.callout)return new u({symbolLayers:[h.fromCIMSymbol(B)],callout:{type:"line",size:.5,color:[0,0,0]},verticalOffset:{screenLength:40}})}return new u({symbolLayers:[h.fromCIMSymbol(B)]})};A.fromTextSymbol=function(B){return new u({symbolLayers:[a.fromTextSymbol(B)]})};return A}(b);c.__decorate([t.property({type:e["default"],json:{write:!0}})],b.prototype,"verticalOffset",void 0);c.__decorate([t.property(d.calloutProperty)],b.prototype,"callout",void 0);c.__decorate([t.property({type:m,json:{type:z,
origins:{"web-scene":{type:z}}}})],b.prototype,"symbolLayers",void 0);c.__decorate([n.writer("web-scene","symbolLayers")],b.prototype,"writeSymbolLayers",null);c.__decorate([g.enumeration({PointSymbol3D:"point-3d"},{readOnly:!0})],b.prototype,"type",void 0);return b=u=c.__decorate([k.subclass("esri.symbols.PointSymbol3D")],b)})},"esri/symbols/PolygonSymbol3D":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Collection ../core/Error ../core/lang ../core/maybe ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/has ../core/Logger ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ./ExtrudeSymbol3DLayer ./FillSymbol3DLayer ./IconSymbol3DLayer ./LineSymbol3DLayer ./ObjectSymbol3DLayer ./Symbol3D ./TextSymbol3DLayer ./WaterSymbol3DLayer".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k,n,h,f,b,a,d,e,u,m,x){var A;const D=z.ofType({base:null,key:"type",typeMap:{extrude:f,fill:b,icon:a,line:d,object:e,text:m,water:x}});z=z.ofType({base:null,key:"type",typeMap:{extrude:f,fill:b,icon:a,line:d,object:e,water:x}});u=A=function(B){function C(E){E=B.call(this,E)||this;E.symbolLayers=new D;E.type="polygon-3d";return E}p._inheritsLoose(C,B);var w=C.prototype;w.writeSymbolLayers=function(E,I,F,H){const K=E.filter(G=>"text"!==G.type);H&&H.messages&&K.length<E.length&&
(E=E.find(G=>"text"===G.type),H.messages.push(new y("symbol-layer:unsupported","Symbol layers of type 'text' cannot be persisted in PolygonSymbol3D",{symbolLayer:E})));I[F]=K.map(G=>G.write({},H)).toArray()};w.clone=function(){return new A({styleOrigin:r.clone(this.styleOrigin),symbolLayers:r.clone(this.symbolLayers),thumbnail:r.clone(this.thumbnail)})};C.fromJSON=function(E){const I=new A;I.read(E);if(2===I.symbolLayers.length&&"fill"===I.symbolLayers.getItemAt(0).type&&"line"===I.symbolLayers.getItemAt(1).type){const F=
I.symbolLayers.getItemAt(0),H=I.symbolLayers.getItemAt(1);!H.enabled||E.symbolLayers&&E.symbolLayers[1]&&!1===E.symbolLayers[1].enable||(F.outline={size:H.size,color:t.isSome(H.material)?H.material.color:null});I.symbolLayers.removeAt(1)}return I};C.fromSimpleFillSymbol=function(E){return new A({symbolLayers:[b.fromSimpleFillSymbol(E)]})};return C}(u);c.__decorate([l.property({type:D,json:{type:z}})],u.prototype,"symbolLayers",void 0);c.__decorate([h.writer("web-scene","symbolLayers")],u.prototype,
"writeSymbolLayers",null);c.__decorate([k.enumeration({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],u.prototype,"type",void 0);return u=A=c.__decorate([n.subclass("esri.symbols.PolygonSymbol3D")],u)})},"esri/symbols/SimpleFillSymbol":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Color ../core/jsonMap ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/has ../core/Logger ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ./FillSymbol ./SimpleLineSymbol".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k,n,h){var f;y=new y.JSONMap({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});n=f=function(b){function a(...e){e=b.call(this,...e)||this;e.color=new z([0,0,0,.25]);e.outline=new h;e.type="simple-fill";e.style="solid";return e}p._inheritsLoose(a,b);var d=a.prototype;d.normalizeCtorArgs=
function(e,u,m){if(e&&"string"!==typeof e)return e;const x={};e&&(x.style=e);u&&(x.outline=u);m&&(x.color=m);return x};d.clone=function(){return new f({color:r.clone(this.color),outline:this.outline&&this.outline.clone(),style:this.style})};d.hash=function(){return`${b.prototype.hash.call(this)}${this.style}.${this.color&&this.color.hash()}`};return a}(n);c.__decorate([t.property()],n.prototype,"color",void 0);c.__decorate([t.property()],n.prototype,"outline",void 0);c.__decorate([g.enumeration({esriSFS:"simple-fill"},
{readOnly:!0})],n.prototype,"type",void 0);c.__decorate([t.property({type:y.apiValues,json:{read:y.read,write:y.write}})],n.prototype,"style",void 0);return n=f=c.__decorate([k.subclass("esri.symbols.SimpleFillSymbol")],n)})},"esri/symbols/SimpleMarkerSymbol":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Color ../core/jsonMap ../core/lang ../core/screenUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/has ../core/Logger ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ./MarkerSymbol ./SimpleLineSymbol".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k,n,h,f,b){var a;y=new y.JSONMap({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});f=a=function(d){function e(...m){m=d.call(this,...m)||this;m.color=new z([255,255,255,.25]);m.type="simple-marker";m.size=12;m.style="circle";m.outline=new b;return m}p._inheritsLoose(e,d);var u=e.prototype;u.normalizeCtorArgs=function(m,x,A,D){if(m&&"string"!==typeof m)return m;const B=
{};m&&(B.style=m);null!=x&&(B.size=t.toPt(x));A&&(B.outline=A);D&&(B.color=D);return B};u.writeColor=function(m,x){m&&"x"!==this.style&&"cross"!==this.style&&(x.color=m.toJSON());null===m&&(x.color=null)};u.clone=function(){return new a({angle:this.angle,color:r.clone(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})};u.hash=function(){var m;return`${d.prototype.hash.call(this)}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${null==
(m=this.outline)?void 0:m.hash()}`};p._createClass(e,[{key:"path",set:function(m){this.style="path";this._set("path",m)}}]);return e}(f);c.__decorate([l.property()],f.prototype,"color",void 0);c.__decorate([h.writer("color")],f.prototype,"writeColor",null);c.__decorate([k.enumeration({esriSMS:"simple-marker"},{readOnly:!0})],f.prototype,"type",void 0);c.__decorate([l.property()],f.prototype,"size",void 0);c.__decorate([l.property({type:y.apiValues,json:{read:y.read,write:y.write}})],f.prototype,"style",
void 0);c.__decorate([l.property({type:String,json:{write:!0}})],f.prototype,"path",null);c.__decorate([l.property({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":b}},json:{default:null,write:!0}})],f.prototype,"outline",void 0);return f=a=c.__decorate([n.subclass("esri.symbols.SimpleMarkerSymbol")],f)})},"esri/symbols/TextSymbol":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Color ../core/lang ../core/screenUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/has ../core/Logger ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ./Font ./Symbol".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k,n,h,f){var b;v=b=function(a){function d(...u){u=a.call(this,...u)||this;u.backgroundColor=null;u.borderLineColor=null;u.borderLineSize=null;u.font=new h;u.horizontalAlignment="center";u.kerning=!0;u.haloColor=null;u.haloSize=null;u.rightToLeft=null;u.rotated=!1;u.text="";u.type="text";u.verticalAlignment=null;u.xoffset=0;u.yoffset=0;u.angle=0;u.width=null;u.lineWidth=192;u.lineHeight=1;return u}p._inheritsLoose(d,a);var e=d.prototype;e.normalizeCtorArgs=function(u,m,
x){if(u&&"string"!==typeof u)return u;const A={};u&&(A.text=u);m&&(A.font=m);x&&(A.color=x);return A};e.writeLineWidth=function(u,m,x,A){A&&"string"!==typeof A||(m[x]=u)};e.castLineWidth=function(u){return r.toPt(u)};e.writeLineHeight=function(u,m,x,A){A&&"string"!==typeof A||(m[x]=u)};e.clone=function(){return new b({angle:this.angle,backgroundColor:y.clone(this.backgroundColor),borderLineColor:y.clone(this.borderLineColor),borderLineSize:this.borderLineSize,color:y.clone(this.color),font:this.font&&
this.font.clone(),haloColor:y.clone(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})};e.hash=function(){return`${this.backgroundColor&&this.backgroundColor.hash()}.${this.borderLineColor}.${this.borderLineSize}.${this.color.hash()}.${this.font&&
this.font.hash()}.${this.haloColor&&this.haloColor.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`};return d}(f);c.__decorate([t.property({type:z,json:{write:!0}})],v.prototype,"backgroundColor",void 0);c.__decorate([t.property({type:z,json:{write:!0}})],v.prototype,"borderLineColor",void 0);c.__decorate([t.property({type:Number,
json:{write:!0}})],v.prototype,"borderLineSize",void 0);c.__decorate([t.property({type:h,json:{write:!0}})],v.prototype,"font",void 0);c.__decorate([t.property({type:["left","right","center","justify"],json:{write:!0}})],v.prototype,"horizontalAlignment",void 0);c.__decorate([t.property({type:Boolean,json:{write:!0}})],v.prototype,"kerning",void 0);c.__decorate([t.property({type:z,json:{write:!0}})],v.prototype,"haloColor",void 0);c.__decorate([t.property({type:Number,cast:r.toPt,json:{write:!0}})],
v.prototype,"haloSize",void 0);c.__decorate([t.property({type:Boolean,json:{write:!0}})],v.prototype,"rightToLeft",void 0);c.__decorate([t.property({type:Boolean,json:{write:!0}})],v.prototype,"rotated",void 0);c.__decorate([t.property({type:String,json:{write:!0}})],v.prototype,"text",void 0);c.__decorate([g.enumeration({esriTS:"text"},{readOnly:!0})],v.prototype,"type",void 0);c.__decorate([t.property({type:["baseline","top","middle","bottom"],json:{write:!0}})],v.prototype,"verticalAlignment",
void 0);c.__decorate([t.property({type:Number,cast:r.toPt,json:{write:!0}})],v.prototype,"xoffset",void 0);c.__decorate([t.property({type:Number,cast:r.toPt,json:{write:!0}})],v.prototype,"yoffset",void 0);c.__decorate([t.property({type:Number,json:{read:a=>a&&-1*a,write:(a,d)=>d.angle=a&&-1*a}})],v.prototype,"angle",void 0);c.__decorate([t.property({type:Number,json:{write:!0}})],v.prototype,"width",void 0);c.__decorate([t.property({type:Number})],v.prototype,"lineWidth",void 0);c.__decorate([n.writer("lineWidth")],
v.prototype,"writeLineWidth",null);c.__decorate([l.cast("lineWidth")],v.prototype,"castLineWidth",null);c.__decorate([t.property({type:Number})],v.prototype,"lineHeight",void 0);c.__decorate([n.writer("lineHeight")],v.prototype,"writeLineHeight",null);return v=b=c.__decorate([k.subclass("esri.symbols.TextSymbol")],v)})},"esri/symbols/WebStyleSymbol":function(){define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Logger ../core/promiseUtils ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ../portal/Portal ../chunks/persistableUrlUtils ./Symbol ./support/Thumbnail".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k,n,h,f){function b(){return new Promise(function(e,u){p(["./support/styleUtils"],e,u)})}var a;const d=y.getLogger("esri.symbols.WebStyleSymbol");y=a=function(e){function u(x){x=e.call(this,x)||this;x.styleName=null;x.portal=null;x.styleUrl=null;x.thumbnail=null;x.name=null;x.type="web-style";return x}c._inheritsLoose(u,e);var m=u.prototype;m.read=function(x,A){this.portal=A?A.portal:void 0;e.prototype.read.call(this,x,A)};m.clone=function(){return new a({name:this.name,
styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})};m.fetchSymbol=function(x){return this._fetchSymbol("webRef",x)};m.fetchCIMSymbol=function(x){return this._fetchSymbol("cimRef",x)};m._fetchSymbol=function(){var x=c._asyncToGenerator(function*(A,D){const B=yield b();r.throwIfAborted(D);A=B.resolveWebStyleSymbol(this,{portal:this.portal},A,D);A.catch(C=>{d.error("#fetchSymbol()","Failed to create symbol from style",C)});return A});return function(A,D){return x.apply(this,arguments)}}();
return u}(h);z.__decorate([t.property({json:{write:!1}})],y.prototype,"color",void 0);z.__decorate([t.property({type:String,json:{write:!0}})],y.prototype,"styleName",void 0);z.__decorate([t.property({type:k,json:{write:!1}})],y.prototype,"portal",void 0);z.__decorate([t.property({type:String,json:{read:n.read,write:n.write}})],y.prototype,"styleUrl",void 0);z.__decorate([t.property({type:f["default"],json:{read:!1}})],y.prototype,"thumbnail",void 0);z.__decorate([t.property({type:String,json:{write:!0}})],
y.prototype,"name",void 0);z.__decorate([q.enumeration({styleSymbolReference:"web-style"},{readOnly:!0})],y.prototype,"type",void 0);return y=a=z.__decorate([g.subclass("esri.symbols.WebStyleSymbol")],y)})},"esri/core/uid":function(){define(["exports"],function(p){let c=0;p.NullUID=0;p.generateUID=function(){return++c};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/rest/query/operations/query":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../request ../../../core/maybe ../../../core/urlUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ./pbfQueryUtils ./queryZScale ../../../tasks/operations/urlUtils".split(" "),
function(p,c,z,y,r,t,l,v,q,g){function k(a,d){const e=a.geometry;a=a.toJSON();y.isSome(e)&&(a.geometry=JSON.stringify(e),a.geometryType=t.getJsonType(e),a.inSR=e.spatialReference.wkid||JSON.stringify(e.spatialReference));a.groupByFieldsForStatistics&&(a.groupByFieldsForStatistics=a.groupByFieldsForStatistics.join(","));a.objectIds&&(a.objectIds=a.objectIds.join(","));a.orderByFields&&(a.orderByFields=a.orderByFields.join(","));!a.outFields||!a.returnDistinctValues&&(null!=d&&d.returnCountOnly||null!=
d&&d.returnExtentOnly||null!=d&&d.returnIdsOnly)?delete a.outFields:-1!==a.outFields.indexOf("*")?a.outFields="*":a.outFields=a.outFields.join(",");a.outSR?a.outSR=a.outSR.wkid||JSON.stringify(a.outSR):e&&(a.returnGeometry||a.returnCentroid)&&(a.outSR=a.inSR);a.returnGeometry&&delete a.returnGeometry;a.outStatistics&&(a.outStatistics=JSON.stringify(a.outStatistics));a.pixelSize&&(a.pixelSize=JSON.stringify(a.pixelSize));a.quantizationParameters&&(a.quantizationParameters=JSON.stringify(a.quantizationParameters));
a.parameterValues&&(a.parameterValues=JSON.stringify(a.parameterValues));a.rangeValues&&(a.rangeValues=JSON.stringify(a.rangeValues));a.dynamicDataSource&&(a.layer=JSON.stringify({source:a.dynamicDataSource}),delete a.dynamicDataSource);if(a.timeExtent){const {start:u,end:m}=a.timeExtent;if(null!=u||null!=m)a.time=u===m?u:`${null==u?"null":u},${null==m?"null":m}`;delete a.timeExtent}return a}function n(){n=c._asyncToGenerator(function*(a,d,e,u){a=y.isSome(d.timeExtent)&&d.timeExtent.isEmpty?{data:{features:[]}}:
yield b(a,d,"json",u);q.applyFeatureSetZUnitScaling(d,e,a.data);return a});return n.apply(this,arguments)}function h(){h=c._asyncToGenerator(function*(a,d,e,u){if(y.isSome(d.timeExtent)&&d.timeExtent.isEmpty)return Promise.resolve({data:e.createFeatureResult()});a=yield f(a,d,u);a.data=v.parsePBFFeatureQuery(a.data,e);return a});return h.apply(this,arguments)}function f(a,d,e){return b(a,d,"pbf",e)}function b(a,d,e,u={},m={}){const x="string"===typeof a?r.urlToObject(a):a;a=d.geometry?[d.geometry]:
[];u.responseType="pbf"===e?"array-buffer":"json";return l.normalizeCentralMeridian(a,null,u).then(A=>{A=A&&A[0];y.isSome(A)&&(d=d.clone(),d.geometry=A);A=g.mapParameters({...x.query,f:e,...m,...k(d,m)});return z(r.join(x.path,"query"),{...u,query:{...A,...u.query}})})}p.executeQuery=function(a,d,e,u){return n.apply(this,arguments)};p.executeQueryForCount=function(a,d,e){return y.isSome(d.timeExtent)&&d.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):b(a,d,"json",e,{returnIdsOnly:!0,returnCountOnly:!0})};
p.executeQueryForExtent=function(a,d,e){return y.isSome(d.timeExtent)&&d.timeExtent.isEmpty?Promise.resolve({data:{count:0,extent:null}}):b(a,d,"json",e,{returnExtentOnly:!0,returnCountOnly:!0}).then(u=>{const m=u.data;if(m.hasOwnProperty("extent"))return u;if(m.features)throw Error("Layer does not support extent calculation.");if(m.hasOwnProperty("count"))throw Error("Layer does not support extent calculation.");return u})};p.executeQueryForIds=function(a,d,e){return y.isSome(d.timeExtent)&&d.timeExtent.isEmpty?
Promise.resolve({data:{objectIds:[]}}):b(a,d,"json",e,{returnIdsOnly:!0})};p.executeQueryPBF=function(a,d,e,u){return h.apply(this,arguments)};p.executeQueryPBFBuffer=f;p.queryToQueryStringParameters=k;p.runQuery=b;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/rest/query/operations/pbfQueryUtils":function(){define(["exports","./pbfFeatureServiceParser"],function(p,c){p.parsePBFFeatureQuery=function(z,y){var r=c.parseFeatureQuery(z,y);z=r.queryResult.featureResult;y=r.queryResult.queryGeometry;
r=r.queryResult.queryGeometryType;if(z&&z.features&&z.features.length&&z.objectIdFieldName){const t=z.objectIdFieldName;for(const l of z.features)l.attributes&&(l.objectId=l.attributes[t])}z&&(z.queryGeometry=y,z.queryGeometryType=r);return z};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/rest/query/operations/pbfFeatureServiceParser":function(){define("exports ../../../core/Error ../../../core/maybe ../../../core/pbf ../../../layers/graphics/OptimizedGeometry ./pbfOptimizedFeatureSet".split(" "),
function(p,c,z,y,r,t){function l(C){return C>=A.length?null:A[C]}function v(C,w,E){for(E=w.createPointGeometry(E);C.next();)switch(C.tag()){case 3:{var I=C.getUInt32();I=C.pos()+I;let F=0;for(;C.pos()<I;)w.addCoordinatePoint(E,C.getSInt64(),F++);break}default:C.skip()}return E}function q(C,w,E){const I=w.createGeometry(E);for(E=2+(E.hasZ?1:0)+(E.hasM?1:0);C.next();)switch(C.tag()){case 2:var F=C.getUInt32();F=C.pos()+F;for(var H=0;C.pos()<F;)w.addLength(I,C.getUInt32(),H++);break;case 3:F=C.getUInt32();
F=C.pos()+F;H=0;for(w.allocateCoordinates(I);C.pos()<F;)w.addCoordinate(I,C.getSInt64(),H),H++,H===E&&(H=0);break;default:C.skip()}return I}function g(C){const w=new r;let E="esriGeometryPoint";for(;C.next();)switch(C.tag()){case 2:var I=C.getUInt32();for(I=C.pos()+I;C.pos()<I;)w.lengths.push(C.getUInt32());break;case 3:I=C.getUInt32();for(I=C.pos()+I;C.pos()<I;)w.coords.push(C.getSInt64());break;case 1:E=t.OPTIMIZED_GEOMETRY_TYPES[C.getEnum()];break;default:C.skip()}return{queryGeometry:w,queryGeometryType:E}}
function k(C){for(;C.next();)switch(C.tag()){case 1:return C.getString();case 2:return C.getFloat();case 3:return C.getDouble();case 4:return C.getSInt32();case 5:return C.getUInt32();case 6:return C.getInt64();case 7:return C.getUInt64();case 8:return C.getSInt64();case 9:return C.getBool();default:return C.skip(),null}return null}function n(C){const w={type:l(0)};for(;C.next();)switch(C.tag()){case 1:w.name=C.getString();break;case 2:w.type=l(C.getEnum());break;case 3:w.alias=C.getString();break;
case 4:var E=C.getEnum();E=E>=D.length?null:D[E];w.sqlType=E;break;case 5:C.skip();break;case 6:w.defaultValue=C.getString();break;default:C.skip()}return w}function h(C){const w={};for(;C.next();)switch(C.tag()){case 1:w.name=C.getString();break;case 2:w.isSystemMaintained=C.getBool();break;default:C.skip()}return w}function f(C,w,E,I){const F=w.createFeature(E);let H=0;for(;C.next();)switch(C.tag()){case 1:{const K=I[H++].name;F.attributes[K]=C.processMessage(k);break}case 2:F.geometry=C.processMessageWithArgs(q,
w,E);break;case 4:F.centroid=C.processMessageWithArgs(v,w,E);break;default:C.skip()}return F}function b(C){const w=[1,1,1,1];for(;C.next();)switch(C.tag()){case 1:w[0]=C.getDouble();break;case 2:w[1]=C.getDouble();break;case 4:w[2]=C.getDouble();break;case 3:w[3]=C.getDouble();break;default:C.skip()}return w}function a(C){const w=[0,0,0,0];for(;C.next();)switch(C.tag()){case 1:w[0]=C.getDouble();break;case 2:w[1]=C.getDouble();break;case 4:w[2]=C.getDouble();break;case 3:w[3]=C.getDouble();break;
default:C.skip()}return w}function d(C){const w={originPosition:0>=B.length?null:B[0]};for(;C.next();)switch(C.tag()){case 1:var E=C.getEnum();w.originPosition=E>=B.length?null:B[E];break;case 2:w.scale=C.processMessage(b);break;case 3:w.translate=C.processMessage(a);break;default:C.skip()}return w}function e(C){const w={};for(;C.next();)switch(C.tag()){case 1:w.shapeAreaFieldName=C.getString();break;case 2:w.shapeLengthFieldName=C.getString();break;case 3:w.units=C.getString();break;default:C.skip()}return w}
function u(C,w){for(w=w.createSpatialReference();C.next();)switch(C.tag()){case 1:w.wkid=C.getUInt32();break;case 5:w.wkt=C.getString();break;case 2:w.latestWkid=C.getUInt32();break;case 3:w.vcsWkid=C.getUInt32();break;case 4:w.latestVcsWkid=C.getUInt32();break;default:C.skip()}return w}function m(C,w){const E=w.createFeatureResult();E.geometryType=0>=w.geometryTypes.length?null:w.geometryTypes[0];let I=!1;for(;C.next();)switch(C.tag()){case 1:E.objectIdFieldName=C.getString();break;case 3:E.globalIdFieldName=
C.getString();break;case 4:E.geohashFieldName=C.getString();break;case 5:E.geometryProperties=C.processMessage(e);break;case 7:var F=C.getEnum();E.geometryType=F>=w.geometryTypes.length?null:w.geometryTypes[F];break;case 8:E.spatialReference=C.processMessageWithArgs(u,w);break;case 10:E.hasZ=C.getBool();break;case 11:E.hasM=C.getBool();break;case 12:E.transform=C.processMessage(d);break;case 9:F=C.getBool();E.exceededTransferLimit=F;break;case 13:w.addField(E,C.processMessage(n));break;case 15:I||
(w.prepareFeatures(E),I=!0);w.addFeature(E,C.processMessageWithArgs(f,w,E,E.fields));break;case 2:E.uniqueIdField=C.processMessage(h);break;default:C.skip()}w.finishFeatureResult(E);return E}function x(C,w){const E={};let I=null;for(;C.next();)switch(C.tag()){case 4:I=C.processMessageWithArgs(g);break;case 1:E.featureResult=C.processMessageWithArgs(m,w);break;default:C.skip()}z.isSome(I)&&E.featureResult&&w.addQueryGeometry(E,I);return E}const A="esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeString esriFieldTypeDate esriFieldTypeOID esriFieldTypeGeometry esriFieldTypeBlob esriFieldTypeRaster esriFieldTypeGUID esriFieldTypeGlobalID esriFieldTypeXML".split(" "),
D="sqlTypeBigInt sqlTypeBinary sqlTypeBit sqlTypeChar sqlTypeDate sqlTypeDecimal sqlTypeDouble sqlTypeFloat sqlTypeGeometry sqlTypeGUID sqlTypeInteger sqlTypeLongNVarchar sqlTypeLongVarbinary sqlTypeLongVarchar sqlTypeNChar sqlTypeNVarchar sqlTypeOther sqlTypeReal sqlTypeSmallInt sqlTypeSqlXml sqlTypeTime sqlTypeTimestamp sqlTypeTimestamp2 sqlTypeTinyInt sqlTypeVarbinary sqlTypeVarchar".split(" "),B=["upperLeft","lowerLeft"];p.parseFeatureQuery=function(C,w){try{const E=new y(new Uint8Array(C),new DataView(C));
for(C={};E.next();)switch(E.tag()){case 2:C.queryResult=E.processMessageWithArgs(x,w);break;default:E.skip()}return C}catch(E){throw new c("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:E});}};p.parseFieldType=l;p.parseTransform=d;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/rest/query/operations/pbfOptimizedFeatureSet":function(){define("exports ../../../core/unitUtils ../../../geometry/support/spatialReferenceUtils ../../../layers/graphics/OptimizedFeature ../../../layers/graphics/OptimizedFeatureSet ../../../layers/graphics/OptimizedGeometry".split(" "),
function(p,c,z,y,r,t){const l=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"];let v=function(){function q(k){this.options=k;this.geometryTypes=l;this._vertexDimension=this._coordinatePtr=0}var g=q.prototype;g.createFeatureResult=function(){return new r};g.prepareFeatures=function(k){this._vertexDimension=2;k.hasZ&&this._vertexDimension++;k.hasM&&this._vertexDimension++};g.finishFeatureResult=function(k){if(k&&k.features&&k.hasZ&&this.options.sourceSpatialReference&&
k.spatialReference&&!z.equals(k.spatialReference,this.options.sourceSpatialReference)&&!k.spatialReference.vcsWkid){var n=c.getMetersPerVerticalUnitForSR(this.options.sourceSpatialReference),h=c.getMetersPerVerticalUnitForSR(k.spatialReference);n/=h;if(1!==n)for(const f of k.features)if(f.geometry&&f.geometry.coords)for(k=f.geometry.coords,h=2;h<k.length;h+=3)k[h]*=n}};g.addFeature=function(k,n){k.features.push(n)};g.createFeature=function(){return new y};g.createSpatialReference=function(){return{wkid:0}};
g.createGeometry=function(){return new t};g.addField=function(k,n){k.fields.push(n)};g.allocateCoordinates=function(k){k.coords.length=k.lengths.reduce((n,h)=>n+h,0)*this._vertexDimension;this._coordinatePtr=0};g.addCoordinate=function(k,n){k.coords[this._coordinatePtr++]=n};g.addCoordinatePoint=function(k,n){k.coords.push(n)};g.addLength=function(k,n){k.lengths.push(n)};g.addQueryGeometry=function(k,n){k.queryGeometry=n.queryGeometry;k.queryGeometryType=n.queryGeometryType};g.createPointGeometry=
function(){return new t};return q}();p.OPTIMIZED_GEOMETRY_TYPES=l;p.OptimizedFeatureSetParserContext=v;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/rest/query/operations/queryZScale":function(){define(["exports","./zscale"],function(p,c){p.applyFeatureSetZUnitScaling=function(z,y,r){if(r&&r.features&&r.hasZ&&(z=c.getGeometryZScaler(r.geometryType,y,z.outSpatialReference)))for(const t of r.features)z(t.geometry)};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/rest/query/operations/zscale":function(){define(["exports",
"../../../core/maybe","../../../core/unitUtils","../../../geometry/support/spatialReferenceUtils"],function(p,c,z,y){function r(l,v,q){if(null==l.hasM||l.hasZ)for(const g of v)for(const k of g)2<k.length&&(k[2]*=q)}function t(l,v,q){if(l)for(const k of l){l=k.geometry;var g=q;if(l&&l.spatialReference&&!y.equals(l.spatialReference,v)&&(g=z.getMetersPerVerticalUnitForSR(l.spatialReference)/g,1!==g))if("x"in l)null!=l.z&&(l.z*=g);else if("rings"in l)r(l,l.rings,g);else if("paths"in l)r(l,l.paths,g);
else if("points"in l&&(null==l.hasM||l.hasZ))for(const n of l.points)2<n.length&&(n[2]*=g)}}p.getGeometryZScaler=function(l,v,q){if(c.isNone(v)||c.isNone(q)||q.vcsWkid||y.equals(v,q))return null;v=z.getMetersPerVerticalUnitForSR(v);q=z.getMetersPerVerticalUnitForSR(q);const g=v/q;if(1===g)return null;switch(l){case "point":case "esriGeometryPoint":return k=>{k&&null!=k.z&&(k.z*=g)};case "polyline":case "esriGeometryPolyline":return k=>{if(k)for(const n of k.paths)for(const h of n)2<h.length&&(h[2]*=
g)};case "polygon":case "esriGeometryPolygon":return k=>{if(k)for(const n of k.rings)for(const h of n)2<h.length&&(h[2]*=g)};case "multipoint":case "esriGeometryMultipoint":return k=>{if(k)for(const n of k.points)2<n.length&&(n[2]*=g)};default:return null}};p.unapplyEditsZUnitScaling=function(l,v,q){if((l||v)&&q){var g=z.getMetersPerVerticalUnitForSR(q);t(l,q,g);t(v,q,g)}};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/tasks/operations/urlUtils":function(){define(["exports"],function(p){function c(z){const y=
{};for(const r in z){if("declaredClass"===r)continue;const t=z[r];if(null!=t&&"function"!==typeof t)if(Array.isArray(t)){y[r]=[];for(let l=0;l<t.length;l++)y[r][l]=c(t[l])}else"object"===typeof t?t.toJSON&&(y[r]=JSON.stringify(t)):y[r]=t}return y}p.mapParameters=c;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/views/2d/layers/features/support/FeatureSetReaderJSON":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","../../../../../core/maybe","../../../../../layers/graphics/featureConversionUtils",
"./FeatureSetReader"],function(p,c,z,y,r){function t({coords:v,lengths:q}){let g=0;for(const k of q){for(q=1;q<k;q++)v[2*(g+q)]+=v[2*(g+q)-2],v[2*(g+q)+1]+=v[2*(g+q)-1];g+=k}}let l=function(v){function q(k,n,h){k=v.call(this,k)||this;k._featureIndex=-1;k._dateFields=new Set;k._geometryType=h;k._features=n;return k}c._inheritsLoose(q,v);q.fromFeatures=function(k,n,h){h=y.convertFromFeatures([],k,n,!1,!1,h);for(let f=0;f<h.length;f++)h[f].displayId=k[f].displayId;return q.fromOptimizedFeatures(h,n)};
q.fromFeatureSet=function(k,n){k=y.convertFromFeatureSet(k,n);return q.fromOptimizedFeatureSet(k)};q.fromOptimizedFeatureSet=function(k){const {features:n,geometryType:h}=k,f=q.fromOptimizedFeatures(n,h);f._exceededTransferLimit=k.exceededTransferLimit;f._transform=k.transform;for(const b of k.fields)"esriFieldTypeDate"===b.type&&f._dateFields.add(b.name);return f};q.fromOptimizedFeatures=function(k,n,h){const f=r.FeatureSetReader.createInstance();k=new q(f,k,n);k._transform=h;return k};var g=q.prototype;
g.removeIds=function(k){const n=new Set(k);this._features=this._features.filter(h=>!n.has(h.objectId))};g.append=function(k){for(const n of k)this._features.push(n)};g.getSize=function(){return this._features.length};g.getCursor=function(){return this.copy()};g.getQuantizationTransform=function(){return this._transform};g.getAttributeHash=function(){let k="";for(const n in this._current.attributes)k+=this._current.attributes[n];return k};g.getIndex=function(){return this._featureIndex};g.setIndex=
function(k){this._featureIndex=k};g.getObjectId=function(){return this._current.objectId};g.getDisplayId=function(){return this._current.displayId};g.setDisplayId=function(k){this._current.displayId=k};g.getGroupId=function(){return this._current.groupId};g.setGroupId=function(k){this._current.groupId=k};g.copy=function(){const k=new q(this.instance,this._features,this.geometryType);this.copyInto(k);return k};g.next=function(){for(;++this._featureIndex<this._features.length&&!this._getExists(););
return this._featureIndex<this._features.length};g.readLegacyFeature=function(){return y.convertToFeature(this._current,this.geometryType,this.hasZ,this.hasM)};g.readOptimizedFeature=function(){return this._current};g.readLegacyPointGeometry=function(){return this.readGeometry()?{x:this.getX(),y:this.getY()}:null};g.readLegacyGeometry=function(){const k=this.readGeometry();return y.convertToGeometry(k,this.geometryType,this.hasZ,this.hasM)};g.readLegacyCentroid=function(){const k=this.readCentroid();
return k?{x:k.coords[0]*this._sx+this._tx,y:k.coords[1]*this._sy+this._ty}:null};g.readGeometryArea=function(){return y.getQuantizedArea(this._current.geometry,2)};g.readUnquantizedGeometry=function(){var k=this.readGeometry();if("esriGeometryPoint"===this.geometryType||!k)return k;k=k.clone();t(k);return k};g.readHydratedGeometry=function(){var k=this._current.geometry;if(!k)return null;k=k.clone();z.isSome(this._transform)&&y.unquantizeOptimizedGeometry(k,k,this.hasZ,this.hasM,this._transform);
return k};g.getXHydrate=function(){const k=this._current.geometry.coords[0],n=this.getQuantizationTransform();return z.isNone(n)?k:k*n.scale[0]+n.translate[0]};g.getYHydrate=function(){const k=this._current.geometry.coords[1],n=this.getQuantizationTransform();return z.isNone(n)?k:n.translate[1]-k*n.scale[1]};g.getX=function(){return this._current.geometry.coords[0]*this._sx+this._tx};g.getY=function(){return this._current.geometry.coords[1]*this._sy+this._ty};g.readGeometry=function(){if(!this._current.hasGeometry)return null;
const k=this._current.geometry.clone();if(k.isPoint)return k.coords[0]=k.coords[0]*this._sx+this._tx,k.coords[1]=k.coords[1]*this._sy+this._ty,k;let n=0;for(const h of k.lengths)k.coords[2*n]=k.coords[2*n]*this._sx+this._tx,k.coords[2*n+1]=k.coords[2*n+1]*this._sy+this._ty,n+=h;return k};g.readCentroid=function(){if(!this._current.hasGeometry)return null;if(!this._current.centroid){var k=this._computeCentroid();if(!k)return null;k.coords[0]=(k.coords[0]-this._tx)/this._sx;k.coords[1]=(k.coords[1]-
this._ty)/this._sy;this._current.centroid=k}k=this._current.centroid.clone();k.coords[0]=k.coords[0]*this._sx+this._tx;k.coords[1]=k.coords[1]*this._sx+this._ty;return k};g._readAttribute=function(k,n){var h=this._current.attributes[k];if(void 0!==h)return null!=h&&n&&this._dateFields.has(k)?new Date(h):h;h=this.readAttributes();k=k.toLocaleLowerCase().trim();for(const f in h)if(f.toLocaleLowerCase().trim()===k)return k=this._current.attributes[f],null!=k&&n&&this._dateFields.has(f)?new Date(k):k};
g.copyInto=function(k){v.prototype.copyInto.call(this,k);k._featureIndex=this._featureIndex;k._transform=this._transform;k._dateFields=this._dateFields};g._readAttributes=function(){return this._current.attributes};c._createClass(q,[{key:"_current",get:function(){return this._features[this._featureIndex]}},{key:"geometryType",get:function(){return this._geometryType}},{key:"hasFeatures",get:function(){return!!this._features.length}},{key:"hasNext",get:function(){return this._featureIndex+1<this._features.length}},
{key:"exceededTransferLimit",get:function(){return this._exceededTransferLimit}},{key:"hasZ",get:function(){return!1}},{key:"hasM",get:function(){return!1}}]);return q}(r.FeatureSetReader);p.FeatureSetReaderJSON=l;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/views/2d/layers/features/support/FeatureSetReaderPBF":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/Error ../../../../../core/Logger ../../../../../core/maybe ../../../../../core/pbf ../../../../../layers/graphics/featureConversionUtils ../../../../../layers/graphics/OptimizedFeature ../../../../../layers/graphics/OptimizedGeometry ./FeatureSetReader ./FeatureSetReaderPBFHeader".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k){function n(f){var b=f.getLength();for(b=f.pos()+b;f.pos()<b&&f.next();)switch(f.tag()){case 1:return f.getString();case 2:return f.getFloat();case 3:return f.getDouble();case 4:return f.getSInt32();case 5:return f.getUInt32();case 6:return f.getInt64();case 7:return f.getUInt64();case 8:return f.getSInt64();case 9:return f.getBool();default:return f.skip(),null}return null}const h=y.getLogger("esri.view.2d.layers.features.support.FeatureSetReaderPBF");y=function(f){function b(d,
e,u,m){d=f.call(this,d)||this;d._hasNext=!1;d._isPoints=!1;d._isPolygons=!1;d._featureIndex=-1;d._featureOffset=0;d._cache={area:0,unquantGeometry:void 0,geometry:void 0,centroid:void 0,legacyFeature:void 0,optFeature:void 0};d._geometryType=m;d._reader=e;d._header=u;d._hasNext=u.hasFeatures;d._isPoints="esriGeometryPoint"===m;d._isPolygons="esriGeometryPolygon"===m;return d}c._inheritsLoose(b,f);b.fromBuffer=function(d,e,u=!1){a:{try{const A=new t(new Uint8Array(d),new DataView(d));for(;A.next();)switch(A.tag()){case 2:b:{for(var m=
A.getMessage();m.next();)switch(m.tag()){case 1:var x=m.getMessage();break b;default:m.skip()}x=null}break a;default:A.skip()}}catch(A){d=new z("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:A}),h.error(d)}x=null}d=x;u=k.parseHeader(d,"esriGeometryPoint"===e,u);x=g.FeatureSetReader.createInstance();return new b(x,d,u,e)};var a=b.prototype;a.getSize=function(){return this.size};a.getQuantizationTransform=function(){return this._header.transform};a.getCursor=function(){return this.copy()};
a.getIndex=function(){return this._featureIndex};a.setIndex=function(d){this._cache.area=0;this._cache.unquantGeometry=void 0;this._cache.geometry=void 0;this._cache.centroid=void 0;this._cache.legacyFeature=void 0;this._cache.optFeature=void 0;this._featureIndex=d};a.getAttributeHash=function(){let d="";this._header.fields.forEach(({index:e})=>{d+=this._readAttributeAtIndex(e)+"."});return d};a.getObjectId=function(){return this._readAttributeAtIndex(this._header.objectIdFieldIndex)};a.getDisplayId=
function(){return this._header.displayIds[this._featureIndex]};a.setDisplayId=function(d){this._header.displayIds[this._featureIndex]=d};a.getGroupId=function(){return this._header.groupIds[this._featureIndex]};a.setGroupId=function(d){this._header.groupIds[this._featureIndex]=d};a.readLegacyFeature=function(){if(void 0===this._cache.legacyFeature){var d,e=this.readCentroid();e={attributes:this.readAttributes(),geometry:this._isPoints?this.readLegacyPointGeometry():this.readLegacyGeometry(),centroid:null!=
(d=e&&{x:e.coords[0],y:e.coords[1]})?d:null};return this._cache.legacyFeature=e}return this._cache.legacyFeature};a.readOptimizedFeature=function(){if(void 0===this._cache.optFeature){const d=new v(this.readGeometry(),this.readAttributes(),this.readCentroid());d.objectId=this.getObjectId();d.displayId=this.getDisplayId();return this._cache.optFeature=d}return this._cache.optFeature};a.getXHydrate=function(){const d=this._header.centroid[2*this._featureIndex],e=this.getQuantizationTransform();return r.isNone(e)?
d:d*e.scale[0]+e.translate[0]};a.getYHydrate=function(){const d=this._header.centroid[2*this._featureIndex+1],e=this.getQuantizationTransform();return r.isNone(e)?d:e.translate[1]-d*e.scale[1]};a.getX=function(){return this._header.centroid[2*this._featureIndex]*this._sx+this._tx};a.getY=function(){return this._header.centroid[2*this._featureIndex+1]*this._sy+this._ty};a.readLegacyPointGeometry=function(){const d=this.getX(),e=this.getY();return{x:d,y:e}};a.readLegacyGeometry=function(){const d=this.readGeometry();
return l.convertToGeometry(d,this.geometryType,!1,!1)};a.readLegacyCentroid=function(){const d=this.readCentroid();if(!d)return null;const [e,u]=d.coords;return{x:e,y:u}};a.readGeometryArea=function(){this._cache.area||this.readGeometry();return this._cache.area};a.readUnquantizedGeometry=function(){if(void 0===this._cache.unquantGeometry){var d=this.readGeometry();if(!d)return this._cache.unquantGeometry=null;d=d.clone();const e=d.lengths,u=d.coords;for(let m=0,x=2;m<e.length;m++,x+=2){const A=e[m];
for(let D=1;D<A;D+=1,x+=2)u[x]+=u[x-2],u[x+1]+=u[x-1]}return this._cache.unquantGeometry=d}return this._cache.unquantGeometry};a.readHydratedGeometry=function(){if(this._isPoints){if(268435455===this._header.centroid[2*this._featureIndex])return null;var d=this.getXHydrate(),e=this.getYHydrate();return new q([],[d,e])}d=this.readGeometry();if(!d)return null;d=d.clone();e=this.getQuantizationTransform();r.isSome(e)&&l.unquantizeOptimizedGeometry(d,d,this.hasZ,this.hasM,e);return d};a.readGeometry=
function(){if(void 0===this._cache.geometry){var d=null;if(this._isPoints){if(268435455===this._header.centroid[2*this._featureIndex])return null;d=this.getX();var e=this.getY();d=new q([],[d,e])}else{e=this._header.offsets.geometry[this._featureIndex];const u=this._reader;if(0===e)return null;u.move(e);try{d=this._parseGeometry(u)}catch(m){return console.error("Failed to parse geometry!",m),null}}return this._cache.geometry=d}return this._cache.geometry};a.readCentroid=function(){if(void 0===this._cache.centroid){var d=
null;d=this._header.centroid[2*this._featureIndex]+this._tx;const e=this._header.centroid[2*this._featureIndex+1]+this._ty;if(268435455===d){if(d=this._computeCentroid())this._header.centroid[2*this._featureIndex]=d.coords[0]-this._tx,this._header.centroid[2*this._featureIndex+1]=d.coords[1]-this._ty}else d=new q([],[d,e]);return this._cache.centroid=d}return this._cache.centroid};a.copy=function(){var d=this._reader.clone();d=new b(this.instance,d,this._header,this.geometryType);this.copyInto(d);
return d};a.next=function(){this._cache.area=0;this._cache.unquantGeometry=void 0;this._cache.geometry=void 0;this._cache.centroid=void 0;this._cache.legacyFeature=void 0;for(this._cache.optFeature=void 0;++this._featureIndex<this.size&&!this._getExists(););return this._featureIndex<this.size};a._readAttribute=function(d,e){d=this._header.hasField(d)?d:d.toLowerCase().trim();var u=this._header.getFieldIndex(d);if(null!=u)return u=this._readAttributeAtIndex(u),e&&null!=u?this._header.isDateField(d)?
new Date(u):u:u};a._readAttributes=function(){const d={};this._header.fields.forEach(({fieldName:e,index:u})=>{d[e]=this._readAttributeAtIndex(u)});return d};a.copyInto=function(d){f.prototype.copyInto.call(this,d);d._featureIndex=this._featureIndex;d._featureOffset=this._featureOffset;d._hasNext=this._hasNext};a._readAttributeAtIndex=function(d){const e=this._reader;e.move(this._header.offsets.attributes[this._featureIndex*this._header.fieldCount+d]);return n(e)};a._preprocessPolygon=function(d,
e){let u=0,m=0,x=0;var A=!1,D=!1;let B=!1,C=-1;const w=[];let E=0,I=!1;for(let L=0;L<e.length;L++){const P=e[L];var F=d[2*u],H=d[2*u+1],K=0;for(var G=1;G<P;G++){const R=F+d[2*(u+G)],S=H+d[2*(u+G)+1],M=(R-F)*(S+H);F=R;H=S;K+=.5*M}(F=0<K)&&I&&(m+=P);F||(C++,I=!1);if(1E6<=C)break;E+=K;A&&F&&D&&(B=!0);d[2*x]=d[2*m];d[2*x++ +1]=d[2*m++ +1];A=1;D=d[2*m];K=d[2*m++ +1];for(F=2;F<P;F++)H=d[2*m],G=d[2*m++ +1],0===D*G-H*K&&0<D*H+K*G?(D+=H,K+=G):(d[2*x]=D,d[2*x++ +1]=K,A++,D=H,K=G);d[2*x]=D;d[2*x++ +1]=K;A++;
w.push(A);A=!1;D=!0;u+=P}return w.length?(this._cache.area=Math.abs(E),new q(w,d,B)):null};a._parseGeometry=function(d){var e=d.getLength();const u=d.pos()+e;e=[];const m=[];for(;d.pos()<u&&d.next();)switch(d.tag()){case 2:var x=d.getUInt32();for(x=d.pos()+x;d.pos()<x;)m.push(d.getUInt32());break;case 3:x=d.getUInt32();for(x=d.pos()+x;d.pos()<x;)e.push(d.getSInt32()),e.push(d.getSInt32()),this.hasZ&&d.getSInt32(),this.hasM&&d.getSInt32();break;default:d.skip()}d=0;for(const A of m)e[2*d]+=this._tx,
e[2*d+1]+=this._ty,d+=A;return this._isPolygons?this._preprocessPolygon(e,m):new q(m,e)};c._createClass(b,[{key:"geometryType",get:function(){return this._geometryType}},{key:"size",get:function(){return this._header.featureCount}},{key:"hasZ",get:function(){return!1}},{key:"hasM",get:function(){return!1}},{key:"stride",get:function(){return 2+(this.hasZ?1:0)+(this.hasM?1:0)}},{key:"hasFeatures",get:function(){return this._header.hasFeatures}},{key:"hasNext",get:function(){return this._hasNext}},
{key:"exceededTransferLimit",get:function(){return this._header.exceededTransferLimit}}]);return b}(g.FeatureSetReader);p.FeatureSetReaderPBF=y;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/views/2d/layers/features/support/FeatureSetReaderPBFHeader":function(){define(["exports","../../../../../core/Error","../../../../../rest/query/operations/pbfFeatureServiceParser"],function(p,c,z){let y=function(){function r(){this.fieldMap=new Map;this.fields=[];this.hasFeatures=!1;this.objectIdFieldIndex=
this.featureCount=this.fieldCount=0;this.offsets={attributes:[],geometry:[]};this.centroid=[]}var t=r.prototype;t.hasField=function(l){return this.fieldMap.has(l)};t.isDateField=function(l){var v;return null==(v=this.fieldMap.get(l))?void 0:v.isDate};t.getFieldIndex=function(l){var v;return null==(v=this.fieldMap.get(l))?void 0:v.index};return r}();p.FeatureSetHeader=y;p.parseHeader=function(r,t,l=!1){const v=r.pos(),q=new y;let g=0,k=0,n=null,h=null,f=null,b=!1;for(;r.next();)switch(r.tag()){case 1:n=
r.getString();break;case 3:h=r.getString();break;case 12:f=r.processMessage(z.parseTransform);break;case 9:q.exceededTransferLimit=r.getBool();if(q.exceededTransferLimit){q.offsets.geometry=l?new Float64Array(8E3):new Int32Array(8E3);q.centroid=l?new Float64Array(16E3):new Int32Array(16E3);for(var a=0;a<q.centroid.length;a++)q.centroid[a]=268435455}break;case 13:a=r;var d=a.getLength();d=a.pos()+d;for(var e={name:"",isDate:!1};a.pos()<d&&a.next();)switch(a.tag()){case 1:e.name=a.getString();break;
case 2:"esriFieldTypeDate"===z.parseFieldType(a.getEnum())&&(e.isDate=!0);break;default:a.skip()}a=e;e=a.name;d=a.name.toLowerCase().trim();e={fieldName:e,index:g++,isDate:a.isDate};q.fields.push(e);q.fieldMap.set(a.name,e);q.fieldMap.set(d,e);break;case 15:a=r.getLength();a=r.pos()+a;q.exceededTransferLimit||(d=q.centroid,q.offsets.geometry.push(0),d.push(268435455),d.push(268435455));!b&&q.exceededTransferLimit&&(b=!0,q.offsets.attributes=l?new Float64Array(8E3*g):new Uint32Array(8E3*g));for(d=
k*g;r.pos()<a&&r.next();)switch(r.tag()){case 1:b?q.offsets.attributes[d++]=r.pos():q.offsets.attributes.push(r.pos());e=r.getLength();r.skipLen(e);break;case 2:if(t)for(e=r.getLength(),e=r.pos()+e;r.pos()<e&&r.next();)switch(r.tag()){case 3:r.getUInt32();var u=r.getSInt64(),m=r.getSInt64();q.centroid[2*k]=u;q.centroid[2*k+1]=m;break;default:r.skip()}else q.offsets.geometry[k]=r.pos(),e=r.getLength(),r.skipLen(e);break;case 4:e=r.getLength();for(e=r.pos()+e;r.pos()<e&&r.next();)switch(r.tag()){case 3:r.getUInt32();
u=r.getSInt64();m=r.getSInt64();q.centroid[2*k]=u;q.centroid[2*k+1]=m;break;default:r.skip()}break;default:r.skip()}k++;q.hasFeatures=!0;break;default:r.skip()}t=n||h;if(!t)throw new c("FeatureSet has no objectId or globalId field name");q.featureCount=k;q.fieldCount=g;q.objectIdFieldIndex=q.getFieldIndex(t);q.transform=f;q.displayIds=new Uint32Array(q.featureCount);q.groupIds=new Uint16Array(q.featureCount);r.move(v);return q};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/views/2d/layers/features/sources/DataTileSource":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../TimeExtent ../../../../../core/Evented ../../../../../core/has ../../../../../core/maybe ../../../../../core/promiseUtils ../../../../../core/accessorSupport/diffUtils ../../../../../rest/support/Query ./DataTileSubscription".split(" "),
function(p,c,z,y,r,t,l,v,q,g){function k(h,f){const b=new Set;h&&h.forEach(a=>b.add(a));f&&f.forEach(a=>b.add(a));return b.has("*")?["*"]:Array.from(b)}let n=function(){function h(b){this.events=new y;this._resolver=l.createResolver();this._didEdit=!1;this._subscriptions=new Map;this._outSR=b.outSR;this._serviceInfo=b.serviceInfo;this._onTileUpdateMessage=b.onMessage}var f=h.prototype;f.destroy=function(){};f._onMessage=function(){var b=c._asyncToGenerator(function*(a){var d;const e=this._subscriptions.get(a.id);
if(e)return a={...a,remove:null!=(d=a.remove)?d:[],status:a.status},this._onTileUpdateMessage(a,e.options)});return function(a){return b.apply(this,arguments)}}();f.update=function(b,a){var d,e=a.fields.length;a.outFields=k(null==(d=this._schema)?void 0:d.outFields,a.outFields);a.outFields=a.outFields.length>=.75*e?["*"]:a.outFields;a.outFields.sort();if(d=v.diff(this._schema,a)){r("esri-2d-update-debug")&&console.debug("Applying Update - Source:",d);e={returnCentroid:r("esri-2d-query-centroid-enabled")&&
"esriGeometryPolygon"===this._serviceInfo.geometryType,returnGeometry:!0,outFields:a.outFields,outSpatialReference:this._outSR,orderByFields:[`${this._serviceInfo.objectIdField} ASC`],where:a.definitionExpression||"1\x3d1",gdbVersion:a.gdbVersion,historicMoment:a.historicMoment,timeExtent:z.fromJSON(a.timeExtent)};var u=this._schema&&v.hasDiff(d,"outFields");this._schema&&v.hasDiffAny(d,["timeExtent","definitionExpression","gdbVersion","historicMoment"])&&(b.why.mesh.push("Layer filter changed"),
b.why.source.push("Layer filter changed"),b.mesh=!0,b.source=!0,b.queryFilter=!0);u&&(b.why.source.push("Layer required fields changed"),b.source=!0);v.diff(e,this._queryInfo)&&(this._queryInfo=e);this._schema=a;this._resolver.resolve()}};f.whenInitialized=function(){return this._resolver.promise};f.applyUpdate=function(){var b=c._asyncToGenerator(function*(a){a.queryFilter||a.source&&this._didEdit?(this.refresh(),this._didEdit=!1):(this._subscriptions.forEach(d=>d.applyUpdate(a)),yield this.resend())});
return function(a){return b.apply(this,arguments)}}();f.refresh=function(){for(const b of this._tiles())this.unsubscribe(b),this.subscribe(b)};f.subscribe=function(b){const a=new g.DataTileSubscription(b);this._subscriptions.set(b.id,a)};f.unsubscribe=function(b){const a=this.get(b.id);t.isSome(a)&&a.abort();this._subscriptions.delete(b.id)};f.createQuery=function(b={}){return new q({...this._queryInfo,historicMoment:this._queryInfo.historicMoment?new Date(this._queryInfo.historicMoment):null,...b})};
f.get=function(b){return this._subscriptions.has(b)?this._subscriptions.get(b):null};f.queryLastEditDate=function(){var b=c._asyncToGenerator(function*(){throw Error("Service does not support query type");});return function(){return b.apply(this,arguments)}}();f.query=function(){var b=c._asyncToGenerator(function*(a){throw Error("Service does not support query");});return function(a){return b.apply(this,arguments)}}();f._tiles=function*(){const b=Array.from(this._subscriptions.values());for(const a of b)yield a.tile};
f.edit=function(){var b=c._asyncToGenerator(function*(a,d){var e=this,u=Array.from(this._subscriptions.values());const m=u.map(({tile:x})=>x);for(const x of u)x.removeIds(d);a.length&&(u=m.map(x=>{const A=this.createTileQuery(x);A.objectIds=a;return{tile:x,query:A}}).map(function(){var x=c._asyncToGenerator(function*({tile:A,query:D}){return{tile:A,result:yield e.query(D),query:D}});return function(A){return x.apply(this,arguments)}}()),u=(yield l.eachAlwaysValues(u)).map(function(){var x=c._asyncToGenerator(function*({tile:A,
result:D}){(D.hasFeatures||d.length||a.length)&&(A=e._subscriptions.get(A.key.id))&&A.edit(D,a)});return function(A){return x.apply(this,arguments)}}()),yield l.eachAlways(u));this._didEdit=!0});return function(a,d){return b.apply(this,arguments)}}();return h}();p.DataTileSource=n;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/views/2d/layers/features/sources/DataTileSubscription":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/CircularArray ../../../../../core/maybe ../support/FeatureSetReaderJSON ../support/UpdateToken".split(" "),
function(p,c,z,y,r,t){let l=function(){function v(g){this.requests={done:[],stream:new z(10)};this._edits=null;this._abortController=new AbortController;this.didSend=this._done=!1;this.tile=g}var q=v.prototype;q.end=function(){this._done=!0};q.clear=function(){this.requests.done=[]};q.applyUpdate=function(g){this.requests.done.forEach(k=>k.message.status.unset(g));y.isSome(this._edits)&&this._edits.status.unset(g)};q.add=function(g){var k;g.message.status=null!=(k=g.message.status)?k:t.UpdateToken.empty();
g.message.end&&this.requests.done.forEach(n=>{y.isSome(n.message)&&n.message.end&&(n.message.end=!1)});this.requests.done.push(g)};q.edit=function(g,k){const n=g.getQuantizationTransform(),h=g.geometryType,f=Array.from(g.features()),b=f.map(a=>a.objectId);k=[...k,...b];this.removeIds(k);this._invalidate();y.isNone(this._edits)?this._edits={type:"append",addOrUpdate:r.FeatureSetReaderJSON.fromOptimizedFeatures(f,h,y.unwrap(n)),id:this.tile.id,status:t.UpdateToken.empty(),end:!0}:(this.requests.done.forEach(a=>
a.message.end=!1),y.unwrap(this._edits.addOrUpdate).append(g.features()))};q.readers=function*(){for(const {message:g}of this.requests.done)y.isSome(g.addOrUpdate)&&(yield g.addOrUpdate);y.isSome(this._edits)&&y.isSome(this._edits.addOrUpdate)&&(yield this._edits.addOrUpdate)};q._invalidate=function(){for(const g of this.requests.done)g.message.status=t.UpdateToken.empty();y.isSome(this._edits)&&(this._edits.status=t.UpdateToken.empty())};q.removeIds=function(g){this._invalidate();for(const {message:k}of this.requests.done){const n=
k.addOrUpdate;y.isSome(n)&&(n.removeIds(g),n.isEmpty&&(k.addOrUpdate=null))}y.isSome(this._edits)&&y.isSome(this._edits.addOrUpdate)&&this._edits.addOrUpdate.removeIds(g);this.requests.done=this.requests.done.filter(k=>k.message.addOrUpdate||k.message.end)};q.abort=function(){this._abortController.abort()};c._createClass(v,[{key:"signal",get:function(){return this._abortController.signal}},{key:"options",get:function(){return{signal:this._abortController.signal}}},{key:"empty",get:function(){return!this.requests.done.length}},
{key:"edits",get:function(){return this._edits}},{key:"done",get:function(){return this._done}}]);return v}();p.DataTileSubscription=l;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/views/2d/layers/features/support/UpdateToken":function(){define(["exports"],function(p){let c=function(){function z(){this.source=!1;this.targets={feature:!1,aggregate:!1};this.storage={filters:!1,data:!1};this.queryFilter=this.mesh=!1;this.why={mesh:[],source:[]}}z.create=function(r){const t=new z;for(const l in r){const v=
r[l];if("object"===typeof v)for(const q in v)t[l][q]=v[q];t[l]=v}return t};z.empty=function(){return z.create({})};z.all=function(){return z.create({source:!0,targets:{feature:!0,aggregate:!0},storage:{filters:!0,data:!0},mesh:!0})};var y=z.prototype;y.unset=function(r){r.source&&(this.source=!1);r.targets.feature&&(this.targets.feature=!1);r.targets.aggregate&&(this.targets.aggregate=!1);r.storage.filters&&(this.storage.filters=!1);r.storage.data&&(this.storage.data=!1);r.mesh&&(this.mesh=!1);r.queryFilter&&
(this.queryFilter=!1)};y.any=function(){return this.source||this.mesh||this.storage.filters||this.storage.data||this.targets.feature||this.targets.aggregate||this.queryFilter};y.describe=function(){let r=0,t="";if(this.mesh){r+=20;t+="-\x3e (20) Mesh needs update\n";for(const l of this.why.mesh)t+=`    + ${l}\n`}if(this.source){r+=10;t+="-\x3e (10) The source needs update\n";for(const l of this.why.source)t+=`    + ${l}\n`}this.targets.feature&&(r+=5,t+="-\x3e (5) Feature target parameters changed\n");
this.storage.filters&&(r+=5,t+="-\x3e (5) Feature filter parameters changed\n");this.targets.aggregate&&(r+=4,t+="-\x3e (4) Aggregate target parameters changed\n");this.storage.data&&(r+=1,t+="-\x3e (1) Texture storage parameters changed");console.debug(`Applying ${5>r?"Fastest":10>r?"Fast":15>r?"Moderate":20>r?"Slow":"Very Slow"} update of cost ${r}/45 `);console.debug(t)};y.toJSON=function(){return{queryFilter:this.queryFilter,source:this.source,targets:this.targets,storage:this.storage,mesh:this.mesh}};
return z}();p.UpdateToken=c;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/views/support/QueueProcessor":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/maybe ../../core/promiseUtils ../../core/Queue ../../core/scheduling".split(" "),function(p,c,z,y,r,t){let l=function(q,g){this.item=q;this.controller=g;this.promise=null},v=function(){function q(k){this._deferreds=new Map;this._controllers=new Map;this._processingItems=new Map;this._isPaused=!1;this._task=
this._schedule=null;this.concurrency=1;k.concurrency&&(this.concurrency=k.concurrency);this._queue=new r(k.peeker);this.process=k.process;const n=k.scheduler;k.priority&&z.isSome(n)&&(this._task=n.registerTask(k.priority,this))}var g=q.prototype;g.destroy=function(){this.clear();this._schedule&&(this._schedule.remove(),this._schedule=null);this._task&&(this._task.remove(),this._task=null)};g.abort=function(k){(k=this._controllers.get(k))&&k.abort()};g.clear=function(){this._queue.clear();const k=
[];this._controllers.forEach(n=>k.push(n));this._controllers.clear();k.forEach(n=>n.abort());this._processingItems.clear();this._cancelNext()};g.forEach=function(k){this._deferreds.forEach((n,h)=>k(h))};g.get=function(k){return(k=this._deferreds.get(k))?k.promise:void 0};g.isOngoing=function(k){return this._processingItems.has(k)};g.has=function(k){return this._deferreds.has(k)};g.pause=function(){this._isPaused||(this._isPaused=!0,this._cancelNext())};g.push=function(k,n){const h=this.get(k);if(h)return h;
const f=y.createAbortController();let b=null;n&&(b=y.onAbort(n,()=>f.abort()));const a=()=>{d.remove();z.isSome(b)&&b.remove();this._deferreds.delete(k);this._controllers.delete(k);this._queue.remove(k);this._processingItems.delete(k);this._scheduleNext()},d=y.onAbortOrThrow(f.signal,()=>{const u=this._processingItems.get(k);u&&u.controller.abort();a();e.reject(y.createAbortError())}),e=y.createDeferred();this._deferreds.set(k,e);this._controllers.set(k,f);e.promise.then(a,a);this._queue.push(k);
this._scheduleNext();return e.promise};g.last=function(){return this._queue.last()};g.peek=function(){return this._queue.peek()};g.popLast=function(){return this._queue.popLast()};g.reset=function(){const k=[];this._processingItems.forEach(n=>k.push(n));this._processingItems.clear();for(const n of k)this._queue.push(n.item),n.controller.abort();this._scheduleNext()};g.resume=function(){this._isPaused&&(this._isPaused=!1,this._scheduleNext())};g.takeAll=function(){const k=[];for(;this._queue.length;)k.push(this._queue.pop());
this.clear();return k};g.runTask=function(k){for(;!k.done&&0<this._queue.length&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),k.madeProgress()};g._scheduleNext=function(){this._task||this._isPaused||this._schedule||(this._schedule=t.schedule(()=>{this._schedule=null;this._next()}))};g._next=function(){for(;0<this._queue.length&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())};g._cancelNext=function(){this._schedule&&(this._schedule.remove(),
this._schedule=null)};g._processResult=function(k,n){this._canProcessFulfillment(k)&&(this._scheduleNext(),this._deferreds.get(k.item).resolve(n))};g._processError=function(k,n){this._canProcessFulfillment(k)&&(this._scheduleNext(),this._deferreds.get(k.item).reject(n))};g._canProcessFulfillment=function(k){return this._deferreds.get(k.item)&&this._processingItems.get(k.item)===k?!0:!1};g._process=function(k){if(!z.isNone(k)){var n=y.createAbortController(),h=new l(k,n);this._processingItems.set(k,
h);try{var f=this.process(k,n.signal)}catch(b){this._processError(h,b)}y.isPromiseLike(f)?(h.promise=f,f.then(b=>this._processResult(h,b),b=>this._processError(h,b))):this._processResult(h,f)}};c._createClass(q,[{key:"length",get:function(){return this._processingItems.size+this._queue.length}},{key:"running",get:function(){return!this._isPaused&&0<this._queue.length&&this._processingItems.size<this.concurrency}},{key:"test",get:function(){return{update:k=>this.runTask(k)}}}]);return q}();p.QueueProcessor=
v;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/core/Queue":function(){define(["../chunks/_rollupPluginBabelHelpers","./maybe"],function(p,c){return function(){function z(r=t=>t.values().next().value){this._peeker=r;this._items=new Set}var y=z.prototype;y.clear=function(){this._items.clear()};y.last=function(){if(0!==this._items.size){for(var r of this._items);return r}};y.peek=function(){if(0!==this._items.size)return this._peeker(this._items)};y.push=function(r){this.contains(r)||this._items.add(r)};
y.contains=function(r){return this._items.has(r)};y.pop=function(){if(0!==this.length){var r=this.peek();this._items.delete(c.assumeNonNull(r));return r}};y.popLast=function(){if(0!==this.length){var r=this.last();this._items.delete(c.assumeNonNull(r));return r}};y.remove=function(r){this._items.delete(r)};y.filter=function(r){this._items.forEach(t=>{r(t)||this._items.delete(t)});return this};p._createClass(z,[{key:"length",get:function(){return this._items.size}}]);return z}()})},"esri/views/2d/layers/features/sources/GeoEventSource":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/has ../../../../../core/maybe ../../../../../chunks/rbush ../../../../../layers/graphics/featureConversionUtils ../../../../../layers/graphics/OptimizedGeometry ../../../../../layers/graphics/data/StreamFeatureManager ../../../../../layers/graphics/sources/connections/createConnection ./DataTileSource ../support/FeatureSetReaderJSON ../support/UpdateToken".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k,n){function h(d,e){const u=d.weakClone(),m=t.quantizeX(e,d.geometry.coords[0]);d=t.quantizeY(e,d.geometry.coords[1]);u.geometry=new l([],[m,d]);return u}function f(d){switch(d){case "esriGeometryPoint":return h;default:return(e,u)=>{const m=e.weakClone(),x=new l;e=t.quantizeOptimizedGeometry(x,e.geometry,!1,!1,d,u,!1,!1);m.geometry=e;return m}}}function b(d){switch(d){case "esriGeometryPoint":return e=>({minX:e.geometry.coords[0],minY:e.geometry.coords[1],maxX:e.geometry.coords[0],
maxY:e.geometry.coords[1]});default:return e=>{let u=Infinity,m=Infinity,x=-Infinity,A=-Infinity;e.geometry.forEachVertex((D,B)=>{u=Math.min(u,D);m=Math.min(m,B);x=Math.max(x,D);A=Math.max(A,B)});return{minX:u,minY:m,maxX:x,maxY:A}}}}let a=function(){function d(u,m){this.onUpdate=u;this._geometryType=m;this._objectIdToFeature=new Map}var e=d.prototype;e.add=function(u){this._objectIdToFeature.set(u.objectId,u);this._index=null};e.get=function(u){return this._objectIdToFeature.has(u)?this._objectIdToFeature.get(u):
null};e.forEach=function(u){this._objectIdToFeature.forEach(u)};e.search=function(u){if(!this._index){{var m=this._features;const x=r.rbush(9,b(this._geometryType));x.load(m);m=x}this._index=m}return this._index.search({minX:u.bounds[0],minY:u.bounds[1],maxX:u.bounds[2],maxY:u.bounds[3]})};e.removeById=function(u){const m=this._objectIdToFeature.get(u);return m?(this._objectIdToFeature.delete(u),this._index=null,m):null};e.update=function(u,m){this.onUpdate(u,m)};c._createClass(d,[{key:"_features",
get:function(){const u=[];this._objectIdToFeature.forEach(m=>u.push(m));return u}},{key:"size",get:function(){return this._objectIdToFeature.size}}]);return d}();z=function(d){function e(m){var x=d.call(this,m)||this;x.type="geoevent";x._dataReceiveEventEnabled=!1;x._level=0;x._updateInfo={websocket:0,client:0};var {outSR:A}=m;const {geometryType:D,objectIdField:B,timeInfo:C,purgeOptions:w,source:E,spatialReference:I,serviceFilter:F,maxReconnectionAttempts:H,maxReconnectionInterval:K,updateInterval:G}=
m.serviceInfo,L=new a(x._onUpdate.bind(c._assertThisInitialized(x)),D),P=new v["default"](L,B,C,w);A=q.createConnection(E,I,A,D,F,H,K);x._store=L;x._manager=P;x._connection=A;x._quantize=f(D);x._handles=[x._connection.on("feature",S=>x._onFeature(S)),x._connection.watch("connectionStatus",S=>x.events.emit("connectionStatus",S)),x._connection.watch("errorString",S=>x.events.emit("errorString",S))];let R=performance.now();x._updateIntervalId=setInterval(()=>{var S=performance.now(),M=S-R;2500<M&&(R=
S,S=Math.round(x._updateInfo.client/(M/1E3)),M=Math.round(x._updateInfo.websocket/(M/1E3)),x._updateInfo.client=0,x._updateInfo.websocket=0,x.events.emit("updateRate",{client:S,websocket:M}));m.canAcceptRequest()&&x._manager.checkForUpdates()},G);return x}c._inheritsLoose(e,d);var u=e.prototype;u.destroy=function(){d.prototype.destroy.call(this);clearInterval(this._updateIntervalId);this._handles.forEach(m=>m.remove());this._connection.destroy()};u._fetchDataTile=function(){};u.resume=function(){};
u.enableEvent=function(m,x){"data-received"===m&&(this._dataReceiveEventEnabled=x)};u.subscribe=function(m){d.prototype.subscribe.call(this,m);const x=this._subscriptions.get(m.id);this._level=m.level;const A=this._getTileFeatures(m);this._onMessage({type:"append",id:m.key.id,addOrUpdate:A,end:!0});x.didSend=!0};u.unsubscribe=function(m){d.prototype.unsubscribe.call(this,m)};u.readers=function*(m){m=this._subscriptions.get(m);const {tile:x}=m;yield this._getTileFeatures(x);for(const A of m.requests.stream.entries)y.isSome(A)&&
y.isSome(A.addOrUpdate)&&(yield A.addOrUpdate)};u.createTileQuery=function(m){throw Error("Service does not support tile  queries");};u.resend=function(){var m=c._asyncToGenerator(function*(){this._subscriptions.forEach(x=>{({tile:x}=x);x={type:"append",id:x.id,addOrUpdate:this._getTileFeatures(x),end:!0};this._onMessage(x)})});return function(){return m.apply(this,arguments)}}();u._getTileFeatures=function(m){const x=this._store.search(m).map(A=>this._quantize(A,m.transform));return k.FeatureSetReaderJSON.fromOptimizedFeatures(x,
this._serviceInfo.geometryType,m.transform)};u._onFeature=function(m){this._updateInfo.websocket++;try{this._dataReceiveEventEnabled&&this.events.emit("feature",m);const x=t.convertFromFeature(m,this._serviceInfo.geometryType,!1,!1,this._serviceInfo.objectIdField);this._manager.add(x)}catch(x){}};u._onUpdate=function(m,x){y.isSome(m)&&(this._updateInfo.client+=m.length);this._subscriptions.forEach((A,D)=>{A.didSend&&A.tile.level===this._level&&this._onMessage({type:"append",id:D,addOrUpdate:null,
clear:!0,end:!1})});this._subscriptions.forEach((A,D)=>{if(A.didSend&&A.tile.level===this._level){var B=this._getTileFeatures(A.tile);D={type:"append",id:D,addOrUpdate:B,remove:[],end:!0,status:n.UpdateToken.empty()};A.requests.stream.enqueue(D);this._onMessage(D)}})};c._createClass(e,[{key:"updating",get:function(){return!1}}]);return e}(g.DataTileSource);p.GeoEventSource=z;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/graphics/data/StreamFeatureManager":function(){define(["exports",
"../../../core/CircularArray","../../../core/mathUtils","../../../core/maybe"],function(p,c,z,y){let r=function(){function t(v,q,g,k,n=128){this._trackIdToObservations=new Map;this._idCounter=0;this._lastPurge=performance.now();this._addOrUpdated=new Map;this._removed=[];this._maxAge=0;this._timeInfo=g;this._purgeOptions=k;this.store=v;this.objectIdField=q;this.purgeInterval=n;this._useGeneratedIds="__esri_stream_id__"===this.objectIdField}var l=t.prototype;l.add=function(v){if(this._useGeneratedIds){var q=
this._nextId();v.attributes[this.objectIdField]=q;v.objectId=q}else v.objectId=v.attributes[this.objectIdField];this._addOrUpdated.set(v.objectId,v);this._maxAge=Math.max(this._maxAge,v.attributes[this._timeInfo.startTimeField]);if(this._timeInfo.trackIdField){q=v.attributes[this._timeInfo.trackIdField];if(!this._trackIdToObservations.has(q)){var g=y.isSome(this._purgeOptions)&&null!=this._purgeOptions.maxObservations?this._purgeOptions.maxObservations:1E3;g=z.clamp(g,0,1E3);this._trackIdToObservations.set(q,
new c(g))}v=this._trackIdToObservations.get(q).enqueue(v.objectId);y.isSome(v)&&(this._addOrUpdated.has(v)?this._addOrUpdated.delete(v):this._removed.push(v))}else y.isNone(this._trackIdLessObservations)&&(this._trackIdLessObservations=new c(1E5)),this._trackIdLessObservations.enqueue(v.objectId)};l.checkForUpdates=function(){const v=this._getToAdd();var q=this._getToRemove();const g=performance.now();g-this._lastPurge>=this.purgeInterval&&(this._purge(g),this._lastPurge=g);const k=[];if(y.isSome(q))for(const n of q)q=
this.store.removeById(n),y.isSome(q)&&k.push(q);if(y.isSome(v))for(const n of v)n.attributes.__esri_timestamp__=g,this.store.add(n);(v||k)&&this.store.update(v,k)};l._getToAdd=function(){if(!this._addOrUpdated.size)return null;const v=Array(this._addOrUpdated.size);let q=0;this._addOrUpdated.forEach(g=>v[q++]=g);this._addOrUpdated.clear();return v};l._getToRemove=function(){const v=this._removed;if(!this._removed.length)return null;this._removed=[];return v};l._nextId=function(){const v=this._idCounter;
this._idCounter=(this._idCounter+1)%4294967294+1;return v};l._purge=function(v){const q=this._purgeOptions;y.isSome(q)&&(this._purgeSomeByDisplayCount(q),this._purgeByAge(q),this._purgeByAgeReceived(v,q),this._purgeTracks())};l._purgeSomeByDisplayCount=function(v){if(v.displayCount){var q=this.store.size;if(q>v.displayCount){if(this._timeInfo.trackIdField)for(const g of this._trackIdToObservations.values())if(q>v.displayCount&&g.size){const k=y.unwrap(g.dequeue());this._removed.push(k);q--}if(y.isSome(this._trackIdLessObservations))for(v=
q-v.displayCount;0<v--;)q=this._trackIdLessObservations.dequeue(),y.isSome(q)&&this._removed.push(q)}}};l._purgeByAge=function(v){var q;if(v.age&&null!=(q=this._timeInfo)&&q.startTimeField){var g=this._maxAge-6E4*v.age;this.store.forEach(k=>{k.attributes[this._timeInfo.startTimeField]<g&&this._removed.push(k.objectId)})}};l._purgeByAgeReceived=function(v,q){if(q.ageReceived){var g=v-6E4*q.ageReceived;this.store.forEach(k=>{k.attributes.__esri_timestamp__<g&&this._removed.push(k.objectId)})}};l._purgeTracks=
function(){this._trackIdToObservations.forEach((v,q)=>{0===v.size&&this._trackIdToObservations.delete(q)})};return t}();p.DEFAULT_STREAM_ID_FIELD="__esri_stream_id__";p.ESRI_TIMESTAMP="__esri_timestamp__";p.default=r;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/graphics/sources/connections/createConnection":function(){define(["exports","./GeoEventConnection","./WebSocketConnection"],function(p,c,z){p.createConnection=function(y,r,t,l,v,q,g){const k=0===y.path.indexOf("wss://")||
0===y.path.indexOf("ws://");y={source:y,sourceSpatialReference:r,spatialReference:t,geometryType:l,filter:v,maxReconnectionAttempts:q,maxReconnectionInterval:g};return k?new z.WebSocketConnection(y):new c(y)};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/graphics/sources/connections/GeoEventConnection":function(){define("require ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../geometry ../../../../request ../../../../core/Error ../../../../core/Logger ../../../../core/maybe ../../../../core/promiseUtils ../../../../core/accessorSupport/decorators/property ../../../../core/has ../../../../core/accessorSupport/ensureType ../../../../core/jsonMap ../../../../core/accessorSupport/decorators/subclass ./WebSocketConnection ../../../../rest/query/operations/query ../../../../rest/support/Query ../../../../geometry/support/jsonUtils ../../../../geometry/SpatialReference".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k,n,h,f,b,a,d,e,u){const m=l.getLogger("esri.layers.graphics.sources.connections.GeoEventConnection"),x={maxQueryDepth:5,maxRecordCountFactor:3};y=function(A){function D(C){return A.call(this,{...x,...C})||this}c._inheritsLoose(D,A);var B=D.prototype;B._open=function(){var C=c._asyncToGenerator(function*(){var w=yield this._fetchServiceDefinition(this._config.source);w.timeInfo.trackIdField||m.warn("GeoEvent service was configured without a TrackIdField. This may result in certain functionality being disabled. The purgeOptions.maxObservations property will have no effect.");
w=yield this._fetchWebSocketUrl(w.streamUrls,this._config.spatialReference);this._buddyServicesQuery||(this._buddyServicesQuery=this._queryBuddyServices());yield this._buddyServicesQuery;yield this._tryCreateWebSocket(w);const {filter:E,outFields:I}=this._config;this.destroyed||this._setFilter(E,I)});return function(){return C.apply(this,arguments)}}();B._onMessage=function(C){let w;try{w=this._enrich(JSON.parse(C.data)),this._featureZScaler&&this._featureZScaler(w.geometry)}catch(E){m.error(new t("geoevent-connection",
"Failed to parse message",E));return}this.onFeature(w)};B._fetchServiceDefinition=function(){var C=c._asyncToGenerator(function*(w){return this._serviceDefinition=w=(yield r(w.path,{query:{f:"json"},responseType:"json"})).data});return function(w){return C.apply(this,arguments)}}();B._fetchWebSocketUrl=function(){var C=c._asyncToGenerator(function*(w,E){const {urls:I,token:F}=w[0];return`${this._inferWebSocketBaseUrl(I)}/subscribe?outSR=${E.wkid}${F?"\x26token\x3d"+F:""}`});return function(w,E){return C.apply(this,
arguments)}}();B._inferWebSocketBaseUrl=function(C){if(1===C.length)return C[0];for(const w of C)if(-1!==w.indexOf("wss"))return w;m.error(new t("geoevent-connection","Unable to infer WebSocket url",C));return null};B._setFilter=function(){var C=c._asyncToGenerator(function*(w,E){const I=this._websocket;if(!(v.isNone(I)||v.isNone(w)&&v.isNone(E))){w=JSON.stringify({filter:this._serializeFilter(w,E)});var F=!1,H=q.createResolver();I.onmessage=K=>{K=JSON.parse(K.data);K.filter&&(K.error&&(m.error(new t("geoevent-connection",
"Failed to set service filter",K.error)),this._set("errorString",`Could not set service filter - ${K.error}`),H.reject(K.error)),I.onmessage=this._onMessage.bind(this),F=!0,H.resolve())};I.send(w);setTimeout(()=>{F||(this.destroyed||this._websocket!==I||m.error(new t("geoevent-connection","Server timed out when setting filter")),H.reject())},1E4);return H.promise}});return function(w,E){return C.apply(this,arguments)}}();B._serializeFilter=function(C,w){const E={};if(v.isNone(C)&&v.isNone(w))return E;
if(v.isSome(C)&&C.geometry)try{const I=e.fromJSON(C.geometry);if("extent"!==I.type)throw new t(`Expected extent but found type ${I.type}`);E.geometry=JSON.stringify(I.shiftCentralMeridian())}catch(I){m.error(new t("geoevent-connection","Encountered an error when setting connection geometryDefinition",I))}v.isSome(C)&&C.where&&"1 \x3d 1"!==C.where&&(E.where=C.where);v.isSome(w)&&(E.outFields=w.join(","));return E};B._enrich=function(C){if(!this._relatedFeatures)return C;const w=C.attributes[this._serviceDefinition.relatedFeatures.joinField];
if(!this._relatedFeatures.has(w))return m.warn("geoevent-connection","Feature join failed. Is the join field configured correctly?",C),C;const {attributes:E,geometry:I}=this._relatedFeatures.get(w);for(const F in E)C.attributes[F]=E[F];I&&(C.geometry=I);C.geometry||C.centroid||m.error(new t("geoevent-connection","Found malformed feature - no geometry found",C));return C};B._queryBuddyServices=function(){var C=c._asyncToGenerator(function*(){try{const {relatedFeatures:w,keepLatestArchive:E}=this._serviceDefinition,
I=this._queryRelatedFeatures(w),F=this._queryArchive(E);yield I;const H=yield F;if(H)for(const K of H.features)this.onFeature(this._enrich(K))}catch(w){m.error(new t("geoevent-connection","Encountered an error when querying buddy services",{error:w}))}});return function(){return C.apply(this,arguments)}}();B._queryRelatedFeatures=function(){var C=c._asyncToGenerator(function*(w){w&&(w=yield this._queryBuddy(w.featuresUrl),this._addRelatedFeatures(w))});return function(w){return C.apply(this,arguments)}}();
B._queryArchive=function(){var C=c._asyncToGenerator(function*(w){if(w)return this._queryBuddy(w.featuresUrl)});return function(w){return C.apply(this,arguments)}}();B._queryBuddy=function(){var C=c._asyncToGenerator(function*(w){const E=new (yield new Promise(function(P,R){p(["../../../FeatureLayer"],function(S){P(Object.freeze({__proto__:null,"default":S}))},R)})).default({url:w});var {capabilities:I}=yield E.load();const F=I.query.supportsMaxRecordCountFactor,H=I.query.supportsPagination;I=I.query.supportsCentroid;
const K=this._config.maxRecordCountFactor;var G=E.capabilities.query.maxRecordCount;G=F?G*K:G;const L=new d;L.outFields=v.unwrapOr(this._config.outFields,["*"]);L.where=v.unwrapOr(v.get(this._config.filter,"where"),"1\x3d1");L.returnGeometry=!0;L.returnExceededLimitFeatures=!0;L.outSpatialReference=u.fromJSON(this._config.spatialReference);I&&(L.returnCentroid=!0);F&&(L.maxRecordCountFactor=K);if(H)return L.num=G,E.destroy(),this._queryPages(w,L);w=yield a.executeQuery(w,L,this._config.sourceSpatialReference);
E.destroy();return w.data});return function(w){return C.apply(this,arguments)}}();B._queryPages=function(){var C=c._asyncToGenerator(function*(w,E,I=[],F=0){E.start=v.isSome(E.num)?F*E.num:null;const {data:H}=yield a.executeQuery(w,E,this._config.sourceSpatialReference);if(H.exceededTransferLimit&&F<this._config.maxQueryDepth)return H.features.forEach(K=>I.push(K)),this._queryPages(w,E,I,F+1);I.forEach(K=>H.features.push(K));return H});return function(w,E){return C.apply(this,arguments)}}();B._addRelatedFeatures=
function(C){const w=new Map;C=C.features;const E=this._serviceDefinition.relatedFeatures.joinField;for(const I of C)w.set(I.attributes[E],I);this._relatedFeatures=w};return D}(b.WebSocketConnection);return y=z.__decorate([f.subclass("esri.layers.graphics.sources.connections.GeoEventConnection")],y)})},"esri/layers/graphics/sources/connections/WebSocketConnection":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../core/Error ../../../../core/Logger ../../../../core/maybe ../../../../core/promiseUtils ../../../../core/accessorSupport/decorators/property ../../../../core/has ../../../../core/accessorSupport/ensureType ../../../../core/jsonMap ../../../../core/accessorSupport/decorators/subclass ./StreamConnection ../../../../rest/query/operations/zscale".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k,n,h,f){const b=r.getLogger("esri.layers.graphics.sources.connections.WebSocketConnection");p.ReadyState=void 0;(function(a){a[a.CONNECTING=0]="CONNECTING";a[a.OPEN=1]="OPEN";a[a.CLOSING=2]="CLOSING";a[a.CLOSED=3]="CLOSED"})(p.ReadyState||(p.ReadyState={}));p.WebSocketConnection=function(a){function d(u){var m=a.call(this)||this;m.errorString=null;const {geometryType:x,spatialReference:A,sourceSpatialReference:D}=u;m._config=u;m._featureZScaler=f.getGeometryZScaler(x,
D,A);m._open();return m}c._inheritsLoose(d,a);var e=d.prototype;e._open=function(){var u=c._asyncToGenerator(function*(){yield this._tryCreateWebSocket();this.destroyed||(yield this._handshake())});return function(){return u.apply(this,arguments)}}();e.destroy=function(){t.isSome(this._websocket)&&(this._websocket.onopen=null,this._websocket.onclose=null,this._websocket.onerror=null,this._websocket.onmessage=null,this._websocket.close());this._websocket=null};e._tryCreateWebSocket=function(){var u=
c._asyncToGenerator(function*(m=this._config.source.path,x=1E3,A=0){try{this.destroyed||(this._websocket=yield this._createWebSocket(m),this.notifyChange("connectionStatus"))}catch(D){const B=x/1E3;if(this._config.maxReconnectionAttempts&&A>=this._config.maxReconnectionAttempts)b.error(new y("websocket-connection","Exceeded maxReconnectionAttempts attempts. No further attempts will be made")),this.destroy();else return b.error(new y("websocket-connection",`Failed to connect. Attempting to reconnect in ${B}s`,
D)),yield l.after(x),this._tryCreateWebSocket(m,Math.min(1.5*x,1E3*this._config.maxReconnectionInterval),A+1)}});return function(){return u.apply(this,arguments)}}();e._createWebSocket=function(u){const m=new WebSocket(u);u=new Promise((x,A)=>{m.onopen=()=>x(m);m.onclose=D=>A(D)});u.then(()=>{this.destroyed?(m.onclose=()=>{},m.close()):(m.onclose=x=>this._onClose(x),m.onerror=x=>this._onError(x),m.onmessage=x=>this._onMessage(x))});return u};e._handshake=function(){var u=c._asyncToGenerator(function*(m=
1E4){const x=this._websocket;if(!t.isNone(x)){var A=l.createResolver(),D=x.onmessage,{filter:B,outFields:C,spatialReference:w}=this._config;A.timeout(m);x.onmessage=E=>{var I;let F=null;try{F=JSON.parse(E.data)}catch(H){}F&&"object"===typeof F||(b.error(new y("websocket-connection","Protocol violation. Handshake failed - malformed message",E.data)),A.reject(),this.destroy());(null==(I=F.spatialReference)?void 0:I.wkid)!==(null==w?void 0:w.wkid)&&(b.error(new y("websocket-connection",`Protocol violation. Handshake failed - expected wkid of ${w.wkid}`,
E.data)),A.reject(),this.destroy());"json"!==F.format&&(b.error(new y("websocket-connection","Protocol violation. Handshake failed - format is not set",E.data)),A.reject(),this.destroy());B&&F.filter!==B&&b.error(new y("websocket-connection","Tried to set filter, but server doesn't support it"));C&&F.outFields!==C&&b.error(new y("websocket-connection","Tried to set outFields, but server doesn't support it"));x.onmessage=D;A.resolve()};x.send(JSON.stringify({filter:B,outFields:C,format:"json",spatialReference:{wkid:w.wkid}}));
return A.promise}});return function(){return u.apply(this,arguments)}}();e._onMessage=function(u){try{const m=JSON.parse(u.data);if("featureResult"!==m.type)throw new y("websocket-connection","Protocol violation - Expected to find message of type 'featureResult'",m);for(const x of m.features)this._featureZScaler&&this._featureZScaler(x.geometry),this.onFeature(x)}catch(m){b.error(new y("websocket-connection","Failed to parse message",m)),this.destroy()}};e._onError=function(u){this._set("errorString",
"Encountered an error over WebSocket connection");b.error("websocket-connection","Encountered an error over WebSocket connection")};e._onClose=function(u){this._websocket=null;this.notifyChange("connectionStatus");1E3!==u.code&&b.error("websocket-connection",`WebSocket closed unexpectedly with error code ${u.code}`);this.destroyed||this._open()};c._createClass(d,[{key:"connectionStatus",get:function(){if(t.isNone(this._websocket))return"disconnected";switch(this._websocket.readyState){case p.ReadyState.CONNECTING:case p.ReadyState.OPEN:return"connected";
case p.ReadyState.CLOSING:case p.ReadyState.CLOSED:return"disconnected"}}}]);return d}(h);z.__decorate([v.property()],p.WebSocketConnection.prototype,"connectionStatus",null);z.__decorate([v.property()],p.WebSocketConnection.prototype,"errorString",void 0);p.WebSocketConnection=z.__decorate([n.subclass("esri.layers.graphics.sources.connections.WebSocketConnection")],p.WebSocketConnection);Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/graphics/sources/connections/StreamConnection":function(){define("../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../core/Evented ../../../../core/HandleOwner ../../../../core/accessorSupport/decorators/property ../../../../core/has ../../../../core/accessorSupport/ensureType ../../../../core/Logger ../../../../core/jsonMap ../../../../core/accessorSupport/decorators/subclass".split(" "),
function(p,c,z,y,r,t,l,v,q,g){z=function(k){function n(){return k.apply(this,arguments)||this}p._inheritsLoose(n,k);n.prototype.onFeature=function(h){this.emit("feature",h)};return n}(z.EventedMixin(y.HandleOwner));return z=c.__decorate([g.subclass("esri.layers.graphics.sources.connections.StreamConnection")],z)})},"esri/views/2d/layers/features/sources/PagedFeatureSource":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/Error ../../../../../core/Logger ../../../../../core/maybe ../../../../../core/promiseUtils ./BaseFeatureSource".split(" "),
function(p,c,z,y,r,t,l){const v=y.getLogger("esri.views.2d.layers.features.sources.FeatureSource");y=function(q){function g(n){return q.call(this,n)||this}c._inheritsLoose(g,q);var k=g.prototype;k._fetchDataTile=function(){var n=c._asyncToGenerator(function*(h){const f=this._subscriptions.get(h.key.id);let b=!1,a=0,d=0;const e=(x,A)=>{d--;t.throwIfAborted(f);const D=h.id,B=x.reader;x=x.query;B.exceededTransferLimit?(A={id:D,addOrUpdate:B,end:b&&0===d,type:"append"},f.add({message:A,query:x}),this._onMessage(A)):
(b=!0,A={id:D,addOrUpdate:B,end:0===d,type:"append"},f.add({message:A,query:x}),this._onMessage(A))};let u=0,m=0;for(;!b&&20>m++;){let x;for(let A=0;A<u+1;A++){const D=a++;d++;x=this._fetchDataTilePage(h,D,f).then(B=>B&&e(B,D)).catch(B=>{b=!0;t.isAbortError(B)||(v.error(new z("mapview-query-error","Encountered error when fetching tile",{tile:h,error:B})),this._onMessage({id:h.id,addOrUpdate:null,end:b,type:"append"}))})}yield x;t.throwIfAborted(f);u=Math.min(u+2,6)}});return function(h){return n.apply(this,
arguments)}}();k._fetchDataTilePage=function(){var n=c._asyncToGenerator(function*(h,f,b){const a=this._queryInfo;var d={start:this.pageSize*f,num:this.pageSize,returnExceededLimitFeatures:!0,quantizationParameters:h.getQuantizationParameters()};r.isSome(this.maxRecordCountFactor)&&(d.maxRecordCountFactor=this.maxRecordCountFactor);d=this._createQuery(h,d);try{const e=yield this._queue.push({tile:h,query:d,signal:b.signal,depth:f});t.throwIfAborted(b);return e?a!==this._queryInfo?this._fetchDataTilePage(h,
f,b):{reader:e,query:d}:null}catch(e){return t.throwIfNotAbortError(e),null}});return function(h,f,b){return n.apply(this,arguments)}}();return g}(l.BaseFeatureSource);p.PagedFeatureSource=y;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/views/2d/layers/features/sources/SnapshotFeatureSource":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/has ../../../../../core/Logger ../../../../../core/maybe ../../../../../core/promiseUtils ../../../../../core/RandomLCG ./BaseFeatureSource ../support/FeatureSetReaderPBFIndirect ../support/UpdateToken".split(" "),
function(p,c,z,y,r,t,l,v,q,g){function k(f,b,a){var d=f.getXHydrate();f=f.getYHydrate();d=b.getColumnForX(d);d=Math.floor(b.normalizeCol(d));b=Math.floor(b.getRowForY(f));return`${a}/${b}/${d}`}function n(f,b){if(r.isNone(f))return null;b=b.transform;const a=f.getQuantizationTransform();if(r.isNone(a)){const [C,w]=b.scale,[E,I]=b.translate;return f.transform(-E/C,I/w,1/C,1/-w)}const [d,e]=a.scale,[u,m]=a.translate,[x,A]=b.scale,[D,B]=b.translate;return f.transform((u-D)/x,(-m+B)/A,d/x,e/A)}const h=
y.getLogger("esri.views.2d.layers.features.sources.SnapshotFeatureSource");z=function(f){function b(d){var e=f.call(this,d)||this;e.mode="snapshot";e._loading=!0;e._controller=new AbortController;e._downloadPromise=null;e._didSendEnd=!1;e._queries=[];e._invalidated=!1;e._hasAggregates=!1;e._random=new l(1E3);e._featureCount=d.featureCount;e._store=d.store;e._markedIdsBufId=e._store.storage.createBitset();return e}c._inheritsLoose(b,f);var a=b.prototype;a.destroy=function(){f.prototype.destroy.call(this);
this._controller.abort()};a.update=function(d,e){f.prototype.update.call(this,d,e);this._hasAggregates=d.targets.aggregate};a.resend=function(){var d=c._asyncToGenerator(function*(e=!1){yield this._downloadPromise;this._invalidated||e?(this._invalidated=!1,this._subscriptions.forEach(u=>u.clear()),this._downloadPromise=this._download(this._featureCount),yield this._downloadPromise):(e=this._queries.map(({query:u,reader:m})=>this._sendPatchQuery(u,m)),yield Promise.all(e),this._subscriptions.forEach(u=>
{u.requests.done.forEach(m=>this._onMessage(m.message))}))});return function(){return d.apply(this,arguments)}}();a.refresh=function(){var d=c._asyncToGenerator(function*(){yield this.resend(!0)});return function(){return d.apply(this,arguments)}}();a._sendPatchQuery=function(){var d=c._asyncToGenerator(function*(e,u){const m=r.isSome(e.outFields)?e.outFields:[],x=this._queryInfo.outFields,A=x.filter(C=>-1===m.indexOf(C));if(A.length){var D=e.clone(),B=this._signal;D.returnGeometry=!1;D.returnCentroid=
!1;D.outFields=A;e.outFields=x;e=yield this._queue.push({query:D,depth:0,signal:B});t.throwIfAborted({signal:B});u.joinAttributes(e)}});return function(e,u){return d.apply(this,arguments)}}();a._fetchDataTile=function(){var d=c._asyncToGenerator(function*(e){this._downloadPromise||(this._downloadPromise=this._download(this._featureCount));var u=this._store.search(e);const m=this._subscriptions.get(e.key.id),x=u.length-1;for(let D=0;D<x;D++){var A=n(u[D],e);A={type:"append",id:e.id,addOrUpdate:A,end:!1,
status:g.UpdateToken.empty()};m.add({query:null,message:A});this._hasAggregates||(yield t.after(1));this._onMessage(A)}u=n(0<=x?u[x]:null,e);e={type:"append",id:e.id,addOrUpdate:u,end:this._didSendEnd,status:g.UpdateToken.empty()};m.add({query:null,message:e});this._onMessage(e)});return function(e){return d.apply(this,arguments)}}();a._download=function(){var d=c._asyncToGenerator(function*(e){try{yield this.whenInitialized();const u=this._store.storage.getBitset(this._markedIdsBufId),m=new Set;
u.clear();const x=Array.from({length:Math.ceil(e/this.pageSize)},(A,D)=>D).sort((A,D)=>this._random.getInt()-this._random.getInt()).map(A=>this._downloadPage(A,u,m));yield Promise.all(x);this._store.sweepFeatures(u,this._store.storage);this._store.sweepFeatureSets(m)}catch(u){h.error("mapview-snapshot-source","Encountered and error when downloading feature snapshot",u)}this._sendEnd();this._loading=!1});return function(e){return d.apply(this,arguments)}}();a._downloadPage=function(){var d=c._asyncToGenerator(function*(e,
u,m){var x=this.pageSize;x={start:e*x,num:x,cacheHint:!0};r.isSome(this.maxRecordCountFactor)&&(x.maxRecordCountFactor=this.maxRecordCountFactor);x=this.createQuery(x);const A=this._signal;e=yield this._queue.push({query:x,depth:e,signal:A});t.throwIfAborted({signal:A});this._queries.push({query:x,reader:e});this._store.insert(e);m.add(e.instance);for(m=e.getCursor();m.next();)u.set(m.getDisplayId());this._send(e)});return function(e,u,m){return d.apply(this,arguments)}}();a._send=function(d){if(this._subscriptions.size){var e=
null,u=new Map,m=new Set,x=new Map;this._subscriptions.forEach(D=>{var B,C=D.tile;u.set(C.key.id,null);e=C.tileInfoView;m.add(C.level);const {row:w,col:E}=C.key;C=`${C.level}/${w}/${E}`;const I=null!=(B=x.get(C))?B:[];I.push(D);x.set(C,I)});for(const D of m){const B=e.getLODInfoAt(D),C=d.getCursor();for(;C.next();){var A=k(C,B,D);const w=C.getIndex();if(x.has(A))for(const E of x.get(A)){A=E.tile.id;let I=u.get(A);r.isNone(I)&&(I=[],u.set(A,I));I.push(w)}}}u.forEach((D,B)=>{if(r.isSome(D)){const C=
this._subscriptions.get(B);D=n(q.FeatureSetReaderIndirect.from(d,D),C.tile);B={type:"append",id:B,addOrUpdate:D,end:!1,status:g.UpdateToken.empty()};C.add({query:null,message:B});this._onMessage(B)}})}};a._sendEnd=function(){this._subscriptions.forEach(d=>{const e={type:"append",id:d.tile.id,addOrUpdate:null,end:!0,status:g.UpdateToken.empty()};d.add({query:null,message:e});this._onMessage(e)});this._didSendEnd=!0};c._createClass(b,[{key:"loading",get:function(){return this._loading}},{key:"_signal",
get:function(){return this._controller.signal}}]);return b}(v.BaseFeatureSource);p.SnapshotFeatureSource=z;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/views/2d/layers/features/support/AttributeStore":function(){define("require exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/Error ../../../../../core/has ../../../../../core/Logger ../../../../../core/mathUtils ../../../../../core/maybe ../../../../../core/promiseUtils ../../../../../core/accessorSupport/diffUtils ../../../../../layers/support/FieldsIndex ../../../engine/webgl/definitions ../../../engine/webgl/Utils ../../../engine/webgl/util/debug ../tileRenderers/support/visualVariablesUtils".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k,n,h,f,b){function a(D,B){return C=>B(D(C))}const d=t.getLogger("esri.views.layers.2d.features.support.AttributeStore"),e=f.createDebugLogger(f.DEBUG_ATTR_UPDATES,d),u=D=>1===(D&2147483648)>>>31?254:255;var m=r("esri-shared-array-buffer"),x=r("esri-atomics");let A=function(){function D(C,w,E,I){this.size=0;this.texelSize=4;const {pixelType:F,layout:H,textureOnly:K}=I;this.textureOnly=K||!1;this.pixelType=F;this._ctype=w;this.layout=H;this._resetRange();this._shared=C;
this.size=E;K||(this.data=this._initData(F,E,C,w))}var B=D.prototype;B.unsetComponentAllTexels=function(C,w){const E=v.unwrap(this.data);for(let I=0;I<this.size*this.size;I++)E[I*this.texelSize+C]&=~w;this.dirtyStart=0;this.dirtyEnd=this.size*this.size-1};B.setComponentAllTexels=function(C,w){const E=v.unwrap(this.data);for(let I=0;I<this.size*this.size;I++)E[I*this.texelSize+C]|=255&w;this.dirtyStart=0;this.dirtyEnd=this.size*this.size-1};B.setComponent=function(C,w,E){const I=v.unwrap(this.data);
for(const F of E)I[F*this.texelSize+C]|=w,this.dirtyStart=Math.min(this.dirtyStart,F),this.dirtyEnd=Math.max(this.dirtyEnd,F)};B.setComponentTexel=function(C,w,E){v.unwrap(this.data)[E*this.texelSize+C]|=w;this.dirtyStart=Math.min(this.dirtyStart,E);this.dirtyEnd=Math.max(this.dirtyEnd,E)};B.unsetComponentTexel=function(C,w,E){v.unwrap(this.data)[E*this.texelSize+C]&=~w;this.dirtyStart=Math.min(this.dirtyStart,E);this.dirtyEnd=Math.max(this.dirtyEnd,E)};B.getData=function(C,w){C&=2147483647;return v.unwrap(this.data)[C*
this.texelSize+w]};B.setData=function(C,w,E){C&=2147483647;0===(this.layout&1<<w)?d.error("mapview-attributes-store","Tried to set a value for a texel's readonly component"):(this.data[C*this.texelSize+w]=E,this.dirtyStart=Math.min(this.dirtyStart,C),this.dirtyEnd=Math.max(this.dirtyEnd,C))};B.lock=function(){5121===this.pixelType&&this._shared&&x&&"local"!==this._ctype&&Atomics.store(this.data,0,1)};B.unlock=function(){5121===this.pixelType&&this._shared&&x&&"local"!==this._ctype&&Atomics.store(this.data,
0,0)};B.expand=function(C){this.size=C;if(!this.textureOnly){C=this._initData(this.pixelType,C,this._shared,this._ctype);const w=v.unwrap(this.data);C.set(w);this.data=C}};B.toMessage=function(){const C=this.dirtyStart,w=this.dirtyEnd;var E=this.texelSize;if(C>w)return null;this._resetRange();const I=!this._shared&&"local"!==this._ctype,F=this.pixelType,H=this.layout,K=v.unwrap(this.data);E=I&&K.slice(C*E,(w+1)*E)||null;return{start:C,end:w,data:E,pixelType:F,layout:H}};B._initData=function(C,w,E,
I){E=E&&"local"!==I?SharedArrayBuffer:ArrayBuffer;C=h.getPixelArrayCtor(C);w=new C(new E(w*w*4*C.BYTES_PER_ELEMENT));for(C=0;C<w.length;C+=4)w[C+1]=255;return w};B._resetRange=function(){this.dirtyStart=2147483647;this.dirtyEnd=0};z._createClass(D,[{key:"buffer",get:function(){return v.andThen(this.data,C=>C.buffer)}}]);return D}();t=function(){function D(C,w){this._client=C;this.config=w;this._attributeComputeMap=new Map;this._blocks=[];this._filters=Array(n.MAX_FILTERS);this._targetType=0;this._abortController=
q.createAbortController();this._hasScaleExpr=!1;this._size=32;this._idsToHighlight=new Set;C=w.supportsTextureFloat?5126:5121;e(`Creating AttributeStore ${m?"with":"without"} shared memory`);this._blockDescriptors=[{pixelType:5121,layout:1},{pixelType:5121,layout:15,textureOnly:!0},{pixelType:C,layout:15},{pixelType:C,layout:15}];this._blocks=this._blockDescriptors.map(()=>null)}var B=D.prototype;B.destroy=function(){this._abortController.abort()};B.update=function(C,w){this.config=w;w=w.schema.processors[0].storage;
const E=g.diff(this._schema,w);if(C.targets.feature||C.targets.aggregate)C.storage.data=!0;if(E&&(r("esri-2d-update-debug")&&console.debug("Applying Update - AttributeStore:",E),C.storage.data=!0,this._schema=w,this._attributeComputeMap.clear(),!v.isNone(w))){switch(w.target){case "feature":this._targetType=0;break;case "aggregate":this._targetType=1}if("subtype"===w.type)for(const I in w.mapping){if(C=w.mapping[I],v.isSome(C))for(const F of C.mapping)this._bindAttribute(F)}else for(const I of w.mapping)this._bindAttribute(I)}};
B.onTileData=function(C,w){if(!v.isNone(w.addOrUpdate))for(C=w.addOrUpdate.getCursor();C.next();)w=C.getDisplayId(),this.setAttributeData(w,C)};B.invalidateResources=function(){this._createResourcesPromise=null;this._abortController.abort();this._abortController=q.createAbortController()};B.setHighlight=function(){var C=z._asyncToGenerator(function*(w,E){const I=this._getBlock(0);E=E.map(F=>F&2147483647);I.lock();I.unsetComponentAllTexels(0,1);I.setComponent(0,1,E);I.unlock();this._idsToHighlight.clear();
for(const F of w)this._idsToHighlight.add(F);yield this.sendUpdates()});return function(w,E){return C.apply(this,arguments)}}();B.updateFilters=function(){var C=z._asyncToGenerator(function*(w,E){const {config:I,service:F,spatialReference:H}=E;({filters:E}=I);E=E.map((K,G)=>this._updateFilter(K,G,F,H));(yield Promise.all(E)).some(K=>K)&&(w.storage.filters=!0,r("esri-2d-update-debug")&&console.debug("Applying Update - AttributeStore:","Filters changed"))});return function(w,E){return C.apply(this,
arguments)}}();B.setData=function(C,w,E,I){this._ensureSizeForTexel(C&2147483647);this._getBlock(w).setData(C,E,I)};B.getData=function(C,w,E){return this._getBlock(w).getData(C,E)};B.getHighlightFlag=function(C){return this._idsToHighlight.has(C)?n.HIGHLIGHT_FLAG:0};B.unsetAttributeData=function(C){C&=2147483647;this._getBlock(0).setData(C,0,0)};B.setAttributeData=function(C,w){const E=C&2147483647;this._ensureSizeForTexel(E);this._getBlock(0).setData(E,0,this.getFilterFlags(w));if(this._targetType===
(C&2147483648)>>>31){C=this._attributeComputeMap;var I=this.config.supportsTextureFloat?1:2;C.size&&C.forEach((F,H)=>{const K=H*I%4;H=this._getBlock(Math.floor(H*I/4)+n.ATTRIBUTE_DATA_VV);F=F(w);if(this.config.supportsTextureFloat)H.setData(E,K,F);else if(F===n.NAN_MAGIC_NUMBER)H.setData(E,K,255),H.setData(E,K+1,255);else{F=l.clamp(Math.round(F),-32767,32766)+32768;const G=(F&65280)>>8;H.setData(E,K,F&255);H.setData(E,K+1,G)}})}};B.sendUpdates=function(){if(this._nextUpdate)return this._nextUpdate.promise;
if(this._currUpdate)return this._nextUpdate=q.createResolver(),this._nextUpdate.promise;const C={blocks:this._blocks.map(w=>v.isSome(w)?w.toMessage():null)};return this._currUpdate=this._createResources().then(()=>{var w=()=>{this._currUpdate=null;if(this._nextUpdate){const E=this._nextUpdate;this._nextUpdate=null;this.sendUpdates().then(()=>E.resolve())}};w=this._client.update(C,this._signal).then(w).catch(w);this._client.render(this._signal);return w}).catch(w=>{if(q.isAbortError(w))return this._createResourcesPromise=
null,this._createResources();d.error(new y("mapview-attribute-store","Encountered an error during client update",w));return Promise.resolve()})};B._ensureSizeForTexel=function(C){for(;C>=this._size*this._size&&!this._expand(););};B._bindAttribute=function(C){function w(){return C.normalizationField?F=>{const H=F.readAttribute(C.normalizationField);return H?F.readAttribute(C.field)/H:null}:F=>F.readAttribute(C.field)}function E(){C.normalizationField&&d.warn("mapview-arcade","Ignoring normalizationField specified with an arcade expression which is not supported.");
return F=>F.getComputedNumericAtIndex(C.fieldIndex)}let I;if(null!=C.fieldIndex)I=E();else if(C.field)I=w();else return;C.valueRepresentation&&(I=a(I,F=>b.getVisualVariableSizeValueRepresentationRatio(F,C.valueRepresentation)));this._attributeComputeMap.set(C.binding,a(I,F=>null===F||isNaN(F)||Infinity===F?n.NAN_MAGIC_NUMBER:F))};B._createResources=function(){if(v.isSome(this._createResourcesPromise))return this._createResourcesPromise;this._getBlock(n.ATTRIBUTE_DATA_ANIMATION);e("Initializing AttributeStore");
var C={shared:m&&"local"!==this._client.type,size:this._size,blocks:v.mapMany(this._blocks,w=>({textureOnly:w.textureOnly,buffer:w.buffer,pixelType:w.pixelType}))};this._createResourcesPromise=C=this._client.initialize(C,this._signal).catch(w=>{q.isAbortError(w)?this._createResourcesPromise=null:d.error(new y("mapview-attribute-store","Encountered an error during client initialization",w))});C.then(()=>v.isNone(this._createResourcesPromise)?this._createResources():void 0);return C};B._getBlock=function(C){var w=
this._blocks[C];if(v.isSome(w))return w;e(`Initializing AttributeBlock at index ${C}`);w=new A(m,this._client.type,this._size,this._blockDescriptors[C]);this._blocks[C]=w;this._createResourcesPromise=null;return w};B._expand=function(){if(this._size<this.config.maxTextureSize){const C=this._size<<=1;e("Expanding block size to",C,this._blocks);v.forEachSome(this._blocks,w=>w.expand(C));this._createResourcesPromise=null;this._size=C;return 0}d.error(new y("mapview-limitations","Maximum number of onscreen features exceeded."));
return-1};B._updateFilter=function(){var C=z._asyncToGenerator(function*(w,E,I,F){const H=this._filters[E],K=v.isSome(H)&&H.hash;if(!H&&!w||K===JSON.stringify(w))return!1;if(v.isNone(w)){if(!H)return!1;w=1<<E+1;I=this._getBlock(0);this._filters[E]=null;I.setComponentAllTexels(0,w);this.sendUpdates();return!0}yield(yield this._getFilter(E,I)).update(w,F);return!0});return function(w,E,I,F){return C.apply(this,arguments)}}();B._getFilter=function(){var C=z._asyncToGenerator(function*(w,E){var I=this._filters[w];
if(v.isSome(I))return I;({default:I}=yield new Promise(function(F,H){p(["../../../../../layers/graphics/data/FeatureFilter"],function(K){F(Object.freeze({__proto__:null,"default":K}))},H)}));E=new I({geometryType:E.geometryType,hasM:!1,hasZ:!1,timeInfo:E.timeInfo,fieldsIndex:new k(E.fields)});return this._filters[w]=E});return function(w,E){return C.apply(this,arguments)}}();B.isVisible=function(C){return!!(this._getBlock(0).getData(C,0)&2)};B.getFilterFlags=function(C){let w=0;var E=u(C.getDisplayId());
for(let F=0;F<this._filters.length;F++){var I=this._filters[F];I=!(E&1<<F)||v.isNone(I)||I.check(C);w|=(I?1:0)<<F}E=0;this._idsToHighlight.size&&(C=C.getObjectId(),E=this.getHighlightFlag(C));return w<<1|E};z._createClass(D,[{key:"hasScaleExpr",get:function(){return this._hasScaleExpr}},{key:"_signal",get:function(){return this._abortController.signal}}]);return D}();c.DISPLAY_ID_TYPE_AGGREGATE=1;c.DISPLAY_ID_TYPE_FEATURE=0;c.default=t;c.getDisplayIdFilterMask=u;c.getDisplayIdTexel=D=>D&2147483647;
c.getDisplayIdType=D=>(D&2147483648)>>>31;c.isAggregateId=function(D){return 1===(D&2147483648)>>>31};Object.defineProperty(c,"__esModule",{value:!0})})},"esri/views/2d/engine/webgl/Utils":function(){define("exports ../../../../core/Error ../../../../core/Logger ../../../../core/mathUtils ../../../../core/screenUtils ./color ./enums ./SymbolProperties ../../../webgl/Texture".split(" "),function(p,c,z,y,r,t,l,v,q){function g(L){const P={};for(const R of L)P[R.name]=R.strideInBytes;return P}function k(L){switch(L){case l.WGLGeometryType.MARKER:return E;
case l.WGLGeometryType.FILL:return I;case l.WGLGeometryType.LINE:return F;case l.WGLGeometryType.TEXT:return H;case l.WGLGeometryType.LABEL:return K}}function n(L){switch(L%4){case 0:case 2:return 4;case 1:case 3:return 1}}function h(L){switch(L){case 5120:case 5121:return 1;case 5122:case 5123:return 2;case 5126:case 5124:case 5125:return 4}}function f(L){const P={};for(const R in L){let S=0;P[R]=L[R].map(M=>{const V={...M,normalized:M.normalized||!1,divisor:M.divisor||0,offset:S,stride:0};S+=M.count*
h(M.type);return V});P[R].forEach(M=>M.stride=S)}return P}const b=z.getLogger("esri.views.2d.engine.webgl.Utils");z=[{name:"geometry",strideInBytes:36,divisor:0}];const a=[{name:"geometry",strideInBytes:36,divisor:0}],d=[{name:"geometry",strideInBytes:12,divisor:0}],e=[{name:"geometry",strideInBytes:40,divisor:0}],u=[{name:"geometry",strideInBytes:36,divisor:0}],m=[{name:"geometry",strideInBytes:36,divisor:0}],x=g(z),A=g(a),D=g(d),B=g(e),C=g(u),w=g(m),E=["geometry"],I=["geometry"],F=["geometry"],
H=["geometry"],K=["geometry"],G=new Map;p.C_FILL_STRIDE_SPEC=A;p.C_FILL_STRIDE_SPEC_DD=D;p.C_FILL_VERTEX_DEF=a;p.C_FILL_VERTEX_DEF_DD=d;p.C_ICON_STRIDE_SPEC=x;p.C_ICON_VERTEX_DEF=z;p.C_LABEL_STRIDE_SPEC=w;p.C_LABEL_VERTEX_DEF=m;p.C_LINE_STRIDE_SPEC=B;p.C_LINE_VERTEX_DEF=e;p.C_TEXT_STRIDE_SPEC=C;p.C_TEXT_VERTEX_DEF=u;p.C_VBO_GEOMETRY="geometry";p.C_VBO_INFO={["geometry"]:35044};p.C_VBO_PERINSTANCE="per_instance";p.C_VBO_PERINSTANCE_VV="per_instance_vv";p.allocateTypedArrayBuffer=function(L,P){switch(P%
4){case 0:case 2:return new Uint32Array(Math.floor(L*P/4));case 1:case 3:return new Uint8Array(L*P)}};p.allocateTypedArrayBufferwithData=function(L,P){switch(P%4){case 0:case 2:return new Uint32Array(L);case 1:case 3:return new Uint8Array(L)}};p.copyMeshData=function(L,P,R,S,M,V,W){for(const sa in V){var ea=V[sa].stride,ka=n(ea);const ua=V[sa].data,xa=R[sa].data,oa=ea*M.vertexCount/ka,ra=ea*L/ka;ea=ea*M.vertexFrom/ka;for(ka=0;ka<oa;++ka)xa[ka+ra]=ua[ka+ea]}R=M.indexCount;for(V=0;V<R;++V)S[V+P]=W[V+
M.indexFrom]-M.vertexFrom+L};p.createGeometryData=function(L,P){const R=[];for(let S=0;5>S;++S){const M=k(S),V={};for(const W of M)V[W]={data:P(S,W)};R.push({data:L(S),buffers:V})}return R};p.createProgramDescriptor=(L,P)=>{if(!G.has(L)){const M=f(P);var R=M;var S={};for(const V in R){const W=R[V];S[V]=W.length?W[0].stride:0}R=S;S=new Map;for(const V in P)for(const W of P[V])S.set(W.name,W.location);P=S;G.set(L,{strides:R,bufferLayouts:M,attributes:P})}return G.get(L)};p.createTextureFromTexelData=
function(L,P){let R,S;y.isPowerOfTwo(P.width)&&y.isPowerOfTwo(P.height)?(R=!0,S=9987):(R=!1,S=9729);return new q(L,{target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,hasMipmap:R,samplingMode:S,wrapMode:33071,flipped:!0},P)};p.forEachGeometryType=function(L){L(l.WGLGeometryType.FILL);L(l.WGLGeometryType.LINE);L(l.WGLGeometryType.MARKER);L(l.WGLGeometryType.TEXT);L(l.WGLGeometryType.LABEL)};p.geometryToMappedGeometry=function(L){return{vertexFrom:void 0,vertexTo:void 0,geometry:L}};p.getBytes=
h;p.getCapType=function(L){switch(L){case "butt":return 0;case "round":return 1;case "square":return 2;default:return b.error(new c("mapview-invalid-type",`Cap type ${L} is not a valid option. Defaulting to round`)),1}};p.getJoinType=function(L){switch(L){case "miter":return 2;case "bevel":return 0;case "round":return 1;default:return b.error(new c("mapview-invalid-type",`Join type ${L} is not a valid option. Defaulting to round`)),1}};p.getNamedBuffers=k;p.getPixelArrayCtor=function(L){switch(L){case 5121:return Uint8Array;
case 32819:return Uint16Array;case 5126:return Float32Array;default:b.error(new c("webgl-utils",`Unable to handle type ${L}`))}};p.getPixelBytes=function(L){switch(L){case 5121:return 1;case 32819:return 2;case 5126:return 4;default:b.error(new c("webgl-utils",`Unable to handle type ${L}`))}};p.getStrides=function(L,P){switch(L){case l.WGLGeometryType.MARKER:return x;case l.WGLGeometryType.FILL:return P?D:A;case l.WGLGeometryType.LINE:return B;case l.WGLGeometryType.TEXT:return C;case l.WGLGeometryType.LABEL:return w}};
p.getTextProperties=function(L){return v.TextProperties.pool.acquire(L.color?t.copyAndPremultiply(L.color):[255,255,255,255],L.haloColor?t.copyAndPremultiply(L.haloColor):[255,255,255,255],r.pt2px(L.haloSize),r.pt2px(L.font.size),L.angle*Math.PI/180,L.xoffset/L.font.size,L.yoffset/L.font.size,"left"===L.horizontalAlignment?0:"right"===L.horizontalAlignment?1:.5,"top"===L.verticalAlignment?0:"bottom"===L.verticalAlignment?1:.5)};p.getTransformParams=function(L){const {transform:P,hasZ:R,hasM:S}=L;
return{transform:P,hasZ:R,hasM:S}};p.getVVType=function(L){switch(L){case "opacity":return l.VVType.OPACITY;case "color":return l.VVType.COLOR;case "rotation":return l.VVType.ROTATION;case "size":return l.VVType.SIZE;default:return b.error(`Cannot interpret unknown vv: ${L}`),null}};p.isDefined=function(L){return null!=L};p.isNumber=function(L){return"number"===typeof L};p.strideToPackingFactor=n;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/views/2d/engine/webgl/color":function(){define(["exports",
"./number"],function(p,c){function z(t,l){Array.isArray(l)?(t[0]=l[0],t[1]=l[1],t[2]=l[2],t[3]=l[3]):(t[0]=l.r,t[1]=l.g,t[2]=l.b,t[3]=l.a);return t}function y(t,l=0,v=!1){const q=t[l+3];t[l+0]*=q;t[l+1]*=q;t[l+2]*=q;v||(t[l+3]*=255);return t}const r=[0,0,0,0];p.copyAndPremultiply=function(t){return y(z([],t))};p.premultiplyAlpha=y;p.premultiplyAlphaRGBA=function(t){if(!t)return 0;const {r:l,g:v,b:q,a:g}=t;return c.i8888to32(l*g,v*g,q*g,255*g)};p.premultiplyAlphaRGBAArray=function(t){if(!t)return 0;
const [l,v,q,g]=t;return c.i8888to32(g/255*l,g/255*v,g/255*q,g)};p.premultiplyAlphaUint32=function(t){y(z(r,t));return c.i8888to32(r[0],r[1],r[2],r[3])};p.white=[255,255,255,1];Object.defineProperty(p,"__esModule",{value:!0})})},"esri/views/2d/engine/webgl/number":function(){define(["exports"],function(p){function c(r,t,l){return Math.round(Math.max(Math.min(r,l),t))}const z=new Float32Array(1),y=new Uint32Array(z.buffer);p.i16=function(r){return c(r,-32768,32767)};p.i1616to32=function(r,t){return 65535&
r|t<<16};p.i32=function(r){return c(r,-2147483648,2147483647)};p.i8=function(r){return c(r,-128,127)};p.i8816to32=function(r,t,l){return r&255|(t&255)<<8|l<<16};p.i8888to32=function(r,t,l,v){return r&255|(t&255)<<8|(l&255)<<16|v<<24};p.numTo32=function(r){return r|0};p.toFloat32=function(r){y[0]=r;return z[0]};p.toUint32=function(r){z[0]=r;return y[0]};p.u16=function(r){return c(r,0,65535)};p.u32=function(r){return c(r,0,4294967295)};p.u32to4Xu8=function(r){return[r&255,(r&65280)>>>8,(r&16711680)>>>
16,(r&4278190080)>>>24]};p.u8=function(r){return c(r,0,255)};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/views/2d/engine/webgl/enums":function(){define(["exports"],function(p){p.WGLGeometryType=void 0;(function(c){c[c.FILL=0]="FILL";c[c.LINE=1]="LINE";c[c.MARKER=2]="MARKER";c[c.TEXT=3]="TEXT";c[c.LABEL=4]="LABEL"})(p.WGLGeometryType||(p.WGLGeometryType={}));p.WGLGeometryTransactionStatus=void 0;(function(c){c[c.SUCCEEDED=0]="SUCCEEDED";c[c.FAILED_OUT_OF_MEMORY=1]="FAILED_OUT_OF_MEMORY"})(p.WGLGeometryTransactionStatus||
(p.WGLGeometryTransactionStatus={}));p.WGLDrawPhase=void 0;(function(c){c[c.NONE=0]="NONE";c[c.MAP=1]="MAP";c[c.LABEL=2]="LABEL";c[c.LABEL_ALPHA=4]="LABEL_ALPHA";c[c.HITTEST=8]="HITTEST";c[c.HIGHLIGHT=16]="HIGHLIGHT";c[c.CLIP=32]="CLIP";c[c.DEBUG=64]="DEBUG";c[c.NUM_DRAW_PHASES=9]="NUM_DRAW_PHASES"})(p.WGLDrawPhase||(p.WGLDrawPhase={}));p.VVType=void 0;(function(c){c[c.SIZE=0]="SIZE";c[c.COLOR=1]="COLOR";c[c.OPACITY=2]="OPACITY";c[c.ROTATION=3]="ROTATION"})(p.VVType||(p.VVType={}));p.WGLVVFlag=void 0;
(function(c){c[c.NONE=0]="NONE";c[c.OPACITY=1]="OPACITY";c[c.COLOR=2]="COLOR";c[c.ROTATION=4]="ROTATION";c[c.SIZE_MINMAX_VALUE=8]="SIZE_MINMAX_VALUE";c[c.SIZE_SCALE_STOPS=16]="SIZE_SCALE_STOPS";c[c.SIZE_FIELD_STOPS=32]="SIZE_FIELD_STOPS";c[c.SIZE_UNIT_VALUE=64]="SIZE_UNIT_VALUE"})(p.WGLVVFlag||(p.WGLVVFlag={}));p.WGLVVTarget=void 0;(function(c){c[c.MINMAX_TARGETS_OUTLINE=128]="MINMAX_TARGETS_OUTLINE";c[c.SCALE_TARGETS_OUTLINE=256]="SCALE_TARGETS_OUTLINE";c[c.FIELD_TARGETS_OUTLINE=512]="FIELD_TARGETS_OUTLINE";
c[c.UNIT_TARGETS_OUTLINE=1024]="UNIT_TARGETS_OUTLINE"})(p.WGLVVTarget||(p.WGLVVTarget={}));p.MosaicType=void 0;(function(c){c[c.SPRITE=0]="SPRITE";c[c.GLYPH=1]="GLYPH"})(p.MosaicType||(p.MosaicType={}));Object.defineProperty(p,"__esModule",{value:!0})})},"esri/views/2d/engine/webgl/SymbolProperties":function(){define(["exports","../../../../core/ObjectPool"],function(p,c){let z=function(){function y(){this.color=[0,0,0,0];this.haloColor=[0,0,0,0];this.haloSize=0;this.size=12;this.vAnchor=this.hAnchor=
this.offsetY=this.offsetX=this.angle=0}var r=y.prototype;r.acquire=function(t,l,v,q,g,k,n,h,f){this.color=t;this.haloColor=l;this.haloSize=v;this.size=q;this.angle=g;this.offsetX=k;this.offsetY=n;this.hAnchor=h;this.vAnchor=f};r.release=function(){this.color[0]=this.color[1]=this.color[2]=this.color[3]=0;this.vAnchor=this.hAnchor=this.offsetY=this.offsetX=this.angle=this.size=this.haloSize=this.haloColor[0]=this.haloColor[1]=this.haloColor[2]=this.haloColor[3]=0};return y}();z.pool=new c(z);p.TextProperties=
z;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/views/webgl/Texture":function(){define(["../../chunks/_rollupPluginBabelHelpers","../../core/mathUtils","../../core/maybe","./enums","./capabilities/isWebGL2Context"],function(p,c,z,y,r){let t=function(){function l(q,g,k=null){this._context=q;this.type="texture";this._glName=null;this._descriptor=void 0;this._wrapModeDirty=this._samplingModeDirty=!1;q.instanceCounter.increment(y.ResourceType.Texture,this);this._descriptor={target:3553,samplingMode:9729,
wrapMode:10497,flipped:!1,hasMipmap:!1,isOpaque:!1,unpackAlignment:4,preMultiplyAlpha:!1,...g};this.setData(k)}var v=l.prototype;v.dispose=function(){this._context.gl&&this._glName&&(this._context.unbindTextureAllUnits(this),this._context.gl.deleteTexture(this._glName),this._glName=null,this._context.instanceCounter.decrement(y.ResourceType.Texture,this))};v.release=function(){this.dispose()};v.resize=function(q,g){const k=this._descriptor;if(k.width!==q||k.height!==g)k.width=q,k.height=g,this.setData(null)};
v.setData=function(q){if(this._context&&this._context.gl){var g=this._context.gl;this._glName||(this._glName=g.createTexture());void 0===q&&(q=null);null===q&&(this._descriptor.width=this._descriptor.width||4,this._descriptor.height=this._descriptor.height||4);var k=this._context.bindTexture(this,l.TEXTURE_UNIT_FOR_UPDATES),n=this._descriptor;l._validateTexture(this._context,n);g.pixelStorei(g.UNPACK_ALIGNMENT,n.unpackAlignment);g.pixelStorei(g.UNPACK_FLIP_Y_WEBGL,n.flipped?1:0);g.pixelStorei(g.UNPACK_PREMULTIPLY_ALPHA_WEBGL,
n.preMultiplyAlpha?1:0);var h=n.pixelFormat,f=n.internalFormat?n.internalFormat:h;if(q instanceof ImageData||q instanceof HTMLImageElement||q instanceof HTMLCanvasElement||q instanceof HTMLVideoElement){var b=q.width,a=q.height;q instanceof HTMLVideoElement&&(b=q.videoWidth,a=q.videoHeight);g.texImage2D(g.TEXTURE_2D,0,f,h,n.dataType,q);n.hasMipmap&&this.generateMipmap();void 0===n.width&&(n.width=b);void 0===n.height&&(n.height=a)}else{null!=n.width&&null!=n.height||console.error("Width and height must be specified!");
g.DEPTH24_STENCIL8&&f===g.DEPTH_STENCIL&&(f=g.DEPTH24_STENCIL8);b=n.width;a=n.height;var d=q;if(z.isSome(d)&&"type"in d&&"compressed"===d.type)for(h=Math.round(Math.log(Math.max(b,a))/Math.LN2)+1,n.hasMipmap=n.hasMipmap&&h===q.levels.length,h=0;;++h){g.compressedTexImage2D(g.TEXTURE_2D,h,f,b,a,0,q.levels[Math.min(h,q.levels.length-1)]);if(1===b&&1===a||!n.hasMipmap)break;b=Math.max(1,b>>1);a=Math.max(1,a>>1)}else if(z.isSome(q))g.texImage2D(g.TEXTURE_2D,0,f,b,a,0,h,n.dataType,q),n.hasMipmap&&this.generateMipmap();
else for(q=0;;++q){g.texImage2D(g.TEXTURE_2D,q,f,b,a,0,h,n.dataType,null);if(1===b&&1===a||!n.hasMipmap)break;b=Math.max(1,b>>1);a=Math.max(1,a>>1)}}l._applySamplingMode(g,this._descriptor);l._applyWrapMode(g,this._descriptor);l._applyAnisotropicFilteringParameters(this._context,this._descriptor);this._context.bindTexture(k,l.TEXTURE_UNIT_FOR_UPDATES)}};v.updateData=function(q,g,k,n,h,f){f||console.error("An attempt to use uninitialized data!");this._glName||console.error("An attempt to update uninitialized texture!");
const b=this._context.gl,a=this._descriptor,d=this._context.bindTexture(this,l.TEXTURE_UNIT_FOR_UPDATES);(0>g||0>k||n>a.width||h>a.height||g+n>a.width||k+h>a.height)&&console.error("An attempt to update out of bounds of the texture!");b.pixelStorei(b.UNPACK_ALIGNMENT,a.unpackAlignment);b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,a.flipped?1:0);b.pixelStorei(b.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a.preMultiplyAlpha?1:0);f instanceof ImageData||f instanceof HTMLImageElement||f instanceof HTMLCanvasElement||f instanceof
HTMLVideoElement?b.texSubImage2D(b.TEXTURE_2D,q,g,k,a.pixelFormat,a.dataType,f):b.texSubImage2D(b.TEXTURE_2D,q,g,k,n,h,a.pixelFormat,a.dataType,f);this._context.bindTexture(d,l.TEXTURE_UNIT_FOR_UPDATES)};v.generateMipmap=function(){var q=this._descriptor;q.hasMipmap||(this._samplingModeDirty=q.hasMipmap=!0,l._validateTexture(this._context,q));9729===q.samplingMode?(this._samplingModeDirty=!0,q.samplingMode=9985):9728===q.samplingMode&&(this._samplingModeDirty=!0,q.samplingMode=9984);q=this._context.bindTexture(this,
l.TEXTURE_UNIT_FOR_UPDATES);const g=this._context.gl;g.generateMipmap(g.TEXTURE_2D);this._context.bindTexture(q,l.TEXTURE_UNIT_FOR_UPDATES)};v.setSamplingMode=function(q){q!==this._descriptor.samplingMode&&(this._descriptor.samplingMode=q,this._samplingModeDirty=!0)};v.setWrapMode=function(q){q!==this._descriptor.wrapMode&&(this._descriptor.wrapMode=q,l._validateTexture(this._context,this._descriptor),this._wrapModeDirty=!0)};v.applyChanges=function(){const q=this._context.gl,g=this._descriptor;this._samplingModeDirty&&
(l._applySamplingMode(q,g),this._samplingModeDirty=!1);this._wrapModeDirty&&(l._applyWrapMode(q,g),this._wrapModeDirty=!1)};l._validateTexture=function(q,g){(0>g.width||0>g.height)&&console.error("Negative dimension parameters are not allowed!");const k=c.isPowerOfTwo(g.width)&&c.isPowerOfTwo(g.height);r(q.gl)||k||("number"===typeof g.wrapMode?33071!==g.wrapMode&&console.error("Non-power-of-two textures must have a wrap mode of CLAMP_TO_EDGE!"):(33071!==g.wrapMode.s||33071!==g.wrapMode.t)&&console.error("Non-power-of-two textures must have a wrap mode of CLAMP_TO_EDGE!"),
g.hasMipmap&&console.error("Mipmapping requires power-of-two textures!"))};l._applySamplingMode=function(q,g){let k=g.samplingMode,n=g.samplingMode;if(9985===k||9987===k)k=9729,g.hasMipmap||(n=9729);else if(9984===k||9986===k)k=9728,g.hasMipmap||(n=9728);q.texParameteri(q.TEXTURE_2D,q.TEXTURE_MAG_FILTER,k);q.texParameteri(q.TEXTURE_2D,q.TEXTURE_MIN_FILTER,n)};l._applyWrapMode=function(q,g){"number"===typeof g.wrapMode?(q.texParameteri(q.TEXTURE_2D,q.TEXTURE_WRAP_S,g.wrapMode),q.texParameteri(q.TEXTURE_2D,
q.TEXTURE_WRAP_T,g.wrapMode)):(q.texParameteri(q.TEXTURE_2D,q.TEXTURE_WRAP_S,g.wrapMode.s),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_WRAP_T,g.wrapMode.t))};l._applyAnisotropicFilteringParameters=function(q,g){var k;const n=q.capabilities.textureFilterAnisotropic;n&&(q=q.gl,q.texParameterf(q.TEXTURE_2D,n.TEXTURE_MAX_ANISOTROPY,null!=(k=g.maxAnisotropy)?k:1))};p._createClass(l,[{key:"glName",get:function(){return this._glName}},{key:"descriptor",get:function(){return this._descriptor}}]);return l}();t.TEXTURE_UNIT_FOR_UPDATES=
0;return t})},"esri/views/webgl/enums":function(){define(["exports"],function(p){p.ResourceType=void 0;var c=p.ResourceType||(p.ResourceType={});c[c.Texture=0]="Texture";c[c.Buffer=1]="Buffer";c[c.VAO=2]="VAO";c[c.Program=3]="Program";c[c.Framebuffer=4]="Framebuffer";c[c.Renderbuffer=5]="Renderbuffer";c[c.COUNT=6]="COUNT";p.BASE_TEXTURE_UNIT=33984;p.DepthStencilAttachment=33306;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/views/webgl/capabilities/isWebGL2Context":function(){define(function(){return function(p){return window.WebGL2RenderingContext&&
p instanceof window.WebGL2RenderingContext}})},"esri/views/2d/engine/webgl/util/debug":function(){define(["exports"],function(p){p.DEBUG_ATTR_UPDATES=!1;p.createDebugLogger=(c,z)=>c&&((...y)=>z.warn("DEBUG:",...y))||(()=>null);Object.defineProperty(p,"__esModule",{value:!0})})},"esri/views/2d/layers/features/tileRenderers/support/visualVariablesUtils":function(){define("exports ../../../../../../core/maybe ../../../../../../core/screenUtils ../../../../engine/webgl/color ../../../../engine/webgl/definitions ../../../../engine/webgl/enums ../../../../engine/webgl/visualVariablesUtils".split(" "),
function(p,c,z,y,r,t,l){function v(b){return{value:b.value,size:z.toPt(b.size)}}function q(b){return b.map(a=>v(a))}function g(b){return"string"===typeof b||"number"===typeof b?z.toPt(b):{type:"size",expression:b.expression,stops:q(b.stops)}}function k(b){const a={values:[0,0,0,0,0,0,0,0],opacities:[0,0,0,0,0,0,0,0]};if("string"===typeof b.field)if(b.stops){if(8<b.stops.length)return null;b=b.stops;for(var d=0;8>d;++d){const e=b[Math.min(d,b.length-1)];a.values[d]=e.value;a.opacities[d]=e.opacity}}else return null;
else if(b.stops&&0<=b.stops.length)for(b=b.stops&&0<=b.stops.length&&b.stops[0].opacity,d=0;8>d;d++)a.values[d]=Infinity,a.opacities[d]=b;else return null;return a}function n(b,a,d){b[4*a]=d.r/255;b[4*a+1]=d.g/255;b[4*a+2]=d.b/255;b[4*a+3]=d.a}function h(b){if(c.isNone(b)||b.normalizationField)return null;const a={field:null,values:[0,0,0,0,0,0,0,0],colors:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]};if("string"===typeof b.field)if(b.stops){if(8<b.stops.length)return null;a.field=
b.field;b=b.stops;for(var d=0;8>d;++d){const e=b[Math.min(d,b.length-1)];a.values[d]=e.value;n(a.colors,d,e.color)}}else return null;else if(b.stops&&0<=b.stops.length)for(b=b.stops&&0<=b.stops.length&&b.stops[0].color,d=0;8>d;d++)a.values[d]=Infinity,n(a.colors,d,b);else return null;for(b=0;32>b;b+=4)y.premultiplyAlpha(a.colors,b,!0);return a}const f=b=>{const a=[],d=[];b=q(b);const e=b.length;for(let u=0;6>u;u++){const m=b[Math.min(u,e-1)];a.push(m.value);d.push(null==m.size?r.NAN_MAGIC_NUMBER:
z.pt2px(m.size))}return{values:new Float32Array(a),sizes:new Float32Array(d)}};p.convertColorVariable=h;p.convertVisualVariables=function(b){const a=b&&0<b.length?{}:null,d=a?{}:null;if(!a)return{vvFields:a,vvRanges:d};for(const e of b)if(e.field&&(a[e.type]=e.field),"size"===e.type)switch(d.size||(d.size={}),b=e,l.getTypeOfSizeVisualVariable(b)){case t.WGLVVFlag.SIZE_MINMAX_VALUE:d.size.minMaxValue={minDataValue:b.minDataValue,maxDataValue:b.maxDataValue,minSize:g(b.minSize),maxSize:g(b.maxSize)};
break;case t.WGLVVFlag.SIZE_SCALE_STOPS:d.size.scaleStops={stops:q(b.stops)};break;case t.WGLVVFlag.SIZE_FIELD_STOPS:if(b.levels){const u={};for(const m in b.levels)u[m]=f(b.levels[m]);d.size.fieldStops={type:"level-dependent",levels:u}}else d.size.fieldStops={type:"static",...f(b.stops)};break;case t.WGLVVFlag.SIZE_UNIT_VALUE:d.size.unitValue={unit:b.valueUnit,valueRepresentation:b.valueRepresentation}}else"color"===e.type?d.color=h(e):"opacity"===e.type?d.opacity=k(e):"rotation"===e.type&&(d.rotation=
{type:e.rotationType});return{vvFields:a,vvRanges:d}};p.getVisualVariableSizeValueRepresentationRatio=function(b,a){if(!b||!a)return b;switch(a){case "radius":case "distance":return 2*b;case "area":return Math.sqrt(b)}return b};p.getVisualVariablesFields=function(b){const a=b&&0<b.length?{}:null;a&&b.forEach(d=>{const e=d.type;d.field&&(a[e]=d.field)});return a};p.normalizeSizeElement=g;p.normalizeSizeStops=q;p.stopToSizeStop=v;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/views/2d/engine/webgl/visualVariablesUtils":function(){define(["exports",
"../../../../core/Error","../../../../core/Logger","./enums","./Utils"],function(p,c,z,y,r){const t=z.getLogger("esri.views.2d.engine.webgl");p.getTypeOfSizeVisualVariable=function(l){if(r.isNumber(l.minDataValue)&&r.isNumber(l.maxDataValue)&&null!=l.minSize&&null!=l.maxSize)return y.WGLVVFlag.SIZE_MINMAX_VALUE;if((l.expression&&"view.scale"===l.expression||l.valueExpression&&"$view.scale"===l.valueExpression)&&Array.isArray(l.stops))return y.WGLVVFlag.SIZE_SCALE_STOPS;if((null!=l.field||l.expression&&
"view.scale"!==l.expression||l.valueExpression&&"$view.scale"!==l.valueExpression)&&(Array.isArray(l.stops)||"levels"in l&&l.levels))return y.WGLVVFlag.SIZE_FIELD_STOPS;if((null!=l.field||l.expression&&"view.scale"!==l.expression||l.valueExpression&&"$view.scale"!==l.valueExpression)&&null!=l.valueUnit)return y.WGLVVFlag.SIZE_UNIT_VALUE;t.error(new c("mapview-bad-type","Found invalid size VisualVariable",l));return y.WGLVVFlag.NONE};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/views/2d/layers/features/support/ClusterStore":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../geometry ../../../../../core/Evented ../../../../../core/has ../../../../../core/maybe ../../../../../core/accessorSupport/diffUtils ../../../../../geohash/GeohashTree ../../../../../geohash/geohashUtils ../../../../../geometry/support/Ellipsoid ../../../../../geometry/support/spatialReferenceUtils ../../../../../layers/graphics/featureConversionUtils ../../../../../layers/graphics/OptimizedFeature ../../../../../layers/graphics/OptimizedGeometry ../../../../../layers/graphics/data/projectionSupport ../../../engine/webgl/definitions ../Store2D ./FeatureSetReaderJSON ../../../../../geometry/SpatialReference".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k,n,h,f,b,a,d,e,u){let m=function(x){function A(B,C,w,E,I){C=new f([],[C,w]);B=x.call(this,C,E,null,B)||this;B.geohashBoundsInfo=I;return B}c._inheritsLoose(A,x);A.create=function(B,C,w,E,I,F,H,K){C=new A(C,w,E,F,H);C.displayId=B.createDisplayId(!0);C.referenceId=K;C.tileLevel=I;return C};var D=A.prototype;D.update=function(B,C,w,E,I,F){this.geometry.coords[0]=B;this.geometry.coords[1]=C;this.tileLevel=w;this.attributes=E;this.geohashBoundsInfo=I;this.referenceId=null;
this.referenceId=F;return this};D.toJSON=function(){return{objectId:this.objectId,referenceId:1===this.attributes.cluster_count?this.referenceId:null,attributes:{...this.attributes,clusterId:this.objectId},geometry:{x:this.geometry.coords[0],y:this.geometry.coords[1]}}};c._createClass(A,[{key:"count",get:function(){return this.attributes.cluster_count}}]);return A}(h);z=function(x){function A(B,C,w){var E=x.call(this,B,w)||this;E.events=new y;E._geohashLevel=0;E._aggregateValueRanges={};E._aggregateValueRangesChanged=
!1;E._geohashBuf=[];E._clusters=new Map;E._tiles=new Map;E.geometryInfo=B.geometryInfo;E._spatialReference=C;E._projectionSupportCheck=b.checkProjectionSupport(C,u.WGS84);E._bitsets.geohash=w.getBitset(w.createBitset());E._bitsets.inserted=w.getBitset(w.createBitset());return E}c._inheritsLoose(A,x);var D=A.prototype;D.updateSchema=function(){var B=c._asyncToGenerator(function*(C,w){const E=this._schema;try{yield x.prototype.updateSchema.call(this,C,w),yield this._projectionSupportCheck}catch(F){}const I=
l.diff(E,w);if(!w||t.isNone(I)&&!C.source&&!C.storage.filters)E&&(C.mesh=!0);else{if(l.hasDiff(I,"params.fields")||!this._tree||C.source)this._tree=new v.GeohashTree(this._statisticFields),this._rebuildTree(),r("esri-2d-update-debug")&&console.debug("Aggregate mesh needs update due to tree changing");r("esri-2d-update-debug")&&console.debug("Applying Update - ClusterStore:",I);C.targets[w.name]=!0;C.mesh=!1;this._aggregateValueRanges={}}});return function(C,w){return B.apply(this,arguments)}}();D.sweepFeatures=
function(B,C){this._bitsets.inserted.forEachSet(w=>{B.has(w)||(w=C.lookupByDisplayIdUnsafe(w),this._remove(w))})};D.sweepClusters=function(B,C,w){this._clusters.forEach((E,I)=>{E&&E.tileLevel!==w&&(B.releaseDisplayId(E.displayId),C.unsetAttributeData(E.displayId),this._clusters.delete(I))})};D.onTileData=function(B,C,w,E,I=!0){if(!this._schema||t.isNone(C.addOrUpdate))return C;var F=this._tree,H=this._getTransforms(B,this._spatialReference);{const K=C.addOrUpdate.getCursor();for(;K.next();)this._update(K,
E,F)}if(C.status.mesh||!I)return C;E=[];this._getClustersForTile(E,B,this._schema.params.clusterRadius,w,F,H);C.addOrUpdate=e.FeatureSetReaderJSON.fromOptimizedFeatures(E,"esriGeometryPoint");C.addOrUpdate.attachStorage(w);C.end=!0;for(F=C.addOrUpdate.getCursor();F.next();)H=F.getDisplayId(),this._bitsets.computed.unset(H),this.setComputedAttributes(w,F,H,B.scale);this._aggregateValueRangesChanged&&C.end&&(this.events.emit("valueRangesChanged",{valueRanges:this._aggregateValueRanges}),this._aggregateValueRangesChanged=
!1);return C};D.onTileUpdate=function({added:B,removed:C}){B.length&&this._setGeohashLevel(B[0].level);if(this._schema){var w=this._schema.params.clusterRadius;C.forEach(E=>{this._tiles.delete(E.key.id);this._markTileClustersForDeletion(E,w)})}};D.getAggregate=function(B){let C=null;this._clusters.forEach(w=>{w&&w.displayId===B&&(C=w.toJSON())});return C};D.getDisplayId=function(B){return(B=this._clusters.get(B))?B.displayId:null};D.getFeatureDisplayIdsForAggregate=function(B){B=this._clusters.get(B);
if(!B)return[];B=B.geohashBoundsInfo;return this._tree.getRegionDisplayIds(B.xLL,B.yLL,B.xTR,B.yTR,B.level)};D.getDisplayIdForReferenceId=function(B){let C;this._clusters.forEach(w=>{w&&w.referenceId===B&&(C=w.displayId)});return C};D.getAggregateValueRanges=function(){return this._aggregateValueRanges};D.forEach=function(B){this._clusters.forEach((C,w)=>{C&&B(C,w)})};D.size=function(){let B=0;this.forEach(C=>B++);return B};D._rebuildTree=function(){this._bitsets.computed.clear();this._bitsets.inserted.clear();
this._tree&&this._tree.clear()};D._remove=function(B){const C=B.getDisplayId(),w=B.getXHydrate(),E=B.getYHydrate(),I=this._geohashBuf[2*C],F=this._geohashBuf[2*C+1];this._bitsets.inserted.has(C)&&(this._bitsets.inserted.unset(C),this._tree.removeCursor(B,w,E,I,F,this._geohashLevel))};D._update=function(B,C,w){const E=B.getDisplayId(),I=this._bitsets.inserted;C=C.isVisible(E);var F=I.has(E);C!==F&&(C?(C=B.getXHydrate(),F=B.getYHydrate(),this._setGeohash(E,C,F)&&(w.insertCursor(B,E,C,F,this._geohashBuf[2*
E],this._geohashBuf[2*E+1],this._geohashLevel),I.set(E))):this._remove(B))};D._setGeohash=function(B,C,w){if(this._bitsets.geohash.has(B))return!0;const E=this._geohashBuf;if(this._spatialReference.isWebMercator)C=C/g.earth.radius*57.29577951308232,q.setGeohashBuf(E,B,57.29577951308232*(Math.PI/2-2*Math.atan(Math.exp(-1*w/g.earth.radius))),C-360*Math.floor((C+180)/360),12);else{w=b.project({x:C,y:w},this._spatialReference,u.WGS84);if(!w)return!1;q.setGeohashBuf(E,B,w.y,w.x,12)}this._bitsets.geohash.set(B);
return!0};D._getClustersForTile=function(B,C,w,E,I,F,H=!0){var K=this._schema.params.clusterPixelBuffer,G=2*w;w=this._getGeohashLevel(C.key.level);const L=Math.ceil(2**C.key.level*a.TILE_SIZE/G);var P=Math.ceil(K/G)+0,R=Math.ceil(a.TILE_SIZE/G);const {row:S,col:M}=C.key;var V=Math.floor(M*a.TILE_SIZE/G)-P;G=Math.floor(S*a.TILE_SIZE/G)-P;K=V+R+2*P;P=G+R+2*P;for(R=C.tileInfoView.getLODInfoAt(C.key.level);V<=K;V++)for(let ka=G;ka<=P;ka++){var W=V;R.wrap&&(W=0>V?V+L:V%L);const sa=R.wrap&&0>V,ua=R.wrap&&
V%L!==V;W=this._lookupCluster(E,R,C.key.level,W,ka,w,I);if(t.isSome(W)){var ea=t.andThen(F,xa=>sa?xa.left:ua?xa.right:xa.tile);if((!H||!t.isNone(ea))&&W.count&&t.isSome(ea)&&H){const xa=W.geometry.clone();let oa=W.attributes;xa.coords[0]=n.quantizeX(ea,xa.coords[0]);xa.coords[1]=n.quantizeY(ea,xa.coords[1]);1===W.count&&t.isSome(W.referenceId)&&(oa={...W.attributes,referenceId:W.referenceId});ea=new h(xa,oa);ea.displayId=W.displayId;B.push(ea)}}}};D._getGeohashLevel=function(B){return Math.min(Math.ceil(B/
2+2),12)};D._setGeohashLevel=function(B){B=this._getGeohashLevel(B);B=1*(Math.floor(B/1)+1)-1;this._geohashLevel!==B&&(this._geohashLevel=B,this._rebuildTree(),this._bitsets.geohash.clear())};D._getTransforms=function(B,C){const w={originPosition:"upperLeft",scale:[B.resolution,B.resolution],translate:[B.bounds[0],B.bounds[3]]};C=k.getInfo(C);if(!C)return{tile:w,left:null,right:null};const [E,I]=C.valid;return{tile:w,left:{...w,translate:[I,B.bounds[3]]},right:{...w,translate:[E-I+B.bounds[0],B.bounds[3]]}}};
D._getClusterId=function(B,C,w){return(B&15)<<28|(C&16383)<<14|w&16383};D._markForDeletion=function(B,C,w){B=this._getClusterId(B,C,w);this._clusters.delete(B)};D._getClusterBounds=function(B,C,w){var E=this._schema.params.clusterRadius,I=2*E;C=w%2?C*I:C*I-E;const F=w*I;E=C+I;w=2**B.level*a.TILE_SIZE;B.wrap&&0>C&&(C=0);B.wrap&&E>w&&(E=w);w=F/a.TILE_SIZE;E/=a.TILE_SIZE;I=(F-I)/a.TILE_SIZE;C=B.getXForColumn(C/a.TILE_SIZE);w=B.getYForRow(w);E=B.getXForColumn(E);B=B.getYForRow(I);return[C,w,E,B]};D._lookupCluster=
function(B,C,w,E,I,F,H){const K=this._getClusterId(w,E,I),G=this._clusters.get(K),[L,P,R,S]=this._getClusterBounds(C,E,I);var M={x:L,y:P};I={x:R,y:S};var V=E=C=0,W=0;if(this._spatialReference.isWebMercator)C=M.x/g.earth.radius*57.29577951308232,C-=360*Math.floor((C+180)/360),E=57.29577951308232*(Math.PI/2-2*Math.atan(Math.exp(-1*M.y/g.earth.radius))),V=I.x/g.earth.radius*57.29577951308232,V-=360*Math.floor((V+180)/360),W=57.29577951308232*(Math.PI/2-2*Math.atan(Math.exp(-1*I.y/g.earth.radius)));else{E=
b.project(M,this._spatialReference,u.WGS84);I=b.project(I,this._spatialReference,u.WGS84);if(!E||!I)return null;C=E.x;E=E.y;V=I.x;W=I.y}M={geohashX:0,geohashY:0};I={geohashX:0,geohashY:0};q.setGeohashXY(M,E,C,F);q.setGeohashXY(I,W,V,F);E=M.geohashX;V=M.geohashY;W=I.geohashX;I=I.geohashY;C={xLL:E,yLL:V,xTR:W,yTR:I,level:F};E=H.getRegionStatistics(E,V,W,I,F);const {count:ea,xTotal:ka,yTotal:sa,referenceId:ua}=E;F=ea?ka/ea:0;H=ea?sa/ea:0;if(0===ea)return this._clusters.set(K,null),null;E={cluster_count:ea,
...E.attributes};B=t.isSome(G)?G.update(F,H,w,E,C,ua):m.create(B,K,F,H,w,E,C,ua);0===ea&&(B.geometry.coords[0]=(L+R)/2,B.geometry.coords[1]=(P+S)/2);this._clusters.set(K,B);this._updateAggregateValueRangeForCluster(B,B.tileLevel);return B};D._updateAggregateValueRangeForCluster=function(B,C){const w=this._aggregateValueRanges[C]||{minValue:Infinity,maxValue:0},E=w.minValue,I=w.maxValue;w.minValue=Math.min(E,B.count);w.maxValue=Math.max(I,B.count);this._aggregateValueRanges[C]=w;if(E!==w.minValue||
I!==w.maxValue)this._aggregateValueRangesChanged=!0};D._markTileClustersForDeletion=function(B,C){var w=2*C;C=Math.ceil(a.TILE_SIZE/w);const {row:E,col:I}=B.key,F=Math.floor(I*a.TILE_SIZE/w);w=Math.floor(E*a.TILE_SIZE/w);for(let H=F;H<F+C;H++)for(let K=w;K<w+C;K++)this._markForDeletion(B.key.level,H,K)};return A}(d.Store2D);p.ClusterInfo=m;p.ClusterStore=z;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/geohash/GeohashTree":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../core/CircularArray ../core/maybe ./geohashUtils ../views/2d/layers/features/support/FeatureSetReaderJSON".split(" "),
function(p,c,z,y,r,t){let l=function(){function q(k=[],n=8096){this._nodes=0;this._root=new v(0,0,0);this._statisticFields=k;this._pool=n?new z(8096):null}var g=q.prototype;g._acquire=function(k,n,h){this._nodes++;let f=null;y.isSome(this._pool)&&(f=this._pool.dequeue());return y.isSome(f)?f.realloc(k,n,h):new v(k,n,h)};g._release=function(k){this._nodes--;y.isSome(this._pool)&&this._pool.enqueue(k)};g.dropLevels=function(k){this._forEachNode(n=>{if(n.depth>=k)for(let h=0;h<n.children.length;h++){const f=
n.children[h];n.children[h]=null;f&&this._release(f)}})};g.clear=function(){this.dropLevels(0)};g.insert=function(k,n,h=0){const f=t.FeatureSetReaderJSON.fromOptimizedFeatures([k],"esriGeometryPoint").getCursor();f.next();const b=f.readGeometry();if(b){var [a,d]=b.coords;this.insertCursor(f,k.displayId,a,d,k.geohashX,k.geohashY,n,h)}};g.insertCursor=function(k,n,h,f,b,a,d,e=0){let u=this._root,m=0,x=0,A=0;for(;null!==u;){u.depth>=e&&(u.count+=1,u.xTotal+=h,u.yTotal+=f,u.xGeohashTotal+=b,u.yGeohashTotal+=
a,u.displayId=n,this._updateStatisticsCursor(k,u,1));if(m>=d){u.add(n);break}var D=Math.ceil((m+1)/2),B=Math.floor((m+1)/2);const w=1-m%2;var C=30-(3*D+2*B);D=30-(2*D+3*B);C=(b&7*w+3*(1-w)<<C)>>C;D=(a&3*w+7*(1-w)<<D)>>D;B=C+D*(8*w+4*(1-w));const E=2*w+3*(1-w);x=x<<3*w+2*(1-w)|C;A=A<<E|D;null==u.children[B]&&(u.children[B]=this._acquire(x,A,m+1));m+=1;u=u.children[B]}};g.remove=function(k,n){const h=t.FeatureSetReaderJSON.fromOptimizedFeatures([k],"esriGeometryPoint").getCursor();h.next();const f=
h.readGeometry();if(f){var [b,a]=f.coords;this.removeCursor(h,b,a,k.geohashX,k.geohashY,n)}};g.removeCursor=function(k,n,h,f,b,a){let d=this._root,e=0;for(;null!==d;){--d.count;d.xTotal-=n;d.yTotal-=h;d.xGeohashTotal-=f;d.yGeohashTotal-=b;this._updateStatisticsCursor(k,d,-1);if(e>=a){d.remove(k.getDisplayId());break}var u=Math.ceil((e+1)/2);const A=Math.floor((e+1)/2);var m=1-e%2,x=30-(3*u+2*A);u=30-(2*u+3*A);m=((f&7*m+3*(1-m)<<x)>>x)+((b&3*m+7*(1-m)<<u)>>u)*(8*m+4*(1-m));x=d.children[m];1===x.count&&
(this._release(x),d.children[m]=null);e+=1;d=x}};g.find=function(k,n,h){return this._root.find(k,n,h,0,0,0)};g.findSingleOccupancyNode=function(k,n,h,f,b){let a=this._root;for(;null!==a;){var d=a.depth,e=a.xNode,u=a.yNode;const C=1-d%2;var m=a.xGeohashTotal/a.count,x=a.yGeohashTotal/a.count;if(1===a.count&&k<m&&m<=h&&n<x&&x<=f)return a;if(d>=b)a=a.next;else{x=Math.ceil((d+1)/2);d=Math.floor((d+1)/2);m=30-(3*x+2*d);var A=30-(2*x+3*d),D=~((1<<m)-1),B=~((1<<A)-1);e<<=3*C+2*(1-C);u<<=2*C+3*(1-C);d=Math.max(e,
(k&D)>>m);x=Math.max(u,(n&B)>>A);m=Math.min(e+8*C+4*(1-C),(h&D)>>m);A=Math.min(u+4*C+8*(1-C),(f&B)>>A);for(D=B=null;x<=A;x++)for(let w=d;w<=m;w++){const E=a.children[w-e+(x-u)*(8*C+4*(1-C))];E&&(B||(B=E,B.next=a.next),D&&(D.next=E),D=E,E.next=a.next)}a=B||a.next}}return null};g.getRegionDisplayIds=function(k,n,h,f,b){let a=this._root;const d=[];for(;null!==a;){var e=a.depth,u=a.xNode,m=a.yNode;if(e>=b)e=a.xGeohashTotal/a.count,u=a.yGeohashTotal/a.count,k<=e&&e<=h&&n<=u&&u<=f&&a.displayIds.forEach(E=>
d.push(E)),a=a.next;else{var x=Math.ceil((e+1)/2),A=Math.floor((e+1)/2);e=1-e%2;var D=30-(3*x+2*A),B=30-(2*x+3*A),C=~((1<<D)-1),w=~((1<<B)-1);u<<=3*e+2*(1-e);m<<=2*e+3*(1-e);x=Math.max(u,(k&C)>>D);A=Math.max(m,(n&w)>>B);D=Math.min(u+8*e+4*(1-e),(h&C)>>D);B=Math.min(m+4*e+8*(1-e),(f&w)>>B);for(C=w=null;A<=B;A++)for(let E=x;E<=D;E++){const I=a.children[E-u+(A-m)*(8*e+4*(1-e))];I&&(w||(w=I,w.next=a.next),C&&(C.next=I),C=I,I.next=a.next)}a=w||a.next}}return d};g.getRegionStatistics=function(k,n,h,f,b){let a=
this._root,d=0,e=0,u=0;const m={};let x=0;for(;null!==a;){var A=a.depth,D=a.xNode,B=a.yNode;if(A>=b)A=a.xGeohashTotal/a.count,D=a.yGeohashTotal/a.count,k<A&&A<=h&&n<D&&D<=f&&(d+=a.count,e+=a.xTotal,u+=a.yTotal,1===a.count&&(x=a.displayId),this._aggregateStatistics(m,a.statistics)),a=a.next;else{var C=Math.ceil((A+1)/2),w=Math.floor((A+1)/2);A=1-A%2;var E=30-(3*C+2*w),I=30-(2*C+3*w),F=~((1<<E)-1),H=~((1<<I)-1);D<<=3*A+2*(1-A);B<<=2*A+3*(1-A);C=Math.max(D,(k&F)>>E);w=Math.max(B,(n&H)>>I);E=Math.min(D+
8*A+4*(1-A),(h&F)>>E);I=Math.min(B+4*A+8*(1-A),(f&H)>>I);F=H=null;for(let K=w;K<=I;K++)for(let G=C;G<=E;G++){const L=a.children[G-D+(K-B)*(8*A+4*(1-A))];if(L)if(K!==w&&K!==I&&G!==C&&G!==E){const P=L.xGeohashTotal/L.count,R=L.yGeohashTotal/L.count;k<P&&P<=h&&n<R&&R<=f&&(d+=L.count,e+=L.xTotal,u+=L.yTotal,1===L.count&&(x=L.displayId),this._aggregateStatistics(m,L.statistics))}else H||(H=L,H.next=a.next),F&&(F.next=L),F=L,L.next=a.next}a=H||a.next}}k=this._normalizeStatistics(m,d);return{count:d,attributes:k,
xTotal:e,yTotal:u,referenceId:x}};g._forEachNode=function(k){let n=this._root;for(;null!==n;){const h=this._linkChildren(n)||n.next;k(n);n=h}};g._linkChildren=function(k){let n=null,h=null;for(let f=0;f<=k.children.length;f++){const b=k.children[f];b&&(n||(n=b,n.next=k.next),h&&(h.next=b),h=b,b.next=k.next)}return n};g._updateStatisticsCursor=function(k,n,h){for(const d of this._statisticFields){const e=d.name,u=d.inField?k.readAttribute(d.inField):k.getComputedNumericAtIndex(d.inFieldIndex);switch(d.statisticType){case "norm":n.statistics[e]||
(n.statistics[e]={});var f=k.readAttribute(d.inNormalizationField),b=n.statistics[e].onStatisticField||0,a=n.statistics[e].onStatisticNormalizationField||0;null==u||isNaN(u)||null==f||0===f||isNaN(f)||(n.statistics[e].onStatisticField=b+h*u,n.statistics[e].onStatisticNormalizationField=a+h*f);break;case "sum":case "avg":n.statistics[e]||(n.statistics[e]={value:0,nanCount:0});f=n.statistics[e].value;b=n.statistics[e].nanCount;null==u||isNaN(u)?n.statistics[e].nanCount=b+h:n.statistics[e].value=f+h*
u;break;case "avg_angle":{n.statistics[e]||(n.statistics[e]={x:0,y:0,nanCount:0});f=n.statistics[e].x;b=n.statistics[e].y;a=n.statistics[e].nanCount;const m=Math.PI/180;null==u||isNaN(u)?n.statistics[e].nanCount=a+h:(n.statistics[e].x=f+h*Math.cos(u*m),n.statistics[e].y=b+h*Math.sin(u*m));break}case "mode":n.statistics[e]||(n.statistics[e]={}),n.statistics[e][u]=(n.statistics[e][u]||0)+h}}};g._aggregateStatistics=function(k,n){for(const h of this._statisticFields){const f=h.name;switch(h.statisticType){case "sum":case "avg":case "avg_angle":case "mode":case "norm":k[f]||
(k[f]={});for(const b in n[f])k[f][b]=(k[f][b]||0)+n[f][b]}}};g._normalizeStatistics=function(k,n){const h={};for(const b of this._statisticFields){const a=b.name;switch(b.statisticType){case "norm":var f=k[a];if(n&&null==f.onStatisticNormalizationField)break;if(n&&f.onStatisticNormalizationField){h[a]=f.onStatisticField/f.onStatisticNormalizationField;break}h[a]=0;break;case "sum":{if(!n)break;const {value:d,nanCount:e}=k[a];if(!(n-e))break;h[a]=d;break}case "avg":{if(!n)break;const {value:d,nanCount:e}=
k[a];if(!(n-e))break;h[a]=d/(n-e);break}case "avg_angle":{if(!n)break;const {x:d,y:e,nanCount:u}=k[a];if(!(n-u))break;h[a]=180/Math.PI*Math.atan2(e/(n-u),d/(n-u));break}case "mode":{f=k[a];let d=0,e=null;for(const u in f){const m=f[u];m>d&&(d=m,e=u)}h[a]="null"===e?null:e}}}return h};c._createClass(q,[{key:"count",get:function(){return this._root.count}},{key:"size",get:function(){return this._nodes}},{key:"poolSize",get:function(){return y.mapOr(this._pool,0,k=>k.size)}},{key:"depth",get:function(){let k=
0;this._forEachNode(n=>k=Math.max(k,n.depth));return k}}]);return q}(),v=function(){function q(k,n,h){this.yTotal=this.xTotal=this.count=0;this.statistics={};this.displayId=0;this.displayIds=new Set;this.next=null;this.yGeohashTotal=this.xGeohashTotal=this.yNode=this.xNode=this.depth=0;this.children=Array(32);for(let f=0;f<this.children.length;f++)this.children[f]=null;this.xNode=k;this.yNode=n;this.depth=h}var g=q.prototype;g.realloc=function(k,n,h){for(let f=0;f<this.children.length;f++)this.children[f]=
null;this.xNode=k;this.yNode=n;this.depth=h;this.next=null;this.count=this.yTotal=this.xTotal=this.yGeohashTotal=this.xGeohashTotal=0;this.statistics={};this.displayIds.clear();return this};g.add=function(k){this.displayIds.add(k)};g.remove=function(k){this.displayIds.delete(k)};g.getLngLatBounds=function(){var k=this.depth;const n=Math.ceil(k/2);k=Math.floor(k/2);return r.decodeGeohashXY({geohashX:this.xNode<<30-(3*n+2*k),geohashY:this.yNode<<30-(2*n+3*k)},this.depth)};g.find=function(k,n,h,f,b,
a){if(f>=h)return this;var d=1-f%2;const e=3*d+2*(1-d),u=2*d+3*(1-d),m=30-b-e,x=30-a-u;d=this.children[((k&7*d+3*(1-d)<<m)>>m)+((n&3*d+7*(1-d)<<x)>>x)*(8*d+4*(1-d))];return null==d?null:d.find(k,n,h,f+1,b+e,a+u)};return q}();p.GeohashTree=l;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/geohash/geohashUtils":function(){define(["exports"],function(p){function c(b){return 57>=b?b-48:104>=b?b-88:107>=b?b-89:110>=b?b-90:b-91}function z(b,a,d){b[0]=a;b[1]=d;return b}function y(b,a){const d=
(b[0]+b[1])/2,e=!a;b[0]=e*b[0]+a*d;b[1]=e*d+a*b[1]}function r(b,a){a=a>(b[0]+b[1])/2;y(b,a);return a}function t(b,a){const d=z(h,-90,90),e=z(f,-180,180);for(let m=0;m<a.length;m++){var u=a.charCodeAt(m);u=c(u);0===m%2?(y(e,!!(16&u)),y(e,!!(4&u)),y(e,!!(1&u)),y(d,!!(8&u)),y(d,!!(2&u))):(y(d,!!(16&u)),y(d,!!(4&u)),y(d,!!(1&u)),y(e,!!(8&u)),y(e,!!(2&u)))}b[0]=(d[0]+d[1])/2;b[1]=(e[0]+e[1])/2;return b}function l(b,a,d){let e="";const u=z(h,-90,90),m=z(f,-180,180);for(let x=0;x<d;x++){let A=0;x%2?(A|=
r(u,b)<<4,A|=r(m,a)<<3,A|=r(u,b)<<2,A|=r(m,a)<<1,A|=r(u,b)<<0):(A|=r(m,a)<<4,A|=r(u,b)<<3,A|=r(m,a)<<2,A|=r(u,b)<<1,A|=r(m,a)<<0);e+="0123456789bcdefghjkmnpqrstuvwxyz"[A]}return e}function v(b){return 180/2**Math.floor(5*b/2)}function q(b){return 360/2**Math.ceil(5*b/2)}function g(b,a){return a?1&b|(4&b)>>1|(16&b)>>2:(2&b)>>1|(8&b)>>2}function k(b,a){return a?(2&b)>>1|(8&b)>>2:1&b|(4&b)>>1|(16&b)>>2}function n(b,a,d){var e=!((b.length-1)%2);const u=b.substring(0,b.length-1);var m=c(b.charCodeAt(b.length-
1)),x=0,A=0;let D=0;var B=0;e?(x=8,A=4,D=1&m|(4&m)>>1|(16&m)>>2,B=(2&m)>>1|(8&m)>>2):(x=4,A=8,B=1&m|(4&m)>>1|(16&m)>>2,D=(2&m)>>1|(8&m)>>2);a=D+a;m=B+d;d=Math.floor(a/x);B=Math.floor(m/A);x=a-d*x;A=m-B*A;e="0123456789bcdefghjkmnpqrstuvwxyz"[e?x&1|(A&1)<<1|(x&2)<<1|(A&2)<<2|(x&4)<<2:A&1|(x&1)<<1|(A&2)<<1|(x&2)<<2|(A&4)<<2];return 1<b.length&&(d||B)?n(u,d,B)+e:u+e}const h=new Float64Array(2),f=new Float64Array(2);p.convertGeohash32ToXY=function(b,a){let d=b=0,e=30,u=30;for(let A=0;A<a.length;A++){var m=
a.charCodeAt(A),x=c(m);m=0===A%2;const D=g(x,m);x=k(x,m);e-=m?3:2;u-=m?2:3;b|=D<<e;d|=x<<u}return{geohashX:b,geohashY:d}};p.decodeBase32Char=c;p.decodeGeohash=t;p.decodeGeohashXY=function(b,a){let d=-90,e=90,u=-180,m=180;for(let w=0;w<a;w++){var x=Math.ceil((w+1)/2),A=Math.floor((w+1)/2),D=1-w%2,B=30-(3*x+2*A),C=30-(2*x+3*A);A=3*D+2*(1-D);x=2*D+3*(1-D);B=(7*D+3*(1-D)<<B&b.geohashX)>>B;D=(3*D+7*(1-D)<<C&b.geohashY)>>C;for(--A;0<=A;A--){C=(u+m)/2;const E=B&1<<A?1:0;u=(1-E)*u+E*C;m=(1-E)*C+E*m}for(--x;0<=
x;x--)B=(d+e)/2,A=D&1<<x?1:0,d=(1-A)*d+A*B,e=(1-A)*B+A*e}return[u,d,m,e]};p.encodeBase32Char=function(b){return"0123456789bcdefghjkmnpqrstuvwxyz"[b]};p.encodeGeohash=l;p.forEachIntersectingGeohash=function(b,a,d,e,u,m){var x=Math.abs(d-b),A=Math.abs(e-a);const D=v(u),B=q(u);A=Math.ceil(A/B);x=Math.ceil(x/D);u=l(b,a,u);for(let C=0;C<A;C++)for(let w=0;w<x;w++){const E=n(u,C,w),[I,F]=t([0,0],E);m(E,Math.abs((Math.min(d,I+D/2)-Math.max(b,I-D/2))*(Math.min(e,F+B/2)-Math.max(a,F-B/2)))/(D*B))}};p.getIntersectingGeohashes=
function(b,a,d,e,u){d=Math.abs(d-b);e=Math.abs(e-a);var m=v(u);const x=q(u);e=Math.ceil(e/x);d=Math.ceil(d/m);b=l(b,a,u);a=[];for(u=0;u<e;u++)for(m=0;m<d;m++)a.push(n(b,u,m));return a};p.getRelativeGeohash=n;p.latDistPerGeohash=v;p.lonDistPerGeohash=q;p.setGeohashBuf=function(b,a,d,e,u){u%2&&(u+=1);let m=0,x=0,A=-90,D=90,B=-180,C=180;for(let F=0;F<u/2;F++){for(var w=0;5>w;w++){var E=(B+C)/2,I=e>E?1:0;m|=I<<29-(w+5*F);B=(1-I)*B+I*E;C=(1-I)*E+I*C}for(w=0;5>w;w++)E=(A+D)/2,I=d>E?1:0,x|=I<<29-(w+5*F),
A=(1-I)*A+I*E,D=(1-I)*E+I*D}b[2*a]=m;b[2*a+1]=x};p.setGeohashXY=function(b,a,d,e){e%2&&(e+=1);let u=0,m=0,x=-90,A=90,D=-180,B=180;for(let I=0;I<e/2;I++){for(var C=0;5>C;C++){var w=(D+B)/2,E=d>w?1:0;u|=E<<29-(C+5*I);D=(1-E)*D+E*w;B=(1-E)*w+E*B}for(C=0;5>C;C++)w=(x+A)/2,E=a>w?1:0,m|=E<<29-(C+5*I),x=(1-E)*x+E*w,A=(1-E)*w+E*A}b.geohashX=u;b.geohashY=m};p.unpackXBits=g;p.unpackYBits=k;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/views/2d/layers/features/support/ComputedAttributeStorage":function(){define(["exports",
"./displayIdUtils","./StaticBitSet"],function(p,c,z){function y(t,l,v){if(!(t.length>l))for(;t.length<=l;)t.push(v)}let r=function(){function t(){this._numerics=[];this._strings=[];this._idGenerator=new c.DisplayIdGenerator;this._allocatedSize=256;this._bitsets=[];this._instanceIds=[];this._bounds=[]}var l=t.prototype;l.createBitset=function(){const v=this._bitsets.length;this._bitsets.push(z.StaticBitSet.create(this._allocatedSize,2147483647));return v+1};l.getBitset=function(v){return this._bitsets[v-
1]};l._expand=function(){this._allocatedSize<<=1;for(const v of this._bitsets)v.resize(this._allocatedSize)};l._ensureNumeric=function(v,q){this._numerics[v]||(this._numerics[v]=[]);y(this._numerics[v],q,0)};l._ensureInstanceId=function(v){y(this._instanceIds,v,0)};l._ensureString=function(v,q){this._strings[v]||(this._strings[v]=[]);y(this._strings[v],q,null)};l.createDisplayId=function(v=!1){const q=this._idGenerator.createId();q>this._allocatedSize&&this._expand();return((v?2147483648:0)|q)>>>
0};l.releaseDisplayId=function(v){for(const q of this._bitsets)q.unset(v);return this._idGenerator.releaseId(v&2147483647)};l.getComputedNumeric=function(v,q){return this.getComputedNumericAtIndex(v&2147483647,0)};l.setComputedNumeric=function(v,q,g){return this.setComputedNumericAtIndex(v&2147483647,g,0)};l.getComputedString=function(v,q){return this.getComputedStringAtIndex(v&2147483647,0)};l.setComputedString=function(v,q,g){return this.setComputedStringAtIndex(v&2147483647,0,g)};l.getComputedNumericAtIndex=
function(v,q){v&=2147483647;this._ensureNumeric(q,v);return this._numerics[q][v]};l.setComputedNumericAtIndex=function(v,q,g){v&=2147483647;this._ensureNumeric(q,v);this._numerics[q][v]=g};l.getInstanceId=function(v){v&=2147483647;this._ensureInstanceId(v);return this._instanceIds[v]};l.setInstanceId=function(v,q){v&=2147483647;this._ensureInstanceId(v);this._instanceIds[v]=q};l.getComputedStringAtIndex=function(v,q){v&=2147483647;this._ensureString(q,v);return this._strings[q][v]};l.setComputedStringAtIndex=
function(v,q,g){v&=2147483647;this._ensureString(q,v);this._strings[q][v]=g};l.getXMin=function(v){return this._bounds[4*(v&2147483647)]};l.getYMin=function(v){return this._bounds[4*(v&2147483647)+1]};l.getXMax=function(v){return this._bounds[4*(v&2147483647)+2]};l.getYMax=function(v){return this._bounds[4*(v&2147483647)+3]};l.setBounds=function(v,q){q=q.readHydratedGeometry();if(!q||!q.coords.length)return!1;let g=Infinity,k=Infinity,n=-Infinity,h=-Infinity;q.forEachVertex((f,b)=>{g=Math.min(g,f);
k=Math.min(k,b);n=Math.max(n,f);h=Math.max(h,b)});v&=2147483647;y(this._bounds,4*v+4,0);this._bounds[4*v]=g;this._bounds[4*v+1]=k;this._bounds[4*v+2]=n;this._bounds[4*v+3]=h;return!0};return t}();p.ComputedAttributeStorage=r;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/views/2d/layers/features/support/displayIdUtils":function(){define(["exports"],function(p){let c=function(){function z(){this._freeIds=[];this._idCounter=1}var y=z.prototype;y.createId=function(r=!1){var t=this._getFreeId();
return((r?2147483648:0)|t)>>>0};y.releaseId=function(r){this._freeIds.push(r)};y._getFreeId=function(){return this._freeIds.length?this._freeIds.pop():this._idCounter++};return z}();p.DISPLAY_ID_TYPE_AGGREGATE=1;p.DISPLAY_ID_TYPE_FEATURE=0;p.DisplayIdGenerator=c;p.getDisplayIdIndex=function(z){return z&2147483647};p.getDisplayIdType=function(z){return(z&2147483648)>>>31};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/views/2d/layers/features/support/TileStore":function(){define("../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/Evented ../../../../../core/has ../../../../../chunks/rbush ./Tile ../../../tiling/TileCoverage ../../../tiling/TileKey".split(" "),
function(p,c,z,y,r,t,l){const v={added:[],removed:[]},q=new Set,g=new l(0,0,0,0);return function(k){function n(f){var b=k.call(this)||this;b._tiles=new Map;b._index=y.rbush(9,z("csp-restrictions")?a=>({minX:a.bounds[0],minY:a.bounds[1],maxX:a.bounds[2],maxY:a.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]);b.tiles=[];b.tileScheme=f;return b}p._inheritsLoose(n,k);var h=n.prototype;h.destroy=function(){this.clear()};h.clear=function(){this.tiles.length=0;this._tiles.clear();this._index.clear()};
h.has=function(f){return this._tiles.has(f)};h.get=function(f){return this._tiles.get(f)};h.boundsIntersections=function(f){return this._index.search({minX:f[0],minY:f[1],maxX:f[2],maxY:f[3]})};h.updateTiles=function(f){const b={added:[],removed:[]};for(const a of f.added)if(!this.has(a)){const d=new r.Tile(this.tileScheme,a);this._tiles.set(a,d);this._index.insert(d);b.added.push(d)}for(const a of f.removed)this.has(a)&&(f=this.get(a),this._tiles.delete(a),this._index.remove(f),b.removed.push(f));
this.tiles.length=0;this._tiles.forEach(a=>this.tiles.push(a));(b.added.length||b.removed.length)&&this.emit("update",b)};h.setViewState=function(f){if(f=this.tileScheme.getTileCoverage(f,0)){var {spans:b,lodInfo:a}=f,{level:d}=a;if(0<b.length)for(const {row:u,colFrom:m,colTo:x}of b)for(var e=m;e<=x;e++){const A=g.set(d,u,a.normalizeCol(e),a.getWorldForColumn(e)).id;q.add(A);if(!this.has(A)){const D=new r.Tile(this.tileScheme,A);this._tiles.set(A,D);this._index.insert(D);this.tiles.push(D);v.added.push(D)}}for(d=
this.tiles.length-1;0<=d;d--)e=this.tiles[d],q.has(e.id)||(this._tiles.delete(e.id),this.tiles.splice(d,1),this._index.remove(e),v.removed.push(e));(v.added.length||v.removed.length)&&this.emit("update",v);t.pool.release(f);q.clear();v.added.length=0;v.removed.length=0}};return n}(c)})},"esri/views/2d/layers/features/support/Tile":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/ArrayPool ../../../../../geometry/Extent ../../../../../geometry/support/aaBoundingRect ../../../../../rest/support/QuantizationParameters ../../../tiling/TileKey".split(" "),
function(p,c,z,y,r,t,l){function v(g,k){const n=g.bounds,h=k.bounds;return g.key.id!==k.key.id&&g.key.world===k.key.world&&n[0]<=h[0]&&n[1]<=h[1]&&n[2]>=h[2]&&n[3]>=h[3]}let q=function(){function g(n,h){this.key=new l(0,0,0,0);this.bounds=r.create();this.objectIds=new Set;this.key.set(h);h=n.getLODInfoAt(this.key);this.tileInfoView=n;this.tileInfoView.getTileBounds(this.bounds,this.key,!0);this.resolution=h.resolution;this.scale=h.scale;this.level=h.level;this.needsClear=!0}var k=g.prototype;k.clone=
function(){return new g(this.tileInfoView,this.key)};k.createChildTiles=function(){const n=this.key.getChildKeys(),h=z.acquire();for(let f=0;f<n.length;f++)h[f]=new g(this.tileInfoView,n[f]);return h};k.getQuantizationParameters=function(){return t.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})};c._createClass(g,[{key:"id",
get:function(){return this.key.id}},{key:"extent",get:function(){return y.fromBounds(this.bounds,this.tileInfoView.tileInfo.spatialReference)}},{key:"transform",get:function(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}}},{key:"bbox",get:function(){const n=this.bounds;return{minX:n[0],minY:n[1],maxX:n[2],maxY:n[3]}}}]);return g}();p.Tile=q;p.default=q;p.isChildOf=function(g,k){return v(k,g)};p.isParentOf=v;Object.defineProperty(p,
"__esModule",{value:!0})})},"esri/views/2d/tiling/TileKey":function(){define(["../../../chunks/_rollupPluginBabelHelpers","../../../core/ObjectPool"],function(p,c){let z=function(){function y(t,l,v,q){this.set(t,l,v,q)}y.getId=function(t,l,v,q){return"object"===typeof t?`${t.level}/${t.row}/${t.col}/${t.world}`:`${t}/${l}/${v}/${q}`};var r=y.prototype;r.acquire=function(t,l,v,q){this.set(t,l,v,q)};r.contains=function(t){const l=t.level-this.level;return this.row===t.row>>l&&this.col===t.col>>l&&this.world===
t.world};r.equals=function(t){return this.level===t.level&&this.row===t.row&&this.col===t.col&&this.world===t.world};r.clone=function(){return new y(this)};r.release=function(){this.world=this.col=this.row=this.level=0};r.set=function(t,l,v,q){if(null==t)this.world=this.col=this.row=this.level=0;else if("object"===typeof t)this.level=t.level||0,this.row=t.row||0,this.col=t.col||0,this.world=t.world||0;else if("string"===typeof t){const [g,k,n,h]=t.split("/");this.level=parseFloat(g);this.row=parseFloat(k);
this.col=parseFloat(n);this.world=parseFloat(h)}else this.level=+t,this.row=+l,this.col=+v,this.world=+q||0;return this};r.toString=function(){return`${this.level}/${this.row}/${this.col}/${this.world}`};r.getParentKey=function(){return 0>=this.level?null:new y(this.level-1,this.row>>1,this.col>>1,this.world)};r.getChildKeys=function(){const t=this.level+1,l=this.row<<1,v=this.col<<1,q=this.world;return[new y(t,l,v,q),new y(t,l,v+1,q),new y(t,l+1,v,q),new y(t,l+1,v+1,q)]};r.compareRowMajor=function(t){return this.row<
t.row?-1:this.row>t.row?1:this.col<t.col?-1:this.col>t.col?1:0};p._createClass(y,[{key:"key",get:function(){return this}},{key:"id",get:function(){return this.toString()},set:function(t){this.set(t)}}]);return y}();z.pool=new c(z,null,null,25,50);return z})},"esri/views/2d/tiling/TileCoverage":function(){define(["../../../core/ObjectPool"],function(p){let c=function(){function z(){this.spans=[]}var y=z.prototype;y.acquire=function(r){this.lodInfo=r};y.release=function(){this.lodInfo=null;this.spans.length=
0};y.forEach=function(r,t){const {spans:l,lodInfo:v}=this,{level:q}=v;if(0!==l.length)for(const {row:g,colFrom:k,colTo:n}of l)for(let h=k;h<=n;h++)r.call(t,q,g,v.normalizeCol(h),v.getWorldForColumn(h))};return z}();c.pool=new p(c);return c})},"esri/views/2d/tiling/TileInfoView":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../geometry/support/spatialReferenceUtils ./LODInfo ./TileCoverage ./TileKey ./TileSpan".split(" "),function(p,c,z,y,r,t){const l=new r("0/0/0/0");let v=function(){function g(n,
h,f,b,a,d,e,u){this.x=n;this.ymin=h;this.ymax=f;this.invM=b;this.leftAdjust=a;this.rightAdjust=d;this.leftBound=e;this.rightBound=u}g.create=function(n,h){n[1]>h[1]&&([n,h]=[h,n]);const [f,b]=n,[a,d]=h;n=a-f;h=d-b;h=0!==h?n/h:0;const e=(Math.ceil(b)-b)*h,u=(Math.floor(b)-b)*h;return new g(f,Math.floor(b),Math.ceil(d),h,0>n?e:u,0>n?u:e,0>n?a:f,0>n?f:a)};var k=g.prototype;k.incrRow=function(){this.x+=this.invM};k.getLeftCol=function(){return Math.max(this.x+this.leftAdjust,this.leftBound)};k.getRightCol=
function(){return Math.min(this.x+this.rightAdjust,this.rightBound)};return g}();const q=[[0,0],[0,0],[0,0],[0,0]];return function(){function g(n,h){this.tileInfo=n;this.fullExtent=h;this.scales=[];this._lodInfos=null;this._infoByScale={};this._infoByLevel={};const f=n.lods.slice();f.sort(function(a,d){return d.scale-a.scale});const b=this._lodInfos=f.map(a=>z.create(n,a,h));f.forEach((a,d)=>{this._infoByLevel[a.level]=b[d];this._infoByScale[a.scale]=b[d];this.scales[d]=a.scale},this);this._wrap=
n.isWrappable}var k=g.prototype;k.getLODInfoAt=function(n){return this._infoByLevel["number"===typeof n?n:n.level]};k.getTileBounds=function(n,h,f=!1){l.set(h);return(h=this._infoByLevel[l.level])?h.getTileBounds(n,l,f):n};k.getTileCoords=function(n,h,f=!1){l.set(h);return(h=this._infoByLevel[l.level])?h.getTileCoords(n,l,f):n};k.getTileCoverage=function(n,h=192,f="closest"){f="closest"===f?this.getClosestInfoForScale(n.scale):this.getSmallestInfoForScale(n.scale);const b=y.pool.acquire(f),a=this._wrap;
var d=Infinity;let e=-Infinity;const u=b.spans;q[0][0]=q[0][1]=q[1][1]=q[3][0]=-h;q[1][0]=q[2][0]=n.size[0]+h;q[2][1]=q[3][1]=n.size[1]+h;for(m of q)n.toMap(m,m),m[0]=f.getColumnForX(m[0]),m[1]=f.getRowForY(m[1]);n=[];var m=3;for(h=0;4>h;h++)q[h][1]===q[m][1]?m=h:(m=v.create(q[h],q[m]),d=Math.min(m.ymin,d),e=Math.max(m.ymax,e),void 0===n[m.ymin]&&(n[m.ymin]=[]),n[m.ymin].push(m),m=h);if(null==d||null==e||100<e-d)return null;for(h=[];d<e;){null!=n[d]&&(h=h.concat(n[d]));m=Infinity;var x=-Infinity;
for(var A=h.length-1;0<=A;A--){var D=h[A];m=Math.min(m,D.getLeftCol());x=Math.max(x,D.getRightCol())}m=Math.floor(m);x=Math.floor(x);if(d>=f.first[1]&&d<=f.last[1])if(a)if(f.size[0]<f.worldSize[0])for(A=Math.floor(x/f.worldSize[0]),D=Math.floor(m/f.worldSize[0]);D<=A;D++)u.push(new t(d,Math.max(f.getFirstColumnForWorld(D),m),Math.min(f.getLastColumnForWorld(D),x)));else u.push(new t(d,m,x));else m>f.last[0]||x<f.first[0]||(m=Math.max(m,f.first[0]),x=Math.min(x,f.last[0]),u.push(new t(d,m,x)));d+=
1;for(m=h.length-1;0<=m;m--)x=h[m],x.ymax>=d?x.incrRow():h.splice(m,1)}return b};k.getTileParentId=function(n){l.set(n);n=this._lodInfos.indexOf(this._infoByLevel[l.level])-1;if(0>n)return null;this._getTileIdAtLOD(l,this._lodInfos[n],l);return l.id};k.getTileResolution=function(n){return(n=this._infoByLevel["object"===typeof n?n.level:n])?n.resolution:-1};k.getTileScale=function(n){return(n=this._infoByLevel[n.level])?n.scale:-1};k.intersects=function(n,h){l.set(h);h=this._infoByLevel[l.level];const f=
n.lodInfo;if(f.resolution>h.resolution){this._getTileIdAtLOD(l,f,l);var b=f.denormalizeCol(l.col,l.world);for(var a of n.spans)if(a.row===l.row&&a.colFrom<=b&&a.colTo>=b)return!0}if(f.resolution<h.resolution){const [e,u,m,x]=n.spans.reduce((A,D)=>{A[0]=Math.min(A[0],D.row);A[1]=Math.max(A[1],D.row);A[2]=Math.min(A[2],D.colFrom);A[3]=Math.max(A[3],D.colTo);return A},[Infinity,-Infinity,Infinity,-Infinity]);b=h.denormalizeCol(l.col,l.world);n=f.getColumnForX(h.getXForColumn(b));a=f.getRowForY(h.getYForRow(l.row));
b=f.getColumnForX(h.getXForColumn(b+1))-1;h=f.getRowForY(h.getYForRow(l.row+1))-1;return!(n>x||b<m||a>u||h<e)}const d=f.denormalizeCol(l.col,l.world);return n.spans.some(e=>e.row===l.row&&e.colFrom<=d&&e.colTo>=d)};k.normalizeBounds=function(n,h,f){n[0]=h[0];n[1]=h[1];n[2]=h[2];n[3]=h[3];this._wrap&&(h=c.getInfo(this.tileInfo.spatialReference),f=-f*(h.valid[1]-h.valid[0]),n[0]+=f,n[2]+=f);return n};k.getSmallestInfoForScale=function(n){const h=this.scales;if(this._infoByScale[n])return this._infoByScale[n];
if(n>h[0])return this._infoByScale[h[0]];for(let f=1;f<h.length-1;f++)if(n>h[f]+1E-6)return this._infoByScale[h[f-1]];return this._infoByScale[h[h.length-1]]};k.getClosestInfoForScale=function(n){const h=this.scales;if(this._infoByScale[n])return this._infoByScale[n];n=h.reduce((f,b)=>Math.abs(b-n)<Math.abs(f-n)?b:f,h[0]);return this._infoByScale[n]};k.scaleToLevel=function(n){const h=this.scales;if(this._infoByScale[n])return this._infoByScale[n].level;for(let f=h.length-1;0<=f;f--)if(n<h[f])return f===
h.length-1?this._infoByScale[h[h.length-1]].level:this._infoByScale[h[f]].level+(h[f]-n)/(h[f]-h[f+1]);return this._infoByScale[h[0]].level};k.scaleToZoom=function(n){return this.tileInfo.scaleToZoom(n)};k._getTileIdAtLOD=function(n,h,f){const b=this._infoByLevel[f.level];n.set(f);if(h.resolution<b.resolution)return null;if(h.resolution===b.resolution)return n;n.level=h.level;n.col=Math.floor(f.col*b.resolution/h.resolution+.01);n.row=Math.floor(f.row*b.resolution/h.resolution+.01);return n};p._createClass(g,
[{key:"spatialReference",get:function(){return this.tileInfo.spatialReference}}]);return g}()})},"esri/views/2d/tiling/LODInfo":function(){define(["../../../geometry/support/spatialReferenceUtils","./TileKey"],function(p,c){function z(r,t,l){r[0]=t;r[1]=l;return r}const y=new c("0/0/0/0");return function(){function r(l,v,q,g,k,n,h,f,b,a,d,e){this.level=l;this.resolution=v;this.scale=q;this.origin=g;this.first=k;this.last=n;this.size=h;this.norm=f;this.worldStart=b;this.worldEnd=a;this.worldSize=d;
this.wrap=e}r.create=function(l,v,q){var g=p.getInfo(l.spatialReference);const k=[l.origin.x,l.origin.y],n=[l.size[0]*v.resolution,l.size[1]*v.resolution],h=[-Infinity,-Infinity],f=[Infinity,Infinity],b=[Infinity,Infinity];q&&(z(h,Math.max(0,Math.floor((q.xmin-k[0])/n[0])),Math.max(0,Math.floor((k[1]-q.ymax)/n[1]))),z(f,Math.max(0,Math.floor((q.xmax-k[0])/n[0])),Math.max(0,Math.floor((k[1]-q.ymin)/n[1]))),z(b,f[0]-h[0]+1,f[1]-h[1]+1));let a;l.isWrappable?(l=[Math.ceil(Math.round((g.valid[1]-g.valid[0])/
v.resolution)/l.size[0]),b[1]],g=[Math.floor((g.origin[0]-k[0])/n[0]),h[1]],q=[l[0]+g[0]-1,f[1]],a=!0):(g=h,q=f,l=b,a=!1);return new r(v.level,v.resolution,v.scale,k,h,f,b,n,g,q,l,a)};var t=r.prototype;t.normalizeCol=function(l){if(!this.wrap)return l;const v=this.worldSize[0];return 0>l?v-1-Math.abs((l+1)%v):l%v};t.denormalizeCol=function(l,v){return this.wrap?this.worldSize[0]*v+l:l};t.getWorldForColumn=function(l){return this.wrap?Math.floor(l/this.worldSize[0]):0};t.getFirstColumnForWorld=function(l){return l*
this.worldSize[0]+this.first[0]};t.getLastColumnForWorld=function(l){return l*this.worldSize[0]+this.first[0]+this.size[0]-1};t.getColumnForX=function(l){return(l-this.origin[0])/this.norm[0]};t.getXForColumn=function(l){return this.origin[0]+l*this.norm[0]};t.getRowForY=function(l){return(this.origin[1]-l)/this.norm[1]};t.getYForRow=function(l){return this.origin[1]-l*this.norm[1]};t.getTileBounds=function(l,v,q=!1){y.set(v);var g=q?y.col:this.denormalizeCol(y.col,y.world),k=y.row;v=this.getXForColumn(g);
q=this.getYForRow(k+1);g=this.getXForColumn(g+1);k=this.getYForRow(k);l[0]=v;l[1]=q;l[2]=g;l[3]=k;return l};t.getTileCoords=function(l,v,q=!1){y.set(v);v=q?y.col:this.denormalizeCol(y.col,y.world);Array.isArray(l)?z(l,this.getXForColumn(v),this.getYForRow(y.row)):(l.x=this.getXForColumn(v),l.y=this.getYForRow(y.row));return l};return r}()})},"esri/views/2d/tiling/TileSpan":function(){define(function(){return function(p,c,z){this.row=p;this.colFrom=c;this.colTo=z}})},"esri/views/2d/layers/features/processors/SymbolProcessor":function(){define("../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/tslib.es6 ../../../../../core/Error ../../../../../core/has ../../../../../core/Logger ../../../../../core/maybe ../../../../../core/promiseUtils ../../../../../core/accessorSupport/decorators/property ../../../../../core/accessorSupport/ensureType ../../../../../core/jsonMap ../../../../../core/accessorSupport/decorators/subclass ../../../../../core/accessorSupport/diffUtils ../../../../../geometry/SpatialReference ../../../engine/webgl/Utils ../../../engine/webgl/cpuMapped/DisplayRecordReader ../../../engine/webgl/mesh/MeshData ../../../engine/webgl/mesh/factories/WGLMeshFactory ../../../engine/webgl/mesh/templates/WGLTemplateStore ../../../engine/webgl/util/BidiText ../../../engine/webgl/util/Matcher ../textUtils ./BaseProcessor ../support/AttributeStore".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k,n,h,f,b,a,d,e,u,m,x,A,D){function B(w,E){return(!w.minScale||w.minScale>=E)&&(!w.maxScale||w.maxScale<=E)}function C(w){w=w.message;const E={message:{data:{},tileKey:w.tileKey},transferList:[]};for(const H in w.data){var I=w.data[H];E.message.data[H]=null;if(t.isSome(I)){var F=I.stride;const K=I.indices.slice(0),G=I.vertices.slice(0),L=I.records.slice(0);I=t.andThen(I.metrics,P=>P.slice(0));F={stride:F,indices:K,vertices:G,records:L,metrics:I};E.transferList.push(K,
G,L);E.message.data[H]=F}}return E}r.getLogger("esri.views.2d.layers.features.processors.SymbolProcessor");z=function(w){function E(){var F=w.apply(this,arguments)||this;F.type="symbol";F._matchers={feature:null,aggregate:null};F._bufferData=new Map;return F}p._inheritsLoose(E,w);var I=E.prototype;I.initialize=function(){this.handles.add([this.tileStore.on("update",this.onTileUpdate.bind(this))])};I.destroy=function(){};I.update=function(){var F=p._asyncToGenerator(function*(H,K){K=K.schema.processors[0];
if("symbol"===K.type){var G=n.diff(this._schema,K);n.hasDiff(G,"mesh")&&(y("esri-2d-update-debug")&&console.debug("Applying Update - Processor:",G),H.mesh=!0,H.why.mesh.push("Symbology changed"),this._schema=K,this._factory=this._createFactory(K),this._factory.update(K,this.tileStore.tileScheme.tileInfo))}});return function(H,K){return F.apply(this,arguments)}}();I.onTileMessage=function(F,H,K,G){l.throwIfAborted(G);return this._onTileData(F,H,K,G)};I.onTileClear=function(F){this._bufferData.delete(F.key.id);
return this.remoteClient.invoke("tileRenderer.onTileData",{tileKey:F.id,data:{clear:!0}})};I.onTileError=function(F,H,K){return this.remoteClient.invoke("tileRenderer.onTileError",{tileKey:F.id,error:H},{signal:K.signal})};I.onTileUpdate=function(F){for(const H of F.removed)this._bufferData.has(H.key.id)&&(this._bufferData.get(H.key.id).forEach(K=>{const G=new Set;f.forEachGeometryType(L=>{L=K.message.data[L];if(t.isSome(L))for(L=b.DisplayRecordReader.from(L.records).getCursor();L.next();)G.add(L.id)});
return this.remoteClient.invoke("tileRenderer.onTileData",{tileKey:K.message.tileKey,data:{type:"update",addOrUpdate:null}})}),this._bufferData.delete(H.key.id));for(const H of F.added)this._bufferData.forEach(K=>{for(const G of K)G.message.tileKey===H.id&&this._updateTileMesh("append",H,C(G),[],!1,!1,null)})};I._addBufferData=function(F,H){this._bufferData.has(F)||this._bufferData.set(F,[]);this._bufferData.get(F).push(C(H))};I._createFactory=function(F){const {geometryType:H,objectIdField:K,fields:G}=
this.service,L=h.fromJSON(this.spatialReference),P={geometryType:H,fields:G,spatialReference:L},R=new e.WGLTemplateStore((V,W)=>this.remoteClient.invoke("tileRenderer.getMaterialItems",V,W),this.tileStore.tileScheme.tileInfo),{matcher:S,aggregateMatcher:M}=F.mesh;this._store=R;this._matchers.feature=m.createMatcher(S,R,P);this._matchers.aggregate=t.andThen(M,V=>m.createMatcher(V,R,P));return new d.WGLMeshFactory(H,K,R)};I._onTileData=function(){var F=p._asyncToGenerator(function*(H,K,G,L){const {type:P,
addOrUpdate:R,remove:S}=K,M=K.end;if(!R)return this.remoteClient.invoke("tileRenderer.onTileData",{tileKey:H.id,data:{type:P,addOrUpdate:null,remove:S,clear:!1,end:M}},L);G=this._processFeatures(H,R,G,L);try{const V=yield G;if(t.isNone(V))return this.remoteClient.invoke("tileRenderer.onTileData",{tileKey:H.id,data:{type:P,addOrUpdate:null,remove:S,clear:!1,end:M}},L);for(const W of V)H.key.id!==W.message.tileKey&&this._addBufferData(H.key.id,W);yield l.all(V.map(W=>{const ea=H.key.id===W.message.tileKey;
return this._updateTileMesh(P,H,W,ea?K.remove:[],ea&&K.end,K.clear,L.signal)}))}catch(V){this._handleError(H,V,L)}});return function(H,K,G,L){return F.apply(this,arguments)}}();I._updateTileMesh=function(){var F=p._asyncToGenerator(function*(H,K,G,L,P,R,S){R=G.message.tileKey;R!==K.key.id&&(P=!1);K=t.andThen(G,M=>M.message);G=t.andThen(G,M=>M.transferList)||[];H={type:H,addOrUpdate:K,remove:L,clear:!1,end:P};S={transferList:t.unwrap(G)||[],signal:S};l.throwIfAborted(S);return this.remoteClient.invoke("tileRenderer.onTileData",
{tileKey:R,data:H},S)});return function(H,K,G,L,P,R,S){return F.apply(this,arguments)}}();I._processFeatures=function(){var F=p._asyncToGenerator(function*(H,K,G,L){if(t.isNone(K)||!K.hasFeatures)return null;const P={transform:H.transform,hasZ:!1,hasM:!1},R=this._factory,S={viewingMode:"",scale:H.scale},M=yield this._matchers.feature,V=yield this._matchers.aggregate;l.throwIfAborted(L);const W=this._getLabelInfos(H,K);yield R.analyze(K.getCursor(),M,V,P,S);l.throwIfAborted(L);return this._writeFeatureSet(H,
K,P,W,R,G)});return function(H,K,G,L){return F.apply(this,arguments)}}();I._writeFeatureSet=function(F,H,K,G,L,P){var R=H.getSize();P=new a.MeshData(F.key.id,{features:R,records:R,metrics:0},"simple"===this._schema.mesh.matcher.type&&this._schema.mesh.matcher.isDotDensity,P,!0);R={viewingMode:"",scale:F.scale};for(H=H.getCursor();H.next();)try{const S=H.getDisplayId(),M=t.isSome(G)?G.get(S):null;L.writeCursor(P,H,K,R,F.level,M)}catch(S){}return P.serialize(F.tileInfoView.tileInfo.isWrappable)};I._handleError=
function(F,H,K){if(!l.isAbortError(H))return this.remoteClient.invoke("tileRenderer.onTileError",{tileKey:F.id,error:H.message},{signal:K.signal})};I._getLabelingSchemaForScale=function(F){var H=this._schema.mesh.labels;if(t.isNone(H))return null;if("subtype"===H.type){const K={type:"subtype",classes:{}};let G=!1;for(const L in H.classes){const P=H.classes[L].filter(R=>B(R,F.scale));G=G||!!P.length;K.classes[L]=P}return G?K:null}H=H.classes.filter(K=>B(K,F.scale));return H.length?{type:"simple",classes:H}:
null};I._getLabels=function(F,H){if("subtype"===H.type){var K;const G=t.unwrapOrThrow(this.service.subtypeField,"Expected to find subtype Field");F=F.readAttribute(G);return null==F?[]:null!=(K=H.classes[F])?K:[]}return H.classes};I._getLabelInfos=function(F,H){F=this._getLabelingSchemaForScale(F);if(t.isNone(F))return null;const K=new Map;for(H=H.getCursor();H.next();){const L=H.getDisplayId(),P=[],R=D.isAggregateId(L),S=R&&1!==H.readAttribute("cluster_count")?"aggregate":"feature";var G=this._getLabels(H,
F);for(const M of G){if(M.target!==S)continue;G=H.getStorage();G=R&&"feature"===S?G.getComputedStringAtIndex(H.readAttribute("referenceId"),M.fieldIndex):G.getComputedStringAtIndex(L,M.fieldIndex);if(!G)continue;G=u.bidiText(G.toString());const V=G[1];this._store.getMosaicItem(M.symbol,x.codepoints(G[0])).then(W=>{P[M.index]={glyphs:W.glyphMosaicItems,rtl:V,index:M.index}})}K.set(L,P)}return K};p._createClass(E,[{key:"supportsTileUpdates",get:function(){return!0}}]);return E}(A);return z=c.__decorate([k.subclass("esri.views.2d.layers.features.processors.SymbolProcessor")],
z)})},"esri/views/2d/engine/webgl/cpuMapped/DisplayRecordReader":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","../../../../../core/maybe","../definitions"],function(p,c,z,y){let r=function(){function l(q){this._cursor=this._head=q}l.from=function(q,g=0,k=q.byteLength/t.BYTES_PER_RECORD-g){q=new t(new Int32Array(q,g*t.BYTES_PER_RECORD,k*t.ELEMENTS_PER_RECORD));return new l(q)};var v=l.prototype;v.size=function(){var q,g;return null!=(q=null==(g=this._cursor)?void 0:
g.size())?q:0};v.link=function(q){if(this._head){for(var g=this._head;g._link;)g=g._link;g._link=q._head}else this._head=q._head};v.getCursor=function(){return this.copy()};v.lookup=function(q){for(this._cursor=this._head;this._cursor&&!this._cursor.lookup(q);){if(!this._cursor._link)return!1;this._cursor=this._cursor._link}return!!this._cursor};v.copy=function(){var q;const g=new l(null==(q=this._head)?void 0:q.copy());if(!g._head)return g;q=g._head;let k=g._head._link;for(;k;)q._link=k.copy(),q=
k,k=q._link;return g};v.next=function(){if(!this._cursor)return!1;if(!this._cursor.next()){if(!this._cursor._link)return!1;this._cursor=this._cursor._link;return this.next()}return!0};v.peekId=function(){var q;return null!=(q=this._cursor.peekId())?q:this._cursor._link.peekId()};v.delete=function(q){let g=this._head,k=null;for(;g;){if(g.delete(q))return g.isEmpty()&&(z.isSome(k)&&(k._link=g._link),g===this._head&&(this._head=g._link),g===this._cursor&&(this._cursor=g._link)),!0;k=g;g=g._link}return!1};
c._createClass(l,[{key:"id",get:function(){return this._cursor.id},set:function(q){this._cursor.id=q}},{key:"materialKey",get:function(){return this._cursor.materialKey},set:function(q){this._cursor.materialKey=q}},{key:"insertAfter",get:function(){return this._cursor.insertAfter}},{key:"indexFrom",get:function(){return this._cursor.indexFrom},set:function(q){this._cursor.indexFrom=q}},{key:"indexCount",get:function(){return this._cursor.indexCount},set:function(q){this._cursor.indexCount=q}},{key:"vertexFrom",
get:function(){return this._cursor.vertexFrom},set:function(q){this._cursor.vertexFrom=q}},{key:"vertexCount",get:function(){return this._cursor.vertexCount},set:function(q){this._cursor.vertexCount=q}},{key:"index",get:function(){return this._cursor._index}}]);return l}();r.ELEMENTS_PER_RECORD=y.DISPLAY_RECORD_INT_PER_ELEMENT;r.BYTES_PER_RECORD=r.ELEMENTS_PER_RECORD*Int32Array.BYTES_PER_ELEMENT;let t=function(){function l(q){this._link=null;this._index=-1;this._deletedCount=0;this._offsets={instance:null};
this._packedRecords=q}l.from=function(q,g=0,k=q.byteLength/this.BYTES_PER_RECORD-g){return new l(new Int32Array(q,g*this.BYTES_PER_RECORD,k*this.ELEMENTS_PER_RECORD))};var v=l.prototype;v.delete=function(q){const g=this._index,k=this.lookup(q);if(k)for(this.id=2147483647,++this._deletedCount;this.next()&&this.id===q;)this.id=2147483647,++this._deletedCount;this._index=g;return k};v.isEmpty=function(){return this._deletedCount===this.size()};v.link=function(q){this._link?this._link.link(q):this._link=
q};v.lookup=function(q){if(z.isNone(this._offsets.instance)){this._offsets.instance=new Map;var g=this.copy();g._index=-1;let k=0;for(;g.next();)g.id!==k&&(this._offsets.instance.set(g.id,g._index),k=g.id)}if(!this._offsets.instance.has(q))return!1;g=this._index;this._index=this._offsets.instance.get(q);return 2147483647===this.id?(this._index=g,!1):!0};v.size=function(){return this._packedRecords.length/l.ELEMENTS_PER_RECORD};v.next=function(){for(;++this._index<this.size()&&2147483647===this.id;);
return this._index<this.size()};v.peekId=function(){const q=(this._index+1)*l.ELEMENTS_PER_RECORD;return q>=this._packedRecords.length?0:this._packedRecords[q]};v.getCursor=function(){return this.copy()};v.copy=function(){const q=new l(this._packedRecords);q._link=this._link;q._index=this._index;q._offsets=this._offsets;q._deletedCount=this._deletedCount;return q};c._createClass(l,[{key:"id",get:function(){return this._packedRecords[this._index*l.ELEMENTS_PER_RECORD]},set:function(q){this._packedRecords[this._index*
l.ELEMENTS_PER_RECORD]=q}},{key:"materialKey",get:function(){return this._packedRecords[this._index*l.ELEMENTS_PER_RECORD+1]},set:function(q){this._packedRecords[this._index*l.ELEMENTS_PER_RECORD+1]=q}},{key:"insertAfter",get:function(){return this._packedRecords[this._index*l.ELEMENTS_PER_RECORD+2]}},{key:"indexFrom",get:function(){return this._packedRecords[this._index*l.ELEMENTS_PER_RECORD+3]},set:function(q){this._packedRecords[this._index*l.ELEMENTS_PER_RECORD+3]=q}},{key:"indexCount",get:function(){return this._packedRecords[this._index*
l.ELEMENTS_PER_RECORD+4]},set:function(q){this._packedRecords[this._index*l.ELEMENTS_PER_RECORD+4]=q}},{key:"vertexFrom",get:function(){return this._packedRecords[this._index*l.ELEMENTS_PER_RECORD+5]},set:function(q){this._packedRecords[this._index*l.ELEMENTS_PER_RECORD+5]=q}},{key:"vertexCount",get:function(){return this._packedRecords[this._index*l.ELEMENTS_PER_RECORD+6]},set:function(q){this._packedRecords[this._index*l.ELEMENTS_PER_RECORD+6]=q}},{key:"index",get:function(){return this._index}}]);
return l}();t.ELEMENTS_PER_RECORD=y.DISPLAY_RECORD_INT_PER_ELEMENT;t.BYTES_PER_RECORD=t.ELEMENTS_PER_RECORD*Int32Array.BYTES_PER_ELEMENT;p.DisplayRecordReader=r;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/views/2d/engine/webgl/mesh/MeshData":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../tiling/PagedTileQueue ../../../tiling/TileInfoView ../../../tiling/TileKey ../../../tiling/TileQueue ../../../tiling/TileStrategy ../definitions ../enums ../Utils ./VertexDataWriter ../../../layers/features/support/AttributeStore ../../../layers/features/support/tileUtils".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k,n,h){function f(a){switch(a){case 1:case 8:case 32:return-1;case 2:case 64:return 0;case 4:case 16:case 128:return 1}}function b(a){switch(a){case 1:case 2:case 4:return-1;case 8:case 16:return 0;case 32:case 64:case 128:return 1}}z=function(){function a(e,u,m,x,A){this.hasRecords=this._hasAggregate=this._hasDotDensity=!1;this._data={self:new Map,neighbors:[]};this._current={geometryType:0,writer:null,overlaps:0,start:0,insertAfter:0,id:0,materialKey:0,indexStart:0,
vertStart:0,isDotDensity:!1,bufferingEnabled:!1,metricBoxLenPointer:0};this.hint=u;this.tileKey=e;this._hasDotDensity=m;this._hasAggregate=x;this._pixelBufferEnabled=A}var d=a.prototype;d.serialize=function(e){const u=[];u.push(this._serializeTileVertexData(this.tileKey,this._data.self));this._data.neighbors.forEach((m,x)=>{var A=1<<x;x=f(A);A=b(A);x=h.getPow2NeighborKey(new r(this.tileKey),x,A,e);u.push(this._serializeTileVertexData(x.id,m))});return u};d._serializeTileVertexData=function(e,u){var m,
x,A,D,B;const C=[];u={[q.WGLGeometryType.MARKER]:null==(m=u.get(q.WGLGeometryType.MARKER))?void 0:m.serialize(C),[q.WGLGeometryType.FILL]:null==(x=u.get(q.WGLGeometryType.FILL))?void 0:x.serialize(C),[q.WGLGeometryType.LINE]:null==(A=u.get(q.WGLGeometryType.LINE))?void 0:A.serialize(C),[q.WGLGeometryType.TEXT]:null==(D=u.get(q.WGLGeometryType.TEXT))?void 0:D.serialize(C),[q.WGLGeometryType.LABEL]:null==(B=u.get(q.WGLGeometryType.LABEL))?void 0:B.serialize(C)};return{message:{tileKey:e,data:u},transferList:C}};
d.featureStart=function(e=0){this._current.insertAfter=e};d.featureEnd=function(){};d.recordStart=function(e,u,m,x,A){this._current.writer=this._getVertexWriter(m,x);this._current.overlaps=0;this._current.indexStart=this._current.writer.indexCount;this._current.vertStart=this._current.writer.vertexCount;this._current.bufferingEnabled=A;this._current.id=e;this._current.materialKey=u;this._current.geometryType=m;this._current.isDotDensity=!1;this._current.writer.recordStart()};d.recordCount=function(){return this._current.writer.recordCount};
d.vertexCount=function(){return this._current.writer.vertexCount};d.indexCount=function(){return this._current.writer.indexCount};d.vertexBounds=function(e,u,m,x){this._current.bufferingEnabled&&this._addOverlap(e,u,m,x)};d.vertexWrite=function(e){this._current.writer.writeVertex(e)};d.vertexWriteF32=function(e){this._current.writer.writeVertexF32(e)};d.vertexEnd=function(){};d.vertexWriter=function(){return this._current.writer.vertexWriter};d.indexWrite=function(e){this._current.writer.writeIndex(e)};
d.indexWriter=function(){return this._current.writer.indexWriter};d.metricWriter=function(){return this._current.writer.metricWriter};d.metricStart=function(e,u,m,x,A,D,B,C){this._current.writer=this._getVertexWriter(q.WGLGeometryType.LABEL,!1);const w=this._current.writer.metricWriter;w.push(n.getDisplayIdTexel(e));w.push(u);w.push(m);w.push(x);w.push(A);w.push(D);w.push(B);w.push(C);w.push(255);this._current.metricBoxLenPointer=w.push(0)};d.metricEnd=function(){const e=this._current.writer.metricWriter;
0===e.getValue(this._current.metricBoxLenPointer)&&e.seek(e.length-10)};d.metricBoxWrite=function(e,u,m,x){const A=this._current.writer.metricWriter;A.incr(this._current.metricBoxLenPointer);A.push(0);A.push(0);A.push(e);A.push(u);A.push(m);A.push(x)};d.recordEnd=function(){var e=this._current.indexStart,u=this._current.writer.indexCount;if(e===u)return!1;this.hasRecords=!0;var m=this._current.vertStart;this._current.writer.recordEnd(this._current.id,this._current.materialKey,this._current.insertAfter,
e,u-e,m,this._current.writer.vertexCount-m);if(!this._pixelBufferEnabled||this._hasAggregate||0===this._current.overlaps||this._current.geometryType===q.WGLGeometryType.LABEL)return!0;e=this._current.writer;for(u=0;8>u;u++)if(m=1<<u,this._current.overlaps&m){if(!this._data.neighbors[u]){var x=new Map;this._data.neighbors[u]=x}x=this._data.neighbors[u];var A=this._current.geometryType;if(!x.has(A)){const D=g.getStrides(A,this._current.isDotDensity).geometry;x.set(A,new k.VertexDataWriter(A,D,v.PATCH_PIXEL_BUFFER_ALLOC_SIZE))}x=
x.get(this._current.geometryType);A=4096*-f(m);m=4096*-b(m);x.copyLastFrom(e,A,m)}return!0};d._addOverlap=function(e,u,m,x){this._current.overlaps|=255^((e<0+m?148:e>=v.TILE_SIZE-m?41:189)|(u<0+x?224:u>=v.TILE_SIZE-x?7:231))};d._getVertexWriter=function(e,u){if(!this._data.self.has(e)){u=this._data.self;const m=g.getStrides(e,this._hasDotDensity).geometry;u.set(e,new k.VertexDataWriter(e,m,8E3))}return this._data.self.get(e)};c._createClass(a,[{key:"hasAggregates",get:function(){return this._hasAggregate}},
{key:"hasPixelBufferEnabled",get:function(){return this._pixelBufferEnabled}}]);return a}();p.MeshData=z;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/views/2d/tiling/PagedTileQueue":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/Logger ../../../core/jsonMap ../../../core/accessorSupport/decorators/subclass ../../../chunks/vec2 ../../support/QueueProcessor".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k){function n(d,e){d.length=0;e.forEach(u=>d.push(u));return d}const h=new Set,f=[],b=new Map,a=[0,0];z=function(d){function e(m){m=d.call(this,m)||this;m._keyToItem=new Map;m.concurrency=6;m.strategy="scale-first";m.tileInfoView=null;return m}p._inheritsLoose(e,d);var u=e.prototype;u.initialize=function(){const {concurrency:m,process:x}=this;this._queue=new k.QueueProcessor({concurrency:m,process:(A,D)=>{A=this._keyToItem.get(A);return x(A,{signal:D})},peeker:A=>A.values().next().value})};
u.destroy=function(){this.clear();this._queue.destroy();this._queue=null};u.abort=function(m){this._queue.abort("string"===typeof m?m:m.id)};u.clear=function(){this._queue.clear();this._keyToItem.clear();this.notifyChange("updating")};u.has=function(m){return"string"===typeof m?this._keyToItem.has(m):this._keyToItem.has(m.id)};u.isOngoing=function(m){m="string"===typeof m?m:m.id;return this.has(m)&&this._queue.isOngoing(m)};u.pause=function(){this._queue.pause()};u.push=function(m,x){const A=m.key.id+
"-"+x;if(this.has(A))return this.get(A);x=this._queue.push(A);const D=()=>{this._keyToItem.delete(A);this.notifyChange("updating")};this._keyToItem.set(A,m);x.then(D,D);this.notifyChange("updating");return x};u.reset=function(){this._queue.reset();this.notifyChange("updating")};u.resume=function(){this._queue.resume()};u._peekByScaleFirst=function(m){if(!this.state)return m.values().next().value;const x=this.tileInfoView;let A=Number.NEGATIVE_INFINITY,D=Number.POSITIVE_INFINITY;m.forEach(I=>{I=this._keyToItem.get(I);
const F=this.tileInfoView.getTileScale(I.key);b.has(F)||(b.set(F,[]),A=Math.max(F,A),D=Math.min(F,D));b.get(F).push(I.key);h.add(F)});let B=this.state.scale;b.has(B)||(n(f,h),f.sort(),B=f.reduce((I,F)=>Math.abs(F-B)<Math.abs(I-B)?F:I,f[0]));B=Math.min(B,A);B=Math.max(B,D);m=b.get(B);const C=x.getClosestInfoForScale(B),w=C.getColumnForX(this.state.center[0]),E=C.getRowForY(this.state.center[1]);m.sort((I,F)=>{const H=C.denormalizeCol(I.col,I.world),K=C.denormalizeCol(F.col,F.world);return Math.sqrt((w-
H)*(w-H)+(E-I.row)*(E-I.row))-Math.sqrt((w-K)*(w-K)+(E-F.row)*(E-F.row))});h.clear();b.clear();return m[0].id};u._peekByCenterFirst=function(m){if(!this.state)return m.values().next().value;const x=this.tileInfoView,A=this.state.center;let D=Number.POSITIVE_INFINITY,B=null;m.forEach(C=>{C=this._keyToItem.get(C);x.getTileCoords(a,C.key);const w=g.distance(a,A);w<D&&(D=w,B=C.key)});return B.id};p._createClass(e,[{key:"length",get:function(){return this._queue?this._queue.length:0}},{key:"onGoingCount",
get:function(){return this._keyToItem.size}},{key:"updating",get:function(){return 0<this.length||0<this.onGoingCount}}]);return e}(z);c.__decorate([y.property({constructOnly:!0})],z.prototype,"concurrency",void 0);c.__decorate([y.property({constructOnly:!0})],z.prototype,"process",void 0);c.__decorate([y.property()],z.prototype,"state",void 0);c.__decorate([y.property({constructOnly:!0})],z.prototype,"strategy",void 0);c.__decorate([y.property({constructOnly:!0})],z.prototype,"tileInfoView",void 0);
c.__decorate([y.property({readOnly:!0})],z.prototype,"updating",null);return z=c.__decorate([q.subclass("esri.views.2d.tiling.PagedTileQueue")],z)})},"esri/chunks/vec2":function(){define(["exports","./common"],function(p,c){function z(M,V){M[0]=V[0];M[1]=V[1];return M}function y(M,V,W){M[0]=V;M[1]=W;return M}function r(M,V,W){M[0]=V[0]+W[0];M[1]=V[1]+W[1];return M}function t(M,V,W){M[0]=V[0]-W[0];M[1]=V[1]-W[1];return M}function l(M,V,W){M[0]=V[0]*W[0];M[1]=V[1]*W[1];return M}function v(M,V,W){M[0]=
V[0]/W[0];M[1]=V[1]/W[1];return M}function q(M,V){M[0]=Math.ceil(V[0]);M[1]=Math.ceil(V[1]);return M}function g(M,V){M[0]=Math.floor(V[0]);M[1]=Math.floor(V[1]);return M}function k(M,V,W){M[0]=Math.min(V[0],W[0]);M[1]=Math.min(V[1],W[1]);return M}function n(M,V,W){M[0]=Math.max(V[0],W[0]);M[1]=Math.max(V[1],W[1]);return M}function h(M,V){M[0]=Math.round(V[0]);M[1]=Math.round(V[1]);return M}function f(M,V,W){M[0]=V[0]*W;M[1]=V[1]*W;return M}function b(M,V,W,ea){M[0]=V[0]+W[0]*ea;M[1]=V[1]+W[1]*ea;
return M}function a(M,V){const W=V[0]-M[0];M=V[1]-M[1];return Math.sqrt(W*W+M*M)}function d(M,V){const W=V[0]-M[0];M=V[1]-M[1];return W*W+M*M}function e(M){const V=M[0];M=M[1];return Math.sqrt(V*V+M*M)}function u(M){const V=M[0];M=M[1];return V*V+M*M}function m(M,V){M[0]=-V[0];M[1]=-V[1];return M}function x(M,V){M[0]=1/V[0];M[1]=1/V[1];return M}function A(M,V){var W=V[0];const ea=V[1];W=W*W+ea*ea;0<W&&(W=1/Math.sqrt(W),M[0]=V[0]*W,M[1]=V[1]*W);return M}function D(M,V){return M[0]*V[0]+M[1]*V[1]}function B(M,
V,W){V=V[0]*W[1]-V[1]*W[0];M[0]=M[1]=0;M[2]=V;return M}function C(M,V,W,ea){const ka=V[0];V=V[1];M[0]=ka+ea*(W[0]-ka);M[1]=V+ea*(W[1]-V);return M}function w(M,V){V=V||1;const W=2*c.RANDOM()*Math.PI;M[0]=Math.cos(W)*V;M[1]=Math.sin(W)*V;return M}function E(M,V,W){const ea=V[0];V=V[1];M[0]=W[0]*ea+W[2]*V;M[1]=W[1]*ea+W[3]*V;return M}function I(M,V,W){const ea=V[0];V=V[1];M[0]=W[0]*ea+W[2]*V+W[4];M[1]=W[1]*ea+W[3]*V+W[5];return M}function F(M,V,W){const ea=V[0];V=V[1];M[0]=W[0]*ea+W[3]*V+W[6];M[1]=W[1]*
ea+W[4]*V+W[7];return M}function H(M,V,W){const ea=V[0];V=V[1];M[0]=W[0]*ea+W[4]*V+W[12];M[1]=W[1]*ea+W[5]*V+W[13];return M}function K(M,V,W,ea){const ka=V[0]-W[0];V=V[1]-W[1];const sa=Math.sin(ea);ea=Math.cos(ea);M[0]=ka*ea-V*sa+W[0];M[1]=ka*sa+V*ea+W[1];return M}function G(M,V){var W=M[0];M=M[1];const ea=V[0];V=V[1];let ka=W*W+M*M;0<ka&&(ka=1/Math.sqrt(ka));let sa=ea*ea+V*V;0<sa&&(sa=1/Math.sqrt(sa));W=(W*ea+M*V)*ka*sa;return 1<W?0:-1>W?Math.PI:Math.acos(W)}function L(M){return"vec2("+M[0]+", "+
M[1]+")"}function P(M,V){return M[0]===V[0]&&M[1]===V[1]}function R(M,V){const W=M[0];M=M[1];const ea=V[0];V=V[1];return Math.abs(W-ea)<=c.EPSILON*Math.max(1,Math.abs(W),Math.abs(ea))&&Math.abs(M-V)<=c.EPSILON*Math.max(1,Math.abs(M),Math.abs(V))}var S=Object.freeze({__proto__:null,copy:z,set:y,add:r,subtract:t,multiply:l,divide:v,ceil:q,floor:g,min:k,max:n,round:h,scale:f,scaleAndAdd:b,distance:a,squaredDistance:d,length:e,squaredLength:u,negate:m,inverse:x,normalize:A,dot:D,cross:B,lerp:C,random:w,
transformMat2:E,transformMat2d:I,transformMat3:F,transformMat4:H,rotate:K,angle:G,str:L,exactEquals:P,equals:R,len:e,sub:t,mul:l,div:v,dist:a,sqrDist:d,sqrLen:u});p.add=r;p.angle=G;p.ceil=q;p.copy=z;p.cross=B;p.dist=a;p.distance=a;p.div=v;p.divide=v;p.dot=D;p.equals=R;p.exactEquals=P;p.floor=g;p.inverse=x;p.len=e;p.length=e;p.lerp=C;p.max=n;p.min=k;p.mul=l;p.multiply=l;p.negate=m;p.normalize=A;p.random=w;p.rotate=K;p.round=h;p.scale=f;p.scaleAndAdd=b;p.set=y;p.sqrDist=d;p.sqrLen=u;p.squaredDistance=
d;p.squaredLength=u;p.str=L;p.sub=t;p.subtract=t;p.transformMat2=E;p.transformMat2d=I;p.transformMat3=F;p.transformMat4=H;p.vec2=S})},"esri/views/2d/tiling/TileQueue":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/Logger ../../../core/jsonMap ../../../core/accessorSupport/decorators/subclass ../../../chunks/vec2 ../../support/QueueProcessor".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k){function n(d,e){d.length=0;e.forEach(u=>d.push(u));return d}const h=new Set,f=[],b=new Map,a=[0,0];z=function(d){function e(m){m=d.call(this,m)||this;m._keyToItem=new Map;m.concurrency=6;m.strategy="scale-first";m.tileInfoView=null;return m}p._inheritsLoose(e,d);var u=e.prototype;u.initialize=function(){const {concurrency:m,process:x,strategy:A}=this;this._queue=new k.QueueProcessor({concurrency:m,process:(D,B)=>{D=this._keyToItem.get(D);return x(D,{signal:B})},peeker:"scale-first"===
A?D=>this._peekByScaleFirst(D):D=>this._peekByCenterFirst(D)})};u.destroy=function(){this.clear();this._queue.destroy();this._queue=null};u.abort=function(m){this._queue.abort("string"===typeof m?m:m.id)};u.clear=function(){this._queue.clear();this._keyToItem.clear();this.notifyChange("updating")};u.has=function(m){return"string"===typeof m?this._keyToItem.has(m):this._keyToItem.has(m.id)};u.isOngoing=function(m){m="string"===typeof m?m:m.id;return this.has(m)&&this._queue.isOngoing(m)};u.pause=function(){this._queue.pause()};
u.push=function(m){const x=m.key.id;if(this._queue.has(x))return this._queue.get(x);const A=this._queue.push(x),D=()=>{this._keyToItem.delete(x);this.notifyChange("updating")};this._keyToItem.set(x,m);A.then(D,D);this.notifyChange("updating");return A};u.reset=function(){this._queue.reset()};u.resume=function(){this._queue.resume()};u._peekByScaleFirst=function(m){if(!this.state)return m.values().next().value;const x=this.tileInfoView;let A=Number.NEGATIVE_INFINITY,D=Number.POSITIVE_INFINITY;m.forEach(I=>
{I=this._keyToItem.get(I);const F=this.tileInfoView.getTileScale(I.key);b.has(F)||(b.set(F,[]),A=Math.max(F,A),D=Math.min(F,D));b.get(F).push(I.key);h.add(F)});let B=this.state.scale;b.has(B)||(n(f,h),f.sort(),B=f.reduce((I,F)=>Math.abs(F-B)<Math.abs(I-B)?F:I,f[0]));B=Math.min(B,A);B=Math.max(B,D);m=b.get(B);const C=x.getClosestInfoForScale(B),w=C.getColumnForX(this.state.center[0]),E=C.getRowForY(this.state.center[1]);m.sort((I,F)=>{const H=C.denormalizeCol(I.col,I.world),K=C.denormalizeCol(F.col,
F.world);return Math.sqrt((w-H)*(w-H)+(E-I.row)*(E-I.row))-Math.sqrt((w-K)*(w-K)+(E-F.row)*(E-F.row))});h.clear();b.clear();return m[0].id};u._peekByCenterFirst=function(m){if(!this.state)return m.values().next().value;const x=this.tileInfoView,A=this.state.center;let D=Number.POSITIVE_INFINITY,B=null;m.forEach(C=>{C=this._keyToItem.get(C);x.getTileCoords(a,C.key);const w=g.distance(a,A);w<D&&(D=w,B=C.key)});return B.id};p._createClass(e,[{key:"length",get:function(){return this._queue?this._queue.length:
0}},{key:"onGoingCount",get:function(){return this._keyToItem.size}},{key:"updating",get:function(){return 0<this.length||0<this.onGoingCount}}]);return e}(z);c.__decorate([y.property({constructOnly:!0})],z.prototype,"concurrency",void 0);c.__decorate([y.property({constructOnly:!0})],z.prototype,"process",void 0);c.__decorate([y.property()],z.prototype,"state",void 0);c.__decorate([y.property({constructOnly:!0})],z.prototype,"strategy",void 0);c.__decorate([y.property({constructOnly:!0})],z.prototype,
"tileInfoView",void 0);c.__decorate([y.property({readOnly:!0})],z.prototype,"updating",null);return z=c.__decorate([q.subclass("esri.views.2d.tiling.TileQueue")],z)})},"esri/views/2d/tiling/TileStrategy":function(){define(["./TileCache","./TileCoverage","./TileKey"],function(p,c,z){const y=new z(0,0,0,0),r=new Map,t=[],l=[];return function(){function v(g){this._previousScale=Number.POSITIVE_INFINITY;this.cachePolicy="keep";this.coveragePolicy="closest";this.resampling=!0;this.tileIndex=new Map;this.tiles=
[];this.buffer=192;this.acquireTile=g.acquireTile;this.releaseTile=g.releaseTile;this.tileInfoView=g.tileInfoView;this.resampling=null==g.resampling||!!g.resampling;g.cachePolicy&&(this.cachePolicy=g.cachePolicy);g.coveragePolicy&&(this.coveragePolicy=g.coveragePolicy);null!=g.buffer&&(this.buffer=g.buffer);g.cacheSize&&(this._tileCache=new p(g.cacheSize,this.tileInfoView,k=>{this.releaseTile(k)}))}var q=v.prototype;q.destroy=function(){this.tileIndex.clear()};q.update=function(g){const {resampling:k,
tileIndex:n}=this,h=this.tileInfoView.getTileCoverage(g.state,this.buffer,this.coveragePolicy);l.length=0;t.length=0;r.clear();if(h){var {minScale:f,maxScale:b}=this.tileInfoView.tileInfo,{spans:a,lodInfo:d}=h,{level:e}=d,{scale:u,center:m,resolution:x}=g.state,A=!g.stationary&&u>this._previousScale;this._previousScale=u;this.tiles.length=0;if(!k&&(u>f||u<b))return this.tiles.length=0,r.clear(),n.forEach(E=>{this.releaseTile(E)}),n.clear(),l.length=0,t.length=0,r.clear(),c.pool.release(h),!0;n.forEach(E=>
E.visible=!0);var D=g=0;if(0<a.length)for(const {row:E,colFrom:I,colTo:F}of a)for(let H=I;H<=F;H++){g++;const K=y.set(e,E,d.normalizeCol(H),d.getWorldForColumn(H)).id;if(n.has(K)){var B=n.get(K);B.isReady?(r.set(K,B),D++):A||this._addParentTile(K,r)}else{if(this._tileCache&&this._tileCache.has(K)){if(B=this._tileCache.pop(K),this.tileIndex.set(K,B),B.isReady){r.set(K,B);D++;continue}}else B=this.acquireTile(y),this.tileIndex.set(K,B);A||this._addParentTile(K,r)}}var C=D===g;n.forEach((E,I)=>{y.set(I);
if(!r.has(I)){var F=this.tileInfoView.intersects(h,y),H="purge"===this.cachePolicy?y.level!==e:y.level>e;!F||!A&&C?!H&&F||t.push(I):E.isReady?l.push(I):H&&t.push(I)}});for(var w of l)(g=n.get(w))&&g.isReady&&r.set(w,g);for(const E of t)w=n.get(E),this._tileCache?this._tileCache.add(w):this.releaseTile(w),n.delete(E);r.forEach(E=>this.tiles.push(E));n.forEach(E=>{r.has(E.key.id)||(E.visible=!1)});this._tileCache&&this._tileCache.prune(e,m,x);c.pool.release(h);r.clear();return C}};q.clear=function(g=
!0){const {tileIndex:k}=this;g&&k.forEach(n=>{this.releaseTile(n)});k.clear()};q.updateCacheSize=function(g){this._tileCache&&(this._tileCache.maxSize=g)};q._addParentTile=function(g,k){let n=null;for(;;){g=this.tileInfoView.getTileParentId(g);if(!g)break;if(this.tileIndex.has(g)){if((n=this.tileIndex.get(g))&&n.isReady){k.has(n.key.id)||k.set(n.key.id,n);break}}else if(this._tileCache&&this._tileCache.has(g)&&(n=this._tileCache.pop(g),this.tileIndex.set(g,n),n&&n.isReady)){k.has(n.key.id)||k.set(n.key.id,
n);break}}};return v}()})},"esri/views/2d/tiling/TileCache":function(){define(["../../../chunks/vec2"],function(p){return function(){function c(y,r,t){this.maxSize=y;this.tileInfoView=r;this.removedFunc=t;this._tilePerId=new Map;this._tileKeysPerLevel=[]}var z=c.prototype;z.has=function(y){return this._tilePerId.has(y)};z.get=function(y){return this._tilePerId.get(y)};z.pop=function(y){const r=this._tilePerId.get(y);if(!r)return null;const t=this._tileKeysPerLevel[r.key.level];this._tilePerId["delete"](y);
for(let l=0;l<t.length;l++)if(t[l].id===y){t.splice(l,1);break}r.visible=!0;return r};z.add=function(y){y.visible=!1;const r=y.key,t=r.id;this._tilePerId.has(t)||(this._tilePerId.set(t,y),y=r.level,this._tileKeysPerLevel[y]||(this._tileKeysPerLevel[y]=[]),this._tileKeysPerLevel[y].push(r))};z.prune=function(y,r,t){let l=this._tilePerId.size;if(!(l<=this.maxSize)){for(var v=this._tileKeysPerLevel.length-1;l>this.maxSize&&0<=v;)v!==y&&(l=this._pruneAroundCenterTile(l,r,t,v)),v--;l>this.maxSize&&(l=
this._pruneAroundCenterTile(l,r,t,y))}};z._pruneAroundCenterTile=function(y,r,t,l){l=this._tileKeysPerLevel[l];if(!l||0===l.length)return y;const {size:v,origin:q}=this.tileInfoView.tileInfo,g=t*v[0],k=t*v[1],n=[0,0],h=[0,0];for(l.sort((f,b)=>{n[0]=q.x+g*(f.col+.5);n[1]=q.y-k*(f.row+.5);h[0]=q.x+g*(b.col+.5);h[1]=q.y-k*(b.row+.5);return p.squaredDistance(n,r)-p.squaredDistance(h,r)});0<l.length&&(t=l.pop(),this._removeTile(t.id),y--,y!==this.maxSize););return y};z._removeTile=function(y){const r=
this._tilePerId.get(y);this.removedFunc&&this.removedFunc(r);this._tilePerId["delete"](y)};return c}()})},"esri/views/2d/engine/webgl/mesh/VertexDataWriter":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","../definitions","./heuristics","../util/Writer"],function(p,c,z,y,r){let t=function(){function l(q,g,k){this._start={index:0,vertex:0};k=y.getMeshSizeHint(q,g,k);g/=4;this.geometryType=q;this._records=new r(Int32Array,k.recordBytes);this._indices=new r(Uint32Array,
k.indexBytes);this._vertices=new r(Uint32Array,k.vertexBytes);this._metrics=new r(Float32Array,0);this._strideInt=g}var v=l.prototype;v.serialize=function(q){const g=this._records.buffer(),k=this._indices.buffer(),n=this._vertices.buffer(),h=this._metrics.length?this._metrics.buffer():null,f=4*this._strideInt;q.push(g,k,n);return{stride:f,records:g,indices:k,vertices:n,metrics:h}};v.recordStart=function(){this._start.index=this._indices.length;this._start.vertex=this._vertices.length};v.recordEnd=
function(q,g,k,n,h,f,b){this._records.push(q);this._records.push(g);this._records.push(k);this._records.push(n);this._records.push(h);this._records.push(f);this._records.push(b)};v.writeIndex=function(q){this._indices.push(q)};v.writeVertex=function(q){this._vertices.push(q)};v.writeVertexF32=function(q){this._vertices.writeF32(q)};v.copyLastFrom=function(q,g,k){var n=q._records.length-7;const h=q._records.getValue(n),f=q._records.getValue(n+1),b=q._records.getValue(n+2),a=q._records.getValue(n+4);
n=q._records.getValue(n+6);const d=this._vertices.length;var e=(q._start.vertex-this._vertices.length)/this._strideInt;const u=this._indices.length,m=this.vertexCount;for(var x=q._start.index;x!==q._indices.length;x++){const A=q._indices.getValue(x);this._indices.push(A-e)}for(e=q._start.vertex;e!==q._vertices.length;e++)x=q._vertices.getValue(e),this._vertices.push(x);for(q=d;q<=this._vertices.length;q+=this._strideInt)this._vertices.i1616Add(q,g,k);this._records.push(h);this._records.push(f);this._records.push(b);
this._records.push(u);this._records.push(a);this._records.push(m);this._records.push(n)};c._createClass(l,[{key:"strideInt",get:function(){return this._strideInt}},{key:"recordCount",get:function(){return this._records.length/z.DISPLAY_RECORD_INT_PER_ELEMENT}},{key:"vertexCount",get:function(){return this._vertices.length/this._strideInt}},{key:"indexCount",get:function(){return this._indices.length}},{key:"indexWriter",get:function(){return this._indices}},{key:"vertexWriter",get:function(){return this._vertices}},
{key:"metricWriter",get:function(){return this._metrics}}]);return l}();p.VertexDataWriter=t;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/views/2d/engine/webgl/mesh/heuristics":function(){define(["exports","../definitions","../enums"],function(p,c,z){const y=new Map;y.set(z.WGLGeometryType.MARKER,{multiplier:1,indicesPerRecord:6,verticesPerRecord:4});y.set(z.WGLGeometryType.LINE,{multiplier:1,indicesPerRecord:24,verticesPerRecord:8});y.set(z.WGLGeometryType.FILL,{multiplier:1,indicesPerRecord:10,
verticesPerRecord:10});y.set(z.WGLGeometryType.TEXT,{multiplier:8,indicesPerRecord:6,verticesPerRecord:4});y.set(z.WGLGeometryType.LABEL,{multiplier:8,indicesPerRecord:6,verticesPerRecord:4});p.getMeshHeuristic=function(r){return y.get(r)};p.getMeshSizeHint=function(r,t,l){const {indicesPerRecord:v,multiplier:q,verticesPerRecord:g}=y.get(r);return{recordBytes:l*c.DISPLAY_RECORD_INT_PER_ELEMENT*Uint32Array.BYTES_PER_ELEMENT,indexBytes:q*v*l*Uint32Array.BYTES_PER_ELEMENT,vertexBytes:q*g*l*t}};Object.defineProperty(p,
"__esModule",{value:!0})})},"esri/views/2d/engine/webgl/util/Writer":function(){define(["../../../../../chunks/_rollupPluginBabelHelpers"],function(p){return function(){function c(y,r){this._pos=0;r=r?this._roundToNearest(r,y.BYTES_PER_ELEMENT):40;this._array=new ArrayBuffer(r);this._buffer=new y(this._array);this._ctor=y;this._i16View=new Int16Array(this._array)}var z=c.prototype;z._roundToNearest=function(y,r){y=Math.round(y);return y+(r-y%r)};z._ensureSize=function(y){if(this._pos+y>=this._buffer.length){y=
this._roundToNearest(1.5*(this._array.byteLength+y*this._buffer.BYTES_PER_ELEMENT),this._buffer.BYTES_PER_ELEMENT);y=new ArrayBuffer(y);const r=new this._ctor(y);r.set(this._buffer,0);this._array=y;this._buffer=r;this._i16View=new Int16Array(this._array)}};z.writeF32=function(y){this._ensureSize(1);const r=this._pos;(new Float32Array(this._array,4*this._pos,1))[0]=y;this._pos++;return r};z.push=function(y){this._ensureSize(1);const r=this._pos;this._buffer[this._pos++]=y;return r};z.writeFixed=function(y){this._buffer[this._pos++]=
y};z.setValue=function(y,r){this._buffer[y]=r};z.i1616Add=function(y,r,t){this._i16View[2*y]+=r;this._i16View[2*y+1]+=t};z.getValue=function(y){return this._buffer[y]};z.incr=function(y){if(this._buffer.length<y)throw Error("Increment index overflows the target buffer");this._buffer[y]++};z.decr=function(y){this._buffer[y]--};z.writeRegion=function(y){this._ensureSize(y.length);const r=this._pos;this._buffer.set(y,this._pos);this._pos+=y.length;return r};z.writeManyFrom=function(y,r,t){for(this._ensureSize(t-
r);r!==t;r++)this.writeFixed(y._buffer[r])};z.buffer=function(){const y=this._array.slice(0,4*this._pos);this.destroy();return y};z.toArray=function(){const y=this._array,r=[];for(let t=0;t<y.byteLength/4;t++)r.push(y[t]);return r};z.seek=function(y){this._pos=y};z.destroy=function(){this._buffer=this._array=null};p._createClass(c,[{key:"length",get:function(){return this._pos}}]);return c}()})},"esri/views/2d/layers/features/support/tileUtils":function(){define(["exports","./Tile"],function(p,c){function z(y,
r,t,l){y=y.clone();const v=1<<y.level;r=y.col+r;t=y.row+t;l&&0>r?(y.col=r+v,--y.world):r>=v?(y.col=r-v,y.world+=1):y.col=r;y.row=t;return y}p.getPow2NeighborKey=z;p.getPow2NeighborTile=function(y,r,t){r=z(y.key,r,t,y.tileInfoView.tileInfo.isWrappable);return new c.Tile(y.tileInfoView,r)};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/views/2d/engine/webgl/mesh/factories/WGLMeshFactory":function(){define("exports ../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/has ../../../../../../core/maybe ../../../../../../core/promiseUtils ../templates/WGLLabelTemplate ../templates/WGLMarkerTemplate ../templates/WGLTemplateStore ../../../../layers/features/support/AttributeStore".split(" "),
function(p,c,z,y,r,t,l,v,q){z=function(){function g(n,h,f){this._geometryType=n;this._idField=h;this._templateStore=f}var k=g.prototype;k.update=function(n,h){y.isSome(n.mesh.labels)&&(this._labelTemplates=this._createLabelTemplates(n.mesh.labels,h))};k._createLabelTemplates=function(n,h){const f=new Map;if("simple"===n.type){for(var b of n.classes)n=t.fromLabelClass(b,h),f.set(b.index,n);return f}for(const a in n.classes){b=n.classes[a];for(const d of b)b=t.fromLabelClass(d,h),f.set(d.index,b)}return f};
k.analyze=function(){var n=c._asyncToGenerator(function*(h,f,b,a,d,e){if(!r.isAborted(e)){var u;"dictionary"===f.type&&(u=yield f.analyze(this._idField,h.copy(),a,d,e));for(var m=0;h.next();){var x=void 0;x=u?u[m++]:y.isSome(b)&&q.isAggregateId(h.getDisplayId())&&1!==h.readAttribute("cluster_count")?b.match(this._idField,h,this._geometryType,a,d):f.match(this._idField,h,this._geometryType,a,d);h.setGroupId(x);if(v.isDynamicId(x)){x=this._templateStore.getDynamicTemplateGroup(x);for(const A of x)A&&
A.analyze&&A.analyze(this._templateStore,h,a,d)}}return this._templateStore.finalize(e)}});return function(h,f,b,a,d,e){return n.apply(this,arguments)}}();k.analyzeGraphics=function(){var n=c._asyncToGenerator(function*(h,f,b,a,d){if(!r.isAborted(d)){h=h.getCursor();for(f&&(yield f.analyze(this._idField,h.copy(),b,a,d));h.next();){let e=h.getGroupId();if(null==e||-1===e)e=f.match(this._idField,h,h.geometryType,b,a),h.setGroupId(e);if(v.isDynamicId(e)){const u=this._templateStore.getDynamicTemplateGroup(e);
for(const m of u)m&&m.analyze&&m.analyze(this._templateStore,h,b,a)}h.setGroupId(e)}return this._templateStore.finalize(d)}});return function(h,f,b,a,d){return n.apply(this,arguments)}}();k.writeGraphic=function(n,h,f){const b=h.getGroupId(),a=h.getDisplayId(),d=this._templateStore.getTemplateGroup(b);n.featureStart(h.insertAfter);if(null!=a){if(v.isDynamicId(b))for(const e of d)e.bindFeature(h,null,null);if(d){for(const e of d)e&&e.write(n,h,f);n.featureEnd()}}};k.writeCursor=function(n,h,f,b,a,
d){const e=h.getGroupId(),u=h.getDisplayId(),m=this._templateStore.getTemplateGroup(e);h.getObjectId();if(null!=u&&m){if(v.isDynamicId(e))for(const x of m)x.bindFeature(h,f,b);for(const x of m)x.write(n,h,a);y.isSome(d)&&n.hasRecords&&(f=d&&this._findLabelRef(m),this._writeLabels(n,h,d,f,a))}};k._findLabelRef=function(n){for(const h of n)if(h instanceof l)return h;return null};k._writeLabels=function(n,h,f,b,a){for(const d of f)if(y.isSome(d)&&d){const {glyphs:e,rtl:u,index:m}=d;f=this._labelTemplates.get(m);
f.setZoomLevel(a);f.bindReferenceTemplate(b);f.bindTextInfo(e,u);f.write(n,h,null)}};c._createClass(g,[{key:"templates",get:function(){return this._templateStore}}]);return g}();p.WGLMeshFactory=z;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/views/2d/engine/webgl/mesh/templates/WGLLabelTemplate":function(){define("../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/Error ../../../../../../core/Logger ../../../../../../core/mathUtils ../../../../../../core/maybe ../../../../../../core/screenUtils ../../alignmentUtils ../../color ../../definitions ../../enums ../../number ../../materialKey/MaterialKey ./meshUtils ./segmentUtils ./WGLTextTemplate".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k,n,h,f,b){const a=z.getLogger("esri.views.2d.engine.webgl.WGLLabelTemplate"),d=(u,m="mapview-labeling")=>a.error(new c(m,u)),e=function(u){const m=new Map;return x=>{m.has(x)||m.set(x,u(x));return m.get(x)}}(u=>{let m=0;if(0===u)return Infinity;for(;!(u%2);)m++,u/=2;return m});return function(u){function m(A,D,B,C){var w=u.call(this,A,B.font.size,B.haloSize||0,B.color&&v.premultiplyAlphaRGBAArray(B.color)||0,B.haloColor&&v.premultiplyAlphaRGBAArray(B.haloColor)||0,B.horizontalAlignment,
B.verticalAlignment,h.isMapAligned(D.labelPlacement)?1:0,B.font.decoration,!1,B.angle||0,B.xoffset,B.yoffset,B.lineWidth,B.lineHeight,null,null,null,null,null)||this;w._outLineLabelAngle=0;w._refPlacementPadding=0;w._refPlacementDirX=0;w._refPlacementDirY=0;w._refOffsetX=0;w._refOffsetY=0;w._zoomLevel=0;w.geometryType=g.WGLGeometryType.LABEL;var E=!!D.minScale&&C.scaleToZoom(D.minScale)||0;E=y.clamp(E,0,25.5);C=!!D.maxScale&&C.scaleToZoom(D.maxScale)||255;C=y.clamp(C,0,25.5);const [I,F]=l.getAlignmentFromPlacement(D.labelPlacement);
w._xAlignD=I;w._yAlignD=F;w._minZoom=E;w._maxZoom=C;w._refPlacementPadding=t.pt2px(B.haloSize)+q.TEXT_PLACEMENT_PADDING;A=n.LabelMaterialKey.load(A);A.sdf=!0;w._materialKey=A.data;return w}p._inheritsLoose(m,u);m.fromLabelClass=function(A,D){if("esriServerLinePlacementCenterAlong"===A.labelPlacement){const B=A.symbol;B.xoffset=0;B.yoffset=0;B.angle=0;B.font.decoration="none"}return new m(A.materialKey,A,A.symbol,D)};var x=m.prototype;x.setZoomLevel=function(A){this._zoomLevel=A};x.bindReferenceTemplate=
function(A){let D=l.getXDirection(this._xAlignD),B=l.getYDirection(this._yAlignD);this._refOffsetY=this._refOffsetX=0;if(r.isNone(A))this._refSymbolAndPlacementOffset=k.i8888to32(0,0,Math.floor(127*D+127),Math.floor(127*B+127));else{if("circle"===A.boundsType&&(D||B)){var C=Math.sqrt(D*D+B*B);D/=C;B/=C}C=Math.max(A.height,A.width);this._refSymbolAndPlacementOffset=k.i8888to32(4*this._refPlacementPadding,C,Math.floor(127*D+127),Math.floor(127*B+127));this._referenceSize=C;this._refPlacementDirX=D;
this._refPlacementDirY=B;this._refOffsetX=A.xOffset;this._refOffsetY=A.yOffset}};x._write=function(A,D){if(!r.isNone(this._shapingInfo)){var B=this._shapingInfo,C=D.getDisplayId(),w="esriGeometryPolygon"===D.geometryType?D.readLegacyCentroid():D.readLegacyGeometry();if(w)switch(this.current={out:A,inId:C,inShaping:B,zoomLevel:this._zoomLevel},D.geometryType){case "esriGeometryPolyline":this._placeLineLabels(w);break;case "esriGeometryPoint":case "esriGeometryPolygon":this._placePointLabels(w);break;
default:d("mapview-labeling",`Geometry of type ${D.geometryType} is not supported`)}}};x._isVisible=function(A,D){const B=Math.floor(10*this.current.zoomLevel);return Math.floor(10*A)<=B&&B<=Math.floor(10*D)};x._placePointLabels=function(A){const {out:D,inId:B,inShaping:C}=this.current;this._writeGlyphs(D,B,A,C)};x._placeLineLabels=function(A){A=f.smoothPaths(A.paths,this.current.inShaping.bounds.width);const D=this._placeSubdivGlyphs.bind(this),B=(this._shapedBox.width+128)/2;for(const C of A)f.pathDivide(C,
B,D)};x._placeSubdivGlyphs=function(A,D,B,C){var w=e(D);B=y.log2(Math.min(B,C-B)/(8+this._shapedBox.width/2/2));w=Math.max(this._minZoom,this.current.zoomLevel+1-(0===D?B:Math.min(w,B)));B=this._shapedBox.width/2*2**(this.current.zoomLevel-w);this.current.inShaping.isMultiline?0===D&&this._placeStraight(A,w):this._placeCurved(A,w,B)};x._placeStraight=function(A,D){const {out:B,inId:C,inShaping:w}=this.current;this._writeGlyphs(B,C,A,w,D)};x._placeCurved=function(A,D,B){const {out:C,inId:w}=this.current;
C.metricStart(w,D,A.x,A.y,0,0,0,0);const E=A.clone(),I=(180/Math.PI*A.angle+180)%360;this._outLineLabelAngle=Math.round(180/Math.PI*A.angle%360*(254/360));this._placeFirst(E,D,1);this._placeBack(A,E,D,B,1);this._placeForward(A,E,D,B,1);this._outLineLabelAngle=Math.round(254/360*I);this._placeFirst(E,D,0);this._placeBack(A,E,D,B,0);this._placeForward(A,E,D,B,0);C.metricEnd()};x._placeBack=function(A,D,B,C,w){const E=A.clone();for(A=A.backwardLength+0;E.prev()&&!(A>=C);)this._placeOnSegment(E,D,A,B,
-1,w),A+=E.length+0};x._placeForward=function(A,D,B,C,w){const E=A.clone();for(A=A.remainingLength+0;E.next()&&!(A>=C);)this._placeOnSegment(E,D,A,B,1,w),A+=E.length+0};x._placeFirst=function(A,D,B){const C=this.current.inShaping;var w=C.glyphs;const E=this.current.zoomLevel,{out:I,inId:F}=this.current;for(const H of w)w=H.x>C.bounds.x?B:1-B,w=Math.max(0,E+y.log2(Math.abs(H.x+H.width/2-C.bounds.x)/(w*A.remainingLength+(1-w)*A.backwardLength))),w=Math.max(D,w),H.maxZoom=25,H.angle=A.angle+(1-B)*Math.PI,
H.minZoom=w,0>A.x||512<=A.x||0>A.y||512<=A.y||(this._writeGlyph(I,F,A.x,A.y,H),B&&this._isVisible(H.minZoom,H.maxZoom)&&(w=H.bounds,I.metricBoxWrite(w.center[0],w.center[1],w.width,w.height)))};x._placeOnSegment=function(A,D,B,C,w,E){var I=this.current.inShaping.glyphs;const {out:F,inId:H}=this.current,K=this.current.inShaping,G=this.current.zoomLevel;var L=A.x+A.dx/A.length*-w*B,P=A.y+A.dy/A.length*-w*B;for(const S of I)if((I=S.x>K.bounds.x?E:1-E)&&1===w||!I&&-1===w){var R=Math.abs(S.x+S.width/2-
K.bounds.x);I=Math.max(0,G+y.log2(R/B)-.1);R=Math.max(C,G+y.log2(R/(B+A.length+0)));0!==I&&(S.angle=A.angle+(1-E)*Math.PI,S.minZoom=R,S.maxZoom=I,0>L||512<=L||0>P||512<=P||(this._writeGlyph(F,H,L,P,S),E&&this._isVisible(S.minZoom,S.maxZoom)&&(I=S.bounds,F.metricBoxWrite(I.center[0]+(A.x-D.x),I.center[1]+(A.y-D.y),I.width,I.height))))}};x._writeGlyphs=function(A,D,B,C,w=this._minZoom){if(!(0>B.x||512<=B.x||0>B.y||512<=B.y)){var E=B.x+this._refOffsetX;B=B.y-this._refOffsetY;for(const I of C.glyphs)I.minZoom=
w,I.maxZoom=this._maxZoom,this._writeGlyph(A,D,E,B,I);C=C.boundsT;A.metricStart(D,w,E,B,this._refPlacementDirX,this._refPlacementDirY,this._referenceSize,this._materialKey);A.metricBoxWrite(C.center[0],C.center[1],C.width,C.height);A.metricEnd()}};x._writeVertexCommon=function(A,D,B,C){const w=this._color,E=this._haloColor,I=k.i8888to32(0,0,this._size,this._haloSize);C=k.i8888to32(Math.floor(10*Math.max(C.minZoom,this._minZoom)),Math.floor(10*Math.min(C.maxZoom,this._maxZoom)),this._outLineLabelAngle,
0);A.vertexWrite(B);A.vertexWrite(D);A.vertexWrite(w);A.vertexWrite(E);A.vertexWrite(I);A.vertexWrite(this._refSymbolAndPlacementOffset);A.vertexWrite(C)};p._createClass(m,[{key:"_shapedBox",get:function(){return r.unwrap(this._shapingInfo).bounds}}]);return m}(b)})},"esri/views/2d/engine/webgl/alignmentUtils":function(){define(["exports"],function(p){p.HAlign=void 0;(function(c){c[c.Left=-1]="Left";c[c.Center=0]="Center";c[c.Right=1]="Right"})(p.HAlign||(p.HAlign={}));p.VAlign=void 0;(function(c){c[c.Top=
1]="Top";c[c.Center=0]="Center";c[c.Bottom=-1]="Bottom";c[c.Baseline=2]="Baseline"})(p.VAlign||(p.VAlign={}));p.getAlignmentFromPlacement=function(c){switch(c){case "above-left":case "esriServerPointLabelPlacementAboveLeft":return[p.HAlign.Right,p.VAlign.Bottom];case "above-center":case "above-along":case "esriServerPointLabelPlacementAboveCenter":case "esriServerLinePlacementAboveAlong":return[p.HAlign.Center,p.VAlign.Bottom];case "above-right":case "esriServerPointLabelPlacementAboveRight":return[p.HAlign.Left,
p.VAlign.Bottom];case "center-left":case "esriServerPointLabelPlacementCenterLeft":return[p.HAlign.Right,p.VAlign.Center];case "center-center":case "center-along":case "esriServerPointLabelPlacementCenterCenter":case "esriServerLinePlacementCenterAlong":return[p.HAlign.Center,p.VAlign.Center];case "center-right":case "esriServerPointLabelPlacementCenterRight":return[p.HAlign.Left,p.VAlign.Center];case "below-left":case "esriServerPointLabelPlacementBelowLeft":return[p.HAlign.Right,p.VAlign.Top];case "below-center":case "below-along":case "esriServerPointLabelPlacementBelowCenter":case "esriServerLinePlacementBelowAlong":return[p.HAlign.Center,
p.VAlign.Top];case "below-right":case "esriServerPointLabelPlacementBelowRight":return[p.HAlign.Left,p.VAlign.Top];case "always-horizontal":case "esriServerPolygonPlacementAlwaysHorizontal":return[p.HAlign.Center,p.VAlign.Baseline];default:return console.debug(`Found invalid placement type ${c}`),[p.HAlign.Center,p.VAlign.Center]}};p.getJustification=function(c){switch(c){case "left":return p.HAlign.Left;case "right":return p.HAlign.Right;case "center":case "justify":return p.HAlign.Center}};p.getXAnchorDirection=
function(c){switch(c){case "left":return p.HAlign.Left;case "right":return p.HAlign.Right;case "center":case "justify":return p.HAlign.Center}};p.getXDirection=function(c){switch(c){case p.HAlign.Right:return-1;case p.HAlign.Center:return 0;case p.HAlign.Left:return 1;default:return console.debug(`Found invalid horizontal alignment ${c}`),0}};p.getYAnchorDirection=function(c){switch(c){case "top":return p.VAlign.Top;case "middle":return p.VAlign.Center;case "baseline":return p.VAlign.Baseline;case "bottom":return p.VAlign.Bottom}};
p.getYDirection=function(c){switch(c){case p.VAlign.Top:return 1;case p.VAlign.Center:return 0;case p.VAlign.Bottom:case p.VAlign.Baseline:return-1;default:return console.debug(`Found invalid vertical alignment ${c}`),0}};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/views/2d/engine/webgl/materialKey/MaterialKey":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","../../../../../core/Error","../enums","../mesh/templates/meshUtils"],function(p,c,z,y,r){function t(e,
u=!1){const m=y.WGLVVFlag.SIZE_FIELD_STOPS|y.WGLVVFlag.SIZE_MINMAX_VALUE|y.WGLVVFlag.SIZE_SCALE_STOPS|y.WGLVVFlag.SIZE_UNIT_VALUE;e=(e&(y.WGLVVTarget.FIELD_TARGETS_OUTLINE|y.WGLVVTarget.MINMAX_TARGETS_OUTLINE|y.WGLVVTarget.SCALE_TARGETS_OUTLINE|y.WGLVVTarget.UNIT_TARGETS_OUTLINE))>>>4;return u?m&e:m&~e}function l(e){const u=t(e,!1);return e&(y.WGLVVFlag.COLOR|y.WGLVVFlag.OPACITY|y.WGLVVFlag.ROTATION|u)}let v=function(){function e(m){this._data=0;this._data=m}e.load=function(m){const x=this.shared;
x.data=m;return x};var u=e.prototype;u.setBit=function(m,x){m=1<<m;this._data=x?this._data|m:this._data&~m};u.bit=function(m){return(this._data&1<<m)>>m};u.setBits=function(m,x,A){for(let D=x,B=0;D<A;D++,B++)this.setBit(D,0!==(m&1<<B))};u.bits=function(m,x){let A=0;for(let D=m,B=0;D<x;D++,B++)A|=this.bit(D)<<B;return A};u.hasVV=function(){return!1};u.setVV=function(m,x){};u.getVariation=function(){return{mapAligned:this.mapAligned,pattern:this.pattern,sdf:this.sdf}};u.getVariationHash=function(){return this._data&
~(7&this.textureBinding)};c._createClass(e,[{key:"data",get:function(){return this._data},set:function(m){this._data=m}},{key:"geometryType",get:function(){return this.bits(8,11)},set:function(m){this.setBits(m,8,11)}},{key:"mapAligned",get:function(){return!!this.bit(20)},set:function(m){this.setBit(20,m)}},{key:"sdf",get:function(){return!!this.bit(11)},set:function(m){this.setBit(11,m)}},{key:"pattern",get:function(){return!!this.bit(12)},set:function(m){this.setBit(12,m)}},{key:"textureBinding",
get:function(){return this.bits(0,8)},set:function(m){this.setBits(m,0,8)}},{key:"geometryTypeString",get:function(){switch(this.geometryType){case y.WGLGeometryType.FILL:return"fill";case y.WGLGeometryType.MARKER:return"marker";case y.WGLGeometryType.LINE:return"line";case y.WGLGeometryType.TEXT:return"text";case y.WGLGeometryType.LABEL:return"label";default:throw new z(`Unable to handle unknown geometryType: ${this.geometryType}`);}}}]);return e}();v.shared=new v(0);const q=e=>function(u){function m(){return u.apply(this,
arguments)||this}c._inheritsLoose(m,u);var x=m.prototype;x.hasVV=function(){return u.prototype.hasVV.call(this)||this.vvSizeMinMaxValue||this.vvSizeScaleStops||this.vvSizeFieldStops||this.vvSizeUnitValue};x.setVV=function(A,D){u.prototype.setVV.call(this,A,D);A&=t(A,D);this.vvSizeMinMaxValue=!!(A&y.WGLVVFlag.SIZE_MINMAX_VALUE);this.vvSizeFieldStops=!!(A&y.WGLVVFlag.SIZE_FIELD_STOPS);this.vvSizeUnitValue=!!(A&y.WGLVVFlag.SIZE_UNIT_VALUE);this.vvSizeScaleStops=!!(A&y.WGLVVFlag.SIZE_SCALE_STOPS)};c._createClass(m,
[{key:"vvSizeMinMaxValue",get:function(){return 0!==this.bit(16)},set:function(A){this.setBit(16,A)}},{key:"vvSizeScaleStops",get:function(){return 0!==this.bit(17)},set:function(A){this.setBit(17,A)}},{key:"vvSizeFieldStops",get:function(){return 0!==this.bit(18)},set:function(A){this.setBit(18,A)}},{key:"vvSizeUnitValue",get:function(){return 0!==this.bit(19)},set:function(A){this.setBit(19,A)}}]);return m}(e),g=e=>function(u){function m(){return u.apply(this,arguments)||this}c._inheritsLoose(m,
u);var x=m.prototype;x.hasVV=function(){return u.prototype.hasVV.call(this)||this.vvRotation};x.setVV=function(A,D){u.prototype.setVV.call(this,A,D);this.vvRotation=!D&&!!(A&y.WGLVVFlag.ROTATION)};c._createClass(m,[{key:"vvRotation",get:function(){return 0!==this.bit(15)},set:function(A){this.setBit(15,A)}}]);return m}(e),k=e=>function(u){function m(){return u.apply(this,arguments)||this}c._inheritsLoose(m,u);var x=m.prototype;x.hasVV=function(){return u.prototype.hasVV.call(this)||this.vvColor};
x.setVV=function(A,D){u.prototype.setVV.call(this,A,D);this.vvColor=!D&&!!(A&y.WGLVVFlag.COLOR)};c._createClass(m,[{key:"vvColor",get:function(){return 0!==this.bit(13)},set:function(A){this.setBit(13,A)}}]);return m}(e),n=e=>function(u){function m(){return u.apply(this,arguments)||this}c._inheritsLoose(m,u);var x=m.prototype;x.hasVV=function(){return u.prototype.hasVV.call(this)||this.vvOpacity};x.setVV=function(A,D){u.prototype.setVV.call(this,A,D);this.vvOpacity=!D&&!!(A&y.WGLVVFlag.OPACITY)};
c._createClass(m,[{key:"vvOpacity",get:function(){return 0!==this.bit(14)},set:function(A){this.setBit(14,A)}}]);return m}(e);let h=function(e){function u(){return e.apply(this,arguments)||this}c._inheritsLoose(u,e);u.load=function(m){const x=this.shared;x.data=m;return x};u.from=function(m,x){const A=this.load(0);A.geometryType=y.WGLGeometryType.FILL;x?A.dotDensity=!0:A.setVV(m,!1);return A.data};u.prototype.getVariation=function(){return{...e.prototype.getVariation.call(this),dotDensity:this.dotDensity,
vvColor:this.vvColor,vvOpacity:this.vvOpacity}};c._createClass(u,[{key:"dotDensity",get:function(){return!!this.bit(15)},set:function(m){this.setBit(15,m)}}]);return u}(k(n(v)));h.shared=new h(0);let f=function(e){function u(){return e.apply(this,arguments)||this}c._inheritsLoose(u,e);u.load=function(m){const x=this.shared;x.data=m;return x};u.from=function(m){const x=this.load(0);x.geometryType=y.WGLGeometryType.MARKER;x.setVV(m,!1);return x.data};u.prototype.getVariation=function(){return{...e.prototype.getVariation.call(this),
vvColor:this.vvColor,vvRotation:this.vvRotation,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}};return u}(k(n(g(q(v)))));f.shared=new f(0);let b=function(e){function u(){return e.apply(this,arguments)||this}c._inheritsLoose(u,e);u.load=function(m){const x=this.shared;x.data=m;return x};u.from=function(m,x){const A=this.load(0);A.geometryType=y.WGLGeometryType.LINE;
A.setVV(m,x);return A.data};u.prototype.getVariation=function(){return{...e.prototype.getVariation.call(this),vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}};return u}(k(n(q(v))));b.shared=new b(0);let a=function(e){function u(){return e.apply(this,arguments)||this}c._inheritsLoose(u,e);u.load=function(m){const x=this.shared;x.data=m;return x};
u.from=function(m){const x=this.load(m);x.geometryType=y.WGLGeometryType.TEXT;x.setVV(m,!1);return x.data};u.prototype.getVariation=function(){return{...e.prototype.getVariation.call(this),vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvRotation:this.vvRotation,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}};return u}(k(n(g(q(v)))));a.shared=new a(0);let d=function(e){function u(){return e.apply(this,
arguments)||this}c._inheritsLoose(u,e);u.load=function(m){const x=this.shared;x.data=m;return x};u.from=function(m,x){const A=this.load(0);A.geometryType=y.WGLGeometryType.LABEL;A.setVV(m,!1);A.mapAligned=r.isMapAligned(x);return A.data};u.prototype.getVariation=function(){return{...e.prototype.getVariation.call(this),vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}};return u}(q(v));d.shared=
new d(0);p.FillMaterialKey=h;p.LabelMaterialKey=d;p.LineMaterialKey=b;p.MarkerMaterialKey=f;p.MaterialKeyBase=v;p.TextMaterialKey=a;p.createMaterialKey=function(e,u,m,x,A){switch(e){case y.WGLGeometryType.FILL:return h.from(u,x);case y.WGLGeometryType.LINE:return b.from(u,m);case y.WGLGeometryType.MARKER:return f.from(u);case y.WGLGeometryType.TEXT:return a.from(u);case y.WGLGeometryType.LABEL:return d.from(u,A);default:throw Error(`Unable to createMaterialKey for unknown geometryType ${e}`);}};p.getFillVVFlags=
function(e){return e&(y.WGLVVFlag.COLOR|y.WGLVVFlag.OPACITY)};p.getLabelVVFlags=function(e){const u=t(e,!1);return e&u};p.getLineVVFlags=function(e,u){if(u)return u=t(e,!0),e&u;u=t(e,!1);return e&(y.WGLVVFlag.COLOR|y.WGLVVFlag.OPACITY|u)};p.getMarkerVVFlags=l;p.getSizeFlagsMask=t;p.getTextVVFlags=function(e){return l(e)};p.hydrateMaterialKey=function(e){switch(v.load(e).geometryType){case y.WGLGeometryType.MARKER:return new f(e);case y.WGLGeometryType.FILL:return new h(e);case y.WGLGeometryType.LINE:return new b(e);
case y.WGLGeometryType.TEXT:return new a(e);case y.WGLGeometryType.LABEL:return new d(e)}};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/views/2d/engine/webgl/mesh/templates/meshUtils":function(){define(["exports"],function(p){p.isMapAligned=function(c){switch(c){case "above-along":case "below-along":case "center-along":case "esriServerLinePlacementAboveAlong":case "esriServerLinePlacementBelowAlong":case "esriServerLinePlacementCenterAlong":return!0;default:return!1}};Object.defineProperty(p,
"__esModule",{value:!0})})},"esri/views/2d/engine/webgl/mesh/templates/segmentUtils":function(){define(["exports","../../../../../../chunks/_rollupPluginBabelHelpers","../../../../../../core/maybe","./util"],function(p,c,z,y){function r(g){return g.length-1}function t(g){let k=0;for(let n=0;n<r(g);n++)k+=l(g,n);return k}function l(g,k,n=1){const [h,f]=g[k+1];return Math.sqrt(h*h+f*f)*n}function v(g,k,n,h,f){if(!(n<k)){var b=h.clone().seek(n/2);z.isNone(b)||(g(b.clone(),n,f),n=(n-k)/2,b=z.unwrap(b.seek(k/
2)),v(g,k,n,h,f+1),v(g,k,n,b,f+1))}}let q=function(){function g(n,h,f,b,a){this._segments=n;this._index=h;this._distance=f;this._xStart=b;this._yStart=a;this._done=!1}g.create=function(n){return new g(n,0,0,n[0][0],n[0][1])};var k=g.prototype;k.clone=function(){return new g(this._segments,this._index,this._distance,this.xStart,this.yStart)};k.equals=function(n){return this._index===n._index||n._index===this._index-1&&(0===this._distance||1===n._distance)||n._index===this._index+1&&(1===this._distance||
0===n._distance)};k.leq=function(n){return this._index<n._index||this._index===n._index&&this._distance<=n._distance};k.geq=function(n){return this._index>n._index||this._index===n._index&&this._distance>=n._distance};k.hasPrev=function(){return 0<=this._index-1};k.hasNext=function(){return this._index+1<r(this._segments)};k.next=function(){if(!this.hasNext())return null;this._xStart+=this.dx;this._yStart+=this.dy;this._distance=0;this._index+=1;return this};k.prev=function(){if(!this.hasPrev())return this._done=
!0,null;--this._index;this._xStart-=this.dx;this._yStart-=this.dy;this._distance=1;return this};k._seekBackwards=function(n,h){var f=this.backwardLength;if(n<=f)return this._distance=(f-n)/this.length,this;for(f=this.backwardLength;this.prev();){if(f+this.length>n)return this._seekBackwards(n-f);f+=this.length}this._distance=0;return h?this:null};k.seek=function(n,h=!1){if(0>n)return this._seekBackwards(Math.abs(n),h);if(n<=this.remainingLength)return this._distance=(this.backwardLength+n)/this.length,
this;let f=this.remainingLength;for(;this.next();){if(f+this.length>n)return this.seek(n-f,h);f+=this.length}this._distance=1;return h?this:null};c._createClass(g,[{key:"_segment",get:function(){return this._segments[this._index+1]}},{key:"angle",get:function(){const n=this.dy;let h=Math.acos((0*n+-1*-this.dx)/(1*this.length));0<n&&(h=2*Math.PI-h);return h}},{key:"xStart",get:function(){return this._xStart}},{key:"yStart",get:function(){return this._yStart}},{key:"x",get:function(){return this.xStart+
this.distance*this.dx}},{key:"y",get:function(){return this.yStart+this.distance*this.dy}},{key:"dx",get:function(){return this._segment[0]}},{key:"dy",get:function(){return this._segment[1]}},{key:"xMidpoint",get:function(){return this.xStart+.5*this.dx}},{key:"yMidpoint",get:function(){return this.yStart+.5*this.dy}},{key:"xEnd",get:function(){return this.xStart+this.dx}},{key:"yEnd",get:function(){return this.yStart+this.dy}},{key:"length",get:function(){const {dx:n,dy:h}=this;return Math.sqrt(n*
n+h*h)}},{key:"remainingLength",get:function(){return this.length*(1-this._distance)}},{key:"backwardLength",get:function(){return this.length*this._distance}},{key:"distance",get:function(){return this._distance}},{key:"done",get:function(){return this._done}}]);return g}();p.SegmentCursor=q;p.pathDivide=function(g,k,n){const h=t(g);g=q.create(g);const f=h/2,b=Math.floor((h-k)/2/k);g.seek(f-b*k);for(let a=-b;a<=b;a++)512>g.x&&0<=g.x&&512>g.y&&0<=g.y&&n(g.clone(),a,f+a*k,h),g.seek(k)};p.pathLength=
t;p.pathSubdivide=function(g,k,n){v(n,k,t(g),q.create(g),0)};p.segmentAt=function(g,k){return g[k+1]};p.segmentCount=r;p.segmentLength=l;p.smoothPaths=function(g,k){for(let E=0;E<g.length;E++){var n=g[E];const I=[];I.push(n[0]);for(var h=1;h<n.length;h++){let [F,H]=I[h-1];F+=n[h][0];H+=n[h][1];I.push([F,H])}a:{n=I;h=k;if(0>=h)break a;const F=n.length;if(3>F)break a;const H=[];var f=0;H.push(0);for(var b=1;b<F;b++)f+=y.dist(n[b],n[b-1]),H.push(f);h=Math.min(h,.2*f);f=[];f.push(n[0][0]);f.push(n[0][1]);
b=n[F-1][0];const K=n[F-1][1];var a=y.sub([0,0],n[0],n[1]);y.normalize(a);n[0][0]+=h*a[0];n[0][1]+=h*a[1];y.sub(a,n[F-1],n[F-2]);y.normalize(a);n[F-1][0]+=h*a[0];n[F-1][1]+=h*a[1];for(a=1;a<F;a++)H[a]+=h;H[F-1]+=h;a=.5*h;for(let G=1;G<F-1;G++){let L=0,P=0,R=0;for(var d=G-1;0<=d&&!(H[d+1]<H[G]-a);d--){var e=a+H[d+1]-H[G],u=H[d+1]-H[d],m=H[G]-H[d]<a?1:e/u;if(1E-6>Math.abs(m))break;var x=m*m,A=m*e-.5*x*u,D=m*u/h,B=n[d+1],C=n[d][0]-B[0],w=n[d][1]-B[1];L+=D/A*(B[0]*m*e+.5*x*(e*C-u*B[0])-x*m*u*C/3);P+=
D/A*(B[1]*m*e+.5*x*(e*w-u*B[1])-x*m*u*w/3);R+=D}for(d=G+1;d<F&&!(H[d-1]>H[G]+a);d++){e=a-H[d-1]+H[G];u=H[d]-H[d-1];m=H[d]-H[G]<a?1:e/u;if(1E-6>Math.abs(m))break;x=m*m;A=m*e-.5*x*u;D=m*u/h;B=n[d-1];C=n[d][0]-B[0];w=n[d][1]-B[1];L+=D/A*(B[0]*m*e+.5*x*(e*C-u*B[0])-x*m*u*C/3);P+=D/A*(B[1]*m*e+.5*x*(e*w-u*B[1])-x*m*u*w/3);R+=D}f.push(L/R);f.push(P/R)}f.push(b);f.push(K);for(let G=0,L=0;G<F;G++)n[G][0]=f[L++],n[G][1]=f[L++]}n=[];n.push(I[0]);for(h=1;h<I.length;h++){const [F,H]=I[h-1],[K,G]=I[h];n.push([Math.round(K-
F),Math.round(G-H)])}g[E]=n}return g};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/views/2d/engine/webgl/mesh/templates/util":function(){define(["exports"],function(p){function c(z,y){return Math.sqrt(z*z+y*y)}p.DEFAULT_MAX_ZOOM=100;p.DEFAULT_MIN_ZOOM=0;p.dist=function(z,y){return c(z[0]-y[0],z[1]-y[1])};p.getLimitCosine=function(z=2){return 1/Math.max(z,1)};p.getMinMaxZoom=function(z,y){const r=!!z.minScale&&y.scaleToZoom(z.minScale)||0;z=!!z.maxScale&&y.scaleToZoom(z.maxScale)||100;
return[r,z]};p.isExtent=function(z){return void 0!==z.xmin&&void 0!==z.ymin&&void 0!==z.xmax&&void 0!==z.ymax};p.isFunction=function(z){return"function"===typeof z};p.isMultipoint=function(z){return void 0!==z.points};p.isPoint=function(z){return void 0!==z.x&&void 0!==z.y};p.isPolygon=function(z){return void 0!==z.rings};p.isPolyline=function(z){return void 0!==z.paths};p.len=c;p.normalize=function(z){const y=c(z[0],z[1]);z[0]/=y;z[1]/=y};p.sub=function(z,y,r){z[0]=y[0]-r[0];z[1]=y[1]-r[1];return z};
Object.defineProperty(p,"__esModule",{value:!0})})},"esri/views/2d/engine/webgl/mesh/templates/WGLTextTemplate":function(){define("../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/screenUtils ../../alignmentUtils ../../color ../../definitions ../../number ../../materialKey/MaterialKey ./util ./WGLBaseTextTemplate ./WGLMeshTemplate ../../util/BidiText".split(" "),function(p,c,z,y,r,t,l,v,q,g,k){return function(n){function h(f,b,a,d,e,u,m,x,A,D,B,C,w,E,I,F,H,K=!1,G,L){var P=
n.call(this)||this;P._xOffset=c.pt2px(C);P._yOffset=c.pt2px(w);P._decoration=A||"none";P._color=d;P._haloColor=e;P._haloSize=Math.min(Math.floor(5*c.pt2px(c.toPt(a))),127);P._size=Math.min(Math.round(c.pt2px(b)),127);b=Math.min(Math.round(c.pt2px(b)),127);P._referenceSize=Math.round(Math.sqrt(256*b));P._scale=P._size/24;P._angle=B;P._justify=z.getJustification(u||"center");P._xAlignD=z.getXAnchorDirection(u||"center");P._yAlignD=z.getYAnchorDirection(m||"baseline");P._baseline="baseline"===(m||"baseline");
P._bitset=(1===x?1:0)|(D?1:0)<<1;f=l.MaterialKeyBase.load(f);f.sdf=!0;P._materialKey=f.data;P._lineWidth=c.pt2px(E)||512;P._lineHeight=I||1;P._textPlacement=F;P._effects=H;P._isCIM=K;P._minMaxZoom=t.i1616to32(Math.round(G*r.MIN_MAX_ZOOM_PRECISION_FACTOR),Math.round(L*r.MIN_MAX_ZOOM_PRECISION_FACTOR));return P}p._inheritsLoose(h,n);h.fromText=function(f,b){const a=new h(f.materialKey,f.font.size,f.haloSize||0,f.color&&y.premultiplyAlphaRGBAArray(f.color)||0,f.haloColor&&y.premultiplyAlphaRGBAArray(f.haloColor)||
0,f.horizontalAlignment,f.verticalAlignment,0,f.font.decoration,!1,f.angle||0,f.xoffset,f.yoffset,f.lineWidth,f.lineHeight,null,null,!1,v.DEFAULT_MIN_ZOOM,v.DEFAULT_MAX_ZOOM),[,d]=k.bidiText(f.text);a.bindTextInfo(b,d);a._vertexBoundsScale=f.maxVVSize?f.maxVVSize/f.font.size:1;return a};h.fromCIMText=function(f,b,a){var d=f.scaleFactor||1;const e=f.size*f.sizeRatio*d,[u,m]=v.getMinMaxZoom(f.scaleInfo,a);a=new h(f.materialKey,e,f.outlineSize*f.sizeRatio,y.premultiplyAlphaRGBA(f.color),y.premultiplyAlphaRGBA(f.outlineColor),
f.horizontalAlignment,f.verticalAlignment,f.alignment,f.decoration,f.colorLocked,f.angle,f.offsetX*f.sizeRatio*d,f.offsetY*f.sizeRatio*d,512,1,f.markerPlacement,f.effects,!0,u,m);[,d]=k.bidiText(f.text);a.bindTextInfo(b,d);a._vertexBoundsScale=f.maxVVSize?f.maxVVSize/e:1;return a};return h}(q(g))})},"esri/views/2d/engine/webgl/mesh/templates/WGLBaseTextTemplate":function(){define("../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/maybe ../../../../../../core/screenUtils ../../../../../../layers/graphics/featureConversionUtils ../../../../../../symbols/cim/placements/CIMMarkerPlacementHelper ../../definitions ../../enums ../../number ../../materialKey/MaterialKey ./shapingUtils".split(" "),
function(p,c,z,y,r,t,l,v,q,g){return k=>function(n){function h(...b){b=n.call(this,...b)||this;b._isCIM=!1;b._vertexBoundsScale=1;b.geometryType=l.WGLGeometryType.TEXT;b._aux=v.i8888to32(0,0,b._referenceSize,b._bitset);return b}p._inheritsLoose(h,n);var f=h.prototype;f.bindTextInfo=function(b,a){this._shapingInfo=b&&b.length?c.andThen(b,d=>g.shapeGlyphs(d,a,{scale:this._scale,angle:this._angle,xOffset:this._xOffset,yOffset:this._yOffset,hAlign:this._xAlignD,vAlign:this._yAlignD,maxLineWidth:Math.max(32,
Math.min(this._lineWidth,512)),lineHeight:t.MAGIC_LABEL_LINE_HEIGHT*Math.max(.25,Math.min(this._lineHeight,4)),decoration:this._decoration,isCIM:this._isCIM})):null};f._write=function(b,a,d){const e=a.getDisplayId();this._writeGeometry(b,a,e,d)};f._writeGeometry=function(b,a,d,e){const u=this._shapingInfo;if(!c.isNone(u)){if(c.isSome(this._textPlacement))return a=null!=e?e:a.readLegacyGeometry(),this._writePlacedText(b,d,a,u);if(a=e?y.deltaDecodeGeometry(y.convertFromGeometry(e),2):"esriGeometryPolygon"===
a.geometryType?a.readCentroid():a.readUnquantizedGeometry()){if(a.isPoint){const [m,x]=a.coords;return this._writeGlyphs(b,d,{x:m,y:x},u)}a.forEachVertex((m,x)=>this._writeGlyphs(b,d,{x:m,y:x},u))}}};f._writePlacedText=function(b,a,d,e){var u=c.unwrap(this._textPlacement);if(d=r.CIMMarkerPlacementHelper.getPlacement(d,u,z.pt2px(1)))for(u=d.next();null!=u;){const m=u.getAngle();e.setRotation(m);this._writeGlyphs(b,a,{x:u.tx,y:u.ty},e);e.setRotation(-m);u=d.next()}};f._writeGlyphs=function(b,a,d,e){const u=
q.MaterialKeyBase.load(this._materialKey);d=v.i1616to32(Math.round(8*d.x),Math.round(8*d.y));for(const m of e.glyphs){u.textureBinding=m.textureBinding;b.recordStart(a,u.data,this.geometryType,!1,!0);e=m.bounds;const x=this._vertexBoundsScale;b.vertexBounds(e.x*x,e.y*x,e.width*x,e.height*x);this._writeVertices(b,a,d,m);b.recordEnd()}};f._writeGlyph=function(b,a,d,e,u){var m=q.MaterialKeyBase.load(this._materialKey);d=v.i1616to32(Math.round(8*d),Math.round(8*e));m.textureBinding=u.textureBinding;b.recordStart(a,
m.data,this.geometryType,!1,!0);m=u.bounds;e=this._vertexBoundsScale;b.vertexBounds(m.x*e,m.y*e,m.width*e,m.height*e);this._writeVertices(b,a,d,u);b.recordEnd()};f._writeVertices=function(b,a,d,e){const u=b.vertexCount();this._writeVertexCommon(b,a,d,e);b.vertexWrite(e.offsets.upperLeft);b.vertexWrite(e.texcoords.upperLeft);b.vertexEnd();this._writeVertexCommon(b,a,d,e);b.vertexWrite(e.offsets.upperRight);b.vertexWrite(e.texcoords.upperRight);b.vertexEnd();this._writeVertexCommon(b,a,d,e);b.vertexWrite(e.offsets.lowerLeft);
b.vertexWrite(e.texcoords.lowerLeft);b.vertexEnd();this._writeVertexCommon(b,a,d,e);b.vertexWrite(e.offsets.lowerRight);b.vertexWrite(e.texcoords.lowerRight);b.vertexEnd();b.indexWrite(u+0);b.indexWrite(u+1);b.indexWrite(u+2);b.indexWrite(u+1);b.indexWrite(u+3);b.indexWrite(u+2)};f._writeVertexCommon=function(b,a,d,e){e=this._color;const u=this._haloColor,m=v.i8888to32(0,0,this._referenceSize,this._bitset),x=v.i8888to32(0,0,this._size,this._haloSize);b.vertexWrite(d);b.vertexWrite(a);b.vertexWrite(e);
b.vertexWrite(u);b.vertexWrite(x);b.vertexWrite(m);b.vertexWrite(this._minMaxZoom)};return h}(k)})},"esri/symbols/cim/placements/CIMMarkerPlacementHelper":function(){define(["exports","../CIMCursor","../CIMOperators"],function(p,c,z){let y=function(){function r(){}r.getPlacement=function(t,l,v){const q=z.getPlacementOperator(l);if(!q)return null;t=c.cloneAndDecodeGeometry(t);return q.execute(t,l,v)};return r}();p.CIMMarkerPlacementHelper=y;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/symbols/cim/CIMCursor":function(){define(["exports",
"../../core/lang","../../geometry/support/jsonUtils","./CIMPlacements"],function(p,c,z,y){function r(f){if(f){var b=f.length;for(--b;0<b;--b)f[b][0]-=f[b-1][0],f[b][1]-=f[b-1][1]}}function t(f){if(f)for(const b of f)r(b)}function l(f){if(f){const b=f.length;for(let a=1;a<b;++a)f[a][0]+=f[a-1][0],f[a][1]+=f[a-1][1]}}function v(f){if(f)for(const b of f)l(b)}function q(f){f&&(z.isPolygon(f)?v(f.rings):z.isPolyline(f)?v(f.paths):z.isMultipoint(f)&&l(f.points))}function g(f){f&&f.reverse()}function k(f){return{rings:[[[f.xmin,
f.ymin],[f.xmin,f.ymax],[f.xmax,f.ymax],[f.xmax,f.ymin],[f.xmin,f.ymin]]]}}let n=function(){function f(b,a,d,e){this.acceptPolygon=a;this.acceptPolyline=d;this.geomUnitsPerPoint=e;this.pathIndex=this.pathCount=-1;this.iteratePath=!1;b&&(z.isPolygon(b)?a&&(this.multiPath=b.rings,this.isClosed=!0):z.isPolyline(b)?d&&(this.multiPath=b.paths,this.isClosed=!1):z.isExtent(b)&&a&&(this.multiPath=k(b).rings,this.isClosed=!0),this.multiPath&&(this.pathCount=this.multiPath.length));this.internalPlacement=new y.Placement}
f.prototype.next=function(){if(!this.multiPath)return null;for(;this.iteratePath||this.pathIndex<this.pathCount-1;){this.iteratePath||this.pathIndex++;const b=this.processPath(this.multiPath[this.pathIndex]);if(b)return b}this.pathIndex=this.pathCount=-1;return this.multiPath=null};return f}(),h=function(){function f(b,a,d,e){this.inputGeometries=b;this.acceptPolygon=a;this.acceptPolyline=d;this.geomUnitsPerPoint=e;this.pathIndex=this.pathCount=-1;this.iteratePath=!1}f.prototype.next=function(){for(;;){if(!this.multiPath){for(var b=
this.inputGeometries.next();b;)if(z.isPolygon(b)?this.acceptPolygon&&(this.multiPath=b.rings,this.isClosed=!0):z.isPolyline(b)?this.acceptPolyline&&(this.multiPath=b.paths,this.isClosed=!1):z.isExtent(b)&&this.acceptPolygon&&(this.multiPath=k(b).rings,this.isClosed=!0),this.multiPath){this.pathCount=this.multiPath.length;this.pathIndex=-1;break}else b=this.inputGeometries.next();if(!this.multiPath)return null}for(;this.iteratePath||this.pathIndex<this.pathCount-1;)if(this.iteratePath||this.pathIndex++,
b=this.processPath(this.multiPath[this.pathIndex]))return b;this.pathIndex=this.pathCount=-1;this.multiPath=null}};return f}();p.PathGeometryCursor=h;p.PathTransformationCursor=n;p.cloneAndDecodeGeometry=function(f){f=c.clone(f);q(f);return f};p.deltaDecodeGeometry=q;p.deltaEncodeGeometry=function(f){f&&(z.isPolygon(f)?t(f.rings):z.isPolyline(f)?t(f.paths):z.isMultipoint(f)&&r(f.points))};p.getCoord2D=function(f,b,a){return[f[0]+(b[0]-f[0])*a,f[1]+(b[1]-f[1])*a]};p.getId=function(f){return f[4]};
p.isClosedPath=function(f){return f&&0!==f.length?f[0][0]===f[f.length-1][0]&&f[0][1]===f[f.length-1][1]:!1};p.reverseMultipath=function(f){if(f)for(const b of f)g(b)};p.reversePath=g;p.setId=function(f,b){f[4]=b};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/symbols/cim/CIMPlacements":function(){define(["exports"],function(p){let c=function(){function y(){this.setIdentity()}var r=y.prototype;r.getAngle=function(){if(null==this.rz||0===this.rz&&1!==this.rz_c&&0!==this.rz_s)this.rz=Math.atan2(this.rz_s,
this.rz_c);return this.rz};r.setIdentity=function(){this.tz=this.ty=this.tx=0;this.s=1;this.rz=this.ry=this.rx=0;this.rz_c=1;this.rz_s=0};r.setTranslate=function(t,l){this.tx=t;this.ty=l};r.setTranslateZ=function(t){this.tz=t};r.setRotateCS=function(t,l){this.rz=void 0;this.rz_c=t;this.rz_s=l};r.setRotate=function(t){this.rz=t;this.rz_s=this.rz_c=void 0};r.setRotateY=function(t){this.ry=t};r.setScale=function(t){this.s=t};r.setMeasure=function(t){this.m=t};return y}(),z=function(){function y(){}y.prototype.next=
function(){return null};return y}();p.EmptyPlacementCursor=z;p.Placement=c;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/symbols/cim/CIMOperators":function(){define("exports ./effects/EffectAddControlPoints ./effects/EffectArrow ./effects/EffectBuffer ./effects/EffectCut ./effects/EffectDashes ./effects/EffectDonut ./effects/EffectJog ./effects/EffectMove ./effects/EffectOffset ./effects/EffectReverse ./effects/EffectRotate ./effects/EffectScale ./effects/EffectWave ./placements/PlacementAlongLineSameSize ./placements/PlacementAtExtremities ./placements/PlacementAtRatioPositions ./placements/PlacementInsidePolygon ./placements/PlacementOnLine ./placements/PlacementOnVertices ./placements/PlacementPolygonCenter".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k,n,h,f,b,a,d,e,u,m,x){p.getEffectOperator=function(A){if(!A)return null;switch(A.type){case "CIMGeometricEffectAddControlPoints":return c.EffectAddControlPoints.local();case "CIMGeometricEffectArrow":return z.EffectArrow.local();case "CIMGeometricEffectBuffer":return y.EffectBuffer.local();case "CIMGeometricEffectCut":return r.EffectCut.local();case "CIMGeometricEffectDashes":return t.EffectDashes.local();case "CIMGeometricEffectDonut":return l.EffectDonut.local();case "CIMGeometricEffectJog":return v.EffectJog.local();
case "CIMGeometricEffectMove":return q.EffectMove.local();case "CIMGeometricEffectOffset":return g.EffectOffset.local();case "CIMGeometricEffectReverse":return k.EffectReverse.local();case "CIMGeometricEffectRotate":return n.EffectRotate.local();case "CIMGeometricEffectScale":return h.EffectScale.local();case "CIMGeometricEffectWave":return f.EffectWave.local()}return null};p.getPlacementOperator=function(A){if(!A)return null;switch(A.type){case "CIMMarkerPlacementAlongLineSameSize":return b.PlacementAlongLineSameSize.local();
case "CIMMarkerPlacementAtExtremities":return a.PlacementAtExtremities.local();case "CIMMarkerPlacementAtRatioPositions":return d.PlacementAtRatioPositions.local();case "CIMMarkerPlacementInsidePolygon":return e.PlacementInsidePolygon.local();case "CIMMarkerPlacementOnLine":return u.PlacementOnLine.local();case "CIMMarkerPlacementOnVertices":return m.PlacementOnVertices.local();case "CIMMarkerPlacementPolygonCenter":return x.PlacementPolygonCenter.local()}return null};Object.defineProperty(p,"__esModule",
{value:!0})})},"esri/symbols/cim/effects/EffectAddControlPoints":function(){define(["exports","../../../core/lang","../../../geometry/support/jsonUtils","../CIMCursor"],function(p,c,z,y){let r=function(){function l(){}l.local=function(){null===l.instance&&(l.instance=new l);return l.instance};l.prototype.execute=function(v,q,g){return new t(v,q,g)};return l}();r.instance=null;let t=function(){function l(q,g,k){this._inputGeometries=q;this._angleTolerance=void 0!==g.angleTolerance?g.angleTolerance:
120;this._maxCosAngle=Math.cos((1-Math.abs(this._angleTolerance)/180)*Math.PI)}var v=l.prototype;v.next=function(){for(var q=this._inputGeometries.next();q;){if(z.isPolygon(q))return this._isClosed=!0,q=c.clone(q),this._processMultipath(q.rings),q;if(z.isPolyline(q))return this._isClosed=!1,q=c.clone(q),this._processMultipath(q.paths),q;if(z.isExtent(q)){if(this._maxCosAngle)return q;this._isClosed=!0;q=[[q.xmin,q.ymin],[q.xmin,q.ymax],[q.xmax,q.ymax],[q.xmax,q.ymin],[q.xmin,q.ymin]];this._processPath(q);
return{rings:[q]}}q=this._inputGeometries.next()}return null};v._processMultipath=function(q){if(q)for(const g of q)this._processPath(g)};v._processPath=function(q){if(q){let g=q.length,k=q[0],n,h,f,b,a,d;this._isClosed&&++g;for(let e=1;e<g;++e){let u;u=this._isClosed&&e===g-1?q[0]:q[e];const m=u[0]-k[0],x=u[1]-k[1],A=Math.sqrt(m*m+x*x);1<e&&0<A&&0<f&&(n*m+h*x)/A/f<=this._maxCosAngle&&y.setId(k,1);1===e&&(b=m,a=x,d=A);0<A&&(k=u,n=m,h=x,f=A)}this._isClosed&&0<f&&0<d&&(n*b+h*a)/d/f<=this._maxCosAngle&&
y.setId(q[0],1)}};return l}();p.EffectAddControlPoints=r;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/symbols/cim/effects/EffectArrow":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../CIMCursor","../CurveHelper"],function(p,c,z,y){let r=function(){function l(){}l.local=function(){null===l.instance&&(l.instance=new l);return l.instance};l.prototype.execute=function(v,q,g){return new t(v,q,g)};return l}();r.instance=null;let t=function(l){function v(g,k,n){g=
l.call(this,g,!1,!0)||this;g._curveHelper=new y.CurveHelper;g._width=(void 0!==k.width?k.width:5)*n;g._arrowType=void 0!==k.geometricEffectArrowType?k.geometricEffectArrowType:"OpenEnded";g._offsetFlattenError=y.PIXEL_TOLERANCE*n;return g}c._inheritsLoose(v,l);var q=v.prototype;q.processPath=function(g){switch(this._arrowType){default:return this._constructSimpleArrow(g,!0);case "Block":return this._constructSimpleArrow(g,!1);case "Crossed":return this._constructCrossedArrow(g)}};q._constructSimpleArrow=
function(g,k){var n=this._curveHelper.calculatePathLength(g),h=this._width;n<2*h&&(h=n/2);n=this._curveHelper.getSubCurve(g,0,n-h);if(!n)return null;var f=h/2;if(this._curveHelper.isEmpty(n,!1))return null;h=this._constructOffset(n,-f);if(!h)return null;n=this._constructOffset(n,f);if(!n)return null;const b=this._constructArrowBasePoint(h,-f/2);if(!b)return null;f=this._constructArrowBasePoint(n,f/2);if(!f)return null;g=g[g.length-1];k||(this._makeControlPoint(n,!0),this._makeControlPoint(h,!0));
const a=new y.PathHelper;a.addPath(n,!0);a.lineTo(f);this._makeControlPoint(a.path());a.lineTo(g);this._makeControlPoint(a.path());a.lineTo(b);this._makeControlPoint(a.path());a.addPath(h,!1);return k?{paths:[a.path()]}:(a.close(),{rings:[a.path()]})};q._constructCrossedArrow=function(g){var k=this._curveHelper.calculatePathLength(g),n=this._width;k<3.732050807568877*n&&(n=k/3.732050807568877);var h=this._curveHelper.getSubCurve(g,0,k-2.732050807568877*n);if(!h)return null;var f=n/2;if(this._curveHelper.isEmpty(h,
!1))return null;const b=this._constructOffset(h,f);if(!b)return null;h=this._constructOffset(h,-f);if(!h)return null;k=this._curveHelper.getSubCurve(g,0,k-n);if(!k||this._curveHelper.isEmpty(k,!1))return null;n=this._constructOffset(k,f);if(!n)return null;var a=this._constructOffset(k,-f);if(!a)return null;k=n[n.length-1];n=this._constructArrowBasePoint(n,f/2);if(!n)return null;const d=a[a.length-1];f=this._constructArrowBasePoint(a,-f/2);if(!f)return null;g=g[g.length-1];this._makeControlPoint(b,
!1);this._makeControlPoint(h,!1);a=new y.PathHelper;a.addPath(b,!0);this._makeControlPoint(a.path());a.lineTo(d);a.lineTo(f);this._makeControlPoint(a.path());a.lineTo(g);this._makeControlPoint(a.path());a.lineTo(n);this._makeControlPoint(a.path());a.lineTo(k);this._makeControlPoint(a.path());a.addPath(h,!1);return{paths:[a.path()]}};q._constructOffset=function(g,k){return this._curveHelper.offset(g,k,"Rounded",4,this._offsetFlattenError)};q._constructArrowBasePoint=function(g,k){if(!g||2>g.length)return null;
var n=g[g.length-2];g=g[g.length-1];n=[g[0]-n[0],g[1]-n[1]];this._curveHelper.normalize(n);return[g[0]+n[1]*k,g[1]-n[0]*k]};q._makeControlPoint=function(g,k=!1){k?z.setId(g[0],1):z.setId(g[g.length-1],1)};return v}(z.PathGeometryCursor);p.EffectArrow=r;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/symbols/cim/CurveHelper":function(){define(["exports"],function(p){let c=function(){function y(){this._path=[]}var r=y.prototype;r.path=function(){return this._path};r.addPath=function(t,l){l||
t.reverse();Array.prototype.push.apply(this._path,t);l||t.reverse()};y.mergePath=function(t,l){l&&Array.prototype.push.apply(t,l)};r.startPath=function(t){this._path.push(t)};r.lineTo=function(t){this._path.push(t)};r.close=function(){const t=this._path;1<t.length&&(t[0][0]!==t[t.length-1][0]||t[0][1]!==t[t.length-1][1])&&t.push([t[0][0],t[0][1]])};return y}(),z=function(){function y(t,l){}var r=y.prototype;r.normalize=function(t){const l=Math.sqrt(t[0]*t[0]+t[1]*t[1]);t[0]/=l;t[1]/=l};r.calculateLength=
function(t,l){const v=l[0]-t[0];t=l[1]-t[1];return Math.sqrt(v*v+t*t)};r.calculateSegLength=function(t,l){return this.calculateLength(t[l],t[l+1])};r.calculatePathLength=function(t){let l=0;const v=t?t.length:0;for(let q=0;q<v-1;++q)l+=this.calculateSegLength(t,q);return l};r.calculatePathArea=function(t){let l=0;const v=t?t.length:0;for(let q=0;q<v-1;++q)l+=(t[q+1][0]-t[q][0])*(t[q+1][1]+t[q][1]);return l/2};r.getCoord2D=function(t,l,v){return[t[0]+(l[0]-t[0])*v,t[1]+(l[1]-t[1])*v]};r.getSegCoord2D=
function(t,l,v){return this.getCoord2D(t[l],t[l+1],v)};r.getAngle=function(t,l,v){return Math.atan2(l[1]-t[1],l[0]-t[0])};r.getSegAngle=function(t,l,v){return this.getAngle(t[l],t[l+1],v)};r.getAngleCS=function(t,l,v){v=l[0]-t[0];t=l[1]-t[1];l=Math.sqrt(v*v+t*t);return 0<l?[v/l,t/l]:[1,0]};r.getSegAngleCS=function(t,l,v){return this.getAngleCS(t[l],t[l+1],v)};r.cut=function(t,l,v,q){v=0>=v?t[l]:this.getSegCoord2D(t,l,v);t=1<=q?t[l+1]:this.getSegCoord2D(t,l,q);return[v,t]};r.addSegment=function(t,
l,v){v&&t.push(l[0]);t.push(l[1])};r.getSubCurve=function(t,l,v){const q=[];return this.appendSubCurve(q,t,l,v)?q:null};r.appendSubCurve=function(t,l,v,q){const g=l?l.length-1:0;let k=0,n=!0,h=0;for(;h<g;){const b=this.calculateSegLength(l,h);if(0!==b){if(n){if(k+b>v){var f=(v-k)/b;let a=1,d=!1;k+b>=q&&(a=(q-k)/b,d=!0);(f=this.cut(l,h,f,a))&&this.addSegment(t,f,n);if(d)break;n=!1}}else{if(k+b>q){(l=this.cut(l,h,0,(q-k)/b))&&this.addSegment(t,l,n);break}this.addSegment(t,[l[h],l[h+1]],n)}k+=b}++h}return!0};
r.getCIMPointAlong=function(t,l){const v=t?t.length-1:0;let q=0,g=-1;for(;g<v;){++g;const k=this.calculateSegLength(t,g);if(0!==k){if(q+k>l)return this.getCoord2D(t[g],t[g+1],(l-q)/k);q+=k}}return null};r.isEmpty=function(t,l){if(!t||1>=t.length)return!0;const v=t?t.length-1:0;let q=-1;for(;q<v;)if(++q,t[q+1][0]!==t[q][0]||t[q+1][1]!==t[q][1]||l&&t[q+1][2]!==t[q][2])return!1;return!0};r.offset=function(t,l,v,q,g){if(!t||2>t.length)return null;g=t.length;const k=t[0][0]===t[g-1][0]&&t[0][1]===t[g-
1][1];if(k){if(3>t.length)return null;--g}const n=[];var h=k?t[g-1]:null;let f=t[0];for(let e=0;e<g;e++){const u=e===g-1?k?t[0]:null:t[e+1];if(h)if(u){var b=[u[0]-f[0],u[1]-f[1]];this.normalize(b);h=[f[0]-h[0],f[1]-h[1]];this.normalize(h);var a=h[0]*b[1]-h[1]*b[0],d=h[0]*b[0]+h[1]*b[1];if(0<=a===0>=l)b=[b[0]-h[0],b[1]-h[1]],this.normalize(b),h=-Math.abs(l)/Math.sqrt((1+d)/2),n.push([f[0]-b[0]*h,f[1]-b[1]*h]);else switch(v){case "Mitered":if(d=Math.sqrt((1+d)/2),0<d&&1/d<q){b=[b[0]-h[0],b[1]-h[1]];
this.normalize(b);h=Math.abs(l)/d;n.push([f[0]-b[0]*h,f[1]-b[1]*h]);break}case "Bevelled":n.push([f[0]+h[1]*l,f[1]-h[0]*l]);n.push([f[0]+b[1]*l,f[1]-b[0]*l]);break;case "Rounded":n.push([f[0]+h[1]*l,f[1]-h[0]*l]);d=.2;for(a=1;5>a;a++,d+=.2){const m=[h[1]*(1-d)+b[1]*d,-h[0]*(1-d)-b[0]*d];this.normalize(m);n.push([f[0]+m[0]*l,f[1]+m[1]*l])}n.push([f[0]+b[1]*l,f[1]-b[0]*l]);break;default:0>a?(n.push([f[0]+(h[1]+h[0])*l,f[1]+(h[1]-h[0])*l]),n.push([f[0]+(b[1]-b[0])*l,f[1]-(b[0]+b[1])*l])):(d=Math.sqrt((1+
Math.abs(d))/2),b=[b[0]-h[0],b[1]-h[1]],this.normalize(b),h=l/d,n.push([f[0]-b[0]*h,f[1]-b[1]*h]))}}else b=[f[0]-h[0],f[1]-h[1]],this.normalize(b),n.push([f[0]+b[1]*l,f[1]-b[0]*l]);else b=[u[0]-f[0],u[1]-f[1]],this.normalize(b),n.push([f[0]+b[1]*l,f[1]-b[0]*l]);h=f;f=u}k&&n.push([n[0][0],n[0][1]]);return n};return y}();p.CurveHelper=z;p.PIXEL_TOLERANCE=.03;p.PathHelper=c;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/symbols/cim/effects/EffectBuffer":function(){define(["exports","../../../geometry/support/jsonUtils",
"../CurveHelper"],function(p,c,z){let y=function(){function t(){}t.local=function(){null===t.instance&&(t.instance=new t);return t.instance};t.prototype.execute=function(l,v,q){return new r(l,v,q)};return t}();y.instance=null;let r=function(){function t(l,v,q){this._inputGeometries=l;this._curveHelper=new z.CurveHelper;this._size=(void 0!==v.size?v.size:1)*q;this._offsetFlattenError=z.PIXEL_TOLERANCE*q}t.prototype.next=function(){let l=this._inputGeometries.next();for(;l;){if(c.isExtent(l))if(0<this._size){var v=
this._curveHelper.offset([[l.xmin,l.ymin],[l.xmin,l.ymax],[l.xmax,l.ymax],[l.xmax,l.ymin],[l.xmin,l.ymin]],this._size,"Rounded",4,this._offsetFlattenError);if(v)return{rings:[v]}}else if(0>this._size){if(0<Math.min(l.xmax-l.xmin,l.ymax-l.ymin)+2*this._size)return{xmin:l.xmin-this._size,xmax:l.xmax+this._size,ymin:l.ymin-this._size,ymax:l.ymax+this._size}}else return l;if(c.isPolygon(l)){if(0===this._size)return l;v=[];for(const g of l.rings){var q=this._curveHelper.offset(g,this._size,"Rounded",4,
this._offsetFlattenError);q&&v.push(q)}if(v.length)return{rings:v}}if(c.isPolyline(l)&&0<this._size){v=[];for(const g of l.paths)if(g&&1<g.length){q=this._curveHelper.offset(g,this._size,"Rounded",4,this._offsetFlattenError);const k=this._curveHelper.offset(g,-this._size,"Rounded",4,this._offsetFlattenError);if(q&&k){for(let n=k.length-1;0<=n;n--)q.push(k[n]);q.push([q[0][0],q[0][1]]);v.push(q)}}if(v.length)return{rings:v}}c.isPoint(l);l=this._inputGeometries.next()}return null};return t}();p.EffectBuffer=
y;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/symbols/cim/effects/EffectCut":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../CIMCursor","../CurveHelper"],function(p,c,z,y){let r=function(){function l(){}l.local=function(){null===l.instance&&(l.instance=new l);return l.instance};l.prototype.execute=function(v,q,g){return new t(v,q,g)};return l}();r.instance=null;let t=function(l){function v(q,g,k){q=l.call(this,q,!0,!0)||this;q._curveHelper=new y.CurveHelper;
q._beginCut=(void 0!==g.beginCut?g.beginCut:1)*k;q._endCut=(void 0!==g.endCut?g.endCut:1)*k;q._middleCut=(void 0!==g.middleCut?g.middleCut:0)*k;q._invert=void 0!==g.invert?g.invert:!1;0>q._beginCut&&(q._beginCut=0);0>q._endCut&&(q._endCut=0);0>q._middleCut&&(q._middleCut=0);return q}c._inheritsLoose(v,l);v.prototype.processPath=function(q){var g=this._beginCut;const k=this._endCut,n=this._middleCut,h=this._curveHelper.calculatePathLength(q),f=[];if(!this._invert)0===g&&0===k&&0===n?f.push(q):g+k+
n>=h||(0===n?(q=this._curveHelper.getSubCurve(q,g,h-k))&&f.push(q):((g=this._curveHelper.getSubCurve(q,g,.5*(h-n)))&&f.push(g),(g=this._curveHelper.getSubCurve(q,.5*(h+n),h-k))&&f.push(g)));else if(0!==g||0!==k||0!==n)g+k+n>=h?f.push(q):((g=this._curveHelper.getSubCurve(q,0,g))&&f.push(g),(g=this._curveHelper.getSubCurve(q,.5*(h-n),.5*(h+n)))&&f.push(g),(g=this._curveHelper.getSubCurve(q,h-k,k))&&f.push(g));return 0===f.length?null:{paths:f}};return v}(z.PathGeometryCursor);p.EffectCut=r;Object.defineProperty(p,
"__esModule",{value:!0})})},"esri/symbols/cim/effects/EffectDashes":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../CIMCursor","../CurveHelper","../GeometryWalker"],function(p,c,z,y,r){let t=function(){function v(){}v.local=function(){null===v.instance&&(v.instance=new v);return v.instance};v.prototype.execute=function(q,g,k){return new l(q,g,k)};return v}();t.instance=null;let l=function(v){function q(g,k,n){g=v.call(this,g,!0,!0)||this;g._walker=new r.GeometryWalker;
g._walker.updateTolerance(n);g._endings=k.lineDashEnding;g._customDashPos=void 0!==k.offsetAlongLine?k.offsetAlongLine*n:0;g._offsetAtEnd=void 0!==k.customEndingOffset?k.customEndingOffset*n:0;g._pattern=new r.DashPattern;g._pattern.init(k.dashTemplate,!0);g._pattern.scale(n);return g}c._inheritsLoose(q,v);q.prototype.processPath=function(g){if(0===this._pattern.length())return this.iteratePath=!1,{paths:[g]};if(!this.iteratePath){var k=!0;switch(this._endings){default:this._pattern.extPtGap=0;break;
case "FullPattern":this.isClosed||(this._pattern.extPtGap=.5*this._pattern.firstValue());break;case "FullGap":this.isClosed||(this._pattern.extPtGap=.5*this._pattern.lastValue());break;case "NoConstraint":this.isClosed||(k=!1);break;case "Custom":this.isClosed||(this._pattern.extPtGap=.5*this._offsetAtEnd)}var n=this._walker.calculatePathLength(g);if(this._pattern.isEmpty()||n<.1*this._pattern.length()||!this._walker.init(g,this._pattern,k))return{paths:[g]}}if(this.iteratePath)g=this._pattern.nextValue();
else{switch(this._endings){default:k=.5*this._pattern.firstValue();break;case "HalfGap":k=.5*-this._pattern.lastValue();break;case "FullGap":k=-this._pattern.lastValue();break;case "FullPattern":k=0;break;case "NoConstraint":case "Custom":k=-this._customDashPos}g=k/this._pattern.length();g-=Math.floor(g);k=g*this._pattern.length();this._pattern.reset();g=this._pattern.nextValue();for(n=!1;k>=g;)k-=g,g=this._pattern.nextValue(),n=!n;g-=k;n?(this._walker.nextPosition(g),g=this._pattern.nextValue()):
this.isClosed&&(this._firstCurve=this._walker.nextCurve(g),g=this._pattern.nextValue(),this._walker.nextPosition(g),g=this._pattern.nextValue())}(k=this._walker.nextCurve(g))?this._walker.isPathEnd()?(this.iteratePath=!1,this._firstCurve&&(this._firstCurve.splice(0,1),y.PathHelper.mergePath(k,this._firstCurve),this._firstCurve=null)):(g=this._pattern.nextValue(),!this._walker.nextPosition(g)||this._walker.isPathEnd()?(this.iteratePath=!1,this._firstCurve&&(k=this._firstCurve,this._firstCurve=null)):
this.iteratePath=!0):(this.iteratePath=!1,k=this._firstCurve,this._firstCurve=null);return{paths:[k]}};return q}(z.PathGeometryCursor);p.EffectDashes=t;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/symbols/cim/GeometryWalker":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","./CIMCursor","./CurveHelper"],function(p,c,z,y){let r=function(){function v(){this._values=[];this._currentValue=this._length=this.ctrlPtGap=this.extPtGap=0}var q=v.prototype;q.isEmpty=function(){return 0===
this._values.length};q.size=function(){return this._values.length};q.init=function(g,k,n=!0){this._setEmpty();if(!g||0===g.length)return!1;for(let h=0;h<g.length;h++){let f=Math.abs(g[h]);n&&1E-7>f&&(f=1E-7);this._values.push(f);this._length+=f}k&&g.length&1&&(this._length*=2);if(0===this._length)return!1;this.ctrlPtGap=this.extPtGap=0;this._currentValue=-1;return!0};q.scale=function(g){const k=this._values?this._values.length:0;for(let n=0;n<k;++n)this._values[n]*=g;this._length*=g;this.extPtGap*=
g;this.ctrlPtGap*=g};q.addValue=function(g){this._length+=g;this._values.push(g)};q.firstValue=function(){return this._values[0]};q.lastValue=function(){return this._values[this._values.length-1]};q.nextValue=function(){this._currentValue++;this._currentValue===this._values.length&&(this._currentValue=0);return this._values[this._currentValue]};q.reset=function(){this._currentValue=-1};q.length=function(){return this._length};q._setEmpty=function(){this.extPtGap=this.ctrlPtGap=this._length=0;this._currentValue=
-1;this._values.length=0};return v}(),t=function(){function v(){this.reset()}var q=v.prototype;q.reset=function(){this.segment=-1;this.abscissa=this.segmentLength=0;this.isPartEnd=this.isPathEnd=!1};q.isValid=function(){return-1!==this.segment};q.copyTo=function(g){g.segment=this.segment;g.segmentLength=this.segmentLength;g.abscissa=this.abscissa;g.isPathEnd=this.isPathEnd;g.isPartEnd=this.isPartEnd};return v}(),l=function(v){function q(k=0,n=!1){k=v.call(this,k,n)||this;k._tolerance=y.PIXEL_TOLERANCE;
k._currentPosition=new t;return k}c._inheritsLoose(q,v);var g=q.prototype;g.updateTolerance=function(k){this._tolerance=y.PIXEL_TOLERANCE*k};g.init=function(k,n,h=!0){h?(this._patternLength=n.length(),this._partExtPtGap=n.extPtGap,this._partCtrlPtGap=n.ctrlPtGap):this._partCtrlPtGap=this._partExtPtGap=this._patternLength=0;this._currentPosition.reset();this._partSegCount=0;this._path=k;this._seg=-1;return this.setPosAtNextPart()};g.curPositionIsValid=function(){return this._currentPosition.isValid()};
g.nextPosition=function(k,n=0){const h=new t;if(!this._nextPosition(k,h,null,n))return!1;h.copyTo(this._currentPosition);return!0};g.curPointAndAngle=function(k){k.pt=this._getPoint(this._currentPosition);const [n,h]=this._getAngle(this._currentPosition);k.ca=n;k.sa=h};g.nextPointAndAngle=function(k,n,h=0){const f=new t;if(!this._nextPosition(k,f,null,h))return!1;f.copyTo(this._currentPosition);n.pt=this._getPoint(f);const [b,a]=this._getAngle(f);n.ca=b;n.sa=a;return!0};g.nextCurve=function(k){if(0===
k)return null;const n=[],h=new t;if(!this._nextPosition(k,h,n,1))return null;h.copyTo(this._currentPosition);return n};g.isPathEnd=function(){return this._currentPosition.isPathEnd};g.getPathEnd=function(){if(-1===this._currentPosition.segment)throw Error("missing segment");return this._path[this._currentPosition.segment+1]};g._nextPosition=function(k,n,h,f){if(this._currentPosition.isPathEnd)return!1;var b=this._currentPosition.abscissa;0<this._currentPosition.segmentLength&&(b/=this._currentPosition.segmentLength);
for(this._currentPosition.copyTo(n);n.abscissa+k*this._partLengthRatio>n.segmentLength+this._tolerance;)if(h&&(0===h.length&&(0===b?(b=this._path[n.segment],h.push([b[0],b[1]])):h.push(this.getSegCoord2D(this._path,n.segment,b))),b=this._path[n.segment+1],h.push([b[0],b[1]])),b=0,k-=(n.segmentLength-n.abscissa)/this._partLengthRatio,this._partSegCount)n.segment=this.nextSegment(),n.segmentLength=this.calculateSegLength(this._path,n.segment),n.abscissa=0,this._partSegCount--;else{if(!this.setPosAtNextPart()){if(0===
f)return!1;n.segmentLength=this.calculateSegLength(this._path,n.segment);n.isPartEnd=!0;1===f?(n.abscissa=n.segmentLength,n.isPathEnd=!0):n.abscissa=n.segmentLength+k;return!0}this._currentPosition.copyTo(n)}n.abscissa+=k*this._partLengthRatio;h&&(0===h.length&&(0===b?(k=this._path[n.segment],h.push([k[0],k[1]])):h.push(this.getSegCoord2D(this._path,n.segment,b))),k=n.abscissa/n.segmentLength,1===k?(k=this._path[n.segment+1],h.push([k[0],k[1]])):h.push(this.getSegCoord2D(this._path,n.segment,k)));
!this._partSegCount&&Math.abs(n.abscissa-n.segmentLength)<this._tolerance&&(n.isPathEnd=this._partIsLast,n.isPartEnd=!0);return!0};g._getPoint=function(k){if(-1===k.segment)throw Error("missing segment");return this.getSegCoord2D(this._path,k.segment,0>=k.segmentLength?0:k.abscissa/k.segmentLength)};g._getAngle=function(k){if(-1===k.segment)throw Error("missing segment");return this.getSegAngleCS(this._path,k.segment,0>=k.segmentLength?0:k.abscissa/k.segmentLength)};g.setPosAtNextPart=function(){for(;this._partSegCount;)this.hasNextSegment()&&
this.nextSegment(),this._partSegCount--;if(!this.hasNextSegment())return!1;this._partLength=0;this._partIsLast=!0;for(this._partSegCount=0;this.hasNextSegment();)if(this._partLength+=this.calculateSegLength(this._path,this.nextSegment()),this._partSegCount++,1===z.getId(this._path[this.getEndPointIndex()])){this._partIsLast=!this.hasNextSegment();break}for(var k=this._partSegCount;k;)this.previousSegment(),--k;this._currentPosition.segment=this.nextSegment();this._currentPosition.segmentLength=this.calculateSegLength(this._path,
this._currentPosition.segment);this._currentPosition.abscissa=0;this._currentPosition.isPathEnd=this._currentPosition.isPartEnd=!1;--this._partSegCount;k=this.getStartPointIndex();this._ctrlPtBegin=1===z.getId(this._path[k]);k=k+this._partSegCount+1;k>=this._path.length&&(k=0);this._ctrlPtEnd=1===z.getId(this._path[k]);if(0<this._patternLength){k=this._ctrlPtBegin?this._partCtrlPtGap:this._partExtPtGap;const n=this._ctrlPtEnd?this._partCtrlPtGap:this._partExtPtGap;let h=Math.round((this._partLength-
(k+n))/this._patternLength);0>=h&&(h=0<k+n?0:1);this._partLengthRatio=this._partLength/(k+n+h*this._patternLength);.01>this._partLengthRatio&&(this._partLengthRatio=1)}else this._partLengthRatio=1;return!0};g.hasNextSegment=function(){return this._seg<this._path.length-2};g.previousSegment=function(){return--this._seg};g.nextSegment=function(){return++this._seg};g.getStartPointIndex=function(){return this._seg};g.getEndPointIndex=function(){return this._seg+1};return q}(y.CurveHelper);p.DashPattern=
r;p.GeometryWalker=l;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/symbols/cim/effects/EffectDonut":function(){define(["exports","../../../geometry/support/jsonUtils","../CurveHelper"],function(p,c,z){let y=function(){function t(){}t.local=function(){null===t.instance&&(t.instance=new t);return t.instance};t.prototype.execute=function(l,v,q){return new r(l,v,q)};return t}();y.instance=null;let r=function(){function t(l,v,q){this._inputGeometries=l;this._curveHelper=new z.CurveHelper;this._width=
(void 0!==v.width?v.width:2)*q;switch(v.method){default:this._method="Mitered";break;case "Bevelled":this._method="Bevelled";break;case "Rounded":case "TrueBuffer":this._method="Rounded";break;case "Square":this._method="Square"}this._option=v.option;this._offsetFlattenError=z.PIXEL_TOLERANCE*q}t.prototype.next=function(){for(var l=this._inputGeometries.next();l;){if(c.isExtent(l)&&0<this._width){if(0>Math.min(l.xmax-l.xmin,l.ymax-l.ymin)-2*this._width)return l;var v=[];v.push([[l.xmin,l.ymin],[l.xmin,
l.ymax],[l.xmax,l.ymax],[l.xmax,l.ymin],[l.xmin,l.ymin]]);v.push([[l.xmin+this._width,l.ymin+this._width],[l.xmax-this._width,l.ymin+this._width],[l.xmax-this._width,l.ymax-this._width],[l.xmin+this._width,l.ymax-this._width],[l.xmin+this._width,l.ymin+this._width]]);return{rings:v}}if(c.isPolygon(l)&&0<this._width){v=[];for(const q of l.rings){l=this._curveHelper.calculatePathLength(q);const g=this._curveHelper.offset(q,this._width,this._method,4,this._offsetFlattenError);g&&(0>l&&g.reverse(),v.push(g))}if(v.length)return{rings:v}}l=
this._inputGeometries.next()}return null};return t}();p.EffectDonut=y;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/symbols/cim/effects/EffectJog":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../CIMCursor","../CurveHelper"],function(p,c,z,y){let r=function(){function l(){}l.local=function(){null===l.instance&&(l.instance=new l);return l.instance};l.prototype.execute=function(v,q,g){return new t(v,q,g)};return l}();r.instance=null;let t=function(l){function v(q,
g,k){q=l.call(this,q,!1,!0)||this;q._curveHelper=new y.CurveHelper;q._length=(void 0!==g.length?g.length:20)*k;q._angle=void 0!==g.angle?g.angle:225;q._position=void 0!==g.position?g.position:50;0>q._length&&(q._length=-q._length);20>q._position&&(q._position=20);80<q._position&&(q._position=80);q._mirror=!1;return q}c._inheritsLoose(v,l);v.prototype.processPath=function(q){if(this._curveHelper.isEmpty(q,!1))return null;const g=q[0];q=q[q.length-1];this._curveHelper.normalize([q[0]-g[0],q[1]-g[1]]);
const k=[g[0]+(q[0]-g[0])*this._position/100,g[1]+(q[1]-g[1])*this._position/100],n=Math.cos((90-this._angle)/180*Math.PI);let h=Math.sin((90-this._angle)/180*Math.PI);this._mirror&&(h=-h);this._mirror=!this._mirror;return{paths:[[g,[k[0]-this._length/2*n,k[1]-this._length/2*h],[k[0]+this._length/2*n,k[1]+this._length/2*h],q]]}};return v}(z.PathGeometryCursor);p.EffectJog=r;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/symbols/cim/effects/EffectMove":function(){define(["exports","../../../core/lang",
"../../../geometry/support/jsonUtils"],function(p,c,z){let y=function(){function t(){}t.local=function(){null===t.instance&&(t.instance=new t);return t.instance};t.prototype.execute=function(l,v,q){return new r(l,v,q)};return t}();y.instance=null;let r=function(){function t(v,q,g){this._inputGeometries=v;this._offsetX=void 0!==q.offsetX?q.offsetX*g:0;this._offsetY=void 0!==q.offsetY?-q.offsetY*g:0}var l=t.prototype;l.next=function(){for(var v=this._inputGeometries.next();v;){if(z.isExtent(v))return{xmin:v.xmin+
this._offsetX,xmax:v.xmax+this._offsetX,ymin:v.ymin+this._offsetY,ymax:v.ymax+this._offsetY};if(z.isPolygon(v))return v=c.clone(v),this._moveMultipath(v.rings,this._offsetX,this._offsetY),v;if(z.isPolyline(v))return v=c.clone(v),this._moveMultipath(v.paths,this._offsetX,this._offsetY),v;if(z.isMultipoint(v))return v=c.clone(v),this._movePath(v.points,this._offsetX,this._offsetY),v;if(z.isPoint(v))return{x:v.x+this._offsetX,y:v.y+this._offsetY};v=this._inputGeometries.next()}return null};l._moveMultipath=
function(v,q,g){if(v)for(const k of v)this._movePath(k,q,g)};l._movePath=function(v,q,g){if(v)for(const k of v)k[0]+=q,k[1]+=g};return t}();p.EffectMove=y;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/symbols/cim/effects/EffectOffset":function(){define(["exports","../../../geometry/support/jsonUtils","../CurveHelper"],function(p,c,z){let y=function(){function t(){}t.local=function(){null===t.instance&&(t.instance=new t);return t.instance};t.prototype.execute=function(l,v,q){return new r(l,
v,q)};return t}();y.instance=null;let r=function(){function t(l,v,q){this._inputGeometries=l;this._curveHelper=new z.CurveHelper;this._offset=(void 0!==v.offset?v.offset:1)*q;this._method=v.method;this._option=v.option;this._offsetFlattenError=z.PIXEL_TOLERANCE*q}t.prototype.next=function(){for(var l=this._inputGeometries.next();l;){if(0===this._offset)return l;if(c.isExtent(l)){if("Rounded"===this._method&&0<this._offset){var v=this._curveHelper.offset([[l.xmin,l.ymin],[l.xmin,l.ymax],[l.xmax,l.ymax],
[l.xmax,l.ymin],[l.xmin,l.ymin]],this._offset,this._method,4,this._offsetFlattenError);return v?{rings:[v]}:null}if(0<Math.min(l.xmax-l.xmin,l.ymax-l.ymin)+2*this._offset)return{xmin:l.xmin-this._offset,xmax:l.xmax+this._offset,ymin:l.ymin-this._offset,ymax:l.ymax+this._offset}}if(c.isPolygon(l)){var q=[];for(v of l.rings){const g=this._curveHelper.offset(v,this._offset,this._method,4,this._offsetFlattenError);g&&q.push(g)}if(q.length)return{rings:q}}if(c.isPolyline(l)){q=[];for(const g of l.paths)(l=
this._curveHelper.offset(g,this._offset,this._method,4,this._offsetFlattenError))&&q.push(l);if(q.length)return{paths:q}}l=this._inputGeometries.next()}return null};return t}();p.EffectOffset=y;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/symbols/cim/effects/EffectReverse":function(){define(["exports","../../../core/lang","../../../geometry/support/jsonUtils","../CIMCursor"],function(p,c,z,y){let r=function(){function l(){}l.local=function(){null===l.instance&&(l.instance=new l);return l.instance};
l.prototype.execute=function(v,q,g){return new t(v,q,g)};return l}();r.instance=null;let t=function(){function l(v,q,g){this._inputGeometries=v;this._reverse=void 0!==q.reverse?q.reverse:!0}l.prototype.next=function(){for(var v=this._inputGeometries.next();v;){if(!this._reverse)return v;if(z.isPolyline(v))return v=c.clone(v),y.reverseMultipath(v.paths),v;v=this._inputGeometries.next()}return null};return l}();p.EffectReverse=r;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/symbols/cim/effects/EffectRotate":function(){define(["exports",
"../../../core/lang","../../../geometry/support/aaBoundingRect","../../../geometry/support/boundsUtils","../../../geometry/support/jsonUtils"],function(p,c,z,y,r){let t=function(){function v(){}v.local=function(){null===v.instance&&(v.instance=new v);return v.instance};v.prototype.execute=function(q,g,k){return new l(q,g,k)};return v}();t.instance=null;let l=function(){function v(g,k,n){this._inputGeometries=g;this._rotateAngle=void 0!==k.angle?-k.angle*Math.PI/180:0}var q=v.prototype;q.next=function(){for(var g=
this._inputGeometries.next();g;){if(0===this._rotateAngle)return g;var k=z.create();y.getBoundsXY(k,g);const n=(k[2]+k[0])/2;k=(k[3]+k[1])/2;if(r.isExtent(g))return g={rings:[[[g.xmin,g.ymin],[g.xmin,g.ymax],[g.xmax,g.ymax],[g.xmax,g.ymin],[g.xmin,g.ymin]]]},this._rotateMultipath(g.rings,n,k),g;if(r.isPolygon(g))return g=c.clone(g),this._rotateMultipath(g.rings,n,k),g;if(r.isPolyline(g))return g=c.clone(g),this._rotateMultipath(g.paths,n,k),g;if(r.isMultipoint(g))return g=c.clone(g),this._rotatePath(g.points,
n,k),g;if(r.isPoint(g))return g;g=this._inputGeometries.next()}return null};q._rotateMultipath=function(g,k,n){if(g)for(const h of g)this._rotatePath(h,k,n)};q._rotatePath=function(g,k,n){if(g){const h=Math.cos(this._rotateAngle),f=Math.sin(this._rotateAngle);for(const b of g){g=b[0]-k;const a=b[1]-n;b[0]=k+g*h-a*f;b[1]=n+g*f+a*h}}};return v}();p.EffectRotate=t;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/symbols/cim/effects/EffectScale":function(){define(["exports","../../../core/lang",
"../../../geometry/support/aaBoundingRect","../../../geometry/support/boundsUtils","../../../geometry/support/jsonUtils"],function(p,c,z,y,r){let t=function(){function v(){}v.local=function(){null===v.instance&&(v.instance=new v);return v.instance};v.prototype.execute=function(q,g,k){return new l(q,g,k)};return v}();t.instance=null;let l=function(){function v(g,k,n){this._inputGeometries=g;this._xFactor=void 0!==k.xScaleFactor?k.xScaleFactor:1.15;this._yFactor=void 0!==k.yScaleFactor?k.yScaleFactor:
1.15}var q=v.prototype;q.next=function(){for(var g=this._inputGeometries.next();g;){if(1===this._xFactor&&1===this._yFactor)return g;var k=z.create();y.getBoundsXY(k,g);const n=(k[2]+k[0])/2;k=(k[3]+k[1])/2;if(r.isExtent(g))return g={rings:[[[g.xmin,g.ymin],[g.xmin,g.ymax],[g.xmax,g.ymax],[g.xmax,g.ymin],[g.xmin,g.ymin]]]},this._scaleMultipath(g.rings,n,k),g;if(r.isPolygon(g))return g=c.clone(g),this._scaleMultipath(g.rings,n,k),g;if(r.isPolyline(g))return g=c.clone(g),this._scaleMultipath(g.paths,
n,k),g;if(r.isMultipoint(g))return g=c.clone(g),this._scalePath(g.points,n,k),g;if(r.isPoint(g))return g;g=this._inputGeometries.next()}return null};q._scaleMultipath=function(g,k,n){if(g)for(const h of g)this._scalePath(h,k,n)};q._scalePath=function(g,k,n){if(g)for(const h of g)g=(h[1]-n)*this._yFactor,h[0]=k+(h[0]-k)*this._xFactor,h[1]=n+g};return v}();p.EffectScale=t;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/symbols/cim/effects/EffectWave":function(){define(["exports","../../../geometry/support/jsonUtils",
"../CurveHelper","../GeometryWalker"],function(p,c,z,y){let r=function(){function l(){}l.local=function(){null===l.instance&&(l.instance=new l);return l.instance};l.prototype.execute=function(v,q,g){return new t(v,q,g)};return l}();r.instance=null;let t=function(){function l(q,g,k){this._inputGeometries=q;this._height=(void 0!==g.amplitude?g.amplitude:2)*k;this._period=(void 0!==g.period?g.period:3)*k;this._style=g.waveform;0>=this._height&&(this._height=Math.abs(this._height));0>=this._period&&(this._period=
Math.abs(this._period));this._pattern=new y.DashPattern;this._pattern.addValue(this._period);this._pattern.addValue(this._period);this._walker=new y.GeometryWalker;this._walker.updateTolerance(k)}var v=l.prototype;v.next=function(){for(var q=this._inputGeometries.next();q;){if(0===this._height||0===this._period)return q;if(c.isPolyline(q)){const g=this._processGeom(q.paths);if(g.length)return{paths:g}}if(c.isPolygon(q)&&(q=this._processGeom(q.rings),q.length))return{rings:q};q=this._inputGeometries.next()}return null};
v._processGeom=function(q){const g=[];for(const k of q)if(this._walker.init(k,this._pattern))switch(this._style){default:g.push(this._constructCurve(k,!1));break;case "Square":g.push(this._constructSquare(k));break;case "Triangle":g.push(this._constructTriangle(k));break;case "Random":g.push(this._constructCurve(k,!0))}else g.push(k);return g};v._constructCurve=function(q,g){const k=new z.PathHelper;var n=this._walker.calculatePathLength(q),h=Math.round(n/this._period);0===h&&(h=1);const f=this._period/
16,b=1/(16*h+1);n=2*Math.PI*n/(n/h);h=2*Math.PI*Math.random();const a=2*Math.PI*Math.random(),d=2*Math.PI*Math.random(),e=.75-Math.random()/2,u=.75-Math.random()/2,m={};this._walker.curPointAndAngle(m);k.startPath(m.pt);let x=0;for(;;)if(this._walker.nextPointAndAngle(f,m)){const A=x;x+=b;let D;if(g){const B=this._height/2*(1+.3*Math.sin(e*n*A+h));D=B*Math.sin(n*A+a);D+=B*Math.sin(u*n*A+d);D/=2}else D=.5*this._height*Math.sin(.5*n*A);k.lineTo([m.pt[0]-D*m.sa,m.pt[1]+D*m.ca])}else{k.lineTo(q[q.length-
1]);break}return k.path()};v._constructSquare=function(q){const g=new z.PathHelper;q=this._walker.calculatePathLength(q);Math.round(q/this._period);for(q=!0;;){let k=!1;if(this._walker.curPositionIsValid()){const n={};this._walker.curPointAndAngle(n);const h={};if(this._walker.nextPointAndAngle(this._period,h)){const f={};this._walker.nextPointAndAngle(this._period,f)&&(q?(g.startPath(n.pt),q=!1):g.lineTo(n.pt),g.lineTo([n.pt[0]-this._height/2*n.sa,n.pt[1]+this._height/2*n.ca]),g.lineTo([h.pt[0]-
this._height/2*h.sa,h.pt[1]+this._height/2*h.ca]),g.lineTo([h.pt[0]+this._height/2*h.sa,h.pt[1]-this._height/2*h.ca]),g.lineTo([f.pt[0]+this._height/2*f.sa,f.pt[1]-this._height/2*f.ca]),k=!0)}}if(!k){g.lineTo(this._walker.getPathEnd());break}}return g.path()};v._constructTriangle=function(q){const g=new z.PathHelper;q=this._walker.calculatePathLength(q);Math.round(q/this._period);for(q=!0;;){let k=!1;if(this._walker.curPositionIsValid()){const n={};this._walker.curPointAndAngle(n);const h={};if(this._walker.nextPointAndAngle(this._period/
2,h)){const f={};this._walker.nextPointAndAngle(this._period,f)&&(this._walker.nextPosition(this._period/2)&&(q?(g.startPath(n.pt),q=!1):g.lineTo(n.pt),g.lineTo([h.pt[0]-this._height/2*h.sa,h.pt[1]+this._height/2*h.ca]),g.lineTo([f.pt[0]+this._height/2*f.sa,f.pt[1]-this._height/2*f.ca])),k=!0)}}if(!k){g.lineTo(this._walker.getPathEnd());break}}return g.path()};return l}();p.EffectWave=r;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/symbols/cim/placements/PlacementAlongLineSameSize":function(){define(["exports",
"../../../chunks/_rollupPluginBabelHelpers","../CIMCursor","../enums","../GeometryWalker"],function(p,c,z,y,r){let t=function(){function v(){}v.local=function(){null===v.instance&&(v.instance=new v);return v.instance};v.prototype.execute=function(q,g,k){return new l(q,g,k)};return v}();t.instance=null;let l=function(v){function q(k,n,h){k=v.call(this,k,!0,!0)||this;k._grometryWalker=new r.GeometryWalker;k._grometryWalker.updateTolerance(h);k._angleToLine=void 0!==n.angleToLine?n.angleToLine:!0;k._offset=
void 0!==n.offset?n.offset*h:0;k._originalEndings=n.endings;k._offsetAtEnd=void 0!==n.customEndingOffset?n.customEndingOffset*h:0;k._position=void 0!==n.offsetAlongLine?n.offsetAlongLine*h:0;k._pattern=new r.DashPattern;k._pattern.init(n.placementTemplate,!1);k._pattern.scale(h);k._endings=k._originalEndings;return k}c._inheritsLoose(q,v);var g=q.prototype;g.processPath=function(k){if(this._pattern.isEmpty())return null;if(this.iteratePath)var n=this._pattern.nextValue();else{this._endings=this._originalEndings===
y.PlacementEndings.WithFullGap&&this.isClosed?y.PlacementEndings.WithMarkers:this._originalEndings;this._pattern.extPtGap=0;let h=!0;switch(this._endings){case y.PlacementEndings.NoConstraint:n=-this._position;n=this._adjustPosition(n);h=!1;break;default:n=-this._pattern.lastValue()/2;break;case y.PlacementEndings.WithFullGap:n=-this._pattern.lastValue();this._pattern.extPtGap=this._pattern.lastValue();break;case y.PlacementEndings.WithMarkers:n=0;break;case y.PlacementEndings.Custom:n=-this._position,
n=this._adjustPosition(n),this._pattern.extPtGap=.5*this._offsetAtEnd}if(!this._grometryWalker.init(k,this._pattern,h))return null;this._pattern.reset();for(k=0;n>k;)n-=k,k=this._pattern.nextValue();n=k-=n;this.iteratePath=!0}k={};if(!this._grometryWalker.nextPointAndAngle(n,k)||this._endings===y.PlacementEndings.WithFullGap&&this._grometryWalker.isPathEnd())return this.iteratePath=!1,null;if(this._endings===y.PlacementEndings.WithMarkers&&this._grometryWalker.isPathEnd()&&(this.iteratePath=!1,this.isClosed))return null;
this.internalPlacement.setTranslate(k.pt[0]+this._offset*k.sa,k.pt[1]-this._offset*k.ca);this._angleToLine&&this.internalPlacement.setRotateCS(k.ca,k.sa);return this.internalPlacement};g._adjustPosition=function(k){k/=this._pattern.length();k-=Math.floor(k);return k*this._pattern.length()};return q}(z.PathTransformationCursor);p.PlacementAlongLineSameSize=t;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/symbols/cim/enums":function(){define(["exports"],function(p){p.PlacementEndings=void 0;
var c=p.PlacementEndings||(p.PlacementEndings={});c.NoConstraint="NoConstraint";c.WithMarkers="WithMarkers";c.WithFullGap="WithFullGap";c.WithHalfGap="WithHalfGap";c.Custom="Custom";Object.defineProperty(p,"__esModule",{value:!0})})},"esri/symbols/cim/placements/PlacementAtExtremities":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../CIMCursor","../CurveHelper"],function(p,c,z,y){let r=function(){function l(){}l.local=function(){null===l.instance&&(l.instance=new l);return l.instance};
l.prototype.execute=function(v,q,g){return new t(v,q,g)};return l}();r.instance=null;let t=function(l){function v(g,k,n){g=l.call(this,g,!1,!0)||this;g._curveHelper=new y.CurveHelper;g._angleToLine=void 0!==k.angleToLine?k.angleToLine:!0;g._offset=void 0!==k.offset?k.offset*n:0;g._type=k.extremityPlacement;g._position=void 0!==k.offsetAlongLine?k.offsetAlongLine*n:0;g._beginProcessed=!1;return g}c._inheritsLoose(v,l);var q=v.prototype;q.processPath=function(g){let k;switch(this._type){default:this._beginProcessed?
(k=this._atExtremities(g,this._position,!1),this.iteratePath=this._beginProcessed=!1):(k=this._atExtremities(g,this._position,!0),this.iteratePath=this._beginProcessed=!0);break;case "JustBegin":k=this._atExtremities(g,this._position,!0);break;case "JustEnd":k=this._atExtremities(g,this._position,!1);case "None":}return k};q._atExtremities=function(g,k,n){var h=g.length;if(2>h)return null;var f=n?1:h-2;const b=n?h:-1,a=n?1:-1;let d=0;n=n?g[0]:g[h-1];for(h=f;h!==b;h+=a){f=n;n=g[h];const e=this._curveHelper.calculateLength(f,
n);if(d+e>k){g=(k-d)/e;const [u,m]=this._curveHelper.getAngleCS(f,n,g);g=z.getCoord2D(f,n,g);this.internalPlacement.setTranslate(g[0]-this._offset*m,g[1]+this._offset*u);this._angleToLine&&this.internalPlacement.setRotateCS(-u,-m);return this.internalPlacement}d+=e}return null};return v}(z.PathTransformationCursor);p.PlacementAtExtremities=r;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/symbols/cim/placements/PlacementAtRatioPositions":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers",
"../CIMCursor","../GeometryWalker"],function(p,c,z,y){let r=function(){function l(){}l.local=function(){null===l.instance&&(l.instance=new l);return l.instance};l.prototype.execute=function(v,q,g){return new t(v,q,g)};return l}();r.instance=null;let t=function(l){function v(q,g,k){q=l.call(this,q,!0,!0)||this;q._walker=new y.GeometryWalker;q._walker.updateTolerance(k);q._angleToLine=void 0!==g.angleToLine?g.angleToLine:!0;q._offset=void 0!==g.offset?g.offset*k:0;q._beginGap=void 0!==g.beginPosition?
g.beginPosition*k:0;q._endGap=void 0!==g.endPosition?g.endPosition*k:0;q._flipFirst=void 0!==g.flipFirst?g.flipFirst:!0;q._pattern=new y.DashPattern;q._pattern.init(g.positionArray,!1,!1);q._subPathLen=0;q._posCount=q._pattern.size();q._isFirst=!0;q._prevPos=0;return q}c._inheritsLoose(v,l);v.prototype.processPath=function(q){if(this._pattern.isEmpty())return null;if(this.iteratePath){q=this._pattern.nextValue()*this._subPathLen;var g=this._beginGap+q;q=g-this._prevPos;this._prevPos=g}else{this._posCount=
this._pattern.size();this._isFirst=!0;this._prevPos=0;this._subPathLen=this._walker.calculatePathLength(q)-this._beginGap-this._endGap;if(0>this._subPathLen)return this.iteratePath=!1,null;if(!this._walker.init(q,this._pattern,!1))return null;this._pattern.reset();q=this._pattern.nextValue()*this._subPathLen;g=this._beginGap+q;q=g-this._prevPos;this._prevPos=g;this.iteratePath=!0}g={};if(!this._walker.nextPointAndAngle(q,g,1))return this.iteratePath=!1,null;this.internalPlacement.setTranslate(g.pt[0]+
this._offset*g.sa,g.pt[1]-this._offset*g.ca);q=this._isFirst&&this._flipFirst;let k;this._angleToLine?(k=g.ca,g=g.sa):(k=1,g=0);q&&(k=-k,g=-g);this.internalPlacement.setRotateCS(k,g);this._isFirst=!1;this._posCount--;0===this._posCount&&(this.iteratePath=!1);return this.internalPlacement};return v}(z.PathTransformationCursor);p.PlacementAtRatioPositions=r;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/symbols/cim/placements/PlacementInsidePolygon":function(){define(["exports","../CIMPlacements"],
function(p,c){let z=function(){function r(){}r.local=function(){null===r.instance&&(r.instance=new r);return r.instance};r.prototype.execute=function(t,l,v){return new y(t,l,v)};return r}();z.instance=null;let y=function(){function r(l,v,q){this._currentY=this._currentX=this._yMax=this._yMin=this._xMax=this._xMin=0;this._stepX=(void 0!==v.stepX?Math.abs(v.stepX):16)*q;this._stepY=(void 0!==v.stepY?Math.abs(v.stepY):16)*q;if(0!==this._stepX&&0!==this._stepY&&l&&void 0!==l.rings&&l.rings){this._gridType=
void 0!==v.gridType?v.gridType:"Fixed";if("Random"===this._gridType)this._randomness=void 0!==v.randomness?v.randomness/100:1,this._gridAngle=0,this._shiftOddRows=!1,this._cosAngle=1,this._offsetY=this._offsetX=this._sinAngle=0;else{this._randomness=0;this._gridAngle=void 0!==v.gridAngle?v.gridAngle:0;this._shiftOddRows=void 0!==v.shiftOddRows?v.shiftOddRows:!1;this._offsetX=void 0!==v.offsetX?v.offsetX*q:0;this._offsetY=void 0!==v.offsetY?v.offsetY*q:0;this._cosAngle=Math.cos(this._gridAngle/180*
Math.PI);this._sinAngle=-Math.sin(this._gridAngle/180*Math.PI);if(this._stepX)if(0>this._offsetX)for(;this._offsetX<-.5*this._stepX;)this._offsetX+=this._stepX;else for(;this._offsetX>=.5*this._stepX;)this._offsetX-=this._stepX;if(this._stepY)if(0>this._offsetY)for(;this._offsetY<-.5*this._stepY;)this._offsetY+=this._stepY;else for(;this._offsetY>=.5*this._stepY;)this._offsetY-=this._stepY}this._graphicOriginY=this._graphicOriginX=0;this._internalPlacement=new c.Placement;this._calculateMinMax(l);
this._geometry=l}}var t=r.prototype;t.next=function(){return this._geometry?this._nextInside():null};t._calculateMinMax=function(l){this._yMax=this._yMin=this._xMax=this._xMin=0;let v,q,g,k,n;q=g=Number.MAX_VALUE;k=n=-Number.MAX_VALUE;for(const f of l.rings){const b=f?f.length:0;for(let a=0;a<b;++a){var h=f[a][0]-this._graphicOriginX-this._offsetX;v=f[a][1]-this._graphicOriginY-this._offsetY;l=this._cosAngle*h-this._sinAngle*v;h=this._sinAngle*h+this._cosAngle*v;q=Math.min(q,l);k=Math.max(k,l);g=
Math.min(g,h);n=Math.max(n,h)}}q+=this._graphicOriginX;k+=this._graphicOriginX;g+=this._graphicOriginY;n+=this._graphicOriginY;this._xMin=Math.round(q/this._stepX);this._xMax=Math.round(k/this._stepX);this._yMin=Math.round(g/this._stepY);this._yMax=Math.round(n/this._stepY);this._currentX=this._xMax+1;this._currentY=this._yMin-1};t._nextInside=function(){for(;;){if(this._currentX>this._xMax){this._currentY++;if(this._currentY>this._yMax)return null;this._currentX=this._xMin;this._shiftOddRows&&this._currentY%
2&&this._currentX--}var l=this._currentX*this._stepX+this._offsetX;this._shiftOddRows&&this._currentY%2&&(l+=.5*this._stepX);const v=this._currentY*this._stepY+this._offsetY;this._currentX++;let q;"Random"===this._gridType?(q=this._graphicOriginX+l+this._stepX*this._randomness*(.5-Math.random())*2/3,l=this._graphicOriginY+v+this._stepY*this._randomness*(.5-Math.random())*2/3):(q=this._graphicOriginX+this._cosAngle*l+this._sinAngle*v,l=this._graphicOriginY-this._sinAngle*l+this._cosAngle*v);this._internalPlacement.setTranslate(q,
l);return this._internalPlacement}};return r}();p.PlacementInsidePolygon=z;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/symbols/cim/placements/PlacementOnLine":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../CIMCursor","../CurveHelper"],function(p,c,z,y){let r=function(){function l(){}l.local=function(){null===l.instance&&(l.instance=new l);return l.instance};l.prototype.execute=function(v,q,g){return new t(v,q,g)};return l}();r.instance=null;let t=function(l){function v(g,
k,n){g=l.call(this,g,!0,!0)||this;g._curveHelper=new y.CurveHelper;g._angleToLine=void 0!==k.angleToLine?k.angleToLine:!0;g._offset=void 0!==k.offset?k.offset*n:0;g._relativeTo=k.relativeTo;g._position=void 0!==k.startPointOffset?k.startPointOffset*n:0;g._epsilon=.001*n;return g}c._inheritsLoose(v,l);var q=v.prototype;q.processPath=function(g){var k=this._position;if("SegmentMidpoint"===this._relativeTo){this.iteratePath||(this._segmentCount=g.length,this._curSegment=1,this.iteratePath=!0);for(;this._curSegment<
this._segmentCount;){var n=this._curSegment;this._curSegment++;k=g[n-1];n=g[n];const h=this._curveHelper.calculateLength(k,n);if(h<this._epsilon)continue;g=.5+this._position/h;const [f,b]=this._curveHelper.getAngleCS(k,n,g);g=z.getCoord2D(k,n,g);this.internalPlacement.setTranslate(g[0]-this._offset*b,g[1]+this._offset*f);this._angleToLine&&this.internalPlacement.setRotateCS(f,b);return this.internalPlacement}this.iteratePath=!1;return null}"LineEnd"===this._relativeTo&&z.reversePath(g);k=this.onLine(g,
k);"LineEnd"===this._relativeTo&&z.reversePath(g);return k};q.onLine=function(g,k){let n,h=!1;switch(this._relativeTo){default:n=this._curveHelper.calculatePathLength(g)/2+k;break;case "LineBeginning":n=k;break;case "LineEnd":n=k,h=!0}const f=g.length;let b=0,a=g[0];for(let d=1;d<f;++d){k=a;a=g[d];const e=this._curveHelper.calculateLength(k,a);if(b+e>n){g=(n-b)/e;const [u,m]=this._curveHelper.getAngleCS(k,a,g);g=z.getCoord2D(k,a,g);k=h?this._offset:-this._offset;this.internalPlacement.setTranslate(g[0]-
k*m,g[1]+k*u);this._angleToLine&&(h?this.internalPlacement.setRotateCS(-u,-m):this.internalPlacement.setRotateCS(u,m));return this.internalPlacement}b+=e}return null};return v}(z.PathTransformationCursor);p.PlacementOnLine=r;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/symbols/cim/placements/PlacementOnVertices":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../CIMCursor","../CurveHelper"],function(p,c,z,y){function r(v,q){const g=Math.PI;for(;Math.abs(q-v)>
g+2E-15;)q=q-v>g?q-2*g:q+2*g;return(v+q)/2}let t=function(){function v(){}v.local=function(){null===v.instance&&(v.instance=new v);return v.instance};v.prototype.execute=function(q,g,k){return new l(q,g,k)};return v}();t.instance=null;let l=function(v){function q(k,n,h){k=v.call(this,k,!0,!0)||this;k._curveHelper=new y.CurveHelper;k._angleToLine=void 0!==n.angleToLine?n.angleToLine:!0;k._offset=void 0!==n.offset?n.offset*h:0;k._endPoints=void 0!==n.placeOnEndPoints?n.placeOnEndPoints:!0;k._controlPoints=
void 0!==n.placeOnControlPoints?n.placeOnControlPoints:!0;k._regularVertices=void 0!==n.placeOnRegularVertices?n.placeOnRegularVertices:!0;k._tags=[];k._tagIterator=0;return k}c._inheritsLoose(q,v);var g=q.prototype;g.processPath=function(k){this.iteratePath||(this._preparePath(k),this.iteratePath=!0);if(this._tagIterator>=this._tags.length)return this._tagIterator=this._tags.length=0,this.iteratePath=!1,null;k=this._tags[this._tagIterator];this._angleToLine&&this.internalPlacement.setRotate(k[2]);
let n=k[0],h=k[1];if(0!==this._offset){const f=Math.cos(k[2]);n-=this._offset*Math.sin(k[2]);h+=this._offset*f}this.internalPlacement.setTranslate(n,h);this._tagIterator++;return this.internalPlacement};g._preparePath=function(k){this._tagIterator=this._tags.length=0;const n=z.isClosedPath(k),h=k.length-1;let f=0,b=0,a=0,d=0,e=0,u,m;for(;f<h;){f++;u=k[f-1];m=k[f];const x=z.getId(u),A=z.getId(m);if(this._angleToLine||0!==this._offset)d=this._curveHelper.getAngle(u,m,0);1===f?n?(b=d,a=x):this._endPoints&&
this._tags.push([u[0],u[1],d]):1===x?this._controlPoints&&this._tags.push([u[0],u[1],r(e,d)]):this._regularVertices&&this._tags.push([u[0],u[1],r(e,d)]);if(this._angleToLine||0!==this._offset)e=this._curveHelper.getAngle(u,m,1);f===h&&(n?1===A||1===a?this._controlPoints&&this._tags.push([m[0],m[1],r(e,b)]):this._regularVertices&&this._tags.push([m[0],m[1],r(e,b)]):this._endPoints&&this._tags.push([m[0],m[1],e]))}this._tagIterator=0};return q}(z.PathTransformationCursor);p.PlacementOnVertices=t;Object.defineProperty(p,
"__esModule",{value:!0})})},"esri/symbols/cim/placements/PlacementPolygonCenter":function(){define(["exports","../../../geometry/support/aaBoundingRect","../../../geometry/support/boundsUtils","../CIMPlacements"],function(p,c,z,y){let r=function(){function l(){}l.local=function(){null===l.instance&&(l.instance=new l);return l.instance};l.prototype.execute=function(v,q,g){return new t(v,q,g)};return l}();r.instance=null;let t=function(){function l(q,g,k){this._geometry=q;this._offsetX=void 0!==g.offsetX?
g.offsetX*k:0;this._offsetY=void 0!==g.offsetY?g.offsetY*k:0;this._method=void 0!==g.method?g.method:"OnPolygon";this._internalPlacement=new y.Placement}var v=l.prototype;v.next=function(){const q=this._geometry;this._geometry=null;return q&&void 0!==q.rings?this._polygonCenter(q):null};v._polygonCenter=function(q){switch(this._method){default:case "CenterOfMass":case "BoundingBoxCenter":{const g=c.create();z.getBoundsXY(g,q);this._internalPlacement.setTranslate((g[2]+g[0])/2+this._offsetX,(g[3]+
g[1])/2-this._offsetY)}}return this._internalPlacement};return l}();p.PlacementPolygonCenter=r;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/views/2d/engine/webgl/mesh/templates/shapingUtils":function(){define("exports ../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../chunks/mat2d ../../../../../../chunks/mat2df32 ../../../../../../chunks/vec2 ../../../../../../chunks/vec2f32 ../../alignmentUtils ../../number ../../Rect ../../collisions/BoundingBox".split(" "),function(p,
c,z,y,r,t,l,v,q,g){const k=Math.PI/180;let n=function(){function a(e,u,m,x){this._rotationT=y.create();this.minZoom=this._yBounds=this._xBounds=0;this.maxZoom=255;this._bounds=null;const A=m.rect,D=new Float32Array(8);e*=x;u*=x;const B=m.code?A.width*x:m.metrics.width,C=m.code?A.height*x:m.metrics.height;D[0]=e;D[1]=u;D[2]=e+B;D[3]=u;D[4]=e;D[5]=u+C;D[6]=e+B;D[7]=u+C;this._data=D;this._setTextureCoords(A);this._scale=x;this._mosaic=m;this.x=e;this.y=u;this.maxOffset=Math.max(e+B,u+C)}var d=a.prototype;
d.setTransform=function(e){this._T=e;this._offsets=null};d._setOffsets=function(e){this._offsets||(this._offsets={upperLeft:0,upperRight:0,lowerLeft:0,lowerRight:0});const u=this._offsets,m=new Float32Array(8),x=z.multiply(y.create(),this._rotationT,this._T);y.transformMany(m,e,x);u.upperLeft=v.i1616to32(8*m[0],8*m[1]);u.upperRight=v.i1616to32(8*m[2],8*m[3]);u.lowerLeft=v.i1616to32(8*m[4],8*m[5]);u.lowerRight=v.i1616to32(8*m[6],8*m[7])};d._setTextureCoords=function({x:e,y:u,width:m,height:x}){this._texcoords=
{upperLeft:v.i1616to32(e,u),upperRight:v.i1616to32(e+m,u),lowerLeft:v.i1616to32(e,u+x),lowerRight:v.i1616to32(e+m,u+x)}};c._createClass(a,[{key:"width",get:function(){return this._mosaic.metrics.width*this._scale}},{key:"mosaic",get:function(){return this._mosaic}},{key:"angle",get:function(){return this._angle},set:function(e){this._angle=e;z.identity(this._rotationT);z.rotate(this._rotationT,this._rotationT,-e);this._setOffsets(this._data)}},{key:"xTopLeft",get:function(){return this._data[0]}},
{key:"yTopLeft",get:function(){return this._data[1]}},{key:"xBottomRight",get:function(){return this._data[6]}},{key:"yBottomRight",get:function(){return this._data[7]}},{key:"texcoords",get:function(){return this._texcoords}},{key:"textureBinding",get:function(){return this._mosaic.textureBinding}},{key:"offsets",get:function(){this._offsets||this._setOffsets(this._data);return this._offsets}},{key:"char",get:function(){return String.fromCharCode(this._mosaic.code)}},{key:"code",get:function(){return this._mosaic.code}},
{key:"bounds",get:function(){if(!this._bounds){const {height:A,width:D}=this._mosaic.metrics;var e=D*this._scale,u=Math.abs(A)*this._scale,m=new Float32Array(8);m[0]=this.x;m[1]=this.y;m[2]=this.x+e;m[3]=this.y;m[4]=this.x;m[5]=this.y+u;m[6]=this.x+e;m[7]=this.y+u;e=z.multiply(y.create(),this._rotationT,this._T);y.transformMany(m,m,e);u=e=Infinity;let B=0;var x=0;for(let C=0;4>C;C++){const w=m[2*C],E=m[2*C+1];e=Math.min(e,w);u=Math.min(u,E);B=Math.max(B,w);x=Math.max(x,E)}m=B-e;x-=u;this._bounds=
new g(e+m/2,u+x/2,m,x)}return this._bounds}}]);return a}();const h=(a,d)=>({code:0,page:0,sdf:!0,rect:new q(0,0,11,8),textureBinding:d,metrics:{advance:0,height:4,width:a,left:0,top:0}});let f=function(){function a(e,u,m){this._rotation=0;this._decorate(e,u,m);this.glyphs=e;this.bounds=this._createBounds(e);this.isMultiline=1<u.length;this._hasRotation=0!==m.angle;this._T=this._createGlyphTransform(this.bounds,m);for(const x of e)x.setTransform(this._T)}var d=a.prototype;d.setRotation=function(e){if(0!==
e||0!==this._rotation){this._rotation=e;var u=this._T;e=z.fromRotation(y.create(),e);z.multiply(u,e,u);for(const m of this.glyphs)m.setTransform(this._T)}};d._decorate=function(e,u,m){if(m.decoration&&"none"!==m.decoration&&e.length){var x=m.scale;m="underline"===m.decoration?30:20;var A=e[0].textureBinding;for(const D of u)e.push(new n(D.startX*x,D.startY*x+m*x,h((D.width+D.glyphWidthEnd)*x,A),1))}};d._createBounds=function(e){let u=Infinity,m=Infinity,x=0;var A=0;for(const D of e)u=Math.min(u,D.xTopLeft),
m=Math.min(m,D.yTopLeft),x=Math.max(x,D.xTopLeft+D.width),A=Math.max(A,D.yBottomRight);e=x-u;A-=m;return new g(u+e/2,m+A/2,e,A)};d._createGlyphTransform=function(e,u){const m=k*u.angle,x=y.create(),A=t.create();z.translate(x,x,r.set(A,u.xOffset,-u.yOffset));u.isCIM?z.rotate(x,x,m):(z.translate(x,x,r.set(A,e.x,e.y)),z.rotate(x,x,m),z.translate(x,x,r.set(A,-e.x,-e.y)));return x};c._createClass(a,[{key:"boundsT",get:function(){var e=this.bounds;const u=r.set(t.create(),e.x,e.y);r.transformMat2d(u,u,
this._T);return this._hasRotation?(e=Math.max(e.width,e.height),new g(u[0],u[1],e,e)):new g(u[0],u[1],e.width,e.height)}}]);return a}(),b=function(a,d,e,u,m,x){this.startY=this.startX=this.glyphWidthEnd=0;this.start=Math.max(0,Math.min(d,e));this.end=Math.max(0,Math.max(d,e));this.end<a.length&&(this.glyphWidthEnd=a[this.end].metrics.width);this.width=u;this.yMin=m;this.yMax=x};p.ShapedGlyph=n;p.ShapingInfo=f;p.shapeGlyphs=function(a,d,e){const u=e.scale,m=[];{var x=[];var A=1/e.scale*e.maxLineWidth;
var D=d?a.length-1:0;var B=d?-1:a.length;d=d?-1:1;var C=D,w=0,E=0;let K=C,G=K,L=0,P=Infinity,R=0;for(;C!==B;){const {code:S,metrics:M}=a[C];var I=Math.abs(M.top);10!==S&&32!==S&&(P=Math.min(P,I),R=Math.max(R,I+M.height));10===S?(C!==D&&(x.push(new b(a,K,C-d,w,P,R)),P=Infinity,R=0),w=0,K=C+d,G=C+d,E=0):32===S?(G=C+d,E=0,L=M.advance,w+=M.advance):(w>A&&(G!==K?(I=G-2*d,w-=L,x.push(new b(a,K,I,w-E,P,R)),P=Infinity,R=0,K=G,w=E):(x.push(new b(a,K,C-d,w,P,R)),P=Infinity,R=0,G=K=C,w=0)),w+=M.advance,E+=M.advance);
C+=d}A=new b(a,K,C-d,w,P,R);0<=A.start&&A.end<a.length&&x.push(A)}for(A=0;A<x.length;A++);A=D=x[0].yMin;D=x[x.length-1].yMax+e.lineHeight*(x.length-1)+("underline"===e.decoration?4:0)-D;const {vAlign:F,hAlign:H}=e;B=F===l.VAlign.Baseline?1:0;A=(1-B)*-A+D/2*(B?0:F-1)+-26*(B?1:0);for(D=0;D<x.length;D++){const {start:K,end:G,width:L}=x[D];B=L/2*(H+1)*-1-3;d=D*e.lineHeight+A-3;x[D].startX=B;x[D].startY=d;for(C=K;C<=G;C++)w=a[C],10!==w.code&&(E=new n(B+w.metrics.left,d-w.metrics.top,w,u),B+=w.metrics.advance,
m.push(E))}return new f(m,x,e)};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/chunks/mat2d":function(){define(["exports","./common"],function(p,c){function z(B,C){B[0]=C[0];B[1]=C[1];B[2]=C[2];B[3]=C[3];B[4]=C[4];B[5]=C[5];return B}function y(B){B[0]=1;B[1]=0;B[2]=0;B[3]=1;B[4]=0;B[5]=0;return B}function r(B,C,w,E,I,F,H){B[0]=C;B[1]=w;B[2]=E;B[3]=I;B[4]=F;B[5]=H;return B}function t(B,C){const w=C[0],E=C[1],I=C[2],F=C[3],H=C[4];C=C[5];let K=w*F-E*I;if(!K)return null;K=1/K;B[0]=F*K;B[1]=
-E*K;B[2]=-I*K;B[3]=w*K;B[4]=(I*C-F*H)*K;B[5]=(E*H-w*C)*K;return B}function l(B){return B[0]*B[3]-B[1]*B[2]}function v(B,C,w){const E=C[0],I=C[1],F=C[2],H=C[3],K=C[4];C=C[5];const G=w[0],L=w[1],P=w[2],R=w[3],S=w[4];w=w[5];B[0]=E*G+F*L;B[1]=I*G+H*L;B[2]=E*P+F*R;B[3]=I*P+H*R;B[4]=E*S+F*w+K;B[5]=I*S+H*w+C;return B}function q(B,C,w){const E=C[0],I=C[1],F=C[2],H=C[3],K=C[4];C=C[5];const G=Math.sin(w);w=Math.cos(w);B[0]=E*w+F*G;B[1]=I*w+H*G;B[2]=E*-G+F*w;B[3]=I*-G+H*w;B[4]=K;B[5]=C;return B}function g(B,
C,w){const E=C[1],I=C[2],F=C[3],H=C[4],K=C[5],G=w[0];w=w[1];B[0]=C[0]*G;B[1]=E*G;B[2]=I*w;B[3]=F*w;B[4]=H;B[5]=K;return B}function k(B,C,w){const E=C[0],I=C[1],F=C[2],H=C[3],K=C[4];C=C[5];const G=w[0];w=w[1];B[0]=E;B[1]=I;B[2]=F;B[3]=H;B[4]=E*G+F*w+K;B[5]=I*G+H*w+C;return B}function n(B,C){const w=Math.sin(C);C=Math.cos(C);B[0]=C;B[1]=w;B[2]=-w;B[3]=C;B[4]=0;B[5]=0;return B}function h(B,C){B[0]=C[0];B[1]=0;B[2]=0;B[3]=C[1];B[4]=0;B[5]=0;return B}function f(B,C){B[0]=1;B[1]=0;B[2]=0;B[3]=1;B[4]=C[0];
B[5]=C[1];return B}function b(B){return"mat2d("+B[0]+", "+B[1]+", "+B[2]+", "+B[3]+", "+B[4]+", "+B[5]+")"}function a(B){return Math.sqrt(B[0]**2+B[1]**2+B[2]**2+B[3]**2+B[4]**2+B[5]**2+1)}function d(B,C,w){B[0]=C[0]+w[0];B[1]=C[1]+w[1];B[2]=C[2]+w[2];B[3]=C[3]+w[3];B[4]=C[4]+w[4];B[5]=C[5]+w[5];return B}function e(B,C,w){B[0]=C[0]-w[0];B[1]=C[1]-w[1];B[2]=C[2]-w[2];B[3]=C[3]-w[3];B[4]=C[4]-w[4];B[5]=C[5]-w[5];return B}function u(B,C,w){B[0]=C[0]*w;B[1]=C[1]*w;B[2]=C[2]*w;B[3]=C[3]*w;B[4]=C[4]*w;
B[5]=C[5]*w;return B}function m(B,C,w,E){B[0]=C[0]+w[0]*E;B[1]=C[1]+w[1]*E;B[2]=C[2]+w[2]*E;B[3]=C[3]+w[3]*E;B[4]=C[4]+w[4]*E;B[5]=C[5]+w[5]*E;return B}function x(B,C){return B[0]===C[0]&&B[1]===C[1]&&B[2]===C[2]&&B[3]===C[3]&&B[4]===C[4]&&B[5]===C[5]}function A(B,C){const w=B[0],E=B[1],I=B[2],F=B[3],H=B[4];B=B[5];const K=C[0],G=C[1],L=C[2],P=C[3],R=C[4];C=C[5];return Math.abs(w-K)<=c.EPSILON*Math.max(1,Math.abs(w),Math.abs(K))&&Math.abs(E-G)<=c.EPSILON*Math.max(1,Math.abs(E),Math.abs(G))&&Math.abs(I-
L)<=c.EPSILON*Math.max(1,Math.abs(I),Math.abs(L))&&Math.abs(F-P)<=c.EPSILON*Math.max(1,Math.abs(F),Math.abs(P))&&Math.abs(H-R)<=c.EPSILON*Math.max(1,Math.abs(H),Math.abs(R))&&Math.abs(B-C)<=c.EPSILON*Math.max(1,Math.abs(B),Math.abs(C))}var D=Object.freeze({__proto__:null,copy:z,identity:y,set:r,invert:t,determinant:l,multiply:v,rotate:q,scale:g,translate:k,fromRotation:n,fromScaling:h,fromTranslation:f,str:b,frob:a,add:d,subtract:e,multiplyScalar:u,multiplyScalarAndAdd:m,exactEquals:x,equals:A,mul:v,
sub:e});p.add=d;p.copy=z;p.determinant=l;p.equals=A;p.exactEquals=x;p.frob=a;p.fromRotation=n;p.fromScaling=h;p.fromTranslation=f;p.identity=y;p.invert=t;p.mat2d=D;p.mul=v;p.multiply=v;p.multiplyScalar=u;p.multiplyScalarAndAdd=m;p.rotate=q;p.scale=g;p.set=r;p.str=b;p.sub=e;p.subtract=e;p.translate=k})},"esri/chunks/mat2df32":function(){define(["exports"],function(p){function c(){const q=new Float32Array(6);q[0]=1;q[3]=1;return q}function z(q){const g=new Float32Array(6);g[0]=q[0];g[1]=q[1];g[2]=q[2];
g[3]=q[3];g[4]=q[4];g[5]=q[5];return g}function y(q,g,k,n,h,f){const b=new Float32Array(6);b[0]=q;b[1]=g;b[2]=k;b[3]=n;b[4]=h;b[5]=f;return b}function r(q,g){return new Float32Array(q,g,6)}function t(q,g,k,n){const h=g[n];g=g[n+1];q[n]=k[0]*h+k[2]*g+k[4];q[n+1]=k[1]*h+k[3]*g+k[5]}function l(q,g,k,n=0,h=0,f=2){for(h=h||g.length/f;n<h;n++)t(q,g,k,n*f)}var v=Object.freeze({__proto__:null,create:c,clone:z,fromValues:y,createView:r,transform:t,transformMany:l});p.clone=z;p.create=c;p.createView=r;p.fromValues=
y;p.mat2df32=v;p.transform=t;p.transformMany=l})},"esri/chunks/vec2f32":function(){define(["exports"],function(p){function c(){return new Float32Array(2)}function z(b){const a=new Float32Array(2);a[0]=b[0];a[1]=b[1];return a}function y(b,a){const d=new Float32Array(2);d[0]=b;d[1]=a;return d}function r(b,a){return new Float32Array(b,a,2)}function t(){return c()}function l(){return y(1,1)}function v(){return y(1,0)}function q(){return y(0,1)}const g=c(),k=l(),n=v(),h=q();var f=Object.freeze({__proto__:null,
create:c,clone:z,fromValues:y,createView:r,zeros:t,ones:l,unitX:v,unitY:q,ZEROS:g,ONES:k,UNIT_X:n,UNIT_Y:h});p.ONES=k;p.UNIT_X=n;p.UNIT_Y=h;p.ZEROS=g;p.clone=z;p.create=c;p.createView=r;p.fromValues=y;p.ones=l;p.unitX=v;p.unitY=q;p.vec2f32=f;p.zeros=t})},"esri/views/2d/engine/webgl/collisions/BoundingBox":function(){define(["../../../../../chunks/_rollupPluginBabelHelpers","../../../../../core/mathUtils","../../../../../chunks/vec2f32"],function(p,c,z){return function(){function y(t,l,v,q){this.center=
z.fromValues(t,l);this.centerT=z.create();this.halfWidth=v/2;this.halfHeight=q/2;this.width=v;this.height=q}var r=y.prototype;r.clone=function(){return new y(this.x,this.y,this.width,this.height)};r.serialize=function(t){t.writeF32(this.center[0]);t.writeF32(this.center[1]);t.push(this.width);t.push(this.height);return t};r.findCollisionDelta=function(t,l=4){return c.log2(Math.min((t.halfWidth+this.halfWidth+l)/Math.abs(t.centerT[0]-this.centerT[0]),(t.halfHeight+this.halfHeight+l)/Math.abs(t.centerT[1]-
this.centerT[1])))};r.extend=function(t){const l=Math.min(this.xmin,t.xmin),v=Math.min(this.ymin,t.ymin),q=Math.max(this.xmax,t.xmax)-l;t=Math.max(this.ymax,t.ymax)-v;this.width=q;this.height=t;this.halfWidth=q/2;this.halfHeight=t/2;this.x=l+q/2;this.y=v+t/2};y.deserialize=function(t){const l=t.readF32(),v=t.readF32(),q=t.readInt32();t=t.readInt32();return new y(l,v,q,t)};p._createClass(y,[{key:"x",get:function(){return this.center[0]},set:function(t){this.center[0]=t}},{key:"y",get:function(){return this.center[1]},
set:function(t){this.center[1]=t}},{key:"blX",get:function(){return this.center[0]+this.halfWidth}},{key:"blY",get:function(){return this.center[1]+this.halfHeight}},{key:"trX",get:function(){return this.center[0]-this.halfWidth}},{key:"trY",get:function(){return this.center[1]-this.halfHeight}},{key:"xmin",get:function(){return this.x-this.halfWidth}},{key:"xmax",get:function(){return this.x+this.halfWidth}},{key:"ymin",get:function(){return this.y-this.halfHeight}},{key:"ymax",get:function(){return this.y+
this.halfHeight}}]);return y}()})},"esri/views/2d/engine/webgl/mesh/templates/WGLMeshTemplate":function(){define(["../../../../../../core/maybe","../../../../../../symbols/cim/effects/CIMEffectHelper"],function(p,c){return function(){function z(){}var y=z.prototype;y.bindFeature=function(r,t,l){};y.write=function(r,t,l){if(p.isNone(this._effects))return this._write(r,t);l=c.CIMEffectHelper.executeEffects(this._effects,t.readLegacyGeometry());let v=c.CIMEffectHelper.next(l);for(;v;)this._write(r,t,
v),v=c.CIMEffectHelper.next(l)};y._write=function(r,t,l){};return z}()})},"esri/symbols/cim/effects/CIMEffectHelper":function(){define(["exports","../CIMCursor","../CIMEffects","../CIMOperators"],function(p,c,z,y){const r=96/72;let t=function(){function l(){}l.executeEffects=function(v,q){q=c.cloneAndDecodeGeometry(q);q=new z.SimpleGeometryCursor(q);for(const g of v)(v=y.getEffectOperator(g))&&(q=v.execute(q,g,r));return q};l.next=function(v){v=v.next();c.deltaEncodeGeometry(v);return v};return l}();
p.CIMEffectHelper=t;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/symbols/cim/CIMEffects":function(){define(["exports","../../core/lang"],function(p,c){let z=function(){function y(r){this._geometry=r}y.prototype.next=function(){const r=this._geometry;this._geometry=null;return r};return y}();p.SimpleGeometryCursor=z;p.clone=function(y){return c.clone(y)};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/views/2d/engine/webgl/util/BidiText":function(){define(["exports","../../../../../core/BidiEngine"],
function(p,c){const z=new c;p.bidiText=function(y){if(!z.hasBidiChar(y))return[y,!1];let r;r="rtl"===z.checkContextual(y)?"IDNNN":"ICNNN";return[z.bidiTransform(y,r,"VLYSN"),!0]};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/views/2d/engine/webgl/mesh/templates/WGLMarkerTemplate":function(){define("../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/maybe ../../../../../../core/screenUtils ../../../../../../chunks/mat2df32 ../../../../../../chunks/vec2f32 ../../color ../../definitions ../../number ../../materialKey/MaterialKey ./util ./WGLBaseMarkerTemplate ./WGLMeshTemplate".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k,n){return function(h){function f(b,a,d,e,u,m,x,A,D,B,C,w,E,I,F,H,K,G,L,P,R,S,M){var V=h.call(this)||this;V.angle=e;V.height=x;V.width=m;V.xOffset=a*L;V.yOffset=d*L;V._markerPlacement=P;V._effects=R;V._anchorX=.5-(.5+H)*F.width/F.width;V._anchorY=.5-(.5+K)*F.height/F.height;V._minMaxZoom=v.i1616to32(Math.round(S*l.MIN_MAX_ZOOM_PRECISION_FACTOR),Math.round(M*l.MIN_MAX_ZOOM_PRECISION_FACTOR));a=(1===I?1:0)|(C?1:0)<<1|(E?1:0)<<2|(w?1:0)<<3;d=F&&F.sdf;b=q.MarkerMaterialKey.load(b);
b.sdf=d;b.pattern=!0;b.textureBinding=F.textureBinding;V._materialKey=b.data;V._fillColor=u;V._outlineColor=D;V._sizeOutlineWidth=v.i8888to32(Math.round(Math.min(Math.sqrt(128*m),255)),Math.round(Math.min(Math.sqrt(128*x),255)),Math.round(Math.min(Math.sqrt(128*B),255)),Math.round(Math.min(Math.sqrt(128*A),255)));u=F.rect.x+l.SPRITE_PADDING;A=F.rect.y+l.SPRITE_PADDING;D=u+F.width;F=A+F.height;V._offsets.xUpperLeft=u;V._offsets.yUpperLeft=A;V._offsets.xUpperRight=D;V._offsets.yUpperRight=A;V._offsets.xBottomLeft=
u;V._offsets.yBottomLeft=F;V._offsets.xBottomRight=D;V._offsets.yBottomRight=F;V._texUpperLeft=v.i1616to32(u,A);V._texUpperRight=v.i1616to32(D,A);V._texBottomLeft=v.i1616to32(u,F);V._texBottomRight=v.i1616to32(D,F);m=m*G*L;x=x*G*L;V._bitestAndDistRatio=v.i1616to32(a,Math.round(64*G));V._computedWidth=m;V._computedHeight=x;m=r.create();x=y.create();V._applyTransformation(x,m);return V}p._inheritsLoose(f,h);f.fromCIMMarker=function(b,a,d){const e=b.size,u=(a&&a.width||1)/(a&&a.height||1)*b.scaleX;var m=
b.scaleSymbolsProportionally&&b.frameHeight?e/b.frameHeight:1;const x=t.premultiplyAlphaRGBA(b.color),A=t.premultiplyAlphaRGBA(b.outlineColor),D=z.pt2px(e),B=D*u,C=z.pt2px(b.offsetX||0),w=z.pt2px(b.offsetY||0);m*=z.pt2px(b.outlineWidth||0);const E=b.alignment||0,I=z.pt2px(b.referenceSize),[F,H]=g.getMinMaxZoom(b.scaleInfo,d);d=b.rotation||0;b.rotateClockwise||(d=-d);let K=0,G=0;const L=b.anchorPoint;L&&(b.isAbsoluteAnchorPoint?e&&(K=-L.x/(e*u),G=L.y/e):(K=L.x,G=L.y));a=new f(b.materialKey,C,w,d,x,
B,D,I,A,m,b.colorLocked,b.scaleSymbolsProportionally,!1,E,a,K,G,b.sizeRatio,c.unwrapOr(b.scaleFactor,1),b.markerPlacement,b.effects,F,H);a._vertexBoundsScaleX=b.maxVVSize?b.maxVVSize/B:1;a._vertexBoundsScaleY=b.maxVVSize?b.maxVVSize/D:1;return a};f.fromPictureMarker=function(b,a){const d=Math.round(z.pt2px(b.width)),e=Math.round(z.pt2px(b.height)),u=l.PICTURE_FILL_COLOR,m=Math.round(z.pt2px(b.xoffset||0)),x=Math.round(z.pt2px(b.yoffset||0));a=new f(b.materialKey,m,x,b.angle,u,d,e,e,0,0,!1,!1,!1,0,
a,0,0,1,1,null,null,g.DEFAULT_MIN_ZOOM,g.DEFAULT_MAX_ZOOM);a._vertexBoundsScaleX=b.maxVVSize?b.maxVVSize/b.width:1;a._vertexBoundsScaleY=b.maxVVSize?b.maxVVSize/b.height:1;return a};f.fromSimpleMarker=function(b,a){const d=t.premultiplyAlphaRGBAArray(b.color),e=Math.round(z.pt2px(b.size)),u=Math.round(z.pt2px(b.xoffset||0)),m=Math.round(z.pt2px(b.yoffset||0)),x=b.style;var A=b.outline;const D=(A&&A.color&&t.premultiplyAlphaRGBAArray(A.color))|0;A=(A&&A.width&&Math.round(z.pt2px(A.width)))|0;a=new f(b.materialKey,
u,m,b.angle,d,e,e,e,D,A,!1,!1,"esriSMSCross"===x||"esriSMSX"===x,0,a,0,0,1.96875,1,null,null,g.DEFAULT_MIN_ZOOM,g.DEFAULT_MAX_ZOOM);a.boundsType="esriSMSCircle"===x?"circle":"square";a._vertexBoundsScaleX=b.maxVVSize?b.maxVVSize/b.size:1;a._vertexBoundsScaleY=b.maxVVSize?b.maxVVSize/b.size:1;return a};f.fromLineSymbolMarker=function(b,a){const d=t.premultiplyAlphaRGBAArray(b.color),e=Math.round(z.pt2px(6*b.lineWidth)),u="cross"===b.style||"x"===b.style;switch(b.placement){case "begin-end":var m="Both";
break;case "begin":m="JustBegin";break;case "end":m="JustEnd";break;default:m="None"}m={type:"CIMMarkerPlacementAtExtremities",angleToLine:!0,offset:0,extremityPlacement:m,offsetAlongLine:0};a=new f(b.materialKey,0,0,0,d,e,e,e/6,d,u?Math.round(z.pt2px(b.lineWidth)):0,!1,!1,u,1,a,0,0,1.96875,1,m,null,g.DEFAULT_MIN_ZOOM,g.DEFAULT_MAX_ZOOM);a.boundsType="circle"===b.style?"circle":"square";return a};return f}(k(n))})},"esri/views/2d/engine/webgl/mesh/templates/WGLBaseMarkerTemplate":function(){define("../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/maybe ../../../../../../core/screenUtils ../../../../../../chunks/mat2d ../../../../../../chunks/mat2df32 ../../../../../../chunks/vec2 ../../../../../../chunks/vec2f32 ../../../../../../layers/graphics/featureConversionUtils ../../../../../../symbols/cim/placements/CIMMarkerPlacementHelper ../../enums ../../number".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k){const n=3.14159265359/180;return h=>function(f){function b(...d){d=f.call(this,...d)||this;d.angle=0;d.xOffset=0;d.yOffset=0;d.width=0;d.height=0;d.boundsType="square";d._anchorX=0;d._anchorY=0;d._computedWidth=0;d._computedHeight=0;d._vertexBoundsScaleX=1;d._vertexBoundsScaleY=1;d._offsets={xUpperLeft:0,yUpperLeft:0,xUpperRight:0,yUpperRight:0,xBottomLeft:0,yBottomLeft:0,xBottomRight:0,yBottomRight:0};d.geometryType=g.WGLGeometryType.MARKER;return d}p._inheritsLoose(b,
f);var a=b.prototype;a._write=function(d,e,u){const m=e.getDisplayId();d.recordStart(m,this._materialKey,this.geometryType,!1,!0);this._writeGeometry(d,e,m,u);d.recordEnd()};a._writeGeometry=function(d,e,u,m){if(c.isSome(this._markerPlacement))return this._writePlacedMarkers(d,e,m);if(e=m?v.deltaDecodeGeometry(v.convertFromGeometry(m),2):"esriGeometryPolygon"===e.geometryType?e.readCentroid():e.readUnquantizedGeometry()){if(e.isPoint){const [x,A]=e.coords;return!d.hasAggregates&&d.hasPixelBufferEnabled&&
(-1>x||513<=x||-1>A||513<=A)?void 0:this._writeVertices(d,u,this._getPos(x,A),x,A)}e.forEachVertex((x,A)=>this._writeVertices(d,u,this._getPos(x,A),x,A))}};a._writePlacedMarkers=function(d,e,u){u=null!=u?u:e.readLegacyGeometry();if(u=q.CIMMarkerPlacementHelper.getPlacement(u,c.unwrap(this._markerPlacement),z.pt2px(1))){e=e.getDisplayId();for(var m=l.create(),x=r.create(),A=u.next();null!=A;){const {tx:D,ty:B}=A;-128<=D&&640>=D&&-128<=B&&640>=B&&(this._applyTransformation(x,m,A.getAngle()/n),this._writeVertices(d,
e,this._getPos(D,B),D,B));A=u.next()}}};a._writeVertices=function(d,e,u,m,x){const A=d.vertexCount();d.vertexBounds(m+this.xOffset,x-this.yOffset,this._computedWidth*this._vertexBoundsScaleX,this._computedHeight*this._vertexBoundsScaleY);d.vertexWrite(u);d.vertexWrite(this._offsetUpperLeft);d.vertexWrite(this._texUpperLeft);d.vertexWrite(this._bitestAndDistRatio);d.vertexWrite(e);d.vertexWrite(this._fillColor);d.vertexWrite(this._outlineColor);d.vertexWrite(this._sizeOutlineWidth);d.vertexWrite(this._minMaxZoom);
d.vertexEnd();d.vertexWrite(u);d.vertexWrite(this._offsetUpperRight);d.vertexWrite(this._texUpperRight);d.vertexWrite(this._bitestAndDistRatio);d.vertexWrite(e);d.vertexWrite(this._fillColor);d.vertexWrite(this._outlineColor);d.vertexWrite(this._sizeOutlineWidth);d.vertexWrite(this._minMaxZoom);d.vertexEnd();d.vertexWrite(u);d.vertexWrite(this._offsetBottomLeft);d.vertexWrite(this._texBottomLeft);d.vertexWrite(this._bitestAndDistRatio);d.vertexWrite(e);d.vertexWrite(this._fillColor);d.vertexWrite(this._outlineColor);
d.vertexWrite(this._sizeOutlineWidth);d.vertexWrite(this._minMaxZoom);d.vertexEnd();d.vertexWrite(u);d.vertexWrite(this._offsetBottomRight);d.vertexWrite(this._texBottomRight);d.vertexWrite(this._bitestAndDistRatio);d.vertexWrite(e);d.vertexWrite(this._fillColor);d.vertexWrite(this._outlineColor);d.vertexWrite(this._sizeOutlineWidth);d.vertexWrite(this._minMaxZoom);d.vertexEnd();d.indexWrite(A+0);d.indexWrite(A+1);d.indexWrite(A+2);d.indexWrite(A+1);d.indexWrite(A+3);d.indexWrite(A+2)};a._applyTransformation=
function(d,e,u=0){y.identity(d);y.translate(d,d,l.fromValues(this.xOffset,-this.yOffset));0!==this.angle+u&&y.rotate(d,d,n*(this.angle+u));u=this._computedWidth;const m=this._computedHeight,x=(this._anchorX-.5)*u,A=(this._anchorY-.5)*m;t.set(e,x,A);t.transformMat2d(e,e,d);this._offsetUpperLeft=k.i1616to32(16*e[0],16*e[1]);this._offsets.xUpperLeft=e[0];this._offsets.yUpperLeft=e[1];t.set(e,x+u,A);t.transformMat2d(e,e,d);this._offsetUpperRight=k.i1616to32(16*e[0],16*e[1]);this._offsets.xUpperRight=
e[0];this._offsets.yUpperRight=e[1];t.set(e,x,A+m);t.transformMat2d(e,e,d);this._offsetBottomLeft=k.i1616to32(16*e[0],16*e[1]);this._offsets.xBottomLeft=e[0];this._offsets.yBottomLeft=e[1];t.set(e,x+u,A+m);t.transformMat2d(e,e,d);this._offsetBottomRight=k.i1616to32(16*e[0],16*e[1]);this._offsets.xBottomRight=e[0];this._offsets.yBottomRight=e[1]};a._getPos=function(d,e){return k.i1616to32(Math.round(8*d),Math.round(8*e))};return b}(h)})},"esri/views/2d/engine/webgl/mesh/templates/WGLTemplateStore":function(){define("exports ../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/Error ../../../../../../core/Logger ../../../../../../core/promiseUtils ../../../../../../symbols/support/defaults ./WGLDynamicFillTemplate ./WGLDynamicLineTemplate ./WGLDynamicMarkerTemplate ./WGLDynamicTextTemplate ./WGLFillTemplate ./WGLLineTemplate ./WGLMarkerTemplate ./WGLTextTemplate ../../util/Lock ../../util/Result ../../../../layers/features/schemaUtils ../../../../layers/features/textUtils".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k,n,h,f,b,a,d,e){function u(D,B){const C=D.length;D.push(null);B.then(w=>D[C]=w);return D}function m(D){return!!(D&1)}const x=y.getLogger("esri.views.2d.engine.webgl.mesh.templates.WGLTemplateStore"),A=[];y=function(){function D(C,w){this._templateIdCounter=this._idCounter=1;this._idToTemplateGroup=new Map;this._symbolToTemplate=new Map;this._fetchQueue=[];this._idToResolver=new Map;this._cimTemplateCache=new Map;this._cimAnalyses=[];this._lock=new b["default"];this._fetchResource=
C;this._tileInfo=w}var B=D.prototype;B.createTemplateGroup=function(C,w){this._initErrorTemplates();const E=C.hash;if(this._symbolToTemplate.has(E))return this._symbolToTemplate.get(E);const I=[];w&&this._createMeshTemplates(I,w,!0);this._createMeshTemplates(I,C,!1);C=this._createGroupId("expanded-cim"===C.type);this._idToTemplateGroup.set(C,I);this._symbolToTemplate.set(E,C);return C};B.getTemplateGroup=function(C){return this._idToTemplateGroup.has(C)?this._idToTemplateGroup.get(C):A};B.getDynamicTemplateGroup=
function(C){if(!this._idToTemplateGroup.has(C))return A;m(C)||x.error("mapview-template-store",`Id ${C} does not refer to a dynamic template`);return this._idToTemplateGroup.get(C)};B.getMosaicItem=function(C,w){const E=this._createTemplateId(),I=new Promise(F=>this._idToResolver.set(E,F));this._fetchQueue.push({symbol:C,id:E,glyphIds:w});return I};B.finalize=function(C){return this._fetchQueue.length||this._lock.isHeld()?b.withLock(this._lock,this._fetchAllQueuedResources.bind(this),C):Promise.resolve()};
B._initErrorTemplates=function(){this._errorTemplates||(this._errorTemplates={fill:this._createMeshTemplates([],d.createSymbolSchema(t.errorPolygonSymbol2D),!1),marker:this._createMeshTemplates([],d.createSymbolSchema(t.errorPointSymbol2D),!1),line:this._createMeshTemplates([],d.createSymbolSchema(t.errorPolylineSymbol2D),!1)})};B._fetchAllQueuedResources=function(C){if(!this._fetchQueue.length)return Promise.resolve();const w=this._fetchQueue,E=this._cimAnalyses;this._fetchQueue=[];this._cimAnalyses=
[];return Promise.all(E).then(()=>this._fetchResource(w,C).then(I=>{for(const {id:F,mosaicItem:H}of I)this._idToResolver.get(F)(H),this._idToResolver.delete(F)})).catch(I=>{r.isAbortError(I)?this._fetchQueue=this._fetchQueue.concat(w):"worker:port-closed"!==I.name&&x.error(new z("mapview-template-store","Unable to fetch requested texture resources",I))})};B._createGroupId=function(C){return this._idCounter++<<1|(C?1:0)};B._createTemplateId=function(){return this._templateIdCounter++};B._createSMS=
function(){var C=c._asyncToGenerator(function*(w){const {spriteMosaicItem:E}=yield this.getMosaicItem(w);return a.ok(E,x)?h.fromSimpleMarker(w,E):this._markerError});return function(w){return C.apply(this,arguments)}}();B._createPMS=function(){var C=c._asyncToGenerator(function*(w){const {spriteMosaicItem:E}=yield this.getMosaicItem(w);return a.ok(E,x)?h.fromPictureMarker(w,E):this._markerError});return function(w){return C.apply(this,arguments)}}();B._createSFS=function(){var C=c._asyncToGenerator(function*(w,
E){const {spriteMosaicItem:I}=yield this.getMosaicItem(w);return a.ok(I,x)?k.fromSimpleFill(w,I,E):this._fillError});return function(w,E){return C.apply(this,arguments)}}();B._createPFS=function(){var C=c._asyncToGenerator(function*(w,E){const {spriteMosaicItem:I}=yield this.getMosaicItem(w);return a.ok(I,x)?k.fromPictureFill(w,I,E):this._fillError});return function(w,E){return C.apply(this,arguments)}}();B._createSLS=function(){var C=c._asyncToGenerator(function*(w,E){({spriteMosaicItem:E}=yield this.getMosaicItem(w));
return a.ok(E,x)?n.fromSimpleLine(w,E):this._lineError});return function(w,E){return C.apply(this,arguments)}}();B._createLMS=function(){var C=c._asyncToGenerator(function*(w){const {spriteMosaicItem:E}=yield this.getMosaicItem(w);return a.ok(E,x)?h.fromLineSymbolMarker(w,E):this._markerError});return function(w){return C.apply(this,arguments)}}();B._createTS=function(){var C=c._asyncToGenerator(function*(w){const {glyphMosaicItems:E}=yield this.getMosaicItem(w);return f.fromText(w,E)});return function(w){return C.apply(this,
arguments)}}();B._createCIMText=function(){var C=c._asyncToGenerator(function*(w){const {glyphMosaicItems:E}=yield this.getMosaicItem(w.cim,e.codepoints(w.text));return a.ok(E,x)?f.fromCIMText(w,E,this._tileInfo):this._textError});return function(w){return C.apply(this,arguments)}}();B._createCIMFill=function(){var C=c._asyncToGenerator(function*(w){const {spriteMosaicItem:E}=yield this.getMosaicItem(w.cim);return a.ok(E,x)?k.fromCIMFill(w,E,this._tileInfo):this._fillError});return function(w){return C.apply(this,
arguments)}}();B._createCIMLine=function(){var C=c._asyncToGenerator(function*(w){const {spriteMosaicItem:E}=yield this.getMosaicItem(w.cim);return a.ok(E,x)?n.fromCIMLine(w,E,this._tileInfo):this._lineError});return function(w){return C.apply(this,arguments)}}();B._createCIMMarker=function(){var C=c._asyncToGenerator(function*(w){const {spriteMosaicItem:E}=yield this.getMosaicItem(w.cim);return a.ok(E,x)?h.fromCIMMarker(w,E,this._tileInfo):this._markerError});return function(w){return C.apply(this,
arguments)}}();B._createCIM=function(){var C=c._asyncToGenerator(function*(w){const E=w.templateHash;if(this._cimTemplateCache.has(E))return this._cimTemplateCache.get(E);w={...w,cim:{...w.cim,mosaicHash:w.materialHash}};let I;switch(w.type){case "marker":I=this._createCIMMarker(w);break;case "line":I=this._createCIMLine(w);break;case "fill":I=this._createCIMFill(w);break;case "text":I=this._createCIMText(w)}I.then(F=>this._cimTemplateCache.set(E,F));return I});return function(w){return C.apply(this,
arguments)}}();B._createDynamicCIM=function(C){const w=C.templateHash;if(this._cimTemplateCache.has(w))return this._cimTemplateCache.get(w);let E;switch(C.type){case "marker":E=q.fromCIMMarker(C,this._tileInfo);break;case "line":E=v.fromCIMLine(C,this._tileInfo);break;case "fill":E=l.fromCIMFill(C,this._tileInfo);break;case "text":E=g.fromCIMText(C,this._tileInfo)}this._cimTemplateCache.set(w,E);return E};B._createPrimitiveMeshTemplates=function(C,w,E){switch(w.type){case "esriSMS":return u(C,this._createSMS(w));
case "esriPMS":return u(C,this._createPMS(w));case "esriSFS":return u(C,this._createSFS(w,E));case "line-marker":return u(C,this._createLMS(w));case "esriPFS":return u(C,this._createPFS(w,E));case "esriSLS":return u(C,this._createSLS(w,!1));case "esriTS":return u(C,this._createTS(w));default:return x.error("Unable to create mesh template for unknown symbol type {: $ }{symbol.type}"),C}};B._createMeshTemplates=function(C,w,E){if(-1!==w.type.indexOf("3d"))return x.error("3D symbols are not supported with MapView"),
C;if("expanded-cim"===w.type){for(const I of w.layers)"function"===typeof I.materialHash?C.push(this._createDynamicCIM(I)):u(C,this._createCIM(I));return C}if("composite-symbol"===w.type){for(const I of w.layers)this._createPrimitiveMeshTemplates(C,I,E);return C}return"cim"===w.type||"label"===w.type||"web-style"===w.type?C:this._createPrimitiveMeshTemplates(C,w,E)};c._createClass(D,[{key:"_markerError",get:function(){return this._errorTemplates.marker[0]}},{key:"_fillError",get:function(){return this._errorTemplates.fill[0]}},
{key:"_lineError",get:function(){return this._errorTemplates.line[0]}},{key:"_textError",get:function(){return this._errorTemplates.line[0]}}]);return D}();p.WGLTemplateStore=y;p.isDynamicId=m;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/symbols/support/defaults":function(){define("exports ../../core/has ../../core/maybe ../SimpleFillSymbol ../SimpleLineSymbol ../SimpleMarkerSymbol ../TextSymbol ./defaultsJSON".split(" "),function(p,c,z,y,r,t,l,v){const q=t.fromJSON(v.defaultPointSymbolJSON),
g=r.fromJSON(v.defaultPolylineSymbolJSON),k=y.fromJSON(v.defaultPolygonSymbolJSON);c=l.fromJSON(v.defaultTextSymbolJSON);t=t.fromJSON(v.errorPointSymbolJSON);r=r.fromJSON(v.errorPolylineSymbolJSON);y=y.fromJSON(v.errorPolygonSymbolJSON);p.defaultPointSymbol2D=q;p.defaultPolygonSymbol2D=k;p.defaultPolylineSymbol2D=g;p.defaultTextSymbol2D=c;p.errorPointSymbol2D=t;p.errorPolygonSymbol2D=y;p.errorPolylineSymbol2D=r;p.getDefaultSymbol2D=function(n){if(z.isNone(n))return null;switch(n.type){case "point":case "multipoint":return q;
case "polyline":return g;case "polygon":case "extent":return k}return null};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/views/2d/engine/webgl/mesh/templates/WGLDynamicFillTemplate":function(){define("../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/mathUtils ../../../../../../core/screenUtils ../../color ../../definitions ../../GeometryUtils ../../number ../../materialKey/MaterialKey ./util ./WGLBaseFillTemplate ./WGLDynamicMeshTemplate ../../util/Result".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k,n){return function(h){function f(b,a,d){var e;var u=h.call(this,b)||this;u._minMaxZoom=l.i1616to32(Math.round(a*r.MIN_MAX_ZOOM_PRECISION_FACTOR),Math.round(d*r.MIN_MAX_ZOOM_PRECISION_FACTOR));q.isFunction(b.color)?u._dynamicPropertyMap.set("fillColor",(w,E,I)=>(w=b.color(w,E,I))&&y.premultiplyAlphaRGBA(w)||0):(a=b.color,u.fillColor=a&&y.premultiplyAlphaRGBA(a)||0);let m=0;q.isFunction(b.height)||(m=b.height||0);const x="CIMMarkerPlacementInsidePolygon"===(null==(e=b.cim.placement)?
void 0:e.type)&&b.cim.placement.shiftOddRows?2:1;u._dynamicPropertyMap.set("_height",(w,E,I)=>q.isFunction(b.height)?b.height(w,E,I)*x:m*x);let A=0;q.isFunction(b.offsetX)||(A=z.pt2px(b.offsetX||0)+128,255<A&&(A=255));u._dynamicPropertyMap.set("_offsetX",(w,E,I)=>q.isFunction(b.offsetX)?(w=z.pt2px(b.offsetX(w,E,I))+128,255<w&&(w=255),w):A);let D=1;q.isFunction(b.scaleX)||(D=b.scaleX||1);u._dynamicPropertyMap.set("_scaleX",(w,E,I)=>q.isFunction(b.scaleX)?b.scaleX(w,E,I):D);let B=0;q.isFunction(b.offsetY)||
(B=z.pt2px(-b.offsetY||0)+128,255<B&&(B=255));u._dynamicPropertyMap.set("_offsetY",(w,E,I)=>q.isFunction(b.offsetY)?(w=z.pt2px(-b.offsetY(w,E,I))+128,255<w&&(w=255),w):B);let C=0;q.isFunction(b.angle)||(C=t.radToByte(b.angle)||0);u._dynamicPropertyMap.set("_angle",(w,E,I)=>q.isFunction(b.angle)?t.radToByte(b.angle(w,E,I)):C);u._effects=b.effects;u._cimFillLayer=b;u._fillMaterialKey=v.FillMaterialKey.load(b.materialKey);return u}p._inheritsLoose(f,h);f.fromCIMFill=function(b,a){const [d,e]=q.getMinMaxZoom(b.scaleInfo,
a);return new f(b,d,e)};f.prototype.bindFeature=function(b,a,d){const e=b.readLegacyFeature();this._dynamicPropertyMap.forEach((x,A)=>{this[A]=x(e,a,d)});b=this._fillMaterialKey;var u=this._materialCache,m=this._cimFillLayer;this.aux3=l.i8888to32(0,0,this._angle,m.colorLocked?1:0);m=m.materialHash;m=m(e,a,d);m=u.get(m);u=null;m&&n.ok(m.spriteMosaicItem)&&(u=m.spriteMosaicItem);if(u){const {rect:x,width:A,height:D}=u;m=x.x+r.SPRITE_PADDING;const B=x.y+r.SPRITE_PADDING,C=m+A,w=B+D;let E=c.nextHighestPowerOfTwo(z.pt2px(this._height));
255<E?E=255:0>=E&&(E=c.nextHighestPowerOfTwo(w-B));let I=c.nextHighestPowerOfTwo(z.pt2px(this._height/D*A||0));255<I?I=255:0>=I&&(I=c.nextHighestPowerOfTwo(C-m));const F=this._scaleX;this.tl=l.i1616to32(m,B);this.br=l.i1616to32(C,w);this.aux1=l.i8888to32(I,E,this._offsetX,this._offsetY);this.aux2=l.i1616to32(128*F,128);b.sdf=u.sdf;b.pattern=!0;b.textureBinding=u.textureBinding}else this.aux2=this.aux1=this.br=this.tl=0,b.sdf=!1,b.pattern=!1,b.textureBinding=0;this._materialKey=b.data};return f}(g(k))})},
"esri/views/2d/engine/webgl/mesh/templates/WGLBaseFillTemplate":function(){define("../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/maybe ../../../../../../layers/graphics/featureConversionUtils ../../enums ../../number ../../materialKey/MaterialKey ./templateUtils".split(" "),function(p,c,z,y,r,t,l){return v=>function(q){function g(...n){n=q.call(this,...n)||this;n.forceLibtess=!1;n.geometryType=y.WGLGeometryType.FILL;return n}p._inheritsLoose(g,q);var k=g.prototype;k._write=
function(n,h,f){const b="esriGeometryPoint"===h.geometryType,a=t.FillMaterialKey.load(this._materialKey);n.recordStart(h.getDisplayId(),this._materialKey,this.geometryType,a.dotDensity,b);this._writeGeometry(n,h,a,f,b);n.recordEnd()};k._writeGeometry=function(n,h,f,b,a){a=this._getGeometry(h,b,a);if(!c.isNone(a))if(b=n.indexCount(),1E3<a.lengths[0]||this.forceLibtess||!l.triangulate(n,a)){a=l.triangulateLibtess(n,a);var d=n.indexCount();b!==d&&this._writeVertices(n,h,a,[a.length/2],f)}else d=n.indexCount(),
b!==d&&this._writeVertices(n,h,a.coords,a.lengths,f)};k._writeVertices=function(n,h,f,b,a){const d=h.getDisplayId();let e=0;for(const m of b){var u=e;for(b=m+e;u<b;u++){const x=f[2*u],A=f[2*u+1],D=r.i1616to32(1*x,1*A);n.vertexBounds(x,A,0,0);n.vertexWrite(D);n.vertexWrite(d);a.dotDensity?n.vertexWriteF32(1/Math.abs(h.readGeometryArea())):(n.vertexWrite(this.fillColor),n.vertexWrite(this.tl),n.vertexWrite(this.br),n.vertexWrite(this.aux1),n.vertexWrite(this.aux2),n.vertexWrite(this.aux3),n.vertexWrite(this._minMaxZoom))}e+=
m}};k._getGeometry=function(n,h,f){return(n=h?z.deltaDecodeGeometry(z.convertFromGeometry(h),2):n.readUnquantizedGeometry())?l.clipMarshall(n,f?256:128):null};return g}(v)})},"esri/views/2d/engine/webgl/mesh/templates/templateUtils":function(){define("exports ../../../../../../chunks/earcut ../../../../../../layers/graphics/OptimizedGeometry ../../definitions ../../TileClipper ../bufcut ../Tesselator".split(" "),function(p,c,z,y,r,t,l){function v(f,b,a){let d=0;for(let e=1;e<a;e++)d+=(f[2*(b+e)]-
f[2*(b+e-1)])*(f[2*(b+e)+1]+f[2*(b+e-1)+1]);return d}function q(f,b,a,d,e){let u=0;for(;a<d;a+=3){const m=2*(f.getValue(a)-e),x=2*(f.getValue(a+1)-e),A=2*(f.getValue(a+2)-e);u+=Math.abs((b[m]-b[A])*(b[x+1]-b[m+1])-(b[m]-b[x])*(b[A+1]-b[m+1]))}return u}function g(f,b,a,d,e,u,m,x){e=((f-e)*(u-x)-(b-x)*(e-m))/((f-a)*(u-x)-(b-d)*(e-m));return 0>e||1<e?null:{x:Math.round(f+e*(a-f)),y:Math.round(b+e*(d-b))}}const k=new l,n=new r.TileClipper(0,0,0,1,0),h=new r.TileClipper(0,0,0,1,0);n.setExtent(y.TILE_SIZE);
h.setExtent(y.TILE_SIZE);p.area=v;p.clip=function(f,b,a=0){const d=-a;b+=a;let e=a=0,u=0;for(let x=0;x<f.lengths.length;x++){const A=f.lengths[x],D=u+A;let B=0,C=null;for(;a!==D;){let w=f.coords[2*a],E=f.coords[2*a++ +1],I=w<d||w>=b||E<d||E>=b;for(var m=I;a!==D&&I===m;)I||(f.coords[2*e]=w,f.coords[2*e++ +1]=E,B++),w=f.coords[2*a],E=f.coords[2*a++ +1],I=w<d||w>=b||E<d||E>=b;if(a===D){I?C&&(f.coords[2*e]=C.x,f.coords[2*e++ +1]=C.y,B++):(f.coords[2*e]=w,f.coords[2*e++ +1]=E,B++);continue}m=f.coords[2*
(a-2)];const F=f.coords[2*(a-2)+1];if(m=g(m,F,w,E,d,d,b,d)||g(m,F,w,E,b,d,b,b)||g(m,F,w,E,b,b,d,b)||g(m,F,w,E,d,d,d,b))f.coords[2*e]=m.x,f.coords[2*e++ +1]=m.y,B++,C||(C=m);I||(f.coords[2*e]=w,f.coords[2*e++ +1]=E,B++)}f.lengths[x]=B;u+=A}};p.clipLinesMarshall=function(f,b){h.setPixelMargin(b);const a=-b;b=y.TILE_SIZE+b;let d=[];var e=!1;let u=0;for(;u<f.length;){const m=[],x=f[u];h.reset(2);let [A,D]=x[0];if(e)h.moveTo(A,D);else{if(A<a||A>b||D<a||D>b){e=!0;continue}m.push({x:A,y:D})}let B=!1;const C=
x.length;for(let w=1;w<C;++w)if(A+=x[w][0],D+=x[w][1],e)h.lineTo(A,D);else{if(A<a||A>b||D<a||D>b){B=!0;break}m.push({x:A,y:D})}if(B)e=!0;else{if(e){if(e=h.resultWithStarts())for(const w of e)d.push(w)}else d.push({line:m,start:0});u++;e=!1}}d=d.filter(m=>1<m.line.length);return 0===d.length?null:d};p.clipMarshall=function(f,b){a:{var a=y.TILE_SIZE+128;var d=0;for(var e=0;e<f.lengths.length;e++){var u=f.lengths[e];for(var m=0;m<u;m++){const x=f.coords[2*(m+d)],A=f.coords[2*(m+d)+1];if(-128>x||x>a||
-128>A||A>a){a=!0;break a}}d+=u}a=!1}if(!a)return f;n.setPixelMargin(b);n.reset(3);b=0;for(a=0;a<f.lengths.length;a++){d=f.lengths[a];e=f.coords[2*(0+b)];u=f.coords[2*(0+b)+1];n.moveTo(e,u);for(m=1;m<d;m++)e=f.coords[2*(m+b)],u=f.coords[2*(m+b)+1],n.lineTo(e,u);n.close();b+=d}a=n.result(!1);if(!a)return null;f=[];b=[];for(const x of a){a=0;for(const A of x)b.push(A.x),b.push(A.y),a++;f.push(a)}return new z(f,b)};p.triangleArea=q;p.triangulate=function(f,b){const {coords:a,lengths:d,hasIndeterminateRingOrder:e}=
b;b=f.indexWriter();f=f.vertexCount();if(e)return!1;const u=b.length;let m=0;for(var x=0;x<d.length;){let B=x,C=d[x];x=v(a,m,C);for(var A=[];++B<d.length;){var D=d[B];const w=v(a,m+C,D);if(!(0<w))break;x+=w;A.push(m+C);C+=D}D=b.length;t.bufcut(b,a,m,m+C,A,2,f);A=q(b,a,D,b.length,f);x=Math.abs(x);if(1E-5<Math.abs((A-x)/Math.max(1E-7,x)))return b.seek(u),!1;x=B;m+=C}return!0};p.triangulateEarcut=function(f,b,a){const {coords:d,lengths:e,hasIndeterminateRingOrder:u}=b;if(u)return!1;let m=0;for(var x=
0;x<e.length;){let D=x,B=e[x];for(x=[];++D<e.length;){var A=e[D];if(!(0<v(d,m+B,A)))break;x.push(m+B-m);B+=A}A=b.coords.slice(2*m,2*(m+B));x=c.earcut(A,x,2);for(const C of x)f.push(C+a+m);x=D;m+=B}return!0};p.triangulateLibtess=function(f,b){const a=[],d=[],e=f.indexWriter();f=f.vertexCount();const {coords:u,lengths:m}=b;k.beginPolygon(a,d);let x=0;for(let A=0;A<m.length;A++){const D=b.lengths[A];k.beginContour();for(let B=0;B<D;B++){const C=[u[2*(x+B)],u[2*(x+B)+1],0];k.addVertex(C,C)}k.endContour();
x+=D}k.endPolygon();for(b=0;b<d.length;b++)e.push(d[b]+f);return a};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/views/2d/engine/webgl/mesh/bufcut":function(){define(["exports"],function(p){function c(A,D,B,C,w,E,I){let F;B=0;for(let H=C,K=w-E;H<w;H+=E)B+=(A[K+D*E]-A[H+D*E])*(A[H+1+D*E]+A[K+1+D*E]),K=H;if(I===0<B)for(;C<w;C+=E)F=t(C+D*E,A[C+D*E],A[C+1+D*E],F);else for(w-=E;w>=C;w-=E)F=t(w+D*E,A[w+D*E],A[w+1+D*E],F);F&&a(F,F.next)&&(l(F),F=F.next);return F}function z(A,D=A){if(!A)return A;
let B;do if(B=!1,A.steiner||!a(A,A.next)&&0!==k(A.prev,A,A.next))A=A.next;else{l(A);A=D=A.prev;if(A===A.next)break;B=!0}while(B||A!==D);return D}function y(A,D,B,C,w,E,I,F){if(A){!F&&E&&(A=g(A,C,w,E));for(var H=A;A.prev!==A.next;){var K=A.prev,G=A.next;if(E)var L=r(A,C,w,E);else a:{L=A;var P=L.prev,R=L;const S=L.next;if(0<=k(P,R,S)){L=!1;break a}let M=L.next.next;const V=M;let W=0;for(;M!==L.prev&&(0===W||M!==V);){W++;if(h(P.x,P.y,R.x,R.y,S.x,S.y,M.x,M.y)&&0<=k(M.prev,M,M.next)){L=!1;break a}M=M.next}L=
!0}if(L)D.push(K.index/B+I),D.push(A.index/B+I),D.push(G.index/B+I),l(A),H=A=G.next;else if(A=G,A===H){if(!F)y(z(A),D,B,C,w,E,I,1);else if(1===F){F=D;H=B;K=I;G=A;do L=G.prev,P=G.next.next,!a(L,P)&&n(L,G,G.next,P)&&f(L,P)&&f(P,L)&&(F.push(L.index/H+K),F.push(G.index/H+K),F.push(P.index/H+K),l(G),l(G.next),G=A=P),G=G.next;while(G!==A);A=G;y(A,D,B,C,w,E,I,2)}else if(2===F)a:{F=A;do{for(H=F.next.next;H!==F.prev;){if(K=F.index!==H.index){L=L=L=void 0;K=F;G=H;if(L=K.next.index!==G.index&&K.prev.index!==
G.index){b:{L=K;do{if(L.index!==K.index&&L.next.index!==K.index&&L.index!==G.index&&L.next.index!==G.index&&n(L,L.next,K,G)){L=!0;break b}L=L.next}while(L!==K);L=!1}L=!L}if(L=L&&f(K,G)&&f(G,K)){L=K;P=!1;R=(K.x+G.x)/2;G=(K.y+G.y)/2;do L.y>G!==L.next.y>G&&L.next.y!==L.y&&R<(L.next.x-L.x)*(G-L.y)/(L.next.y-L.y)+L.x&&(P=!P),L=L.next;while(L!==K);L=P}K=L}if(K){A=e(F,H);F=z(F,F.next);A=z(A,A.next);y(F,D,B,C,w,E,I,0);y(A,D,B,C,w,E,I,0);break a}H=H.next}F=F.next}while(F!==A)}break}}}}function r(A,D,B,C){const w=
A.prev,E=A.next;if(0<=k(w,A,E))return!1;const I=w.x>A.x?w.x>E.x?w.x:E.x:A.x>E.x?A.x:E.x,F=w.y>A.y?w.y>E.y?w.y:E.y:A.y>E.y?A.y:E.y,H=b(w.x<A.x?w.x<E.x?w.x:E.x:A.x<E.x?A.x:E.x,w.y<A.y?w.y<E.y?w.y:E.y:A.y<E.y?A.y:E.y,D,B,C);D=b(I,F,D,B,C);B=A.prevZ;for(C=A.nextZ;B&&B.z>=H&&C&&C.z<=D;){if(B!==A.prev&&B!==A.next&&h(w.x,w.y,A.x,A.y,E.x,E.y,B.x,B.y)&&0<=k(B.prev,B,B.next))return!1;B=B.prevZ;if(C!==A.prev&&C!==A.next&&h(w.x,w.y,A.x,A.y,E.x,E.y,C.x,C.y)&&0<=k(C.prev,C,C.next))return!1;C=C.nextZ}for(;B&&B.z>=
H;){if(B!==A.prev&&B!==A.next&&h(w.x,w.y,A.x,A.y,E.x,E.y,B.x,B.y)&&0<=k(B.prev,B,B.next))return!1;B=B.prevZ}for(;C&&C.z<=D;){if(C!==A.prev&&C!==A.next&&h(w.x,w.y,A.x,A.y,E.x,E.y,C.x,C.y)&&0<=k(C.prev,C,C.next))return!1;C=C.nextZ}return!0}function t(A,D,B,C){A=u.create(A,D,B);C?(A.next=C.next,A.prev=C,C.next.prev=A,C.next=A):(A.prev=A,A.next=A);return A}function l(A){A.next.prev=A.prev;A.prev.next=A.next;A.prevZ&&(A.prevZ.nextZ=A.nextZ);A.nextZ&&(A.nextZ.prevZ=A.prevZ)}function v(A){let D=A,B=A;do{if(D.x<
B.x||D.x===B.x&&D.y<B.y)B=D;D=D.next}while(D!==A);return B}function q(A,D){let B=D;const C=A.x,w=A.y;let E=-Infinity,I;do{if(w<=B.y&&w>=B.next.y&&B.next.y!==B.y){var F=B.x+(w-B.y)*(B.next.x-B.x)/(B.next.y-B.y);if(F<=C&&F>E){E=F;if(F===C){if(w===B.y)return B;if(w===B.next.y)return B.next}I=B.x<B.next.x?B:B.next}}B=B.next}while(B!==D);if(!I)return null;if(C===E)return I.prev;D=I;F=I.x;const H=I.y;let K=Infinity,G;for(B=I.next;B!==D;)C>=B.x&&B.x>=F&&C!==B.x&&h(w<H?C:E,w,F,H,w<H?E:C,w,B.x,B.y)&&(G=Math.abs(w-
B.y)/(C-B.x),(G<K||G===K&&B.x>I.x)&&f(B,A)&&(I=B,K=G)),B=B.next;return I}function g(A,D,B,C){for(var w;w!==A;w=w.next){w=w||A;null===w.z&&(w.z=b(w.x,w.y,D,B,C));if(w.prev.next!==w||w.next.prev!==w)return w.prev.next=w,w.next.prev=w,g(A,D,B,C);w.prevZ=w.prev;w.nextZ=w.next}A.prevZ.nextZ=null;A.prevZ=null;a:for(B=1;;){C=A;D=A=null;let E=0;for(;C;){E++;w=C;let I=0;for(;I<B&&w;I++)w=w.nextZ;let F=B;for(;0<I||0<F&&w;){let H;0===I?(H=w,w=w.nextZ,F--):0!==F&&w?C.z<=w.z?(H=C,C=C.nextZ,I--):(H=w,w=w.nextZ,
F--):(H=C,C=C.nextZ,I--);D?D.nextZ=H:A=H;H.prevZ=D;D=H}C=w}D.nextZ=null;B*=2;if(2>E)break a}return A}function k(A,D,B){return(D.y-A.y)*(B.x-D.x)-(D.x-A.x)*(B.y-D.y)}function n(A,D,B,C){return a(A,D)&&a(B,C)||a(A,C)&&a(B,D)?!0:0<k(A,D,B)!==0<k(A,D,C)&&0<k(B,C,A)!==0<k(B,C,D)}function h(A,D,B,C,w,E,I,F){return 0<=(w-I)*(D-F)-(A-I)*(E-F)&&0<=(A-I)*(C-F)-(B-I)*(D-F)&&0<=(B-I)*(E-F)-(w-I)*(C-F)}function f(A,D){return 0>k(A.prev,A,A.next)?0<=k(A,D,A.next)&&0<=k(A,A.prev,D):0>k(A,D,A.prev)||0>k(A,A.next,
D)}function b(A,D,B,C,w){A=32767*(A-B)*w;D=32767*(D-C)*w;A=(A|A<<8)&16711935;A=(A|A<<4)&252645135;A=(A|A<<2)&858993459;D=(D|D<<8)&16711935;D=(D|D<<4)&252645135;D=(D|D<<2)&858993459;return(A|A<<1)&1431655765|((D|D<<1)&1431655765)<<1}function a(A,D){return A.x===D.x&&A.y===D.y}function d(A,D){return A.x-D.x}function e(A,D){const B=u.create(A.index,A.x,A.y),C=u.create(D.index,D.x,D.y),w=A.next,E=D.prev;A.next=D;D.prev=A;B.next=w;w.prev=B;C.next=B;B.prev=C;E.next=C;C.prev=E;return C}let u=function(){function A(){this.y=
this.x=this.index=0;this.nextZ=this.prevZ=this.z=this.next=this.prev=null;this.steiner=!1}A.create=function(D,B,C){const w=x<m.length?m[x++]:new A;w.index=D;w.x=B;w.y=C;w.prev=null;w.next=null;w.z=null;w.prevZ=null;w.nextZ=null;w.steiner=!1;return w};return A}();const m=[];let x=0;for(let A=0;8096>A;A++)m.push(new u);p.bufcut=function(A,D,B,C,w,E,I){x=0;var F=(C-B)*E,H=w&&w.length;const K=H?(w[0]-B)*E:F;var G=c(D,B,C,0,K,E,!0);if(G&&G.next!==G.prev){var L;if(H){H=[];for(let M=0,V=w.length;M<V;M++){const W=
c(D,B,C,w[M]*E,M<V-1?w[M+1]*E:C*E,E,!1);W===W.next&&(W.steiner=!0);H.push(v(W))}H.sort(d);for(var P of H){C=P;w=G;if(w=q(C,w))C=e(w,C),z(C,C.next);G=z(G,G.next)}}if(F>80*E){var R=F=D[B*E];var S=L=D[1+B*E];for(P=E;P<K;P+=E)C=D[P+B*E],w=D[P+1+B*E],R=Math.min(R,C),S=Math.min(S,w),F=Math.max(F,C),L=Math.max(L,w);L=Math.max(F-R,L-S);L=0!==L?1/L:0}y(G,A,E,R,S,L,I,0)}};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/views/2d/engine/webgl/mesh/templates/WGLDynamicMeshTemplate":function(){define(["../../../../../../chunks/_rollupPluginBabelHelpers",
"../../../../../../core/Logger","../../../../../../symbols/cim/cimAnalyzer","./WGLMeshTemplate"],function(p,c,z,y){const r=c.getLogger("esri.views.2d.engine.webgl.WGLDynamicMeshTemplate");return function(t){function l(v){var q=t.call(this)||this;q._ongoingMaterialRequestMap=new Map;q._materialCache=new Map;q._dynamicPropertyMap=new Map;q._cimLayer=v;return q}p._inheritsLoose(l,t);l.prototype.analyze=function(v,q,g,k){q=q.readLegacyFeature();const n=this._materialCache,h=this._cimLayer.materialHash;
if(!h)return r.error("A Dynamic mesh template must have a material hash value or function!"),Promise.reject(null);const f="function"===typeof h?h(q,g,k):h;if(n.has(f))return v=n.get(f),Promise.resolve(v);if(this._ongoingMaterialRequestMap.has(f))return this._ongoingMaterialRequestMap.get(f);g=z.analyzeCIMResource(this._cimLayer.cim,this._cimLayer.materialOverrides);g.mosaicHash=f;v=v.getMosaicItem(g).then(b=>{this._ongoingMaterialRequestMap.delete(f);n.set(f,b);return b}).catch(b=>{this._ongoingMaterialRequestMap.delete(f);
r.error(".analyze()",b.message);return null});this._ongoingMaterialRequestMap.set(f,v);return v};return l}(y)})},"esri/symbols/cim/cimAnalyzer":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../Color ../../core/Logger ../../core/screenUtils ../../core/string ../../support/arcadeOnDemand ./CIMSymbolHelper ./SDFHelper ./utils ../../views/2d/arcade/callExpressionWithFeature".split(" "),function(p,c,z,y,r,t,l,v,q,g,k){function n(M){switch(M){case "Butt":return 0;case "Square":return 2;
default:return 1}}function h(M){switch(M){case "Bevel":return 0;case "Miter":return 2;default:return 1}}function f(M){switch(M){default:return"left";case "Right":return"right";case "Center":return"center";case "Justify":return"justify"}}function b(M){switch(M){default:return"top";case "Center":return"middle";case "Baseline":return"baseline";case "Bottom":return"bottom"}}function a(M){let V="normal",W="normal";M&&(M=M.toLowerCase(),-1!==M.indexOf("italic")?V="italic":-1!==M.indexOf("oblique")&&(V=
"oblique"),-1!==M.indexOf("bold")?W="bold":-1!==M.indexOf("light")&&(W="lighter"));return{style:V,weight:W}}function d(M,V,W,ea){let ka;M[V]?ka=M[V]:(ka={},M[V]=ka);ka[W]=ea}function e(M){return(M=M.markerPlacement)&&M.angleToLine?1:0}function u(){u=c._asyncToGenerator(function*(M,V,W,ea){W=null!=W?W:[];if(!M)return W;let ka;const sa={};if("CIMSymbolReference"===M.type){if(ka=M.symbol,M=M.primitiveOverrides){const xa=[];for(const oa of M){var ua=oa.valueExpressionInfo;ua&&V?(ua=l.createRendererExpression(ua.expression,
V.spatialReference,V.fields).then(ra=>{ra&&d(sa,oa.primitiveName,oa.propertyName,ra)}),xa.push(ua)):null!=oa.value&&d(sa,oa.primitiveName,oa.propertyName,oa.value)}yield Promise.all(xa)}}else return S.error("Expect cim type to be 'CIMSymbolReference'"),W;switch(ka.type){case "CIMPointSymbol":case "CIMLineSymbol":case "CIMPolygonSymbol":m(ka,M,sa,V,W,ea)}return W});return u.apply(this,arguments)}function m(M,V,W,ea,ka,sa){if(M){var ua=M.symbolLayers;if(ua){var xa,oa=v.CIMSymbolHelper.getSize(M);"CIMPointSymbol"===
M.type&&"Map"===M.angleAlignment&&(xa=1);for(var ra=ua.length;ra--;){var pa=ua[ra];if(pa&&!1!==pa.enable){var N=[];v.OverrideHelper.findApplicableOverrides(pa,V,N);switch(pa.type){case "CIMSolidFill":x(pa,W,N,ea,ka);break;case "CIMPictureFill":A(pa,W,N,ea,ka);break;case "CIMHatchFill":D(pa,W,N,ea,ka);break;case "CIMGradientFill":{var U=W,O=ea,T=ka;const [la,qa]=R(N,pa.primitiveName);var Z=t.numericHash(JSON.stringify(pa)+qa).toString();T.push({type:"fill",templateHash:Z,materialHash:la?P(Z,U,N,O):
Z,cim:pa,materialOverrides:null,colorLocked:pa.colorLocked,effects:pa.effects,color:{r:128,g:128,b:128,a:1},height:0,angle:0,offsetX:0,offsetY:0,scaleX:1})}break;case "CIMSolidStroke":B(pa,W,N,ea,ka,"CIMPolygonSymbol"===M.type,oa);break;case "CIMPictureStroke":C(pa,W,N,ea,ka,"CIMPolygonSymbol"===M.type,oa);break;case "CIMGradientStroke":{U=W;O=ea;T=ka;Z="CIMPolygonSymbol"===M.type;var aa=oa,Y=pa.primitiveName,ba=void 0!==pa.width?pa.width:4,fa=n(pa.capStyle),ha=h(pa.joinStyle);const la=pa.miterLimit,
[qa,va]=R(N,Y),wa=t.numericHash(JSON.stringify(pa)+va).toString();T.push({type:"line",templateHash:wa,materialHash:qa?P(wa,U,N,O):wa,cim:pa,materialOverrides:null,isOutline:Z,colorLocked:pa.colorLocked,effects:pa.effects,color:{r:128,g:128,b:128,a:1},width:L(Y,U,"Width",O,ba),cap:L(Y,U,"CapStyle",O,fa),join:L(Y,U,"JoinStyle",O,ha),miterLimit:L(Y,U,"MiterLimit",O,la),referenceWidth:aa,zOrder:K(pa.name),isDashed:!1})}break;case "CIMCharacterMarker":w(pa,W,N,ea,ka);break;case "CIMPictureMarker":if(w(pa,
W,N,ea,ka))break;"CIMLineSymbol"===M.type&&(xa=e(pa));E(pa,W,N,ea,ka,xa,oa);break;case "CIMVectorMarker":if(w(pa,W,N,ea,ka))break;"CIMLineSymbol"===M.type&&(xa=e(pa));U=W;O=ea;T=ka;Z=xa;aa=oa;Y=sa;if(fa=pa.markerGraphics){ba=0;pa.scaleSymbolsProportionally&&(ha=pa.frame)&&(ba=ha.ymax-ha.ymin);for(const la of fa)if(la&&(fa=la.symbol))switch(fa.type){case "CIMPointSymbol":case "CIMLineSymbol":case "CIMPolygonSymbol":F(pa,la,N,U,O,T,Z,aa,ba,Y);break;case "CIMTextSymbol":I(pa,la,U,N,O,T,Z,aa,ba)}}break;
default:S.error("Cannot analyze CIM layer",pa.type)}}}}}}function x(M,V,W,ea,ka){const sa=M.primitiveName,ua=g.fromCIMColor(M.color),[xa,oa]=R(W,sa),ra=t.numericHash(JSON.stringify(M)+oa).toString();ka.push({type:"fill",templateHash:ra,materialHash:xa?()=>ra:ra,cim:M,materialOverrides:null,colorLocked:M.colorLocked,color:L(sa,V,"Color",ea,ua,G),height:0,angle:0,offsetX:0,offsetY:0,scaleX:1,effects:M.effects})}function A(M,V,W,ea,ka){const sa=M.primitiveName,ua=M.tintColor?g.fromCIMColor(M.tintColor):
{r:255,g:255,b:255,a:1},[xa,oa]=R(W,sa);W=t.numericHash(JSON.stringify(M)+oa).toString();const ra=t.numericHash(`${M.url}${JSON.stringify(M.colorSubstitutions)}`).toString();ka.push({type:"fill",templateHash:W,materialHash:xa?()=>ra:ra,cim:M,materialOverrides:null,colorLocked:M.colorLocked,effects:M.effects,color:L(sa,V,"TintColor",ea,ua,G),height:L(sa,V,"Height",ea,M.height),scaleX:L(sa,V,"ScaleX",ea,M.scaleX),angle:L(sa,V,"Rotation",ea,M.rotation),offsetX:L(sa,V,"OffsetX",ea,M.offsetX),offsetY:L(sa,
V,"OffsetY",ea,M.offsetY)})}function D(M,V,W,ea,ka){const sa=["Rotation","OffsetX","OffsetY"],ua=W.filter(N=>N.primitiveName!==M.primitiveName&&-1===sa.indexOf(N.propertyName)),xa=M.primitiveName,[oa,ra]=R(W,xa);W=t.numericHash(JSON.stringify(M)+ra).toString();const pa=t.numericHash(`${M.separation}${JSON.stringify(M.lineSymbol)}`).toString();ka.push({type:"fill",templateHash:W,materialHash:oa?P(pa,V,ua,ea):pa,cim:M,materialOverrides:ua,colorLocked:M.colorLocked,effects:M.effects,color:{r:255,g:255,
b:255,a:1},height:L(xa,V,"Separation",ea,M.separation),scaleX:1,angle:L(xa,V,"Rotation",ea,M.rotation),offsetX:L(xa,V,"OffsetX",ea,M.offsetX),offsetY:L(xa,V,"OffsetY",ea,M.offsetY)})}function B(M,V,W,ea,ka,sa,ua){const xa=M.primitiveName,oa=g.fromCIMColor(M.color),ra=void 0!==M.width?M.width:4,pa=n(M.capStyle),N=h(M.joinStyle),U=M.miterLimit,[O,T]=R(W,xa),Z=t.numericHash(JSON.stringify(M)+T).toString();ka.push({type:"line",templateHash:Z,materialHash:O?()=>Z:Z,cim:M,materialOverrides:null,isOutline:sa,
colorLocked:M.colorLocked,effects:M.effects,color:L(xa,V,"Color",ea,oa,G),width:L(xa,V,"Width",ea,ra),cap:L(xa,V,"CapStyle",ea,pa),join:L(xa,V,"JoinStyle",ea,N),miterLimit:L(xa,V,"MiterLimit",ea,U),referenceWidth:ua,zOrder:K(M.name),isDashed:!1})}function C(M,V,W,ea,ka,sa,ua){const xa=t.numericHash(`${M.url}${JSON.stringify(M.colorSubstitutions)}`).toString(),oa=M.primitiveName,ra=g.fromCIMColor(M.tintColor),pa=void 0!==M.width?M.width:4,N=n(M.capStyle),U=h(M.joinStyle),O=M.miterLimit,[T,Z]=R(W,oa);
W=t.numericHash(JSON.stringify(M)+Z).toString();ka.push({type:"line",templateHash:W,materialHash:T?()=>xa:xa,cim:M,materialOverrides:null,isOutline:sa,colorLocked:M.colorLocked,effects:M.effects,color:L(oa,V,"TintColor",ea,ra,G),width:L(oa,V,"Width",ea,pa),cap:L(oa,V,"CapStyle",ea,N),join:L(oa,V,"JoinStyle",ea,U),miterLimit:L(oa,V,"MiterLimit",ea,O),referenceWidth:ua,zOrder:K(M.name),isDashed:!1})}function w(M,V,W,ea,ka){const sa=M.markerPlacement;if(!sa||"CIMMarkerPlacementInsidePolygon"!==sa.type)return!1;
const ua=["Rotation","OffsetX","OffsetY"],xa=W.filter(pa=>pa.primitiveName!==M.primitiveName&&-1===ua.indexOf(pa.propertyName)),[oa,ra]=R(W,sa.primitiveName);W=t.numericHash(JSON.stringify(M)+ra).toString();ka.push({type:"fill",templateHash:W,materialHash:oa?P(W,V,xa,ea):W,cim:M,materialOverrides:xa,colorLocked:M.colorLocked,effects:M.effects,color:{r:255,g:255,b:255,a:1},height:L(sa.primitiveName,V,"StepY",ea,sa.stepY),scaleX:1,angle:L(sa.primitiveName,V,"GridAngle",ea,sa.gridAngle),offsetX:L(sa.primitiveName,
V,"OffsetX",ea,sa.offsetX),offsetY:L(sa.primitiveName,V,"OffsetY",ea,sa.offsetY)});return!0}function E(M,V,W,ea,ka,sa,ua){const xa=M.primitiveName,oa=M.size,ra=M.scaleX,pa=M.rotation,N=M.offsetX,U=M.offsetY,O=g.fromCIMColor(M.tintColor),T=t.numericHash(`${M.url}${JSON.stringify(M.colorSubstitutions)}`).toString(),[Z,aa]=R(W,xa);W=t.numericHash(JSON.stringify(M)+aa).toString();ka.push({type:"marker",templateHash:W,materialHash:Z?()=>T:T,cim:M,materialOverrides:null,colorLocked:M.colorLocked,effects:M.effects,
scaleSymbolsProportionally:!1,alignment:sa,size:L(xa,V,"Size",ea,oa),scaleX:L(xa,V,"ScaleX",ea,ra),rotation:L(xa,V,"Rotation",ea,pa),offsetX:L(xa,V,"OffsetX",ea,N),offsetY:L(xa,V,"OffsetY",ea,U),color:L(xa,V,"TintColor",ea,O,G),anchorPoint:M.anchorPoint,isAbsoluteAnchorPoint:"Relative"!==M.anchorPointUnits,outlineColor:{r:0,g:0,b:0,a:0},outlineWidth:0,frameHeight:0,rotateClockwise:M.rotateClockwise,referenceSize:ua,sizeRatio:1,markerPlacement:M.markerPlacement})}function I(M,V,W,ea,ka,sa,ua,xa,oa){v.OverrideHelper.findApplicableOverrides(V,
ea,[]);var ra=V.geometry;if("x"in ra&&"y"in ra){var pa=V.symbol;var N=pa.underline?"underline":pa.strikethrough?"line-through":"none";var U=a(pa.fontStyleName);pa.font={family:pa.fontFamilyName,decoration:N,...U};var O=M.frame,T=M.size/oa;oa=M.primitiveName;N=(pa.height||0)*T;U=pa.angle||0;var Z=((pa.offsetX||0)+(ra.x-.5*(O.xmin+O.xmax)))*T;ra=((pa.offsetY||0)+(ra.y-.5*(O.ymin+O.ymax)))*T;O=g.fromCIMColor(v.CIMSymbolHelper.getFillColor(pa));var aa=g.fromCIMColor(v.CIMSymbolHelper.getStrokeColor(pa)),
Y=v.CIMSymbolHelper.getStrokeWidth(pa);Y||(aa=g.fromCIMColor(v.CIMSymbolHelper.getFillColor(pa.haloSymbol)),Y=pa.haloSize*T);T="";for(const ba of ea)ba.primitiveName===oa&&void 0!==ba.value&&(T+=`-${ba.primitiveName}-${ba.propertyName}-${JSON.stringify(ba.value)}`);ea=JSON.stringify(M.effects)+Number(M.colorLocked)+JSON.stringify(M.anchorPoint)+M.anchorPointUnits+JSON.stringify(M.markerPlacement);ea=t.numericHash(JSON.stringify(V)+ea+T).toString();sa.push({type:"text",templateHash:ea,materialHash:()=>
t.numericHash(JSON.stringify(pa.font)).toString(),cim:pa,materialOverrides:null,colorLocked:M.colorLocked,effects:M.effects,alignment:ua,anchorPoint:{x:M.anchorPoint?M.anchorPoint.x:0,y:M.anchorPoint?M.anchorPoint.y:0},isAbsoluteAnchorPoint:"Relative"!==M.anchorPointUnits,fontName:pa.fontFamilyName,decoration:"none",weight:"normal",style:"normal",size:L(oa,W,"Size",ka,N),angle:L(oa,W,"Rotation",ka,U),offsetX:L(oa,W,"OffsetX",ka,Z),offsetY:L(oa,W,"OffsetY",ka,ra),horizontalAlignment:f(pa.horizontalAlignment),
verticalAlignment:b(pa.verticalAlignment),text:L(V.primitiveName,W,"TextString",ka,V.textString,g._adjustTextCase,pa.textCase),color:O,outlineColor:aa,outlineSize:Y,referenceSize:xa,sizeRatio:1,markerPlacement:M.markerPlacement})}}function F(M,V,W,ea,ka,sa,ua,xa,oa,ra){const pa=V.geometry;if(pa){var N=V.symbol.symbolLayers;if(N)if(ra)H(M,V,ea,W,ka,sa,ua,xa,oa);else for(ra=N.length;ra--;){var U=N[ra];if(U&&!1!==U.enable)switch(U.type){case "CIMSolidFill":case "CIMSolidStroke":{var O=q.getExtent(pa);
if(!O)continue;const [aa,Y,ba]=q.getSDFMetrics(O,M.frame,M.size,M.anchorPoint,"Relative"!==M.anchorPointUnits);var T="CIMSolidFill"===U.type;O={type:"sdf",geom:pa,asFill:T};var Z=M.primitiveName;const fa=M.size,ha=M.rotation||0,la=M.offsetX,qa=M.offsetY,va=U.primitiveName,wa=T?g.fromCIMColor(v.CIMSymbolHelper.getFillColor(U)):g.fromCIMColor(v.CIMSymbolHelper.getStrokeColor(U)),Ca=T?{r:0,g:0,b:0,a:0}:g.fromCIMColor(v.CIMSymbolHelper.getStrokeColor(U)),Ba=v.CIMSymbolHelper.getStrokeWidth(U);if(!T&&
!Ba)break;T=!1;let Fa="";for(const Ga of W)if(Ga.primitiveName===va||Ga.primitiveName===Z)void 0!==Ga.value?Fa+=`-${Ga.primitiveName}-${Ga.propertyName}-${JSON.stringify(Ga.value)}`:Ga.valueExpressionInfo&&(T=!0);Z=JSON.stringify({...M,markerGraphics:null});const Ma=t.numericHash(JSON.stringify(O)).toString();U={type:"marker",templateHash:t.numericHash(JSON.stringify(V)+JSON.stringify(U)+Z+Fa).toString(),materialHash:T?()=>Ma:Ma,cim:O,materialOverrides:null,colorLocked:M.colorLocked,effects:M.effects,
scaleSymbolsProportionally:M.scaleSymbolsProportionally,alignment:ua,anchorPoint:{x:Y,y:ba},isAbsoluteAnchorPoint:!1,size:L(M.primitiveName,ea,"Size",ka,fa),rotation:L(M.primitiveName,ea,"Rotation",ka,ha),offsetX:L(M.primitiveName,ea,"OffsetX",ka,la),offsetY:L(M.primitiveName,ea,"OffsetY",ka,qa),scaleX:1,frameHeight:oa,rotateClockwise:M.rotateClockwise,referenceSize:xa,sizeRatio:aa,color:L(va,ea,"Color",ka,wa,G),outlineColor:L(va,ea,"Color",ka,Ca,G),outlineWidth:L(va,ea,"Width",ka,Ba),markerPlacement:M.markerPlacement};
sa.push(U);break}default:H(M,V,ea,W,ka,sa,ua,xa,oa)}}}}function H(M,V,W,ea,ka,sa,ua,xa,oa){V={type:M.type,enable:!0,name:M.name,colorLocked:M.colorLocked,primitiveName:M.primitiveName,anchorPoint:M.anchorPoint,anchorPointUnits:M.anchorPointUnits,offsetX:0,offsetY:0,rotateClockwise:M.rotateClockwise,rotation:0,size:M.size,billboardMode3D:M.billboardMode3D,depth3D:M.depth3D,frame:M.frame,markerGraphics:[V],scaleSymbolsProportionally:M.scaleSymbolsProportionally,respectFrame:M.respectFrame,clippingPath:M.clippingPath,
effects:M.effects};let ra=[];const pa=["Rotation","OffsetX","OffsetY"];ra=ea.filter(ba=>ba.primitiveName!==M.primitiveName||-1===pa.indexOf(ba.propertyName));var N="";for(var U of ea)void 0!==U.value&&(N+=`-${U.primitiveName}-${U.propertyName}-${JSON.stringify(U.value)}`);const [O,T,Z]=v.CIMSymbolHelper.getTextureAnchor(V);ea=M.primitiveName;U=M.rotation||0;const aa=M.offsetX||0,Y=M.offsetY||0;N=t.numericHash(JSON.stringify(V)+N).toString();W={type:"marker",templateHash:N,materialHash:0===ra.length?
N:P(N,W,ra,ka),cim:V,materialOverrides:ra,colorLocked:M.colorLocked,effects:M.effects,scaleSymbolsProportionally:M.scaleSymbolsProportionally,alignment:ua,anchorPoint:{x:O,y:T},isAbsoluteAnchorPoint:!1,size:M.size,rotation:L(ea,W,"Rotation",ka,U),offsetX:L(ea,W,"OffsetX",ka,aa),offsetY:L(ea,W,"OffsetY",ka,Y),color:{r:0,g:0,b:0,a:0},outlineColor:{r:0,g:0,b:0,a:0},outlineWidth:0,scaleX:1,frameHeight:oa,rotateClockwise:M.rotateClockwise,referenceSize:xa,sizeRatio:Z/r.pt2px(M.size),markerPlacement:M.markerPlacement};
sa.push(W)}function K(M){return M&&0===M.indexOf("Level_")?parseInt(M.substr(6),10):0}function G(M){if(!M||0===M.length)return null;M=(new z(M)).toRgba();return{r:M[0],g:M[1],b:M[2],a:M[3]}}function L(M,V,W,ea,ka,sa,ua){if(M=V[M]){const xa=M[W];if("string"===typeof xa||"number"===typeof xa||xa instanceof Array)return sa?sa.call(null,xa,ua):xa;if(null!=xa&&xa instanceof l.ArcadeExpression)return(oa,ra,pa)=>{oa=k(xa,oa,{$view:pa},ea.geometryType,ra);null!==oa&&sa&&(oa=sa.call(null,oa,ua));return null!==
oa?oa:ka}}return ka}function P(M,V,W,ea){for(const ka of W)if(ka.valueExpressionInfo){const sa=V[ka.primitiveName]&&V[ka.primitiveName][ka.propertyName];sa instanceof l.ArcadeExpression&&(ka.fn=(ua,xa,oa)=>k(sa,ua,{$view:oa},ea.geometryType,xa))}return(ka,sa,ua)=>{for(const xa of W)xa.fn&&(xa.value=xa.fn(ka,sa,ua));return t.numericHash(M+v.OverrideHelper.buildOverrideKey(W)).toString()}}function R(M,V){let W=!1,ea="";for(const ka of M)ka.primitiveName===V&&(void 0!==ka.value?ea+=`-${ka.primitiveName}-${ka.propertyName}-${JSON.stringify(ka.value)}`:
ka.valueExpressionInfo&&(W=!0));return[W,ea]}const S=y.getLogger("esri.symbols.cim.cimAnalyzer");p.analyzeCIMResource=function(M,V){if(!V||0===V.length)return M;M=JSON.parse(JSON.stringify(M));v.OverrideHelper.applyOverrides(M,V);return M};p.analyzeCIMSymbol=function(M,V,W,ea){return u.apply(this,arguments)};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/symbols/cim/CIMSymbolHelper":function(){define("exports ../../Color ../../core/Logger ../../core/mathUtils ./CIMPlacements ./CIMSymbolDrawHelper ./packingUtils".split(" "),
function(p,c,z,y,r,t,l){function v(f,b){switch(b.type){case "CIMSymbolReference":f.drawSymbol(b.symbol,{type:"point",x:0,y:0});break;case "CIMPointSymbol":f.drawSymbol(b,{type:"point",x:0,y:0});break;case "CIMVectorMarker":{const a=new r.Placement;f.drawMarker(b,a)}}return f.envelope()}const q=Math.PI,g=q/2,k=z.getLogger("esri.symbols.cim.CIMSymbolHelper");z=function(){function f(){}f.getEnvelope=function(b){const a=new t.EnvDrawHelper;if(Array.isArray(b)){let d;for(const e of b)d?d.union(v(a,e)):
d=v(a,e);return d}return v(a,b)};f.getTextureAnchor=function(b){b=this.getEnvelope(b);if(!b||0>=b.width||0>=b.height)return[0,0,0];const a=96/72,d=b.height*a+2;return[(b.x+.5*b.width)*a/(b.width*a+2),-(b.y+.5*b.height)*a/d,d]};f.rasterize=function(b,a,d,e=!0){var u=d||this.getEnvelope(a);if(!u||0>=u.width||0>=u.height)return[null,0,0,0,0];var m=96/72;const x=(u.x+.5*u.width)*m,A=(u.y+.5*u.height)*m;b.width=u.width*m;b.height=u.height*m;d||(b.width+=2,b.height+=2);d=b.getContext("2d");m=t.Transformation.createScale(m,
-m);m.translate(.5*b.width-x,.5*b.height+A);m=new t.CanvasDrawHelper(d,m);switch(a.type){case "CIMPointSymbol":m.drawSymbol(a,{type:"point",x:0,y:0});break;case "CIMVectorMarker":u=new r.Placement,m.drawMarker(a,u)}a=d.getImageData(0,0,b.width,b.height);a=new Uint8Array(a.data);if(e)for(d=0;d<a.length;d+=4)e=a[d+3]/255,a[d]*=e,a[d+1]*=e,a[d+2]*=e;return[a,b.width,b.height,-x/b.width,-A/b.height]};f.fromSimpleMarker=function(b){var a=b.style;if("circle"===a||"esriSMSCircle"===a){var d=Math.acos(.995);
var e=Math.ceil(q/d/4);0===e&&(e=1);d=g/e;e*=4;a=[];a.push([50,0]);for(let m=1;m<e;m++)a.push([50*Math.cos(m*d),-50*Math.sin(m*d)]);a.push([50,0]);d={rings:[a]};e={xmin:-50,ymin:-50,xmax:50,ymax:50}}else if("cross"===a||"esriSMSCross"===a)d={rings:[[[0,50],[0,0],[50,0],[50,-0],[0,-0],[0,-50],[-0,-50],[-0,-0],[-50,-0],[-50,0],[-0,0],[-0,50],[0,50]]]},e={xmin:-50,ymin:-50,xmax:50,ymax:50};else if("diamond"===a||"esriSMSDiamond"===a)d={rings:[[[-50,0],[0,50],[50,0],[0,-50],[-50,0]]]},e={xmin:-50,ymin:-50,
xmax:50,ymax:50};else if("square"===a||"esriSMSSquare"===a)d={rings:[[[-50,-50],[-50,50],[50,50],[50,-50],[-50,-50]]]},e={xmin:-50,ymin:-50,xmax:50,ymax:50};else if("x"===a||"esriSMSX"===a)d={rings:[[[0,0],[50,50],[50,50],[0,0],[50,-50],[50,-50],[0,-0],[-50,-50],[-50,-50],[-0,0],[-50,50],[-50,50],[0,0]]]},e={xmin:-50,ymin:-50,xmax:50,ymax:50};else if("triangle"===a||"esriSMSTriangle"===a)e=2/3*100,a=e-100,d={rings:[[[-57.735026918962575,a],[0,e],[57.735026918962575,a],[-57.735026918962575,a]]]},e=
{xmin:-57.735026918962575,ymin:a,xmax:57.735026918962575,ymax:e};else if("arrow"===a||"esriSMSArrow"===a)d={rings:[[[-50,50],[50,0],[-50,-50],[-33,-20],[-33,20],[-50,50]]]},e={xmin:-50,ymin:-50,xmax:50,ymax:50};if(d&&e){var u=[{type:"CIMSolidFill",enable:!0,color:b.color}];b.outline&&u.push({type:"CIMSolidStroke",enable:!0,width:b.outline.width,color:b.outline.color});u={type:"CIMPointSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,rotation:b.angle,size:b.size,offsetX:b.xoffset,offsetY:b.yoffset,
frame:e,markerGraphics:[{type:"CIMMarkerGraphic",geometry:d,symbol:{type:"CIMPolygonSymbol",symbolLayers:u}}]}]}}return u};f.fromCIMHatchFill=function(b){const a=void 0!==b.separation?b.separation:4,d=a/2;for(var e=this._getLineSymbolPeriod(b.lineSymbol)||4;4>e;)e*=2;e/=2;return{type:"CIMVectorMarker",frame:{xmin:-e,xmax:e,ymin:-d,ymax:d},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{paths:[[[-e,0],[e,0]]]},symbol:b.lineSymbol}],size:a}};f._getLineSymbolPeriod=function(b){if(b){const a=this._getEffectsRepeat(b.effects);
if(a)return a;if(b.symbolLayers)for(const d of b.symbolLayers)if((b=this._getEffectsRepeat(d.effects))||d&&(b=this._getPlacementRepeat(d.markerPlacement)))return b}return 0};f._getEffectsRepeat=function(b){if(b)for(var a of b)if(a)switch(a.type){case "CIMGeometricEffectDashes":if((b=a.dashTemplate)&&b.length){a=0;for(const d of b)a+=d;b.length&1&&(a*=2);return a}break;case "CIMGeometricEffectWave":return a.period;default:k.error(`unsupported geometric effect type ${a.type}`)}return 0};f._getPlacementRepeat=
function(b){if(b)switch(b.type){case "CIMMarkerPlacementAlongLineSameSize":case "CIMMarkerPlacementAlongLineRandomSize":case "CIMMarkerPlacementAlongLineVariableSize":if((b=b.placementTemplate)&&b.length){let a=0;for(const d of b)a+=d;b.length&1&&(a*=2);return a}}return 0};f.fromCIMInsidePolygon=function(b){var a=b.markerPlacement;const d={type:b.type,...b,markerPlacement:null,anchorPoint:null};let e,u;!0===a.shiftOddRows?(b=a.stepX/2,e=a.stepY,u=2*a.stepY,a=[{x:-b,y:0},{x:b,y:0},{x:0,y:e},{x:0,y:-e}].map(m=>
({type:"CIMMarkerGraphic",geometry:m,symbol:{type:"CIMPointSymbol",symbolLayers:[d]}}))):(b=a.stepX/2,e=a.stepY/2,u=a.stepY,a=[{type:"CIMMarkerGraphic",geometry:{x:0,y:0},symbol:{type:"CIMPointSymbol",symbolLayers:[d]}}]);return{type:"CIMVectorMarker",frame:{xmin:-b,xmax:b,ymin:-e,ymax:e},markerGraphics:a,size:u}};f.getFillColor=function(b){if(!b)return null;switch(b.type){case "CIMPolygonSymbol":if(b.symbolLayers)for(const a of b.symbolLayers)if(b=f.getFillColor(a),null!=b)return b;break;case "CIMTextSymbol":return f.getFillColor(b.symbol);
case "CIMSolidFill":return b.color}};f.getStrokeColor=function(b){if(b)switch(b.type){case "CIMPolygonSymbol":case "CIMLineSymbol":if(b.symbolLayers)for(const a of b.symbolLayers)if(b=f.getStrokeColor(a),void 0!==b)return b;break;case "CIMTextSymbol":return f.getStrokeColor(b.symbol);case "CIMSolidStroke":return b.color}};f.getStrokeWidth=function(b){if(b)switch(b.type){case "CIMPolygonSymbol":case "CIMLineSymbol":if(b.symbolLayers)for(const a of b.symbolLayers)if(b=f.getStrokeWidth(a),void 0!==b)return b;
break;case "CIMTextSymbol":return f.getStrokeWidth(b.symbol);case "CIMSolidStroke":case "CIMGradientStroke":case "CIMPictureStroke":return b.width}};f.getSize=function(b){if(b)switch(b.type){case "CIMPointSymbol":case "CIMLineSymbol":case "CIMPolygonSymbol":{let a=0;if(b.symbolLayers)for(const d of b.symbolLayers)b=f.getSize(d),b>a&&(a=b);return a}case "CIMSolidStroke":case "CIMPictureStroke":case "CIMGradientStroke":return b.width;case "CIMCharacterMarker":case "CIMPictureMarker":case "CIMVectorMarker":return b.size}};
f.getMarkerScaleRatio=function(b){if(b)switch(b.type){case "CIMVectorMarker":if(!1!==b.scaleSymbolsProportionally&&b.frame)return b.size/(b.frame.ymax-b.frame.ymin)}return 1};return f}();let n=function(){function f(){}f.rasterizeSimpleFill=function(b,a,d){"solid"!==a&&"none"!==a&&"esriSFSSolid"!==a&&"esriSFSNull"!==a||console.error("Unexpected: style does not require rasterization");d=y.nextPowerOfTwo(Math.ceil(d));var e=this._isHorizontalOrVertical(a)?8*d:16*d;const u=2*d;b.width=e;b.height=e;const m=
b.getContext("2d");m.strokeStyle="#FFFFFF";m.lineWidth=d;m.beginPath();if("vertical"===a||"cross"===a||"esriSFSCross"===a||"esriSFSVertical"===a)m.moveTo(e/2,-u),m.lineTo(e/2,e+u);if("horizontal"===a||"cross"===a||"esriSFSCross"===a||"esriSFSHorizontal"===a)m.moveTo(-u,e/2),m.lineTo(e+u,e/2);if("forward-diagonal"===a||"diagonal-cross"===a||"esriSFSDiagonalCross"===a||"esriSFSForwardDiagonal"===a)m.moveTo(-u,-u),m.lineTo(e+u,e+u),m.moveTo(e-u,-u),m.lineTo(e+u,u),m.moveTo(-u,e-u),m.lineTo(u,e+u);if("backward-diagonal"===
a||"diagonal-cross"===a||"esriSFSBackwardDiagonal"===a||"esriSFSDiagonalCross"===a)m.moveTo(e+u,-u),m.lineTo(-u,e+u),m.moveTo(u,-u),m.lineTo(-u,u),m.moveTo(e+u,e-u),m.lineTo(e-u,e+u);m.stroke();a=m.getImageData(0,0,b.width,b.height);a=new Uint8Array(a.data);for(e=0;e<a.length;e+=4)d=a[e+3]/255,a[e]*=d,a[e+1]*=d,a[e+2]*=d;return[a,b.width,b.height]};f.rasterizeSimpleLine=function(b,a){switch(a){case "butt":a="Butt";break;case "square":a="Square";break;default:a="Round"}const d="Butt"===a;switch(b){case "dash":case "esriSLSDash":b=
d?[4,3]:[3,4];break;case "dash-dot":case "esriSLSDashDot":b=d?[4,3,1,3]:[3,4,0,4];break;case "dot":case "esriSLSDot":b=d?[1,3]:[0,4];break;case "long-dash":case "esriSLSLongDash":b=d?[8,3]:[7,4];break;case "long-dash-dot":case "esriSLSLongDashDot":b=d?[8,3,1,3]:[7,4,0,4];break;case "long-dash-dot-dot":case "esriSLSDashDotDot":b=d?[8,3,1,3,1,3]:[7,4,0,4,0,4];break;case "short-dash":case "esriSLSShortDash":b=d?[4,1]:[3,2];break;case "short-dash-dot":case "esriSLSShortDashDot":b=d?[4,1,1,1]:[3,2,0,2];
break;case "short-dash-dot-dot":case "esriSLSShortDashDotDot":b=d?[4,1,1,1,1,1]:[3,2,0,2,0,2];break;case "short-dot":case "esriSLSShortDot":b=d?[1,1]:[0,2];break;case "solid":case "esriSLSSolid":case "none":k.error("Unexpected: style does not require rasterization");b=[0,0];break;default:k.error(`Tried to rasterize SLS, but found an unexpected style: ${b}!`),b=[0,0]}return this.rasterizeDash(b,a)};f.rasterizeDash=function(b,a){var d="Butt"===a,e="Square"===a;a=!d&&!e;1===b.length%2&&(b=[...b,...b]);
var u=0;for(var m of b)u+=m;m=Math.round(15.5*u);u=new Float32Array(31*m);let x=0,A=0,D=.5,B=!0;for(var C of b){x=A;for(A+=15.5*C;D<=A;){for(b=.5;31>b;){const w=a?(b-15.5)*(b-15.5):Math.abs(b-15.5);u[(b-.5)*m+D-.5]=B?d?Math.max(Math.max(x+7.75-D,w),Math.max(D-A+7.75,w)):w:a?Math.min((D-x)*(D-x)+w,(D-A)*(D-A)+w):e?Math.min(Math.max(D-x,w),Math.max(A-D,w)):Math.min(Math.max(D-x+7.75,w),Math.max(A+7.75-D,w));b++}D++}B=!B}d=u.length;C=new Uint8Array(4*d);for(e=0;e<d;++e)l.packFloatRGBA((a?Math.sqrt(u[e]):
u[e])/15.5,C,4*e);return[C,m,31]};f._isHorizontalOrVertical=function(b){return"vertical"===b||"horizontal"===b||"cross"===b||"esriSFSCross"===b||"esriSFSVertical"===b||"esriSFSHorizontal"===b};return f}(),h=function(){function f(){}f.findApplicableOverrides=function(b,a,d){if(a){if(b.primitiveName){let e=!1;for(const u of d)if(u.primitiveName===b.primitiveName){e=!0;break}if(!e)for(const u of a)u.primitiveName===b.primitiveName&&d.push(u)}switch(b.type){case "CIMPointSymbol":case "CIMLineSymbol":case "CIMPolygonSymbol":if(b.effects)for(const e of b.effects)f.findApplicableOverrides(e,
a,d);if(b.symbolLayers)for(const e of b.symbolLayers)f.findApplicableOverrides(e,a,d);break;case "CIMSolidStroke":case "CIMPictureStroke":case "CIMGradientStroke":case "CIMSolidFill":case "CIMPictureFill":case "CIMHatchFill":case "CIMGradientFill":case "CIMVectorMarker":case "CIMCharacterMarker":case "CIMPictureMarker":if(b.effects)for(const e of b.effects)f.findApplicableOverrides(e,a,d);b.markerPlacement&&f.findApplicableOverrides(b.markerPlacement,a,d);if("CIMVectorMarker"===b.type){if(b.markerGraphics)for(const e of b.markerGraphics)f.findApplicableOverrides(e,
a,d),f.findApplicableOverrides(e.symbol,a,d)}else"CIMCharacterMarker"===b.type?f.findApplicableOverrides(b.symbol,a,d):"CIMHatchFill"===b.type&&f.findApplicableOverrides(b.lineSymbol,a,d)}}};f.applyOverrides=function(b,a,d,e){if(a){if(b.primitiveName)for(const m of a)if(m.primitiveName===b.primitiveName){var u=(u=m.propertyName)?u.charAt(0).toLowerCase()+u.substr(1):u;e&&e.push({cim:b,nocapPropertyName:u,value:b[u]});m.expression&&(m.value=f.toValue(m.propertyName,m.expression));if(d){let x=!1;for(const A of d)A.primitiveName===
b.primitiveName&&(x=!0);x||d.push(m)}b[u]=m.value}switch(b.type){case "CIMPointSymbol":case "CIMLineSymbol":case "CIMPolygonSymbol":if(b.effects)for(const m of b.effects)f.applyOverrides(m,a,d,e);if(b.symbolLayers)for(const m of b.symbolLayers)f.applyOverrides(m,a,d,e);break;case "CIMSolidStroke":case "CIMSolidFill":case "CIMVectorMarker":if(b.effects)for(const m of b.effects)f.applyOverrides(m,a,d,e);if("CIMVectorMarker"===b.type&&b.markerGraphics)for(const m of b.markerGraphics)f.applyOverrides(m,
a,d,e),f.applyOverrides(m.symbol,a,d,e)}}};f.restoreOverrides=function(b){for(const a of b)a.cim[a.nocapPropertyName]=a.value};f.buildOverrideKey=function(b){let a="";for(const d of b)void 0!==d.value&&(a+=`${d.primitiveName}${d.propertyName}${JSON.stringify(d.value)}`);return a};f.toValue=function(b,a){return"DashTemplate"===b?a.split(" ").map(d=>Number(d)):"Color"===b?(b=(new c(a)).toRgba(),b[3]*=255,b):a};return f}();p.CIMSymbolHelper=z;p.OverrideHelper=h;p.SymbolHelper=n;Object.defineProperty(p,
"__esModule",{value:!0})})},"esri/symbols/cim/CIMSymbolDrawHelper":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/Logger ../../geometry/support/aaBoundingRect ../../geometry/support/boundsUtils ../../geometry/support/jsonUtils ./CIMEffects ./CIMOperators ./CIMPlacements ./Rect".split(" "),function(p,c,z,y,r,t,l,v,q,g){const k=Math.PI/180,n=z.getLogger("esri.symbols.cim.CIMSymbolDrawHelper");let h=function(){function d(u){this._t=u}d.createIdentity=function(){return new d([1,
0,0,0,1,0])};var e=d.prototype;e.clone=function(){return new d(this._t.slice())};e.transform=function(u){const m=this._t;return[m[0]*u[0]+m[1]*u[1]+m[2],m[3]*u[0]+m[4]*u[1]+m[5]]};d.createScale=function(u,m){return new d([u,0,0,0,m,0])};e.scale=function(u,m){const x=this._t;x[0]*=u;x[1]*=u;x[2]*=u;x[3]*=m;x[4]*=m;x[5]*=m;return this};e.scaleRatio=function(){return Math.sqrt(this._t[0]*this._t[0]+this._t[1]*this._t[1])};d.createTranslate=function(u,m){return new d([0,0,u,0,0,m])};e.translate=function(u,
m){const x=this._t;x[2]+=u;x[5]+=m;return this};d.createRotate=function(u){const m=Math.cos(u);u=Math.sin(u);return new d([m,-u,0,u,m,0])};e.rotate=function(u){return this.multiply(d.createRotate(u))};e.multiply=function(u){const m=this._t;u=u._t;const x=m[1]*u[0]+m[4]*u[1],A=m[2]*u[0]+m[5]*u[1]+u[2],D=m[0]*u[3]+m[3]*u[4],B=m[1]*u[3]+m[4]*u[4],C=m[2]*u[3]+m[5]*u[4]+u[5];m[0]=m[0]*u[0]+m[3]*u[1];m[1]=x;m[2]=A;m[3]=D;m[4]=B;m[5]=C;return this};return d}();z=function(){function d(u){this._transfos=[];
this._sizeTransfos=[];this._transfos.push(u||h.createIdentity());this._sizeTransfos.push(u?u.scaleRatio():1)}var e=d.prototype;e.transformPt=function(u){return this._transfos[this._transfos.length-1].transform(u)};e.transformSize=function(u){return u*this._sizeTransfos[this._sizeTransfos.length-1]};e.back=function(){return this._transfos[this._transfos.length-1]};e.push=function(u,m){m=m?u.scaleRatio():1;u.multiply(this.back());this._transfos.push(u);this._sizeTransfos.push(this._sizeTransfos[this._sizeTransfos.length-
1]*m)};e.pop=function(){this._transfos.splice(-1,1);this._sizeTransfos.splice(-1,1)};e.drawSymbol=function(u,m){if(u)switch(u.type){case "CIMPointSymbol":case "CIMLineSymbol":case "CIMPolygonSymbol":this.drawMultiLayerSymbol(u,m)}};e.drawMultiLayerSymbol=function(u,m){if(u){var x=u.symbolLayers;if(x)if(u=u.effects){if(m=this.executeEffects(u,m))for(u=m.next();u;)this.drawSymbolLayers(x,u),u=m.next()}else this.drawSymbolLayers(x,m)}};e.executeEffects=function(u,m){m=new l.SimpleGeometryCursor(m);for(const x of u)(u=
v.getEffectOperator(x))&&(m=u.execute(m,x,1));return m};e.drawSymbolLayers=function(u,m){let x=u.length;for(;x--;){const D=u[x];if(D&&!1!==D.enable){var A=D.effects;if(A){if(A=this.executeEffects(A,m)){let B=A.next();for(;B;)this.drawSymbolLayer(D,B),B=A.next()}}else this.drawSymbolLayer(D,m)}}};e.drawSymbolLayer=function(u,m){switch(u.type){case "CIMSolidFill":this.drawSolidFill(m,u.color);break;case "CIMHatchFill":this.drawHatchFill(u,m);break;case "CIMSolidStroke":this.drawSolidStroke(m,u.color,
u.width,u.capStyle,u.joinStyle,u.miterLimit);break;case "CIMCharacterMarker":case "CIMPictureMarker":case "CIMVectorMarker":this.drawMarkerLayer(u,m)}};e.drawHatchFill=function(u,m){const x=this._buildHatchPolyline(u,m,1);x&&(this.pushClipPath(m),this.drawMultiLayerSymbol(u.lineSymbol,x),this.popClipPath())};e.drawMarkerLayer=function(u,m){var x=u.markerPlacement;if(x){const D=v.getPlacementOperator(x);if(D){var A="CIMMarkerPlacementInsidePolygon"===x.type;A&&this.pushClipPath(m);if(m=D.execute(m,
x,1))for(x=m.next();x;)this.drawMarker(u,x),x=m.next();A&&this.popClipPath()}}else A=new q.Placement,A.tx=m.x,A.ty=m.y,this.drawMarker(u,A)};e.drawMarker=function(u,m){switch(u.type){case "CIMCharacterMarker":case "CIMPictureMarker":this.drawPictureMarker(u,m);break;case "CIMVectorMarker":this.drawVectorMarker(u,m)}};e.drawPictureMarker=function(u,m){if(u){var x=u.size||10,A=h.createIdentity(),D=u.anchorPoint;if(D){let B=D.x;D=D.y;"Absolute"!==u.anchorPointUnits&&(B*=x,D*=x);A.translate(-B,-D)}u.rotation&&
A.rotate(u.rotation*k);A.translate(u.offsetX||0,u.offsetY||0);A.translate(m.tx,m.ty);this.push(A,!1);this.drawImage(u.url,x,u.scaleX);this.pop()}};e.drawVectorMarker=function(u,m){if(u){var x=u.markerGraphics;if(x){var A=u.size,D=u.frame,B=D?D.ymax-D.ymin:0;A=A&&B?A/B:1;B=h.createIdentity();D&&B.translate(.5*-(D.xmax+D.xmin),.5*-(D.ymax+D.ymin));var C=u.anchorPoint;if(C){let w=C.x;C=C.y;"Absolute"!==u.anchorPointUnits?D&&(w*=D.xmax-D.xmin,C*=D.ymax-D.ymin):(w/=A,C/=A);B.translate(-w,-C)}1!==A&&B.scale(A,
A);u.rotation&&B.rotate(u.rotation*k);B.translate(u.offsetX||0,u.offsetY||0);B.translate(m.tx,m.ty);this.push(B,u.scaleSymbolsProportionally);for(const w of x)w&&w.symbol&&w.geometry||n.error("Invalid marker graphic",w),this.drawSymbol(w.symbol,w.geometry);this.pop()}}};e._buildHatchPolyline=function(u,m,x){var A=(void 0!==u.separation?u.separation:4)*x,D=void 0!==u.rotation?u.rotation:0;if(0===A)return null;0>A&&(A=-A);for(var B=0,C=.5*A;B>C;)B-=A;for(;B<-C;)B+=A;B=y.create();r.getBoundsXY(B,m);
B[0]-=C;B[1]-=C;B[2]+=C;B[3]+=C;for(var w=[[B[0],B[1]],[B[0],B[3]],[B[2],B[3]],[B[2],B[1]]];180<D;)D-=180;for(;0>D;)D+=180;C=Math.cos(D*k);var E=Math.sin(D*k);D=-A*E;m=A*C;B=(void 0!==u.offsetX?u.offsetX*x:0)*E-(void 0!==u.offsetY?u.offsetY*x:0)*C;let I;var F=u=Number.MAX_VALUE;I=x=-Number.MAX_VALUE;for(var H of w){var K=H[0];const G=H[1];w=C*K+E*G;K=-E*K+C*G;F=Math.min(F,w);u=Math.min(u,K);I=Math.max(I,w);x=Math.max(x,K)}u=Math.floor(u/A)*A;H=C*F-E*u-D*B/A;F=E*F+C*u-m*B/A;w=C*I-E*u-D*B/A;B=E*I+C*
u-m*B/A;A=1+Math.round((x-u)/A);C=[];for(E=0;E<A;E++)H+=D,F+=m,w+=D,B+=m,C.push([[H,F],[w,B]]);return{paths:C}};return d}();let f=function(d){function e(){var m=d.call(this)||this;m.reset();return m}c._inheritsLoose(e,d);var u=e.prototype;u.reset=function(){this._xmin=this._ymin=Infinity;this._xmax=this._ymax=-Infinity;this._clipCount=0};u.envelope=function(){return new g(this._xmin,this._ymin,this._xmax-this._xmin,this._ymax-this._ymin)};u.drawSolidFill=function(m){!m||0<this._clipCount||(t.isPolygon(m)?
this._processPath(m.rings,0):t.isPolyline(m)?this._processPath(m.paths,0):t.isExtent(m)&&(m=a(m))&&this._processPath(m.rings,0))};u.drawSolidStroke=function(m,x,A){!m||0<this._clipCount||(x=.5*this.transformSize(A),t.isPolygon(m)?this._processPath(m.rings,x):t.isPolyline(m)?this._processPath(m.paths,x):t.isExtent(m)&&(m=a(m))&&this._processPath(m.rings,x))};u.pushClipPath=function(m){this.drawSolidFill(m);++this._clipCount};u.popClipPath=function(){--this._clipCount};u.drawImage=function(m,x,A){m=
x/2;this._merge(this.transformPt([0,0]),m)};u._processPath=function(m,x){if(m)for(const A of m)if(m=A?A.length:0,1<m){this._merge(this.transformPt(A[0]),x);for(let D=1;D<m;++D)this._merge(this.transformPt(A[D]),x)}};u._merge=function(m,x){m[0]-x<this._xmin&&(this._xmin=m[0]-x);m[0]+x>this._xmax&&(this._xmax=m[0]+x);m[1]-x<this._ymin&&(this._ymin=m[1]-x);m[1]+x>this._ymax&&(this._ymax=m[1]+x)};return e}(z),b=function(d){function e(m,x){x=d.call(this,x)||this;x._ctx=m;return x}c._inheritsLoose(e,d);
var u=e.prototype;u.drawSolidFill=function(m,x){if(m){if(t.isPolygon(m))this._buildPath(m.rings,!0);else if(t.isPolyline(m))this._buildPath(m.paths,!0);else if(t.isExtent(m))this._buildPath(a(m).rings,!0);else return;m=this._ctx;m.fillStyle="string"===typeof x?x:"rgba("+Math.round(x[0])+","+Math.round(x[1])+","+Math.round(x[2])+","+x[3]/255+")";m.fill("evenodd")}};u.drawSolidStroke=function(m,x,A,D,B,C){if(m&&x&&0!==A){if(t.isPolygon(m))this._buildPath(m.rings,!0);else if(t.isPolyline(m))this._buildPath(m.paths,
!1);else if(t.isExtent(m))this._buildPath(a(m).rings,!0);else return;m=this._ctx;m.strokeStyle="string"===typeof x?x:"rgba("+Math.round(x[0])+","+Math.round(x[1])+","+Math.round(x[2])+","+x[3]/255+")";m.lineWidth=this.transformSize(A)+.5;this._setCapStyle(D);this._setJoinStyle(B);m.miterLimit=C;m.stroke()}};u.pushClipPath=function(m){this._ctx.save();if(t.isPolygon(m))this._buildPath(m.rings,!0);else if(t.isPolyline(m))this._buildPath(m.paths,!0);else if(t.isExtent(m))this._buildPath(a(m).rings,!0);
else return;this._ctx.clip("evenodd")};u.popClipPath=function(){this._ctx.restore()};u.drawImage=function(m,x,A){};u._buildPath=function(m,x){const A=this._ctx;A.beginPath();if(m)for(const D of m)if(m=D?D.length:0,1<m){let B=this.transformPt(D[0]);A.moveTo(B[0],B[1]);for(let C=1;C<m;++C)B=this.transformPt(D[C]),A.lineTo(B[0],B[1]);x&&A.closePath()}};u._setCapStyle=function(m){switch(m){case "Butt":this._ctx.lineCap="butt";break;case "Round":this._ctx.lineCap="round";break;case "Square":this._ctx.lineCap=
"square"}};u._setJoinStyle=function(m){switch(m){case "Bevel":this._ctx.lineJoin="bevel";break;case "Round":this._ctx.lineJoin="round";break;case "Miter":this._ctx.lineJoin="miter"}};return e}(z);const a=d=>d?{spatialReference:d.spatialReference,rings:[[[d.xmin,d.ymin],[d.xmin,d.ymax],[d.xmax,d.ymax],[d.xmax,d.ymin],[d.xmin,d.ymin]]]}:null;p.CIMSymbolDrawHelper=z;p.C_DEG_TO_RAD=k;p.CanvasDrawHelper=b;p.EnvDrawHelper=f;p.Transformation=h;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/symbols/cim/Rect":function(){define(["../../chunks/_rollupPluginBabelHelpers"],
function(p){return function(){function c(z=0,y=0,r=0,t=0){this.x=z;this.y=y;this.width=r;this.height=t}c.prototype.union=function(z){this.x=Math.min(this.x,z.x);this.y=Math.min(this.y,z.y);this.width=Math.max(this.width,z.width);this.height=Math.max(this.height,z.height)};p._createClass(c,[{key:"isEmpty",get:function(){return 0>=this.width||0>=this.height}}]);return c}()})},"esri/symbols/cim/packingUtils":function(){define(["exports"],function(p){function c(l,v=0){let q=0;for(let g=0;4>g;g++)q+=l[v+
g]*r[g];return q}function z(l){return l-Math.floor(l)}const y=[1,256,65536,16777216],r=[1/256,1/65536,1/16777216,1/4294967296],t=c(new Uint8ClampedArray([255,255,255,255]));p.packFloatRGBA=function(l,v,q=0){l=0>l?0:l>t?t:l;for(let g=0;4>g;g++)v[q+g]=Math.floor(256*z(l*y[g]))};p.unpackFloatRGBA=c;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/symbols/cim/SDFHelper":function(){define(["exports","../../geometry/support/jsonUtils","./packingUtils","./Rect"],function(p,c,z,y){function r(l){if(!l)return null;
switch(l.type){case "CIMPointSymbol":l=l.symbolLayers;if(!l||1!==l.length)break;return r(l[0]);case "CIMVectorMarker":l=l.markerGraphics;if(!l||1!==l.length)break;var v=l[0];if(!v)break;l=v.geometry;if(!l)break;v=v.symbol;if(!v||"CIMPolygonSymbol"!==v.type&&"CIMLineSymbol"!==v.type)break;return{geom:l,asFill:"CIMPolygonSymbol"===v.type};case "sdf":return{geom:l.geom,asFill:l.asFill}}return null}function t(l){let v=Infinity,q=-Infinity,g=Infinity,k=-Infinity;for(const n of l)for(const h of n)h[0]<
v&&(v=h[0]),h[0]>q&&(q=h[0]),h[1]<g&&(g=h[1]),h[1]>k&&(k=h[1]);return[v,g,q,k]}p.buildSDF=function(l){var v=l.geom;var q=v?v.rings?v.rings:v.paths?v.paths:void 0!==v.xmin&&void 0!==v.ymin&&void 0!==v.xmax&&void 0!==v.ymax?[[[v.xmin,v.ymin],[v.xmin,v.ymax],[v.xmax,v.ymax],[v.xmax,v.ymin],[v.xmin,v.ymin]]]:null:null;v=Infinity;var g=-Infinity;var k=Infinity,n=-Infinity;for(var h of q)for(var f of h)f[0]<v&&(v=f[0]),f[0]>g&&(g=f[0]),f[1]<k&&(k=f[1]),f[1]>n&&(n=f[1]);g=new y(v,k,g-v,n-k);k=64/Math.max(g.width,
g.height);h=Math.round(g.width*k)+62;f=Math.round(g.height*k)+62;v=[];for(var b of q)if(b&&1<b.length){q=[];for(var a of b){let [w,E]=a;w-=g.x;E-=g.y;w*=k;E*=k;w+=30.5;E+=30.5;q.push([w,E])}l.asFill&&(n=q.length-1,q[0][0]===q[n][0]&&q[0][1]===q[n][1]||q.push(q[0]));v.push(q)}var d;b=h*f;a=Array(b);for(q=0;q<b;++q)a[q]=962;for(d of v)for(q=d.length,g=1;g<q;++g){k=d[g-1];n=d[g];var e=void 0,u=void 0;k[0]<n[0]?(e=k[0],u=n[0]):(e=n[0],u=k[0]);var m=void 0,x=void 0;k[1]<n[1]?(m=k[1],x=n[1]):(m=n[1],x=
k[1]);var A=Math.floor(e)-31;u=Math.floor(u)+31;m=Math.floor(m)-31;x=Math.floor(x)+31;0>A&&(A=0);u>h&&(u=h);0>m&&(m=0);x>f&&(x=f);e=n[0]-k[0];const w=n[1]-k[1],E=e*e+w*w;for(;A<u;A++)for(let I=m;I<x;I++){var D=(A-k[0])*e+(I-k[1])*w,B=void 0;0>D?(B=k[0],D=k[1]):D>E?(B=n[0],D=n[1]):(D/=E,B=k[0]+D*e,D=k[1]+D*w);B=(A-B)*(A-B)+(I-D)*(I-D);D=(f-I-1)*h+A;B<a[D]&&(a[D]=B)}}for(d=0;d<b;++d)a[d]=Math.sqrt(a[d]);d=a;if(l.asFill)for(var C of v)for(l=C.length,v=1;v<l;++v)for(b=C[v-1],a=C[v],b[0]<a[0]?(q=b[0],
g=a[0]):(q=a[0],g=b[0]),b[1]<a[1]?(n=b[1],k=a[1]):(n=a[1],k=b[1]),q=Math.floor(q),g=Math.floor(g)+1,n=Math.floor(n),k=Math.floor(k)+1,31>q&&(q=31),g>h-31&&(g=h-31),31>n&&(n=31),k>f-31&&(k=f-31);n<k;++n)if(b[1]>n!==a[1]>n){u=(f-n-1)*h;for(m=q;m<g;++m)m<(a[0]-b[0])*(n-b[1])/(a[1]-b[1])+b[0]&&(d[u+m]=-d[u+m]);for(m=31;m<q;++m)d[u+m]=-d[u+m]}C=d.length;l=new Uint8Array(4*C);for(v=0;v<C;++v)z.packFloatRGBA(.5-d[v]/62,l,4*v);C=l;return[C,h,f]};p.getExtent=function(l){return l?l.rings?t(l.rings):l.paths?
t(l.paths):c.isExtent(l)?[l.xmin,l.ymin,l.xmax,l.ymax]:null:null};p.getSDFInfo=r;p.getSDFMetrics=function(l,v,q,g,k){const [n,h,f,b]=l;if(f<n||b<h)return[0,0,0];var a=f-n,d=b-h;l=64/Math.max(a,d);a=Math.round(a*l);d=Math.round(d*l)+62;let e=1;v&&(e=d/l/(v.ymax-v.ymin));let u=0,m=0;g&&(k?v&&q&&0<v.ymax-v.ymin&&(u=g.x/((v.xmax-v.xmin)/(v.ymax-v.ymin)*q),m=g.y/q):(u=g.x,m=g.y));u=.5*(v.xmax+v.xmin)+u*(v.xmax-v.xmin);m=.5*(v.ymax+v.ymin)+m*(v.ymax-v.ymin);u=(u-n)*l+31;m=(m-h)*l+31;return[e,u/(a+62)-.5,
-(m/d-.5)]};p.getSDFSymbol=function(l){l=l.markerGraphics;if(!l||1!==l.length)return null;l=l[0];if(!l)return null;l=l.symbol;return!l||"CIMPolygonSymbol"!==l.type&&"CIMLineSymbol"!==l.type?null:l};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/symbols/cim/utils":function(){define(["exports"],function(p){function c(z,y){"string"!==typeof z&&(z=String(z));switch(y){case "LowerCase":return z.toLowerCase();case "Allcaps":return z.toUpperCase();default:return z}}p._adjustTextCase=c;p.colorToArray=
function(z){return[z.r,z.g,z.b,z.a]};p.createLabelOverrideFunction=function(z,y,r){const t=g=>{let k=g.length;for(;k--;)if(-1===" /-,\n".indexOf(g.charAt(k)))return!1;return!0},l=[];var v=0;let q=-1;do q=y.indexOf("[",v),q>=v&&(q>v&&(v=y.substr(v,q-v),l.push([v,null,t(v)])),v=q+1,q=y.indexOf("]",v),q>=v&&(q>v&&(v=y.substr(v,q-v),(v=z[v])&&l.push([null,v,!1])),v=q+1));while(-1!==q);v<y.length-1&&(z=y.substr(v),l.push([z,null,t(z)]));return g=>{let k="",n=null;for(const h of l){const [f,b,a]=h;if(f)a?
n=f:(n&&(k+=n,n=null),k+=f);else{const d=g.attributes[b];d&&(n&&(k+=n,n=null),k+=d)}}return c(k,r)}};p.evaluateValueOrFunction=function(z,y,r,t){return"function"===typeof z?z(y,r,t):z};p.fromCIMColor=function(z){return z?{r:z[0],g:z[1],b:z[2],a:z[3]/255}:{r:0,g:0,b:0,a:0}};p.isCIMFill=function(z){return"CIMGradientFill"===z.type||"CIMHatchFill"===z.type||"CIMPictureFill"===z.type||"CIMSolidFill"===z.type||"CIMWaterFill"===z.type};p.isCIMMarker=function(z){return"CIMVectorMarker"===z.type||"CIMPictureMarker"===
z.type||"CIMBarChartMarker"===z.type||"CIMCharacterMarker"===z.type||"CIMPieChartMarker"===z.type||"CIMStackedBarChartMarker"===z.type};p.isCIMMarkerStrokePlacement=function(z){return"CIMMarkerPlacementAlongLineRandomSize"===z.type||"CIMMarkerPlacementAlongLineSameSize"===z.type||"CIMMarkerPlacementAlongLineVariableSize"===z.type||"CIMMarkerPlacementAtExtremities"===z.type||"CIMMarkerPlacementAtMeasuredUnits"===z.type||"CIMMarkerPlacementAtRatioPositions"===z.type||"CIMMarkerPlacementOnLine"===z.type||
"CIMMarkerPlacementOnVertices"===z.type};p.isCIMStroke=function(z){return"CIMGradientStroke"===z.type||"CIMPictureStroke"===z.type||"CIMSolidStroke"===z.type};p.resampleHermite=function(z,y,r,t,l,v,q=!0){const g=y/l;r/=v;const k=Math.ceil(g/2),n=Math.ceil(r/2);for(let b=0;b<v;b++)for(let a=0;a<l;a++){const d=4*(a+(q?v-b-1:b)*l);var h=0;let e=0,u=0,m=0,x=0,A=0,D=0;const B=(b+.5)*r;for(let C=Math.floor(b*r);C<(b+1)*r;C++){var f=Math.abs(B-(C+.5))/n;const w=(a+.5)*g;f*=f;for(let E=Math.floor(a*g);E<
(a+1)*g;E++){let I=Math.abs(w-(E+.5))/k;h=Math.sqrt(f+I*I);-1<=h&&1>=h&&(h=2*h*h*h-3*h*h+1,0<h&&(I=4*(E+C*y),D+=h*z[I+3],u+=h,255>z[I+3]&&(h=h*z[I+3]/250),m+=h*z[I],x+=h*z[I+1],A+=h*z[I+2],e+=h))}}t[d]=m/e;t[d+1]=x/e;t[d+2]=A/e;t[d+3]=D/u}};p.toCIMSymbolJSON=function(z){var y;return null==(y=z.data)?void 0:y.symbol};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/views/2d/arcade/callExpressionWithFeature":function(){define(["../../../core/Error","../../../core/Logger","../../../geometry/support/quantizationUtils"],
function(p,c,z){function y(t){const l={};switch(t){case "esriGeometryPoint":return(v,q,g,k)=>z.unquantizePoint(q,l,v,g,k);case "esriGeometryPolygon":return(v,q,g,k)=>z.unquantizePolygon(q,l,v,g,k);case "esriGeometryPolyline":return(v,q,g,k)=>z.unquantizePolyline(q,l,v,g,k);case "esriGeometryMultipoint":return(v,q,g,k)=>z.unquantizeMultipoint(q,l,v,g,k);default:return c.getLogger("esri.views.2d.support.arcadeOnDemand").error(new p("mapview-arcade",`Unable to handle geometryType: ${t}`)),v=>v}}const r=
new Map;return function(t,l,v,q,g){if(t.referencesGeometry()&&g){{const {transform:k,hasZ:n,hasM:h}=g;r.has(q)||r.set(q,y(q));q=r.get(q)(l.geometry,k,n,h);l={...l,geometry:q}}}l=t.repurposeFeature(l);try{return t.evaluate({...v,$feature:l})}catch(k){return c.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",k),null}}})},"esri/views/2d/engine/webgl/util/Result":function(){define(["exports","../../../../../core/Error"],function(p,c){p.ok=function(z,y){return z&&
"name"in z?(y&&y.error(new c(z.name,z.message,z.details)),!1):!0};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/views/2d/engine/webgl/mesh/templates/WGLDynamicLineTemplate":function(){define("../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/screenUtils ../../color ../../definitions ../../number ../../materialKey/MaterialKey ./util ./WGLBaseLineTemplate ./WGLDynamicMeshTemplate ../../util/Result".split(" "),function(p,c,z,y,r,t,l,v,q,g){return function(k){function n(h,
f,b){var a=k.call(this,h)||this;a._minMaxZoom=r.i1616to32(Math.round(f*y.MIN_MAX_ZOOM_PRECISION_FACTOR),Math.round(b*y.MIN_MAX_ZOOM_PRECISION_FACTOR));a._cimLineLayer=h;let d=0;l.isFunction(h.width)||(d=.5*c.pt2px(h.width));a._dynamicPropertyMap.set("_halfWidth",(e,u,m)=>l.isFunction(h.width)?.5*c.pt2px(h.width(e,u,m)):d);l.isFunction(h.cap)?a._dynamicPropertyMap.set("_capType",h.cap):a._capType=h.cap;l.isFunction(h.join)?a._dynamicPropertyMap.set("_joinType",h.join):a._joinType=h.join;l.isFunction(h.color)?
a._dynamicPropertyMap.set("_fillColor",(e,u,m)=>(e=h.color(e,u,m))&&z.premultiplyAlphaRGBA(e)||0):(f=h.color,a._fillColor=f&&z.premultiplyAlphaRGBA(f)||0);l.isFunction(h.miterLimit)?a._dynamicPropertyMap.set("_miterLimitCosine",(e,u,m)=>l.getLimitCosine(h.miterLimit(e,u,m))):a._miterLimitCosine=l.getLimitCosine(h.miterLimit);a._scaleFactor=h.scaleFactor||1;a._isDashed=h.isDashed;a._effects=h.effects;a.tessellationProperties._bitset=h.colorLocked?1:0;a._materialKey=h.materialKey;a._initializeTessellator(!0);
return a}p._inheritsLoose(n,k);n.fromCIMLine=function(h,f){const [b,a]=l.getMinMaxZoom(h.scaleInfo,f);return new n(h,b,a)};n.prototype.bindFeature=function(h,f,b){const a=h.readLegacyFeature();this._dynamicPropertyMap.forEach((e,u)=>{this[u]=e(a,f,b)});this._halfWidth*=this._scaleFactor;h=this._materialCache;var d=this._cimLineLayer.materialHash;d=d(a,f,b);d=h.get(d);h=null;d&&g.ok(d.spriteMosaicItem)&&(h=d.spriteMosaicItem);if(h){this._hasPattern=!0;const {rect:e,width:u,height:m}=h;d=e.x+y.SPRITE_PADDING;
const x=e.y+y.SPRITE_PADDING,A=d+u,D=x+m;this.tessellationProperties._tl=r.i1616to32(d,x);this.tessellationProperties._br=r.i1616to32(A,D)}else this._hasPattern=!1,this.tessellationProperties._tl=0,this.tessellationProperties._br=0;this.tessellationProperties._fillColor=this._fillColor;this.tessellationProperties._halfWidth=this._halfWidth;this.tessellationProperties.offset=0;this.tessellationProperties._halfReferenceWidth=this.tessellationProperties._halfWidth;d=t.LineMaterialKey.load(this._materialKey);
h&&(d.sdf=h.sdf,d.pattern=!0,d.textureBinding=h.textureBinding);this._materialKey=d.data};return n}(v(q))})},"esri/views/2d/engine/webgl/mesh/templates/WGLBaseLineTemplate":function(){define("../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/maybe ../../definitions ../../enums ../../number ../../TurboLine ../../materialKey/MaterialKey ./templateUtils".split(" "),function(p,c,z,y,r,t,l,v){const q=(k,n,h)=>(f,b,a,d,e,u,m,x,A,D,B)=>{a=r.i1616to32(B,Math.ceil(1024*k._halfWidth));
m=r.i8888to32(Math.round(31*m),Math.round(31*x),Math.round(31*A),Math.round(31*D));e=r.i8888to32(31*e,31*u,0,k._bitset);u=k.out;u.vertexBounds(f,b,n,h);u.vertexWrite(r.i1616to32(8*f,8*b));u.vertexWrite(k.id);u.vertexWrite(k._fillColor);u.vertexWrite(m);u.vertexWrite(a);u.vertexWrite(k._tl);u.vertexWrite(k._br);u.vertexWrite(e);u.vertexWrite(r.i1616to32(Math.ceil(1024*k._halfReferenceWidth),0));u.vertexWrite(k.minMaxZoom);u.vertexEnd();return k.offset+k.vertexCount++},g=k=>(n,h,f)=>{const b=k.out;
b.indexWrite(n);b.indexWrite(h);b.indexWrite(f);k.indexCount+=3};return k=>function(n){function h(...b){b=n.call(this,...b)||this;b.tessellationProperties={};b._tessellationOptions={halfWidth:0,pixelCoordRatio:1,offset:0};b.geometryType=y.WGLGeometryType.LINE;return b}p._inheritsLoose(h,n);var f=h.prototype;f._initializeTessellator=function(b){var a=l.LineMaterialKey.load(this._materialKey),d=this._tessellationOptions;a=a.vvSizeFieldStops||a.vvSizeMinMaxValue||a.vvSizeScaleStops||a.vvSizeUnitValue;
const e=this.tessellationProperties._halfWidth<z.THIN_LINE_HALF_WIDTH_THRESHOLD;this.tessellationProperties.minMaxZoom=this._minMaxZoom;b=e&&!b&&!a;d.wrapDistance=65535;d.textured=this._isDashed||this._hasPattern;d.offset=this.tessellationProperties.offset;d.halfWidth=this.tessellationProperties._halfWidth;d=b?0:1;this._lineTessellator=new t.LineTessellation(q(this.tessellationProperties,d,d),g(this.tessellationProperties),b)};f._write=function(b,a,d){const e="esriGeometryPoint"===a.geometryType;
b.recordStart(a.getDisplayId(),this._materialKey,this.geometryType,!1,e);this._writeGeometry(b,a,d,e);b.recordEnd()};f._writeGeometry=function(b,a,d,e){d=null!=d?d:a.readLegacyGeometry();e=this._getLines(d,e);c.isNone(e)||this._writeVertices(b,a,e)};f._getLines=function(b,a){if(c.isNone(b))return null;b=b.paths||b.rings;return c.isNone(b)?null:v.clipLinesMarshall(b,a?256:16)};f._writeVertices=function(b,a,d){a=a.getDisplayId();const e=b.vertexCount(),u=this.tessellationProperties,m=this._tessellationOptions;
u.out=b;u.id=a;u.indexCount=0;u.vertexCount=0;u.offset=e;m.capType=this._capType;m.joinType=this._joinType;for(const {line:x,start:A}of d)m.initialDistance=A%65535,this._lineTessellator.tessellate(x,m)};return h}(k)})},"esri/views/2d/engine/webgl/mesh/templates/WGLDynamicMarkerTemplate":function(){define("../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/Error ../../../../../../core/Logger ../../../../../../core/maybe ../../../../../../core/screenUtils ../../../../../../chunks/mat2df32 ../../../../../../chunks/vec2f32 ../../color ../../definitions ../../number ../../materialKey/MaterialKey ./util ./WGLBaseMarkerTemplate ./WGLDynamicMeshTemplate ../../util/Result".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k,n,h,f,b){const a=l.create(),d=t.create(),e=z.getLogger("esri.views.2d.engine.webgl.WGLDynamicMarkerTemplate");return function(u){function m(x,A,D){var B=u.call(this,x)||this;B._cimMarkerLayer=x;B._minMaxZoom=g.i1616to32(Math.round(A*q.MIN_MAX_ZOOM_PRECISION_FACTOR),Math.round(D*q.MIN_MAX_ZOOM_PRECISION_FACTOR));n.isFunction(x.color)?B._dynamicPropertyMap.set("_fillColor",(C,w,E)=>v.premultiplyAlphaRGBA(x.color(C,w,E))):B._fillColor=v.premultiplyAlphaRGBA(x.color);n.isFunction(x.outlineColor)?
B._dynamicPropertyMap.set("_outlineColor",(C,w,E)=>v.premultiplyAlphaRGBA(x.outlineColor(C,w,E))):B._outlineColor=v.premultiplyAlphaRGBA(x.outlineColor);n.isFunction(x.size)?B._dynamicPropertyMap.set("_size",(C,w,E)=>r.pt2px(x.size(C,w,E))):B._size=r.pt2px(x.size);n.isFunction(x.scaleX)?B._dynamicPropertyMap.set("_scaleX",x.scaleX):B._scaleX=x.scaleX;n.isFunction(x.offsetX)?B._dynamicPropertyMap.set("xOffset",(C,w,E)=>r.pt2px(x.offsetX(C,w,E))):B.xOffset=r.pt2px(x.offsetX);n.isFunction(x.offsetY)?
B._dynamicPropertyMap.set("yOffset",(C,w,E)=>r.pt2px(x.offsetY(C,w,E))):B.yOffset=r.pt2px(x.offsetY);n.isFunction(x.outlineWidth)?B._dynamicPropertyMap.set("_outlineWidth",(C,w,E)=>r.pt2px(x.outlineWidth(C,w,E))):B._outlineWidth=r.pt2px(x.outlineWidth);n.isFunction(x.rotation)?B._dynamicPropertyMap.set("_angle",x.rotation):B._angle=x.rotation;B._scaleFactor=y.unwrapOr(x.scaleFactor,1);B._markerPlacement=x.markerPlacement;B._effects=x.effects;B._bitSet=(1===x.alignment?1:0)|(x.colorLocked?1:0)<<1|
(x.scaleSymbolsProportionally?1:0)<<3;B._materialKey=x.materialKey;return B}p._inheritsLoose(m,u);m.fromCIMMarker=function(x,A){const [D,B]=n.getMinMaxZoom(x.scaleInfo,A);return new m(x,D,B)};m.prototype.bindFeature=function(x,A,D){const B=x.readLegacyFeature();this._dynamicPropertyMap.forEach((M,V)=>{this[V]=M(B,A,D)});x=this._cimMarkerLayer.materialHash;x="function"===typeof x?x(B,A,D):x;if((x=this._materialCache.get(x))&&b.ok(x.spriteMosaicItem)&&x.spriteMosaicItem){x=x.spriteMosaicItem;var C=
this._cimMarkerLayer.sizeRatio,w=x.width/x.height*this._scaleX,E=this._cimMarkerLayer.rotateClockwise?this._angle:-this._angle,I=this._size,F=I*w,H=this.xOffset,K=this.yOffset;this.xOffset*=this._scaleFactor;this.yOffset*=this._scaleFactor;var G=this._cimMarkerLayer.scaleSymbolsProportionally&&this._cimMarkerLayer.frameHeight?this._size/r.pt2px(this._cimMarkerLayer.frameHeight):1,L=this._outlineWidth*G,P=r.pt2px(this._cimMarkerLayer.referenceSize),R=G=0,S=this._cimMarkerLayer.anchorPoint;S&&(this._cimMarkerLayer.isAbsoluteAnchorPoint?
this._size&&(G=-S.x/(this._size*w),R=S.y/this._size):(G=S.x,R=S.y));this._sizeOutlineWidth=g.i8888to32(Math.round(Math.min(Math.sqrt(128*F),255)),Math.round(Math.min(Math.sqrt(128*I),255)),Math.round(Math.min(Math.sqrt(128*L),255)),Math.round(Math.min(Math.sqrt(128*P),255)));this.angle=E;this._bitestAndDistRatio=g.i1616to32(this._bitSet,Math.round(64*C));w=x.rect.x+q.SPRITE_PADDING;E=x.rect.y+q.SPRITE_PADDING;L=w+x.width;P=E+x.height;this._texUpperLeft=g.i1616to32(w,E);this._texUpperRight=g.i1616to32(L,
E);this._texBottomLeft=g.i1616to32(w,P);this._texBottomRight=g.i1616to32(L,P);w=k.MarkerMaterialKey.load(this._materialKey);w.sdf=x.sdf;w.pattern=!0;w.textureBinding=x.textureBinding;this._materialKey=w.data;this._anchorX=.5-(.5+G)*x.width/x.width;this._anchorY=.5-(.5+R)*x.height/x.height;F=F*C*this._scaleFactor;I=I*C*this._scaleFactor;F*=x.rect.width/x.width;I*=x.rect.height/x.height;this._computedWidth=F;this._computedHeight=I;this._applyTransformation(d,a);this.xOffset=H;this.yOffset=K}else e.error(new c("mapview-cim",
"Encountered an error when binding feature"))};return m}(h(f))})},"esri/views/2d/engine/webgl/mesh/templates/WGLDynamicTextTemplate":function(){define("../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/screenUtils ../../alignmentUtils ../../color ../../definitions ../../number ../../materialKey/MaterialKey ./util ./WGLBaseTextTemplate ./WGLDynamicMeshTemplate ../../../../layers/features/textUtils".split(" "),function(p,c,z,y,r,t,l,v,q,g,k){return function(n){function h(b,a,
d){var e=n.call(this,b)||this;e._horizontalAlignment="center";e._verticalAlignment="middle";e._textToGlyphs=new Map;e._minMaxZoom=t.i1616to32(Math.round(a*r.MIN_MAX_ZOOM_PRECISION_FACTOR),Math.round(d*r.MIN_MAX_ZOOM_PRECISION_FACTOR));a=b.scaleFactor||1;e._cimTextLayer=b;v.isFunction(b.color)?e._dynamicPropertyMap.set("_color",(A,D,B)=>y.premultiplyAlphaRGBA(b.color(A,D,B))):e._color=y.premultiplyAlphaRGBA(b.color);v.isFunction(b.color)?e._dynamicPropertyMap.set("_haloColor",(A,D,B)=>y.premultiplyAlphaRGBA(b.outlineColor(A,
D,B))):e._haloColor=y.premultiplyAlphaRGBA(b.outlineColor);let u;v.isFunction(b.size)||(u=Math.min(Math.round(c.pt2px(b.size*b.sizeRatio)),127));e._dynamicPropertyMap.set("_size",(A,D,B)=>v.isFunction(b.size)?Math.min(Math.round(c.pt2px(b.size(A,D,B)*b.sizeRatio)),127):u);v.isFunction(b.outlineSize)?e._dynamicPropertyMap.set("_haloSize",(A,D,B)=>Math.min(Math.floor(5*c.pt2px(b.outlineSize(A,D,B)*b.sizeRatio)),127)):e._haloSize=Math.min(Math.floor(5*c.pt2px(b.outlineSize*b.sizeRatio)),127);let m;v.isFunction(b.offsetX)||
(m=Math.round(c.pt2px(b.offsetX*b.sizeRatio)));e._dynamicPropertyMap.set("_xOffset",(A,D,B)=>v.isFunction(b.offsetX)?Math.round(c.pt2px(b.offsetX(A,D,B)*b.sizeRatio)):m);let x;v.isFunction(b.offsetY)||(x=Math.round(c.pt2px(b.offsetY*b.sizeRatio)));e._dynamicPropertyMap.set("_yOffset",(A,D,B)=>v.isFunction(b.offsetY)?Math.round(c.pt2px(b.offsetY(A,D,B)*b.sizeRatio)):x);v.isFunction(b.angle)?e._dynamicPropertyMap.set("_angle",b.angle):e._angle=b.angle;v.isFunction(b.horizontalAlignment)?e._dynamicPropertyMap.set("_horizontalAlignment",
b.horizontalAlignment):e._horizontalAlignment=b.horizontalAlignment;v.isFunction(b.verticalAlignment)?e._dynamicPropertyMap.set("_verticalAlignment",b.verticalAlignment):e._verticalAlignment=b.verticalAlignment;e._scaleFactor=a;v.isFunction(b.text)?e._dynamicPropertyMap.set("_text",b.text):e._text=b.text;a=Math.min(Math.round(c.pt2px(b.referenceSize*b.sizeRatio)),127);e._referenceSize=Math.round(Math.sqrt(256*a));e._materialKey=b.materialKey;a=l.TextMaterialKey.load(e._materialKey);a.sdf=!0;e._bitset=
(1===b.alignment?1:0)|(b.colorLocked?1:0)<<1;e._materialKey=a.data;e._decoration="none";e._lineHeight=1;e._lineWidth=512;e._textPlacement=b.markerPlacement;e._effects=b.effects;e._isCIM=!0;return e}p._inheritsLoose(h,n);h.fromCIMText=function(b,a){const [d,e]=v.getMinMaxZoom(b.scaleInfo,a);return new h(b,d,e)};var f=h.prototype;f.analyze=function(){var b=p._asyncToGenerator(function*(a,d,e,u){d=d.readLegacyFeature();var m=this._cimTextLayer;e="string"===typeof m.text?m.text:"function"===typeof m.text?
m.text(d,e,u):"";a=yield a.getMosaicItem(this._cimTextLayer.cim,k.codepoints(e));this._textToGlyphs.set(e,a.glyphMosaicItems);return a});return function(a,d,e,u){return b.apply(this,arguments)}}();f.bindFeature=function(b,a,d){const e=b.readLegacyFeature();this._dynamicPropertyMap.forEach((u,m)=>{this[m]=u(e,a,d)});this._text&&0!==this._text.length?(this._size*=this._scaleFactor,this._scale=this._size/24,this._xOffset*=this._scaleFactor,this._yOffset*=this._scaleFactor,this._xAlignD=z.getXAnchorDirection(this._horizontalAlignment||
"center"),this._yAlignD=z.getYAnchorDirection(this._verticalAlignment||"baseline"),b=this._textToGlyphs.get(this._text),this.bindTextInfo(b,!1)):this._shapingInfo=null};return h}(q(g))})},"esri/views/2d/layers/features/textUtils":function(){define(["exports"],function(p){p.codepoints=function(c){const z=Array(c.length);for(let y=0;y<c.length;y++)z[y]=c.charCodeAt(y);return z};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/views/2d/engine/webgl/mesh/templates/WGLFillTemplate":function(){define("../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/mathUtils ../../../../../../core/screenUtils ../../color ../../definitions ../../GeometryUtils ../../number ../../materialKey/MaterialKey ./util ./WGLBaseFillTemplate ./WGLMeshTemplate".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k){return function(n){function h(f,b,a,d,e,u,m,x,A,D,B){var C=n.call(this)||this;C._effects=A;f=v.FillMaterialKey.load(f);b&&(f.sdf=b.sdf,f.pattern=!0,f.textureBinding=b.textureBinding);C.fillColor=a;C.tl=d;C.br=e;C.aux1=u;C.aux2=m;C.aux3=x;C._minMaxZoom=l.i1616to32(Math.round(D*r.MIN_MAX_ZOOM_PRECISION_FACTOR),Math.round(B*r.MIN_MAX_ZOOM_PRECISION_FACTOR));C._materialKey=f.data;return C}p._inheritsLoose(h,n);h.fromCIMFill=function(f,b,a){var d=f.color;d=d&&y.premultiplyAlphaRGBA(d)||
0;const e=f.materialKey,[u,m]=q.getMinMaxZoom(f.scaleInfo,a);if(!b)return b=l.i8888to32(0,0,0,f.colorLocked?1:0),new h(e,null,d,0,0,0,0,b,f.effects,u,m);const {rect:x,width:A,height:D}=b;var B=x.x+r.SPRITE_PADDING;const C=x.y+r.SPRITE_PADDING;var w=B+A;const E=C+D;var I=c.nextHighestPowerOfTwo(D);255<I?I=255:0>=I&&(I=c.nextHighestPowerOfTwo(E-C));var F=c.nextHighestPowerOfTwo(A||0);255<F?F=255:0>=F&&(F=c.nextHighestPowerOfTwo(w-B));let H=z.pt2px(f.offsetX||0)+128;255<H&&(H=255);let K=z.pt2px(-f.offsetY||
0)+128;255<K&&(K=255);a=f.scaleX||1;B=l.i1616to32(B,C);w=l.i1616to32(w,E);I=l.i8888to32(F,I,H,K);a=l.i1616to32(128*a,128);F=l.i8888to32(0,0,t.degToByte(f.angle),f.colorLocked?1:0);return new h(e,b,d,B,w,I,a,F,f.effects,u,m)};h.fromSimpleFill=function(f,b,a=!1){var {color:d}=f;d=d&&"esriSFSNull"!==f.style&&y.premultiplyAlphaRGBAArray(d)||0;a=l.i8888to32(0,0,0,a?255:0);f=f.materialKey;if(!b)return new h(f,null,d,0,0,0,0,a,null,q.DEFAULT_MIN_ZOOM,q.DEFAULT_MAX_ZOOM);const {rect:e,width:u,height:m}=b;
var x=e.x+r.SPRITE_PADDING,A=e.y+r.SPRITE_PADDING;const D=x+u,B=A+m,C=l.i1616to32(x,A),w=l.i1616to32(D,B);x=l.i8888to32(c.nextHighestPowerOfTwo(D-x),c.nextHighestPowerOfTwo(B-A),0,0);A=l.i1616to32(128,128);return new h(f,b,d,C,w,x,A,a,null,q.DEFAULT_MIN_ZOOM,q.DEFAULT_MAX_ZOOM)};h.fromPictureFill=function(f,b,a=!1){const d=r.PICTURE_FILL_COLOR,{rect:e,width:u,height:m}=b;var x=e.x+r.SPRITE_PADDING,A=e.y+r.SPRITE_PADDING,D=x+u,B=A+m;x=l.i1616to32(x,A);D=l.i1616to32(D,B);B=c.nextHighestPowerOfTwo(z.pt2px(f.width));
255<B&&(B=255);A=c.nextHighestPowerOfTwo(z.pt2px(f.height));255<A&&(A=255);let C=z.pt2px(f.xoffset)+128;255<C&&(C=255);let w=z.pt2px(-f.yoffset)+128;255<w&&(w=255);B=l.i8888to32(B,A,C,w);A=l.i1616to32(128*f.xscale,128*f.yscale);a=l.i8888to32(0,0,0,a?255:0);return new h(f.materialKey,b,d,x,D,B,A,a,null,q.DEFAULT_MIN_ZOOM,q.DEFAULT_MAX_ZOOM)};return h}(g(k))})},"esri/views/2d/engine/webgl/mesh/templates/WGLLineTemplate":function(){define("../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/Logger ../../../../../../core/screenUtils ../../color ../../definitions ../../number ../../Utils ../../materialKey/MaterialKey ./util ./WGLBaseLineTemplate ./WGLMeshTemplate".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k){const n=c.getLogger("esri.views.2d.engine.webgl.WGLLineTemplate");return function(h){function f(b,a,d,e,u,m,x,A,D,B,C,w,E,I,F,H,K){var G=h.call(this)||this;b=v.LineMaterialKey.load(b);a&&(b.sdf=a.sdf,b.pattern=!0,b.textureBinding=a.textureBinding);G._capType=e;G._joinType=u;G._miterLimitCosine=q.getLimitCosine(m);G.tessellationProperties._fillColor=x;G.tessellationProperties._tl=A;G.tessellationProperties._br=D;G._hasPattern=B;G._isDashed=C;G._isColorLocked=w;G._zOrder=
I;G._effects=F;G._minMaxZoom=t.i1616to32(Math.round(H*r.MIN_MAX_ZOOM_PRECISION_FACTOR),Math.round(K*r.MIN_MAX_ZOOM_PRECISION_FACTOR));G._materialKey=b.data;G.tessellationProperties._bitset=w?1:0;G.tessellationProperties._halfWidth=.5*d;G.tessellationProperties._halfReferenceWidth=.5*E;G.tessellationProperties.offset=0;G._initializeTessellator(!1);return G}p._inheritsLoose(f,h);f.fromCIMLine=function(b,a,d){var e=b.color,u=b.scaleFactor||1;const m=b.isDashed;let x=b.cap;m&&1===x&&(x=2);const A=b.join;
u*=z.pt2px(b.width);const D=z.pt2px(b.referenceWidth),B=z.pt2px(b.miterLimit);e=e&&y.premultiplyAlphaRGBA(e)||0;const [C,w]=q.getMinMaxZoom(b.scaleInfo,d);if(!a)return new f(b.materialKey,a,u,x,A,B,e,0,0,!1,m,b.colorLocked,D,b.zOrder,b.effects,C,w);const {rect:E,width:I,height:F}=a;var H=E.x+r.SPRITE_PADDING;const K=E.y+r.SPRITE_PADDING;d=H+I;const G=K+F;H=t.i1616to32(H,K);d=t.i1616to32(d,G);return new f(b.materialKey,a,u,x,A,B,e,H,d,!0,m,b.colorLocked,D,b.zOrder,b.effects,C,w)};f.fromSimpleLine=
function(b,a){var {color:d}=b;const e="esriSLSSolid"!==b.style&&"esriSLSNull"!==b.style,u=l.getCapType(b.cap||"round"),m=l.getJoinType(b.join||"round");d=d&&"esriSLSNull"!==b.style&&y.premultiplyAlphaRGBAArray(d)||0;"esriSLSNull"===b.style&&(d=0);const x=z.pt2px(b.width),A=b.miterLimit;if(!a)return new f(b.materialKey,a,x,u,m,A,d,0,0,!1,e,!1,x,0,null,q.DEFAULT_MIN_ZOOM,q.DEFAULT_MAX_ZOOM);const {rect:D,width:B,height:C}=a;var w=D.x+r.SPRITE_PADDING;const E=D.y+r.SPRITE_PADDING;var I=w+B;const F=E+
C;w=t.i1616to32(w,E);I=t.i1616to32(I,F);return new f(b.materialKey,a,x,u,m,A,d,w,I,!0,e,!1,x,0,null,q.DEFAULT_MIN_ZOOM,q.DEFAULT_MAX_ZOOM)};f.fromPictureLineSymbol=function(b,a,d,e){n.error("PictureLineSymbol support does not exist!");return null};return f}(g(k))})},"esri/views/2d/engine/webgl/util/Lock":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","../../../../../core/promiseUtils"],function(p,c,z){function y(){y=c._asyncToGenerator(function*(t,l,v){try{yield t.acquire(),
yield l(v),t.release()}catch(q){throw t.release(),q;}});return y.apply(this,arguments)}let r=function(){function t(){this._resolver=null}var l=t.prototype;l.isHeld=function(){return!!this._resolver};l.acquire=function(){var v=c._asyncToGenerator(function*(){if(!this._resolver)return this._resolver=z.createResolver(),Promise.resolve();yield this._resolver.promise;yield this.acquire()});return function(){return v.apply(this,arguments)}}();l.release=function(){const v=this._resolver;this._resolver=null;
v.resolve()};return t}();p.default=r;p.withLock=function(t,l,v){return y.apply(this,arguments)};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/views/2d/layers/features/schemaUtils":function(){define("exports ../../../../renderers/ClassBreaksRenderer ../../../../renderers/DictionaryRenderer ../../../../renderers/DotDensityRenderer ../../../../renderers/HeatmapRenderer ../../../../renderers/Renderer ../../../../renderers/SimpleRenderer ../../../../renderers/UniqueValueRenderer ../../../../renderers/support/jsonUtils ../../../../core/Error ../../../../core/has ../../../../core/lang ../../../../core/Logger ../../../../core/maybe ../../../../core/screenUtils ../../../../symbols/support/jsonUtils ../../engine/webgl/enums ../../engine/webgl/Utils ../../engine/webgl/materialKey/MaterialKey ../../engine/webgl/util/vvFlagUtils ./support/pixelBuffering ./support/rendererUtils ../support/clusterUtils ../support/util".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k,n,h,f,b,a,d,e,u,m,x,A,D,B){function C(O){switch(O.type){case "line-marker":var T;return{type:"line-marker",color:null==(T=O.color)?void 0:T.toJSON(),placement:O.placement,style:O.style};default:return a.fromJSON(O.toJSON()).toJSON()}}function w(O,T,Z){if(!O)return null;var aa=0;let Y=!1,ba=0;f.isSome(T)&&(ba=x.getPtMaxVVSize(T),"visualVariables"in T&&(aa=m.getVVFlags(T.visualVariables||[]),Y="dot-density"===T.type));switch(O.type){case "simple-fill":case "picture-fill":return E(O,
aa,Y,Z);case "simple-marker":case "picture-marker":return T=ba,aa=u.createMaterialKey(d.WGLGeometryType.MARKER,aa,!1,!1),Z=Z?u.hydrateMaterialKey(aa):aa,aa=C(O),O={materialKey:Z,hash:O.hash(),...aa,angle:O.angle,maxVVSize:T};case "simple-line":return I(O,aa,Z);case "text":return T=ba,aa=u.createMaterialKey(d.WGLGeometryType.TEXT,aa,!1,!1),Z=Z?u.hydrateMaterialKey(aa):aa,aa=C(O),O={materialKey:Z,hash:O.hash(),...aa,angle:O.angle,maxVVSize:T};case "label":return T=aa,aa=O.toJSON(),T=u.createMaterialKey(d.WGLGeometryType.LABEL,
T,!1,!1,aa.labelPlacement),O={materialKey:Z?u.hydrateMaterialKey(T):T,hash:O.hash(),...aa,labelPlacement:aa.labelPlacement};case "cim":return{type:"cim",rendererKey:aa,data:O.data,maxVVSize:ba};case "web-style":return{...C(O),type:"web-style",hash:O.hash(),rendererKey:aa,maxVVSize:ba};default:throw Error(`symbol not supported ${O.type}`);}}function E(O,T,Z,aa){Z=u.createMaterialKey(d.WGLGeometryType.FILL,T,!1,Z);var Y=aa?u.hydrateMaterialKey(Z):Z;const ba=O.clone();Z=ba.outline;ba.outline=null;O=
[];Y={materialKey:Y,hash:ba.hash(),...C(ba)};O.push(Y);Z&&(T=u.createMaterialKey(d.WGLGeometryType.LINE,T,!0,!1),aa={materialKey:aa?u.hydrateMaterialKey(T):T,hash:Z.hash(),...C(Z)},O.push(aa));return{type:"composite-symbol",layers:O,hash:O.reduce((fa,ha)=>ha.hash+fa,"")}}function I(O,T,Z){var aa=u.createMaterialKey(d.WGLGeometryType.LINE,T,!1,!1);const Y=Z?u.hydrateMaterialKey(aa):aa;O=O.clone();aa=O.marker;O.marker=null;const ba=[];ba.push({materialKey:Y,hash:O.hash(),...C(O)});if(aa){var fa;T=u.createMaterialKey(d.WGLGeometryType.MARKER,
T,!1,!1);Z=Z?u.hydrateMaterialKey(T):T;aa.color=null!=(fa=aa.color)?fa:O.color;ba.push({materialKey:Z,hash:aa.hash(),lineWidth:O.width,...C(aa)})}return{type:"composite-symbol",layers:ba,hash:ba.reduce((ha,la)=>la.hash+ha,"")}}function F(O,T){const Z=O.labelPlacement;var aa=U[T];if(!O.symbol)return N.warn("No ILabelClass symbol specified."),!0;if(!aa)return N.error(new g("mapview-labeling:unsupported-geometry-type",`Unable to create labels for Feature Layer, ${T} is not supported`)),!0;aa.some(Y=>
Y===Z)||(aa=aa[0],Z&&N.warn(`Found invalid label placement type ${Z} for ${T}. Defaulting to ${aa}`),O.labelPlacement=aa);return!1}function H(O,T){O=n.clone(O);return O.some(Z=>F(Z,T))?[]:O}function K(O,T=!1){try{var Z,aa;const Y=M(O,T),ba={};Y.map(fa=>{a:{switch(fa.target){case "feature":P(ba,L(O),fa);fa=void 0;break a;case "aggregate":if(!("featureReduction"in O)){fa=void 0;break a}var ha=O.featureReduction;if("selection"===ha.type)throw new g("ValidationError","Mapview does not support `selection` reduction type",
ha);P(ba,L(O),fa);ba.aggregate||(ba.aggregate={name:"aggregate",input:"feature",filters:null,attributes:{},params:{clusterRadius:b.pt2px(ha.clusterRadius/2),clusterPixelBuffer:64*Math.ceil(b.pt2px(ha.clusterMaxSize)/64),fields:fa.aggregateFields}});G(ba.aggregate,fa.attributes.fields);fa=void 0;break a}fa=void 0}return fa});return{source:{definitionExpression:O.definitionExpression,fields:O.fields.map(fa=>fa.toJSON()),gdbVersion:O.gdbVersion,historicMoment:null==(Z=O.historicMoment)?void 0:Z.getTime(),
outFields:O.availableFields,pixelBuffer:O.pixelBuffer,spatialReference:O.spatialReference.toJSON(),timeExtent:null==(aa=O.timeExtent)?void 0:aa.toJSON()},attributes:{fields:{},indexCount:0},processors:Y,targets:ba}}catch(Y){if("ValidationError"===Y.fieldName)return N.error(Y),null;throw Y;}}function G(O,T){for(const Z in T){const aa=T[Z];if(aa.target!==O.name)continue;const Y=O.attributes[Z];Y?(Y.context.mesh=Y.context.mesh||aa.context.mesh,Y.context.storage=Y.context.storage||aa.context.storage):
O.attributes[Z]=aa}return O}function L(O){var T,Z,aa,Y,ba;return[null!=(T=null==(Z=O.filter)?void 0:Z.toJSON())?T:null,null!=(aa=null==(Y=O.effect)?void 0:null==(ba=Y.filter)?void 0:ba.toJSON())?aa:null]}function P(O,T,Z){O.feature||(O.feature={name:"feature",input:"source",filters:T,attributes:{}});G(O.feature,Z.attributes.fields);return O}function R(O,T){return T.field?S(O,{...T,type:"field",field:T.field}):T.valueExpression?S(O,{...T,type:"expression",valueExpression:T.valueExpression}):{field:null,
fieldIndex:null}}function S(O,T){switch(T.type){case "expression":var Z=T.valueExpression;if(!O.fields[Z]){var aa=O.indexCount++;O.fields[Z]={...T,name:Z,fieldIndex:aa}}return{fieldIndex:O.fields[Z].fieldIndex};case "label-expression":return Z=JSON.stringify(T.label),O.fields[Z]||(aa=O.indexCount++,O.fields[Z]={...T,name:Z,fieldIndex:aa}),{fieldIndex:O.fields[Z].fieldIndex};case "field":Z=T.field;if("aggregate"===T.target&&O.fields[Z])return{field:Z};O.fields[Z]={...T,name:Z};return{field:Z};case "statistic":return O.fields[T.name]=
{...T},{field:T.name}}}function M(O,T=!1){const Z=[];let aa=0;Z.push(W(O,aa++,T));return Z}function V(O,T,Z,aa,Y,ba=!1){T=S(T,{type:"label-expression",target:aa,context:{mesh:!0},resultType:"string",label:{labelExpression:Z.labelExpression,labelExpressionInfo:Z.labelExpressionInfo?{expression:Z.labelExpressionInfo.expression}:null,symbol:!!Z.symbol,where:Z.where}});({fieldIndex:T}=T);return{...w(Z,O,ba),fieldIndex:T,target:aa,index:Y}}function W(O,T,Z=!1){const aa={indexCount:0,fields:{}};var Y="featureReduction"in
O&&O.featureReduction;T=Y?"aggregate":"feature";if("sublayers"in O){var ba={type:"subtype",subtypeField:O.subtypeField,renderers:{}},fa={type:"subtype",mapping:{},target:"feature"},ha={type:"subtype",classes:{}};Y={type:"symbol",target:"feature",aggregateFields:[],attributes:aa,storage:fa,mesh:{matcher:ba,aggregateMatcher:null,labels:ha}};var la=new Set;let wa=0;for(const {renderer:Ca,subtypeCode:Ba,labelingInfo:Fa,labelsVisible:Ma}of O.sublayers){O=xa(aa,T,Ca,Z);var qa=ka(aa,T,Ca),va=Ma&&Fa;if("visualVariables"in
Ca&&Ca.visualVariables&&Ca.visualVariables.length)throw new g("ValidationError","Visual variables are currently not supported for subtype layers");if("dictionary"===O.type)throw new g("ValidationError","Dictionary renderer is not supported in subtype layers");if("subtype"===O.type)throw new g("ValidationError","Nested subtype renderers is not supported");if(f.isSome(qa)&&"subtype"===qa.type)throw new g("ValidationError","Nested subtype storage is not supported");if(f.isSome(qa)&&"dot-density"===qa.type)throw new g("ValidationError",
"Dot density attributes are not supported in subtype layers");if(la.has(Ba))throw new g("ValidationError","Subtype codes for sublayers must be unique");la.add(Ba);ba.renderers[Ba]=O;fa.mapping[Ba]=qa;va&&(ha.classes[Ba]=va.map(Ga=>V(Ca,aa,Ga,"feature",wa++,Z)))}return Y}switch(O.renderer.type){case "heatmap":{const {blurRadius:wa,fieldOffset:Ca,field:Ba}=O.renderer;return{type:"heatmap",aggregateFields:[],attributes:aa,target:T,storage:null,mesh:{blurRadius:wa,fieldOffset:Ca,field:R(aa,{target:T,
field:Ba,resultType:"numeric"}).field}}}default:{ba=[];const wa="aggregate"===T?D.createClusterRenderer(ba,O.renderer,Y,null):O.renderer;ea(aa,ba);fa=xa(aa,T,wa,Z);la=null;ha=ka(aa,T,wa);qa=B.toJSONGeometryType(O.geometryType);O=O.labelsVisible&&O.labelingInfo||[];va=[];if(Y){if("selection"===Y.type)throw new g("ValidationError","Mapview does not support `selection` reduction type",Y);Y.symbol&&(la=new l({symbol:Y.symbol,visualVariables:"visualVariables"in wa?wa.visualVariables:null}),la=xa(aa,T,
la,Z));va=Y&&Y.labelsVisible&&Y.labelingInfo||[]}O=H(O,qa);va=H(va,qa);let Ca=0;O=[...O.map(Ba=>V(wa,aa,Ba,"feature",Ca++,Z)),...va.map(Ba=>V(wa,aa,Ba,"aggregate",Ca++,Z))];return{type:"symbol",target:T,attributes:aa,aggregateFields:ba,storage:ha,mesh:{matcher:fa,labels:{type:"simple",classes:O},aggregateMatcher:la}}}}}function ea(O,T){const Z={mesh:!0,storage:!0};for(const aa of T){const {name:Y,outStatistic:ba}=aa,{statisticType:fa,onStatisticField:ha}=ba;let la=T=null,qa=null;"onStatisticValueExpression"in
ba?la=S(O,{type:"expression",target:"feature",valueExpression:ba.onStatisticValueExpression,resultType:"numeric"}).fieldIndex:"onStatisticNormalizationField"in ba?(T=S(O,{type:"field",target:"feature",field:ha,resultType:"numeric"}).field,qa=ba.onStatisticNormalizationField):T=S(O,{type:"field",target:"feature",field:ha,resultType:"numeric"}).field;S(O,{type:"statistic",target:"aggregate",name:Y,context:Z,inField:T,inNormalizationField:qa,inFieldIndex:la,statisticType:fa})}}function ka(O,T,Z){switch(Z.type){case "dot-density":return sa(O,
T,Z.attributes);case "simple":case "class-breaks":case "unique-value":case "dictionary":return ua(O,T,Z.visualVariables);case "heatmap":return null}}function sa(O,T,Z){return Z&&Z.length?{type:"dot-density",mapping:Z.map((aa,Y)=>{const {field:ba,fieldIndex:fa}=R(O,{valueExpression:aa.valueExpression,field:aa.field,resultType:"numeric",target:T});return{binding:Y,field:ba,fieldIndex:fa}}),target:T}:{type:"dot-density",mapping:[],target:T}}function ua(O,T,Z){if(!Z||!Z.length)return{type:"visual-variable",
mapping:[],target:T};const aa={storage:!0};return{type:"visual-variable",mapping:A.simplifyVisualVariables(Z).map(Y=>{var ba;const fa=e.getVVType(Y.type),{field:ha,fieldIndex:la}=R(O,{target:T,valueExpression:Y.valueExpression,field:Y.field,context:aa,resultType:"numeric"});switch(Y.type){case "size":return"$view.scale"===Y.valueExpression?null:{type:"size",binding:fa,field:ha,fieldIndex:la,normalizationField:R(O,{target:T,field:Y.normalizationField,context:aa,resultType:"numeric"}).field,valueRepresentation:null!=
(ba=Y.valueRepresentation)?ba:null};case "color":return{type:"color",binding:fa,field:ha,fieldIndex:la,normalizationField:R(O,{target:T,field:Y.normalizationField,context:aa,resultType:"numeric"}).field};case "opacity":return{type:"opacity",binding:fa,field:ha,fieldIndex:la,normalizationField:R(O,{target:T,field:Y.normalizationField,context:aa,resultType:"numeric"}).field};case "rotation":return{type:"rotation",binding:fa,field:ha,fieldIndex:la}}}).filter(Y=>Y),target:T}}function xa(O,T,Z,aa=!1){O=
f.unwrapOr(O,{indexCount:0,fields:{}});switch(Z.type){case "simple":case "dot-density":return oa(O,Z,"dot-density"===Z.type,aa);case "class-breaks":return ra(O,T,Z,aa);case "unique-value":return pa(O,T,Z,aa);case "dictionary":return{type:"dictionary",renderer:Z.toJSON()}}}function oa(O,T,Z,aa=!1){O=T.getSymbols();return{type:"simple",symbol:w(O.length?O[0]:null,T,aa),isDotDensity:Z}}function ra(O,T,Z,aa=!1){const Y=Z.backgroundFillSymbol,{field:ba,fieldIndex:fa}=R(O,{target:T,field:Z.field,valueExpression:Z.valueExpression,
resultType:"numeric",context:{mesh:!0,use:"renderer.field"}});T=Z.normalizationType;T="log"===T?"esriNormalizeByLog":"percent-of-total"===T?"esriNormalizeByPercentOfTotal":"field"===T?"esriNormalizeByField":null;const ha=Z.classBreakInfos.map(la=>({symbol:w(la.symbol,Z,aa),min:la.minValue,max:la.maxValue})).sort((la,qa)=>la.min-qa.min);return{type:"interval",attributes:O.fields,field:ba,fieldIndex:fa,backgroundFillSymbol:w(Y,Z,aa),defaultSymbol:w(Z.defaultSymbol,Z,aa),intervals:ha,normalizationField:Z.normalizationField,
normalizationTotal:Z.normalizationTotal,normalizationType:T,isMaxInclusive:Z.isMaxInclusive}}function pa(O,T,Z,aa=!1){const Y=[],ba=Z.backgroundFillSymbol;T={target:T,context:{mesh:!0},resultType:"string"};if(Z.field&&"string"!==typeof Z.field)throw new g("ValidationError","Expected renderer.field to be a string",Z);const {field:fa,fieldIndex:ha}=R(O,{...T,field:Z.field,valueExpression:Z.valueExpression});for(const la of Z.uniqueValueInfos)Y.push({value:""+la.value,symbol:w(la.symbol,Z,aa)});return{type:"map",
attributes:O.fields,field:fa,fieldIndex:ha,field2:R(O,{...T,field:Z.field2}).field,field3:R(O,{...T,field:Z.field3}).field,fieldDelimiter:Z.fieldDelimiter,backgroundFillSymbol:w(ba,Z),defaultSymbol:w(Z.defaultSymbol,Z),map:Y}}const N=h.getLogger("esri.views.2d.layers.features.schemaUtils"),U={esriGeometryPoint:"above-right above-center above-left center-center center-left center-right below-center below-left below-right".split(" "),esriGeometryPolygon:["always-horizontal"],esriGeometryPolyline:["center-along"],
esriGeometryMultipoint:null};p.addAggregateFields=ea;p.createMatcherSchema=xa;p.createSchema=function(O){k("esri-2d-update-debug")&&console.debug("Created new schema",K(O,!0));return K(O)};p.createSymbolSchema=w;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/renderers/ClassBreaksRenderer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../symbols ../core/jsonMap ../core/lang ../core/Logger ../core/maybe ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/has ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ../core/accessorSupport/ensureType ../layers/support/fieldUtils ./Renderer ./mixins/VisualVariablesMixin ./support/ClassBreakInfo ./support/commonProperties ./support/LegendOptions ../support/arcadeOnDemand".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k,n,h,f,b,a,d,e,u,m,x,A){var D;const B=t.getLogger("esri.renderers.ClassBreaksRenderer");y=new y.JSONMap({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});const C=b.ensureType(u);d=D=function(w){function E(F){F=w.call(this,F)||this;F._compiledValueExpression={valueExpression:null,compiledFunction:null};F.backgroundFillSymbol=null;F.classBreakInfos=null;F.defaultLabel=null;F.defaultSymbol=null;F.field=null;F.isMaxInclusive=
!0;F.legendOptions=null;F.normalizationField=null;F.normalizationTotal=null;F.type="class-breaks";F.valueExpression=null;F.valueExpressionTitle=null;F._set("classBreakInfos",[]);return F}p._inheritsLoose(E,w);var I=E.prototype;I.readClassBreakInfos=function(F,H,K){if(Array.isArray(F)){var G=H.minValue;return F.map(L=>{const P=new u;P.read(L,K);null==P.minValue&&(P.minValue=G);null==P.maxValue&&(P.maxValue=P.minValue);G=P.maxValue;return P})}};I.writeClassBreakInfos=function(F,H,K,G){F=F.map(L=>L.write({},
G));this._areClassBreaksConsecutive()&&F.forEach(L=>delete L.classMinValue);H[K]=F};I.castField=function(F){return null==F?F:"function"===typeof F?(B.error(".field: field must be a string value"),null):b.ensureString(F)};I.addClassBreakInfo=function(F,H,K){let G=null;G="number"===typeof F?new u({minValue:F,maxValue:H,symbol:z.ensureType(K)}):C(r.clone(F));this.classBreakInfos.push(G);1===this.classBreakInfos.length&&this.notifyChange("minValue")};I.removeClassBreakInfo=function(F,H){const K=this.classBreakInfos.length;
for(let G=0;G<K;G++){const L=[this.classBreakInfos[G].minValue,this.classBreakInfos[G].maxValue];if(L[0]===F&&L[1]===H){this.classBreakInfos.splice(G,1);break}}};I.getBreakIndex=function(F,H){this.valueExpression&&(l.isNone(H)||l.isNone(H.arcade))&&B.warn("");return this.valueExpression?this._getBreakIndexForExpression(F,H):this._getBreakIndexForField(F)};I.getClassBreakInfo=function(){var F=p._asyncToGenerator(function*(H,K){let G=K;this.valueExpression&&(l.isNone(K)||l.isNone(K.arcade))&&(G={...G,
arcade:yield A.loadArcade()});H=this.getBreakIndex(H,G);return-1!==H?this.classBreakInfos[H]:null});return function(H,K){return F.apply(this,arguments)}}();I.getSymbol=function(F,H){if(this.valueExpression&&(l.isNone(H)||l.isNone(H.arcade)))B.error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");else return F=this.getBreakIndex(F,H),-1<F?this.classBreakInfos[F].symbol:this.defaultSymbol};I.getSymbolAsync=function(){var F=p._asyncToGenerator(function*(H,K){let G=K;if(this.valueExpression&&
(l.isNone(K)||l.isNone(K.arcade))){K=yield A.loadArcade();const {arcadeUtils:L}=K;L.hasGeometryOperations(this.valueExpression)&&(yield L.enableGeometryOperations());G={...G,arcade:K}}H=this.getBreakIndex(H,G);return-1<H?this.classBreakInfos[H].symbol:this.defaultSymbol});return function(H,K){return F.apply(this,arguments)}}();I.getSymbols=function(){const F=[];this.classBreakInfos.forEach(H=>{H.symbol&&F.push(H.symbol)});this.defaultSymbol&&F.push(this.defaultSymbol);return F};I.getAttributeHash=
function(){return this.visualVariables&&this.visualVariables.reduce((F,H)=>F+H.getAttributeHash(),"")};I.getMeshHash=function(){const F=JSON.stringify(this.backgroundFillSymbol),H=JSON.stringify(this.defaultSymbol),K=`${this.normalizationField}.${this.normalizationType}.${this.normalizationTotal}`,G=this.classBreakInfos.reduce((L,P)=>L+P.getMeshHash(),"");return`${F}.${H}.${G}.${K}.${this.field}.${this.valueExpression}`};I.clone=function(){return new D({field:this.field,backgroundFillSymbol:this.backgroundFillSymbol&&
this.backgroundFillSymbol.clone(),defaultLabel:this.defaultLabel,defaultSymbol:this.defaultSymbol&&this.defaultSymbol.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:r.clone(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:r.clone(this.visualVariables),legendOptions:r.clone(this.legendOptions),
authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})};I.collectRequiredFields=function(){var F=p._asyncToGenerator(function*(H,K){H=[this.collectVVRequiredFields(H,K),this.collectSymbolFields(H,K)];yield Promise.all(H)});return function(H,K){return F.apply(this,arguments)}}();I.collectSymbolFields=function(){var F=p._asyncToGenerator(function*(H,K){const G=[...this.getSymbols().map(L=>L.collectRequiredFields(H,K)),a.collectArcadeFieldNames(H,K,this.valueExpression)];a.collectField(H,K,this.field);
a.collectField(H,K,this.normalizationField);yield Promise.all(G)});return function(H,K){return F.apply(this,arguments)}}();I._getBreakIndexForExpression=function(F,H){const {viewingMode:K,scale:G,spatialReference:L,arcade:P}=l.unwrapOr(H,{});var R=this._compiledValueExpression.valueExpression===this.valueExpression?this._compiledValueExpression.compiledFunction:null;H=l.unwrap(P).arcadeUtils;R||(R=H.createSyntaxTree(this.valueExpression),R=H.createFunction(R),this._compiledValueExpression.compiledFunction=
R);this._compiledValueExpression.valueExpression=this.valueExpression;F=H.executeFunction(R,H.createExecContext(F,H.getViewInfo({viewingMode:K,scale:G,spatialReference:L})));return this._getBreakIndexfromInfos(F)};I._getBreakIndexForField=function(F){var H=F.attributes;F=this.normalizationType;let K=parseFloat(H[this.field]);if(F){const G=this.normalizationTotal;H=parseFloat(H[this.normalizationField]);if("log"===F)K=Math.log(K)*Math.LOG10E;else if("percent-of-total"===F&&!isNaN(G))K=K/G*100;else if("field"===
F&&!isNaN(H)){if(isNaN(K)||isNaN(H))return-1;K/=H}}return this._getBreakIndexfromInfos(K)};I._getBreakIndexfromInfos=function(F){const H=this.isMaxInclusive;if(null!=F&&"number"===typeof F&&!isNaN(F))for(let K=0;K<this.classBreakInfos.length;K++){const G=[this.classBreakInfos[K].minValue,this.classBreakInfos[K].maxValue];if(G[0]<=F&&(H?F<=G[1]:F<G[1]))return K}return-1};I._areClassBreaksConsecutive=function(){const F=this.classBreakInfos,H=F.length;for(let K=1;K<H;K++)if(F[K-1].maxValue!==F[K].minValue)return!1;
return!0};p._createClass(E,[{key:"minValue",get:function(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}},{key:"normalizationType",get:function(){let F=this._get("normalizationType");const H=!!this.normalizationField,K=null!=this.normalizationTotal;if(H||K)F=H&&"field"||K&&"percent-of-total"||null,H&&K&&B.warn("warning: both normalizationField and normalizationTotal are set!");else if("field"===F||"percent-of-total"===F)F=null;return F},set:function(F){this._set("normalizationType",
F)}},{key:"arcadeRequired",get:function(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}}]);return E}(e.VisualVariablesMixin(d));c.__decorate([v.property(m.rendererBackgroundFillSymbolProperty)],d.prototype,"backgroundFillSymbol",void 0);c.__decorate([v.property({type:[u]})],d.prototype,"classBreakInfos",void 0);c.__decorate([n.reader("classBreakInfos")],d.prototype,"readClassBreakInfos",null);c.__decorate([f.writer("classBreakInfos")],d.prototype,"writeClassBreakInfos",null);
c.__decorate([v.property({type:String,json:{write:!0}})],d.prototype,"defaultLabel",void 0);c.__decorate([v.property(m.rendererSymbolProperty)],d.prototype,"defaultSymbol",void 0);c.__decorate([v.property({type:String,json:{write:!0}})],d.prototype,"field",void 0);c.__decorate([q.cast("field")],d.prototype,"castField",null);c.__decorate([v.property({type:Boolean})],d.prototype,"isMaxInclusive",void 0);c.__decorate([v.property({type:x["default"],json:{write:!0}})],d.prototype,"legendOptions",void 0);
c.__decorate([v.property({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy(){return 0!==this.classBreakInfos.length&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],d.prototype,"minValue",null);c.__decorate([v.property({type:String,json:{write:!0}})],d.prototype,"normalizationField",void 0);c.__decorate([v.property({type:Number,cast:w=>b.ensureNumber(w),json:{write:!0}})],d.prototype,"normalizationTotal",void 0);c.__decorate([v.property({type:y.apiValues,value:null,
json:{type:y.jsonValues,read:y.read,write:y.write}})],d.prototype,"normalizationType",null);c.__decorate([k.enumeration({classBreaks:"class-breaks"})],d.prototype,"type",void 0);c.__decorate([v.property({type:String,json:{write:!0}})],d.prototype,"valueExpression",void 0);c.__decorate([v.property({type:String,json:{write:!0}})],d.prototype,"valueExpressionTitle",void 0);return d=D=c.__decorate([h.subclass("esri.renderers.ClassBreaksRenderer")],d)})},"esri/renderers/Renderer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/jsonMap ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/accessorSupport/decorators/subclass ./support/AuthoringInfo".split(" "),
function(p,c,z,y,r,t,l,v,q,g){z=new z.JSONMap({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap",dotDensity:"dot-density",dictionary:"dictionary"},{ignoreUnknown:!0});y=function(k){function n(f){f=k.call(this,f)||this;f.authoringInfo=null;f.type=null;return f}p._inheritsLoose(n,k);var h=n.prototype;h.getRequiredFields=function(){var f=p._asyncToGenerator(function*(b){if(!this.collectRequiredFields)return[];const a=new Set;yield this.collectRequiredFields(a,b);
return Array.from(a).sort()});return function(b){return f.apply(this,arguments)}}();h.getSymbol=function(f,b){};h.getSymbolAsync=function(){var f=p._asyncToGenerator(function*(b,a){});return function(b,a){return f.apply(this,arguments)}}();h.getSymbols=function(){return[]};h.getAttributeHash=function(){return JSON.stringify(this)};h.getMeshHash=function(){return JSON.stringify(this)};return n}(y.JSONSupport);c.__decorate([r.property({type:g,json:{write:!0}})],y.prototype,"authoringInfo",void 0);c.__decorate([r.property({type:z.apiValues,
readOnly:!0,json:{type:z.jsonValues,read:!1,write:{writer:z.write,ignoreOrigin:!0}}})],y.prototype,"type",void 0);return y=c.__decorate([q.subclass("esri.renderers.Renderer")],y)})},"esri/renderers/support/AuthoringInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ./AuthoringInfoFieldInfo ./AuthoringInfoVisualVariable ../../rest/support/colorRamps".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k,n,h,f){var b;v=new z.JSONMap({esriClassifyDefinedInterval:"defined-interval",esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"});z=new z.JSONMap({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density"});
q="inches feet yards miles nautical-miles millimeters centimeters decimeters meters kilometers decimal-degrees".split(" ");y=b=function(a){function d(u){u=a.call(this,u)||this;u.colorRamp=null;u.lengthUnit=null;u.maxSliderValue=null;u.minSliderValue=null;u.visualVariables=null;return u}p._inheritsLoose(d,a);var e=d.prototype;e.readColorRamp=function(u){if(u)return f.fromJSON(u)};e.clone=function(){return new b({classificationMethod:this.classificationMethod,colorRamp:r.clone(this.colorRamp),fields:this.fields&&
this.fields.slice(0),field1:r.clone(this.field1),field2:r.clone(this.field2),focus:this.focus,numClasses:this.numClasses,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,lengthUnit:this.lengthUnit,statistics:this.statistics,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map(u=>u.clone()),univariateSymbolStyle:this.univariateSymbolStyle,univariateTheme:this.univariateTheme})};p._createClass(d,[{key:"classificationMethod",
get:function(){const u=this._get("classificationMethod"),m=this.type;return m&&"relationship"!==m?"class-breaks-size"===m||"class-breaks-color"===m?u||"manual":null:u},set:function(u){this._set("classificationMethod",u)}},{key:"fields",get:function(){return this.type&&"predominance"!==this.type?null:this._get("fields")},set:function(u){this._set("fields",u)}},{key:"field1",get:function(){return this.type&&"relationship"!==this.type?null:this._get("field1")},set:function(u){this._set("field1",u)}},
{key:"field2",get:function(){return this.type&&"relationship"!==this.type?null:this._get("field2")},set:function(u){this._set("field2",u)}},{key:"focus",get:function(){return this.type&&"relationship"!==this.type?null:this._get("focus")},set:function(u){this._set("focus",u)}},{key:"numClasses",get:function(){return this.type&&"relationship"!==this.type?null:this._get("numClasses")},set:function(u){this._set("numClasses",u)}},{key:"statistics",get:function(){return"univariate-color-size"===this.type&&
"above-and-below"===this.univariateTheme?this._get("statistics"):null},set:function(u){this._set("statistics",u)}},{key:"standardDeviationInterval",get:function(){const u=this.type;return u&&"relationship"!==u&&"class-breaks-size"!==u&&"class-breaks-color"!==u?null:this.classificationMethod&&"standard-deviation"!==this.classificationMethod?null:this._get("standardDeviationInterval")},set:function(u){this._set("standardDeviationInterval",u)}},{key:"type",get:function(){return this._get("type")},set:function(u){let m=
u;"classed-size"===u?m="class-breaks-size":"classed-color"===u&&(m="class-breaks-color");this._set("type",m)}},{key:"univariateSymbolStyle",get:function(){return"univariate-color-size"===this.type&&"above-and-below"===this.univariateTheme?this._get("univariateSymbolStyle"):null},set:function(u){this._set("univariateSymbolStyle",u)}},{key:"univariateTheme",get:function(){return"univariate-color-size"===this.type?this._get("univariateTheme"):null},set:function(u){this._set("univariateTheme",u)}}]);
return d}(y.JSONSupport);c.__decorate([t.property({type:v.apiValues,value:null,json:{type:v.jsonValues,read:v.read,write:v.write,origins:{"web-document":{default:"manual",type:v.jsonValues,read:v.read,write:v.write}}}})],y.prototype,"classificationMethod",null);c.__decorate([t.property({types:f.types,json:{write:!0}})],y.prototype,"colorRamp",void 0);c.__decorate([g.reader("colorRamp")],y.prototype,"readColorRamp",null);c.__decorate([t.property({type:[String],value:null,json:{write:!0}})],y.prototype,
"fields",null);c.__decorate([t.property({type:n["default"],value:null,json:{write:!0}})],y.prototype,"field1",null);c.__decorate([t.property({type:n["default"],value:null,json:{write:!0}})],y.prototype,"field2",null);c.__decorate([t.property({type:["HH","HL","LH","LL"],value:null,json:{write:!0}})],y.prototype,"focus",null);c.__decorate([t.property({type:Number,value:null,json:{type:l.Integer,write:!0}})],y.prototype,"numClasses",null);c.__decorate([t.property({type:q,json:{type:q,read:!1,write:!1,
origins:{"web-scene":{read:!0,write:!0}}}})],y.prototype,"lengthUnit",void 0);c.__decorate([t.property({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],y.prototype,"maxSliderValue",void 0);c.__decorate([t.property({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],y.prototype,"minSliderValue",void 0);c.__decorate([t.property({type:Object,value:null,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],y.prototype,"statistics",null);c.__decorate([t.property({type:[.25,
.33,.5,1],value:null,json:{type:[.25,.33,.5,1],write:!0}})],y.prototype,"standardDeviationInterval",null);c.__decorate([t.property({type:z.apiValues,value:null,json:{type:z.jsonValues,read:z.read,write:z.write}})],y.prototype,"type",null);c.__decorate([t.property({type:[h],json:{write:!0}})],y.prototype,"visualVariables",void 0);c.__decorate([t.property({type:"caret circle-caret arrow circle-arrow plus-minus circle-plus-minus square circle triangle happy-sad thumb custom".split(" "),value:null,json:{write:!0,
origins:{"web-scene":{write:!1}}}})],y.prototype,"univariateSymbolStyle",null);c.__decorate([t.property({type:["high-to-low","above-and-below","above","below","90-10"],value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],y.prototype,"univariateTheme",null);return y=b=c.__decorate([k.subclass("esri.renderers.support.AuthoringInfo")],y)})},"esri/renderers/support/AuthoringInfoFieldInfo":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/has ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ./AuthoringInfoClassBreakInfo".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k,n){var h;p.AuthoringInfoFieldInfo=h=function(f){function b(a){a=f.call(this,a)||this;a.field="";a.normalizationField="";a.label="";a.classBreakInfos=[];return a}c._inheritsLoose(b,f);b.prototype.clone=function(){return new h({field:this.field,normalizationField:this.normalizationField,label:this.label,classBreakInfos:r.clone(this.classBreakInfos)})};return b}(y.JSONSupport);z.__decorate([t.property({type:String,json:{write:!0}})],p.AuthoringInfoFieldInfo.prototype,"field",
void 0);z.__decorate([t.property({type:String,json:{write:!0}})],p.AuthoringInfoFieldInfo.prototype,"normalizationField",void 0);z.__decorate([t.property({type:String,json:{write:!0}})],p.AuthoringInfoFieldInfo.prototype,"label",void 0);z.__decorate([t.property({type:[n["default"]],json:{write:!0}})],p.AuthoringInfoFieldInfo.prototype,"classBreakInfos",void 0);p.AuthoringInfoFieldInfo=h=z.__decorate([k.subclass("esri.renderers.support.AuthoringInfoFieldInfo")],p.AuthoringInfoFieldInfo);p.default=
p.AuthoringInfoFieldInfo;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/renderers/support/AuthoringInfoClassBreakInfo":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass".split(" "),function(p,c,z,y,r,t,l,v,q,g){var k;p.AuthoringInfoClassBreakInfo=
k=function(n){function h(f){f=n.call(this,f)||this;f.minValue=0;f.maxValue=0;return f}c._inheritsLoose(h,n);h.prototype.clone=function(){return new k({minValue:this.minValue,maxValue:this.maxValue})};return h}(y.JSONSupport);z.__decorate([r.property({type:Number,json:{write:!0}})],p.AuthoringInfoClassBreakInfo.prototype,"minValue",void 0);z.__decorate([r.property({type:Number,json:{write:!0}})],p.AuthoringInfoClassBreakInfo.prototype,"maxValue",void 0);p.AuthoringInfoClassBreakInfo=k=z.__decorate([g.subclass("esri.renderer.support.AuthoringInfoClassBreakInfo")],
p.AuthoringInfoClassBreakInfo);p.default=p.AuthoringInfoClassBreakInfo;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/renderers/support/AuthoringInfoVisualVariable":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/decorators/cast ../../core/Logger ../../core/accessorSupport/decorators/subclass".split(" "),function(p,c,z,y,r,t,
l,v,q){var g;t=new z.JSONMap({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"});z=new z.JSONMap({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"});v={key(f){return"number"===typeof f?"number":"string"},typeMap:{number:Number,string:String},base:null};const k=["high-to-low","above-and-below","centered-on","extremes"],n=[...new Set("high-to-low above-and-below centered-on extremes 90-10 above below high-to-low above-and-below 90-10 above below".split(" "))],
h="seconds minutes hours days months years".split(" ");y=g=function(f){function b(d){d=f.call(this,d)||this;d.endTime=null;d.field=null;d.maxSliderValue=null;d.minSliderValue=null;d.startTime=null;d.type=null;d.units=null;return d}p._inheritsLoose(b,f);var a=b.prototype;a.castEndTime=function(d){return"string"===typeof d||"number"===typeof d?d:null};a.castStartTime=function(d){return"string"===typeof d||"number"===typeof d?d:null};a.clone=function(){return new g({endTime:this.endTime,field:this.field,
maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})};p._createClass(b,[{key:"style",get:function(){return"color"===this.type?this._get("style"):null},set:function(d){this._set("style",d)}},{key:"theme",get:function(){return"color"===this.type||"size"===this.type?this._get("theme")||"high-to-low":null},set:function(d){this._set("theme",d)}}]);return b}(y.JSONSupport);c.__decorate([r.property({types:v,
json:{write:!0}})],y.prototype,"endTime",void 0);c.__decorate([l.cast("endTime")],y.prototype,"castEndTime",null);c.__decorate([r.property({type:String,json:{write:!0}})],y.prototype,"field",void 0);c.__decorate([r.property({type:Number,json:{write:!0}})],y.prototype,"maxSliderValue",void 0);c.__decorate([r.property({type:Number,json:{write:!0}})],y.prototype,"minSliderValue",void 0);c.__decorate([r.property({types:v,json:{write:!0}})],y.prototype,"startTime",void 0);c.__decorate([l.cast("startTime")],
y.prototype,"castStartTime",null);c.__decorate([r.property({type:t.apiValues,value:null,json:{type:t.jsonValues,read:t.read,write:t.write}})],y.prototype,"style",null);c.__decorate([r.property({type:n,value:null,json:{type:n,origins:{"web-scene":{type:k,write:{writer:(f,b)=>{-1<k.indexOf(f)&&(b.theme=f)}}}},write:!0}})],y.prototype,"theme",null);c.__decorate([r.property({type:z.apiValues,json:{type:z.jsonValues,read:z.read,write:z.write}})],y.prototype,"type",void 0);c.__decorate([r.property({type:h,
json:{type:h,write:!0}})],y.prototype,"units",void 0);return y=g=c.__decorate([q.subclass("esri.renderers.support.AuthoringInfoVisualVariable")],y)})},"esri/rest/support/colorRamps":function(){define(["exports","./AlgorithmicColorRamp","./ColorRamp","./MultipartColorRamp"],function(p,c,z,y){z={key:"type",base:z,typeMap:{algorithmic:c,multipart:y}};p.fromJSON=function(r){return r&&r.type?"algorithmic"===r.type?c.fromJSON(r):"multipart"===r.type?y.fromJSON(r):null:null};p.types=z;Object.defineProperty(p,
"__esModule",{value:!0})})},"esri/rest/support/AlgorithmicColorRamp":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Color ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./ColorRamp".split(" "),function(p,c,z,y,r,t,l,v,q,g,k){var n;l=n=function(h){function f(b){b=h.call(this,b)||
this;b.algorithm=null;b.fromColor=null;b.toColor=null;b.type="algorithmic";return b}p._inheritsLoose(f,h);f.prototype.clone=function(){return new n({fromColor:y.clone(this.fromColor),toColor:y.clone(this.toColor),algorithm:this.algorithm})};return f}(k);c.__decorate([q.enumeration({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],l.prototype,"algorithm",void 0);c.__decorate([r.property({type:z,json:{type:[t.Integer],write:!0}})],l.prototype,"fromColor",void 0);
c.__decorate([r.property({type:z,json:{type:[t.Integer],write:!0}})],l.prototype,"toColor",void 0);c.__decorate([r.property({type:["algorithmic"]})],l.prototype,"type",void 0);return l=n=c.__decorate([g.subclass("esri.rest.support.AlgorithmicColorRamp")],l)})},"esri/rest/support/ColorRamp":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass".split(" "),
function(p,c,z,y,r,t,l,v,q){z=function(g){function k(n){n=g.call(this,n)||this;n.type=null;return n}p._inheritsLoose(k,g);return k}(z.JSONSupport);c.__decorate([y.property({readOnly:!0,json:{read:!1,write:!0}})],z.prototype,"type",void 0);return z=c.__decorate([q.subclass("esri.rest.support.ColorRamp")],z)})},"esri/rest/support/MultipartColorRamp":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/has ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ./AlgorithmicColorRamp ./ColorRamp".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k){var n;r=n=function(h){function f(b){b=h.call(this,b)||this;b.colorRamps=null;b.type="multipart";return b}p._inheritsLoose(f,h);f.prototype.clone=function(){return new n({colorRamps:z.clone(this.colorRamps)})};return f}(k);c.__decorate([y.property({type:[g],json:{write:!0}})],r.prototype,"colorRamps",void 0);c.__decorate([y.property({type:["multipart"]})],r.prototype,"type",void 0);return r=n=c.__decorate([q.subclass("esri.rest.support.MultipartColorRamp")],r)})},"esri/renderers/mixins/VisualVariablesMixin":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../layers/support/fieldUtils ../visualVariables/ColorVariable ../visualVariables/OpacityVariable ../visualVariables/RotationVariable ../visualVariables/SizeVariable ../visualVariables/VisualVariable ../visualVariables/VisualVariableFactory".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k,n,h,f,b,a,d,e){const u={base:d,key:"type",typeMap:{opacity:f,color:h,rotation:b,size:a}};p.VisualVariablesMixin=m=>{m=function(x){function A(){var B=x.apply(this,arguments)||this;B._vvFactory=new e;return B}c._inheritsLoose(A,x);var D=A.prototype;D.readVisualVariables=function(B,C,w){return this._vvFactory.readVariables(B,C,w)};D.writeVisualVariables=function(B,C,w,E){C[w]=this._vvFactory.writeVariables(B,E)};D.hasVisualVariables=function(B,C){return B?!!this.getVisualVariablesForType(B,
C):!!(this.getVisualVariablesForType("size",C)||this.getVisualVariablesForType("color",C)||this.getVisualVariablesForType("opacity",C)||this.getVisualVariablesForType("rotation",C))};D.getVisualVariablesForType=function(B,C){var w=this.visualVariables;if(w&&(w=w.filter(E=>E.type===B&&("string"===typeof C?E.target===C:!1===C?!E.target:!0)),!w||0!==w.length))return w};D.collectVVRequiredFields=function(){var B=c._asyncToGenerator(function*(C,w){let E=[];this.visualVariables&&(E=E.concat(this.visualVariables));
for(const I of E)I&&(I.field&&n.collectField(C,w,I.field),I.normalizationField&&n.collectField(C,w,I.normalizationField),I.valueExpression&&(yield n.collectArcadeFieldNames(C,w,I.valueExpression)))});return function(C,w){return B.apply(this,arguments)}}();c._createClass(A,[{key:"visualVariables",set:function(B){this._vvFactory.visualVariables=B;this._set("visualVariables",this._vvFactory.visualVariables)}},{key:"arcadeRequiredForVisualVariables",get:function(){if(!this.visualVariables)return!1;for(const B of this.visualVariables)if(B.arcadeRequired)return!0;
return!1}}]);return A}(m);z.__decorate([y.property({types:[u],value:null,json:{write:!0}})],m.prototype,"visualVariables",null);z.__decorate([q.reader("visualVariables",["visualVariables","rotationType","rotationExpression"])],m.prototype,"readVisualVariables",null);z.__decorate([k.writer("visualVariables")],m.prototype,"writeVisualVariables",null);return m=z.__decorate([g.subclass("esri.renderers.mixins.VisualVariablesMixin")],m)};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/renderers/visualVariables/ColorVariable":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ./VisualVariable ./support/ColorStop".split(" "),
function(p,c,z,y,r,t,l,v,q,g){var k;y=k=function(n){function h(b){b=n.call(this,b)||this;b.type="color";b.normalizationField=null;return b}p._inheritsLoose(h,n);var f=h.prototype;f.clone=function(){return new k({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(b=>b.clone()),legendOptions:this.legendOptions&&this.legendOptions.clone()})};f.getAttributeHash=function(){return`${n.prototype.getAttributeHash.call(this)}-${this.normalizationField}`};
f._interpolateData=function(){return this.stops&&this.stops.map(b=>b.value||0)};p._createClass(h,[{key:"cache",get:function(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}},{key:"stops",set:function(b){b&&Array.isArray(b)&&(b=b.filter(a=>!!a),b.sort((a,d)=>a.value-d.value));this._set("stops",b)}}]);return h}(q);c.__decorate([z.property({readOnly:!0})],y.prototype,"cache",null);c.__decorate([z.property({type:["color"],json:{type:["colorInfo"]}})],y.prototype,
"type",void 0);c.__decorate([z.property({type:String,json:{write:!0}})],y.prototype,"normalizationField",void 0);c.__decorate([z.property({type:[g],json:{write:!0}})],y.prototype,"stops",null);return y=k=c.__decorate([v.subclass("esri.renderers.visualVariables.ColorVariable")],y)})},"esri/renderers/visualVariables/VisualVariable":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/Logger ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/ensureType ./support/VisualVariableLegendOptions".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k){const n=r.getLogger("esri.renderers.visualVariables.VisualVariable");z=new z.JSONMap({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"});y=function(h){function f(a){a=h.call(this,a)||this;a.index=null;a.type=null;a.field=null;a.valueExpression=null;a.valueExpressionTitle=null;a.legendOptions=null;return a}p._inheritsLoose(f,h);var b=f.prototype;b.castField=function(a){return null==a?a:"function"===typeof a?(n.error(".field: field must be a string value"),
null):g.ensureString(a)};b.clone=function(){};b.getAttributeHash=function(){return`${this.type}-${this.field}-${this.valueExpression}`};p._createClass(f,[{key:"arcadeRequired",get:function(){return!!this.valueExpression}}]);return f}(y.JSONSupport);c.__decorate([t.property()],y.prototype,"index",void 0);c.__decorate([t.property({type:z.apiValues,readOnly:!0,json:{read:z.read,write:z.write}})],y.prototype,"type",void 0);c.__decorate([t.property({type:String,json:{write:!0}})],y.prototype,"field",void 0);
c.__decorate([v.cast("field")],y.prototype,"castField",null);c.__decorate([t.property({type:String,json:{write:!0}})],y.prototype,"valueExpression",void 0);c.__decorate([t.property({type:String,json:{write:!0}})],y.prototype,"valueExpressionTitle",void 0);c.__decorate([t.property({readOnly:!0})],y.prototype,"arcadeRequired",null);c.__decorate([t.property({type:k,json:{write:!0}})],y.prototype,"legendOptions",void 0);return y=c.__decorate([q.subclass("esri.renderers.visualVariables.VisualVariable")],
y)})},"esri/renderers/visualVariables/support/VisualVariableLegendOptions":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/Logger ../../../core/jsonMap ../../../core/accessorSupport/decorators/subclass ../../support/LegendOptions".split(" "),function(p,c,z,y,r,t,l,v,q){var g;y=g=function(k){function n(){var h=k.apply(this,arguments)||this;
h.showLegend=null;return h}p._inheritsLoose(n,k);n.prototype.clone=function(){return new g({title:this.title,showLegend:this.showLegend})};return n}(q["default"]);c.__decorate([z.property({type:Boolean,json:{write:!0}})],y.prototype,"showLegend",void 0);return y=g=c.__decorate([v.subclass("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],y)})},"esri/renderers/support/LegendOptions":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass".split(" "),
function(p,c,z,y,r,t,l,v,q,g){var k;p.LegendOptions=k=function(n){function h(){var f=n.apply(this,arguments)||this;f.title=null;return f}c._inheritsLoose(h,n);h.prototype.clone=function(){return new k({title:this.title})};return h}(y.JSONSupport);z.__decorate([r.property({type:String,json:{write:!0}})],p.LegendOptions.prototype,"title",void 0);p.LegendOptions=k=z.__decorate([g.subclass("esri.renderers.support.LegendOptions")],p.LegendOptions);p.default=p.LegendOptions;Object.defineProperty(p,"__esModule",
{value:!0})})},"esri/renderers/visualVariables/support/ColorStop":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../Color ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/Logger ../../../core/jsonMap ../../../core/accessorSupport/decorators/subclass ../../../core/accessorSupport/decorators/writer".split(" "),function(p,c,z,y,r,t,l,v,q,g,k){var n;y=n=function(h){function f(a){a=
h.call(this,a)||this;a.color=null;a.label=null;a.value=null;return a}p._inheritsLoose(f,h);var b=f.prototype;b.writeValue=function(a,d,e){d[e]=null==a?0:a};b.clone=function(){return new n({color:this.color&&this.color.clone(),label:this.label,value:this.value})};return f}(y.JSONSupport);c.__decorate([r.property({type:z,json:{type:[l.Integer],write:!0}})],y.prototype,"color",void 0);c.__decorate([r.property({type:String,json:{write:!0}})],y.prototype,"label",void 0);c.__decorate([r.property({type:Number,
json:{write:{allowNull:!0}}})],y.prototype,"value",void 0);c.__decorate([k.writer("value")],y.prototype,"writeValue",null);return y=n=c.__decorate([g.subclass("esri.renderers.visualVariables.support.ColorStop")],y)})},"esri/renderers/visualVariables/OpacityVariable":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ./VisualVariable ./support/OpacityStop".split(" "),
function(p,c,z,y,r,t,l,v,q,g){var k;y=k=function(n){function h(b){b=n.call(this,b)||this;b.type="opacity";b.normalizationField=null;return b}p._inheritsLoose(h,n);var f=h.prototype;f.clone=function(){return new k({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(b=>b.clone()),legendOptions:this.legendOptions&&this.legendOptions.clone()})};f.getAttributeHash=function(){return`${n.prototype.getAttributeHash.call(this)}-${this.normalizationField}`};
f._interpolateData=function(){return this.stops&&this.stops.map(b=>b.value||0)};p._createClass(h,[{key:"cache",get:function(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}},{key:"stops",set:function(b){b&&Array.isArray(b)&&(b=b.filter(a=>!!a),b.sort((a,d)=>a.value-d.value));this._set("stops",b)}}]);return h}(q);c.__decorate([z.property({readOnly:!0})],y.prototype,"cache",null);c.__decorate([z.property({type:["opacity"],json:{type:["transparencyInfo"]}})],
y.prototype,"type",void 0);c.__decorate([z.property({type:String,json:{write:!0}})],y.prototype,"normalizationField",void 0);c.__decorate([z.property({type:[g],json:{write:!0}})],y.prototype,"stops",null);return y=k=c.__decorate([v.subclass("esri.renderers.visualVariables.OpacityVariable")],y)})},"esri/renderers/visualVariables/support/OpacityStop":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/Logger ../../../core/jsonMap ../../../core/accessorSupport/decorators/reader ../../../core/accessorSupport/decorators/subclass ../../../core/accessorSupport/decorators/writer ../../../webdoc/support/opacityUtils".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k,n){var h;z=h=function(f){function b(d){d=f.call(this,d)||this;d.label=null;d.opacity=null;d.value=null;return d}p._inheritsLoose(b,f);var a=b.prototype;a.readOpacity=function(d,e){return n.transparencyToOpacity(e.transparency)};a.writeOpacity=function(d,e,u){e[u]=n.opacityToTransparency(d)};a.clone=function(){return new h({label:this.label,opacity:this.opacity,value:this.value})};return b}(z.JSONSupport);c.__decorate([y.property({type:String,json:{write:!0}})],z.prototype,
"label",void 0);c.__decorate([y.property({type:Number,json:{type:t.Integer,write:{target:"transparency"}}})],z.prototype,"opacity",void 0);c.__decorate([q.reader("opacity",["transparency"])],z.prototype,"readOpacity",null);c.__decorate([k.writer("opacity")],z.prototype,"writeOpacity",null);c.__decorate([y.property({type:Number,json:{write:!0}})],z.prototype,"value",void 0);return z=h=c.__decorate([g.subclass("esri.renderers.visualVariables.support.OpacityStop")],z)})},"esri/renderers/visualVariables/RotationVariable":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Error ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ./VisualVariable".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k){var n;r=n=function(h){function f(a){a=h.call(this,a)||this;a.axis=null;a.type="rotation";a.rotationType="geographic";a.valueExpressionTitle=null;return a}p._inheritsLoose(f,h);var b=f.prototype;b.writeValueExpressionTitleWebScene=function(a,d,e,u){u&&u.messages&&u.messages.push(new z("property:unsupported",this.type+"VisualVariable.valueExpressionTitle is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:`visualVariables[${this.index}]`+
".valueExpressionTitle",context:u}))};b.clone=function(){return new n({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:this.legendOptions&&this.legendOptions.clone()})};p._createClass(f,[{key:"cache",get:function(){return{hasExpression:!!this.valueExpression,compiledFunc:null}}}]);return f}(k);c.__decorate([y.property({readOnly:!0})],r.prototype,"cache",null);c.__decorate([y.property({type:["heading",
"tilt","roll"],json:{origins:{"web-scene":{default:"heading",write:!0}}}})],r.prototype,"axis",void 0);c.__decorate([y.property({type:["rotation"],json:{type:["rotationInfo"]}})],r.prototype,"type",void 0);c.__decorate([y.property({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],r.prototype,"rotationType",void 0);c.__decorate([y.property({type:String,json:{write:!0}})],r.prototype,"valueExpressionTitle",void 0);c.__decorate([g.writer("web-scene",
"valueExpressionTitle")],r.prototype,"writeValueExpressionTitleWebScene",null);return r=n=c.__decorate([q.subclass("esri.renderers.visualVariables.RotationVariable")],r)})},"esri/renderers/visualVariables/SizeVariable":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Error ../../core/jsonMap ../../core/Logger ../../core/screenUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ./VisualVariable ./support/SizeStop ./support/SizeVariableLegendOptions ./support/sizeVariableUtils ./support/visualVariableUtils".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k,n,h,f,b,a,d){function e(B){if(null!=B){if("string"===typeof B||"number"===typeof B)return t.toPt(B);if("size"===B.type){if(a.isSizeVariable(B))return B;B={...B};delete B.type;return new D(B)}}}function u(B,C,w){if("object"!==typeof B)return B;C=new D;C.read(B,w);return C}var m;const x=r.getLogger("esri.renderers.visualVariables.SizeVariable");r=new y.JSONMap({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"});const A=new y.JSONMap({unknown:"unknown",
inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers","decimal-degree":"decimal-degrees"});let D=m=function(B){function C(E){E=B.call(this,E)||this;E.axis=null;E.legendOptions=null;E.normalizationField=null;E.scaleBy=null;E.target=null;E.type="size";E.useSymbolValue=null;E.valueExpression=null;E.valueRepresentation=null;E.valueUnit=null;return E}p._inheritsLoose(C,
B);var w=C.prototype;w.castMaxSize=function(E){return e(E)};w.readMaxSize=function(E,I,F){return u(E,I,F)};w.castMinSize=function(E){return e(E)};w.readMinSize=function(E,I,F){return u(E,I,F)};w.readValueExpression=function(E,I){return E||I.expression&&"$view.scale"};w.writeValueExpressionWebScene=function(E,I,F,H){"$view.scale"===E?H&&H.messages&&(E=this.index,H.messages.push(new z("property:unsupported",this.type+"VisualVariable.valueExpression \x3d '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",
{instance:this,propertyName:("string"===typeof E?E:`visualVariables[${E}]`)+".valueExpression",context:H}))):I[F]=E};w.readValueUnit=function(E){return E?A.read(E):null};w.clone=function(){return new m({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:a.isSizeVariable(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:a.isSizeVariable(this.minSize)?this.minSize.clone():
this.minSize,normalizationField:this.normalizationField,stops:this.stops&&this.stops.map(E=>E.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions&&this.legendOptions.clone()})};w.flipSizes=function(){if("clamped-linear"===this.transformationType){const {minSize:E,maxSize:I}=this;this.minSize=I;this.maxSize=E;return this}if("stops"===this.transformationType){const E=this.stops,I=E.map(H=>
H.size).reverse(),F=E.length;for(let H=0;H<F;H++)E[H].size=I[H]}return this};w.getAttributeHash=function(){return`${B.prototype.getAttributeHash.call(this)}-${this.target}-${this.normalizationField}`};w._interpolateData=function(){return this.stops&&this.stops.map(E=>E.value||0)};p._createClass(C,[{key:"cache",get:function(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:d.viewScaleRE.test(this.valueExpression)}}},{key:"expression",set:function(E){x.warn("'expression' is deprecated since version 4.2. Use 'valueExpression' instead. The only supported expression is 'view.scale'.");
"view.scale"===E?(this.valueExpression="$view.scale",this._set("expression",E)):this._set("expression",null)}},{key:"index",set:function(E){a.isSizeVariable(this.maxSize)&&(this.maxSize.index=`visualVariables[${E}].maxSize`);a.isSizeVariable(this.minSize)&&(this.minSize.index=`visualVariables[${E}].minSize`);this._set("index",E)}},{key:"inputValueType",get:function(){return a.getInputValueType(this)}},{key:"maxDataValue",set:function(E){E&&this.stops&&(x.warn("cannot set maxDataValue when stops is not null."),
E=null);this._set("maxDataValue",E)}},{key:"maxSize",set:function(E){E&&this.stops&&(x.warn("cannot set maxSize when stops is not null."),E=null);this._set("maxSize",E)}},{key:"minDataValue",set:function(E){E&&this.stops&&(x.warn("cannot set minDataValue when stops is not null."),E=null);this._set("minDataValue",E)}},{key:"minSize",set:function(E){E&&this.stops&&(x.warn("cannot set minSize when stops is not null."),E=null);this._set("minSize",E)}},{key:"arcadeRequired",get:function(){return this.valueExpression?
!0:this.minSize&&"object"===typeof this.minSize&&this.minSize.arcadeRequired||this.maxSize&&"object"===typeof this.maxSize&&this.maxSize.arcadeRequired}},{key:"stops",set:function(E){null==this.minDataValue&&null==this.maxDataValue&&null==this.minSize&&null==this.maxSize?E&&Array.isArray(E)&&(E=E.filter(I=>!!I),E.sort((I,F)=>I.value-F.value)):E&&(x.warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),E=null);this._set("stops",E)}},{key:"transformationType",
get:function(){return a.getTransformationType(this,this.inputValueType)}}]);return C}(h);c.__decorate([l.property({readOnly:!0})],D.prototype,"cache",null);c.__decorate([l.property({type:r.apiValues,json:{type:r.jsonValues,origins:{"web-map":{read:!1}},read:r.read,write:r.write}})],D.prototype,"axis",void 0);c.__decorate([l.property({type:String,value:null,json:{read:!1}})],D.prototype,"expression",null);c.__decorate([l.property()],D.prototype,"index",null);c.__decorate([l.property({type:String,readOnly:!0})],
D.prototype,"inputValueType",null);c.__decorate([l.property({type:b,json:{write:!0}})],D.prototype,"legendOptions",void 0);c.__decorate([l.property({type:Number,value:null,json:{write:!0}})],D.prototype,"maxDataValue",null);c.__decorate([l.property({type:Number,value:null,json:{write:!0}})],D.prototype,"maxSize",null);c.__decorate([q.cast("maxSize")],D.prototype,"castMaxSize",null);c.__decorate([g.reader("maxSize")],D.prototype,"readMaxSize",null);c.__decorate([l.property({type:Number,value:null,
json:{write:!0}})],D.prototype,"minDataValue",null);c.__decorate([l.property({type:Number,value:null,json:{write:!0}})],D.prototype,"minSize",null);c.__decorate([q.cast("minSize")],D.prototype,"castMinSize",null);c.__decorate([g.reader("minSize")],D.prototype,"readMinSize",null);c.__decorate([l.property({type:String,json:{write:!0}})],D.prototype,"normalizationField",void 0);c.__decorate([l.property({readOnly:!0})],D.prototype,"arcadeRequired",null);c.__decorate([l.property({type:String})],D.prototype,
"scaleBy",void 0);c.__decorate([l.property({type:[f],value:null,json:{write:!0}})],D.prototype,"stops",null);c.__decorate([l.property({type:["outline"],json:{write:!0}})],D.prototype,"target",void 0);c.__decorate([l.property({type:String,readOnly:!0})],D.prototype,"transformationType",null);c.__decorate([l.property({type:["size"],json:{type:["sizeInfo"]}})],D.prototype,"type",void 0);c.__decorate([l.property({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],D.prototype,"useSymbolValue",
void 0);c.__decorate([l.property({type:String,json:{write:!0}})],D.prototype,"valueExpression",void 0);c.__decorate([g.reader("valueExpression",["valueExpression","expression"])],D.prototype,"readValueExpression",null);c.__decorate([n.writer("web-scene","valueExpression")],D.prototype,"writeValueExpressionWebScene",null);c.__decorate([l.property({type:["radius","diameter","area","width","distance"],json:{write:!0}})],D.prototype,"valueRepresentation",void 0);c.__decorate([l.property({type:A.apiValues,
json:{write:A.write,origins:{"web-map":{read:!1},"web-scene":{write:!0}}}})],D.prototype,"valueUnit",void 0);c.__decorate([g.reader("valueUnit")],D.prototype,"readValueUnit",null);return D=m=c.__decorate([k.subclass("esri.renderers.visualVariables.SizeVariable")],D)})},"esri/renderers/visualVariables/support/SizeStop":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/screenUtils ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/Logger ../../../core/jsonMap ../../../core/accessorSupport/decorators/subclass".split(" "),
function(p,c,z,y,r,t,l,v,q,g){var k;z=k=function(n){function h(f){f=n.call(this,f)||this;f.label=null;f.size=null;f.value=null;return f}p._inheritsLoose(h,n);h.prototype.clone=function(){return new k({label:this.label,size:this.size,value:this.value})};return h}(z.JSONSupport);c.__decorate([r.property({type:String,json:{write:!0}})],z.prototype,"label",void 0);c.__decorate([r.property({type:Number,cast:y.toPt,json:{write:!0}})],z.prototype,"size",void 0);c.__decorate([r.property({type:Number,json:{write:!0}})],
z.prototype,"value",void 0);return z=k=c.__decorate([g.subclass("esri.renderers.visualVariables.support.SizeStop")],z)})},"esri/renderers/visualVariables/support/SizeVariableLegendOptions":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/Logger ../../../core/jsonMap ../../../core/accessorSupport/decorators/subclass ./VisualVariableLegendOptions".split(" "),
function(p,c,z,y,r,t,l,v,q){var g;y=g=function(k){function n(){var h=k.apply(this,arguments)||this;h.customValues=null;return h}p._inheritsLoose(n,k);n.prototype.clone=function(){return new g({title:this.title,showLegend:this.showLegend,customValues:this.customValues&&this.customValues.slice(0)})};return n}(q);c.__decorate([z.property({type:[Number],json:{write:!0}})],y.prototype,"customValues",void 0);return y=g=c.__decorate([v.subclass("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],
y)})},"esri/renderers/visualVariables/support/sizeVariableUtils":function(){define(["exports"],function(p){function c(z){return z.valueExpression?"expression":z.field&&"string"===typeof z.field?"field":"unknown"}p.getInputValueType=c;p.getTransformationType=function(z,y){return"unknown"===(y||c(z))?"constant":z.stops?"stops":null!=z.minSize&&null!=z.maxSize&&null!=z.minDataValue&&null!=z.maxDataValue?"clamped-linear":"unknown"===(z.valueUnit||"unknown")?null!=z.minSize&&null!=z.minDataValue?z.minSize&&
z.minDataValue?"proportional":"additive":"identity":"real-world-size"};p.isSizeVariable=function(z){return z&&"esri.renderers.visualVariables.SizeVariable"===z.declaredClass};p.isValidNumber=function(z){return null!=z&&!isNaN(z)&&isFinite(z)};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/renderers/visualVariables/support/visualVariableUtils":function(){define("exports ../../../Color ../../../Graphic ../../../core/compilerUtils ../../../core/Logger ../../../core/maybe ../../support/lengthUtils ./sizeVariableUtils".split(" "),
function(p,c,z,y,r,t,l,v){function q(x,A,D){if(x="visualVariables"in x&&x.visualVariables?x.visualVariables.filter(K=>"color"===K.type)[0]:x)if("esri.renderers.visualVariables.ColorVariable"!==x.declaredClass)e.warn("The visualVariable should be an instance of esri.renderers.visualVariables.ColorVariable");else{var B="number"===typeof A,C=B?null:A,w=C&&C.attributes,E=B?A:null,I=x.field,{ipData:F,hasExpression:H}=x.cache;A=x.cache.compiledFunc;if(!I&&!H)return(D=x.stops)&&D[0]&&D[0].color;if("number"!==
typeof E)if(H){if(!t.isSome(D)||!t.isSome(D.arcade)){e.error("Use of arcade expressions requires an arcade context");return}E=D.arcade.arcadeUtils;I=E.getViewInfo({viewingMode:D.viewingMode,scale:D.scale,spatialReference:D.spatialReference});C=E.createExecContext(C,I);A||(A=E.createSyntaxTree(x.valueExpression),A=E.createFunction(A),x.cache.compiledFunc=A);E=E.executeFunction(A,C)}else w&&(E=w[I]);C=x.normalizationField;w=w?parseFloat(w[C]):void 0;if(null!=E&&(!C||B||!isNaN(w)&&0!==w)&&(isNaN(w)||
B||(E/=w),B=d(E,F)))return w=B[0],C=B[1],D=w===C?x.stops[w].color:c.blendColors(x.stops[w].color,x.stops[C].color,B[2],t.isSome(D)?D.color:void 0),new c(D)}}function g(x,A,D){if(x="visualVariables"in x&&x.visualVariables?x.visualVariables.filter(K=>"opacity"===K.type)[0]:x)if("esri.renderers.visualVariables.OpacityVariable"!==x.declaredClass)e.warn("The visualVariable should be an instance of esri.renderers.visualVariables.OpacityVariable");else{var B="number"===typeof A,C=B?null:A,w=C&&C.attributes,
E=B?A:null,I=x.field,{ipData:F,hasExpression:H}=x.cache;A=x.cache.compiledFunc;if(!I&&!H)return(x=x.stops)&&x[0]&&x[0].opacity;if("number"!==typeof E)if(H){if(t.isNone(D)||t.isNone(D.arcade)){e.error("Use of arcade expressions requires an arcade context");return}E=D.arcade.arcadeUtils;D=E.getViewInfo({viewingMode:D.viewingMode,scale:D.scale,spatialReference:D.spatialReference});D=E.createExecContext(C,D);A||(C=E.createSyntaxTree(x.valueExpression),A=E.createFunction(C),x.cache.compiledFunc=A);E=E.executeFunction(A,
D)}else w&&(E=w[I]);D=x.normalizationField;w=w?parseFloat(w[D]):void 0;if(null!=E&&(!D||B||!isNaN(w)&&0!==w)&&(isNaN(w)||B||(E/=w),B=d(E,F))){D=B[0];w=B[1];if(D===w)return x.stops[D].opacity;D=x.stops[D].opacity;return D+(x.stops[w].opacity-D)*B[2]}}}function k(x,A,D){if(x="visualVariables"in x&&x.visualVariables?x.visualVariables.filter(K=>"rotation"===K.type)[0]:x)if("esri.renderers.visualVariables.RotationVariable"!==x.declaredClass)e.warn("The visualVariable should be an instance of esri.renderers.visualVariables.RotationVariable");
else{var B=x.axis||"heading",C="heading"===B&&"arithmetic"===x.rotationType?90:0;B="heading"===B&&"arithmetic"===x.rotationType?-1:1;var w="number"===typeof A?null:A,E=w&&w.attributes,I=x.field,{hasExpression:F}=x.cache;A=x.cache.compiledFunc;var H=0;if(!I&&!F)return H;if(F){if(t.isNone(D)||t.isNone(D.arcade)){e.error("Use of arcade expressions requires an arcade context");return}E=D.arcade.arcadeUtils;D=E.getViewInfo({viewingMode:D.viewingMode,scale:D.scale,spatialReference:D.spatialReference});
D=E.createExecContext(w,D);A||(A=E.createSyntaxTree(x.valueExpression),A=E.createFunction(A),x.cache.compiledFunc=A);H=E.executeFunction(A,D)}else E&&(H=E[I]||0);return H="number"!==typeof H||isNaN(H)?null:C+B*H}}function n(x,A,D){const B="number"===typeof A;var C=B?null:A;const w=C&&C.attributes;var E=B?A:null;const {isScaleDriven:I}=x.cache;A=x.cache.compiledFunc;if(I)C=t.isSome(D)?D.scale:void 0,D=t.isSome(D)?D.view:void 0,null==C||"3d"===D?(C=D=null,(C=x.stops)?(D=C[0].value,C=C[C.length-1].value):
(D=x.minDataValue||0,C=x.maxDataValue||0),D=(D+C)/2):D=C,E=D;else if(!B)switch(x.inputValueType){case "expression":if(t.isNone(D)||t.isNone(D.arcade)){e.error("Use of arcade expressions requires an arcade context");return}E=D.arcade.arcadeUtils;D=E.getViewInfo({viewingMode:D.viewingMode,scale:D.scale,spatialReference:D.spatialReference});D=E.createExecContext(C,D);A||(C=E.createSyntaxTree(x.valueExpression),A=E.createFunction(C),x.cache.compiledFunc=A);E=E.executeFunction(A,D);break;case "field":w&&
(E=w[x.field]);break;case "unknown":E=null}if(!v.isValidNumber(E))return null;if(B||!x.normalizationField)return E;x=w?parseFloat(w[x.normalizationField]):null;return v.isValidNumber(x)&&0!==x?E/x:null}function h(x,A,D){if(x="visualVariables"in x&&x.visualVariables?x.visualVariables.filter(C=>"size"===C.type)[0]:x)if("esri.renderers.visualVariables.SizeVariable"!==x.declaredClass)e.warn("The visualVariable should be an instance of esri.renderers.visualVariables.SizeVariable");else{var B=n(x,A,D);
A=a(B,x,A,D,x.cache.ipData);return null===A||void 0===A||isNaN(A)?0:A}}function f(x,A,D){return null==x?null:v.isSizeVariable(x)?h(x,A,D):v.isValidNumber(x)?x:null}function b(x,A,D){return v.isValidNumber(D)&&x>D?D:v.isValidNumber(A)&&x<A?A:x}function a(x,A,D,B,C){switch(A.transformationType){case "additive":return B=f(A.minSize,D,B),A=x+(B||A.minDataValue);case "constant":return x=(x=A.stops)&&x.length&&x[0].size,null==x&&(x=A.minSize),A=f(x,D,B);case "clamped-linear":C=(x-A.minDataValue)/(A.maxDataValue-
A.minDataValue);var w=f(A.minSize,D,B);D=f(A.maxSize,D,B);B=t.isSome(B)?B.shape:void 0;x<=A.minDataValue?A=w:x>=A.maxDataValue?A=D:"area"===A.scaleBy&&B?(x=(A="circle"===B)?m*(w/2)**2:w*w,x+=C*((A?m*(D/2)**2:D*D)-x),A=A?2*Math.sqrt(x/m):Math.sqrt(x)):A=w+C*(D-w);return A;case "proportional":return C=t.isSome(B)?B.shape:void 0,x/=A.minDataValue,w=f(A.minSize,D,B),A=f(A.maxSize,D,B),B=null,B="circle"===C?2*Math.sqrt(x*(w/2)**2):"square"===C||"diamond"===C||"image"===C?Math.sqrt(x*w**2):x*w,A=b(B,w,
A);case "stops":{const [E,I,F]=d(x,C);E===I?A=f(A.stops[E].size,D,B):(x=f(A.stops[E].size,D,B),A=f(A.stops[I].size,D,B),A=x+(A-x)*F)}return A;case "real-world-size":return C=(t.isSome(B)&&B.resolution?B.resolution:1)*l.meterIn[A.valueUnit],w=f(A.minSize,D,B),B=f(A.maxSize,D,B),{valueRepresentation:A}=A,D=null,D="area"===A?2*Math.sqrt(x/m)/C:"radius"===A||"distance"===A?2*x/C:x/C,A=b(D,w,B);case "identity":return x;case "unknown":return null}}function d(x,A){if(A){var D=0,B=A.length-1;A.some((C,w)=>
{if(x<C)return B=w,!0;D=w;return!1});return[D,B,(x-A[D])/(A[B]-A[D])]}}const e=r.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),u=new z,m=Math.PI;p.getAllSizes=function(x,A,D){const B=["proportional","proportional","proportional"];for(const C of x)switch(x=C.useSymbolValue?"symbol-value":h(C,A,D),C.axis){case "width":B[0]=x;break;case "depth":B[1]=x;break;case "height":B[2]=x;break;case "width-and-depth":B[0]=x;B[1]=x;break;case "all":case void 0:case null:B[0]=x;B[1]=x;B[2]=
x;break;default:y.neverReached(C.axis)}return B};p.getColor=q;p.getOpacity=g;p.getRotationAngle=k;p.getSize=h;p.getSizeForValue=a;p.getSizeFromNumberOrVariable=f;p.getSizeRangeAtScale=function(x,A,D){const {isScaleDriven:B}=x.cache;if(!(B&&"3d"===D||A))return null;D={scale:A,view:D};A=f(x.minSize,u,D);x=f(x.maxSize,u,D);if(null!=A||null!=x)return A>x&&(D=x,x=A,A=D),{minSize:A,maxSize:x}};p.getVisualVariableValues=function(x,A,D){if(x.visualVariables){var B=[],C=[],w=[],E=[],I=[];for(const F of x.visualVariables)switch(F.type){case "color":C.push(F);
break;case "opacity":w.push(F);break;case "rotation":I.push(F);break;case "size":E.push(F)}C.forEach(F=>{const H=q(F,A,D);B.push({variable:F,value:H})});w.forEach(F=>{const H=g(F,A,D);B.push({variable:F,value:H})});I.forEach(F=>{const H=k(F,A,D);B.push({variable:F,value:H})});E.forEach(F=>{const H=h(F,A,D);B.push({variable:F,value:H})});return B.filter(F=>null!=F.value)}};p.viewScaleRE=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/core/compilerUtils":function(){define(["exports",
"./has"],function(p,c){p.neverReached=function(z){};p.neverReachedSilent=function(z){};p.tuple=(...z)=>z;p.typeCast=function(z){return()=>z};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/renderers/support/lengthUtils":function(){define(["exports","../../core/unitUtils","../../geometry/support/Ellipsoid"],function(p,c,z){c={inches:c.convertUnit(1,"meters","inches"),feet:c.convertUnit(1,"meters","feet"),"us-feet":c.convertUnit(1,"meters","us-feet"),yards:c.convertUnit(1,"meters","yards"),
miles:c.convertUnit(1,"meters","miles"),"nautical-miles":c.convertUnit(1,"meters","nautical-miles"),millimeters:c.convertUnit(1,"meters","millimeters"),centimeters:c.convertUnit(1,"meters","centimeters"),decimeters:c.convertUnit(1,"meters","decimeters"),meters:c.convertUnit(1,"meters","meters"),kilometers:c.convertUnit(1,"meters","kilometers"),"decimal-degrees":1/c.lengthToDegrees(1,"meters",z.earth.radius)};p.meterIn=c;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/renderers/visualVariables/VisualVariableFactory":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/jsonMap ../../core/Logger ../../core/Warning ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./ColorVariable ./OpacityVariable ./RotationVariable ./SizeVariable".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k,n,h,f){const b=r.getLogger("esri.renderers.visualVariables.VisualVariableFactory"),a={color:k,size:f,opacity:n,rotation:h},d=new y.JSONMap({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),e=/^\[([^\]]+)\]$/i;z=function(u){function m(){var A=u.apply(this,arguments)||this;A.colorVariables=null;A.opacityVariables=null;A.rotationVariables=null;A.sizeVariables=null;return A}p._inheritsLoose(m,u);var x=m.prototype;x.readVariables=function(A,
D,B){const {rotationExpression:C,rotationType:w}=D;if(D=(D=C&&C.match(e))&&D[1])A||(A=[]),A.push({type:"rotationInfo",rotationType:w,field:D});if(A)return A.map(E=>{var I=d.read(E.type);const F=a[I];F||(b.warn(`Unknown variable type: ${I}`),B&&B.messages&&B.messages.push(new t("visual-variable:unsupported",`visualVariable of type '${I}' is not supported`,{definition:E,context:B})));I=new F;I.read(E,B);return I})};x.writeVariables=function(A,D){const B=[];for(const C of A)(A=C.toJSON(D))&&B.push(A);
return B};x._resetVariables=function(){this.colorVariables=[];this.opacityVariables=[];this.rotationVariables=[];this.sizeVariables=[]};p._createClass(m,[{key:"visualVariables",set:function(A){this._resetVariables();if((A=A&&A.filter(B=>!!B))&&A.length){for(var D of A)switch(D.type){case "color":this.colorVariables.push(D);break;case "opacity":this.opacityVariables.push(D);break;case "rotation":this.rotationVariables.push(D);break;case "size":this.sizeVariables.push(D)}this.sizeVariables.length&&
this.sizeVariables.some(B=>!!B.target)&&A.sort((B,C)=>{let w=null;return w=B.target===C.target?0:B.target?1:-1});for(D=0;D<A.length;D++)A[D].index=D}this._set("visualVariables",A)}}]);return m}(z);c.__decorate([l.property()],z.prototype,"visualVariables",null);return z=c.__decorate([g.subclass("esri.renderers.visualVariables.VisualVariableFactory")],z)})},"esri/renderers/support/ClassBreakInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../symbols ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../symbols/support/jsonUtils".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k){var n;y=n=function(h){function f(a){a=h.call(this,a)||this;a.description=null;a.label=null;a.minValue=null;a.maxValue=0;a.symbol=null;return a}p._inheritsLoose(f,h);var b=f.prototype;b.clone=function(){return new n({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:this.symbol?this.symbol.clone():null})};b.getMeshHash=function(){const a=JSON.stringify(this.symbol);return`${this.minValue}.${this.maxValue}.${a}`};return f}(y.JSONSupport);
c.__decorate([r.property({type:String,json:{write:!0}})],y.prototype,"description",void 0);c.__decorate([r.property({type:String,json:{write:!0}})],y.prototype,"label",void 0);c.__decorate([r.property({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],y.prototype,"minValue",void 0);c.__decorate([r.property({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],y.prototype,"maxValue",void 0);c.__decorate([r.property({types:z.symbolTypesRenderer,
json:{origins:{"web-scene":{types:z.symbolTypesRenderer3D,write:k.write}},write:k.write}})],y.prototype,"symbol",void 0);return y=n=c.__decorate([g.subclass("esri.renderers.support.ClassBreakInfo")],y)})},"esri/symbols/support/jsonUtils":function(){define("exports ../../symbols ../../core/Error ../Symbol3D ../WebStyleSymbol ./symbolConversion".split(" "),function(p,c,z,y,r,t){function l(v,q,g){if(!v)return null;if(!(!g||"web-scene"!==g.origin||v instanceof y||v instanceof r)){const k="cim"!==v.type?
t.to3D(v):{symbol:null,error:new z("symbol-conversion:unsupported-cim-symbol","CIM symbol is unsupported in web scenes",{symbol:v})};if(k.symbol)return k.symbol.write(q,g);g.messages&&g.messages.push(new z("symbol:unsupported",`Symbols of type '${v.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:v,context:g,error:k.error}));return null}return g&&"web-map"===g.origin&&"web-style"===v.type?(g.messages&&g.messages.push(new z("symbol:unsupported",
`Symbols of type '${v.declaredClass}' are not supported in webmaps. Use CIMSymbol instead when working with WebMap in MapView.`,{symbol:v,context:g})),null):v.write(q,g)}p.fromJSON=function(v,q){return c.readSymbol(v,null,q)};p.write=function(v,q,g,k){(v=l(v,{},k))&&(q[g]=v)};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/symbols/support/symbolConversion":function(){define("exports ../../symbols ../../core/Error ../WebStyleSymbol ../PointSymbol3D ../SimpleLineSymbol ../LineSymbol3D ../SimpleMarkerSymbol ../PictureMarkerSymbol ../SimpleFillSymbol ../PolygonSymbol3D ../TextSymbol ../LabelSymbol3D".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k,n,h){p.to3D=function(f,b=!1,a=!1,d=!0){if(!f)return{symbol:null};if(c.isSymbol3D(f)||f instanceof y)d=f.clone();else if("cim"===f.type)d=r.fromCIMSymbol(f);else if(f instanceof t)d=l.fromSimpleLineSymbol(f);else if(f instanceof v)d=r.fromSimpleMarkerSymbol(f);else if(f instanceof q)d=r.fromPictureMarkerSymbol(f);else if(f instanceof g)d=k.fromSimpleFillSymbol(f);else if(f instanceof n)d=d?h.fromTextSymbol(f):r.fromTextSymbol(f);else return{error:new z("symbol-conversion:unsupported-2d-symbol",
`2D symbol of type '${f.type||f.declaredClass}' is unsupported in 3D`,{symbol:f})};b&&(d.id=f.id);if(a&&c.isSymbol3D(d))for(f=0;f<d.symbolLayers.length;++f)d.symbolLayers.getItemAt(f)._ignoreDrivers=!0;return{symbol:d}};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/renderers/support/commonProperties":function(){define(["exports","../../symbols","../../symbols/support/jsonUtils","../../symbols/Symbol","../../symbols/PolygonSymbol3D"],function(p,c,z,y,r){const t={types:c.symbolTypesRenderer,
json:{write:{writer:z.write},origins:{"web-scene":{types:c.symbolTypesRenderer3D,write:{writer:z.write}}}}};p.rendererBackgroundFillSymbolProperty={types:{base:y,key:"type",typeMap:{"simple-fill":c.symbolTypes.typeMap["simple-fill"],"picture-fill":c.symbolTypes.typeMap["picture-fill"],"polygon-3d":c.symbolTypes.typeMap["polygon-3d"]}},json:{write:{writer:z.write},origins:{"web-scene":{type:r,write:{writer:z.write}}}}};p.rendererSymbolProperty=t;Object.defineProperty(p,"__esModule",{value:!0})})},
"esri/renderers/DictionaryRenderer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Color ../request ../core/Error ../core/lang ../core/Logger ../core/LRUCache ../core/maybe ../core/promiseUtils ../core/string ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/has ../core/jsonMap ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ../layers/support/fieldUtils ./Renderer ./mixins/VisualVariablesMixin ../support/arcadeOnDemand ../symbols/CIMSymbol".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k,n,h,f,b,a,d,e,u,m,x,A){var D;const B=l.getLogger("esri.renderers.DictionaryRenderer"),C={type:"CIMSimpleLineCallout",lineSymbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:.5,color:[0,0,0,255]}]}};l=D=function(w){function E(F){F=w.call(this,F)||this;F._ongoingRequests=new Map;F._symbolCache=new v(100);F.config=null;F.fieldMap=null;F.scaleExpression=null;F.scaleExpressionTitle=null;F.url=null;F.type="dictionary";return F}p._inheritsLoose(E,w);var I=
E.prototype;I.writeData=function(F,H){F&&(H.scalingExpressionInfo={expression:F,returnType:"number"})};I.writeVisualVariables=function(F,H,K,G){null!=G&&G.origin||w.prototype.writeVisualVariables.call(this,F,H,K,G)};I.clone=function(){return new D({config:t.clone(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:t.clone(this.fieldMap),url:t.clone(this.url),visualVariables:t.clone(this.visualVariables)})};I.getSymbolAsync=function(){var F=p._asyncToGenerator(function*(H,
K){this._dictionaryPromise||(this._dictionaryPromise=this.fetchResources(K));try{var G=yield this._dictionaryPromise}catch(V){if(g.isAbortError(V))return this._dictionaryPromise=null}var L={};if(this.fieldMap)for(var P of this._symbolFields){var R=this.fieldMap[P];L[P]=R&&null!==H.attributes[R]&&void 0!==H.attributes[R]?""+H.attributes[R]:""}G=G(L,K);if(!G||"string"!==typeof G)return null;const S=k.numericHash(G).toString();if(L=this._symbolCache.get(S))return L.catch(()=>{this._symbolCache.pop(S)}),
L;P=G.split(";");G=[];L=[];for(const V of P)if(V&&0!==V.length)if(-1!==V.indexOf("po:")){var M=V.substr(3).split("|");3===M.length&&(P=M[0],R=M[1],M=M[2],"DashTemplate"===R?M=M.split(" ").map(W=>Number(W)):"Color"===R?(M=(new z(M)).toRgba(),M=[M[0],M[1],M[2],255*M[3]]):M=Number(M),L.push({primitiveName:P,propertyName:R,value:M}))}else if(-1!==V.indexOf("|"))for(const W of V.split("|"))this._itemNames.has(W)&&G.push(W);else this._itemNames.has(V)&&G.push(V);H=q.isSome(H.geometry)&&(H.geometry.hasZ||
"point"!==H.geometry.type)?!1:!0;K=this._cimPartsToCIMSymbol(G,L,H,K);this._symbolCache.put(S,K,1);return K});return function(H,K){return F.apply(this,arguments)}}();I.collectRequiredFields=function(){var F=p._asyncToGenerator(function*(H,K){yield this.collectVVRequiredFields(H,K);this.scaleExpression&&(yield e.collectArcadeFieldNames(H,K,this.scaleExpression));for(const G in this.fieldMap){const L=this.fieldMap[G];K.has(L)&&H.add(L)}});return function(H,K){return F.apply(this,arguments)}}();I.fetchResources=
function(){var F=p._asyncToGenerator(function*(H){if(this._dictionaryPromise)return this._dictionaryPromise;if(this.url){var K=q.isSome(H)?H.abortOptions:null;K=y(this.url+"/resources/styles/dictionary-info.json",{responseType:"json",query:{f:"json"},...K});var [{data:G}]=yield Promise.all([K,x.loadArcade()]);if(!G)throw this._dictionaryPromise=null,new r("esri.renderers.DictionaryRenderer","Bad dictionary data!");K=G.expression;var L=G.authoringInfo;this._refSymbolUrlTemplate=this.url+"/"+G.cimRefTemplateUrl;
this._itemNames=new Set(G.itemsNames);this._symbolFields=L.symbol;G={};if(this.config){const S=this.config;for(var P in S)G[P]=S[P]}if(L.configuration)for(var R of L.configuration)G.hasOwnProperty(R.name)||(G[R.name]=R.value);P=[];if(q.isSome(H)&&H.fields&&this.fieldMap)for(const S of this._symbolFields){const M=this.fieldMap[S];R=H.fields.filter(V=>V.name===M);0<R.length&&P.push({...R[0],name:S})}return this._dictionaryPromise=x.createDictionaryExpression(K,q.isSome(H)?H.spatialReference:null,P,
G).then(S=>{const M={scale:0};return(V,W)=>{V=S.repurposeFeature({geometry:null,attributes:V});M.scale=q.isSome(W)?W.scale:void 0;return S.evaluate({$feature:V,$view:M})}}).catch(S=>{B.error("Creating dictinoary expression failed:",S);return null})}B.error("no valid URL!")});return function(H){return F.apply(this,arguments)}}();I.getSymbol=function(){return null};I.getSymbols=function(){return[]};I.getAttributeHash=function(){return this.visualVariables&&this.visualVariables.reduce((F,H)=>F+H.getAttributeHash(),
"")};I.getMeshHash=function(){return`${this.url}-${JSON.stringify(this.fieldMap)}`};I.getSymbolFields=function(){return this._symbolFields};I._getSymbolPart=function(){var F=p._asyncToGenerator(function*(H,K){if(this._ongoingRequests.has(H))return this._ongoingRequests.get(H).then(L=>L.data);const G=this._refSymbolUrlTemplate.replace(/\{itemName\}/gi,H);K=y(G,{responseType:"json",query:{f:"json"},...K});this._ongoingRequests.set(H,K);try{return(yield K).data}catch(L){return this._ongoingRequests.delete(H),
Promise.reject(L)}});return function(H,K){return F.apply(this,arguments)}}();I._combineSymbolParts=function(F,H,K){if(!F||0===F.length)return null;const G={...F[0]};if(1<F.length){G.symbolLayers=[];for(const L of F)G.symbolLayers.unshift(...L.symbolLayers)}K&&(G.callout=C);return{type:"CIMSymbolReference",symbol:G,primitiveOverrides:H}};I._cimPartsToCIMSymbol=function(){var F=p._asyncToGenerator(function*(H,K,G,L){const P=Array(H.length);for(let R=0;R<H.length;R++)P[R]=this._getSymbolPart(H[R],L);
H=yield Promise.all(P);return new A({data:this._combineSymbolParts(H,K,G)})});return function(H,K,G,L){return F.apply(this,arguments)}}();p._createClass(E,[{key:"arcadeRequired",get:function(){return!0}}]);return E}(m.VisualVariablesMixin(u));c.__decorate([n.property({type:Object,json:{read:{source:"configuration"},write:{target:"configuration"}}})],l.prototype,"config",void 0);c.__decorate([n.property({type:Object,json:{write:!0}})],l.prototype,"fieldMap",void 0);c.__decorate([n.property({type:String,
json:{read:{source:"scalingExpressionInfo.expression"},write:!0}})],l.prototype,"scaleExpression",void 0);c.__decorate([d.writer("scaleExpression")],l.prototype,"writeData",null);c.__decorate([n.property({type:String,json:{read:{source:"scalingExpressionInfo.title"},write:{target:"scalingExpressionInfo.title",overridePolicy(w){return{enabled:!!w&&!!this.scaleExpression}}}}})],l.prototype,"scaleExpressionTitle",void 0);c.__decorate([n.property({type:String,json:{write:!0}})],l.prototype,"url",void 0);
c.__decorate([d.writer("visualVariables")],l.prototype,"writeVisualVariables",null);return l=D=c.__decorate([a.subclass("esri.renderers.DictionaryRenderer")],l)})},"esri/core/LRUCache":function(){define(["../chunks/_rollupPluginBabelHelpers","./MemCache"],function(p,c){return function(){function z(r,t){this._storage=new c.MemCacheStorage;this._storage.maxSize=r;t&&this._storage.registerRemoveFunc("",t)}var y=z.prototype;y.put=function(r,t,l){this._storage.put(r,t,l,1)};y.pop=function(r){return this._storage.pop(r)};
y.get=function(r){return this._storage.get(r)};y.clear=function(){this._storage.clearAll()};y.destroy=function(){this._storage.destroy()};p._createClass(z,[{key:"maxSize",get:function(){return this._storage.maxSize},set:function(r){this._storage.maxSize=r}}]);return z}()})},"esri/renderers/DotDensityRenderer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Color ../core/lang ../core/accessorSupport/decorators/aliasOf ../core/accessorSupport/ensureType ../core/has ../core/Logger ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ../layers/support/fieldUtils ./Renderer ./mixins/VisualVariablesMixin ./support/AttributeColorInfo ./support/DotDensityLegendOptions ../symbols/SimpleFillSymbol ../symbols/SimpleLineSymbol".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k,n,h,f,b,a,d,e){var u;t=u=function(m){function x(D){D=m.call(this,D)||this;D.attributes=null;D.backgroundColor=new z([0,0,0,0]);D.blendDots=!0;D.dotBlendingEnabled=!0;D.dotShape="square";D.dotSize=1;D.legendOptions=null;D.outline=new e;D.dotValue=null;D.referenceDotValue=null;D.referenceScale=null;D.seed=1;D.type="dot-density";return D}p._inheritsLoose(x,m);var A=x.prototype;A.calculateDotValue=function(D){if(null==this.referenceScale)return this.dotValue;D=D/this.referenceScale*
this.dotValue;return 1>D?1:D};A.getSymbol=function(){return new d({outline:this.outline})};A.getSymbolAsync=function(){var D=p._asyncToGenerator(function*(){return this.getSymbol()});return function(){return D.apply(this,arguments)}}();A.getSymbols=function(){return[this.getSymbol()]};A.getAttributeHash=function(){return this.attributes&&this.attributes.reduce((D,B)=>D+B.getAttributeHash(),"")};A.getMeshHash=function(){return JSON.stringify(this.outline)};A.clone=function(){return new u({attributes:y.clone(this.attributes),
backgroundColor:y.clone(this.backgroundColor),dotBlendingEnabled:y.clone(this.dotBlendingEnabled),dotShape:y.clone(this.dotShape),dotSize:y.clone(this.dotSize),dotValue:y.clone(this.dotValue),legendOptions:y.clone(this.legendOptions),outline:y.clone(this.outline),referenceScale:y.clone(this.referenceScale),visualVariables:y.clone(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})};A.getControllerHash=function(){const D=this.attributes.map(C=>C.field||C.valueExpression||
""),B=this.outline&&JSON.stringify(this.outline.toJSON())||"";return`${D}-${B}`};A.collectRequiredFields=function(){var D=p._asyncToGenerator(function*(B,C){yield this.collectVVRequiredFields(B,C);for(const w of this.attributes)w.valueExpression&&(yield n.collectArcadeFieldNames(B,C,w.valueExpression)),w.field&&B.add(w.field)});return function(B,C){return D.apply(this,arguments)}}();return x}(f.VisualVariablesMixin(h));c.__decorate([g.property({type:[b],json:{write:!0}})],t.prototype,"attributes",
void 0);c.__decorate([g.property({type:z,json:{write:!0}})],t.prototype,"backgroundColor",void 0);c.__decorate([g.property({type:Boolean}),r.aliasOf("dotBlendingEnabled")],t.prototype,"blendDots",void 0);c.__decorate([g.property({type:Boolean,json:{write:!0}})],t.prototype,"dotBlendingEnabled",void 0);c.__decorate([g.property({type:String,json:{write:!1}})],t.prototype,"dotShape",void 0);c.__decorate([g.property({type:Number,json:{write:!1}})],t.prototype,"dotSize",void 0);c.__decorate([g.property({type:a,
json:{write:!0}})],t.prototype,"legendOptions",void 0);c.__decorate([g.property({type:e,json:{default:null,write:!0}})],t.prototype,"outline",void 0);c.__decorate([g.property({type:Number,json:{write:!0}})],t.prototype,"dotValue",void 0);c.__decorate([g.property({type:Number}),r.aliasOf("dotValue")],t.prototype,"referenceDotValue",void 0);c.__decorate([g.property({type:Number,json:{write:!0}})],t.prototype,"referenceScale",void 0);c.__decorate([g.property({type:Number,json:{write:!0}})],t.prototype,
"seed",void 0);c.__decorate([q.enumeration({dotDensity:"dot-density"})],t.prototype,"type",void 0);return t=u=c.__decorate([k.subclass("esri.renderers.DotDensityRenderer")],t)})},"esri/renderers/support/AttributeColorInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Color ../../core/JSONSupport ../../core/Logger ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/decorators/cast ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/ensureType".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k){var n;const h=r.getLogger("esri.renderers.support.AttributeColorInfo");y=n=function(f){function b(d){d=f.call(this,d)||this;d.color=null;d.field=null;d.label=null;d.valueExpression=null;d.valueExpressionTitle=null;return d}p._inheritsLoose(b,f);var a=b.prototype;a.castField=function(d){return null==d?d:"function"===typeof d?(h.error(".field: field must be a string value"),null):k.ensureString(d)};a.getAttributeHash=function(){return`${this.field}-${this.valueExpression}`};
a.clone=function(){return new n({color:this.color&&this.color.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})};return b}(y.JSONSupport);c.__decorate([t.property({type:z,json:{type:[Number],write:!0}})],y.prototype,"color",void 0);c.__decorate([t.property({type:String,json:{write:!0}})],y.prototype,"field",void 0);c.__decorate([v.cast("field")],y.prototype,"castField",null);c.__decorate([t.property({type:String,json:{write:!0}})],
y.prototype,"label",void 0);c.__decorate([t.property({type:String,json:{write:!0}})],y.prototype,"valueExpression",void 0);c.__decorate([t.property({type:String,json:{write:!0}})],y.prototype,"valueExpressionTitle",void 0);return y=n=c.__decorate([g.subclass("esri.renderers.support.AttributeColorInfo")],y)})},"esri/renderers/support/DotDensityLegendOptions":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass".split(" "),
function(p,c,z,y,r,t,l,v,q){var g;z=g=function(k){function n(){var h=k.apply(this,arguments)||this;h.unit=null;return h}p._inheritsLoose(n,k);n.prototype.clone=function(){return new g({unit:this.unit})};return n}(z.JSONSupport);c.__decorate([y.property({type:String,json:{write:!0}})],z.prototype,"unit",void 0);return z=g=c.__decorate([q.subclass("esri.renderers.support.DotDensityLegendOptions")],z)})},"esri/renderers/HeatmapRenderer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Color ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/has ../core/Logger ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ../layers/support/fieldUtils ./Renderer ./support/HeatmapColorStop".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k,n,h){var f;t=f=function(b){function a(e){e=b.call(this,e)||this;e.blurRadius=10;e.colorStops=[new h({ratio:0,color:new z("rgba(255, 140, 0, 0)")}),new h({ratio:.75,color:new z("rgba(255, 140, 0, 1)")}),new h({ratio:.9,color:new z("rgba(255, 0,   0, 1)")})];e.field=null;e.fieldOffset=0;e.maxPixelIntensity=100;e.minPixelIntensity=0;e.type="heatmap";return e}p._inheritsLoose(a,b);var d=a.prototype;d.collectRequiredFields=function(){var e=p._asyncToGenerator(function*(u,
m){const x=this.field;x&&"string"===typeof x&&k.collectField(u,m,x)});return function(u,m){return e.apply(this,arguments)}}();d.getAttributeHash=function(){return null};d.getMeshHash=function(){return`${JSON.stringify(this.colorStops)}.${this.blurRadius}.${this.field}`};d.clone=function(){return new f({blurRadius:this.blurRadius,colorStops:y.clone(this.colorStops),field:this.field,maxPixelIntensity:this.maxPixelIntensity,minPixelIntensity:this.minPixelIntensity})};return a}(n);c.__decorate([r.property({type:Number,
json:{write:!0}})],t.prototype,"blurRadius",void 0);c.__decorate([r.property({type:[h],json:{write:!0}})],t.prototype,"colorStops",void 0);c.__decorate([r.property({type:String,json:{write:!0}})],t.prototype,"field",void 0);c.__decorate([r.property({type:Number,json:{write:{overridePolicy:(b,a,d)=>({enabled:null==d})}}})],t.prototype,"fieldOffset",void 0);c.__decorate([r.property({type:Number,json:{write:!0}})],t.prototype,"maxPixelIntensity",void 0);c.__decorate([r.property({type:Number,json:{write:!0}})],
t.prototype,"minPixelIntensity",void 0);c.__decorate([q.enumeration({heatmap:"heatmap"})],t.prototype,"type",void 0);return t=f=c.__decorate([g.subclass("esri.renderers.HeatmapRenderer")],t)})},"esri/renderers/support/HeatmapColorStop":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Color ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass".split(" "),
function(p,c,z,y,r,t,l,v,q,g){var k;y=k=function(n){function h(f){f=n.call(this,f)||this;f.color=null;f.ratio=null;return f}p._inheritsLoose(h,n);h.prototype.clone=function(){return new k({color:this.color,ratio:this.ratio})};return h}(y.JSONSupport);c.__decorate([r.property({type:z,json:{write:!0}})],y.prototype,"color",void 0);c.__decorate([r.property({type:Number,json:{write:!0}})],y.prototype,"ratio",void 0);return y=k=c.__decorate([g.subclass("esri.renderers.support.HeatmapColorStop")],y)})},
"esri/renderers/SimpleRenderer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/has ../core/Logger ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ./Renderer ./mixins/VisualVariablesMixin ./support/commonProperties".split(" "),function(p,c,z,y,r,t,l,v,q,g,k,n){var h;r=h=function(f){function b(d){d=f.call(this,d)||this;d.description=
null;d.label=null;d.symbol=null;d.type="simple";return d}p._inheritsLoose(b,f);var a=b.prototype;a.collectRequiredFields=function(){var d=p._asyncToGenerator(function*(e,u){yield Promise.all([this.collectSymbolFields(e,u),this.collectVVRequiredFields(e,u)])});return function(e,u){return d.apply(this,arguments)}}();a.collectSymbolFields=function(){var d=p._asyncToGenerator(function*(e,u){yield Promise.all(this.getSymbols().map(m=>m.collectRequiredFields(e,u)))});return function(e,u){return d.apply(this,
arguments)}}();a.getSymbol=function(d,e){return this.symbol};a.getSymbolAsync=function(){var d=p._asyncToGenerator(function*(e,u){return this.symbol});return function(e,u){return d.apply(this,arguments)}}();a.getSymbols=function(){return this.symbol?[this.symbol]:[]};a.getAttributeHash=function(){return this.visualVariables&&this.visualVariables.reduce((d,e)=>d+e.getAttributeHash(),"")};a.getMeshHash=function(){return this.getSymbols().reduce((d,e)=>d+=JSON.stringify(e),"")};a.clone=function(){return new h({description:this.description,
label:this.label,symbol:this.symbol&&this.symbol.clone(),visualVariables:z.clone(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})};p._createClass(b,[{key:"arcadeRequired",get:function(){return this.arcadeRequiredForVisualVariables}}]);return b}(k.VisualVariablesMixin(g));c.__decorate([y.property({type:String,json:{write:!0}})],r.prototype,"description",void 0);c.__decorate([y.property({type:String,json:{write:!0}})],r.prototype,"label",void 0);c.__decorate([y.property(n.rendererSymbolProperty)],
r.prototype,"symbol",void 0);c.__decorate([v.enumeration({simple:"simple"})],r.prototype,"type",void 0);return r=h=c.__decorate([q.subclass("esri.renderers.SimpleRenderer")],r)})},"esri/renderers/UniqueValueRenderer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../symbols ../core/Error ../core/lang ../core/Logger ../core/maybe ../core/object ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/has ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ../core/accessorSupport/diffUtils ../core/accessorSupport/ensureType ../layers/support/fieldUtils ../portal/Portal ./Renderer ./mixins/VisualVariablesMixin ./support/commonProperties ./support/LegendOptions ./support/UniqueValueInfo ../support/arcadeOnDemand ../chunks/persistableUrlUtils ../symbols/support/styleUtils ../symbols/WebStyleSymbol".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k,n,h,f,b,a,d,e,u,m,x,A,D,B,C,w,E,I){var F;const H=t.getLogger("esri.renderers.UniqueValueRenderer"),K=d.ensureType(B);t=F=function(G){function L(R){R=G.call(this,R)||this;R._valueInfoMap={};R._isDefaultSymbolDerived=!1;R.type="unique-value";R.backgroundFillSymbol=null;R.field=null;R.field2=null;R.field3=null;R.valueExpression=null;R.valueExpressionTitle=null;R.legendOptions=null;R.defaultLabel=null;R.fieldDelimiter=null;R.portal=null;R.styleOrigin=null;R.diff={uniqueValueInfos(S,
M){if(S||M){if(!S||!M)return{type:"complete",oldValue:S,newValue:M};var V=!1,W={type:"collection",added:[],removed:[],changed:[],unchanged:[]};for(let ea=0;ea<M.length;ea++){const ka=S.find(sa=>sa.value===M[ea].value);ka?a.diff(ka,M[ea])?(W.changed.push({type:"complete",oldValue:ka,newValue:M[ea]}),V=!0):W.unchanged.push({oldValue:ka,newValue:M[ea]}):(W.added.push(M[ea]),V=!0)}for(let ea=0;ea<S.length;ea++)M.find(ka=>ka.value===S[ea].value)||(W.removed.push(S[ea]),V=!0);return V?W:void 0}}};R._set("uniqueValueInfos",
[]);return R}p._inheritsLoose(L,G);var P=L.prototype;P.castField=function(R){return null==R||"function"===typeof R?R:d.ensureString(R)};P.writeField=function(R,S,M,V){"string"===typeof R?S[M]=R:V&&V.messages?V.messages.push(new y("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):H.error(".field: cannot write field to JSON since it's not a string value")};P.readPortal=function(R,S,M){return M.portal||u.getDefault()};P.readStyleOrigin=function(R,S,M){if(S.styleName)return Object.freeze({styleName:S.styleName});
if(S.styleUrl)return R=w.fromJSON(S.styleUrl,M),Object.freeze({styleUrl:R})};P.writeStyleOrigin=function(R,S,M,V){R.styleName?S.styleName=R.styleName:R.styleUrl&&(S.styleUrl=w.toJSON(R.styleUrl,V))};P.addUniqueValueInfo=function(R,S){this.styleOrigin?H.error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(R="object"===typeof R?K(R):new B({value:R,symbol:z.ensureType(S)}),this.uniqueValueInfos.push(R),this._valueInfoMap[R.value]=R)};P.removeUniqueValueInfo=
function(R){if(this.styleOrigin)H.error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");else for(let S=0;S<this.uniqueValueInfos.length;S++)if(this.uniqueValueInfos[S].value===R+""){delete this._valueInfoMap[R];this.uniqueValueInfos.splice(S,1);break}};P.getUniqueValueInfo=function(){var R=p._asyncToGenerator(function*(S,M){let V=M;this.valueExpression&&(l.isNone(M)||l.isNone(M.arcade))&&(V={...V,arcade:yield C.loadArcade()});return this._getUniqueValueInfo(S,
V)});return function(S,M){return R.apply(this,arguments)}}();P.getSymbol=function(R,S){if(this.valueExpression&&(l.isNone(S)||l.isNone(S.arcade)))H.error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");else return(R=this._getUniqueValueInfo(R,S))&&R.symbol||this.defaultSymbol};P.getSymbolAsync=function(){var R=p._asyncToGenerator(function*(S,M){if(this.valueExpression&&(l.isNone(M)||l.isNone(M.arcade))){const V=yield C.loadArcade(),{arcadeUtils:W}=V;W.hasGeometryOperations(this.valueExpression)&&
(yield W.enableGeometryOperations());M={...M,arcade:V}}return(S=this._getUniqueValueInfo(S,M))&&S.symbol||this.defaultSymbol});return function(S,M){return R.apply(this,arguments)}}();P.getSymbols=function(){const R=[];for(const S of this.uniqueValueInfos)S.symbol&&R.push(S.symbol);this.defaultSymbol&&R.push(this.defaultSymbol);return R};P.getAttributeHash=function(){return this.visualVariables&&this.visualVariables.reduce((R,S)=>R+S.getAttributeHash(),"")};P.getMeshHash=function(){const R=JSON.stringify(this.backgroundFillSymbol),
S=JSON.stringify(this.defaultSymbol),M=this.uniqueValueInfos.reduce((V,W)=>V+W.getMeshHash(),"");return`${R}.${S}.${M}.${`${this.field}.${this.field2}.${this.field3}.${this.fieldDelimiter}`}.${this.valueExpression}`};P.clone=function(){const R=new F({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:r.clone(this.defaultSymbol),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:r.clone(this.visualVariables),
legendOptions:r.clone(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),backgroundFillSymbol:r.clone(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(R._isDefaultSymbolDerived=!0);R._set("portal",this.portal);const S=r.clone(this.uniqueValueInfos);this.styleOrigin&&(R._set("styleOrigin",Object.freeze(r.clone(this.styleOrigin))),Object.freeze(S));R._set("uniqueValueInfos",S);R._updateValueInfoMap();return R};P.collectRequiredFields=function(){var R=p._asyncToGenerator(function*(S,
M){S=[this.collectVVRequiredFields(S,M),this.collectSymbolFields(S,M)];yield Promise.all(S)});return function(S,M){return R.apply(this,arguments)}}();P.collectSymbolFields=function(){var R=p._asyncToGenerator(function*(S,M){const V=[...this.getSymbols().map(W=>W.collectRequiredFields(S,M)),e.collectArcadeFieldNames(S,M,this.valueExpression)];e.collectField(S,M,this.field);e.collectField(S,M,this.field2);e.collectField(S,M,this.field3);yield Promise.all(V)});return function(S,M){return R.apply(this,
arguments)}}();P.populateFromStyle=function(){return E.fetchStyle(this.styleOrigin,{portal:this.portal}).then(R=>{const S=[];this._valueInfoMap={};R&&R.data&&Array.isArray(R.data.items)&&R.data.items.forEach(M=>{var V=new I({styleUrl:R.styleUrl,styleName:R.styleName,portal:this.portal,name:M.name});this.defaultSymbol||M.name!==R.data.defaultItem||(this.defaultSymbol=V,this._isDefaultSymbolDerived=!0);V=new B({value:M.name,symbol:V});S.push(V);this._valueInfoMap[M.name]=V});this._set("uniqueValueInfos",
Object.freeze(S));!this.defaultSymbol&&this.uniqueValueInfos.length&&(this.defaultSymbol=this.uniqueValueInfos[0].symbol,this._isDefaultSymbolDerived=!0);return this})};P._updateValueInfoMap=function(){this._valueInfoMap={};this.uniqueValueInfos.forEach(R=>this._valueInfoMap[R.value+""]=R)};P._getUniqueValueInfo=function(R,S){return this.valueExpression?this._getUnqiueValueInfoForExpression(R,S):this._getUnqiueValueInfoForFields(R)};P._getUnqiueValueInfoForExpression=function(R,S){const {viewingMode:M,
scale:V,spatialReference:W,arcade:ea}=l.unwrapOr(S,{});var ka=this._cache.compiledFunc;S=l.unwrap(ea).arcadeUtils;ka||(ka=S.createSyntaxTree(this.valueExpression),ka=S.createFunction(ka),this._cache.compiledFunc=ka);R=S.executeFunction(ka,S.createExecContext(R,S.getViewInfo({viewingMode:M,scale:V,spatialReference:W})));return this._valueInfoMap[R+""]};P._getUnqiueValueInfoForFields=function(R){const S=this.field,M=R.attributes;if("function"!==typeof S&&this.field2){R=this.field2;var V=this.field3;
const W=[];S&&W.push(M[S]);R&&W.push(M[R]);V&&W.push(M[V]);V=W.join(this.fieldDelimiter||"")}else"function"===typeof S?V=S(R):S&&(V=M[S]);return this._valueInfoMap[V+""]};L.fromPortalStyle=function(R,S){const M=new F(S&&S.properties);M._set("styleOrigin",Object.freeze({styleName:R}));M._set("portal",S&&S.portal||u.getDefault());S=M.populateFromStyle();S.catch(V=>{H.error(`#fromPortalStyle('${R}'[, ...])`,"Failed to create unique value renderer from style name",V)});return S};L.fromStyleUrl=function(R,
S){S=new F(S&&S.properties);S._set("styleOrigin",Object.freeze({styleUrl:R}));S=S.populateFromStyle();S.catch(M=>{H.error(`#fromStyleUrl('${R}'[, ...])`,"Failed to create unique value renderer from style URL",M)});return S};p._createClass(L,[{key:"_cache",get:function(){return{compiledFunc:null}}},{key:"defaultSymbol",set:function(R){this._isDefaultSymbolDerived=!1;this._set("defaultSymbol",R)}},{key:"uniqueValueInfos",set:function(R){this.styleOrigin?H.error("#uniqueValueInfos\x3d","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):
(this._set("uniqueValueInfos",R),this._updateValueInfoMap())}},{key:"arcadeRequired",get:function(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}}]);return L}(x.VisualVariablesMixin(m));c.__decorate([q.property({readOnly:!0})],t.prototype,"_cache",null);c.__decorate([n.enumeration({uniqueValue:"unique-value"})],t.prototype,"type",void 0);c.__decorate([q.property(A.rendererBackgroundFillSymbolProperty)],t.prototype,"backgroundFillSymbol",void 0);c.__decorate([q.property({json:{type:String,
read:{source:"field1"},write:{target:"field1"}}})],t.prototype,"field",void 0);c.__decorate([g.cast("field")],t.prototype,"castField",null);c.__decorate([b.writer("field")],t.prototype,"writeField",null);c.__decorate([q.property({type:String,json:{write:!0}})],t.prototype,"field2",void 0);c.__decorate([q.property({type:String,json:{write:!0}})],t.prototype,"field3",void 0);c.__decorate([q.property({type:String,json:{write:!0}})],t.prototype,"valueExpression",void 0);c.__decorate([q.property({type:String,
json:{write:!0}})],t.prototype,"valueExpressionTitle",void 0);c.__decorate([q.property({type:D["default"],json:{write:!0}})],t.prototype,"legendOptions",void 0);c.__decorate([q.property({type:String,json:{write:!0}})],t.prototype,"defaultLabel",void 0);c.__decorate([q.property(v.deepMerge({...A.rendererSymbolProperty},{json:{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}},origins:{"web-scene":{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}}}}}}))],t.prototype,
"defaultSymbol",null);c.__decorate([q.property({type:String,json:{write:!0}})],t.prototype,"fieldDelimiter",void 0);c.__decorate([q.property({type:u,readOnly:!0})],t.prototype,"portal",void 0);c.__decorate([h.reader("portal",["styleName"])],t.prototype,"readPortal",null);c.__decorate([q.property({readOnly:!0,json:{write:{enabled:!1,overridePolicy:()=>({enabled:!0})}}})],t.prototype,"styleOrigin",void 0);c.__decorate([h.reader("styleOrigin",["styleName","styleUrl"])],t.prototype,"readStyleOrigin",
null);c.__decorate([b.writer("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],t.prototype,"writeStyleOrigin",null);c.__decorate([q.property({type:[B],json:{write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],t.prototype,"uniqueValueInfos",null);return t=F=c.__decorate([f.subclass("esri.renderers.UniqueValueRenderer")],t)})},"esri/renderers/support/UniqueValueInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../symbols ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../symbols/support/jsonUtils".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k){var n;y=n=function(h){function f(a){a=h.call(this,a)||this;a.description=null;a.label=null;a.symbol=null;a.value=null;return a}p._inheritsLoose(f,h);var b=f.prototype;b.clone=function(){return new n({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})};b.getMeshHash=function(){const a=JSON.stringify(this.symbol&&this.symbol.toJSON());return`${this.value}.${a}`};return f}(y.JSONSupport);c.__decorate([r.property({type:String,
json:{write:!0}})],y.prototype,"description",void 0);c.__decorate([r.property({type:String,json:{write:!0}})],y.prototype,"label",void 0);c.__decorate([r.property({types:z.symbolTypesRenderer,json:{origins:{"web-scene":{types:z.symbolTypesRenderer3D,write:k.write}},write:k.write}})],y.prototype,"symbol",void 0);c.__decorate([r.property({type:[String,Number],json:{type:String,write:{writer:(h,f)=>{f.value=null==h?void 0:h.toString()}}}})],y.prototype,"value",void 0);return y=n=c.__decorate([g.subclass("esri.renderers.support.UniqueValueInfo")],
y)})},"esri/symbols/support/styleUtils":function(){define("exports ../../request ../../symbols ../../core/devEnvironmentUtils ../../core/Error ../../core/urlUtils ../../portal/Portal ../../portal/PortalQueryParams ../../support/featureFlags ../../chunks/persistableUrlUtils ./jsonUtils ./StyleOrigin ./Thumbnail".split(" "),function(p,c,z,y,r,t,l,v,q,g,k,n,h){function f(B,C){return A(B,C).then(w=>({data:w.data,baseUrl:t.removeFile(B),styleUrl:B}))}function b(B,C,w){C=C.portal||l.getDefault();let E;
const I=`${C.url} - ${C.user&&C.user.username} - ${B}`;D[I]||(D[I]=a(B,C,w).then(F=>{E=F;return F.fetchData()}).then(F=>({data:F,baseUrl:E.itemUrl,styleName:B})));return D[I]}function a(B,C,w){return C.load(w).then(()=>{const E=new v({disableExtraQuery:!0,query:`owner:${"esri_en"} AND type:${"Style"} AND typekeywords:"${B}"`});return C.queryItems(E,w)}).then(({results:E})=>{let I=null;const F=B.toLowerCase();if(E&&Array.isArray(E))for(const H of E)if(H.typeKeywords.some(K=>K.toLowerCase()===F)&&"Style"===
H.type&&"esri_en"===H.owner){I=H;break}if(!I)throw new r("symbolstyleutils:style-not-found",`The style '${B}' could not be found`,{styleName:B});return I.load(w)})}function d(B,C,w){return B.styleUrl?f(B.styleUrl,w):B.styleName?b(B.styleName,C,w):Promise.reject(new r("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function e(B,C,w,E,I){var F=B.data;const H={portal:w.portal,url:t.urlToObject(B.baseUrl),origin:"portal-item"};F=F.items.find(R=>
R.name===C);if(!F)return Promise.reject(new r("symbolstyleutils:symbol-name-not-found",`The symbol name '${C}' could not be found`,{symbolName:C}));let K=g.fromJSON(m(F,E),H),G=F.thumbnail&&F.thumbnail.href;const L=F.thumbnail&&F.thumbnail.imageData;y.isDevEnvironment()&&(K=y.adjustStaticAGOUrl(K),G=y.adjustStaticAGOUrl(G));const P={portal:w.portal,url:t.urlToObject(t.removeFile(K)),origin:"portal-item"};return A(K,I).then(R=>{R="cimRef"===E?u(R.data):R.data;if((R=k.fromJSON(R,P))&&z.isSymbol3D(R)){if(G){const S=
g.fromJSON(G,H);R.thumbnail=new h["default"]({url:S})}else L&&(R.thumbnail=new h["default"]({url:`data:image/png;base64,${L}`}));B.styleUrl?R.styleOrigin=new n({portal:w.portal,styleUrl:B.styleUrl,name:C}):B.styleName&&(R.styleOrigin=new n({portal:w.portal,styleName:B.styleName,name:C}))}return R})}function u(B){return null===B||"CIMSymbolReference"===B.type?B:{type:"CIMSymbolReference",symbol:B}}function m(B,C){if("cimRef"===C)return B.cimRef;if(B.formatInfos&&!q.enableWebStyleForceWOSR())for(const w of B.formatInfos)if("gltf"===
w.type)return w.href;return B.webRef}function x(B,C,w){const E="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f\x3djson".replace(/\{SymbolName\}/gi,B.name);return A(E,w).then(I=>{I=u(I.data);return k.fromJSON(I,{portal:C.portal,url:t.urlToObject(t.removeFile(E)),origin:"portal-item"})})}function A(B,C){C={responseType:"json",query:{f:"json"},...C};return c(t.normalize(B),C)}const D={};p.fetchStyle=d;p.fetchSymbolFromStyle=
e;p.resolveWebStyleSymbol=function(B,C,w,E){return B.name?B.styleName&&"Esri2DPointSymbolsStyle"===B.styleName?x(B,C,E):d(B,C,E).then(I=>e(I,B.name,C,w,E)):Promise.reject(new r("symbolstyleutils:style-symbol-reference-name-missing","Missing name in style symbol reference"))};p.styleNameFromItem=function(B){for(const C of B.typeKeywords)if(/^Esri.*Style$/.test(C)&&"Esri Style"!==C)return C};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/core/devEnvironmentUtils":function(){define(["exports",
"./global"],function(p,c){const z=/^devext.arcgis.com$/,y=/^qaext.arcgis.com$/,r=/^[\w-]*\.mapsdevext.arcgis.com$/,t=/^[\w-]*\.mapsqa.arcgis.com$/,l=[/^([\w-]*\.)?[\w-]*\.zrh-dev-local.esri.com$/,z,y,/^jsapps.esri.com$/,r,t];p.adjustStaticAGOUrl=function(v,q){return v?(q=q||c.location.hostname)?null!=q.match(z)||null!=q.match(r)?v.replace("static.arcgis.com","staticdev.arcgis.com"):null!=q.match(y)||null!=q.match(t)?v.replace("static.arcgis.com","staticqa.arcgis.com"):v:v:v};p.isDevEnvironment=function(v){v=
v||c.location.hostname;return l.some(q=>{var g;return null!=(null==(g=v)?void 0:g.match(q))})};p.isTelemetryDevEnvironment=function(v){v=v||c.location.hostname;return[/^zrh-.+?\.esri\.com$/].concat(l).some(q=>{var g;return null!=(null==(g=v)?void 0:g.match(q))})};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/support/featureFlags":function(){define(["exports","../core/has"],function(p,c){p.disableContextNavigation=()=>!!c("enable-feature:disable-context-navigation");p.enableDirect3DObjectFeatureLayerDisplay=
()=>!!c("enable-feature:direct-3d-object-feature-layer-display");p.enableWebStyleForceWOSR=()=>!!c("enable-feature:force-wosr");Object.defineProperty(p,"__esModule",{value:!0})})},"esri/renderers/support/jsonUtils":function(){define("exports ../../core/has ../../core/Error ../../core/object ../../core/Warning ../../core/accessorSupport/extensions/serializableProperty/reader ./types".split(" "),function(p,c,z,y,r,t,l){function v(k,n){if(!n||"web-scene"!==n.origin)return!0;switch(k.type){case "simple":case "unique-value":case "class-breaks":return!0;
case "heatmap":case "dictionary":case "dot-density":return!1;default:return!1}}function q(k,n,h){return k?k&&(k.styleName||k.styleUrl)&&"uniqueValue"!==k.type?(h&&h.messages&&h.messages.push(new r("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+k.type+"'",{definition:k,context:h})),null):g(k,n,h):null}const g=t.createTypeReader({types:l.rendererTypes});p.fromJSON=function(k,n){return q(k,null,n)};p.read=q;p.write=function(k,n,h,f){k?v(k,f)?k=k.write({},
f):(f.messages&&f.messages.push(new z("renderer:unsupported",`Renderer of type '${k.declaredClass}' are not supported in scenes.`,{renderer:k,context:f})),k=null):k=null;k&&y.setDeepValue(h,k,n)};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/renderers/support/types":function(){define("exports ../ClassBreaksRenderer ../DictionaryRenderer ../DotDensityRenderer ../HeatmapRenderer ../Renderer ../SimpleRenderer ../UniqueValueRenderer".split(" "),function(p,c,z,y,r,t,l,v){const q={key:"type",
base:t,typeMap:{simple:l,"unique-value":v,"class-breaks":c},errorContext:"renderer"};p.rendererTypes={key:"type",base:t,typeMap:{heatmap:r,simple:l,"unique-value":v,"class-breaks":c,"dot-density":y,dictionary:z},errorContext:"renderer"};p.webSceneRendererTypes=q;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/views/2d/engine/webgl/util/vvFlagUtils":function(){define(["exports","../enums","../visualVariablesUtils"],function(p,c,z){p.getVVFlags=function(y){if(!y)return c.WGLVVFlag.NONE;let r=
0;for(const t of y)"size"===t.type?(y=z.getTypeOfSizeVisualVariable(t),r|=y,"outline"===t.target&&(r|=y<<4)):"color"===t.type?r|=c.WGLVVFlag.COLOR:"opacity"===t.type?r|=c.WGLVVFlag.OPACITY:"rotation"===t.type&&(r|=c.WGLVVFlag.ROTATION);return r};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/views/2d/layers/features/support/pixelBuffering":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/screenUtils ../../../../../symbols/cim/CIMSymbolHelper ../../../../../symbols/cim/Rect ../../../engine/webgl/definitions ../../graphics/graphicsUtils".split(" "),
function(p,c,z,y,r,t,l){function v(m){if(!("visualVariables"in m&&m.hasVisualVariables("size")))return 0;m=m.getVisualVariablesForType("size");if(!m[0])return 0;m=m[0];if("stops"===m.transformationType)return m.stops.map(x=>x.size).reduce(a,0);if("clamped-linear"===m.transformationType){let x=-Infinity,A=-Infinity;x="number"===typeof m.maxSize?m.maxSize:m.maxSize.stops.map(D=>D.size).reduce(a,0);A="number"===typeof m.minSize?m.minSize:m.minSize.stops.map(D=>D.size).reduce(a,0);return Math.max(x,A)}if("real-world-size"===
m.transformationType)return 30}function q(){q=c._asyncToGenerator(function*(m,x,A){if(!m||A&&"cluster"===A.type)return 0;if("heatmap"===m.type)return Math.round(3*m.blurRadius);if("dot-density"===m.type)return 0;if("dictionary"===m.type)return"esriGeometryPoint"===x||"esriGeometryMultipoint"===x?100:200;x=m.getSymbols();m=v(m);A=[];for(var D of x)A.push(h(D,m));D=yield Promise.all(A);return z.pt2px(D.reduce(a,0))});return q.apply(this,arguments)}function g(m,x){return null==m?x:m}function k(m,x){return n.apply(this,
arguments)}function n(){n=c._asyncToGenerator(function*(m,x){if("simple-marker"===m.type)return x=Math.max(g(m.size,12),x),b(m)+.707*x;if("picture-marker"===m.type){var A=Math.max(g(m.height,12),x);x=g(m.width,12)*(A/g(m.height,12))/2;A/=2;return b(m)+Math.sqrt(x*x+A*A)}if("text"===m.type){if(A=m.text&&m.text.length){x=[];for(let D=0;D<A;D++)x.push({...u,code:m.text.charCodeAt(D)});x={glyphMosaicItems:x}}else x={glyphMosaicItems:[u]};l.getTextSymbolSize(e,m.toJSON(),x);return Math.max(Math.abs(e[0]),
Math.abs(e[1]))+Math.max(e[2],e[3])}return"simple-line"===m.type?(A=Math.max(g(m.width,.75),x)/2,m.marker?Math.max(6*m.width,2*x):A):"simple-fill"===m.type||"picture-fill"===m.type?Math.max(null==m.outline?0:g(m.outline.width,0),x)/2:"cim"===m.type?(m=y.CIMSymbolHelper.getEnvelope(m.data))?Math.sqrt(m.width*m.width+m.height*m.height):0:"web-style"===m.type?k(yield m.fetchCIMSymbol(),x):0});return n.apply(this,arguments)}function h(m,x){return f.apply(this,arguments)}function f(){f=c._asyncToGenerator(function*(m,
x){return m.type in d?Math.min(yield k(m,x),75):0});return f.apply(this,arguments)}function b(m){const x=g(m.xoffset,0);m=g(m.yoffset,0);return Math.sqrt(x*x+m*m)}function a(m,x){return Math.max(m,x)}const d={"simple-marker":1,"picture-marker":1,text:0,"simple-line":0,"simple-fill":0,"picture-fill":0,cim:1,"web-style":1},e=[0,0,0,0],u={sdf:!0,code:99,metrics:t.AVERAGE_GLYPH_MOSAIC_ITEM.metrics,rect:new r(0,0,24,24),page:0,textureBinding:2};p.computePxBuffer=function(m,x,A){return q.apply(this,arguments)};
p.getPtMaxVVSize=v;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/views/2d/layers/graphics/graphicsUtils":function(){define("exports ../../../../core/has ../../../../core/maybe ../../../../core/screenUtils ../../../../chunks/mat2d ../../../../chunks/mat2df32 ../../../../chunks/vec2 ../../../../chunks/vec2f32 ../../../../geometry/support/aaBoundingRect ../../../../geometry/support/boundsUtils ../../../../geometry/support/jsonUtils ../../../../geometry/support/normalizeUtils ../../../../geometry/support/normalizeUtilsCommon ../../../../geometry/support/spatialReferenceUtils ../../../../symbols/cim/CIMSymbolHelper ../../engine/webgl/alignmentUtils ../../engine/webgl/mesh/templates/shapingUtils ../../engine/webgl/util/BidiText".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k,n,h,f,b,a,d,e){function u(P,R,S,M,V,W){let ea,ka;var sa=y.pt2px(S.xoffset);const ua=y.pt2px(S.yoffset),xa=B*S.angle;W*=B;switch(S.type){case "esriSMS":ea=ka=y.pt2px(S.size);break;case "esriPMS":ea=y.pt2px(S.width),ka=y.pt2px(S.height)}.04>V&&(M=.04*M/V);S=r.identity(C);r.translate(S,S,l.set(w,P,R));r.rotate(S,S,W-xa);r.scale(S,S,l.set(w,M,-M));r.translate(S,S,l.set(w,sa,-ua));P=[0,0];l.transformMat2d(P,l.set(w,-.5*ea,-.5*ka),S);R=[0,0];l.transformMat2d(R,l.set(w,-.5*
ea,.5*ka),S);M=[0,0];l.transformMat2d(M,l.set(w,.5*ea,-.5*ka),S);sa=[0,0];l.transformMat2d(sa,l.set(w,.5*ea,.5*ka),S);return{rings:[[P,M,sa,R,P]]}}function m(P,R,S,M,V,W){var ea=b.CIMSymbolHelper.getEnvelope(S.data);if(!ea)return null;.04>V&&(M=.04*M/V);V=y.pt2px(ea.width);var ka=y.pt2px(ea.height);S=y.pt2px(ea.x);ea=y.pt2px(ea.y);const sa=0*B,ua=B*W;W=r.identity(C);r.translate(W,W,l.set(w,P,R));r.rotate(W,W,ua-sa);r.scale(W,W,l.set(w,M,M));P=[0,0];l.transformMat2d(P,l.set(w,S,ea+ka),W);R=[0,0];l.transformMat2d(R,
l.set(w,S,ea),W);M=[0,0];l.transformMat2d(M,l.set(w,S+V,ea+ka),W);ka=[0,0];l.transformMat2d(ka,l.set(w,S+V,ea),W);return{rings:[[P,M,ka,R,P]]}}function x(P,R,S,M,V,W){var ea=y.pt2px(S.xoffset),ka=y.pt2px(S.yoffset);S=B*S.angle;const sa=B*W;W=r.identity(C);r.translate(W,W,l.set(w,P,R));r.rotate(W,W,sa);r.scale(W,W,l.set(w,V,-V));P=M[0]+M[2]/2;R=M[1]+M[3]/2;r.translate(W,W,l.set(w,ea,-ka));r.translate(W,W,l.set(w,P,R));r.rotate(W,W,S);r.translate(W,W,l.set(w,-P,-R));ea=[0,0];l.transformMat2d(ea,l.set(w,
M[0],M[1]),W);ka=[0,0];l.transformMat2d(ka,l.set(w,M[0],M[1]+M[3]),W);S=[0,0];l.transformMat2d(S,l.set(w,M[0]+M[2],M[1]),W);P=[0,0];l.transformMat2d(P,l.set(w,M[0]+M[2],M[1]+M[3]),W);return{rings:[[ea,S,P,ka,ea]]}}function A(P){switch(P.symbol.type){case "esriSFS":case "esriPFS":return(P=P.symbol.outline)?P.width:0;case "esriSLS":return y.pt2px(P.symbol.width);case "esriSMS":return y.pt2px(P.symbol.size);case "esriPMS":return y.pt2px(Math.max(P.symbol.width,P.symbol.height));case "esriTS":{const R=
[0,0,0,0];D(R,P.symbol,P.mosaicItem);return Math.max(R[2],R[3])+Math.max(Math.abs(R[0]),Math.abs(R[1]))}case "expanded-cim":P=b.CIMSymbolHelper.getEnvelope(P.symbol.data);if(-Infinity===P.width||-Infinity===P.height)P.width=10,P.height=10,P.x=0,P.y=0;return y.pt2px(Math.sqrt(P.width*P.width+P.height*P.height));case "composite-symbol":return P.symbol.layers.length?A({symbol:P.symbol.layers[P.symbol.layers.length-1],mosaicItem:null}):0;default:return 0}}function D(P,R,S){if(!S||0===S.glyphMosaicItems.length)return P;
const M=e.bidiText(R.text)[1];R=d.shapeGlyphs(S.glyphMosaicItems,M,{scale:y.pt2px(R.font.size)/24,angle:R.angle,xOffset:R.xoffset,yOffset:R.yoffset,hAlign:a.getXAnchorDirection(R.horizontalAlignment||"center"),vAlign:a.getYAnchorDirection(R.verticalAlignment||"baseline"),maxLineWidth:Math.max(32,Math.min(R.lineWidth||512,512)),lineHeight:30*Math.max(.25,Math.min(R.lineHeight||1,4)),decoration:R.font.decoration||"none",isCIM:!1}).bounds;P[0]=y.pt2px(R.x-R.halfWidth);P[1]=y.pt2px(R.y-R.halfHeight);
P[2]=y.pt2px(R.width);P[3]=y.pt2px(R.height);return P}const B=Math.PI/180,C=t.create(),w=v.create(),E=v.create(),I=v.create(),F=v.create(),H=v.create(),K=v.create(),G=v.create(),L=v.create();p.PIXEL_BUFFER=50;p.TILE_SIZE=512;p.getBounds=function(P,R,S,M,V,W,ea){if(!M||!S.symbol)return P[0]=P[1]=P[2]=P[3]=0,R[0]=R[1]=R[2]=R[3]=0,P;if(k.isPoint(M)){var ka=M.x;const ua=M.y;"esriTS"===S.symbol.type&&0===R[2]&&0===R[3]&&D(R,S.symbol,S.mosaicItem);M=ka;ka=ua;S=S.symbol;switch(S.type){case "esriSMS":case "esriPMS":var sa=
u(M,ka,S,V,W,0);break;case "esriTS":sa=x(M,ka,S,R,V,0);break;case "cim":case "CIMSymbolReference":case "expanded-cim":sa=m(M,ka,S,V,W,0)}R=0;for(V=0;V<sa.rings[0].length-1;V++)S=sa.rings[0][V],S=(M-S[0])*(M-S[0])+(ka-S[1])*(ka-S[1]),R=Math.max(R,S);R=Math.sqrt(R);sa=n.normalizeMapX(M-R,ea);M=n.normalizeMapX(M+R,ea);if(sa>M&&(ea=f.getInfo(ea))){const [xa,oa]=ea.valid;sa=xa;M=oa}P[0]=sa;P[1]=ka-R;P[2]=M;P[3]=ka+R}else g.getBoundsXY(P,M),ea=R[0],0===ea&&(ea=A(S),R[0]=ea),ea=V*ea/2,P[0]-=ea,P[1]-=ea,
P[2]+=ea,P[3]+=ea;return P};p.getCIMMarkerBounds=m;p.getMarkerSymbolBounds=u;p.getTextSymbolBounds=x;p.getTextSymbolSize=D;p.graphicGeometryToNumber=function(P){switch(z.unwrap(P.geometry).type){case "polyline":return 1;case "polygon":case "extent":return 2}return 0};p.intersectingInternationalDateline=function(P,R){if(!R.isWrappable)return null;const [S,M]=h.getSpatialReferenceMinMaxX(R);return P[2]>M?[q.create([P[0],P[1],M,P[3]]),q.create([S,P[1],S+P[2]-M,P[3]])]:P[0]<S?[q.create([S,P[1],P[2],P[3]]),
q.create([M-(S-P[0]),P[1],M,P[3]])]:null};p.isMarkerSymbol=function(P){return"simple-marker"===P||"picture-marker"===P||"esriSMS"===P||"esriPMS"===P};p.isPointOnPolyline=function(P,R,S,M){l.set(F,R,S);P=P.paths;let V,W,ea,ka,sa,ua,xa,oa=Infinity;for(let pa=0;pa<P.length;pa++){const N=P[pa];if(!(2>N.length))for(let U=1;U<N.length;U++){var ra=N[U-1][0];W=N[U-1][1];V=N[U][0];ea=N[U][1];ka=Math.min(ra,V)-M;sa=Math.min(W,ea)-M;ua=Math.max(ra,V)+M;xa=Math.max(W,ea)+M;R<ka||R>ua||S<sa||S>xa||(l.set(E,ra,
W),l.set(I,V,ea),l.subtract(H,I,E),l.subtract(K,E,F),l.scale(G,H,l.dot(H,K)/l.dot(H,H)),l.subtract(L,K,G),ra=l.dot(L,L),oa>ra&&(oa=ra))}}return Math.sqrt(oa)<=M};p.isTextSymbol=function(P){return"text"===P||"esriTS"===P};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/views/2d/layers/features/support/rendererUtils":function(){define(["exports","../../../../../core/Logger","../../../../../core/screenUtils"],function(p,c,z){function y(l){return("size"===l.type||"color"===l.type||"opacity"===
l.type)&&null!=l.stops}function r(l){var v=l.type;var q=l.stops;if(8>=q.length)v=q;else if(t.warn(`Found ${q.length} Visual Variable stops, but MapView only supports ${8}. Displayed stops will be simplified.`),16<q.length){{const [e,...u]=q;var g=u.pop(),k=u[0].value,n=u[u.length-1].value,h=(n-k)/6;const m=[];for(;k<n;k+=h){for(var f=0;k>=u[f].value;)f++;var b=u[f],a=q[f-1],d=k-a.value;b=b.value===a.value?1:d/(b.value-a.value);"color"===v?(a=u[f],f=q[f-1],d=a.color.clone(),d.r=(1-b)*f.color.r+b*d.r,
d.g=(1-b)*f.color.g+b*d.g,d.b=(1-b)*f.color.b+b*d.b,d.a=(1-b)*f.color.a+b*d.a,m.push({value:k,color:d,label:a.label})):"size"===v?(a=u[f],d=q[f-1],f=z.toPt(a.size),d=z.toPt(d.size),m.push({value:k,size:(1-b)*d+b*f,label:a.label})):(a=u[f],m.push({value:k,opacity:(1-b)*q[f-1].opacity+b*a.opacity,label:a.label}))}v=[e,...m,g]}}else{{const [e,...u]=q;for(v=u.pop();6<u.length;){g=q=0;for(n=1;n<u.length;n++)h=Math.abs(u[n].value-u[n-1].value),h>g&&(g=h,q=n);u.splice(q,1)}v=[e,...u,v]}}l.stops=v;return l}
const t=c.getLogger("esri.renderers.visualVariables.support.utils");p.simplifyVVRenderer=l=>{if(!("visualVariables"in l&&l.visualVariables&&l.visualVariables.length))return l;l=l.clone();const v=l.visualVariables.map(q=>y(q)?r(q):q);l.visualVariables=v;return l};p.simplifyVisualVariables=function(l){return l.map(v=>y(v)?r(v.clone()):v)};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/views/2d/layers/support/clusterUtils":function(){define("exports ../../../../core/Error ../../../../core/has ../../../../core/Logger ../../../../core/maybe ../../../../core/MD5 ../../../../renderers/visualVariables/SizeVariable ../../../../renderers/visualVariables/support/SizeStop ../../engine/LevelDependentSizeVariable".split(" "),
function(p,c,z,y,r,t,l,v,q){function g(m,x,A){switch(m){case "avg":case "avg_angle":return`cluster_avg_${x}`;case "mode":return`cluster_type_${x}`;case "norm":return m=x.toLowerCase()+",norm:field,"+A.toLowerCase(),"cluster_avg_"+t.createMD5Hash(m)}}function k(m,x){const {name:A,outStatistic:D}=x,{onStatisticField:B,onStatisticValueExpression:C,statisticType:w}=D;C?(x=t.createMD5Hash(C.toLowerCase()),m.push({name:A,outStatistic:{onStatisticField:x,onStatisticValueExpression:C,statisticType:w}})):
B?m.push({name:A,outStatistic:{onStatisticField:B,statisticType:w}}):f.error(new c("mapview-unsupported-field","Unable to handle field",{field:x}))}function n(m,x,A){const D=t.createMD5Hash(x),B="mode"===A?`cluster_type_${D}`:`cluster_avg_${D}`;m.some(C=>C.name===B)||m.push({name:B,outStatistic:{onStatisticField:D,onStatisticValueExpression:x,statisticType:A}});return B}function h(m,x,A,D){if("cluster_count"===x||m.some(C=>C.name===x))return x;const B=g(A,x,D);m.some(C=>C.name===B)||("norm"===A?m.push({name:B,
outStatistic:{onStatisticField:x,onStatisticNormalizationField:D,statisticType:A}}):m.push({name:B,outStatistic:{onStatisticField:x,statisticType:A}}));return B}const f=y.getLogger("esri.views.2d.layers.support.clusterUtils");z.add("esri-cluster-arcade-enabled",!0);const b=z("esri-cluster-arcade-enabled"),a=m=>{for(const x of m)if("size"===x.type)return x;return null},d=m=>{for(const x of m)if("cluster_count"===x.field)return!0;return!1},e=(m,x)=>{const A=[new v({value:0,size:0}),new v({value:1})];
if(r.isNone(x))return new l({field:"cluster_count",stops:[...A,new v({value:2,size:0})]});const D=Object.keys(x).reduce((B,C)=>({...B,[C]:[...A,new v({value:Math.max(2,x[C].minValue),size:m.clusterMinSize}),new v({value:Math.max(3,x[C].maxValue),size:m.clusterMaxSize})]}),{});return new q.LevelDependentSizeVariable({field:"cluster_count",levels:D})},u=m=>{const x=A=>f.error(new c("Unsupported-renderer",A,{renderer:m}));if("unique-value"===m.type){if(m.field2||m.field3)return x("FeatureReductionCluster does not support multi-field UniqueValueRenderers"),
!1}else if("class-breaks"===m.type){if(m.normalizationField){const A=m.normalizationType;if("field"!==A)return x(`FeatureReductionCluster does not support a normalizationType of ${A}`),!1}}else if("simple"!==m.type)return x(`FeatureReductionCluster does not support renderers of type ${m.type}`),!1;if(!b){if("valueExpression"in m&&m.valueExpression)return x("FeatureReductionCluster does not currently support renderer.valueExpression. Support will be added in a future release"),!1;if(("visualVariables"in
m&&m.visualVariables||[]).some(A=>!!("valueExpression"in A&&A.valueExpression)))return x("FeatureReductionCluster does not currently support visualVariables with a valueExpression. Support will be added in a future release"),!1}return!0};p.createClusterCountSizeVariable=e;p.createClusterRenderer=(m,x,A,D)=>{x=x.clone();if(!u(x))return x;if(A.fields)for(var B of A.fields)k(m,B);if("visualVariables"in x){B=(x.visualVariables||[]).filter(w=>"$view.scale"!==w.valueExpression);const C=a(B);B.forEach(w=>
{"rotation"===w.type?w.field?w.field=h(m,w.field,"avg_angle"):w.valueExpression&&(w.field=n(m,w.valueExpression,"avg_angle"),w.valueExpression=null):w.normalizationField?(w.field=h(m,w.field,"norm",w.normalizationField),w.normalizationField=null):w.field?w.field=h(m,w.field,"avg"):(w.field=n(m,w.valueExpression,"avg"),w.valueExpression=null)});r.isNone(C)&&!d(B)&&(B.push(e(A,D)),x.dynamicClusterSize=!0);x.visualVariables=B}switch(x.type){case "unique-value":x.field?x.field=h(m,x.field,"mode"):x.valueExpression&&
(x.field=n(m,x.valueExpression,"mode"),x.valueExpression=null);break;case "class-breaks":x.normalizationField?(x.field=h(m,x.field,"norm",x.normalizationField),x.normalizationField=null):x.field?x.field=h(m,x.field,"avg"):(x.field=n(m,x.valueExpression,"avg"),x.valueExpression=null)}return x};p.findSizeVV=a;p.hasClusterCountVV=d;p.isClusterCompatibleRenderer=u;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/core/MD5":function(){define(["exports"],function(p){function c(v,q){const g=(v&65535)+
(q&65535);return(v>>16)+(q>>16)+(g>>16)<<16|g&65535}function z(v,q,g,k,n,h){v=c(c(q,v),c(k,h));return c(v<<n|v>>>32-n,g)}function y(v,q,g,k,n,h,f){return z(q&g|~q&k,v,q,n,h,f)}function r(v,q,g,k,n,h,f){return z(q&k|g&~k,v,q,n,h,f)}function t(v,q,g,k,n,h,f){return z(g^(q|~k),v,q,n,h,f)}const l={Base64:0,Hex:1,String:2,Raw:3};p.createMD5Hash=function(v,q=l.Hex){q=q||l.Base64;var g=[];for(let n=0,h=8*v.length;n<h;n+=8)g[n>>5]|=(v.charCodeAt(n/8)&255)<<n%32;{v=8*v.length;g[v>>5]|=128<<v%32;g[(v+64>>>
9<<4)+14]=v;v=1732584193;var k=-271733879;let n=-1732584194,h=271733878;for(let f=0;f<g.length;f+=16){const b=v,a=k,d=n,e=h;v=y(v,k,n,h,g[f+0],7,-680876936);h=y(h,v,k,n,g[f+1],12,-389564586);n=y(n,h,v,k,g[f+2],17,606105819);k=y(k,n,h,v,g[f+3],22,-1044525330);v=y(v,k,n,h,g[f+4],7,-176418897);h=y(h,v,k,n,g[f+5],12,1200080426);n=y(n,h,v,k,g[f+6],17,-1473231341);k=y(k,n,h,v,g[f+7],22,-45705983);v=y(v,k,n,h,g[f+8],7,1770035416);h=y(h,v,k,n,g[f+9],12,-1958414417);n=y(n,h,v,k,g[f+10],17,-42063);k=y(k,n,
h,v,g[f+11],22,-1990404162);v=y(v,k,n,h,g[f+12],7,1804603682);h=y(h,v,k,n,g[f+13],12,-40341101);n=y(n,h,v,k,g[f+14],17,-1502002290);k=y(k,n,h,v,g[f+15],22,1236535329);v=r(v,k,n,h,g[f+1],5,-165796510);h=r(h,v,k,n,g[f+6],9,-1069501632);n=r(n,h,v,k,g[f+11],14,643717713);k=r(k,n,h,v,g[f+0],20,-373897302);v=r(v,k,n,h,g[f+5],5,-701558691);h=r(h,v,k,n,g[f+10],9,38016083);n=r(n,h,v,k,g[f+15],14,-660478335);k=r(k,n,h,v,g[f+4],20,-405537848);v=r(v,k,n,h,g[f+9],5,568446438);h=r(h,v,k,n,g[f+14],9,-1019803690);
n=r(n,h,v,k,g[f+3],14,-187363961);k=r(k,n,h,v,g[f+8],20,1163531501);v=r(v,k,n,h,g[f+13],5,-1444681467);h=r(h,v,k,n,g[f+2],9,-51403784);n=r(n,h,v,k,g[f+7],14,1735328473);k=r(k,n,h,v,g[f+12],20,-1926607734);v=z(k^n^h,v,k,g[f+5],4,-378558);h=z(v^k^n,h,v,g[f+8],11,-2022574463);n=z(h^v^k,n,h,g[f+11],16,1839030562);k=z(n^h^v,k,n,g[f+14],23,-35309556);v=z(k^n^h,v,k,g[f+1],4,-1530992060);h=z(v^k^n,h,v,g[f+4],11,1272893353);n=z(h^v^k,n,h,g[f+7],16,-155497632);k=z(n^h^v,k,n,g[f+10],23,-1094730640);v=z(k^n^
h,v,k,g[f+13],4,681279174);h=z(v^k^n,h,v,g[f+0],11,-358537222);n=z(h^v^k,n,h,g[f+3],16,-722521979);k=z(n^h^v,k,n,g[f+6],23,76029189);v=z(k^n^h,v,k,g[f+9],4,-640364487);h=z(v^k^n,h,v,g[f+12],11,-421815835);n=z(h^v^k,n,h,g[f+15],16,530742520);k=z(n^h^v,k,n,g[f+2],23,-995338651);v=t(v,k,n,h,g[f+0],6,-198630844);h=t(h,v,k,n,g[f+7],10,1126891415);n=t(n,h,v,k,g[f+14],15,-1416354905);k=t(k,n,h,v,g[f+5],21,-57434055);v=t(v,k,n,h,g[f+12],6,1700485571);h=t(h,v,k,n,g[f+3],10,-1894986606);n=t(n,h,v,k,g[f+10],
15,-1051523);k=t(k,n,h,v,g[f+1],21,-2054922799);v=t(v,k,n,h,g[f+8],6,1873313359);h=t(h,v,k,n,g[f+15],10,-30611744);n=t(n,h,v,k,g[f+6],15,-1560198380);k=t(k,n,h,v,g[f+13],21,1309151649);v=t(v,k,n,h,g[f+4],6,-145523070);h=t(h,v,k,n,g[f+11],10,-1120210379);n=t(n,h,v,k,g[f+2],15,718787259);k=t(k,n,h,v,g[f+9],21,-343485551);v=c(v,b);k=c(k,a);n=c(n,d);h=c(h,e)}g=[v,k,n,h]}switch(q){case l.Raw:return g;case l.Hex:q=[];for(let n=0,h=4*g.length;n<h;n++)q.push("0123456789abcdef".charAt(g[n>>2]>>n%4*8+4&15)+
"0123456789abcdef".charAt(g[n>>2]>>n%4*8&15));return q=q.join("");case l.String:q=[];for(let n=0,h=32*g.length;n<h;n+=8)q.push(String.fromCharCode(g[n>>5]>>>n%32&255));return q=q.join("");case l.Base64:q=[];for(let n=0,h=4*g.length;n<h;n+=3)for(v=(g[n>>2]>>n%4*8&255)<<16|(g[n+1>>2]>>(n+1)%4*8&255)<<8|g[n+2>>2]>>(n+2)%4*8&255,k=0;4>k;k++)8*n+6*k>32*g.length?q.push("\x3d"):q.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(v>>6*(3-k)&63));return q=q.join("")}};p.outputTypes=
l;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/views/2d/engine/LevelDependentSizeVariable":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/lang ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/has ../../../core/Logger ../../../core/jsonMap ../../../core/accessorSupport/decorators/subclass ../../../core/accessorSupport/decorators/writer ../../../renderers/visualVariables/SizeVariable ../../../renderers/visualVariables/support/sizeVariableUtils".split(" "),
function(p,c,z,y,r,t,l,v,q,g,k,n,h){var f;p.LevelDependentSizeVariable=f=function(b){function a(){return b.apply(this,arguments)||this}c._inheritsLoose(a,b);var d=a.prototype;d.writeLevels=function(e,u,m){for(const x in e){u.stops=this.levels[x];break}};d.clone=function(){return new f({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:h.isSizeVariable(this.maxSize)?this.maxSize.clone():this.maxSize,
minDataValue:this.minDataValue,minSize:h.isSizeVariable(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops&&this.stops.map(e=>e.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions&&this.legendOptions.clone(),levels:y.clone(this.levels)})};return a}(n);z.__decorate([r.property()],p.LevelDependentSizeVariable.prototype,"levels",void 0);
z.__decorate([k.writer("levels")],p.LevelDependentSizeVariable.prototype,"writeLevels",null);p.LevelDependentSizeVariable=f=z.__decorate([g.subclass("esri.views.2d.engine.LevelDependentSizeVariable")],p.LevelDependentSizeVariable);Object.defineProperty(p,"__esModule",{value:!0})})},"esri/views/2d/layers/support/util":function(){define(["exports","../../../../core/jsonMap"],function(p,c){const z=new c.JSONMap({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",
esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch",mesh:"mesh"});p.analyzeRings=function(y,r,t){const l=[],v=[];let q=0,g=0;for(const k of y){y=g;let n=k[0][0],h=k[0][1];l[g++]=n;l[g++]=h;let f=0;for(let b=1;b<k.length;++b){const a=n,d=h;n=k[b][0];h=k[b][1];f+=h*a-n*d;l[g++]=n;l[g++]=h}r(f/2);0<f?(0<y-q&&(t(q,y,l,v),q=y),v.length=0):0>f?0<y-q?v.push(.5*(y-q)):g=y:g=y}0<g-q&&t(q,g,l,v)};p.toJSONGeometryType=function(y){return z.toJSON(y)};Object.defineProperty(p,"__esModule",{value:!0})})},
"esri/views/2d/engine/webgl/util/Matcher":function(){define("require exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/Error ../../../../../core/Logger ../../../../../core/LRUCache ../../../../../support/arcadeOnDemand ../../../../../symbols/cim/cimSymbolUtils ../../../../../symbols/cim/utils ../../../arcade/callExpressionWithFeature ../../../layers/features/schemaUtils".split(" "),function(p,c,z,y,r,t,l,v,q,g,k){function n(A,D,B){return h.apply(this,arguments)}function h(){h=
z._asyncToGenerator(function*(A,D,B){switch(A.type){case "simple":return d.fromBasicRenderer(A,D,B);case "map":return m.fromUVRenderer(A,D,B);case "interval":return u.fromCBRenderer(A,D,B);case "dictionary":return x.fromDictionaryRenderer(A,D,B);case "subtype":return e.fromSubtypes(A,D,B)}});return h.apply(this,arguments)}function f(A,D){return b.apply(this,arguments)}function b(){b=z._asyncToGenerator(function*(A,D){const B=A||1;if("number"===typeof B)return(w,E,I)=>B;const C=yield l.createRendererExpression(B,
D.spatialReference,D.fields);return(w,E,I)=>g(C,w,{$view:I},D.geometryType,E)||1});return b.apply(this,arguments)}const a=r.getLogger("esri/views/2d/engine/webgl/util/Matcher");let d=function(){function A(){this.type="feature";this._defaultResult=null}A.fromBasicRenderer=function(){var B=z._asyncToGenerator(function*(C,w,E){const I=new A;C.symbol&&(C=yield v.expandSymbol(C.symbol,E),w=w.createTemplateGroup(C,null),I.setDefault(w));return I});return function(C,w,E){return B.apply(this,arguments)}}();
var D=A.prototype;D.size=function(){return 1};D.getDefault=function(){return this._defaultResult};D.setDefault=function(B){this._defaultResult=B};D.match=function(B,C,w,E,I){return this.getDefault()};D.analyze=function(){var B=z._asyncToGenerator(function*(C,w,E,I,F){return null});return function(C,w,E,I,F){return B.apply(this,arguments)}}();return A}(),e=function(A){function D(B,C){var w=A.call(this)||this;w._subMatchers=B;w._subtypeField=C;return w}z._inheritsLoose(D,A);D.fromSubtypes=function(){var B=
z._asyncToGenerator(function*(C,w,E){const I=new Map,F=[];for(const H in C.renderers){const K=parseInt(H,10),G=n(C.renderers[H],w,E).then(L=>I.set(K,L));F.push(G)}yield Promise.all(F);return new D(I,C.subtypeField)});return function(C,w,E){return B.apply(this,arguments)}}();D.prototype.match=function(B,C,w,E,I){var F=C.readAttribute(this._subtypeField);return(F=this._subMatchers.get(F))?F.match(B,C,w,E,I):null};return D}(d),u=function(A){function D(C,w,E,I){var F=A.call(this)||this;F.type="interval";
F._intervals=[];F._isMaxInclusive=w;F._fieldIndex=I;F._field=C;F._normalizationInfo=E;return F}z._inheritsLoose(D,A);D.fromCBRenderer=function(){var C=z._asyncToGenerator(function*(w,E,I){const {isMaxInclusive:F,normalizationField:H,normalizationTotal:K,normalizationType:G}=w,L=new D(w.field,F,{normalizationField:H,normalizationTotal:K,normalizationType:G},w.fieldIndex),P=yield v.expandSymbol(w.backgroundFillSymbol,I);yield Promise.all(w.intervals.map(function(){var R=z._asyncToGenerator(function*(S){var M=
yield v.expandSymbol(S.symbol,I);M=yield E.createTemplateGroup(M,P);L.add({min:S.min,max:S.max},M)});return function(S){return R.apply(this,arguments)}}()));if(w=yield v.expandSymbol(w.defaultSymbol,I))w=yield E.createTemplateGroup(w,P),L.setDefault(w);return L});return function(w,E,I){return C.apply(this,arguments)}}();var B=D.prototype;B.add=function(C,w){this._intervals.push({interval:C,result:w});this._intervals.sort((E,I)=>E.interval.min-I.interval.min)};B.size=function(){return A.prototype.size.call(this)+
this._intervals.length};B.match=function(C,w,E,I,F){if(null==this._fieldIndex&&!this._field)return this.getDefault();C=null!=this._fieldIndex?w.getComputedNumericAtIndex(this._fieldIndex):this._getValueFromField(w);if(!C&&(null===C||void 0===C||isNaN(C)))return this.getDefault();for(w=0;w<this._intervals.length;w++){const {interval:H,result:K}=this._intervals[w];E=this._isMaxInclusive?C<=H.max:C<H.max;if(C>=H.min&&E)return K}return this.getDefault()};B._needsNormalization=function(){const C=this._normalizationInfo;
return C&&(C.normalizationField||C.normalizationTotal||C.normalizationType)};B._getValueFromField=function(C){const w=C.readAttribute(this._field);if(!this._needsNormalization()||null==w)return w;const {normalizationField:E,normalizationTotal:I,normalizationType:F}=this._normalizationInfo;C=!!E&&C.readAttribute(E);if(F)switch(F){case "esriNormalizeByField":return(C||void 0)&&w/C;case "esriNormalizeByLog":return Math.log(w)*Math.LOG10E;case "esriNormalizeByPercentOfTotal":return w/I*100;default:a.error(`Found unknown normalization type: ${F}`)}else a.error("Normalization is required, but no type was set!")};
return D}(d),m=function(A){function D(C,w,E){var I=A.call(this)||this;I.type="map";I._nullResult=null;I._resultsMap=new Map;I._fieldsIndex=E;I._fields=C;I._seperator=w||"";return I}z._inheritsLoose(D,A);D.fromUVRenderer=function(){var C=z._asyncToGenerator(function*(w,E,I){const F=w.fieldDelimiter,H=[w.field];w.field2&&H.push(w.field2);w.field3&&H.push(w.field3);const K=yield v.expandSymbol(w.backgroundFillSymbol,I),G=new D(H,F,w.fieldIndex);yield Promise.all(w.map.map(function(){var L=z._asyncToGenerator(function*(P){var R=
yield v.expandSymbol(P.symbol,I);R=yield E.createTemplateGroup(R,K);"\x3cNull\x3e"===P.value?G.setNullResult(R):G.add(P.value,R)});return function(P){return L.apply(this,arguments)}}()));if(w=yield v.expandSymbol(w.defaultSymbol,I))w=yield E.createTemplateGroup(w,K),G.setDefault(w);return G});return function(w,E,I){return C.apply(this,arguments)}}();var B=D.prototype;B.setNullResult=function(C){this._nullResult=C};B.add=function(C,w){this._resultsMap.set(C.toString(),w)};B.size=function(){return A.prototype.size.call(this)+
this._resultsMap.size};B.match=function(C,w,E,I,F){if(null==this._fieldsIndex&&!this._fields)return this.getDefault();C=null!=this._fieldsIndex?w.getComputedStringAtIndex(this._fieldsIndex):this._getValueFromFields(w);if(null!==this._nullResult&&(null==C||""===C||"\x3cNull\x3e"===C))return this._nullResult;if(!C&&null==C)return this.getDefault();C=C.toString();return this._resultsMap.has(C)?this._resultsMap.get(C):this.getDefault()};B._getValueFromFields=function(C){const w=[];for(const E of this._fields){const I=
C.readAttribute(E);null==I||""===I?w.push("\x3cNull\x3e"):w.push(I)}return w.join(this._seperator)};return D}(d),x=function(A){function D(C,w,E,I){var F=A.call(this)||this;F.type="dictionary";F._groupIdCache=new t(100);F._renderer=C;F._fieldMap=C.fieldMap;F._symbolFields=C.getSymbolFields();F._templates=w;F._info=E;F._scaleFn=I;return F}z._inheritsLoose(D,A);D.fromDictionaryRenderer=function(){var C=z._asyncToGenerator(function*(w,E,I){w=(yield new Promise(function(H,K){p(["../../../../../renderers/DictionaryRenderer"],
function(G){H(Object.freeze({__proto__:null,"default":G}))},K)})).default.fromJSON(w.renderer);yield w.fetchResources({spatialReference:I.spatialReference,fields:I.fields});const F=yield f(w.scaleExpression,I);return new D(w,E,I,F)});return function(w,E,I){return C.apply(this,arguments)}}();var B=D.prototype;B._analyzeFeature=function(){var C=z._asyncToGenerator(function*(w,E,I,F){w=w.readLegacyFeature();const H=this._scaleFn(w,E,I);E=this._attributeHash(w)+"-"+H;const K=this._groupIdCache.get(E);
if(K)return K;I=yield this._renderer.getSymbolAsync(w,{...I,spatialReference:this._info.spatialReference,abortOptions:F,fields:this._info.fields});I=k.createSymbolSchema(I,this._renderer);F=v.expandSymbol(I,this._info,F).then(G=>{if("expanded-cim"!==G.type)return a.error(new y("mapview-bad-type",`Found unexpected type ${G.type} in dictionary response`)),null;G.hash+="-"+H;for(const L of G.layers)L.scaleFactor=H,L.templateHash+="-"+H,"text"===L.type&&"string"===typeof L.text&&-1<L.text.indexOf("[")&&
(L.text=q.createLabelOverrideFunction(this._fieldMap,L.text,L.cim.textCase));return this._templates.createTemplateGroup(G,null)});this._groupIdCache.put(E,F,1);return F});return function(w,E,I,F){return C.apply(this,arguments)}}();B.analyze=function(){var C=z._asyncToGenerator(function*(w,E,I,F,H){w=E.getCursor();for(E=[];w.next();)E.push(this._analyzeFeature(w,I,F,H));return Promise.all(E)});return function(w,E,I,F,H){return C.apply(this,arguments)}}();B.match=function(C,w,E,I,F){return null};B._attributeHash=
function(C){let w="";for(const E of this._symbolFields){const I=this._fieldMap[E];I&&(w+=C.attributes[I]+"-")}return w};return D}(d);c.DictionaryMatcher=x;c.FeatureMatcher=d;c.IntervalMatcher=u;c.MapMatcher=m;c.SubtypeMatcher=e;c.createMatcher=n;Object.defineProperty(c,"__esModule",{value:!0})})},"esri/symbols/cim/cimSymbolUtils":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../symbols ./cimAnalyzer ./ExpandedCIM ../WebStyleSymbol".split(" "),function(p,c,z,y,r,t){z=function(){var q=
c._asyncToGenerator(function*(g,k,n){return Promise.all(g.map(h=>v(h,k,n)))});return function(g,k,n){return q.apply(this,arguments)}}();const l=function(){var q=c._asyncToGenerator(function*(g,k){return new r.ExpandedCIM(yield y.analyzeCIMSymbol(g.data,k),g.data,g.rendererKey,g.maxVVSize)});return function(g,k){return q.apply(this,arguments)}}(),v=function(){var q=c._asyncToGenerator(function*(g,k,n){return g?"cim"===g.type?l(g,k):"web-style"===g.type?(g={type:"cim",data:(yield t.fromJSON(g).fetchCIMSymbol(n)).data,
rendererKey:g.rendererKey,maxVVSize:g.maxVVSize},l(g,k)):g:null});return function(g,k,n){return q.apply(this,arguments)}}();p.expandSymbol=v;p.expandSymbols=z;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/symbols/cim/ExpandedCIM":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../views/2d/engine/webgl/enums","../../views/2d/engine/webgl/materialKey/MaterialKey"],function(p,c,z,y){const r={marker:z.WGLGeometryType.MARKER,fill:z.WGLGeometryType.FILL,line:z.WGLGeometryType.LINE,
text:z.WGLGeometryType.TEXT};z=function(){function t(l,v,q,g){const k={minScale:null==v?void 0:v.minScale,maxScale:null==v?void 0:v.maxScale};var n=k.minScale||k.maxScale?k.minScale+"-"+k.maxScale:"";this.layers=l;this.data=v;this.hash=this._createHash()+n;this.rendererKey=q;for(const h of l)h.materialKey=y.createMaterialKey(r[h.type],this.rendererKey,!1,!1),h.maxVVSize=g,h.scaleInfo=k,h.templateHash+=n}t.prototype._createHash=function(){let l="";for(const v of this.layers)l+=v.templateHash;return l};
c._createClass(t,[{key:"type",get:function(){return"expanded-cim"}}]);return t}();p.ExpandedCIM=z;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/views/2d/layers/features/processors/BaseProcessor":function(){define("../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/tslib.es6 ../../../../../core/HandleOwner ../../../../../core/accessorSupport/decorators/property ../../../../../core/has ../../../../../core/accessorSupport/ensureType ../../../../../core/Logger ../../../../../core/jsonMap ../../../../../core/accessorSupport/decorators/subclass".split(" "),
function(p,c,z,y,r,t,l,v,q){z=function(g){function k(){return g.apply(this,arguments)||this}p._inheritsLoose(k,g);var n=k.prototype;n.initialize=function(){};n.destroy=function(){};p._createClass(k,[{key:"supportsTileUpdates",get:function(){return!1}},{key:"spatialReference",get:function(){const h=this.get("tileStore.tileScheme.spatialReference");return h&&h.toJSON()||null}}]);return k}(z.HandleOwner);c.__decorate([y.property({readOnly:!0})],z.prototype,"supportsTileUpdates",null);c.__decorate([y.property({constructOnly:!0})],
z.prototype,"remoteClient",void 0);c.__decorate([y.property({constructOnly:!0})],z.prototype,"service",void 0);c.__decorate([y.property()],z.prototype,"spatialReference",null);c.__decorate([y.property({constructOnly:!0})],z.prototype,"tileInfo",void 0);c.__decorate([y.property({constructOnly:!0})],z.prototype,"tileStore",void 0);return z=c.__decorate([q.subclass("esri.views.2d.layers.features.processors.BaseProcessor")],z)})},"*noref":1}});
define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../core/HandleOwner ../../../../core/has ../../../../core/accessorSupport/decorators/property ../../../../core/accessorSupport/ensureType ../../../../core/Logger ../../../../core/jsonMap ../../../../core/accessorSupport/decorators/subclass ../../../../layers/support/TileInfo ./processors ./controllers/FeatureController2D ./support/TileStore ./support/UpdateToken ../../tiling/TileInfoView".split(" "),function(p,
c,z,y,r,t,l,v,q,g,k,n,h,f,b,a){const d=new Set;y=function(e){function u(){var x=e.apply(this,arguments)||this;x.controller=null;x.processor=null;x.remoteClient=null;x.tileStore=null;x.service=null;x.viewState=null;return x}c._inheritsLoose(u,e);var m=u.prototype;m.initialize=function(){this.handles.add(this.watch("updating",x=>{this.remoteClient.invoke("setUpdating",x).catch(A=>{})}))};m.destroy=function(){var x,A,D;null==(x=this.controller)?void 0:x.destroy();null==(A=this.processor)?void 0:A.destroy();
null==(D=this.tileStore)?void 0:D.destroy();this.controller=this.processor=this.tileStore=this.remoteClient=null};m.startup=function(){var x=c._asyncToGenerator(function*({service:A,config:D,tileInfo:B,tiles:C}){this.service=A;this.tileStore||(A=new a(k.fromJSON(B)),this.tileStore=new f(A));this.tileStore.clear();yield this._createProcessorAndController(D);yield this.update({config:D},!0);this.tileStore.updateTiles(C)});return function(A){return x.apply(this,arguments)}}();m.updateTiles=function(){var x=
c._asyncToGenerator(function*(A){this.tileStore.updateTiles(A)});return function(A){return x.apply(this,arguments)}}();m.update=function(){var x=c._asyncToGenerator(function*({config:A},D=!1){const B=b.UpdateToken.empty();D||this.controller.pause();yield Promise.all([this.processor.update(B,A),this.controller.update(B,A)]);return B.toJSON()});return function(A){return x.apply(this,arguments)}}();m.applyUpdate=function(){var x=c._asyncToGenerator(function*(A){return this.controller.applyUpdate(b.UpdateToken.create(A))});
return function(A){return x.apply(this,arguments)}}();m._createProcessorAndController=function(){var x=c._asyncToGenerator(function*(A){yield Promise.all([this._handleControllerConfig(A),this._handleProcessorConfig(A)]);this.controller.processor=this.processor});return function(A){return x.apply(this,arguments)}}();m._handleControllerConfig=function(){var x=c._asyncToGenerator(function*(A){A=yield this._createController(this.service,A);yield A.startup();return A});return function(A){return x.apply(this,
arguments)}}();m._handleProcessorConfig=function(){var x=c._asyncToGenerator(function*(A){return this._createProcessor(this.service,A)});return function(A){return x.apply(this,arguments)}}();m._createController=function(){var x=c._asyncToGenerator(function*(A,D){this.controller&&this.controller.destroy();const {tileStore:B,remoteClient:C}=this;return this.controller=A=new h({service:A,config:D,tileStore:B,remoteClient:C})});return function(A,D){return x.apply(this,arguments)}}();m._createProcessor=
function(){var x=c._asyncToGenerator(function*(A,D){const B=(yield n.loadProcessorModule(D.schema.processors[0].type)).default,{remoteClient:C,tileStore:w}=this;A=new B({service:A,config:D,tileStore:w,remoteClient:C});this.processor&&this.processor.destroy();return this.processor=A});return function(A,D){return x.apply(this,arguments)}}();c._createClass(u,[{key:"updating",get:function(){return!this.controller||this.controller.updating}}]);return u}(y.HandleOwner);z.__decorate([t.property()],y.prototype,
"controller",void 0);z.__decorate([t.property()],y.prototype,"processor",void 0);z.__decorate([t.property()],y.prototype,"updating",null);z.__decorate([t.property()],y.prototype,"viewState",void 0);y=z.__decorate([g.subclass("esri.views.2d.layers.features.Pipeline")],y);p.default=y;p.getInstances=function(){return d};Object.defineProperty(p,"__esModule",{value:!0})});