// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.20/esri/copyright.txt for details.
//>>built
define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Handles ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/Logger ../../../core/jsonMap ../../../core/accessorSupport/decorators/subclass ./LayerView2D ./graphics/GraphicContainer ./graphics/GraphicsView2D ../../layers/LayerView".split(" "),function(k,l,m,e,w,x,y,z,n,p,q,r,t){e=function(h){function f(){var a=h.apply(this,arguments)||this;
a._handles=new m;a._popupTemplates=new Map;a.graphicsViews=[];return a}k._inheritsLoose(f,h);var c=f.prototype;c.hitTest=function(a,b){if(this.suspended||!this.graphicsViews.length)return Promise.resolve(null);const u=this.graphicsViews.map(g=>g.hitTest(a,b));return Promise.all(u).then(g=>g.filter((d,v)=>{d&&(d.popupTemplate=this._popupTemplates.get(this.graphicsViews[v]),d.layer=this.layer,d.sourceLayer=this.layer);return!!d})[0]||null)};c.update=function(a){if(this.graphicsViews)for(const b of this.graphicsViews)b.processUpdate(a)};
c.attach=function(){this.layer.featureCollections.forEach(a=>{const b=new r({view:this.view,graphics:a.source,requestUpdateCallback:()=>this.requestUpdate(),container:new q(this.view.featuresTilingScheme)});b.renderer=a.renderer;this._popupTemplates.set(b,a.popupTemplate);this.graphicsViews.push(b);this.container.addChild(b.container)})};c.detach=function(){this.container.removeAllChildren();for(const a of this.graphicsViews)a.destroy();this.graphicsViews.length=0;this._handles.removeAll();this._popupTemplates=
null};c.moveStart=function(){};c.moveEnd=function(){};c.viewChange=function(){for(const a of this.graphicsViews)a.viewChange()};return f}(p.LayerView2DMixin(t));return e=l.__decorate([n.subclass("esri.views.2d.layers.RouteLayerView2D")],e)});