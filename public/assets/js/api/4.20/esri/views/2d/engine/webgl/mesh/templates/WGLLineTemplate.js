// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.20/esri/copyright.txt for details.
//>>built
define("../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/Logger ../../../../../../core/screenUtils ../../color ../../definitions ../../number ../../Utils ../../materialKey/MaterialKey ./util ./WGLBaseLineTemplate ./WGLMeshTemplate".split(" "),function(E,F,z,B,r,x,C,G,t,H,I){const J=F.getLogger("esri.views.2d.engine.webgl.WGLLineTemplate");return function(D){function h(a,d,c,e,k,l,f,m,n,u,v,g,p,q,y,w,A){var b=D.call(this)||this;a=G.LineMaterialKey.load(a);d&&(a.sdf=d.sdf,a.pattern=
!0,a.textureBinding=d.textureBinding);b._capType=e;b._joinType=k;b._miterLimitCosine=t.getLimitCosine(l);b.tessellationProperties._fillColor=f;b.tessellationProperties._tl=m;b.tessellationProperties._br=n;b._hasPattern=u;b._isDashed=v;b._isColorLocked=g;b._zOrder=q;b._effects=y;b._minMaxZoom=x.i1616to32(Math.round(w*r.MIN_MAX_ZOOM_PRECISION_FACTOR),Math.round(A*r.MIN_MAX_ZOOM_PRECISION_FACTOR));b._materialKey=a.data;b.tessellationProperties._bitset=g?1:0;b.tessellationProperties._halfWidth=.5*c;b.tessellationProperties._halfReferenceWidth=
.5*p;b.tessellationProperties.offset=0;b._initializeTessellator(!1);return b}E._inheritsLoose(h,D);h.fromCIMLine=function(a,d,c){var e=a.color,k=a.scaleFactor||1;const l=a.isDashed;let f=a.cap;l&&1===f&&(f=2);const m=a.join;k*=z.pt2px(a.width);const n=z.pt2px(a.referenceWidth),u=z.pt2px(a.miterLimit);e=e&&B.premultiplyAlphaRGBA(e)||0;const [v,g]=t.getMinMaxZoom(a.scaleInfo,c);if(!d)return new h(a.materialKey,d,k,f,m,u,e,0,0,!1,l,a.colorLocked,n,a.zOrder,a.effects,v,g);const {rect:p,width:q,height:y}=
d;var w=p.x+r.SPRITE_PADDING;const A=p.y+r.SPRITE_PADDING;c=w+q;const b=A+y;w=x.i1616to32(w,A);c=x.i1616to32(c,b);return new h(a.materialKey,d,k,f,m,u,e,w,c,!0,l,a.colorLocked,n,a.zOrder,a.effects,v,g)};h.fromSimpleLine=function(a,d){var {color:c}=a;const e="esriSLSSolid"!==a.style&&"esriSLSNull"!==a.style,k=C.getCapType(a.cap||"round"),l=C.getJoinType(a.join||"round");c=c&&"esriSLSNull"!==a.style&&B.premultiplyAlphaRGBAArray(c)||0;"esriSLSNull"===a.style&&(c=0);const f=z.pt2px(a.width),m=a.miterLimit;
if(!d)return new h(a.materialKey,d,f,k,l,m,c,0,0,!1,e,!1,f,0,null,t.DEFAULT_MIN_ZOOM,t.DEFAULT_MAX_ZOOM);const {rect:n,width:u,height:v}=d;var g=n.x+r.SPRITE_PADDING;const p=n.y+r.SPRITE_PADDING;var q=g+u;const y=p+v;g=x.i1616to32(g,p);q=x.i1616to32(q,y);return new h(a.materialKey,d,f,k,l,m,c,g,q,!0,e,!1,f,0,null,t.DEFAULT_MIN_ZOOM,t.DEFAULT_MAX_ZOOM)};h.fromPictureLineSymbol=function(a,d,c,e){J.error("PictureLineSymbol support does not exist!");return null};return h}(H(I))});