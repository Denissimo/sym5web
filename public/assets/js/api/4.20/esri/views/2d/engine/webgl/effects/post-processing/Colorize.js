// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.20/esri/copyright.txt for details.
//>>built
define("exports ../../../../../webgl/BufferObject ../../../../../webgl/FramebufferObject ../../../../../webgl/Program ../../../../../webgl/ProgramCache ../../../../../webgl/Renderbuffer ../../../../../webgl/RenderingContext ../../../../../webgl/ShaderCompiler ../../../../../webgl/Texture ../../../../../webgl/VertexArrayObject ../../VertexStream".split(" "),function(g,h,v,w,x,y,z,A,p,B,q){h=function(){function k(){this._size=[0,0];this._programDesc={vsPath:"post-processing/pp",fsPath:"post-processing/filterEffect",
attributes:new Map([["a_position",0]])}}var e=k.prototype;e.dispose=function(){this._layerFBOTexture&&(this._layerFBOTexture.dispose(),this._layerFBOTexture=null)};e.draw=function(a,b,c){const {width:l,height:m}=b;this._createOrResizeResources(a,l,m);const {context:d,painter:r}=a,{materialManager:t}=r,u=this._programDesc,f=this._quad;c=c.colorMatrix;f.bind();const n=this._layerFBOTexture;d.bindFramebuffer(b);b.copyToTexture(0,0,l,m,0,0,n);d.setBlendingEnabled(!1);d.setStencilTestEnabled(!1);a=t.getProgram(a,
u);d.useProgram(a);d.bindTexture(n,2);a.setUniformMatrix4fv("u_coefficients",c);a.setUniform1i("u_colorTexture",2);f.draw();d.setBlendingEnabled(!0);d.setBlendFunction(1,771);d.setStencilTestEnabled(!0);f.unbind()};e._createOrResizeResources=function(a,b,c){({context:a}=a);this._layerFBOTexture&&this._size[0]===b&&this._size[1]===c||(this._size[0]=b,this._size[1]=c,this._layerFBOTexture?this._layerFBOTexture.resize(b,c):this._layerFBOTexture=new p(a,{target:3553,pixelFormat:6408,internalFormat:6408,
dataType:5121,wrapMode:33071,samplingMode:9729,flipped:!1,width:b,height:c}),this._quad||(this._quad=new q(a,[-1,-1,1,-1,-1,1,1,1])))};return k}();g.Colorize=h;Object.defineProperty(g,"__esModule",{value:!0})});