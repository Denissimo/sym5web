// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.20/esri/copyright.txt for details.
//>>built
define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/has ./enums ./WGLContainer ./brushes/WGLBrushInfo ./brushes/WGLBrushStencil".split(" "),function(g,k,m,f,h,n,p){const l=(c,d)=>0!==c.key.level-d.key.level?c.key.level-d.key.level:0!==c.key.row-d.key.row?c.key.row-d.key.row:c.key.col-d.key.col;h=function(c){function d(a){var b=c.call(this)||this;b._tileInfoView=a;return b}k._inheritsLoose(d,c);var e=d.prototype;e.renderChildren=function(a){this.sortChildren(l);this.setStencilReference();
c.prototype.renderChildren.call(this,a)};e.createRenderParams=function(a){const {state:b}=a;return{...c.prototype.createRenderParams.call(this,a),requiredLevel:this._tileInfoView.getClosestInfoForScale(b.scale).level,displayLevel:this._tileInfoView.tileInfo.scaleToZoom(b.scale)}};e.prepareRenderPasses=function(a){const b=c.prototype.prepareRenderPasses.call(this,a);b.push(a.registerRenderPass({name:"stencil",brushes:[p],drawPhase:f.WGLDrawPhase.DEBUG|f.WGLDrawPhase.MAP|f.WGLDrawPhase.HIGHLIGHT,target:()=>
this.getStencilTarget()}));m("esri-tiles-debug")&&b.push(a.registerRenderPass({name:"tileInfo",brushes:[n],drawPhase:f.WGLDrawPhase.DEBUG,target:()=>this.children}));return b};e.getStencilTarget=function(){return this.children};e.updateTransforms=function(a){for(const b of this.children){const q=this._tileInfoView.getTileResolution(b.key);b.setTransform(a,q)}};e.setStencilReference=function(){let a=1;for(const b of this.children)b.stencilRef=a++};k._createClass(d,[{key:"requiresDedicatedFBO",get:function(){return!1}}]);
return d}(h);g.default=h;g.sortByLevel=l;Object.defineProperty(g,"__esModule",{value:!0})});