// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.20/esri/copyright.txt for details.
//>>built
define(["../../../../../core/Logger"],function(r){var n={exports:{}};(function(p){(function(b){b=b();void 0!==b&&(p.exports=b)})(function(){var b={DEBUG:!1,assert:function(a,c){if(b.DEBUG&&!a)throw Error("Assertion failed"+(c?": "+c:""));},GLU_TESS_MAX_COORD:1E150,TRUE_PROJECT:!1,GLU_TESS_DEFAULT_TOLERANCE:0,windingRule:{GLU_TESS_WINDING_ODD:100130,GLU_TESS_WINDING_NONZERO:100131,GLU_TESS_WINDING_POSITIVE:100132,GLU_TESS_WINDING_NEGATIVE:100133,GLU_TESS_WINDING_ABS_GEQ_TWO:100134},primitiveType:{GL_LINE_LOOP:2,
GL_TRIANGLES:4,GL_TRIANGLE_STRIP:5,GL_TRIANGLE_FAN:6},errorType:{GLU_TESS_MISSING_BEGIN_POLYGON:100151,GLU_TESS_MISSING_END_POLYGON:100153,GLU_TESS_MISSING_BEGIN_CONTOUR:100152,GLU_TESS_MISSING_END_CONTOUR:100154,GLU_TESS_COORD_TOO_LARGE:100155,GLU_TESS_NEED_COMBINE_CALLBACK:100156},gluEnum:{GLU_TESS_BEGIN:100100,GLU_TESS_VERTEX:100101,GLU_TESS_END:100102,GLU_TESS_ERROR:100103,GLU_TESS_EDGE_FLAG:100104,GLU_TESS_COMBINE:100105,GLU_TESS_BEGIN_DATA:100106,GLU_TESS_VERTEX_DATA:100107,GLU_TESS_END_DATA:100108,
GLU_TESS_ERROR_DATA:100109,GLU_TESS_EDGE_FLAG_DATA:100110,GLU_TESS_COMBINE_DATA:100111,GLU_TESS_MESH:100112,GLU_TESS_TOLERANCE:100142,GLU_TESS_WINDING_RULE:100140,GLU_TESS_BOUNDARY_ONLY:100141,GLU_INVALID_ENUM:100900,GLU_INVALID_VALUE:100901},geom:{}};b.geom.vertEq=function(a,c){return a.s===c.s&&a.t===c.t};b.geom.vertLeq=function(a,c){return a.s<c.s||a.s===c.s&&a.t<=c.t};b.geom.edgeEval=function(a,c,e){b.assert(b.geom.vertLeq(a,c)&&b.geom.vertLeq(c,e));var d=c.s-a.s,f=e.s-c.s;return 0<d+f?d<f?c.t-
a.t+d/(d+f)*(a.t-e.t):c.t-e.t+f/(d+f)*(e.t-a.t):0};b.geom.edgeSign=function(a,c,e){b.assert(b.geom.vertLeq(a,c)&&b.geom.vertLeq(c,e));var d=c.s-a.s,f=e.s-c.s;return 0<d+f?(c.t-e.t)*d+(c.t-a.t)*f:0};b.geom.transLeq=function(a,c){return a.t<c.t||a.t===c.t&&a.s<=c.s};b.geom.transEval=function(a,c,e){b.assert(b.geom.transLeq(a,c)&&b.geom.transLeq(c,e));var d=c.t-a.t,f=e.t-c.t;return 0<d+f?d<f?c.s-a.s+d/(d+f)*(a.s-e.s):c.s-e.s+f/(d+f)*(e.s-a.s):0};b.geom.transSign=function(a,c,e){b.assert(b.geom.transLeq(a,
c)&&b.geom.transLeq(c,e));var d=c.t-a.t,f=e.t-c.t;return 0<d+f?(c.s-e.s)*d+(c.s-a.s)*f:0};b.geom.edgeGoesLeft=function(a){return b.geom.vertLeq(a.dst(),a.org)};b.geom.edgeGoesRight=function(a){return b.geom.vertLeq(a.org,a.dst())};b.geom.vertL1dist=function(a,c){return Math.abs(a.s-c.s)+Math.abs(a.t-c.t)};b.geom.vertCCW=function(a,c,e){return 0<=a.s*(c.t-e.t)+c.s*(e.t-a.t)+e.s*(a.t-c.t)};b.geom.interpolate_=function(a,c,e,d){a=0>a?0:a;e=0>e?0:e;return a<=e?0===e?(c+d)/2:c+a/(a+e)*(d-c):d+e/(a+e)*
(c-d)};b.geom.edgeIntersect=function(a,c,e,d,f){if(!b.geom.vertLeq(a,c)){var g=a;a=c;c=g}b.geom.vertLeq(e,d)||(g=e,e=d,d=g);b.geom.vertLeq(a,e)||(g=a,a=e,e=g,g=c,c=d,d=g);if(b.geom.vertLeq(e,c))if(b.geom.vertLeq(c,d)){g=b.geom.edgeEval(a,e,c);var h=b.geom.edgeEval(e,c,d);0>g+h&&(g=-g,h=-h);f.s=b.geom.interpolate_(g,e.s,h,c.s)}else g=b.geom.edgeSign(a,e,c),h=-b.geom.edgeSign(a,d,c),0>g+h&&(g=-g,h=-h),f.s=b.geom.interpolate_(g,e.s,h,d.s);else f.s=(e.s+c.s)/2;b.geom.transLeq(a,c)||(g=a,a=c,c=g);b.geom.transLeq(e,
d)||(g=e,e=d,d=g);b.geom.transLeq(a,e)||(g=a,a=e,e=g,g=c,c=d,d=g);b.geom.transLeq(e,c)?b.geom.transLeq(c,d)?(g=b.geom.transEval(a,e,c),h=b.geom.transEval(e,c,d),0>g+h&&(g=-g,h=-h),f.t=b.geom.interpolate_(g,e.t,h,c.t)):(g=b.geom.transSign(a,e,c),h=-b.geom.transSign(a,d,c),0>g+h&&(g=-g,h=-h),f.t=b.geom.interpolate_(g,e.t,h,d.t)):f.t=(e.t+c.t)/2};b.mesh={};b.mesh.makeEdge=function(a){var c=b.mesh.makeEdgePair_(a.eHead);b.mesh.makeVertex_(c,a.vHead);b.mesh.makeVertex_(c.sym,a.vHead);b.mesh.makeFace_(c,
a.fHead);return c};b.mesh.meshSplice=function(a,c){var e=!1,d=!1;a!==c&&(c.org!==a.org&&(d=!0,b.mesh.killVertex_(c.org,a.org)),c.lFace!==a.lFace&&(e=!0,b.mesh.killFace_(c.lFace,a.lFace)),b.mesh.splice_(c,a),d||(b.mesh.makeVertex_(c,a.org),a.org.anEdge=a),e||(b.mesh.makeFace_(c,a.lFace),a.lFace.anEdge=a))};b.mesh.deleteEdge=function(a){var c=a.sym,e=!1;a.lFace!==a.rFace()&&(e=!0,b.mesh.killFace_(a.lFace,a.rFace()));a.oNext===a?b.mesh.killVertex_(a.org,null):(a.rFace().anEdge=a.oPrev(),a.org.anEdge=
a.oNext,b.mesh.splice_(a,a.oPrev()),e||b.mesh.makeFace_(a,a.lFace));c.oNext===c?(b.mesh.killVertex_(c.org,null),b.mesh.killFace_(c.lFace,null)):(a.lFace.anEdge=c.oPrev(),c.org.anEdge=c.oNext,b.mesh.splice_(c,c.oPrev()));b.mesh.killEdge_(a)};b.mesh.addEdgeVertex=function(a){var c=b.mesh.makeEdgePair_(a),e=c.sym;b.mesh.splice_(c,a.lNext);c.org=a.dst();b.mesh.makeVertex_(e,c.org);c.lFace=e.lFace=a.lFace;return c};b.mesh.splitEdge=function(a){var c=b.mesh.addEdgeVertex(a).sym;b.mesh.splice_(a.sym,a.sym.oPrev());
b.mesh.splice_(a.sym,c);a.sym.org=c.org;c.dst().anEdge=c.sym;c.sym.lFace=a.rFace();c.winding=a.winding;c.sym.winding=a.sym.winding;return c};b.mesh.connect=function(a,c){var e=!1,d=b.mesh.makeEdgePair_(a),f=d.sym;c.lFace!==a.lFace&&(e=!0,b.mesh.killFace_(c.lFace,a.lFace));b.mesh.splice_(d,a.lNext);b.mesh.splice_(f,c);d.org=a.dst();f.org=c.org;d.lFace=f.lFace=a.lFace;a.lFace.anEdge=f;e||b.mesh.makeFace_(d,a.lFace);return d};b.mesh.zapFace=function(a){var c=a.anEdge,e=c.lNext;do{var d=e;e=d.lNext;d.lFace=
null;if(null===d.rFace()){d.oNext===d?b.mesh.killVertex_(d.org,null):(d.org.anEdge=d.oNext,b.mesh.splice_(d,d.oPrev()));var f=d.sym;f.oNext===f?b.mesh.killVertex_(f.org,null):(f.org.anEdge=f.oNext,b.mesh.splice_(f,f.oPrev()));b.mesh.killEdge_(d)}}while(d!==c);c=a.prev;a=a.next;a.prev=c;c.next=a};b.mesh.meshUnion=function(a,c){var e=a.fHead,d=a.vHead,f=a.eHead,g=c.fHead,h=c.vHead;c=c.eHead;g.next!==g&&(e.prev.next=g.next,g.next.prev=e.prev,g.prev.next=e,e.prev=g.prev);h.next!==h&&(d.prev.next=h.next,
h.next.prev=d.prev,h.prev.next=d,d.prev=h.prev);c.next!==c&&(f.sym.next.sym.next=c.next,c.next.sym.next=f.sym.next,c.sym.next.sym.next=f,f.sym.next=c.sym.next);return a};b.mesh.deleteMesh=function(a){};b.mesh.makeEdgePair_=function(a){var c=new b.GluHalfEdge,e=new b.GluHalfEdge,d=a.sym.next;e.next=d;d.sym.next=c;c.next=a;a.sym.next=e;c.sym=e;c.oNext=c;c.lNext=e;e.sym=c;e.oNext=e;return e.lNext=c};b.mesh.splice_=function(a,c){var e=a.oNext,d=c.oNext;e.sym.lNext=c;d.sym.lNext=a;a.oNext=d;c.oNext=e};
b.mesh.makeVertex_=function(a,c){var e=c.prev,d=new b.GluVertex(c,e);e.next=d;c.prev=d;c=d.anEdge=a;do c.org=d,c=c.oNext;while(c!==a)};b.mesh.makeFace_=function(a,c){var e=c.prev,d=new b.GluFace(c,e);e.next=d;c.prev=d;d.anEdge=a;d.inside=c.inside;c=a;do c.lFace=d,c=c.lNext;while(c!==a)};b.mesh.killEdge_=function(a){var c=a.next;a=a.sym.next;c.sym.next=a;a.sym.next=c};b.mesh.killVertex_=function(a,c){var e=a.anEdge,d=e;do d.org=c,d=d.oNext;while(d!==e);c=a.prev;a=a.next;a.prev=c;c.next=a};b.mesh.killFace_=
function(a,c){var e=a.anEdge,d=e;do d.lFace=c,d=d.lNext;while(d!==e);c=a.prev;a=a.next;a.prev=c;c.next=a};b.normal={};b.normal.S_UNIT_X_=1;b.normal.S_UNIT_Y_=0;b.normal.projectPolygon=function(a,c,e,d){var f=!1,g=[c,e,d];0===c&&0===e&&0===d&&(b.normal.computeNormal_(a,g),f=!0);e=b.normal.longAxis_(g);c=a.mesh.vHead;if(b.TRUE_PROJECT){b.normal.normalize_(g);d=[0,0,0];var h=[0,0,0];d[e]=0;d[(e+1)%3]=b.normal.S_UNIT_X_;d[(e+2)%3]=b.normal.S_UNIT_Y_;e=b.normal.dot_(d,g);d[0]-=e*g[0];d[1]-=e*g[1];d[2]-=
e*g[2];b.normal.normalize_(d);h[0]=g[1]*d[2]-g[2]*d[1];h[1]=g[2]*d[0]-g[0]*d[2];h[2]=g[0]*d[1]-g[1]*d[0];b.normal.normalize_(h);for(g=c.next;g!==c;g=g.next)g.s=b.normal.dot_(g.coords,d),g.t=b.normal.dot_(g.coords,h)}else for(d=(e+1)%3,h=(e+2)%3,e=0<g[e]?1:-1,g=c.next;g!==c;g=g.next)g.s=g.coords[d],g.t=e*g.coords[h];f&&b.normal.checkOrientation_(a)};b.normal.dot_=function(a,c){return a[0]*c[0]+a[1]*c[1]+a[2]*c[2]};b.normal.normalize_=function(a){var c=a[0]*a[0]+a[1]*a[1]+a[2]*a[2];b.assert(0<c);c=
Math.sqrt(c);a[0]/=c;a[1]/=c;a[2]/=c};b.normal.longAxis_=function(a){var c=0;Math.abs(a[1])>Math.abs(a[0])&&(c=1);Math.abs(a[2])>Math.abs(a[c])&&(c=2);return c};b.normal.computeNormal_=function(a,c){var e=[-2*b.GLU_TESS_MAX_COORD,-2*b.GLU_TESS_MAX_COORD,-2*b.GLU_TESS_MAX_COORD],d=[2*b.GLU_TESS_MAX_COORD,2*b.GLU_TESS_MAX_COORD,2*b.GLU_TESS_MAX_COORD],f=[],g=[],h;a=a.mesh.vHead;for(h=a.next;h!==a;h=h.next)for(var k=0;3>k;++k){var l=h.coords[k];l<d[k]&&(d[k]=l,g[k]=h);l>e[k]&&(e[k]=l,f[k]=h)}h=0;e[1]-
d[1]>e[0]-d[0]&&(h=1);e[2]-d[2]>e[h]-d[h]&&(h=2);if(d[h]>=e[h])c[0]=0,c[1]=0,c[2]=1;else{e=0;d=g[h];f=f[h];g=[0,0,0];d=[d.coords[0]-f.coords[0],d.coords[1]-f.coords[1],d.coords[2]-f.coords[2]];k=[0,0,0];for(h=a.next;h!==a;h=h.next)k[0]=h.coords[0]-f.coords[0],k[1]=h.coords[1]-f.coords[1],k[2]=h.coords[2]-f.coords[2],g[0]=d[1]*k[2]-d[2]*k[1],g[1]=d[2]*k[0]-d[0]*k[2],g[2]=d[0]*k[1]-d[1]*k[0],l=g[0]*g[0]+g[1]*g[1]+g[2]*g[2],l>e&&(e=l,c[0]=g[0],c[1]=g[1],c[2]=g[2]);0>=e&&(c[0]=c[1]=c[2]=0,c[b.normal.longAxis_(d)]=
1)}};b.normal.checkOrientation_=function(a){for(var c=0,e=a.mesh.fHead,d=e.next;d!==e;d=d.next){var f=d.anEdge;if(!(0>=f.winding)){do c+=(f.org.s-f.dst().s)*(f.org.t+f.dst().t),f=f.lNext;while(f!==d.anEdge)}}if(0>c)for(a=a.mesh.vHead,c=a.next;c!==a;c=c.next)c.t=-c.t};b.render={};b.render.renderMesh=function(a,c,e){for(var d=!1,f=-1,g=c.fHead.prev;g!==c.fHead;g=g.prev)if(g.inside){d||(a.callBeginCallback(b.primitiveType.GL_TRIANGLES),d=!0);var h=g.anEdge;b.assert(h.lNext.lNext.lNext===h,"renderMesh called with non-triangulated mesh");
do{if(e){var k=h.rFace().inside?0:1;f!==k&&(f=k,a.callEdgeFlagCallback(!!f))}a.callVertexCallback(h.org.data);h=h.lNext}while(h!==g.anEdge)}d&&a.callEndCallback()};b.render.renderBoundary=function(a,c){for(var e=c.fHead.next;e!==c.fHead;e=e.next)if(e.inside){a.callBeginCallback(b.primitiveType.GL_LINE_LOOP);var d=e.anEdge;do a.callVertexCallback(d.org.data),d=d.lNext;while(d!==e.anEdge);a.callEndCallback()}};b.sweep={};b.sweep.SENTINEL_COORD_=4*b.GLU_TESS_MAX_COORD;b.sweep.TOLERANCE_NONZERO_=!1;b.sweep.computeInterior=
function(a){a.fatalError=!1;b.sweep.removeDegenerateEdges_(a);b.sweep.initPriorityQ_(a);b.sweep.initEdgeDict_(a);for(var c;null!==(c=a.pq.extractMin());){for(;;){var e=a.pq.minimum();if(null===e||!b.geom.vertEq(e,c))break;e=a.pq.extractMin();b.sweep.spliceMergeVertices_(a,c.anEdge,e.anEdge)}b.sweep.sweepEvent_(a,c)}c=a.dict.getMin().getKey();a.event=c.eUp.org;b.sweep.doneEdgeDict_(a);b.sweep.donePriorityQ_(a);b.sweep.removeDegenerateFaces_(a.mesh);a.mesh.checkMesh()};b.sweep.addWinding_=function(a,
c){a.winding+=c.winding;a.sym.winding+=c.sym.winding};b.sweep.edgeLeq_=function(a,c,e){a=a.event;c=c.eUp;e=e.eUp;if(c.dst()===a)return e.dst()===a?b.geom.vertLeq(c.org,e.org)?0>=b.geom.edgeSign(e.dst(),c.org,e.org):0<=b.geom.edgeSign(c.dst(),e.org,c.org):0>=b.geom.edgeSign(e.dst(),a,e.org);if(e.dst()===a)return 0<=b.geom.edgeSign(c.dst(),a,c.org);c=b.geom.edgeEval(c.dst(),a,c.org);a=b.geom.edgeEval(e.dst(),a,e.org);return c>=a};b.sweep.deleteRegion_=function(a,c){c.fixUpperEdge&&b.assert(0===c.eUp.winding);
c.eUp.activeRegion=null;a.dict.deleteNode(c.nodeUp);c.nodeUp=null};b.sweep.fixUpperEdge_=function(a,c){b.assert(a.fixUpperEdge);b.mesh.deleteEdge(a.eUp);a.fixUpperEdge=!1;a.eUp=c;c.activeRegion=a};b.sweep.topLeftRegion_=function(a){var c=a.eUp.org;do a=a.regionAbove();while(a.eUp.org===c);a.fixUpperEdge&&(c=b.mesh.connect(a.regionBelow().eUp.sym,a.eUp.lNext),b.sweep.fixUpperEdge_(a,c),a=a.regionAbove());return a};b.sweep.topRightRegion_=function(a){var c=a.eUp.dst();do a=a.regionAbove();while(a.eUp.dst()===
c);return a};b.sweep.addRegionBelow_=function(a,c,e){var d=new b.ActiveRegion;d.eUp=e;d.nodeUp=a.dict.insertBefore(c.nodeUp,d);return e.activeRegion=d};b.sweep.isWindingInside_=function(a,c){switch(a.windingRule){case b.windingRule.GLU_TESS_WINDING_ODD:return 0!==(c&1);case b.windingRule.GLU_TESS_WINDING_NONZERO:return 0!==c;case b.windingRule.GLU_TESS_WINDING_POSITIVE:return 0<c;case b.windingRule.GLU_TESS_WINDING_NEGATIVE:return 0>c;case b.windingRule.GLU_TESS_WINDING_ABS_GEQ_TWO:return 2<=c||-2>=
c}b.assert(!1);return!1};b.sweep.computeWinding_=function(a,c){c.windingNumber=c.regionAbove().windingNumber+c.eUp.winding;c.inside=b.sweep.isWindingInside_(a,c.windingNumber)};b.sweep.finishRegion_=function(a,c){var e=c.eUp,d=e.lFace;d.inside=c.inside;d.anEdge=e;b.sweep.deleteRegion_(a,c)};b.sweep.finishLeftRegions_=function(a,c,e){var d=c;for(c=c.eUp;d!==e;){d.fixUpperEdge=!1;var f=d.regionBelow(),g=f.eUp;if(g.org!==c.org){if(!f.fixUpperEdge){b.sweep.finishRegion_(a,d);break}g=b.mesh.connect(c.lPrev(),
g.sym);b.sweep.fixUpperEdge_(f,g)}c.oNext!==g&&(b.mesh.meshSplice(g.oPrev(),g),b.mesh.meshSplice(c,g));b.sweep.finishRegion_(a,d);c=f.eUp;d=f}return c};b.sweep.addRightEdges_=function(a,c,e,d,f,g){var h=!0;do b.assert(b.geom.vertLeq(e.org,e.dst())),b.sweep.addRegionBelow_(a,c,e.sym),e=e.oNext;while(e!==d);for(null===f&&(f=c.regionBelow().eUp.rPrev());;){d=c.regionBelow();e=d.eUp.sym;if(e.org!==f.org)break;e.oNext!==f&&(b.mesh.meshSplice(e.oPrev(),e),b.mesh.meshSplice(f.oPrev(),e));d.windingNumber=
c.windingNumber-e.winding;d.inside=b.sweep.isWindingInside_(a,d.windingNumber);c.dirty=!0;!h&&b.sweep.checkForRightSplice_(a,c)&&(b.sweep.addWinding_(e,f),b.sweep.deleteRegion_(a,c),b.mesh.deleteEdge(f));h=!1;c=d;f=e}c.dirty=!0;b.assert(c.windingNumber-e.winding===d.windingNumber);g&&b.sweep.walkDirtyRegions_(a,c)};b.sweep.callCombine_=function(a,c,e,d,f){var g=[c.coords[0],c.coords[1],c.coords[2]];c.data=null;c.data=a.callCombineCallback(g,e,d);null===c.data&&(f?a.fatalError||(a.callErrorCallback(b.errorType.GLU_TESS_NEED_COMBINE_CALLBACK),
a.fatalError=!0):c.data=e[0])};b.sweep.spliceMergeVertices_=function(a,c,e){var d=[null,null,null,null];d[0]=c.org.data;d[1]=e.org.data;b.sweep.callCombine_(a,c.org,d,[.5,.5,0,0],!1);b.mesh.meshSplice(c,e)};b.sweep.vertexWeights_=function(a,c,e,d,f){var g=b.geom.vertL1dist(c,a),h=b.geom.vertL1dist(e,a),k=f+1;d[f]=.5*h/(g+h);d[k]=.5*g/(g+h);a.coords[0]+=d[f]*c.coords[0]+d[k]*e.coords[0];a.coords[1]+=d[f]*c.coords[1]+d[k]*e.coords[1];a.coords[2]+=d[f]*c.coords[2]+d[k]*e.coords[2]};b.sweep.getIntersectData_=
function(a,c,e,d,f,g){var h=[0,0,0,0],k=[e.data,d.data,f.data,g.data];c.coords[0]=c.coords[1]=c.coords[2]=0;b.sweep.vertexWeights_(c,e,d,h,0);b.sweep.vertexWeights_(c,f,g,h,2);b.sweep.callCombine_(a,c,k,h,!0)};b.sweep.checkForRightSplice_=function(a,c){var e=c.regionBelow(),d=c.eUp,f=e.eUp;if(b.geom.vertLeq(d.org,f.org)){if(0<b.geom.edgeSign(f.dst(),d.org,f.org))return!1;b.geom.vertEq(d.org,f.org)?d.org!==f.org&&(a.pq.remove(d.org.pqHandle),b.sweep.spliceMergeVertices_(a,f.oPrev(),d)):(b.mesh.splitEdge(f.sym),
b.mesh.meshSplice(d,f.oPrev()),c.dirty=e.dirty=!0)}else{if(0>b.geom.edgeSign(d.dst(),f.org,d.org))return!1;c.regionAbove().dirty=c.dirty=!0;b.mesh.splitEdge(d.sym);b.mesh.meshSplice(f.oPrev(),d)}return!0};b.sweep.checkForLeftSplice_=function(a,c){var e=c.regionBelow();a=c.eUp;var d=e.eUp;b.assert(!b.geom.vertEq(a.dst(),d.dst()));if(b.geom.vertLeq(a.dst(),d.dst())){if(0>b.geom.edgeSign(a.dst(),d.dst(),a.org))return!1;c.regionAbove().dirty=c.dirty=!0;e=b.mesh.splitEdge(a);b.mesh.meshSplice(d.sym,e);
e.lFace.inside=c.inside}else{if(0<b.geom.edgeSign(d.dst(),a.dst(),d.org))return!1;c.dirty=e.dirty=!0;e=b.mesh.splitEdge(d);b.mesh.meshSplice(a.lNext,d.sym);e.rFace().inside=c.inside}return!0};b.sweep.checkForIntersect_=function(a,c){var e=c.regionBelow(),d=c.eUp,f=e.eUp,g=d.org,h=f.org,k=d.dst(),l=f.dst(),m=new b.GluVertex;b.assert(!b.geom.vertEq(l,k));b.assert(0>=b.geom.edgeSign(k,a.event,g));b.assert(0<=b.geom.edgeSign(l,a.event,h));b.assert(g!==a.event&&h!==a.event);b.assert(!c.fixUpperEdge&&!e.fixUpperEdge);
if(g===h||Math.min(g.t,k.t)>Math.max(h.t,l.t))return!1;if(b.geom.vertLeq(g,h)){if(0<b.geom.edgeSign(l,g,h))return!1}else if(0>b.geom.edgeSign(k,h,g))return!1;b.geom.edgeIntersect(k,g,l,h,m);b.assert(Math.min(g.t,k.t)<=m.t);b.assert(m.t<=Math.max(h.t,l.t));b.assert(Math.min(l.s,k.s)<=m.s);b.assert(m.s<=Math.max(h.s,g.s));b.geom.vertLeq(m,a.event)&&(m.s=a.event.s,m.t=a.event.t);var q=b.geom.vertLeq(g,h)?g:h;b.geom.vertLeq(q,m)&&(m.s=q.s,m.t=q.t);if(b.geom.vertEq(m,g)||b.geom.vertEq(m,h))return b.sweep.checkForRightSplice_(a,
c),!1;if(!b.geom.vertEq(k,a.event)&&0<=b.geom.edgeSign(k,a.event,m)||!b.geom.vertEq(l,a.event)&&0>=b.geom.edgeSign(l,a.event,m)){if(l===a.event)return b.mesh.splitEdge(d.sym),b.mesh.meshSplice(f.sym,d),c=b.sweep.topLeftRegion_(c),d=c.regionBelow().eUp,b.sweep.finishLeftRegions_(a,c.regionBelow(),e),b.sweep.addRightEdges_(a,c,d.oPrev(),d,d,!0),!0;if(k===a.event)return b.mesh.splitEdge(f.sym),b.mesh.meshSplice(d.lNext,f.oPrev()),e=c,c=b.sweep.topRightRegion_(c),g=c.regionBelow().eUp.rPrev(),e.eUp=f.oPrev(),
f=b.sweep.finishLeftRegions_(a,e,null),b.sweep.addRightEdges_(a,c,f.oNext,d.rPrev(),g,!0),!0;0<=b.geom.edgeSign(k,a.event,m)&&(c.regionAbove().dirty=c.dirty=!0,b.mesh.splitEdge(d.sym),d.org.s=a.event.s,d.org.t=a.event.t);0>=b.geom.edgeSign(l,a.event,m)&&(c.dirty=e.dirty=!0,b.mesh.splitEdge(f.sym),f.org.s=a.event.s,f.org.t=a.event.t);return!1}b.mesh.splitEdge(d.sym);b.mesh.splitEdge(f.sym);b.mesh.meshSplice(f.oPrev(),d);d.org.s=m.s;d.org.t=m.t;d.org.pqHandle=a.pq.insert(d.org);b.sweep.getIntersectData_(a,
d.org,g,k,h,l);c.regionAbove().dirty=c.dirty=e.dirty=!0;return!1};b.sweep.walkDirtyRegions_=function(a,c){for(var e=c.regionBelow();;){for(;e.dirty;)c=e,e=e.regionBelow();if(!c.dirty&&(e=c,c=c.regionAbove(),null===c||!c.dirty))break;c.dirty=!1;var d=c.eUp,f=e.eUp;d.dst()!==f.dst()&&b.sweep.checkForLeftSplice_(a,c)&&(e.fixUpperEdge?(b.sweep.deleteRegion_(a,e),b.mesh.deleteEdge(f),e=c.regionBelow(),f=e.eUp):c.fixUpperEdge&&(b.sweep.deleteRegion_(a,c),b.mesh.deleteEdge(d),c=e.regionAbove(),d=c.eUp));
if(d.org!==f.org)if(d.dst()===f.dst()||c.fixUpperEdge||e.fixUpperEdge||d.dst()!==a.event&&f.dst()!==a.event)b.sweep.checkForRightSplice_(a,c);else if(b.sweep.checkForIntersect_(a,c))break;d.org===f.org&&d.dst()===f.dst()&&(b.sweep.addWinding_(f,d),b.sweep.deleteRegion_(a,c),b.mesh.deleteEdge(d),c=e.regionAbove())}};b.sweep.connectRightVertex_=function(a,c,e){var d=e.oNext,f=c.regionBelow(),g=c.eUp,h=f.eUp,k=!1;g.dst()!==h.dst()&&b.sweep.checkForIntersect_(a,c);b.geom.vertEq(g.org,a.event)&&(b.mesh.meshSplice(d.oPrev(),
g),c=b.sweep.topLeftRegion_(c),d=c.regionBelow().eUp,b.sweep.finishLeftRegions_(a,c.regionBelow(),f),k=!0);b.geom.vertEq(h.org,a.event)&&(b.mesh.meshSplice(e,h.oPrev()),e=b.sweep.finishLeftRegions_(a,f,null),k=!0);k?b.sweep.addRightEdges_(a,c,e.oNext,d,d,!0):(d=b.geom.vertLeq(h.org,g.org)?h.oPrev():g,d=b.mesh.connect(e.lPrev(),d),b.sweep.addRightEdges_(a,c,d,d.oNext,d.oNext,!1),d.sym.activeRegion.fixUpperEdge=!0,b.sweep.walkDirtyRegions_(a,c))};b.sweep.connectLeftDegenerate_=function(a,c,e){var d=
c.eUp;if(b.geom.vertEq(d.org,e))b.assert(b.sweep.TOLERANCE_NONZERO_),b.sweep.TOLERANCE_NONZERO_&&b.sweep.spliceMergeVertices_(a,d,e.anEdge);else if(b.geom.vertEq(d.dst(),e)){if(b.assert(b.sweep.TOLERANCE_NONZERO_),b.sweep.TOLERANCE_NONZERO_){c=b.sweep.topRightRegion_(c);d=c.regionBelow();var f=d.eUp.sym,g=f.oNext,h=g;d.fixUpperEdge&&(b.assert(g!==f),b.sweep.deleteRegion_(a,d),b.mesh.deleteEdge(f),f=g.oPrev());b.mesh.meshSplice(e.anEdge,f);b.geom.edgeGoesLeft(g)||(g=null);b.sweep.addRightEdges_(a,
c,f.oNext,h,g,!0)}}else b.mesh.splitEdge(d.sym),c.fixUpperEdge&&(b.mesh.deleteEdge(d.oNext),c.fixUpperEdge=!1),b.mesh.meshSplice(e.anEdge,d),b.sweep.sweepEvent_(a,e)};b.sweep.connectLeftVertex_=function(a,c){var e=new b.ActiveRegion;e.eUp=c.anEdge.sym;e=a.dict.search(e).getKey();var d=e.regionBelow(),f=e.eUp,g=d.eUp;0===b.geom.edgeSign(f.dst(),c,f.org)?b.sweep.connectLeftDegenerate_(a,e,c):(d=b.geom.vertLeq(g.dst(),f.dst())?e:d,e.inside||d.fixUpperEdge?(f=d===e?b.mesh.connect(c.anEdge.sym,f.lNext):
b.mesh.connect(g.dNext(),c.anEdge).sym,d.fixUpperEdge?b.sweep.fixUpperEdge_(d,f):b.sweep.computeWinding_(a,b.sweep.addRegionBelow_(a,e,f)),b.sweep.sweepEvent_(a,c)):b.sweep.addRightEdges_(a,e,c.anEdge,c.anEdge,null,!0))};b.sweep.sweepEvent_=function(a,c){a.event=c;for(var e=c.anEdge;null===e.activeRegion;)if(e=e.oNext,e===c.anEdge){b.sweep.connectLeftVertex_(a,c);return}c=b.sweep.topLeftRegion_(e.activeRegion);var d=c.regionBelow();e=d.eUp;d=b.sweep.finishLeftRegions_(a,d,null);d.oNext===e?b.sweep.connectRightVertex_(a,
c,d):b.sweep.addRightEdges_(a,c,d.oNext,e,e,!0)};b.sweep.addSentinel_=function(a,c){var e=new b.ActiveRegion,d=b.mesh.makeEdge(a.mesh);d.org.s=b.sweep.SENTINEL_COORD_;d.org.t=c;d.dst().s=-b.sweep.SENTINEL_COORD_;d.dst().t=c;a.event=d.dst();e.eUp=d;e.windingNumber=0;e.inside=!1;e.fixUpperEdge=!1;e.sentinel=!0;e.dirty=!1;e.nodeUp=a.dict.insert(e)};b.sweep.initEdgeDict_=function(a){a.dict=new b.Dict(a,b.sweep.edgeLeq_);b.sweep.addSentinel_(a,-b.sweep.SENTINEL_COORD_);b.sweep.addSentinel_(a,b.sweep.SENTINEL_COORD_)};
b.sweep.doneEdgeDict_=function(a){for(var c=0,e;null!==(e=a.dict.getMin().getKey());)e.sentinel||(b.assert(e.fixUpperEdge),b.assert(1===++c)),b.assert(0===e.windingNumber),b.sweep.deleteRegion_(a,e);a.dict=null};b.sweep.removeDegenerateEdges_=function(a){for(var c=a.mesh.eHead,e,d=c.next;d!==c;d=e){e=d.next;var f=d.lNext;b.geom.vertEq(d.org,d.dst())&&d.lNext.lNext!==d&&(b.sweep.spliceMergeVertices_(a,f,d),b.mesh.deleteEdge(d),d=f,f=d.lNext);if(f.lNext===d){if(f!==d){if(f===e||f===e.sym)e=e.next;b.mesh.deleteEdge(f)}if(d===
e||d===e.sym)e=e.next;b.mesh.deleteEdge(d)}}};b.sweep.initPriorityQ_=function(a){var c=new b.PriorityQ;a.pq=c;a=a.mesh.vHead;var e;for(e=a.next;e!==a;e=e.next)e.pqHandle=c.insert(e);c.init()};b.sweep.donePriorityQ_=function(a){a.pq.deleteQ();a.pq=null};b.sweep.removeDegenerateFaces_=function(a){for(var c,e=a.fHead.next;e!==a.fHead;e=c)c=e.next,e=e.anEdge,b.assert(e.lNext!==e),e.lNext.lNext===e&&(b.sweep.addWinding_(e.oNext,e),b.mesh.deleteEdge(e))};b.tessmono={};b.tessmono.tessellateMonoRegion_=function(a){a=
a.anEdge;for(b.assert(a.lNext!==a&&a.lNext.lNext!==a);b.geom.vertLeq(a.dst(),a.org);a=a.lPrev());for(;b.geom.vertLeq(a.org,a.dst());a=a.lNext);for(var c=a.lPrev(),e;a.lNext!==c;)if(b.geom.vertLeq(a.dst(),c.org)){for(;c.lNext!==a&&(b.geom.edgeGoesLeft(c.lNext)||0>=b.geom.edgeSign(c.org,c.dst(),c.lNext.dst()));)e=b.mesh.connect(c.lNext,c),c=e.sym;c=c.lPrev()}else{for(;c.lNext!==a&&(b.geom.edgeGoesRight(a.lPrev())||0<=b.geom.edgeSign(a.dst(),a.org,a.lPrev().org));)e=b.mesh.connect(a,a.lPrev()),a=e.sym;
a=a.lNext}for(b.assert(c.lNext!==a);c.lNext.lNext!==a;)e=b.mesh.connect(c.lNext,c),c=e.sym};b.tessmono.tessellateInterior=function(a){for(var c,e=a.fHead.next;e!==a.fHead;e=c)c=e.next,e.inside&&b.tessmono.tessellateMonoRegion_(e)};b.tessmono.discardExterior=function(a){for(var c,e=a.fHead.next;e!==a.fHead;e=c)c=e.next,e.inside||b.mesh.zapFace(e)};b.tessmono.setWindingNumber=function(a,c,e){for(var d,f=a.eHead.next;f!==a.eHead;f=d)d=f.next,f.rFace().inside!==f.lFace.inside?f.winding=f.lFace.inside?
c:-c:e?b.mesh.deleteEdge(f):f.winding=0};b.Dict=function(a,c){this.head_=new b.DictNode;this.frame_=a;this.leq_=c};b.Dict.prototype.deleteDict_=function(){};b.Dict.prototype.insertBefore=function(a,c){do a=a.prev;while(null!==a.key&&!this.leq_(this.frame_,a.key,c));c=new b.DictNode(c,a.next,a);a.next.prev=c;return a.next=c};b.Dict.prototype.insert=function(a){return this.insertBefore(this.head_,a)};b.Dict.prototype.deleteNode=function(a){a.next.prev=a.prev;a.prev.next=a.next};b.Dict.prototype.search=
function(a){var c=this.head_;do c=c.next;while(null!==c.key&&!this.leq_(this.frame_,a,c.key));return c};b.Dict.prototype.getMin=function(){return this.head_.next};b.Dict.prototype.getMax=function(){return this.head_.prev};b.DictNode=function(a,c,e){this.key=a||null;this.next=c||this;this.prev=e||this};b.DictNode.prototype.getKey=function(){return this.key};b.DictNode.prototype.getSuccessor=function(){return this.next};b.DictNode.prototype.getPredecessor=function(){return this.prev};b.GluTesselator=
function(){this.state_=b.GluTesselator.tessState_.T_DORMANT;this.errorCallback_=this.mesh=this.lastEdge_=null;this.normal_=[0,0,0];this.windingRule=b.windingRule.GLU_TESS_WINDING_ODD;this.fatalError=!1;this.combineCallback_=this.event=this.pq=this.dict=null;this.boundaryOnly_=!1;this.polygonData_=this.meshCallback_=this.endCallback_=this.vertexCallback_=this.edgeFlagCallback_=this.beginCallback_=null};b.GluTesselator.tessState_={T_DORMANT:0,T_IN_POLYGON:1,T_IN_CONTOUR:2};b.GluTesselator.prototype.gluDeleteTess=
function(){this.requireState_(b.GluTesselator.tessState_.T_DORMANT)};b.GluTesselator.prototype.gluTessProperty=function(a,c){switch(a){case b.gluEnum.GLU_TESS_TOLERANCE:return;case b.gluEnum.GLU_TESS_WINDING_RULE:switch(c){case b.windingRule.GLU_TESS_WINDING_ODD:case b.windingRule.GLU_TESS_WINDING_NONZERO:case b.windingRule.GLU_TESS_WINDING_POSITIVE:case b.windingRule.GLU_TESS_WINDING_NEGATIVE:case b.windingRule.GLU_TESS_WINDING_ABS_GEQ_TWO:this.windingRule=c;return}break;case b.gluEnum.GLU_TESS_BOUNDARY_ONLY:this.boundaryOnly_=
!!c;return;default:this.callErrorCallback(b.gluEnum.GLU_INVALID_ENUM);return}this.callErrorCallback(b.gluEnum.GLU_INVALID_VALUE)};b.GluTesselator.prototype.gluGetTessProperty=function(a){switch(a){case b.gluEnum.GLU_TESS_TOLERANCE:return 0;case b.gluEnum.GLU_TESS_WINDING_RULE:return a=this.windingRule,b.assert(a===b.windingRule.GLU_TESS_WINDING_ODD||a===b.windingRule.GLU_TESS_WINDING_NONZERO||a===b.windingRule.GLU_TESS_WINDING_POSITIVE||a===b.windingRule.GLU_TESS_WINDING_NEGATIVE||a===b.windingRule.GLU_TESS_WINDING_ABS_GEQ_TWO),
a;case b.gluEnum.GLU_TESS_BOUNDARY_ONLY:return b.assert(!0===this.boundaryOnly_||!1===this.boundaryOnly_),this.boundaryOnly_;default:this.callErrorCallback(b.gluEnum.GLU_INVALID_ENUM)}return!1};b.GluTesselator.prototype.gluTessNormal=function(a,c,e){this.normal_[0]=a;this.normal_[1]=c;this.normal_[2]=e};b.GluTesselator.prototype.gluTessCallback=function(a,c){c=c?c:null;switch(a){case b.gluEnum.GLU_TESS_BEGIN:case b.gluEnum.GLU_TESS_BEGIN_DATA:this.beginCallback_=c;break;case b.gluEnum.GLU_TESS_EDGE_FLAG:case b.gluEnum.GLU_TESS_EDGE_FLAG_DATA:this.edgeFlagCallback_=
c;break;case b.gluEnum.GLU_TESS_VERTEX:case b.gluEnum.GLU_TESS_VERTEX_DATA:this.vertexCallback_=c;break;case b.gluEnum.GLU_TESS_END:case b.gluEnum.GLU_TESS_END_DATA:this.endCallback_=c;break;case b.gluEnum.GLU_TESS_ERROR:case b.gluEnum.GLU_TESS_ERROR_DATA:this.errorCallback_=c;break;case b.gluEnum.GLU_TESS_COMBINE:case b.gluEnum.GLU_TESS_COMBINE_DATA:this.combineCallback_=c;break;case b.gluEnum.GLU_TESS_MESH:this.meshCallback_=c;break;default:this.callErrorCallback(b.gluEnum.GLU_INVALID_ENUM)}};b.GluTesselator.prototype.gluTessVertex=
function(a,c){var e=!1,d=[0,0,0];this.requireState_(b.GluTesselator.tessState_.T_IN_CONTOUR);for(var f=0;3>f;++f){var g=a[f];g<-b.GLU_TESS_MAX_COORD&&(g=-b.GLU_TESS_MAX_COORD,e=!0);g>b.GLU_TESS_MAX_COORD&&(g=b.GLU_TESS_MAX_COORD,e=!0);d[f]=g}e&&this.callErrorCallback(b.errorType.GLU_TESS_COORD_TOO_LARGE);this.addVertex_(d,c)};b.GluTesselator.prototype.gluTessBeginPolygon=function(a){this.requireState_(b.GluTesselator.tessState_.T_DORMANT);this.state_=b.GluTesselator.tessState_.T_IN_POLYGON;this.mesh=
new b.GluMesh;this.polygonData_=a};b.GluTesselator.prototype.gluTessBeginContour=function(){this.requireState_(b.GluTesselator.tessState_.T_IN_POLYGON);this.state_=b.GluTesselator.tessState_.T_IN_CONTOUR;this.lastEdge_=null};b.GluTesselator.prototype.gluTessEndContour=function(){this.requireState_(b.GluTesselator.tessState_.T_IN_CONTOUR);this.state_=b.GluTesselator.tessState_.T_IN_POLYGON};b.GluTesselator.prototype.gluTessEndPolygon=function(){this.requireState_(b.GluTesselator.tessState_.T_IN_POLYGON);
this.state_=b.GluTesselator.tessState_.T_DORMANT;b.normal.projectPolygon(this,this.normal_[0],this.normal_[1],this.normal_[2]);b.sweep.computeInterior(this);if(!this.fatalError){var a=this.mesh;this.boundaryOnly_?b.tessmono.setWindingNumber(a,1,!0):b.tessmono.tessellateInterior(a);this.mesh.checkMesh();if(this.beginCallback_||this.endCallback_||this.vertexCallback_||this.edgeFlagCallback_)this.boundaryOnly_?b.render.renderBoundary(this,this.mesh):b.render.renderMesh(this,this.mesh,!!this.edgeFlagCallback_);
if(this.meshCallback_){b.tessmono.discardExterior(this.mesh);this.meshCallback_(this.mesh);this.polygonData_=this.mesh=null;return}}b.mesh.deleteMesh(this.mesh);this.mesh=this.polygonData_=null};b.GluTesselator.prototype.requireState_=function(a){this.state_!==a&&this.gotoState_(a)};b.GluTesselator.prototype.gotoState_=function(a){for(;this.state_!==a;)if(this.state_<a)switch(this.state_){case b.GluTesselator.tessState_.T_DORMANT:this.callErrorCallback(b.errorType.GLU_TESS_MISSING_BEGIN_POLYGON);
this.gluTessBeginPolygon(null);break;case b.GluTesselator.tessState_.T_IN_POLYGON:this.callErrorCallback(b.errorType.GLU_TESS_MISSING_BEGIN_CONTOUR),this.gluTessBeginContour()}else switch(this.state_){case b.GluTesselator.tessState_.T_IN_CONTOUR:this.callErrorCallback(b.errorType.GLU_TESS_MISSING_END_CONTOUR);this.gluTessEndContour();break;case b.GluTesselator.tessState_.T_IN_POLYGON:this.callErrorCallback(b.errorType.GLU_TESS_MISSING_END_POLYGON),this.gluTessEndPolygon()}};b.GluTesselator.prototype.addVertex_=
function(a,c){var e=this.lastEdge_;null===e?(e=b.mesh.makeEdge(this.mesh),b.mesh.meshSplice(e,e.sym)):(b.mesh.splitEdge(e),e=e.lNext);e.org.data=c;e.org.coords[0]=a[0];e.org.coords[1]=a[1];e.org.coords[2]=a[2];e.winding=1;e.sym.winding=-1;this.lastEdge_=e};b.GluTesselator.prototype.callBeginCallback=function(a){this.beginCallback_&&this.beginCallback_(a,this.polygonData_)};b.GluTesselator.prototype.callVertexCallback=function(a){this.vertexCallback_&&this.vertexCallback_(a,this.polygonData_)};b.GluTesselator.prototype.callEdgeFlagCallback=
function(a){this.edgeFlagCallback_&&this.edgeFlagCallback_(a,this.polygonData_)};b.GluTesselator.prototype.callEndCallback=function(){this.endCallback_&&this.endCallback_(this.polygonData_)};b.GluTesselator.prototype.callCombineCallback=function(a,c,e){return this.combineCallback_?this.combineCallback_(a,c,e,this.polygonData_)||null:null};b.GluTesselator.prototype.callErrorCallback=function(a){this.errorCallback_&&this.errorCallback_(a,this.polygonData_)};b.GluFace=function(a,c){this.next=a||this;
this.prev=c||this;this.anEdge=null;this.inside=!1};b.GluHalfEdge=function(a){this.next=a||this;this.activeRegion=this.lFace=this.org=this.lNext=this.oNext=this.sym=null;this.winding=0};b.GluHalfEdge.prototype.rFace=function(){return this.sym.lFace};b.GluHalfEdge.prototype.dst=function(){return this.sym.org};b.GluHalfEdge.prototype.oPrev=function(){return this.sym.lNext};b.GluHalfEdge.prototype.lPrev=function(){return this.oNext.sym};b.GluHalfEdge.prototype.dPrev=function(){return this.lNext.sym};
b.GluHalfEdge.prototype.rPrev=function(){return this.sym.oNext};b.GluHalfEdge.prototype.dNext=function(){return this.rPrev().sym};b.GluHalfEdge.prototype.rNext=function(){return this.oPrev().sym};b.GluMesh=function(){this.vHead=new b.GluVertex;this.fHead=new b.GluFace;this.eHead=new b.GluHalfEdge;this.eHeadSym=new b.GluHalfEdge;this.eHead.sym=this.eHeadSym;this.eHeadSym.sym=this.eHead};b.GluMesh.prototype.checkMesh=function(){if(b.DEBUG){var a=this.fHead,c=this.vHead,e=this.eHead,d,f;for(d=d=a;(f=
d.next)!==a;d=f){b.assert(f.prev===d);d=f.anEdge;do b.assert(d.sym!==d),b.assert(d.sym.sym===d),b.assert(d.lNext.oNext.sym===d),b.assert(d.oNext.sym.lNext===d),b.assert(d.lFace===f),d=d.lNext;while(d!==f.anEdge)}b.assert(f.prev===d&&null===f.anEdge);for(d=d=c;(a=d.next)!==c;d=a){b.assert(a.prev===d);d=a.anEdge;do b.assert(d.sym!==d),b.assert(d.sym.sym===d),b.assert(d.lNext.oNext.sym===d),b.assert(d.oNext.sym.lNext===d),b.assert(d.org===a),d=d.oNext;while(d!==a.anEdge)}b.assert(a.prev===d&&null===
a.anEdge&&null===a.data);for(c=c=e;(d=c.next)!==e;c=d)b.assert(d.sym.next===c.sym),b.assert(d.sym!==d),b.assert(d.sym.sym===d),b.assert(null!==d.org),b.assert(null!==d.dst()),b.assert(d.lNext.oNext.sym===d),b.assert(d.oNext.sym.lNext===d);b.assert(d.sym.next===c.sym&&d.sym===this.eHeadSym&&d.sym.sym===d&&null===d.org&&null===d.dst()&&null===d.lFace&&null===d.rFace())}};b.GluVertex=function(a,c){this.next=a||this;this.prev=c||this;this.data=this.anEdge=null;this.coords=[0,0,0];this.pqHandle=this.t=
this.s=0};b.PriorityQ=function(){this.verts_=[];this.order_=null;this.size_=0;this.initialized_=!1;this.heap_=new b.PriorityQHeap};b.PriorityQ.prototype.deleteQ=function(){this.verts_=this.order_=this.heap_=null};b.PriorityQ.prototype.init=function(){this.order_=[];for(var a=0;a<this.size_;a++)this.order_[a]=a;a=function(e){return function(d,f){return b.geom.vertLeq(e[d],e[f])?1:-1}}(this.verts_);this.order_.sort(a);this.initialized_=!0;this.heap_.init();if(b.DEBUG){var c=0+this.size_-1;for(a=0;a<
c;++a)b.assert(b.geom.vertLeq(this.verts_[this.order_[a+1]],this.verts_[this.order_[a]]))}};b.PriorityQ.prototype.insert=function(a){if(this.initialized_)return this.heap_.insert(a);var c=this.size_++;this.verts_[c]=a;return-(c+1)};b.PriorityQ.prototype.extractMin=function(){if(0===this.size_)return this.heap_.extractMin();var a=this.verts_[this.order_[this.size_-1]];if(!this.heap_.isEmpty()){var c=this.heap_.minimum();if(b.geom.vertLeq(c,a))return this.heap_.extractMin()}do--this.size_;while(0<this.size_&&
null===this.verts_[this.order_[this.size_-1]]);return a};b.PriorityQ.prototype.minimum=function(){if(0===this.size_)return this.heap_.minimum();var a=this.verts_[this.order_[this.size_-1]];if(!this.heap_.isEmpty()){var c=this.heap_.minimum();if(b.geom.vertLeq(c,a))return c}return a};b.PriorityQ.prototype.remove=function(a){if(0<=a)this.heap_.remove(a);else for(a=-(a+1),b.assert(a<this.verts_.length&&null!==this.verts_[a]),this.verts_[a]=null;0<this.size_&&null===this.verts_[this.order_[this.size_-
1]];)--this.size_};b.PriorityQHeap=function(){this.heap_=b.PriorityQHeap.reallocNumeric_([0],b.PriorityQHeap.INIT_SIZE_+1);this.verts_=[null,null];this.handles_=[0,0];this.size_=0;this.max_=b.PriorityQHeap.INIT_SIZE_;this.freeList_=0;this.initialized_=!1;this.heap_[1]=1};b.PriorityQHeap.INIT_SIZE_=32;b.PriorityQHeap.reallocNumeric_=function(a,c){for(var e=Array(c),d=0;d<a.length;d++)e[d]=a[d];for(;d<c;d++)e[d]=0;return e};b.PriorityQHeap.prototype.init=function(){for(var a=this.size_;1<=a;--a)this.floatDown_(a);
this.initialized_=!0};b.PriorityQHeap.prototype.insert=function(a){var c=++this.size_;2*c>this.max_&&(this.max_*=2,this.handles_=b.PriorityQHeap.reallocNumeric_(this.handles_,this.max_+1));if(0===this.freeList_)var e=c;else e=this.freeList_,this.freeList_=this.handles_[this.freeList_];this.verts_[e]=a;this.handles_[e]=c;this.heap_[c]=e;this.initialized_&&this.floatUp_(c);return e};b.PriorityQHeap.prototype.isEmpty=function(){return 0===this.size_};b.PriorityQHeap.prototype.minimum=function(){return this.verts_[this.heap_[1]]};
b.PriorityQHeap.prototype.extractMin=function(){var a=this.heap_,c=this.verts_,e=this.handles_,d=a[1],f=c[d];0<this.size_&&(a[1]=a[this.size_],e[a[1]]=1,c[d]=null,e[d]=this.freeList_,this.freeList_=d,0<--this.size_&&this.floatDown_(1));return f};b.PriorityQHeap.prototype.remove=function(a){var c=this.heap_,e=this.verts_,d=this.handles_;b.assert(1<=a&&a<=this.max_&&null!==e[a]);var f=d[a];c[f]=c[this.size_];d[c[f]]=f;f<=--this.size_&&(1>=f?this.floatDown_(f):b.geom.vertLeq(e[c[f>>1]],e[c[f]])?this.floatDown_(f):
this.floatUp_(f));e[a]=null;d[a]=this.freeList_;this.freeList_=a};b.PriorityQHeap.prototype.floatDown_=function(a){for(var c=this.heap_,e=this.verts_,d=this.handles_,f=c[a];;){var g=a<<1;g<this.size_&&b.geom.vertLeq(e[c[g+1]],e[c[g]])&&(g+=1);b.assert(g<=this.max_);var h=c[g];if(g>this.size_||b.geom.vertLeq(e[f],e[h])){c[a]=f;d[f]=a;break}c[a]=h;d[h]=a;a=g}};b.PriorityQHeap.prototype.floatUp_=function(a){for(var c=this.heap_,e=this.verts_,d=this.handles_,f=c[a];;){var g=a>>1,h=c[g];if(0===g||b.geom.vertLeq(e[h],
e[f])){c[a]=f;d[f]=a;break}c[a]=h;d[h]=a;a=g}};b.ActiveRegion=function(){this.nodeUp=this.eUp=null;this.windingNumber=0;this.fixUpperEdge=this.dirty=this.sentinel=this.inside=!1};b.ActiveRegion.prototype.regionBelow=function(){return this.nodeUp.getPredecessor().getKey()};b.ActiveRegion.prototype.regionAbove=function(){return this.nodeUp.getSuccessor().getKey()};return b})})(n);const t=r.getLogger("esri.views.2d.engine.webgl.mesh.templates.Tesselator");return function(){function p(){this._indexCounter=
this._currentVertexIndex=0;this._triangleIndices=[-1,-1,-1];this.glu=new n.exports.GluTesselator;this.glu.gluTessCallback(n.exports.gluEnum.GLU_TESS_BEGIN,this._begincallback.bind(this));this.glu.gluTessCallback(n.exports.gluEnum.GLU_TESS_VERTEX_DATA,this._vertexCallback.bind(this));this.glu.gluTessCallback(n.exports.gluEnum.GLU_TESS_END,this._endcallback.bind(this));this.glu.gluTessCallback(n.exports.gluEnum.GLU_TESS_COMBINE,this._combinecallback.bind(this));this.glu.gluTessCallback(n.exports.gluEnum.GLU_TESS_ERROR,
this._errorcallback.bind(this));this.glu.gluTessCallback(n.exports.gluEnum.GLU_TESS_EDGE_FLAG,this._edgeCallback.bind(this));this.glu.gluTessProperty(n.exports.gluEnum.GLU_TESS_WINDING_RULE,n.exports.windingRule.GLU_TESS_WINDING_ODD)}var b=p.prototype;b.beginPolygon=function(a,c){this._triangleIndices[0]=-1;this._triangleIndices[1]=-1;this._triangleIndices[2]=-1;this._indexCounter=this._currentVertexIndex=0;this.glu.gluTessBeginPolygon(a);this._indices=c};b.endPolygon=function(){this.glu.gluTessEndPolygon()};
b.beginContour=function(){this.glu.gluTessBeginContour()};b.endContour=function(){this.glu.gluTessEndContour()};b.addVertex=function(a,c){this.glu.gluTessVertex(a,c)};b._vertexCallback=function(a,c){c[c.length]=a[0];c[c.length]=a[1];this._triangleIndices[this._currentVertexIndex]=-1;if(2<=this._currentVertexIndex){for(a=0;3>a;a++)-1===this._triangleIndices[a]&&(this._triangleIndices[a]=this._indexCounter++),this._indices[this._indices.length]=this._triangleIndices[a];this._currentVertexIndex=0}else this._currentVertexIndex++};
b._begincallback=function(){this._triangleIndices[0]=-1;this._triangleIndices[1]=-1;this._triangleIndices[2]=-1;this._currentVertexIndex=0};b._endcallback=function(){this._currentVertexIndex=0};b._errorcallback=function(a){t.error(`Encountered error during tesselation: ${a}`)};b._combinecallback=function(a){return[a[0],a[1],a[2]]};b._edgeCallback=function(){};return p}()});