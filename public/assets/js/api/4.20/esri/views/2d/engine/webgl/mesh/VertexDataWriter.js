// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.20/esri/copyright.txt for details.
//>>built
define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","../definitions","./heuristics","../util/Writer"],function(p,q,r,t,l){let z=function(){function m(a,d,b){this._start={index:0,vertex:0};b=t.getMeshSizeHint(a,d,b);d/=4;this.geometryType=a;this._records=new l(Int32Array,b.recordBytes);this._indices=new l(Uint32Array,b.indexBytes);this._vertices=new l(Uint32Array,b.vertexBytes);this._metrics=new l(Float32Array,0);this._strideInt=d}var e=m.prototype;e.serialize=function(a){const d=this._records.buffer(),
b=this._indices.buffer(),c=this._vertices.buffer(),f=this._metrics.length?this._metrics.buffer():null,g=4*this._strideInt;a.push(d,b,c);return{stride:g,records:d,indices:b,vertices:c,metrics:f}};e.recordStart=function(){this._start.index=this._indices.length;this._start.vertex=this._vertices.length};e.recordEnd=function(a,d,b,c,f,g,n){this._records.push(a);this._records.push(d);this._records.push(b);this._records.push(c);this._records.push(f);this._records.push(g);this._records.push(n)};e.writeIndex=
function(a){this._indices.push(a)};e.writeVertex=function(a){this._vertices.push(a)};e.writeVertexF32=function(a){this._vertices.writeF32(a)};e.copyLastFrom=function(a,d,b){var c=a._records.length-7;const f=a._records.getValue(c),g=a._records.getValue(c+1),n=a._records.getValue(c+2),u=a._records.getValue(c+4);c=a._records.getValue(c+6);const v=this._vertices.length;var h=(a._start.vertex-this._vertices.length)/this._strideInt;const w=this._indices.length,x=this.vertexCount;for(var k=a._start.index;k!==
a._indices.length;k++){const y=a._indices.getValue(k);this._indices.push(y-h)}for(h=a._start.vertex;h!==a._vertices.length;h++)k=a._vertices.getValue(h),this._vertices.push(k);for(a=v;a<=this._vertices.length;a+=this._strideInt)this._vertices.i1616Add(a,d,b);this._records.push(f);this._records.push(g);this._records.push(n);this._records.push(w);this._records.push(u);this._records.push(x);this._records.push(c)};q._createClass(m,[{key:"strideInt",get:function(){return this._strideInt}},{key:"recordCount",
get:function(){return this._records.length/r.DISPLAY_RECORD_INT_PER_ELEMENT}},{key:"vertexCount",get:function(){return this._vertices.length/this._strideInt}},{key:"indexCount",get:function(){return this._indices.length}},{key:"indexWriter",get:function(){return this._indices}},{key:"vertexWriter",get:function(){return this._vertices}},{key:"metricWriter",get:function(){return this._metrics}}]);return m}();p.VertexDataWriter=z;Object.defineProperty(p,"__esModule",{value:!0})});