// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.20/esri/copyright.txt for details.
//>>built
define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Collection ../../../core/collectionUtils ../../../core/watchUtils ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/Logger ../../../core/jsonMap ../../../core/accessorSupport/decorators/subclass ../engine/Container ../../layers/support/ClipArea ../../layers/support/ClipRect ../../layers/support/Geometry ../../layers/support/Path".split(" "),
function(q,r,d,t,u,k,e,B,C,D,E,v,w,x,y,z,A){const m=t.ofType({key:"type",base:x,typeMap:{rect:y,path:A,geometry:z}});q.LayerView2DMixin=c=>{c=function(h){function l(){var b=h.apply(this,arguments)||this;b.clips=new m;b.moving=!1;b.attached=!1;b.lastUpdateId=-1;b.updateRequested=!1;return b}r._inheritsLoose(l,h);var g=l.prototype;g.initialize=function(){var b;this.container||(this.container=new w.Container);this.container.fadeTransitionEnabled=!0;this.container.opacity=0;this.container.clips=this.clips;
this.handles.add([k.init(this,"suspended",a=>{this.container&&(this.container.visible=!a);this.view&&!a&&this.updateRequested&&this.view.requestUpdate()},!0),k.init(this,["layer.opacity","container"],()=>{if(this.container){var a,f;this.container.opacity=null!=(a=null==(f=this.layer)?void 0:f.opacity)?a:1}},!0),k.init(this,["layer.blendMode"],a=>{this.container&&(this.container.blendMode=a)},!0),k.init(this,["layer.effect"],a=>{this.container&&(this.container.effect=a)},!0),this.clips.on("change",
()=>{this.container.clips=this.clips;this.notifyChange("clips")})]);null!=(b=this.view)&&b.whenLayerView?this.view.whenLayerView(this.layer).then(a=>{a!==this||this.attached||this.destroyed||(this.attach(),this.requestUpdate(),this.attached=!0)},()=>{}):this.when().then(()=>{this.attached||this.destroyed||(this.attach(),this.requestUpdate(),this.attached=!0)},()=>{})};g.destroy=function(){this.attached&&(this.detach(),this.attached=!1);this.handles.remove("initialize");this.updateRequested=!1};g.isVisibleAtScale=
function(b){var a=!0,f=this.layer;const n=f.minScale;f=f.maxScale;if(null!=n&&null!=f){a=!n;let p=!f;!a&&b<=n&&(a=!0);!p&&b>=f&&(p=!0);a=a&&p}return a};g.requestUpdate=function(){this.destroyed||this.updateRequested||(this.updateRequested=!0,this.suspended||this.view.requestUpdate())};g.processUpdate=function(b){this.isFulfilled()&&!this.isResolved()?this.updateRequested=!1:(this._set("updateParameters",b),this.updateRequested&&!this.suspended&&(this.updateRequested=!1,this.update(b)))};g.isUpdating=
function(){return!1};g.isRendering=function(){return!1};g.canResume=function(){return h.prototype.canResume.call(this)?this.isVisibleAtScale(this.view.scale):!1};r._createClass(l,[{key:"updating",get:function(){return!this.attached||!this.suspended&&(this.updateRequested||this.isUpdating())}}]);return l}(c);d.__decorate([e.property({type:m,set(h){h=u.referenceSetter(h,this._get("clips"),m);this._set("clips",h)}})],c.prototype,"clips",void 0);d.__decorate([e.property()],c.prototype,"moving",void 0);
d.__decorate([e.property()],c.prototype,"attached",void 0);d.__decorate([e.property()],c.prototype,"container",void 0);d.__decorate([e.property()],c.prototype,"suspended",void 0);d.__decorate([e.property({readOnly:!0})],c.prototype,"updateParameters",void 0);d.__decorate([e.property()],c.prototype,"updateRequested",void 0);d.__decorate([e.property()],c.prototype,"updating",null);d.__decorate([e.property()],c.prototype,"view",void 0);return c=d.__decorate([v.subclass("esri.views.2d.layers.LayerView2D")],
c)};Object.defineProperty(q,"__esModule",{value:!0})});