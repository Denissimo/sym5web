// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.20/esri/copyright.txt for details.
//>>built
define(["exports","./displayIdUtils","./StaticBitSet"],function(l,p,q){function f(e,c,a){if(!(e.length>c))for(;e.length<=c;)e.push(a)}let r=function(){function e(){this._numerics=[];this._strings=[];this._idGenerator=new p.DisplayIdGenerator;this._allocatedSize=256;this._bitsets=[];this._instanceIds=[];this._bounds=[]}var c=e.prototype;c.createBitset=function(){const a=this._bitsets.length;this._bitsets.push(q.StaticBitSet.create(this._allocatedSize,2147483647));return a+1};c.getBitset=function(a){return this._bitsets[a-
1]};c._expand=function(){this._allocatedSize<<=1;for(const a of this._bitsets)a.resize(this._allocatedSize)};c._ensureNumeric=function(a,b){this._numerics[a]||(this._numerics[a]=[]);f(this._numerics[a],b,0)};c._ensureInstanceId=function(a){f(this._instanceIds,a,0)};c._ensureString=function(a,b){this._strings[a]||(this._strings[a]=[]);f(this._strings[a],b,null)};c.createDisplayId=function(a=!1){const b=this._idGenerator.createId();b>this._allocatedSize&&this._expand();return((a?2147483648:0)|b)>>>
0};c.releaseDisplayId=function(a){for(const b of this._bitsets)b.unset(a);return this._idGenerator.releaseId(a&2147483647)};c.getComputedNumeric=function(a,b){return this.getComputedNumericAtIndex(a&2147483647,0)};c.setComputedNumeric=function(a,b,d){return this.setComputedNumericAtIndex(a&2147483647,d,0)};c.getComputedString=function(a,b){return this.getComputedStringAtIndex(a&2147483647,0)};c.setComputedString=function(a,b,d){return this.setComputedStringAtIndex(a&2147483647,0,d)};c.getComputedNumericAtIndex=
function(a,b){a&=2147483647;this._ensureNumeric(b,a);return this._numerics[b][a]};c.setComputedNumericAtIndex=function(a,b,d){a&=2147483647;this._ensureNumeric(b,a);this._numerics[b][a]=d};c.getInstanceId=function(a){a&=2147483647;this._ensureInstanceId(a);return this._instanceIds[a]};c.setInstanceId=function(a,b){a&=2147483647;this._ensureInstanceId(a);this._instanceIds[a]=b};c.getComputedStringAtIndex=function(a,b){a&=2147483647;this._ensureString(b,a);return this._strings[b][a]};c.setComputedStringAtIndex=
function(a,b,d){a&=2147483647;this._ensureString(b,a);this._strings[b][a]=d};c.getXMin=function(a){return this._bounds[4*(a&2147483647)]};c.getYMin=function(a){return this._bounds[4*(a&2147483647)+1]};c.getXMax=function(a){return this._bounds[4*(a&2147483647)+2]};c.getYMax=function(a){return this._bounds[4*(a&2147483647)+3]};c.setBounds=function(a,b){b=b.readHydratedGeometry();if(!b||!b.coords.length)return!1;let d=Infinity,g=Infinity,h=-Infinity,k=-Infinity;b.forEachVertex((m,n)=>{d=Math.min(d,m);
g=Math.min(g,n);h=Math.max(h,m);k=Math.max(k,n)});a&=2147483647;f(this._bounds,4*a+4,0);this._bounds[4*a]=d;this._bounds[4*a+1]=g;this._bounds[4*a+2]=h;this._bounds[4*a+3]=k;return!0};return e}();l.ComputedAttributeStorage=r;Object.defineProperty(l,"__esModule",{value:!0})});