// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.20/esri/copyright.txt for details.
//>>built
define("../../../../../webgl/BufferObject ../../../../../webgl/FramebufferObject ../../../../../webgl/Program ../../../../../webgl/ProgramCache ../../../../../webgl/Renderbuffer ../../../../../webgl/RenderingContext ../../../../../webgl/ShaderCompiler ../../../../../webgl/Texture ../../../../../webgl/VertexArrayObject ../../../../../webgl/programUtils ../../definitions ./parameters ../../shaders/HighlightPrograms".split(" "),function(m,p,q,r,t,u,v,w,n,h,d,f,k){return function(){function l(){this._height=
this._width=void 0;this._resources=null}var e=l.prototype;e.dispose=function(){this._resources&&(this._resources.quadGeometry.dispose(),this._resources.quadVAO.dispose(),this._resources.highlightProgram.dispose(),this._resources.blurProgram.dispose(),this._resources=null)};e.preBlur=function(a,b){a.bindTexture(b,d.TEXTURE_BINDING_HIGHLIGHT_0);a.useProgram(this._resources.blurProgram);this._resources.blurProgram.setUniform4fv("u_direction",[1,0,1/this._width,0]);this._resources.blurProgram.setUniformMatrix4fv("u_channelSelector",
f.ALPHA_TO_RGBA_CHANNEL_SELECTOR_MATRIX);a.bindVAO(this._resources.quadVAO);a.drawArrays(5,0,4);a.bindVAO()};e.finalBlur=function(a,b){a.bindTexture(b,d.TEXTURE_BINDING_HIGHLIGHT_0);a.useProgram(this._resources.blurProgram);this._resources.blurProgram.setUniform4fv("u_direction",[0,1,0,1/this._height]);this._resources.blurProgram.setUniformMatrix4fv("u_channelSelector",f.RGBA_TO_RGBA_CHANNEL_SELECTOR_MATRIX);a.bindVAO(this._resources.quadVAO);a.drawArrays(5,0,4);a.bindVAO()};e.renderHighlight=function(a,
b,c){a.bindTexture(b,d.TEXTURE_BINDING_HIGHLIGHT_0);a.useProgram(this._resources.highlightProgram);c.applyHighlightOptions(a,this._resources.highlightProgram);a.bindVAO(this._resources.quadVAO);a.setBlendingEnabled(!0);a.setBlendFunction(1,771);a.drawArrays(5,0,4);a.bindVAO()};e._initialize=function(a,b,c){this._width=b;this._height=c;b=m.createVertex(a,35044,(new Int8Array([-1,-1,0,0,1,-1,1,0,-1,1,0,1,1,1,1,1])).buffer);c=new n(a,new Map([["a_position",0],["a_texcoord",1]]),{geometry:[{name:"a_position",
count:2,type:5120,offset:0,stride:4,normalized:!1},{name:"a_texcoord",count:2,type:5121,offset:2,stride:4,normalized:!1}]},{geometry:b});const g=h.createProgram(a,k.highlight);a=h.createProgram(a,k.blur);g.setUniform1i("u_texture",d.TEXTURE_BINDING_HIGHLIGHT_0);g.setUniform1i("u_shade",d.TEXTURE_BINDING_HIGHLIGHT_1);g.setUniform1f("u_sigma",f.SIGMA);a.setUniform1i("u_texture",d.TEXTURE_BINDING_HIGHLIGHT_0);a.setUniform1f("u_sigma",f.SIGMA);this._resources={quadGeometry:b,quadVAO:c,highlightProgram:g,
blurProgram:a}};e.setup=function(a,b,c){this._resources?(this._width=b,this._height=c):this._initialize(a,b,c)};return l}()});