// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.20/esri/copyright.txt for details.
//>>built
define(["../../../../../chunks/_rollupPluginBabelHelpers","../../../../../core/maybe","../definitions","./WGLBrush"],function(l,m,e,n){return function(k){function f(){return k.apply(this,arguments)||this}l._inheritsLoose(f,k);var g=f.prototype;g.prepareState=function({context:a},b,c){c=c&&-1!==c.indexOf("id");a.setBlendingEnabled(!c);a.setBlendFunctionSeparate(1,771,1,771);a.setColorMask(!0,!0,!0,!0);a.setStencilWriteMask(0);a.setStencilTestEnabled(!0);a.setStencilFunction(514,b.stencilRef,255)};
g.draw=function(a,b,c){var d=this.getGeometryType();b.commit(a);d=b.getGeometry(d);m.isNone(d)||(a.timeline.begin(this.name),a.attributeView.bindTextures(a.context),d.forEachCommand(h=>this.drawGeometry(a,b,h,c)))};g._setSharedUniforms=function(a,b,c){const {displayLevel:d,pixelRatio:h,state:p}=b;a.setUniform1f("u_pixelRatio",h);a.setUniformMatrix3fv("u_dvsMat3",c.transforms.dvs);a.setUniformMatrix3fv("u_displayViewMat3",p.displayViewMat3);a.setUniform1f("u_currentZoom",Math.round(d*e.MIN_MAX_ZOOM_PRECISION_FACTOR));
a.setUniform1i("u_attributeTextureSize",b.attributeView.size);a.setUniform1i("u_attributeData0",e.TEXTURE_BINDING_ATTRIBUTE_DATA_0);a.setUniform1i("u_attributeData1",e.TEXTURE_BINDING_ATTRIBUTE_DATA_1);a.setUniform1i("u_attributeData2",e.TEXTURE_BINDING_ATTRIBUTE_DATA_2);a.setUniform1i("u_attributeData3",e.TEXTURE_BINDING_ATTRIBUTE_DATA_3)};return f}(n)});