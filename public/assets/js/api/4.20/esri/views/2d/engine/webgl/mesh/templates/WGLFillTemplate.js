// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.20/esri/copyright.txt for details.
//>>built
define("../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/mathUtils ../../../../../../core/screenUtils ../../color ../../definitions ../../GeometryUtils ../../number ../../materialKey/MaterialKey ./util ./WGLBaseFillTemplate ./WGLMeshTemplate".split(" "),function(E,r,y,B,q,F,e,G,v,H,I){return function(C){function m(a,f,g,h,n,t,u,k,c,l,d){var b=C.call(this)||this;b._effects=c;a=G.FillMaterialKey.load(a);f&&(a.sdf=f.sdf,a.pattern=!0,a.textureBinding=f.textureBinding);b.fillColor=
g;b.tl=h;b.br=n;b.aux1=t;b.aux2=u;b.aux3=k;b._minMaxZoom=e.i1616to32(Math.round(l*q.MIN_MAX_ZOOM_PRECISION_FACTOR),Math.round(d*q.MIN_MAX_ZOOM_PRECISION_FACTOR));b._materialKey=a.data;return b}E._inheritsLoose(m,C);m.fromCIMFill=function(a,f,g){var h=a.color;h=h&&B.premultiplyAlphaRGBA(h)||0;const n=a.materialKey,[t,u]=v.getMinMaxZoom(a.scaleInfo,g);if(!f)return f=e.i8888to32(0,0,0,a.colorLocked?1:0),new m(n,null,h,0,0,0,0,f,a.effects,t,u);const {rect:k,width:c,height:l}=f;var d=k.x+q.SPRITE_PADDING;
const b=k.y+q.SPRITE_PADDING;var p=d+c;const D=b+l;var w=r.nextHighestPowerOfTwo(l);255<w?w=255:0>=w&&(w=r.nextHighestPowerOfTwo(D-b));var x=r.nextHighestPowerOfTwo(c||0);255<x?x=255:0>=x&&(x=r.nextHighestPowerOfTwo(p-d));let z=y.pt2px(a.offsetX||0)+128;255<z&&(z=255);let A=y.pt2px(-a.offsetY||0)+128;255<A&&(A=255);g=a.scaleX||1;d=e.i1616to32(d,b);p=e.i1616to32(p,D);w=e.i8888to32(x,w,z,A);g=e.i1616to32(128*g,128);x=e.i8888to32(0,0,F.degToByte(a.angle),a.colorLocked?1:0);return new m(n,f,h,d,p,w,g,
x,a.effects,t,u)};m.fromSimpleFill=function(a,f,g=!1){var {color:h}=a;h=h&&"esriSFSNull"!==a.style&&B.premultiplyAlphaRGBAArray(h)||0;g=e.i8888to32(0,0,0,g?255:0);a=a.materialKey;if(!f)return new m(a,null,h,0,0,0,0,g,null,v.DEFAULT_MIN_ZOOM,v.DEFAULT_MAX_ZOOM);const {rect:n,width:t,height:u}=f;var k=n.x+q.SPRITE_PADDING,c=n.y+q.SPRITE_PADDING;const l=k+t,d=c+u,b=e.i1616to32(k,c),p=e.i1616to32(l,d);k=e.i8888to32(r.nextHighestPowerOfTwo(l-k),r.nextHighestPowerOfTwo(d-c),0,0);c=e.i1616to32(128,128);
return new m(a,f,h,b,p,k,c,g,null,v.DEFAULT_MIN_ZOOM,v.DEFAULT_MAX_ZOOM)};m.fromPictureFill=function(a,f,g=!1){const h=q.PICTURE_FILL_COLOR,{rect:n,width:t,height:u}=f;var k=n.x+q.SPRITE_PADDING,c=n.y+q.SPRITE_PADDING,l=k+t,d=c+u;k=e.i1616to32(k,c);l=e.i1616to32(l,d);d=r.nextHighestPowerOfTwo(y.pt2px(a.width));255<d&&(d=255);c=r.nextHighestPowerOfTwo(y.pt2px(a.height));255<c&&(c=255);let b=y.pt2px(a.xoffset)+128;255<b&&(b=255);let p=y.pt2px(-a.yoffset)+128;255<p&&(p=255);d=e.i8888to32(d,c,b,p);c=
e.i1616to32(128*a.xscale,128*a.yscale);g=e.i8888to32(0,0,0,g?255:0);return new m(a.materialKey,f,h,k,l,d,c,g,null,v.DEFAULT_MIN_ZOOM,v.DEFAULT_MAX_ZOOM)};return m}(H(I))});