// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.20/esri/copyright.txt for details.
//>>built
define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../webgl/BufferObject ../../../webgl/FramebufferObject ../../../webgl/Program ../../../webgl/ProgramCache ../../../webgl/Renderbuffer ../../../webgl/RenderingContext ../../../webgl/ShaderCompiler ../../../webgl/Texture ../../../webgl/VertexArrayObject ./WGLContainer".split(" "),function(m,p,n,q,u,v,w,x,y,z,A,r){n=function(h){function k(){var b=h.apply(this,arguments)||this;b._lastWidth=0;b._lastHeight=0;b.requiresDedicatedFBO=!1;return b}
p._inheritsLoose(k,h);var g=k.prototype;g.dispose=function(){this._renderTarget&&(this._renderTarget.dispose(),this._renderTarget=null)};g.doRender=function(b){const d=this.createRenderParams(b),{context:a,painter:c,profiler:e}=d;this._prevFBO=a.getBoundFramebufferObject();e.recordContainerStart(this.name);const l=this._getFbo(d),t=c.getRenderTarget();a.bindFramebuffer(l);c.setRenderTarget(l);a.setDepthWriteEnabled(!0);a.setColorMask(!0,!0,!0,!0);a.setClearColor(0,0,0,0);a.setClearDepth(1);a.clear(a.gl.COLOR_BUFFER_BIT|
a.gl.DEPTH_BUFFER_BIT);a.setDepthWriteEnabled(!1);for(const f of this.children)f.beforeRender(b);for(const f of this.children)f.processRender(d);for(const f of this.children)f.afterRender(b);c.setRenderTarget(t);a.bindFramebuffer(this._prevFBO);c.beforeRenderLayer(d,this._clippingInfos?255:0,this.computedOpacity);a.setStencilTestEnabled(!1);a.setStencilWriteMask(0);c.blitTexture(a,l.colorTexture,9728);c.compositeLayer(d,this.computedOpacity);e.recordContainerEnd()};g.createRenderParams=function(b){return{...h.prototype.createRenderParams.call(this,
b),blendMode:this.blendMode,effects:this.computedEffects,globalOpacity:1}};g._getFbo=function(b){const {context:d,painter:a}=b,{width:c,height:e}=d.getViewport();if(c!==this._lastWidth||e!==this._lastHeight)this._lastWidth=c,this._lastHeight=e,this._renderTarget?this._renderTarget.resize(c,e):this._renderTarget=new q(d,{colorTarget:0,depthStencilTarget:3},{target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728,wrapMode:33071,width:c,height:e},a.getSharedStencilBuffer());return this._renderTarget};
return k}(r);m.GroupContainer=n;Object.defineProperty(m,"__esModule",{value:!0})});