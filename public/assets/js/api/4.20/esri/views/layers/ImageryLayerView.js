// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.20/esri/copyright.txt for details.
//>>built
define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Error ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../geometry/Point ../../layers/support/commonProperties ../../rest/support/Query ./support/popupUtils".split(" "),function(l,q,f,r,t,g,m,E,F,G,w,u,x,y,z){m=b=>{b=function(n){function p(){var d=n.apply(this,
arguments)||this;d.view=null;return d}q._inheritsLoose(p,n);var v=p.prototype;v.fetchPopupFeatures=function(){var d=q._asyncToGenerator(function*(a,e){const {layer:h}=this;if(!a)throw new r("imagerylayerview:fetchPopupFeatures","Nothing to fetch without area",{layer:h});var {popupEnabled:c}=h;const k=z.getFetchPopupTemplate(h,e);if(!c||!t.isSome(k))throw new r("imagerylayerview:fetchPopupFeatures","Missing required popupTemplate or popupEnabled",{popupEnabled:c,popupTemplate:k});const A=yield k.getRequiredFields();
c=new y;c.timeExtent=this.timeExtent;c.geometry=a;c.outFields=A;c.outSpatialReference=a.spatialReference;a=this.view.resolution;a="2d"===this.view.type?new u(a,a,this.view.spatialReference):new u(.5*a,.5*a,this.view.spatialReference);const {returnTopmostRaster:B,showNoDataRecords:C}=k.layerOptions||{returnTopmostRaster:!0,showNoDataRecords:!1};e={returnDomainValues:!0,returnTopmostRaster:B,pixelSize:a,showNoDataRecords:C,signal:t.isSome(e)?e.signal:null};return h.queryVisibleRasters(c,e).then(D=>
D)});return function(a,e){return d.apply(this,arguments)}}();v.canResume=function(){var d;return!n.prototype.canResume.call(this)||null!=(d=this.timeExtent)&&d.isEmpty?!1:!0};return p}(b);f.__decorate([g.property()],b.prototype,"layer",void 0);f.__decorate([g.property()],b.prototype,"suspended",void 0);f.__decorate([g.property(x.combinedViewLayerTimeExtentProperty)],b.prototype,"timeExtent",void 0);f.__decorate([g.property()],b.prototype,"view",void 0);return b=f.__decorate([w.subclass("esri.views.layers.ImageryLayerView")],
b)};l.ImageryLayerView=m;l.default=m;Object.defineProperty(l,"__esModule",{value:!0})});