// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.20/esri/copyright.txt for details.
//>>built
define(["exports","../../chunks/_rollupPluginBabelHelpers","../../Color","../../core/maybe"],function(k,q,l,y){function r(a){return m.apply(this,arguments)}function m(){m=q._asyncToGenerator(function*(a){yield a.whenReady();var b=a.basemapView.baseLayerViews.map(d=>d.layer);if(!b.length)return b=(b=getComputedStyle(a.container).backgroundColor)&&new l(b),a.get("background.color")||(b&&0!==b.a?b:null)||null;a=(yield a.takeScreenshot({format:"png",layers:b.toArray()})).data.data;b=a.length;let e=0,
f=0,c=0,t=0,g=0,u=0;for(let d=0;d<b;d+=4){const v=a[d],w=a[d+1],x=a[d+2],n=a[d+3],h=n/255;e+=v*v*h;f+=w*w*h;c+=x*x*h;g+=h;n&&(t+=n,u++)}e=Math.round(Math.sqrt(e/g));f=Math.round(Math.sqrt(f/g));c=Math.round(Math.sqrt(c/g));return new l([e,f,c,t/u/255])});return m.apply(this,arguments)}function p(){p=q._asyncToGenerator(function*(a){if(!a)return null;a=yield r(a);if(y.isSome(a)){{let {r:b,g:e,b:f,a:c}=a;1>c&&(b=Math.round(c*b+255*(1-c)),e=Math.round(c*e+255*(1-c)),f=Math.round(c*f+255*(1-c)));a=new l({r:b,
g:e,b:f})}a=a.isBright?"light":"dark"}else a=null;return a});return p.apply(this,arguments)}k.getBackgroundColor=r;k.getBackgroundColorTheme=function(a){return p.apply(this,arguments)};Object.defineProperty(k,"__esModule",{value:!0})});