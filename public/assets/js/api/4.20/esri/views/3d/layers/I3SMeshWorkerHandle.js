// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.20/esri/copyright.txt for details.
//>>built
define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Logger ../../../core/PooledArray ../../../core/workers/WorkerHandle ../../../geometry/projection".split(" "),function(l,q,m,r,t,n){function p(f,h){c.clear();for(var d of f){var a="clip"===d.type?2:"mask"===d.type?1:0;const e=d.geometry;f=g=>g;if(e.spatialReference){if(!n.canProjectWithoutEngine(e.spatialReference,h)){u.warn("Can't project modification polygon into layer spatial reference, ignoring modification");continue}f=g=>
{n.projectVectorToVector(g,e.spatialReference,k,h);return k}}else e.hasZ||(k[2]=0,f=g=>{k[0]=g[0];k[1]=g[1];return k});c.push(a);c.push(e.rings.length);for(var b of e.rings){c.push(b.length);for(const g of b)a=f(g),c.push(a[0]),c.push(a[1]),c.push(a[2])}}c.push(3);d=new Float64Array(c.length);for(b=0;b<c.length;++b)d[b]=c.getItemAt(b);return d}const u=m.getLogger("esri.views.3d.layers.I3SMeshWorkerHandle");m=function(f){function h(a){return f.call(this,"SceneLayerWorker","process",a,{hasInitialize:!0})||
this}q._inheritsLoose(h,f);var d=h.prototype;d.getTransferList=function(a){return[a.geometryBuffer]};d.setModifications=function(a,b,e){a={context:a,modifications:p(b,e),isGeodetic:e.isGeographic};this.broadcast(a,"setModifications")};d.setLegacySchema=function(a,b){b=JSON.stringify(b);this.broadcast({context:a,jsonSchema:b},"setLegacySchema")};d.destroyContext=function(a){return this.broadcast(a,"destroyContext")};return h}(t.WorkerHandle);const c=new r({deallocator:null}),k=[0,0,0];l.I3SMeshWorkerHandle=
m;l.toWasmModification=p;Object.defineProperty(l,"__esModule",{value:!0})});