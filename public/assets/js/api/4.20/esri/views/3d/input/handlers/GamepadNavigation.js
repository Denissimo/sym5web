// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.20/esri/copyright.txt for details.
//>>built
define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/Handles ../../../../core/watchUtils ../../state/controllers/GamepadKeyboardController ../../../input/InputHandler".split(" "),function(g,k,l,m,h,d){d=function(c){function e(b){var a=c.call(this,!0)||this;a.view=b;a.watchHandles=new l;a.handle=a.registerIncoming("gamepad",n=>a.handleEventGamepad(n));a.handle.pause();return a}k._inheritsLoose(e,c);var f=e.prototype;f.onInstall=function(b){c.prototype.onInstall.call(this,b);
this.watchHandles.add([m.init(this.view.navigation.gamepad,"enabled",a=>{a?this.handle.resume():(this.handle.pause(),this.cameraControllerGamepad&&(this.cameraControllerGamepad.finishController(),this.cameraControllerGamepad=null))}),this.view.navigation.gamepad.watch("device",a=>{this.cameraControllerGamepad&&a&&this.cameraControllerGamepad.gamepadDevice!==a&&(this.cameraControllerGamepad.finishController(),this.cameraControllerGamepad=null)})])};f.onUninstall=function(){this.watchHandles.removeAll();
c.prototype.onUninstall.call(this)};f.handleEventGamepad=function(b){var a=this.view.navigation.gamepad.device;if(!a||b.data.device===a)if((a=this.cameraControllerGamepad&&this.cameraControllerGamepad.active)||h.GamepadKeyboardController.activatesFor(this.view,b.data))a||(a=new h.GamepadKeyboardController({view:this.view,gamepadDevice:b.data.device}),this.view.state.switchCameraController(a)&&(this.cameraControllerGamepad=a)),this.cameraControllerGamepad&&this.cameraControllerGamepad.active&&this.cameraControllerGamepad.gamepadDevice===
b.data.device&&this.cameraControllerGamepad.handleEventGamepad(b.data)};return e}(d.InputHandler);g.GamepadNavigation=d;Object.defineProperty(g,"__esModule",{value:!0})});