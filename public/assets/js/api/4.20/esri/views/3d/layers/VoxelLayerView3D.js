// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.20/esri/copyright.txt for details.
//>>built
define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Error ../../../core/watchUtils ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/Logger ../../../core/jsonMap ../../../core/accessorSupport/decorators/subclass ../../../layers/VoxelWasmManager ./LayerView3D ../../layers/LayerView".split(" "),function(m,g,c,n,k,b,v,w,x,p,d,q,r){b=function(l){function h(){var a=l.apply(this,arguments)||this;
a.type="voxel-3d";a._wasmLayerId=-1;return a}m._inheritsLoose(h,l);var e=h.prototype;e.initialize=function(){if("local"!==this.view.viewingMode)throw new c("voxel:unsupported-viewingMode","Voxel layers support local viewingMode only.",{});if("webgl"===this.view.renderContext)throw new c("voxel:unsupported-context","Voxel layers are supported in WebGL2 rendering contexts only.",{});const a=d.getInstance(),u=a.addLayer(this.view,this).then(f=>{this._wasmLayerId=f;this._suspendedHandle=n.init(this,"suspended",
t=>{d.getInstance().setLayerEnabled(this.view,this,!t)})}).catch(f=>{a.removeLayer(this.view,this);this._wasmLayerId=-1;if(-1===f)throw new c("voxel:addLayer-failure","The voxel layer description was invalid.",{});if(-2===f)throw new c("voxel:addLayer-failure","The voxel layer web assembly module failed to download.",{});});this.addResolvingPromise(u)};e.destroy=function(){d.getInstance().removeLayer(this.view,this);this._suspendedHandle&&(this._suspendedHandle.remove(),this._suspendedHandle=null)};
e.isUpdating=function(){return 0>this._wasmLayerId?!1:d.getInstance().isUpdating(this.view,this._wasmLayerId)};e.updatingFlagChanged=function(){this.notifyChange("updating")};return h}(q.LayerView3D(r));g.__decorate([k.property()],b.prototype,"layer",void 0);g.__decorate([k.property({readOnly:!0,aliasOf:"layer.parsedUrl.path"})],b.prototype,"baseUrl",void 0);return b=g.__decorate([p.subclass("esri.views.3d.layers.VoxelLayerView3D")],b)});