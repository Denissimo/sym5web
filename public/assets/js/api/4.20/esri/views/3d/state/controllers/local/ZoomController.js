// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.20/esri/copyright.txt for details.
//>>built
define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/tslib.es6 ../../../../../core/mathUtils ../../../../../core/screenUtils ../../../../../core/accessorSupport/decorators/property ../../../../../core/has ../../../../../core/accessorSupport/ensureType ../../../../../core/Logger ../../../../../core/jsonMap ../../../../../core/accessorSupport/decorators/subclass ../../../../../chunks/vec2 ../../../../../chunks/vec2f64 ../../../../../chunks/vec3 ../../../../../chunks/vec3f64 ../../../../../geometry/support/plane ../../../camera/constraintUtils ../InteractiveController ../../utils/navigationUtils".split(" "),
function(f,n,p,x,y,z,C,D,E,F,A,q,r,b,d,t,u,B,l){f.ZoomController=function(v){function h(a){a=v.call(this,a)||this;a.view=null;a.tmpP=d.create();a.tmpDir=d.create();a.tmpN=d.create();a.tmpP0=r.create();a.tmpPoi=d.create();a.tmpRayDir=d.create();a.dragBeginPoint=y.createScreenPointArray();a.normalizedAnchorPoint=r.create();a.constraintOptions={selection:15,interactionType:1,interactionFactor:0,interactionStartCamera:null,interactionDirection:d.create(),tiltMode:0};a.plane=t.create();return a}n._inheritsLoose(h,
v);var m=h.prototype;m.begin=function(a){if(this.active){q.copy(this.dragBeginPoint,a);l.normalizeCoordinate(this.startCamera,a,this.normalizedAnchorPoint);this.intersectionHelper.intersectScreenFreePointFallback(a,this.tmpP);b.subtract(this.tmpDir,this.tmpP,this.startCamera.eye);b.normalize(this.tmpDir,this.tmpDir);var c;this.view.camera.position.hasZ&&(c=Math.abs(this.view.camera.position.z));c*=30;a=this.view._stage.renderView.getMinimalDepthForArea(a[0],a[1],this.view.state.camera,70);b.scale(this.tmpDir,
this.tmpDir,c>a?a:c);b.add(this.tmpP,this.startCamera.eye,this.tmpDir);b.subtract(this.tmpN,this.startCamera.eye,this.startCamera.center);b.normalize(this.tmpN,this.tmpN);0>this.tmpN[1]&&b.negate(this.tmpN,this.tmpN);t.fromPositionAndNormal(this.tmpP,this.tmpN,this.plane);this.constraintOptions.interactionStartCamera=this.startCamera}};m.update=function(a){if(this.active){l.intersectPlaneFromScreenPoint(this.plane,this.currentCamera,this.dragBeginPoint,this.tmpPoi)||b.copy(this.tmpPoi,this.currentCamera.center);
l.normalizeCoordinate(this.currentCamera,a,this.tmpP0);var c=4*(this.tmpP0[1]-this.normalizedAnchorPoint[1]);q.copy(this.normalizedAnchorPoint,this.tmpP0);b.subtract(this.tmpRayDir,this.tmpPoi,this.currentCamera.eye);var g=b.length(this.tmpRayDir),k=g*(1-c);b.copy(this.constraintOptions.interactionDirection,this.tmpRayDir);b.scale(this.constraintOptions.interactionDirection,this.constraintOptions.interactionDirection,x.sign(c)/g);var w=this.view.state.constraints.minimumPoiDistance;0<=c&&k<w&&(k=
w,c=-(k-g)/g);1E-6>Math.abs(g-k)||(b.scale(this.tmpRayDir,this.tmpRayDir,c),this.currentCamera.eye=b.add(e,this.currentCamera.eye,this.tmpRayDir),b.lerp(e,this.currentCamera.center,this.tmpPoi,c),e[2]=this.tmpPoi[2]>this.startCamera.center[2]?Math.max(this.startCamera.center[2],e[2]):Math.min(this.startCamera.center[2],e[2]),this.currentCamera.center=e,this.constraintOptions.interactionFactor=u.pixelDistanceToInteractionFactor(this.dragBeginPoint,a),u.applyAll(this.view,this.currentCamera,this.constraintOptions))}};
m.end=function(){this.active&&this.finishController()};n._createClass(h,[{key:"intersectionHelper",get:function(){return this.view.sceneIntersectionHelper}}]);return h}(B.InteractiveController);p.__decorate([z.property({constructOnly:!0})],f.ZoomController.prototype,"view",void 0);f.ZoomController=p.__decorate([A.subclass("esri.views.3d.state.controllers.local.ZoomController")],f.ZoomController);const e=d.create();Object.defineProperty(f,"__esModule",{value:!0})});