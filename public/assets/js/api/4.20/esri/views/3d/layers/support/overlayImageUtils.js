// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.20/esri/copyright.txt for details.
//>>built
define(["exports","../../../../geometry/support/aaBoundingRect","../../webgl-engine/lib/Geometry","../../webgl-engine/lib/GeometryUtil"],function(q,g,z,A){function v(a){return A.createSquareGeometry([[a[0],a[1],-1],[a[2],a[1],-1],[a[2],a[3],-1],[a[0],a[3],-1]])}const B=[0,0,1];q.computeImageExportSize=function(a,b,e){const f=g.width(a)/g.height(a),d={width:e,height:e};1.0001<f?d.height=e/f:.9999>f&&(d.width=e*f);d.width=Math.round(d.width/(g.width(a)/g.width(b)));d.height=Math.round(d.height/(g.height(a)/
g.height(b)));return d};q.createGeometryForExtent=v;q.createOuterImageGeometry=function(a,b){if(!g.intersects(a,b))return v(b);const e=[a[1]-b[1],Math.min(a[3],b[3])-Math.max(a[1],b[1]),b[3]-a[3],123456],f=[a[0]-b[0],Math.min(a[2],b[2])-Math.max(a[0],b[0]),b[2]-a[2],123456],d=b[2]-b[0],C=b[3]-b[1],m=0<f[0]&&0<f[2]?3:2;var c=0<e[0]&&0<e[2]?3:2,k=(c+1)*(m+1);a=new Float64Array(3*k);k=new Float32Array(2*k);c=new Uint32Array(6*(c*m-1));let r=0,t=0,w=0,h=0,l=0;for(let n=0;4>n;n++){const x=e[n];if(0>=x)continue;
let u=0;for(let p=0;4>p;p++){const y=f[p];0>=y||(a[t++]=b[0]+u,a[t++]=b[1]+r,a[t++]=-1,k[w++]=u/d,k[w++]=r/C,3>p&&3>n&&(1!==p||1!==n)&&(c[l++]=h,c[l++]=h+1,c[l++]=h+m+1,c[l++]=h+1,c[l++]=h+m+2,c[l++]=h+m+1),h++,u+=y)}r+=x}b=new Uint32Array(c.length);return new z.Geometry([["position",{size:3,data:a,exclusive:!0}],["normal",{size:3,data:B,exclusive:!0}],["uv0",{size:2,data:k,exclusive:!0}]],[["position",c],["normal",b],["uv0",c]])};Object.defineProperty(q,"__esModule",{value:!0})});