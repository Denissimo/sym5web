// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.20/esri/copyright.txt for details.
//>>built
define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/tslib.es6 ../../../../../geometry ../../../../../core/Evented ../../../../../core/Handles ../../../../../core/maybe ../../../../../core/watchUtils ../../../../../core/accessorSupport/decorators/property ../../../../../core/has ../../../../../core/accessorSupport/ensureType ../../../../../core/Logger ../../../../../core/jsonMap ../../../../../core/accessorSupport/decorators/subclass ../../../../interactive/coordinateHelper ../../../../interactive/editGeometry/EditGeometry ../../../../interactive/editGeometry/operations/AppendVertex ../../../../interactive/editGeometry/operations/UpdateVertices ../../../../interactive/editGeometry/operations/RemoveVertices ../../../../interactive/editGeometry/operations/SplitEdge ../../../../interactive/editGeometry/operations/SetVertexPosition ../../../../interactive/editGeometry/operations/CloseComponent ../../../../../geometry/Point".split(" "),
function(e,n,k,C,r,t,f,u,l,D,E,F,G,v,w,g,x,H,I,J,y,z,A){e.AreaMeasurement3DPathHelper=function(p){function m(a={}){a=p.call(this,a)||this;a._handles=new t;a._version=0;a._internalGeometryChange=!1;return a}n._inheritsLoose(m,p);var d=m.prototype;d._initialize=function(a,b){this._handles.removeAll();this._handles.add(u.init(a,"geometry",()=>this._updateEditGeometryFromModelGeometry(a,b),!0));this._makeDirty(!0)};d._makeDirty=function(a=!1){this.notifyChange("isValidPolygon");this.notifyChange("initialized");
a&&this.notifyChange("numVertices")};d._updateEditGeometryFromModelGeometry=function(a,b){this._version++;this._internalGeometryChange||(this._handles.remove("EditGeometry"),this._editGeometry=f.isSome(a.geometry)?g.EditGeometry.fromGeometry(a.geometry,b.viewingMode):new g.EditGeometry(w.createCoordinateHelper(!0,!1,b.spatialReference,b.viewingMode)),this._makeDirty(!0),this.emit("change",{type:"change"}),this._handles.add(this._editGeometry.on("change",c=>{this._makeDirty(null!=c.addedVertices||
null!=c.removedVertices);this._internalGeometryChange=!0;a.geometry=0<this.numVertices?this._editGeometry.toPolygon():null;this._internalGeometryChange=!1}),"EditGeometry"))};d.getVertex=function(a){if(!this.initialized||0===this._editGeometry.components.length||0===this._editGeometry.components[0].vertices.length)return null;const b=this._editGeometry.components[0].vertices[0];let c=b;do{if(c.index===a)return c;c=c.right.right}while(c!==b&&null!=c);return null};d.getVertexPositionAsPoint=function(a){return this._editGeometry.coordinateHelper.createPoint(a.pos)};
d.getVertexPositionAsPointFromIndex=function(a){return this._editGeometry.coordinateHelper.createPoint(this.getVertex(a).pos)};d.forEachVertex=function(a){this.initialized&&0<this._editGeometry.components.length&&this._editGeometry.components[0].iterateVertices(a)};d.forEachVertexPosition=function(a){const b=this._editGeometry.coordinateHelper;this.forEachVertex((c,h)=>{b.toPoint(c.pos,q);a(q,h)})};d.clear=function(){f.isSome(this.areaMeasurement)&&(this.areaMeasurement.geometry=null)};d.add=function(a){if(!this.initialized)return null;
0===this._editGeometry.components.length&&this._editGeometry.components.push(new g.Component(this._editGeometry));a=new x.AppendVertex(this._editGeometry,this._editGeometry.components[0],this._editGeometry.coordinateHelper.fromPoint(a));this._editGeometry.apply(a);this.emit("change",{type:"change"});return a};d.close=function(){if(!this.initialized||0===this._editGeometry.components.length)return null;const a=new z.CloseComponent(this._editGeometry,this._editGeometry.components[0]);this._editGeometry.apply(a);
this.emit("change",{type:"change"});return a};d.ensureContains=function(a,b=""){let c=!1;this._editGeometry.components.forEach(h=>{h.iterateVertices(B=>{B===a&&(c=!0)})});if(!c)throw Error(`vertex doesnt exist ${b}`);return c};d.setVertexPosition=function(a,b){if(!this.initialized)return null;a=new y.SetVertexPosition(this._editGeometry,a,this._editGeometry.coordinateHelper.fromPoint(b));this._editGeometry.apply(a);this.emit("change",{type:"change"});return a};d.equals=function(a){if(this.numVertices!==
a.numVertices)return!1;let b=!0;this.forEachVertexPosition((c,h)=>{h=a.getVertexPositionAsPointFromIndex(h);c.equals(h)||(b=!1)});return b?!0:!1};n._createClass(m,[{key:"areaMeasurement",set:function(a){this._set("areaMeasurement",a);f.isSome(a)&&f.isSome(this.view)&&this._initialize(a,this.view)}},{key:"view",set:function(a){this._set("view",a);f.isSome(a)&&f.isSome(this.areaMeasurement)&&this._initialize(this.areaMeasurement,a)}},{key:"initialized",get:function(){return f.isSome(this.areaMeasurement)&&
f.isSome(this.view)}},{key:"version",get:function(){return this._version}},{key:"isValidPolygon",get:function(){return this.initialized&&0<this._editGeometry.components.length&&this._editGeometry.components[0].isClosed()}},{key:"vertices",get:function(){const a=[];this.forEachVertex(b=>{a.push(b)});return a}},{key:"numVertices",get:function(){return this.initialized&&0<this._editGeometry.components.length?this._editGeometry.components[0].vertices.length:0}},{key:"lastPoint",get:function(){if(this.initialized&&
0<this._editGeometry.components.length){const a=this._editGeometry.components[0].getLastVertex();if(f.isSome(a))return this._editGeometry.coordinateHelper.createPoint(a.pos)}return null}}]);return m}(r.EventedAccessor);k.__decorate([l.property({value:null})],e.AreaMeasurement3DPathHelper.prototype,"areaMeasurement",null);k.__decorate([l.property({value:null})],e.AreaMeasurement3DPathHelper.prototype,"view",null);k.__decorate([l.property()],e.AreaMeasurement3DPathHelper.prototype,"isValidPolygon",
null);k.__decorate([l.property()],e.AreaMeasurement3DPathHelper.prototype,"numVertices",null);e.AreaMeasurement3DPathHelper=k.__decorate([v.subclass("esri.views.3d.interactive.graphics.AreaMeasurement3D.AreaMeasurement3DPathHelper")],e.AreaMeasurement3DPathHelper);const q=new A;e.Component=g.Component;e.Edge=g.Edge;e.EditGeometry=g.EditGeometry;e.Vertex=g.Vertex;Object.defineProperty(e,"__esModule",{value:!0})});