// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.20/esri/copyright.txt for details.
//>>built
define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../core/uid ../../../../chunks/mat4 ../../../../chunks/mat4f64 ../../../../chunks/vec3 ../../../../chunks/vec4f64 ../../support/mathUtils ./geometryDataUtils ./Object3DStateID ../materials/renderers/utils".split(" "),function(h,l,d,p,q,g,k,r,t,u,v,m){let n=function(){function e(a,b,f=null,w=null,x=p.generateUID(),y=null,z=null,A=!1){this.data=a;this.material=b;this.layerUid=f;this.graphicUid=w;this.id=x;this.boundingInfo=
y;this.calculateShaderTransformation=z;this.castShadow=A;this.boundingSphere=r.create();this.instanceParameters={highlights:null,occludees:null,visible:!0};this._transformation=g.create();this._shaderTransformationDirty=!0}var c=e.prototype;c.updateTransformation=function(a){a(this._transformation);this._shaderTransformationDirty=!0;this.computeBoundingSphere(this._transformation,this.boundingSphere)};c.shaderTransformationChanged=function(){this._shaderTransformationDirty=!0};c.computeBoundingSphere=
function(a,b,f=t.maxScale(a)){d.isNone(this.boundingInfo)||(k.transformMat4(b,this.boundingInfo.getCenter(),a),b[3]=this.boundingInfo.getBSRadius()*f)};c.getShaderTransformation=function(){if(d.isNone(this.calculateShaderTransformation))return d.unwrapOr(this.transformation,g.IDENTITY);this._shaderTransformationDirty&&(this._shaderTransformation||(this._shaderTransformation=g.create()),q.copy(this._shaderTransformation,this.calculateShaderTransformation(d.unwrapOr(this.transformation,g.IDENTITY))),
this._shaderTransformationDirty=!1);return this._shaderTransformation};c.computeAttachmentOrigin=function(a){if(this.material.computeAttachmentOrigin)return this.material.computeAttachmentOrigin(this,a)?(d.isSome(this._transformation)&&k.transformMat4(a,a,this._transformation),!0):!1;const b=this.indices.get("position"),f=this.vertexAttributes.get("position");return u.computeAttachmentOriginTriangles(f,b,a)?(d.isSome(this._transformation)&&k.transformMat4(a,a,this._transformation),!0):!1};c.addHighlight=
function(){const a=new v.Object3DStateID(0),b=this.instanceParameters;b.highlights=m.addObject3DStateID(b.highlights,a);return a};c.removeHighlight=function(a){const b=this.instanceParameters;b.highlights=m.removeObject3DStateID(b.highlights,a)};l._createClass(e,[{key:"transformation",get:function(){return this._transformation}},{key:"hasShaderTransformation",get:function(){return d.isSome(this.calculateShaderTransformation)}},{key:"primitiveType",get:function(){return this.data.primitiveType}},{key:"indices",
get:function(){return this.data.indices}},{key:"vertexAttributes",get:function(){return this.data.vertexAttributes}}]);return e}(),B=function(e){function c(){return e.apply(this,arguments)||this}l._inheritsLoose(c,e);return c}(n);h.RenderGeometry=n;h.ValidatedRenderGeometry=B;Object.defineProperty(h,"__esModule",{value:!0})});