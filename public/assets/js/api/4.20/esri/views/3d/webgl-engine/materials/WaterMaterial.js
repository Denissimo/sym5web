// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.20/esri/copyright.txt for details.
//>>built
define("exports ../../../../chunks/_rollupPluginBabelHelpers ../lib/AnimationTimer ../lib/Material ../lib/OrderIndependentTransparency ./WaterGLMaterial ./WaterTechnique ./internal/DefaultBufferWriter ./internal/MaterialUtil ./internal/waterMaterialUtils".split(" "),function(f,l,m,d,n,g,p,h,q,r){d=function(k){function e(a){a=k.call(this,a,r.defaultWaterMaterialParameters)||this;a.animation=new m.AnimationTimer;a.techniqueConfig=new p.WaterTechniqueConfiguration;return a}l._inheritsLoose(e,k);var c=
e.prototype;c.getTechniqueConfig=function(a,b){this.techniqueConfig.output=a;this.techniqueConfig.writeDepth=this.params.writeDepth;this.techniqueConfig.receiveShadows=this.params.receiveShadows;this.techniqueConfig.slicePlaneEnabled=this.params.slicePlaneEnabled;this.techniqueConfig.transparent=this.params.transparent;this.techniqueConfig.useSSR=this.params.ssrEnabled;this.techniqueConfig.isDraped=this.params.isDraped;this.techniqueConfig.transparencyPassType=b?b.transparencyPassType:3;this.techniqueConfig.enableOffset=
b?b.camera.relativeElevation<n.OITPolygonOffsetLimit:!0;this.techniqueConfig.multipassTerrainEnabled=b?b.multipassTerrainEnabled:!1;this.techniqueConfig.cullAboveGround=b?b.cullAboveGround:!1;return this.techniqueConfig};c.update=function(a){this.animation.enabled=35E3>Math.sqrt(this.params.waveTextureRepeat/this.params.waveStrength)*Math.min(a.camera.relativeElevation,a.camera.distance);a=this.animation.advance(a.dt);return this.animation.enabled&&a};c.intersect=function(a,b,x,t,u,v,w){q.intersectTriangleGeometry(a,
b,t,u,v,void 0,w)};c.getGLMaterial=function(a){if(0===a.output&&this.params.isDraped)return a.output=5,new g.WaterGLMaterial(a);switch(a.output){case 0:case 2:case 4:case 7:return new g.WaterGLMaterial(a)}};c.createBufferWriter=function(){return new h.DefaultBufferWriter(h.PositionUVLayout)};return e}(d.Material);f.WaterMaterial=d;Object.defineProperty(f,"__esModule",{value:!0})});