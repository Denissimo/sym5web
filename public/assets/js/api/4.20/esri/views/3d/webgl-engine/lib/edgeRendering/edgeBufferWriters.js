// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.20/esri/copyright.txt for details.
//>>built
define("exports ../../../../../core/RandomLCG ../../../../../chunks/vec3 ../../../../../chunks/vec3f64 ../../../support/buffer/glUtil ./bufferLayouts".split(" "),function(l,y,w,z,x,h){function A(a){const c=q;c[0]=a.position0[0];c[1]=a.position0[1];c[2]=a.position0[2];c[3]=a.position1[0];c[4]=a.position1[1];c[5]=a.position1[2];f[0]=5381;for(a=0;a<m.length;a++)f[0]=31*f[0]+m[a];return f[0]}function B(a){const c=q;c[0]=k(a.position0[0]);c[1]=k(a.position0[1]);c[2]=k(a.position0[2]);c[3]=k(a.position1[0]);
c[4]=k(a.position1[1]);c[5]=k(a.position1[2]);f[0]=5381;for(a=0;a<m.length;a++)f[0]=31*f[0]+m[a];return f[0]}function k(a){return Math.round(1E4*a)/1E4}let t=function(){function a(){}var c=a.prototype;c.updateSettings=function(b){this.settings=b;this.edgeHashFunction=b.reducedPrecision?B:A};c.write=function(b,d,e){var r=this.edgeHashFunction(e);n.seed=r;r=n.getIntRange(0,255);const C=n.getIntRange(0,this.settings.variants-1);var g=n.getFloat();g=-(1-Math.min(g/.7,1))+Math.max(0,g-.7)/(1-.7);g=255*
(Math.abs(g)**1.2*(0>g?-1:1)*.5+.5);b.position0.setVec(d,e.position0);b.position1.setVec(d,e.position1);b.componentIndex.set(d,e.componentIndex);b.variantOffset.set(d,r);b.variantStroke.set(d,C);b.variantExtension.set(d,g)};c.trim=function(b,d){return b.slice(0,d)};return a}();const q=new Float32Array(6),m=new Uint32Array(q.buffer),f=new Uint32Array(1);let u=function(){function a(){this.commonWriter=new t}var c=a.prototype;c.updateSettings=function(b){this.commonWriter.updateSettings(b)};c.allocate=
function(b){return h.RegularEdgeInstancesLayout.createBuffer(b)};c.write=function(b,d,e){this.commonWriter.write(b,d,e);w.add(p,e.faceNormal0,e.faceNormal1);w.normalize(p,p);b.normal.setVec(d,p)};c.trim=function(b,d){return this.commonWriter.trim(b,d)};return a}();u.Layout=h.RegularEdgeInstancesLayout;u.glLayout=x.glLayout(h.RegularEdgeInstancesLayout,1);let v=function(){function a(){this.commonWriter=new t}var c=a.prototype;c.updateSettings=function(b){this.commonWriter.updateSettings(b)};c.allocate=
function(b){return h.SilhouetteEdgeInstancesLayout.createBuffer(b)};c.write=function(b,d,e){this.commonWriter.write(b,d,e);b.normalA.setVec(d,e.faceNormal0);b.normalB.setVec(d,e.faceNormal1)};c.trim=function(b,d){return this.commonWriter.trim(b,d)};return a}();v.Layout=h.SilhouetteEdgeInstancesLayout;v.glLayout=x.glLayout(h.SilhouetteEdgeInstancesLayout,1);const p=z.create(),n=new y;l.CommonBufferWriter=t;l.RegularEdgeBufferWriter=u;l.SilhouetteEdgeBufferWriter=v;Object.defineProperty(l,"__esModule",
{value:!0})});