// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.20/esri/copyright.txt for details.
//>>built
define("../../../../chunks/_rollupPluginBabelHelpers ../../../../core/Evented ../../../../core/mathUtils ../../../../core/maybe ./ContentObject ./TextRenderer ../../../webgl/Texture ../../../webgl/capabilities/isWebGL2Context".split(" "),function(g,n,h,k,p,l,q,r){const t={canvas:null};return function(m){function d(a,e,c){var b=m.call(this)||this;b.type=4;b._glTexture=null;b.events=new n;b._requiresPowerOfTwo=!r(a.gl);b._renderer=new l.TextRenderer(e,c);return b}g._inheritsLoose(d,m);var f=d.prototype;
f.createDescriptor=function(a){return{target:3553,pixelFormat:6408,dataType:5121,wrapMode:33071,flipped:!0,samplingMode:9987,hasMipmap:!0,preMultiplyAlpha:!0,maxAnisotropy:a.parameters.maxMaxAnisotropy}};f.load=function(a){if(k.isSome(this._glTexture))return this._glTexture;const e=l.getTextHelperCanvas(t,this.textureWidth,this.textureHeight),c=e.getContext("2d");c.save();this._renderer.render(c,0,this.textureHeight-this._renderer.renderedHeight);this._glTexture=new q(a,this.createDescriptor(a),e);
c.restore();return this._glTexture};f.unload=function(){k.isSome(this._glTexture)&&(this._glTexture.dispose(),this._glTexture=null);this.events.emit("unloaded")};g._createClass(d,[{key:"width",get:function(){return this._renderer.renderedWidth}},{key:"height",get:function(){return this._renderer.renderedHeight}},{key:"textureWidth",get:function(){const a=this.width;return this._requiresPowerOfTwo?h.nextHighestPowerOfTwo(a):a}},{key:"textureHeight",get:function(){const a=this.height;return this._requiresPowerOfTwo?
h.nextHighestPowerOfTwo(a):a}},{key:"displayWidth",get:function(){return this._renderer.displayWidth}},{key:"displayHeight",get:function(){return this._renderer.displayHeight}},{key:"texcoordScale",get:function(){return[this._renderer.renderedWidth/this.textureWidth,this._renderer.renderedHeight/this.textureHeight]}},{key:"requiresFrameUpdates",get:function(){return!1}}]);return d}(p.ContentObject)});