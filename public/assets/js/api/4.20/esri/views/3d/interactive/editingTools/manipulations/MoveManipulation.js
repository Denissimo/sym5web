// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.20/esri/copyright.txt for details.
//>>built
define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/Handles ../../../../../core/handleUtils ../../../../../core/has ../../../../../core/maybe ./config ./Manipulation ./MoveXYAxisManipulation ./MoveXYDiscManipulation ./MoveZManipulation".split(" "),function(p,q,w,r,x,t,u,n,y,z,A){n=function(v){function l(a){var b=v.call(this)||this;b._handles=new w;b._angleDeferred=null;b._interactive=!0;const {tool:d,view:c,snapToScene:e,radius:f}=a;b._view=c;b.xyManipulation=new z.MoveXYDiscManipulation({tool:d,
view:c,snapToScene:e,radius:f});b.xyAxisManipulation=new y.MoveXYAxisManipulation({tool:d,view:c,radius:f});b.zManipulation=new A.MoveZManipulation({tool:d,view:c,radius:f});b.xyManipulation.available=a.xyAvailable;b.xyAxisManipulation.available=a.xyAxisAvailable;b.zManipulation.available=a.zAvailable;b.autoHideXYAxis();b.forEachManipulator(g=>{b._handles.add(g.events.on("grab-changed",()=>b.updateManipulatorInteractivity()))});return b}q._inheritsLoose(l,v);var k=l.prototype;k.destroy=function(){this._handles.destroy();
this.xyManipulation.destroy();this.xyAxisManipulation.destroy();this.zManipulation.destroy()};k.createGraphicDragPipeline=function(a,b,d){return r.handlesGroup([this.xyManipulation.createGraphicDragPipeline((c,e,f,g,h)=>a(0,c,e,f,g,h),b,d),this.xyAxisManipulation.createGraphicDragPipeline((c,e,f,g,h)=>a(1,c,e,f,g,h),b,d),this.zManipulation.createGraphicDragPipeline((c,e,f,g,h)=>a(2,c,e,f,g,h),b,d)])};k.createDragPipeline=function(a,b,d,c){return r.handlesGroup([this.xyManipulation.createDragPipeline((e,
f,g,h,m)=>a(0,e,f,g,h,m),b,d,c),this.xyAxisManipulation.createDragPipeline((e,f,g,h,m)=>a(1,e,f,g,h,m),b,d,c),this.zManipulation.createDragPipeline((e,f,g,h,m)=>a(2,e,f,g,h,m),d)])};k.forEachManipulator=function(a){this.xyManipulation.forEachManipulator(b=>a(b,1));this.xyAxisManipulation.forEachManipulator(b=>a(b,1));this.zManipulation.forEachManipulator(b=>a(b,0))};k.autoHideXYAxis=function(){const a=this.xyAxisManipulation;var b=this.xyManipulation;if(!x("esri-mobile")){var d=[];b.forEachManipulator(c=>
d.push(c));a.forEachManipulator(c=>d.push(c));b=()=>{const c=[];this.xyAxisVisible?t.isSome(this._angleDeferred)&&(this.angle=this._angleDeferred()):a.forEachManipulator(e=>c.push(e.disableDisplay()));this._handles.remove("disable-xy-axis-display");this._handles.add(c,"disable-xy-axis-display")};for(const c of d)this._handles.add(c.events.on("focus-changed",b));this._view.inputManager&&this._handles.add(this._view.inputManager.watch("latestPointerType",b));b()}};k.updateManipulatorInteractivity=function(){const a=
this.grabbing;this.forEachManipulator(b=>{b.interactive=!a&&this._interactive||b.grabbing})};l.radiusForSymbol=function(a){return(a=t.isSome(a)&&"point-3d"===a.type&&a.symbolLayers)&&0<a.length&&a.some(b=>"icon"===b.type)?u.DISC_RADIUS_SMALL:u.DISC_RADIUS};q._createClass(l,[{key:"snapToScene",set:function(a){this.xyManipulation.snapToScene=a}},{key:"angle",set:function(a){this._angleDeferred=null;this.xyAxisManipulation.angle=a}},{key:"angleDeferred",set:function(a){this.xyAxisVisible?this.angle=
a():this._angleDeferred=a}},{key:"interactive",set:function(a){this._interactive!==a&&(this._interactive=a,this.updateManipulatorInteractivity())}},{key:"radius",set:function(a){this.xyAxisManipulation.radius=a;this.xyManipulation.radius=a;this.zManipulation.radius=a}},{key:"displayScale",set:function(a){this.xyManipulation.displayScale=a;this.xyAxisManipulation.displayScale=a}},{key:"xyAxisVisible",get:function(){const a=this.xyManipulation.someManipulator(b=>b.focused)||this.xyAxisManipulation.someManipulator(b=>
b.focused);return this._view.inputManager&&"touch"===this._view.inputManager.latestPointerType||a}}]);return l}(n.Manipulation);p.MoveManipulation=n;Object.defineProperty(p,"__esModule",{value:!0})});