// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.20/esri/copyright.txt for details.
//>>built
require({cache:{"esri/libs/i3s/I3SModule":function(){define(["require","exports","../../assets"],function(r,t,H){function k(q){return H.getAssetUrl(`esri/libs/i3s/${q}`)}let B;t.get=function(){B||(B=(new Promise(q=>(new Promise(function(z,I){r(["../../chunks/i3s"],z,I)})).then(function(z){return z.i3s}).then(({default:z})=>{const I=z({locateFile:k,onRuntimeInitialized:()=>q(I)});delete I.then}))).catch(q=>Promise.reject(q)));return B};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/assets":function(){define("exports ./config ./request ./core/Error ./core/Logger ./core/urlUtils".split(" "),
function(r,t,H,k,B,q){function z(F){if(!t.assetsPath)throw I.errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new k("assets:path-not-set","config.assetsPath is not set");return q.join(t.assetsPath,F)}const I=B.getLogger("esri.assets");r.fetchAsset=function(F,J){return H(z(F),J)};r.getAssetUrl=z;Object.defineProperty(r,"__esModule",{value:!0})})},"esri/request":function(){define("require ./chunks/_rollupPluginBabelHelpers ./config ./kernel ./core/Error ./core/global ./core/has ./core/lang ./core/maybe ./core/promiseUtils ./core/urlUtils ./support/apiKeyUtils ./support/requestUtils".split(" "),
function(r,t,H,k,B,q,z,I,F,J,m,Q,R){function C(a,b){return K.apply(this,arguments)}function K(){K=t._asyncToGenerator(function*(a,b){var c=m.isDataProtocol(a);const g=m.isBlobProtocol(a);g||c||(a=m.normalize(a));const e={url:a,requestOptions:{...F.unwrap(b)}};let f=m.getInterceptor(a);if(f){a=yield ba(f,e);if(null!=a)return{data:a,getHeader:ea,requestOptions:e.requestOptions,url:e.url};f.after||f.error||(f=null)}a=e.url;b=e.requestOptions;if("image"===b.responseType){if(z("host-webworker")||z("host-node"))throw h("request:invalid-parameters",
Error("responseType 'image' is not supported in Web Workers or Node environment"),e);}else if(c)throw h("request:invalid-parameters",Error("Data URLs are not supported for responseType \x3d "+b.responseType),e);if("head"===b.method){if(b.body)throw h("request:invalid-parameters",Error("body parameter cannot be set when method is 'head'"),e);if(c||g)throw h("request:invalid-parameters",Error("data and blob URLs are not supported for method 'head'"),e);}yield fa();if(D)return D.execute(a,b);const x=
J.createAbortController();J.onAbort(b,()=>x.abort());c=yield S({controller:x,credential:null,credentialToken:null,fetchOptions:null,hasToken:!1,interceptor:f,params:e,redoRequest:!1,useIdentity:L.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1});f&&f.after&&f.after(c);return c});return K.apply(this,arguments)}function M(a){(a=m.getOrigin(a))&&!C._corsServers.includes(a)&&C._corsServers.push(a)}function V(a){a=m.getOrigin(a);return!a||a.endsWith(".arcgis.com")||C._corsServers.includes(a)||m.isTrustedServer(a)}
function h(a,b,c,g){let e="Error";const f={url:c.url,requestOptions:c.requestOptions,getHeader:ea,ssl:!1};if(b instanceof B)return b.details?(b.details=I.clone(b.details),b.details.url=c.url,b.details.requestOptions=c.requestOptions):b.details=f,b;if(b){c=g&&(l=>g.headers.get(l));const x=g&&g.status,v=b.message;v&&(e=v);c&&(f.getHeader=c);f.httpStatus=(null!=b.httpCode?b.httpCode:b.code)||x||0;f.subCode=b.subcode;f.messageCode=b.messageCode;f.messages="string"===typeof b.details?[b.details]:b.details;
f.raw=ha in b?b[ha]:b}return J.isAbortError(b)?J.createAbortError():new B(a,e,f)}function fa(){return d.apply(this,arguments)}function d(){d=t._asyncToGenerator(function*(){z("host-webworker")?D||(D=yield new Promise(function(a,b){r(["./core/workers/request"],a,b)})):C._abortableFetch||(C._abortableFetch=q.fetch.bind(q))});return d.apply(this,arguments)}function p(){return w.apply(this,arguments)}function w(){w=t._asyncToGenerator(function*(){k.id||(yield new Promise(function(a,b){r(["./identity/IdentityManager"],
function(c){a(Object.freeze({__proto__:null,"default":c}))},b)}))});return w.apply(this,arguments)}function E(a){return A.apply(this,arguments)}function A(){A=t._asyncToGenerator(function*(a){const b=a.params.url,c=a.params.requestOptions,g=a.controller.signal,e=c.body;let f=null,x=null,v=null;O&&"HTMLFormElement"in q&&(e instanceof FormData?f=e:e instanceof HTMLFormElement&&(x=e,f=new FormData(x)));"string"===typeof e&&(v=e);a.fetchOptions={cache:c.cacheBust&&!C._abortableFetch.polyfill?"no-cache":
"default",credentials:"same-origin",headers:c.headers||{},method:"head"===c.method?"HEAD":"GET",mode:"cors",redirect:"follow",signal:g};if(f||v)a.fetchOptions.body=f||v;"anonymous"===c.authMode&&(a.useIdentity=!1);a.hasToken=!!(/token=/i.test(b)||c.query&&c.query.token||f&&f.get&&f.get("token")||x&&x.elements.token);!a.hasToken&&H.apiKey&&Q.supportsApiKey(b)&&(c.query||(c.query={}),c.query.token=H.apiKey,a.hasToken=!0);if(a.useIdentity&&!a.hasToken&&!a.credentialToken&&!W(b)&&!J.isAborted(g)){let l;
"immediate"===c.authMode?(yield p(),l=yield k.id.getCredential(b,{signal:g}),a.credential=l):"no-prompt"===c.authMode?(yield p(),l=yield k.id.getCredential(b,{prompt:!1,signal:g}).catch(()=>{}),a.credential=l):k.id&&(l=k.id.findCredential(b));l&&(a.credentialToken=l.token,a.useSSL=!!l.ssl)}});return A.apply(this,arguments)}function W(a){return la.some(b=>b.test(a))}function Y(a){return ca.apply(this,arguments)}function ca(){ca=t._asyncToGenerator(function*(a){let b=a.params.url;const c=a.params.requestOptions,
g=a.fetchOptions,e=m.isBlobProtocol(b)||m.isDataProtocol(b),f=c.responseType||"json",x=e?0:null!=c.timeout?c.timeout:L.timeout;var v=!1;if(!e){a.useSSL&&(b=m.toHTTPS(b));c.cacheBust&&"default"===g.cache&&(b=m.addQueryParameter(b,"request.preventCache",Date.now()));var l={...c.query};a.credentialToken&&(l.token=a.credentialToken);v=m.objectToQuery(l);z("esri-url-encodes-apostrophe")&&(v=v.replace(/'/g,"%27"));const T=b.length+1+v.length;v="delete"===c.method||"post"===c.method||"put"===c.method||!!c.body||
T>L.maxUrlLength;const X=c.useProxy||!!m.getProxyRule(b);if(X){const ia=m.getProxyUrl(b);var Z=ia.path;!v&&Z.length+1+T>L.maxUrlLength&&(v=!0);ia.query&&(l={...ia.query,...l})}if("HEAD"===g.method&&(v||X)){if(v){if(T>L.maxUrlLength)throw h("request:invalid-parameters",Error("URL exceeds maximum length"),a.params);throw h("request:invalid-parameters",Error("cannot use POST request when method is 'head'"),a.params);}if(X)throw h("request:invalid-parameters",Error("cannot use proxy when method is 'head'"),
a.params);}v?(g.method="delete"===c.method?"DELETE":"put"===c.method?"PUT":"POST",c.body?b=m.addQueryParameters(b,l):(g.body=m.objectToQuery(l),g.headers["Content-Type"]="application/x-www-form-urlencoded")):b=m.addQueryParameters(b,l);X&&(a.useProxy=!0,b=`${Z}?${b}`);l.token&&O&&g.body instanceof FormData&&(Z=g.body,Z.set?Z.set("token",l.token):Z.append("token",l.token));c.hasOwnProperty("withCredentials")?a.withCredentials=c.withCredentials:m.hasSameOrigin(b,m.appUrl)||(m.isTrustedServer(b)?a.withCredentials=
!0:k.id&&(l=k.id.findServerInfo(b))&&l.webTierAuth&&(a.withCredentials=!0));a.withCredentials&&(g.credentials="include")}l=0;let ka=!1;0<x&&(l=setTimeout(()=>{ka=!0;a.controller.abort()},x));let P,u;try{if("native-request-init"===c.responseType)u=g,u.url=b;else if("image"!==c.responseType||"default"!==g.cache||"GET"!==g.method||v||ja(c.headers)||!e&&!a.useProxy&&L.proxyUrl&&!V(b))if(P=yield C._abortableFetch(b,g),a.useProxy||M(b),"native"===c.responseType)u=P;else{if("HEAD"!==g.method)if(P.ok){switch(f){case "array-buffer":u=
yield P.arrayBuffer();break;case "blob":case "image":u=yield P.blob();break;default:u=yield P.text()}l&&(clearTimeout(l),l=0);if("json"===f||"xml"===f||"document"===f)if(u)switch(f){case "json":u=JSON.parse(u);break;case "xml":u=da(u,"application/xml");break;case "document":u=da(u,"text/html")}else u=null;if(u){if("array-buffer"===f||"blob"===f){const T=P.headers.get("Content-Type");if(/application\/json|text\/plain/i.test(T)&&750>=u["blob"===f?"size":"byteLength"])try{const X=yield(new Response(u)).json();
X.error&&(u=X)}catch{}}"image"===f&&u instanceof Blob&&(u=yield G(URL.createObjectURL(u),a,!0))}}else u=yield P.text()}else u=yield G(b,a)}catch(T){if("AbortError"===T.name){if(ka)throw Error("Timeout exceeded");throw J.createAbortError("Request canceled");}if(!P&&T instanceof TypeError&&L.proxyUrl&&!c.body&&"delete"!==c.method&&"head"!==c.method&&"post"!==c.method&&"put"!==c.method&&!a.useProxy&&!V(b))a.redoRequest=!0,m.addProxyRule({proxyUrl:L.proxyUrl,urlPrefix:m.getOrigin(b)});else throw T;}finally{l&&
clearTimeout(l)}return[P,u]});return ca.apply(this,arguments)}function ba(a,b){return aa.apply(this,arguments)}function aa(){aa=t._asyncToGenerator(function*(a,b){if(null!=a.responseData)return a.responseData;a.headers&&(b.requestOptions.headers={...b.requestOptions.headers,...a.headers});a.query&&(b.requestOptions.query={...b.requestOptions.query,...a.query});if(a.before){let c,g;try{g=yield a.before(b)}catch(e){c=h("request:interceptor",e,b)}if(g instanceof Error||g instanceof B)c=h("request:interceptor",
g,b);if(c)throw a.error&&a.error(c),c;return g}});return aa.apply(this,arguments)}function ja(a){if(a)for(const b of Object.getOwnPropertyNames(a))if(a[b])return!0;return!1}function da(a,b){let c;try{c=(new DOMParser).parseFromString(a,b)}catch{}if(!c||c.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return c}function S(a){return N.apply(this,arguments)}function N(){N=t._asyncToGenerator(function*(a){var b,c;yield E(a);let g;try{do[g,e]=yield Y(a);while(!(yield n(a,
g,e)))}catch(x){var e=h("request:server",x,a.params,g);e.details.ssl=a.useSSL;a.interceptor&&a.interceptor.error&&a.interceptor.error(e);throw e;}const f=a.params.url;!/\/sharing\/rest\/(accounts|portals)\/self/i.test(f)||a.hasToken||a.credentialToken||null==(b=e)||null==(c=b.user)||!c.username||m.isTrustedServer(f)||(b=m.getOrigin(f,!0))&&L.trustedServers.push(b);(b=a.credential)&&k.id&&(c=(c=k.id.findServerInfo(b.server))&&c.owningSystemUrl)&&(c=c.replace(/\/?$/,"/sharing"),(b=k.id.findCredential(c,
b.userId))&&-1===k.id._getIdenticalSvcIdx(c,b)&&b.resources.unshift(c));return{data:e,getHeader:g?x=>g.headers.get(x):ea,requestOptions:a.params.requestOptions,ssl:a.useSSL,url:a.params.url}});return N.apply(this,arguments)}function n(a,b,c){return y.apply(this,arguments)}function y(){y=t._asyncToGenerator(function*(a,b,c){if(a.redoRequest)return a.redoRequest=!1;const g=a.params.requestOptions;if(!b||"native"===g.responseType||"native-request-init"===g.responseType)return!0;let e;if(!b.ok)throw e=
Error(`Unable to load ${b.url} status: ${b.status}`),e[ha]=c,e;null!=c&&c.error&&(e=c.error);let f,x,v;e&&(f=Number(e.code),x=e.hasOwnProperty("subcode")?Number(e.subcode):null,v=(v=e.messageCode)&&v.toUpperCase());b=g.authMode;if(403===f&&(4===x||e.message&&-1<e.message.toLowerCase().indexOf("ssl")&&-1===e.message.toLowerCase().indexOf("permission"))){if(!a.useSSL)return a.useSSL=!0,!1}else if(!a.hasToken&&a.useIdentity&&("no-prompt"!==b||498===f)&&-1!==U.indexOf(f)&&!W(a.params.url)&&(403!==f||
-1===ma.indexOf(v)&&(null==x||2===x&&a.credentialToken))){yield p();try{const l=yield k.id.getCredential(a.params.url,{error:h("request:server",e,a.params),prompt:"no-prompt"!==b,signal:a.controller.signal,token:a.credentialToken});a.credential=l;a.credentialToken=l.token;a.useSSL=a.useSSL||l.ssl;return!1}catch(l){if("no-prompt"===b)return a.credential=null,a.credentialToken=null,!1;e=l}}if(e)throw e;return!0});return y.apply(this,arguments)}function G(a,b,c=!1){const g=b.controller.signal,e=new Image;
e.crossOrigin=b.withCredentials?"use-credentials":"anonymous";e.alt="";e.src=a;return R.loadImageAsync(e,a,c,g)}let D;const L=H.request,O="FormData"in q,U=[499,498,403,401],ma=["COM_0056","COM_0057","SB_0008"],la=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],ea=()=>null,ha=Symbol();C._abortableFetch=null;C._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"];return C})},"esri/support/apiKeyUtils":function(){define(["exports","../core/urlUtils"],
function(r,t){const H=["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"];r.isApiKey=function(k){return k&&4<k.length&&k.startsWith("AAPK")};r.supportsApiKey=function(k){const B=t.getOrigin(k,!0);return B&&B.endsWith(".arcgis.com")&&!H.includes(B)&&!k.endsWith("/sharing/rest/generateToken")};Object.defineProperty(r,"__esModule",{value:!0})})},"esri/support/requestUtils":function(){define(["exports","../core/has","../core/maybe","../core/promiseUtils"],
function(r,t,H,k){function B(){try{return new DOMException("Aborted","AbortError")}catch{const q=Error();q.name="AbortError";return q}}r.loadImageAsync=function(q,z,I=!1,F){return new Promise((J,m)=>{if(k.isAborted(F))m(B());else{var Q=()=>{K();m(Error(`Unable to load ${z}`))},R=()=>{const M=q;K();J(M)},C=()=>{if(q){var M=q;K();M.src="";m(B())}},K=()=>{t("esri-image-decode")||(q.removeEventListener("error",Q),q.removeEventListener("load",R));q=R=Q=null;H.isSome(F)&&F.removeEventListener("abort",C);
C=null;I&&URL.revokeObjectURL(z)};H.isSome(F)&&F.addEventListener("abort",C);t("esri-image-decode")?q.decode().then(R,Q):(q.addEventListener("error",Q),q.addEventListener("load",R))}})};Object.defineProperty(r,"__esModule",{value:!0})})},"*noref":1}});
define(["exports","../../../chunks/_rollupPluginBabelHelpers","../../../core/maybe","../../../core/typedArrayUtil","../../../libs/i3s/I3SModule"],function(r,t,H,k,B){function q(){q=t._asyncToGenerator(function*(d){yield M();const p=[d.geometryBuffer];return{result:Q(d,p),transferList:p}});return q.apply(this,arguments)}function z(){z=t._asyncToGenerator(function*(d){var p;yield M();const w=[d.geometryBuffer];var {geometryBuffer:E}=d,A=E.byteLength;d=h._malloc(A);A=new Uint8Array(h.HEAPU8.buffer,d,
A);A.set(new Uint8Array(E));E=h.dracoDecompressPointCloudData(d,A.byteLength);h._free(d);if(0<E.error.length)throw`i3s.wasm: ${E.error}`;d=0<(null==(p=E.featureIds)?void 0:p.length)?k.slice(E.featureIds):null;p=k.slice(E.positions);d&&w.push(d.buffer);w.push(p.buffer);return{result:{positions:p,featureIds:d},transferList:w}});return z.apply(this,arguments)}function I(){I=t._asyncToGenerator(function*(d){yield M();R(d);d={buffer:d.buffer};return{result:d,transferList:[d.buffer]}});return I.apply(this,
arguments)}function F(){F=t._asyncToGenerator(function*(d){yield M();m(d)});return F.apply(this,arguments)}function J(){J=t._asyncToGenerator(function*(d){yield M();h.setLegacySchema(d.context,d.jsonSchema)});return J.apply(this,arguments)}function m(d){const p=d.modifications,w=h._malloc(8*p.length),E=new Float64Array(h.HEAPU8.buffer,w,p.length);for(let A=0;A<p.length;++A)E[A]=p[A];h.setModifications(d.context,w,p.length,d.isGeodetic);h._free(w)}function Q(d,p){if(!h)return null;const {context:w,
localOrigin:E,globalTrafo:A,mbs:W,obb:Y,elevationOffset:ca,geometryBuffer:ba,geometryDescriptor:aa,indexToVertexProjector:ja,vertexToRenderProjector:da}=d;var S=h._malloc(ba.byteLength),N=h._malloc(33*Float64Array.BYTES_PER_ELEMENT),n=new Uint8Array(h.HEAPU8.buffer,S,ba.byteLength);n.set(new Uint8Array(ba));var y=new Float64Array(h.HEAPU8.buffer,N,33);K(y,E);var G=y.byteOffset+3*y.BYTES_PER_ELEMENT,D=new Float64Array(y.buffer,G);K(D,A);G+=16*y.BYTES_PER_ELEMENT;D=new Float64Array(y.buffer,G);K(D,
W);G+=4*y.BYTES_PER_ELEMENT;H.isSome(Y)&&(D=new Float64Array(y.buffer,G),K(D,Y.center),G+=3*y.BYTES_PER_ELEMENT,D=new Float64Array(y.buffer,G),K(D,Y.halfSize),G+=3*y.BYTES_PER_ELEMENT,D=new Float64Array(y.buffer,G),K(D,Y.quaternion));y={isDraco:!1,isLegacy:!1,color:d.layouts.some(O=>O.some(U=>"color"===U.name)),normal:d.needNormals&&d.layouts.some(O=>O.some(U=>"normalCompressed"===U.name)),uv0:d.layouts.some(O=>O.some(U=>"uv0"===U.name)),uvRegion:d.layouts.some(O=>O.some(U=>"uvRegion"===U.name)),
featureIndex:aa.featureIndex};n=h.process(w,!!d.obb,S,n.byteLength,aa,y,N,ca,ja,da,d.normalReferenceFrame);h._free(N);h._free(S);if(0<n.error.length)throw`i3s.wasm: ${n.error}`;if(n.discarded)return null;S=0<n.componentOffsets.length?k.slice(n.componentOffsets):null;N=0<n.featureIds.length?k.slice(n.featureIds):null;y=k.slice(n.interleavedVertedData).buffer;G=1===n.indicesType?k.slice(new Uint16Array(n.indices.buffer,n.indices.byteOffset,n.indices.byteLength/2)):k.slice(new Uint32Array(n.indices.buffer,
n.indices.byteOffset,n.indices.byteLength/4));D=k.slice(n.positions);const L=1===n.positionIndicesType?k.slice(new Uint16Array(n.positionIndices.buffer,n.positionIndices.byteOffset,n.positionIndices.byteLength/2)):k.slice(new Uint32Array(n.positionIndices.buffer,n.positionIndices.byteOffset,n.positionIndices.byteLength/4));d={layout:d.layouts[0],interleavedVertexData:y,indices:G,hasColors:n.hasColors,hasModifications:n.hasModifications,positionData:{data:D,indices:L}};N&&p.push(N.buffer);S&&p.push(S.buffer);
p.push(y);p.push(G.buffer);p.push(D.buffer);p.push(L.buffer);return{componentOffsets:S,featureIds:N,transformedGeometry:d,obb:n.obb}}function R(d){const {context:p,buffer:w}=d;d=h._malloc(w.byteLength);const E=w.byteLength/Float64Array.BYTES_PER_ELEMENT,A=new Float64Array(h.HEAPU8.buffer,d,E),W=new Float64Array(w);A.set(W);h.filterOBBs(p,d,E);W.set(A);h._free(d)}function C(d){h&&h.destroy(d)}function K(d,p){for(let w=0;w<p.length;++w)d[w]=p[w]}function M(){if(h)return Promise.resolve();V||(V=B.get().then(d=>
{h=d;V=null}));return V}let V,h;const fa={transform:Q,destroy:C};r.destroyContext=function(d){C(d)};r.dracoDecompressPointCloudData=function(d){return z.apply(this,arguments)};r.filterObbsForModifications=function(d){return I.apply(this,arguments)};r.filterObbsForModificationsSync=R;r.initialize=M;r.interpretObbModificationResults=function(d){return 0===d?0:1===d?1:2===d?2:3};r.process=function(d){return q.apply(this,arguments)};r.setLegacySchema=function(d){return J.apply(this,arguments)};r.setModifications=
function(d){return F.apply(this,arguments)};r.setModificationsSync=m;r.test=fa;Object.defineProperty(r,"__esModule",{value:!0})});