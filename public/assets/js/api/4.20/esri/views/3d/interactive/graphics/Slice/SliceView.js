// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.20/esri/copyright.txt for details.
//>>built
define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/tslib.es6 ../../../../../core/Accessor ../../../../../core/Handles ../../../../../core/maybe ../../../../../core/watchUtils ../../../../../core/accessorSupport/decorators/property ../../../../../core/has ../../../../../core/accessorSupport/ensureType ../../../../../core/Logger ../../../../../core/jsonMap ../../../../../core/accessorSupport/decorators/subclass ../../../../../chunks/mat4 ../../../../../chunks/vec3 ../../../../../geometry/support/vectorStacks ../../analysisTools/slice/sliceToolConfig ../../analysisTools/slice/sliceToolUtils ../../../webgl-engine/materials/lineStippleUtils".split(" "),
function(c,k,d,u,v,h,q,f,z,A,B,C,w,r,m,n,b,p,x){c.SliceView=function(t){function l(a){a=t.call(this,a)||this;a._handles=new v;a._gridVisualElement=null;a._outlineVisualElement=null;a.state="pending";return a}k._inheritsLoose(l,t);var g=l.prototype;g.initialize=function(){this._initialize()};g._initialize=function(){var a=k._asyncToGenerator(function*(){switch(this.state){case "destroyed":return;case "ready":throw Error("state error");}yield q.whenOnce(this.view,"ready",!0);if(h.isNone(this.layerView.layerViewData))throw Error("expected internal object to be valid");
this._gridVisualElement=p.createGridVisualElement(this.view);this._outlineVisualElement=p.createOutlineVisualElement(this.view);this._handles.add([this.analysis.watch("opacity",()=>this._updateMaterials(),!0)],"analysis");this._handles.add([this.layerView.watch("visible",()=>this._updateMaterials(),!0),this.layerView.layerViewData.watch("plane",()=>this._updatePlane(),!0),this.layerView.watch("active",()=>this._updateMaterials(),!0)],"internal");this._updatePlane();this._set("state","ready")});return function(){return a.apply(this,
arguments)}}();g.destroy=function(){switch(this.state){case "destroyed":case "pending":return}this._handles.destroy();this._gridVisualElement=h.destroyMaybe(this._gridVisualElement);this._outlineVisualElement=h.destroyMaybe(this._outlineVisualElement);this.set("view",null);this._set("state","destroyed")};g.whenReady=function(){var a=k._asyncToGenerator(function*(){yield q.whenOnce(this,"ready");return this});return function(){return a.apply(this,arguments)}}();g._update=function(){};g._updatePlane=
function(){var a=this.layerView.layerViewData.plane,e=h.isSome(a)?p.calculateBoundedPlaneTranslateRotate(a,n.sm4d.get()):null;this._outlineVisualElement.width=b.PLANE_OUTLINE_WIDTH;h.isSome(a)&&(a=m.set(n.sv3d.get(),m.length(a.basis1),m.length(a.basis2),1),a=r.fromScaling(n.sm4d.get(),a),e=r.multiply(a,e,a),this._outlineVisualElement.transform=e,this._gridVisualElement.transform=e);this._updateMaterials()};g._updateMaterials=function(){const a=this.layerView.layerViewData.plane&&this.analysis.visible;
var e=this.layerView.active;this._outlineVisualElement.color=[b.PLANE_OUTLINE_COLOR[0],b.PLANE_OUTLINE_COLOR[1],b.PLANE_OUTLINE_COLOR[2],b.PLANE_OUTLINE_COLOR[3]];this._outlineVisualElement.width=this.editable?b.PLANE_OUTLINE_WIDTH:b.PLANE_PREVIEW_OUTLINE_WIDTH;this._outlineVisualElement.stipplePattern=e?null:x.createStipplePatternSimple(5);e=[b.PLANE_BACKGROUND_COLOR[0],b.PLANE_BACKGROUND_COLOR[1],b.PLANE_BACKGROUND_COLOR[2],b.PLANE_BACKGROUND_COLOR[3]];const y=h.isSome(this.layerView.layerViewData)&&
this.showGrid?b.GRID_COLOR:[0,0,0,0];this._gridVisualElement.backgroundColor=e;this._gridVisualElement.gridColor=y;this._gridVisualElement.visible=a;this._outlineVisualElement.visible=a};k._createClass(l,[{key:"ready",get:function(){return"ready"===this.state}},{key:"showGrid",set:function(a){this._set("showGrid",a);this._updateMaterials()}},{key:"editable",set:function(a){this._set("editable",a);this._updateMaterials()}}]);return l}(u);d.__decorate([f.property({readOnly:!0})],c.SliceView.prototype,
"state",void 0);d.__decorate([f.property()],c.SliceView.prototype,"view",void 0);d.__decorate([f.property()],c.SliceView.prototype,"analysis",void 0);d.__decorate([f.property()],c.SliceView.prototype,"layerView",void 0);d.__decorate([f.property()],c.SliceView.prototype,"ready",null);d.__decorate([f.property({value:!1})],c.SliceView.prototype,"showGrid",null);d.__decorate([f.property({value:!0})],c.SliceView.prototype,"editable",null);c.SliceView=d.__decorate([w.subclass("esri.views.3d.interactive.graphics.Slice.SliceView")],
c.SliceView);Object.defineProperty(c,"__esModule",{value:!0})});