// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.20/esri/copyright.txt for details.
//>>built
define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/tslib.es6 ../../../../../core/HandleOwner ../../../../../core/mathUtils ../../../../../core/maybe ../../../../../core/accessorSupport/decorators/property ../../../../../core/has ../../../../../core/accessorSupport/ensureType ../../../../../core/Logger ../../../../../core/jsonMap ../../../../../core/accessorSupport/decorators/subclass ../../../../../core/accessorSupport/trackingUtils ../../../../../geometry/support/axisAngleDegrees ./undoRecords".split(" "),
function(b,p,d,q,h,r,e,w,x,y,z,t,u,k,v){b.ScaleRotateMeshAdapter=function(l){function g(a){a=l.call(this,a)||this;a.angle=0;a.scale=1;a.initialAngle=0;a.previousAngle=0;a.previousScale=1;return a}p._inheritsLoose(g,l);var f=g.prototype;f.initialize=function(){this.restart()};f.restart=function(){this.handles.remove("scale-heading-update-key");const a=this.geometry.transform;this.scale=1;if(r.isSome(a)){const c=k.axis(a.rotation)[2];.999999<Math.abs(c)&&(this.angle=h.deg2rad(k.angle(a.rotation))*Math.sign(c))}this.previousAngle=
this.initialAngle=this.angle;this.previousScale=this.scale;this.handles.add(u.reaction(()=>({angle:this.angle,scale:this.scale}),c=>this.update(c)),"scale-heading-update-key")};f.cancel=function(){this.scale=1;this.angle=this.initialAngle};f.createUndoRecord=function(){return v.createGraphicGeometryUndoRecord(this.graphic)};f.update=function({scale:a,angle:c}){const m=this.geometry.anchor,n=1===this.viewingMode;a!==this.previousScale&&(this.geometry.scale(a/this.previousScale,{origin:m,geographic:n}),
this.previousScale=a,this.graphic.notifyGeometryChanged());c!==this.previousAngle&&(this.geometry.rotate(0,0,h.rad2deg(c-this.previousAngle),{origin:m,geographic:n}),this.previousAngle=c,this.graphic.notifyGeometryChanged())};return g}(q.HandleOwner);d.__decorate([e.property({constructOnly:!0})],b.ScaleRotateMeshAdapter.prototype,"graphic",void 0);d.__decorate([e.property({constructOnly:!0})],b.ScaleRotateMeshAdapter.prototype,"geometry",void 0);d.__decorate([e.property({constructOnly:!0})],b.ScaleRotateMeshAdapter.prototype,
"viewingMode",void 0);d.__decorate([e.property()],b.ScaleRotateMeshAdapter.prototype,"angle",void 0);d.__decorate([e.property()],b.ScaleRotateMeshAdapter.prototype,"scale",void 0);b.ScaleRotateMeshAdapter=d.__decorate([t.subclass("esri.views.3d.interactive.editingTools.transformGraphic.ScaleRotateMeshAdapter")],b.ScaleRotateMeshAdapter);Object.defineProperty(b,"__esModule",{value:!0})});