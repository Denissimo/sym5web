// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.20/esri/copyright.txt for details.
//>>built
define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../chunks/mat4f64 ../../../../chunks/vec3 ../../../../chunks/vec3f64 ../../../../geometry/projection ./Geometry ./localOrigin ./Object3D ./WebGLLayer ../materials/RibbonLineMaterial".split(" "),function(q,v,w,x,t,y,z,A,r,B,C,D){let E=0,F=function(){function n(a){this._originSR=a;this.ROOT_ORIGIN_ID="rg_root_"+E++;this._origins=new Map;this._gridSize=125E4;this._objects=new Map}var u=n.prototype;u.getOrigin=
function(a){const c=this._origins.get(this.ROOT_ORIGIN_ID);if(null==c){if(w.isSome(p))return this._origins.set(this.ROOT_ORIGIN_ID,r.fromValues(p[0],p[1],p[2],this.ROOT_ORIGIN_ID)),this.getOrigin(a);a=r.fromValues(a[0]+Math.random()-.5,a[1]+Math.random()-.5,a[2]+Math.random()-.5,this.ROOT_ORIGIN_ID);this._origins.set(this.ROOT_ORIGIN_ID,a);return a}var e=this._gridSize;const m=Math.round(a[0]/e),l=Math.round(a[1]/e),f=Math.round(a[2]/e),h=`${"rg_"}${m}/${l}/${f}`;let g=this._origins.get(h);const k=
.5*e;t.subtract(b,a,c.vec3);b[0]=Math.abs(b[0]);b[1]=Math.abs(b[1]);b[2]=Math.abs(b[2]);if(b[0]<k&&b[1]<k&&b[2]<k)return g&&(e=Math.max(...b),t.subtract(b,a,g.vec3),b[0]=Math.abs(b[0]),b[1]=Math.abs(b[1]),b[2]=Math.abs(b[2]),Math.max(...b)<e)?g:c;g||(g=r.fromValues(m*e,l*e,f*e,h),this._origins.set(h,g));return g};u._drawOriginBox=function(a,c=[1,1,0,1]){const e=window.view,m=e._stage;var l=c.toString();if(!this._objects.has(l)){this._material=new D.RibbonLineMaterial({width:2,color:c});m.add(this._material);
c=new C.WebGLLayer({isPickable:!1});var f=new B.Object3D({castShadow:!1});m.add(f);c.add(f);m.add(c);this._objects.set(l,f)}l=this._objects.get(l);c=[0,1,5,4,0,2,1,7,6,2,0,1,3,7,5,4,6,2,0];f=c.length;const h=Array(3*f),g=new Uint16Array(2*(f-1)),k=.5*this._gridSize;for(let d=0;d<f;d++)h[3*d]=a[0]+(c[d]&1?k:-k),h[3*d+1]=a[1]+(c[d]&2?k:-k),h[3*d+2]=a[2]+(c[d]&4?k:-k),0<d&&(g[2*d]=d-1,g[2*d+1]=d);z.projectBuffer(h,this._originSR,0,h,e.renderSpatialReference,0,f);a=new A.Geometry([["position",{size:3,
data:h,exclusive:!0}]],[["position",g]],2);m.add(a);l.addGeometry(a,this._material,x.IDENTITY)};v._createClass(n,[{key:"test",get:function(){const a=this;return{get gridSize(){return a._gridSize},set gridSize(c){a._gridSize=c}}}}]);return n}(),p=null;const b=y.create();q.GridLocalOriginFactory=F;q.setTestRootOrigin=function(n){p=n};Object.defineProperty(q,"__esModule",{value:!0})});