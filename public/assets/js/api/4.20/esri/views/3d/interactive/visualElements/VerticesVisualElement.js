// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.20/esri/copyright.txt for details.
//>>built
define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../chunks/vec3 ../../../../chunks/vec3f64 ../../../../chunks/vec4 ../editingTools/settings ./Object3DVisualElement ../../layers/graphics/ElevationContext ../../layers/graphics/pointUtils ../../webgl-engine/lib/GeometryUtil ../../webgl-engine/materials/ShadedColorMaterial".split(" "),function(m,n,t,u,v,g,d,k,w,x,p,q){k=function(r){function h(a){var b=r.call(this,a)||this;b.view=null;b._renderOccluded=4;b._vertices=
null;b._spatialReference=null;b._color=d.settings.colorToVec4(d.settings.reshapeManipulators.vertex.color);b._size=d.settings.reshapeManipulators.vertex.size;b._outlineColor=d.settings.colorToVec4(d.settings.reshapeManipulators.vertex.outlineColor);b._outlineSize=d.settings.reshapeManipulators.vertex.outlineSize;b._elevationInfo=null;b.applyProps(a);return b}n._inheritsLoose(h,r);var c=h.prototype;c.updateMaterial=function(){this.attached&&this.vertexMaterial.setParameterValues(this.vertexMaterialParameters)};
c.updateOutlineMaterial=function(){this.attached&&this.vertexOutlineMaterial.setParameterValues(this.vertexOutlineMaterialParameters)};c.createRenderGeometries=function(){var a=this.vertices;if(t.isNone(a)||0===a.length)return[];var b=x.geometryToRenderInfo(a,this.spatialReference,this.view.elevationProvider,this.view.renderCoordsHelper,w.ElevationContext.fromElevationInfo(this.elevationInfo));a=[];const l=b.numVertices;b=b.position;for(let f=0;f<l;++f){var e=u.set(y,b[3*f],b[3*f+1],b[3*f+2]);const z=
p.createSphereGeometry(.5,16,16,{offset:e});e=p.createSphereGeometry(.5,16,16,{offset:e});a.push({vertexGeometry:z,vertexOutlineGeometry:e})}return a};c.createGeometries=function(a){const b=this.createRenderGeometries();for(const {vertexGeometry:l,vertexOutlineGeometry:e}of b)a.addGeometry(l,this.vertexMaterial),a.addGeometry(e,this.vertexOutlineMaterial)};c.createExternalResources=function(){this.vertexMaterial=new q.ShadedColorMaterial({...this.vertexMaterialParameters,writeDepth:!0,cullFace:2,
screenSizeEnabled:!0});this.vertexOutlineMaterial=new q.ShadedColorMaterial({...this.vertexOutlineMaterialParameters,transparent:!0,writeDepth:!0,cullFace:1,screenSizeEnabled:!0,shadingEnabled:!1})};c.destroyExternalResources=function(){this.vertexOutlineMaterial=this.vertexMaterial=null};c.forEachExternalMaterial=function(a){a(this.vertexMaterial);a(this.vertexOutlineMaterial)};n._createClass(h,[{key:"renderOccluded",get:function(){return this._renderOccluded},set:function(a){a!==this._renderOccluded&&
(this._renderOccluded=a,this.updateMaterial(),this.updateOutlineMaterial())}},{key:"vertices",get:function(){return this._vertices},set:function(a){this._vertices=a;this.recreateGeometry()}},{key:"spatialReference",get:function(){return this._spatialReference},set:function(a){this._spatialReference=a;this.recreateGeometry()}},{key:"color",get:function(){return this._color},set:function(a){g.exactEquals(a,this._color)||(g.copy(this._color,a),this.updateMaterial())}},{key:"size",get:function(){return this._size},
set:function(a){a!==this._size&&(this._size=a,this.updateMaterial())}},{key:"outlineColor",get:function(){return this._outlineColor},set:function(a){g.exactEquals(a,this._outlineColor)||(g.copy(this._outlineColor,a),this.updateOutlineMaterial())}},{key:"outlineSize",get:function(){return this._outlineSize},set:function(a){a!==this._outlineSize&&(this._outlineSize=a,this.updateOutlineMaterial())}},{key:"elevationInfo",get:function(){return this._elevationInfo},set:function(a){this._elevationInfo=a;
this.recreateGeometry()}},{key:"vertexMaterialParameters",get:function(){return{color:this._color,transparent:1>this._color[3],screenSize:this.size,renderOccluded:this._renderOccluded}}},{key:"vertexOutlineMaterialParameters",get:function(){return{color:this._outlineColor,transparent:1>this._outlineColor[3],screenSize:this.size+2*this.outlineSize,renderOccluded:this._renderOccluded}}}]);return h}(k.Object3DVisualElement);const y=v.create();m.VerticesVisualElement=k;Object.defineProperty(m,"__esModule",
{value:!0})});