// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.20/esri/copyright.txt for details.
//>>built
define(["../../../../core/maybe","./glUtil3D","../shaders/CompositingTechnique","../../../webgl/Util"],function(l,p,k,m){let q=function(){function n(b,a){this._rctx=b;this._techniqueRepository=a}var f=n.prototype;f.dispose=function(){this._vao=l.disposeMaybe(this._vao)};f.compositeTransparent=function(b,a,g,c=1){const e=this._rctx;d.alphaMode=1;d.function=2;d.hasOpacityFactor=1!==c;c=this._techniqueRepository.acquire(k.CompositingTechnique,d);e.useProgram(c.program);c.bindPipelineState(e);c.program.bindTexture(b,
"colorTexture");c.program.bindTexture(a,"alphaTexture");c.program.bindTexture(g,"frontFaceTexture");b=this.ensureVAO();e.bindVAO(b);e.drawArrays(5,0,m.vertexCount(b,"geometry"));c.release()};f.compositeSpecial=function(b,a){this.composite(b,0,1,a)};f.composite=function(b,a=0,g=1,c=0,e=0){const h=this._rctx;d.alphaMode=a;d.function=c;d.hasOpacityFactor=1!==g;a=this._techniqueRepository.acquire(k.CompositingTechnique,d);h.useProgram(a.program);a.bindPipelineState(h);a.program.bindTexture(b,"tex");d.hasOpacityFactor&&
a.program.setUniform1f("opacity",g);3===c&&a.program.setUniform1i("overlayIdx",e);b=this.ensureVAO();h.bindVAO(b);h.drawArrays(5,0,m.vertexCount(b,"geometry"));a.release()};f.ensureVAO=function(){l.isNone(this._vao)&&(this._vao=p.createQuadVAO(this._rctx));return this._vao};return n}();const d=new k.CompositingTechniqueConfiguration;return q});