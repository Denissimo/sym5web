// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.20/esri/copyright.txt for details.
//>>built
define("../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/tslib.es6 ../../../../../core/Handles ../../../../../core/accessorSupport/decorators/property ../../../../../core/has ../../../../../core/accessorSupport/ensureType ../../../../../core/Logger ../../../../../core/jsonMap ../../../../../core/accessorSupport/decorators/subclass ./AreaMeasurement3DController ./AreaMeasurement3DModel ./AreaMeasurement3DView ../../../../interactive/InteractiveToolBase".split(" "),function(h,e,
l,f,b,t,u,v,m,n,p,q,r){b=function(k){function g(a){var d=k.call(this,a)||this;d._handles=new l;d.model=new p({sceneView:a.view});d.measurementView=new q({model:d.model,unit:a.unit,manipulators:d.manipulators});return d}h._inheritsLoose(g,k);var c=g.prototype;c.initialize=function(){this.measurementView.when().then(()=>this._initialize())};c._initialize=function(){switch(this.toolState){case "destroyed":return}this._controller=new n(this.model,this.measurementView,this.manipulators);this.visible&&
this.measurementView.show();const a=this.watch("state",d=>{switch(d){case "measured":this.complete();break;default:this.finishToolCreation()}});this._handles.add(a);"measured"===this.state?this.complete():this.startToolCreation()};c.destroy=function(){switch(this.toolState){case "pending":this.measurementView.destroy();this._set("measurementView",null);this.model.destroy();this._set("model",null);break;case "creating":case "created":this.detach(),this.measurementView.destroy(),this._set("measurementView",
null),this.model.destroy(),this._set("model",null),this._controller.destroy(),this._controller=null,this._handles.destroy(),this._handles=null}};c.activate=function(){this.model.active=!0};c.deactivate=function(){switch(this.toolState){case "created":case "creating":case "pending":this.model.active=!1}};c.onShow=function(){this.created&&this.measurementView.show()};c.onHide=function(){this.created&&this.measurementView.hide()};c.onDetach=function(){switch(this.toolState){case "created":case "creating":this.measurementView.path.clear(),
this.measurementView.cursorPoint=null,this.model.state="initial"}};c.onInputEvent=function(a){this._controller.handleInputEvent(a)};h._createClass(g,[{key:"state",get:function(){switch(this.model.state){case "initial":return 1<=this.measurementView.path.numVertices?"measuring":"ready";case "drawing":case "editing":return"measuring";case "measured":return"measured"}}},{key:"isSupported",get:function(){return"3d"===this.get("view.type")}},{key:"cursor",get:function(){switch(this.toolState){case "destroyed":break;
default:if(this.model.active&&("initial"===this.model.state||"drawing"===this.model.state))return"crosshair"}return null}},{key:"unit",set:function(a){this._set("unit",a);"ready"===this.measurementView.state&&(this.measurementView.layerView.unit=a)}}]);return g}(r.InteractiveToolBase);e.__decorate([f.property({readOnly:!0})],b.prototype,"state",null);e.__decorate([f.property({readOnly:!0})],b.prototype,"isSupported",null);e.__decorate([f.property({readOnly:!0})],b.prototype,"cursor",null);e.__decorate([f.property()],
b.prototype,"unit",null);e.__decorate([f.property({constructOnly:!0})],b.prototype,"model",void 0);e.__decorate([f.property({constructOnly:!0})],b.prototype,"measurementView",void 0);return b=e.__decorate([m.subclass("esri.views.3d.interactive.measurementTools.areaMeasurement3D.AreaMeasurement3DTool")],b)});