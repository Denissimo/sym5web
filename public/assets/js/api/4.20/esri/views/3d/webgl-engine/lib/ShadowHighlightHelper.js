// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.20/esri/copyright.txt for details.
//>>built
define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../chunks/vec4f32 ./glUtil3D ../shaders/ShadowHighlightTechnique ../../../webgl/Util".split(" "),function(e,g,f,h,k,l,m){let n=function(){function c(a,d){this._rctx=a;this._maxOpacity=1;this._defaultOptions={shadowColor:h.fromValues(1,0,1,1),shadowOpacity:.2,occludedShadowOpacity:.1};this._technique=new l.ShadowHighlightTechnique({rctx:a,viewingMode:d},null);this._vao=k.createQuadVAO(this._rctx)}var b=c.prototype;
b.render=function(a,d){a.shadowMap.enabled&&a.linearDepthTexture&&this.isVisible&&(this._rctx.bindFramebuffer(d),this._rctx.useProgram(this._technique.program),this._technique.bindPipelineState(this._rctx),this._technique.bindPass(this._defaultOptions,a),this._rctx.bindVAO(this._vao),this._rctx.drawArrays(this._technique.primitiveType,0,m.vertexCount(this._vao,"geometry")))};b.getGpuMemoryUsage=function(){return this._vao?this._vao.size:0};b.setDefaultOptions=function(a){this._defaultOptions=a;this._updateMaxOpacity()};
b.dispose=function(){this._vao=f.disposeMaybe(this._vao);this._technique=f.disposeMaybe(this._technique)};b._updateMaxOpacity=function(){const a=this._defaultOptions;this._maxOpacity=Math.max(a.shadowOpacity,a.occludedShadowOpacity)*a.shadowColor[3]};g._createClass(c,[{key:"highlightShadowMapSlot",get:function(){return this._technique.highlightShadowMapSlot}},{key:"defaultSnapshotSlot",get:function(){return this._technique.defaultSnapshotSlot}},{key:"isVisible",get:function(){return.001953125<=this._maxOpacity*
this._technique.opacityElevation*this._technique.dayNightTerminator}}]);return c}();e.ShadowHighlightHelper=n;Object.defineProperty(e,"__esModule",{value:!0})});