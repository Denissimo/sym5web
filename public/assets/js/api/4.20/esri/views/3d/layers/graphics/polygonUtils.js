// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.20/esri/copyright.txt for details.
//>>built
define("exports ../../../../geometry ../../../../core/maybe ../../../../geometry/projection ../../../../geometry/support/triangulationUtils ./elevationAlignmentUtils ../../terrain/OverlayRenderer ../../webgl-engine/lib/Geometry ../../../../geometry/Extent ../../../../geometry/Polygon".split(" "),function(g,A,h,r,l,t,u,m,v,w){function n(a,c,b){const f=[];for(const {index:d,count:e}of a){if(1>=e)continue;a=3*d;const k=a+3*e;f.push({index:d,count:e,position:c.subarray(a,k),mapPosition:b?b.subarray(a,
k):void 0})}return f}function p(a,c,b){const f=[];for(const {index:d,count:e,holeIndices:k,pathLengths:x}of a){if(1>=e)continue;a=3*d;const q=a+3*e,z=k.map(y=>y-d);f.push({index:d,count:e,holeIndices:z,pathLengths:x,position:c.subarray(a,q),mapPosition:b?b.subarray(a,q):void 0})}return f}g.createColorGeometry=function(a){const c=[["position",a.indices]],b=[["position",{size:3,data:a.attributeData.position,exclusive:!0}]];h.isSome(a.attributeData.color)&&(b.push(["color",{size:4,data:a.attributeData.color,
exclusive:!0}]),c.push(["color",new Uint32Array(a.indices.length)]));h.isSome(a.attributeData.uvMapSpace)&&(b.push(["uvMapSpace",{size:4,data:a.attributeData.uvMapSpace,exclusive:!0}]),c.push(["uvMapSpace",a.indices]));h.isSome(a.attributeData.boundingRect)&&(b.push(["boundingRect",{size:9,data:a.attributeData.boundingRect,exclusive:!0}]),c.push(["boundingRect",a.indices]));h.isSome(a.attributeData.mapPosition)&&(b.push(["mapPos",{size:3,data:a.attributeData.mapPosition,exclusive:!0}]),c.push(["mapPos",
a.indices]));return new m.Geometry(b,c)};g.createWaterGeometry=function(a){const c=[["position",a.indices],["uv0",a.indices]],b=[["position",{size:3,data:a.attributeData.position,exclusive:!0}],["uv0",{size:2,data:a.attributeData.uv0,exclusive:!0}]];h.isSome(a.attributeData.mapPosition)&&(b.push(["mapPos",{size:3,data:a.attributeData.mapPosition,exclusive:!0}]),c.push(["mapPos",a.indices]));return new m.Geometry(b,c)};g.geometryAsPolygon=function(a){switch(a.type){case "extent":if(a instanceof v)return w.fromExtent(a);
break;case "polygon":return a}return null};g.geometryToRenderInfo=function(a,c,b,f){const d=l.pathsToTriangulationInfo(a.rings,a.hasZ,1),e=new Float64Array(d.position.length);a=t.applyPerVertexElevationAlignment(d.position,a.spatialReference,0,e,0,d.position,0,d.position.length/3,c,b,f);c=null!=a;return{position:d.position,mapPosition:e,polygons:p(d.polygons,d.position,e),outlines:n(d.outlines,d.position,e),projectionSuccess:c,sampledElevation:a}};g.geometryToRenderInfoDraped=function(a,c){const b=
l.pathsToTriangulationInfo(a.rings,!1,1);a=r.projectBuffer(b.position,a.spatialReference,0,b.position,c,0,b.position.length/3);for(c=2;c<b.position.length;c+=3)b.position[c]=u.DRAPED_Z;return{position:b.position,polygons:p(b.polygons,b.position),outlines:n(b.outlines,b.position),projectionSuccess:a}};Object.defineProperty(g,"__esModule",{value:!0})});