// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.20/esri/copyright.txt for details.
//>>built
define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../Graphic ../../../core/maybe ../../../core/workers/WorkerHandle ../../../geometry/SpatialReference ../../../layers/support/Field".split(" "),function(g,k,l,m,n,h,p){let t=function(){function e(a){this._schedule=a;this._handle=new q(a)}var c=e.prototype;c.destroy=function(){this._handle.destroy()};c.invoke=function(a,r){if(!a.buffer||0===a.buffer.byteLength)return Promise.resolve(null);a.options.sourceSpatialReference&&a.options.sourceSpatialReference instanceof
h&&(a.options={...a.options,sourceSpatialReference:a.options.sourceSpatialReference.toJSON()});return this._handle.invoke(a,r).then(b=>this._schedule(()=>{b.spatialReference=h.fromJSON(b.spatialReference);if(b.fields)for(var d=0;d<b.fields.length;d++)b.fields[d]=p.fromJSON(b.fields[d]);d=b.spatialReference;for(const f of b.features)f.uid=l.generateUID(),m.isSome(f.geometry)&&(f.geometry.spatialReference=d);return b}))};return e}(),q=function(e){function c(a){return e.call(this,"PBFDecoderWorker",
"_parseFeatureQuery",a)||this}k._inheritsLoose(c,e);c.prototype.getTransferList=function(a){return[a.buffer]};return c}(n.WorkerHandle);g.PBFDecoder=t;Object.defineProperty(g,"__esModule",{value:!0})});