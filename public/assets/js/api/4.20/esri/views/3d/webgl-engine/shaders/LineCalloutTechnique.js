// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.20/esri/copyright.txt for details.
//>>built
define("require exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../core/shaderLibrary/Slice.glsl ../core/shaderLibrary/attributes/VerticalOffset.glsl ../core/shaderLibrary/hud/HUD.glsl ../core/shaderLibrary/shading/MultipassGeometryTest.glsl ../core/shaderLibrary/util/View.glsl ../core/shaderTechnique/ReloadableShaderModule ../core/shaderTechnique/ShaderTechnique ../core/shaderTechnique/ShaderTechniqueConfiguration ../lib/DefaultVertexAttributeLocations ../lib/Program ../materials/internal/MaterialUtil ../../../../chunks/LineCallout.glsl ../../../webgl/renderState".split(" "),
function(t,p,q,g,u,v,w,x,m,d,n,e,y,z,A,r,l){n=function(k){function f(){return k.apply(this,arguments)||this}q._inheritsLoose(f,k);var c=f.prototype;c.initializeProgram=function(b){var a=f.shader.get();const h=this.configuration;a=a.build({occlusionTestEnabled:h.occlusionTestEnabled,verticalOffsetEnabled:h.verticalOffset,screenSizePerspectiveEnabled:h.screenSizePerspective,depthHudEnabled:h.depthHudEnabled,depthHudAlignStartEnabled:h.depthHudAlignStartEnabled,screenCenterOffsetUnitsEnabled:h.screenCenterOffsetUnitsEnabled,
slicePlaneEnabled:h.slicePlaneEnabled,sliceHighlightDisabled:!1,sliceEnabledForVertexPrograms:!0,viewingMode:b.viewingMode,isDraped:!1,multipassGeometryEnabled:h.multipassGeometryEnabled});return new z.Program(b.rctx,a,y.Default3D)};c.bindPass=function(b,a){m.bindProjectionMatrix(this.program,a.camera.projectionMatrix);r.LineCallout.bindUniforms(this.program,b,a.camera.pixelRatio||1);v.bindVerticalOffsetUniforms(this.program,b,a);w.bindHUDUniforms(this.program,a);this.program.setUniform2fv("cameraNearFar",
a.camera.nearFar);this.program.setUniform2fv("inverseViewport",a.inverseViewport);x.bindMultipassGeometryTexture(this.program,a);this.program.bindTexture(a.hudVisibilityTexture,"hudVisibilityTexture");this.program.setUniform1f("cameraGroundRelative",a.camera.aboveGround?1:-1);this.program.setUniform1f("polygonOffset",b.shaderPolygonOffset);m.bindViewport(this.program,a);this.program.setUniform1f("perDistancePixelRatio",Math.tan(a.camera.fovY/2)/(a.camera.fullViewport[2]/2));this.program.setUniformMatrix4fv("viewNormal",
a.camera.viewInverseTransposeMatrix);this.program.setUniform2f("pixelToNDC",2/a.camera.fullViewport[2],2/a.camera.fullViewport[3]);this.program.setUniform1f("lineSize",Math.ceil(b.size)*(a.camera.pixelRatio||1));A.bindScreenSizePerspective(b.screenSizePerspective,this.program,"screenSizePerspectiveAlignment")};c.bindDraw=function(b){m.bindView(this.program,b);m.bindCameraPosition(this.program,b.origin,b.camera.viewInverseTransposeMatrix);u.bindSliceUniformsWithOrigin(this.program,this.configuration,
b);this.program.rebindTextures()};c.setPipelineState=function(b){b=b?519:513;return this.configuration.depthHudEnabled?l.makePipelineState({depthTest:{func:b},depthWrite:l.defaultDepthWriteParams}):l.makePipelineState({blending:l.separateBlendingParams(1,770,771,771),depthTest:{func:b},colorWrite:l.defaultColorWriteParams})};c.initializePipeline=function(){return this.setPipelineState(this.configuration.multipassGeometryEnabled)};return f}(n.ShaderTechnique);n.shader=new d.ReloadableShaderModule(r.LineCalloutShader,
()=>new Promise(function(k,f){t(["./LineCallout.glsl"],k,f)}));d=function(k){function f(){var c=k.apply(this,arguments)||this;c.occlusionTestEnabled=!0;c.verticalOffset=!1;c.screenSizePerspective=!1;c.depthHudEnabled=!1;c.depthHudAlignStartEnabled=!1;c.screenCenterOffsetUnitsEnabled=0;c.slicePlaneEnabled=!1;c.multipassGeometryEnabled=!1;return c}q._inheritsLoose(f,k);return f}(e.ShaderTechniqueConfiguration);g.__decorate([e.parameter()],d.prototype,"occlusionTestEnabled",void 0);g.__decorate([e.parameter()],
d.prototype,"verticalOffset",void 0);g.__decorate([e.parameter()],d.prototype,"screenSizePerspective",void 0);g.__decorate([e.parameter()],d.prototype,"depthHudEnabled",void 0);g.__decorate([e.parameter()],d.prototype,"depthHudAlignStartEnabled",void 0);g.__decorate([e.parameter({count:2})],d.prototype,"screenCenterOffsetUnitsEnabled",void 0);g.__decorate([e.parameter()],d.prototype,"slicePlaneEnabled",void 0);g.__decorate([e.parameter()],d.prototype,"multipassGeometryEnabled",void 0);p.LineCalloutTechnique=
n;p.LineCalloutTechniqueConfiguration=d;Object.defineProperty(p,"__esModule",{value:!0})});