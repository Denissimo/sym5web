// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.20/esri/copyright.txt for details.
//>>built
define("require exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../core/shaderLibrary/Slice.glsl ../core/shaderLibrary/shading/MultipassTerrainTest.glsl ../core/shaderLibrary/util/View.glsl ../core/shaderTechnique/ReloadableShaderModule ../core/shaderTechnique/ShaderTechnique ../core/shaderTechnique/ShaderTechniqueConfiguration ../lib/DefaultVertexAttributeLocations ../lib/OrderIndependentTransparency ../lib/Program ../lib/StencilUtils ../../../../chunks/ImageMaterial.glsl ../../../webgl/renderState".split(" "),
function(v,p,t,g,w,x,u,d,m,e,y,n,z,q,A,l){m=function(k){function h(){return k.apply(this,arguments)||this}t._inheritsLoose(h,k);var a=h.prototype;a.initializeProgram=function(b){var f=h.shader.get();const c=this.configuration;f=f.build({output:c.output,slicePlaneEnabled:c.slicePlaneEnabled,sliceHighlightDisabled:!1,sliceEnabledForVertexPrograms:!1,OITEnabled:0===c.transparencyPassType,multipassTerrainEnabled:c.multipassTerrainEnabled,cullAboveGround:c.cullAboveGround});return new z.Program(b.rctx,
f,y.Default3D)};a.bindPass=function(b,f){u.bindProjectionMatrix(this.program,f.camera.projectionMatrix);this.program.setUniform1f("opacity",b.opacity);f.multipassTerrainEnabled&&(this.program.setUniform2fv("cameraNearFar",f.camera.nearFar),this.program.setUniform2fv("inverseViewport",f.inverseViewport),x.bindMultipassTerrainTexture(this.program,f))};a.bindDraw=function(b){u.bindView(this.program,b);w.bindSliceUniformsWithOrigin(this.program,this.configuration,b);this.program.rebindTextures()};a.setPipelineState=
function(b,f){const c=this.configuration,r=3===b,B=2===b;return l.makePipelineState({blending:0!==c.output&&7!==c.output||!c.transparent?null:r?C:n.OITBlending(b),culling:l.cullingParams(c.cullFace),depthTest:{func:n.OITDepthTest(b)},depthWrite:r?c.writeDepth&&l.defaultDepthWriteParams:n.OITDepthWrite(b),colorWrite:l.defaultColorWriteParams,stencilWrite:c.sceneHasOcludees?q.stencilWriteMaskOn:null,stencilTest:c.sceneHasOcludees?f?q.stencilToolMaskBaseParams:q.stencilBaseAllZerosParams:null,polygonOffset:r||
B?null:n.getOITPolygonOffset(c.enableOffset)})};a.initializePipeline=function(){this._occludeePipelineState=this.setPipelineState(this.configuration.transparencyPassType,!0);return this.setPipelineState(this.configuration.transparencyPassType,!1)};a.getPipelineState=function(b){return b?this._occludeePipelineState:this.pipeline};return h}(m.ShaderTechnique);m.shader=new d.ReloadableShaderModule(A.ImageMaterialShader,()=>new Promise(function(k,h){v(["./ImageMaterial.glsl"],k,h)}));const C=l.simpleBlendingParams(1,
771);d=function(k){function h(){var a=k.apply(this,arguments)||this;a.output=0;a.cullFace=0;a.slicePlaneEnabled=!1;a.transparent=!1;a.enableOffset=!0;a.writeDepth=!0;a.sceneHasOcludees=!1;a.transparencyPassType=3;a.multipassTerrainEnabled=!1;a.cullAboveGround=!1;return a}t._inheritsLoose(h,k);return h}(e.ShaderTechniqueConfiguration);g.__decorate([e.parameter({count:8})],d.prototype,"output",void 0);g.__decorate([e.parameter({count:3})],d.prototype,"cullFace",void 0);g.__decorate([e.parameter()],
d.prototype,"slicePlaneEnabled",void 0);g.__decorate([e.parameter()],d.prototype,"transparent",void 0);g.__decorate([e.parameter()],d.prototype,"enableOffset",void 0);g.__decorate([e.parameter()],d.prototype,"writeDepth",void 0);g.__decorate([e.parameter()],d.prototype,"sceneHasOcludees",void 0);g.__decorate([e.parameter({count:4})],d.prototype,"transparencyPassType",void 0);g.__decorate([e.parameter()],d.prototype,"multipassTerrainEnabled",void 0);g.__decorate([e.parameter()],d.prototype,"cullAboveGround",
void 0);p.ImageMaterialTechnique=m;p.ImageMaterialTechniqueConfiguration=d;Object.defineProperty(p,"__esModule",{value:!0})});