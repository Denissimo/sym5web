// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.20/esri/copyright.txt for details.
//>>built
define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/vec2f32 ../../support/buffer/InterleavedLayout ../lib/GLMaterial ../lib/Material ./internal/bufferWriterUtils ../shaders/LineCalloutTechnique".split(" "),function(m,g,f,q,r,n,k,l){let w=function(d){function c(a){a=d.call(this,a,t)||this;a.techniqueConfig=new l.LineCalloutTechniqueConfiguration;a._uniqueMaterialIdentifier=c.uniqueMaterialIdentifier(a.params);return a}g._inheritsLoose(c,d);var b=c.prototype;b.dispose=function(){};
b.getGLMaterial=function(a){return 0===a.output?new u(a):void 0};b.getPassParameters=function(){return this.params};b.getTechniqueConfig=function(a,e){this.techniqueConfig.occlusionTestEnabled=this.params.occlusionTest;this.techniqueConfig.verticalOffset=!!this.params.verticalOffset;this.techniqueConfig.screenSizePerspective=!!this.params.screenSizePerspective;this.techniqueConfig.depthHudEnabled=a;this.techniqueConfig.depthHudAlignStartEnabled=!!this.params.depthHUDAlignStart;this.techniqueConfig.screenCenterOffsetUnitsEnabled=
"screen"===this.params.centerOffsetUnits?1:0;this.techniqueConfig.slicePlaneEnabled=this.params.slicePlaneEnabled;this.techniqueConfig.multipassGeometryEnabled=e?e.multipassGeometryEnabled:!1;return this.techniqueConfig};b.intersect=function(){};b.createBufferWriter=function(){return new v};b.validateParameterValues=function(a){a=c.uniqueMaterialIdentifier(a);a!==this._uniqueMaterialIdentifier&&(this._uniqueMaterialIdentifier=a)};c.uniqueMaterialIdentifier=function(a){return JSON.stringify({screenOffset:a.screenOffset||
[0,0],centerOffsetUnits:a.centerOffsetUnits||"world"})};g._createClass(c,[{key:"uniqueMaterialIdentifier",get:function(){return this._uniqueMaterialIdentifier}}]);return c}(n.Material),u=function(d){function c(a){a=d.call(this,a)||this;a._isRenderSlot=!0;a.updateParameters();return a}g._inheritsLoose(c,d);var b=c.prototype;b.updateParameters=function(a){this._technique=this._techniqueRep.releaseAndAcquire(l.LineCalloutTechnique,this._material.getTechniqueConfig(!1,a),this._technique);this._depthTechnique=
this._techniqueRep.releaseAndAcquire(l.LineCalloutTechnique,this._material.getTechniqueConfig(!0,a),this._depthTechnique)};b.beginSlot=function(a){switch(a){case 20:return this._isRenderSlot=!0;case 21:return this._isRenderSlot=!1,!0}return!1};b.ensureParameters=function(a){this.updateParameters(a)};b.bind=function(a){this.technique.bindPass(this._material.getPassParameters(),a)};g._createClass(c,[{key:"technique",get:function(){return this._isRenderSlot?this._technique:this._depthTechnique}}]);return c}(r);
const t={verticalOffset:null,screenSizePerspective:null,screenOffset:[0,0],color:[0,0,0,1],size:1,borderColor:null,occlusionTest:!1,shaderPolygonOffset:1E-5,depthHUDAlignStart:!1,centerOffsetUnits:"world",slicePlaneEnabled:!1,...n.materialParametersDefaults},x=q.newLayout().vec3f("position").vec3f("normal").vec2f("uv0").vec4f("auxpos1"),p=[f.fromValues(0,0),f.fromValues(1,0),f.fromValues(0,1),f.fromValues(1,0),f.fromValues(1,1),f.fromValues(0,1)];let v=function(){function d(){this.vertexBufferLayout=
x}var c=d.prototype;c.allocate=function(b){return this.vertexBufferLayout.createBuffer(b)};c.elementCount=function(b){return 6*b.indices.get("position").length};c.write=function(b,a,e,h){k.writePosition(a.indices.get("position"),a.vertexAttributes.get("position").data,b.transformation,e.position,h,6);k.writeNormal(a.indices.get("normal"),a.vertexAttributes.get("normal").data,b.invTranspTransformation,e.normal,h,6);k.writeBufferVec4(a.indices.get("auxpos1"),a.vertexAttributes.get("auxpos1").data,e.auxpos1,
h,6);for(b=0;b<p.length;++b)e.uv0.setVec(h+b,p[b])};return d}();m.LineCalloutMaterial=w;Object.defineProperty(m,"__esModule",{value:!0})});