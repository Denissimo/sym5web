// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.20/esri/copyright.txt for details.
//>>built
define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/clock ../InputHandler ./SingleAndDoubleClick ./support".split(" "),function(p,q,r,k,h,t){k=function(l){function m(a=h.DefaultParameters.maximumDoubleClickDelay,c=h.DefaultParameters.maximumDoubleClickDistance,f=h.DefaultParameters.maximumDoubleTouchDelay,d=h.DefaultParameters.maximumDoubleTouchDistance,n=r["default"]){var b=l.call(this,!1)||this;b.maximumDoubleClickDelay=a;b.maximumDoubleClickDistance=c;b.maximumDoubleTouchDelay=
f;b.maximumDoubleTouchDistance=d;b._clock=n;b._pointerState=new Map;b._immediateDoubleClick=b.registerOutgoing("immediate-double-click");b.registerIncoming("pointer-down",b._handlePointerDown.bind(q._assertThisInitialized(b)));b.registerIncoming("pointer-up",g=>{b._handlePointerLoss(g,"pointer-up")});b.registerIncoming("pointer-capture-lost",g=>{b._handlePointerLoss(g,"pointer-capture-lost")});b.registerIncoming("pointer-cancel",g=>{b._handlePointerLoss(g,"pointer-cancel")});return b}q._inheritsLoose(m,
l);var e=m.prototype;e.onUninstall=function(){this._pointerState.forEach(a=>{a.immediateDoubleClick&&a.immediateDoubleClick.timeoutHandle.remove()});l.prototype.onUninstall.call(this)};e._handlePointerDown=function(a){a=a.data;const c=this._pointerId(a);this._pointerState.has(c)||(this._pointerState.set(c,{downButton:a.native.button,immediateDoubleClick:null}),this.startCapturingPointer(a.native))};e._handlePointerLoss=function(a,c){const f=a.data;var d=this._pointerId(f);if((d=this._pointerState.get(d))&&
"pointer-up"===c&&d.downButton===f.native.button)if(c=d.immediateDoubleClick){c.timeoutHandle.remove();const n="touch"===a.data.native.pointerType?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;t.manhattanDistance(c,a.data)>n?this._startImmediateDoubleClick(a,d):(this._immediateDoubleClick.emit(a.data,void 0,c.modifiers),this._removeState(f))}else this._startImmediateDoubleClick(a,d)};e._startImmediateDoubleClick=function(a,c){c.immediateDoubleClick={x:a.data.x,y:a.data.y,modifiers:a.modifiers,
timeoutHandle:this._clock.setTimeout(()=>this._removeState(a.data),"touch"===a.data.native.pointerType?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay)}};e._pointerId=function(a){a=a.native;return"mouse"===a.pointerType?`${a.pointerId}:${a.button}`:`${a.pointerType}`};e._removeState=function(a){const c=this._pointerId(a);this._pointerState.delete(c);this.stopCapturingPointer(a.native);this.refreshHasPendingInputs()};return m}(k.InputHandler);p.ImmediateDoubleClick=k;Object.defineProperty(p,
"__esModule",{value:!0})});