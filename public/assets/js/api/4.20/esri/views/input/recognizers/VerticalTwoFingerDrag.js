// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.20/esri/copyright.txt for details.
//>>built
define(["exports","../../../chunks/_rollupPluginBabelHelpers","../DragEventSeparator","../InputHandler"],function(r,t,v,l){l=function(u){function k(c=20,a=40){var b=u.call(this,!1)||this;b._threshold=c;b._maxDelta=a;b.state="ready";b.emittedArtificalEnd2=!1;b._vertical=b.registerOutgoing("vertical-two-finger-drag");b._artificalDrag=b.registerOutgoing("drag");b.dragEventSeparator=new v.DragEventSeparator({start:(e,d)=>b.observeStart(e,d),update:(e,d,g)=>b.observeUpdate(e,d,g),end:(e,d)=>b.observeEnd(d)});
b.registerIncoming("drag",e=>b.dragEventSeparator.handle(e));return b}t._inheritsLoose(k,u);var h=k.prototype;h.observeStart=function(c,a){1===c&&this.emittedArtificalEnd2&&(this.emittedArtificalEnd2=!1,this._artificalDrag.emit({action:"start",button:a.data.button,buttons:a.data.buttons,pointerType:a.data.pointerType,timestamp:a.data.timestamp,pointers:a.data.pointers,pointer:a.data.pointer,angle:a.data.angle,radius:a.data.radius,center:a.data.center}),a.stopPropagation());this.state=2===c?"ready":
"failed"};h.observeUpdate=function(c,a,b){"failed"!==this.state&&2===c&&("active"===this.state?(this._vertical.emit({delta:a.data.center.y-this._thresholdReachedCenter.y,action:"update"}),a.stopPropagation()):this.checkMovementWithinLimits(a.data,b.data)?this.checkVerticalThresholdReached(a.data,b.data)&&(this.state="active",this.emittedArtificalEnd2=!0,this._thresholdReachedCenter=a.data.center,this._artificalDrag.emit({action:"end",button:a.data.button,buttons:a.data.buttons,pointerType:a.data.pointerType,
timestamp:a.data.timestamp,pointers:a.data.pointers,pointer:a.data.pointer,angle:a.data.angle,radius:a.data.radius,center:a.data.center}),this._vertical.emit({delta:a.data.center.y-this._thresholdReachedCenter.y,action:"begin"}),a.stopPropagation()):this.state="failed")};h.observeEnd=function(c){"active"===this.state&&(this._vertical.emit({delta:c.data.center.y-this._thresholdReachedCenter.y,action:"end"}),this.state="ready",c.stopPropagation())};h.checkMovementWithinLimits=function(c,a){let b=-Infinity,
e=Infinity,d=-Infinity,g=Infinity;a.pointers.forEach(f=>{b=Math.max(b,f.x);e=Math.min(e,f.x);d=Math.max(d,f.y);g=Math.min(g,f.y)});let m=-Infinity,n=Infinity,p=-Infinity,q=Infinity;c.pointers.forEach(f=>{m=Math.max(m,f.x);n=Math.min(n,f.x);p=Math.max(p,f.y);q=Math.min(q,f.y)});return Math.abs(c.center.x-a.center.x)<this._threshold&&Math.abs(m-n-(b-e))<=this._maxDelta&&Math.abs(p-q-(d-g))<=this._maxDelta};h.checkVerticalThresholdReached=function(c,a){let b=Math.abs(c.center.y-a.center.y);c.pointers.forEach((e,
d)=>{d=a.pointers.get(d);b=Math.min(b,Math.abs(e.y-d.y))});return b>=this._threshold};t._createClass(k,[{key:"failed",get:function(){return"failed"===this.state}}]);return k}(l.InputHandler);r.VerticalTwoFingerDrag=l;Object.defineProperty(r,"__esModule",{value:!0})});