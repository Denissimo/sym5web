// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.20/esri/copyright.txt for details.
//>>built
define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/clock ../../../core/MapUtils ../InputHandler ./support".split(" "),function(l,g,q,r,m,t){const h={maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,maximumDoubleTouchDelay:350,maximumDoubleTouchDistance:35};m=function(p){function k(a=h.maximumDoubleClickDelay,c=h.maximumDoubleClickDistance,d=h.maximumDoubleTouchDelay,f=h.maximumDoubleTouchDistance,n=q["default"]){var b=p.call(this,!1)||this;b.maximumDoubleClickDelay=a;
b.maximumDoubleClickDistance=c;b.maximumDoubleTouchDelay=d;b.maximumDoubleTouchDistance=f;b._clock=n;b._pointerState=new Map;b._click=b.registerOutgoing("click");b._doubleClick=b.registerOutgoing("double-click");b.registerIncoming("immediate-click",b._handleImmediateClick.bind(g._assertThisInitialized(b)));b.registerIncoming("pointer-drag",b._handlePointerDrag.bind(g._assertThisInitialized(b)));b.registerIncoming("drag",b._handleDrag.bind(g._assertThisInitialized(b)));return b}g._inheritsLoose(k,
p);var e=k.prototype;e.onUninstall=function(){this._pointerState.forEach(a=>{null!=a.doubleClickTimeout&&(a.doubleClickTimeout.remove(),a.doubleClickTimeout=null)})};e._pointerId=function(a){a=a.native;return"mouse"===a.pointerType?`${a.pointerId}:${a.button}`:`${a.pointerType}`};e._handleImmediateClick=function(a){const c=a.data,d=this._pointerId(c),f=this._pointerState.get(d);if(f){const n="touch"===c.native.pointerType?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;t.manhattanDistance(f.event.data,
c)>n?(this._clearDoubleClickTimeout(d,!0),this._startClick(a)):(this._clearDoubleClickTimeout(d,!1),this._doubleClick.emit(f.event.data,void 0,f.event.modifiers))}else this._startClick(a)};e._startClick=function(a){const c=this._pointerId(a.data);this._pointerState.set(c,{event:a,doubleClickTimeout:this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(c),"touch"===a.data.native.pointerType?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay)});this.refreshHasPendingInputs()};e._handlePointerDrag=
function(a){a=this._pointerId(a.data.currentEvent);this._clearDoubleClickTimeout(a,!0)};e._handleDrag=function(a){a=this._pointerId(a.data.pointer);this._clearDoubleClickTimeout(a,!0)};e._clearDoubleClickTimeout=function(a,c){const d=this._pointerState.get(a);d&&(d.doubleClickTimeout.remove(),d.doubleClickTimeout=null,c&&this._doubleClickTimeoutExceeded(a),this._pointerState.delete(a),this.refreshHasPendingInputs())};e._doubleClickTimeoutExceeded=function(a){const c=this._pointerState.get(a);this._click.emit(c.event.data,
void 0,c.event.modifiers);c.doubleClickTimeout=null;this._pointerState.delete(a);this.refreshHasPendingInputs()};g._createClass(k,[{key:"hasPendingInputs",get:function(){return r.someMap(this._pointerState,a=>null!=a.doubleClickTimeout)}}]);return k}(m.InputHandler);l.DefaultParameters=h;l.SingleAndDoubleClick=m;Object.defineProperty(l,"__esModule",{value:!0})});