// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.20/esri/copyright.txt for details.
//>>built
require({cache:{"esri/core/Evented":function(){define(["../chunks/_rollupPluginBabelHelpers","../chunks/tslib.es6","./Accessor","./handleUtils","./accessorSupport/decorators/subclass"],function(h,c,q,I,f){let k=function(){function m(){this._emitter=new m.EventEmitter(this)}var H=m.prototype;H.emit=function(r,v){return this._emitter.emit(r,v)};H.on=function(r,v){return this._emitter.on(r,v)};H.once=function(r,v){return this._emitter.once(r,v)};H.hasEventListener=function(r){return this._emitter.hasEventListener(r)};
return m}();(function(m){let H=function(){function v(Q=null){this.target=Q;this._listenersMap=null}var w=v.prototype;w.clear=function(){this._listenersMap&&this._listenersMap.clear()};w.emit=function(Q,p){Q=this._listenersMap&&this._listenersMap.get(Q);if(!Q)return!1;const C=this.target||this;[...Q].forEach(y=>{y.call(C,p)});return 0<Q.length};w.on=function(Q,p){if(Array.isArray(Q)){var C=Q.map(y=>this.on(y,p));return I.handlesGroup(C)}if(-1<Q.indexOf(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");
this._listenersMap||(this._listenersMap=new Map);C=this._listenersMap.get(Q)||[];C.push(p);this._listenersMap.set(Q,C);return{remove:()=>{const y=this._listenersMap&&this._listenersMap.get(Q)||[],b=y.indexOf(p);0<=b&&y.splice(b,1)}}};w.once=function(Q,p){const C=this.on(Q,y=>{C.remove();p.call(null,y)});return C};w.hasEventListener=function(Q){Q=this._listenersMap&&this._listenersMap.get(Q);return null!=Q&&0<Q.length};return v}();m.EventEmitter=H;m.EventedMixin=v=>{v=function(w){function Q(){var C=
w.apply(this,arguments)||this;C._emitter=new H;return C}h._inheritsLoose(Q,w);var p=Q.prototype;p.destroy=function(){this._emitter.clear()};p.emit=function(C,y){return this._emitter.emit(C,y)};p.on=function(C,y){return this._emitter.on(C,y)};p.once=function(C,y){return this._emitter.once(C,y)};p.hasEventListener=function(C){return this._emitter.hasEventListener(C)};return Q}(v);return v=c.__decorate([f.subclass("esri.core.Evented")],v)};let r=function(v){function w(){var p=v.apply(this,arguments)||
this;p._emitter=new k.EventEmitter(h._assertThisInitialized(p));return p}h._inheritsLoose(w,v);var Q=w.prototype;Q.emit=function(p,C){return this._emitter.emit(p,C)};Q.on=function(p,C){return this._emitter.on(p,C)};Q.once=function(p,C){return this._emitter.once(p,C)};Q.hasEventListener=function(p){return this._emitter.hasEventListener(p)};return w}(q);r=c.__decorate([f.subclass("esri.core.Evented")],r);m.EventedAccessor=r})(k||(k={}));return k})},"esri/core/Handles":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./Accessor ./Collection ./maybe ./accessorSupport/decorators/property ./accessorSupport/decorators/subclass".split(" "),
function(h,c,q,I,f,k,m){q=function(H){function r(w){w=H.call(this,w)||this;w._groups=new Map;return w}h._inheritsLoose(r,H);var v=r.prototype;v.destroy=function(){this.removeAll()};v.add=function(w,Q){if(!this._isHandle(w)&&!Array.isArray(w)&&!I.isCollection(w))return this;const p=this._getOrCreateGroup(Q);Array.isArray(w)||I.isCollection(w)?w.forEach(C=>this._isHandle(C)&&p.push(C)):p.push(w);this.notifyChange("size");return this};v.forEach=function(w,Q){if("function"===typeof w)this._groups.forEach(p=>
p.forEach(w));else{const p=this._getGroup(w);p&&Q&&p.forEach(Q)}};v.has=function(w){return this._groups.has(this._ensureGroupKey(w))};v.remove=function(w){if(Array.isArray(w)||I.isCollection(w))return w.forEach(this.remove,this),this;if(!this.has(w))return this;const Q=this._getGroup(w);for(let p=0;p<Q.length;p++)Q[p].remove();this._deleteGroup(w);this.notifyChange("size");return this};v.removeAll=function(){this._groups.forEach(w=>{for(let Q=0;Q<w.length;Q++)w[Q].remove()});this._groups.clear();
this.notifyChange("size");return this};v._isHandle=function(w){return w&&!!w.remove};v._getOrCreateGroup=function(w){if(this.has(w))return this._getGroup(w);const Q=[];this._groups.set(this._ensureGroupKey(w),Q);return Q};v._getGroup=function(w){return f.assumeNonNull(this._groups.get(this._ensureGroupKey(w)))};v._deleteGroup=function(w){return this._groups.delete(this._ensureGroupKey(w))};v._ensureGroupKey=function(w){return w||"_default_"};h._createClass(r,[{key:"size",get:function(){let w=0;this._groups.forEach(Q=>
{w+=Q.length});return w}}]);return r}(q);c.__decorate([k.property({readOnly:!0})],q.prototype,"size",null);return q=c.__decorate([m.subclass("esri.core.Handles")],q)})},"esri/core/Collection":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./ArrayPool ./Evented ./lang ./maybe ./ObjectPool ./scheduling ./accessorSupport/ensureType ./accessorSupport/tracking ./accessorSupport/decorators/property ./accessorSupport/decorators/subclass ./accessorSupport/tracking/SimpleObservable".split(" "),
function(h,c,q,I,f,k,m,H,r,v,w,Q,p){function C(e){return e?e instanceof d?e.toArray():e.length?Array.prototype.slice.apply(e):[]:[]}function y(e){if(e&&e.length)return e[0]}function b(e,B,L,F){B&&B.forEach((t,g,K)=>{e.push(t);b(e,L.call(F,t,g,K),L,F)})}var z;let A=function(){function e(){this.target=null;this.defaultPrevented=this.cancellable=!1;this.type=this.item=void 0}var B=e.prototype;B.preventDefault=function(){this.cancellable&&(this.defaultPrevented=!0)};B.reset=function(L){this.defaultPrevented=
!1;this.item=L};return e}();const N=new m(A,void 0,e=>{e.item=null;e.target=null;e.defaultPrevented=!1;e.cancellable=!1}),G=()=>{},R=new Set,O=new Set,D=new Set,P=new Map;let u=0,d=z=function(e){function B(F){F=e.call(this,F)||this;F._chgListeners=[];F._notifications=null;F._timer=null;F._observable=new p.SimpleObservable;F.length=0;F._items=[];Object.defineProperty(h._assertThisInitialized(F),"uid",{value:u++});return F}h._inheritsLoose(B,e);B.isCollection=function(F){return null!=F&&F instanceof
z};var L=B.prototype;L.normalizeCtorArgs=function(F){return F?Array.isArray(F)||F instanceof z?{items:F}:F:{}};L[Symbol.iterator]=function*(){yield*this.items};L.hasEventListener=function(F){return"change"===F?0<this._chgListeners.length:this._emitter.hasEventListener(F)};L.on=function(F,t){if("change"===F){const g=this._chgListeners,K={removed:!1,callback:t};g.push(K);this._notifications&&this._notifications.push({listeners:g.slice(),items:this._items.slice(),changes:[]});return{remove(){this.remove=
G;K.removed=!0;g.splice(g.indexOf(K),1)}}}return this._emitter.on(F,t)};L.once=function(F,t){const g=this.on(F,t);return{remove(){g.remove()}}};L.add=function(F,t){v.trackAccess(this._observable);if(this._emitBeforeChanges(1))return this;t=this.getNextIndex(null!=t?t:null);this._splice(t,0,F);this._emitAfterChanges(1);return this};L.addMany=function(F,t=this._items.length){v.trackAccess(this._observable);if(!F||!F.length||this._emitBeforeChanges(1))return this;t=this.getNextIndex(t);this._splice(t,
0,...C(F));this._emitAfterChanges(1);return this};L.removeAll=function(){v.trackAccess(this._observable);if(!this.length||this._emitBeforeChanges(2))return[];const F=this._splice(0,this.length)||[];this._emitAfterChanges(2);return F};L.clone=function(){v.trackAccess(this._observable);return this._createNewInstance({items:this._items.map(f.clone)})};L.concat=function(...F){v.trackAccess(this._observable);F=F.map(C);return this._createNewInstance({items:this._items.concat(...F)})};L.drain=function(F,
t){v.trackAccess(this._observable);if(this.length&&!this._emitBeforeChanges(2)){var g=k.assumeNonNull(this._splice(0,this.length)),K=g.length;for(let T=0;T<K;T++)F.call(t,g[T],T,g);this._emitAfterChanges(2)}};L.every=function(F,t){v.trackAccess(this._observable);return this._items.every(F,t)};L.filter=function(F,t){v.trackAccess(this._observable);let g;g=2===arguments.length?this._items.filter(F,t):this._items.filter(F);return this._createNewInstance({items:g})};L.find=function(F,t){v.trackAccess(this._observable);
return this._items.find(F,t)};L.findIndex=function(F,t){v.trackAccess(this._observable);return this._items.findIndex(F,t)};L.flatten=function(F,t){v.trackAccess(this._observable);const g=[];b(g,this,F,t);return new z(g)};L.forEach=function(F,t){v.trackAccess(this._observable);return this._items.forEach(F,t)};L.getItemAt=function(F){v.trackAccess(this._observable);return this._items[F]};L.getNextIndex=function(F){v.trackAccess(this._observable);const t=this.length;F=null==F?t:F;0>F?F=0:F>t&&(F=t);
return F};L.includes=function(F,t=0){v.trackAccess(this._observable);return this._items.includes(F,t)};L.indexOf=function(F,t=0){v.trackAccess(this._observable);return this._items.indexOf(F,t)};L.join=function(F=","){v.trackAccess(this._observable);return this._items.join(F)};L.lastIndexOf=function(F,t=this.length-1){v.trackAccess(this._observable);return this._items.lastIndexOf(F,t)};L.map=function(F,t){v.trackAccess(this._observable);F=this._items.map(F,t);return new z({items:F})};L.reorder=function(F,
t=this.length-1){v.trackAccess(this._observable);const g=this.indexOf(F);if(-1!==g){0>t?t=0:t>=this.length&&(t=this.length-1);if(g!==t){if(this._emitBeforeChanges(4))return F;this._splice(g,1);this._splice(t,0,F);this._emitAfterChanges(4)}return F}};L.pop=function(){v.trackAccess(this._observable);if(this.length&&!this._emitBeforeChanges(2)){var F=y(this._splice(this.length-1,1));this._emitAfterChanges(2);return F}};L.push=function(...F){v.trackAccess(this._observable);if(this._emitBeforeChanges(1))return this.length;
this._splice(this.length,0,...F);this._emitAfterChanges(1);return this.length};L.reduce=function(F,t){v.trackAccess(this._observable);const g=this._items;return 2===arguments.length?g.reduce(F,t):g.reduce(F)};L.reduceRight=function(F,t){v.trackAccess(this._observable);const g=this._items;return 2===arguments.length?g.reduceRight(F,t):g.reduceRight(F)};L.remove=function(F){v.trackAccess(this._observable);return this.removeAt(this.indexOf(F))};L.removeAt=function(F){v.trackAccess(this._observable);
if(!(0>F||F>=this.length||this._emitBeforeChanges(2)))return F=y(this._splice(F,1)),this._emitAfterChanges(2),F};L.removeMany=function(F){v.trackAccess(this._observable);if(!F||!F.length||this._emitBeforeChanges(2))return[];F=F instanceof z?F.toArray():F;const t=this._items,g=[],K=F.length;for(let ia=0;ia<K;ia++){var T=t.indexOf(F[ia]);if(-1<T){{var Z=ia+1;var ba=T+1;const ma=Math.min(F.length-Z,t.length-ba);let qa=0;for(;qa<ma&&F[Z+qa]===t[ba+qa];)qa++;Z=qa}Z=1+Z;(T=this._splice(T,Z))&&0<T.length&&
g.push.apply(g,T);ia+=Z-1}}this._emitAfterChanges(2);return g};L.reverse=function(){v.trackAccess(this._observable);if(this._emitBeforeChanges(4))return this;const F=this._splice(0,this.length);F&&(F.reverse(),this._splice(0,0,...F));this._emitAfterChanges(4);return this};L.shift=function(){v.trackAccess(this._observable);if(this.length&&!this._emitBeforeChanges(2)){var F=y(this._splice(0,1));this._emitAfterChanges(2);return F}};L.slice=function(F=0,t=this.length){v.trackAccess(this._observable);
return this._createNewInstance({items:this._items.slice(F,t)})};L.some=function(F,t){v.trackAccess(this._observable);return this._items.some(F,t)};L.sort=function(F){v.trackAccess(this._observable);if(!this.length||this._emitBeforeChanges(4))return this;const t=k.assumeNonNull(this._splice(0,this.length));arguments.length?t.sort(F):t.sort();this._splice(0,0,...t);this._emitAfterChanges(4);return this};L.splice=function(F,t,...g){v.trackAccess(this._observable);const K=(t?2:0)|(g.length?1:0);if(this._emitBeforeChanges(K))return[];
F=this._splice(F,t,...g)||[];this._emitAfterChanges(K);return F};L.toArray=function(){v.trackAccess(this._observable);return this._items.slice()};L.toJSON=function(){v.trackAccess(this._observable);return this.toArray()};L.toLocaleString=function(){v.trackAccess(this._observable);return this._items.toLocaleString()};L.toString=function(){v.trackAccess(this._observable);return this._items.toString()};L.unshift=function(...F){v.trackAccess(this._observable);if(!F.length||this._emitBeforeChanges(1))return this.length;
this._splice(0,0,...F);this._emitAfterChanges(1);return this.length};L._createNewInstance=function(F){return new this.constructor(F)};L._splice=function(F,t,...g){const K=this._items;var T=this.constructor.prototype.itemType;let Z=void 0;!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=H.schedule(()=>this._dispatchChange()));if(t){Z=K.splice(F,t);if(this.hasEventListener("before-remove")){var ba=
N.acquire();ba.target=this;ba.cancellable=!0;for(let qa=0,wa=Z.length;qa<wa;qa++)t=Z[qa],ba.reset(t),this.emit("before-remove",ba),ba.defaultPrevented&&(Z.splice(qa,1),K.splice(F,0,t),F+=1,--qa,--wa);N.release(ba)}this.length=this._items.length;if(this.hasEventListener("after-remove")){t=N.acquire();t.target=this;t.cancellable=!1;ba=Z.length;for(let qa=0;qa<ba;qa++)t.reset(Z[qa]),this.emit("after-remove",t);N.release(t)}}if(g&&g.length){if(T){t=[];for(var ia of g)g=T.ensureType(ia),null==g&&null!=
ia||t.push(g);g=t}T=this.hasEventListener("before-add");ia=this.hasEventListener("after-add");t=F===this.length;if(T||ia){var ma=N.acquire();ma.target=this;ma.cancellable=!0;ba=N.acquire();ba.target=this;ba.cancellable=!1;for(const qa of g)T?(ma.reset(qa),this.emit("before-add",ma),ma.defaultPrevented||(t?K.push(qa):K.splice(F++,0,qa),this._set("length",K.length),ia&&(ba.reset(qa),this.emit("after-add",ba)))):(t?K.push(qa):K.splice(F++,0,qa),this._set("length",K.length),ba.reset(qa),this.emit("after-add",
ba));N.release(ba);N.release(ma)}else{if(t)for(ma of g)K.push(ma);else K.splice(F,0,...g);this._set("length",K.length)}}(g&&g.length||Z&&Z.length)&&this._notifyChangeEvent(g,Z);return Z};L._emitBeforeChanges=function(F){let t=!1;if(this.hasEventListener("before-changes")){const g=N.acquire();g.target=this;g.cancellable=!0;g.type=F;this.emit("before-changes",g);t=g.defaultPrevented;N.release(g)}return t};L._emitAfterChanges=function(F){if(this.hasEventListener("after-changes")){const t=N.acquire();
t.target=this;t.cancellable=!1;t.type=F;this.emit("after-changes",t);N.release(t)}this._observable.notify()};L._notifyChangeEvent=function(F,t){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:F,removed:t})};L._dispatchChange=function(){this._timer&&(this._timer.remove(),this._timer=null);if(this._notifications){var F=this._notifications;this._notifications=null;for(const t of F){F=t.changes;R.clear();O.clear();D.clear();for(const {added:ia,
removed:ma}of F){if(ia)if(0===D.size&&0===O.size)for(const qa of ia)R.add(qa);else for(const qa of ia)O.has(qa)?(D.add(qa),O.delete(qa)):D.has(qa)||R.add(qa);if(ma)if(0===D.size&&0===R.size)for(const qa of ma)O.add(qa);else for(const qa of ma)R.has(qa)?R.delete(qa):(D.delete(qa),O.add(qa))}const g=q.acquire();R.forEach(ia=>{g.push(ia)});const K=q.acquire();O.forEach(ia=>{K.push(ia)});const T=this._items,Z=t.items,ba=q.acquire();D.forEach(ia=>{Z.indexOf(ia)!==T.indexOf(ia)&&ba.push(ia)});if(t.listeners&&
(g.length||K.length||ba.length)){F={target:this,added:g,removed:K,moved:ba};const ia=t.listeners.length;for(let ma=0;ma<ia;ma++){const qa=t.listeners[ma];qa.removed||qa.callback.call(this,F)}}q.release(g);q.release(K);q.release(ba)}R.clear();O.clear();D.clear()}};h._createClass(B,[{key:"items",get:function(){v.trackAccess(this._observable);return this._items},set:function(F){this._emitBeforeChanges(1)||(this._splice(0,this.length,...C(F)),this._emitAfterChanges(1))}}]);return B}(I.EventedAccessor);
d.ofType=e=>{if(!e)return z;if(P.has(e))return P.get(e);var B=null;if("function"===typeof e)B=e.prototype.declaredClass;else if(e.base)B=e.base.prototype.declaredClass;else for(var L in e.typeMap){const F=e.typeMap[L].prototype.declaredClass;B=B?B+` | ${F}`:F}L=function(F){function t(){return F.apply(this,arguments)||this}h._inheritsLoose(t,F);return t}(z);L=c.__decorate([Q.subclass(`esri.core.Collection<${B}>`)],L);B={Type:e,ensureType:"function"===typeof e?r.ensureType(e):r.ensureOneOfType(e)};
Object.defineProperty(L.prototype,"itemType",{value:B});P.set(e,L);return L};c.__decorate([w.property()],d.prototype,"length",void 0);c.__decorate([w.property()],d.prototype,"items",null);return d=z=c.__decorate([Q.subclass("esri.core.Collection")],d)})},"esri/core/accessorSupport/tracking/SimpleObservable":function(){define(["exports","./ObservationHandle"],function(h,c){let q=function(){function I(){this._observers=[]}var f=I.prototype;f.observe=function(k){this._observers.includes(k)||this._observers.push(k);
return new c.ObservationHandle(this._observers,k)};f.notify=function(){const k=this._observers.slice();for(let m=0;m<k.length;++m){const H=k[m];H.onInvalidated();H.onCommitted()}};return I}();h.SimpleObservable=q;Object.defineProperty(h,"__esModule",{value:!0})})},"esri/core/watchUtils":function(){define(["exports","./events","./lang","./promiseUtils"],function(h,c,q,I){function f(y,b,z,A,N){N=y.watch(b,(R,O,D,P)=>{if(!z||z(R))null==A?void 0:A.call(y,R,O,D,P)},N);if(Array.isArray(b))for(var G of b){const R=
y.get(G);z&&z(R)&&(null==A?void 0:A.call(y,R,R,b,y))}else G=y.get(b),z&&z(G)&&(null==A?void 0:A.call(y,G,G,b,y));return N}function k(y,b,z,A,N){function G(){P&&(P.remove(),P=null)}const R="function"===typeof A?A:null,O="object"===typeof A?A:null;"boolean"===typeof A&&(N=A);let D=!1,P;const u=I.createDeferred();I.onAbort(O,()=>{G();u.reject(I.createAbortError())});A={then:u.promise.then.bind(u.promise),catch:u.promise.catch.bind(u.promise),remove:G};Object.freeze(A);P=f(y,b,z,(d,e,B,L)=>{D=!0;G();
R&&R.call(y,d,e,B,L);u.resolve({value:d,oldValue:e,propertyName:B,target:L})},N);D&&G();return A}function m(y){return!!y}function H(y){return!y}function r(y){return!0===y}function v(y){return!1===y}function w(y){return void 0!==y}function Q(y){return void 0===y}function p(y,b,z,A){var N=Array.isArray(b)?b:-1<b.indexOf(",")?b.split(","):[b];b=y.watch(b,z,A);for(const G of N)N=G.trim().replace(C,"$1"),A=y.get(N),z.call(y,A,A,N,y);return b}const C=/\?(\.|$)/g;h.init=p;h.on=function(y,b,z,A,N,G,R){function O(u){const d=
D[u];d&&(G&&G(d.target,u,y,z),d.handle.remove(),delete D[u])}const D={},P=p(y,b,(u,d,e)=>{O(e);c.isEventTarget(u)&&(D[e]={handle:c.on(u,z,A),target:u},N&&N(u,e,y,z))},R);return{remove(){P.remove();for(const u in D)O(u)}}};h.once=function(y,b,z,A){return k(y,b,null,z,A)};h.pausable=function(y,b,z,A){let N=!1;const G=y.watch(b,(R,O,D,P)=>{N||z.call(y,R,O,D,P)},A);return{remove(){G.remove()},pause(){N=!0},resume(){N=!1}}};h.watch=function(y,b,z,A){return y.watch(b,z,A)};h.when=function(y,b,z,A){return f(y,
b,m,z,A)};h.whenDefined=function(y,b,z,A){return f(y,b,w,z,A)};h.whenDefinedOnce=function(y,b,z,A){return k(y,b,w,z,A)};h.whenEqual=function(y,b,z,A,N){return f(y,b,G=>q.equals(z,G),A,N)};h.whenEqualOnce=function(y,b,z,A,N){return k(y,b,G=>q.equals(z,G),A,N)};h.whenFalse=function(y,b,z,A){return f(y,b,v,z,A)};h.whenFalseOnce=function(y,b,z,A){return k(y,b,v,z,A)};h.whenNot=function(y,b,z,A){return f(y,b,H,z,A)};h.whenNotOnce=function(y,b,z,A){return k(y,b,H,z,A)};h.whenOnce=function(y,b,z,A){return k(y,
b,m,z,A)};h.whenTrue=function(y,b,z,A){return f(y,b,r,z,A)};h.whenTrueOnce=function(y,b,z,A){return k(y,b,r,z,A)};h.whenUndefined=function(y,b,z,A){return f(y,b,Q,z,A)};h.whenUndefinedOnce=function(y,b,z,A){return k(y,b,Q,z,A)};h.whenValidOnce=k;Object.defineProperty(h,"__esModule",{value:!0})})},"esri/layers/graphics/data/FeatureStore":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../core/Evented ../../../core/Logger ../../../core/maybe ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../featureConversionUtils ./BoundsStore ./optimizedFeatureQueryEngineAdapter".split(" "),
function(h,c,q,I,f,k,m,H,r,v){return function(){function w(p){this.geometryInfo=p;this._boundsStore=new r.BoundsStore;this._featuresById=new Map;this._markedIds=new Set;this.events=new q;this.featureAdapter=v.optimizedFeatureQueryEngineAdapter}var Q=w.prototype;Q.add=function(p){this._add(p);this._emitChanged()};Q.addMany=function(p){for(const C of p)this._add(C);this._emitChanged()};Q.clear=function(){this._featuresById.clear();this._boundsStore.clear();this._emitChanged()};Q.removeById=function(p){p=
this._featuresById.get(p);if(!p)return null;this._remove(p);this._emitChanged();return p};Q.removeManyById=function(p){this._boundsStore.invalidateIndex();for(const C of p)(p=this._featuresById.get(C))&&this._remove(p);this._emitChanged()};Q.forEachBounds=function(p,C,y){for(const b of p)(p=this._boundsStore.get(b.objectId))&&C(k.fromRect(y,p))};Q.getFeature=function(p){return this._featuresById.get(p)};Q.has=function(p){return this._featuresById.has(p)};Q.forEach=function(p){this._featuresById.forEach(C=>
p(C))};Q.forEachInBounds=function(p,C){this._boundsStore.forEachInBounds(p,y=>{C(this._featuresById.get(y))})};Q.startMarkingUsedFeatures=function(){this._boundsStore.invalidateIndex();this._markedIds.clear()};Q.sweep=function(){let p=!1;this._featuresById.forEach((C,y)=>{this._markedIds.has(y)||(p=!0,this._remove(C))});this._markedIds.clear();p&&this._emitChanged()};Q._emitChanged=function(){this.events.emit("changed",void 0)};Q._add=function(p){if(p){var C=p.objectId;if(null==C)I.getLogger("esri.layers.graphics.data.FeatureStore").error(new c("featurestore:invalid-feature",
"feature id is missing",{feature:p}));else{var y=this._featuresById.get(C);this._markedIds.add(C);if(y){p.displayId=y.displayId;var b=this._boundsStore.get(C);this._boundsStore.delete(C)}else if(f.isSome(this.onFeatureAdd))this.onFeatureAdd(p);p.geometry&&p.geometry.coords&&p.geometry.coords.length?(b=H.getBoundsOptimizedGeometry(b||m.create(),p.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),this._boundsStore.set(C,b)):this._boundsStore.set(C,null);this._featuresById.set(C,p)}}};Q._remove=
function(p){if(f.isSome(this.onFeatureRemove))this.onFeatureRemove(p);this._markedIds.delete(p.objectId);this._boundsStore.delete(p.objectId);this._featuresById.delete(p.objectId);return p};h._createClass(w,[{key:"geometryType",get:function(){return this.geometryInfo.geometryType}},{key:"hasM",get:function(){return this.geometryInfo.hasM}},{key:"hasZ",get:function(){return this.geometryInfo.hasZ}},{key:"numFeatures",get:function(){return this._featuresById.size}},{key:"fullBounds",get:function(){if(!this.numFeatures)return null;
const p=m.create(m.NEGATIVE_INFINITY);this._featuresById.forEach(C=>{if(C=this._boundsStore.get(C.objectId))p[0]=Math.min(C[0],p[0]),p[1]=Math.min(C[1],p[1]),p[2]=Math.max(C[2],p[2]),p[3]=Math.max(C[3],p[3])});return p}},{key:"storeStatistics",get:function(){let p=0;this._featuresById.forEach(C=>{C.geometry&&C.geometry.coords&&(p+=C.geometry.coords.length)});return{featureCount:this._featuresById.size,vertexCount:p/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}}]);return w}()})},"esri/geometry/support/aaBoundingBox":function(){define(["exports",
"../../core/maybe","../Extent","./aaBoundingRect"],function(h,c,q,I){function f(b=C){return[b[0],b[1],b[2],b[3],b[4],b[5]]}function k(b,z,A,N,G,R,O=f()){O[0]=b;O[1]=z;O[2]=A;O[3]=N;O[4]=G;O[5]=R;return O}function m(b){return b[0]>=b[3]?0:b[3]-b[0]}function H(b){return b[1]>=b[4]?0:b[4]-b[1]}function r(b){return b[2]>=b[5]?0:b[5]-b[2]}function v(b,z){return Math.max(z[0],b[0])<=Math.min(z[3],b[3])&&Math.max(z[1],b[1])<=Math.min(z[4],b[4])&&Math.max(z[2],b[2])<=Math.min(z[5],b[5])}function w(b,z){b[0]=
z[0];b[1]=z[1];b[2]=z[2];b[3]=z[3];b[4]=z[4];b[5]=z[5];return b}function Q(b){return 6===b.length}const p=[Infinity,Infinity,Infinity,-Infinity,-Infinity,-Infinity],C=[0,0,0,0,0,0],y=f();h.NEGATIVE_INFINITY=p;h.POSITIVE_INFINITY=[-Infinity,-Infinity,-Infinity,Infinity,Infinity,Infinity];h.ZERO=C;h.allFinite=function(b){for(let z=0;6>z;z++)if(!isFinite(b[z]))return!1;return!0};h.center=function(b,z=[0,0,0]){z[0]=b[0]+m(b)/2;z[1]=b[1]+H(b)/2;z[2]=b[2]+r(b)/2;return z};h.contains=function(b,z){return z[0]>=
b[0]&&z[1]>=b[1]&&z[2]>=b[2]&&z[3]<=b[3]&&z[4]<=b[4]&&z[5]<=b[5]};h.containsPoint=function(b,z){return z[0]>=b[0]&&z[1]>=b[1]&&z[2]>=b[2]&&z[0]<=b[3]&&z[1]<=b[4]&&z[2]<=b[5]};h.containsPointWithMargin=function(b,z,A){return z[0]>=b[0]-A&&z[1]>=b[1]-A&&z[2]>=b[2]-A&&z[0]<=b[3]+A&&z[1]<=b[4]+A&&z[2]<=b[5]+A};h.create=f;h.depth=H;h.diameter=function(b){const z=m(b),A=r(b);b=H(b);return Math.sqrt(z*z+A*A+b*b)};h.empty=function(b){return b?w(b,p):f(p)};h.equals=function(b,z,A){if(c.isNone(b)||c.isNone(z))return b===
z;if(!Q(b)||!Q(z))return!1;if(A)for(let N=0;N<b.length;N++){if(!A(b[N],z[N]))return!1}else for(A=0;A<b.length;A++)if(b[A]!==z[A])return!1;return!0};h.expandWithAABB=function(b,z){b[0]=Math.min(b[0],z[0]);b[1]=Math.min(b[1],z[1]);b[2]=Math.min(b[2],z[2]);b[3]=Math.max(b[3],z[3]);b[4]=Math.max(b[4],z[4]);b[5]=Math.max(b[5],z[5])};h.expandWithBuffer=function(b,z,A=0,N=z.length/3){let G=b[0],R=b[1],O=b[2],D=b[3],P=b[4],u=b[5];for(let d=0;d<N;d++)G=Math.min(G,z[A+3*d]),R=Math.min(R,z[A+3*d+1]),O=Math.min(O,
z[A+3*d+2]),D=Math.max(D,z[A+3*d]),P=Math.max(P,z[A+3*d+1]),u=Math.max(u,z[A+3*d+2]);b[0]=G;b[1]=R;b[2]=O;b[3]=D;b[4]=P;b[5]=u};h.expandWithNestedArray=function(b,z,A){const N=z.length;let G=b[0],R=b[1],O=b[2],D=b[3],P=b[4],u=b[5];if(A)for(A=0;A<N;A++){var d=z[A];G=Math.min(G,d[0]);R=Math.min(R,d[1]);O=Math.min(O,d[2]);D=Math.max(D,d[0]);P=Math.max(P,d[1]);u=Math.max(u,d[2])}else for(A=0;A<N;A++)d=z[A],G=Math.min(G,d[0]),R=Math.min(R,d[1]),D=Math.max(D,d[0]),P=Math.max(P,d[1]);b[0]=G;b[1]=R;b[2]=
O;b[3]=D;b[4]=P;b[5]=u};h.expandWithOffset=function(b,z,A,N){b[0]=Math.min(b[0],b[0]+z);b[3]=Math.max(b[3],b[3]+z);b[1]=Math.min(b[1],b[1]+A);b[4]=Math.max(b[4],b[4]+A);b[2]=Math.min(b[2],b[2]+N);b[5]=Math.max(b[5],b[5]+N)};h.expandWithRect=function(b,z){b[0]=Math.min(b[0],z[0]);b[1]=Math.min(b[1],z[1]);b[3]=Math.max(b[3],z[2]);b[4]=Math.max(b[4],z[3])};h.expandWithVec3=function(b,z){b[0]=Math.min(b[0],z[0]);b[1]=Math.min(b[1],z[1]);b[2]=Math.min(b[2],z[2]);b[3]=Math.max(b[3],z[0]);b[4]=Math.max(b[4],
z[1]);b[5]=Math.max(b[5],z[2])};h.fromExtent=function(b,z=f()){z[0]=b.xmin;z[1]=b.ymin;z[2]=b.zmin;z[3]=b.xmax;z[4]=b.ymax;z[5]=b.zmax;return z};h.fromMinMax=function(b,z,A=f()){A[0]=b[0];A[1]=b[1];A[2]=b[2];A[3]=z[0];A[4]=z[1];A[5]=z[2];return A};h.fromRect=function(b,z){b[0]=z[0];b[1]=z[1];b[2]=Number.NEGATIVE_INFINITY;b[3]=z[2];b[4]=z[3];b[5]=Number.POSITIVE_INFINITY;return b};h.fromValues=k;h.getMax=function(b,z){z[0]=b[3];z[1]=b[4];z[2]=b[5];return z};h.getMin=function(b,z){z[0]=b[0];z[1]=b[1];
z[2]=b[2];return z};h.height=r;h.intersects=v;h.intersectsClippingArea=function(b,z){return c.isNone(z)?!0:v(b,z)};h.is=Q;h.isPoint=function(b){return 0===m(b)&&0===H(b)&&0===r(b)};h.maximumDimension=function(b){return Math.max(m(b),r(b),H(b))};h.offset=function(b,z,A,N,G=b){G[0]=b[0]+z;G[1]=b[1]+A;G[2]=b[2]+N;G[3]=b[3]+z;G[4]=b[4]+A;G[5]=b[5]+N;return G};h.scale=function(b,z,A=b){const N=b[0]+m(b)/2,G=b[1]+H(b)/2,R=b[2]+r(b)/2;A[0]=N+(b[0]-N)*z;A[1]=G+(b[1]-G)*z;A[2]=R+(b[2]-R)*z;A[3]=N+(b[3]-N)*
z;A[4]=G+(b[4]-G)*z;A[5]=R+(b[5]-R)*z;return A};h.set=w;h.setMax=function(b,z,A=b){A[3]=z[0];A[4]=z[1];A[5]=z[2];A!==b&&(A[0]=b[0],A[1]=b[1],A[2]=b[2]);return b};h.setMin=function(b,z,A=b){A[0]=z[0];A[1]=z[1];A[2]=z[2];A!==b&&(A[3]=b[3],A[4]=b[4],A[5]=b[5]);return A};h.size=function(b,z=[0,0,0]){z[0]=m(b);z[1]=H(b);z[2]=r(b);return z};h.toExtent=function(b,z){return isFinite(b[2])||isFinite(b[5])?new q({xmin:b[0],xmax:b[3],ymin:b[1],ymax:b[4],zmin:b[2],zmax:b[5],spatialReference:z}):new q({xmin:b[0],
xmax:b[3],ymin:b[1],ymax:b[4],spatialReference:z})};h.toRect=function(b,z){z||(z=I.create());z[0]=b[0];z[1]=b[1];z[2]=b[3];z[3]=b[4];return z};h.width=m;h.wrap=function(b,z,A,N,G,R){return k(b,z,A,N,G,R,y)};Object.defineProperty(h,"__esModule",{value:!0})})},"esri/geometry/support/aaBoundingRect":function(){define(["exports","../../core/has","../../core/maybe","../Extent"],function(h,c,q,I){function f(C=p){return[C[0],C[1],C[2],C[3]]}function k(C){return C[0]>=C[2]?0:C[2]-C[0]}function m(C){return C[1]>=
C[3]?0:C[3]-C[1]}function H(C,y,b){return y>=C[0]&&b>=C[1]&&y<=C[2]&&b<=C[3]}function r(C,y){C[0]=y[0];C[1]=y[1];C[2]=y[2];C[3]=y[3];return C}function v(C){return 4===C.length}function w(C,y,b){return C<y?y:C>b?b:C}const Q=[Infinity,Infinity,-Infinity,-Infinity],p=[0,0,0,0];h.NEGATIVE_INFINITY=Q;h.POSITIVE_INFINITY=[-Infinity,-Infinity,Infinity,Infinity];h.UNIT=[0,0,1,1];h.ZERO=p;h.allFinite=function(C){for(let y=0;4>y;y++)if(!isFinite(C[y]))return!1;return!0};h.area=function(C){return k(C)*m(C)};
h.center=function(C,y=[0,0]){y[0]=(C[0]+C[2])/2;y[1]=(C[1]+C[3])/2;return y};h.clone=function(C){return[C[0],C[1],C[2],C[3]]};h.contains=function(C,y){return y[0]>=C[0]&&y[2]<=C[2]&&y[1]>=C[1]&&y[3]<=C[3]};h.containsPoint=function(C,y){return H(C,y[0],y[1])};h.containsPointObject=function(C,y){return H(C,y.x,y.y)};h.containsPointWithMargin=function(C,y,b){return y[0]>=C[0]-b&&y[1]>=C[1]-b&&y[0]<=C[2]+b&&y[1]<=C[3]+b};h.containsXY=H;h.create=f;h.diameter=function(C){const y=k(C);C=m(C);return Math.sqrt(y*
y+C*C)};h.distance=function(C,y){const b=(C[1]+C[3])/2,z=Math.max(Math.abs(y[0]-(C[0]+C[2])/2)-k(C)/2,0);C=Math.max(Math.abs(y[1]-b)-m(C)/2,0);return Math.sqrt(z*z+C*C)};h.empty=function(C){return C?r(C,Q):f(Q)};h.equals=function(C,y,b){if(q.isNone(C)||q.isNone(y))return C===y;if(!v(C)||!v(y))return!1;if(b)for(let z=0;z<C.length;z++){if(!b(C[z],y[z]))return!1}else for(b=0;b<C.length;b++)if(C[b]!==y[b])return!1;return!0};h.expand=function(C,y,b=C){if("length"in y)if(v(y))b[0]=Math.min(C[0],y[0]),b[1]=
Math.min(C[1],y[1]),b[2]=Math.max(C[2],y[2]),b[3]=Math.max(C[3],y[3]);else{if(2===y.length||3===y.length)b[0]=Math.min(C[0],y[0]),b[1]=Math.min(C[1],y[1]),b[2]=Math.max(C[2],y[0]),b[3]=Math.max(C[3],y[1])}else switch(y.type){case "extent":b[0]=Math.min(C[0],y.xmin);b[1]=Math.min(C[1],y.ymin);b[2]=Math.max(C[2],y.xmax);b[3]=Math.max(C[3],y.ymax);break;case "point":b[0]=Math.min(C[0],y.x),b[1]=Math.min(C[1],y.y),b[2]=Math.max(C[2],y.x),b[3]=Math.max(C[3],y.y)}return b};h.expandPointInPlace=function(C,
y){y[0]<C[0]&&(C[0]=y[0]);y[0]>C[2]&&(C[2]=y[0]);y[1]<C[1]&&(C[1]=y[1]);y[1]>C[3]&&(C[3]=y[1])};h.expandWithNestedArray=function(C,y,b=C){const z=y.length;let A=C[0],N=C[1],G=C[2];C=C[3];for(let R=0;R<z;R++){const O=y[R];A=Math.min(A,O[0]);N=Math.min(N,O[1]);G=Math.max(G,O[0]);C=Math.max(C,O[1])}b[0]=A;b[1]=N;b[2]=G;b[3]=C;return b};h.fromExtent=function(C,y=f()){y[0]=C.xmin;y[1]=C.ymin;y[2]=C.xmax;y[3]=C.ymax;return y};h.fromValues=function(C,y,b,z,A=f()){A[0]=C;A[1]=y;A[2]=b;A[3]=z;return A};h.height=
m;h.intersection=function(C,y,b=C){const z=y[0],A=y[1],N=y[2];y=y[3];b[0]=w(C[0],z,N);b[1]=w(C[1],A,y);b[2]=w(C[2],z,N);b[3]=w(C[3],A,y);return b};h.intersects=function(C,y){return Math.max(y[0],C[0])<=Math.min(y[2],C[2])&&Math.max(y[1],C[1])<=Math.min(y[3],C[3])};h.is=v;h.isPoint=function(C){return(0===k(C)||!isFinite(C[0]))&&(0===m(C)||!isFinite(C[1]))};h.offset=function(C,y,b,z=C){z[0]=C[0]+y;z[1]=C[1]+b;z[2]=C[2]+y;z[3]=C[3]+b;return z};h.pad=function(C,y,b=C){b[0]=C[0]-y;b[1]=C[1]-y;b[2]=C[2]+
y;b[3]=C[3]+y;return b};h.set=r;h.setMax=function(C,y,b=C){b[2]=y[0];b[3]=y[1];b!==C&&(b[0]=C[0],b[1]=C[1]);return C};h.setMin=function(C,y,b=C){b[0]=y[0];b[1]=y[1];b!==C&&(b[2]=C[2],b[3]=C[3]);return b};h.size=function(C,y){y[0]=C[2]-C[0];y[1]=C[3]-C[1]};h.toExtent=function(C,y){return new I({xmin:C[0],ymin:C[1],xmax:C[2],ymax:C[3],spatialReference:y})};h.width=k;Object.defineProperty(h,"__esModule",{value:!0})})},"esri/layers/graphics/featureConversionUtils":function(){define("exports ../../core/Error ../../core/Logger ../../geometry/support/jsonUtils ./OptimizedFeature ./OptimizedFeatureSet ./OptimizedGeometry".split(" "),
function(h,c,q,I,f,k,m){function H(x,M){return x?M?4:3:M?3:2}function r(x,M,X,Y){if(x){if(X)return M&&Y?va:na;if(M&&Y)return ta}else if(M&&Y)return na;return Oa}function v({scale:x,translate:M},X){return Math.round((X-M[0])/x[0])}function w({scale:x,translate:M},X){return Math.round((M[1]-X)/x[1])}function Q({scale:x,translate:M},X){return X*x[0]+M[0]}function p({scale:x,translate:M},X){return M[1]-X*x[1]}function C(x){x=x.coords;return{x:x[0],y:x[1]}}function y(x,M){x.coords[0]=M.x;x.coords[1]=M.y;
return x}function b(x){x=x.coords;return{x:x[0],y:x[1],z:x[2]}}function z(x,M){x.coords[0]=M.x;x.coords[1]=M.y;x.coords[2]=M.z;return x}function A(x){x=x.coords;return{x:x[0],y:x[1],m:x[2]}}function N(x,M){x.coords[0]=M.x;x.coords[1]=M.y;x.coords[2]=M.m;return x}function G(x){x=x.coords;return{x:x[0],y:x[1],z:x[2],m:x[3]}}function R(x,M){x.coords[0]=M.x;x.coords[1]=M.y;x.coords[2]=M.z;x.coords[3]=M.m;return x}function O(x,M){return x&&M?R:x?z:M?N:y}function D(x,M,X,Y,S){X=O(X,Y);for(const U of M){const {geometry:aa,
attributes:da}=U;let ja;aa&&(ja=X(new m,aa));x.push(new f(ja,da,null,da[S]))}return x}function P(x,M,X,Y){for(const S of M){const {geometry:U,attributes:aa}=S;let da;U&&(da=u(U,X,Y));x.push({attributes:aa,geometry:da})}return x}function u(x,M,X){if(!x)return null;const Y=H(M,X),S=[];for(let U=0;U<x.coords.length;U+=Y){const aa=[];for(let da=0;da<Y;da++)aa.push(x.coords[U+da]);S.push(aa)}return M?X?{points:S,hasZ:M,hasM:X}:{points:S,hasZ:M}:X?{points:S,hasM:X}:{points:S}}function d(x,M,X,Y,S){X=H(X,
Y);for(const U of M){M=U.geometry;Y=U.attributes;let aa;M&&(aa=e(new m,M,X));x.push(new f(aa,Y,null,Y[S]))}return x}function e(x,M,X=H(M.hasZ,M.hasM)){x.lengths[0]=M.points.length;const Y=x.coords;let S=0;for(const U of M.points)for(M=0;M<X;M++)Y[S++]=U[M];return x}function B(x,M,X){if(!x)return null;const Y=H(M,X),{coords:S,lengths:U}=x;x=[];let aa=0;for(const da of U){const ja=[];for(let la=0;la<da;la++){const ra=[];for(let ua=0;ua<Y;ua++)ra.push(S[aa++]);ja.push(ra)}x.push(ja)}return M?X?{paths:x,
hasZ:M,hasM:X}:{paths:x,hasZ:M}:X?{paths:x,hasM:X}:{paths:x}}function L(x,M,X,Y,S){X=H(X,Y);for(const U of M){M=U.geometry;Y=U.attributes;let aa;M&&(aa=F(new m,M,X));x.push(new f(aa,Y,null,Y[S]))}return x}function F(x,M,X=H(M.hasZ,M.hasM)){const {lengths:Y,coords:S}=x;let U=0;for(const aa of M.paths){for(const da of aa)for(M=0;M<X;M++)S[U++]=da[M];Y.push(aa.length)}return x}function t(x,M,X){if(!x)return null;const Y=H(M,X),{coords:S,lengths:U}=x;x=[];let aa=0;for(const da of U){const ja=[];for(let la=
0;la<da;la++){const ra=[];for(let ua=0;ua<Y;ua++)ra.push(S[aa++]);ja.push(ra)}x.push(ja)}return M?X?{rings:x,hasZ:M,hasM:X}:{rings:x,hasZ:M}:X?{rings:x,hasM:X}:{rings:x}}function g(x,M,X,Y,S){for(const U of M){M=U.geometry;const aa=U.centroid,da=U.attributes;let ja;M&&(ja=K(new m,M,X,Y));aa?x.push(new f(ja,da,y(new m,aa),da[S])):x.push(new f(ja,da,null,da[S]))}return x}function K(x,M,X=M.hasZ,Y=M.hasM){T(x,M.rings,X,Y);return x}function T(x,M,X,Y){X=H(X,Y);const {lengths:S,coords:U}=x;Y=0;S.length=
U.length=0;for(const aa of M){for(const da of aa)for(M=0;M<X;M++)U[Y++]=da[M];S.push(aa.length)}return x}function Z(x,M,X,Y,S,U){x.length=0;if(!X){for(const aa of M)x.push(new f(null,aa.attributes,null,aa.attributes[U]));return x}switch(X){case "esriGeometryPoint":return D(x,M,Y,S,U);case "esriGeometryMultipoint":return d(x,M,Y,S,U);case "esriGeometryPolyline":return L(x,M,Y,S,U);case "esriGeometryPolygon":return g(x,M,Y,S,U);default:Ka.error("convertToFeatureSet:unknown-geometry",new c(`Unable to parse unknown geometry type '${X}'`)),
x.length=0}return x}function ba(x,M,X,Y){x=x&&("coords"in x?x:x.geometry);if(!x)return null;switch(M){case "esriGeometryPoint":return M=C,X&&Y?M=G:X?M=b:Y&&(M=A),M(x);case "esriGeometryMultipoint":return u(x,X,Y);case "esriGeometryPolyline":return B(x,X,Y);case "esriGeometryPolygon":return t(x,X,Y);default:Ka.error("convertToGeometry:unknown-geometry",new c(`Unable to parse unknown geometry type '${M}'`))}}function ia(x,M,X,Y,S){x.length=0;switch(X){case "esriGeometryPoint":var U=C;Y&&S?U=G:Y?U=b:
S&&(U=A);for(var aa of M){const {geometry:da,attributes:ja}=aa;Y=da?U(da):null;x.push({attributes:ja,geometry:Y})}break;case "esriGeometryMultipoint":return P(x,M,Y,S);case "esriGeometryPolyline":for(const da of M){const {geometry:ja,attributes:la}=da;let ra;ja&&(ra=B(ja,Y,S));x.push({attributes:la,geometry:ra})}break;case "esriGeometryPolygon":for(U of M){const {geometry:da,attributes:ja,centroid:la}=U;let ra;da&&(ra=t(da,Y,S));la?(aa=C(la),x.push({attributes:ja,centroid:aa,geometry:ra})):x.push({attributes:ja,
geometry:ra})}break;default:Ka.error("convertToFeatureSet:unknown-geometry",new c(`Unable to parse unknown geometry type '${X}'`))}return x}function ma(x,M,X,Y,S,U,aa=X,da=Y){x.lengths.length&&(x.lengths.length=0);x.coords.length&&(x.coords.length=0);if(!M||!M.coords.length)return null;S=Ha[S];const {coords:ja,lengths:la}=M;M=H(X,Y);const ra=H(X&&aa,Y&&da);X=r(X,Y,aa,da);if(!la.length)return X(x.coords,ja,0,0,v(U,ja[0]),w(U,ja[1])),x.lengths.length&&(x.lengths.length=0),x.coords.length=M,x;let ua,
za=0,ya,Ba=0;for(const Na of la){if(Na<S)continue;let Ea=0;ya=Ba;da=Y=v(U,ja[za]);ua=aa=w(U,ja[za+1]);X(x.coords,ja,ya,za,da,ua);Ea++;za+=M;ya+=ra;for(let Fa=1;Fa<Na;Fa++,za+=M)if(da=v(U,ja[za]),ua=w(U,ja[za+1]),da!==Y||ua!==aa)X(x.coords,ja,ya,za,da-Y,ua-aa),ya+=ra,Ea++,Y=da,aa=ua;Ea>=S&&(x.lengths.push(Ea),Ba=ya)}x.coords.length=Ba;return x.coords.length?x:null}function qa(x,M,X,Y,S,U,aa){let da=Y,ja=0;for(let ra=U+X;ra<aa;ra+=X){{var la=M[ra];const ua=M[ra+1],za=M[aa],ya=M[aa+1];let Ba=M[U],Na=
M[U+1],Ea=za-Ba,Fa=ya-Na;if(0!==Ea||0!==Fa){const Ga=((la-Ba)*Ea+(ua-Na)*Fa)/(Ea*Ea+Fa*Fa);1<Ga?(Ba=za,Na=ya):0<Ga&&(Ba+=Ea*Ga,Na+=Fa*Ga)}Ea=la-Ba;Fa=ua-Na;la=Ea*Ea+Fa*Fa}la>da&&(ja=ra,da=la)}da>Y&&(ja-U>X&&qa(x,M,X,Y,S,U,ja),S(x,M,x.length,ja,M[ja],M[ja+1]),aa-ja>X&&qa(x,M,X,Y,S,ja,aa))}function wa(x,M,X,Y,S){const {coords:U,lengths:aa}=M,da=X?Y?va:na:Y?na:Oa;X=H(X,Y);if(!U.length)return x!==M&&(x.lengths.length=0,x.coords.length=0),x;if(!aa.length)return da(x.coords,U,0,0,Q(S,U[0]),p(S,U[1])),x!==
M&&(x.lengths.length=0,x.coords.length=X),x;const [ja,la]=S.scale;Y=0;for(let ra=0;ra<aa.length;ra++){const ua=aa[ra];x.lengths[ra]=ua;let za=Q(S,U[Y]),ya=p(S,U[Y+1]);da(x.coords,U,Y,Y,za,ya);Y+=X;for(let Ba=1;Ba<ua;Ba++,Y+=X)za+=U[Y]*ja,ya-=U[Y+1]*la,da(x.coords,U,Y,Y,za,ya)}x!==M&&(x.lengths.length=aa.length,x.coords.length=U.length);return x}function Ca(x,M,X,Y){let S=0,U=x[Y*M],aa=x[Y*(M+1)];for(let da=1;da<X;da++){const ja=U+x[Y*(M+da)],la=aa+x[Y*(M+da)+1],ra=(ja-U)*(la+aa);U=ja;aa=la;S+=ra}return.5*
S}const Ka=q.getLogger("esri.tasks.support.optimizedFeatureSet"),Ha={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},Oa=(x,M,X,Y,S,U)=>{x[X]=S;x[X+1]=U},na=(x,M,X,Y,S,U)=>{x[X]=S;x[X+1]=U;x[X+2]=M[Y+2]},ta=(x,M,X,Y,S,U)=>{x[X]=S;x[X+1]=U;x[X+2]=M[Y+3]},va=(x,M,X,Y,S,U)=>{x[X]=S;x[X+1]=U;x[X+2]=M[Y+2];x[X+3]=M[Y+3]},l=[],E=[];h.convertFromFeature=function(x,M,X,Y,S){l[0]=x;[x]=Z(E,l,M,X,Y,S);l.length=E.length=0;return x};h.convertFromFeatureSet=function(x,
M){const X=new k,{hasM:Y,hasZ:S,features:U,objectIdFieldName:aa,spatialReference:da,geometryType:ja,exceededTransferLimit:la,transform:ra,fields:ua}=x;ua&&(X.fields=ua);X.geometryType=ja;X.objectIdFieldName=aa||M;X.spatialReference=da;if(!X.objectIdFieldName)return Ka.error(new c("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),X;U&&Z(X.features,U,ja,S,Y,X.objectIdFieldName);la&&(X.exceededTransferLimit=la);Y&&(X.hasM=Y);S&&(X.hasZ=S);ra&&(X.transform=ra);return X};
h.convertFromFeatures=Z;h.convertFromGeometry=function(x,M,X){if(!x)return null;const Y=new m;"hasZ"in x&&null==M&&(M=x.hasZ);"hasM"in x&&null==X&&(X=x.hasM);if(I.isPoint(x))return O(null!=M?M:null!=x.z,null!=X?X:null!=x.m)(Y,x);if(I.isPolygon(x))return K(Y,x,M,X);if(I.isPolyline(x))return F(Y,x,H(M,X));if(I.isMultipoint(x))return e(Y,x,H(M,X));Ka.error("convertFromGeometry:unknown-geometry",new c(`Unable to parse unknown geometry type '${x}'`))};h.convertFromGraphics=function(x,M,X,Y,S,U){const aa=
x.length;switch(X){case "esriGeometryPoint":D(x,M,Y,S,U);break;case "esriGeometryMultipoint":d(x,M,Y,S,U);break;case "esriGeometryPolyline":L(x,M,Y,S,U);break;case "esriGeometryPolygon":g(x,M,Y,S,U);break;default:Ka.error("convertToFeatureSet:unknown-geometry",new c(`Unable to parse unknown geometry type '${X}'`))}for(Y=0;Y<M.length;Y++)x[Y+aa].geometryType=X,x[Y+aa].insertAfter=M[Y].insertAfter,x[Y+aa].groupId=M[Y].groupId;return x};h.convertFromMultipoint=e;h.convertFromMultipointFeatures=d;h.convertFromNestedArray=
T;h.convertFromPoint=function(x,M,X=O(null!=M.z,null!=M.m)){return X(x,M)};h.convertFromPointFeatures=D;h.convertFromPolygon=K;h.convertFromPolyline=F;h.convertFromPolylineFeatures=L;h.convertToFeature=function(x,M,X,Y){E[0]=x;ia(l,E,M,X,Y);x=l[0];l.length=E.length=0;return x};h.convertToFeatureSet=function(x){const {objectIdFieldName:M,spatialReference:X,transform:Y,fields:S,hasM:U,hasZ:aa,features:da,geometryType:ja,exceededTransferLimit:la,uniqueIdField:ra,queryGeometry:ua,queryGeometryType:za}=
x;x=ia([],da,ja,aa,U);const ya=ba(ua,za,!1,!1);x={features:x,fields:S,geometryType:ja,objectIdFieldName:M,spatialReference:X,uniqueIdField:ra,queryGeometry:ya};Y&&(x.transform=Y);la&&(x.exceededTransferLimit=la);U&&(x.hasM=U);aa&&(x.hasZ=aa);return x};h.convertToFeatures=ia;h.convertToGeometry=ba;h.convertToMultipoint=u;h.convertToMultipointFeatures=P;h.convertToPoint=function(x,M,X){return x?M?X?G(x):b(x):X?A(x):C(x):null};h.convertToPolygon=t;h.convertToPolyline=B;h.deltaDecodeGeometry=function(x,
M){const X=x.clone(),Y=x.coords;x=x.lengths;let S=0;for(let da=0;da<x.length;da++){const ja=x[da];var U=Y[M*S],aa=Y[M*S+1];for(let la=1;la<ja;la++)U+=Y[M*(S+la)],aa+=Y[M*(S+la)+1],X.coords[M*(S+la)]=U,X.coords[M*(S+la)+1]=aa;S+=ja}return X};h.deltaEncodeGeometry=function(x,M){const X=x.clone(),Y=x.coords;x=x.lengths;let S=0;for(let aa=0;aa<x.length;aa++){const da=x[aa];let ja=Y[M*S];var U=Y[M*S+1];for(let la=1;la<da;la++){const ra=Y[M*(S+la)],ua=Y[M*(S+la)+1];U=ua-U;X.coords[M*(S+la)]=ra-ja;X.coords[M*
(S+la)+1]=U;ja=ra;U=ua}S+=da}return X};h.generalizeOptimizedGeometry=function(x,M,X,Y,S,U,aa=X,da=Y){x.lengths.length&&(x.lengths.length=0);x.coords.length&&(x.coords.length=0);if(!M||!M.coords.length)return null;S=Ha[S];const {coords:ja,lengths:la}=M;M=H(X,Y);const ra=H(X&&aa,Y&&da);X=r(X,Y,aa,da);if(!la.length)return X(x.coords,ja,0,0,ja[0],ja[1]),x.lengths.length&&(x.lengths.length=0),x.coords.length=M,x;Y=0;U*=U;for(const ua of la){if(ua<S){Y+=ua*M;continue}aa=x.coords.length/ra;da=Y;const za=
Y+(ua-1)*M;X(x.coords,ja,x.coords.length,da,ja[da],ja[da+1]);qa(x.coords,ja,M,U,X,da,za);X(x.coords,ja,x.coords.length,za,ja[za],ja[za+1]);da=x.coords.length/ra-aa;da>=S?x.lengths.push(da):x.coords.length=aa*ra;Y+=ua*M}return x.coords.length?x:null};h.getBoundsOptimizedGeometry=function(x,M,X,Y){if(!M||!M.coords||!M.coords.length)return null;X=H(X,Y);let S=Y=Number.POSITIVE_INFINITY,U=Number.NEGATIVE_INFINITY,aa=Number.NEGATIVE_INFINITY;if(M&&M.coords){M=M.coords;for(let da=0;da<M.length;da+=X){const ja=
M[da],la=M[da+1];Y=Math.min(Y,ja);U=Math.max(U,ja);S=Math.min(S,la);aa=Math.max(aa,la)}}x[0]=Y;x[1]=S;x[2]=U;x[3]=aa;return x};h.getQuantizedArea=function(x,M){const {coords:X,lengths:Y}=x;let S=x=0;for(let U=0;U<Y.length;U++)S+=Ca(X,x,Y[U],M),x+=U;return Math.abs(S)};h.getQuantizedBoundsOptimizedGeometry=function(x,M,X,Y){X=H(X,Y);const {lengths:S,coords:U}=M;Y=M=Number.POSITIVE_INFINITY;let aa=Number.NEGATIVE_INFINITY,da=Number.NEGATIVE_INFINITY,ja=0;for(const la of S){let ra=U[ja],ua=U[ja+1];M=
Math.min(ra,M);Y=Math.min(ua,Y);aa=Math.max(ra,aa);da=Math.max(ua,da);ja+=X;for(let za=1;za<la;za++,ja+=X){const ya=U[ja],Ba=U[ja+1];ra+=ya;ua+=Ba;0>ya&&(M=Math.min(M,ra));0<ya&&(aa=Math.max(aa,ra));0>Ba?Y=Math.min(Y,ua):0<Ba&&(da=Math.max(da,ua))}}x[0]=M;x[1]=Y;x[2]=aa;x[3]=da;return x};h.getSignedQuantizedRingArea=Ca;h.quantizeOptimizedFeatureSet=function(x,M){const {geometryType:X,features:Y,hasM:S,hasZ:U}=M;if(!x)return M;for(let aa=0;aa<Y.length;aa++){const da=Y[aa],ja=da.weakClone();ja.geometry=
new m;ma(ja.geometry,da.geometry,S,U,X,x);da.centroid&&(ja.centroid=new m,ma(ja.centroid,da.centroid,S,U,"esriGeometryPoint",x));Y[aa]=ja}M.transform=x;return M};h.quantizeOptimizedGeometry=ma;h.quantizeX=v;h.quantizeY=w;h.removeCollinearVectices=function(x,M,X,Y,S){if(!M||!M.coords||!M.coords.length)return null;X=Ha[X];const {coords:U,lengths:aa}=M;M=r(Y,S,Y,S);Y=H(Y,S);let da=S=0,ja=0,la=0;for(const za of aa){da=la;M(x.coords,U,da,S,U[S],U[S+1]);S+=Y;var ra=U[S];let ya=U[S+1],Ba=ra,Na=ya;var ua=
ya/ra;da+=Y;M(x.coords,U,da,S,Ba,Na);S+=Y;for(let Ea=2;Ea<za;Ea++){ra=U[S];ya=U[S+1];const Fa=ya/ra,Ga=ua===Fa||!isFinite(ua)&&!isFinite(Fa);ua=Ga&&isFinite(Fa)?0<=ua&&0<=Fa||0>=ua&&0>=Fa:0<=Na&&0<=ya||0>=Na&&0>=ya;Ga&&ua?(Ba+=ra,Na+=ya):(Ba=ra,Na=ya,da+=Y);M(x.coords,U,da,S,Ba,Na);S+=Y;ua=Fa}da+=Y;ra=(da-la)/Y;ra>=X&&(x.lengths[ja]=ra,la=da,ja++)}x.coords.length>la&&(x.coords.length=la);x.lengths.length>ja&&(x.lengths.length=ja);return x.coords.length&&x.lengths.length?x:null};h.removeZMValues=function(x,
M,X,Y,S,U){const aa=H(X,Y);X=r(X,Y,S,U);Y=M.coords;x.coords.length=0;x.lengths.length=0;x.lengths.push(...M.lengths);for(M=0;M<Y.length;M+=aa)X(x.coords,Y,x.coords.length,M,Y[M],Y[M+1]);return x};h.unquantizeOptimizedFeatureSet=function(x){const {transform:M,features:X,hasM:Y,hasZ:S}=x;if(!M)return x;for(const U of X)U.geometry&&wa(U.geometry,U.geometry,Y,S,M),U.centroid&&wa(U.centroid,U.centroid,Y,S,M);x.transform=null;return x};h.unquantizeOptimizedGeometry=wa;h.unquantizeX=Q;h.unquantizeY=p;Object.defineProperty(h,
"__esModule",{value:!0})})},"esri/layers/graphics/OptimizedFeature":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(h){return function(){function c(q=null,I={},f,k){this.geohashY=this.geohashX=this.displayId=0;this.geometry=q;I&&(this.attributes=I);f&&(this.centroid=f);null!=k&&(this.objectId=k)}c.prototype.weakClone=function(){const q=new c(this.geometry,this.attributes,this.centroid,this.objectId);q.displayId=this.displayId;q.geohashX=this.geohashX;q.geohashY=this.geohashY;
return q};h._createClass(c,[{key:"hasGeometry",get:function(){return!(!this.geometry||!this.geometry.coords||!this.geometry.coords.length)}}]);return c}()})},"esri/layers/graphics/OptimizedFeatureSet":function(){define(function(){return function(){function h(){this.spatialReference=this.geometryType=this.geometryProperties=this.geohashFieldName=this.globalIdFieldName=this.objectIdFieldName=null;this.hasM=this.hasZ=!1;this.features=[];this.fields=[];this.transform=null;this.exceededTransferLimit=!1;
this.queryGeometry=this.queryGeometryType=this.uniqueIdField=null}h.prototype.weakClone=function(){const c=new h;c.objectIdFieldName=this.objectIdFieldName;c.globalIdFieldName=this.globalIdFieldName;c.geohashFieldName=this.geohashFieldName;c.geometryProperties=this.geometryProperties;c.geometryType=this.geometryType;c.spatialReference=this.spatialReference;c.hasZ=this.hasZ;c.hasM=this.hasM;c.features=this.features;c.fields=this.fields;c.transform=this.transform;c.exceededTransferLimit=this.exceededTransferLimit;
c.uniqueIdField=this.uniqueIdField;c.queryGeometry=this.queryGeometry;c.queryGeometryType=this.queryGeometryType;return c};return h}()})},"esri/layers/graphics/OptimizedGeometry":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(h){return function(){function c(I=[],f=[],k=!1){this.lengths=null!=I?I:[];this.coords=null!=f?f:[];this.hasIndeterminateRingOrder=k}var q=c.prototype;q.forEachVertex=function(I){let f=0;this.lengths.length||I(this.coords[0],this.coords[1]);for(let k=0;k<
this.lengths.length;k++){const m=this.lengths[k];for(let H=0;H<m;H++)I(this.coords[2*(H+f)],this.coords[2*(H+f)+1]);f+=m}};q.clone=function(){return new c(this.lengths.slice(),this.coords.slice(),this.hasIndeterminateRingOrder)};h._createClass(c,[{key:"isPoint",get:function(){return 0===this.lengths.length}}]);return c}()})},"esri/layers/graphics/data/BoundsStore":function(){define(["exports","../../../core/has","../../../core/libs/rbush/PooledRBush"],function(h,c,q){function I(m,H,r){f.minX=H[0];
f.minY=H[1];f.maxX=H[2];f.maxY=H[3];m.search(f,r)}const f={minX:0,minY:0,maxX:0,maxY:0};let k=function(){function m(){this._indexInvalid=!1;this._boundsToLoad=[];this._boundsById=new Map;this._idByBounds=new Map;this._index=new q.PooledRBush(9,c("csp-restrictions")?r=>({minX:r[0],minY:r[1],maxX:r[2],maxY:r[3]}):["[0]","[1]","[2]","[3]"]);this._loadIndex=()=>{if(this._indexInvalid){const r=Array(this._idByBounds.size);let v=0;this._idByBounds.forEach((w,Q)=>{r[v++]=Q});this._indexInvalid=!1;this._index.clear();
this._index.load(r)}else this._boundsToLoad.length&&(this._index.load(this._boundsToLoad.filter(r=>this._idByBounds.has(r))),this._boundsToLoad.length=0)}}var H=m.prototype;H.clear=function(){this._indexInvalid=!1;this._boundsToLoad.length=0;this._boundsById.clear();this._idByBounds.clear();this._index.clear()};H.delete=function(r){const v=this._boundsById.get(r);this._boundsById.delete(r);v&&(this._idByBounds.delete(v),this._indexInvalid||this._index.remove(v))};H.forEachInBounds=function(r,v){this._loadIndex();
I(this._index,r,w=>v(this._idByBounds.get(w)))};H.get=function(r){return this._boundsById.get(r)};H.has=function(r){return this._boundsById.has(r)};H.invalidateIndex=function(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)};H.set=function(r,v){if(!this._indexInvalid){const w=this._boundsById.get(r);w&&(this._index.remove(w),this._idByBounds.delete(w))}this._boundsById.set(r,v);v&&(this._idByBounds.set(v,r),this._indexInvalid||(this._boundsToLoad.push(v),5E4<this._boundsToLoad.length&&
this._loadIndex()))};return m}();h.BoundsStore=k;Object.defineProperty(h,"__esModule",{value:!0})})},"esri/core/libs/rbush/PooledRBush":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../arrayUtils ../../maybe ../../PooledArray ../../../chunks/quickselect".split(" "),function(h,c,q,I,f,k){function m(u,d){H(u,0,u.children.length,d,u)}function H(u,d,e,B,L){L||(L=new D([]));L.minX=Infinity;L.minY=Infinity;L.maxX=-Infinity;L.maxY=-Infinity;for(let F=d,t;F<e;F++)t=u.children[F],
r(L,u.leaf?B(t):t);return L}function r(u,d){u.minX=Math.min(u.minX,d.minX);u.minY=Math.min(u.minY,d.minY);u.maxX=Math.max(u.maxX,d.maxX);u.maxY=Math.max(u.maxY,d.maxY)}function v(u,d){return u.minX-d.minX}function w(u,d){return u.minY-d.minY}function Q(u){return(u.maxX-u.minX)*(u.maxY-u.minY)}function p(u){return u.maxX-u.minX+(u.maxY-u.minY)}function C(u,d){return u.minX<=d.minX&&u.minY<=d.minY&&d.maxX<=u.maxX&&d.maxY<=u.maxY}function y(u,d){return d.minX<=u.maxX&&d.minY<=u.maxY&&d.maxX>=u.minX&&
d.maxY>=u.minY}function b(u,d,e,B,L){for(d=[d,e];d.length;){e=I.assumeNonNull(d.pop());const F=I.assumeNonNull(d.pop());if(e-F<=B)continue;const t=F+Math.ceil((e-F)/B/2)*B;k.quickselect(u,t,F,e,L);d.push(F,t,t,e)}}let z=function(){function u(e=9,B){this.compareMinX=v;this.compareMinY=w;this.toBBox=function(L){return L};this._maxEntries=Math.max(4,e||9);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));B&&("function"===typeof B?this.toBBox=B:this._initFormat(B));this.clear()}var d=u.prototype;
d.destroy=function(){this.clear();A.prune();N.prune();G.prune();R.prune()};d.all=function(e){this._all(this.data,e)};d.search=function(e,B){let L=this.data;const F=this.toBBox;if(y(e,L))for(A.clear();L;){for(let t=0,g=L.children.length;t<g;t++){const K=L.children[t],T=L.leaf?F(K):K;y(e,T)&&(L.leaf?B(K):C(e,T)?this._all(K,B):A.push(K))}L=A.pop()}};d.collides=function(e){let B=this.data;const L=this.toBBox;if(!y(e,B))return!1;for(A.clear();B;){for(let F=0,t=B.children.length;F<t;F++){const g=B.children[F],
K=B.leaf?L(g):g;if(y(e,K)){if(B.leaf||C(e,K))return!0;A.push(g)}}B=A.pop()}return!1};d.load=function(e){if(!e.length)return this;if(e.length<this._minEntries){for(let B=0,L=e.length;B<L;B++)this.insert(e[B]);return this}e=this._build(e.slice(0,e.length),0,e.length-1,0);if(this.data.children.length)if(this.data.height===e.height)this._splitRoot(this.data,e);else{if(this.data.height<e.height){const B=this.data;this.data=e;e=B}this._insert(e,this.data.height-e.height-1,!0)}else this.data=e;return this};
d.insert=function(e){e&&this._insert(e,this.data.height-1);return this};d.clear=function(){this.data=new D([]);return this};d.remove=function(e){if(!e)return this;let B=this.data,L=null,F=0,t=!1,g;const K=this.toBBox(e);G.clear();for(R.clear();B||0<G.length;){if(!B){var T;B=I.assumeNonNull(G.pop());L=G.data[G.length-1];F=null!=(T=R.pop())?T:0;t=!0}if(B.leaf&&(g=q.indexOf(B.children,e,B.children.length,B.indexHint),-1!==g)){B.children.splice(g,1);G.push(B);this._condense(G);break}t||B.leaf||!C(B,K)?
L?(F++,B=L.children[F],t=!1):B=null:(G.push(B),R.push(F),F=0,L=B,B=B.children[0])}return this};d.toJSON=function(){return this.data};d.fromJSON=function(e){this.data=e;return this};d._all=function(e,B){for(N.clear();e;){var L;if(!0===e.leaf)for(const F of e.children)B(F);else N.pushArray(e.children);e=null!=(L=N.pop())?L:null}};d._build=function(e,B,L,F){var t=L-B+1,g=this._maxEntries;if(t<=g)return e=new D(e.slice(B,L+1)),m(e,this.toBBox),e;F||(F=Math.ceil(Math.log(t)/Math.log(g)),g=Math.ceil(t/
g**(F-1)));const K=new P([]);K.height=F;t=Math.ceil(t/g);g=t*Math.ceil(Math.sqrt(g));for(b(e,B,L,g,this.compareMinX);B<=L;B+=g){const T=Math.min(B+g-1,L);b(e,B,T,t,this.compareMinY);for(let Z=B;Z<=T;Z+=t)K.children.push(this._build(e,Z,Math.min(Z+t-1,T),F-1))}m(K,this.toBBox);return K};d._chooseSubtree=function(e,B,L,F){for(;;){F.push(B);if(!0===B.leaf||F.length-1===L)break;let t=Infinity,g=Infinity,K=void 0;for(let T=0,Z=B.children.length;T<Z;T++){const ba=B.children[T],ia=Q(ba),ma=(Math.max(ba.maxX,
e.maxX)-Math.min(ba.minX,e.minX))*(Math.max(ba.maxY,e.maxY)-Math.min(ba.minY,e.minY))-ia;ma<g?(g=ma,t=ia<t?ia:t,K=ba):ma===g&&ia<t&&(t=ia,K=ba)}B=K||B.children[0]}return B};d._insert=function(e,B,L){var F=this.toBBox;L=L?e:F(e);G.clear();F=this._chooseSubtree(L,this.data,B,G);F.children.push(e);for(r(F,L);0<=B;)if(G.data[B].children.length>this._maxEntries)this._split(G,B),B--;else break;this._adjustParentBBoxes(L,G,B)};d._split=function(e,B){const L=e.data[B];var F=L.children.length;const t=this._minEntries;
this._chooseSplitAxis(L,t,F);(F=this._chooseSplitIndex(L,t,F))?(F=L.children.splice(F,L.children.length-F),F=L.leaf?new D(F):new P(F),F.height=L.height,m(L,this.toBBox),m(F,this.toBBox),B?e.data[B-1].children.push(F):this._splitRoot(L,F)):console.log("  Error: assertion failed at PooledRBush._split: no valid split index")};d._splitRoot=function(e,B){this.data=new P([e,B]);this.data.height=e.height+1;m(this.data,this.toBBox)};d._chooseSplitIndex=function(e,B,L){let F,t,g=void 0;F=t=Infinity;for(let T=
B;T<=L-B;T++){var K=H(e,0,T,this.toBBox);const Z=H(e,T,L,this.toBBox),ba=Math.max(0,Math.min(K.maxX,Z.maxX)-Math.max(K.minX,Z.minX))*Math.max(0,Math.min(K.maxY,Z.maxY)-Math.max(K.minY,Z.minY));K=Q(K)+Q(Z);ba<F?(F=ba,g=T,t=K<t?K:t):ba===F&&K<t&&(t=K,g=T)}return g};d._chooseSplitAxis=function(e,B,L){const F=e.leaf?this.compareMinX:v,t=e.leaf?this.compareMinY:w,g=this._allDistMargin(e,B,L,F);B=this._allDistMargin(e,B,L,t);g<B&&e.children.sort(F)};d._allDistMargin=function(e,B,L,F){e.children.sort(F);
F=this.toBBox;var t=H(e,0,B,F);const g=H(e,L-B,L,F);let K=p(t)+p(g);for(let T=B;T<L-B;T++){const Z=e.children[T];r(t,e.leaf?F(Z):Z);K+=p(t)}for(L=L-B-1;L>=B;L--)t=e.children[L],r(g,e.leaf?F(t):t),K+=p(g);return K};d._adjustParentBBoxes=function(e,B,L){for(;0<=L;L--)r(B.data[L],e)};d._condense=function(e){for(let B=e.length-1;0<=B;B--){const L=e.data[B];if(0===L.children.length)if(0<B){const F=e.data[B-1],t=F.children;t.splice(q.indexOf(t,L,t.length,F.indexHint),1)}else this.clear();else m(L,this.toBBox)}};
d._initFormat=function(e){const B=["return a"," - b",";"];this.compareMinX=new Function("a","b",B.join(e[0]));this.compareMinY=new Function("a","b",B.join(e[1]));this.toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")};return u}();const A=new f,N=new f,G=new f,R=new f({deallocator:void 0});f=function(){this.minY=this.minX=Infinity;this.maxY=this.maxX=-Infinity};let O=function(u){function d(){var e=u.apply(this,arguments)||this;e.height=1;e.indexHint=
new q.PositionHint;return e}c._inheritsLoose(d,u);return d}(f),D=function(u){function d(e){var B=u.call(this)||this;B.children=e;B.leaf=!0;return B}c._inheritsLoose(d,u);return d}(O),P=function(u){function d(e){var B=u.call(this)||this;B.children=e;B.leaf=!1;return B}c._inheritsLoose(d,u);return d}(O);h.BBox=f;h.PooledRBush=z;h.default=z;Object.defineProperty(h,"__esModule",{value:!0})})},"esri/chunks/quickselect":function(){define(["exports"],function(h){var c={exports:{}};(function(q){(function(I){I=
I();void 0!==I&&(q.exports=I)})(function(){function I(m,H,r,v,w){for(;v>r;){if(600<v-r){var Q=v-r+1,p=H-r+1,C=Math.log(Q),y=.5*Math.exp(2*C/3);C=.5*Math.sqrt(C*y*(Q-y)/Q)*(0>p-Q/2?-1:1);I(m,H,Math.max(r,Math.floor(H-p*y/Q+C)),Math.min(v,Math.floor(H+(Q-p)*y/Q+C)),w)}Q=m[H];p=r;y=v;f(m,r,H);for(0<w(m[v],Q)&&f(m,r,v);p<y;){f(m,p,y);p++;for(y--;0>w(m[p],Q);)p++;for(;0<w(m[y],Q);)y--}0===w(m[r],Q)?f(m,r,y):(y++,f(m,y,v));y<=H&&(r=y+1);H<=y&&(v=y-1)}}function f(m,H,r){var v=m[H];m[H]=m[r];m[r]=v}function k(m,
H){return m<H?-1:m>H?1:0}return function(m,H,r,v,w){I(m,H,r||0,v||m.length-1,w||k)}})})(c);h.quickselect=c.exports})},"esri/layers/graphics/data/optimizedFeatureQueryEngineAdapter":function(){define(["exports","../centroid","../OptimizedFeature","../OptimizedGeometry"],function(h,c,q,I){const f={getObjectId(k){return k.objectId},getAttributes(k){return k.attributes},getAttribute(k,m){return k.attributes[m]},cloneWithGeometry(k,m){return new q(m,k.attributes,null,k.objectId)},getGeometry(k){return k.geometry},
getCentroid(k,m){k.centroid||(k.centroid=c.getCentroidOptimizedGeometry(new I,k.geometry,m.hasZ,m.hasM));return k.centroid}};h.default=f;h.optimizedFeatureQueryEngineAdapter=f;Object.defineProperty(h,"__esModule",{value:!0})})},"esri/layers/graphics/centroid":function(){define(["exports"],function(h){function c(I,f,k,m,H,r,v=1){r=H?r?4:3:r?3:2;let w=k,Q=k+r,p=0,C=0,y=k=0,b=0;for(let z=0,A=m-1;z<A;z++,w+=r,Q+=r){m=f[w];const N=f[w+1],G=f[w+2],R=f[Q],O=f[Q+1],D=f[Q+2];let P=m*O-R*N;y+=P;p+=(m+R)*P;
C+=(N+O)*P;H&&(P=m*D-R*G,k+=(G+D)*P,b+=P);m<I[0]&&(I[0]=m);m>I[1]&&(I[1]=m);N<I[2]&&(I[2]=N);N>I[3]&&(I[3]=N);H&&(G<I[4]&&(I[4]=G),G>I[5]&&(I[5]=G))}0<y*v&&(y*=-1);0<b*v&&(b*=-1);if(!y)return null;I=[p,C,.5*y];H&&(I[3]=k,I[4]=.5*b);return I}function q(I,f,k,m,H){H=m?H?4:3:H?3:2;let r=f,v=f+H,w=0,Q=0,p=0,C=0;for(let A=0,N=k-1;A<N;A++,r+=H,v+=H){var y=I[r];const G=I[r+1],R=I[r+2],O=I[v],D=I[v+1],P=I[v+2];if(m){{var b=O-y;var z=D-G;const u=P-R;b=Math.sqrt(b*b+z*z+u*u)}}else b=O-y,z=D-G,b=Math.sqrt(b*
b+z*z);b&&(w+=b,m?(y=[y+.5*(O-y),G+.5*(D-G),R+.5*(P-R)],Q+=b*y[0],p+=b*y[1],C+=b*y[2]):(y=[y+.5*(O-y),G+.5*(D-G)],Q+=b*y[0],p+=b*y[1]))}return 0<w?m?[Q/w,p/w,C/w]:[Q/w,p/w]:0<k?m?[I[f],I[f+1],I[f+2]]:[I[f],I[f+1]]:null}h.getCentroidOptimizedGeometry=function(I,f,k,m,H){if(!f||!f.lengths.length)return null;const r="upperLeft"===(null==H?void 0:H.originPosition)?-1:1;I.lengths.length&&(I.lengths.length=0);I.coords.length&&(I.coords.length=0);H=I.coords;const v=[],w=k?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,
Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:Q,coords:p}=f,C=k?m?4:3:m?3:2;let y=0;for(var b of Q){const z=c(w,p,y,b,k,m,r);z&&v.push(z);y+=b*C}v.sort((z,A)=>{let N=r*z[2]-r*A[2];0===N&&k&&(N=z[4]-A[4]);return N});v.length&&(b=6*v[0][2],H[0]=v[0][0]/b,H[1]=v[0][1]/b,k&&(b=6*v[0][4],H[2]=0!==b?v[0][3]/b:0),H[0]<w[0]||H[0]>w[1]||H[1]<
w[2]||H[1]>w[3]||k&&(H[2]<w[4]||H[2]>w[5]))&&(H.length=0);if(!H.length)if(f=f.lengths[0]?q(p,0,Q[0],k,m):null)H[0]=f[0],H[1]=f[1],k&&2<f.length&&(H[2]=f[2]);else return null;return I};h.lineCentroid=q;Object.defineProperty(h,"__esModule",{value:!0})})},"esri/layers/graphics/data/QueryEngine":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../core/lang ../../../core/maybe ../../../core/MemCache ../../../core/unitUtils ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../../../geometry/support/boundsUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ./attributeSupport ./projectionSupport ./QueryEngineCapabilities ./QueryEngineResult ./spatialQuerySupport ./timeSupport ./utils ../../support/FieldsIndex ../../support/PromiseQueue ../../../smartMapping/support/utils".split(" "),
function(h,c,q,I,f,k,m,H,r,v,w,Q,p,C,y,b,z,A,N,G,R,O,D){function P(t){return t.every(g=>"exceedslimit"!==g.statisticType)}const u=new Set,d=new k.MemCacheStorage(2E6);let e=0,B=function(){function t(K){this.capabilities={query:b.queryCapabilities};this.geometryType=K.geometryType;this.hasM=K.hasM;this.hasZ=K.hasZ;this.objectIdField=K.objectIdField;this.spatialReference=K.spatialReference;this.definitionExpression=K.definitionExpression;this.featureStore=K.featureStore;this.aggregateAdapter=K.aggregateAdapter;
this._changeHandle=this.featureStore.events.on("changed",()=>this.clearCache());this.timeInfo=K.timeInfo;K.cacheSpatialQueries&&(this._geometryQueryCache=new k.MemCache(e++ +"$$",d));this.fieldsIndex=new R(K.fields);K.scheduler&&K.priority&&(this._frameQueue=new O,this._frameTask=K.scheduler.registerTask(K.priority,this))}var g=t.prototype;g.destroy=function(){this._frameTask&&(this._frameTask.remove(),this._frameTask=null,this._frameQueue.cancelAll(),this._frameQueue=null);this.clearCache();this._geometryQueryCache&&
this._geometryQueryCache.destroy();this._changeHandle&&(this._changeHandle.remove(),this._changeHandle=null);this.fieldsIndex.destroy()};g.clearCache=function(){this._geometryQueryCache&&this._geometryQueryCache.clear();this._timeExtent=this._allItems=null};g.executeQuery=function(){var K=c._asyncToGenerator(function*(T={},Z){let ba=I.clone(T),ia;try{ba=yield this._schedule(()=>G.normalizeQuery(ba,this.definitionExpression,this.spatialReference),Z),ba=yield this._reschedule(()=>this._checkQuerySupport(ba),
Z),ia=yield this._reschedule(()=>this._executeGeometryQuery(ba,Z),Z),ia=yield this._reschedule(()=>ia.executeAggregateIdsQuery(ba),Z),ia=yield this._reschedule(()=>ia.executeObjectIdsQuery(ba),Z),ia=yield this._reschedule(()=>ia.executeTimeQuery(ba),Z),ia=yield this._reschedule(()=>ia.executeAttributesQuery(ba),Z)}catch(ma){if(ma!==G.QUERY_ENGINE_EMPTY_RESULT)throw ma;ia=new z([],null,this)}return ia.createQueryResponse(ba)});return function(){return K.apply(this,arguments)}}();g.executeQueryForCount=
function(){var K=c._asyncToGenerator(function*(T={},Z){let ba=I.clone(T),ia;ba.returnGeometry=!1;ba.returnCentroid=!1;ba.outSR=null;try{ba=yield this._schedule(()=>G.normalizeQuery(ba,this.definitionExpression,this.spatialReference),Z),ba=yield this._reschedule(()=>this._checkQuerySupport(ba),Z),ia=yield this._reschedule(()=>this._executeGeometryQuery(ba,Z),Z),ia=yield this._reschedule(()=>ia.executeAggregateIdsQuery(ba),Z),ia=yield this._reschedule(()=>ia.executeObjectIdsQuery(ba),Z),ia=yield this._reschedule(()=>
ia.executeTimeQuery(ba),Z),ia=yield this._reschedule(()=>ia.executeAttributesQuery(ba),Z)}catch(ma){if(ma!==G.QUERY_ENGINE_EMPTY_RESULT)throw ma;return 0}return ia.createQueryResponseForCount(ba)});return function(){return K.apply(this,arguments)}}();g.executeQueryForExtent=function(){var K=c._asyncToGenerator(function*(T={},Z){let ba=I.clone(T),ia;T=ba.outSR;try{ba=yield this._schedule(()=>G.normalizeQuery(ba,this.definitionExpression,this.spatialReference),Z);ba=yield this._reschedule(()=>this._checkQuerySupport(ba),
Z);ba.returnGeometry=!0;ba.returnCentroid=!1;ba.outSR=null;ia=yield this._reschedule(()=>this._executeGeometryQuery(ba,Z),Z);ia=yield this._reschedule(()=>ia.executeAggregateIdsQuery(ba),Z);ia=yield this._reschedule(()=>ia.executeObjectIdsQuery(ba),Z);ia=yield this._reschedule(()=>ia.executeTimeQuery(ba),Z);ia=yield this._reschedule(()=>ia.executeAttributesQuery(ba),Z);const ma=ia.size;if(!ma)return{count:ma,extent:null};H.set(F,H.NEGATIVE_INFINITY);this.featureStore.forEachBounds(ia.items,Ca=>H.expandWithAABB(F,
Ca),L);const qa={xmin:F[0],ymin:F[1],xmax:F[3],ymax:F[4],spatialReference:G.cleanFromGeometryEngine(this.spatialReference)};this.hasZ&&isFinite(F[2])&&isFinite(F[5])&&(qa.zmin=F[2],qa.zmax=F[5]);const wa=y.project(qa,ia.spatialReference,T);wa.spatialReference=G.cleanFromGeometryEngine(T||this.spatialReference);if(0===wa.xmax-wa.xmin){const Ca=m.getMetersPerUnitForSR(wa.spatialReference);wa.xmin-=Ca;wa.xmax+=Ca}if(0===wa.ymax-wa.ymin){const Ca=m.getMetersPerUnitForSR(wa.spatialReference);wa.ymin-=
Ca;wa.ymax+=Ca}if(this.hasZ&&null!=wa.zmin&&null!=wa.zmax&&0===wa.zmax-wa.zmin){const Ca=m.getMetersPerUnitForSR(wa.spatialReference);wa.zmin-=Ca;wa.zmax+=Ca}return{count:ma,extent:wa}}catch(ma){if(ma===G.QUERY_ENGINE_EMPTY_RESULT)return{count:0,extent:null};throw ma;}});return function(){return K.apply(this,arguments)}}();g.executeQueryForIds=function(){var K=c._asyncToGenerator(function*(T={},Z){return this.executeQueryForIdSet(T,Z).then(ba=>Array.from(ba))});return function(){return K.apply(this,
arguments)}}();g.executeQueryForIdSet=function(){var K=c._asyncToGenerator(function*(T={},Z){let ba=I.clone(T),ia;ba.returnGeometry=!1;ba.returnCentroid=!1;ba.outSR=null;try{ba=yield this._schedule(()=>G.normalizeQuery(ba,this.definitionExpression,this.spatialReference),Z);ba=yield this._reschedule(()=>this._checkQuerySupport(ba),Z);ia=yield this._reschedule(()=>this._executeGeometryQuery(ba,Z),Z);ia=yield this._reschedule(()=>ia.executeAggregateIdsQuery(ba),Z);ia=yield this._reschedule(()=>ia.executeObjectIdsQuery(ba),
Z);ia=yield this._reschedule(()=>ia.executeTimeQuery(ba),Z);ia=yield this._reschedule(()=>ia.executeAttributesQuery(ba),Z);const ma=ia.items,qa=new Set;yield this._reschedule(()=>{for(const wa of ma)qa.add(ia.featureAdapter.getObjectId(wa))},Z);return qa}catch(ma){if(ma===G.QUERY_ENGINE_EMPTY_RESULT)return new Set;throw ma;}});return function(){return K.apply(this,arguments)}}();g.executeQueryForSnapping=function(){var K=c._asyncToGenerator(function*(T,Z){const {point:ba,distance:ia,types:ma}=T;if(0===
ma)return{candidates:[]};const qa=yield this._reschedule(()=>this._checkQuerySupport(T.query),Z),wa=!p.equals(ba.spatialReference,this.spatialReference);wa&&(yield y.checkProjectionSupport(ba.spatialReference,this.spatialReference));var Ca="number"===typeof ia?ia:ia.x,Ka="number"===typeof ia?ia:ia.y;Ca={xmin:ba.x-Ca,xmax:ba.x+Ca,ymin:ba.y-Ka,ymax:ba.y+Ka,spatialReference:ba.spatialReference};Ca=wa?y.project(Ca,this.spatialReference):Ca;if(!Ca)return{candidates:[]};Ka=(yield Q.normalizeCentralMeridian(w.fromJSON(ba),
null,{signal:Z}))[0];const Ha=(yield Q.normalizeCentralMeridian(w.fromJSON(Ca),null,{signal:Z}))[0];if(f.isNone(Ka)||f.isNone(Ha))return{candidates:[]};let Oa=new z(this._searchFeatures(this._getQueryBBoxes(Ha.toJSON())),null,this);Oa=yield this._reschedule(()=>Oa.executeObjectIdsQuery(qa),Z);Oa=yield this._reschedule(()=>Oa.executeTimeQuery(qa),Z);Oa=yield this._reschedule(()=>Oa.executeAttributesQuery(qa),Z);Z=Ka.toJSON();Z=wa?y.project(Z,this.spatialReference):Z;return Oa.createSnappingResponse({...T,
point:Z,distance:wa?Math.max(Ca.xmax-Ca.xmin,Ca.ymax-Ca.ymin)/2:ia},ba.spatialReference)});return function(T,Z){return K.apply(this,arguments)}}();g.executeQueryForLatestObservations=function(){var K=c._asyncToGenerator(function*(T={},Z){if(!this.timeInfo||!this.timeInfo.trackIdField)throw new q("feature-store:unsupported-query","Missing timeInfo or timeInfo.trackIdField",{query:T,timeInfo:this.timeInfo});let ba=I.clone(T),ia;try{ba=yield this._schedule(()=>G.normalizeQuery(ba,this.definitionExpression,
this.spatialReference),Z),ba=yield this._reschedule(()=>this._checkQuerySupport(ba),Z),ia=yield this._reschedule(()=>this._executeGeometryQuery(ba,Z),Z),ia=yield this._reschedule(()=>ia.executeAggregateIdsQuery(ba),Z),ia=yield this._reschedule(()=>ia.executeObjectIdsQuery(ba),Z),ia=yield this._reschedule(()=>ia.executeTimeQuery(ba),Z),ia=yield this._reschedule(()=>ia.executeAttributesQuery(ba),Z),ia=yield this._reschedule(()=>ia.filterLatest(),Z)}catch(ma){if(ma!==G.QUERY_ENGINE_EMPTY_RESULT)throw ma;
ia=new z([],null,this)}return ia.createQueryResponse(ba)});return function(){return K.apply(this,arguments)}}();g.executeQueryForSummaryStatistics=function(){var K=c._asyncToGenerator(function*(T={},Z,ba){T=I.clone(T);let ia;try{T=yield this._schedule(()=>G.normalizeQuery(T,this.definitionExpression,this.spatialReference),ba),T=yield this._reschedule(()=>this._checkSummaryStatisticsSupport(T,Z),ba),ia=yield this._reschedule(()=>this._executeGeometryQuery(T,ba),ba),ia=yield this._reschedule(()=>ia.executeAggregateIdsQuery(T),
ba),ia=yield this._reschedule(()=>ia.executeObjectIdsQuery(T),ba),ia=yield this._reschedule(()=>ia.executeTimeQuery(T),ba),ia=yield this._reschedule(()=>ia.executeAttributesQuery(T),ba)}catch(ma){if(ma!==G.QUERY_ENGINE_EMPTY_RESULT)throw ma;ia=new z([],null,this)}return ia.createSummaryStatisticsResponse(T,Z)});return function(){return K.apply(this,arguments)}}();g._schedule=function(){var K=c._asyncToGenerator(function*(T,Z){return this._frameQueue?this._frameQueue.push(T,Z):T()});return function(T,
Z){return K.apply(this,arguments)}}();g._reschedule=function(){var K=c._asyncToGenerator(function*(T,Z){return this._frameQueue?this._frameQueue.unshift(T,Z):T()});return function(T,Z){return K.apply(this,arguments)}}();g.runTask=function(K){for(this._budget=K;!K.done&&this._frameQueue&&this._frameQueue.process();)K.madeProgress();this._budget=null};g._getAll=function(){if(!this._allItems){const K=[];this.featureStore.forEach(T=>K.push(T));this._allItems=new z(K,null,this)}return this._allItems};
g._executeGeometryQuery=function(){var K=c._asyncToGenerator(function*(T,Z){var ba=this;const {geometry:ia,outSR:ma,spatialRel:qa,returnGeometry:wa,returnCentroid:Ca}=T,Ka=wa||Ca,Ha=p.isValid(ma)&&!p.equals(this.spatialReference,ma),Oa=this._geometryQueryCache?Ha&&Ka?JSON.stringify({geometry:ia,spatialRelationship:qa,outSpatialReference:ma}):JSON.stringify({geometry:ia,spatialRelationship:qa}):null;if(Oa){var na=this._geometryQueryCache.get(Oa);if(!f.isUndefined(na))return na}na=function(){var E=
c._asyncToGenerator(function*(x){if(Ha&&Ka)return x=yield x.project(ma),Oa&&ba._geometryQueryCache.put(Oa,x,x.size||1),x;Oa&&ba._geometryQueryCache.put(Oa,x,x.size||1);return x});return function(x){return E.apply(this,arguments)}}();if(!ia)return na(this._getAll());const ta=this.featureAdapter;if("esriSpatialRelDisjoint"===qa){T=this._searchFeatures(this._getQueryBBoxes(ia));if(!T.length)return na(this._getAll());let E,x;const M=new Set;for(var va of T)M.add(ta.getObjectId(va));yield this._reschedule(()=>
{let X=0;E=Array(M.size);this.featureStore.forEach(Y=>E[X++]=Y);x=M},Z);T=yield this._reschedule(c._asyncToGenerator(function*(){const X=yield A.getSpatialQueryOperator(qa,ia,ba.geometryType,ba.hasZ,ba.hasM);return new z(yield ba._runSpatialFilter(E,Y=>!x.has(ta.getObjectId(Y))||X(ta.getGeometry(Y)),Z),ia,ba)}),Z);return na(T)}va=this._searchFeatures(this._getQueryBBoxes(ia));if(!va.length)return na=new z([],ia,this),Oa&&this._geometryQueryCache.put(Oa,na,na.size||1),na;if(this._canExecuteSoloPass(ia,
T))return na(new z(va,ia,this));const l=yield A.getSpatialQueryOperator(qa,ia,this.geometryType,this.hasZ,this.hasM);T=yield this._runSpatialFilter(va,E=>l(ta.getGeometry(E)),Z);return na(new z(T,ia,this))});return function(T,Z){return K.apply(this,arguments)}}();g._runSpatialFilter=function(){var K=c._asyncToGenerator(function*(T,Z,ba){var ia=this;if(!Z)return T;if(!this._budget)return T.filter(Ca=>Z(Ca));let ma=0;const qa=[],wa=function(){var Ca=c._asyncToGenerator(function*(){for(;ma<T.length;){const Ka=
T[ma];Z(Ka)&&qa.push(Ka);ia._budget.done&&(yield ia._reschedule(()=>wa(),ba));++ma}});return function(){return Ca.apply(this,arguments)}}();return this._reschedule(()=>wa(),ba).then(()=>qa)});return function(T,Z,ba){return K.apply(this,arguments)}}();g._canExecuteSoloPass=function(K,T){const {geometryType:Z}=this;({spatialRel:T}=T);return A.canQueryWithRBush(K)&&("esriSpatialRelEnvelopeIntersects"===T||"esriGeometryPoint"===Z&&("esriSpatialRelIntersects"===T||"esriSpatialRelContains"===T||"esriSpatialRelWithin"===
T))};g._getQueryBBoxes=function(K){if(A.canQueryWithRBush(K)){if(w.isExtent(K))return[r.fromValues(K.xmin,K.ymin,K.xmax,K.ymax)];if(w.isPolygon(K))return K.rings.map(T=>r.fromValues(Math.min(T[0][0],T[2][0]),Math.min(T[0][1],T[2][1]),Math.max(T[0][0],T[2][0]),Math.max(T[0][1],T[2][1])))}return[v.getBoundsXY(r.create(),K)]};g._searchFeatures=function(K){for(const ba of K)this.featureStore.forEachInBounds(ba,ia=>{u.add(ia)});const T=Array(u.size);let Z=0;u.forEach(ba=>T[Z++]=ba);u.clear();return T};
g._checkSummaryStatisticsSupport=function(){var K=c._asyncToGenerator(function*(T,Z){if(0>T.distance||null!=T.geometryPrecision||T.multipatchOption||T.pixelSize||T.relationParam||T.text||T.outStatistics||T.groupByFieldsForStatistics||T.having||T.orderByFields)throw new q("feature-store:unsupported-query","Unsupported query options",{query:T});return Promise.all([this._checkAttributesQuerySupport(T),this._checkSummaryStatisticsParamsSupport(Z),A.checkSpatialQuerySupport(T,this.geometryType,this.spatialReference),
y.checkProjectionSupport(this.spatialReference,T.outSR)]).then(()=>T)});return function(T,Z){return K.apply(this,arguments)}}();g._checkSummaryStatisticsParamsSupport=function(){var K=c._asyncToGenerator(function*(T){const Z=yield D.getFieldsList({field:T.field,normalizationField:T.normalizationField,valueExpression:T.valueExpression});if(!Z.length)throw new q("feature-store:unsupported-query","params should have atleast a field or valueExpression",{params:T});C.validateFields(this.fieldsIndex,Z,
"params contains missing fields")});return function(T){return K.apply(this,arguments)}}();g._checkQuerySupport=function(){var K=c._asyncToGenerator(function*(T){if(0>T.distance||null!=T.geometryPrecision||T.multipatchOption||T.pixelSize||T.relationParam||T.text)throw new q("feature-store:unsupported-query","Unsupported query options",{query:T});return Promise.all([this._checkAttributesQuerySupport(T),this._checkStatisticsQuerySupport(T),A.checkSpatialQuerySupport(T,this.geometryType,this.spatialReference),
y.checkProjectionSupport(this.spatialReference,T.outSR)]).then(()=>T)});return function(T){return K.apply(this,arguments)}}();g._checkAttributesQuerySupport=function(K){const {outFields:T,orderByFields:Z,returnDistinctValues:ba,outStatistics:ia}=K,ma=ia?ia.map(qa=>qa.outStatisticFieldName&&qa.outStatisticFieldName.toLowerCase()):[];if(Z&&0<Z.length){const qa=Z.map(wa=>{const Ca=wa.toLowerCase();return-1<Ca.indexOf(" asc")?Ca.split(" asc")[0]:-1<Ca.indexOf(" desc")?Ca.split(" desc")[0]:wa}).filter(wa=>
-1===ma.indexOf(wa));C.validateFields(this.fieldsIndex,qa,"orderByFields contains missing fields")}if(T&&0<T.length)C.validateFields(this.fieldsIndex,T,"outFields contains missing fields");else if(ba)throw new q("feature-store:unsupported-query","outFields should be specified for returnDistinctValues",{query:K});C.validateWhere(this.fieldsIndex,K.where)};g._checkStatisticsQuerySupport=function(){var K=c._asyncToGenerator(function*(T){const {outStatistics:Z,groupByFieldsForStatistics:ba,having:ia}=
T;var ma=ba&&ba.length,qa=Z&&Z.length;if(ia){if(!ma||!qa)throw new q("feature-store:unsupported-query","outStatistics and groupByFieldsForStatistics should be specified with having",{query:T});C.validateHaving(this.fieldsIndex,ia,Z)}if(qa&&P(Z)){qa=Z.map(wa=>wa.onStatisticField);C.validateFields(this.fieldsIndex,qa,"onStatisticFields contains missing fields");ma&&C.validateFields(this.fieldsIndex,ba,"groupByFieldsForStatistics contains missing fields");for(const wa of Z){const {onStatisticField:Ca,
statisticType:Ka}=wa;if(("percentile_disc"===Ka||"percentile_cont"===Ka)&&"statisticParameters"in wa){if({statisticParameters:ma}=wa,!ma)throw new q("feature-store:unsupported-query","statisticParamters should be set for percentile type",{definition:wa,query:T});}else if("count"!==Ka&&Ca&&C.hasInvalidFieldType(Ca,this.fieldsIndex))throw new q("feature-store:unsupported-query","outStatistics contains non-numeric fields",{definition:wa,query:T});}}});return function(T){return K.apply(this,arguments)}}();
c._createClass(t,[{key:"featureAdapter",get:function(){return this.featureStore.featureAdapter}},{key:"fullExtent",get:function(){const K=this.featureStore.fullBounds;return K?{xmin:K[0],ymin:K[1],xmax:K[2],ymax:K[3],spatialReference:G.cleanFromGeometryEngine(this.spatialReference)}:null}},{key:"timeExtent",get:function(){return this.timeInfo?this._timeExtent?this._timeExtent:this._timeExtent=N.getTimeExtent(this.timeInfo,this.featureStore):null}},{key:"running",get:function(){return 0<this._frameQueue.length}}]);
return t}();const L=H.create(),F=H.create();h.Feature=function(t,g=null,K,T,Z){this.attributes=t;this.geometry=K;this.centroid=T;this.filterFlags=Z;this.groupId=-1;this.displayId=g};h.default=B;Object.defineProperty(h,"__esModule",{value:!0})})},"esri/core/MemCache":function(){define(["exports","../chunks/_rollupPluginBabelHelpers","./PooledArray"],function(h,c,q){let I=function(){function k(H,r,v){this._namespace=H;this._storage=r;this._removeFunc=!1;this._miss=this._hit=0;this._storage.register(this);
this._namespace+=":";v&&(this._storage.registerRemoveFunc(this._namespace,v),this._removeFunc=!0)}var m=k.prototype;m.destroy=function(){this._storage.clear(this._namespace);this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace);this._storage.deregister(this);this._storage=null};m.resetHitRate=function(){this._hit=this._miss=0};m.put=function(H,r,v,w=0){this._storage.put(this._namespace+H,r,v,w)};m.get=function(H){H=this._storage.get(this._namespace+H);void 0===H?++this._miss:++this._hit;
return H};m.pop=function(H){H=this._storage.pop(this._namespace+H);void 0===H?++this._miss:++this._hit;return H};m.updateSize=function(H,r,v){this._storage.updateSize(this._namespace+H,r,v)};m.clear=function(){this._storage.clear(this._namespace)};m.clearAll=function(){this._storage.clearAll()};m.getStats=function(){return this._storage.getStats()};m.resetStats=function(){this._storage.resetStats()};c._createClass(k,[{key:"namespace",get:function(){return this._namespace.slice(0,-1)}},{key:"hitRate",
get:function(){return this._hit/(this._hit+this._miss)}},{key:"size",get:function(){return this._storage.size}},{key:"maxSize",get:function(){return this._storage.maxSize}}]);return k}(),f=function(){function k(H=10485760){this._maxSize=H;this._db=new Map;this._miss=this._hit=this._size=0;this._removeFuncs=new q;this._users=new q}var m=k.prototype;m.destroy=function(){this.clearAll();this._removeFuncs.clear();this._users.clear();this._db=null};m.register=function(H){this._users.push(H)};m.deregister=
function(H){this._users.removeUnordered(H)};m.registerRemoveFunc=function(H,r){this._removeFuncs.push([H,r])};m.deregisterRemoveFunc=function(H){this._removeFuncs.filterInPlace(r=>r[0]!==H)};m.put=function(H,r,v,w){const Q=this._db.get(H);Q&&(this._size-=Q.size,this._db.delete(H),Q.entry!==r&&this._notifyRemoved(H,Q.entry));v>this._maxSize?this._notifyRemoved(H,r):void 0===r?console.warn("Refusing to cache undefined entry "):!v||0>v?console.warn("Refusing to cache entry with invalid size "+v):(w=
1+Math.max(w,-3)- -3,this._db.set(H,{entry:r,size:v,lifetime:w,lives:w}),this._size+=v,this._checkSizeLimit())};m.updateSize=function(H,r,v){const w=this._db.get(H);w&&w.entry===r&&(this._size-=w.size,v>this._maxSize?(this._db.delete(H),this._notifyRemoved(H,r)):(w.size=v,this._size+=v,this._checkSizeLimit()))};m.pop=function(H){const r=this._db.get(H);if(r)return this._size-=r.size,this._db.delete(H),++this._hit,r.entry;++this._miss};m.get=function(H){const r=this._db.get(H);if(void 0===r)++this._miss;
else return this._db.delete(H),r.lives=r.lifetime,this._db.set(H,r),++this._hit,r.entry};m.getStats=function(){const H={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},r={},v=[];this._db.forEach((p,C)=>{const y=p.lifetime;v[y]=(v[y]||0)+p.size;this._users.forAll(b=>{b=b.namespace;C.startsWith(b)&&(r[b]=(r[b]||0)+p.size)})});const w={};this._users.forAll(p=>{const C=p.namespace;!isNaN(p.hitRate)&&
0<p.hitRate?(r[C]=r[C]||0,w[C]=Math.round(100*p.hitRate)+"%"):w[C]="0%"});var Q=Object.keys(r);Q.forEach(p=>r[p]=r[p]/this._size*100);Q.sort((p,C)=>r[C]-r[p]);Q.forEach(p=>H[p]=Math.round(r[p])+"% / "+w[p]);for(Q=v.length-1;0<=Q;--Q){const p=v[Q];p&&(H["Priority "+(Q+-3-1)]=Math.round(p/this.size*100)+"%")}return H};m.resetStats=function(){this._hit=this._miss=0;this._users.forAll(H=>H.resetHitRate())};m.clear=function(H){this._db.forEach((r,v)=>{v.startsWith(H)&&(this._size-=r.size,this._db.delete(v),
this._notifyRemoved(v,r.entry))})};m.clearAll=function(){this._db.forEach((H,r)=>this._notifyRemoved(r,H.entry));this._size=0;this._db.clear()};m._getHitRate=function(){return this._hit/(this._hit+this._miss)};m._notifyRemoved=function(H,r){this._removeFuncs.forAll(v=>{if(H.startsWith(v[0]))v[1](r)})};m._checkSizeLimit=function(){if(!(this._size<=this._maxSize))for(const [H,r]of this._db)if(this._db.delete(H),1>=r.lives?(this._size-=r.size,this._notifyRemoved(H,r.entry)):(--r.lives,this._db.set(H,
r)),this._size<=.9*this.maxSize)break};c._createClass(k,[{key:"size",get:function(){return this._size}},{key:"maxSize",get:function(){return this._maxSize},set:function(H){this._maxSize=Math.max(H,0);this._checkSizeLimit()}}]);return k}();h.MIN_PRIORITY=-3;h.MemCache=I;h.MemCacheStorage=f;Object.defineProperty(h,"__esModule",{value:!0})})},"esri/core/unitUtils":function(){define("exports ./has ./jsonMap ../geometry/projectionEllipsoid ../geometry/SpatialReference ../geometry/support/Ellipsoid ../geometry/support/spatialReferenceUtils ../geometry/support/WKIDUnitConversion".split(" "),
function(h,c,q,I,f,k,m,H){function r(t){if(t=B[t])return t;throw Error("unknown measure");}function v(t){return e[t].baseUnit}function w(t,g=null){g=g||r(t);return e[g].baseUnit===t}function Q(t,g,K){if(g===K)return t;const T=r(g);if(T!==r(K))throw Error("incompatible units");t=w(g,T)?t:t*e[T].units[g].inBaseUnits;return w(K,T)?t:t/e[T].units[K].inBaseUnits}function p(t,g){return 3E3>Q(t,g,"meters")?"meters":"kilometers"}function C(t,g){return 1E5>Q(t,g,"meters")?"meters":"kilometers"}function y(t,
g){return 1E3>Q(t,g,"feet")?"feet":"miles"}function b(t,g){return 1E5>Q(t,g,"feet")?"feet":"miles"}function z(t){return d.fromJSON(t.toLowerCase())||null}function A(t,g=k.earth.metersPerDegree){return N(t,!0)||g}function N(t,g=!1){let K,T,Z=null;null!=t&&("object"===typeof t?(K=t.wkid,T=t.wkt):"number"===typeof t?K=t:"string"===typeof t&&(T=t));if(K){if(m.isWKIDFromMars(K))return k.mars.metersPerDegree;if(m.isWKIDFromMoon(K))return k.moon.metersPerDegree;Z=D.values[D[K]];!Z&&g&&u.has(K)&&(Z=R)}else T&&
(-1!==T.search(/^PROJCS/i)?(t=O.exec(T))&&t[1]&&(Z=parseFloat(t[1].split(",")[1])):-1!==T.search(/^GEOCCS/i)&&(t=P.exec(T))&&t[1]&&(Z=parseFloat(t[1].split(",")[1])));return Z}function G(t){let g,K,T=null;null!=t&&("object"===typeof t?(g=t.wkid,K=t.wkt):"number"===typeof t?g=t:"string"===typeof t&&(K=t));g?T=D.units[D[g]]:K&&-1!==K.search(/^PROJCS/i)&&(t=O.exec(K))&&t[1]&&(T=(t=/[\\"\\']{1}([^\\"\\']+)/.exec(t[1]))&&t[1]);return T?z(T):null}const R=k.earth.radius*Math.PI/200,O=/UNIT\[([^\]]+)\]\]$/i,
D=H,P=/UNIT\[([^\]]+)\]/i,u=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),d=q.strict()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains",
"50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"});c={millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1E3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}};H={"square-millimeters":{inBaseUnits:1E-6},"square-centimeters":{inBaseUnits:1E-4},"square-decimeters":{inBaseUnits:.1*
.1},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:1E6},"square-inches":{inBaseUnits:6.4516E-4},"square-feet":{inBaseUnits:.09290304},"square-yards":{inBaseUnits:.83612736},"square-miles":{inBaseUnits:2589988.110336},"square-us-feet":{inBaseUnits:(t=>t*t)(1200/3937)},acres:{inBaseUnits:4046.8564224},ares:{inBaseUnits:100},hectares:{inBaseUnits:1E4}};const e={length:{baseUnit:"meters",units:c},area:{baseUnit:"square-meters",units:H},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},
"cubic-millimeters":{inBaseUnits:1E3*1E-9},"cubic-centimeters":{inBaseUnits:.001},"cubic-decimeters":{inBaseUnits:1},"cubic-meters":{inBaseUnits:1E3},"cubic-kilometers":{inBaseUnits:1E12},"cubic-inches":{inBaseUnits:.016387064},"cubic-feet":{inBaseUnits:.09290304*304.8},"cubic-yards":{inBaseUnits:764.554857984},"cubic-miles":{inBaseUnits:4.16818182544058E12}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},B=function(){const t={};for(const g in e)for(const K in e[g].units)t[K]=
g;return t}(),L={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},F={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",
esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"};c=q.strict()(L);H=q.strict()(F);q=q.strict()({...L,...F});h.areaUnitsJSONMap=c;h.baseUnitForMeasure=v;h.baseUnitForUnit=function(t){return v(r(t))};h.convertUnit=Q;h.getDefaultUnitSystem=function(t){if(!t)return null;switch(G(t)){case "feet":case "us-feet":case "clarke-feet":case "clarke-yards":case "clarke-links":case "sears-yards":case "sears-feet":case "sears-chains":case "benoit-1895-b-chains":case "indian-yards":case "indian-1937-yards":case "gold-coast-feet":case "sears-1922-truncated-chains":return"imperial";
case "50-kilometers":case "150-kilometers":case "meters":return"metric"}return null};h.getMetersPerUnit=N;h.getMetersPerUnitForSR=A;h.getMetersPerVerticalUnitForSR=function(t){if(t&&"object"===typeof t&&!m.isEarth(t))return 1;t=A(t);return 1E5<t?1:t};h.getUnitString=G;h.getVerticalUnitStringForSR=function(t){const g=A(t),K=t instanceof f?I.getReferenceEllipsoid(t).metersPerDegree:1E5;return g>=K?"meters":G(t)};h.inchesPerMeter=39.37;h.isBaseUnit=w;h.isMeasurementSystem=function(t){return"imperial"===
t||"metric"===t};h.lengthToDegrees=function(t,g,K){return Q(t,g,"meters")/(K*Math.PI/180)};h.lengthUnitsJSONMap=H;h.measureForUnit=r;h.measurementAreaUnits="metric imperial square-inches square-feet square-yards square-miles square-us-feet square-meters square-kilometers acres ares hectares".split(" ");h.measurementLengthUnits="metric imperial inches feet yards miles nautical-miles us-feet meters kilometers".split(" ");h.preferredImperialAreaUnit=function(t,g){return 1E6>Q(t,g,"square-feet")?"square-feet":
"square-miles"};h.preferredImperialLengthUnit=y;h.preferredImperialVerticalLengthUnit=b;h.preferredLengthUnit=function(t,g,K){switch(K){case "metric":return p(t,g);case "imperial":return y(t,g);default:return K}};h.preferredMetricAreaUnit=function(t,g){return 3E6>Q(t,g,"square-meters")?"square-meters":"square-kilometers"};h.preferredMetricLengthUnit=p;h.preferredMetricVerticalLengthUnit=C;h.preferredVerticalLengthUnit=function(t,g,K){switch(K){case "metric":return C(t,g);case "imperial":return b(t,
g);default:return K}};h.unitFromRESTJSON=z;h.unitToRESTJSON=function(t){return d.toJSON(t)||null};h.unitsJSONMap=q;Object.defineProperty(h,"__esModule",{value:!0})})},"esri/geometry/projectionEllipsoid":function(){define(["exports","./SpatialReference","./support/Ellipsoid","./support/spatialReferenceUtils"],function(h,c,q,I){function f(v){return new c({wkt:`GEOCCS["Spherical geocentric",
    DATUM["Not specified",
      SPHEROID["Sphere",${v.radius},0]],
    PRIMEM["Greenwich",0.0,
      AUTHORITY["EPSG","8901"]],
    UNIT["m",1.0],
    AXIS["Geocentric X",OTHER],
    AXIS["Geocentric Y",EAST],
    AXIS["Geocentric Z",NORTH]
  ]`})}const k=f(q.earth),m=f(q.mars),H=f(q.moon),r=new c({wkt:`GEOCCS["WGS 84",
  DATUM["WGS_1984",
    SPHEROID["WGS 84",${q.earth.radius},298.257223563,
      AUTHORITY["EPSG","7030"]],
    AUTHORITY["EPSG","6326"]],
  PRIMEM["Greenwich",0,
    AUTHORITY["EPSG","8901"]],
  UNIT["m",1.0,
    AUTHORITY["EPSG","9001"]],
  AXIS["Geocentric X",OTHER],
  AXIS["Geocentric Y",OTHER],
  AXIS["Geocentric Z",NORTH],
  AUTHORITY["EPSG","4978"]
]`});h.SphericalECEFSpatialReference=k;h.SphericalPCPFMars=m;h.SphericalPCPFMoon=H;h.WGS84ECEFSpatialReference=r;h.createSphericalPCPF=f;h.getReferenceEllipsoid=function(v){return v&&(I.isMars(v)||v===m)?q.mars:v&&(I.isMoon(v)||v===H)?q.moon:q.earth};h.getReferenceEllipsoidFromWKID=function(v){return I.isWKIDFromMars(v)?q.mars:I.isWKIDFromMoon(v)?q.moon:q.earth};h.getSphericalPCPF=function(v){return v&&(I.isMars(v)||v===m)?m:v&&(I.isMoon(v)||v===H)?H:k};h.getSphericalPCPFForEllipsoid=function(v){return v&&
v===q.mars?m:v&&v===q.moon?H:k};Object.defineProperty(h,"__esModule",{value:!0})})},"esri/geometry/support/normalizeUtils":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../config ../../core/Error ../../core/Logger ../../core/maybe ../Polygon ../Polyline ./normalizeUtilsCommon ./spatialReferenceUtils ./webMercatorUtils ../../tasks/geometry/cut ../../tasks/geometry/simplify".split(" "),function(h,c,q,I,f,k,m,H,r,v,w,Q,p){function C(O){const D=[];let P=0,u=0;for(let d=0;d<O.length;d++){const e=
O[d];let B=null;for(let L=0;L<e.length;L++)B=e[L],D.push(B),0===L?u=P=B[0]:(P=Math.min(P,B[0]),u=Math.max(u,B[0]));B&&D.push([(P+u)/2,0])}return D}function y(O,D){if(!(O instanceof H||O instanceof m))throw R.error("straightLineDensify: the input geometry is neither polyline nor polygon"),new I("straightLineDensify: the input geometry is neither polyline nor polygon");var P=r.getGeometryParts(O);const u=[];for(const e of P){P=[];u.push(P);P.push([e[0][0],e[0][1]]);for(let B=0;B<e.length-1;B++){const L=
e[B][0],F=e[B][1],t=e[B+1][0],g=e[B+1][1];var d=Math.sqrt((t-L)*(t-L)+(g-F)*(g-F));const K=(g-F)/d,T=(t-L)/d,Z=d/D;if(1<Z){for(let ba=1;ba<=Z-1;ba++){const ia=ba*D;P.push([T*ia+L,K*ia+F])}d=(d+Math.floor(Z-1)*D)/2;P.push([T*d+L,K*d+F])}P.push([t,g])}}return"polygon"===O.type?new m({rings:u,spatialReference:O.spatialReference}):new H({paths:u,spatialReference:O.spatialReference})}function b(O,D,P){D&&(O=y(O,1E6),O=w.webMercatorToGeographic(O,!0));P&&(O=r.updatePolyGeometry(O,P));return O}function z(O,
D,P){if(Array.isArray(O)){var u=O[0];u>D?(P=r.offsetMagnitude(u,D),O[0]=u+-2*P*D):u<P&&(D=r.offsetMagnitude(u,P),O[0]=u+-2*D*P)}else u=O.x,u>D?(P=r.offsetMagnitude(u,D),O=O.clone().offset(-2*P*D,0)):u<P&&(D=r.offsetMagnitude(u,P),O=O.clone().offset(-2*D*P,0));return O}function A(O,D){let P=-1;for(let u=0;u<D.cutIndexes.length;u++){const d=D.cutIndexes[u],e=D.geometries[u],B=r.getGeometryParts(e);for(let L=0;L<B.length;L++){const F=B[L];F.some(t=>{if(180>t[0])return!0;t=0;for(var g=0;g<F.length;g++){var K=
F[g][0];t=K>t?K:t}t=Number(t.toFixed(9));t=-360*r.offsetMagnitude(t,180);for(g=0;g<F.length;g++)K=e.getPoint(L,g),e.setPoint(L,g,K.clone().offset(t,0));return!0})}if(d===P)if("polygon"===O[0].type)for(const L of r.getGeometryParts(e))O[d]=O[d].addRing(L);else{if("polyline"===O[0].type)for(const L of r.getGeometryParts(e))O[d]=O[d].addPath(L)}else P=d,O[d]=e}return O}function N(O,D,P){return G.apply(this,arguments)}function G(){G=c._asyncToGenerator(function*(O,D,P){if(!Array.isArray(O))return N([O],
D);var u=D?D.url:q.geometryServiceUrl;let d,e,B;let L=0;var F=[];D=[];for(var t of O)if(k.isNone(t))D.push(t);else{if(!g){var g=t.spatialReference;var K=v.getInfo(g);var T=(d=g.isWebMercator)?102100:4326;e=r.cutParams[T].maxX;B=r.cutParams[T].minX;var Z=r.cutParams[T].plus180Line;T=r.cutParams[T].minus180Line}if(K)if("mesh"===t.type)D.push(t);else if("point"===t.type)D.push(z(t.clone(),e,B));else if("multipoint"===t.type){var ba=t.clone();ba.points=ba.points.map(ia=>z(ia,e,B));D.push(ba)}else if("extent"===
t.type)ba=t.clone()._normalize(!1,!1,K),D.push(ba.rings?new m(ba):ba);else if(t.extent){ba=t.extent;const ia=2*r.offsetMagnitude(ba.xmin,B)*e;let ma=0===ia?t.clone():r.updatePolyGeometry(t.clone(),ia);ba.offset(ia,0);ba.intersects(Z)&&ba.xmax!==e?(L=ba.xmax>L?ba.xmax:L,ma=b(ma,d),F.push(ma),D.push("cut")):ba.intersects(T)&&ba.xmin!==B?(L=2*ba.xmax*e>L?2*ba.xmax*e:L,ma=b(ma,d,360),F.push(ma),D.push("cut")):D.push(ma)}else D.push(t.clone());else D.push(t)}g=r.offsetMagnitude(L,e);K=-90;Z=g;for(t=new H;0<
g;)T=-180+360*g,t.addPath([[T,K],[T,-1*K]]),K*=-1,g--;if(0<F.length&&0<Z){g=yield Q.cut(u,F,t,P);g=A(F,g);K=[];F=[];for(Z=0;Z<D.length;Z++)t=D[Z],"cut"!==t?F.push(t):(t=g.shift(),T=O[Z],k.isSome(T)&&"polygon"===T.type&&T.rings&&1<T.rings.length&&t.rings.length>=T.rings.length?(K.push(t),F.push("simplify")):F.push(d?w.geographicToWebMercator(t):t));if(!K.length)return F;D=yield p.simplify(u,K,P);O=[];for(P=0;P<F.length;P++)u=F[P],"simplify"!==u?O.push(u):O.push(d?w.geographicToWebMercator(D.shift()):
D.shift());return O}O=[];for(P=0;P<D.length;P++)u=D[P],"cut"!==u?O.push(u):(u=F.shift(),O.push(!0===d?w.geographicToWebMercator(u):u));return Promise.resolve(O)});return G.apply(this,arguments)}const R=f.getLogger("esri.geometry.support.normalizeUtils");h.getDenormalizedExtent=function(O){if(!O)return null;const D=O.extent;if(!D)return null;var P=O.spatialReference&&v.getInfo(O.spatialReference);if(!P)return D;const [u,d]=P.valid;({width:P}=D);let {xmin:e,xmax:B}=D;[e,B]=[B,e];if("extent"===O.type||
0===P||P<=d||P>2*d||e<u||B>d)return D;let L;switch(O.type){case "polygon":if(1<O.rings.length)L=C(O.rings);else return D;break;case "polyline":if(1<O.paths.length)L=C(O.paths);else return D;break;case "multipoint":L=O.points}O=D.clone();for(let F=0;F<L.length;F++){let t=L[F][0];0>t?(t+=d,B=Math.max(t,B)):(t-=d,e=Math.min(t,e))}O.xmin=e;O.xmax=B;return O.width<P?(O.xmin-=d,O.xmax-=d,O):D};h.normalizeCentralMeridian=N;h.normalizeMapX=function(O,D){if(D=v.getInfo(D)){const [P,u]=D.valid;D=u-P;if(O<P)for(;O<
P;)O+=D;if(O>u)for(;O>u;)O-=D}return O};h.straightLineDensify=y;Object.defineProperty(h,"__esModule",{value:!0})})},"esri/geometry/support/normalizeUtilsCommon":function(){define(["exports","../Polyline","../SpatialReference","./jsonUtils"],function(h,c,q,I){function f(m){return I.isPolygon(m)?m.rings:m.paths}const k={102100:{maxX:2.0037508342788905E7,minX:-2.0037508342788905E7,plus180Line:new c({paths:[[[2.0037508342788905E7,-2.0037508342788905E7],[2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:q.WebMercator}),
minus180Line:new c({paths:[[[-2.0037508342788905E7,-2.0037508342788905E7],[-2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:q.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new c({paths:[[[180,-180],[180,180]]],spatialReference:q.WGS84}),minus180Line:new c({paths:[[[-180,-180],[-180,180]]],spatialReference:q.WGS84})}};h.cutParams=k;h.getGeometryParts=f;h.getSpatialReferenceMinMaxX=function(m){m=(null==m?0:m.isWebMercator)?102100:4326;return[k[m].minX,k[m].maxX]};h.offsetMagnitude=
function(m,H){return Math.ceil((m-H)/(2*H))};h.updatePolyGeometry=function(m,H){const r=f(m);for(const v of r)for(const w of v)w[0]+=H;return m};Object.defineProperty(h,"__esModule",{value:!0})})},"esri/tasks/geometry/cut":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../geometry ../../request ../../core/urlUtils ../../geometry/support/jsonUtils".split(" "),function(h,c,q,I,f,k){function m(){m=c._asyncToGenerator(function*(H,r,v,w){H="string"===typeof H?f.urlToObject(H):H;const Q=
r[0].spatialReference;r={...w,query:{...H.query,f:"json",sr:JSON.stringify(Q),target:JSON.stringify({geometryType:k.getJsonType(r[0]),geometries:r}),cutter:JSON.stringify(v)}};r=yield I(H.path+"/cut",r);const {cutIndexes:p,geometries:C=[]}=r.data;return{cutIndexes:p,geometries:C.map(y=>{y=k.fromJSON(y);y.spatialReference=Q;return y})}});return m.apply(this,arguments)}h.cut=function(H,r,v,w){return m.apply(this,arguments)};Object.defineProperty(h,"__esModule",{value:!0})})},"esri/request":function(){define("require ./chunks/_rollupPluginBabelHelpers ./config ./kernel ./core/Error ./core/global ./core/has ./core/lang ./core/maybe ./core/promiseUtils ./core/urlUtils ./support/apiKeyUtils ./support/requestUtils".split(" "),
function(h,c,q,I,f,k,m,H,r,v,w,Q,p){function C(na,ta){return y.apply(this,arguments)}function y(){y=c._asyncToGenerator(function*(na,ta){var va=w.isDataProtocol(na);const l=w.isBlobProtocol(na);l||va||(na=w.normalize(na));const E={url:na,requestOptions:{...r.unwrap(ta)}};let x=w.getInterceptor(na);if(x){na=yield B(x,E);if(null!=na)return{data:na,getHeader:Ha,requestOptions:E.requestOptions,url:E.url};x.after||x.error||(x=null)}na=E.url;ta=E.requestOptions;if("image"===ta.responseType){if(m("host-webworker")||
m("host-node"))throw A("request:invalid-parameters",Error("responseType 'image' is not supported in Web Workers or Node environment"),E);}else if(va)throw A("request:invalid-parameters",Error("Data URLs are not supported for responseType \x3d "+ta.responseType),E);if("head"===ta.method){if(ta.body)throw A("request:invalid-parameters",Error("body parameter cannot be set when method is 'head'"),E);if(va||l)throw A("request:invalid-parameters",Error("data and blob URLs are not supported for method 'head'"),
E);}yield N();if(ia)return ia.execute(na,ta);const M=v.createAbortController();v.onAbort(ta,()=>M.abort());va=yield g({controller:M,credential:null,credentialToken:null,fetchOptions:null,hasToken:!1,interceptor:x,params:E,redoRequest:!1,useIdentity:ma.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1});x&&x.after&&x.after(va);return va});return y.apply(this,arguments)}function b(na){(na=w.getOrigin(na))&&!C._corsServers.includes(na)&&C._corsServers.push(na)}function z(na){na=w.getOrigin(na);return!na||
na.endsWith(".arcgis.com")||C._corsServers.includes(na)||w.isTrustedServer(na)}function A(na,ta,va,l){let E="Error";const x={url:va.url,requestOptions:va.requestOptions,getHeader:Ha,ssl:!1};if(ta instanceof f)return ta.details?(ta.details=H.clone(ta.details),ta.details.url=va.url,ta.details.requestOptions=va.requestOptions):ta.details=x,ta;if(ta){va=l&&(Y=>l.headers.get(Y));const M=l&&l.status,X=ta.message;X&&(E=X);va&&(x.getHeader=va);x.httpStatus=(null!=ta.httpCode?ta.httpCode:ta.code)||M||0;x.subCode=
ta.subcode;x.messageCode=ta.messageCode;x.messages="string"===typeof ta.details?[ta.details]:ta.details;x.raw=Oa in ta?ta[Oa]:ta}return v.isAbortError(ta)?v.createAbortError():new f(na,E,x)}function N(){return G.apply(this,arguments)}function G(){G=c._asyncToGenerator(function*(){m("host-webworker")?ia||(ia=yield new Promise(function(na,ta){h(["./core/workers/request"],na,ta)})):C._abortableFetch||(C._abortableFetch=k.fetch.bind(k))});return G.apply(this,arguments)}function R(){return O.apply(this,
arguments)}function O(){O=c._asyncToGenerator(function*(){I.id||(yield new Promise(function(na,ta){h(["./identity/IdentityManager"],function(va){na(Object.freeze({__proto__:null,"default":va}))},ta)}))});return O.apply(this,arguments)}function D(na){return P.apply(this,arguments)}function P(){P=c._asyncToGenerator(function*(na){const ta=na.params.url,va=na.params.requestOptions,l=na.controller.signal,E=va.body;let x=null,M=null,X=null;qa&&"HTMLFormElement"in k&&(E instanceof FormData?x=E:E instanceof
HTMLFormElement&&(M=E,x=new FormData(M)));"string"===typeof E&&(X=E);na.fetchOptions={cache:va.cacheBust&&!C._abortableFetch.polyfill?"no-cache":"default",credentials:"same-origin",headers:va.headers||{},method:"head"===va.method?"HEAD":"GET",mode:"cors",redirect:"follow",signal:l};if(x||X)na.fetchOptions.body=x||X;"anonymous"===va.authMode&&(na.useIdentity=!1);na.hasToken=!!(/token=/i.test(ta)||va.query&&va.query.token||x&&x.get&&x.get("token")||M&&M.elements.token);!na.hasToken&&q.apiKey&&Q.supportsApiKey(ta)&&
(va.query||(va.query={}),va.query.token=q.apiKey,na.hasToken=!0);if(na.useIdentity&&!na.hasToken&&!na.credentialToken&&!u(ta)&&!v.isAborted(l)){let Y;"immediate"===va.authMode?(yield R(),Y=yield I.id.getCredential(ta,{signal:l}),na.credential=Y):"no-prompt"===va.authMode?(yield R(),Y=yield I.id.getCredential(ta,{prompt:!1,signal:l}).catch(()=>{}),na.credential=Y):I.id&&(Y=I.id.findCredential(ta));Y&&(na.credentialToken=Y.token,na.useSSL=!!Y.ssl)}});return P.apply(this,arguments)}function u(na){return Ka.some(ta=>
ta.test(na))}function d(na){return e.apply(this,arguments)}function e(){e=c._asyncToGenerator(function*(na){let ta=na.params.url;const va=na.params.requestOptions,l=na.fetchOptions,E=w.isBlobProtocol(ta)||w.isDataProtocol(ta),x=va.responseType||"json",M=E?0:null!=va.timeout?va.timeout:ma.timeout;var X=!1;if(!E){na.useSSL&&(ta=w.toHTTPS(ta));va.cacheBust&&"default"===l.cache&&(ta=w.addQueryParameter(ta,"request.preventCache",Date.now()));var Y={...va.query};na.credentialToken&&(Y.token=na.credentialToken);
X=w.objectToQuery(Y);m("esri-url-encodes-apostrophe")&&(X=X.replace(/'/g,"%27"));const ja=ta.length+1+X.length;X="delete"===va.method||"post"===va.method||"put"===va.method||!!va.body||ja>ma.maxUrlLength;const la=va.useProxy||!!w.getProxyRule(ta);if(la){const ra=w.getProxyUrl(ta);var S=ra.path;!X&&S.length+1+ja>ma.maxUrlLength&&(X=!0);ra.query&&(Y={...ra.query,...Y})}if("HEAD"===l.method&&(X||la)){if(X){if(ja>ma.maxUrlLength)throw A("request:invalid-parameters",Error("URL exceeds maximum length"),
na.params);throw A("request:invalid-parameters",Error("cannot use POST request when method is 'head'"),na.params);}if(la)throw A("request:invalid-parameters",Error("cannot use proxy when method is 'head'"),na.params);}X?(l.method="delete"===va.method?"DELETE":"put"===va.method?"PUT":"POST",va.body?ta=w.addQueryParameters(ta,Y):(l.body=w.objectToQuery(Y),l.headers["Content-Type"]="application/x-www-form-urlencoded")):ta=w.addQueryParameters(ta,Y);la&&(na.useProxy=!0,ta=`${S}?${ta}`);Y.token&&qa&&l.body instanceof
FormData&&(S=l.body,S.set?S.set("token",Y.token):S.append("token",Y.token));va.hasOwnProperty("withCredentials")?na.withCredentials=va.withCredentials:w.hasSameOrigin(ta,w.appUrl)||(w.isTrustedServer(ta)?na.withCredentials=!0:I.id&&(Y=I.id.findServerInfo(ta))&&Y.webTierAuth&&(na.withCredentials=!0));na.withCredentials&&(l.credentials="include")}Y=0;let U=!1;0<M&&(Y=setTimeout(()=>{U=!0;na.controller.abort()},M));let aa,da;try{if("native-request-init"===va.responseType)da=l,da.url=ta;else if("image"!==
va.responseType||"default"!==l.cache||"GET"!==l.method||X||F(va.headers)||!E&&!na.useProxy&&ma.proxyUrl&&!z(ta))if(aa=yield C._abortableFetch(ta,l),na.useProxy||b(ta),"native"===va.responseType)da=aa;else{if("HEAD"!==l.method)if(aa.ok){switch(x){case "array-buffer":da=yield aa.arrayBuffer();break;case "blob":case "image":da=yield aa.blob();break;default:da=yield aa.text()}Y&&(clearTimeout(Y),Y=0);if("json"===x||"xml"===x||"document"===x)if(da)switch(x){case "json":da=JSON.parse(da);break;case "xml":da=
t(da,"application/xml");break;case "document":da=t(da,"text/html")}else da=null;if(da){if("array-buffer"===x||"blob"===x){const ja=aa.headers.get("Content-Type");if(/application\/json|text\/plain/i.test(ja)&&750>=da["blob"===x?"size":"byteLength"])try{const la=yield(new Response(da)).json();la.error&&(da=la)}catch{}}"image"===x&&da instanceof Blob&&(da=yield ba(URL.createObjectURL(da),na,!0))}}else da=yield aa.text()}else da=yield ba(ta,na)}catch(ja){if("AbortError"===ja.name){if(U)throw Error("Timeout exceeded");
throw v.createAbortError("Request canceled");}if(!aa&&ja instanceof TypeError&&ma.proxyUrl&&!va.body&&"delete"!==va.method&&"head"!==va.method&&"post"!==va.method&&"put"!==va.method&&!na.useProxy&&!z(ta))na.redoRequest=!0,w.addProxyRule({proxyUrl:ma.proxyUrl,urlPrefix:w.getOrigin(ta)});else throw ja;}finally{Y&&clearTimeout(Y)}return[aa,da]});return e.apply(this,arguments)}function B(na,ta){return L.apply(this,arguments)}function L(){L=c._asyncToGenerator(function*(na,ta){if(null!=na.responseData)return na.responseData;
na.headers&&(ta.requestOptions.headers={...ta.requestOptions.headers,...na.headers});na.query&&(ta.requestOptions.query={...ta.requestOptions.query,...na.query});if(na.before){let va,l;try{l=yield na.before(ta)}catch(E){va=A("request:interceptor",E,ta)}if(l instanceof Error||l instanceof f)va=A("request:interceptor",l,ta);if(va)throw na.error&&na.error(va),va;return l}});return L.apply(this,arguments)}function F(na){if(na)for(const ta of Object.getOwnPropertyNames(na))if(na[ta])return!0;return!1}
function t(na,ta){let va;try{va=(new DOMParser).parseFromString(na,ta)}catch{}if(!va||va.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return va}function g(na){return K.apply(this,arguments)}function K(){K=c._asyncToGenerator(function*(na){var ta,va;yield D(na);let l;try{do[l,E]=yield d(na);while(!(yield T(na,l,E)))}catch(M){var E=A("request:server",M,na.params,l);E.details.ssl=na.useSSL;na.interceptor&&na.interceptor.error&&na.interceptor.error(E);throw E;}const x=
na.params.url;!/\/sharing\/rest\/(accounts|portals)\/self/i.test(x)||na.hasToken||na.credentialToken||null==(ta=E)||null==(va=ta.user)||!va.username||w.isTrustedServer(x)||(ta=w.getOrigin(x,!0))&&ma.trustedServers.push(ta);(ta=na.credential)&&I.id&&(va=(va=I.id.findServerInfo(ta.server))&&va.owningSystemUrl)&&(va=va.replace(/\/?$/,"/sharing"),(ta=I.id.findCredential(va,ta.userId))&&-1===I.id._getIdenticalSvcIdx(va,ta)&&ta.resources.unshift(va));return{data:E,getHeader:l?M=>l.headers.get(M):Ha,requestOptions:na.params.requestOptions,
ssl:na.useSSL,url:na.params.url}});return K.apply(this,arguments)}function T(na,ta,va){return Z.apply(this,arguments)}function Z(){Z=c._asyncToGenerator(function*(na,ta,va){if(na.redoRequest)return na.redoRequest=!1;const l=na.params.requestOptions;if(!ta||"native"===l.responseType||"native-request-init"===l.responseType)return!0;let E;if(!ta.ok)throw E=Error(`Unable to load ${ta.url} status: ${ta.status}`),E[Oa]=va,E;null!=va&&va.error&&(E=va.error);let x,M,X;E&&(x=Number(E.code),M=E.hasOwnProperty("subcode")?
Number(E.subcode):null,X=(X=E.messageCode)&&X.toUpperCase());ta=l.authMode;if(403===x&&(4===M||E.message&&-1<E.message.toLowerCase().indexOf("ssl")&&-1===E.message.toLowerCase().indexOf("permission"))){if(!na.useSSL)return na.useSSL=!0,!1}else if(!na.hasToken&&na.useIdentity&&("no-prompt"!==ta||498===x)&&-1!==wa.indexOf(x)&&!u(na.params.url)&&(403!==x||-1===Ca.indexOf(X)&&(null==M||2===M&&na.credentialToken))){yield R();try{const Y=yield I.id.getCredential(na.params.url,{error:A("request:server",
E,na.params),prompt:"no-prompt"!==ta,signal:na.controller.signal,token:na.credentialToken});na.credential=Y;na.credentialToken=Y.token;na.useSSL=na.useSSL||Y.ssl;return!1}catch(Y){if("no-prompt"===ta)return na.credential=null,na.credentialToken=null,!1;E=Y}}if(E)throw E;return!0});return Z.apply(this,arguments)}function ba(na,ta,va=!1){const l=ta.controller.signal,E=new Image;E.crossOrigin=ta.withCredentials?"use-credentials":"anonymous";E.alt="";E.src=na;return p.loadImageAsync(E,na,va,l)}let ia;
const ma=q.request,qa="FormData"in k,wa=[499,498,403,401],Ca=["COM_0056","COM_0057","SB_0008"],Ka=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],Ha=()=>null,Oa=Symbol();C._abortableFetch=null;C._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"];return C})},"esri/support/apiKeyUtils":function(){define(["exports","../core/urlUtils"],function(h,c){const q=["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"];
h.isApiKey=function(I){return I&&4<I.length&&I.startsWith("AAPK")};h.supportsApiKey=function(I){const f=c.getOrigin(I,!0);return f&&f.endsWith(".arcgis.com")&&!q.includes(f)&&!I.endsWith("/sharing/rest/generateToken")};Object.defineProperty(h,"__esModule",{value:!0})})},"esri/support/requestUtils":function(){define(["exports","../core/has","../core/maybe","../core/promiseUtils"],function(h,c,q,I){function f(){try{return new DOMException("Aborted","AbortError")}catch{const k=Error();k.name="AbortError";
return k}}h.loadImageAsync=function(k,m,H=!1,r){return new Promise((v,w)=>{if(I.isAborted(r))w(f());else{var Q=()=>{y();w(Error(`Unable to load ${m}`))},p=()=>{const b=k;y();v(b)},C=()=>{if(k){var b=k;y();b.src="";w(f())}},y=()=>{c("esri-image-decode")||(k.removeEventListener("error",Q),k.removeEventListener("load",p));k=p=Q=null;q.isSome(r)&&r.removeEventListener("abort",C);C=null;H&&URL.revokeObjectURL(m)};q.isSome(r)&&r.addEventListener("abort",C);c("esri-image-decode")?k.decode().then(p,Q):(k.addEventListener("error",
Q),k.addEventListener("load",p))}})};Object.defineProperty(h,"__esModule",{value:!0})})},"esri/tasks/geometry/simplify":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../request","../../core/urlUtils","../../geometry/support/jsonUtils"],function(h,c,q,I,f){function k(){k=c._asyncToGenerator(function*(r,v,w){const Q="string"===typeof r?I.urlToObject(r):r;r=v[0].spatialReference;const p=f.getJsonType(v[0]);v={...w,query:{...Q.query,f:"json",sr:r.wkid?r.wkid:JSON.stringify(r),
geometries:JSON.stringify(m(v))}};v=yield q(Q.path+"/simplify",v);return H(v.data,p,r)});return k.apply(this,arguments)}function m(r){return{geometryType:f.getJsonType(r[0]),geometries:r.map(v=>v.toJSON())}}function H(r,v,w){const Q=f.getGeometryType(v);return r.map(p=>{p=Q.fromJSON(p);p.spatialReference=w;return p})}h.simplify=function(r,v,w){return k.apply(this,arguments)};Object.defineProperty(h,"__esModule",{value:!0})})},"esri/layers/graphics/data/attributeSupport":function(){define(["exports",
"../../../core/Error","../../../core/sql/WhereClauseCache"],function(h,c,q){function I(r,v){return r?m.get(r,v):null}function f(r,v,w,Q=!0){const p=[];for(const C of v)if("*"!==C&&!r.has(C))if(Q){v=k(C);try{const y=I(v,r);if(!y)throw new c("feature-store:unsupported-query","invalid SQL expression",{where:v});if(!y.isStandardized)throw new c("feature-store:unsupported-query","expression is not standard",{clause:y});f(r,y.fieldNames,"expression contains missing fields")}catch(y){if((v=y&&y.details)&&
(v.clause||v.where))throw y;v&&v.missingFields?p.push(...v.missingFields):p.push(C)}}else p.push(C);if(p.length)throw new c("feature-store:unsupported-query",w,{missingFields:p});}function k(r){return r.split(" as ")[0]}const m=new q.WhereClauseCache(50,500),H=new Set("esriFieldTypeOID esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeLong esriFieldTypeDate".split(" "));h.getAliasFromFieldName=function(r){return r.split(" as ")[1]};h.getExpressionFromFieldName=
k;h.getWhereClause=I;h.hasInvalidFieldType=function(r,v){return(r=v.get(r))?!H.has(r.type):!1};h.validateFields=f;h.validateHaving=function(r,v,w){if(!v)return!0;const Q=m.get(v,r);if(!Q)throw new c("feature-store:unsupported-query","invalid SQL expression",{having:v});if(!Q.isAggregate)throw new c("feature-store:unsupported-query","having does not contain a valid aggregate function",{having:v});f(r,Q.fieldNames,"having contains missing fields");if(!Q.getExpressions().every(p=>{const {aggregateType:C,
field:y}=p,b=r.has(y)&&r.get(y).name;return w.some(z=>{const {onStatisticField:A,statisticType:N}=z;return(r.has(A)&&r.get(A).name)===b&&N.toLowerCase().trim()===C})}))throw new c("feature-store:unsupported-query","expressions in having should also exist in outStatistics",{having:v});return!0};h.validateWhere=function(r,v){if(!v)return!0;const w=m.get(v,r);if(!w)throw new c("feature-store:unsupported-query","invalid SQL expression",{where:v});if(!w.isStandardized)throw new c("feature-store:unsupported-query",
"where clause is not standard",{where:v});f(r,w.fieldNames,"where clause contains missing fields");return!0};Object.defineProperty(h,"__esModule",{value:!0})})},"esri/core/sql/WhereClauseCache":function(){define(["exports","../ItemCache","./WhereClause"],function(h,c,q){let I=function(){function f(k,m){this._cache=new c(k);this._invalidCache=new c(m)}f.prototype.get=function(k,m){const H=`${m.uid}:${k}`,r=this._cache.get(H);if(r)return r;if(void 0!==this._invalidCache.get(H))return null;try{const v=
q.WhereClause.create(k,m);this._cache.put(H,v);return v}catch{return this._invalidCache.put(H,null),null}};return f}();h.WhereClauseCache=I;Object.defineProperty(h,"__esModule",{value:!0})})},"esri/core/ItemCache":function(){define(["./MemCache"],function(h){return function(){function c(I,f){this._storage=new h.MemCacheStorage;this._storage.maxSize=I;f&&this._storage.registerRemoveFunc("",f)}var q=c.prototype;q.put=function(I,f){this._storage.put(I,f,1,1)};q.pop=function(I){return this._storage.pop(I)};
q.get=function(I){return this._storage.get(I)};q.clear=function(){this._storage.clearAll()};q.destroy=function(){this._storage.destroy()};return c}()})},"esri/core/sql/WhereClause":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../has ./AggregateFunctions ./StandardizedFunctions ./WhereGrammar".split(" "),function(h,c,q,I,f,k){function m(F,t){F+="";return F.length>=t?F:Array(t-F.length+1).join("0")+F}function H(F,t,g="0",K="0",T="0",Z="0",ba="",ia="0",ma="0"){return"+"===ba||"-"===
ba?(F=`${m(parseInt(F,10),4)}-${m(parseInt(t,10),2)}-${m(parseInt(g,10),2)}`,t="",10>parseFloat(Z)&&(t="0"),K=`${m(parseInt(K,10),2)}:${m(parseInt(T,10),2)}:${t+parseFloat(Z).toString()}`,ba=`${ba}${m(parseInt(ia,10),2)}:${m(parseInt(ma,10),2)}`,new Date(F+"T"+K+ba)):new Date(parseInt(F,10),parseInt(t,10)-1,parseInt(g,10),parseInt(K,10),parseInt(T,10),parseFloat(Z))}function r(F){let t=D.exec(F);if(null!==t){const [,g,K,T,Z,ba,ia]=t;return H(g,K,T,Z,ba,ia)}t=P.exec(F);if(null!==t){const [,g,K,T,Z,
ba,ia,ma,qa,wa]=t;return H(g,K,T,Z,ba,ia,ma,qa,wa)}t=u.exec(F);if(null!==t){const [,g,K,T,Z,ba,ia,ma,qa]=t;return H(g,K,T,Z,ba,"0",ia,ma,qa)}t=d.exec(F);if(null!==t){const [,g,K,T,Z,ba]=t;return H(g,K,T,Z,ba)}t=O.exec(F);if(null!==t){const [,g,K,T]=t;return H(g,K,T)}throw Error("SQL Invalid Timestamp");}function v(F){F=O.exec(F);if(null===F)throw Error("SQL Invalid Date");const [,t,g,K]=F;return new Date(parseInt(t,10),parseInt(g,10)-1,parseInt(K,10))}function w(F){return Array.isArray(F)?F:[F]}function Q(F){return null!==
F?!0!==F:null}function p(F,t){return null!=F&&null!=t?!0===F&&!0===t:!1===F||!1===t?!1:null}function C(F,t){return null!=F&&null!=t?!0===F||!0===t:!0===F||!0===t?!0:null}function y(F,t){if(null==F)return null;let g=!1;for(const K of t)if(null==K)g=null;else if(F===K){g=!0;break}return g}function b(F,t,g){if(null==F)return null;let K="",T=0;for(let Z=0;Z<t.length;Z++){const ba=t.charAt(Z);switch(T){case 0:ba===g?T=1:K=0<="-[]/{}()*+?.\\^$|".indexOf(ba)?K+("\\"+ba):"%"===ba?K+".*":"_"===ba?K+".":K+
ba;break;case 1:K=0<="-[]/{}()*+?.\\^$|".indexOf(ba)?K+("\\"+ba):K+ba,T=0}}return(new RegExp("^"+K+"$")).test(F)}function z(F){return F instanceof Date?F.valueOf():F}function A(F,t,g){if(null==t||null==g)return null;t=z(t);g=z(g);switch(F){case "\x3c\x3e":return t!==g;case "\x3d":return t===g;case "\x3e":return t>g;case "\x3c":return t<g;case "\x3e\x3d":return t>=g;case "\x3c\x3d":return t<=g}}function N(F){const t=[],g={};for(const K of F)F=K.toLowerCase(),void 0===g[F]&&(t.push(K),g[F]=1);return t}
function G(F,t,g){if(t instanceof f.SqlInterval)if(g instanceof Date)switch(F){case "+":return new Date(t.valueInMilliseconds()+g.getTime());case "-":return t.valueInMilliseconds()-g.getTime();case "*":return t.valueInMilliseconds()*g.getTime();case "/":return t.valueInMilliseconds()/g.getTime()}else if(g instanceof f.SqlInterval)switch(F){case "+":return f.SqlInterval.createFromMilliseconds(t.valueInMilliseconds()+g.valueInMilliseconds());case "-":return f.SqlInterval.createFromMilliseconds(t.valueInMilliseconds()-
g.valueInMilliseconds());case "*":return t.valueInMilliseconds()*g.valueInMilliseconds();case "/":return t.valueInMilliseconds()/g.valueInMilliseconds()}else t=t.valueInMilliseconds();else if(g instanceof f.SqlInterval)if(t instanceof Date)switch(F){case "+":return new Date(g.valueInMilliseconds()+t.getTime());case "-":return new Date(t.getTime()-g.valueInMilliseconds());case "*":return t.getTime()*g.valueInMilliseconds();case "/":return t.getTime()/g.valueInMilliseconds()}else g=g.valueInMilliseconds();
else if(t instanceof Date&&"number"===typeof g)switch(g*=864E5,t=t.getTime(),F){case "+":return new Date(t+g);case "-":return new Date(t-g);case "*":return new Date(t*g);case "/":return new Date(t/g)}else if(g instanceof Date&&"number"===typeof t)switch(t*=864E5,g=g.getTime(),F){case "+":return new Date(t+g);case "-":return new Date(t-g);case "*":return new Date(t*g);case "/":return new Date(t/g)}switch(F){case "+":return t+g;case "-":return t-g;case "*":return t*g;case "/":return t/g}}function R(F,
t,g,K){F=K.getAttribute(F,t);return null!=F&&1===g[t]?new Date(F):F}const O=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,D=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)$/,P=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)(\+|\-)(\d{1,2}):(\d{1,2})$/,u=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})(\+|\-)(\d{1,2}):(\d{1,2})$/,d=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/;let e=function(){function F(){}F.makeBool=function(t){return!0===t};F.featureValue=
function(t,g,K,T){return R(t,g,K,T)};F.equalsNull=function(t){return null===t};F.applyLike=function(t,g,K){return b(t,g,K)};F.ensureArray=function(t){return w(t)};F.applyIn=function(t,g){return y(t,g)};F.currentDate=function(){const t=new Date;t.setHours(0,0,0,0);return t};F.makeSqlInterval=function(t,g,K){return f.SqlInterval.createFromValueAndQualifer(t,g,K)};F.convertInterval=function(t){return t instanceof f.SqlInterval?t.valueInMilliseconds():t};F.currentTimestamp=function(){return new Date};
F.compare=function(t,g,K){return A(t,g,K)};F.calculate=function(t,g,K){return G(t,g,K)};F.makeComparable=function(t){return z(t)};F.evaluateFunction=function(t,g){return f.evaluateFunction(t,g)};F.lookup=function(t,g){t=g[t];return void 0===t?null:t};F.between=function(t,g){return null==t||null==g[0]||null==g[1]?null:t>=g[0]&&t<=g[1]};F.notbetween=function(t,g){return null==t||null==g[0]||null==g[1]?null:t<g[0]||t>g[1]};F.ternaryNot=function(t){return Q(t)};F.ternaryAnd=function(t,g){return p(t,g)};
F.ternaryOr=function(t,g){return C(t,g)};return F}(),B=function(){function F(g,K){this.fieldsIndex=K;this.datefields={};this.parameters={};this.parseTree=k.WhereGrammar.parse(g);const {isStandardized:T,isAggregate:Z,referencedFieldNames:ba}=this.extractExpressionInfo(K);this.referencedFieldNames=ba;this.isStandardized=T;this.isAggregate=Z}F.create=function(g,K){return new F(g,K)};var t=F.prototype;t.testSet=function(g,K=L){const T={};for(const Z of this.fieldNames)T[Z]=g.map(ba=>K.getAttribute(ba,
Z));return!!this.evaluateNode(this.parseTree,{attributes:T},L)};t.calculateValue=function(g,K=L){g=this.evaluateNode(this.parseTree,g,K);return g instanceof f.SqlInterval?g.valueInMilliseconds()/864E5:g};t.calculateValueCompiled=function(g,K=L){if(null!=this.parseTree._compiledVersion)return this.parseTree._compiledVersion(g,this.parameters,K,this.datefields);if(q("csp-restrictions"))return this.calculateValue(g,K);this.compileMe();return this.parseTree._compiledVersion(g,this.parameters,K,this.datefields)};
t.testFeature=function(g,K=L){return!!this.evaluateNode(this.parseTree,g,K)};t.testFeatureCompiled=function(g,K=L){if(null!=this.parseTree._compiledVersion)return!!this.parseTree._compiledVersion(g,this.parameters,K,this.datefields);if(q("csp-restrictions"))return this.testFeature(g,K);this.compileMe();return!!this.parseTree._compiledVersion(g,this.parameters,K,this.datefields)};t.getFunctions=function(){const g=[];this.visitAll(this.parseTree,K=>{"function"===K.type&&g.push(K.name.toLowerCase())});
return N(g)};t.getExpressions=function(){const g=new Map;this.visitAll(this.parseTree,K=>{if("function"===K.type){const T=K.name.toLowerCase();K=K.args.value[0];if("column_ref"===K.type){K=K.column;const Z=`${T}-${K}`;g.has(Z)||g.set(Z,{aggregateType:T,field:K})}}});return[...g.values()]};t.getVariables=function(){const g=[];this.visitAll(this.parseTree,K=>{"param"===K.type&&g.push(K.value.toLowerCase())});return N(g)};t.compileMe=function(){const g="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+
")";this.parseTree._compiledVersion=(new Function("feature","lookups","attributeAdapter","datefields",g)).bind(e)};t.extractExpressionInfo=function(g){const K=[];let T=!0,Z=!0;this.visitAll(this.parseTree,ba=>{switch(ba.type){case "column_ref":{const ia=g.get(ba.column),ma=ia&&ia.name;!ia||"date"!==ia.type&&"esriFieldTypeDate"!==ia.type||(this.datefields[ia.name]=1);void 0!==ma?(K.push(ma),ba.column=ma):K.push(ba.column);break}case "function":{const {name:ia,args:ma}=ba;ba=ma.value.length;T&&(T=f.isStandardized(ia,
ba));Z&&(Z=I.isAggregate(ia,ba))}}});return{referencedFieldNames:N(K),isStandardized:T,isAggregate:Z}};t.visitAll=function(g,K){if(null!=g)switch(K(g),g.type){case "when_clause":this.visitAll(g.operand,K);this.visitAll(g.value,K);break;case "case_expression":for(const T of g.clauses)this.visitAll(T,K);"simple"===g.format&&this.visitAll(g.operand,K);null!==g.else&&this.visitAll(g.else,K);break;case "expr_list":for(const T of g.value)this.visitAll(T,K);break;case "unary_expr":this.visitAll(g.expr,K);
break;case "binary_expr":this.visitAll(g.left,K);this.visitAll(g.right,K);break;case "function":this.visitAll(g.args,K)}};t.evaluateNodeToJavaScript=function(g){switch(g.type){case "interval":return"this.makeSqlInterval("+this.evaluateNodeToJavaScript(g.value)+", "+JSON.stringify(g.qualifier)+","+JSON.stringify(g.op)+")";case "case_expression":var K="";if("simple"===g.format){var T="this.makeComparable("+this.evaluateNodeToJavaScript(g.operand)+")";K="( ";for(let Z=0;Z<g.clauses.length;Z++)K+=" ("+
T+" \x3d\x3d\x3d this.makeComparable("+this.evaluateNodeToJavaScript(g.clauses[Z].operand)+")) ? ("+this.evaluateNodeToJavaScript(g.clauses[Z].value)+") : "}else for(K="( ",T=0;T<g.clauses.length;T++)K+=" this.makeBool("+this.evaluateNodeToJavaScript(g.clauses[T].operand)+")\x3d\x3d\x3dtrue ? ("+this.evaluateNodeToJavaScript(g.clauses[T].value)+") : ";K=null!==g.else?K+this.evaluateNodeToJavaScript(g.else):K+"null";return K+=" )";case "param":return"this.lookup("+JSON.stringify(g.value.toLowerCase())+
",lookups)";case "expr_list":K="[";for(T of g.value)"["!==K&&(K+=","),K+=this.evaluateNodeToJavaScript(T);return K+="]";case "unary_expr":return"this.ternaryNot("+this.evaluateNodeToJavaScript(g.expr)+")";case "binary_expr":switch(g.operator){case "AND":return"this.ternaryAnd("+this.evaluateNodeToJavaScript(g.left)+","+this.evaluateNodeToJavaScript(g.right)+" )";case "OR":return"this.ternaryOr("+this.evaluateNodeToJavaScript(g.left)+","+this.evaluateNodeToJavaScript(g.right)+" )";case "IS":if("null"!==
g.right.type)throw Error("Unsupported RHS for IS");return"this.equalsNull("+this.evaluateNodeToJavaScript(g.left)+")";case "ISNOT":if("null"!==g.right.type)throw Error("Unsupported RHS for IS");return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(g.left)+")))";case "IN":return"this.applyIn("+this.evaluateNodeToJavaScript(g.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(g.right)+"))";case "NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(g.left)+",this.ensureArray("+
this.evaluateNodeToJavaScript(g.right)+")))";case "BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(g.left)+","+this.evaluateNodeToJavaScript(g.right)+")";case "NOTBETWEEN":return"this.notbetween("+this.evaluateNodeToJavaScript(g.left)+","+this.evaluateNodeToJavaScript(g.right)+")";case "LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(g.left)+","+this.evaluateNodeToJavaScript(g.right)+","+JSON.stringify(g.escape)+")";case "NOT LIKE":return"this.ternaryNot(this.applyLike("+
this.evaluateNodeToJavaScript(g.left)+","+this.evaluateNodeToJavaScript(g.right)+","+JSON.stringify(g.escape)+"))";case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return"this.compare("+JSON.stringify(g.operator)+","+this.evaluateNodeToJavaScript(g.left)+","+this.evaluateNodeToJavaScript(g.right)+")";case "*":case "-":case "+":case "/":return"this.calculate("+JSON.stringify(g.operator)+","+this.evaluateNodeToJavaScript(g.left)+","+this.evaluateNodeToJavaScript(g.right)+
")"}throw Error("Not Supported Operator "+g.operator);case "null":case "bool":case "string":case "number":return JSON.stringify(g.value);case "date":return"(new Date("+v(g.value).getTime().toString()+"))";case "timestamp":return"(new Date("+r(g.value).getTime().toString()+"))";case "current_time":return"date"===g.mode?"this.currentDate()":"this.currentTimestamp()";case "column_ref":return"this.featureValue(feature,"+JSON.stringify(g.column)+",datefields,attributeAdapter)";case "function":return"this.evaluateFunction("+
JSON.stringify(g.name)+","+this.evaluateNodeToJavaScript(g.args)+")"}throw Error("Unsupported sql syntax "+g.type);};t.evaluateNode=function(g,K,T){switch(g.type){case "interval":return K=this.evaluateNode(g.value,K,T),f.SqlInterval.createFromValueAndQualifer(K,g.qualifier,g.op);case "case_expression":if("simple"===g.format){var Z=z(this.evaluateNode(g.operand,K,T));for(var ba=0;ba<g.clauses.length;ba++)if(Z===z(this.evaluateNode(g.clauses[ba].operand,K,T)))return this.evaluateNode(g.clauses[ba].value,
K,T)}else for(Z=0;Z<g.clauses.length;Z++)if(!0===this.evaluateNode(g.clauses[Z].operand,K,T))return this.evaluateNode(g.clauses[Z].value,K,T);return null!==g.else?this.evaluateNode(g.else,K,T):null;case "param":return this.parameters[g.value.toLowerCase()];case "expr_list":Z=[];for(ba of g.value)Z.push(this.evaluateNode(ba,K,T));return Z;case "unary_expr":return Q(this.evaluateNode(g.expr,K,T));case "binary_expr":switch(g.operator){case "AND":return p(this.evaluateNode(g.left,K,T),this.evaluateNode(g.right,
K,T));case "OR":return C(this.evaluateNode(g.left,K,T),this.evaluateNode(g.right,K,T));case "IS":if("null"!==g.right.type)throw Error("Unsupported RHS for IS");return null===this.evaluateNode(g.left,K,T);case "ISNOT":if("null"!==g.right.type)throw Error("Unsupported RHS for IS");return null!==this.evaluateNode(g.left,K,T);case "IN":return Z=w(this.evaluateNode(g.right,K,T)),y(this.evaluateNode(g.left,K,T),Z);case "NOT IN":return Z=w(this.evaluateNode(g.right,K,T)),Q(y(this.evaluateNode(g.left,K,T),
Z));case "BETWEEN":return Z=this.evaluateNode(g.left,K,T),g=this.evaluateNode(g.right,K,T),null==Z||null==g[0]||null==g[1]?null:Z>=z(g[0])&&Z<=z(g[1]);case "NOTBETWEEN":return Z=this.evaluateNode(g.left,K,T),g=this.evaluateNode(g.right,K,T),null==Z||null==g[0]||null==g[1]?null:Z<z(g[0])||Z>z(g[1]);case "LIKE":return b(this.evaluateNode(g.left,K,T),this.evaluateNode(g.right,K,T),g.escape);case "NOT LIKE":return Q(b(this.evaluateNode(g.left,K,T),this.evaluateNode(g.right,K,T),g.escape));case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return A(g.operator,
this.evaluateNode(g.left,K,T),this.evaluateNode(g.right,K,T));case "-":case "+":case "*":case "/":return G(g.operator,this.evaluateNode(g.left,K,T),this.evaluateNode(g.right,K,T))}case "null":case "bool":case "string":case "number":return g.value;case "date":return v(g.value);case "timestamp":return r(g.value);case "current_time":return K=new Date,"date"===g.mode&&K.setHours(0,0,0,0),K;case "column_ref":return R(K,g.column,this.datefields,T);case "function":return K=this.evaluateNode(g.args,K,T),
this.isAggregate?I.aggregateFunction(g.name,K):f.evaluateFunction(g.name,K)}throw Error("Unsupported sql syntax "+g.type);};c._createClass(F,[{key:"fieldNames",get:function(){return this.referencedFieldNames}}]);return F}();const L={getAttribute(F,t){return(F&&"object"===typeof F.attributes?F.attributes:F)[t]}};h.WhereClause=B;h.defaultAttributeAdapter=L;Object.defineProperty(h,"__esModule",{value:!0})})},"esri/core/sql/AggregateFunctions":function(){define(["exports"],function(h){function c(f){let k=
0;for(let m=0;m<f.length;m++)k+=f[m];return k/f.length}function q(f){const k=c(f),m=f.length;let H=0;for(const r of f)H+=(r-k)**2;return 1<m?H/(m-1):0}const I={min:{minParams:1,maxParams:1,evaluate:f=>null==f[0]?null:Math.min.apply(Math,f[0])},max:{minParams:1,maxParams:1,evaluate:f=>null==f[0]?null:Math.max.apply(Math,f[0])},avg:{minParams:1,maxParams:1,evaluate:f=>null==f[0]?null:c(f[0])},sum:{minParams:1,maxParams:1,evaluate:f=>{if(null==f[0])f=null;else{{f=f[0];let k=0;for(let m=0;m<f.length;m++)k+=
f[m];f=k}}return f}},stddev:{minParams:1,maxParams:1,evaluate:f=>null==f[0]?null:Math.sqrt(q(f[0]))},count:{minParams:1,maxParams:1,evaluate:f=>null==f[0]?null:f[0].length},var:{minParams:1,maxParams:1,evaluate:f=>null==f[0]?null:q(f[0])}};h.aggregateFunction=function(f,k){const m=I[f.toLowerCase()];if(null==m)throw Error("Function Not Recognised");if(k.length<m.minParams||k.length>m.maxParams)throw Error(`Invalid Parameter count for call to ${f.toUpperCase()}`);return m.evaluate(k)};h.isAggregate=
function(f,k){f=I[f.toLowerCase()];return null!=f&&k>=f.minParams&&k<=f.maxParams};Object.defineProperty(h,"__esModule",{value:!0})})},"esri/core/sql/StandardizedFunctions":function(){define(["exports","../string"],function(h,c){let q=function(){function f(){this.op="+";this.minute=this.year=this.month=this.hour=this.second=this.day=0}f.fixDefaults=function(k){if(null!==k.precision||null!==k.secondary)throw Error("Primary and Secondary SqlInterval qualifiers not supported");};f.createFromMilliseconds=
function(k){const m=new f;m.second=k/1E3;return m};f.createFromValueAndQualifer=function(k,m,H){let r=null;const v=new f;v.op="-"===H?"-":"+";if("interval-period"===m.type){f.fixDefaults(m);if("year"===m.period||"month"===m.period)throw Error("Year-Month Intervals not supported");if(/^[0-9]{1,}$/.test(k))v[m.period]=parseFloat(k);else throw Error("Illegal Interval");}else{f.fixDefaults(m.start);f.fixDefaults(m.end);if("year"===m.start.period||"month"===m.start.period)throw Error("Year-Month Intervals not supported");
if("year"===m.end.period||"month"===m.end.period)throw Error("Year-Month Intervals not supported");switch(m.start.period){case "day":switch(m.end.period){case "hour":r=/^[0-9]{1,} [0-9]{1,}$/;if(r.test(k))v[m.start.period]=parseFloat(k.split(" ")[0]),v[m.end.period]=parseFloat(k.split(" ")[1]);else throw Error("Illegal Interval");break;case "minute":r=/^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$/;if(r.test(k))v[m.start.period]=parseFloat(k.split(" ")[0]),k=k.split(" ")[1].split(":"),v.hour=parseFloat(k[0]),
v.minute=parseFloat(k[1]);else throw Error("Illegal Interval");break;case "second":r=/^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(r.test(k))v[m.start.period]=parseFloat(k.split(" ")[0]),k=k.split(" ")[1].split(":"),v.hour=parseFloat(k[0]),v.minute=parseFloat(k[1]),v.second=parseFloat(k[2]);else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;case "hour":switch(m.end.period){case "minute":r=/^[0-9]{1,}:[0-9]{1,}$/;if(r.test(k))v.hour=parseFloat(k.split(":")[0]),
v.minute=parseFloat(k.split(":")[1]);else throw Error("Illegal Interval");break;case "second":r=/^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(r.test(k))k=k.split(":"),v.hour=parseFloat(k[0]),v.minute=parseFloat(k[1]),v.second=parseFloat(k[2]);else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;case "minute":switch(m.end.period){case "second":r=/^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(r.test(k))k=k.split(":"),v.minute=parseFloat(k[0]),v.second=parseFloat(k[1]);
else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;default:throw"Invalid Interval.";}}return v};f.prototype.valueInMilliseconds=function(){return("-"===this.op?-1:1)*(1E3*this.second+6E4*this.minute+36E5*this.hour+864E5*this.day+365/12*this.month*864E5+31536E6*this.year)};return f}();const I={extract:{minParams:2,maxParams:2,evaluate:([f,k])=>{if(null==k)return null;if(k instanceof Date)switch(f.toUpperCase()){case "SECOND":return k.getSeconds();case "MINUTE":return k.getMinutes();
case "HOUR":return k.getHours();case "DAY":return k.getDate();case "MONTH":return k.getMonth()+1;case "YEAR":return k.getFullYear()}throw Error("Invalid Parameter for call to EXTRACT");}},substring:{minParams:2,maxParams:3,evaluate:f=>{if(2===f.length){const [k,m]=f;return null==k||null==m?null:k.toString().substring(m-1)}if(3===f.length){const [k,m,H]=f;return null==k||null==m||null==H?null:0>=H?"":k.toString().substring(m-1,m+H-1)}}},position:{minParams:2,maxParams:2,evaluate:([f,k])=>null==f||
null==k?null:k.indexOf(f)+1},trim:{minParams:2,maxParams:3,evaluate:f=>{var k=3===f.length,m=k?f[1]:" ";k=k?f[2]:f[1];if(null==m||null==k)return null;m=`(${c.escapeRegExpString(m)})`;switch(f[0]){case "BOTH":return k.replace(new RegExp(`^${m}*|${m}*$`,"g"),"");case "LEADING":return k.replace(new RegExp(`^${m}*`,"g"),"");case "TRAILING":return k.replace(new RegExp(`${m}*$`,"g"),"")}throw Error("Invalid Parameter for call to TRIM");}},abs:{minParams:1,maxParams:1,evaluate:f=>null==f[0]?null:Math.abs(f[0])},
ceiling:{minParams:1,maxParams:1,evaluate:f=>null==f[0]?null:Math.ceil(f[0])},floor:{minParams:1,maxParams:1,evaluate:f=>null==f[0]?null:Math.floor(f[0])},log:{minParams:1,maxParams:1,evaluate:f=>null==f[0]?null:Math.log(f[0])},log10:{minParams:1,maxParams:1,evaluate:f=>null==f[0]?null:Math.log(f[0])*Math.LOG10E},sin:{minParams:1,maxParams:1,evaluate:f=>null==f[0]?null:Math.sin(f[0])},cos:{minParams:1,maxParams:1,evaluate:f=>null==f[0]?null:Math.cos(f[0])},tan:{minParams:1,maxParams:1,evaluate:f=>
null==f[0]?null:Math.tan(f[0])},asin:{minParams:1,maxParams:1,evaluate:f=>null==f[0]?null:Math.asin(f[0])},acos:{minParams:1,maxParams:1,evaluate:f=>null==f[0]?null:Math.acos(f[0])},atan:{minParams:1,maxParams:1,evaluate:f=>null==f[0]?null:Math.atan(f[0])},sign:{minParams:1,maxParams:1,evaluate:f=>null==f[0]?null:0<f[0]?1:0>f[1]?-1:0},power:{minParams:2,maxParams:2,evaluate:f=>null==f[0]||null==f[1]?null:f[0]**f[1]},mod:{minParams:2,maxParams:2,evaluate:f=>null==f[0]||null==f[1]?null:f[0]%f[1]},round:{minParams:1,
maxParams:2,evaluate:f=>{const k=f[0];f=2===f.length?10**f[1]:1;return null==k?null:Math.round(k*f)/f}},truncate:{minParams:1,maxParams:2,evaluate:f=>null==f[0]?null:1===f.length?parseInt(f[0].toFixed(0),10):parseFloat(f[0].toFixed(f[1]))},char_length:{minParams:1,maxParams:1,evaluate:f=>"string"===typeof f[0]||f[0]instanceof String?f[0].length:0},concat:{minParams:1,maxParams:Infinity,evaluate:f=>{let k="";for(let m=0;m<f.length;m++){if(null==f[m])return null;k+=f[m].toString()}return k}},lower:{minParams:1,
maxParams:1,evaluate:f=>null==f[0]?null:f[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:f=>null==f[0]?null:f[0].toString().toUpperCase()}};h.SqlInterval=q;h.evaluateFunction=function(f,k){const m=I[f.toLowerCase()];if(null==m)throw Error("Function Not Recognised");if(k.length<m.minParams||k.length>m.maxParams)throw Error(`Invalid Parameter count for call to ${f.toUpperCase()}`);return m.evaluate(k)};h.isStandardized=function(f,k){f=I[f.toLowerCase()];return null!=f&&k>=f.minParams&&
k<=f.maxParams};Object.defineProperty(h,"__esModule",{value:!0})})},"esri/core/sql/WhereGrammar":function(){define(["exports","../../chunks/_commonjsHelpers"],function(h,c){var q={exports:{}};(function(f){(function(k,m){f.exports&&(f.exports=m())})(c.commonjsGlobal,function(){function k(m,H,r,v){this.message=m;this.expected=H;this.found=r;this.location=v;this.name="SyntaxError";"function"===typeof Error.captureStackTrace&&Error.captureStackTrace(this,k)}(function(m,H){function r(){this.constructor=
m}r.prototype=H.prototype;m.prototype=new r})(k,Error);k.buildMessage=function(m,H){function r(p){return p.charCodeAt(0).toString(16).toUpperCase()}function v(p){return p.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(C){return"\\x0"+r(C)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(C){return"\\x"+r(C)})}function w(p){return p.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,
"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(C){return"\\x0"+r(C)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(C){return"\\x"+r(C)})}var Q={literal:function(p){return'"'+v(p.text)+'"'},"class":function(p){var C="",y;for(y=0;y<p.parts.length;y++)C+=p.parts[y]instanceof Array?w(p.parts[y][0])+"-"+w(p.parts[y][1]):w(p.parts[y]);return"["+(p.inverted?"^":"")+C+"]"},any:function(p){return"any character"},end:function(p){return"end of input"},
other:function(p){return p.description}};return"Expected "+function(p){var C=Array(p.length),y;for(y=0;y<p.length;y++){var b=y;var z=p[y];z=Q[z.type](z);C[b]=z}C.sort();if(0<C.length){for(p=y=1;y<C.length;y++)C[y-1]!==C[y]&&(C[p]=C[y],p++);C.length=p}switch(C.length){case 1:return C[0];case 2:return C[0]+" or "+C[1];default:return C.slice(0,-1).join(", ")+", or "+C[C.length-1]}}(m)+" but "+(H?'"'+v(H)+'"':"end of input")+" found."};return{SyntaxError:k,parse:function(m,H){function r(J,W){return{type:"literal",
text:J,ignoreCase:W}}function v(J,W,V){return{type:"class",parts:J,inverted:W,ignoreCase:V}}function w(J){var W=$b[J],V;if(!W){for(V=J-1;!$b[V];)V--;W=$b[V];for(W={line:W.line,column:W.column};V<J;)10===m.charCodeAt(V)?(W.line++,W.column=1):W.column++,V++;$b[J]=W}return W}function Q(J,W){var V=w(J),ca=w(W);return{start:{offset:J,line:V.line,column:V.column},end:{offset:W,line:ca.line,column:ca.column}}}function p(J){n<sb||(n>sb&&(sb=n,pc=[]),pc.push(J))}function C(){var J=n;var W=oa();if(W!==a)if(W=
b(),W!==a){var V=oa();V!==a?J=W:(n=J,J=a)}else n=J,J=a;else n=J,J=a;return J}function y(){var J=n;var W=b();if(W!==a){var V=[];var ca=n;var sa=oa();if(sa!==a){var Da=Fa();if(Da!==a){var Ia=oa();if(Ia!==a){var Qa=b();Qa!==a?ca=sa=[sa,Da,Ia,Qa]:(n=ca,ca=a)}else n=ca,ca=a}else n=ca,ca=a}else n=ca,ca=a;for(;ca!==a;)V.push(ca),ca=n,sa=oa(),sa!==a?(Da=Fa(),Da!==a?(Ia=oa(),Ia!==a?(Qa=b(),Qa!==a?ca=sa=[sa,Da,Ia,Qa]:(n=ca,ca=a)):(n=ca,ca=a)):(n=ca,ca=a)):(n=ca,ca=a);if(V!==a){J={type:"expr_list"};W=[W];for(ca=
0;ca<V.length;ca++)W.push(V[ca][3]);J.value=W}else n=J,J=a}else n=J,J=a;return J}function b(){var J=n;var W=z();if(W!==a){var V=[];var ca=n;var sa=oa();if(sa!==a){var Da=X();if(Da!==a){var Ia=oa();if(Ia!==a){var Qa=z();Qa!==a?ca=sa=[sa,Da,Ia,Qa]:(n=ca,ca=a)}else n=ca,ca=a}else n=ca,ca=a}else n=ca,ca=a;for(;ca!==a;)V.push(ca),ca=n,sa=oa(),sa!==a?(Da=X(),Da!==a?(Ia=oa(),Ia!==a?(Qa=z(),Qa!==a?ca=sa=[sa,Da,Ia,Qa]:(n=ca,ca=a)):(n=ca,ca=a)):(n=ca,ca=a)):(n=ca,ca=a);V!==a?J=W=fb(W,V):(n=J,J=a)}else n=J,
J=a;return J}function z(){var J=n;var W=A();if(W!==a){var V=[];var ca=n;var sa=oa();if(sa!==a){var Da=M();if(Da!==a){var Ia=oa();if(Ia!==a){var Qa=A();Qa!==a?ca=sa=[sa,Da,Ia,Qa]:(n=ca,ca=a)}else n=ca,ca=a}else n=ca,ca=a}else n=ca,ca=a;for(;ca!==a;)V.push(ca),ca=n,sa=oa(),sa!==a?(Da=M(),Da!==a?(Ia=oa(),Ia!==a?(Qa=A(),Qa!==a?ca=sa=[sa,Da,Ia,Qa]:(n=ca,ca=a)):(n=ca,ca=a)):(n=ca,ca=a)):(n=ca,ca=a);V!==a?J=W=fb(W,V):(n=J,J=a)}else n=J,J=a;return J}function A(){var J=n;var W=x();if(W===a){W=n;if(33===m.charCodeAt(n)){var V=
Ua;n++}else V=a,0===pa&&p(Ta);if(V!==a){var ca=n;pa++;if(61===m.charCodeAt(n)){var sa=jb;n++}else sa=a,0===pa&&p(tb);pa--;sa===a?ca=void 0:(n=ca,ca=a);ca!==a?W=V=[V,ca]:(n=W,W=a)}else n=W,W=a}W!==a?(V=oa(),V!==a?(ca=A(),ca!==a?J=W={type:"unary_expr",operator:"NOT",expr:ca}:(n=J,J=a)):(n=J,J=a)):(n=J,J=a);if(J===a)if(J=n,W=O(),W!==a)if(V=oa(),V!==a){V=[];ca=n;sa=oa();if(sa!==a){var Da=N();if(Da!==a){var Ia=oa();if(Ia!==a){var Qa=O();Qa!==a?ca=sa=[sa,Da,Ia,Qa]:(n=ca,ca=a)}else n=ca,ca=a}else n=ca,ca=
a}else n=ca,ca=a;if(ca!==a)for(;ca!==a;)V.push(ca),ca=n,sa=oa(),sa!==a?(Da=N(),Da!==a?(Ia=oa(),Ia!==a?(Qa=O(),Qa!==a?ca=sa=[sa,Da,Ia,Qa]:(n=ca,ca=a)):(n=ca,ca=a)):(n=ca,ca=a)):(n=ca,ca=a);else V=a;V!==a&&(V={type:"arithmetic",tail:V});V===a&&(V=n,ca=R(),ca!==a?(sa=oa(),sa!==a?(sa=Ga(),sa!==a?(sa=oa(),sa!==a?(sa=y(),sa!==a?(Da=oa(),Da!==a?(Da=Ja(),Da!==a?V=ca={op:ca,right:sa}:(n=V,V=a)):(n=V,V=a)):(n=V,V=a)):(n=V,V=a)):(n=V,V=a)):(n=V,V=a)):(n=V,V=a),V===a&&(V=n,ca=R(),ca!==a?(sa=oa(),sa!==a?(sa=Ga(),
sa!==a?(sa=oa(),sa!==a?(sa=Ja(),sa!==a?V=ca={op:ca,right:{type:"expr_list",value:[]}}:(n=V,V=a)):(n=V,V=a)):(n=V,V=a)):(n=V,V=a)):(n=V,V=a),V===a&&(V=n,ca=R(),ca!==a?(sa=oa(),sa!==a?(sa=t(),sa!==a?V=ca={op:ca,right:sa}:(n=V,V=a)):(n=V,V=a)):(n=V,V=a))),V===a&&(V=n,sa=x(),sa!==a?(ca=oa(),ca!==a?(ca=Y(),ca!==a?(Da=oa(),Da!==a?(Da=O(),Da!==a?(Ia=oa(),Ia!==a?(Ia=M(),Ia!==a?(sa=oa(),sa!==a?(sa=O(),sa!==a?V=sa={op:"NOT"+ca,right:{type:"expr_list",value:[Da,sa]}}:(n=V,V=a)):(n=V,V=a)):(n=V,V=a)):(n=V,V=
a)):(n=V,V=a)):(n=V,V=a)):(n=V,V=a)):(n=V,V=a)):(n=V,V=a),V===a&&(V=n,sa=Y(),sa!==a?(ca=oa(),ca!==a?(ca=O(),ca!==a?(Da=oa(),Da!==a?(Da=M(),Da!==a?(Ia=oa(),Ia!==a?(Ia=O(),Ia!==a?V=sa={op:sa,right:{type:"expr_list",value:[ca,Ia]}}:(n=V,V=a)):(n=V,V=a)):(n=V,V=a)):(n=V,V=a)):(n=V,V=a)):(n=V,V=a)):(n=V,V=a)),V===a&&(V=n,ca=l(),ca!==a?(sa=oa(),sa!==a?(sa=x(),sa!==a?(sa=oa(),sa!==a?(sa=O(),sa!==a?V=ca={op:ca+"NOT",right:sa}:(n=V,V=a)):(n=V,V=a)):(n=V,V=a)):(n=V,V=a)):(n=V,V=a),V===a&&(V=n,ca=l(),ca!==a?
(sa=oa(),sa!==a?(sa=O(),sa!==a?V=ca={op:ca,right:sa}:(n=V,V=a)):(n=V,V=a)):(n=V,V=a)),V===a&&(V=n,ca=G(),ca!==a?(sa=oa(),sa!==a?(sa=ia(),sa!==a?(Da=oa(),Da!==a?(Da=n,m.substr(n,6).toLowerCase()===ud?(Ia=m.substr(n,6),n+=6):(Ia=a,0===pa&&p(vd)),Ia!==a?(Ia=n,pa++,Qa=L(),pa--,Qa===a?Ia=void 0:(n=Ia,Ia=a),Ia!==a?Da="ESCAPE":(n=Da,Da=a)):(n=Da,Da=a),Da!==a?(Da=oa(),Da!==a?(Da=ma(),Da!==a?V=ca={op:ca,right:sa,escape:Da.value}:(n=V,V=a)):(n=V,V=a)):(n=V,V=a)):(n=V,V=a)):(n=V,V=a)):(n=V,V=a)):(n=V,V=a),V===
a&&(V=n,ca=G(),ca!==a?(sa=oa(),sa!==a?(sa=ia(),sa!==a?V=ca={op:ca,right:sa,escape:""}:(n=V,V=a)):(n=V,V=a)):(n=V,V=a))))));V===a&&(V=null);V!==a?(J=W,W=V,""==W||void 0==W||null==W?W=J:(V=null,W=V="arithmetic"==W.type?fb(J,W.tail):gb(W.op,J,W.right,W.escape)),J=W):(n=J,J=a)}else n=J,J=a;else n=J,J=a;return J}function N(){if(m.substr(n,2)===Ra){var J=Ra;n+=2}else J=a,0===pa&&p(Bb);J===a&&(62===m.charCodeAt(n)?(J=ea,n++):(J=a,0===pa&&p(ha)),J===a&&(m.substr(n,2)===fa?(J=fa,n+=2):(J=a,0===pa&&p(ka)),
J===a&&(m.substr(n,2)===xa?(J=xa,n+=2):(J=a,0===pa&&p(Aa)),J===a&&(60===m.charCodeAt(n)?(J=La,n++):(J=a,0===pa&&p(Pa)),J===a&&(61===m.charCodeAt(n)?(J=jb,n++):(J=a,0===pa&&p(tb)),J===a&&(m.substr(n,2)===$a?(J=$a,n+=2):(J=a,0===pa&&p(ab))))))));return J}function G(){var J=J=n;var W=x();if(W!==a){var V=oa();if(V!==a){var ca=E();ca!==a?J=W=[W,V,ca]:(n=J,J=a)}else n=J,J=a}else n=J,J=a;J!==a&&(J=J[0]+" "+J[2]);J===a&&(J=E());return J}function R(){var J=J=n;var W=x();if(W!==a){var V=oa();if(V!==a){var ca=
va();ca!==a?J=W=[W,V,ca]:(n=J,J=a)}else n=J,J=a}else n=J,J=a;J!==a&&(J=J[0]+" "+J[2]);J===a&&(J=va());return J}function O(){var J=n;var W=P();if(W!==a){var V=[];var ca=n;var sa=oa();if(sa!==a){var Da=D();if(Da!==a){var Ia=oa();if(Ia!==a){var Qa=P();Qa!==a?ca=sa=[sa,Da,Ia,Qa]:(n=ca,ca=a)}else n=ca,ca=a}else n=ca,ca=a}else n=ca,ca=a;for(;ca!==a;)V.push(ca),ca=n,sa=oa(),sa!==a?(Da=D(),Da!==a?(Ia=oa(),Ia!==a?(Qa=P(),Qa!==a?ca=sa=[sa,Da,Ia,Qa]:(n=ca,ca=a)):(n=ca,ca=a)):(n=ca,ca=a)):(n=ca,ca=a);V!==a?J=
W=fb(W,V):(n=J,J=a)}else n=J,J=a;return J}function D(){if(43===m.charCodeAt(n)){var J=Va;n++}else J=a,0===pa&&p(hb);J===a&&(45===m.charCodeAt(n)?(J=lb,n++):(J=a,0===pa&&p(qc)));return J}function P(){var J=n;var W=d();if(W!==a){var V=[];var ca=n;var sa=oa();if(sa!==a){var Da=u();if(Da!==a){var Ia=oa();if(Ia!==a){var Qa=d();Qa!==a?ca=sa=[sa,Da,Ia,Qa]:(n=ca,ca=a)}else n=ca,ca=a}else n=ca,ca=a}else n=ca,ca=a;for(;ca!==a;)V.push(ca),ca=n,sa=oa(),sa!==a?(Da=u(),Da!==a?(Ia=oa(),Ia!==a?(Qa=d(),Qa!==a?ca=
sa=[sa,Da,Ia,Qa]:(n=ca,ca=a)):(n=ca,ca=a)):(n=ca,ca=a)):(n=ca,ca=a);V!==a?J=W=fb(W,V):(n=J,J=a)}else n=J,J=a;return J}function u(){if(42===m.charCodeAt(n)){var J=wd;n++}else J=a,0===pa&&p(xd);J===a&&(47===m.charCodeAt(n)?(J=yd,n++):(J=a,0===pa&&p(zd)));return J}function d(){var J=ma();if(J===a){var W=n;var V=n;var ca=Ka();if(ca!==a){var sa=Ha();if(sa!==a){var Da=Oa();Da!==a?V=ca=parseFloat(ca+sa+Da):(n=V,V=a)}else n=V,V=a}else n=V,V=a;V===a&&(V=n,ca=Ka(),ca!==a?(sa=Ha(),sa!==a?V=ca=parseFloat(ca+
sa):(n=V,V=a)):(n=V,V=a),V===a&&(V=n,ca=Ka(),ca!==a?(sa=Oa(),sa!==a?V=ca=parseFloat(ca+sa):(n=V,V=a)):(n=V,V=a),V===a&&(V=n,ca=Ka(),ca!==a&&(ca=parseFloat(ca)),V=ca)));var Ia=V;if(Ia!==a){var Qa=n;pa++;var Ad=B();pa--;Ad===a?Qa=void 0:(n=Qa,Qa=a);Qa!==a?W=Ia={type:"number",value:Ia}:(n=W,W=a)}else n=W,W=a;J=W;if(J===a){var Mb=n;var Cb=n;if(m.substr(n,4).toLowerCase()===Bd){var ac=m.substr(n,4);n+=4}else ac=a,0===pa&&p(Cd);if(ac!==a){var Nb=n;pa++;var Dd=L();pa--;Dd===a?Nb=void 0:(n=Nb,Nb=a);Nb!==
a?Cb=ac=[ac,Nb]:(n=Cb,Cb=a)}else n=Cb,Cb=a;var yb=Cb;yb!==a&&(yb={type:"bool",value:!0});Mb=yb;if(Mb===a){Mb=n;var Db=n;if(m.substr(n,5).toLowerCase()===Ed){var bc=m.substr(n,5);n+=5}else bc=a,0===pa&&p(Fd);if(bc!==a){var Ob=n;pa++;var Gd=L();pa--;Gd===a?Ob=void 0:(n=Ob,Ob=a);Ob!==a?Db=bc=[bc,Ob]:(n=Db,Db=a)}else n=Db,Db=a;yb=Db;yb!==a&&(yb={type:"bool",value:!1});Mb=yb}J=Mb;if(J===a){var Eb=n;if(m.substr(n,4).toLowerCase()===Hd){var cc=m.substr(n,4);n+=4}else cc=a,0===pa&&p(Id);if(cc!==a){var Pb=
n;pa++;var Jd=L();pa--;Jd===a?Pb=void 0:(n=Pb,Pb=a);Pb!==a?Eb=cc=[cc,Pb]:(n=Eb,Eb=a)}else n=Eb,Eb=a;var rc=Eb;rc!==a&&(rc={type:"null",value:null});J=rc;if(J===a){var wb=n;var Fb=n;if(m.substr(n,4).toLowerCase()===Kd){var sc=m.substr(n,4);n+=4}else sc=a,0===pa&&p(Ld);if(sc!==a){var dc=n;pa++;var Md=L();pa--;Md===a?dc=void 0:(n=dc,dc=a);dc!==a?Fb=sc="DATE":(n=Fb,Fb=a)}else n=Fb,Fb=a;var Rc=Fb;if(Rc!==a){var Nd=oa();if(Nd!==a){var Sc=ia();Sc!==a?wb=Rc={type:"date",value:Sc.value}:(n=wb,wb=a)}else n=
wb,wb=a}else n=wb,wb=a;J=wb;if(J===a){var xb=n;var Gb=n;if(m.substr(n,9).toLowerCase()===Od){var tc=m.substr(n,9);n+=9}else tc=a,0===pa&&p(Pd);if(tc!==a){var ec=n;pa++;var Qd=L();pa--;Qd===a?ec=void 0:(n=ec,ec=a);ec!==a?Gb=tc="TIMESTAMP":(n=Gb,Gb=a)}else n=Gb,Gb=a;var Tc=Gb;if(Tc!==a){var Rd=oa();if(Rd!==a){var Uc=ia();Uc!==a?xb=Tc={type:"timestamp",value:Uc.value}:(n=xb,xb=a)}else n=xb,xb=a}else n=xb,xb=a;J=xb;if(J===a){var Xa=n;var Qb=aa();if(Qb!==a){var uc=oa();if(uc!==a){if(45===m.charCodeAt(n)){var ub=
lb;n++}else ub=a,0===pa&&p(qc);ub===a&&(43===m.charCodeAt(n)?(ub=Va,n++):(ub=a,0===pa&&p(hb)));if(ub!==a){var vc=oa();if(vc!==a){var Rb=ia();if(Rb!==a){var Sd=oa();if(Sd!==a){var Vc=K();Vc!==a?Xa=Qb={type:"interval",value:Rb,qualifier:Vc,op:ub}:(n=Xa,Xa=a)}else n=Xa,Xa=a}else n=Xa,Xa=a}else n=Xa,Xa=a}else n=Xa,Xa=a}else n=Xa,Xa=a}else n=Xa,Xa=a;Xa===a&&(Xa=n,Qb=aa(),Qb!==a?(uc=oa(),uc!==a?(ub=ia(),ub!==a?(vc=oa(),vc!==a?(Rb=K(),Rb!==a?Xa=Qb={type:"interval",value:ub,qualifier:Rb,op:""}:(n=Xa,Xa=a)):
(n=Xa,Xa=a)):(n=Xa,Xa=a)):(n=Xa,Xa=a)):(n=Xa,Xa=a));J=Xa}}}}}}var Wa=J;if(Wa===a){var db=n;var Hb=n;if(m.substr(n,7).toLowerCase()===Td){var wc=m.substr(n,7);n+=7}else wc=a,0===pa&&p(Ud);if(wc!==a){var fc=n;pa++;var Vd=L();pa--;Vd===a?fc=void 0:(n=fc,fc=a);fc!==a?Hb=wc="EXTRACT":(n=Hb,Hb=a)}else n=Hb,Hb=a;var Wc=Hb;if(Wc!==a){var Wd=oa();if(Wd!==a){var Xd=Ga();if(Xd!==a){var Yd=oa();if(Yd!==a){var pb=da();pb===a&&(pb=ja(),pb===a&&(pb=la(),pb===a&&(pb=ra(),pb===a&&(pb=ua(),pb===a&&(pb=za())))));var Xc=
pb;if(Xc!==a){var Zd=oa();if(Zd!==a){var $d=S();if($d!==a){var ae=oa();if(ae!==a){var Yc=b();if(Yc!==a){var be=oa();if(be!==a){var ce=Ja();ce!==a?db=Wc={type:"function",name:"extract",args:{type:"expr_list",value:[{type:"string",value:Xc},Yc]}}:(n=db,db=a)}else n=db,db=a}else n=db,db=a}else n=db,db=a}else n=db,db=a}else n=db,db=a}else n=db,db=a}else n=db,db=a}else n=db,db=a}else n=db,db=a}else n=db,db=a;Wa=db;if(Wa===a){var bb=n;var Ib=n;if(m.substr(n,9).toLowerCase()===de){var xc=m.substr(n,9);n+=
9}else xc=a,0===pa&&p(ee);if(xc!==a){var gc=n;pa++;var fe=L();pa--;fe===a?gc=void 0:(n=gc,gc=a);gc!==a?Ib=xc="SUBSTRING":(n=Ib,Ib=a)}else n=Ib,Ib=a;var Zc=Ib;if(Zc!==a){var ge=oa();if(ge!==a){var he=Ga();if(he!==a){var ie=oa();if(ie!==a){var yc=b();if(yc!==a){var je=oa();if(je!==a){var ke=S();if(ke!==a){var le=oa();if(le!==a){var zc=b();if(zc!==a){var me=oa();if(me!==a){var mb=n;var Jb=n;if(m.substr(n,3).toLowerCase()===ne){var Ac=m.substr(n,3);n+=3}else Ac=a,0===pa&&p(oe);if(Ac!==a){var hc=n;pa++;
var pe=L();pa--;pe===a?hc=void 0:(n=hc,hc=a);hc!==a?Jb=Ac="FOR":(n=Jb,Jb=a)}else n=Jb,Jb=a;var Sb=Jb;if(Sb!==a){var $c=oa();if($c!==a){var ad=b();if(ad!==a){var bd=oa();bd!==a?mb=Sb=[Sb,$c,ad,bd]:(n=mb,mb=a)}else n=mb,mb=a}else n=mb,mb=a}else n=mb,mb=a;mb===a&&(mb=null);mb!==a?(Sb=Ja(),Sb!==a?bb=Zc={type:"function",name:"substring",args:{type:"expr_list",value:mb?[yc,zc,mb[2]]:[yc,zc]}}:(n=bb,bb=a)):(n=bb,bb=a)}else n=bb,bb=a}else n=bb,bb=a}else n=bb,bb=a}else n=bb,bb=a}else n=bb,bb=a}else n=bb,bb=
a}else n=bb,bb=a}else n=bb,bb=a}else n=bb,bb=a}else n=bb,bb=a;Wa=bb;if(Wa===a){var Ma=n;var Tb=U();if(Tb!==a){var Bc=oa();if(Bc!==a){var Cc=Ga();if(Cc!==a){var Dc=oa();if(Dc!==a){var qb=g();qb===a&&(qb=null);if(qb!==a){var Ec=oa();if(Ec!==a){var Ub=b();if(Ub!==a){var Fc=oa();if(Fc!==a){var Gc=S();if(Gc!==a){var qe=oa();if(qe!==a){var cd=b();if(cd!==a){var re=oa();if(re!==a){var se=Ja();se!==a?Ma=Tb={type:"function",name:"trim",args:{type:"expr_list",value:[{type:"string",value:null==qb?"BOTH":qb},
Ub,cd]}}:(n=Ma,Ma=a)}else n=Ma,Ma=a}else n=Ma,Ma=a}else n=Ma,Ma=a}else n=Ma,Ma=a}else n=Ma,Ma=a}else n=Ma,Ma=a}else n=Ma,Ma=a}else n=Ma,Ma=a}else n=Ma,Ma=a}else n=Ma,Ma=a}else n=Ma,Ma=a}else n=Ma,Ma=a;Ma===a&&(Ma=n,Tb=U(),Tb!==a?(Bc=oa(),Bc!==a?(Cc=Ga(),Cc!==a?(Dc=oa(),Dc!==a?(qb=g(),qb===a&&(qb=null),qb!==a?(Ec=oa(),Ec!==a?(Ub=b(),Ub!==a?(Fc=oa(),Fc!==a?(Gc=Ja(),Gc!==a?Ma=Tb={type:"function",name:"trim",args:{type:"expr_list",value:[{type:"string",value:null==qb?"BOTH":qb},Ub]}}:(n=Ma,Ma=a)):(n=
Ma,Ma=a)):(n=Ma,Ma=a)):(n=Ma,Ma=a)):(n=Ma,Ma=a)):(n=Ma,Ma=a)):(n=Ma,Ma=a)):(n=Ma,Ma=a)):(n=Ma,Ma=a));Wa=Ma;if(Wa===a){var eb=n;var Kb=n;if(m.substr(n,8).toLowerCase()===te){var Hc=m.substr(n,8);n+=8}else Hc=a,0===pa&&p(ue);if(Hc!==a){var ic=n;pa++;var ve=L();pa--;ve===a?ic=void 0:(n=ic,ic=a);ic!==a?Kb=Hc="POSITION":(n=Kb,Kb=a)}else n=Kb,Kb=a;var dd=Kb;if(dd!==a){var we=oa();if(we!==a){var xe=Ga();if(xe!==a){var ye=oa();if(ye!==a){var ed=b();if(ed!==a){var ze=oa();if(ze!==a){var Ae=va();if(Ae!==a){var Be=
oa();if(Be!==a){var fd=b();if(fd!==a){var Ce=oa();if(Ce!==a){var De=Ja();De!==a?eb=dd={type:"function",name:"position",args:{type:"expr_list",value:[ed,fd]}}:(n=eb,eb=a)}else n=eb,eb=a}else n=eb,eb=a}else n=eb,eb=a}else n=eb,eb=a}else n=eb,eb=a}else n=eb,eb=a}else n=eb,eb=a}else n=eb,eb=a}else n=eb,eb=a}else n=eb,eb=a;Wa=eb;if(Wa===a){var kb=n;var Vb;var rb=n;rb=Vb=e();if(rb===a)if(rb=n,96===m.charCodeAt(n)?(Vb=gd,n++):(Vb=a,0===pa&&p(hd)),Vb!==a){var jc=[];if(id.test(m.charAt(n))){var vb=m.charAt(n);
n++}else vb=a,0===pa&&p(jd);if(vb!==a)for(;vb!==a;)jc.push(vb),id.test(m.charAt(n))?(vb=m.charAt(n),n++):(vb=a,0===pa&&p(jd));else jc=a;jc!==a?(96===m.charCodeAt(n)?(vb=gd,n++):(vb=a,0===pa&&p(hd)),vb!==a?rb=Vb=jc.join(""):(n=rb,rb=a)):(n=rb,rb=a)}else n=rb,rb=a;var Ic=rb;if(Ic!==a){var Ee=oa();if(Ee!==a){var Fe=Ga();if(Fe!==a){var Ge=oa();if(Ge!==a){var Wb=y();Wb===a&&(Wb=null);if(Wb!==a){var He=oa();if(He!==a){var Ie=Ja();Ie!==a?kb=Ic={type:"function",name:Ic,args:Wb?Wb:{type:"expr_list",value:[]}}:
(n=kb,kb=a)}else n=kb,kb=a}else n=kb,kb=a}else n=kb,kb=a}else n=kb,kb=a}else n=kb,kb=a}else n=kb,kb=a;Wa=kb;if(Wa===a){var nb;var Sa=n;var Xb=ya();if(Xb!==a){var Jc=oa();if(Jc!==a){var Yb=b();if(Yb!==a){var Kc=oa();if(Kc!==a){var zb=[];for(nb=wa();nb!==a;)zb.push(nb),nb=wa();if(zb!==a)if(nb=oa(),nb!==a){var kc=Ba();kc!==a?Sa=Xb={type:"case_expression",format:"simple",operand:Yb,clauses:zb,else:null}:(n=Sa,Sa=a)}else n=Sa,Sa=a;else n=Sa,Sa=a}else n=Sa,Sa=a}else n=Sa,Sa=a}else n=Sa,Sa=a}else n=Sa,Sa=
a;if(Sa===a)if(Sa=n,Xb=ya(),Xb!==a)if(Jc=oa(),Jc!==a)if(Yb=b(),Yb!==a)if(Kc=oa(),Kc!==a){zb=[];for(nb=wa();nb!==a;)zb.push(nb),nb=wa();if(zb!==a)if(nb=oa(),nb!==a)if(kc=Ca(),kc!==a){var Je=oa();if(Je!==a){var Ke=Ba();Ke!==a?Sa=Xb={type:"case_expression",format:"simple",operand:Yb,clauses:zb,else:kc.value}:(n=Sa,Sa=a)}else n=Sa,Sa=a}else n=Sa,Sa=a;else n=Sa,Sa=a;else n=Sa,Sa=a}else n=Sa,Sa=a;else n=Sa,Sa=a;else n=Sa,Sa=a;else n=Sa,Sa=a;var Lc=Sa;if(Lc===a){var ob;var Ya=n;var Zb=ya();if(Zb!==a){var Mc=
oa();if(Mc!==a){var Ab=[];for(ob=qa();ob!==a;)Ab.push(ob),ob=qa();if(Ab!==a)if(ob=oa(),ob!==a){var lc=Ba();lc!==a?Ya=Zb={type:"case_expression",format:"searched",clauses:Ab,else:null}:(n=Ya,Ya=a)}else n=Ya,Ya=a;else n=Ya,Ya=a}else n=Ya,Ya=a}else n=Ya,Ya=a;if(Ya===a)if(Ya=n,Zb=ya(),Zb!==a)if(Mc=oa(),Mc!==a){Ab=[];for(ob=qa();ob!==a;)Ab.push(ob),ob=qa();if(Ab!==a)if(ob=oa(),ob!==a)if(lc=Ca(),lc!==a){var Le=oa();if(Le!==a){var Me=Ba();Me!==a?Ya=Zb={type:"case_expression",format:"searched",clauses:Ab,
else:lc.value}:(n=Ya,Ya=a)}else n=Ya,Ya=a}else n=Ya,Ya=a;else n=Ya,Ya=a;else n=Ya,Ya=a}else n=Ya,Ya=a;else n=Ya,Ya=a;Lc=Ya}Wa=Lc;if(Wa===a){var mc;var Lb=n;var kd=B();if(kd!==a){var Nc=[];for(mc=F();mc!==a;)Nc.push(mc),mc=F();Nc!==a?Lb=kd+=Nc.join(""):(n=Lb,Lb=a)}else n=Lb,Lb=a;var nc=Lb;if(nc!==a){var Oc=nc;nc=/^CURRENT_DATE$/i.test(Oc)?{type:"current_time",mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(Oc)?{type:"current_time",mode:"timestamp"}:{type:"column_ref",table:"",column:Oc}}Wa=nc;if(Wa===a&&
(Wa=t(),Wa===a)){Wa=n;var ld=Ga();if(ld!==a){var Ne=oa();if(Ne!==a){var Pc=b();if(Pc!==a){var Oe=oa();if(Oe!==a){var Pe=Ja();Pe!==a?(Pc.paren=!0,Wa=ld=Pc):(n=Wa,Wa=a)}else n=Wa,Wa=a}else n=Wa,Wa=a}else n=Wa,Wa=a}else n=Wa,Wa=a}}}}}}}}return Wa}function e(){var J;var W=n;var V=B();if(V!==a){var ca=[];for(J=L();J!==a;)ca.push(J),J=L();ca!==a?W=V+=ca.join(""):(n=W,W=a)}else n=W,W=a;return W}function B(){if(Qe.test(m.charAt(n))){var J=m.charAt(n);n++}else J=a,0===pa&&p(Re);return J}function L(){if(Se.test(m.charAt(n))){var J=
m.charAt(n);n++}else J=a,0===pa&&p(Te);return J}function F(){if(Ue.test(m.charAt(n))){var J=m.charAt(n);n++}else J=a,0===pa&&p(Ve);return J}function t(){var J=n;if(64===m.charCodeAt(n)){var W=We;n++}else W=a,0===pa&&p(Xe);if(W!==a){var V=e();V!==a?J=W=[W,V]:(n=J,J=a)}else n=J,J=a;J!==a&&(J={type:"param",value:J[1]});return J}function g(){var J=n;if(m.substr(n,7).toLowerCase()===Ye){var W=m.substr(n,7);n+=7}else W=a,0===pa&&p(Ze);if(W!==a){W=n;pa++;var V=L();pa--;V===a?W=void 0:(n=W,W=a);W!==a?J="LEADING":
(n=J,J=a)}else n=J,J=a;J===a&&(J=n,m.substr(n,8).toLowerCase()===$e?(W=m.substr(n,8),n+=8):(W=a,0===pa&&p(af)),W!==a?(W=n,pa++,V=L(),pa--,V===a?W=void 0:(n=W,W=a),W!==a?J="TRAILING":(n=J,J=a)):(n=J,J=a),J===a&&(J=n,m.substr(n,4).toLowerCase()===bf?(W=m.substr(n,4),n+=4):(W=a,0===pa&&p(cf)),W!==a?(W=n,pa++,V=L(),pa--,V===a?W=void 0:(n=W,W=a),W!==a?J="BOTH":(n=J,J=a)):(n=J,J=a)));return J}function K(){var J=n;var W=n;var V=T();if(V!==a){var ca=oa();if(ca!==a)if(ca=Ga(),ca!==a)if(ca=oa(),ca!==a)if(ca=
ba(),ca!==a){var sa=oa();sa!==a?(sa=Ja(),sa!==a?W=V={type:"interval-period",period:V.value,precision:ca,secondary:null}:(n=W,W=a)):(n=W,W=a)}else n=W,W=a;else n=W,W=a;else n=W,W=a;else n=W,W=a}else n=W,W=a;W===a&&(W=n,V=T(),V!==a&&(V=md(V)),W=V);if(W!==a)if(V=oa(),V!==a)if(V=n,m.substr(n,2).toLowerCase()===df?(ca=m.substr(n,2),n+=2):(ca=a,0===pa&&p(ef)),ca!==a?(ca=n,pa++,sa=L(),pa--,sa===a?ca=void 0:(n=ca,ca=a),ca!==a?V="TO":(n=V,V=a)):(n=V,V=a),V!==a)if(V=oa(),V!==a){V=n;ca=T();ca!==a&&(ca={type:"interval-period",
period:ca.value,precision:null,secondary:null});V=ca;if(V===a){V=n;ca=za();if(ca!==a)if(ca=oa(),ca!==a)if(ca=Ga(),ca!==a)if(ca=oa(),ca!==a)if(ca=ba(),ca!==a)if(sa=oa(),sa!==a)if(sa=Fa(),sa!==a)if(sa=oa(),sa!==a)if(sa=Z(),sa!==a){var Da=oa();Da!==a?(Da=Ja(),Da!==a?V=ca=nd(ca,sa):(n=V,V=a)):(n=V,V=a)}else n=V,V=a;else n=V,V=a;else n=V,V=a;else n=V,V=a;else n=V,V=a;else n=V,V=a;else n=V,V=a;else n=V,V=a;else n=V,V=a;V===a&&(V=n,ca=za(),ca!==a?(ca=oa(),ca!==a?(ca=Ga(),ca!==a?(ca=oa(),ca!==a?(ca=ba(),
ca!==a?(sa=oa(),sa!==a?(sa=Ja(),sa!==a?V=ca={type:"interval-period",period:"second",precision:ca,secondary:null}:(n=V,V=a)):(n=V,V=a)):(n=V,V=a)):(n=V,V=a)):(n=V,V=a)):(n=V,V=a)):(n=V,V=a),V===a&&(V=n,ca=za(),ca!==a&&(ca={type:"interval-period",period:"second",precision:null,secondary:null}),V=ca))}V!==a?J=W={type:"interval-qualifier",start:W,end:V}:(n=J,J=a)}else n=J,J=a;else n=J,J=a;else n=J,J=a;else n=J,J=a;J===a&&(J=n,V=T(),V!==a?(W=oa(),W!==a?(W=Ga(),W!==a?(W=oa(),W!==a?(W=Z(),W!==a?(ca=oa(),
ca!==a?(ca=Ja(),ca!==a?J=V={type:"interval-period",period:V.value,precision:W,secondary:null}:(n=J,J=a)):(n=J,J=a)):(n=J,J=a)):(n=J,J=a)):(n=J,J=a)):(n=J,J=a)):(n=J,J=a),J===a&&(J=n,V=T(),V!==a&&(V=md(V)),J=V,J===a&&(J=n,V=za(),V!==a?(W=oa(),W!==a?(W=Ga(),W!==a?(W=oa(),W!==a?(W=ba(),W!==a?(ca=oa(),ca!==a?(ca=Fa(),ca!==a?(V=oa(),V!==a?(V=Z(),V!==a?(ca=oa(),ca!==a?(ca=Ja(),ca!==a?J=V=nd(W,V):(n=J,J=a)):(n=J,J=a)):(n=J,J=a)):(n=J,J=a)):(n=J,J=a)):(n=J,J=a)):(n=J,J=a)):(n=J,J=a)):(n=J,J=a)):(n=J,J=a)):
(n=J,J=a),J===a&&(J=n,V=za(),V!==a?(W=oa(),W!==a?(W=Ga(),W!==a?(W=oa(),W!==a?(W=Z(),W!==a?(ca=oa(),ca!==a?(ca=Ja(),ca!==a?J=V={type:"interval-period",period:"second",precision:W,secondary:null}:(n=J,J=a)):(n=J,J=a)):(n=J,J=a)):(n=J,J=a)):(n=J,J=a)):(n=J,J=a)):(n=J,J=a),J===a&&(J=n,V=za(),V!==a&&(V={type:"interval-period",period:"second",precision:null,secondary:null}),J=V)))));return J}function T(){var J=n;J=la();J!==a&&(J={type:"string",value:"day"});J===a&&(J=n,J=ra(),J!==a&&(J={type:"string",value:"hour"}),
J===a&&(J=n,J=ua(),J!==a&&(J={type:"string",value:"minute"}),J===a&&(J=n,J=ja(),J!==a&&(J={type:"string",value:"month"}),J===a&&(J=n,J=da(),J!==a&&(J={type:"string",value:"year"})))));return J}function Z(){var J=na();J!==a&&(J=parseFloat(J));return J}function ba(){var J=na();J!==a&&(J=parseFloat(J));return J}function ia(){var J=ma();J===a&&(J=t());return J}function ma(){var J=n;if(39===m.charCodeAt(n)){var W=od;n++}else W=a,0===pa&&p(pd);W===a&&(m.substr(n,2)===qd?(W=qd,n+=2):(W=a,0===pa&&p(ff)));
if(W!==a){W=[];var V=n;m.substr(n,2)===oc?(V=oc,n+=2):(V=a,0===pa&&p(rd));V!==a&&(V="'");V===a&&(sd.test(m.charAt(n))?(V=m.charAt(n),n++):(V=a,0===pa&&p(td)));for(;V!==a;)W.push(V),V=n,m.substr(n,2)===oc?(V=oc,n+=2):(V=a,0===pa&&p(rd)),V!==a&&(V="'"),V===a&&(sd.test(m.charAt(n))?(V=m.charAt(n),n++):(V=a,0===pa&&p(td)));W!==a?(39===m.charCodeAt(n)?(V=od,n++):(V=a,0===pa&&p(pd)),V!==a?J=W={type:"string",value:W.join("")}:(n=J,J=a)):(n=J,J=a)}else n=J,J=a;return J}function qa(){var J=n;var W=Na();if(W!==
a)if(W=oa(),W!==a)if(W=b(),W!==a){var V=oa();V!==a?(V=Ea(),V!==a?(V=oa(),V!==a?(V=b(),V!==a?J=W={type:"when_clause",operand:W,value:V}:(n=J,J=a)):(n=J,J=a)):(n=J,J=a)):(n=J,J=a)}else n=J,J=a;else n=J,J=a;else n=J,J=a;return J}function wa(){var J=n;var W=Na();if(W!==a)if(W=oa(),W!==a)if(W=b(),W!==a){var V=oa();V!==a?(V=Ea(),V!==a?(V=oa(),V!==a?(V=b(),V!==a?J=W={type:"when_clause",operand:W,value:V}:(n=J,J=a)):(n=J,J=a)):(n=J,J=a)):(n=J,J=a)}else n=J,J=a;else n=J,J=a;else n=J,J=a;return J}function Ca(){var J=
n;var W=n;if(m.substr(n,4).toLowerCase()===gf){var V=m.substr(n,4);n+=4}else V=a,0===pa&&p(hf);if(V!==a){V=n;pa++;var ca=L();pa--;ca===a?V=void 0:(n=V,V=a);V!==a?W="ELSE":(n=W,W=a)}else n=W,W=a;W!==a?(W=oa(),W!==a?(W=b(),W!==a?J={type:"else_clause",value:W}:(n=J,J=a)):(n=J,J=a)):(n=J,J=a);return J}function Ka(){var J=na();if(J===a){J=n;if(45===m.charCodeAt(n)){var W=lb;n++}else W=a,0===pa&&p(qc);W===a&&(43===m.charCodeAt(n)?(W=Va,n++):(W=a,0===pa&&p(hb)));if(W!==a){var V=na();V!==a?J=W=W[0]+V:(n=
J,J=a)}else n=J,J=a}return J}function Ha(){var J=n;if(46===m.charCodeAt(n)){var W=jf;n++}else W=a,0===pa&&p(kf);W!==a?(W=na(),W===a&&(W=null),W!==a?J="."+(null!=W?W:""):(n=J,J=a)):(n=J,J=a);return J}function Oa(){var J;var W=J=n;if(lf.test(m.charAt(n))){var V=m.charAt(n);n++}else V=a,0===pa&&p(mf);V!==a?(nf.test(m.charAt(n))?(V=m.charAt(n),n++):(V=a,0===pa&&p(of)),V===a&&(V=null),V!==a?W="e"+(null===V?"":V):(n=W,W=a)):(n=W,W=a);W!==a?(V=na(),V!==a?J=W+V:(n=J,J=a)):(n=J,J=a);return J}function na(){var J=
[];var W=ta();if(W!==a)for(;W!==a;)J.push(W),W=ta();else J=a;J!==a&&(J=J.join(""));return J}function ta(){if(pf.test(m.charAt(n))){var J=m.charAt(n);n++}else J=a,0===pa&&p(qf);return J}function va(){var J=n;if(m.substr(n,2).toLowerCase()===rf){var W=m.substr(n,2);n+=2}else W=a,0===pa&&p(sf);if(W!==a){W=n;pa++;var V=L();pa--;V===a?W=void 0:(n=W,W=a);W!==a?J="IN":(n=J,J=a)}else n=J,J=a;return J}function l(){var J=n;if(m.substr(n,2).toLowerCase()===tf){var W=m.substr(n,2);n+=2}else W=a,0===pa&&p(uf);
if(W!==a){W=n;pa++;var V=L();pa--;V===a?W=void 0:(n=W,W=a);W!==a?J="IS":(n=J,J=a)}else n=J,J=a;return J}function E(){var J=n;if(m.substr(n,4).toLowerCase()===vf){var W=m.substr(n,4);n+=4}else W=a,0===pa&&p(wf);if(W!==a){W=n;pa++;var V=L();pa--;V===a?W=void 0:(n=W,W=a);W!==a?J="LIKE":(n=J,J=a)}else n=J,J=a;return J}function x(){var J=n;if(m.substr(n,3).toLowerCase()===xf){var W=m.substr(n,3);n+=3}else W=a,0===pa&&p(yf);if(W!==a){W=n;pa++;var V=L();pa--;V===a?W=void 0:(n=W,W=a);W!==a?J="NOT":(n=J,J=
a)}else n=J,J=a;return J}function M(){var J=n;if(m.substr(n,3).toLowerCase()===zf){var W=m.substr(n,3);n+=3}else W=a,0===pa&&p(Af);if(W!==a){W=n;pa++;var V=L();pa--;V===a?W=void 0:(n=W,W=a);W!==a?J="AND":(n=J,J=a)}else n=J,J=a;return J}function X(){var J=n;if(m.substr(n,2).toLowerCase()===Bf){var W=m.substr(n,2);n+=2}else W=a,0===pa&&p(Cf);if(W!==a){W=n;pa++;var V=L();pa--;V===a?W=void 0:(n=W,W=a);W!==a?J="OR":(n=J,J=a)}else n=J,J=a;return J}function Y(){var J=n;if(m.substr(n,7).toLowerCase()===Df){var W=
m.substr(n,7);n+=7}else W=a,0===pa&&p(Ef);if(W!==a){W=n;pa++;var V=L();pa--;V===a?W=void 0:(n=W,W=a);W!==a?J="BETWEEN":(n=J,J=a)}else n=J,J=a;return J}function S(){var J=n;if(m.substr(n,4).toLowerCase()===Ff){var W=m.substr(n,4);n+=4}else W=a,0===pa&&p(Gf);if(W!==a){W=n;pa++;var V=L();pa--;V===a?W=void 0:(n=W,W=a);W!==a?J="FROM":(n=J,J=a)}else n=J,J=a;return J}function U(){var J=n;if(m.substr(n,4).toLowerCase()===Hf){var W=m.substr(n,4);n+=4}else W=a,0===pa&&p(If);if(W!==a){W=n;pa++;var V=L();pa--;
V===a?W=void 0:(n=W,W=a);W!==a?J="TRIM":(n=J,J=a)}else n=J,J=a;return J}function aa(){var J=n;if(m.substr(n,8).toLowerCase()===Jf){var W=m.substr(n,8);n+=8}else W=a,0===pa&&p(Kf);if(W!==a){W=n;pa++;var V=L();pa--;V===a?W=void 0:(n=W,W=a);W!==a?J="INTERVAL":(n=J,J=a)}else n=J,J=a;return J}function da(){var J=n;if(m.substr(n,4).toLowerCase()===Lf){var W=m.substr(n,4);n+=4}else W=a,0===pa&&p(Mf);if(W!==a){W=n;pa++;var V=L();pa--;V===a?W=void 0:(n=W,W=a);W!==a?J="YEAR":(n=J,J=a)}else n=J,J=a;return J}
function ja(){var J=n;if(m.substr(n,5).toLowerCase()===Nf){var W=m.substr(n,5);n+=5}else W=a,0===pa&&p(Of);if(W!==a){W=n;pa++;var V=L();pa--;V===a?W=void 0:(n=W,W=a);W!==a?J="MONTH":(n=J,J=a)}else n=J,J=a;return J}function la(){var J=n;if(m.substr(n,3).toLowerCase()===Pf){var W=m.substr(n,3);n+=3}else W=a,0===pa&&p(Qf);if(W!==a){W=n;pa++;var V=L();pa--;V===a?W=void 0:(n=W,W=a);W!==a?J="DAY":(n=J,J=a)}else n=J,J=a;return J}function ra(){var J=n;if(m.substr(n,4).toLowerCase()===Rf){var W=m.substr(n,
4);n+=4}else W=a,0===pa&&p(Sf);if(W!==a){W=n;pa++;var V=L();pa--;V===a?W=void 0:(n=W,W=a);W!==a?J="HOUR":(n=J,J=a)}else n=J,J=a;return J}function ua(){var J=n;if(m.substr(n,6).toLowerCase()===Tf){var W=m.substr(n,6);n+=6}else W=a,0===pa&&p(Uf);if(W!==a){W=n;pa++;var V=L();pa--;V===a?W=void 0:(n=W,W=a);W!==a?J="MINUTE":(n=J,J=a)}else n=J,J=a;return J}function za(){var J=n;if(m.substr(n,6).toLowerCase()===Vf){var W=m.substr(n,6);n+=6}else W=a,0===pa&&p(Wf);if(W!==a){W=n;pa++;var V=L();pa--;V===a?W=
void 0:(n=W,W=a);W!==a?J="SECOND":(n=J,J=a)}else n=J,J=a;return J}function ya(){var J=n;if(m.substr(n,4).toLowerCase()===Xf){var W=m.substr(n,4);n+=4}else W=a,0===pa&&p(Yf);if(W!==a){W=n;pa++;var V=L();pa--;V===a?W=void 0:(n=W,W=a);W!==a?J="CASE":(n=J,J=a)}else n=J,J=a;return J}function Ba(){var J=n;if(m.substr(n,3).toLowerCase()===Zf){var W=m.substr(n,3);n+=3}else W=a,0===pa&&p($f);if(W!==a){W=n;pa++;var V=L();pa--;V===a?W=void 0:(n=W,W=a);W!==a?J="END":(n=J,J=a)}else n=J,J=a;return J}function Na(){var J=
n;if(m.substr(n,4).toLowerCase()===ag){var W=m.substr(n,4);n+=4}else W=a,0===pa&&p(bg);if(W!==a){W=n;pa++;var V=L();pa--;V===a?W=void 0:(n=W,W=a);W!==a?J="WHEN":(n=J,J=a)}else n=J,J=a;return J}function Ea(){var J=n;if(m.substr(n,4).toLowerCase()===cg){var W=m.substr(n,4);n+=4}else W=a,0===pa&&p(dg);if(W!==a){W=n;pa++;var V=L();pa--;V===a?W=void 0:(n=W,W=a);W!==a?J="THEN":(n=J,J=a)}else n=J,J=a;return J}function Fa(){if(44===m.charCodeAt(n)){var J=eg;n++}else J=a,0===pa&&p(fg);return J}function Ga(){if(40===
m.charCodeAt(n)){var J=gg;n++}else J=a,0===pa&&p(hg);return J}function Ja(){if(41===m.charCodeAt(n)){var J=ig;n++}else J=a,0===pa&&p(jg);return J}function oa(){var J;var W=[];for(J=cb();J!==a;)W.push(J),J=cb();return W}function cb(){if(kg.test(m.charAt(n))){var J=m.charAt(n);n++}else J=a,0===pa&&p(lg);return J}function gb(J,W,V,ca){J={type:"binary_expr",operator:J,left:W,right:V};void 0!==ca&&(J.escape=ca);return J}function fb(J,W){for(var V=0;V<W.length;V++)J=gb(W[V][1],J,W[V][3]);return J}H=void 0!==
H?H:{};var a={},ib={start:C},Za=C,Ua="!",Ta=r("!",!1),jb="\x3d",tb=r("\x3d",!1),Ra="\x3e\x3d",Bb=r("\x3e\x3d",!1),ea="\x3e",ha=r("\x3e",!1),fa="\x3c\x3d",ka=r("\x3c\x3d",!1),xa="\x3c\x3e",Aa=r("\x3c\x3e",!1),La="\x3c",Pa=r("\x3c",!1),$a="!\x3d",ab=r("!\x3d",!1),Va="+",hb=r("+",!1),lb="-",qc=r("-",!1),wd="*",xd=r("*",!1),yd="/",zd=r("/",!1),Qe=/^[A-Za-z_\x80-\uFFFF]/,Re=v([["A","Z"],["a","z"],"_",["\u0080","\uffff"]],!1,!1),Se=/^[A-Za-z0-9_]/,Te=v([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),Ue=/^[A-Za-z0-9_.\x80-\uFFFF]/,
Ve=v([["A","Z"],["a","z"],["0","9"],"_",".",["\u0080","\uffff"]],!1,!1),We="@",Xe=r("@",!1),md=function(J){return{type:"interval-period",period:J.value,precision:null,secondary:null}},nd=function(J,W){return{type:"interval-period",period:"second",precision:J,secondary:W}},od="'",pd=r("'",!1),qd="N'",ff=r("N'",!1),oc="''",rd=r("''",!1),sd=/^[^']/,td=v(["'"],!0,!1),jf=".",kf=r(".",!1),pf=/^[0-9]/,qf=v([["0","9"]],!1,!1),lf=/^[eE]/,mf=v(["e","E"],!1,!1),nf=/^[+\-]/,of=v(["+","-"],!1,!1),Hd="null",Id=
r("NULL",!0),Bd="true",Cd=r("TRUE",!0),Ed="false",Fd=r("FALSE",!0),rf="in",sf=r("IN",!0),tf="is",uf=r("IS",!0),vf="like",wf=r("LIKE",!0),ud="escape",vd=r("ESCAPE",!0),xf="not",yf=r("NOT",!0),zf="and",Af=r("AND",!0),Bf="or",Cf=r("OR",!0),Df="between",Ef=r("BETWEEN",!0),Ff="from",Gf=r("FROM",!0),ne="for",oe=r("FOR",!0),de="substring",ee=r("SUBSTRING",!0),Td="extract",Ud=r("EXTRACT",!0),Hf="trim",If=r("TRIM",!0),te="position",ue=r("POSITION",!0),Od="timestamp",Pd=r("TIMESTAMP",!0),Kd="date",Ld=r("DATE",
!0),Ye="leading",Ze=r("LEADING",!0),$e="trailing",af=r("TRAILING",!0),bf="both",cf=r("BOTH",!0),df="to",ef=r("TO",!0),Jf="interval",Kf=r("INTERVAL",!0),Lf="year",Mf=r("YEAR",!0),Nf="month",Of=r("MONTH",!0),Pf="day",Qf=r("DAY",!0),Rf="hour",Sf=r("HOUR",!0),Tf="minute",Uf=r("MINUTE",!0),Vf="second",Wf=r("SECOND",!0),Xf="case",Yf=r("CASE",!0),Zf="end",$f=r("END",!0),ag="when",bg=r("WHEN",!0),cg="then",dg=r("THEN",!0),gf="else",hf=r("ELSE",!0),eg=",",fg=r(",",!1),gg="(",hg=r("(",!1),ig=")",jg=r(")",!1),
kg=/^[ \t\n\r]/,lg=v([" ","\t","\n","\r"],!1,!1),gd="`",hd=r("`",!1),id=/^[^`]/,jd=v(["`"],!0,!1),n=0,$b=[{line:1,column:1}],sb=0,pc=[],pa=0;if("startRule"in H){if(!(H.startRule in ib))throw Error("Can't start parsing from rule \""+H.startRule+'".');Za=ib[H.startRule]}var Qc=Za();if(Qc!==a&&n===m.length)return Qc;Qc!==a&&n<m.length&&p({type:"end"});throw function(J,W,V){return new k(k.buildMessage(J,W),J,W,V)}(pc,sb<m.length?m.charAt(sb):null,sb<m.length?Q(sb,sb+1):Q(sb,sb));}}})})(q);let I=function(){function f(){}
f.parse=function(k){return q.exports.parse(k)};return f}();h.WhereGrammar=I;Object.defineProperty(h,"__esModule",{value:!0})})},"esri/chunks/_commonjsHelpers":function(){define(["exports"],function(h){h.commonjsGlobal="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};h.commonjsRequire=function(c){throw Error('Could not dynamically require "'+c+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.');
};h.getDefaultExportFromCjs=function(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c["default"]:c}})},"esri/layers/graphics/data/projectionSupport":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../geometry/projection ../../../geometry/geometryAdapters/json ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/webMercatorUtils".split(" "),function(h,c,q,I,f,k){function m(y,b){if(!b)return null;if("x"in b){var z={x:0,y:0};
[z.x,z.y]=y(b.x,b.y,w);null!=b.z&&(z.z=b.z);null!=b.m&&(z.m=b.m);return z}if("xmin"in b)return z={xmin:0,ymin:0,xmax:0,ymax:0},[z.xmin,z.ymin]=y(b.xmin,b.ymin,w),[z.xmax,z.ymax]=y(b.xmax,b.ymax,w),b.hasZ&&(z.zmin=b.zmin,z.zmax=b.zmax,z.hasZ=!0),b.hasM&&(z.mmin=b.mmin,z.mmax=b.mmax,z.hasM=!0),z;if("rings"in b)return{rings:H(b.rings,y),hasM:b.hasM,hasZ:b.hasZ};if("paths"in b)return{paths:H(b.paths,y),hasM:b.hasM,hasZ:b.hasZ};if("points"in b)return{points:r(b.points,y),hasM:b.hasM,hasZ:b.hasZ}}function H(y,
b){const z=[];for(const A of y)z.push(r(A,b));return z}function r(y,b){const z=[];for(const A of y)y=b(A[0],A[1],[0,0]),z.push(y),2<A.length&&y.push(A[2]),3<A.length&&y.push(A[3]);return z}function v(){v=c._asyncToGenerator(function*(y,b){b&&(y=Array.isArray(y)?y.map(z=>{var A;return null==(A=z.geometry)?void 0:A.spatialReference}):[y],yield q.initializeProjection(y.map(z=>({source:z,dest:b}))))});return v.apply(this,arguments)}const w=[0,0],Q=m.bind(null,k.lngLatToXY),p=m.bind(null,k.xyToLngLat),
C=new (function(){function y(){this._jobs=[];this._timer=null;this._process=this._process.bind(this)}var b=y.prototype;b.push=function(){var z=c._asyncToGenerator(function*(A,N,G){if(!(A&&A.length&&N&&G)||f.equals(N,G))return A;const R={geometries:A,inSpatialReference:N,outSpatialReference:G,resolve:null};this._jobs.push(R);return new Promise(O=>{R.resolve=O;null===this._timer&&(this._timer=setTimeout(this._process,10))})});return function(A,N,G){return z.apply(this,arguments)}}();b._process=function(){this._timer=
null;const z=this._jobs.shift();if(z){var {geometries:A,inSpatialReference:N,outSpatialReference:G,resolve:R}=z;k.canProject(N,G)?f.isWebMercator(G)?R(A.map(Q)):R(A.map(p)):R(q.projectMany(I.jsonAdapter,A,N,G,null));0<this._jobs.length&&(this._timer=setTimeout(this._process,10))}};return y}());h.checkProjectionSupport=function(y,b){return v.apply(this,arguments)};h.project=function(y,b,z){if(!y)return y;z||(z=b,b=y.spatialReference);return f.isValid(b)&&f.isValid(z)&&!f.equals(b,z)?k.canProject(b,
z)?f.isWebMercator(z)?Q(y):p(y):q.projectMany(I.jsonAdapter,[y],b,z,null)[0]:y};h.projectMany=function(y,b,z){return C.push(y,b,z)};Object.defineProperty(h,"__esModule",{value:!0})})},"esri/geometry/projection":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../core/Error ../core/mathUtils ../core/maybe ../core/promiseUtils ../core/unitUtils ../chunks/mat4 ../chunks/vec3 ../chunks/vec3f64 ./Extent ./Multipoint ../chunks/pe ./Point ./Polygon ./Polyline ./projectionEllipsoid ./support/aaBoundingRect ./support/Ellipsoid ./support/geodesicConstants ./support/GeographicTransformation ./support/spatialReferenceUtils".split(" "),
function(h,c,q,I,f,k,m,H,r,v,w,Q,p,C,y,b,z,A,N,G,R,O,D){function P(){return!!Ea&&C.isLoaded()}function u(ea){k.isNone(Ga)&&(Ga=Promise.all([C.load(),(new Promise(function(ha,fa){h(["../chunks/geometryEngineBase"],ha,fa)})).then(function(ha){return ha.geometryEngineBase}),new Promise(function(ha,fa){h(["./geometryAdapters/hydrated"],ha,fa)})]));return Ga.then(([,ha,{hydratedAdapter:fa}])=>{m.throwIfAborted(ea);Fa=fa;Ea=ha.default;Ea._enableProjection(C.pe)})}function d(ea,ha,fa,ka,xa=null){if(k.isNone(fa)||
k.isNone(ka))return ha;if(B(fa,ka,xa))return ha.map(Aa=>F(Aa,fa,ka));if(k.isNone(xa)){const Aa=O.cacheKey(fa,ka);void 0!==Ja[Aa]?xa=Ja[Aa]:(xa=e(fa,ka,null),k.isNone(xa)&&(xa=new O),Ja[Aa]=xa)}if(k.isNone(Ea))throw new oa;return Ea._project(ea,ha,fa,ka,xa)}function e(ea,ha,fa=null){if(k.isNone(Ea))throw new oa;if(k.isNone(ea)||k.isNone(ha))return null;ea=Ea._getTransformation(Fa,ea,ha,fa,null==fa?void 0:fa.spatialReference);return null!==ea?O.fromGE(ea):null}function B(ea,ha,fa){return fa?!1:D.equals(ea,
ha)?!0:D.isValid(ea)&&D.isValid(ha)&&!!ya(ea,ha,a)}function L(){L=q._asyncToGenerator(function*(ea,ha,fa,ka){if(!P())if(Array.isArray(ea))for(const {source:xa,dest:Aa,geographicTransformation:La}of ea){if(!B(xa,Aa,La))return u(ka)}else if(!B(ea,ha,fa))return u(ka)});return L.apply(this,arguments)}function F(ea,ha,fa){if(!ea)return ea;if("x"in ea){var ka=new y;return t(ea,ha,ka,fa)?ka:null}return"xmin"in ea?(ka=new Q,Z(ea,ha,ka,fa)?ka:null):"rings"in ea?(ka=new b,T(ea,ha,ka,fa)?ka:null):"paths"in ea?
(ka=new z,K(ea,ha,ka,fa)?ka:null):"points"in ea?(ka=new p,g(ea,ha,ka,fa)?ka:null):null}function t(ea,ha,fa,ka,xa=0){Ra[0]=ea.x;Ra[1]=ea.y;const Aa=ea.z;Ra[2]=void 0!==Aa?Aa:xa;if(!qa(Ra,ha,0,Ra,ka,0,1))return!1;fa.x=Ra[0];fa.y=Ra[1];fa.spatialReference=ka;void 0===Aa?(fa.z=void 0,fa.hasZ=!1):(fa.z=Ra[2],fa.hasZ=!0);void 0===ea.m?(fa.m=void 0,fa.hasM=!1):(fa.m=ea.m,fa.hasM=!0);return!0}function g(ea,ha,fa,ka,xa=0){const {points:Aa,hasZ:La,hasM:Pa}=ea;ea=[];const $a=Aa.length,ab=[];for(var Va of Aa)ab.push(Va[0],
Va[1],La?Va[2]:xa);if(!qa(ab,ha,0,ab,ka,0,$a))return!1;for(ha=0;ha<$a;++ha){xa=3*ha;Va=ab[xa];const hb=ab[xa+1];La&&Pa?ea.push([Va,hb,ab[xa+2],Aa[ha][3]]):La?ea.push([Va,hb,ab[xa+2]]):Pa?ea.push([Va,hb,Aa[ha][2]]):ea.push([Va,hb])}fa.points=ea;fa.spatialReference=ka;fa.hasZ=La;fa.hasM=Pa;return!0}function K(ea,ha,fa,ka,xa=0){const {paths:Aa,hasZ:La,hasM:Pa}=ea;ea=[];if(!wa(Aa,La,Pa,ha,ea,ka,xa))return!1;fa.paths=ea;fa.spatialReference=ka;fa.hasZ=La;fa.hasM=Pa;return!0}function T(ea,ha,fa,ka,xa=0){const {rings:Aa,
hasZ:La,hasM:Pa}=ea;ea=[];if(!wa(Aa,La,Pa,ha,ea,ka,xa))return!1;fa.rings=ea;fa.spatialReference=ka;fa.hasZ=La;fa.hasM=Pa;return!0}function Z(ea,ha,fa,ka,xa=0){const {xmin:Aa,ymin:La,xmax:Pa,ymax:$a,hasZ:ab,hasM:Va}=ea;if(!ba(Aa,La,ab?ea.zmin:xa,ha,Ra,ka))return!1;fa.xmin=Ra[0];fa.ymin=Ra[1];ab&&(fa.zmin=Ra[2]);if(!ba(Pa,$a,ab?ea.zmax:xa,ha,Ra,ka))return!1;fa.xmax=Ra[0];fa.ymax=Ra[1];ab&&(fa.zmax=Ra[2]);Va&&(fa.mmin=ea.mmin,fa.mmax=ea.mmax);fa.spatialReference=ka;return!0}function ba(ea,ha,fa,ka,xa,
Aa){Ta[0]=ea;Ta[1]=ha;Ta[2]=fa;return qa(Ta,ka,0,xa,Aa,0,1)}function ia(ea,ha,fa,ka){if(k.isNone(ha)||k.isNone(ka)||2>ea.length)return!1;2===ea.length&&(Ta[0]=ea[0],Ta[1]=ea[1],Ta[2]=0,ea=Ta);return qa(ea,ha,0,fa,ka,0,1)}function ma(ea,ha,fa){if(k.isNone(ha))return!1;ha=Ka(ha,gb);ha=cb[ha][6];if(k.isNone(ha))return!1;ha(ea,0,Ta,0);fa!==Ta&&(fa[0]=Ta[0],fa[1]=Ta[1],2<fa.length&&(fa[2]=Ta[2]));return!0}function qa(ea,ha,fa,ka,xa,Aa,La=1){ha=ya(ha,xa,a);if(k.isNone(ha))return!1;if(ha===Ha){if(ea===ka&&
fa===Aa)return!0;La=fa+3*La;for(let Pa=fa,$a=Aa;Pa<La;Pa++,$a++)ka[$a]=ea[Pa];return!0}La=fa+3*La;for(let Pa=fa,$a=Aa;Pa<La;Pa+=3,$a+=3)ha(ea,Pa,ka,$a);return!0}function wa(ea,ha,fa,ka,xa,Aa,La=0){const Pa=[];for(const $a of ea)for(const ab of $a)Pa.push(ab[0],ab[1],ha?ab[2]:La);if(!qa(Pa,ka,0,Pa,Aa,0,Pa.length/3))return!1;ka=0;xa.length=0;for(const $a of ea){ea=[];for(const ab of $a)ha&&fa?ea.push([Pa[ka++],Pa[ka++],Pa[ka++],ab[3]]):ha?ea.push([Pa[ka++],Pa[ka++],Pa[ka++]]):(fa?ea.push([Pa[ka++],
Pa[ka++],ab[2]]):ea.push([Pa[ka++],Pa[ka++]]),ka++);xa.push(ea)}return!0}function Ca(ea,ha,fa){const ka=Math.sin(ha);ha=Math.cos(ha);const xa=Math.sin(ea);ea=Math.cos(ea);fa[0]=-ka;fa[4]=-xa*ha;fa[8]=ea*ha;fa[12]=0;fa[1]=ha;fa[5]=-xa*ka;fa[9]=ea*ka;fa[13]=0;fa[2]=0;fa[6]=ea;fa[10]=xa;fa[14]=0;fa[3]=0;fa[7]=0;fa[11]=0;fa[15]=1;return fa}function Ka(ea,ha){if(ha.spatialReference===ea)return ha.spatialReferenceId;ha.spatialReference=ea;"metersPerUnit"in ha&&(ha.metersPerUnit=H.getMetersPerUnitForSR(ea,
1));return ea.wkt===A.SphericalECEFSpatialReference.wkt?ha.spatialReferenceId=1:D.isWGS84(ea)?ha.spatialReferenceId=2:D.isWebMercator(ea)?ha.spatialReferenceId=3:ea.wkt===A.WGS84ECEFSpatialReference.wkt?ha.spatialReferenceId=4:4490===ea.wkid?ha.spatialReferenceId=5:ea.wkt===A.SphericalPCPFMars.wkt?ha.spatialReferenceId=7:ea.wkt===A.SphericalPCPFMoon.wkt?ha.spatialReferenceId=9:D.isMars(ea)?ha.spatialReferenceId=8:D.isMoon(ea)?ha.spatialReferenceId=10:ha.spatialReferenceId=0}function Ha(ea,ha,fa,ka){ea!==
fa&&(fa[ka++]=ea[ha++],fa[ka++]=ea[ha++],fa[ka]=ea[ha])}function Oa(ea,ha,fa,ka){fa[ka++]=Ua*(ea[ha++]/G.earth.radius);fa[ka++]=Ua*(Math.PI/2-2*Math.atan(Math.exp(-1*ea[ha++]/G.earth.radius)));fa[ka]=ea[ha]}function na(ea,ha,fa,ka){Oa(ea,ha,fa,ka);X(fa,ka,fa,ka)}function ta(ea,ha,fa,ka){Oa(ea,ha,fa,ka);la(fa,ka,fa,ka)}function va(ea,ha,fa,ka,xa){var Aa=.4999999*Math.PI;Aa=f.clamp(Za*ea[ha+1],-Aa,Aa);Aa=Math.sin(Aa);fa[ka++]=Za*ea[ha]*xa.radius;fa[ka++]=xa.halfSemiMajorAxis*Math.log((1+Aa)/(1-Aa));
fa[ka]=ea[ha+2]}function l(ea,ha,fa,ka){va(ea,ha,fa,ka,G.earth)}function E(ea,ha,fa,ka,xa){xa+=ea[ha+2];const Aa=Za*ea[ha+1];ea=Za*ea[ha];ha=Math.cos(Aa);fa[ka++]=Math.cos(ea)*ha*xa;fa[ka++]=Math.sin(ea)*ha*xa;fa[ka]=Math.sin(Aa)*xa}function x(ea,ha,fa,ka){E(ea,ha,fa,ka,G.moon.radius)}function M(ea,ha,fa,ka){E(ea,ha,fa,ka,G.mars.radius)}function X(ea,ha,fa,ka){E(ea,ha,fa,ka,G.earth.radius)}function Y(ea,ha,fa,ka,xa){var Aa=ea[ha];const La=ea[ha+1];ha=ea[ha+2];ea=Math.sqrt(Aa*Aa+La*La+ha*ha);ha=f.asinClamped(ha/
(0===ea?1:ea));Aa=Math.atan2(La,Aa);fa[ka++]=Ua*Aa;fa[ka++]=Ua*ha;fa[ka]=ea-xa}function S(ea,ha,fa,ka){Y(ea,ha,fa,ka,G.moon.radius)}function U(ea,ha,fa,ka){Y(ea,ha,fa,ka,G.mars.radius)}function aa(ea,ha,fa,ka){Y(ea,ha,fa,ka,G.earth.radius)}function da(ea,ha,fa,ka){aa(ea,ha,fa,ka);l(fa,ka,fa,ka)}function ja(ea,ha,fa,ka){aa(ea,ha,fa,ka);la(fa,ka,fa,ka)}function la(ea,ha,fa,ka){{var xa=G.earth;const La=Za*ea[ha];var Aa=Za*ea[ha+1];ea=ea[ha+2];ha=Math.sin(Aa);Aa=Math.cos(Aa);const Pa=xa.radius/Math.sqrt(1-
xa.eccentricitySquared*ha*ha);fa[ka++]=(Pa+ea)*Aa*Math.cos(La);fa[ka++]=(Pa+ea)*Aa*Math.sin(La);fa[ka++]=(Pa*(1-xa.eccentricitySquared)+ea)*ha}}function ra(ea,ha,fa,ka){var xa=R.earthEllipsoidConstants,Aa=ea[ha],La=ea[ha+1];ea=ea[ha+2];let Pa;ha=Math.abs(ea);var $a=Aa*Aa+La*La;var ab=Math.sqrt($a);var Va=$a+ea*ea;var hb=Math.sqrt(Va);Aa=Math.atan2(La,Aa);var lb=ea*ea/Va;Va=$a/Va;La=xa.a2/hb;$a=xa.a3-xa.a4/hb;.3<Va?(lb=ha/hb*(1+Va*(xa.a1+La+lb*$a)/hb),hb=Math.asin(lb),La=lb*lb,Va=Math.sqrt(1-La)):
(Va=ab/hb*(1-lb*(xa.a5-La-Va*$a)/hb),hb=Math.acos(Va),La=1-Va*Va,lb=Math.sqrt(La));Pa=1-G.earth.eccentricitySquared*La;La=G.earth.radius/Math.sqrt(Pa);xa=xa.a6*La;La=ab-La*Va;$a=ha-xa*lb;ha=Va*La+lb*$a;ab=Va*$a-lb*La;xa=ab/(xa/Pa+ha);hb+=xa;0>ea&&(hb=-hb);fa[ka++]=Ua*Aa;fa[ka++]=Ua*hb;fa[ka]=ha+ab*xa/2}function ua(ea,ha,fa,ka){ra(ea,ha,fa,ka);X(fa,ka,fa,ka)}function za(ea,ha,fa,ka){ra(ea,ha,fa,ka);l(fa,ka,fa,ka)}function ya(ea,ha,fa=Na()){return k.isNone(ea)||k.isNone(ha)?null:Ba(ea,ha,fa).projector}
function Ba(ea,ha,fa){if(k.isNone(ea)||k.isNone(ha)||fa.source.spatialReference===ea&&fa.dest.spatialReference===ha)return fa;const ka=Ka(ea,fa.source),xa=Ka(ha,fa.dest);0===ka&&0===xa?D.equals(ea,ha)?fa.projector=Ha:fa.projector=null:fa.projector=cb[ka][xa];return fa}function Na(){return{source:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},projector:Ha}}let Ea=null,Fa=null,Ga=null,Ja={},oa=function(ea){function ha(){return ea.call(this,
"projection:not-loaded","projection engine not fully loaded yet, please call load()")||this}q._inheritsLoose(ha,ea);return ha}(I);const cb={[2]:{[5]:null,[8]:null,[10]:null,[11]:Ha,[6]:Ha,[1]:X,[7]:null,[9]:null,[0]:null,[3]:l,[2]:Ha,[4]:la},[5]:{[5]:Ha,[8]:null,[10]:null,[11]:Ha,[6]:Ha,[1]:X,[7]:null,[9]:null,[0]:null,[3]:null,[2]:null,[4]:la},[8]:{[5]:null,[8]:Ha,[10]:null,[11]:Ha,[6]:null,[1]:null,[7]:M,[9]:null,[0]:null,[3]:null,[2]:null,[4]:null},[10]:{[5]:null,[8]:null,[10]:Ha,[11]:Ha,[6]:null,
[1]:null,[7]:null,[9]:x,[0]:null,[3]:null,[2]:null,[4]:null},[3]:{[5]:null,[8]:null,[10]:null,[11]:Oa,[6]:Oa,[1]:na,[7]:null,[9]:null,[0]:null,[3]:Ha,[2]:Oa,[4]:ta},[4]:{[5]:ra,[8]:null,[10]:null,[11]:ra,[6]:ra,[1]:ua,[7]:null,[9]:null,[0]:null,[3]:za,[2]:ra,[4]:Ha},[1]:{[5]:aa,[8]:null,[10]:null,[11]:aa,[6]:aa,[1]:Ha,[7]:null,[9]:null,[0]:null,[3]:da,[2]:aa,[4]:ja},[7]:{[5]:null,[8]:U,[10]:null,[11]:U,[6]:null,[1]:null,[7]:Ha,[9]:null,[0]:null,[3]:null,[2]:null,[4]:null},[9]:{[5]:null,[8]:null,[10]:S,
[11]:S,[6]:null,[1]:null,[7]:null,[9]:Ha,[0]:null,[3]:null,[2]:null,[4]:null},[0]:{[5]:null,[8]:null,[10]:null,[11]:null,[6]:null,[1]:null,[7]:null,[9]:null,[0]:Ha,[3]:null,[2]:null,[4]:null},[11]:{[5]:Ha,[8]:Ha,[10]:Ha,[11]:Ha,[6]:Ha,[1]:X,[7]:M,[9]:x,[0]:null,[3]:l,[2]:Ha,[4]:la},[6]:{[5]:null,[8]:null,[10]:null,[11]:Ha,[6]:Ha,[1]:X,[7]:null,[9]:null,[0]:null,[3]:null,[2]:Ha,[4]:la}},gb={spatialReference:null,spatialReferenceId:0},fb={spatialReference:null,spatialReferenceId:0},a=Na(),ib=Na(),Za=
f.deg2rad(1),Ua=f.rad2deg(1),Ta=w.create(),jb=w.create(),tb=w.create(),Ra=w.create(),Bb=w.create();c.canProjectToWGS84ComparableLonLat=function(ea){if(k.isNone(ea))return!1;ea=Ka(ea,gb);return!!cb[ea][6]};c.canProjectWithoutEngine=B;c.computeLatLonToENURotation=Ca;c.computeLinearTransformation=function(ea,ha,fa,ka){if(k.isNone(ea)||k.isNone(ka))return!1;var xa=Ka(ea,gb),Aa=Ka(ka,fb);if(xa===Aa&&1!==Aa&&7!==Aa&&9!==Aa&&(0!==xa||D.equals(ea,ka)))return r.identity(fa),r.translate(fa,fa,ha),!0;if(1===
Aa||7===Aa||9===Aa){ka=ea=0;xa=cb[xa][11];Aa=cb[11][Aa];if(k.isNone(xa)||k.isNone(Aa))return!1;xa(ha,0,jb,0);Aa(jb,0,tb,0);ea=Za*jb[0];ka=Za*jb[1];Ca(ka,ea,fa);fa[12]=tb[0];fa[13]=tb[1];fa[14]=tb[2];return!0}if(3===Aa&&(2===xa||1===xa)){Aa=cb[xa][11];if(k.isNone(Aa))return!1;Aa(ha,0,jb,0);ha=Za*jb[1];l(jb,0,tb,0);r.identity(fa);r.translate(fa,fa,tb);ha=1/Math.cos(ha);r.scale(fa,fa,[ha,ha,1]);return!0}return!1};c.getProjectorName=function(ea,ha){switch(ya(ea,ha,a)){case Ha:return"copy3";case X:return"wgs84ToSphericalECEF";
case l:return"wgs84ToWebMercator";case la:return"wgs84ToWGS84ECEF";case Oa:return"webMercatorToWGS84";case na:return"webMercatorToSphericalECEF";case ta:return"webMercatorToWGS84ECEF";case ra:return"wgs84ECEFToWGS84";case ua:return"wgs84ECEFToSphericalECEF";case za:return"wgs84ECEFToWebMercator";case aa:return"sphericalECEFToWGS84";case da:return"sphericalECEFToWebMercator";case U:return"sphericalMarsPCPFToMars2000";case S:return"sphericalMoonPCPFToMoon2000";case ja:return"sphericalECEFToWGS84ECEF";
case M:return"mars2000ToSphericalPCPF";case x:return"moon2000ToSphericalPCPF";default:return null}};c.getTransformation=e;c.getTransformations=function(ea,ha,fa=null){if(k.isNone(Ea))throw new oa;ea=Ea._getTransformationBySuitability(Fa,ea,ha,fa,null==fa?void 0:fa.spatialReference);if(null!==ea){ha=[];for(const ka of ea)ha.push(O.fromGE(ka));return ha}return[]};c.initializeProjection=function(ea,ha,fa,ka){return L.apply(this,arguments)};c.isLoaded=P;c.isSupported=function(){return!0};c.load=u;c.localLinearScaleFactors=
function(ea,ha,fa,ka){if(k.isNone(ha)||k.isNone(ka))return!1;const xa=Ka(ha,gb);var Aa=Ka(ka,fb);if(xa===Aa&&0!==xa||D.equals(ha,ka))return fa[0]=1,fa[1]=1,fa[2]=1,!0;if(1===xa){ha=v.length(ea);ea=ha/Math.sqrt(ea[0]*ea[0]+ea[1]*ea[1]);ha/=G.earth.radius;if(3===Aa)return fa[0]=ea*ha,fa[1]=ea*ha,fa[2]=1,!0;if(2===Aa||5===Aa)return Aa=180/(G.earth.radius*Math.PI),fa[0]=Aa*ea*ha,fa[1]=Aa*ha,fa[2]=1,!0}return!1};c.lonLatToSphericalPCPF=function(ea,ha,fa,ka,xa=0){ka+=xa;xa=Math.cos(fa);ea[0]=Math.cos(ha)*
xa*ka;ea[1]=Math.sin(ha)*xa*ka;ea[2]=Math.sin(fa)*ka};c.lonLatToWebMercatorComparable=va;c.project=function(ea,ha,fa=null){return Array.isArray(ea)?0===ea.length?[]:d(Fa,ea,ea[0].spatialReference,ha,fa):d(Fa,[ea],ea.spatialReference,ha,fa)[0]};c.projectBoundingRect=function(ea,ha,fa,ka){if(null==ea)return!1;if(D.equals(ha,ka))return N.set(fa,ea),!0;Ta[0]=ea[0];Ta[1]=ea[1];Ta[2]=0;if(!qa(Ta,ha,0,Ta,ka,0,1))return!1;fa[0]=Ta[0];fa[1]=Ta[1];Ta[0]=ea[2];Ta[1]=ea[3];Ta[2]=0;if(!qa(Ta,ha,0,Ta,ka,0,1))return!1;
fa[2]=Ta[0];fa[3]=Ta[1];return!0};c.projectBoundingSphere=function(ea,ha,fa,ka){if(k.isNone(ha)||k.isNone(ka))return!1;ha=Ba(ha,ka,ib);if(ha.projector===Ha)return fa[0]=ea[0],fa[1]=ea[1],fa[2]=ea[2],fa[3]=ea[3],!0;if(k.isNone(ha.projector))return!1;const {source:xa,dest:Aa}=ha;if(3===Aa.spatialReferenceId){ha=cb[xa.spatialReferenceId][2];if(k.isNone(ha))return!1;ha(ea,0,jb,0);ha=Math.abs(Za*jb[1])+Math.asin(ea[3]/(G.earth.radius+ea[2]));l(jb,0,fa,0);fa[3]=ha>.9999*Math.PI?Number.MAX_VALUE:1/Math.cos(ha)*
ea[3];return!0}ha.projector(ea,0,fa,0);fa[3]=ea[3]*xa.metersPerUnit/Aa.metersPerUnit;return!0};c.projectBuffer=qa;c.projectDirection=function(ea,ha,fa,ka,xa){v.copy(Ra,ea);v.add(Bb,ea,ha);ia(Ra,fa,Ra,xa);ia(Bb,fa,Bb,xa);v.subtract(ka,Bb,Ra);v.normalize(ka,ka)};c.projectExtent=function(ea,ha,fa=ha.spatialReference,ka=0){return k.isNone(fa)?!1:Z(ea,ea.spatialReference,ha,fa,ka)};c.projectMany=d;c.projectMultipoint=function(ea,ha,fa=ha.spatialReference,ka=0){return k.isNone(fa)?!1:g(ea,ea.spatialReference,
ha,fa,ka)};c.projectPoint=function(ea,ha,fa=ha.spatialReference,ka=0){return k.isNone(fa)?!1:t(ea,ea.spatialReference,ha,fa,ka)};c.projectPointToVector=function(ea,ha,fa,ka=0){Ra[0]=ea.x;Ra[1]=ea.y;const xa=ea.z;Ra[2]=void 0!==xa?xa:ka;return qa(Ra,ea.spatialReference,0,ha,fa,0,1)};c.projectPointToWGS84ComparableLonLat=function(ea,ha){Ra[0]=ea.x;Ra[1]=ea.y;const fa=ea.z;Ra[2]=void 0!==fa?fa:0;return ma(Ra,ea.spatialReference,ha)};c.projectPolygon=function(ea,ha,fa=ha.spatialReference,ka=0){return k.isNone(fa)?
!1:T(ea,ea.spatialReference,ha,fa,ka)};c.projectPolyline=function(ea,ha,fa=ha.spatialReference,ka=0){return k.isNone(fa)?!1:K(ea,ea.spatialReference,ha,fa,ka)};c.projectVectorToDehydratedPoint=function(ea,ha,fa){return qa(ea,ha,0,Ra,fa.spatialReference,0,1)?(fa.x=Ra[0],fa.y=Ra[1],fa.z=Ra[2],fa):null};c.projectVectorToPoint=function(ea,ha,fa){if(k.isNone(ha)||k.isNone(fa))return null;const ka=new y({spatialReference:fa});return qa(ea,ha,0,Ra,fa,0,1)?(ka.x=Ra[0],ka.y=Ra[1],ka.z=Ra[2],ka):null};c.projectVectorToVector=
ia;c.projectVectorToWGS84ComparableLonLat=function(ea,ha,fa){return ma(ea,ha,fa)};c.projectXYZToVector=ba;c.sphericalPCPFtoLonLatElevation=Y;c.unload=function(){Ga=Fa=Ea=null;Ja={}};Object.defineProperty(c,"__esModule",{value:!0})})},"esri/chunks/mat4":function(){define(["exports","./vec3f64","./common"],function(h,c,q){function I(l,E){l[0]=E[0];l[1]=E[1];l[2]=E[2];l[3]=E[3];l[4]=E[4];l[5]=E[5];l[6]=E[6];l[7]=E[7];l[8]=E[8];l[9]=E[9];l[10]=E[10];l[11]=E[11];l[12]=E[12];l[13]=E[13];l[14]=E[14];l[15]=
E[15];return l}function f(l,E,x,M,X,Y,S,U,aa,da,ja,la,ra,ua,za,ya,Ba){l[0]=E;l[1]=x;l[2]=M;l[3]=X;l[4]=Y;l[5]=S;l[6]=U;l[7]=aa;l[8]=da;l[9]=ja;l[10]=la;l[11]=ra;l[12]=ua;l[13]=za;l[14]=ya;l[15]=Ba;return l}function k(l){l[0]=1;l[1]=0;l[2]=0;l[3]=0;l[4]=0;l[5]=1;l[6]=0;l[7]=0;l[8]=0;l[9]=0;l[10]=1;l[11]=0;l[12]=0;l[13]=0;l[14]=0;l[15]=1;return l}function m(l,E){if(l===E){const x=E[1],M=E[2],X=E[3],Y=E[6],S=E[7],U=E[11];l[1]=E[4];l[2]=E[8];l[3]=E[12];l[4]=x;l[6]=E[9];l[7]=E[13];l[8]=M;l[9]=Y;l[11]=
E[14];l[12]=X;l[13]=S;l[14]=U}else l[0]=E[0],l[1]=E[4],l[2]=E[8],l[3]=E[12],l[4]=E[1],l[5]=E[5],l[6]=E[9],l[7]=E[13],l[8]=E[2],l[9]=E[6],l[10]=E[10],l[11]=E[14],l[12]=E[3],l[13]=E[7],l[14]=E[11],l[15]=E[15];return l}function H(l,E){const x=E[0],M=E[1],X=E[2],Y=E[3],S=E[4],U=E[5],aa=E[6],da=E[7],ja=E[8],la=E[9],ra=E[10],ua=E[11],za=E[12],ya=E[13],Ba=E[14];E=E[15];const Na=x*U-M*S,Ea=x*aa-X*S,Fa=x*da-Y*S,Ga=M*aa-X*U,Ja=M*da-Y*U,oa=X*da-Y*aa,cb=ja*ya-la*za,gb=ja*Ba-ra*za,fb=ja*E-ua*za,a=la*Ba-ra*ya,
ib=la*E-ua*ya,Za=ra*E-ua*Ba;let Ua=Na*Za-Ea*ib+Fa*a+Ga*fb-Ja*gb+oa*cb;if(!Ua)return null;Ua=1/Ua;l[0]=(U*Za-aa*ib+da*a)*Ua;l[1]=(X*ib-M*Za-Y*a)*Ua;l[2]=(ya*oa-Ba*Ja+E*Ga)*Ua;l[3]=(ra*Ja-la*oa-ua*Ga)*Ua;l[4]=(aa*fb-S*Za-da*gb)*Ua;l[5]=(x*Za-X*fb+Y*gb)*Ua;l[6]=(Ba*Fa-za*oa-E*Ea)*Ua;l[7]=(ja*oa-ra*Fa+ua*Ea)*Ua;l[8]=(S*ib-U*fb+da*cb)*Ua;l[9]=(M*fb-x*ib-Y*cb)*Ua;l[10]=(za*Ja-ya*Fa+E*Na)*Ua;l[11]=(la*Fa-ja*Ja-ua*Na)*Ua;l[12]=(U*gb-S*a-aa*cb)*Ua;l[13]=(x*a-M*gb+X*cb)*Ua;l[14]=(ya*Ea-za*Ga-Ba*Na)*Ua;l[15]=
(ja*Ga-la*Ea+ra*Na)*Ua;return l}function r(l,E){const x=E[0],M=E[1],X=E[2],Y=E[3],S=E[4],U=E[5],aa=E[6],da=E[7],ja=E[8],la=E[9],ra=E[10],ua=E[11],za=E[12],ya=E[13],Ba=E[14];E=E[15];l[0]=U*(ra*E-ua*Ba)-la*(aa*E-da*Ba)+ya*(aa*ua-da*ra);l[1]=-(M*(ra*E-ua*Ba)-la*(X*E-Y*Ba)+ya*(X*ua-Y*ra));l[2]=M*(aa*E-da*Ba)-U*(X*E-Y*Ba)+ya*(X*da-Y*aa);l[3]=-(M*(aa*ua-da*ra)-U*(X*ua-Y*ra)+la*(X*da-Y*aa));l[4]=-(S*(ra*E-ua*Ba)-ja*(aa*E-da*Ba)+za*(aa*ua-da*ra));l[5]=x*(ra*E-ua*Ba)-ja*(X*E-Y*Ba)+za*(X*ua-Y*ra);l[6]=-(x*
(aa*E-da*Ba)-S*(X*E-Y*Ba)+za*(X*da-Y*aa));l[7]=x*(aa*ua-da*ra)-S*(X*ua-Y*ra)+ja*(X*da-Y*aa);l[8]=S*(la*E-ua*ya)-ja*(U*E-da*ya)+za*(U*ua-da*la);l[9]=-(x*(la*E-ua*ya)-ja*(M*E-Y*ya)+za*(M*ua-Y*la));l[10]=x*(U*E-da*ya)-S*(M*E-Y*ya)+za*(M*da-Y*U);l[11]=-(x*(U*ua-da*la)-S*(M*ua-Y*la)+ja*(M*da-Y*U));l[12]=-(S*(la*Ba-ra*ya)-ja*(U*Ba-aa*ya)+za*(U*ra-aa*la));l[13]=x*(la*Ba-ra*ya)-ja*(M*Ba-X*ya)+za*(M*ra-X*la);l[14]=-(x*(U*Ba-aa*ya)-S*(M*Ba-X*ya)+za*(M*aa-X*U));l[15]=x*(U*ra-aa*la)-S*(M*ra-X*la)+ja*(M*aa-X*
U);return l}function v(l){const E=l[0],x=l[1],M=l[2],X=l[3],Y=l[4],S=l[5],U=l[6],aa=l[7],da=l[8],ja=l[9],la=l[10],ra=l[11],ua=l[12],za=l[13],ya=l[14];l=l[15];return(E*S-x*Y)*(la*l-ra*ya)-(E*U-M*Y)*(ja*l-ra*za)+(E*aa-X*Y)*(ja*ya-la*za)+(x*U-M*S)*(da*l-ra*ua)-(x*aa-X*S)*(da*ya-la*ua)+(M*aa-X*U)*(da*za-ja*ua)}function w(l,E,x){const M=E[0],X=E[1],Y=E[2],S=E[3],U=E[4],aa=E[5],da=E[6],ja=E[7],la=E[8],ra=E[9],ua=E[10],za=E[11],ya=E[12],Ba=E[13],Na=E[14];E=E[15];let Ea=x[0],Fa=x[1],Ga=x[2],Ja=x[3];l[0]=
Ea*M+Fa*U+Ga*la+Ja*ya;l[1]=Ea*X+Fa*aa+Ga*ra+Ja*Ba;l[2]=Ea*Y+Fa*da+Ga*ua+Ja*Na;l[3]=Ea*S+Fa*ja+Ga*za+Ja*E;Ea=x[4];Fa=x[5];Ga=x[6];Ja=x[7];l[4]=Ea*M+Fa*U+Ga*la+Ja*ya;l[5]=Ea*X+Fa*aa+Ga*ra+Ja*Ba;l[6]=Ea*Y+Fa*da+Ga*ua+Ja*Na;l[7]=Ea*S+Fa*ja+Ga*za+Ja*E;Ea=x[8];Fa=x[9];Ga=x[10];Ja=x[11];l[8]=Ea*M+Fa*U+Ga*la+Ja*ya;l[9]=Ea*X+Fa*aa+Ga*ra+Ja*Ba;l[10]=Ea*Y+Fa*da+Ga*ua+Ja*Na;l[11]=Ea*S+Fa*ja+Ga*za+Ja*E;Ea=x[12];Fa=x[13];Ga=x[14];Ja=x[15];l[12]=Ea*M+Fa*U+Ga*la+Ja*ya;l[13]=Ea*X+Fa*aa+Ga*ra+Ja*Ba;l[14]=Ea*Y+Fa*da+
Ga*ua+Ja*Na;l[15]=Ea*S+Fa*ja+Ga*za+Ja*E;return l}function Q(l,E,x){const M=x[0],X=x[1];x=x[2];let Y=void 0,S=void 0,U=void 0,aa=void 0,da=void 0,ja=void 0,la=void 0,ra=void 0,ua=void 0,za=void 0,ya=void 0,Ba=void 0;E===l?(l[12]=E[0]*M+E[4]*X+E[8]*x+E[12],l[13]=E[1]*M+E[5]*X+E[9]*x+E[13],l[14]=E[2]*M+E[6]*X+E[10]*x+E[14],l[15]=E[3]*M+E[7]*X+E[11]*x+E[15]):(Y=E[0],S=E[1],U=E[2],aa=E[3],da=E[4],ja=E[5],la=E[6],ra=E[7],ua=E[8],za=E[9],ya=E[10],Ba=E[11],l[0]=Y,l[1]=S,l[2]=U,l[3]=aa,l[4]=da,l[5]=ja,l[6]=
la,l[7]=ra,l[8]=ua,l[9]=za,l[10]=ya,l[11]=Ba,l[12]=Y*M+da*X+ua*x+E[12],l[13]=S*M+ja*X+za*x+E[13],l[14]=U*M+la*X+ya*x+E[14],l[15]=aa*M+ra*X+Ba*x+E[15]);return l}function p(l,E,x){const M=x[0],X=x[1];x=x[2];l[0]=E[0]*M;l[1]=E[1]*M;l[2]=E[2]*M;l[3]=E[3]*M;l[4]=E[4]*X;l[5]=E[5]*X;l[6]=E[6]*X;l[7]=E[7]*X;l[8]=E[8]*x;l[9]=E[9]*x;l[10]=E[10]*x;l[11]=E[11]*x;l[12]=E[12];l[13]=E[13];l[14]=E[14];l[15]=E[15];return l}function C(l,E,x,M){let X=M[0],Y=M[1];M=M[2];let S=Math.sqrt(X*X+Y*Y+M*M);var U=void 0,aa=void 0;
let da=void 0,ja=void 0,la=void 0,ra=void 0,ua=void 0,za=void 0,ya=void 0,Ba=void 0,Na=void 0,Ea=void 0,Fa=void 0,Ga=void 0,Ja=void 0,oa=void 0,cb=void 0,gb=void 0,fb=void 0,a=void 0,ib=void 0,Za=void 0;aa=U=void 0;if(S<q.EPSILON)return null;S=1/S;X*=S;Y*=S;M*=S;U=Math.sin(x);aa=Math.cos(x);da=1-aa;ja=E[0];la=E[1];ra=E[2];ua=E[3];za=E[4];ya=E[5];Ba=E[6];Na=E[7];Ea=E[8];Fa=E[9];Ga=E[10];Ja=E[11];oa=X*X*da+aa;cb=Y*X*da+M*U;gb=M*X*da-Y*U;fb=X*Y*da-M*U;a=Y*Y*da+aa;ib=M*Y*da+X*U;Za=X*M*da+Y*U;U=Y*M*da-
X*U;aa=M*M*da+aa;l[0]=ja*oa+za*cb+Ea*gb;l[1]=la*oa+ya*cb+Fa*gb;l[2]=ra*oa+Ba*cb+Ga*gb;l[3]=ua*oa+Na*cb+Ja*gb;l[4]=ja*fb+za*a+Ea*ib;l[5]=la*fb+ya*a+Fa*ib;l[6]=ra*fb+Ba*a+Ga*ib;l[7]=ua*fb+Na*a+Ja*ib;l[8]=ja*Za+za*U+Ea*aa;l[9]=la*Za+ya*U+Fa*aa;l[10]=ra*Za+Ba*U+Ga*aa;l[11]=ua*Za+Na*U+Ja*aa;E!==l&&(l[12]=E[12],l[13]=E[13],l[14]=E[14],l[15]=E[15]);return l}function y(l,E,x){const M=Math.sin(x);x=Math.cos(x);const X=E[4],Y=E[5],S=E[6],U=E[7],aa=E[8],da=E[9],ja=E[10],la=E[11];E!==l&&(l[0]=E[0],l[1]=E[1],
l[2]=E[2],l[3]=E[3],l[12]=E[12],l[13]=E[13],l[14]=E[14],l[15]=E[15]);l[4]=X*x+aa*M;l[5]=Y*x+da*M;l[6]=S*x+ja*M;l[7]=U*x+la*M;l[8]=aa*x-X*M;l[9]=da*x-Y*M;l[10]=ja*x-S*M;l[11]=la*x-U*M;return l}function b(l,E,x){const M=Math.sin(x);x=Math.cos(x);const X=E[0],Y=E[1],S=E[2],U=E[3],aa=E[8],da=E[9],ja=E[10],la=E[11];E!==l&&(l[4]=E[4],l[5]=E[5],l[6]=E[6],l[7]=E[7],l[12]=E[12],l[13]=E[13],l[14]=E[14],l[15]=E[15]);l[0]=X*x-aa*M;l[1]=Y*x-da*M;l[2]=S*x-ja*M;l[3]=U*x-la*M;l[8]=X*M+aa*x;l[9]=Y*M+da*x;l[10]=S*
M+ja*x;l[11]=U*M+la*x;return l}function z(l,E,x){const M=Math.sin(x);x=Math.cos(x);const X=E[0],Y=E[1],S=E[2],U=E[3],aa=E[4],da=E[5],ja=E[6],la=E[7];E!==l&&(l[8]=E[8],l[9]=E[9],l[10]=E[10],l[11]=E[11],l[12]=E[12],l[13]=E[13],l[14]=E[14],l[15]=E[15]);l[0]=X*x+aa*M;l[1]=Y*x+da*M;l[2]=S*x+ja*M;l[3]=U*x+la*M;l[4]=aa*x-X*M;l[5]=da*x-Y*M;l[6]=ja*x-S*M;l[7]=la*x-U*M;return l}function A(l,E){l[0]=1;l[1]=0;l[2]=0;l[3]=0;l[4]=0;l[5]=1;l[6]=0;l[7]=0;l[8]=0;l[9]=0;l[10]=1;l[11]=0;l[12]=E[0];l[13]=E[1];l[14]=
E[2];l[15]=1;return l}function N(l,E){l[0]=E[0];l[1]=0;l[2]=0;l[3]=0;l[4]=0;l[5]=E[1];l[6]=0;l[7]=0;l[8]=0;l[9]=0;l[10]=E[2];l[11]=0;l[12]=0;l[13]=0;l[14]=0;l[15]=1;return l}function G(l,E,x){let M=x[0],X=x[1];x=x[2];let Y=Math.sqrt(M*M+X*X+x*x),S=void 0,U=void 0,aa=void 0;if(Y<q.EPSILON)return null;Y=1/Y;M*=Y;X*=Y;x*=Y;S=Math.sin(E);U=Math.cos(E);aa=1-U;l[0]=M*M*aa+U;l[1]=X*M*aa+x*S;l[2]=x*M*aa-X*S;l[3]=0;l[4]=M*X*aa-x*S;l[5]=X*X*aa+U;l[6]=x*X*aa+M*S;l[7]=0;l[8]=M*x*aa+X*S;l[9]=X*x*aa-M*S;l[10]=
x*x*aa+U;l[11]=0;l[12]=0;l[13]=0;l[14]=0;l[15]=1;return l}function R(l,E){const x=Math.sin(E);E=Math.cos(E);l[0]=1;l[1]=0;l[2]=0;l[3]=0;l[4]=0;l[5]=E;l[6]=x;l[7]=0;l[8]=0;l[9]=-x;l[10]=E;l[11]=0;l[12]=0;l[13]=0;l[14]=0;l[15]=1;return l}function O(l,E){const x=Math.sin(E);E=Math.cos(E);l[0]=E;l[1]=0;l[2]=-x;l[3]=0;l[4]=0;l[5]=1;l[6]=0;l[7]=0;l[8]=x;l[9]=0;l[10]=E;l[11]=0;l[12]=0;l[13]=0;l[14]=0;l[15]=1;return l}function D(l,E){const x=Math.sin(E);E=Math.cos(E);l[0]=E;l[1]=x;l[2]=0;l[3]=0;l[4]=-x;l[5]=
E;l[6]=0;l[7]=0;l[8]=0;l[9]=0;l[10]=1;l[11]=0;l[12]=0;l[13]=0;l[14]=0;l[15]=1;return l}function P(l,E,x){var M=E[0],X=E[1],Y=E[2],S=E[3],U=M+M,aa=X+X;const da=Y+Y;E=M*U;const ja=M*aa;M*=da;const la=X*aa;X*=da;Y*=da;U*=S;aa*=S;S*=da;l[0]=1-(la+Y);l[1]=ja+S;l[2]=M-aa;l[3]=0;l[4]=ja-S;l[5]=1-(E+Y);l[6]=X+U;l[7]=0;l[8]=M+aa;l[9]=X-U;l[10]=1-(E+la);l[11]=0;l[12]=x[0];l[13]=x[1];l[14]=x[2];l[15]=1;return l}function u(l,E){const x=va,M=-E[0],X=-E[1],Y=-E[2],S=E[3],U=E[4],aa=E[5],da=E[6],ja=E[7],la=M*M+X*
X+Y*Y+S*S;0<la?(x[0]=2*(U*S+ja*M+aa*Y-da*X)/la,x[1]=2*(aa*S+ja*X+da*M-U*Y)/la,x[2]=2*(da*S+ja*Y+U*X-aa*M)/la):(x[0]=2*(U*S+ja*M+aa*Y-da*X),x[1]=2*(aa*S+ja*X+da*M-U*Y),x[2]=2*(da*S+ja*Y+U*X-aa*M));P(l,E,x);return l}function d(l,E){l[0]=E[12];l[1]=E[13];l[2]=E[14];return l}function e(l,E){const x=E[0],M=E[1],X=E[2],Y=E[4],S=E[5],U=E[6],aa=E[8],da=E[9];E=E[10];l[0]=Math.sqrt(x*x+M*M+X*X);l[1]=Math.sqrt(Y*Y+S*S+U*U);l[2]=Math.sqrt(aa*aa+da*da+E*E);return l}function B(l,E){const x=E[0]+E[5]+E[10];let M=
0;0<x?(M=2*Math.sqrt(x+1),l[3]=.25*M,l[0]=(E[6]-E[9])/M,l[1]=(E[8]-E[2])/M,l[2]=(E[1]-E[4])/M):E[0]>E[5]&&E[0]>E[10]?(M=2*Math.sqrt(1+E[0]-E[5]-E[10]),l[3]=(E[6]-E[9])/M,l[0]=.25*M,l[1]=(E[1]+E[4])/M,l[2]=(E[8]+E[2])/M):E[5]>E[10]?(M=2*Math.sqrt(1+E[5]-E[0]-E[10]),l[3]=(E[8]-E[2])/M,l[0]=(E[1]+E[4])/M,l[1]=.25*M,l[2]=(E[6]+E[9])/M):(M=2*Math.sqrt(1+E[10]-E[0]-E[5]),l[3]=(E[1]-E[4])/M,l[0]=(E[8]+E[2])/M,l[1]=(E[6]+E[9])/M,l[2]=.25*M);return l}function L(l,E,x,M){var X=E[0],Y=E[1],S=E[2],U=E[3],aa=
X+X,da=Y+Y,ja=S+S;E=X*aa;const la=X*da;X*=ja;const ra=Y*da;Y*=ja;S*=ja;aa*=U;da*=U;U*=ja;ja=M[0];const ua=M[1];M=M[2];l[0]=(1-(ra+S))*ja;l[1]=(la+U)*ja;l[2]=(X-da)*ja;l[3]=0;l[4]=(la-U)*ua;l[5]=(1-(E+S))*ua;l[6]=(Y+aa)*ua;l[7]=0;l[8]=(X+da)*M;l[9]=(Y-aa)*M;l[10]=(1-(E+ra))*M;l[11]=0;l[12]=x[0];l[13]=x[1];l[14]=x[2];l[15]=1;return l}function F(l,E,x,M,X){var Y=E[0],S=E[1],U=E[2],aa=E[3],da=Y+Y,ja=S+S,la=U+U;E=Y*da;var ra=Y*ja,ua=Y*la;Y=S*ja;S*=la;var za=U*la;U=aa*da;ja*=aa;const ya=aa*la;var Ba=M[0],
Na=M[1];la=M[2];M=X[0];aa=X[1];X=X[2];da=(1-(Y+za))*Ba;const Ea=(ra+ya)*Ba;Ba*=ua-ja;ra=(ra-ya)*Na;za=(1-(E+za))*Na;Na*=S+U;ua=(ua+ja)*la;S=(S-U)*la;E=(1-(E+Y))*la;l[0]=da;l[1]=Ea;l[2]=Ba;l[3]=0;l[4]=ra;l[5]=za;l[6]=Na;l[7]=0;l[8]=ua;l[9]=S;l[10]=E;l[11]=0;l[12]=x[0]+M-(da*M+ra*aa+ua*X);l[13]=x[1]+aa-(Ea*M+za*aa+S*X);l[14]=x[2]+X-(Ba*M+Na*aa+E*X);l[15]=1;return l}function t(l,E){var x=E[0],M=E[1],X=E[2];E=E[3];var Y=x+x,S=M+M;const U=X+X;x*=Y;const aa=M*Y;M*=S;const da=X*Y,ja=X*S;X*=U;Y*=E;S*=E;E*=
U;l[0]=1-M-X;l[1]=aa+E;l[2]=da-S;l[3]=0;l[4]=aa-E;l[5]=1-x-X;l[6]=ja+Y;l[7]=0;l[8]=da+S;l[9]=ja-Y;l[10]=1-x-M;l[11]=0;l[12]=0;l[13]=0;l[14]=0;l[15]=1;return l}function g(l,E,x,M,X,Y,S){const U=1/(x-E),aa=1/(X-M),da=1/(Y-S);l[0]=2*Y*U;l[1]=0;l[2]=0;l[3]=0;l[4]=0;l[5]=2*Y*aa;l[6]=0;l[7]=0;l[8]=(x+E)*U;l[9]=(X+M)*aa;l[10]=(S+Y)*da;l[11]=-1;l[12]=0;l[13]=0;l[14]=S*Y*2*da;l[15]=0;return l}function K(l,E,x,M,X){E=1/Math.tan(E/2);let Y=void 0;l[0]=E/x;l[1]=0;l[2]=0;l[3]=0;l[4]=0;l[5]=E;l[6]=0;l[7]=0;l[8]=
0;l[9]=0;l[11]=-1;l[12]=0;l[13]=0;l[15]=0;null!=X&&Infinity!==X?(Y=1/(M-X),l[10]=(X+M)*Y,l[14]=2*X*M*Y):(l[10]=-1,l[14]=-2*M);return l}function T(l,E,x,M){const X=Math.tan(E.upDegrees*Math.PI/180),Y=Math.tan(E.downDegrees*Math.PI/180),S=Math.tan(E.leftDegrees*Math.PI/180);E=Math.tan(E.rightDegrees*Math.PI/180);const U=2/(S+E),aa=2/(X+Y);l[0]=U;l[1]=0;l[2]=0;l[3]=0;l[4]=0;l[5]=aa;l[6]=0;l[7]=0;l[8]=-((S-E)*U*.5);l[9]=(X-Y)*aa*.5;l[10]=M/(x-M);l[11]=-1;l[12]=0;l[13]=0;l[14]=M*x/(x-M);l[15]=0;return l}
function Z(l,E,x,M,X,Y,S){const U=1/(E-x),aa=1/(M-X),da=1/(Y-S);l[0]=-2*U;l[1]=0;l[2]=0;l[3]=0;l[4]=0;l[5]=-2*aa;l[6]=0;l[7]=0;l[8]=0;l[9]=0;l[10]=2*da;l[11]=0;l[12]=(E+x)*U;l[13]=(X+M)*aa;l[14]=(S+Y)*da;l[15]=1;return l}function ba(l,E,x,M){let X=void 0,Y=void 0;var S=void 0,U=void 0;let aa=void 0,da=void 0;var ja=void 0,la=void 0;let ra=void 0,ua=void 0;const za=E[0],ya=E[1];E=E[2];S=M[0];U=M[1];M=M[2];ja=x[0];la=x[1];x=x[2];if(Math.abs(za-ja)<q.EPSILON&&Math.abs(ya-la)<q.EPSILON&&Math.abs(E-x)<
q.EPSILON)return k(l);ja=za-ja;la=ya-la;ra=E-x;ua=1/Math.sqrt(ja*ja+la*la+ra*ra);ja*=ua;la*=ua;ra*=ua;X=U*ra-M*la;Y=M*ja-S*ra;S=S*la-U*ja;(ua=Math.sqrt(X*X+Y*Y+S*S))?(ua=1/ua,X*=ua,Y*=ua,S*=ua):S=Y=X=0;U=la*S-ra*Y;aa=ra*X-ja*S;da=ja*Y-la*X;(ua=Math.sqrt(U*U+aa*aa+da*da))?(ua=1/ua,U*=ua,aa*=ua,da*=ua):da=aa=U=0;l[0]=X;l[1]=U;l[2]=ja;l[3]=0;l[4]=Y;l[5]=aa;l[6]=la;l[7]=0;l[8]=S;l[9]=da;l[10]=ra;l[11]=0;l[12]=-(X*za+Y*ya+S*E);l[13]=-(U*za+aa*ya+da*E);l[14]=-(ja*za+la*ya+ra*E);l[15]=1;return l}function ia(l,
E,x,M){const X=E[0],Y=E[1];E=E[2];var S=M[0];const U=M[1];var aa=M[2];M=X-x[0];let da=Y-x[1];x=E-x[2];let ja=M*M+da*da+x*x;0<ja&&(ja=1/Math.sqrt(ja),M*=ja,da*=ja,x*=ja);let la=U*x-aa*da;aa=aa*M-S*x;S=S*da-U*M;ja=la*la+aa*aa+S*S;0<ja&&(ja=1/Math.sqrt(ja),la*=ja,aa*=ja,S*=ja);l[0]=la;l[1]=aa;l[2]=S;l[3]=0;l[4]=da*S-x*aa;l[5]=x*la-M*S;l[6]=M*aa-da*la;l[7]=0;l[8]=M;l[9]=da;l[10]=x;l[11]=0;l[12]=X;l[13]=Y;l[14]=E;l[15]=1;return l}function ma(l){return"mat4("+l[0]+", "+l[1]+", "+l[2]+", "+l[3]+", "+l[4]+
", "+l[5]+", "+l[6]+", "+l[7]+", "+l[8]+", "+l[9]+", "+l[10]+", "+l[11]+", "+l[12]+", "+l[13]+", "+l[14]+", "+l[15]+")"}function qa(l){return Math.sqrt(l[0]**2+l[1]**2+l[2]**2+l[3]**2+l[4]**2+l[5]**2+l[6]**2+l[7]**2+l[8]**2+l[9]**2+l[10]**2+l[11]**2+l[12]**2+l[13]**2+l[14]**2+l[15]**2)}function wa(l,E,x){l[0]=E[0]+x[0];l[1]=E[1]+x[1];l[2]=E[2]+x[2];l[3]=E[3]+x[3];l[4]=E[4]+x[4];l[5]=E[5]+x[5];l[6]=E[6]+x[6];l[7]=E[7]+x[7];l[8]=E[8]+x[8];l[9]=E[9]+x[9];l[10]=E[10]+x[10];l[11]=E[11]+x[11];l[12]=E[12]+
x[12];l[13]=E[13]+x[13];l[14]=E[14]+x[14];l[15]=E[15]+x[15];return l}function Ca(l,E,x){l[0]=E[0]-x[0];l[1]=E[1]-x[1];l[2]=E[2]-x[2];l[3]=E[3]-x[3];l[4]=E[4]-x[4];l[5]=E[5]-x[5];l[6]=E[6]-x[6];l[7]=E[7]-x[7];l[8]=E[8]-x[8];l[9]=E[9]-x[9];l[10]=E[10]-x[10];l[11]=E[11]-x[11];l[12]=E[12]-x[12];l[13]=E[13]-x[13];l[14]=E[14]-x[14];l[15]=E[15]-x[15];return l}function Ka(l,E,x){l[0]=E[0]*x;l[1]=E[1]*x;l[2]=E[2]*x;l[3]=E[3]*x;l[4]=E[4]*x;l[5]=E[5]*x;l[6]=E[6]*x;l[7]=E[7]*x;l[8]=E[8]*x;l[9]=E[9]*x;l[10]=E[10]*
x;l[11]=E[11]*x;l[12]=E[12]*x;l[13]=E[13]*x;l[14]=E[14]*x;l[15]=E[15]*x;return l}function Ha(l,E,x,M){l[0]=E[0]+x[0]*M;l[1]=E[1]+x[1]*M;l[2]=E[2]+x[2]*M;l[3]=E[3]+x[3]*M;l[4]=E[4]+x[4]*M;l[5]=E[5]+x[5]*M;l[6]=E[6]+x[6]*M;l[7]=E[7]+x[7]*M;l[8]=E[8]+x[8]*M;l[9]=E[9]+x[9]*M;l[10]=E[10]+x[10]*M;l[11]=E[11]+x[11]*M;l[12]=E[12]+x[12]*M;l[13]=E[13]+x[13]*M;l[14]=E[14]+x[14]*M;l[15]=E[15]+x[15]*M;return l}function Oa(l,E){return l[0]===E[0]&&l[1]===E[1]&&l[2]===E[2]&&l[3]===E[3]&&l[4]===E[4]&&l[5]===E[5]&&
l[6]===E[6]&&l[7]===E[7]&&l[8]===E[8]&&l[9]===E[9]&&l[10]===E[10]&&l[11]===E[11]&&l[12]===E[12]&&l[13]===E[13]&&l[14]===E[14]&&l[15]===E[15]}function na(l,E){const x=l[0],M=l[1],X=l[2],Y=l[3],S=l[4],U=l[5],aa=l[6],da=l[7],ja=l[8],la=l[9],ra=l[10],ua=l[11],za=l[12],ya=l[13],Ba=l[14];l=l[15];const Na=E[0],Ea=E[1],Fa=E[2],Ga=E[3],Ja=E[4],oa=E[5],cb=E[6],gb=E[7],fb=E[8],a=E[9],ib=E[10],Za=E[11],Ua=E[12],Ta=E[13],jb=E[14];E=E[15];return Math.abs(x-Na)<=q.EPSILON*Math.max(1,Math.abs(x),Math.abs(Na))&&Math.abs(M-
Ea)<=q.EPSILON*Math.max(1,Math.abs(M),Math.abs(Ea))&&Math.abs(X-Fa)<=q.EPSILON*Math.max(1,Math.abs(X),Math.abs(Fa))&&Math.abs(Y-Ga)<=q.EPSILON*Math.max(1,Math.abs(Y),Math.abs(Ga))&&Math.abs(S-Ja)<=q.EPSILON*Math.max(1,Math.abs(S),Math.abs(Ja))&&Math.abs(U-oa)<=q.EPSILON*Math.max(1,Math.abs(U),Math.abs(oa))&&Math.abs(aa-cb)<=q.EPSILON*Math.max(1,Math.abs(aa),Math.abs(cb))&&Math.abs(da-gb)<=q.EPSILON*Math.max(1,Math.abs(da),Math.abs(gb))&&Math.abs(ja-fb)<=q.EPSILON*Math.max(1,Math.abs(ja),Math.abs(fb))&&
Math.abs(la-a)<=q.EPSILON*Math.max(1,Math.abs(la),Math.abs(a))&&Math.abs(ra-ib)<=q.EPSILON*Math.max(1,Math.abs(ra),Math.abs(ib))&&Math.abs(ua-Za)<=q.EPSILON*Math.max(1,Math.abs(ua),Math.abs(Za))&&Math.abs(za-Ua)<=q.EPSILON*Math.max(1,Math.abs(za),Math.abs(Ua))&&Math.abs(ya-Ta)<=q.EPSILON*Math.max(1,Math.abs(ya),Math.abs(Ta))&&Math.abs(Ba-jb)<=q.EPSILON*Math.max(1,Math.abs(Ba),Math.abs(jb))&&Math.abs(l-E)<=q.EPSILON*Math.max(1,Math.abs(l),Math.abs(E))}function ta(l){const E=q.EPSILON,x=l[0],M=l[1],
X=l[2],Y=l[4],S=l[5],U=l[6],aa=l[8],da=l[9];l=l[10];return Math.abs(1-(x*x+Y*Y+aa*aa))<=E&&Math.abs(1-(M*M+S*S+da*da))<=E&&Math.abs(1-(X*X+U*U+l*l))<=E}const va=c.create();c=Object.freeze({__proto__:null,copy:I,set:f,identity:k,transpose:m,invert:H,adjoint:r,determinant:v,multiply:w,translate:Q,scale:p,rotate:C,rotateX:y,rotateY:b,rotateZ:z,fromTranslation:A,fromScaling:N,fromRotation:G,fromXRotation:R,fromYRotation:O,fromZRotation:D,fromRotationTranslation:P,fromQuat2:u,getTranslation:d,getScaling:e,
getRotation:B,fromRotationTranslationScale:L,fromRotationTranslationScaleOrigin:F,fromQuat:t,frustum:g,perspective:K,perspectiveFromFieldOfView:T,ortho:Z,lookAt:ba,targetTo:ia,str:ma,frob:qa,add:wa,subtract:Ca,multiplyScalar:Ka,multiplyScalarAndAdd:Ha,exactEquals:Oa,equals:na,isOrthoNormal:ta,mul:w,sub:Ca});h.add=wa;h.adjoint=r;h.copy=I;h.determinant=v;h.equals=na;h.exactEquals=Oa;h.frob=qa;h.fromQuat=t;h.fromQuat2=u;h.fromRotation=G;h.fromRotationTranslation=P;h.fromRotationTranslationScale=L;h.fromRotationTranslationScaleOrigin=
F;h.fromScaling=N;h.fromTranslation=A;h.fromXRotation=R;h.fromYRotation=O;h.fromZRotation=D;h.frustum=g;h.getRotation=B;h.getScaling=e;h.getTranslation=d;h.identity=k;h.invert=H;h.isOrthoNormal=ta;h.lookAt=ba;h.mat4=c;h.mul=w;h.multiply=w;h.multiplyScalar=Ka;h.multiplyScalarAndAdd=Ha;h.ortho=Z;h.perspective=K;h.perspectiveFromFieldOfView=T;h.rotate=C;h.rotateX=y;h.rotateY=b;h.rotateZ=z;h.scale=p;h.set=f;h.str=ma;h.sub=Ca;h.subtract=Ca;h.targetTo=ia;h.translate=Q;h.transpose=m})},"esri/chunks/pe":function(){define(["require",
"exports","./_rollupPluginBabelHelpers","../assets","../core/has"],function(h,c,q,I,f){function k(){return!!c._pe}function m(){return!!f("esri-wasm")}function H(){return C?C:C=(new Promise(function(b,z){h(["./pe-wasm"],b,z)})).then(function(b){return b.peWasm}).then(({default:b})=>b({locateFile:z=>I.getAssetUrl(`esri/geometry/support/${z}`)})).then(b=>{r(b)})}function r(b){function z(G,R,O){G[R]=O(G[R])}c._pe=b;c.PeDefs.init();c.PeGTlistExtended.init();c.PeNotationMgrs.init();c.PeNotationUtm.init();
c.PePCSInfo.init();c.PeGCSExtent=function(G){function R(){return G.apply(this,arguments)||this}q._inheritsLoose(R,G);R.prototype.destroy=function(){c._pe.destroy(this)};return R}(c._pe.PeGCSExtent);b=[c._pe.PeDatum,c._pe.PeGeogcs,c._pe.PeGeogtran,c._pe.PeObject,c._pe.PeParameter,c._pe.PePrimem,c._pe.PeProjcs,c._pe.PeSpheroid,c._pe.PeUnit];for(var A of b)z(A.prototype,"getName",G=>function(){return G.call(this,Array(c.PeDefs.PE_NAME_MAX))});for(const G of[c._pe.PeGeogtran,c._pe.PeProjcs])z(G.prototype,
"getParameters",R=>function(){const O=Array(c.PeDefs.PE_PARM_MAX);let D=R.call(this);for(let P=0;P<O.length;P++){const u=c._pe.getValue(D,"*");O[P]=u?c._pe.wrapPointer(u,c._pe.PeParameter):null;D+=Int32Array.BYTES_PER_ELEMENT}return O});z(c._pe.PeHorizon.prototype,"getCoord",G=>function(){const R=this.getSize();if(!R)return null;const O=[],D=G.call(this);p(O,R,D);return O});z(c._pe.PeGTlistExtendedEntry.prototype,"getEntries",G=>{const R=c._pe._pe_getPeGTlistExtendedGTsSize();return function(){let O=
null;var D=G.call(this);if(!c._pe.compare(D,c._pe.NULL)){O=[D];const P=this.getSteps();if(1<P){D=c._pe.getPointer(D);for(let u=1;u<P;u++)O.push(c._pe.wrapPointer(D+R*u,c._pe.PeGTlistExtendedGTs))}}return O}});const N=c._pe._pe_getPeHorizonSize();A=G=>function(){let R=this._cache;R||(this._cache=R=new Map);if(R.has(G))return R.get(G);let O=null;var D=G.call(this);if(!c._pe.compare(D,c._pe.NULL)){O=[D];const P=D.getNump();if(1<P){D=c._pe.getPointer(D);for(let u=1;u<P;u++)O.push(c._pe.wrapPointer(D+
N*u,c._pe.PeHorizon))}}R.set(G,O);return O};z(c._pe.PeProjcs.prototype,"horizonGcsGenerate",A);z(c._pe.PeProjcs.prototype,"horizonPcsGenerate",A);c._pe.PeObject.prototype.toString=function(G=c.PeDefs.PE_STR_OPTS_NONE){c._pe.ensureCache.prepare();const R=c._pe.getPointer(this),O=c._pe.ensureInt8(Array(c.PeDefs.PE_BUFFER_MAX));return c._pe.UTF8ToString(c._pe._pe_object_to_string_ext(R,G,O))}}function v(b){if(b){var z=c._pe.getClass(b);z&&(z=c._pe.getCache(z))&&(b=c._pe.getPointer(b))&&delete z[b]}}
function w(b,z){const A=[];z=Array(z);for(let N=0;N<b;N++)A.push(c._pe.ensureInt8(z));return A}function Q(b){let z;Array.isArray(b[0])?(z=[],b.forEach(A=>{z.push(A[0],A[1])})):z=b;return z}function p(b,z,A,N=!1){if(N)for(N=0;N<2*z;N++)b[N]=c._pe.getValue(A+N*Float64Array.BYTES_PER_ELEMENT,"double");else{N=0===b.length;for(let G=0;G<z;G++)N&&(b[G]=Array(2)),b[G][0]=c._pe.getValue(A,"double"),b[G][1]=c._pe.getValue(A+Float64Array.BYTES_PER_ELEMENT,"double"),A+=2*Float64Array.BYTES_PER_ELEMENT}}let C;
c._pe=null;c.PeCSTransformations=void 0;(function(b){function z(G,R,O){c._pe.ensureCache.prepare();var D=Q(O);const P=O===D;D=c._pe.ensureFloat64(D);(G=c._pe._pe_geog_to_proj(c._pe.getPointer(G),R,D))&&p(O,R,D,P);return G}function A(G,R,O){return N(G,R,O,0)}function N(G,R,O,D){c._pe.ensureCache.prepare();var P=Q(O);const u=O===P;P=c._pe.ensureFloat64(P);(G=c._pe._pe_proj_to_geog_center(c._pe.getPointer(G),R,P,D))&&p(O,R,P,u);return G}b.geogToProj=z;b.projGeog=function(G,R,O,D){switch(D){case c.PeDefs.PE_TRANSFORM_P_TO_G:return A(G,
R,O);case c.PeDefs.PE_TRANSFORM_G_TO_P:return z(G,R,O)}return 0};b.projToGeog=A;b.projToGeogCenter=N})(c.PeCSTransformations||(c.PeCSTransformations={}));c.PeDefs=void 0;(function(b){b.init=function(){b.PE_BUFFER_MAX=c._pe.PeDefs.prototype.PE_BUFFER_MAX;b.PE_NAME_MAX=c._pe.PeDefs.prototype.PE_NAME_MAX;b.PE_MGRS_MAX=c._pe.PeDefs.prototype.PE_MGRS_MAX;b.PE_USNG_MAX=c._pe.PeDefs.prototype.PE_USNG_MAX;b.PE_DD_MAX=c._pe.PeDefs.prototype.PE_DD_MAX;b.PE_DDM_MAX=c._pe.PeDefs.prototype.PE_DDM_MAX;b.PE_DMS_MAX=
c._pe.PeDefs.prototype.PE_DMS_MAX;b.PE_UTM_MAX=c._pe.PeDefs.prototype.PE_UTM_MAX;b.PE_PARM_MAX=c._pe.PeDefs.prototype.PE_PARM_MAX;b.PE_TYPE_NONE=c._pe.PeDefs.prototype.PE_TYPE_NONE;b.PE_TYPE_GEOGCS=c._pe.PeDefs.prototype.PE_TYPE_GEOGCS;b.PE_TYPE_PROJCS=c._pe.PeDefs.prototype.PE_TYPE_PROJCS;b.PE_TYPE_GEOGTRAN=c._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN;b.PE_TYPE_COORDSYS=c._pe.PeDefs.prototype.PE_TYPE_COORDSYS;b.PE_TYPE_UNIT=c._pe.PeDefs.prototype.PE_TYPE_UNIT;b.PE_TYPE_LINUNIT=c._pe.PeDefs.prototype.PE_TYPE_LINUNIT;
b.PE_STR_OPTS_NONE=c._pe.PeDefs.prototype.PE_STR_OPTS_NONE;b.PE_STR_AUTH_NONE=c._pe.PeDefs.prototype.PE_STR_AUTH_NONE;b.PE_STR_AUTH_TOP=c._pe.PeDefs.prototype.PE_STR_AUTH_TOP;b.PE_STR_NAME_CANON=c._pe.PeDefs.prototype.PE_STR_NAME_CANON;b.PE_PARM_X0=c._pe.PeDefs.prototype.PE_PARM_X0;b.PE_PARM_ND=c._pe.PeDefs.prototype.PE_PARM_ND;b.PE_TRANSFORM_1_TO_2=c._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2;b.PE_TRANSFORM_2_TO_1=c._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1;b.PE_TRANSFORM_P_TO_G=c._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G;
b.PE_TRANSFORM_G_TO_P=c._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P;b.PE_HORIZON_RECT=c._pe.PeDefs.prototype.PE_HORIZON_RECT;b.PE_HORIZON_POLY=c._pe.PeDefs.prototype.PE_HORIZON_POLY;b.PE_HORIZON_LINE=c._pe.PeDefs.prototype.PE_HORIZON_LINE;b.PE_HORIZON_DELTA=c._pe.PeDefs.prototype.PE_HORIZON_DELTA}})(c.PeDefs||(c.PeDefs={}));c.PeFactory=void 0;(function(b){function z(R,O){let D=null,P=A[R];P||(P={},A[R]=P);P.hasOwnProperty(String(O))?D=P[O]:(R=c._pe.PeFactory.prototype.factoryByType(R,O),c._pe.compare(R,
c._pe.NULL)||(D=R,P[O]=D));return D=G(D)}const A={},N={},G=R=>{if(R){const O=R.getType();switch(O){case c.PeDefs.PE_TYPE_GEOGCS:R=c._pe.castObject(R,c._pe.PeGeogcs);break;case c.PeDefs.PE_TYPE_PROJCS:R=c._pe.castObject(R,c._pe.PeProjcs);break;case c.PeDefs.PE_TYPE_GEOGTRAN:R=c._pe.castObject(R,c._pe.PeGeogtran);break;default:O&c.PeDefs.PE_TYPE_UNIT&&(R=c._pe.castObject(R,c._pe.PeUnit))}}return R};b.initialize=function(){c._pe.PeFactory.prototype.initialize(null)};b.coordsys=function(R){return z(c.PeDefs.PE_TYPE_COORDSYS,
R)};b.factoryByType=z;b.fromString=function(R,O){let D=null,P=N[R];P||(P={},N[R]=P);P.hasOwnProperty(O)?D=P[O]:(R=c._pe.PeFactory.prototype.fromString(R,O),c._pe.compare(R,c._pe.NULL)||(D=R,P[O]=D));return D=G(D)};b.geogcs=function(R){return z(c.PeDefs.PE_TYPE_GEOGCS,R)};b.geogtran=function(R){return z(c.PeDefs.PE_TYPE_GEOGTRAN,R)};b.getCode=function(R){return c._pe.PeFactory.prototype.getCode(R)};b.projcs=function(R){return z(c.PeDefs.PE_TYPE_PROJCS,R)};b.unit=function(R){return z(c.PeDefs.PE_TYPE_UNIT,
R)}})(c.PeFactory||(c.PeFactory={}));c.PeGCSExtent=null;c.PeGTlistExtended=void 0;(function(b){let z;b.init=function(){b.PE_GTLIST_OPTS_COMMON=c._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON;z=c._pe._pe_getPeGTlistExtendedEntrySize()};b.getGTlist=function(A,N,G,R,O,D){let P=null;const u=new c._pe.PeInteger(D);try{const d=c._pe.PeGTlistExtended.prototype.getGTlist(A,N,G,R,O,u);if(D=u.val)if(P=[d],1<D){const e=c._pe.getPointer(d);for(A=1;A<D;A++)P.push(c._pe.wrapPointer(e+z*A,c._pe.PeGTlistExtendedEntry))}}finally{c._pe.destroy(u)}return P}})(c.PeGTlistExtended||
(c.PeGTlistExtended={}));c.PeGTlistExtendedEntry=void 0;(function(b){b.destroy=function(z){if(z&&z.length){for(const A of z)v(A),A.getEntries().forEach(N=>{v(N);N=N.getGeogtran();v(N);N.getParameters().forEach(v);[N.getGeogcs1(),N.getGeogcs2()].forEach(G=>{v(G);const R=G.getDatum();v(R);v(R.getSpheroid());v(G.getPrimem());v(G.getUnit())})});c._pe.PeGTlistExtendedEntry.prototype.Delete(z[0])}}})(c.PeGTlistExtendedEntry||(c.PeGTlistExtendedEntry={}));c.PeGTTransformations=void 0;(function(b){b.geogToGeog=
function(z,A,N,G,R){c._pe.ensureCache.prepare();var O=Q(N);const D=N===O;O=c._pe.ensureFloat64(O);let P=0;G&&(P=c._pe.ensureFloat64(G));(z=c._pe._pe_geog_to_geog(c._pe.getPointer(z),A,O,P,R))&&p(N,A,O,D);return z}})(c.PeGTTransformations||(c.PeGTTransformations={}));c.PeNotationDms=void 0;(function(b){const z=(N,G,R,O,D,P)=>{c._pe.ensureCache.prepare();switch(N){case "dd":var u=c._pe._pe_geog_to_dd;var d=c.PeDefs.PE_DD_MAX;break;case "ddm":u=c._pe._pe_geog_to_ddm;d=c.PeDefs.PE_DDM_MAX;break;case "dms":u=
c._pe._pe_geog_to_dms,d=c.PeDefs.PE_DMS_MAX}N=0;G&&(N=c._pe.getPointer(G));G=Q(O);G=c._pe.ensureFloat64(G);d=w(R,d);O=c._pe.ensureInt32(d);if(D=u(N,R,G,D,O))for(u=0;u<R;u++)P[u]=c._pe.UTF8ToString(d[u]);return D},A=(N,G,R,O,D)=>{c._pe.ensureCache.prepare();switch(N){case "dd":var P=c._pe._pe_dd_to_geog;break;case "ddm":P=c._pe._pe_ddm_to_geog;break;case "dms":P=c._pe._pe_dms_to_geog}N=0;G&&(N=c._pe.getPointer(G));G=O.map(u=>c._pe.ensureString(u));O=c._pe.ensureInt32(G);G=c._pe.ensureFloat64(Array(2*
R));(P=P(N,R,O,G))&&p(D,R,G);return P};b.geog_to_dms=function(N,G,R,O,D){return z("dms",N,G,R,O,D)};b.dms_to_geog=function(N,G,R,O){return A("dms",N,G,R,O)};b.geog_to_ddm=function(N,G,R,O,D){return z("ddm",N,G,R,O,D)};b.ddm_to_geog=function(N,G,R,O){return A("ddm",N,G,R,O)};b.geog_to_dd=function(N,G,R,O,D){return z("dd",N,G,R,O,D)};b.dd_to_geog=function(N,G,R,O){return A("dd",N,G,R,O)}})(c.PeNotationDms||(c.PeNotationDms={}));c.PeNotationMgrs=void 0;(function(b){b.init=function(){b.PE_MGRS_STYLE_NEW=
c._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW;b.PE_MGRS_STYLE_OLD=c._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD;b.PE_MGRS_STYLE_AUTO=c._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO;b.PE_MGRS_180_ZONE_1_PLUS=c._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS;b.PE_MGRS_ADD_SPACES=c._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES};b.geog_to_mgrs_extended=function(z,A,N,G,R,O,D){c._pe.ensureCache.prepare();let P=0;z&&(P=c._pe.getPointer(z));z=Q(N);N=c._pe.ensureFloat64(z);z=w(A,c.PeDefs.PE_MGRS_MAX);
const u=c._pe.ensureInt32(z);if(G=c._pe._pe_geog_to_mgrs_extended(P,A,N,G,R,O,u))for(R=0;R<A;R++)D[R]=c._pe.UTF8ToString(z[R]);return G};b.mgrs_to_geog_extended=function(z,A,N,G,R){c._pe.ensureCache.prepare();let O=0;z&&(O=c._pe.getPointer(z));z=N.map(D=>c._pe.ensureString(D));N=c._pe.ensureInt32(z);z=c._pe.ensureFloat64(Array(2*A));(G=c._pe._pe_mgrs_to_geog_extended(O,A,N,G,z))&&p(R,A,z);return G}})(c.PeNotationMgrs||(c.PeNotationMgrs={}));c.PeNotationUsng=void 0;(function(b){b.geog_to_usng=function(z,
A,N,G,R,O,D){c._pe.ensureCache.prepare();let P=0;z&&(P=c._pe.getPointer(z));z=Q(N);N=c._pe.ensureFloat64(z);z=w(A,c.PeDefs.PE_MGRS_MAX);const u=c._pe.ensureInt32(z);if(G=c._pe._pe_geog_to_usng(P,A,N,G,R,O,u))for(R=0;R<A;R++)D[R]=c._pe.UTF8ToString(z[R]);return G};b.usng_to_geog=function(z,A,N,G){c._pe.ensureCache.prepare();var R=0;z&&(R=c._pe.getPointer(z));z=N.map(O=>c._pe.ensureString(O));N=c._pe.ensureInt32(z);z=c._pe.ensureFloat64(Array(2*A));(R=c._pe._pe_usng_to_geog(R,A,N,z))&&p(G,A,z);return R}})(c.PeNotationUsng||
(c.PeNotationUsng={}));c.PeNotationUtm=void 0;(function(b){b.init=function(){b.PE_UTM_OPTS_NONE=c._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE;b.PE_UTM_OPTS_ADD_SPACES=c._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES;b.PE_UTM_OPTS_NS=c._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS};b.geog_to_utm=function(z,A,N,G,R){c._pe.ensureCache.prepare();var O=0;z&&(O=c._pe.getPointer(z));z=Q(N);N=c._pe.ensureFloat64(z);z=w(A,c.PeDefs.PE_UTM_MAX);const D=c._pe.ensureInt32(z);if(G=c._pe._pe_geog_to_utm(O,A,N,
G,D))for(O=0;O<A;O++)R[O]=c._pe.UTF8ToString(z[O]);return G};b.utm_to_geog=function(z,A,N,G,R){c._pe.ensureCache.prepare();let O=0;z&&(O=c._pe.getPointer(z));z=N.map(D=>c._pe.ensureString(D));N=c._pe.ensureInt32(z);z=c._pe.ensureFloat64(Array(2*A));(G=c._pe._pe_utm_to_geog(O,A,N,G,z))&&p(R,A,z);return G}})(c.PeNotationUtm||(c.PeNotationUtm={}));c.PePCSInfo=void 0;(function(b){const z=new Map;b.init=function(){b.PE_PCSINFO_OPTION_NONE=c._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE;b.PE_PCSINFO_OPTION_DOMAIN=
c._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN;b.PE_POLE_OUTSIDE_BOUNDARY=c._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY;b.PE_POLE_POINT=c._pe.PePCSInfo.prototype.PE_POLE_POINT};b.generate=function(A,N=b.PE_PCSINFO_OPTION_DOMAIN){let G,R;z.has(A)&&(R=z.get(A),R[N]&&(G=R[N]));G||(G=c._pe.PePCSInfo.prototype.generate(A,N),R||(R=[],z.set(A,R)),R[N]=G);return G}})(c.PePCSInfo||(c.PePCSInfo={}));c.PeVersion=void 0;(function(b){b.version_string=function(){return c._pe.PeVersion.prototype.version_string()}})(c.PeVersion||
(c.PeVersion={}));var y=Object.freeze({__proto__:null,get _pe(){return c._pe},isLoaded:k,isSupported:m,load:H,get PeCSTransformations(){return c.PeCSTransformations},get PeDefs(){return c.PeDefs},get PeFactory(){return c.PeFactory},get PeGCSExtent(){return c.PeGCSExtent},get PeGTlistExtended(){return c.PeGTlistExtended},get PeGTlistExtendedEntry(){return c.PeGTlistExtendedEntry},get PeGTTransformations(){return c.PeGTTransformations},get PeNotationDms(){return c.PeNotationDms},get PeNotationMgrs(){return c.PeNotationMgrs},
get PeNotationUsng(){return c.PeNotationUsng},get PeNotationUtm(){return c.PeNotationUtm},get PePCSInfo(){return c.PePCSInfo},get PeVersion(){return c.PeVersion},_init:r});c._init=r;c.isLoaded=k;c.isSupported=m;c.load=H;c.pe=y})},"esri/assets":function(){define("exports ./config ./request ./core/Error ./core/Logger ./core/urlUtils".split(" "),function(h,c,q,I,f,k){function m(r){if(!c.assetsPath)throw H.errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),
new I("assets:path-not-set","config.assetsPath is not set");return k.join(c.assetsPath,r)}const H=f.getLogger("esri.assets");h.fetchAsset=function(r,v){return q(m(r),v)};h.getAssetUrl=m;Object.defineProperty(h,"__esModule",{value:!0})})},"esri/geometry/support/geodesicConstants":function(){define(["exports","./Ellipsoid"],function(h,c){const q=Math.PI/180;var I=c.earth.radius;const f=c.earth.eccentricitySquared;I={a1:I*f,a2:I*f*I*f,a3:I*f*f/2,a4:I*f*I*f*2.5,a5:I*f+I*f*f/2,a6:1-f};c={4267:{a:6378206.4,
f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:c.earth.radius,f:c.earth.flattening},104900:{a:2439700,f:0},104901:{a:6051E3,f:0},104902:{a:6051800,f:0},104903:{a:c.moon.radius,f:c.moon.flattening},104904:{a:3393400,f:.005207166853303471},104905:{a:c.mars.radius,f:c.mars.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492E3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1E4,f:0},104912:{a:2409300,f:0},104913:{a:15E3,f:0},104914:{a:4E4,f:0},104915:{a:1562090,
f:0},104916:{a:2632345,f:0},104917:{a:85E3,f:0},104918:{a:1821460,f:0},104919:{a:5E3,f:0},104920:{a:12E3,f:0},104921:{a:3E4,f:3},104922:{a:18E3,f:0},104923:{a:14E3,f:0},104924:{a:49300,f:0},104925:{a:60268E3,f:.09796243445941462},104926:{a:16E3,f:0},104927:{a:9500,f:0},104928:{a:56E4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16E3,f:0},104932:{a:133E3,f:0},104933:{a:718E3,f:0},104934:{a:888E3,f:0},104935:{a:1986300,f:0},104936:{a:1E4,f:0},104937:{a:41900,f:0},104938:{a:11E4,f:0},104939:{a:50100,
f:0},104940:{a:764E3,f:0},104941:{a:11E3,f:0},104942:{a:529800,f:0},104943:{a:2575E3,f:0},104944:{a:25559E3,f:.022927344575296365},104945:{a:578900,f:0},104946:{a:33E3,f:0},104947:{a:21E3,f:0},104948:{a:13E3,f:0},104949:{a:31E3,f:0},104950:{a:27E3,f:0},104951:{a:42E3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15E3,f:0},104955:{a:54E3,f:0},104956:{a:77E3,f:0},104957:{a:27E3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764E3,f:.01708124697141011},104961:{a:74E3,f:0},
104962:{a:79E3,f:0},104963:{a:104E3,f:.14423076923076922},104964:{a:29E3,f:0},104965:{a:17E4,f:0},104966:{a:208E3,f:0},104967:{a:4E4,f:0},104968:{a:1352600,f:0},104969:{a:1195E3,f:0},104970:{a:593E3,f:0},104971:{a:c.mars.radius,f:0},104972:{a:47E4,f:0},104973:{a:255E3,f:0},104974:{a:2439400,f:0}};h.WKT_SPHEROID_REGEX=/SPHEROID\[([^\]]+)]/i;h.earthEllipsoidConstants=I;h.spheroids=c;h.toRadians=q;Object.defineProperty(h,"__esModule",{value:!0})})},"esri/geometry/support/GeographicTransformation":function(){define(["./GeographicTransformationStep"],
function(h){return function(){function c(I){this.steps=[];this._cached_projection={};this._chain="";this._gtlistentry=null;if(I&&I.steps)for(const f of I.steps)f instanceof h?this.steps.push(f):this.steps.push(new h({wkid:f.wkid,wkt:f.wkt,isInverse:f.isInverse}))}c.cacheKey=function(I,f){return[void 0!==I.wkid&&null!==I.wkid?I.wkid.toString():"-1",void 0!==I.wkt&&null!==I.wkt?I.wkt.toString():"",void 0!==f.wkid&&null!==f.wkid?f.wkid.toString():"-1",void 0!==f.wkt&&null!==f.wkt?f.wkt.toString():""].join()};
c.fromGE=function(I){const f=new c;let k="";for(const m of I.steps)I=h.fromGE(m),f.steps.push(I),k+=I.uid.toString()+",";f._cached_projection={};f._gtlistentry=null;f._chain=k;return f};var q=c.prototype;q.getInverse=function(){const I=new c;I.steps=[];for(let f=this.steps.length-1;0<=f;f--)I.steps.push(this.steps[f].getInverse());return I};q.getGTListEntry=function(){let I="";for(const f of this.steps)I+=f.uid.toString()+",";I!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=
I);return this._gtlistentry};q.assignCachedGe=function(I,f,k){this._cached_projection[c.cacheKey(I,f)]=k};q.getCachedGeTransformation=function(I,f){let k="";for(const m of this.steps)k+=m.uid.toString()+",";k!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=k);I=this._cached_projection[c.cacheKey(I,f)];return void 0===I?null:I};return c}()})},"esri/geometry/support/GeographicTransformationStep":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(h){let c=
0;return function(){function q(I=null){this.uid=c++;I?(this._wkt=void 0!==I.wkt?I.wkt:null,this._wkid=void 0!==I.wkid?I.wkid:-1,this._isInverse=void 0!==I.isInverse?!0===I.isInverse:!1):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}q.fromGE=function(I){const f=new q;f._wkt=I.wkt;f._wkid=I.wkid;f._isInverse=I.isInverse;return f};q.prototype.getInverse=function(){const I=new q;I._wkt=this.wkt;I._wkid=this._wkid;I._isInverse=!this.isInverse;return I};h._createClass(q,[{key:"wkt",get:function(){return this._wkt},
set:function(I){this._wkt=I;this.uid=c++}},{key:"wkid",get:function(){return this._wkid},set:function(I){this._wkid=I;this.uid=c++}},{key:"isInverse",get:function(){return this._isInverse},set:function(I){this._isInverse=I;this.uid=c++}}]);return q}()})},"esri/geometry/geometryAdapters/json":function(){define(["exports"],function(h){let c=function(m,H,r){this.x=m;this.y=H;this.spatialReference=r;this.m=this.z=void 0},q=function(m,H,r,v){this.rings=m;this.spatialReference=H;this.hasM=this.hasZ=void 0;
r&&(this.hasZ=r);v&&(this.hasM=v)},I=function(m,H,r,v){this.paths=m;this.spatialReference=H;this.hasM=this.hasZ=void 0;r&&(this.hasZ=r);v&&(this.hasM=v)},f=function(m,H,r,v){this.points=m;this.spatialReference=H;this.hasM=this.hasZ=void 0;r&&(this.hasZ=r);v&&(this.hasM=v)},k=function(m,H,r,v,w){this.xmin=m;this.ymin=H;this.xmax=r;this.ymax=v;this.spatialReference=w;this.mmax=this.mmin=this.zmax=this.zmin=void 0};h.jsonAdapter={convertToGEGeometry:function(m,H){return null==H?null:m.convertJSONToGeometry(H)},
exportPoint:function(m,H,r){r=new c(m.getPointX(H),m.getPointY(H),r);const v=m.hasZ(H),w=m.hasM(H);v&&(r.z=m.getPointZ(H));w&&(r.m=m.getPointM(H));return r},exportPolygon:function(m,H,r){return new q(m.exportPaths(H),r,m.hasZ(H),m.hasM(H))},exportPolyline:function(m,H,r){return new I(m.exportPaths(H),r,m.hasZ(H),m.hasM(H))},exportMultipoint:function(m,H,r){return new f(m.exportPoints(H),r,m.hasZ(H),m.hasM(H))},exportExtent:function(m,H,r){var v=m.hasZ(H);const w=m.hasM(H);r=new k(m.getXMin(H),m.getYMin(H),
m.getXMax(H),m.getYMax(H),r);v&&(v=m.getZExtent(H),r.zmin=v.vmin,r.zmax=v.vmax);w&&(m=m.getMExtent(H),r.mmin=m.vmin,r.mmax=m.vmax);return r}};Object.defineProperty(h,"__esModule",{value:!0})})},"esri/layers/graphics/data/QueryEngineCapabilities":function(){define(["exports"],function(h){h.queryCapabilities={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,
supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0};Object.defineProperty(h,
"__esModule",{value:!0})})},"esri/layers/graphics/data/QueryEngineResult":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../geometry/support/quantizationUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ./AttributesBuilder ./attributeSupport ./projectionSupport ./timeSupport ./utils ../../support/fieldUtils ../../../smartMapping/statistics/support/utils ../../../support/arcadeOnDemand".split(" "),function(h,c,q,I,f,k,m,H,r,v,w,
Q,p){function C(A){return A.substr(24,12)+A.substr(19,4)+A.substr(16,2)+A.substr(14,2)+A.substr(11,2)+A.substr(9,2)+A.substr(6,2)+A.substr(4,2)+A.substr(2,2)+A.substr(0,2)}function y(A,N,G,R){if(G&&"esriFieldTypeDate"===G.type){const O=(new Date(A)).getTime(),D=(new Date(N)).getTime();if(!isNaN(O)&&!isNaN(D))return R?D-O:O-D}return"number"===typeof A&&"number"===typeof N?R?N-A:A-N:"string"===typeof A&&"string"===typeof N?(A=A.toUpperCase(),N=N.toUpperCase(),!G||"esriFieldTypeGUID"!==G.type&&"esriFieldTypeGlobalID"!==
G.type?R=(R?A>N:A<N)?-1:(R?A<N:A>N)?1:0:(G=C(A),N=C(N),R=(R?G>N:G<N)?-1:(R?G<N:G>N)?1:0),R):R?1:-1}function b(A,N,G,R,O,D){O-=G;D-=R;A=Math.min(1,Math.max(0,((A-G)*O+(N-R)*D)/(O*O+D*D)));return{x:G+O*A,y:R+D*A}}function z(A,N){return A?N?4:3:N?3:2}return function(){function A(G,R,O){this.items=G;this.queryGeometry=R;this.definitionExpression=O.definitionExpression;this.geometryType=O.geometryType;this.hasM=O.hasM;this.hasZ=O.hasZ;this.objectIdField=O.objectIdField;this.spatialReference=O.spatialReference;
this.fieldsIndex=O.fieldsIndex;this.timeInfo=O.timeInfo;this.featureAdapter=O.featureAdapter;this.aggregateAdapter=O.aggregateAdapter}var N=A.prototype;N.createQueryResponseForCount=function(G){const R=new k(G,this.featureAdapter,this.fieldsIndex);if(!G.outStatistics)return R.countDistinctValues(this.items);const {groupByFieldsForStatistics:O,having:D}=G;if(null==O||!O.length)return 1;const P=new Map,u=new Map,d=new Set;G=G.outStatistics;for(const B of G){({statisticType:G}=B);G="exceedslimit"!==
G?B.onStatisticField:void 0;if(!u.has(G)){var e=[];for(const L of O){const F=this._getAttributeValues(R,L,P);e.push(F)}u.set(G,this._calculateUniqueValues(e))}G=u.get(G);for(const L in G){const {data:F,items:t}=G[L];e=F.join(",");D&&!R.validateItems(t,D)||d.add(e)}}return d.size};N.createQueryResponse=function(G){let R;R=G.outStatistics?G.outStatistics.some(O=>"exceedslimit"===O.statisticType)?this._createExceedsLimitQueryResponse(G):this._createStatisticsQueryResponse(G):this._createFeatureQueryResponse(G);
G.returnQueryGeometry&&(I.isValid(G.outSR)&&!I.equals(this.queryGeometry.spatialReference,G.outSR)?R.queryGeometry=v.cleanFromGeometryEngine({spatialReference:G.outSR,...H.project(this.queryGeometry,this.queryGeometry.spatialReference,G.outSR)}):R.queryGeometry=v.cleanFromGeometryEngine({spatialReference:G.outSR,...this.queryGeometry}));return R};N.createSnappingResponse=function(G,R){const O=this.featureAdapter,D=z(this.hasZ,this.hasM),{x:P,y:u}=G.point,d="number"===typeof G.distance?G.distance:
G.distance.x,e="number"===typeof G.distance?G.distance:G.distance.y,B={candidates:[]},L="esriGeometryPolygon"===this.geometryType;R=this.getPointCreator(G.point,this.spatialReference,R);for(const ia of this.items){var F=O.getGeometry(ia);if(!F)continue;const {coords:ma,lengths:qa}=F;if(G.types&1){F=0;for(var t=0;t<qa.length;t++){var g=qa[t];for(var K=0;K<g;K++,F+=D){var T=ma[F],Z=ma[F+1];if(K!==g-1){const wa=ma[F+D],Ca=ma[F+D+1],{x:Ka,y:Ha}=b(P,u,T,Z,wa,Ca);var ba=(P-Ka)/d;const Oa=(u-Ha)/e;ba=ba*
ba+Oa*Oa;1>=ba&&B.candidates.push({type:"edge",objectId:O.getObjectId(ia),distance:Math.sqrt(ba),target:R(Ka,Ha),start:R(T,Z),end:R(wa,Ca)})}}}}if(G.types&2)for(F=L?ma.length-D:ma.length,t=0;t<F;t+=D)g=ma[t],K=ma[t+1],T=(P-g)/d,Z=(u-K)/e,T=T*T+Z*Z,1>=T&&B.candidates.push({type:"vertex",objectId:O.getObjectId(ia),distance:Math.sqrt(T),target:R(g,K)})}B.candidates.sort((ia,ma)=>ia.distance-ma.distance);return B};N.getPointCreator=function(G,R,O){const D=c.isSome(O)&&!I.equals(R,O)?P=>H.project(P,R,
O):P=>P;return null!=G.z&&null!=G.m?(P,u)=>D({x:P,y:u,z:G.z,m:G.m}):null!=G.z?(P,u)=>D({x:P,y:u,z:G.z}):null!=G.m?(P,u)=>D({x:P,y:u,m:G.m}):(P,u)=>D({x:P,y:u})};N.executeAttributesQuery=function(G){var R=m.getWhereClause(G.where,this.fieldsIndex);if(!R)return Promise.resolve(this);if(R.isStandardized){let O=0;const D=[];for(const P of this.items)R.testFeature(P,this.featureAdapter)&&(D[O++]=P);R=new A(D,this.queryGeometry,this);R.definitionExpression=G.where;return Promise.resolve(R)}return Promise.reject(new TypeError("Where clause is not standardized"))};
N.executeAggregateIdsQuery=function(G){if(!G.aggregateIds||!G.aggregateIds.length||c.isNone(this.aggregateAdapter))return Promise.resolve(this);const R=new Set;for(const D of G.aggregateIds)this.aggregateAdapter.getFeatureObjectIds(D).forEach(P=>R.add(P));const O=this.featureAdapter.getObjectId;return Promise.resolve(new A(this.items.filter(D=>R.has(O(D))),this.queryGeometry,this))};N.executeObjectIdsQuery=function(G){if(!G.objectIds||!G.objectIds.length)return Promise.resolve(this);const R=new Set(G.objectIds),
O=this.featureAdapter.getObjectId;return Promise.resolve(new A(this.items.filter(D=>R.has(O(D))),this.queryGeometry,this))};N.executeTimeQuery=function(G){G=r.getTimeOperator(this.timeInfo,G.timeExtent,this.featureAdapter);if(!c.isSome(G))return Promise.resolve(this);G=this.items.filter(G);return Promise.resolve(new A(G,this.queryGeometry,this))};N.filterLatest=function(){const {trackIdField:G,startTimeField:R,endTimeField:O}=this.timeInfo;var D=O||R;const P=new Map,u=this.featureAdapter.getAttribute;
for(const d of this.items){const e=u(d,G),B=u(d,D),L=P.get(e);(!L||B>u(L,D))&&P.set(e,d)}D=Array.from(P.values());return Promise.resolve(new A(D,this.queryGeometry,this))};N.project=function(){var G=h._asyncToGenerator(function*(R){if(!R||I.equals(this.spatialReference,R))return this;const O=this.featureAdapter,D=(yield H.projectMany(this.items.map(P=>v.getGeometry(this.geometryType,this.hasZ,this.hasM,O.getGeometry(P))),this.spatialReference,R)).map((P,u)=>O.cloneWithGeometry(this.items[u],f.convertFromGeometry(P,
this.hasZ,this.hasM)));return new A(D,this.queryGeometry,{definitionExpression:this.definitionExpression,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,objectIdField:this.objectIdField,spatialReference:R,fieldsIndex:this.fieldsIndex,timeInfo:this.timeInfo,featureAdapter:this.featureAdapter})});return function(R){return G.apply(this,arguments)}}();N.createSummaryStatisticsResponse=function(){var G=h._asyncToGenerator(function*(R,O){const {field:D,normalizationField:P,normalizationType:u,
normalizationTotal:d,minValue:e,maxValue:B}=O;var L=new k(R,this.featureAdapter,this.fieldsIndex);R=this.fieldsIndex.isDateField(D);O=O.valueExpression?yield this._getAttributeExpressionValues(L,O.valueExpression,O.viewInfoParams):this._getAttributeNormalizedValues(L,{field:D,normalizationField:P,normalizationType:u,normalizationTotal:d});L=Q.isNullCountSupported({normalizationType:u,normalizationField:P,minValue:e,maxValue:B});O=w.isStringField(this.fieldsIndex.get(D))?Q.calculateStringStatistics({values:O,
supportsNullCount:L}):Q.calculateStatistics({values:O,minValue:e,maxValue:B,useSampleStdDev:!u,supportsNullCount:L});return Q.processStatsResult(O,R)});return function(R,O){return G.apply(this,arguments)}}();N._sortFeatures=function(G,R,O){if(1<G.length&&R&&R.length)for(const D of R.reverse()){R=D.split(" ");const P=R[0],u=this.fieldsIndex.get(P),d=R[1]&&"desc"===R[1].toLowerCase();G.sort((e,B)=>{e=O(e,P,u);B=O(B,P,u);return y(e,B,u,d)})}};N._createFeatureQueryResponse=function(G){const R=this.items,
{geometryType:O,hasM:D,hasZ:P,objectIdField:u,spatialReference:d}=this,{outFields:e,outSR:B,quantizationParameters:L,resultRecordCount:F,resultOffset:t,returnZ:g,returnM:K}=G,T=null!=F?R.length>(t||0)+F:!1,Z=e&&(-1<e.indexOf("*")?[...this.fieldsIndex.fields]:e.map(ba=>this.fieldsIndex.get(ba)));return{exceededTransferLimit:T,features:this._createFeatures(G,R),fields:Z,geometryType:O,hasM:D&&K,hasZ:P&&g,objectIdFieldName:u,spatialReference:v.cleanFromGeometryEngine(B?B:d),transform:L&&q.toQuantizationTransform(L)||
null}};N._createFeatures=function(G,R){const O=new k(G,this.featureAdapter,this.fieldsIndex),{hasM:D,hasZ:P}=this,{orderByFields:u,quantizationParameters:d,returnGeometry:e,returnCentroid:B,maxAllowableOffset:L,resultOffset:F,resultRecordCount:t,returnZ:g=!1,returnM:K=!1}=G,T=P&&g,Z=D&&K;G=[];var ba=0;R=[...R];this._sortFeatures(R,u,(qa,wa,Ca)=>O.getFieldValue(qa,wa,Ca));if(e||B){var ia=q.toQuantizationTransform(d);if(e&&!B)for(var ma of R)G[ba++]={attributes:O.getAttributes(ma),geometry:v.getGeometry(this.geometryType,
this.hasZ,this.hasM,this.featureAdapter.getGeometry(ma),L,ia,T,Z)};else if(!e&&B)for(const qa of R)G[ba++]={attributes:O.getAttributes(qa),centroid:v.transformCentroid(this,this.featureAdapter.getCentroid(qa,this),ia)};else for(const qa of R)G[ba++]={attributes:O.getAttributes(qa),centroid:v.transformCentroid(this,this.featureAdapter.getCentroid(qa,this),ia),geometry:v.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(qa),L,ia,T,Z)}}else for(ia of R)(ma=O.getAttributes(ia))&&
(G[ba++]={attributes:ma});ba=F||0;null!=t&&(G=G.slice(ba,Math.min(G.length,ba+t)));return G};N._createExceedsLimitQueryResponse=function(G){var R=!1;let O=Number.POSITIVE_INFINITY,D=Number.POSITIVE_INFINITY;R=Number.POSITIVE_INFINITY;for(const P of G.outStatistics)if("exceedslimit"===P.statisticType){O=null!=P.maxPointCount?P.maxPointCount:Number.POSITIVE_INFINITY;D=null!=P.maxRecordCount?P.maxRecordCount:Number.POSITIVE_INFINITY;R=null!=P.maxVertexCount?P.maxVertexCount:Number.POSITIVE_INFINITY;
break}if("esriGeometryPoint"===this.geometryType)R=this.items.length>O;else if(this.items.length>D)R=!0;else{G=this.hasZ?this.hasM?4:3:this.hasM?3:2;const P=this.featureAdapter;R=this.items.reduce((u,d)=>{d=P.getGeometry(d);return u+(d&&d.coords.length||0)},0)/G>R}return{fields:[{name:"exceedslimit",type:"esriFieldTypeInteger",alias:"exceedslimit",sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],features:[{attributes:{exceedslimit:Number(R)}}]}};N._createStatisticsQueryResponse=function(G){var R=
{attributes:{}};const O=[],D=new Map,P=new Map,u=new Map,d=new Map,e=new k(G,this.featureAdapter,this.fieldsIndex);var B=G.outStatistics;const {groupByFieldsForStatistics:L,having:F,orderByFields:t}=G;G=L&&L.length;const g=!!G,K=g&&L[0],T=g&&!this.fieldsIndex.get(K);for(const qa of B){const {outStatisticFieldName:wa,statisticType:Ca}=qa;B=qa;var Z="exceedslimit"!==Ca?qa.onStatisticField:void 0;const Ka="percentile_disc"===Ca||"percentile_cont"===Ca,Ha=g&&1===G&&(Z===K||T)&&"count"===Ca;if(g){if(!u.has(Z)){var ba=
[];for(const Oa of L){var ia=this._getAttributeValues(e,Oa,D);ba.push(ia)}u.set(Z,this._calculateUniqueValues(ba,e.returnDistinctValues))}ba=u.get(Z);for(const Oa in ba){const {count:na,data:ta,items:va,itemPositions:l}=ba[Oa];ia=ta.join(",");if(!F||e.validateItems(va,F)){const E=d.get(ia)||{attributes:{}};var ma=null;if(Ha)ma=na;else{const x=this._getAttributeValues(e,Z,D);ma=l.map(M=>x[M]);ma=Ka&&"statisticParameters"in B?this._getPercentileValue(B,ma):this._getStatisticValue(B,ma)}E.attributes[wa]=
ma;L.forEach((x,M)=>E.attributes[this.fieldsIndex.get(x)?x:`EXPR_${M+1}`]=ta[M]);d.set(ia,E)}}}else Z=this._getAttributeValues(e,Z,D),R.attributes[wa]=Ka&&"statisticParameters"in B?this._getPercentileValue(B,Z):this._getStatisticValue(B,Z,P);O.push({name:wa,alias:wa,type:"esriFieldTypeDouble"})}R=g?Array.from(d.values()):[R];this._sortFeatures(R,t,(qa,wa)=>qa.attributes[wa]);return{fields:O,features:R}};N._getStatisticValue=function(G,R,O){const {onStatisticField:D,statisticType:P}=G;G=null;G=null!=
O&&O.has(D)?O.get(D):w.isStringField(this.fieldsIndex.get(D))?Q.calculateStringStatistics({values:R}):Q.calculateStatistics({values:R,minValue:null,maxValue:null,useSampleStdDev:!0});O&&O.set(D,G);return G["var"===P?"variance":P]};N._getPercentileValue=function(G,R){const {onStatisticField:O,statisticParameters:D,statisticType:P}=G,{value:u,orderBy:d}=D,e="desc"===d,B=this.fieldsIndex.get(O);G=[...R].filter(L=>null!=L).sort((L,F)=>y(L,F,B,e));return this._calculatePercentile(G,u,"percentile_disc"===
P)};N._getAttributeValues=function(G,R,O){if(O.has(R))return O.get(R);const D=this.fieldsIndex.get(R),P=this.items.map(u=>G.getFieldValue(u,R,D));O.set(R,P);return P};N._getAttributeNormalizedValues=function(G,R){return this.items.map(O=>G.getNormalizedValue(O,{field:R.field,fieldInfo:this.fieldsIndex.get(R.field),normalizationField:R.normalizationField,normalizationFieldInfo:this.fieldsIndex.get(R.normalizationField),normalizationType:R.normalizationType,normalizationTotal:R.normalizationTotal}))};
N._getAttributeExpressionValues=function(){var G=h._asyncToGenerator(function*(R,O,D){const {arcadeUtils:P}=yield p.loadArcade(),u=P.createFunction(O),d=D&&P.getViewInfo(D);return this.items.map(e=>R.getExpressionValue(e,{compiledFunc:u,viewInfo:d},P))});return function(R,O,D){return G.apply(this,arguments)}}();N._calculateUniqueValues=function(G,R){const O={},D=this.items,P=D.length;for(let u=0;u<P;u++){const d=D[u],e=[];for(const L of G)e.push(L[u]);const B=e.join(",");R?null==O[B]&&(O[B]={count:1,
data:e,items:[d],itemPositions:[u]}):null==O[B]?O[B]={count:1,data:e,items:[d],itemPositions:[u]}:(O[B].count++,O[B].items.push(d),O[B].itemPositions.push(u))}return O};N._calculatePercentile=function(G,R,O){if(0===G.length)return null;if(0>=R)return G[0];if(1<=R)return G[G.length-1];var D=(G.length-1)*R,P=Math.floor(D);R=P+1;D%=1;P=G[P];const u=G[R];return R>=G.length||O||"string"===typeof P||"string"===typeof u?P:P*(1-D)+u*D};h._createClass(A,[{key:"size",get:function(){return this.items.length}}]);
return A}()})},"esri/geometry/support/quantizationUtils":function(){define(["exports","./jsonUtils"],function(h,c){function q({scale:d,translate:e},B){return Math.round((B-e[0])/d[0])}function I({scale:d,translate:e},B){return Math.round((e[1]-B)/d[1])}function f(d,e,B){const L=[];let F,t,g,K;for(let T=0;T<B.length;T++){const Z=B[T];if(0<T){if(g=q(d,Z[0]),K=I(d,Z[1]),g!==F||K!==t)L.push(e(Z,g-F,K-t)),F=g,t=K}else F=q(d,Z[0]),t=I(d,Z[1]),L.push(e(Z,F,t))}return 0<L.length?L:null}function k(d,e,B,L){return f(d,
B?L?u:P:L?P:D,e)}function m(d,e,B,L){const F=[];B=B?L?u:P:L?P:D;for(L=0;L<e.length;L++){const t=f(d,B,e[L]);t&&3<=t.length&&F.push(t)}return F.length?F:null}function H(d,e,B,L){const F=[];B=B?L?u:P:L?P:D;for(L=0;L<e.length;L++){const t=f(d,B,e[L]);t&&2<=t.length&&F.push(t)}return F.length?F:null}function r({scale:d,translate:e},B){return B*d[0]+e[0]}function v({scale:d,translate:e},B){return e[1]-B*d[1]}function w(d,e,B){const L=Array(B.length);if(!B.length)return L;const [F,t]=d.scale;let g=r(d,
B[0][0]);d=v(d,B[0][1]);L[0]=e(B[0],g,d);for(let K=1;K<B.length;K++){const T=B[K];g+=T[0]*F;d-=T[1]*t;L[K]=e(T,g,d)}return L}function Q(d,e,B){const L=Array(B.length);for(let F=0;F<B.length;F++)L[F]=w(d,e,B[F]);return L}function p(d,e,B,L){return w(d,B?L?u:P:L?P:D,e)}function C(d,e,B,L){return Q(d,B?L?u:P:L?P:D,e)}function y(d,e,B,L){return Q(d,B?L?u:P:L?P:D,e)}function b(d,e,B){let [L,F]=B[0],t=Math.min(L,e[0]),g=Math.min(F,e[1]),K=Math.max(L,e[2]);e=Math.max(F,e[3]);for(let T=1;T<B.length;T++){const [Z,
ba]=B[T];L+=Z;F+=ba;0>Z&&(t=Math.min(t,L));0<Z&&(K=Math.max(K,L));0>ba?g=Math.min(g,F):0<ba&&(e=Math.max(e,F))}d[0]=t;d[1]=g;d[2]=K;d[3]=e;return d}function z(d,e){if(!e.length)return null;d[0]=d[1]=Number.POSITIVE_INFINITY;d[2]=d[3]=Number.NEGATIVE_INFINITY;for(let B=0;B<e.length;B++)b(d,d,e[B]);return d}function A(d,e,B,L,F){e.xmin=q(d,B.xmin);e.ymin=I(d,B.ymin);e.xmax=q(d,B.xmax);e.ymax=I(d,B.ymax);e!==B&&(L&&(e.zmin=B.zmin,e.zmax=B.zmax),F&&(e.mmin=B.mmin,e.mmax=B.mmax));return e}function N(d,
e,B,L,F){e.points=k(d,B.points,L,F);return e}function G(d,e,B,L,F){e.x=q(d,B.x);e.y=I(d,B.y);e!==B&&(L&&(e.z=B.z),F&&(e.m=B.m));return e}function R(d,e,B,L,F){d=m(d,B.rings,L,F);if(!d)return null;e.rings=d;return e}function O(d,e,B,L,F){d=H(d,B.paths,L,F);if(!d)return null;e.paths=d;return e}const D=(d,e,B)=>[e,B],P=(d,e,B)=>[e,B,d[2]],u=(d,e,B)=>[e,B,d[2],d[3]];h.equals=function(d,e){if(d===e||null==d&&null==e)return!0;if(null==d||null==e)return!1;let B,L,F,t;d&&"upperLeft"===d.originPosition?(B=
d.translate[0],L=d.translate[1],d=d.scale[0]):(B=d.extent.xmin,L=d.extent.ymax,d=d.tolerance);e&&"upperLeft"===e.originPosition?(F=e.translate[0],t=e.translate[1],e=e.scale[0]):(F=e.extent.xmin,t=e.extent.ymax,e=e.tolerance);return B===F&&L===t&&d===e};h.getQuantizedBoundsCoordsArray=b;h.getQuantizedBoundsCoordsArrayArray=z;h.getQuantizedBoundsPaths=function(d){return z([0,0,0,0],d)};h.getQuantizedBoundsPoints=function(d){const e=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,
Number.NEGATIVE_INFINITY];return b(e,e,d)};h.getQuantizedBoundsRings=function(d){return z([0,0,0,0],d)};h.quantizeBounds=function(d,e,B){e[0]=q(d,B[0]);e[3]=I(d,B[1]);e[2]=q(d,B[2]);e[1]=I(d,B[3]);return e};h.quantizeExtent=A;h.quantizeGeometry=function(d,e){return d&&e?c.isPoint(e)?G(d,{},e,!1,!1):c.isPolyline(e)?O(d,{},e,!1,!1):c.isPolygon(e)?R(d,{},e,!1,!1):c.isMultipoint(e)?N(d,{},e,!1,!1):c.isExtent(e)?A(d,{},e,!1,!1):null:null};h.quantizeMultipoint=N;h.quantizePaths=H;h.quantizePoint=G;h.quantizePoints=
k;h.quantizePolygon=R;h.quantizePolyline=O;h.quantizeRings=m;h.quantizeX=q;h.quantizeY=I;h.toQuantizationTransform=function(d){return d?{originPosition:"upper-left"===d.originPosition?"upperLeft":"lower-left"===d.originPosition?"lowerLeft":d.originPosition,scale:d.tolerance?[d.tolerance,d.tolerance]:[1,1],translate:d.extent?[d.extent.xmin,d.extent.ymax]:[0,0]}:null};h.unquantizeBounds=function(d,e,B){return B?(e[0]=r(d,B[0]),e[1]=v(d,B[3]),e[2]=r(d,B[2]),e[3]=v(d,B[1]),e):[r(d,e[0]),v(d,e[3]),r(d,
e[2]),v(d,e[1])]};h.unquantizeCoordsArray=w;h.unquantizeCoordsArrayArray=Q;h.unquantizeExtent=function(d,e,B,L,F){e.xmin=r(d,B.xmin);e.ymin=v(d,B.ymin);e.xmax=r(d,B.xmax);e.ymax=v(d,B.ymax);e!==B&&(L&&(e.zmin=B.zmin,e.zmax=B.zmax),F&&(e.mmin=B.mmin,e.mmax=B.mmax));return e};h.unquantizeMultipoint=function(d,e,B,L,F){e.points=p(d,B.points,L,F);return e};h.unquantizePaths=C;h.unquantizePoint=function(d,e,B,L,F){e.x=r(d,B.x);e.y=v(d,B.y);e!==B&&(L&&(e.z=B.z),F&&(e.m=B.m));return e};h.unquantizePoints=
p;h.unquantizePolygon=function(d,e,B,L,F){e.rings=y(d,B.rings,L,F);return e};h.unquantizePolyline=function(d,e,B,L,F){e.paths=C(d,B.paths,L,F);return e};h.unquantizeRings=y;h.unquantizeX=r;h.unquantizeY=v;Object.defineProperty(h,"__esModule",{value:!0})})},"esri/layers/graphics/data/AttributesBuilder":function(){define(["../../../core/maybe","./attributeSupport","../../../smartMapping/statistics/support/utils"],function(h,c,q){return function(){function I(k,m,H){this._fieldDataCache=new Map;this._returnDistinctMap=
new Map;this.returnDistinctValues=k.returnDistinctValues;this.fieldsIndex=H;this.featureAdapter=m;if((m=k.outFields)&&-1===m.indexOf("*")){this.outFields=m;k=0;for(const v of m){var r=c.getExpressionFromFieldName(v);r=(m=this.fieldsIndex.get(r))?null:c.getWhereClause(r,H);m=m?m.name:c.getAliasFromFieldName(v)||`FIELD_EXP_${k++}`;this._fieldDataCache.set(v,{alias:m,clause:r})}}}var f=I.prototype;f.countDistinctValues=function(k){if(!this.returnDistinctValues)return k.length;k.forEach(m=>this.getAttributes(m));
return this._returnDistinctMap.size};f.getAttributes=function(k){k=this._processAttributesForOutFields(k);return this._processAttributesForDistinctValues(k)};f.getFieldValue=function(k,m,H){const r=H?H.name:m;let v=null;this._fieldDataCache.has(r)?v=this._fieldDataCache.get(r).clause:H||(v=c.getWhereClause(m,this.fieldsIndex),this._fieldDataCache.set(r,{alias:r,clause:v}));return H?this.featureAdapter.getAttribute(k,r):v.calculateValue(k,this.featureAdapter)};f.getNormalizedValue=function(k,m){const H=
m.normalizationType,r=m.normalizationTotal;let v=this.getFieldValue(k,m.field,m.fieldInfo);H&&Number.isFinite(v)&&(k=this.getFieldValue(k,m.normalizationField,m.normalizationFieldInfo),v=q.getNormalizedValue(v,H,k,r));return v};f.getExpressionValue=function(k,m,H){k={attributes:this.featureAdapter.getAttributes(k)};k=H.createExecContext(k,m.viewInfo);return H.executeFunction(m.compiledFunc,k)};f.validateItem=function(k,m){this._fieldDataCache.has(m)||this._fieldDataCache.set(m,{alias:m,clause:c.getWhereClause(m,
this.fieldsIndex)});return this._fieldDataCache.get(m).clause.testFeature(k,this.featureAdapter)};f.validateItems=function(k,m){this._fieldDataCache.has(m)||this._fieldDataCache.set(m,{alias:m,clause:c.getWhereClause(m,this.fieldsIndex)});return this._fieldDataCache.get(m).clause.testSet(k,this.featureAdapter)};f._processAttributesForOutFields=function(k){const m=this.outFields;if(!m||!m.length)return this.featureAdapter.getAttributes(k);const H={};for(const r of m){const {alias:v,clause:w}=this._fieldDataCache.get(r);
H[v]=w?w.calculateValue(k,this.featureAdapter):this.featureAdapter.getAttribute(k,v)}return H};f._processAttributesForDistinctValues=function(k){if(h.isNone(k)||!this.returnDistinctValues)return k;var m=this.outFields,H=[];if(m)for(const v of m){var {alias:r}=this._fieldDataCache.get(v);H.push(k[r])}else for(r in k)H.push(k[r]);m=`${(m||["*"]).join(",")}=${H.join(",")}`;H=this._returnDistinctMap.get(m)||0;this._returnDistinctMap.set(m,++H);return 1<H?null:k};return I}()})},"esri/smartMapping/statistics/support/utils":function(){define(["exports",
"../../../core/Error","../../../core/maybe","../../../layers/support/fieldUtils"],function(h,c,q,I){function f(r,v){return new c(r,v)}function k(r,v){r=q.isSome(r)?r:"";q.isSome(v)&&v&&(r=r?"("+r+") AND ("+v+")":v);return r}function m(r){const v=r.layer;return r.fields.filter(w=>!v.getField(w))}function H(r){const v=r.layer;return r.fields.filter(w=>{w=v.getFieldUsageInfo(w);return!w||!w.supportsStatistics})}h.calculateStatistics=function(r){const {values:v,useSampleStdDev:w,supportsNullCount:Q}=
r;var p=Number.POSITIVE_INFINITY;let C=Number.NEGATIVE_INFINITY,y=null,b=null;var z=null;let A=null,N=0;const G=null==r.minValue?-Infinity:r.minValue;r=null==r.maxValue?Infinity:r.maxValue;for(const R of v)Number.isFinite(R)?R>=G&&R<=r&&(y+=R,p=Math.min(p,R),C=Math.max(C,R),N++):"string"===typeof R&&N++;if(N&&null!=y){b=y/N;z=0;for(const R of v)Number.isFinite(R)&&R>=G&&R<=r&&(z+=(R-b)**2);A=w?1<N?z/(N-1):0:0<N?z/N:0;z=Math.sqrt(A)}else C=p=null;p={avg:b,count:N,max:C,min:p,stddev:z,sum:y,variance:A};
Q&&(p.nullcount=v.length-N);return p};h.calculateStringStatistics=function(r){const {values:v,supportsNullCount:w}=r;r=v.filter(p=>null!=p).length;const Q={count:r};w&&(Q.nullcount=v.length-r);return Q};h.createError=f;h.getNormalizedValue=function(r,v,w,Q){let p=null;switch(v){case "log":0!==r&&(p=Math.log(r)*Math.LOG10E);break;case "percent-of-total":Number.isFinite(Q)&&0!==Q&&(p=r/Q*100);break;case "field":Number.isFinite(w)&&0!==w&&(p=r/w);break;case "natural-log":0<r&&(p=Math.log(r));break;case "square-root":0<
r&&(p=r**.5)}return p};h.getRangeExpr=function(r,v,w){v=null!=v?r+" \x3e\x3d "+v:"";r=null!=w?r+" \x3c\x3d "+w:"";w="";return(w=v&&r?k(v,r):v||r)?"("+w+")":""};h.getSQLFilterForNormalization=function(r){const v=r.field,w=r.normalizationType;r=r.normalizationField;let Q;if("log"===w)Q="(NOT "+v+" \x3d 0)";else if("field"===w)Q="(NOT "+r+" \x3d 0)";else if("natural-log"===w||"square-root"===w)Q=`(${v} > 0)`;return Q};h.isNullCountSupported=function(r){const v=null!=r.minValue||null!=r.maxValue,w=!!r.sqlExpression&&
r.supportsSQLExpression;return!(null!=r.normalizationField||null!=r.normalizationType)&&!v&&!w};h.mergeWhereClauses=k;h.processStatsResult=function(r,v){if(!v)return r;["avg","stddev","variance"].forEach(w=>{null!=r[w]&&(r[w]=Math.ceil(r[w]))});return r};h.verifyBasicFieldValidity=function(r,v,w){const Q=m({layer:r,fields:v});if(Q.length)return f(w,"Unknown fields: "+Q.join(", ")+". You can only use fields defined in the layer schema");r=H({layer:r,fields:v});if(r.length)return f(w,"Unsupported fields: "+
r.join(", ")+". You can only use fields that can be fetched i.e. AdapterFieldUsageInfo.supportsStatistics must be true")};h.verifyFieldType=function(r,v,w,Q){let p=null;if(!v)p=f(w,"'field' is not defined in the layer schema");else if(v.name===r.objectIdField||-1===Q.indexOf(v.type))p=f(w,"'field' should be one of these types: "+Q.join(","));return p};h.verifyNumericField=function(r,v,w){let Q;v?v.name!==r.objectIdField&&I.isNumericField(v)||(Q=f(w,"'field' should be one of these numeric types: "+
I.numericTypes.join(","))):Q=f(w,"'field' is not defined in the layer schema");return Q};Object.defineProperty(h,"__esModule",{value:!0})})},"esri/layers/support/fieldUtils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../core/Error ../../core/maybe ../../core/object ./domains ../../support/arcadeOnDemand".split(" "),function(h,c,q,I,f,k,m,H){function r(S,U,aa){if(S)for(const da of S)(S=(S=k.getDeepValue(da,U))&&"function"!==typeof S&&aa.get(S))&&k.setDeepValue(da,
S.name,U)}function v(S,U){if(!S||!U)return[];ta.clear();w(ta,S,U);return Array.from(ta).sort()}function w(S,U,aa){var da;if(aa)if(null!=U&&null!=(da=U.fields)&&da.length)if(aa.includes("*"))for(const {name:ja}of U.fields)S.add(ja);else for(const ja of aa)Q(S,U,ja);else if(aa.includes("*"))S.clear(),S.add("*");else for(const ja of aa)S.add(ja)}function Q(S,U,aa){"string"===typeof aa&&(U?(U=U.get(aa))&&S.add(U.name):S.add(aa))}function p(S,U,aa){return C.apply(this,arguments)}function C(){C=q._asyncToGenerator(function*(S,
U,aa){if(aa){var {arcadeUtils:da}=yield H.loadArcade();aa=da.extractFieldNames(aa);for(const ja of aa)Q(S,U,ja)}});return C.apply(this,arguments)}function y(S,U,aa){return b.apply(this,arguments)}function b(){b=q._asyncToGenerator(function*(S,U,aa){if(aa&&"1\x3d1"!==aa){aa=(yield new Promise(function(da,ja){h(["../../core/sql/WhereClause"],da,ja)})).WhereClause.create(aa,U);if(!aa.isStandardized)throw new I("fieldUtils:collectFilterFields","Where clause is not standardized");w(S,U,aa.fieldNames)}});
return b.apply(this,arguments)}function z(S,U){for(const aa of S)if(aa&&aa.valueType&&aa.valueType===U)return aa.name;return null}function A(){A=q._asyncToGenerator(function*(S){if(!S)return[];const U=new Set;yield N(U,S);return Array.from(U).sort()});return A.apply(this,arguments)}function N(S,U){return G.apply(this,arguments)}function G(){G=q._asyncToGenerator(function*(S,U){if(U){var aa=k.getDeepValue("elevationInfo.featureExpressionInfo",U);if(aa)return aa.collectRequiredFields(S,U.fieldsIndex)}});
return G.apply(this,arguments)}function R(S,U,aa){return O.apply(this,arguments)}function O(){O=q._asyncToGenerator(function*(S,U,aa){aa.outStatistic.onStatisticValueExpression?p(S,U,aa.outStatistic.onStatisticValueExpression):S.add(aa.outStatistic.onStatisticField)});return O.apply(this,arguments)}function D(){D=q._asyncToGenerator(function*(S,U,aa){U&&aa&&"cluster"===aa.type&&aa.fields&&(yield Promise.all(aa.fields.map(da=>R(S,U.fieldsIndex,da))))});return D.apply(this,arguments)}function P(){P=
q._asyncToGenerator(function*(S,U,aa){U&&(U.timeInfo&&f.isSome(aa)&&aa.timeExtent&&w(S,U.fieldsIndex,[U.timeInfo.startField,U.timeInfo.endField]),U.floorInfo&&w(S,U.fieldsIndex,[U.floorInfo.floorField]),f.isSome(aa)&&f.isSome(aa.where)&&(yield y(S,U.fieldsIndex,aa.where)))});return P.apply(this,arguments)}function u(){u=q._asyncToGenerator(function*(S){if(!S)return[];const U="timeInfo"in S&&S.timeInfo;return U?v(S.fieldsIndex,[S.trackIdField,U.startField,U.endField]):[]});return u.apply(this,arguments)}
function d(){d=q._asyncToGenerator(function*(S){if(!S)return[];const U=new Set;yield e(U,S);return Array.from(U).sort()});return d.apply(this,arguments)}function e(S,U){return B.apply(this,arguments)}function B(){B=q._asyncToGenerator(function*(S,U){const {labelingInfo:aa,fieldsIndex:da}=U;aa&&aa.length&&(yield Promise.all(aa.map(ja=>L(S,da,ja))))});return B.apply(this,arguments)}function L(S,U,aa){return F.apply(this,arguments)}function F(){F=q._asyncToGenerator(function*(S,U,aa){if(aa){var da=aa.getLabelExpression();
aa=aa.where;"arcade"===da.type?yield p(S,U,da.expression):(da=da.expression.match(/{[^}]*}/g))&&da.forEach(ja=>{Q(S,U,ja.slice(1,-1))});yield y(S,U,aa)}});return F.apply(this,arguments)}function t(S){return"number"===typeof S&&!isNaN(S)&&isFinite(S)}function g(S){return null===S||t(S)}function K(S){return null===S||va(S)}function T(S){return null!=S&&"string"===typeof S}function Z(S){return null===S||T(S)}function ba(){return!0}function ia(S,U){let aa;switch(S.type){case "date":case "integer":case "long":case "small-integer":case "esriFieldTypeDate":case "esriFieldTypeInteger":case "esriFieldTypeLong":case "esriFieldTypeSmallInteger":aa=
S.nullable?K:va;break;case "double":case "single":case "esriFieldTypeSingle":case "esriFieldTypeDouble":aa=S.nullable?g:t;break;case "string":case "esriFieldTypeString":aa=S.nullable?Z:T;break;default:aa=ba}return 1===arguments.length?aa:aa(U)}function ma(S){return null!=S&&E.has(S.type)}function qa(S,U){return S.nullable&&null===U?null:ma(S)&&!wa(S.type,Number(U))?c.NumericRangeValidationError.OUT_OF_RANGE:ia(S,U)?S.domain?m.validateDomainValue(S.domain,U):null:c.TypeValidationError.INVALID_TYPE}
function wa(S,U){return(S="string"===typeof S?Ca(S):S)?S.isInteger?va(U)&&U>=S.min&&U<=S.max:U>=S.min&&U<=S.max:!1}function Ca(S){switch(S){case "esriFieldTypeSmallInteger":case "small-integer":return x;case "esriFieldTypeInteger":case "integer":return M;case "esriFieldTypeSingle":case "single":return X;case "esriFieldTypeDouble":case "double":return Y}}function Ka(S,U,aa){if(!U||!U.attributes||!S){if(f.isSome(aa))for(var da of S)aa.add(da);return!0}U=U.attributes;da=!1;for(const ja of S)if(!(ja in
U))if(da=!0,f.isSome(aa))aa.add(ja);else break;return da}function Ha(){Ha=q._asyncToGenerator(function*(S,U){const aa=new Set;for(const da of U)yield p(aa,S.fieldsIndex,da);return Array.from(aa).sort()});return Ha.apply(this,arguments)}const Oa="field field2 field3 normalizationField rotationInfo.field proportionalSymbolInfo.field proportionalSymbolInfo.normalizationField colorInfo.field colorInfo.normalizationField".split(" "),na=["field","normalizationField"],ta=new Set,va=(()=>"isInteger"in Number?
Number.isInteger:S=>"number"===typeof S&&isFinite(S)&&Math.floor(S)===S)(),l=["integer","small-integer","single","double"],E=new Set([...l,"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);c.NumericRangeValidationError=void 0;(c.NumericRangeValidationError||(c.NumericRangeValidationError={})).OUT_OF_RANGE="numeric-range-validation-error::out-of-range";c.TypeValidationError=void 0;(c.TypeValidationError||(c.TypeValidationError={})).INVALID_TYPE="type-validation-error::invalid-type";
const x={min:-32768,max:32767,isInteger:!0},M={min:-2147483648,max:2147483647,isInteger:!0},X={min:-3.4E38,max:1.2E38,isInteger:!1},Y={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};c.collectArcadeFieldNames=p;c.collectElevationFields=N;c.collectFeatureReductionFields=function(S,U,aa){return D.apply(this,arguments)};c.collectField=Q;c.collectFields=w;c.collectFilterFields=function(S,U,aa){return P.apply(this,arguments)};c.collectLabelingFields=e;c.doubleRange=Y;c.featureHasFields=function(S,
U){return!Ka(S,U,null)};c.fixFields=v;c.fixRendererFields=function(S,U){if(null!=S&&null!=U)for(const aa of Array.isArray(S)?S:[S])if(r(Oa,aa,U),"visualVariables"in aa&&aa.visualVariables)for(const da of aa.visualVariables)r(na,da,U)};c.fixTimeInfoFields=function(S,U){if(null!=S&&null!=U&&U.fields.length)if("startField"in S){var aa=U.get(S.startField);U=U.get(S.endField);S.startField=aa&&aa.name||null;S.endField=U&&U.name||null}else aa=U.get(S.startTimeField),U=U.get(S.endTimeField),S.startTimeField=
aa&&aa.name||null,S.endTimeField=U&&U.name||null};c.getDisplayFieldName=function({displayField:S,fields:U}){if(S)return S;if(!U||!U.length)return null;if(!(S=z(U,"name-or-title")||z(U,"unique-identifier")||z(U,"type-or-category")))a:{for(const aa of U)if(aa&&aa.name&&(U=aa.name.toLowerCase(),-1<U.indexOf("name")||-1<U.indexOf("title"))){S=aa.name;break a}S=null}return S};c.getElevationFields=function(S){return A.apply(this,arguments)};c.getExpressionFields=function(S,U){return Ha.apply(this,arguments)};
c.getFeatureEditFields=function(S){if(!S)return[];const U="editFieldsInfo"in S&&S.editFieldsInfo;return U?v(S.fieldsIndex,[U&&U.creatorField,U&&U.creationDateField,U&&U.editorField,U&&U.editDateField]):[]};c.getFeatureGeometryFields=function(S){if(!S)return[];const U=S.geometryFieldsInfo;return U?v(S.fieldsIndex,[U.shapeAreaField,U.shapeLengthField]):[]};c.getFieldDefaultValue=function(S){const U=S.defaultValue;if(void 0!==U&&ia(S,U))return U;if(S.nullable)return null};c.getFieldRange=function(S){const U=
m.getDomainRange(S.domain);if(U)return U;if(ma(S))return Ca(S.type)};c.getLabelingFields=function(S){return d.apply(this,arguments)};c.getNumericTypeForValue=function(S){if(!t(S))return null;if(va(S)){if(S>=x.min&&S<=x.max)return"esriFieldTypeSmallInteger";if(S>=M.min&&S<=M.max)return"esriFieldTypeInteger"}return S>=X.min&&S<=X.max?"esriFieldTypeSingle":"esriFieldTypeDouble"};c.getTimeFields=function(S){return u.apply(this,arguments)};c.integerRange=M;c.isDateField=function(S){return null!=S&&("date"===
S.type||"esriFieldTypeDate"===S.type)};c.isNumberInRange=wa;c.isNumericField=ma;c.isStringField=function(S){return null!=S&&("string"===S.type||"esriFieldTypeString"===S.type)};c.isValidFieldValue=function(S,U){return null===qa(S,U)};c.isValueMatchingFieldType=ia;c.numericTypes=l;c.packFields=function(S,U,aa=1){if(!U||!S)return[];if(U.includes("*"))return["*"];U=v(S,U);return U.length/S.fields.length>=aa?["*"]:U};c.populateMissingFields=Ka;c.rendererFields=Oa;c.sanitizeNullFieldValue=function(S){return null==
S||"number"===typeof S&&isNaN(S)?null:S};c.singleRange=X;c.smallIntegerRange=x;c.unpackFieldNames=function(S,U){return f.isNone(U)||f.isNone(S)?[]:U.includes("*")?S.fields.map(aa=>aa.name):U};c.validateFieldValue=qa;c.validationErrorToString=function(S,U,aa){switch(S){case m.DomainValidationError.INVALID_CODED_VALUE:return`Value ${aa} is not in the coded domain - field: ${U.name}, domain: ${JSON.stringify(U.domain)}`;case m.DomainValidationError.VALUE_OUT_OF_RANGE:return`Value ${aa} is out of the range of valid values - field: ${U.name}, domain: ${JSON.stringify(U.domain)}`;
case c.TypeValidationError.INVALID_TYPE:return`Value ${aa} is not a valid value for the field type - field: ${U.name}, type: ${U.type}, nullable: ${U.nullable}`;case c.NumericRangeValidationError.OUT_OF_RANGE:{const {min:da,max:ja}=Ca(U.type);return`Value ${aa} is out of range for the number type - field: ${U.name}, type: ${U.type}, value range is ${da} to ${ja}`}}};c.visualVariableFields=na;Object.defineProperty(c,"__esModule",{value:!0})})},"esri/layers/support/domains":function(){define("exports ../../core/has ./CodedValueDomain ./Domain ./InheritedDomain ./RangeDomain".split(" "),
function(h,c,q,I,f,k){function m(H,r){switch(H.type){case "range":{const v="range"in H?H.range[1]:H.maxValue;if(+r<("range"in H?H.range[0]:H.minValue)||+r>v)return h.DomainValidationError.VALUE_OUT_OF_RANGE;break}case "coded-value":case "codedValue":if(null==H.codedValues||H.codedValues.every(v=>null==v||v.code!==r))return h.DomainValidationError.INVALID_CODED_VALUE}return null}h.DomainValidationError=void 0;(function(H){H.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range";H.INVALID_CODED_VALUE=
"domain-validation-error::invalid-coded-value"})(h.DomainValidationError||(h.DomainValidationError={}));c={key:"type",base:I,typeMap:{range:k,"coded-value":q,inherited:f}};h.CodedValueDomain=q;h.DomainBase=I;h.InheritedDomain=f;h.RangeDomain=k;h.fromJSON=function(H){if(!H||!H.type)return null;switch(H.type){case "range":return k.fromJSON(H);case "codedValue":return q.fromJSON(H);case "inherited":return f.fromJSON(H)}return null};h.getDomainRange=function(H){if(H&&"range"===H.type)return{min:"range"in
H?H.range[0]:H.minValue,max:"range"in H?H.range[1]:H.maxValue}};h.isValidDomainValue=function(H,r){return null===m(H,r)};h.types=c;h.validateDomainValue=m;Object.defineProperty(h,"__esModule",{value:!0})})},"esri/layers/support/CodedValueDomain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./CodedValue ./Domain".split(" "),
function(h,c,q,I,f,k,m,H,r,v,w){var Q;f=Q=function(p){function C(b){b=p.call(this,b)||this;b.codedValues=null;b.type="coded-value";return b}h._inheritsLoose(C,p);var y=C.prototype;y.getName=function(b){let z=null;if(this.codedValues){const A=String(b);this.codedValues.some(N=>{String(N.code)===A&&(z=N.name);return!!z})}return z};y.clone=function(){return new Q({codedValues:q.clone(this.codedValues),name:this.name})};return C}(w);c.__decorate([I.property({type:[v["default"]],json:{write:!0}})],f.prototype,
"codedValues",void 0);c.__decorate([H.enumeration({codedValue:"coded-value"})],f.prototype,"type",void 0);return f=Q=c.__decorate([r.subclass("esri.layers.support.CodedValueDomain")],f)})},"esri/core/accessorSupport/decorators/enumeration":function(){define(["exports","../../jsonMap","./property"],function(h,c,q){h.enumeration=function(I,f={}){var k;I=I instanceof c.JSONMap?I:new c.JSONMap(I,f);I={type:(null!=(k=null==f?void 0:f.ignoreUnknown)?k:1)?I.apiValues:String,readOnly:null==f?void 0:f.readOnly,
json:{type:I.jsonValues,read:null!=f&&f.readOnly?!1:{reader:I.read},write:{writer:I.write}}};void 0!==(null==f?void 0:f.default)&&(I.json.default=f.default);void 0!==(null==f?void 0:f.name)&&(I.json.name=f.name);return q.property(I)};Object.defineProperty(h,"__esModule",{value:!0})})},"esri/layers/support/CodedValue":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass".split(" "),
function(h,c,q,I,f,k,m,H,r,v){var w;h.CodedValue=w=function(Q){function p(C){C=Q.call(this,C)||this;C.name=null;C.code=null;return C}c._inheritsLoose(p,Q);p.prototype.clone=function(){return new w({name:this.name,code:this.code})};return p}(I.JSONSupport);q.__decorate([f.property({type:String,json:{write:!0}})],h.CodedValue.prototype,"name",void 0);q.__decorate([f.property({type:[String,Number],json:{write:!0}})],h.CodedValue.prototype,"code",void 0);h.CodedValue=w=q.__decorate([v.subclass("esri.layers.support.CodedValue")],
h.CodedValue);h.default=h.CodedValue;Object.defineProperty(h,"__esModule",{value:!0})})},"esri/layers/support/Domain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass".split(" "),function(h,c,q,I,f,k,m,H,r,v){q=new q.JSONMap({inherited:"inherited",
codedValue:"coded-value",range:"range"});I=function(w){function Q(p){p=w.call(this,p)||this;p.name=null;p.type=null;return p}h._inheritsLoose(Q,w);return Q}(I.JSONSupport);c.__decorate([f.property({type:String,json:{write:!0}})],I.prototype,"name",void 0);c.__decorate([r.enumeration(q)],I.prototype,"type",void 0);return I=c.__decorate([v.subclass("esri.layers.support.Domain")],I)})},"esri/layers/support/InheritedDomain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./Domain".split(" "),
function(h,c,q,I,f,k,m,H,r){var v;q=v=function(w){function Q(p){p=w.call(this,p)||this;p.type="inherited";return p}h._inheritsLoose(Q,w);Q.prototype.clone=function(){return new v};return Q}(r);c.__decorate([m.enumeration({inherited:"inherited"})],q.prototype,"type",void 0);return q=v=c.__decorate([H.subclass("esri.layers.support.InheritedDomain")],q)})},"esri/layers/support/RangeDomain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./Domain".split(" "),
function(h,c,q,I,f,k,m,H,r){var v;I=v=function(w){function Q(p){p=w.call(this,p)||this;p.maxValue=null;p.minValue=null;p.type="range";return p}h._inheritsLoose(Q,w);Q.prototype.clone=function(){return new v({maxValue:this.maxValue,minValue:this.minValue,name:this.name})};return Q}(r);c.__decorate([q.property({type:Number,json:{type:[Number],read:{source:"range",reader(w,Q){return Q.range&&Q.range[1]}},write:{enabled:!1,overridePolicy(){return{enabled:null!=this.maxValue&&null==this.minValue}},target:"range",
writer(w,Q,p){Q[p]=[this.minValue||0,w]}}}})],I.prototype,"maxValue",void 0);c.__decorate([q.property({type:Number,json:{type:[Number],read:{source:"range",reader(w,Q){return Q.range&&Q.range[0]}},write:{target:"range",writer(w,Q,p){Q[p]=[w,this.maxValue||0]}}}})],I.prototype,"minValue",void 0);c.__decorate([m.enumeration({range:"range"})],I.prototype,"type",void 0);return I=v=c.__decorate([H.subclass("esri.layers.support.RangeDomain")],I)})},"esri/support/arcadeOnDemand":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../geometry ../core/maybe ../geometry/SpatialReference".split(" "),
function(h,c,q,I,f,k){function m(){return H.apply(this,arguments)}function H(){H=q._asyncToGenerator(function*(){r||(r=q._asyncToGenerator(function*(){const w=yield new Promise(function(Q,p){h(["./arcadeUtils"],Q,p)});yield w.arcade.load();return{arcade:w.arcade,arcadeUtils:w,Dictionary:w.Dictionary,Feature:w.arcadeFeature}})());return r});return H.apply(this,arguments)}let r;I=(w,Q,p)=>v.create(w,Q,p,null,["$feature","$view"]);let v=function(){function w(p,C,y,b,z,A,N,G){this.script=p;this.evaluate=
z;this.fields=Array.isArray(N)?N:N.fields;this._syntaxTree=b;this._arcade=C;this._arcadeDictionary=y;this._arcadeFeature=A;this._spatialReference=G;this._referencesGeometry=C.scriptTouchesGeometry(this._syntaxTree);this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}w.create=function(){var p=q._asyncToGenerator(function*(C,y,b,z,A,N){const {arcade:G,Feature:R,Dictionary:O}=yield m(),D=k.fromJSON(y);y=G.parseScript(C,N);A=A.reduce((B,L)=>({...B,[L]:null}),{});let P=null;f.isSome(z)&&
(P=new O(z),P.immutable=!0,A.$config=null);z=G.scriptUsesGeometryEngine(y)&&G.enableGeometrySupport();N=G.scriptUsesFeatureSet(y)&&G.enableFeatureSetSupport();const u=G.scriptIsAsync(y)&&G.enableAsyncSupport();A={vars:A,spatialReference:D,useAsync:!!u};const d=new O;d.immutable=!1;d.setField("scale",0);const e=G.compileScript(y,A);yield Promise.all([z,N,u]);return new w(C,G,O,y,B=>{"$view"in B&&B.$view&&(d.setField("scale",B.$view.scale),B.$view=d);P&&(B.$config=P);return e({vars:B,spatialReference:D})},
new R,b,D)});return function(C,y,b,z,A,N){return p.apply(this,arguments)}}();var Q=w.prototype;Q.repurposeFeature=function(p){p.geometry&&!p.geometry.spatialReference&&(p.geometry.spatialReference=this._spatialReference);this._arcadeFeature.repurposeFromGraphicLikeObject(p.geometry,p.attributes,{fields:this.fields});return this._arcadeFeature};Q.repurposeAdapter=function(p){this._arcadeFeature.repurposeFromAdapter(p,{fields:this.fields});return this._arcadeFeature};Q.createDictionary=function(){return new this._arcadeDictionary};
Q.referencesMember=function(p){return this._arcade.referencesMember(this._syntaxTree,p)};Q.referencesFunction=function(p){return this._arcade.referencesFunction(this._syntaxTree,p)};Q.referencesGeometry=function(){return this._referencesGeometry};Q.referencesScale=function(){return this._referencesScale};Q.extractFieldLiterals=function(p){return this._arcade.extractFieldLiterals(this._syntaxTree,p)};return w}();c.ArcadeExpression=v;c.createDictionaryExpression=(w,Q,p,C)=>v.create(w,Q,p,C,["$feature",
"$view"]);c.createLabelExpression=(w,Q,p)=>v.create(w,Q,p,null,["$feature"]);c.createRendererExpression=I;c.createVVExpression=I;c.default=v;c.loadArcade=m;Object.defineProperty(c,"__esModule",{value:!0})})},"esri/layers/graphics/data/timeSupport":function(){define(["exports"],function(h){function c(f,k,m,H,r){if(null!=H&&null!=r)return v=>{const w=f.getAttribute(v,k);v=f.getAttribute(v,m);return(null==w||w<=r)&&(null==v||v>=H)};if(null!=H)return v=>{v=f.getAttribute(v,m);return null==v||v>=H};if(null!=
r)return v=>{v=f.getAttribute(v,k);return null==v||v<=r}}function q(f,k,m,H){if(null!=m&&null!=H&&m===H)return r=>f.getAttribute(r,k)===m;if(null!=m&&null!=H)return r=>{r=f.getAttribute(r,k);return r>=m&&r<=H};if(null!=m)return r=>f.getAttribute(r,k)>=m;if(null!=H)return r=>f.getAttribute(r,k)<=H}function I(){return()=>!1}h.getTimeExtent=function(f,k){if(!f)return null;const m=k.featureAdapter,{startTimeField:H,endTimeField:r}=f;let v=Number.POSITIVE_INFINITY,w=Number.NEGATIVE_INFINITY;if(H&&r)k.forEach(Q=>
{const p=m.getAttribute(Q,H);Q=m.getAttribute(Q,r);null==p||isNaN(p)||(v=Math.min(v,p));null==Q||isNaN(Q)||(w=Math.max(w,Q))});else{const Q=H||r;k.forEach(p=>{p=m.getAttribute(p,Q);null==p||isNaN(p)||(v=Math.min(v,p),w=Math.max(w,p))})}return{start:v,end:w}};h.getTimeOperator=function(f,k,m){if(!k||!f)return null;const {startTimeField:H,endTimeField:r}=f;if(!H&&!r)return null;const {start:v,end:w}=k;return null===v&&null===w?null:void 0===v&&void 0===w?I():H&&r?c(m,H,r,v,w):q(m,H||r,v,w)};Object.defineProperty(h,
"__esModule",{value:!0})})},"esri/layers/graphics/data/utils":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/jsonMap ../../../core/maybe ../../../core/unitUtils ../../../geometry/support/extentUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ../centroid ../featureConversionUtils ../OptimizedGeometry ./projectionSupport".split(" "),function(h,c,q,I,f,k,m,H,r,v,w,Q,p,C){function y(t,
g,K,T=t.hasZ,Z=t.hasM){const ba=t.hasZ&&T,ia=t.hasM&&Z;return K?(t=Q.quantizeOptimizedGeometry(B,g,t.hasZ,t.hasM,"esriGeometryPoint",K,T,Z),Q.convertToPoint(t,ba,ia)):Q.convertToPoint(g,ba,ia)}function b(){b=q._asyncToGenerator(function*(t,g,K){const {outFields:T,orderByFields:Z,groupByFieldsForStatistics:ba,outStatistics:ia}=t;if(T)for(var ma=0;ma<T.length;ma++)T[ma]=T[ma].trim();if(Z)for(ma=0;ma<Z.length;ma++)Z[ma]=Z[ma].trim();if(ba)for(ma=0;ma<ba.length;ma++)ba[ma]=ba[ma].trim();if(ia)for(ma=
0;ma<ia.length;ma++)ia[ma].onStatisticField&&(ia[ma].onStatisticField=ia[ma].onStatisticField.trim());t.geometry&&!t.outSR&&(t.outSR=t.geometry.spatialReference);return A(t,g,K)});return b.apply(this,arguments)}function z(){z=q._asyncToGenerator(function*(t,g,K){return A(t,g,K)});return z.apply(this,arguments)}function A(t,g,K){return N.apply(this,arguments)}function N(){N=q._asyncToGenerator(function*(t,g,K){if(!t)return null;var {where:T}=t;t.where=T=T&&T.trim();if(!T||/^1 *= *1$/.test(T)||g&&g===
T)t.where=null;if(!t.geometry)return t;g=yield G(t);t.distance=0;t.units=null;"esriSpatialRelEnvelopeIntersects"===t.spatialRel&&({spatialReference:T}=t.geometry,g=m.getGeometryExtent(g),g.spatialReference=T);t.geometry=g;yield C.checkProjectionSupport(g.spatialReference,K);g=(yield r.normalizeCentralMeridian(H.fromJSON(g)))[0];if(f.isNone(g))throw u;g=g.toJSON();g=yield C.project(g,g.spatialReference,K);if(!g)throw u;g.spatialReference=K;t.geometry=g;return t});return N.apply(this,arguments)}function G(t){return R.apply(this,
arguments)}function R(){R=q._asyncToGenerator(function*(t){const {geometry:g,distance:K,units:T}=t;if(null==K||"vertexAttributes"in g)return g;var Z=g.spatialReference;t=T?P.fromJSON(T):k.getUnitString(Z);Z=Z&&(v.isGeographic(Z)||v.isWebMercator(Z))?g:yield C.checkProjectionSupport(Z,v.WGS84).then(()=>C.project(g,v.WGS84));return(yield O())(Z.spatialReference,Z,K,t)});return R.apply(this,arguments)}function O(){return D.apply(this,arguments)}function D(){D=q._asyncToGenerator(function*(){return(yield new Promise(function(t,
g){h(["../../../geometry/geometryEngineJSON"],t,g)})).geodesicBuffer});return D.apply(this,arguments)}const P=new I.JSONMap({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),u=Object.freeze({}),d=new p,e=new p,B=new p,L={esriGeometryPoint:Q.convertToPoint,esriGeometryPolyline:Q.convertToPolyline,esriGeometryPolygon:Q.convertToPolygon,esriGeometryMultipoint:Q.convertToMultipoint},
F=(t,g)=>"_geVersion"!==t?g:void 0;c.QUERY_ENGINE_EMPTY_RESULT=u;c.cleanFromGeometryEngine=function(t){return t&&"_geVersion"in t?JSON.parse(JSON.stringify(t,F)):t};c.getCentroid=function(t,g,K){if("esriGeometryPolygon"!==t.geometryType||!g||!g.centroid&&!g.geometry)return null;g.centroid||(g.centroid=w.getCentroidOptimizedGeometry(new p,g.geometry,t.hasZ,t.hasM));return y(t,g.centroid,K)};c.getGeometry=function(t,g,K,T,Z,ba,ia=g,ma=K){const qa=g&&ia,wa=K&&ma;T=T?"coords"in T?T:T.geometry:null;if(!T)return null;
if(Z)return g=Q.generalizeOptimizedGeometry(e,T,g,K,t,Z,ia,ma),ba&&(g=Q.quantizeOptimizedGeometry(B,g,qa,wa,t,ba)),L[t](g,qa,wa);if(ba)return ba=Q.quantizeOptimizedGeometry(B,T,g,K,t,ba,ia,ma),L[t](ba,qa,wa);Q.removeZMValues(d,T,g,K,ia,ma);return L[t](d,qa,wa)};c.normalizeFilter=function(t,g,K){return z.apply(this,arguments)};c.normalizeQuery=function(t,g,K){return b.apply(this,arguments)};c.normalizeQueryLike=A;c.transformCentroid=y;Object.defineProperty(c,"__esModule",{value:!0})})},"esri/layers/graphics/data/spatialQuerySupport":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../geometry/support/contains ../../../geometry/support/intersects ../../../geometry/support/jsonUtils ../../../geometry/support/spatialReferenceUtils ../contains ../featureConversionUtils ../OptimizedGeometry ./projectionSupport ./utils".split(" "),
function(h,c,q,I,f,k,m,H,r,v,w,Q,p){function C(){return new Promise(function(A,N){h(["../../../geometry/geometryEngineJSON"],A,N)})}function y(){y=q._asyncToGenerator(function*(A,N,G){const {spatialRel:R,geometry:O}=A;if(O){if(!0!==z.spatialRelationship[R])throw new I("feature-store:unsupported-query","Unsupported query spatial relationship",{query:A});if(H.isValid(O.spatialReference)&&H.isValid(G)){if(!0!==z.queryGeometry[m.getJsonType(O)])throw new I("feature-store:unsupported-query","Unsupported query geometry type",
{query:A});if(!0!==z.layerGeometry[N])throw new I("feature-store:unsupported-query","Unsupported layer geometry type",{query:A});if(A.outSR)return Q.checkProjectionSupport(A.geometry&&A.geometry.spatialReference,A.outSR)}}});return y.apply(this,arguments)}const b={esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"intersects",esriSpatialRelIndexIntersects:null,esriSpatialRelOverlaps:"overlaps",
esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:null},z={spatialRelationship:{esriSpatialRelIntersects:!0,esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},queryGeometry:{esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!0},
layerGeometry:{esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!1}};c.canQueryWithRBush=function(A){if(m.isExtent(A))return!0;if(m.isPolygon(A)){for(const N of A.rings)if(5!==N.length||N[0][0]!==N[1][0]||N[0][0]!==N[4][0]||N[2][0]!==N[3][0]||N[0][1]!==N[3][1]||N[0][1]!==N[4][1]||N[1][1]!==N[2][1])return!1;return!0}return!1};c.checkSpatialQuerySupport=function(A,N,G){return y.apply(this,arguments)};c.getSpatialQueryOperator=function(A,
N,G,R,O){if(m.isPolygon(N)&&"esriGeometryPoint"===G&&("esriSpatialRelIntersects"===A||"esriSpatialRelContains"===A)){const D=v.convertFromPolygon(new w,N,!1,!1);return Promise.resolve(P=>r.polygonContainsPoint(D,!1,!1,P))}if(m.isPolygon(N)&&"esriGeometryMultipoint"===G){const D=v.convertFromPolygon(new w,N,!1,!1);if("esriSpatialRelContains"===A)return Promise.resolve(P=>r.polygonContainsMultipoint(D,!1,!1,P,R,O))}if(m.isExtent(N)&&"esriGeometryPoint"===G&&("esriSpatialRelIntersects"===A||"esriSpatialRelContains"===
A))return Promise.resolve(D=>f.extentContainsPoint(N,p.getGeometry(G,R,O,D)));if(m.isExtent(N)&&"esriGeometryMultipoint"===G&&"esriSpatialRelContains"===A)return Promise.resolve(D=>f.extentContainsMultipoint(N,p.getGeometry(G,R,O,D)));if(m.isExtent(N)&&"esriSpatialRelIntersects"===A){const D=k.getExtentIntersector(G);return Promise.resolve(P=>D(N,p.getGeometry(G,R,O,P)))}return C().then(D=>{const P=D[b[A]].bind(null,N.spatialReference,N);return u=>P(p.getGeometry(G,R,O,u))})};Object.defineProperty(c,
"__esModule",{value:!0})})},"esri/geometry/support/intersects":function(){define(["exports","./intersectsBase"],function(h,c){h.extentIntersectsExtent=c.extentIntersectsExtent;h.extentIntersectsMultipoint=c.extentIntersectsMultipoint;h.extentIntersectsPoint=c.extentIntersectsPoint;h.extentIntersectsPolygon=c.extentIntersectsPolygon;h.extentIntersectsPolyline=c.extentIntersectsPolyline;h.getFeatureExtentIntersector=c.getFeatureExtentIntersector;h.isSelfIntersecting=c.isSelfIntersecting;h.segmentIntersects=
c.segmentIntersects;h.getExtentIntersector=function(q){return"mesh"===q?c.extentIntersectsExtent:c.getFeatureExtentIntersector(q)};Object.defineProperty(h,"__esModule",{value:!0})})},"esri/layers/graphics/contains":function(){define(["exports"],function(h){function c(q,I,f,k,m){if(!q)return!1;I=I?f?4:3:f?3:2;const {coords:H,lengths:r}=q;f=!1;q=0;for(const w of r){var v=q;for(let Q=q,p=q+w*I;Q<p;Q+=I){v=Q+I;v===p&&(v=q);const C=H[Q],y=H[Q+1],b=H[v];v=H[v+1];(y<m&&v>=m||v<m&&y>=m)&&C+(m-y)/(v-y)*(b-
C)<k&&(f=!f)}q+=w*I}return f}h.polygonContainsCoords=c;h.polygonContainsMultipoint=function(q,I,f,k,m,H){m=m?H?4:3:H?3:2;const {coords:r,lengths:v}=k;if(!v)return!1;for(let w=0,Q=0;w<v.length;w++,Q+=m)if(!c(q,I,f,r[Q],r[Q+1]))return!1;return!0};h.polygonContainsPoint=function(q,I,f,k){return c(q,I,f,k.coords[0],k.coords[1])};Object.defineProperty(h,"__esModule",{value:!0})})},"esri/layers/support/FieldsIndex":function(){define(function(){return function(){function h(q){this.fields=q;this._fieldsMap=
new Map;this._dateFieldsSet=new Set;this.dateFields=[];if(q){var I=[];for(const f of q)if(q=f&&f.name){const k=q.toLowerCase().trim();this._fieldsMap.set(q,f);this._fieldsMap.set(k,f);I.push(k);if("date"===f.type||"esriFieldTypeDate"===f.type)this.dateFields.push(f),this._dateFieldsSet.add(f)}I.sort();this.uid=I.join(",")}}var c=h.prototype;c.destroy=function(){this._fieldsMap.clear()};c.has=function(q){return null!=this.get(q)};c.get=function(q){return null!=q?this._fieldsMap.get(q)||this._fieldsMap.get(q.toLowerCase().trim()):
void 0};c.isDateField=function(q){return this._dateFieldsSet.has(this.get(q))};c.normalizeFieldName=function(q){if(q=this.get(q))return q.name};return h}()})},"esri/layers/support/PromiseQueue":function(){define(["../../chunks/_rollupPluginBabelHelpers","../../core/promiseUtils"],function(h,c){let q=function(I,f,k,m,H){this.resolve=I;this.reject=f;this.callback=k;this.signal=m;this.abortCallback=H};return function(){function I(){this._tasks=[]}var f=I.prototype;f.push=function(k,m,H){return new Promise((r,
v)=>this._tasks.push(new q(r,v,k,m,H)))};f.unshift=function(k,m,H){return new Promise((r,v)=>this._tasks.unshift(new q(r,v,k,m,H)))};f.process=function(){if(0===this._tasks.length)return!1;const k=this._tasks.shift();try{const m=c.isAborted(k.signal);if(m&&!k.abortCallback)k.reject(c.createAbortError());else{const H=m?k.abortCallback(c.createAbortError()):k.callback();c.isPromise(H)?H.then(k.resolve,k.reject):k.resolve(H)}}catch(m){k.reject(m)}return!0};f.cancelAll=function(){const k=c.createAbortError();
for(const m of this._tasks)if(m.abortCallback){const H=m.abortCallback(k);m.resolve(H)}else m.reject(k);this._tasks.length=0};h._createClass(I,[{key:"length",get:function(){return this._tasks.length}}]);return I}()})},"esri/smartMapping/support/utils":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../support/arcadeOnDemand","../../support/basemapUtils"],function(h,c,q,I){function f(){f=c._asyncToGenerator(function*(p){const C=p.field,y=p.normalizationField;p=p.valueExpression;
var b=[];p&&(Q||({arcadeUtils:b}=yield q.loadArcade(),Q=b),b=Q.extractFieldNames(p));C&&b.push(C);y&&b.push(y);return b});return f.apply(this,arguments)}function k(p){return String(p).padStart(2,"0")}function m(p,C,y){if("date"===C||"number"===C){"number"===C&&(p=new Date(p));C=y?p.getFullYear():p.getUTCFullYear();const b=k((y?p.getMonth():p.getUTCMonth())+1),z=k(y?p.getDate():p.getUTCDate()),A=k(y?p.getHours():p.getUTCHours()),N=k(y?p.getMinutes():p.getUTCMinutes());p=k(y?p.getSeconds():p.getUTCSeconds());
p=`TIMESTAMP'${C}-${b}-${z} ${A}:${N}:${p}'`}return p}function H(p,C){if(C instanceof Date)return"date";if("number"===typeof C)return"number";if("string"===typeof C&&(p=p.getField(C),"\x3cnow\x3e"!==C.toLowerCase()&&p&&"date"===p.type))return"field"}const r={light:"streets gray topo terrain national-geographic oceans osm gray-vector streets-vector topo-vector streets-relief-vector streets-navigation-vector".split(" "),dark:["satellite","hybrid","dark-gray","dark-gray-vector","streets-night-vector"]},
v={years:365,months:30,days:1,hours:1/24,minutes:1/1440,seconds:1/86400,milliseconds:1/864E5},w=["integer","small-integer"];let Q=null;h.castIntegerFieldToFloat=function(p){return`cast(${p} as float)`};h.defaultBasemapGroups=r;h.getBasemapGroup=function(p,C=r){for(const y in C)if(-1<C[y].indexOf(p))return y};h.getBasemapId=function(p,C,y=!0){let b=null;p&&("string"===typeof p?C.includes(p)&&(b=p):b=I.getWellKnownBasemapId(p));return y?b||"gray":b};h.getDateDiffSQL=function(p,C,y,b){var {hasQueryEngine:z}=
p;y=m(y,H(p,y),z);p=m(C,H(p,C),z);p=`(${y} - ${p})`;z&&(p=`(${p} * ${v.milliseconds})`);b=v[b];z="/";1>b&&(b=1/b,z="*");return{sqlExpression:1===b?p:`(${p} ${z} ${b})`,sqlWhere:null}};h.getDateType=H;h.getFieldsList=function(p){return f.apply(this,arguments)};h.getNormalizationType=function(p){let C=p.normalizationType;C||(p.normalizationField?C="field":null!=p.normalizationTotal&&(C="percent-of-total"));return C};h.isIntegerField=function(p,C){return(p=C&&p.getField(C))&&-1<w.indexOf(p.type)};h.unitValueInDays=
v;Object.defineProperty(h,"__esModule",{value:!0})})},"esri/support/basemapUtils":function(){define("exports ../Basemap ../core/Collection ../core/Logger ../core/urlUtils ../core/accessorSupport/ensureType ./basemapDefinitions".split(" "),function(h,c,q,I,f,k,m){function H(D,P){var u;let d;if("string"===typeof D){if(!(D in m.esriBasemapDefinitions))return P=Object.keys(m.esriBasemapDefinitions).map(e=>`"${e}"`).join(", "),R.warn(`Unable to find basemap definition for: ${D}. Try one of these: ${P}`),
null;P&&(d=P[D]);d||(d=c.fromId(D),P&&(P[D]=d))}else d=k.ensureType(c,D);null!=(u=d)&&u.destroyed&&(R.warn("The provided basemap is already destroyed",{basemap:d}),d=null);return d}function r(D,P){const u=new q;D.forEach(d=>{const e=P.find(B=>N(C(d),C(B)))||d;u.some(B=>B===e)?u.push(d):u.push(e)});return u}function v(D){if(w(D.url))return!0;if("vector-tile"===D.type)for(const P in D.sourceNameToSource){const u=D.sourceNameToSource[P];if(w(null==u?void 0:u.sourceUrl))return!0}return!1}function w(D){if(!D)return!1;
D=new f.Url(f.makeAbsolute(D));return O.test(D.authority)}function Q(D){return D?!D.loaded&&D.resourceInfo?y(D.resourceInfo.data):{baseLayers:p(D.baseLayers),referenceLayers:p(D.referenceLayers)}:null}function p(D){return(q.isCollection(D)?D.toArray():D).map(C)}function C(D){return{type:D.type,url:G("urlTemplate"in D&&D.urlTemplate||D.url||"styleUrl"in D&&D.styleUrl),minScale:"minScale"in D&&null!=D.minScale?D.minScale:0,maxScale:"maxScale"in D&&null!=D.maxScale?D.maxScale:0,opacity:null!=D.opacity?
D.opacity:1,visible:null!=D.visible?!!D.visible:!0}}function y(D){return D?{baseLayers:b(D.baseMapLayers.filter(P=>!P.isReference)),referenceLayers:b(D.baseMapLayers.filter(P=>P.isReference))}:null}function b(D){return D.map(P=>{{let u;switch(P.layerType){case "VectorTileLayer":u="vector-tile";break;case "ArcGISTiledMapServiceLayer":u="tile";break;default:u="unknown"}P={type:u,url:G(P.templateUrl||P.urlTemplate||P.styleUrl||P.url),minScale:null!=P.minScale?P.minScale:0,maxScale:null!=P.maxScale?P.maxScale:
0,opacity:null!=P.opacity?P.opacity:1,visible:null!=P.visibility?!!P.visibility:!0}}return P})}function z(D,P,u){return null!=D!==(null!=P)?"not-equal":D?A(D.baseLayers,P.baseLayers)?A(D.referenceLayers,P.referenceLayers)?"equal":u.mustMatchReferences?"not-equal":"base-layers-equal":"not-equal":"equal"}function A(D,P){if(D.length!==P.length)return!1;for(let u=0;u<D.length;u++)if(!N(D[u],P[u]))return!1;return!0}function N(D,P){return D.type===P.type&&D.url===P.url&&D.minScale===P.minScale&&D.maxScale===
P.maxScale&&D.visible===P.visible&&D.opacity===P.opacity}function G(D){return D?f.normalize(D).replace(/^\s*https?:/i,"").toLowerCase():""}const R=I.getLogger("esri.support.basemapUtils"),O=/^(basemaps|ibasemaps).*-api\.arcgis\.com$/i;h.clonePreservingTiledLayers=function(D,P=null){D=H(D);if(!D)return null;const u=new c({id:D.id,title:D.title,baseLayers:D.baseLayers.slice(),referenceLayers:D.referenceLayers.slice()});P&&(u.baseLayers=r(u.baseLayers,P.baseLayers),u.referenceLayers=r(u.referenceLayers,
P.referenceLayers));u.load().catch(()=>{});u.portalItem=D.portalItem;return u};h.contentEquals=function(D,P){if(D===P)return!0;D=Q(D);P=Q(P);return"equal"===z(D,P,{mustMatchReferences:!0})};h.createCache=function(){return{}};h.destroyCache=function(D){for(const P in D){const u=D[P];!1===(null==u?void 0:u.destroyed)&&u.destroy();delete D[P]}};h.ensureType=H;h.getWellKnownBasemapId=function(D){let P=null;D=Q(D);const u=!D.baseLayers.length;for(const e in m.esriBasemapDefinitions){var d=y(m.esriBasemapDefinitions[e]);
d=z(D,d,{mustMatchReferences:u});if("equal"===d){P=e;break}"base-layers-equal"===d&&(P=e)}return P};h.hasDeveloperBasemapLayer=function(D){return!(null==D||!D.baseLayers.concat(D.referenceLayers).some(v))};h.isDeveloperBasemapLayer=v;Object.defineProperty(h,"__esModule",{value:!0})})},"esri/Basemap":function(){define("require ./chunks/_rollupPluginBabelHelpers ./chunks/tslib.es6 ./core/Collection ./core/collectionUtils ./core/JSONSupport ./core/lang ./core/Loadable ./core/loadAll ./core/Logger ./core/maybe ./core/promiseUtils ./core/urlUtils ./core/accessorSupport/decorators/property ./core/accessorSupport/ensureType ./core/has ./core/jsonMap ./core/accessorSupport/decorators/subclass ./core/accessorSupport/decorators/writer ./geometry/SpatialReference ./portal/Portal ./portal/PortalItem ./support/basemapDefinitions ./webdoc/support/writeUtils".split(" "),
function(h,c,q,I,f,k,m,H,r,v,w,Q,p,C,y,b,z,A,N,G,R,O,D,P){var u;let d=0;const e=v.getLogger("esri.Basemap");k=u=function(B){function L(t){var g=B.call(this,t)||this;g.id=null;g.portalItem=null;g.spatialReference=null;g.thumbnailUrl=null;g.title="Basemap";g.id=Date.now().toString(16)+"-basemap-"+d++;g.baseLayers=new I;g.referenceLayers=new I;const K=T=>{T.parent&&T.parent!==c._assertThisInitialized(g)&&"remove"in T.parent&&T.parent.remove(T);T.parent=c._assertThisInitialized(g);"elevation"===T.type&&
e.error(`Layer '${T.title}, id:${T.id}' of type '${T.type}' is not supported as a basemap layer and will therefore be ignored.`)};g.baseLayers.on("after-add",T=>K(T.item));g.referenceLayers.on("after-add",T=>K(T.item));g.baseLayers.on("after-remove",T=>{T.item.parent=null});g.referenceLayers.on("after-remove",T=>{T.item.parent=null});return g}c._inheritsLoose(L,B);var F=L.prototype;F.initialize=function(){this.when().catch(t=>{e.error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,
t)});this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)};F.destroy=function(){var t,g=this.baseLayers.removeAll();for(const K of g)K.destroy();g=this.referenceLayers.removeAll();for(const K of g)K.destroy();this.baseLayers.destroy();this.referenceLayers.destroy();null==(t=this.portalItem)?void 0:t.destroy();this.portalItem=null};F.normalizeCtorArgs=function(t){t&&"resourceInfo"in t&&(this._set("resourceInfo",t.resourceInfo),t={...t},delete t.resourceInfo);return t};F._writeBaseLayers=
function(t,g,K){const T=[];t&&(K={...K,layerContainerType:"basemap"},this.baseLayers.forEach(Z=>{Z=P.getLayerJSON(Z,K.webmap?K.webmap.getLayerJSONFromResourceInfo(Z):null,K);w.isSome(Z)&&T.push(Z)}),this.referenceLayers.forEach(Z=>{Z=P.getLayerJSON(Z,K.webmap?K.webmap.getLayerJSONFromResourceInfo(Z):null,K);w.isSome(Z)&&(Z.isReference=!0,T.push(Z))}));g.baseMapLayers=T};F.writeTitle=function(t,g){g.title=t||"Basemap"};F.load=function(t){this.addResolvingPromise(this._loadFromSource(t));return Promise.resolve(this)};
F.loadAll=function(){return r.loadAll(this,t=>{t(this.baseLayers,this.referenceLayers)})};F.clone=function(){const t={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.slice(),referenceLayers:this.referenceLayers.slice()};this.loaded&&(t.loadStatus="loaded");return(new u({resourceInfo:this.resourceInfo})).set(t)};F.read=function(t,g){this.resourceInfo||this._set("resourceInfo",{data:t,context:g});B.prototype.read.call(this,t,g)};F.write=function(t,g){t=t||{};g&&g.origin||
(g={origin:"web-map",...g});B.prototype.write.call(this,t,g);!this.loaded&&this.resourceInfo&&this.resourceInfo.data.baseMapLayers&&(t.baseMapLayers=this.resourceInfo.data.baseMapLayers.map(K=>{K=m.clone(K);K.url&&p.isProtocolRelative(K.url)&&(K.url=`https:${K.url}`);K.templateUrl&&p.isProtocolRelative(K.templateUrl)&&(K.templateUrl=`https:${K.templateUrl}`);return K}));return t};F._loadFromSource=function(){var t=c._asyncToGenerator(function*(g){const {resourceInfo:K,portalItem:T}=this;Q.throwIfAborted(g);
const Z=[];K?(Z.push(this._loadLayersFromJSON(K.data,K.context?K.context.url:null,g)),K.data.id&&!K.data.title&&Z.push(D.getBasemapTitle(K.data.id).then(ba=>{ba&&this.read({title:ba},K.context)}))):T&&Z.push(this._loadFromItem(T,g));yield Promise.all(Z)});return function(g){return t.apply(this,arguments)}}();F._loadLayersFromJSON=function(){var t=c._asyncToGenerator(function*(g,K,T){var Z=this.resourceInfo&&this.resourceInfo.context;const ba=this.portalItem&&this.portalItem.portal||Z&&Z.portal||null,
ia=Z&&"web-scene"===Z.origin?"web-scene":"web-map",{populateOperationalLayers:ma}=yield new Promise(function(qa,wa){h(["./layers/support/layersCreator"],qa,wa)});Z=[];Q.throwIfAborted(T);g.baseMapLayers&&Array.isArray(g.baseMapLayers)&&(K={context:{origin:ia,url:K,portal:ba,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"},T=ma(this.baseLayers,g.baseMapLayers.filter(qa=>!qa.isReference),K),Z.push(T),g=ma(this.referenceLayers,g.baseMapLayers.filter(qa=>qa.isReference),K),Z.push(g));
yield Q.eachAlways(Z)});return function(g,K,T){return t.apply(this,arguments)}}();F._loadFromItem=function(){var t=c._asyncToGenerator(function*(g,K){const T=yield(yield g.load(K)).fetchData("json",K),Z=p.urlToObject(g.itemUrl);this._set("resourceInfo",{data:T.baseMap,context:{origin:"web-map",portal:g.portal||R.getDefault(),url:Z}});this.read(this.resourceInfo.data,this.resourceInfo.context);this.read({spatialReference:T.spatialReference},this.resourceInfo.context);this.read({title:g.title,thumbnailUrl:g.thumbnailUrl},
{origin:"portal-item",portal:g.portal||R.getDefault(),url:Z});return this._loadLayersFromJSON(this.resourceInfo.data,Z,K)});return function(g,K){return t.apply(this,arguments)}}();L.fromId=function(t){return(t=D.esriBasemapDefinitions[t])?u.fromJSON(t):null};c._createClass(L,[{key:"baseLayers",set:function(t){this._set("baseLayers",f.referenceSetter(t,this._get("baseLayers")))}},{key:"referenceLayers",set:function(t){this._set("referenceLayers",f.referenceSetter(t,this._get("referenceLayers")))}}]);
return L}(k.JSONSupportMixin(H));q.__decorate([C.property({json:{write:{ignoreOrigin:!0,target:"baseMapLayers",writer(B,L,F,t){this._writeBaseLayers(B,L,t)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:I}},writer(B,L,F,t){this._writeBaseLayers(B,L,t)}}}}}})],k.prototype,"baseLayers",null);q.__decorate([C.property({type:String,json:{origins:{"web-scene":{write:!0}}}})],k.prototype,"id",void 0);q.__decorate([C.property({type:O})],k.prototype,"portalItem",void 0);q.__decorate([C.property()],
k.prototype,"referenceLayers",null);q.__decorate([C.property({readOnly:!0})],k.prototype,"resourceInfo",void 0);q.__decorate([C.property({type:G})],k.prototype,"spatialReference",void 0);q.__decorate([C.property()],k.prototype,"thumbnailUrl",void 0);q.__decorate([C.property({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],k.prototype,"title",void 0);q.__decorate([N.writer("title")],k.prototype,"writeTitle",null);return k=u=q.__decorate([A.subclass("esri.Basemap")],k)})},"esri/core/collectionUtils":function(){define(["exports",
"./Collection"],function(h,c){h.castForReferenceSetter=function(q){return q};h.referenceSetter=function(q,I,f=c){I||(I=new f);if(I===q)return I;I.removeAll();q&&(Array.isArray(q)||"items"in q&&Array.isArray(q.items))?I.addMany(q):q&&I.add(q);return I};Object.defineProperty(h,"__esModule",{value:!0})})},"esri/core/Loadable":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./Error ./Promise ./promiseUtils ./Warning ./accessorSupport/decorators/property ./accessorSupport/decorators/subclass".split(" "),
function(h,c,q,I,f,k,m,H){const r=v=>{v=function(w){function Q(...C){var y=w.call(this,...C)||this;y._loadController=null;y.loadError=null;y.loadStatus="not-loaded";y._set("loadWarnings",[]);y.addResolvingPromise(new Promise(b=>{const z=y.load.bind(h._assertThisInitialized(y));y.load=A=>{const N=new Promise((G,R)=>{const O=f.onAbortOrThrow(A,R);y.destroyed&&R(new q("load:instance-destroyed",`Instance of '${y.declaredClass||y.constructor.name}' is already destroyed`,{instance:h._assertThisInitialized(y)}));
y._promiseProps.when(G,R).finally(()=>{O&&O.remove()})});if("not-loaded"===y.loadStatus){y._set("loadStatus","loading");const G=y._loadController=f.createAbortController();z({signal:G.signal});f.onAbort(G.signal,()=>{y._promiseProps.abort()})}b();return N}}));y.when(()=>{y._set("loadStatus","loaded");y._loadController=null},b=>{y._set("loadStatus","failed");y._set("loadError",b);y._loadController=null});return y}h._inheritsLoose(Q,w);var p=Q.prototype;p.load=function(){return null};p.cancelLoad=function(){var C;
if(this.isFulfilled())return this;this._set("loadError",new q("load:cancelled","Cancelled"));null==(C=this._loadController)?void 0:C.abort();return this};h._createClass(Q,[{key:"loaded",get:function(){return"loaded"===this.loadStatus}},{key:"loadWarnings",get:function(){return this._get("loadWarnings")}}]);return Q}(v);c.__decorate([m.property({readOnly:!0})],v.prototype,"loaded",null);c.__decorate([m.property({readOnly:!0})],v.prototype,"loadError",void 0);c.__decorate([m.property()],v.prototype,
"loadStatus",void 0);c.__decorate([m.property({type:[k],readOnly:!0})],v.prototype,"loadWarnings",null);return v=c.__decorate([H.subclass("esri.core.Loadable")],v)};I=function(v){function w(){return v.apply(this,arguments)||this}h._inheritsLoose(w,v);return w}(r(I.EsriPromise));I=c.__decorate([H.subclass("esri.core.Loadable")],I);(function(v){v.LoadableMixin=r;v.isLoadable=function(w){return!(!w||!w.load)}})(I||(I={}));return I})},"esri/core/Promise":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./Accessor ./maybe ./promiseUtils ./accessorSupport/decorators/subclass".split(" "),
function(h,c,q,I,f,k,m){let H=function(){function v(Q){this.instance=Q;this._resolver=k.createDeferred();this._status=0;this._resolvingPromises=[];this._resolver.promise.then(()=>{this._status=1;this._cleanUp()},()=>{this._status=2;this._cleanUp()})}var w=v.prototype;w.addResolvingPromise=function(Q){this._resolvingPromises.push(Q);this._tryResolve()};w.isResolved=function(){return 1===this._status};w.isRejected=function(){return 2===this._status};w.isFulfilled=function(){return 0!==this._status};
w.abort=function(){this._resolver.reject(k.createAbortError())};w.when=function(Q,p){return this._resolver.promise.then(Q,p)};w._cleanUp=function(){this._allPromise=this._resolvingPromises=this._allPromise=null};w._tryResolve=function(){if(!this.isFulfilled()){var Q=k.createDeferred(),p=[...this._resolvingPromises,f.assumeNonNull(Q.promise)],C=this._allPromise=Promise.all(p);C.then(()=>{this.isFulfilled()||this._allPromise!==C||this._resolver.resolve(this.instance)},y=>{this.isFulfilled()||this._allPromise!==
C||k.isAbortError(y)||this._resolver.reject(y)});Q.resolve()}};return v}();const r=v=>{v=function(w){function Q(...C){C=w.call(this,...C)||this;C._promiseProps=new H(c._assertThisInitialized(C));C.addResolvingPromise(Promise.resolve());return C}c._inheritsLoose(Q,w);var p=Q.prototype;p.isResolved=function(){return this._promiseProps.isResolved()};p.isRejected=function(){return this._promiseProps.isRejected()};p.isFulfilled=function(){return this._promiseProps.isFulfilled()};p.when=function(C,y){return(new Promise((b,
z)=>{this._promiseProps.when(b,z)})).then(C,y)};p.catch=function(C){return this.when(null,C)};p.addResolvingPromise=function(C){C&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in C?C.when():C)};return Q}(v);return v=q.__decorate([m.subclass("esri.core.Promise")],v)};h.EsriPromise=function(v){function w(){return v.apply(this,arguments)||this}c._inheritsLoose(w,v);return w}(r(I));h.EsriPromise=q.__decorate([m.subclass("esri.core.Promise")],h.EsriPromise);
h.EsriPromiseMixin=r;Object.defineProperty(h,"__esModule",{value:!0})})},"esri/core/loadAll":function(){define("exports ../chunks/_rollupPluginBabelHelpers ./asyncUtils ./Collection ./Loadable ./maybe".split(" "),function(h,c,q,I,f,k){function m(w,Q){return H.apply(this,arguments)}function H(){H=c._asyncToGenerator(function*(w,Q){yield w.load();return r(w,Q)});return H.apply(this,arguments)}function r(w,Q){return v.apply(this,arguments)}function v(){v=c._asyncToGenerator(function*(w,Q){const p=[],
C=(...b)=>{for(const z of b)k.isNone(z)||(Array.isArray(z)?C(...z):I.isCollection(z)?z.forEach(A=>C(A)):f.isLoadable(z)&&p.push(z))};Q(C);let y=null;yield q.map(p,function(){var b=c._asyncToGenerator(function*(z){!1!==(yield q.result("loadAll"in z&&"function"===typeof z.loadAll?z.loadAll():z.load())).ok||y||(y=z)});return function(z){return b.apply(this,arguments)}}());if(y)throw y.loadError;return w});return v.apply(this,arguments)}h.default=m;h.loadAll=m;h.loadAllChildren=r;Object.defineProperty(h,
"__esModule",{value:!0})})},"esri/core/asyncUtils":function(){define(["exports","./maybe","./promiseUtils"],function(h,c,q){h.assertResult=function(I){if(!0===I.ok)return I.value;throw I.error;};h.forEach=function(I,f,k){return q.eachAlways(I.map((m,H)=>f.apply(k,[m,H])))};h.map=function(I,f,k){return q.eachAlways(I.map((m,H)=>f.apply(k,[m,H]))).then(m=>m.map(H=>H.value))};h.result=function(I){return c.isNone(I)?q.resolve():I.then(f=>({ok:!0,value:f})).catch(f=>({ok:!1,error:f}))};h.resultOrAbort=
function(I){return I.then(f=>({ok:!0,value:f})).catch(f=>{q.throwIfAbortError(f);return{ok:!1,error:f}})};Object.defineProperty(h,"__esModule",{value:!0})})},"esri/portal/Portal":function(){define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../config ../intl ../kernel ../request ../core/Error ../core/JSONSupport ../core/Loadable ../core/maybe ../core/promiseUtils ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/jsonMap ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../geometry/Extent ./PortalQueryParams ./PortalQueryResult ./PortalUser ../intl/locale".split(" "),
function(h,c,q,I,f,k,m,H,r,v,w,Q,p,C,y,b,z,A,N,G,R,O,D,P){function u(L){return Object.freeze({__proto__:null,"default":L})}var d;let e;const B={PortalGroup:()=>new Promise(function(L,F){h(["./PortalGroup"],function(t){L(u(t))},F)}),PortalItem:()=>new Promise(function(L,F){h(["./PortalItem"],function(t){L(u(t))},F)}),PortalUser:()=>new Promise(function(L,F){h(["./PortalUser"],function(t){L(u(t))},F)})};f=d=function(L){function F(g){g=L.call(this,g)||this;g.access=null;g.allSSL=!1;g.authMode="auto";
g.authorizedCrossOriginDomains=null;g.basemapGalleryGroupQuery=null;g.bingKey=null;g.canListApps=!1;g.canListData=!1;g.canListPreProvisionedItems=!1;g.canProvisionDirectPurchase=!1;g.canSearchPublic=!0;g.canShareBingPublic=!1;g.canSharePublic=!1;g.canSignInArcGIS=!1;g.canSignInIDP=!1;g.colorSetsGroupQuery=null;g.commentsEnabled=!1;g.created=null;g.culture=null;g.customBaseUrl=null;g.defaultBasemap=null;g.defaultExtent=null;g.defaultVectorBasemap=null;g.description=null;g.eueiEnabled=null;g.featuredGroups=
null;g.featuredItemsGroupQuery=null;g.galleryTemplatesGroupQuery=null;g.livingAtlasGroupQuery=null;g.hasCategorySchema=!1;g.helperServices=null;g.homePageFeaturedContent=null;g.homePageFeaturedContentCount=null;g.httpPort=null;g.httpsPort=null;g.id=null;g.ipCntryCode=null;g.isPortal=!1;g.isReadOnly=!1;g.layerTemplatesGroupQuery=null;g.maxTokenExpirationMinutes=null;g.modified=null;g.name=null;g.portalHostname=null;g.portalMode=null;g.portalProperties=null;g.region=null;g.rotatorPanels=null;g.showHomePageDescription=
!1;g.sourceJSON=null;g.supportsHostedServices=!1;g.symbolSetsGroupQuery=null;g.templatesGroupQuery=null;g.units=null;g.url=I.portalUrl;g.urlKey=null;g.user=null;g.useStandardizedQuery=!1;g.useVectorBasemaps=!1;g.vectorBasemapGalleryGroupQuery=null;return g}c._inheritsLoose(F,L);var t=F.prototype;t.normalizeCtorArgs=function(g){return"string"===typeof g?{url:g}:g};t.destroy=function(){this._esriId_credentialCreateHandle&&(this._esriId_credentialCreateHandle.remove(),this._esriId_credentialCreateHandle=
null)};t.readAuthorizedCrossOriginDomains=function(g){if(g)for(const K of g)-1===I.request.trustedServers.indexOf(K)&&I.request.trustedServers.push(K);return g};t.readDefaultBasemap=function(g){return g?(g=e.fromJSON(g),g.portalItem={portal:this},g):null};t.readDefaultVectorBasemap=function(g){return g?(g=e.fromJSON(g),g.portalItem={portal:this},g):null};t.readUrlKey=function(g){return g?g.toLowerCase():g};t.readUser=function(g){let K=null;g&&(K=D.fromJSON(g),K.portal=this);return K};t.load=function(g){const K=
(new Promise(function(T,Z){h(["../Basemap"],function(ba){T(u(ba))},Z)})).then(({default:T})=>{Q.throwIfAborted(g);e=T}).then(()=>this.sourceJSON?this.sourceJSON:this._fetchSelf(this.authMode,!1,g)).then(T=>{if(k.id){const Z=k.id;this.credential=Z.findCredential(this.restUrl);this.credential||this.authMode!==d.AUTH_MODE_AUTO||(this._esriId_credentialCreateHandle=Z.on("credential-create",()=>{Z.findCredential(this.restUrl)&&this._signIn()}))}this.sourceJSON=T;this.read(T)});this.addResolvingPromise(K);
return Promise.resolve(this)};t.createClosestFacilityTask=function(){var g=c._asyncToGenerator(function*(){yield this.load();const K=this._getHelperServiceUrl("closestFacility");return new (yield new Promise(function(T,Z){h(["../tasks/ClosestFacilityTask"],function(ba){T(u(ba))},Z)})).default(K)});return function(){return g.apply(this,arguments)}}();t.createElevationLayers=function(){var g=c._asyncToGenerator(function*(){yield this.load();const K=this._getHelperService("defaultElevationLayers"),T=
(yield new Promise(function(Z,ba){h(["../layers/ElevationLayer"],function(ia){Z(u(ia))},ba)})).default;return K?K.map(Z=>new T({id:Z.id,url:Z.url})):[]});return function(){return g.apply(this,arguments)}}();t.createGeometryService=function(){var g=c._asyncToGenerator(function*(){yield this.load();const K=this._getHelperServiceUrl("geometry");return new (yield new Promise(function(T,Z){h(["../tasks/GeometryService"],function(ba){T(u(ba))},Z)})).default({url:K})});return function(){return g.apply(this,
arguments)}}();t.createPrintTask=function(){var g=c._asyncToGenerator(function*(){yield this.load();const K=this._getHelperServiceUrl("printTask");return new (yield new Promise(function(T,Z){h(["../tasks/PrintTask"],function(ba){T(u(ba))},Z)})).default(K)});return function(){return g.apply(this,arguments)}}();t.createRouteTask=function(){var g=c._asyncToGenerator(function*(){yield this.load();const K=this._getHelperServiceUrl("route");return new (yield new Promise(function(T,Z){h(["../tasks/RouteTask"],
function(ba){T(u(ba))},Z)})).default(K)});return function(){return g.apply(this,arguments)}}();t.createServiceAreaTask=function(){var g=c._asyncToGenerator(function*(){yield this.load();const K=this._getHelperServiceUrl("serviceArea");return new (yield new Promise(function(T,Z){h(["../tasks/ServiceAreaTask"],function(ba){T(u(ba))},Z)})).default(K)});return function(){return g.apply(this,arguments)}}();t.fetchBasemaps=function(g,K){const T=new R;T.query=g||(this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:
this.basemapGalleryGroupQuery);T.disableExtraQuery=!0;return this.queryGroups(T,K).then(Z=>{T.num=100;T.query='type:"Web Map" -type:"Web Application"';return Z.total?(Z=Z.results[0],T.sortField=Z.sortField||"name",T.sortOrder=Z.sortOrder||"desc",Z.queryItems(T,K)):null}).then(Z=>Z&&Z.total?Z.results.filter(ba=>"Web Map"===ba.type).map(ba=>new e({portalItem:ba})):[])};t.fetchCategorySchema=function(g){return this.hasCategorySchema?this._request(this.restUrl+"/portals/self/categorySchema",g).then(K=>
K.categorySchema):Q.isAborted(g)?Promise.reject(Q.createAbortError()):Promise.resolve([])};t.fetchFeaturedGroups=function(g){const K=this.featuredGroups,T=new R;T.num=100;T.sortField="title";if(K&&K.length){const Z=[];for(const ba of K)Z.push(`(title:"${ba.title}" AND owner:${ba.owner})`);T.query=Z.join(" OR ");return this.queryGroups(T,g).then(ba=>ba.results)}return Q.isAborted(g)?Promise.reject(Q.createAbortError()):Promise.resolve([])};t.fetchRegions=function(g){const K=this.user&&this.user.culture||
this.culture||P.getLocale();return this._request(this.restUrl+"/portals/regions",{...g,query:{culture:K}})};F.getDefault=function(){if(!d._default||d._default.destroyed)d._default=new d;return d._default};t.queryGroups=function(g,K){return this._queryPortal("/community/groups",g,"PortalGroup",K)};t.queryItems=function(g,K){return this._queryPortal("/search",g,"PortalItem",K)};t.queryUsers=function(g,K){g.sortField||(g.sortField="username");return this._queryPortal("/community/users",g,"PortalUser",
K)};t.toJSON=function(){throw new H("internal:not-yet-implemented","Portal.toJSON is not yet implemented");};F.fromJSON=function(g){if(!g)return null;if(g.declaredClass)throw Error("JSON object is already hydrated");return new d({sourceJSON:g})};t._getHelperService=function(g){const K=this.helperServices&&this.helperServices[g];if(!K)throw new H("portal:service-not-found",`The \`helperServices\` do not include an entry named "${g}"`);return K};t._getHelperServiceUrl=function(g){const K=this._getHelperService(g);
if(!K.url)throw new H("portal:service-url-not-found",`The \`helperServices\` entry "${g}" does not include a \`url\` value`);return K.url};t._fetchSelf=function(g=this.authMode,K=!1,T){const Z=this.restUrl+"/portals/self";g={authMode:g,query:{culture:P.getLocale().toLowerCase()},...T};"auto"===g.authMode&&(g.authMode="no-prompt");K&&(g.query.default=!0);return this._request(Z,g)};t._queryPortal=function(g,K,T,Z){const ba=y.ensureType(R,K),ia=ma=>this._request(this.restUrl+g,{...ba.toRequestOptions(this),
...Z}).then(qa=>{const wa=ba.clone();wa.start=qa.nextStart;return new O({nextQueryParams:wa,queryParams:ba,total:qa.total,results:d._resultsToTypedArray(ma,{portal:this},qa,Z)})}).then(qa=>Promise.all(qa.results.map(wa=>"function"===typeof wa.when?wa.when():qa)).then(()=>qa,wa=>{Q.throwIfAbortError(wa);return qa}));return T&&B[T]?B[T]().then(({default:ma})=>{Q.throwIfAborted(Z);return ia(ma)}):ia()};t._signIn=function(){if(this.authMode===d.AUTH_MODE_ANONYMOUS)return Promise.reject(new H("portal:invalid-auth-mode",
`Current "authMode"' is "${this.authMode}"`));if("failed"===this.loadStatus)return Promise.reject(this.loadError);const g=K=>Promise.resolve().then(()=>{if("not-loaded"===this.loadStatus)return K||(this.authMode="immediate"),this.load().then(()=>null);if("loading"===this.loadStatus)return this.load().then(()=>{if(this.credential)return null;this.credential=K;return this._fetchSelf("immediate")});if(this.user&&this.credential===K)return null;this.credential=K;return this._fetchSelf("immediate")}).then(T=>
{T&&(this.sourceJSON=T,this.read(T))});return k.id?k.id.getCredential(this.restUrl).then(K=>g(K)):g(this.credential)};t._normalizeSSL=function(g){return g.replace(/^http:/i,"https:").replace(":7080",":7443")};t._normalizeUrl=function(g){const K=this.credential&&this.credential.token;return this._normalizeSSL(K?g+(-1<g.indexOf("?")?"\x26":"?")+"token\x3d"+K:g)};t._requestToTypedArray=function(g,K,T){return this._request(g,K).then(Z=>{const ba=d._resultsToTypedArray(T,{portal:this},Z);return Promise.all(ba.map(ia=>
"function"===typeof ia.when?ia.when():Z)).then(()=>ba,()=>ba)})};t._request=function(g,K={}){const T={f:"json",...K.query},{authMode:Z=this.authMode===d.AUTH_MODE_ANONYMOUS?"anonymous":"auto",body:ba=null,cacheBust:ia=!1,method:ma="auto",responseType:qa="json",signal:wa}=K;K={authMode:Z,body:ba,cacheBust:ia,method:ma,query:T,responseType:qa,timeout:0,signal:wa};return m(this._normalizeSSL(g),K).then(Ca=>Ca.data)};F._resultsToTypedArray=function(g,K,T,Z){if(T){const ba=w.isSome(Z)?Z.signal:null;T=
T.listings||T.notifications||T.userInvitations||T.tags||T.items||T.groups||T.comments||T.provisions||T.results||T.relatedItems||T;if(g||K)T=T.map(ia=>{ia=Object.assign(g?g.fromJSON(ia):ia,K);"function"===typeof ia.load&&ia.load(ba);return ia})}else T=[];return T};c._createClass(F,[{key:"extraQuery",get:function(){const g=!(this.user&&this.user.orgId)||this.canSearchPublic;return this.id&&!g?` AND orgid:${this.id}`:null}},{key:"isOrganization",get:function(){return!!this.access}},{key:"restUrl",get:function(){let g=
this.url;if(g){const K=g.indexOf("/sharing");g=0<K?g.substring(0,K):this.url.replace(/\/+$/,"");g+="/sharing/rest"}return g}},{key:"thumbnailUrl",get:function(){const g=this.restUrl,K=this.thumbnail;return g&&K?this._normalizeSSL(g+"/portals/self/resources/"+K):null}}]);return F}(r.JSONSupportMixin(v));f.AUTH_MODE_ANONYMOUS="anonymous";f.AUTH_MODE_AUTO="auto";f.AUTH_MODE_IMMEDIATE="immediate";q.__decorate([p.property()],f.prototype,"access",void 0);q.__decorate([p.property()],f.prototype,"allSSL",
void 0);q.__decorate([p.property()],f.prototype,"authMode",void 0);q.__decorate([p.property()],f.prototype,"authorizedCrossOriginDomains",void 0);q.__decorate([A.reader("authorizedCrossOriginDomains")],f.prototype,"readAuthorizedCrossOriginDomains",null);q.__decorate([p.property()],f.prototype,"basemapGalleryGroupQuery",void 0);q.__decorate([p.property()],f.prototype,"bingKey",void 0);q.__decorate([p.property()],f.prototype,"canListApps",void 0);q.__decorate([p.property()],f.prototype,"canListData",
void 0);q.__decorate([p.property()],f.prototype,"canListPreProvisionedItems",void 0);q.__decorate([p.property()],f.prototype,"canProvisionDirectPurchase",void 0);q.__decorate([p.property()],f.prototype,"canSearchPublic",void 0);q.__decorate([p.property()],f.prototype,"canShareBingPublic",void 0);q.__decorate([p.property()],f.prototype,"canSharePublic",void 0);q.__decorate([p.property()],f.prototype,"canSignInArcGIS",void 0);q.__decorate([p.property()],f.prototype,"canSignInIDP",void 0);q.__decorate([p.property()],
f.prototype,"colorSetsGroupQuery",void 0);q.__decorate([p.property()],f.prototype,"commentsEnabled",void 0);q.__decorate([p.property({type:Date})],f.prototype,"created",void 0);q.__decorate([p.property()],f.prototype,"credential",void 0);q.__decorate([p.property()],f.prototype,"culture",void 0);q.__decorate([p.property()],f.prototype,"currentVersion",void 0);q.__decorate([p.property()],f.prototype,"customBaseUrl",void 0);q.__decorate([p.property()],f.prototype,"defaultBasemap",void 0);q.__decorate([A.reader("defaultBasemap")],
f.prototype,"readDefaultBasemap",null);q.__decorate([p.property({type:G})],f.prototype,"defaultExtent",void 0);q.__decorate([p.property()],f.prototype,"defaultVectorBasemap",void 0);q.__decorate([A.reader("defaultVectorBasemap")],f.prototype,"readDefaultVectorBasemap",null);q.__decorate([p.property()],f.prototype,"description",void 0);q.__decorate([p.property()],f.prototype,"eueiEnabled",void 0);q.__decorate([p.property({readOnly:!0})],f.prototype,"extraQuery",null);q.__decorate([p.property()],f.prototype,
"featuredGroups",void 0);q.__decorate([p.property()],f.prototype,"featuredItemsGroupQuery",void 0);q.__decorate([p.property()],f.prototype,"galleryTemplatesGroupQuery",void 0);q.__decorate([p.property()],f.prototype,"livingAtlasGroupQuery",void 0);q.__decorate([p.property()],f.prototype,"hasCategorySchema",void 0);q.__decorate([p.property()],f.prototype,"helpBase",void 0);q.__decorate([p.property()],f.prototype,"helperServices",void 0);q.__decorate([p.property()],f.prototype,"helpMap",void 0);q.__decorate([p.property()],
f.prototype,"homePageFeaturedContent",void 0);q.__decorate([p.property()],f.prototype,"homePageFeaturedContentCount",void 0);q.__decorate([p.property()],f.prototype,"httpPort",void 0);q.__decorate([p.property()],f.prototype,"httpsPort",void 0);q.__decorate([p.property()],f.prototype,"id",void 0);q.__decorate([p.property()],f.prototype,"ipCntryCode",void 0);q.__decorate([p.property({readOnly:!0})],f.prototype,"isOrganization",null);q.__decorate([p.property()],f.prototype,"isPortal",void 0);q.__decorate([p.property()],
f.prototype,"isReadOnly",void 0);q.__decorate([p.property()],f.prototype,"layerTemplatesGroupQuery",void 0);q.__decorate([p.property()],f.prototype,"maxTokenExpirationMinutes",void 0);q.__decorate([p.property({type:Date})],f.prototype,"modified",void 0);q.__decorate([p.property()],f.prototype,"name",void 0);q.__decorate([p.property()],f.prototype,"portalHostname",void 0);q.__decorate([p.property()],f.prototype,"portalMode",void 0);q.__decorate([p.property()],f.prototype,"portalProperties",void 0);
q.__decorate([p.property()],f.prototype,"region",void 0);q.__decorate([p.property({readOnly:!0})],f.prototype,"restUrl",null);q.__decorate([p.property()],f.prototype,"rotatorPanels",void 0);q.__decorate([p.property()],f.prototype,"showHomePageDescription",void 0);q.__decorate([p.property()],f.prototype,"sourceJSON",void 0);q.__decorate([p.property()],f.prototype,"staticImagesUrl",void 0);q.__decorate([p.property()],f.prototype,"stylesGroupQuery",void 0);q.__decorate([p.property()],f.prototype,"supportsHostedServices",
void 0);q.__decorate([p.property()],f.prototype,"symbolSetsGroupQuery",void 0);q.__decorate([p.property()],f.prototype,"templatesGroupQuery",void 0);q.__decorate([p.property()],f.prototype,"thumbnail",void 0);q.__decorate([p.property({readOnly:!0})],f.prototype,"thumbnailUrl",null);q.__decorate([p.property()],f.prototype,"units",void 0);q.__decorate([p.property()],f.prototype,"url",void 0);q.__decorate([p.property()],f.prototype,"urlKey",void 0);q.__decorate([A.reader("urlKey")],f.prototype,"readUrlKey",
null);q.__decorate([p.property()],f.prototype,"user",void 0);q.__decorate([A.reader("user")],f.prototype,"readUser",null);q.__decorate([p.property()],f.prototype,"useStandardizedQuery",void 0);q.__decorate([p.property()],f.prototype,"useVectorBasemaps",void 0);q.__decorate([p.property()],f.prototype,"vectorBasemapGalleryGroupQuery",void 0);return f=d=q.__decorate([N.subclass("esri.portal.Portal")],f)})},"esri/intl":function(){define("exports ./intl/date ./intl/number ./intl/substitute ./intl/locale ./intl/messages ./intl/t9n ./assets".split(" "),
function(h,c,q,I,f,k,m,H){k.registerMessageBundleLoader(m.createJSONLoader({pattern:"esri/",location:H.getAssetUrl}));h.convertDateFormatToIntlOptions=c.convertDateFormatToIntlOptions;h.formatDate=c.formatDate;h.convertNumberFormatToIntlOptions=q.convertNumberFormatToIntlOptions;h.formatNumber=q.formatNumber;h.substitute=I.substitute;h.getLocale=f.getLocale;h.onLocaleChange=f.onLocaleChange;h.prefersRTL=f.prefersRTL;h.setLocale=f.setLocale;h.fetchMessageBundle=k.fetchMessageBundle;h.normalizeMessageBundleLocale=
k.normalizeMessageBundleLocale;h.registerMessageBundleLoader=k.registerMessageBundleLoader;h.createJSONLoader=m.createJSONLoader;Object.defineProperty(h,"__esModule",{value:!0})})},"esri/intl/date":function(){define(["exports","../core/jsonMap","./locale"],function(h,c,q){function I(y){y=y||C;if(!p.has(y)){var b=q.getLocale();b=Q[q.getLocale()]||b;p.set(y,new Intl.DateTimeFormat(b,y))}return p.get(y)}var f={year:"numeric",month:"numeric",day:"numeric"},k={year:"numeric",month:"long",day:"numeric"},
m={year:"numeric",month:"short",day:"numeric"};const H={year:"numeric",month:"long",weekday:"long",day:"numeric"},r={hour:"numeric",minute:"numeric"},v={...r,second:"numeric"},w={"short-date":f,"short-date-short-time":{...f,...r},"short-date-short-time-24":{...f,...r,hour12:!1},"short-date-long-time":{...f,...v},"short-date-long-time-24":{...f,...v,hour12:!1},"short-date-le":f,"short-date-le-short-time":{...f,...r},"short-date-le-short-time-24":{...f,...r,hour12:!1},"short-date-le-long-time":{...f,
...v},"short-date-le-long-time-24":{...f,...v,hour12:!1},"long-month-day-year":k,"long-month-day-year-short-time":{...k,...r},"long-month-day-year-short-time-24":{...k,...r,hour12:!1},"long-month-day-year-long-time":{...k,...v},"long-month-day-year-long-time-24":{...k,...v,hour12:!1},"day-short-month-year":m,"day-short-month-year-short-time":{...m,...r},"day-short-month-year-short-time-24":{...m,...r,hour12:!1},"day-short-month-year-long-time":{...m,...v},"day-short-month-year-long-time-24":{...m,
...v,hour12:!1},"long-date":H,"long-date-short-time":{...H,...r},"long-date-short-time-24":{...H,...r,hour12:!1},"long-date-long-time":{...H,...v},"long-date-long-time-24":{...H,...v,hour12:!1},"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":r,"long-time":v};c=c.strict()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",
shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",
dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",
shortMonthYear:"short-month-year",year:"year"});f=c.apiValues;k=c.toJSON.bind(c);m=c.fromJSON.bind(c);const Q={ar:"ar-u-nu-latn-ca-gregory"};let p=new WeakMap,C=w["short-date-short-time"];q.beforeLocaleChange(()=>{p=new WeakMap;C=w["short-date-short-time"]});h.convertDateFormatToIntlOptions=function(y){return w[y]||null};h.dateFormats=f;h.dictionary=c;h.formatDate=function(y,b){return I(b).format(y)};h.fromJSON=m;h.getDateTimeFormatter=I;h.toJSON=k;Object.defineProperty(h,"__esModule",{value:!0})})},
"esri/intl/locale":function(){define(["exports","../core/global"],function(h,c){function q(){var b,z;return null!=(b=null!=Q?Q:null==(z=c.navigator)?void 0:z.language)?b:"en"}function I(){void 0===w&&(w=q());return w}function f(b=I()){b=/^([a-zA-Z]{2,3})(?:[_\-]\w+)*$/.exec(b);return null==b?void 0:b[1].toLowerCase()}function k(){var b;const z=null!=(b=v)?b:q();w!==z&&(w=z,[...y].forEach(A=>{A.call(null,z)}),[...C].forEach(A=>{A.call(null,z)}))}var m,H,r;let v=void 0,w=void 0;const Q=null!=(m=null==
(H=c.esriConfig)?void 0:H.locale)?m:null==(r=c.dojoConfig)?void 0:r.locale,p={he:!0,ar:!0},C=[],y=[];null==c.addEventListener?void 0:c.addEventListener("languagechange",k);h.beforeLocaleChange=function(b){y.push(b);return{remove(){C.splice(y.indexOf(b),1)}}};h.getDefaultLocale=q;h.getLanguage=f;h.getLocale=I;h.onLocaleChange=function(b){C.push(b);return{remove(){C.splice(C.indexOf(b),1)}}};h.prefersRTL=function(b=I()){b=f(b);return void 0!==b&&(p[b]||!1)};h.setLocale=function(b){v=b?b:void 0;k()};
Object.defineProperty(h,"__esModule",{value:!0})})},"esri/intl/number":function(){define(["exports","../core/maybe","./locale"],function(h,c,q){function I(H){const r=H||m;if(!k.has(r)){var v=q.getLocale();v=f[q.getLocale()]||v;k.set(r,new Intl.NumberFormat(v,H))}return c.assumeNonNull(k.get(r))}const f={ar:"ar-u-nu-latn"};let k=new WeakMap,m={};q.beforeLocaleChange(()=>{k=new WeakMap;m={}});h.convertNumberFormatToIntlOptions=function(H={}){const r={};null!=H.digitSeparator&&(r.useGrouping=H.digitSeparator);
null!=H.places&&(r.minimumFractionDigits=r.maximumFractionDigits=H.places);return r};h.formatNumber=function(H,r){return I(r).format(H)};h.getFormatter=I;Object.defineProperty(h,"__esModule",{value:!0})})},"esri/intl/substitute":function(){define("exports ../core/Logger ../core/object ../core/string ./date ./number".split(" "),function(h,c,q,I,f,k){function m(r){switch(typeof r){case "string":return r;case "number":return k.formatNumber(r);case "boolean":return""+r;default:return r instanceof Date?
f.formatDate(r):""}}const H=c.getLogger("esri.intl");h.substitute=function(r,v,w={}){const {format:Q={}}=w;return I.replace(r,p=>{{const b=p.indexOf(":");if(-1===b)var C=p.trim();else{C=p.slice(0,b).trim();var y=p.slice(b+1).trim()}if(C)if(p=q.getDeepValue(C,v),null==p)y="";else if(C=Q[y]||Q[C])b:switch(C.type){case "date":y=f.formatDate(p,C.intlOptions);break b;case "number":y=k.formatNumber(p,C.intlOptions);break b;default:H.warn("missing format descriptor for key {key}"),y=m(p)}else if(y)b:switch(y.toLowerCase()){case "dateformat":y=
f.formatDate(p);break b;case "numberformat":y=k.formatNumber(p);break b;default:H.warn(`inline format is unsupported since 4.12: ${y}`),y=/^(dateformat|datestring)/i.test(y)?f.formatDate(p):/^numberformat/i.test(y)?k.formatNumber(p):m(p)}else y=m(p);else y=""}return y})};Object.defineProperty(h,"__esModule",{value:!0})})},"esri/intl/messages":function(){define(["exports","../chunks/_rollupPluginBabelHelpers","../core/Error","../core/promiseUtils","./locale"],function(h,c,q,I,f){function k(A){var N;
return null!=(N=p[A])?N:!1}function m(A){for(const N of y.keys())w(A.pattern,N)&&y.delete(N)}function H(){H=c._asyncToGenerator(function*(A){const N=f.getLocale();y.has(A)||y.set(A,r(A,N));A=y.get(A);yield b.add(A);return A});return H.apply(this,arguments)}function r(A,N){return v.apply(this,arguments)}function v(){v=c._asyncToGenerator(function*(A,N){const G=[];for(const R of C)if(w(R.pattern,A))try{return yield R.fetchMessageBundle(A,N)}catch(O){G.push(O)}if(G.length)throw new q("intl:message-bundle-error",
`Errors occurred while loading "${A}"`,{errors:G});throw new q("intl:no-message-bundle-loader",`No loader found for message bundle "${A}"`);});return v.apply(this,arguments)}function w(A,N){return"string"===typeof A?N.startsWith(A):A.test(N)}const Q=/^([a-z]{2})(?:[-_]([A-Za-z]{2}))?$/,p={ar:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:!0,nl:!0,pl:!0,"pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,
uk:!0,vi:!0,"zh-CN":!0,"zh-HK":!0,"zh-TW":!0},C=[],y=new Map;f.beforeLocaleChange(()=>{y.clear()});const b=new (function(){function A(){this._numLoading=0}var N=A.prototype;N.waitForAll=function(){var G=c._asyncToGenerator(function*(){this._dfd&&(yield this._dfd.promise)});return function(){return G.apply(this,arguments)}}();N.add=function(G){this._increase();G.then(()=>this._decrease(),()=>this._decrease());return this.waitForAll()};N._increase=function(){this._numLoading++;this._dfd||(this._dfd=
I.createDeferred())};N._decrease=function(){this._numLoading=Math.max(this._numLoading-1,0);this._dfd&&0===this._numLoading&&(this._dfd.resolve(),this._dfd=null)};return A}()),z={cache:y,loaders:C};h.fetchMessageBundle=function(A){return H.apply(this,arguments)};h.normalizeMessageBundleLocale=function(A){if(!Q.test(A))return null;const [,N,G]=Q.exec(A);A=N+(G?"-"+G.toUpperCase():"");return k(A)?A:k(N)?N:null};h.registerMessageBundleLoader=function(A){C.includes(A)||(m(A),C.unshift(A));return{remove(){const N=
C.indexOf(A);-1<N&&(C.splice(N,1),m(A))}}};h.test=z;Object.defineProperty(h,"__esModule",{value:!0})})},"esri/intl/t9n":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../request ../core/Error ../core/global ../core/maybe ./messages".split(" "),function(h,c,q,I,f,k,m){function H(C,y,b,z){return r.apply(this,arguments)}function r(){r=c._asyncToGenerator(function*(C,y,b,z){var A=y.exec(b);if(!A)throw new I("esri-intl:invalid-bundle",`Bundle id "${b}" is not compatible with the pattern "${y}"`);
y=A[1]?`${A[1]}/`:"";A=A[2];const N=m.normalizeMessageBundleLocale(z);z=`${y}${A}.json`;y=N?`${y}${A}_${N}.json`:z;let G;try{G=yield v(C(y))}catch(R){if(y===z)throw new I("intl:unknown-bundle",`Bundle "${b}" cannot be loaded`,{error:R});try{G=yield v(C(z))}catch(O){throw new I("intl:unknown-bundle",`Bundle "${b}" cannot be loaded`,{error:O});}}return G});return r.apply(this,arguments)}function v(C){return w.apply(this,arguments)}function w(){w=c._asyncToGenerator(function*(C){if(k.isSome(p.fetchBundleAsset))return p.fetchBundleAsset(C);
C=yield q(C,{responseType:"text"});return JSON.parse(C.data)});return w.apply(this,arguments)}let Q=function(){function C({base:y="",pattern:b,location:z=new URL(window.location.href)}){let A;A="string"===typeof z?N=>(new URL(N,new URL(z,f.location))).href:z instanceof URL?N=>(new URL(N,z)).href:z;this.pattern="string"===typeof b?new RegExp(`^${b}`):b;this.getAssetUrl=A;y=y?y.endsWith("/")?y:y+"/":"";this.matcher=new RegExp(`^${y}(?:(.*)\/)?(.*)$`)}C.prototype.fetchMessageBundle=function(y,b){return H(this.getAssetUrl,
this.matcher,y,b)};return C}();const p={};h.JSONLoader=Q;h.createJSONLoader=function(C){return new Q(C)};h.test=p;Object.defineProperty(h,"__esModule",{value:!0})})},"esri/portal/PortalQueryParams":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Accessor ../core/jsonMap ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/has ../core/Logger ../core/accessorSupport/decorators/subclass ../geometry/Extent ../geometry/SpatialReference ../geometry/support/webMercatorUtils".split(" "),
function(h,c,q,I,f,k,m,H,r,v,w,Q,p){var C;const y=new I.JSONMap({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});q=C=function(b){function z(N){N=b.call(this,N)||this;N.categories=null;N.disableExtraQuery=!1;N.extent=null;N.num=10;N.query=null;N.sortField=null;N.start=1;return N}h._inheritsLoose(z,b);var A=z.prototype;A.clone=function(){return new C({categories:this.categories?f.clone(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?
this.extent.clone():null,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})};A.toRequestOptions=function(N,G){let R;this.categories&&(R=this.categories.map(P=>Array.isArray(P)?JSON.stringify(P):P));let O;if(this.extent){var D=p.project(this.extent,Q.WGS84);D&&(O=`${D.xmin},${D.ymin},${D.xmax},${D.ymax}`)}D=this.query;!this.disableExtraQuery&&N.extraQuery&&(D="("+D+")"+N.extraQuery);N={categories:R,bbox:O,q:D,num:this.num,sortField:null,sortOrder:null,
start:this.start};this.sortField&&(N.sortField=this.sortField.split(",").map(P=>y.toJSON(P.trim())).join(","),N.sortOrder=this.sortOrder);return{query:{...G,...N}}};h._createClass(z,[{key:"sortOrder",get:function(){return this._get("sortOrder")||"asc"},set:function(N){"asc"!==N&&"desc"!==N||this._set("sortOrder",N)}}]);return z}(q);c.__decorate([k.property()],q.prototype,"categories",void 0);c.__decorate([k.property()],q.prototype,"disableExtraQuery",void 0);c.__decorate([k.property({type:w})],q.prototype,
"extent",void 0);c.__decorate([k.property()],q.prototype,"num",void 0);c.__decorate([k.property()],q.prototype,"query",void 0);c.__decorate([k.property()],q.prototype,"sortField",void 0);c.__decorate([k.property()],q.prototype,"sortOrder",null);c.__decorate([k.property()],q.prototype,"start",void 0);return q=C=c.__decorate([v.subclass("esri.portal.PortalQueryParams")],q)})},"esri/portal/PortalQueryResult":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Accessor ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/jsonMap ../core/accessorSupport/decorators/subclass".split(" "),
function(h,c,q,I,f,k,m,H,r){q=function(v){function w(Q){Q=v.call(this,Q)||this;Q.nextQueryParams=null;Q.queryParams=null;Q.results=null;Q.total=null;return Q}h._inheritsLoose(w,v);return w}(q);c.__decorate([I.property()],q.prototype,"nextQueryParams",void 0);c.__decorate([I.property()],q.prototype,"queryParams",void 0);c.__decorate([I.property()],q.prototype,"results",void 0);c.__decorate([I.property()],q.prototype,"total",void 0);return q=c.__decorate([r.subclass("esri.portal.PortalQueryResult")],
q)})},"esri/portal/PortalUser":function(){define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Error ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/jsonMap ../core/accessorSupport/decorators/subclass ./PortalFolder ./PortalGroup".split(" "),function(h,c,q,I,f,k,m,H,r,v,w,Q,p){var C;f=C=function(y){function b(...A){A=y.call(this,...A)||this;A.access=null;A.created=null;A.culture=null;A.description=
null;A.email=null;A.fullName=null;A.modified=null;A.orgId=null;A.portal=null;A.preferredView=null;A.privileges=null;A.region=null;A.role=null;A.roleId=null;A.sourceJSON=null;A.units=null;A.username=null;A.userType=null;return A}c._inheritsLoose(b,y);var z=b.prototype;z.addItem=function(A){const N=A&&A.item;var G=A&&A.data;A=A&&A.folder;const R={method:"post"};N&&(R.query=N.createPostQuery(),null!=G&&("string"===typeof G?R.query.text=G:"object"===typeof G&&(R.query.text=JSON.stringify(G))));G=this.userContentUrl;
A&&(G+="/"+("string"===typeof A?A:A.id));return this.portal._request(G+"/addItem",R).then(O=>{N.id=O.id;N.portal=this.portal;return N.loaded?N.reload():N.load()})};z.deleteItem=function(A){let N=this.userContentUrl;A.ownerFolder&&(N+="/"+A.ownerFolder);return this.portal._request(N+`/items/${A.id}/delete`,{method:"post"}).then(()=>{A.id=null;A.portal=null})};z.deleteItems=function(A){const N=this.userContentUrl+"/deleteItems";var G=A.map(R=>R.id);return G.length?(G={method:"post",query:{items:G.join(",")}},
this.portal._request(N,G).then(()=>{A.forEach(R=>{R.id=null;R.portal=null})})):Promise.resolve(void 0)};z.fetchFolders=function(){return this.portal._request(this.userContentUrl,{query:{num:1}}).then(A=>A&&A.folders?A.folders.map(N=>{N=Q.fromJSON(N);N.portal=this.portal;return N}):[])};z.fetchGroups=function(){return this.portal._request(this.url).then(A=>A&&A.groups?A.groups.map(N=>{N=p.fromJSON(N);N.portal=this.portal;return N}):[])};z.fetchItems=function(A){A||(A={});let N=this.userContentUrl;
A.folder&&(N+="/"+A.folder.id);let G;return(new Promise(function(R,O){h(["./PortalItem"],function(D){R(Object.freeze({__proto__:null,"default":D}))},O)})).then(({default:R})=>{G=R;return this.portal._request(N,{query:{folders:!1,num:A.num||10,start:A.start||1,sortField:A.sortField||"created",sortOrder:A.sortOrder||"asc"}})}).then(R=>{let O;return R&&R.items?(O=R.items.map(D=>{D=G.fromJSON(D);D.portal=this.portal;return D}),Promise.all(O.map(D=>D.load())).catch(D=>D).then(()=>({items:O,nextStart:R.nextStart,
total:R.total}))):{items:[],nextStart:-1,total:0}})};z.fetchTags=function(){return this.portal._request(this.url+"/tags").then(A=>A.tags)};z.getThumbnailUrl=function(A){let N=this.thumbnailUrl;N&&A&&(N+=`&w=${A}`);return N};z.queryFavorites=function(A){return this.favGroupId?(this._favGroup||(this._favGroup=new p({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(A)):Promise.reject(new I("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))};z.toJSON=
function(){throw new I("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented");};b.fromJSON=function(A){if(!A)return null;if(A.declaredClass)throw Error("JSON object is already hydrated");const N=new C;N.sourceJSON=A;N.read(A);return N};c._createClass(b,[{key:"thumbnailUrl",get:function(){const A=this.url,N=this.thumbnail;return A&&N?this.portal._normalizeUrl(`${A}/info/${N}?f=json`):null}},{key:"userContentUrl",get:function(){const A=this.get("portal.restUrl");return A?`${A}/content/users/${this.username}`:
null}},{key:"url",get:function(){const A=this.get("portal.restUrl");return A?`${A}/community/users/${this.username}`:null}}]);return b}(f.JSONSupport);q.__decorate([k.property()],f.prototype,"access",void 0);q.__decorate([k.property({type:Date})],f.prototype,"created",void 0);q.__decorate([k.property()],f.prototype,"culture",void 0);q.__decorate([k.property()],f.prototype,"description",void 0);q.__decorate([k.property()],f.prototype,"email",void 0);q.__decorate([k.property()],f.prototype,"favGroupId",
void 0);q.__decorate([k.property()],f.prototype,"fullName",void 0);q.__decorate([k.property({type:Date})],f.prototype,"modified",void 0);q.__decorate([k.property()],f.prototype,"orgId",void 0);q.__decorate([k.property()],f.prototype,"portal",void 0);q.__decorate([k.property()],f.prototype,"preferredView",void 0);q.__decorate([k.property()],f.prototype,"privileges",void 0);q.__decorate([k.property()],f.prototype,"region",void 0);q.__decorate([k.property()],f.prototype,"role",void 0);q.__decorate([k.property()],
f.prototype,"roleId",void 0);q.__decorate([k.property()],f.prototype,"sourceJSON",void 0);q.__decorate([k.property()],f.prototype,"thumbnail",void 0);q.__decorate([k.property({readOnly:!0})],f.prototype,"thumbnailUrl",null);q.__decorate([k.property()],f.prototype,"units",void 0);q.__decorate([k.property({readOnly:!0})],f.prototype,"userContentUrl",null);q.__decorate([k.property({readOnly:!0})],f.prototype,"url",null);q.__decorate([k.property()],f.prototype,"username",void 0);q.__decorate([k.property()],
f.prototype,"userType",void 0);return f=C=q.__decorate([w.subclass("esri.portal.PortalUser")],f)})},"esri/portal/PortalFolder":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Error ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/jsonMap ../core/accessorSupport/decorators/subclass".split(" "),function(h,c,q,I,f,k,m,H,r,v){I=function(w){function Q(p){p=w.call(this,p)||this;p.created=
null;p.id=null;p.portal=null;p.title=null;p.username=null;return p}h._inheritsLoose(Q,w);Q.prototype.toJSON=function(){throw new q("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented");};h._createClass(Q,[{key:"url",get:function(){const p=this.get("portal.restUrl");return p?`${p}/content/users/${this.username}/${this.id}`:null}}]);return Q}(I.JSONSupport);c.__decorate([f.property({type:Date})],I.prototype,"created",void 0);c.__decorate([f.property()],I.prototype,"id",void 0);
c.__decorate([f.property()],I.prototype,"portal",void 0);c.__decorate([f.property()],I.prototype,"title",void 0);c.__decorate([f.property({readOnly:!0})],I.prototype,"url",null);c.__decorate([f.property()],I.prototype,"username",void 0);return I=c.__decorate([v.subclass("esri.portal.PortalFolder")],I)})},"esri/portal/PortalGroup":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Error ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/jsonMap ../core/accessorSupport/decorators/subclass ./PortalQueryParams".split(" "),
function(h,c,q,I,f,k,m,H,r,v,w){I=function(Q){function p(y){y=Q.call(this,y)||this;y.access=null;y.created=null;y.description=null;y.id=null;y.isInvitationOnly=!1;y.modified=null;y.owner=null;y.portal=null;y.snippet=null;y.sortField=null;y.sortOrder=null;y.tags=null;y.title=null;return y}h._inheritsLoose(p,Q);var C=p.prototype;C.fetchCategorySchema=function(y){return this.portal._request(this.url+"/categorySchema",y).then(b=>{b=b.categorySchema||[];return b.some(z=>"contentCategorySetsGroupQuery.LivingAtlas"===
z.source)?this._fetchCategorySchemaSet("LivingAtlas",y):b})};C.fetchMembers=function(y){return this.portal._request(this.url+"/users",y)};C.getThumbnailUrl=function(y){let b=this.thumbnailUrl;b&&y&&(b+=`&w=${y}`);return b};C.toJSON=function(){throw new q("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented");};C.queryItems=function(y,b){y=m.ensureType(w,y);if(5<parseFloat(this.portal.currentVersion))return y=y||new w,this.portal._queryPortal(`/content/groups/${this.id}/search`,
y,"PortalItem",b);y=y?y.clone():new w;y.query="group:"+this.id+(y.query?" "+y.query:"");return this.portal.queryItems(y,b)};C._fetchCategorySchemaSet=function(y,b){return this.portal._fetchSelf(this.portal.authMode,!0,b).then(z=>{if(z=z.contentCategorySetsGroupQuery){const A=new w;A.disableExtraQuery=!0;A.num=1;A.query=z;return this.portal.queryGroups(A,b)}throw new q("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found");}).then(z=>{if(z.total){z=z.results[0];const A=
new w;A.num=1;A.query=`typekeywords:"${y}"`;return z.queryItems(A,b)}throw new q("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found");}).then(z=>z.total?z.results[0].fetchData("json",b).then(A=>(A=A&&A.categorySchema)&&A.length?A:[]):[])};h._createClass(p,[{key:"thumbnailUrl",get:function(){const y=this.url,b=this.thumbnail;return y&&b?this.portal._normalizeUrl(`${y}/info/${b}?f=json`):null}},{key:"url",get:function(){const y=this.get("portal.restUrl");return y?y+"/community/groups/"+
this.id:null}}]);return p}(I.JSONSupport);c.__decorate([f.property()],I.prototype,"access",void 0);c.__decorate([f.property({type:Date})],I.prototype,"created",void 0);c.__decorate([f.property()],I.prototype,"description",void 0);c.__decorate([f.property()],I.prototype,"id",void 0);c.__decorate([f.property()],I.prototype,"isInvitationOnly",void 0);c.__decorate([f.property({type:Date})],I.prototype,"modified",void 0);c.__decorate([f.property()],I.prototype,"owner",void 0);c.__decorate([f.property()],
I.prototype,"portal",void 0);c.__decorate([f.property()],I.prototype,"snippet",void 0);c.__decorate([f.property()],I.prototype,"sortField",void 0);c.__decorate([f.property()],I.prototype,"sortOrder",void 0);c.__decorate([f.property()],I.prototype,"tags",void 0);c.__decorate([f.property()],I.prototype,"thumbnail",void 0);c.__decorate([f.property({readOnly:!0})],I.prototype,"thumbnailUrl",null);c.__decorate([f.property()],I.prototype,"title",void 0);c.__decorate([f.property({readOnly:!0})],I.prototype,
"url",null);return I=c.__decorate([v.subclass("esri.portal.PortalGroup")],I)})},"esri/portal/PortalItem":function(){define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../assets ../core/Error ../core/JSONSupport ../core/lang ../core/Loadable ../core/maybe ../core/urlUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/has ../core/Logger ../core/jsonMap ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../geometry/Extent ./Portal ./PortalItemResource ./PortalRating".split(" "),
function(h,c,q,I,f,k,m,H,r,v,w,Q,p,C,y,b,z,A,N,G,R){var O;k=O=function(D){function P(d){d=D.call(this,d)||this;d.access=null;d.accessInformation=null;d.apiKey=null;d.applicationProxies=null;d.avgRating=null;d.categories=null;d.created=null;d.culture=null;d.description=null;d.extent=null;d.groupCategories=null;d.id=null;d.itemControl=null;d.licenseInfo=null;d.modified=null;d.name=null;d.numComments=null;d.numRatings=null;d.numViews=null;d.owner=null;d.ownerFolder=null;d.portal=null;d.screenshots=null;
d.size=null;d.snippet=null;d.sourceJSON=null;d.tags=null;d.title=null;d.type=null;d.typeKeywords=null;d.url=null;return d}c._inheritsLoose(P,D);P.from=function(d){return Q.ensureClass(O,d)};var u=P.prototype;u.destroy=function(){this.portal=null};u.readExtent=function(d){return d&&d.length?new A(d[0][0],d[0][1],d[1][0],d[1][1]):null};u.load=function(d){this.portal||(this.portal=N.getDefault());const e=this.portal.load(d).then(()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?this.portal._request(this.itemUrl,
{signal:r.isSome(d)?d.signal:null,query:{token:this.apiKey}}):{}).then(B=>{this.sourceJSON=B;this.read(B)});this.addResolvingPromise(e);return Promise.resolve(this)};u.addRating=function(d){const e={method:"post",query:{}};d instanceof R&&(d=d.rating);isNaN(d)||"number"!==typeof d||(e.query.rating=d);return this.portal._request(this.itemUrl+"/addRating",e).then(()=>new R({rating:d,created:new Date}))};u.clone=function(){const d={access:this.access,accessInformation:this.accessInformation,applicationProxies:m.clone(this.applicationProxies),
avgRating:this.avgRating,categories:m.clone(this.categories),created:m.clone(this.created),culture:this.culture,description:this.description,extent:m.clone(this.extent),groupCategories:m.clone(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:m.clone(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:m.clone(this.screenshots),
size:this.size,snippet:this.snippet,tags:m.clone(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:m.clone(this.typeKeywords),url:this.url};this.loaded&&(d.loadStatus="loaded");return(new O({sourceJSON:this.sourceJSON})).set(d)};u.createPostQuery=function(){const d=this.toJSON();for(const e in d)"tags"===e&&null!==d[e]&&(d[e]=d[e].join(", ")),"typeKeywords"===e&&null!==d[e]&&(d[e]=d[e].join(", ")),"extent"===e&&d[e]&&(d[e]=JSON.stringify(d[e]));return d};u.deleteRating=
function(){return this.portal._request(this.itemUrl+"/deleteRating",{method:"post"}).then(()=>{})};u.fetchData=function(d="json",e){return this.portal._request(this.itemUrl+"/data",{responseType:d,...e,query:{token:this.apiKey}})};u.fetchRating=function(d){return this.portal._request(this.itemUrl+"/rating",{query:{token:this.apiKey},...d}).then(e=>null!=e.rating?(e.created=new Date(e.created),new R(e)):null)};u.fetchRelatedItems=function(d,e){return this.portal._requestToTypedArray(this.itemUrl+"/relatedItems",
{query:{...d,token:this.apiKey},...e},O)};u.getThumbnailUrl=function(d){let e=this.thumbnailUrl;e&&d&&(e+=`&w=${d}`);return e};u.reload=function(){return this.portal._request(this.itemUrl,{cacheBust:!0,query:{token:this.apiKey}}).then(d=>{this.sourceJSON=d;this.read(d);return this})};u.update=function(d){return this.id?this.load().then(()=>this.portal._signIn()).then(()=>{const e=d&&d.data,B={method:"post"};B.query=this.createPostQuery();for(const L in B.query)null===B.query[L]&&(B.query[L]="");B.query.clearEmptyFields=
!0;null!=e&&("string"===typeof e?B.query.text=e:"object"===typeof e&&(B.query.text=JSON.stringify(e)));return this.portal._request(`${this.userItemUrl}/update`,B).then(()=>this.reload())}):Promise.reject(new f("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))};u.updateThumbnail=function(d){return this.id?this.load().then(()=>this.portal._signIn()).then(()=>{const e=d.thumbnail,B=d.filename,L={method:"post"};if("string"===typeof e)v.isDataProtocol(e)?L.query={data:e}:
L.query={url:v.makeAbsolute(e)},r.isSome(B)&&(L.query.filename=B);else{const F=new FormData;r.isSome(B)?F.append("file",e,B):F.append("file",e);L.body=F}return this.portal._request(`${this.userItemUrl}/updateThumbnail`,L).then(()=>this.reload())}):Promise.reject(new f("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))};u.fetchResources=function(){var d=c._asyncToGenerator(function*(e={},B){return(yield new Promise(function(L,F){h(["./support/resourceUtils"],L,F)})).fetchResources(this,
e,B)});return function(){return d.apply(this,arguments)}}();u.addResource=function(){var d=c._asyncToGenerator(function*(e,B,L){const F=yield new Promise(function(t,g){h(["./support/resourceUtils"],t,g)});e.portalItem=this;return F.addOrUpdateResource(e,"add",B,L)});return function(e,B,L){return d.apply(this,arguments)}}();u.removeResource=function(){var d=c._asyncToGenerator(function*(e,B){const L=yield new Promise(function(F,t){h(["./support/resourceUtils"],F,t)});if(e.portalItem&&e.portalItem.itemUrl!==
this.itemUrl)throw new f("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return L.removeResource(this,e,B)});return function(e,B){return d.apply(this,arguments)}}();u.removeAllResources=function(){var d=c._asyncToGenerator(function*(e){return(yield new Promise(function(B,L){h(["./support/resourceUtils"],B,L)})).removeAllResources(this,e)});return function(e){return d.apply(this,arguments)}}();u.resourceFromPath=function(d){return new G({portalItem:this,
path:d})};u.toJSON=function(){var d=this.extent;d={created:this.created&&this.created.getTime(),description:this.description,extent:d&&[[d.xmin,d.ymin],[d.xmax,d.ymax]],id:this.id,modified:this.modified&&this.modified.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,tags:this.tags,thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:this.typeKeywords,url:this.url};return m.fixJson(d)};P.fromJSON=function(d){if(!d)return null;if(d.declaredClass)throw Error("JSON object is already hydrated");
return new O({sourceJSON:d})};u._getPostQuery=function(){const d=this.toJSON();for(const e in d)"tags"===e&&null!==d[e]&&(d[e]=d[e].join(", ")),"typeKeywords"===e&&null!==d[e]&&(d[e]=d[e].join(", ")),"extent"===e&&d[e]&&(d[e]=JSON.stringify(d[e]));return d};c._createClass(P,[{key:"displayName",get:function(){const d=this.type,e=this.typeKeywords||[];let B=d;"Feature Service"===d||"Feature Collection"===d?B=-1<e.indexOf("Table")?"Table":-1<e.indexOf("Route Layer")?"Route Layer":-1<e.indexOf("Markup")?
"Markup":"Feature Layer":"Image Service"===d?B=-1<e.indexOf("Elevation 3D Layer")?"Elevation Layer":-1<e.indexOf("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":"Scene Service"===d?B="Scene Layer":"Scene Package"===d?B="Scene Layer Package":"Stream Service"===d?B="Feature Layer":"Geoprocessing Service"===d&&this.portal&&this.portal.isPortal?B=-1<e.indexOf("Web Tool")?"Tool":"Geoprocessing Service":"Geocoding Service"===d?B="Locator":"Geoenrichment Service"===d?B="GeoEnrichment Service":"Microsoft Powerpoint"===
d?B="Microsoft PowerPoint":"GeoJson"===d?B="GeoJSON":"Globe Service"===d?B="Globe Layer":"Vector Tile Service"===d?B="Tile Layer":"netCDF"===d?B="NetCDF":"Map Service"===d?B=-1===e.indexOf("Spatiotemporal")&&(-1<e.indexOf("Hosted Service")||-1<e.indexOf("Tiled"))&&-1===e.indexOf("Relational")?"Tile Layer":"Map Image Layer":d&&-1<d.toLowerCase().indexOf("add in")?B=d.replace(/(add in)/gi,"Add-In"):"datastore catalog service"===d?B="Big Data File Share":"Compact Tile Package"===d?B="Tile Package (tpkx)":
"OGCFeatureServer"===d&&(B="OGC Feature Layer");return B}},{key:"iconUrl",get:function(){var d=this.type&&this.type.toLowerCase()||"";const e=this.typeKeywords||[];let B=!1,L=!1,F=!1,t=!1,g=!1,K=!1;0<d.indexOf("service")||"feature collection"===d||"kml"===d||"wms"===d||"wmts"===d||"wfs"===d?(B=-1<e.indexOf("Hosted Service"),"feature service"===d||"feature collection"===d||"kml"===d||"wfs"===d?(L=-1<e.indexOf("Table"),F=-1<e.indexOf("Route Layer"),t=-1<e.indexOf("Markup"),g=-1!==e.indexOf("Spatiotemporal"),
K=-1!==e.indexOf("UtilityNetwork"),d=g&&L?"spatiotemporaltable":L?"table":F?"routelayer":t?"markup":g?"spatiotemporal":B?"featureshosted":K?"utilitynetwork":"features"):d="map service"===d||"wms"===d||"wmts"===d?B||-1<e.indexOf("Tiled")||"wmts"===d?"maptiles":"mapimages":"scene service"===d?-1<e.indexOf("Line")?"sceneweblayerline":-1<e.indexOf("3DObject")?"sceneweblayermultipatch":-1<e.indexOf("Point")?"sceneweblayerpoint":-1<e.indexOf("IntegratedMesh")?"sceneweblayermesh":-1<e.indexOf("PointCloud")?
"sceneweblayerpointcloud":-1<e.indexOf("Polygon")?"sceneweblayerpolygon":-1<e.indexOf("Building")?"sceneweblayerbuilding":-1<e.indexOf("Voxel")?"sceneweblayervoxel":"sceneweblayer":"image service"===d?-1<e.indexOf("Elevation 3D Layer")?"elevationlayer":-1<e.indexOf("Tiled Imagery")?"tiledimagerylayer":"imagery":"stream service"===d?"streamlayer":"vector tile service"===d?"vectortile":"datastore catalog service"===d?"datastorecollection":"geocoding service"===d?"geocodeservice":"geoprocessing service"===
d?-1<e.indexOf("Web Tool")&&this.portal&&this.portal.isPortal?"tool":"layers":"layers"):d="web map"===d||"cityengine web scene"===d?"maps":"web scene"===d?-1<e.indexOf("ViewingMode-Local")?"webscenelocal":"websceneglobal":"web mapping application"===d||"mobile application"===d||"application"===d||"operation view"===d||"desktop application"===d?"apps":"map document"===d||"map package"===d||"published map"===d||"scene document"===d||"globe document"===d||"basemap package"===d||"mobile basemap package"===
d||"mobile map package"===d||"project package"===d||"project template"===d||"pro map"===d||"layout"===d||"layer"===d&&-1<e.indexOf("ArcGIS Pro")||"explorer map"===d&&e.indexOf("Explorer Document")?"mapsgray":"service definition"===d||"csv"===d||"shapefile"===d||"cad drawing"===d||"geojson"===d||"360 vr experience"===d||"netcdf"===d||"administrative report"===d?"datafiles":"explorer add in"===d||"desktop add in"===d||"windows viewer add in"===d||"windows viewer configuration"===d?"appsgray":"arcgis pro add in"===
d||"arcgis pro configuration"===d?"addindesktop":"rule package"===d||"file geodatabase"===d||"sqlite geodatabase"===d||"csv collection"===d||"kml collection"===d||"windows mobile package"===d||"map template"===d||"desktop application template"===d||"gml"===d||"arcpad package"===d||"code sample"===d||"form"===d||"document link"===d||"earth configuration"===d||"operations dashboard add in"===d||"rules package"===d||"image"===d||"workflow manager package"===d||"explorer map"===d&&-1<e.indexOf("Explorer Mapping Application")||
-1<e.indexOf("Document")?"datafilesgray":"network analysis service"===d||"geoprocessing service"===d||"geodata service"===d||"geometry service"===d||"geoprocessing package"===d||"locator package"===d||"geoprocessing sample"===d||"workflow manager service"===d?"toolsgray":"layer"===d||"layer package"===d||"explorer layer"===d?"layersgray":"scene package"===d?"scenepackage":"mobile scene package"===d?"mobilescenepackage":"tile package"===d||"compact tile package"===d?"tilepackage":"task file"===d?"taskfile":
"report template"===d?"report-template":"statistical data collection"===d?"statisticaldatacollection":"insights workbook"===d?"workbook":"insights model"===d?"insightsmodel":"insights page"===d?"insightspage":"insights theme"===d?"insightstheme":"hub initiative"===d?"hubinitiative":"hubpage"===d?"hubpage":"hub event"===d?"hubevent":"hub site application"===d?"hubsite":"relational database connection"===d?"relationaldatabaseconnection":"big data file share"===d?"datastorecollection":"image collection"===
d?"imagecollection":"style"===d?"style":"desktop style"===d?"desktopstyle":"dashboard"===d?"dashboard":"raster function template"===d?"rasterprocessingtemplate":"vector tile package"===d?"vectortilepackage":"ortho mapping project"===d?"orthomappingproject":"ortho mapping template"===d?"orthomappingtemplate":"solution"===d?"solutions":"geopackage"===d?"geopackage":"deep learning package"===d?"deeplearningpackage":"real time analytic"===d?"realtimeanalytics":"big data analytic"===d?"bigdataanalytics":
"feed"===d?"feed":"excalibur imagery project"===d?"excaliburimageryproject":"notebook"===d?"notebook":"storymap"===d?"storymap":"survey123 add in"===d?"survey123addin":"mission"===d?"mission":"mission report"===d?"missionreport":"quickcapture project"===d?"quickcaptureproject":"pro report"===d?"proreport":"urban model"===d?"urbanmodel":"web experience"===d?"experiencebuilder":"web experience template"===d?"webexperiencetemplate":"workflow"===d?"workflow":"insights script"===d?"insightsscript":"kernel gateway connection"===
d?"kernelgatewayconnection":"hub initiative template"===d?"hubinitiativetemplate":"storymap theme"===d?"storymaptheme":"knowledge graph"===d?"knowledgegraph":"native application"===d?"nativeapp":"native application installer"===d?"nativeappinstaller":"link chart"===d?"linkchart":"investigation"===d?"investigation":"ogcfeatureserver"===d?"features":"pro project"===d?"proproject":"insights workbook package"===d?"insightsworkbookpackage":"maps";return d?I.getAssetUrl("esri/images/portal/"+d+"16.png"):
null}},{key:"isLayer",get:function(){return-1<"Map Service;Feature Service;Feature Collection;Scene Service;Image Service;Stream Service;Vector Tile Service;WMTS;WMS".split(";").indexOf(this.type)}},{key:"itemUrl",get:function(){const d=this.get("portal.restUrl");return d?d+"/content/items/"+this.id:null}},{key:"thumbnailUrl",get:function(){const d=this.itemUrl,e=this.thumbnail;return d&&e?this.portal._normalizeUrl(`${d}/info/${e}?f=json`):null}},{key:"userItemUrl",get:function(){const d=this.get("portal.restUrl");
if(!d)return null;const e=this.owner||this.get("portal.user.username");return e?`${d}/content/users/${this.ownerFolder?`${e}/${this.ownerFolder}`:e}/items/${this.id}`:null}}]);return P}(k.JSONSupportMixin(H));q.__decorate([w.property({type:["private","shared","org","public"]})],k.prototype,"access",void 0);q.__decorate([w.property()],k.prototype,"accessInformation",void 0);q.__decorate([w.property({type:String})],k.prototype,"apiKey",void 0);q.__decorate([w.property({json:{read:{source:"appProxies"}}})],
k.prototype,"applicationProxies",void 0);q.__decorate([w.property()],k.prototype,"avgRating",void 0);q.__decorate([w.property()],k.prototype,"categories",void 0);q.__decorate([w.property({type:Date})],k.prototype,"created",void 0);q.__decorate([w.property()],k.prototype,"culture",void 0);q.__decorate([w.property()],k.prototype,"description",void 0);q.__decorate([w.property({readOnly:!0})],k.prototype,"displayName",null);q.__decorate([w.property({type:A})],k.prototype,"extent",void 0);q.__decorate([b.reader("extent")],
k.prototype,"readExtent",null);q.__decorate([w.property()],k.prototype,"groupCategories",void 0);q.__decorate([w.property({readOnly:!0})],k.prototype,"iconUrl",null);q.__decorate([w.property()],k.prototype,"id",void 0);q.__decorate([w.property({readOnly:!0})],k.prototype,"isLayer",null);q.__decorate([w.property()],k.prototype,"itemControl",void 0);q.__decorate([w.property({readOnly:!0})],k.prototype,"itemUrl",null);q.__decorate([w.property()],k.prototype,"licenseInfo",void 0);q.__decorate([w.property({type:Date})],
k.prototype,"modified",void 0);q.__decorate([w.property()],k.prototype,"name",void 0);q.__decorate([w.property()],k.prototype,"numComments",void 0);q.__decorate([w.property()],k.prototype,"numRatings",void 0);q.__decorate([w.property()],k.prototype,"numViews",void 0);q.__decorate([w.property()],k.prototype,"owner",void 0);q.__decorate([w.property()],k.prototype,"ownerFolder",void 0);q.__decorate([w.property({type:N})],k.prototype,"portal",void 0);q.__decorate([w.property()],k.prototype,"screenshots",
void 0);q.__decorate([w.property()],k.prototype,"size",void 0);q.__decorate([w.property()],k.prototype,"snippet",void 0);q.__decorate([w.property()],k.prototype,"sourceJSON",void 0);q.__decorate([w.property()],k.prototype,"tags",void 0);q.__decorate([w.property()],k.prototype,"thumbnail",void 0);q.__decorate([w.property({readOnly:!0})],k.prototype,"thumbnailUrl",null);q.__decorate([w.property()],k.prototype,"title",void 0);q.__decorate([w.property()],k.prototype,"type",void 0);q.__decorate([w.property()],
k.prototype,"typeKeywords",void 0);q.__decorate([w.property()],k.prototype,"url",void 0);q.__decorate([w.property({readOnly:!0})],k.prototype,"userItemUrl",null);return k=O=q.__decorate([z.subclass("esri.portal.PortalItem")],k)})},"esri/portal/PortalItemResource":function(){define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Accessor ../core/Error ../core/Logger ../core/maybe ../core/urlUtils ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/decorators/cast ../core/jsonMap ../core/accessorSupport/decorators/subclass".split(" "),
function(h,c,q,I,f,k,m,H,r,v,w,Q,p){const C=k.getLogger("esri.portal.PortalItemResource");I=function(y){function b(A){A=y.call(this,A)||this;A.portalItem=null;return A}c._inheritsLoose(b,y);var z=b.prototype;z.normalizeCtorArgs=function(A){return A&&A.portalItem&&A.path?{...A,path:this.normalizePath(A.path,A.portalItem)}:A};z._castPath=function(A){return this.normalizePath(A,this.portalItem)};z.fetch=function(A="json",N){const G=this.url;if(m.isNone(G))throw new f("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");
return this.portalItem.portal._request(G,{responseType:A,query:{token:this.portalItem.apiKey},signal:m.get(N,"signal")})};z.update=function(){var A=c._asyncToGenerator(function*(N,G){return(yield new Promise(function(R,O){h(["./support/resourceUtils"],R,O)})).addOrUpdateResource(this,"update",N,G)});return function(N,G){return A.apply(this,arguments)}}();z.hasPath=function(){return m.isSome(this.path)};z.normalizePath=function(A,N){if(m.isNone(A))return A;A=A.replace(/^\/+/,"");m.isSome(N)&&H.isAbsolute(A)&&
(A=H.makeRelative(A,N.itemUrl));return A.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,"")};c._createClass(b,[{key:"path",set:function(A){m.isSome(A)&&H.isAbsolute(A)?C.error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",A)}},{key:"url",get:function(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}},{key:"itemRelativeUrl",get:function(){return this.portalItem&&this.path?`./resources/${this.path}`:null}}]);
return b}(I);q.__decorate([r.property()],I.prototype,"portalItem",void 0);q.__decorate([r.property({type:String,value:null})],I.prototype,"path",null);q.__decorate([w.cast("path")],I.prototype,"_castPath",null);q.__decorate([r.property({type:String,readOnly:!0})],I.prototype,"url",null);q.__decorate([r.property({type:String,readOnly:!0})],I.prototype,"itemRelativeUrl",null);return I=q.__decorate([p.subclass("esri.portal.PortalItemResource")],I)})},"esri/portal/PortalRating":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Accessor ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/jsonMap ../core/accessorSupport/decorators/subclass".split(" "),
function(h,c,q,I,f,k,m,H,r){q=function(v){function w(Q){Q=v.call(this,Q)||this;Q.created=null;Q.rating=null;return Q}h._inheritsLoose(w,v);return w}(q);c.__decorate([I.property()],q.prototype,"created",void 0);c.__decorate([I.property()],q.prototype,"rating",void 0);return q=c.__decorate([r.subclass("esri.portal.PortalRating")],q)})},"esri/support/basemapDefinitions":function(){define(["exports","../chunks/_rollupPluginBabelHelpers","../assets","../intl/messages"],function(h,c,q,I){function f(){f=
c._asyncToGenerator(function*(k){if(k){var m=-1<k.indexOf("-vector")?k.slice(0,k.indexOf("-vector")):k,H=yield I.fetchMessageBundle("esri/t9n/basemaps");return H[k]||H[m]}});return f.apply(this,arguments)}h.esriBasemapDefinitions={streets:{id:"streets",get thumbnailUrl(){return q.getAssetUrl("esri/images/basemap/streets.jpg")},baseMapLayers:[{id:"streets-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Street Map",
showLegend:!1,visibility:!0,opacity:1}]},satellite:{id:"satellite",get thumbnailUrl(){return q.getAssetUrl("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",get thumbnailUrl(){return q.getAssetUrl("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",
url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Boundaries and Places",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",get thumbnailUrl(){return q.getAssetUrl("esri/images/basemap/terrain.jpg")},
baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},topo:{id:"topo",
get thumbnailUrl(){return q.getAssetUrl("esri/images/basemap/topo.jpg")},baseMapLayers:[{id:"topo-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Topo Map",showLegend:!1,visibility:!0,opacity:1}]},gray:{id:"gray",get thumbnailUrl(){return q.getAssetUrl("esri/images/basemap/gray.jpg")},baseMapLayers:[{id:"gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer",
layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"dark-gray":{id:"dark-gray",get thumbnailUrl(){return q.getAssetUrl("esri/images/basemap/dark-gray.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",
url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"dark-gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",get thumbnailUrl(){return q.getAssetUrl("esri/images/basemap/oceans.jpg")},
baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"national-geographic":{id:"national-geographic",
get thumbnailUrl(){return q.getAssetUrl("esri/images/basemap/national-geographic.jpg")},baseMapLayers:[{id:"national-geographic-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer",title:"NatGeo World Map",showLegend:!1,layerType:"ArcGISTiledMapServiceLayer",visibility:!0,opacity:1}]},osm:{id:"osm",get thumbnailUrl(){return q.getAssetUrl("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,
visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",get thumbnailUrl(){return q.getAssetUrl("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",
layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},"gray-vector":{id:"gray-vector",get thumbnailUrl(){return q.getAssetUrl("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",
layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},"streets-vector":{id:"streets-vector",get thumbnailUrl(){return q.getAssetUrl("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},"topo-vector":{id:"topo-vector",get thumbnailUrl(){return q.getAssetUrl("esri/images/basemap/topo-vector.jpg")},
baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},"streets-night-vector":{id:"streets-night-vector",
get thumbnailUrl(){return q.getAssetUrl("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",get thumbnailUrl(){return q.getAssetUrl("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",
url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",get thumbnailUrl(){return q.getAssetUrl("esri/images/basemap/streets-navigation.jpg")},
baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"arcgis-imagery":{get thumbnailUrl(){return q.getAssetUrl("esri/images/basemap/hybrid.jpg")},title:"Imagery Hybrid",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"},
{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-imagery-standard":{get thumbnailUrl(){return q.getAssetUrl("esri/images/basemap/satellite.jpg")},title:"Imagery",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"}]},"arcgis-imagery-labels":{title:"Hybrid [Reference]",
baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-light-gray":{get thumbnailUrl(){return q.getAssetUrl("esri/images/basemap/gray-vector.jpg")},title:"Light Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Base",title:"Light Gray Canvas Base"},{layerType:"VectorTileLayer",
styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Labels",title:"Light Gray Canvas Labels",isReference:!0}]},"arcgis-dark-gray":{get thumbnailUrl(){return q.getAssetUrl("esri/images/basemap/dark-gray.jpg")},title:"Dark Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Base",title:"Dark Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Labels",
title:"Dark Gray Canvas Labels",isReference:!0}]},"arcgis-navigation":{get thumbnailUrl(){return q.getAssetUrl("esri/images/basemap/streets-navigation.jpg")},title:"Navigation",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Navigation",title:"World Navigation Map"}]},"arcgis-navigation-night":{title:"Navigation (Dark Mode)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:NavigationNight",
title:"World Navigation Map (Dark Mode)"}]},"arcgis-streets":{get thumbnailUrl(){return q.getAssetUrl("esri/images/basemap/streets-vector.jpg")},title:"Streets",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Streets",title:"World Street Map"}]},"arcgis-streets-night":{get thumbnailUrl(){return q.getAssetUrl("esri/images/basemap/streets-night.jpg")},title:"Streets (Night)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsNight",
title:"World Street Map (Night)"}]},"arcgis-streets-relief":{get thumbnailUrl(){return q.getAssetUrl("esri/images/basemap/streets-relief.jpg")},title:"Streets (with Relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsRelief:Base",title:"World Street Map (with Relief)"}]},
"arcgis-topographic":{get thumbnailUrl(){return q.getAssetUrl("esri/images/basemap/topo.jpg")},title:"Topographic",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Topographic:Base",title:"World Topographic Map"}]},"arcgis-oceans":{get thumbnailUrl(){return q.getAssetUrl("esri/images/basemap/oceans.jpg")},
title:"Oceans",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Ocean Base",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Oceans:Labels",title:"World Ocean Reference",isReference:!0}]},"osm-standard":{title:"OpenStreetMap",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Standard",
title:"OpenStreetMap"}]},"osm-standard-relief":{title:"OpenStreetMap (with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StandardRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-streets":{title:"OpenStreetMap (Streets)",baseMapLayers:[{layerType:"VectorTileLayer",
styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Streets",title:"OpenStreetMap (Streets)"}]},"osm-streets-relief":{title:"OpenStreetMap (Streets with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StreetsRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},
"osm-light-gray":{title:"OpenStreetMap (Light Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Base",title:"OSM (Light Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Labels",title:"OSM (Light Gray Reference)",isReference:!0}]},"osm-dark-gray":{title:"OpenStreetMap (Dark Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",
styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Base",title:"OSM (Dark Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Labels",title:"OSM (Dark Gray Reference)",isReference:!0}]},"arcgis-terrain":{title:"Terrain with Labels",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},
{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Base",title:"World Terrain Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Detail",title:"World Terrain Reference",isReference:!0}]},"arcgis-community":{title:"Community",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Community",title:"Community"}]},
"arcgis-charted-territory":{title:"Charted Territory",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ChartedTerritory:Base",title:"Charted Territory"}]},"arcgis-colored-pencil":{title:"Colored Pencil",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ColoredPencil",
title:"Colored Pencil"}]},"arcgis-nova":{title:"Nova",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Nova",title:"Nova"}]},"arcgis-modern-antique":{title:"Modern Antique",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ModernAntique:Base",
title:"Modern Antique"}]},"arcgis-midcentury":{title:"Mid-Century",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Midcentury",title:"Mid-Century"}]},"arcgis-newspaper":{title:"Newspaper",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Newspaper",title:"Newspaper"}]},"arcgis-hillshade-light":{title:"Hillshade",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",
showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"}]},"arcgis-hillshade-dark":{title:"Hillshade (Dark)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade (Dark)",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade_Dark/MapServer"}]}};h.getBasemapTitle=function(k){return f.apply(this,arguments)};Object.defineProperty(h,"__esModule",{value:!0})})},
"esri/webdoc/support/writeUtils":function(){define("exports ../../core/Error ../../core/lang ../../core/maybe ../../core/object ../../core/accessorSupport/extensions/serializableProperty/writer".split(" "),function(h,c,q,I,f,k){function m(w){return!("feature"!==w.type||w.url||!w.source||"memory"!==w.source.type)}function H(w,Q){"maxScale"in w&&(Q.maxScale=k.numberToJSON(w.maxScale));"minScale"in w&&(Q.minScale=k.numberToJSON(w.minScale))}const r=new Set("bing-maps imagery imagery-tile map-image open-street-map tile unknown unsupported vector-tile web-tile".split(" ")),
v=new Set("csv feature geo-rss group imagery imagery-tile kml map-image map-notes ogc-feature tile unknown unsupported vector-tile web-tile wfs".split(" "));h.disableRestrictedWriting=function(w){r.add(w);v.add(w)};h.enableRestrictedWriting=function(w){r.delete(w);v.delete(w)};h.getLayerJSON=function(w,Q,p){if(!("write"in w&&w.write))return p&&p.messages&&p.messages.push(new c("layer:unsupported",`Layers (${w.title}, ${w.id}) of type '${w.declaredClass}' cannot be persisted`,{layer:w})),null;if(p.restrictedWebMapWriting){var C=
"basemap"===p.layerContainerType?r:"operational-layers"===p.layerContainerType?v:null;C=I.isSome(C)?C.has(w.type)&&!m(w):!0}else C=!0;if(C)return Q={},w.write(Q,p)?Q:null;if(I.isSome(Q)&&(p=Q=q.clone(Q),m(w)?(C=(C=f.getDeepValue("featureCollection.layers",p))&&C[0]&&C[0].layerDefinition)&&H(w,C):"stream"===w.type?(C=p.layerDefinition=p.layerDefinition||{},H(w,C)):"group"!==w.type&&H(w,p),"blendMode"in w&&(p.blendMode=w.blendMode,"normal"===p.blendMode&&delete p.blendMode),p.opacity=k.numberToJSON(w.opacity),
p.title=w.title||"Layer",p.visibility=w.visible,"legendEnabled"in w&&"wmts"!==w.type))if(m(w)){if(p=p.featureCollection)p.showLegend=w.legendEnabled}else p.showLegend=w.legendEnabled;return Q};Object.defineProperty(h,"__esModule",{value:!0})})},"esri/layers/support/TileInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/unitUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/Point ../../geometry/SpatialReference ../../geometry/support/aaBoundingRect ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ./LOD".split(" "),
function(h,c,q,I,f,k,m,H,r,v,w,Q,p,C,y,b,z,A){var N;q=new q.JSONMap({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});I=N=function(G){function R(D){D=G.call(this,D)||this;D.dpi=96;D.format=null;D.origin=null;D.minScale=0;D.maxScale=0;D.size=null;D.spatialReference=null;return D}h._inheritsLoose(R,G);R.create=function(D=
{}){const {resolutionFactor:P=1,scales:u,size:d=256,spatialReference:e=C.WebMercator,numLODs:B=24}=D;if(!b.isValid(e)){D=[];if(u)for(var L=0;L<u.length;L++){var F=u[L];D.push({level:L,scale:F,resolution:F})}else for(L=5E-4,F=B-1;0<=F;F--)D.unshift({level:F,scale:L,resolution:L}),L*=2;return new N({dpi:96,lods:D,origin:new p(0,0,e),size:[d,d],spatialReference:e})}L=b.getInfo(e);D=D.origin?new p({x:D.origin.x,y:D.origin.y,spatialReference:e}):L?new p({x:L.origin[0],y:L.origin[1],spatialReference:e}):
new p({x:0,y:0,spatialReference:e});L=1/(39.37*f.getMetersPerUnitForSR(e)*96);F=[];if(u)for(var t=0;t<u.length;t++){var g=u[t];F.push({level:t,scale:g,resolution:g*L})}else{var K=b.isGeographic(e)?512/d*5.916575275917094E8:256/d*5.91657527591555E8;t=Math.ceil(B/P);F.push({level:0,scale:K,resolution:K*L});for(g=1;g<t;g++)K/=2**P,F.push({level:g,scale:K,resolution:K*L})}return new N({dpi:96,lods:F,origin:D,size:[d,d],spatialReference:e})};var O=R.prototype;O.readOrigin=function(D,P){return p.fromJSON({spatialReference:P.spatialReference,
...D})};O.readSize=function(D,P){return[P.cols,P.rows]};O.writeSize=function(D,P){P.cols=D[0];P.rows=D[0]};O.zoomToScale=function(D){const P=this.scales;if(0>=D)return P[0];if(D>=P.length-1)return P[P.length-1];{const u=Math.floor(D);return P[u]/(P[u]/P[u+1])**(D-u)}};O.scaleToZoom=function(D){const P=this.scales,u=P.length-1;let d=0;for(;d<u;d++){const e=P[d],B=P[d+1];if(e<=D)break;if(B===D)return d+1;if(e>D&&B<D)return d+Math.log(e/D)/Math.log(e/B)}return d};O.snapScale=function(D,P=.95){D=this.scaleToZoom(D);
return D%Math.floor(D)>=P?this.zoomToScale(Math.ceil(D)):this.zoomToScale(Math.floor(D))};O.tileAt=function(D,P,u,d){var e=this.lodAt(D);if(!e)return null;let B;if("number"===typeof P)B=P,P=u;else{if(b.equals(P.spatialReference,this.spatialReference))B=P.x,P=P.y;else{d=z.project(P,this.spatialReference);if(!d)return null;B=d.x;P=d.y}d=u}u=e.resolution*this.size[0];e=e.resolution*this.size[1];d||(d={id:null,level:0,row:0,col:0,extent:y.create()});d.level=D;d.row=Math.floor((this.origin.y-P)/e+.001);
d.col=Math.floor((B-this.origin.x)/u+.001);this.updateTileInfo(d);return d};O.updateTileInfo=function(D,P=0){var u=this.lodAt(D.level);u||1!==P||(P=this.lods[this.lods.length-1],P.level<D.level&&(u=P));if(u){var d=D.level-u.level;P=u.resolution*this.size[0]/2**d;u=u.resolution*this.size[1]/2**d;D.id=`${D.level}/${D.row}/${D.col}`;D.extent||(D.extent=y.create());D.extent[0]=this.origin.x+D.col*P;D.extent[1]=this.origin.y-(D.row+1)*u;D.extent[2]=D.extent[0]+P;D.extent[3]=D.extent[1]+u}};O.upsampleTile=
function(D){const P=this._upsampleLevels[D.level];if(!P||-1===P.parentLevel)return!1;D.level=P.parentLevel;D.row=Math.floor(D.row/P.factor+.001);D.col=Math.floor(D.col/P.factor+.001);this.updateTileInfo(D);return!0};O.getTileBounds=function(D,P){var {resolution:u}=this.lodAt(P.level);const d=u*this.size[0];u*=this.size[1];D[0]=this.origin.x+P.col*d;D[1]=this.origin.y-(P.row+1)*u;D[2]=D[0]+d;D[3]=D[1]+u;return D};O.lodAt=function(D){return this._levelToLOD&&this._levelToLOD[D]||null};O.clone=function(){return N.fromJSON(this.write({}))};
O._initializeUpsampleLevels=function(){const D=this.lods;this._upsampleLevels=[];let P=null;for(let u=0;u<D.length;u++){const d=D[u];this._upsampleLevels[d.level]={parentLevel:P?P.level:-1,factor:P?P.resolution/d.resolution:0};P=d}};h._createClass(R,[{key:"isWrappable",get:function(){const {spatialReference:D,origin:P}=this;if(D&&P){const u=b.getInfo(D);return D.isWrappable&&Math.abs(u.origin[0]-P.x)<=u.dx}return!1}},{key:"lods",set:function(D){let P=0,u=0;const d=[];this._levelToLOD={};D&&(P=-Infinity,
u=Infinity,D.forEach(e=>{d.push(e.scale);P=e.scale>P?e.scale:P;u=e.scale<u?e.scale:u;this._levelToLOD[e.level]=e}));this._set("scales",d);this._set("minScale",P);this._set("maxScale",u);this._set("lods",D);this._initializeUpsampleLevels()}}]);return R}(I.JSONSupport);c.__decorate([k.property({type:Number,json:{write:!0}})],I.prototype,"compressionQuality",void 0);c.__decorate([k.property({type:Number,json:{write:!0}})],I.prototype,"dpi",void 0);c.__decorate([k.property({type:String,json:{read:q.read,
write:q.write,origins:{"web-scene":{read:!1,write:!1}}}})],I.prototype,"format",void 0);c.__decorate([k.property({readOnly:!0})],I.prototype,"isWrappable",null);c.__decorate([k.property({type:p,json:{write:!0}})],I.prototype,"origin",void 0);c.__decorate([v.reader("origin")],I.prototype,"readOrigin",null);c.__decorate([k.property({type:[A],value:null,json:{write:!0}})],I.prototype,"lods",null);c.__decorate([k.property({readOnly:!0})],I.prototype,"minScale",void 0);c.__decorate([k.property({readOnly:!0})],
I.prototype,"maxScale",void 0);c.__decorate([k.property({readOnly:!0})],I.prototype,"scales",void 0);c.__decorate([k.property({cast:G=>Array.isArray(G)?G:"number"===typeof G?[G,G]:[256,256]})],I.prototype,"size",void 0);c.__decorate([v.reader("size",["rows","cols"])],I.prototype,"readSize",null);c.__decorate([Q.writer("size",{cols:{type:H.Integer},rows:{type:H.Integer}})],I.prototype,"writeSize",null);c.__decorate([k.property({type:C,json:{write:!0}})],I.prototype,"spatialReference",void 0);return I=
N=c.__decorate([w.subclass("esri.layers.support.TileInfo")],I)})},"esri/layers/support/LOD":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass".split(" "),function(h,c,q,I,f,k,m,H,r){var v;q=v=function(w){function Q(p){p=w.call(this,p)||this;p.level=0;p.levelValue=
null;p.resolution=0;p.scale=0;return p}h._inheritsLoose(Q,w);Q.prototype.clone=function(){return new v({level:this.level,levelValue:this.levelValue,resolution:this.resolution,scale:this.scale})};return Q}(q.JSONSupport);c.__decorate([I.property({type:k.Integer,json:{write:!0}})],q.prototype,"level",void 0);c.__decorate([I.property({type:String,json:{write:!0}})],q.prototype,"levelValue",void 0);c.__decorate([I.property({type:Number,json:{write:!0}})],q.prototype,"resolution",void 0);c.__decorate([I.property({type:Number,
json:{write:!0}})],q.prototype,"scale",void 0);return q=v=c.__decorate([r.subclass("esri.layers.support.LOD")],q)})},"esri/layers/support/TimeInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../TimeExtent ../../TimeInterval ../../core/JSONSupport ../../core/lang ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/has ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ./TimeReference ../../portal/timeUnitKebabDictionary".split(" "),
function(h,c,q,I,f,k,m,H,r,v,w,Q,p,C,y,b,z){var A;f=A=function(N){function G(O){O=N.call(this,O)||this;O.cumulative=!1;O.endField=null;O.fullTimeExtent=null;O.hasLiveData=!1;O.interval=null;O.startField=null;O.timeReference=null;O.trackIdField=null;O.useTime=!0;return O}h._inheritsLoose(G,N);var R=G.prototype;R.readFullTimeExtent=function(O,D){return D.timeExtent&&Array.isArray(D.timeExtent)&&2===D.timeExtent.length?new q({start:new Date(D.timeExtent[0]),end:new Date(D.timeExtent[1])}):null};R.writeFullTimeExtent=
function(O,D){O&&m.isSome(O.start)&&m.isSome(O.end)?D.timeExtent=[O.start.getTime(),O.end.getTime()]:D.timeExtent=null};R.readInterval=function(O,D){return D.timeInterval&&D.timeIntervalUnits?new I({value:D.timeInterval,unit:z.timeUnitKebabDictionary.fromJSON(D.timeIntervalUnits)}):D.defaultTimeInterval&&D.defaultTimeIntervalUnits?new I({value:D.defaultTimeInterval,unit:z.timeUnitKebabDictionary.fromJSON(D.defaultTimeIntervalUnits)}):null};R.writeInterval=function(O,D){O?(O=O.toJSON(),D.timeInterval=
O.value,D.timeIntervalUnits=O.unit):(D.timeInterval=null,D.timeIntervalUnits=null)};R.clone=function(){const {cumulative:O,endField:D,hasLiveData:P,interval:u,startField:d,timeReference:e,fullTimeExtent:B,trackIdField:L,useTime:F}=this;return new A({cumulative:O,endField:D,hasLiveData:P,interval:u,startField:d,timeReference:k.clone(e),fullTimeExtent:k.clone(B),trackIdField:L,useTime:F})};return G}(f.JSONSupport);c.__decorate([H.property({type:Boolean,json:{read:{source:"exportOptions.timeDataCumulative"},
write:{target:"exportOptions.timeDataCumulative"}}})],f.prototype,"cumulative",void 0);c.__decorate([H.property({type:String,json:{read:{source:"endTimeField"},write:{target:"endTimeField",allowNull:!0}}})],f.prototype,"endField",void 0);c.__decorate([H.property({type:q,json:{write:{enabled:!0,allowNull:!0}}})],f.prototype,"fullTimeExtent",void 0);c.__decorate([p.reader("fullTimeExtent",["timeExtent"])],f.prototype,"readFullTimeExtent",null);c.__decorate([y.writer("fullTimeExtent")],f.prototype,"writeFullTimeExtent",
null);c.__decorate([H.property({type:Boolean,json:{write:!0}})],f.prototype,"hasLiveData",void 0);c.__decorate([H.property({type:I,json:{write:{enabled:!0,allowNull:!0}}})],f.prototype,"interval",void 0);c.__decorate([p.reader("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],f.prototype,"readInterval",null);c.__decorate([y.writer("interval")],f.prototype,"writeInterval",null);c.__decorate([H.property({type:String,json:{read:{source:"startTimeField"},
write:{target:"startTimeField",allowNull:!0}}})],f.prototype,"startField",void 0);c.__decorate([H.property({type:b,json:{write:{enabled:!0,allowNull:!0}}})],f.prototype,"timeReference",void 0);c.__decorate([H.property({type:String,json:{write:{enabled:!0,allowNull:!0}}})],f.prototype,"trackIdField",void 0);c.__decorate([H.property({type:Boolean,json:{read:{source:"exportOptions.useTime"},write:{target:"exportOptions.useTime"}}})],f.prototype,"useTime",void 0);return f=A=c.__decorate([C.subclass("esri.layers.support.TimeInfo")],
f)})},"esri/TimeExtent":function(){define("./chunks/_rollupPluginBabelHelpers ./chunks/tslib.es6 ./core/JSONSupport ./core/maybe ./core/timeUtils ./core/accessorSupport/decorators/property ./core/has ./core/accessorSupport/ensureType ./core/Logger ./core/jsonMap ./core/accessorSupport/decorators/reader ./core/accessorSupport/decorators/subclass ./core/accessorSupport/decorators/writer".split(" "),function(h,c,q,I,f,k,m,H,r,v,w,Q,p){var C;q=C=function(z){function A(G){G=z.call(this,G)||this;G.end=
null;G.start=null;return G}h._inheritsLoose(A,z);var N=A.prototype;N.readEnd=function(G,R){return null!=R.end?new Date(R.end):null};N.writeEnd=function(G,R){R.end=G?G.getTime():null};N.readStart=function(G,R){return null!=R.start?new Date(R.start):null};N.writeStart=function(G,R){R.start=G?G.getTime():null};N.clone=function(){return new C({end:this.end,start:this.start})};N.expandTo=function(G){if(this.isEmpty||this.isAllTime)return this.clone();const R=I.andThen(this.start,D=>f.truncateDate(D,G)),
O=I.andThen(this.end,D=>f.offsetDate(f.truncateDate(D,G),1,G));return new C({start:R,end:O})};N.intersection=function(G){if(!G)return this.clone();if(this.isEmpty||G.isEmpty)return C.empty;if(this.isAllTime)return G.clone();if(G.isAllTime)return this.clone();var R=I.mapOr(this.start,-Infinity,d=>d.getTime());const O=I.mapOr(this.end,Infinity,d=>d.getTime()),D=I.mapOr(G.start,-Infinity,d=>d.getTime());G=I.mapOr(G.end,Infinity,d=>d.getTime());let P,u;D>=R&&D<=O?P=D:R>=D&&R<=G&&(P=R);O>=D&&O<=G?u=O:
G>=R&&G<=O&&(u=G);return isNaN(P)||isNaN(u)?C.empty:(R=new C,R.start=-Infinity===P?null:new Date(P),R.end=Infinity===u?null:new Date(u),R)};N.offset=function(G,R){if(this.isEmpty||this.isAllTime)return this.clone();const O=new C,{start:D,end:P}=this;I.isSome(D)&&(O.start=f.offsetDate(D,G,R));I.isSome(P)&&(O.end=f.offsetDate(P,G,R));return O};N.equals=function(G){if(!G)return!1;const R=I.isSome(this.start)?this.start.getTime():this.start,O=I.isSome(this.end)?this.end.getTime():this.end,D=I.isSome(G.start)?
G.start.getTime():G.start;G=I.isSome(G.end)?G.end.getTime():G.end;return R===D&&O===G};N.union=function(G){if(!G||G.isEmpty)return this.clone();if(this.isEmpty)return G.clone();if(this.isAllTime||G.isAllTime)return y.clone();const R=I.isSome(this.start)&&I.isSome(G.start)?new Date(Math.min(this.start.getTime(),G.start.getTime())):null;G=I.isSome(this.end)&&I.isSome(G.end)?new Date(Math.max(this.end.getTime(),G.end.getTime())):null;return new C({start:R,end:G})};h._createClass(A,[{key:"isAllTime",
get:function(){return this.equals(C.allTime)}},{key:"isEmpty",get:function(){return this.equals(C.empty)}}],[{key:"allTime",get:function(){return y}},{key:"empty",get:function(){return b}}]);return A}(q.JSONSupport);c.__decorate([k.property({type:Date,json:{write:{allowNull:!0}}})],q.prototype,"end",void 0);c.__decorate([w.reader("end")],q.prototype,"readEnd",null);c.__decorate([p.writer("end")],q.prototype,"writeEnd",null);c.__decorate([k.property({readOnly:!0,json:{read:!1}})],q.prototype,"isAllTime",
null);c.__decorate([k.property({readOnly:!0,json:{read:!1}})],q.prototype,"isEmpty",null);c.__decorate([k.property({type:Date,json:{write:{allowNull:!0}}})],q.prototype,"start",void 0);c.__decorate([w.reader("start")],q.prototype,"readStart",null);c.__decorate([p.writer("start")],q.prototype,"writeStart",null);q=C=c.__decorate([Q.subclass("esri.TimeExtent")],q);const y=new q,b=new q({start:void 0,end:void 0});return q})},"esri/core/timeUtils":function(){define(["exports","./has"],function(h,c){function q(k,
m,H){return 0===k?0:k*I[m]/I[H]}const I={milliseconds:1,seconds:1E3,minutes:6E4,hours:36E5,days:864E5,weeks:6048E5,months:26784E5,years:31536E6,decades:31536E7,centuries:31536E8},f={milliseconds:{getter:"getMilliseconds",setter:"setMilliseconds",multiplier:1},seconds:{getter:"getSeconds",setter:"setSeconds",multiplier:1},minutes:{getter:"getMinutes",setter:"setMinutes",multiplier:1},hours:{getter:"getHours",setter:"setHours",multiplier:1},days:{getter:"getDate",setter:"setDate",multiplier:1},weeks:{getter:"getDate",
setter:"setDate",multiplier:7},months:{getter:"getMonth",setter:"setMonth",multiplier:1},years:{getter:"getFullYear",setter:"setFullYear",multiplier:1},decades:{getter:"getFullYear",setter:"setFullYear",multiplier:10},centuries:{getter:"getFullYear",setter:"setFullYear",multiplier:100}};h.convertTime=q;h.makeUTCTime=function(k,m,H="milliseconds"){m=new Date(q(m,H,"milliseconds"));m.setUTCFullYear(k.getUTCFullYear(),k.getUTCMonth(),k.getUTCDate());return m};h.offsetDate=function(k,m,H){k=new Date(k.getTime());
if(m&&H){const {getter:r,setter:v,multiplier:w}=f[H];k[v](k[r]()+m*w)}return k};h.offsetDateUTC=function(k,m,H="milliseconds"){k=k.getTime();m=q(m,H,"milliseconds");return new Date(k+m)};h.resetUTCDate=function(k,m){k=new Date(k.getTime());k.setUTCFullYear(m.getFullYear(),m.getMonth(),m.getDate());return k};h.timeSinceUTCMidnight=function(k,m="milliseconds"){const H=q(k.getUTCHours(),"hours","milliseconds"),r=q(k.getUTCMinutes(),"minutes","milliseconds"),v=q(k.getUTCSeconds(),"seconds","milliseconds");
k=k.getUTCMilliseconds();return q(H+r+v+k,"milliseconds",m)};h.truncateDate=function(k,m){switch(m){case "milliseconds":return new Date(k.getTime());case "seconds":return new Date(k.getFullYear(),k.getMonth(),k.getDate(),k.getHours(),k.getMinutes(),k.getSeconds());case "minutes":return new Date(k.getFullYear(),k.getMonth(),k.getDate(),k.getHours(),k.getMinutes());case "hours":return new Date(k.getFullYear(),k.getMonth(),k.getDate(),k.getHours());case "days":return new Date(k.getFullYear(),k.getMonth(),
k.getDate());case "weeks":return new Date(k.getFullYear(),k.getMonth(),k.getDate()-k.getDay());case "months":return new Date(k.getFullYear(),k.getMonth(),1);case "years":return new Date(k.getFullYear(),0,1);case "decades":return new Date(k.getFullYear()-k.getFullYear()%10,0,1);case "centuries":return new Date(k.getFullYear()-k.getFullYear()%100,0,1);default:return new Date}};h.truncateLocalTime=function(k){const m=new Date(0);m.setHours(0);m.setMinutes(0);m.setSeconds(0);m.setMilliseconds(0);m.setFullYear(k.getUTCFullYear(),
k.getUTCMonth(),k.getUTCDate());return m};Object.defineProperty(h,"__esModule",{value:!0})})},"esri/TimeInterval":function(){define("./chunks/_rollupPluginBabelHelpers ./chunks/tslib.es6 ./core/JSONSupport ./core/timeUtils ./core/accessorSupport/decorators/property ./core/has ./core/accessorSupport/ensureType ./core/Logger ./core/jsonMap ./core/accessorSupport/decorators/subclass ./portal/timeUnitKebabDictionary".split(" "),function(h,c,q,I,f,k,m,H,r,v,w){var Q;q=Q=function(p){function C(b){b=p.call(this,
b)||this;b.value=0;b.unit="milliseconds";return b}h._inheritsLoose(C,p);var y=C.prototype;y.toMilliseconds=function(){return I.convertTime(this.value,this.unit,"milliseconds")};y.clone=function(){return new Q({value:this.value,unit:this.unit})};return C}(q.JSONSupport);c.__decorate([f.property({type:Number,json:{write:!0},nonNullable:!0})],q.prototype,"value",void 0);c.__decorate([f.property({type:w.timeUnitKebabDictionary.apiValues,json:{type:w.timeUnitKebabDictionary.jsonValues,read:w.timeUnitKebabDictionary.read,
write:w.timeUnitKebabDictionary.write},nonNullable:!0})],q.prototype,"unit",void 0);return q=Q=c.__decorate([v.subclass("esri.TimeInterval")],q)})},"esri/portal/timeUnitKebabDictionary":function(){define(["exports","../core/jsonMap"],function(h,c){c=c.strict()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",
esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0});h.timeUnitKebabDictionary=c;Object.defineProperty(h,"__esModule",{value:!0})})},"esri/layers/support/TimeReference":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass".split(" "),
function(h,c,q,I,f,k,m,H,r,v){var w;q=w=function(Q){function p(y){y=Q.call(this,y)||this;y.respectsDaylightSaving=!1;y.timezone=null;return y}h._inheritsLoose(p,Q);var C=p.prototype;C.readRespectsDaylightSaving=function(y,b){return void 0!==b.respectsDaylightSaving?b.respectsDaylightSaving:void 0!==b.respectDaylightSaving?b.respectDaylightSaving:!1};C.clone=function(){const {respectsDaylightSaving:y,timezone:b}=this;return new w({respectsDaylightSaving:y,timezone:b})};return p}(q.JSONSupport);c.__decorate([I.property({type:Boolean,
json:{write:!0}})],q.prototype,"respectsDaylightSaving",void 0);c.__decorate([r.reader("respectsDaylightSaving",["respectsDaylightSaving","respectDaylightSaving"])],q.prototype,"readRespectsDaylightSaving",null);c.__decorate([I.property({type:String,json:{read:{source:"timeZone"},write:{target:"timeZone"}}})],q.prototype,"timezone",void 0);return q=w=c.__decorate([v.subclass("esri.layers.support.TimeReference")],q)})},"esri/rest/support/Query":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../TimeExtent ../../core/jsonMap ../../core/JSONSupport ../../core/lang ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../core/accessorSupport/ensureType ../../geometry/support/jsonUtils ../../layers/support/source/DataLayerSource ./QuantizationParameters ./StatisticDefinition ../../geometry/SpatialReference ../../geometry/Point".split(" "),
function(h,c,q,I,f,k,m,H,r,v,w,Q,p,C,y,b,z,A,N,G,R,O){var D;w=new f.JSONMap({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"});f=new f.JSONMap({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",
esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});k=D=function(P){function u(e){e=P.call(this,e)||this;e.aggregateIds=null;e.cacheHint=void 0;e.datumTransformation=null;e.distance=void 0;e.dynamicDataSource=void 0;e.formatOf3DObjects=null;e.gdbVersion=null;e.geometry=null;e.geometryPrecision=void 0;e.groupByFieldsForStatistics=null;e.having=null;e.historicMoment=null;e.maxAllowableOffset=void 0;e.maxRecordCountFactor=
1;e.multipatchOption=null;e.num=void 0;e.objectIds=null;e.orderByFields=null;e.outFields=null;e.outSpatialReference=null;e.outStatistics=null;e.parameterValues=null;e.pixelSize=null;e.quantizationParameters=null;e.rangeValues=null;e.relationParameter=null;e.resultType=null;e.returnCentroid=!1;e.returnDistinctValues=!1;e.returnExceededLimitFeatures=!0;e.returnGeometry=!1;e.returnQueryGeometry=!1;e.returnM=void 0;e.returnZ=void 0;e.sourceSpatialReference=null;e.spatialRelationship="intersects";e.start=
void 0;e.sqlFormat=null;e.text=null;e.timeExtent=null;e.units=null;e.where=null;return e}h._inheritsLoose(u,P);u.from=function(e){return b.ensureClass(D,e)};var d=u.prototype;d.castDatumTransformation=function(e){return"number"===typeof e||"object"===typeof e?e:null};d.writeHistoricMoment=function(e,B){B.historicMoment=e&&e.getTime()};d.writeParameterValues=function(e,B){if(e){const L={};for(const F in e){const t=e[F];Array.isArray(t)?L[F]=t.map(g=>g instanceof Date?g.getTime():g):L[F]=t instanceof
Date?t.getTime():t}B.parameterValues=L}};d.writeStart=function(e,B){B.resultOffset=this.start;B.resultRecordCount=this.num||10;B.where="1\x3d1"};d.writeWhere=function(e,B){B.where=e||"1\x3d1"};d.clone=function(){return new D(m.clone({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,datumTransformation:this.datumTransformation,distance:this.distance,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,
having:this.having,historicMoment:H.isSome(this.historicMoment)?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,
rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,
sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,units:this.units,where:this.where}))};return u}(k.JSONSupport);k.MAX_MAX_RECORD_COUNT_FACTOR=5;c.__decorate([r.property({json:{write:!0}})],k.prototype,"aggregateIds",void 0);c.__decorate([r.property({type:Boolean,json:{write:!0}})],k.prototype,"cacheHint",void 0);c.__decorate([r.property({json:{write:!0}})],k.prototype,"datumTransformation",void 0);c.__decorate([v.cast("datumTransformation")],k.prototype,"castDatumTransformation",
null);c.__decorate([r.property({type:Number,json:{write:{overridePolicy(P){return{enabled:0<P}}}}})],k.prototype,"distance",void 0);c.__decorate([r.property({type:A.DataLayerSource,json:{write:!0}})],k.prototype,"dynamicDataSource",void 0);c.__decorate([r.property({type:String,json:{write:!0}})],k.prototype,"formatOf3DObjects",void 0);c.__decorate([r.property({type:String,json:{write:!0}})],k.prototype,"gdbVersion",void 0);c.__decorate([r.property({types:q.geometryTypes,json:{read:z.fromJSON,write:!0}})],
k.prototype,"geometry",void 0);c.__decorate([r.property({type:Number,json:{write:!0}})],k.prototype,"geometryPrecision",void 0);c.__decorate([r.property({type:[String],json:{write:!0}})],k.prototype,"groupByFieldsForStatistics",void 0);c.__decorate([r.property({type:String,json:{write:!0}})],k.prototype,"having",void 0);c.__decorate([r.property({type:Date})],k.prototype,"historicMoment",void 0);c.__decorate([y.writer("historicMoment")],k.prototype,"writeHistoricMoment",null);c.__decorate([r.property({type:Number,
json:{write:!0}})],k.prototype,"maxAllowableOffset",void 0);c.__decorate([r.property({type:Number,cast(P){return 1>P?1:P>D.MAX_MAX_RECORD_COUNT_FACTOR?D.MAX_MAX_RECORD_COUNT_FACTOR:P},json:{write:{overridePolicy(P){return{enabled:1<P}}}}})],k.prototype,"maxRecordCountFactor",void 0);c.__decorate([r.property({type:["xyFootprint"],json:{write:!0}})],k.prototype,"multipatchOption",void 0);c.__decorate([r.property({type:Number,json:{read:{source:"resultRecordCount"}}})],k.prototype,"num",void 0);c.__decorate([r.property({json:{write:!0}})],
k.prototype,"objectIds",void 0);c.__decorate([r.property({type:[String],json:{write:!0}})],k.prototype,"orderByFields",void 0);c.__decorate([r.property({type:[String],json:{write:!0}})],k.prototype,"outFields",void 0);c.__decorate([r.property({type:R,json:{name:"outSR",write:!0}})],k.prototype,"outSpatialReference",void 0);c.__decorate([r.property({type:[G],json:{write:{enabled:!0,overridePolicy(){return{enabled:H.isSome(this.outStatistics)&&0<this.outStatistics.length}}}}})],k.prototype,"outStatistics",
void 0);c.__decorate([r.property({json:{write:!0}})],k.prototype,"parameterValues",void 0);c.__decorate([y.writer("parameterValues")],k.prototype,"writeParameterValues",null);c.__decorate([r.property({type:O,json:{write:!0}})],k.prototype,"pixelSize",void 0);c.__decorate([r.property({type:N,json:{write:!0}})],k.prototype,"quantizationParameters",void 0);c.__decorate([r.property({type:[Object],json:{write:!0}})],k.prototype,"rangeValues",void 0);c.__decorate([r.property({type:String,json:{read:{source:"relationParam"},
write:{target:"relationParam",overridePolicy(){return{enabled:"relation"===this.spatialRelationship}}}}})],k.prototype,"relationParameter",void 0);c.__decorate([r.property({type:String,json:{write:!0}})],k.prototype,"resultType",void 0);c.__decorate([r.property({type:Boolean,json:{default:!1,write:!0}})],k.prototype,"returnCentroid",void 0);c.__decorate([r.property({type:Boolean,json:{default:!1,write:!0}})],k.prototype,"returnDistinctValues",void 0);c.__decorate([r.property({type:Boolean,json:{default:!0,
write:!0}})],k.prototype,"returnExceededLimitFeatures",void 0);c.__decorate([r.property({type:Boolean,json:{write:!0}})],k.prototype,"returnGeometry",void 0);c.__decorate([r.property({type:Boolean,json:{default:!1,write:!0}})],k.prototype,"returnQueryGeometry",void 0);c.__decorate([r.property({type:Boolean,json:{default:!1,write:!0}})],k.prototype,"returnM",void 0);c.__decorate([r.property({type:Boolean,json:{write:{overridePolicy(P){return{enabled:P}}}}})],k.prototype,"returnZ",void 0);c.__decorate([r.property({type:R,
json:{write:!0}})],k.prototype,"sourceSpatialReference",void 0);c.__decorate([p.enumeration(w,{ignoreUnknown:!1,name:"spatialRel"})],k.prototype,"spatialRelationship",void 0);c.__decorate([r.property({type:Number,json:{read:{source:"resultOffset"}}})],k.prototype,"start",void 0);c.__decorate([y.writer("start"),y.writer("num")],k.prototype,"writeStart",null);c.__decorate([r.property({type:String,json:{write:!0}})],k.prototype,"sqlFormat",void 0);c.__decorate([r.property({type:String,json:{write:!0}})],
k.prototype,"text",void 0);c.__decorate([r.property({type:I,json:{write:!0}})],k.prototype,"timeExtent",void 0);c.__decorate([p.enumeration(f,{ignoreUnknown:!1}),r.property({json:{write:{overridePolicy(P){return{enabled:P&&0<this.distance}}}}})],k.prototype,"units",void 0);c.__decorate([r.property({type:String,json:{write:{overridePolicy(P){return{enabled:null!=P||0<this.start}}}}})],k.prototype,"where",void 0);c.__decorate([y.writer("where")],k.prototype,"writeWhere",null);return k=D=c.__decorate([C.subclass("esri.rest.support.Query")],
k)})},"esri/layers/support/source/DataLayerSource":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/jsonMap ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/decorators/cast ../../../core/Logger ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/reader ../../../core/accessorSupport/decorators/subclass ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/extensions/serializableProperty/reader ../Field ./MapLayerSource ./QueryTableDataSource ./RasterDataSource ./TableDataSource".split(" "),
function(h,c,q,I,f,k,m,H,r,v,w,Q,p,C,y,b,z,A,N){function G(){P||(P=C.createTypeReader({types:R()}));return P}function R(){u||(u={key:"type",base:null,typeMap:{"data-layer":h.DataLayerSource,"map-layer":b.MapLayerSource}});return u}var O,D;I=I.strict()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});h.JoinTableDataSource=O=function(d){function e(L){L=d.call(this,L)||this;L.type="join-table";return L}c._inheritsLoose(e,d);var B=e.prototype;B.readLeftTableSource=function(L,
F,t){return G()(L,F,t)};B.castLeftTableSource=function(L){return p.ensureOneOfType(R(),L)};B.readRightTableSource=function(L,F,t){return G()(L,F,t)};B.castRightTableSource=function(L){return p.ensureOneOfType(R(),L)};B.clone=function(){var L,F;const {leftTableKey:t,rightTableKey:g,leftTableSource:K,rightTableSource:T,joinType:Z}=this,ba={leftTableKey:t,rightTableKey:g,leftTableSource:null!=(L=null==K?void 0:K.clone())?L:void 0,rightTableSource:null!=(F=null==T?void 0:T.clone())?F:void 0,joinType:Z};
return new O(ba)};return e}(f.JSONSupport);q.__decorate([v.enumeration({joinTable:"join-table"})],h.JoinTableDataSource.prototype,"type",void 0);q.__decorate([k.property({type:String,json:{write:!0}})],h.JoinTableDataSource.prototype,"leftTableKey",void 0);q.__decorate([k.property({type:String,json:{write:!0}})],h.JoinTableDataSource.prototype,"rightTableKey",void 0);q.__decorate([k.property({json:{write:!0}})],h.JoinTableDataSource.prototype,"leftTableSource",void 0);q.__decorate([w.reader("leftTableSource")],
h.JoinTableDataSource.prototype,"readLeftTableSource",null);q.__decorate([H.cast("leftTableSource")],h.JoinTableDataSource.prototype,"castLeftTableSource",null);q.__decorate([k.property({json:{write:!0}})],h.JoinTableDataSource.prototype,"rightTableSource",void 0);q.__decorate([w.reader("rightTableSource")],h.JoinTableDataSource.prototype,"readRightTableSource",null);q.__decorate([H.cast("rightTableSource")],h.JoinTableDataSource.prototype,"castRightTableSource",null);q.__decorate([v.enumeration(I)],
h.JoinTableDataSource.prototype,"joinType",void 0);h.JoinTableDataSource=O=q.__decorate([Q.subclass("esri.layers.support.source.JoinTableDataSource")],h.JoinTableDataSource);let P=null,u=null;H={key:"type",base:null,typeMap:{"join-table":h.JoinTableDataSource,"query-table":z.QueryTableDataSource,raster:A.RasterDataSource,table:N.TableDataSource}};h.DataLayerSource=D=function(d){function e(B){B=d.call(this,B)||this;B.type="data-layer";return B}c._inheritsLoose(e,d);e.prototype.clone=function(){const {fields:B,
dataSource:L}=this;return new D({fields:B,dataSource:L})};return e}(f.JSONSupport);q.__decorate([v.enumeration({dataLayer:"data-layer"})],h.DataLayerSource.prototype,"type",void 0);q.__decorate([k.property({type:[y],json:{write:!0}})],h.DataLayerSource.prototype,"fields",void 0);q.__decorate([k.property({types:H,json:{write:!0}})],h.DataLayerSource.prototype,"dataSource",void 0);h.DataLayerSource=D=q.__decorate([Q.subclass("esri.layers.support.source.DataLayerSource")],h.DataLayerSource);h.DataLayerSource.from=
p.ensureType(h.DataLayerSource);Object.defineProperty(h,"__esModule",{value:!0})})},"esri/layers/support/Field":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ./domains ./fieldType".split(" "),
function(h,c,q,I,f,k,m,H,r,v,w,Q,p){var C;const y=new q.JSONMap({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});q=C=function(b){function z(N){N=b.call(this,N)||this;
N.alias=null;N.defaultValue=void 0;N.description=null;N.domain=null;N.editable=!0;N.length=-1;N.name=null;N.nullable=!0;N.type=null;N.valueType=null;return N}h._inheritsLoose(z,b);var A=z.prototype;A.readDescription=function(N,{description:G}){let R;try{R=JSON.parse(G)}catch(O){}return R?R.value:null};A.readValueType=function(N,{description:G}){let R;try{R=JSON.parse(G)}catch(O){}return R?y.fromJSON(R.fieldValueType):null};A.clone=function(){return new C({alias:this.alias,defaultValue:this.defaultValue,
description:this.description,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType})};return z}(I.JSONSupport);c.__decorate([f.property({type:String,json:{write:!0}})],q.prototype,"alias",void 0);c.__decorate([f.property({type:[String,Number],json:{write:{allowNull:!0}}})],q.prototype,"defaultValue",void 0);c.__decorate([f.property()],q.prototype,"description",void 0);c.__decorate([v.reader("description")],
q.prototype,"readDescription",null);c.__decorate([f.property({types:Q.types,json:{read:{reader:Q.fromJSON},write:!0}})],q.prototype,"domain",void 0);c.__decorate([f.property({type:Boolean,json:{write:!0}})],q.prototype,"editable",void 0);c.__decorate([f.property({type:m.Integer,json:{write:!0}})],q.prototype,"length",void 0);c.__decorate([f.property({type:String,json:{write:!0}})],q.prototype,"name",void 0);c.__decorate([f.property({type:Boolean,json:{write:!0}})],q.prototype,"nullable",void 0);c.__decorate([r.enumeration(p.kebabDict)],
q.prototype,"type",void 0);c.__decorate([f.property()],q.prototype,"valueType",void 0);c.__decorate([v.reader("valueType",["description"])],q.prototype,"readValueType",null);return q=C=c.__decorate([w.subclass("esri.layers.support.Field")],q)})},"esri/layers/support/fieldType":function(){define(["exports","../../core/jsonMap"],function(h,c){c=new c.JSONMap({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",
esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"});h.kebabDict=c;Object.defineProperty(h,"__esModule",{value:!0})})},"esri/layers/support/source/MapLayerSource":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/Logger ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass".split(" "),
function(h,c,q,I,f,k,m,H,r,v){var w;h.MapLayerSource=w=function(Q){function p(C){C=Q.call(this,C)||this;C.type="map-layer";return C}c._inheritsLoose(p,Q);p.prototype.clone=function(){const {mapLayerId:C,gdbVersion:y}=this;return new w({mapLayerId:C,gdbVersion:y})};return p}(I.JSONSupport);q.__decorate([r.enumeration({mapLayer:"map-layer"})],h.MapLayerSource.prototype,"type",void 0);q.__decorate([f.property({type:m.Integer,json:{write:!0}})],h.MapLayerSource.prototype,"mapLayerId",void 0);q.__decorate([f.property({type:String,
json:{write:!0}})],h.MapLayerSource.prototype,"gdbVersion",void 0);h.MapLayerSource=w=q.__decorate([v.subclass("esri.layers.support.source.MapLayerSource")],h.MapLayerSource);Object.defineProperty(h,"__esModule",{value:!0})})},"esri/layers/support/source/QueryTableDataSource":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../geometry ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/Logger ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass ../../../geometry/SpatialReference ../../../geometry/support/typeUtils".split(" "),
function(h,c,q,I,f,k,m,H,r,v,w,Q,p){var C;h.QueryTableDataSource=C=function(y){function b(z){z=y.call(this,z)||this;z.type="query-table";return z}c._inheritsLoose(b,y);b.prototype.clone=function(){var z;const {workspaceId:A,query:N,oidFields:G,spatialReference:R,geometryType:O}=this,D={workspaceId:A,query:N,oidFields:G,spatialReference:null!=(z=null==R?void 0:R.clone())?z:void 0,geometryType:O};return new C(D)};return b}(f.JSONSupport);q.__decorate([v.enumeration({queryTable:"query-table"})],h.QueryTableDataSource.prototype,
"type",void 0);q.__decorate([k.property({type:String,json:{write:!0}})],h.QueryTableDataSource.prototype,"workspaceId",void 0);q.__decorate([k.property({type:String,json:{write:!0}})],h.QueryTableDataSource.prototype,"query",void 0);q.__decorate([k.property({type:String,json:{write:!0}})],h.QueryTableDataSource.prototype,"oidFields",void 0);q.__decorate([k.property({type:Q,json:{write:!0}})],h.QueryTableDataSource.prototype,"spatialReference",void 0);q.__decorate([v.enumeration(p.featureGeometryTypeKebabDictionary)],
h.QueryTableDataSource.prototype,"geometryType",void 0);h.QueryTableDataSource=C=q.__decorate([w.subclass("esri.layers.support.source.QueryTableDataSource")],h.QueryTableDataSource);Object.defineProperty(h,"__esModule",{value:!0})})},"esri/layers/support/source/RasterDataSource":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/Logger ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass".split(" "),
function(h,c,q,I,f,k,m,H,r,v){var w;h.RasterDataSource=w=function(Q){function p(C){C=Q.call(this,C)||this;C.type="raster";return C}c._inheritsLoose(p,Q);p.prototype.clone=function(){const {workspaceId:C,dataSourceName:y}=this;return new w({workspaceId:C,dataSourceName:y})};return p}(I.JSONSupport);q.__decorate([r.enumeration({raster:"raster"})],h.RasterDataSource.prototype,"type",void 0);q.__decorate([f.property({type:String,json:{write:!0}})],h.RasterDataSource.prototype,"dataSourceName",void 0);
q.__decorate([f.property({type:String,json:{write:!0}})],h.RasterDataSource.prototype,"workspaceId",void 0);h.RasterDataSource=w=q.__decorate([v.subclass("esri.layers.support.source.RasterDataSource")],h.RasterDataSource);Object.defineProperty(h,"__esModule",{value:!0})})},"esri/layers/support/source/TableDataSource":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/Logger ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass".split(" "),
function(h,c,q,I,f,k,m,H,r,v){var w;h.TableDataSource=w=function(Q){function p(C){C=Q.call(this,C)||this;C.type="table";return C}c._inheritsLoose(p,Q);p.prototype.clone=function(){const {workspaceId:C,gdbVersion:y,dataSourceName:b}=this;return new w({workspaceId:C,gdbVersion:y,dataSourceName:b})};return p}(I.JSONSupport);q.__decorate([r.enumeration({table:"table"})],h.TableDataSource.prototype,"type",void 0);q.__decorate([f.property({type:String,json:{write:!0}})],h.TableDataSource.prototype,"workspaceId",
void 0);q.__decorate([f.property({type:String,json:{write:!0}})],h.TableDataSource.prototype,"gdbVersion",void 0);q.__decorate([f.property({type:String,json:{write:!0}})],h.TableDataSource.prototype,"dataSourceName",void 0);h.TableDataSource=w=q.__decorate([v.subclass("esri.layers.support.source.TableDataSource")],h.TableDataSource);Object.defineProperty(h,"__esModule",{value:!0})})},"esri/rest/support/QuantizationParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/jsonMap ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/subclass ../../geometry/Extent".split(" "),
function(h,c,q,I,f,k,m,H,r,v,w,Q){var p;q=new I.JSONMap({upperLeft:"upper-left",lowerLeft:"lower-left"});f=p=function(C){function y(b){b=C.call(this,b)||this;b.extent=null;b.mode="view";b.originPosition="upper-left";b.tolerance=1;return b}h._inheritsLoose(y,C);y.prototype.clone=function(){return new p(k.clone({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))};return y}(f.JSONSupport);c.__decorate([m.property({type:Q,json:{write:{overridePolicy(){return{enabled:"view"===
this.mode}}}}})],f.prototype,"extent",void 0);c.__decorate([m.property({type:["view","edit"],json:{write:!0}})],f.prototype,"mode",void 0);c.__decorate([m.property({type:String,json:{read:q.read,write:q.write}})],f.prototype,"originPosition",void 0);c.__decorate([m.property({type:Number,json:{write:{overridePolicy(){return{enabled:"view"===this.mode}}}}})],f.prototype,"tolerance",void 0);return f=p=c.__decorate([w.subclass("esri.rest.support.QuantizationParameters")],f)})},"esri/rest/support/StatisticDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer".split(" "),
function(h,c,q,I,f,k,m,H,r,v,w){var Q;q=new q.JSONMap({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete"});I=Q=function(p){function C(b){b=p.call(this,b)||this;b.maxPointCount=void 0;b.maxRecordCount=void 0;b.maxVertexCount=void 0;b.onStatisticField=null;b.outStatisticFieldName=null;b.statisticType=null;b.statisticParameters=null;return b}h._inheritsLoose(C,p);var y=
C.prototype;y.writeStatisticParameters=function(b,z){if("percentile-continuous"===this.statisticType||"percentile-discrete"===this.statisticType)z.statisticParameters=f.clone(b)};y.clone=function(){return new Q({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:f.clone(this.statisticParameters)})};return C}(I.JSONSupport);
c.__decorate([k.property({type:Number,json:{write:!0}})],I.prototype,"maxPointCount",void 0);c.__decorate([k.property({type:Number,json:{write:!0}})],I.prototype,"maxRecordCount",void 0);c.__decorate([k.property({type:Number,json:{write:!0}})],I.prototype,"maxVertexCount",void 0);c.__decorate([k.property({type:String,json:{write:!0}})],I.prototype,"onStatisticField",void 0);c.__decorate([k.property({type:String,json:{write:!0}})],I.prototype,"outStatisticFieldName",void 0);c.__decorate([k.property({type:String,
json:{read:{source:"statisticType",reader:q.read},write:{target:"statisticType",writer:q.write}}})],I.prototype,"statisticType",void 0);c.__decorate([k.property({type:Object})],I.prototype,"statisticParameters",void 0);c.__decorate([w.writer("statisticParameters")],I.prototype,"writeStatisticParameters",null);return I=Q=c.__decorate([v.subclass("esri.rest.support.StatisticDefinition")],I)})},"esri/views/interactive/snapping/featureSources/featureServiceSource/FeatureServiceTiledFetcher":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/tslib.es6 ../../../../../core/arrayUtils ../../../../../core/AsyncSequence ../../../../../core/HandleOwner ../../../../../core/handleUtils ../../../../../core/Logger ../../../../../core/maybe ../../../../../core/promiseUtils ../../../../../core/accessorSupport/decorators/property ../../../../../core/has ../../../../../core/accessorSupport/ensureType ../../../../../core/jsonMap ../../../../../core/accessorSupport/decorators/subclass ../../../../../geometry/Extent ../../../../../geometry/support/aaBoundingRect ../../../../../layers/graphics/featureConversionUtils ../../../../../rest/query/operations/pbfOptimizedFeatureSet ../../../../../rest/query/operations/query ../../../../../rest/support/Query ./PendingFeatureTile".split(" "),
function(h,c,q,I,f,k,m,H,r,v,w,Q,p,C,y,b,z,A,N,G,R,O){const D=H.getLogger("esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTiledFetcher");h.FeatureServiceTiledFetcher=function(P){function u(e){e=P.call(this,e)||this;e.tilesOfInterest=[];e.availability=0;e.pendingTiles=new Map;e.pendingEdits=new f.AsyncSequence;e.pendingEditsAbortController=v.createAbortController();return e}c._inheritsLoose(u,P);var d=u.prototype;d.initialize=function(){this.initializeFetchExtent();
this.updatingHandles.add(this,"configuration",()=>this.refresh());this.updatingHandles.add(this,"tilesOfInterest",(e,B)=>{I.equals(e,B,({id:L},{id:F})=>L===F)||this.process()},1)};d.destroy=function(){this.pendingTiles.forEach(e=>this.deletePendingTile(e));this.pendingTiles.clear();this.store.destroy();this.tilesOfInterest.length=0;this.pendingEditsAbortController.abort();this.pendingEditsAbortController=null};d.refresh=function(){this.store.refresh();this.pendingTiles.forEach(e=>this.deletePendingTile(e));
this.process()};d.applyEdits=function(e){var B=this;this.pendingEdits.push(e,function(){var L=c._asyncToGenerator(function*(F){if(0!==F.addedFeatures.length||0!==F.updatedFeatures.length||0!==F.deletedFeatures.length){for(const [,t]of B.pendingTiles)t.reset();F={...F,deletedFeatures:F.deletedFeatures.map(({objectId:t,globalId:g})=>t&&-1!==t?t:B.lookupObjectIdByGlobalId(g))};yield B.updatingHandles.addPromise(B.store.processEdits(F,(t,g)=>B.queryFeaturesById(t,g),B.pendingEditsAbortController.signal));
B.processPendingTiles()}});return function(F){return L.apply(this,arguments)}}())};d.initializeFetchExtent=function(){var e=this;if(this.capabilities.query.supportsExtent){var B=v.createTask(function(){var L=c._asyncToGenerator(function*(F){try{var t;const g=yield G.executeQueryForExtent(e.url,new R({where:"1\x3d1",outSpatialReference:e.spatialReference,cacheHint:e.capabilities.query.supportsCacheHint?!0:void 0}),{query:e.configuration.customParameters,signal:F});e.store.extent=b.fromJSON(null==(t=
g.data)?void 0:t.extent)}catch(g){v.throwIfAbortError(g),D.warn("Failed to fetch data extent",g)}});return function(F){return L.apply(this,arguments)}}());this.updatingHandles.addPromise(B.promise.then(()=>this.process()));this.handles.add(m.makeHandle(()=>B.abort()))}};d.process=function(){this.markTilesNotAlive();this.createPendingTiles();this.deletePendingTiles();this.processPendingTiles()};d.markTilesNotAlive=function(){for(const [,e]of this.pendingTiles)e.alive=!1};d.createPendingTiles=function(){var e=
this.collectMissingTilesInfo();this.setAvailability(r.isNone(e)?1:e.coveredArea/e.fullArea);if(!r.isNone(e))for(const {data:B,resolution:L}of e.missingTiles)(e=this.pendingTiles.get(B.id))?(e.resolution=L,e.alive=!0):this.createPendingTile(B,L)};d.collectMissingTilesInfo=function(){let e=null;for(let B=this.tilesOfInterest.length-1;0<=B;B--){const L=this.store.process(this.tilesOfInterest[B],(F,t)=>this.verifyTileComplexity(F,t));r.isNone(e)?e=L:e.prepend(L)}return e};d.deletePendingTiles=function(){for(const [,
e]of this.pendingTiles)e.alive||this.deletePendingTile(e)};d.processPendingTiles=function(){const e={fetchCount:(B,L)=>this.fetchCount(B,L),fetchFeatures:(B,L,F)=>this.fetchFeatures(B,L,F),finish:(B,L)=>this.finishPendingTile(B,L),resume:()=>this.processPendingTiles()};if(this.ensureFetchAllCounts(e))for(const [,B]of this.pendingTiles)this.verifyTileComplexity(this.store.getFeatureCount(B.data),B.resolution)&&this.updatingHandles.addPromise(B.process(e))};d.verifyTileComplexity=function(e,B){return this.verifyVertexComplexity(e)&&
this.verifyFeatureDensity(e,B)};d.verifyVertexComplexity=function(e){return 1E6>e*this.minimumVerticesPerFeature};d.verifyFeatureDensity=function(e,B){if(r.isNone(this.tileInfo))return!1;B*=this.tileSize;return 1>25/(B*B)*e};d.ensureFetchAllCounts=function(e){let B=!0;for(const [,L]of this.pendingTiles)2>L.state.type&&this.updatingHandles.addPromise(L.process(e)),1>=L.state.type&&(B=!1);return B};d.finishPendingTile=function(e,B){this.store.add(e.data,B);this.deletePendingTile(e);this.updateAvailability()};
d.updateAvailability=function(){const e=this.collectMissingTilesInfo();this.setAvailability(r.isNone(e)?1:e.coveredArea/e.fullArea)};d.setAvailability=function(e){this._set("availability",e)};d.createPendingTile=function(e,B){B=new O.PendingFeatureTile(e,B);this.pendingTiles.set(e.id,B);return B};d.deletePendingTile=function(e){e.reset();this.pendingTiles.delete(e.data.id)};d.fetchCount=function(){var e=c._asyncToGenerator(function*(B,L){return this.store.fetchCount(B.data,this.url,this.createCountQuery(B),
{query:this.customParameters,timeout:6E5,signal:L})});return function(B,L){return e.apply(this,arguments)}}();d.fetchFeatures=function(){var e=c._asyncToGenerator(function*(B,L,F){let t=0,g,K=0,T=L;for(;;){const Z=this.createFeaturesQuery(B),ba=this.setPagingParameters(Z,t,T),{features:ia,exceededTransferLimit:ma}=yield this.queryFeatures(Z,F);ba&&(t+=r.unwrap(Z.num));K+=ia.length;g=g?g.concat(ia):ia;T=L-K;if(!ba||!ma||0>=T)return g}});return function(B,L,F){return e.apply(this,arguments)}}();d.filterProperties=
function(e){return r.isNone(e)?{where:"1\x3d1",gdbVersion:void 0,timeExtent:void 0}:{where:e.where||"1\x3d1",timeExtent:e.timeExtent,gdbVersion:e.gdbVersion}};d.lookupObjectIdByGlobalId=function(e){const B=this.globalIdField,L=this.objectIdField;if(r.isNone(B))throw Error("Expected globalIdField to be defined");let F=null;this.store.featureStore.forEach(t=>{if(e===t.attributes[B]){var g;F=null!=(g=t.objectId)?g:t.attributes[L]}});if(r.isNone(F))throw Error(`Expected to find a feature with globalId ${e}`);
return F};d.queryFeaturesById=function(e,B){const L=this.createFeaturesQuery(null);L.objectIds=e;return this.queryFeatures(L,B)};d.queryFeatures=function(e,B){return this.capabilities.query.supportsFormatPBF?this.queryFeaturesPBF(e,B):this.queryFeaturesJSON(e,B)};d.queryFeaturesPBF=function(){var e=c._asyncToGenerator(function*(B,L){const {sourceSpatialReference:F}=this;({data:B}=yield G.executeQueryPBF(this.url,B,new N.OptimizedFeatureSetParserContext({sourceSpatialReference:F}),{query:this.configuration.customParameters,
timeout:6E5,signal:L}));return A.unquantizeOptimizedFeatureSet(B)});return function(B,L){return e.apply(this,arguments)}}();d.queryFeaturesJSON=function(){var e=c._asyncToGenerator(function*(B,L){const {sourceSpatialReference:F}=this;({data:B}=yield G.executeQuery(this.url,B,F,{query:this.configuration.customParameters,timeout:6E5,signal:L}));return A.convertFromFeatureSet(B,this.objectIdField)});return function(B,L){return e.apply(this,arguments)}}();d.createCountQuery=function(e){e=this.createBaseQuery(e);
this.capabilities.query.supportsCacheHint&&(e.cacheHint=!0);return e};d.createFeaturesQuery=function(e){const B=this.createBaseQuery(e);B.outFields=this.globalIdField?[this.globalIdField,this.objectIdField]:[this.objectIdField];B.returnGeometry=!0;r.isSome(e)&&(this.capabilities.query.supportsResultType?B.resultType="tile":this.capabilities.query.supportsCacheHint&&(B.cacheHint=!0));return B};d.createBaseQuery=function(e){e=new R({returnZ:!1,returnM:!1,geometry:r.isSome(this.tileInfo)&&r.isSome(e)?
z.toExtent(e.data.extent,this.tileInfo.spatialReference):void 0});const B=this.configuration.filter;r.isSome(B)&&(e.where=B.where,e.gdbVersion=B.gdbVersion,e.timeExtent=B.timeExtent);e.outSpatialReference=this.spatialReference;return e};d.setPagingParameters=function(e,B,L){if(!this.capabilities.query.supportsPagination)return!1;const {supportsMaxRecordCountFactor:F,supportsCacheHint:t,tileMaxRecordCount:g,maxRecordCount:K,supportsResultType:T}=this.capabilities.query,Z=F?R.MAX_MAX_RECORD_COUNT_FACTOR:
1,ba=Z*((T||t)&&g?g:K?K:2E3);e.start=B;F?(e.maxRecordCountFactor=Math.min(Z,Math.ceil(L/ba)),e.num=Math.min(L,e.maxRecordCountFactor*ba)):e.num=Math.min(L,ba);return!0};c._createClass(u,[{key:"minimumVerticesPerFeature",get:function(){var e;switch(null==(e=this.store)?void 0:e.featureStore.geometryType){case "esriGeometryPoint":case "esriGeometryMultipoint":return 1;case "esriGeometryPolygon":return 4;case "esriGeometryPolyline":return 2}}},{key:"filter",set:function(e){const B=this._get("filter");
e=this.filterProperties(e);JSON.stringify(B)!==JSON.stringify(e)&&this._set("filter",e)}},{key:"customParameters",set:function(e){const B=this._get("customParameters");JSON.stringify(B)!==JSON.stringify(e)&&this._set("customParameters",e)}},{key:"configuration",get:function(){return{filter:this.filter,customParameters:this.customParameters,tileInfo:this.tileInfo,tileSize:this.tileSize}}},{key:"tileInfo",set:function(e){const B=this._get("tileInfo");B===e||r.isSome(e)&&r.isSome(B)&&JSON.stringify(e)===
JSON.stringify(B)||(this._set("tileInfo",e),this.store.tileInfo=e)}},{key:"tileSize",set:function(e){this._get("tileSize")!==e&&this._set("tileSize",e)}},{key:"updating",get:function(){return this.updatingHandles.updating||this.pendingEdits.updating}},{key:"debugInfo",get:function(){return{numberOfFeatures:this.store.featureStore.numFeatures,tilesOfInterest:this.tilesOfInterest,pendingTiles:Array.from(this.pendingTiles.values()).map(e=>e.debugInfo),storedTiles:this.store.debugInfo}}}]);return u}(k.HandleOwner);
q.__decorate([w.property({constructOnly:!0})],h.FeatureServiceTiledFetcher.prototype,"url",void 0);q.__decorate([w.property({constructOnly:!0})],h.FeatureServiceTiledFetcher.prototype,"objectIdField",void 0);q.__decorate([w.property({constructOnly:!0})],h.FeatureServiceTiledFetcher.prototype,"globalIdField",void 0);q.__decorate([w.property({constructOnly:!0})],h.FeatureServiceTiledFetcher.prototype,"capabilities",void 0);q.__decorate([w.property({constructOnly:!0})],h.FeatureServiceTiledFetcher.prototype,
"sourceSpatialReference",void 0);q.__decorate([w.property({constructOnly:!0})],h.FeatureServiceTiledFetcher.prototype,"spatialReference",void 0);q.__decorate([w.property({constructOnly:!0})],h.FeatureServiceTiledFetcher.prototype,"store",void 0);q.__decorate([w.property({readOnly:!0})],h.FeatureServiceTiledFetcher.prototype,"minimumVerticesPerFeature",null);q.__decorate([w.property()],h.FeatureServiceTiledFetcher.prototype,"filter",null);q.__decorate([w.property()],h.FeatureServiceTiledFetcher.prototype,
"customParameters",null);q.__decorate([w.property({readOnly:!0})],h.FeatureServiceTiledFetcher.prototype,"configuration",null);q.__decorate([w.property()],h.FeatureServiceTiledFetcher.prototype,"tileInfo",null);q.__decorate([w.property()],h.FeatureServiceTiledFetcher.prototype,"tileSize",null);q.__decorate([w.property()],h.FeatureServiceTiledFetcher.prototype,"tilesOfInterest",void 0);q.__decorate([w.property({readOnly:!0})],h.FeatureServiceTiledFetcher.prototype,"updating",null);q.__decorate([w.property({readOnly:!0})],
h.FeatureServiceTiledFetcher.prototype,"availability",void 0);h.FeatureServiceTiledFetcher=q.__decorate([y.subclass("esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTiledFetcher")],h.FeatureServiceTiledFetcher);Object.defineProperty(h,"__esModule",{value:!0})})},"esri/core/AsyncSequence":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./Accessor ./accessorSupport/decorators/property ./accessorSupport/decorators/subclass".split(" "),
function(h,c,q,I,f,k){h.AsyncSequence=function(m){function H(){var v=m.apply(this,arguments)||this;v.updating=!1;v.pending=[];return v}c._inheritsLoose(H,m);var r=H.prototype;r.push=function(v,w){this.pending.push({promise:v,callback:w});1===this.pending.length&&this.process()};r.process=function(){if(this.pending.length){this.updating=!0;var v=this.pending[0];v.promise.then(w=>v.callback(w)).catch(()=>{}).then(()=>{this.pending.shift();this.process()})}else this.updating=!1};return H}(I);q.__decorate([f.property()],
h.AsyncSequence.prototype,"updating",void 0);h.AsyncSequence=q.__decorate([k.subclass("esri.core.AsyncSequence")],h.AsyncSequence);Object.defineProperty(h,"__esModule",{value:!0})})},"esri/core/HandleOwner":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./Accessor ./Handles ./accessorSupport/decorators/property ./accessorSupport/decorators/subclass ../views/support/WatchUpdatingTracking".split(" "),function(h,c,q,I,f,k,m,H){const r=v=>{v=function(w){function Q(){return w.apply(this,
arguments)||this}c._inheritsLoose(Q,w);Q.prototype.destroy=function(){this.destroyed||(this.handles.destroy(),this.updatingHandles.destroy())};c._createClass(Q,[{key:"handles",get:function(){return this._get("handles")||new f}},{key:"updatingHandles",get:function(){return this._get("updatingHandles")||new H.WatchUpdatingTracking}}]);return Q}(v);q.__decorate([k.property({readOnly:!0})],v.prototype,"handles",null);q.__decorate([k.property({readOnly:!0})],v.prototype,"updatingHandles",null);return v=
q.__decorate([m.subclass("esri.core.HandleOwner")],v)};h.HandleOwner=function(v){function w(){return v.apply(this,arguments)||this}c._inheritsLoose(w,v);return w}(r(I));h.HandleOwner=q.__decorate([m.subclass("esri.core.HandleOwner")],h.HandleOwner);h.HandleOwnerMixin=r;Object.defineProperty(h,"__esModule",{value:!0})})},"esri/views/support/WatchUpdatingTracking":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Handles ../../core/maybe ../../core/scheduling ../../core/watchUtils ../../core/accessorSupport/get ../../core/accessorSupport/trackingUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass".split(" "),
function(h,c,q,I,f,k,m,H,r,v,w,Q){h.WatchUpdatingTracking=function(p){function C(){var b=p.apply(this,arguments)||this;b.updating=!1;b.handleId=0;b.handles=new f;b.scheduleHandleId=0;b.pendingPromises=new Set;return b}c._inheritsLoose(C,p);var y=C.prototype;y.destroy=function(){this.removeAll();this.handles.destroy()};y.add=function(b,z,A,N=0){const G=0!==(N&1),R=++this.handleId;G||this.installSyncUpdatingWatch(b,z,R);b=0!==(N&2)?H.init(b,z,A,G):b.watch(z,A,G);this.handles.add(b,R);return{remove:()=>
this.handles.remove(R)}};y.addOnCollectionPropertyChange=function(b,z,A,N=0){N=0!==(N&2);const G=++this.handleId;this.handles.add([H.on(b,z,"after-changes",this.createSyncUpdatingCallback()),H.on(b,z,"change",A,N?R=>{A({added:R.items,removed:[],moved:[],target:R})}:void 0)],G);return{remove:()=>{this.handles.remove(G)}}};y.addOnCollectionChange=function(b,z,A=0){A=0!==(A&2);const N=++this.handleId;this.handles.add([b.on("after-changes",this.createSyncUpdatingCallback()),b.on("change",z)],N);A&&z({added:b.items,
removed:[],moved:[],target:b});return{remove:()=>{this.handles.remove(N)}}};y.addPromise=function(b){if(k.isNone(b))return b;const z=++this.handleId;this.handles.add({remove:()=>{this.pendingPromises.delete(b)&&(0!==this.pendingPromises.size||this.handles.has(-42)||this._set("updating",!1))}},z);this.pendingPromises.add(b);this._set("updating",!0);const A=()=>this.handles.remove(z);b.then(A,A);return b};y.removeAll=function(){this.pendingPromises.clear();this.handles.removeAll();this._set("updating",
!1)};y.installSyncUpdatingWatch=function(b,z,A){var N=this.createSyncUpdatingCallback();N=v.reaction(()=>r.valueOf(b,z),N);this.handles.add(N,A);return N};y.createSyncUpdatingCallback=function(){return()=>{this.handles.remove(-42);++this.scheduleHandleId;const b=this.scheduleHandleId;this._get("updating")||this._set("updating",!0);this.handles.add(m.schedule(()=>{b===this.scheduleHandleId&&(this._set("updating",0<this.pendingPromises.size),this.handles.remove(-42))}),-42)}};return C}(I);q.__decorate([w.property({readOnly:!0})],
h.WatchUpdatingTracking.prototype,"updating",void 0);h.WatchUpdatingTracking=q.__decorate([Q.subclass("esri.views.support.WatchUpdatingTracking")],h.WatchUpdatingTracking);Object.defineProperty(h,"__esModule",{value:!0})})},"esri/rest/query/operations/pbfOptimizedFeatureSet":function(){define("exports ../../../core/unitUtils ../../../geometry/support/spatialReferenceUtils ../../../layers/graphics/OptimizedFeature ../../../layers/graphics/OptimizedFeatureSet ../../../layers/graphics/OptimizedGeometry".split(" "),
function(h,c,q,I,f,k){const m=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"];let H=function(){function r(w){this.options=w;this.geometryTypes=m;this._vertexDimension=this._coordinatePtr=0}var v=r.prototype;v.createFeatureResult=function(){return new f};v.prepareFeatures=function(w){this._vertexDimension=2;w.hasZ&&this._vertexDimension++;w.hasM&&this._vertexDimension++};v.finishFeatureResult=function(w){if(w&&w.features&&w.hasZ&&this.options.sourceSpatialReference&&
w.spatialReference&&!q.equals(w.spatialReference,this.options.sourceSpatialReference)&&!w.spatialReference.vcsWkid){var Q=c.getMetersPerVerticalUnitForSR(this.options.sourceSpatialReference),p=c.getMetersPerVerticalUnitForSR(w.spatialReference);Q/=p;if(1!==Q)for(const C of w.features)if(C.geometry&&C.geometry.coords)for(w=C.geometry.coords,p=2;p<w.length;p+=3)w[p]*=Q}};v.addFeature=function(w,Q){w.features.push(Q)};v.createFeature=function(){return new I};v.createSpatialReference=function(){return{wkid:0}};
v.createGeometry=function(){return new k};v.addField=function(w,Q){w.fields.push(Q)};v.allocateCoordinates=function(w){w.coords.length=w.lengths.reduce((Q,p)=>Q+p,0)*this._vertexDimension;this._coordinatePtr=0};v.addCoordinate=function(w,Q){w.coords[this._coordinatePtr++]=Q};v.addCoordinatePoint=function(w,Q){w.coords.push(Q)};v.addLength=function(w,Q){w.lengths.push(Q)};v.addQueryGeometry=function(w,Q){w.queryGeometry=Q.queryGeometry;w.queryGeometryType=Q.queryGeometryType};v.createPointGeometry=
function(){return new k};return r}();h.OPTIMIZED_GEOMETRY_TYPES=m;h.OptimizedFeatureSetParserContext=H;Object.defineProperty(h,"__esModule",{value:!0})})},"esri/rest/query/operations/query":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../request ../../../core/maybe ../../../core/urlUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ./pbfQueryUtils ./queryZScale ../../../tasks/operations/urlUtils".split(" "),function(h,c,q,I,f,k,m,H,r,v){function w(b,
z){const A=b.geometry;b=b.toJSON();I.isSome(A)&&(b.geometry=JSON.stringify(A),b.geometryType=k.getJsonType(A),b.inSR=A.spatialReference.wkid||JSON.stringify(A.spatialReference));b.groupByFieldsForStatistics&&(b.groupByFieldsForStatistics=b.groupByFieldsForStatistics.join(","));b.objectIds&&(b.objectIds=b.objectIds.join(","));b.orderByFields&&(b.orderByFields=b.orderByFields.join(","));!b.outFields||!b.returnDistinctValues&&(null!=z&&z.returnCountOnly||null!=z&&z.returnExtentOnly||null!=z&&z.returnIdsOnly)?
delete b.outFields:-1!==b.outFields.indexOf("*")?b.outFields="*":b.outFields=b.outFields.join(",");b.outSR?b.outSR=b.outSR.wkid||JSON.stringify(b.outSR):A&&(b.returnGeometry||b.returnCentroid)&&(b.outSR=b.inSR);b.returnGeometry&&delete b.returnGeometry;b.outStatistics&&(b.outStatistics=JSON.stringify(b.outStatistics));b.pixelSize&&(b.pixelSize=JSON.stringify(b.pixelSize));b.quantizationParameters&&(b.quantizationParameters=JSON.stringify(b.quantizationParameters));b.parameterValues&&(b.parameterValues=
JSON.stringify(b.parameterValues));b.rangeValues&&(b.rangeValues=JSON.stringify(b.rangeValues));b.dynamicDataSource&&(b.layer=JSON.stringify({source:b.dynamicDataSource}),delete b.dynamicDataSource);if(b.timeExtent){const {start:N,end:G}=b.timeExtent;if(null!=N||null!=G)b.time=N===G?N:`${null==N?"null":N},${null==G?"null":G}`;delete b.timeExtent}return b}function Q(){Q=c._asyncToGenerator(function*(b,z,A,N){b=I.isSome(z.timeExtent)&&z.timeExtent.isEmpty?{data:{features:[]}}:yield y(b,z,"json",N);
r.applyFeatureSetZUnitScaling(z,A,b.data);return b});return Q.apply(this,arguments)}function p(){p=c._asyncToGenerator(function*(b,z,A,N){if(I.isSome(z.timeExtent)&&z.timeExtent.isEmpty)return Promise.resolve({data:A.createFeatureResult()});b=yield C(b,z,N);b.data=H.parsePBFFeatureQuery(b.data,A);return b});return p.apply(this,arguments)}function C(b,z,A){return y(b,z,"pbf",A)}function y(b,z,A,N={},G={}){const R="string"===typeof b?f.urlToObject(b):b;b=z.geometry?[z.geometry]:[];N.responseType="pbf"===
A?"array-buffer":"json";return m.normalizeCentralMeridian(b,null,N).then(O=>{O=O&&O[0];I.isSome(O)&&(z=z.clone(),z.geometry=O);O=v.mapParameters({...R.query,f:A,...G,...w(z,G)});return q(f.join(R.path,"query"),{...N,query:{...O,...N.query}})})}h.executeQuery=function(b,z,A,N){return Q.apply(this,arguments)};h.executeQueryForCount=function(b,z,A){return I.isSome(z.timeExtent)&&z.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):y(b,z,"json",A,{returnIdsOnly:!0,returnCountOnly:!0})};h.executeQueryForExtent=
function(b,z,A){return I.isSome(z.timeExtent)&&z.timeExtent.isEmpty?Promise.resolve({data:{count:0,extent:null}}):y(b,z,"json",A,{returnExtentOnly:!0,returnCountOnly:!0}).then(N=>{const G=N.data;if(G.hasOwnProperty("extent"))return N;if(G.features)throw Error("Layer does not support extent calculation.");if(G.hasOwnProperty("count"))throw Error("Layer does not support extent calculation.");return N})};h.executeQueryForIds=function(b,z,A){return I.isSome(z.timeExtent)&&z.timeExtent.isEmpty?Promise.resolve({data:{objectIds:[]}}):
y(b,z,"json",A,{returnIdsOnly:!0})};h.executeQueryPBF=function(b,z,A,N){return p.apply(this,arguments)};h.executeQueryPBFBuffer=C;h.queryToQueryStringParameters=w;h.runQuery=y;Object.defineProperty(h,"__esModule",{value:!0})})},"esri/rest/query/operations/pbfQueryUtils":function(){define(["exports","./pbfFeatureServiceParser"],function(h,c){h.parsePBFFeatureQuery=function(q,I){var f=c.parseFeatureQuery(q,I);q=f.queryResult.featureResult;I=f.queryResult.queryGeometry;f=f.queryResult.queryGeometryType;
if(q&&q.features&&q.features.length&&q.objectIdFieldName){const k=q.objectIdFieldName;for(const m of q.features)m.attributes&&(m.objectId=m.attributes[k])}q&&(q.queryGeometry=I,q.queryGeometryType=f);return q};Object.defineProperty(h,"__esModule",{value:!0})})},"esri/rest/query/operations/pbfFeatureServiceParser":function(){define("exports ../../../core/Error ../../../core/maybe ../../../core/pbf ../../../layers/graphics/OptimizedGeometry ./pbfOptimizedFeatureSet".split(" "),function(h,c,q,I,f,k){function m(u){return u>=
O.length?null:O[u]}function H(u,d,e){for(e=d.createPointGeometry(e);u.next();)switch(u.tag()){case 3:{var B=u.getUInt32();B=u.pos()+B;let L=0;for(;u.pos()<B;)d.addCoordinatePoint(e,u.getSInt64(),L++);break}default:u.skip()}return e}function r(u,d,e){const B=d.createGeometry(e);for(e=2+(e.hasZ?1:0)+(e.hasM?1:0);u.next();)switch(u.tag()){case 2:var L=u.getUInt32();L=u.pos()+L;for(var F=0;u.pos()<L;)d.addLength(B,u.getUInt32(),F++);break;case 3:L=u.getUInt32();L=u.pos()+L;F=0;for(d.allocateCoordinates(B);u.pos()<
L;)d.addCoordinate(B,u.getSInt64(),F),F++,F===e&&(F=0);break;default:u.skip()}return B}function v(u){const d=new f;let e="esriGeometryPoint";for(;u.next();)switch(u.tag()){case 2:var B=u.getUInt32();for(B=u.pos()+B;u.pos()<B;)d.lengths.push(u.getUInt32());break;case 3:B=u.getUInt32();for(B=u.pos()+B;u.pos()<B;)d.coords.push(u.getSInt64());break;case 1:e=k.OPTIMIZED_GEOMETRY_TYPES[u.getEnum()];break;default:u.skip()}return{queryGeometry:d,queryGeometryType:e}}function w(u){for(;u.next();)switch(u.tag()){case 1:return u.getString();
case 2:return u.getFloat();case 3:return u.getDouble();case 4:return u.getSInt32();case 5:return u.getUInt32();case 6:return u.getInt64();case 7:return u.getUInt64();case 8:return u.getSInt64();case 9:return u.getBool();default:return u.skip(),null}return null}function Q(u){const d={type:m(0)};for(;u.next();)switch(u.tag()){case 1:d.name=u.getString();break;case 2:d.type=m(u.getEnum());break;case 3:d.alias=u.getString();break;case 4:var e=u.getEnum();e=e>=D.length?null:D[e];d.sqlType=e;break;case 5:u.skip();
break;case 6:d.defaultValue=u.getString();break;default:u.skip()}return d}function p(u){const d={};for(;u.next();)switch(u.tag()){case 1:d.name=u.getString();break;case 2:d.isSystemMaintained=u.getBool();break;default:u.skip()}return d}function C(u,d,e,B){const L=d.createFeature(e);let F=0;for(;u.next();)switch(u.tag()){case 1:{const t=B[F++].name;L.attributes[t]=u.processMessage(w);break}case 2:L.geometry=u.processMessageWithArgs(r,d,e);break;case 4:L.centroid=u.processMessageWithArgs(H,d,e);break;
default:u.skip()}return L}function y(u){const d=[1,1,1,1];for(;u.next();)switch(u.tag()){case 1:d[0]=u.getDouble();break;case 2:d[1]=u.getDouble();break;case 4:d[2]=u.getDouble();break;case 3:d[3]=u.getDouble();break;default:u.skip()}return d}function b(u){const d=[0,0,0,0];for(;u.next();)switch(u.tag()){case 1:d[0]=u.getDouble();break;case 2:d[1]=u.getDouble();break;case 4:d[2]=u.getDouble();break;case 3:d[3]=u.getDouble();break;default:u.skip()}return d}function z(u){const d={originPosition:0>=
P.length?null:P[0]};for(;u.next();)switch(u.tag()){case 1:var e=u.getEnum();d.originPosition=e>=P.length?null:P[e];break;case 2:d.scale=u.processMessage(y);break;case 3:d.translate=u.processMessage(b);break;default:u.skip()}return d}function A(u){const d={};for(;u.next();)switch(u.tag()){case 1:d.shapeAreaFieldName=u.getString();break;case 2:d.shapeLengthFieldName=u.getString();break;case 3:d.units=u.getString();break;default:u.skip()}return d}function N(u,d){for(d=d.createSpatialReference();u.next();)switch(u.tag()){case 1:d.wkid=
u.getUInt32();break;case 5:d.wkt=u.getString();break;case 2:d.latestWkid=u.getUInt32();break;case 3:d.vcsWkid=u.getUInt32();break;case 4:d.latestVcsWkid=u.getUInt32();break;default:u.skip()}return d}function G(u,d){const e=d.createFeatureResult();e.geometryType=0>=d.geometryTypes.length?null:d.geometryTypes[0];let B=!1;for(;u.next();)switch(u.tag()){case 1:e.objectIdFieldName=u.getString();break;case 3:e.globalIdFieldName=u.getString();break;case 4:e.geohashFieldName=u.getString();break;case 5:e.geometryProperties=
u.processMessage(A);break;case 7:var L=u.getEnum();e.geometryType=L>=d.geometryTypes.length?null:d.geometryTypes[L];break;case 8:e.spatialReference=u.processMessageWithArgs(N,d);break;case 10:e.hasZ=u.getBool();break;case 11:e.hasM=u.getBool();break;case 12:e.transform=u.processMessage(z);break;case 9:L=u.getBool();e.exceededTransferLimit=L;break;case 13:d.addField(e,u.processMessage(Q));break;case 15:B||(d.prepareFeatures(e),B=!0);d.addFeature(e,u.processMessageWithArgs(C,d,e,e.fields));break;case 2:e.uniqueIdField=
u.processMessage(p);break;default:u.skip()}d.finishFeatureResult(e);return e}function R(u,d){const e={};let B=null;for(;u.next();)switch(u.tag()){case 4:B=u.processMessageWithArgs(v);break;case 1:e.featureResult=u.processMessageWithArgs(G,d);break;default:u.skip()}q.isSome(B)&&e.featureResult&&d.addQueryGeometry(e,B);return e}const O="esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeString esriFieldTypeDate esriFieldTypeOID esriFieldTypeGeometry esriFieldTypeBlob esriFieldTypeRaster esriFieldTypeGUID esriFieldTypeGlobalID esriFieldTypeXML".split(" "),
D="sqlTypeBigInt sqlTypeBinary sqlTypeBit sqlTypeChar sqlTypeDate sqlTypeDecimal sqlTypeDouble sqlTypeFloat sqlTypeGeometry sqlTypeGUID sqlTypeInteger sqlTypeLongNVarchar sqlTypeLongVarbinary sqlTypeLongVarchar sqlTypeNChar sqlTypeNVarchar sqlTypeOther sqlTypeReal sqlTypeSmallInt sqlTypeSqlXml sqlTypeTime sqlTypeTimestamp sqlTypeTimestamp2 sqlTypeTinyInt sqlTypeVarbinary sqlTypeVarchar".split(" "),P=["upperLeft","lowerLeft"];h.parseFeatureQuery=function(u,d){try{const e=new I(new Uint8Array(u),new DataView(u));
for(u={};e.next();)switch(e.tag()){case 2:u.queryResult=e.processMessageWithArgs(R,d);break;default:e.skip()}return u}catch(e){throw new c("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:e});}};h.parseFieldType=m;h.parseTransform=z;Object.defineProperty(h,"__esModule",{value:!0})})},"esri/rest/query/operations/queryZScale":function(){define(["exports","./zscale"],function(h,c){h.applyFeatureSetZUnitScaling=function(q,I,f){if(f&&f.features&&f.hasZ&&(q=c.getGeometryZScaler(f.geometryType,
I,q.outSpatialReference)))for(const k of f.features)q(k.geometry)};Object.defineProperty(h,"__esModule",{value:!0})})},"esri/rest/query/operations/zscale":function(){define(["exports","../../../core/maybe","../../../core/unitUtils","../../../geometry/support/spatialReferenceUtils"],function(h,c,q,I){function f(m,H,r){if(null==m.hasM||m.hasZ)for(const v of H)for(const w of v)2<w.length&&(w[2]*=r)}function k(m,H,r){if(m)for(const w of m){m=w.geometry;var v=r;if(m&&m.spatialReference&&!I.equals(m.spatialReference,
H)&&(v=q.getMetersPerVerticalUnitForSR(m.spatialReference)/v,1!==v))if("x"in m)null!=m.z&&(m.z*=v);else if("rings"in m)f(m,m.rings,v);else if("paths"in m)f(m,m.paths,v);else if("points"in m&&(null==m.hasM||m.hasZ))for(const Q of m.points)2<Q.length&&(Q[2]*=v)}}h.getGeometryZScaler=function(m,H,r){if(c.isNone(H)||c.isNone(r)||r.vcsWkid||I.equals(H,r))return null;H=q.getMetersPerVerticalUnitForSR(H);r=q.getMetersPerVerticalUnitForSR(r);const v=H/r;if(1===v)return null;switch(m){case "point":case "esriGeometryPoint":return w=>
{w&&null!=w.z&&(w.z*=v)};case "polyline":case "esriGeometryPolyline":return w=>{if(w)for(const Q of w.paths)for(const p of Q)2<p.length&&(p[2]*=v)};case "polygon":case "esriGeometryPolygon":return w=>{if(w)for(const Q of w.rings)for(const p of Q)2<p.length&&(p[2]*=v)};case "multipoint":case "esriGeometryMultipoint":return w=>{if(w)for(const Q of w.points)2<Q.length&&(Q[2]*=v)};default:return null}};h.unapplyEditsZUnitScaling=function(m,H,r){if((m||H)&&r){var v=q.getMetersPerVerticalUnitForSR(r);k(m,
r,v);k(H,r,v)}};Object.defineProperty(h,"__esModule",{value:!0})})},"esri/tasks/operations/urlUtils":function(){define(["exports"],function(h){function c(q){const I={};for(const f in q){if("declaredClass"===f)continue;const k=q[f];if(null!=k&&"function"!==typeof k)if(Array.isArray(k)){I[f]=[];for(let m=0;m<k.length;m++)I[f][m]=c(k[m])}else"object"===typeof k?k.toJSON&&(I[f]=JSON.stringify(k)):I[f]=k}return I}h.mapParameters=c;Object.defineProperty(h,"__esModule",{value:!0})})},"esri/views/interactive/snapping/featureSources/featureServiceSource/PendingFeatureTile":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/asyncUtils ../../../../../core/maybe ../../../../../core/promiseUtils ../../../../../geometry/support/aaBoundingRect".split(" "),
function(h,c,q,I,f,k){let m=function(){function r(w,Q){this.data=w;this.resolution=Q;this.state={type:0};this.alive=!0}var v=r.prototype;v.process=function(w){switch(this.state.type){case 0:return this.state=this.gotoFetchCount(this.state,w),this.state.task.promise.then(w.resume,w.resume);case 2:return this.state=this.gotoFetchFeatures(this.state,w),this.state.task.promise.then(w.resume,w.resume);case 4:this.state=this.goToDone(this.state,w)}return null};v.gotoFetchCount=function(w,Q){var p=this;
return{type:1,previous:w,task:f.createTask(function(){var C=c._asyncToGenerator(function*(y){y=yield q.resultOrAbort(Q.fetchCount(p,y));1===p.state.type&&(p.state=p.gotoFetchedCount(p.state,y.ok?y.value:Infinity))});return function(y){return C.apply(this,arguments)}}())}};v.gotoFetchedCount=function(w,Q){return{type:2,featureCount:Q,previous:w}};v.gotoFetchFeatures=function(w,Q){var p=this;return{type:3,previous:w,task:f.createTask(function(){var C=c._asyncToGenerator(function*(y){y=yield q.resultOrAbort(Q.fetchFeatures(p,
w.featureCount,y));3===p.state.type&&(p.state=p.gotoFetchedFeatures(p.state,y.ok?y.value:[]))});return function(y){return C.apply(this,arguments)}}())}};v.gotoFetchedFeatures=function(w,Q){return{type:4,previous:w,features:Q}};v.goToDone=function(w,Q){Q.finish(this,w.features);return{type:5,previous:w}};v.reset=function(){const w=this.state;this.state={type:0};switch(w.type){case 1:case 3:w.task.abort()}};v.intersects=function(w){if(I.isNone(w)||!this.data.extent)return!0;k.fromExtent(w,H);return k.intersects(this.data.extent,
H)};c._createClass(r,[{key:"debugInfo",get:function(){return{data:this.data,featureCount:this.featureCount,state:this.stateToString}}},{key:"featureCount",get:function(){switch(this.state.type){case 0:case 1:return 0;case 2:return this.state.featureCount;case 3:return this.state.previous.featureCount;case 4:return this.state.features.length;case 5:return this.state.previous.features.length}}},{key:"stateToString",get:function(){switch(this.state.type){case 0:return"created";case 1:return"fetch-count";
case 2:return"fetched-count";case 3:return"fetch-features";case 4:return"fetched-features";case 5:return"done"}}}]);return r}();const H=k.create();h.PendingFeatureTile=m;Object.defineProperty(h,"__esModule",{value:!0})})},"esri/views/interactive/snapping/featureSources/featureServiceSource/FeatureServiceTileStore":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/tslib.es6 ../../../../../core/Accessor ../../../../../core/byteSizeEstimations ../../../../../core/maybe ../../../../../core/accessorSupport/decorators/property ../../../../../core/has ../../../../../core/accessorSupport/ensureType ../../../../../core/Logger ../../../../../core/jsonMap ../../../../../core/accessorSupport/decorators/subclass ../../../../../geometry/support/aaBoundingRect ../../../../../layers/graphics/featureConversionUtils ../../../../../layers/graphics/data/BoundsStore ../../../../../rest/query/operations/query ./FeatureServiceTileCache".split(" "),
function(h,c,q,I,f,k,m,H,r,v,w,Q,p,C,y,b,z){h.FeatureServiceTileStore=function(O){function D(u){u=O.call(this,u)||this;u.tileInfo=null;u.extent=null;u.maximumByteSize=10485760;u.tileBounds=new y.BoundsStore;u.tiles=new z.FeatureServiceTileCache;u.refCounts=new Map;u.tileFeatureCounts=new Map;u.tmpBoundingRect=p.create();return u}c._inheritsLoose(D,O);var P=D.prototype;P.add=function(u,d){const e=[];for(const B of d)0===this.referenceFeature(B.objectId)&&e.push(B);this.addTileStorage(u,new Set(d.map(({objectId:B})=>
B)),this.byteSizeOfFeatures(d));this.featureStore.addMany(e);this.tiles.applyByteSizeLimit(this.maximumByteSize,B=>this.removeTileStorage(B))};P.destroy=function(){this.clear();this.tileFeatureCounts.clear()};P.clear=function(){this.featureStore.clear();this.tileBounds.clear();this.tiles.clear();this.refCounts.clear()};P.refresh=function(){this.clear();this.tileFeatureCounts.clear()};P.processEdits=function(u,d,e){this.processEditsDelete(u.deletedFeatures.concat(u.updatedFeatures));return this.processEditsRefetch(u.addedFeatures.concat(u.updatedFeatures),
d,e)};P.addTileStorage=function(u,d,e){this.tiles.set(u.id,new A(u,d,e));this.tileBounds.set(u.id,u.extent);this.tileFeatureCounts.set(u.id,d.size)};P.remove=function({id:u}){(u=this.tiles.get(u))&&this.removeTileStorage(u)};P.removeTileStorage=function(u){const d=[];for(const e of u.objectIds)1===this.unreferenceFeature(e)&&d.push(e);this.featureStore.removeManyById(d);u=u.data.id;this.tiles.delete(u);this.tileBounds.delete(u)};P.processEditsDelete=function(u){this.featureStore.removeManyById(u);
for(const [,d]of this.tiles){for(const e of u)d.objectIds.delete(e);this.tileFeatureCounts.set(d.data.id,d.objectIds.size)}for(const d of u)this.refCounts.delete(d)};P.processEditsRefetch=function(){var u=c._asyncToGenerator(function*(d,e,B){d=(yield e(d,B)).features;const {hasZ:L,hasM:F}=this.featureStore;for(const t of d)d=C.getBoundsOptimizedGeometry(this.tmpBoundingRect,t.geometry,L,F),this.tileBounds.forEachInBounds(d,g=>{g=this.tiles.get(g);this.featureStore.add(t);g.objectIds.has(t.objectId)||
(g.objectIds.add(t.objectId),this.referenceFeature(t.objectId),this.tileFeatureCounts.set(g.data.id,g.objectIds.size))})});return function(d,e,B){return u.apply(this,arguments)}}();P.process=function(u,d=()=>!0){if(k.isNone(this.tileInfo)||!u.extent||k.isSome(this.extent)&&!p.intersects(p.fromExtent(this.extent,this.tmpBoundingRect),u.extent)||this.tiles.has(u.id))return new G(u);const e=this.createTileTree(u,this.tileInfo);this.simplify(e,d,null,0,1);return this.collectMissingTiles(u,e,this.tileInfo)};
P.getFeatureCount=function(u){u=this.tileFeatureCounts.get(u.id);return null!=u?u:0};P.fetchCount=function(){var u=c._asyncToGenerator(function*(d,e,B,L){const F=this.tileFeatureCounts.get(d.id);if(null!=F)return F;e=yield b.executeQueryForCount(e,B,L);this.tileFeatureCounts.set(d.id,e.data.count);return e.data.count});return function(d,e,B,L){return u.apply(this,arguments)}}();P.createTileTree=function(u,d){const e=new N(u.level,u.row,u.col);d.updateTileInfo(e,1);this.tileBounds.forEachInBounds(u.extent,
B=>{B=this.tiles.get(B).data;this.tilesAreRelated(u,B)&&this.populateChildren(e,B,d,this.tileFeatureCounts.get(B.id)||0)});return e};P.tilesAreRelated=function(u,d){if(!u||!d)return!1;if(u.level===d.level)return u.row===d.row&&u.col===d.col;const e=u.level<d.level,B=e?u:d;u=e?d:u;d=1<<u.level-B.level;return Math.floor(u.row/d)===B.row&&Math.floor(u.col/d)===B.col};P.populateChildren=function(u,d,e,B){var L=d.level-u.level-1;if(0>L)u.isLeaf=!0;else{var F=d.row>>L,t=d.col>>L;L=(F-(u.row<<1)<<1)+(t-
(u.col<<1));var g=u.children[L];k.isSome(g)?this.populateChildren(g,d,e,B):(F=new N(u.level+1,F,t),e.updateTileInfo(F,1),u.children[L]=F,this.populateChildren(F,d,e,B))}};P.simplify=function(u,d,e,B,L){const F=L*L;if(u.isLeaf)return d(this.getFeatureCount(u),L)?0:(this.remove(u),k.isSome(e)&&(e.children[B]=null),F);L/=2;const t=L*L;let g=0;for(let K=0;K<u.children.length;K++){const T=u.children[K];g+=k.isSome(T)?this.simplify(T,d,u,K,L):t}0===g?this.mergeChildren(u):.18751>1-g/F&&(this.purge(u),k.isSome(e)&&
(e.children[B]=null),g=F);return g};P.mergeChildren=function(u){const d=new Set;let e=0;this.forEachLeaf(u,B=>{const L=this.tiles.get(B.id);if(L){e+=L.byteSize;for(const F of L.objectIds)d.has(F)||(d.add(F),this.referenceFeature(F));this.remove(B)}});this.addTileStorage(u,d,e);u.isLeaf=!0;u.children[0]=u.children[1]=u.children[2]=u.children[3]=null;this.tileFeatureCounts.set(u.id,d.size)};P.forEachLeaf=function(u,d){for(const e of u.children)k.isNone(e)||(e.isLeaf?d(e):this.forEachLeaf(e,d))};P.purge=
function(u){if(!k.isNone(u))if(u.isLeaf)this.remove(u);else for(let d=0;d<u.children.length;d++)this.purge(u.children[d]),u.children[d]=null};P.collectMissingTiles=function(u,d,e){u=new R(e,u,this.extent);this.collectMissingTilesRecurse(d,u,1);return u.info};P.collectMissingTilesRecurse=function(u,d,e){if(!u.isLeaf)if(u.hasChildren){e/=2;for(let B=0;B<u.children.length;B++){const L=u.children[B];k.isNone(L)?d.addMissing(u.level+1,(u.row<<1)+((B&2)>>1),(u.col<<1)+(B&1),e):this.collectMissingTilesRecurse(L,
d,e)}}else d.addMissing(u.level,u.row,u.col,e)};P.referenceFeature=function(u){const d=(this.refCounts.get(u)||0)+1;this.refCounts.set(u,d);return 1===d?0:2};P.unreferenceFeature=function(u){const d=(this.refCounts.get(u)||0)-1;if(0===d)return this.refCounts.delete(u),1;0<d&&this.refCounts.set(u,d);return 2};P.byteSizeOfFeatures=function(u){let d=0;for(const e of u)d+=this.byteSizeOfFeature(e);return d};P.byteSizeOfFeature=function(u){return 32+this.byteSizeOfGeometry(u.geometry)+f.estimateAttributesObjectSize(u.attributes)};
P.byteSizeOfGeometry=function(u){if(!u)return 0;const d=f.estimateFixedArraySize(u.lengths,4);return 32+f.estimateFixedArraySize(u.coords,8)+d};c._createClass(D,[{key:"debugInfo",get:function(){return Array.from(this.tiles.values()).map(({data:u})=>({data:u,featureCount:this.tileFeatureCounts.get(u.id)||0}))}},{key:"test",get:function(){return{tiles:Array.from(this.tiles.values()).map(u=>`${u.data.id}:[${Array.from(u.objectIds)}]`),featureReferences:Array.from(this.refCounts.keys()).map(u=>`${u}:${this.refCounts.get(u)}`)}}}]);
return D}(I);q.__decorate([m.property({constructOnly:!0})],h.FeatureServiceTileStore.prototype,"featureStore",void 0);q.__decorate([m.property()],h.FeatureServiceTileStore.prototype,"tileInfo",void 0);q.__decorate([m.property()],h.FeatureServiceTileStore.prototype,"extent",void 0);q.__decorate([m.property()],h.FeatureServiceTileStore.prototype,"maximumByteSize",void 0);h.FeatureServiceTileStore=q.__decorate([Q.subclass("esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTileStore")],
h.FeatureServiceTileStore);let A=function(O,D,P){this.data=O;this.objectIds=D;this.byteSize=P},N=function(){function O(D,P,u){this.level=D;this.row=P;this.col=u;this.isLeaf=!1;this.extent=null;this.children=[null,null,null,null]}c._createClass(O,[{key:"hasChildren",get:function(){return!this.isLeaf&&(k.isSome(this.children[0])||k.isSome(this.children[1])||k.isSome(this.children[2])||k.isSome(this.children[3]))}}]);return O}(),G=function(){function O(D,P=[]){this.missingTiles=P;this.coveredArea=this.fullArea=
0;this.coveredArea=this.fullArea=p.area(D.extent)}O.prototype.prepend=function(D){this.missingTiles=D.missingTiles.concat(this.missingTiles);this.coveredArea+=D.coveredArea;this.fullArea+=D.fullArea};return O}(),R=function(){function O(D,P,u){this.tileInfo=D;this.extent=null;this.info=new G(P);k.isSome(u)&&(this.extent=p.fromExtent(u))}O.prototype.addMissing=function(D,P,u,d){D={id:null,level:D,row:P,col:u};this.tileInfo.updateTileInfo(D,1);!k.isSome(D.extent)||k.isSome(this.extent)&&!p.intersects(this.extent,
D.extent)||(this.info.missingTiles.push({data:D,resolution:d}),this.info.coveredArea-=p.area(D.extent))};return O}();h.ProcessResult=G;Object.defineProperty(h,"__esModule",{value:!0})})},"esri/core/byteSizeEstimations":function(){define(["exports"],function(h){function c(q){return 32+q.length}h.estimateAttributesObjectSize=function(q){if(!q)return 0;let I=32;for(const f in q)if(q.hasOwnProperty(f)){const k=q[f];switch(typeof k){case "string":I+=c(k);break;case "number":I+=16;break;case "boolean":I+=
4}}return I};h.estimateFixedArraySize=function(q,I){return 32+q.length*I};h.estimateNumberByteSize=function(){return 16};h.estimateStringByteSize=c;Object.defineProperty(h,"__esModule",{value:!0})})},"esri/views/interactive/snapping/featureSources/featureServiceSource/FeatureServiceTileCache":function(){define(["exports"],function(h){let c=function(){function q(){this._store=new Map;this._byteSize=0}var I=q.prototype;I.set=function(f,k){this.delete(f);this._store.set(f,k);this._byteSize+=k.byteSize};
I.delete=function(f){const k=this._store.get(f);return this._store.delete(f)?(this._byteSize-=k.byteSize,!0):!1};I.get=function(f){this.used(f);return this._store.get(f)};I.has=function(f){this.used(f);return this._store.has(f)};I.clear=function(){this._store.clear()};I.applyByteSizeLimit=function(f,k){for(const [m,H]of this._store){if(this._byteSize<=f)break;this.delete(m);k(H)}};I.values=function(){return this._store.values()};I[Symbol.iterator]=function(){return this._store[Symbol.iterator]()};
I.used=function(f){const k=this._store.get(f);k&&(this._store.delete(f),this._store.set(f,k))};return q}();h.FeatureServiceTileCache=c;Object.defineProperty(h,"__esModule",{value:!0})})},"*noref":1}});
define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/tslib.es6 ../../../../../core/Evented ../../../../../core/Handles ../../../../../core/maybe ../../../../../core/promiseUtils ../../../../../core/watchUtils ../../../../../core/accessorSupport/decorators/property ../../../../../core/has ../../../../../core/accessorSupport/ensureType ../../../../../core/Logger ../../../../../core/jsonMap ../../../../../core/accessorSupport/decorators/subclass ../../../../../geometry/SpatialReference ../../../../../layers/graphics/data/FeatureStore ../../../../../layers/graphics/data/QueryEngine ../../../../../layers/support/TileInfo ../../../../../layers/support/TimeInfo ../../../../../rest/support/Query ./FeatureServiceTiledFetcher ./FeatureServiceTileStore ../../../../support/WatchUpdatingTracking".split(" "),function(h,
c,q,I,f,k,m,H,r,v,w,Q,p,C,y,b,z,A,N,G,R,O,D){h.FeatureServiceSnappingSourceWorker=function(P){function u(){var e=P.apply(this,arguments)||this;e.isInitializing=!0;e.whenSetup=m.createDeferred();e.handles=new f;e.updatingHandles=new D.WatchUpdatingTracking;e.pendingApplyEdits=new Map;return e}c._inheritsLoose(u,P);var d=u.prototype;d.destroy=function(){this.featureFetcher.destroy();this.queryEngine.destroy();this.featureStore.clear();this.handles.destroy()};d.setup=function(){var e=c._asyncToGenerator(function*(B){const {geometryType:L,
objectIdField:F,timeInfo:t,fields:g}=B.serviceInfo;this.featureStore=new b({...B.serviceInfo,hasZ:!1,hasM:!1});this.queryEngine=new z["default"]({spatialReference:B.spatialReference,featureStore:this.featureStore,geometryType:L,fields:g,hasZ:!1,hasM:!1,objectIdField:F,timeInfo:t?N.fromJSON(t):null});this.featureFetcher=new R.FeatureServiceTiledFetcher({store:new O.FeatureServiceTileStore({featureStore:this.featureStore}),url:B.serviceInfo.url,objectIdField:B.serviceInfo.objectIdField,globalIdField:B.serviceInfo.globalIdField,
capabilities:B.serviceInfo.capabilities,spatialReference:y.fromJSON(B.spatialReference),sourceSpatialReference:y.fromJSON(B.serviceInfo.spatialReference)});this.handles.add([this.featureFetcher.watch("availability",K=>this.emit("notify-availability",{availability:K}),!0),this.watch("updating",()=>this.notifyUpdating())]);this.whenSetup.resolve();this.isInitializing=!1;return this.configure(B.configuration)});return function(B){return e.apply(this,arguments)}}();d.configure=function(){var e=c._asyncToGenerator(function*(B){yield this.updatingHandles.addPromise(this.whenSetup.promise);
this.updateFeatureFetcherConfiguration(B);return{result:{}}});return function(B){return e.apply(this,arguments)}}();d.fetchCandidates=function(){var e=c._asyncToGenerator(function*(B,L){yield this.whenSetup.promise;m.throwIfAborted(L);return{result:yield this.queryEngine.executeQueryForSnapping({point:B.point,distance:B.distance,types:B.types,query:k.isSome(B.filter)?B.filter:{where:"1\x3d1"}},k.isSome(L)?L.signal:null)}});return function(B,L){return e.apply(this,arguments)}}();d.updateTiles=function(){var e=
c._asyncToGenerator(function*(B,L){yield this.updatingHandles.addPromise(this.whenSetup.promise);m.throwIfAborted(L);this.featureFetcher.tileSize=B.tileSize;this.featureFetcher.tilesOfInterest=B.tiles;this.featureFetcher.tileInfo=k.isSome(B.tileInfo)?A.fromJSON(B.tileInfo):null;return{result:{}}});return function(B,L){return e.apply(this,arguments)}}();d.refresh=function(){var e=c._asyncToGenerator(function*(B,L){yield this.updatingHandles.addPromise(this.whenSetup.promise);m.throwIfAborted(L);this.featureFetcher.refresh();
return{result:{}}});return function(B,L){return e.apply(this,arguments)}}();d.whenNotUpdating=function(){var e=c._asyncToGenerator(function*(B,L){yield this.updatingHandles.addPromise(this.whenSetup.promise);m.throwIfAborted(L);yield m.whenOrAbort(H.whenNotOnce(this,"updating"),L);return{result:{}}});return function(B,L){return e.apply(this,arguments)}}();d.getDebugInfo=function(){var e=c._asyncToGenerator(function*(B,L){m.throwIfAborted(L);return{result:this.featureFetcher.debugInfo}});return function(B,
L){return e.apply(this,arguments)}}();d.beginApplyEdits=function(){var e=c._asyncToGenerator(function*(B,L){this.updatingHandles.addPromise(this.whenSetup.promise);m.throwIfAborted(L);L=m.createDeferred();this.pendingApplyEdits.set(B.id,L);this.featureFetcher.applyEdits(L.promise);this.updatingHandles.addPromise(L.promise);return{result:{}}});return function(B,L){return e.apply(this,arguments)}}();d.endApplyEdits=function(){var e=c._asyncToGenerator(function*(B,L){const F=this.pendingApplyEdits.get(B.id);
F&&F.resolve(B.edits);m.throwIfAborted(L);return{result:{}}});return function(B,L){return e.apply(this,arguments)}}();d.updateFeatureFetcherConfiguration=function(e){this.featureFetcher.filter=k.isSome(e.filter)?G.fromJSON(e.filter):null;this.featureFetcher.customParameters=e.customParameters};d.notifyUpdating=function(){this.emit("notify-updating",{updating:this.updating})};c._createClass(u,[{key:"updating",get:function(){return this.featureFetcher.updating||this.isInitializing||this.updatingHandles.updating}}]);
return u}(I.EventedAccessor);q.__decorate([r.property({readOnly:!0})],h.FeatureServiceSnappingSourceWorker.prototype,"updating",null);q.__decorate([r.property()],h.FeatureServiceSnappingSourceWorker.prototype,"isInitializing",void 0);h.FeatureServiceSnappingSourceWorker=q.__decorate([C.subclass("esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceSnappingSourceWorker")],h.FeatureServiceSnappingSourceWorker);h.default=function(){return new h.FeatureServiceSnappingSourceWorker};
Object.defineProperty(h,"__esModule",{value:!0})});