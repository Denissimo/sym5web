// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.20/esri/copyright.txt for details.
//>>built
define("exports ../../../../chunks/vec2 ../../../../chunks/vec3 ../../../../chunks/vec3f64 ../../../../chunks/boundedPlane ../../../../geometry/support/vectorStacks ../operations/MoveVertex ../operations/RotateVertex ../operations/ScaleVertex ../operations/UpdateVertices".split(" "),function(p,h,c,r,t,l,w,x,y,z){function u(a,b,d){if(a instanceof z.UpdateVertices){if(a.operation instanceof w.MoveVertex)return A(a.operation,b,d),!0;if(a.operation instanceof x.RotateVertex)return B(a.operation,b,d),
!0;if(a.operation instanceof y.ScaleVertex)return C(a.operation,b,d),!0}return!1}function A(a,b,d=!1){d=d?-1:1;a=r.fromValues(d*a.dx,d*a.dy,d*a.dz);c.add(b.origin,b.origin,a)}function B(a,b,d=!1){a=d?-a.angle:a.angle;c.rotateZ(b.basis1,b.basis1,r.ZEROS,a);c.rotateZ(b.basis2,b.basis2,r.ZEROS,a)}function C(a,b,d=!1){const k=d?1/a.factor1:a.factor1;d=d?1/a.factor2:a.factor2;c.scale(b.basis1,b.basis1,k);c.scale(b.basis2,b.basis2,d);v(b.origin,a.origin,a.axis1,k);v(b.origin,a.origin,a.axis2,d)}function v(a,
b,d,k){const e=l.sv2d.get();b=h.subtract(e,a,b);d=h.scale(e,d,h.dot(d,b));h.scaleAndAdd(a,a,d,k-1)}p.apply=function(a,b){return u(a,b,!1)};p.calculateOrientedBounds=function(a,b,d,k){k||(k=t.create());const e=h.set(l.sv2d.get(),a[1],-a[0]),g=h.set(l.sv2d.get(),Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),f=h.set(l.sv2d.get(),Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY),m=l.sv2d.get();b.components.forEach(n=>n.vertices.forEach(q=>{q=q.pos;h.set(m,h.dot(a,q),h.dot(e,q));h.min(g,g,m);h.max(f,
f,m)}));b=h.set(l.sv2d.get(),1E-6>f[0]-g[0]?d/2:0,1E-6>f[1]-g[1]?d/2:0);h.subtract(g,g,b);h.add(f,f,b);h.scale(k.basis1,a,(f[0]-g[0])/2);h.scale(k.basis2,e,(f[1]-g[1])/2);h.set(k.origin,g[0]*a[0]+g[1]*e[0],g[0]*a[1]+g[1]*e[1]);h.add(k.origin,k.origin,k.basis1);h.add(k.origin,k.origin,k.basis2);return k};p.mapPlaneToRenderPlane=function(a,b,d,k=0,e){e||(e=t.create());b.toRenderCoords(a.origin,d,e.origin);var g=l.sv3d.get();c.add(g,a.origin,a.basis1);c.add(g,g,a.basis2);b.toRenderCoords(g,d,g);var f=
l.sv3d.get();c.add(f,a.origin,a.basis1);c.subtract(f,f,a.basis2);b.toRenderCoords(f,d,f);const m=l.sv3d.get();c.subtract(m,a.origin,a.basis1);c.subtract(m,m,a.basis2);b.toRenderCoords(m,d,m);const n=l.sv3d.get();c.subtract(n,a.origin,a.basis1);c.add(n,n,a.basis2);b.toRenderCoords(n,d,n);a=c.lerp(l.sv3d.get(),g,f,.5);c.subtract(a,a,e.origin);b=c.lerp(l.sv3d.get(),m,n,.5);c.subtract(b,e.origin,b);c.lerp(e.basis1,a,b,.5);g=c.lerp(l.sv3d.get(),n,g,.5);c.subtract(g,g,e.origin);f=c.lerp(l.sv3d.get(),f,
m,.5);c.subtract(f,e.origin,f);c.lerp(e.basis2,g,f,.5);f=c.cross(l.sv3d.get(),e.basis1,e.basis2);f=c.cross(f,f,e.basis1);c.normalize(f,f);c.scale(e.basis2,f,c.dot(e.basis2,f));c.scale(e.basis1,e.basis1,1+k/c.length(e.basis1));c.scale(e.basis2,e.basis2,1+k/c.length(e.basis2));t.updateUnboundedPlane(e);return e};p.unapply=function(a,b){return u(a,b,!0)};Object.defineProperty(p,"__esModule",{value:!0})});