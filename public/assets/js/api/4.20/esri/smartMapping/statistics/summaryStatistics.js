// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.20/esri/copyright.txt for details.
//>>built
define("../../chunks/_rollupPluginBabelHelpers ../../core/Error ../../core/maybe ../../layers/support/fieldUtils ./support/utils ../support/utils ../support/adapters/support/layerUtils".split(" "),function(l,e,r,m,n,p,q){function t(a){return f.apply(this,arguments)}function f(){f=l._asyncToGenerator(function*(a){if(!(a&&a.layer&&(a.field||a.valueExpression||a.sqlExpression)))throw new e("summary-statistics:missing-parameters","'layer' and 'field', 'valueExpression' or 'sqlExpression' parameters are required");
if(a.valueExpression&&!a.sqlExpression&&!a.view)throw new e("summary-statistics:missing-parameters","View is required when 'valueExpression' is specified");var b=[0,2,1,3,4,5];const {layer:g,...u}=a;var c=q.createLayerAdapter(g,b);a={layerAdapter:c,...u};a.normalizationType=p.getNormalizationType(a);if(!c)throw new e("summary-statistics:invalid-parameters","'layer' must be one of these types: "+q.getLayerTypeLabels(b).join(", "));b=r.isSome(a.signal)?{signal:a.signal}:null;yield c.load(b);var d=a.field;
b=a.normalizationType;const v=a.valueExpression||a.sqlExpression;d=d?c.getField(d):null;var h=yield p.getFieldsList({field:a.field,normalizationField:a.normalizationField,valueExpression:a.valueExpression});if(h=n.verifyBasicFieldValidity(c,h,"summary-statistics:invalid-parameters"))throw h;if(d){if(c=n.verifyFieldType(c,d,"summary-statistics:invalid-parameters",w))throw c;if(m.isDateField(d)&&b)throw new e("summary-statistics:invalid-parameters","Normalization is not allowed for date fields");}else if(v&&
b)throw new e("summary-statistics:invalid-parameters","Normalization is not allowed when 'valueExpression' or 'sqlExpression' is specified");return a});return f.apply(this,arguments)}function k(){k=l._asyncToGenerator(function*(a){const {layerAdapter:b,...g}=yield t(a);return b.summaryStatistics(g)});return k.apply(this,arguments)}const w=[...m.numericTypes,"date","string"];return function(a){return k.apply(this,arguments)}});