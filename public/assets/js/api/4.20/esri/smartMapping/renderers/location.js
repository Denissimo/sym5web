// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.20/esri/copyright.txt for details.
//>>built
define("exports ../../chunks/_rollupPluginBabelHelpers ../../renderers/ClassBreaksRenderer ../../renderers/DictionaryRenderer ../../renderers/DotDensityRenderer ../../renderers/HeatmapRenderer ../../renderers/Renderer ../../renderers/SimpleRenderer ../../renderers/UniqueValueRenderer ../../renderers/support/jsonUtils ../../core/Error ../../core/maybe ../heuristics/outline ../heuristics/sizeRange ./support/utils ../support/adapters/support/layerUtils ../../chunks/location".split(" "),function(t,l,
E,F,G,H,I,x,J,K,g,m,y,z,h,u,n){function A(a){return p.apply(this,arguments)}function p(){p=l._asyncToGenerator(function*(a){if(!a||!a.layer)throw new g("location-renderer:missing-parameters","'layer' parameter is required");a={...a};a.symbolType=a.symbolType||"2d";var b=[0,2,1,3,5],c=u.createLayerAdapter(a.layer,b);a.layer=c;if(!c)throw new g("location-renderer:invalid-parameters","'layer' must be one of these types: "+u.getLayerTypeLabels(b).join(", "));b=m.isSome(a.signal)?{signal:a.signal}:null;
yield c.load(b);c=c.geometryType;a.outlineOptimizationEnabled="polygon"===c?a.outlineOptimizationEnabled:!1;a.sizeOptimizationEnabled="point"===c||"multipoint"===c||"polyline"===c?a.sizeOptimizationEnabled:!1;if("mesh"===c)a.symbolType="3d-volumetric",a.colorMixMode=a.colorMixMode||"replace",a.edgesType=a.edgesType||"none";else{if("3d-volumetric-uniform"===a.symbolType&&"point"!==c)throw new g("location-renderer:not-supported","3d-volumetric-uniform symbols are supported for point layers only");if(-1<
a.symbolType.indexOf("3d-volumetric")&&(!a.view||"3d"!==a.view.type))throw new g("location-renderer:invalid-parameters","'view' parameter should be an instance of SceneView when 'symbolType' parameter is '3d-volumetric' or '3d-volumetric-uniform'");}return a});return p.apply(this,arguments)}function B(a,b){return q.apply(this,arguments)}function q(){q=l._asyncToGenerator(function*(a,b){let c=a.locationScheme,e=null;var d=null;d=yield h.getBasemapInfo(a.basemap,a.view);e=m.isSome(d.basemapId)?d.basemapId:
null;d=m.isSome(d.basemapTheme)?d.basemapTheme:null;if(c)return{scheme:n.cloneScheme(c),basemapId:e,basemapTheme:d};if(a=n.getSchemes({basemap:e,basemapTheme:d,geometryType:b,worldScale:-1<a.symbolType.indexOf("3d-volumetric"),view:a.view}))c=a.primaryScheme,e=a.basemapId,d=a.basemapTheme;return{scheme:c,basemapId:e,basemapTheme:d}});return q.apply(this,arguments)}function r(){r=l._asyncToGenerator(function*(a){var b=yield A(a);const c=b.layer.geometryType;a=yield B(b,c);const e=a.scheme;if(!e)throw new g("location-renderer:insufficient-info",
"Unable to find location scheme");const {view:d,layer:v,signal:w}=b,[f,k]=yield Promise.all([b.outlineOptimizationEnabled?y({view:d,layer:v,signal:w}):null,b.sizeOptimizationEnabled?z({view:d,layer:v,signal:w}):null]),C=f&&f.opacity;b=new x({symbol:h.createSymbol(c,{type:b.symbolType,color:e.color,size:h.getSymbolSizeFromScheme(e,c),outline:h.getSymbolOutlineFromScheme(e,c,C),meshInfo:{colorMixMode:b.colorMixMode,edgesType:b.edgesType}})});f&&f.visualVariables&&f.visualVariables.length&&(b.visualVariables=
f.visualVariables.map(D=>D.clone()));k&&k.minSize&&(b.visualVariables?b.visualVariables.push(k.minSize):b.visualVariables=[k.minSize]);return{renderer:b,locationScheme:n.cloneScheme(e),basemapId:a.basemapId,basemapTheme:a.basemapTheme}});return r.apply(this,arguments)}t.createRenderer=function(a){return r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0})});