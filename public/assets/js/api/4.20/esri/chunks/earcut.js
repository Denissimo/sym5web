// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.20/esri/copyright.txt for details.
//>>built
define(["exports"],function(M){var G={exports:{}};(function(N){(function(u){u=u();void 0!==u&&(N.exports=u)})(function(){function u(a,c,b){b=b||2;var e=c&&c.length,d=e?c[0]*b:a.length,f=H(a,0,d,b,!0),k=[];if(!f||f.next===f.prev)return k;var l;if(e){var g=f;var m=b;f=[];var h;e=0;for(h=c.length;e<h;e++){var n=c[e]*m;var t=e<h-1?c[e+1]*m:a.length;n=H(a,n,t,m,!1);n===n.next&&(n.steiner=!0);f.push(O(n))}f.sort(P);for(e=0;e<f.length;e++)m=f[e],c=g,(g=Q(m,c))?(m=I(g,m),h=v(g,g.next),v(m,m.next),g=c===g?
h:c):g=c,g=v(g,g.next);f=g}if(a.length>80*b){var r=l=a[0];var q=e=a[1];for(m=b;m<d;m+=b)c=a[m],g=a[m+1],c<r&&(r=c),g<q&&(q=g),c>l&&(l=c),g>e&&(e=g);l=Math.max(l-r,e-q);l=0!==l?1/l:0}x(f,k,b,r,q,l);return k}function H(a,c,b,e,d){if(d===0<D(a,c,b,e))for(d=c;d<b;d+=e)var f=J(d,a[d],a[d+1],f);else for(d=b-e;d>=c;d-=e)f=J(d,a[d],a[d+1],f);f&&A(f,f.next)&&(y(f),f=f.next);return f}function v(a,c){if(!a)return a;c||(c=a);do{var b=!1;if(a.steiner||!A(a,a.next)&&0!==p(a.prev,a,a.next))a=a.next;else{y(a);a=
c=a.prev;if(a===a.next)break;b=!0}}while(b||a!==c);return c}function x(a,c,b,e,d,f,k){if(a){!k&&f&&K(a,e,d,f);for(var l=a,g,m;a.prev!==a.next;){g=a.prev;m=a.next;if(f)var h=R(a,e,d,f);else a:{h=a;var n=h.prev,t=h,r=h.next;if(0<=p(n,t,r))h=!1;else{for(var q=h.next.next;q!==h.prev;){if(w(n.x,n.y,t.x,t.y,r.x,r.y,q.x,q.y)&&0<=p(q.prev,q,q.next)){h=!1;break a}q=q.next}h=!0}}if(h)c.push(g.i/b),c.push(a.i/b),c.push(m.i/b),y(a),l=a=m.next;else if(a=m,a===l){if(!k)x(v(a),c,b,e,d,f,1);else if(1===k){a=v(a);
k=c;l=b;g=a;do m=g.prev,h=g.next.next,!A(m,h)&&L(m,g,g.next,h)&&z(m,h)&&z(h,m)&&(k.push(m.i/l),k.push(g.i/l),k.push(h.i/l),y(g),y(g.next),g=a=h),g=g.next;while(g!==a);a=v(g);x(a,c,b,e,d,f,2)}else if(2===k)a:{k=a;do{for(l=k.next.next;l!==k.prev;){if(g=k.i!==l.i){h=h=h=h=void 0;g=k;m=l;if(h=g.next.i!==m.i&&g.prev.i!==m.i){b:{h=g;do{if(h.i!==g.i&&h.next.i!==g.i&&h.i!==m.i&&h.next.i!==m.i&&L(h,h.next,g,m)){h=!0;break b}h=h.next}while(h!==g);h=!1}h=!h}if(h){if(h=z(g,m)&&z(m,g)){h=g;n=!1;t=(g.x+m.x)/2;
r=(g.y+m.y)/2;do h.y>r!==h.next.y>r&&h.next.y!==h.y&&t<(h.next.x-h.x)*(r-h.y)/(h.next.y-h.y)+h.x&&(n=!n),h=h.next;while(h!==g);h=n}h=h&&(p(g.prev,g,m.prev)||p(g,m.prev,m))||A(g,m)&&0<p(g.prev,g,g.next)&&0<p(m.prev,m,m.next)}g=h}if(g){a=I(k,l);k=v(k,k.next);a=v(a,a.next);x(k,c,b,e,d,f);x(a,c,b,e,d,f);break a}l=l.next}k=k.next}while(k!==a)}break}}}}function R(a,c,b,e){var d=a.prev,f=a.next;if(0<=p(d,a,f))return!1;var k=d.x>a.x?d.x>f.x?d.x:f.x:a.x>f.x?a.x:f.x,l=d.y>a.y?d.y>f.y?d.y:f.y:a.y>f.y?a.y:f.y,
g=E(d.x<a.x?d.x<f.x?d.x:f.x:a.x<f.x?a.x:f.x,d.y<a.y?d.y<f.y?d.y:f.y:a.y<f.y?a.y:f.y,c,b,e);c=E(k,l,c,b,e);b=a.prevZ;for(e=a.nextZ;b&&b.z>=g&&e&&e.z<=c;){if(b!==a.prev&&b!==a.next&&w(d.x,d.y,a.x,a.y,f.x,f.y,b.x,b.y)&&0<=p(b.prev,b,b.next))return!1;b=b.prevZ;if(e!==a.prev&&e!==a.next&&w(d.x,d.y,a.x,a.y,f.x,f.y,e.x,e.y)&&0<=p(e.prev,e,e.next))return!1;e=e.nextZ}for(;b&&b.z>=g;){if(b!==a.prev&&b!==a.next&&w(d.x,d.y,a.x,a.y,f.x,f.y,b.x,b.y)&&0<=p(b.prev,b,b.next))return!1;b=b.prevZ}for(;e&&e.z<=c;){if(e!==
a.prev&&e!==a.next&&w(d.x,d.y,a.x,a.y,f.x,f.y,e.x,e.y)&&0<=p(e.prev,e,e.next))return!1;e=e.nextZ}return!0}function P(a,c){return a.x-c.x}function Q(a,c){var b=c,e=a.x,d=a.y,f=-Infinity;do{if(d<=b.y&&d>=b.next.y&&b.next.y!==b.y){var k=b.x+(d-b.y)*(b.next.x-b.x)/(b.next.y-b.y);if(k<=e&&k>f){f=k;if(k===e){if(d===b.y)return b;if(d===b.next.y)return b.next}var l=b.x<b.next.x?b:b.next}}b=b.next}while(b!==c);if(!l)return null;if(e===f)return l;c=l;k=l.x;var g=l.y,m=Infinity;b=l;do{if(e>=b.x&&b.x>=k&&e!==
b.x&&w(d<g?e:f,d,k,g,d<g?f:e,d,b.x,b.y)){var h=Math.abs(d-b.y)/(e-b.x);var n;if((n=z(b,a))&&!(n=h<m)&&(n=h===m)&&!(n=b.x>l.x)&&(n=b.x===l.x)){n=l;var t=b;n=0>p(n.prev,n,t.prev)&&0>p(t.next,n,n.next)}n&&(l=b,m=h)}b=b.next}while(b!==c);return l}function K(a,c,b,e){var d=a;do{null===d.z&&(d.z=E(d.x,d.y,c,b,e));if(d.prev.next!==d||d.next.prev!==d)return d.prev.next=d,d.next.prev=d,K(a,c,b,e);d.prevZ=d.prev;d=d.nextZ=d.next}while(d!==a);d.prevZ.nextZ=null;d.prevZ=null;a=d;var f,k,l,g=1;do{c=a;e=a=null;
for(d=0;c;){d++;b=c;for(f=k=0;f<g&&(k++,b=b.nextZ,b);f++);for(l=g;0<k||0<l&&b;)0!==k&&(0===l||!b||c.z<=b.z)?(f=c,c=c.nextZ,k--):(f=b,b=b.nextZ,l--),e?e.nextZ=f:a=f,f.prevZ=e,e=f;c=b}e.nextZ=null;g*=2}while(1<d)}function E(a,c,b,e,d){a=32767*(a-b)*d;c=32767*(c-e)*d;a=(a|a<<8)&16711935;a=(a|a<<4)&252645135;a=(a|a<<2)&858993459;c=(c|c<<8)&16711935;c=(c|c<<4)&252645135;c=(c|c<<2)&858993459;return(a|a<<1)&1431655765|((c|c<<1)&1431655765)<<1}function O(a){var c=a,b=a;do{if(c.x<b.x||c.x===b.x&&c.y<b.y)b=
c;c=c.next}while(c!==a);return b}function w(a,c,b,e,d,f,k,l){return 0<=(d-k)*(c-l)-(a-k)*(f-l)&&0<=(a-k)*(e-l)-(b-k)*(c-l)&&0<=(b-k)*(f-l)-(d-k)*(e-l)}function p(a,c,b){return(c.y-a.y)*(b.x-c.x)-(c.x-a.x)*(b.y-c.y)}function A(a,c){return a.x===c.x&&a.y===c.y}function L(a,c,b,e){var d=B(p(a,c,b)),f=B(p(a,c,e)),k=B(p(b,e,a)),l=B(p(b,e,c));return d!==f&&k!==l||0===d&&C(a,b,c)||0===f&&C(a,e,c)||0===k&&C(b,a,e)||0===l&&C(b,c,e)?!0:!1}function C(a,c,b){return c.x<=Math.max(a.x,b.x)&&c.x>=Math.min(a.x,b.x)&&
c.y<=Math.max(a.y,b.y)&&c.y>=Math.min(a.y,b.y)}function B(a){return 0<a?1:0>a?-1:0}function z(a,c){return 0>p(a.prev,a,a.next)?0<=p(a,c,a.next)&&0<=p(a,a.prev,c):0>p(a,c,a.prev)||0>p(a,a.next,c)}function I(a,c){var b=new F(a.i,a.x,a.y),e=new F(c.i,c.x,c.y),d=a.next,f=c.prev;a.next=c;c.prev=a;b.next=d;d.prev=b;e.next=b;b.prev=e;f.next=e;e.prev=f;return e}function J(a,c,b,e){a=new F(a,c,b);e?(a.next=e.next,a.prev=e,e.next.prev=a,e.next=a):(a.prev=a,a.next=a);return a}function y(a){a.next.prev=a.prev;
a.prev.next=a.next;a.prevZ&&(a.prevZ.nextZ=a.nextZ);a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function F(a,c,b){this.i=a;this.x=c;this.y=b;this.nextZ=this.prevZ=this.z=this.next=this.prev=null;this.steiner=!1}function D(a,c,b,e){for(var d=0,f=b-e;c<b;c+=e)d+=(a[f]-a[c])*(a[c+1]+a[f+1]),f=c;return d}u.deviation=function(a,c,b,e){var d=c&&c.length,f=Math.abs(D(a,0,d?c[0]*b:a.length,b));if(d){d=0;for(var k=c.length;d<k;d++)f-=Math.abs(D(a,c[d]*b,d<k-1?c[d+1]*b:a.length,b))}for(d=c=0;d<e.length;d+=3){k=e[d]*b;
var l=e[d+1]*b,g=e[d+2]*b;c+=Math.abs((a[k]-a[g])*(a[l+1]-a[k+1])-(a[k]-a[l])*(a[g+1]-a[k+1]))}return 0===f&&0===c?0:Math.abs((c-f)/f)};u.flatten=function(a){for(var c=a[0][0].length,b={vertices:[],holes:[],dimensions:c},e=0,d=0;d<a.length;d++){for(var f=0;f<a[d].length;f++)for(var k=0;k<c;k++)b.vertices.push(a[d][f][k]);0<d&&(e+=a[d-1].length,b.holes.push(e))}return b};return u})})(G);M.earcut=G.exports});