// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.20/esri/copyright.txt for details.
//>>built
define(["exports","../../FunctionWrapper","../../../chunks/languageUtils","../../../geometry/Geometry"],function(n,t,h,u){function d(a,b){switch(b.type){case "EmptyStatement":return"";case "VariableDeclarator":var c=null===b.init?null:d(a,b.init);a=m(b.name,a.mangles);a=""===c?a:a+" \x3d "+c;return a;case "VariableDeclaration":c=[];for(var e=0;e<b.declarations.length;e++)c.push(d(a,b.declarations[e]));return a="var "+c.join(",")+"; ";case "BlockStatement":c="{\n";for(e=0;e<b.body.length;e++)c+=d(a,
b.body[e])+" \n";return a=c+"}\n";case "FunctionDeclaration":{e="function "+p(b.id.name,a.globalMangles,{});var f=[],g={};g={};const q={};for(c of b.params){const v=m(c.name,q);f.push(v);g[c.name]=1}e+="("+f.join(",")+") ";a=e+=d({functions:a.functions,globals:a.globals,symbols:a.symbols,context:a.context,globalMangles:a.globalMangles,localMangles:q,locals:g},b.body)}return a;case "ReturnStatement":return a=null===b.argument?"return;":"return "+d(a,b.argument)+";\n",a;case "IfStatement":return"if "+
d(a,b.test)+" "+d(a,b.consequent)+(null!==b.alternate?"else "+d(a,b.alternate):"");case "ExpressionStatement":return d(a,b.expression)+";";case "AssignmentExpression":return d(a,b.left)+" "+b.operator+" "+d(a,b.right);case "UpdateExpression":return a=!0===b.prefix?b.operator+d(a,b.argument):d(a,b.argument)+b.operator,a;case "BreakStatement":return"break;";case "ContinueStatement":return"continue;";case "ForStatement":return c="for(",null!==b.init&&(c+=d(a,b.init)),c+=";",c=null!==b.test?c+d(a,b.test):
c+" ;",c=null!==b.update?c+d(a,b.update):c+" ;",a=c=c+") "+(d(a,b.body)+"\n");case "ForInStatement":return"for( "+d(a,b.left)+" in "+d(a,b.right)+") "+d(a,b.body)+"\n";case "Identifier":return w(a,b);case "MemberExpression":return a="true"===b.computed?d(a,b.object)+"["+d(a,b.property)+"]":d(a,b.object)+"."+b.property.name,a;case "Literal":return null===b.value||void 0===b.value?"null":JSON.stringify(b.value);case "ThisExpression":throw Error("NOTSUPPORTED");case "CallExpression":c=d(a,b.callee)+
"(";f=[];for(e of b.arguments)f.push(d(a,e));return a=c+=f.join(",")+")";case "UnaryExpression":return a=!0===b.prefix?b.operator+d(a,b.argument):d(a,b.argument)+b.operator,a;case "BinaryExpression":return"("+d(a,b.left)+" "+b.operator+" "+d(a,b.right)+")";case "LogicalExpression":return d(a,b.left)+" "+b.operator+" "+d(a,b.right);case "ConditionalExpression":throw Error("NOTSUPPORTED");case "ArrayExpression":c=[];for(e=0;e<b.elements.length;e++)c.push(d(a,b.elements[e]));return a="["+c.join(",")+
"]";case "ObjectExpression":c="{";for(e=0;e<b.properties.length;e++)g=b.properties[e],f="Identifier"===g.key.type?JSON.stringify(g.key.name):d(a,g.key),g=d(a,g.value),c+=f+":"+g;return a=c+"}";case "Property":throw Error("Not Supported");case "Array":throw Error("NOTSUPPORTED");default:throw Error("UNREOGNISED");}}function w(a,b){var c=b.name.toLowerCase();if(void 0===a.locals[c]){c=a.context.globalScope[c];if(void 0===c)return b.name;if(null!==c){if(c.value instanceof t)return r(c.value,a.functions,
a.globals,a.symbols);if(null==c)return c=k(a.symbols),a.globals.push({name:c,type:"null",params:{value:null}}),c;if(c instanceof u)return b=k(a.symbols),a.globals.push({name:b,type:"geometry",params:{value:c}}),b;if(h.isNumber(c))return b=k(a.symbols),a.globals.push({name:b,type:"number",params:{value:c}}),b;if(h.isDate(c))return b=k(a.symbols),a.globals.push({name:b,type:"date",params:{value:h.toDate(c).getTime()}}),b;if(h.isString(c))return b=k(a.symbols),a.globals.push({name:b,type:"string",params:{value:c}}),
b;if(!h.isFeatureSet(c)&&!h.isImmutableArray(c)&&!h.isArray(c))throw Error("Unsupported Type");}}else return p(b.name,a.globalMangles,a.localMangles);return b.name}function k(a){let b=!1,c="";for(;!1===b;)c="$gi_"+l.toString(),l++,void 0===a.syms[c]&&(b=!0);return c}function m(a,b){const c="$$fc_"+l.toString();l++;return b[a]=c}function p(a,b,c){return void 0===c[a]?void 0===b[a]?a:b[a]:c[a]}function r(a,b,c,e){c={functions:b,globals:c,symbols:e,context:a.context,locals:{},globalMangles:{},localMangles:{}};
var f=a.definition.id.name;if(void 0!==b.lkp[f])return b.lkp[f].mangledname;e=m(f,c.globalMangles);f={name:f,mangledname:e,script:""};f.script=d(c,a.definition);b.lkp[f.name]=f;b.stack.push(f);return e}let l=0;n.exportFunctionAsArcade=r;Object.defineProperty(n,"__esModule",{value:!0})});