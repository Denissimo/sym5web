// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.20/esri/copyright.txt for details.
//>>built
define(["exports","../Dictionary","../Feature","../../chunks/languageUtils","../featureset/support/shared"],function(m,k,l,b,n){function p(c){return c&&c.domain?"coded-value"===c.domain.type||"codedValue"===c.domain.type?k.convertObjectToArcadeDictionary({type:"codedValue",name:c.domain.name,dataType:n.layerFieldEsriConstants[c.field.type],codedValues:c.domain.codedValues.map(d=>({name:d.name,code:d.code}))}):k.convertObjectToArcadeDictionary({type:"range",name:c.domain.name,dataType:n.layerFieldEsriConstants[c.field.type],
min:c.domain.min,max:c.domain.max}):null}m.registerFunctions=function(c){"async"===c.mode&&(c.functions.domain=function(d,f){return c.standardFunctionAsync(d,f,function(e,g,a){b.pcCheck(a,2,3);if(a[0]instanceof l)return e=a[0].fullDomain(b.toString(a[1]),void 0===a[2]?void 0:b.toNumber(a[2])),p(e);if(b.isFeatureSet(a[0]))return a[0]._ensureLoaded().then(()=>{const h=b.getDomain(b.toString(a[1]),a[0],null,void 0===a[2]?void 0:b.toNumber(a[2]));return p(h)});throw Error("Invalid Parameter");})},c.functions.subtypes=
function(d,f){return c.standardFunctionAsync(d,f,function(e,g,a){b.pcCheck(a,1,1);if(a[0]instanceof l)return(e=a[0].subtypes())?k.convertObjectToArcadeDictionary(e):null;if(b.isFeatureSet(a[0]))return a[0]._ensureLoaded().then(()=>{const h=a[0].subtypes();return h?k.convertObjectToArcadeDictionary(h):null});throw Error("Invalid Parameter");})},c.functions.domainname=function(d,f){return c.standardFunctionAsync(d,f,function(e,g,a){b.pcCheck(a,2,4);if(a[0]instanceof l)return a[0].domainValueLookup(b.toString(a[1]),
a[2],void 0===a[3]?void 0:b.toNumber(a[3]));if(b.isFeatureSet(a[0]))return a[0]._ensureLoaded().then(()=>{const h=b.getDomain(b.toString(a[1]),a[0],null,void 0===a[3]?void 0:b.toNumber(a[3]));return b.getDomainValue(h,a[2])});throw Error("Invalid Parameter");})},c.signatures.push({name:"domainname",min:"2",max:"4"}),c.functions.domaincode=function(d,f){return c.standardFunctionAsync(d,f,function(e,g,a){b.pcCheck(a,2,4);if(a[0]instanceof l)return a[0].domainCodeLookup(b.toString(a[1]),a[2],void 0===
a[3]?void 0:b.toNumber(a[3]));if(b.isFeatureSet(a[0]))return a[0]._ensureLoaded().then(()=>{const h=b.getDomain(b.toString(a[1]),a[0],null,void 0===a[3]?void 0:b.toNumber(a[3]));return b.getDomainCode(h,a[2])});throw Error("Invalid Parameter");})},c.signatures.push({name:"domaincode",min:"2",max:"4"}));c.functions.text=function(d,f){return c.standardFunctionAsync(d,f,function(e,g,a){b.pcCheck(a,1,2);if(b.isFeatureSet(a[0])){g=b.defaultUndefined(a[1],"");if(""===g)return a[0].castToText();if("schema"===
g.toLowerCase())return a[0].convertToText("schema",e.abortSignal);if("featureset"===g.toLowerCase())return a[0].convertToText("featureset",e.abortSignal)}else return b.toStringExplicit(a[0],a[1])})};c.functions.gdbversion=function(d,f){return c.standardFunctionAsync(d,f,function(e,g,a){b.pcCheck(a,1,1);if(a[0]instanceof l)return a[0].gdbVersion();if(b.isFeatureSet(a[0]))return a[0].load().then(h=>h.gdbVersion);throw Error("Invalid Parameter");})};c.functions.schema=function(d,f){return c.standardFunctionAsync(d,
f,function(e,g,a){b.pcCheck(a,1,1);if(b.isFeatureSet(a[0]))return a[0].load().then(()=>k.convertObjectToArcadeDictionary(a[0].schema()));if(a[0]instanceof l)return(e=a[0].schema())?k.convertObjectToArcadeDictionary(e):null;throw Error("Invalid Parameter");})}};Object.defineProperty(m,"__esModule",{value:!0})});