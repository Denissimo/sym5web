// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.20/esri/copyright.txt for details.
//>>built
define(["exports","../../../chunks/_rollupPluginBabelHelpers","../CIMCursor","../CurveHelper"],function(t,v,g,w){let u=function(){function d(){}d.local=function(){null===d.instance&&(d.instance=new d);return d.instance};d.prototype.execute=function(h,l,a){return new x(h,l,a)};return d}();u.instance=null;let x=function(d){function h(a,b,c){a=d.call(this,a,!0,!0)||this;a._curveHelper=new w.CurveHelper;a._angleToLine=void 0!==b.angleToLine?b.angleToLine:!0;a._offset=void 0!==b.offset?b.offset*c:0;a._relativeTo=
b.relativeTo;a._position=void 0!==b.startPointOffset?b.startPointOffset*c:0;a._epsilon=.001*c;return a}v._inheritsLoose(h,d);var l=h.prototype;l.processPath=function(a){var b=this._position;if("SegmentMidpoint"===this._relativeTo){this.iteratePath||(this._segmentCount=a.length,this._curSegment=1,this.iteratePath=!0);for(;this._curSegment<this._segmentCount;){var c=this._curSegment;this._curSegment++;b=a[c-1];c=a[c];const e=this._curveHelper.calculateLength(b,c);if(e<this._epsilon)continue;a=.5+this._position/
e;const [m,f]=this._curveHelper.getAngleCS(b,c,a);a=g.getCoord2D(b,c,a);this.internalPlacement.setTranslate(a[0]-this._offset*f,a[1]+this._offset*m);this._angleToLine&&this.internalPlacement.setRotateCS(m,f);return this.internalPlacement}this.iteratePath=!1;return null}"LineEnd"===this._relativeTo&&g.reversePath(a);b=this.onLine(a,b);"LineEnd"===this._relativeTo&&g.reversePath(a);return b};l.onLine=function(a,b){let c,e=!1;switch(this._relativeTo){default:c=this._curveHelper.calculatePathLength(a)/
2+b;break;case "LineBeginning":c=b;break;case "LineEnd":c=b,e=!0}const m=a.length;let f=0,k=a[0];for(let n=1;n<m;++n){b=k;k=a[n];const p=this._curveHelper.calculateLength(b,k);if(f+p>c){a=(c-f)/p;const [q,r]=this._curveHelper.getAngleCS(b,k,a);a=g.getCoord2D(b,k,a);b=e?this._offset:-this._offset;this.internalPlacement.setTranslate(a[0]-b*r,a[1]+b*q);this._angleToLine&&(e?this.internalPlacement.setRotateCS(-q,-r):this.internalPlacement.setRotateCS(q,r));return this.internalPlacement}f+=p}return null};
return h}(g.PathTransformationCursor);t.PlacementOnLine=u;Object.defineProperty(t,"__esModule",{value:!0})});