// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.20/esri/copyright.txt for details.
//>>built
define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/jsonMap ../core/accessorSupport/decorators/subclass ../geometry/Extent ../geometry/SpatialReference ../rest/geoprocessor/execute ../rest/geoprocessor/submitJob ../rest/geoprocessor/GPOptions ../rest/support/JobInfo ./Task".split(" "),function(m,f,h,d,B,C,D,q,r,n,t,u,k,v,w){d=function(p){function l(a){a=p.call(this,a)||this;
a._jobs=new Map;a.outSpatialReference=null;a.processExtent=null;a.processSpatialReference=null;a.returnFeatureCollection=!1;a.returnM=!1;a.returnZ=!1;return a}m._inheritsLoose(l,p);var c=l.prototype;c.destroy=function(){this._jobs.forEach(a=>a.destroy());this._jobs.clear()};c.cancelJob=function(a,b){return this._getOrAddJob(a).cancelJob({...this.requestOptions,...b})};c.checkJobStatus=function(a,b){return this._getOrAddJob(a).checkJobStatus({...this.requestOptions,...b})};c.execute=function(a,b){const g=
new k({outSpatialReference:this.outSpatialReference,processExtent:this.processExtent,processSpatialReference:this.processSpatialReference,returnFeatureCollection:this.returnFeatureCollection,returnM:this.returnM,returnZ:this.returnZ});return t.execute(this.url,a,g,{...this.requestOptions,...b})};c.getResultData=function(a,b,g){a=this._getOrAddJob(a);const {returnFeatureCollection:e,returnM:x,returnZ:y,outSpatialReference:z}=this,A=new k({returnFeatureCollection:e,returnM:x,returnZ:y,outSpatialReference:z,
url:this.url});return a.fetchResultData(b,A,{...this.requestOptions,...g})};c.getResultImage=function(a,b,g,e){return this._getOrAddJob(a).fetchResultImage(b,g,{...this.requestOptions,...e})};c.getResultMapImageLayer=function(){var a=m._asyncToGenerator(function*(b){return this._getOrAddJob(b).fetchResultMapImageLayer()});return function(b){return a.apply(this,arguments)}}();c.submitJob=function(a,b){const g=new k({outSpatialReference:this.outSpatialReference,processExtent:this.processExtent,processSpatialReference:this.processSpatialReference,
returnFeatureCollection:this.returnFeatureCollection,returnM:this.returnM,returnZ:this.returnZ});return u.submitJob(this.url,a,g,{...this.requestOptions,...b}).then(e=>{e.sourceUrl=this.url;this._jobs.set(e.jobId,e);return e})};c.waitForJobCompletion=function(a,b={}){return this._getOrAddJob(a).waitForJobCompletion(b)};c._getOrAddJob=function(a){let b=this._jobs.get(a);b||(b=new v({sourceUrl:this.url,jobId:a}),this._jobs.set(b.jobId,b));return b};return l}(w);f.__decorate([h.property({type:n})],d.prototype,
"outSpatialReference",void 0);f.__decorate([h.property({type:r})],d.prototype,"processExtent",void 0);f.__decorate([h.property({type:n})],d.prototype,"processSpatialReference",void 0);f.__decorate([h.property({nonNullable:!0})],d.prototype,"returnFeatureCollection",void 0);f.__decorate([h.property({nonNullable:!0})],d.prototype,"returnM",void 0);f.__decorate([h.property({nonNullable:!0})],d.prototype,"returnZ",void 0);return d=f.__decorate([q.subclass("esri/tasks/Geoprocessor")],d)});