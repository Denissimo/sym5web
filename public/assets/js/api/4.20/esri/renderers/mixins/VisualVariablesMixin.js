// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.20/esri/copyright.txt for details.
//>>built
define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../layers/support/fieldUtils ../visualVariables/ColorVariable ../visualVariables/OpacityVariable ../visualVariables/RotationVariable ../visualVariables/SizeVariable ../visualVariables/VisualVariable ../visualVariables/VisualVariableFactory".split(" "),
function(n,l,h,q,C,D,E,F,r,t,u,m,v,w,x,y,z,A){const B={base:z,key:"type",typeMap:{opacity:w,color:v,rotation:x,size:y}};n.VisualVariablesMixin=e=>{e=function(p){function k(){var b=p.apply(this,arguments)||this;b._vvFactory=new A;return b}l._inheritsLoose(k,p);var g=k.prototype;g.readVisualVariables=function(b,a,c){return this._vvFactory.readVariables(b,a,c)};g.writeVisualVariables=function(b,a,c,d){a[c]=this._vvFactory.writeVariables(b,d)};g.hasVisualVariables=function(b,a){return b?!!this.getVisualVariablesForType(b,
a):!!(this.getVisualVariablesForType("size",a)||this.getVisualVariablesForType("color",a)||this.getVisualVariablesForType("opacity",a)||this.getVisualVariablesForType("rotation",a))};g.getVisualVariablesForType=function(b,a){var c=this.visualVariables;if(c&&(c=c.filter(d=>d.type===b&&("string"===typeof a?d.target===a:!1===a?!d.target:!0)),!c||0!==c.length))return c};g.collectVVRequiredFields=function(){var b=l._asyncToGenerator(function*(a,c){let d=[];this.visualVariables&&(d=d.concat(this.visualVariables));
for(const f of d)f&&(f.field&&m.collectField(a,c,f.field),f.normalizationField&&m.collectField(a,c,f.normalizationField),f.valueExpression&&(yield m.collectArcadeFieldNames(a,c,f.valueExpression)))});return function(a,c){return b.apply(this,arguments)}}();l._createClass(k,[{key:"visualVariables",set:function(b){this._vvFactory.visualVariables=b;this._set("visualVariables",this._vvFactory.visualVariables)}},{key:"arcadeRequiredForVisualVariables",get:function(){if(!this.visualVariables)return!1;for(const b of this.visualVariables)if(b.arcadeRequired)return!0;
return!1}}]);return k}(e);h.__decorate([q.property({types:[B],value:null,json:{write:!0}})],e.prototype,"visualVariables",null);h.__decorate([r.reader("visualVariables",["visualVariables","rotationType","rotationExpression"])],e.prototype,"readVisualVariables",null);h.__decorate([u.writer("visualVariables")],e.prototype,"writeVisualVariables",null);return e=h.__decorate([t.subclass("esri.renderers.mixins.VisualVariablesMixin")],e)};Object.defineProperty(n,"__esModule",{value:!0})});